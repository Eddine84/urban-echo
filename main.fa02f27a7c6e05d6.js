(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{5083:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{E_:()=>rn,F3:()=>yt,I9:()=>jt});var V=_e(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var qt=function(Te){return Te.Unimplemented="UNIMPLEMENTED",Te.Unavailable="UNAVAILABLE",Te}(qt||{});class jt extends Error{constructor(on,Qt,En){super(on),this.message=on,this.code=Qt,this.data=En}}const C=Te=>{var on,Qt,En,oo,Vn;const Ke=Te.CapacitorCustomPlatform||null,Ae=Te.Capacitor||{},Ge=Ae.Plugins=Ae.Plugins||{},et=Te.CapacitorPlatforms,qn=(null===(on=null==et?void 0:et.currentPlatform)||void 0===on?void 0:on.getPlatform)||(()=>null!==Ke?Ke.name:(Te=>{var on,Qt;return null!=Te&&Te.androidBridge?"android":null!==(Qt=null===(on=null==Te?void 0:Te.webkit)||void 0===on?void 0:on.messageHandlers)&&void 0!==Qt&&Qt.bridge?"ios":"web"})(Te)),go=(null===(Qt=null==et?void 0:et.currentPlatform)||void 0===Qt?void 0:Qt.isNativePlatform)||(()=>"web"!==qn()),dr=(null===(En=null==et?void 0:et.currentPlatform)||void 0===En?void 0:En.isPluginAvailable)||(ji=>{const vi=ko.get(ji);return!!(null!=vi&&vi.platforms.has(qn())||Dr(ji))}),Dr=(null===(oo=null==et?void 0:et.currentPlatform)||void 0===oo?void 0:oo.getPluginHeader)||(ji=>{var vi;return null===(vi=Ae.PluginHeaders)||void 0===vi?void 0:vi.find(Yi=>Yi.name===ji)}),ko=new Map,Wr=(null===(Vn=null==et?void 0:et.currentPlatform)||void 0===Vn?void 0:Vn.registerPlugin)||((ji,vi={})=>{const Yi=ko.get(ji);if(Yi)return console.warn(`Capacitor plugin "${ji}" already registered. Cannot register plugins twice.`),Yi.proxy;const ui=qn(),Ni=Dr(ji);let po;const Xi=function(){var zr=(0,V.A)(function*(){return!po&&ui in vi?po=po="function"==typeof vi[ui]?yield vi[ui]():vi[ui]:null!==Ke&&!po&&"web"in vi&&(po=po="function"==typeof vi.web?yield vi.web():vi.web),po});return function(){return zr.apply(this,arguments)}}(),Br=zr=>{let Zr;const Qr=(...Wo)=>{const lr=Xi().then(Pr=>{const xr=((zr,Zr)=>{var Qr,Wo;if(!Ni){if(zr)return null===(Wo=zr[Zr])||void 0===Wo?void 0:Wo.bind(zr);throw new jt(`"${ji}" plugin is not implemented on ${ui}`,qt.Unimplemented)}{const lr=null==Ni?void 0:Ni.methods.find(Pr=>Zr===Pr.name);if(lr)return"promise"===lr.rtype?Pr=>Ae.nativePromise(ji,Zr.toString(),Pr):(Pr,xr)=>Ae.nativeCallback(ji,Zr.toString(),Pr,xr);if(zr)return null===(Qr=zr[Zr])||void 0===Qr?void 0:Qr.bind(zr)}})(Pr,zr);if(xr){const wr=xr(...Wo);return Zr=null==wr?void 0:wr.remove,wr}throw new jt(`"${ji}.${zr}()" is not implemented on ${ui}`,qt.Unimplemented)});return"addListener"===zr&&(lr.remove=(0,V.A)(function*(){return Zr()})),lr};return Qr.toString=()=>`${zr.toString()}() { [capacitor code] }`,Object.defineProperty(Qr,"name",{value:zr,writable:!1,configurable:!1}),Qr},So=Br("addListener"),ro=Br("removeListener"),fo=(zr,Zr)=>{const Qr=So({eventName:zr},Zr),Wo=function(){var Pr=(0,V.A)(function*(){const xr=yield Qr;ro({eventName:zr,callbackId:xr},Zr)});return function(){return Pr.apply(this,arguments)}}(),lr=new Promise(Pr=>Qr.then(()=>Pr({remove:Wo})));return lr.remove=(0,V.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Wo()}),lr},Ts=new Proxy({},{get(zr,Zr){switch(Zr){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Ni?fo:So;case"removeListener":return ro;default:return Br(Zr)}}});return Ge[ji]=Ts,ko.set(ji,{name:ji,proxy:Ts,platforms:new Set([...Object.keys(vi),...Ni?[ui]:[]])}),Ts});return Ae.convertFileSrc||(Ae.convertFileSrc=ji=>ji),Ae.getPlatform=qn,Ae.handleError=ji=>Te.console.error(ji),Ae.isNativePlatform=go,Ae.isPluginAvailable=dr,Ae.pluginMethodNoop=(ji,vi,Yi)=>Promise.reject(`${Yi} does not have an implementation of "${vi}".`),Ae.registerPlugin=Wr,Ae.Exception=jt,Ae.DEBUG=!!Ae.DEBUG,Ae.isLoggingEnabled=!!Ae.isLoggingEnabled,Ae.platform=Ae.getPlatform(),Ae.isNative=Ae.isNativePlatform(),Ae},Ut=(Te=>Te.Capacitor=C(Te))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),yt=Ut.registerPlugin;class rn{constructor(on){this.listeners={},this.retainedEventArguments={},this.windowListeners={},on&&(console.warn(`Capacitor WebPlugin "${on.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=on)}addListener(on,Qt){var En=this;let oo=!1;this.listeners[on]||(this.listeners[on]=[],oo=!0),this.listeners[on].push(Qt);const Ke=this.windowListeners[on];Ke&&!Ke.registered&&this.addWindowListener(Ke),oo&&this.sendRetainedArgumentsForEvent(on);const Ae=function(){var et=(0,V.A)(function*(){return En.removeListener(on,Qt)});return function(){return et.apply(this,arguments)}}();return Promise.resolve({remove:Ae})}removeAllListeners(){var on=this;return(0,V.A)(function*(){on.listeners={};for(const Qt in on.windowListeners)on.removeWindowListener(on.windowListeners[Qt]);on.windowListeners={}})()}notifyListeners(on,Qt,En){const oo=this.listeners[on];if(oo)oo.forEach(Vn=>Vn(Qt));else if(En){let Vn=this.retainedEventArguments[on];Vn||(Vn=[]),Vn.push(Qt),this.retainedEventArguments[on]=Vn}}hasListeners(on){return!!this.listeners[on].length}registerWindowListener(on,Qt){this.windowListeners[Qt]={registered:!1,windowEventName:on,pluginEventName:Qt,handler:En=>{this.notifyListeners(Qt,En)}}}unimplemented(on="not implemented"){return new Ut.Exception(on,qt.Unimplemented)}unavailable(on="not available"){return new Ut.Exception(on,qt.Unavailable)}removeListener(on,Qt){var En=this;return(0,V.A)(function*(){const oo=En.listeners[on];if(!oo)return;const Vn=oo.indexOf(Qt);En.listeners[on].splice(Vn,1),En.listeners[on].length||En.removeWindowListener(En.windowListeners[on])})()}addWindowListener(on){window.addEventListener(on.windowEventName,on.handler),on.registered=!0}removeWindowListener(on){on&&(window.removeEventListener(on.windowEventName,on.handler),on.registered=!1)}sendRetainedArgumentsForEvent(on){const Qt=this.retainedEventArguments[on];Qt&&(delete this.retainedEventArguments[on],Qt.forEach(En=>{this.notifyListeners(on,En)}))}}const ei=Te=>encodeURIComponent(Te).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Mn=Te=>Te.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Zn extends rn{getCookies(){return(0,V.A)(function*(){const on=document.cookie,Qt={};return on.split(";").forEach(En=>{if(En.length<=0)return;let[oo,Vn]=En.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");oo=Mn(oo).trim(),Vn=Mn(Vn).trim(),Qt[oo]=Vn}),Qt})()}setCookie(on){return(0,V.A)(function*(){try{const Qt=ei(on.key),En=ei(on.value),oo=`; expires=${(on.expires||"").replace("expires=","")}`,Vn=(on.path||"/").replace("path=",""),Ke=null!=on.url&&on.url.length>0?`domain=${on.url}`:"";document.cookie=`${Qt}=${En||""}${oo}; path=${Vn}; ${Ke};`}catch(Qt){return Promise.reject(Qt)}})()}deleteCookie(on){return(0,V.A)(function*(){try{document.cookie=`${on.key}=; Max-Age=0`}catch(Qt){return Promise.reject(Qt)}})()}clearCookies(){return(0,V.A)(function*(){try{const on=document.cookie.split(";")||[];for(const Qt of on)document.cookie=Qt.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(on){return Promise.reject(on)}})()}clearAllCookies(){var on=this;return(0,V.A)(function*(){try{yield on.clearCookies()}catch(Qt){return Promise.reject(Qt)}})()}}yt("CapacitorCookies",{web:()=>new Zn});const Ot=function(){var Te=(0,V.A)(function*(on){return new Promise((Qt,En)=>{const oo=new FileReader;oo.onload=()=>{const Vn=oo.result;Qt(Vn.indexOf(",")>=0?Vn.split(",")[1]:Vn)},oo.onerror=Vn=>En(Vn),oo.readAsDataURL(on)})});return function(Qt){return Te.apply(this,arguments)}}();class Et extends rn{request(on){return(0,V.A)(function*(){const Qt=((Te,on={})=>{const Qt=Object.assign({method:Te.method||"GET",headers:Te.headers},on),oo=((Te={})=>{const on=Object.keys(Te);return Object.keys(Te).map(oo=>oo.toLocaleLowerCase()).reduce((oo,Vn,Ke)=>(oo[Vn]=Te[on[Ke]],oo),{})})(Te.headers)["content-type"]||"";if("string"==typeof Te.data)Qt.body=Te.data;else if(oo.includes("application/x-www-form-urlencoded")){const Vn=new URLSearchParams;for(const[Ke,Ae]of Object.entries(Te.data||{}))Vn.set(Ke,Ae);Qt.body=Vn.toString()}else if(oo.includes("multipart/form-data")||Te.data instanceof FormData){const Vn=new FormData;if(Te.data instanceof FormData)Te.data.forEach((Ae,Ge)=>{Vn.append(Ge,Ae)});else for(const Ae of Object.keys(Te.data))Vn.append(Ae,Te.data[Ae]);Qt.body=Vn;const Ke=new Headers(Qt.headers);Ke.delete("content-type"),Qt.headers=Ke}else(oo.includes("application/json")||"object"==typeof Te.data)&&(Qt.body=JSON.stringify(Te.data));return Qt})(on,on.webFetchExtra),En=((Te,on=!0)=>Te?Object.entries(Te).reduce((En,oo)=>{const[Vn,Ke]=oo;let Ae,Ge;return Array.isArray(Ke)?(Ge="",Ke.forEach(et=>{Ae=on?encodeURIComponent(et):et,Ge+=`${Vn}=${Ae}&`}),Ge.slice(0,-1)):(Ae=on?encodeURIComponent(Ke):Ke,Ge=`${Vn}=${Ae}`),`${En}&${Ge}`},"").substr(1):null)(on.params,on.shouldEncodeUrlParams),oo=En?`${on.url}?${En}`:on.url,Vn=yield fetch(oo,Qt),Ke=Vn.headers.get("content-type")||"";let Ge,et,{responseType:Ae="text"}=Vn.ok?on:{};switch(Ke.includes("application/json")&&(Ae="json"),Ae){case"arraybuffer":case"blob":et=yield Vn.blob(),Ge=yield Ot(et);break;case"json":Ge=yield Vn.json();break;default:Ge=yield Vn.text()}const zt={};return Vn.headers.forEach((qn,un)=>{zt[un]=qn}),{data:Ge,headers:zt,status:Vn.status,url:Vn.url}})()}get(on){var Qt=this;return(0,V.A)(function*(){return Qt.request(Object.assign(Object.assign({},on),{method:"GET"}))})()}post(on){var Qt=this;return(0,V.A)(function*(){return Qt.request(Object.assign(Object.assign({},on),{method:"POST"}))})()}put(on){var Qt=this;return(0,V.A)(function*(){return Qt.request(Object.assign(Object.assign({},on),{method:"PUT"}))})()}patch(on){var Qt=this;return(0,V.A)(function*(){return Qt.request(Object.assign(Object.assign({},on),{method:"PATCH"}))})()}delete(on){var Qt=this;return(0,V.A)(function*(){return Qt.request(Object.assign(Object.assign({},on),{method:"DELETE"}))})()}}yt("CapacitorHttp",{web:()=>new Et})},1076:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Am:()=>bs,FA:()=>go,Fy:()=>wn,I9:()=>Br,Im:()=>Yi,Ku:()=>Kn,T9:()=>Zn,Tj:()=>ei,Uj:()=>jt,XA:()=>xt,ZQ:()=>Pn,bD:()=>Ni,cY:()=>Ot,eX:()=>et,g:()=>un,hp:()=>So,jZ:()=>Ii,lT:()=>oo,lV:()=>Qt,nr:()=>Ae,sr:()=>on,tD:()=>fo,u:()=>wt,yU:()=>Mn,zW:()=>Ge});const l=function(kt){const mt=[];let Ye=0;for(let Tt=0;Tt<kt.length;Tt++){let Jt=kt.charCodeAt(Tt);Jt<128?mt[Ye++]=Jt:Jt<2048?(mt[Ye++]=Jt>>6|192,mt[Ye++]=63&Jt|128):55296==(64512&Jt)&&Tt+1<kt.length&&56320==(64512&kt.charCodeAt(Tt+1))?(Jt=65536+((1023&Jt)<<10)+(1023&kt.charCodeAt(++Tt)),mt[Ye++]=Jt>>18|240,mt[Ye++]=Jt>>12&63|128,mt[Ye++]=Jt>>6&63|128,mt[Ye++]=63&Jt|128):(mt[Ye++]=Jt>>12|224,mt[Ye++]=Jt>>6&63|128,mt[Ye++]=63&Jt|128)}return mt},Y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(kt,mt){if(!Array.isArray(kt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ye=mt?this.byteToCharMapWebSafe_:this.byteToCharMap_,Tt=[];for(let Jt=0;Jt<kt.length;Jt+=3){const Ln=kt[Jt],Lt=Jt+1<kt.length,Ee=Lt?kt[Jt+1]:0,ue=Jt+2<kt.length,ae=ue?kt[Jt+2]:0;let it=(15&Ee)<<2|ae>>6,Xt=63&ae;ue||(Xt=64,Lt||(it=64)),Tt.push(Ye[Ln>>2],Ye[(3&Ln)<<4|Ee>>4],Ye[it],Ye[Xt])}return Tt.join("")},encodeString(kt,mt){return this.HAS_NATIVE_SUPPORT&&!mt?btoa(kt):this.encodeByteArray(l(kt),mt)},decodeString(kt,mt){return this.HAS_NATIVE_SUPPORT&&!mt?atob(kt):function(kt){const mt=[];let Ye=0,Tt=0;for(;Ye<kt.length;){const Jt=kt[Ye++];if(Jt<128)mt[Tt++]=String.fromCharCode(Jt);else if(Jt>191&&Jt<224){const Ln=kt[Ye++];mt[Tt++]=String.fromCharCode((31&Jt)<<6|63&Ln)}else if(Jt>239&&Jt<365){const ue=((7&Jt)<<18|(63&kt[Ye++])<<12|(63&kt[Ye++])<<6|63&kt[Ye++])-65536;mt[Tt++]=String.fromCharCode(55296+(ue>>10)),mt[Tt++]=String.fromCharCode(56320+(1023&ue))}else{const Ln=kt[Ye++],Lt=kt[Ye++];mt[Tt++]=String.fromCharCode((15&Jt)<<12|(63&Ln)<<6|63&Lt)}}return mt.join("")}(this.decodeStringToByteArray(kt,mt))},decodeStringToByteArray(kt,mt){this.init_();const Ye=mt?this.charToByteMapWebSafe_:this.charToByteMap_,Tt=[];for(let Jt=0;Jt<kt.length;){const Ln=Ye[kt.charAt(Jt++)],Ee=Jt<kt.length?Ye[kt.charAt(Jt)]:0;++Jt;const ae=Jt<kt.length?Ye[kt.charAt(Jt)]:64;++Jt;const Ue=Jt<kt.length?Ye[kt.charAt(Jt)]:64;if(++Jt,null==Ln||null==Ee||null==ae||null==Ue)throw new ft;Tt.push(Ln<<2|Ee>>4),64!==ae&&(Tt.push(Ee<<4&240|ae>>2),64!==Ue&&Tt.push(ae<<6&192|Ue))}return Tt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let kt=0;kt<this.ENCODED_VALS.length;kt++)this.byteToCharMap_[kt]=this.ENCODED_VALS.charAt(kt),this.charToByteMap_[this.byteToCharMap_[kt]]=kt,this.byteToCharMapWebSafe_[kt]=this.ENCODED_VALS_WEBSAFE.charAt(kt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[kt]]=kt,kt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(kt)]=kt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(kt)]=kt)}}};class ft extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jt=function(kt){return function(kt){const mt=l(kt);return Y.encodeByteArray(mt,!0)}(kt).replace(/\./g,"")},wt=function(kt){try{return Y.decodeString(kt,!0)}catch(mt){console.error("base64Decode failed: ",mt)}return null},ht=()=>{try{return function yt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const kt=process.env.__FIREBASE_DEFAULTS__;return kt?JSON.parse(kt):void 0})()||(()=>{if(typeof document>"u")return;let kt;try{kt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const mt=kt&&wt(kt[1]);return mt&&JSON.parse(mt)})()}catch(kt){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${kt}`)}},ei=kt=>{var mt,Ye;return null===(Ye=null===(mt=ht())||void 0===mt?void 0:mt.emulatorHosts)||void 0===Ye?void 0:Ye[kt]},Mn=kt=>{const mt=ei(kt);if(!mt)return;const Ye=mt.lastIndexOf(":");if(Ye<=0||Ye+1===mt.length)throw new Error(`Invalid host ${mt} with no separate hostname and port!`);const Tt=parseInt(mt.substring(Ye+1),10);return"["===mt[0]?[mt.substring(1,Ye-1),Tt]:[mt.substring(0,Ye),Tt]},Zn=()=>{var kt;return null===(kt=ht())||void 0===kt?void 0:kt.config},xt=kt=>{var mt;return null===(mt=ht())||void 0===mt?void 0:mt[`_${kt}`]};class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((mt,Ye)=>{this.resolve=mt,this.reject=Ye})}wrapCallback(mt){return(Ye,Tt)=>{Ye?this.reject(Ye):this.resolve(Tt),"function"==typeof mt&&(this.promise.catch(()=>{}),1===mt.length?mt(Ye):mt(Ye,Tt))}}}function wn(kt,mt){if(kt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Tt=mt||"demo-project",Jt=kt.iat||0,Ln=kt.sub||kt.user_id;if(!Ln)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Lt=Object.assign({iss:`https://securetoken.google.com/${Tt}`,aud:Tt,iat:Jt,exp:Jt+3600,auth_time:Jt,sub:Ln,user_id:Ln,firebase:{sign_in_provider:"custom",identities:{}}},kt);return[jt(JSON.stringify({alg:"none",type:"JWT"})),jt(JSON.stringify(Lt)),""].join(".")}function Pn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ii(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function on(){const kt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof kt&&void 0!==kt.id}function Qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function oo(){const kt=Pn();return kt.indexOf("MSIE ")>=0||kt.indexOf("Trident/")>=0}function Ae(){return!function Et(){var kt;const mt=null===(kt=ht())||void 0===kt?void 0:kt.forceEnvironment;if("node"===mt)return!0;if("browser"===mt)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){try{return"object"==typeof indexedDB}catch{return!1}}function et(){return new Promise((kt,mt)=>{try{let Ye=!0;const Tt="validate-browser-context-for-indexeddb-analytics-module",Jt=self.indexedDB.open(Tt);Jt.onsuccess=()=>{Jt.result.close(),Ye||self.indexedDB.deleteDatabase(Tt),kt(!0)},Jt.onupgradeneeded=()=>{Ye=!1},Jt.onerror=()=>{var Ln;mt((null===(Ln=Jt.error)||void 0===Ln?void 0:Ln.message)||"")}}catch(Ye){mt(Ye)}})}class un extends Error{constructor(mt,Ye,Tt){super(Ye),this.code=mt,this.customData=Tt,this.name="FirebaseError",Object.setPrototypeOf(this,un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,go.prototype.create)}}class go{constructor(mt,Ye,Tt){this.service=mt,this.serviceName=Ye,this.errors=Tt}create(mt,...Ye){const Tt=Ye[0]||{},Jt=`${this.service}/${mt}`,Ln=this.errors[mt],Lt=Ln?function Qi(kt,mt){return kt.replace(dr,(Ye,Tt)=>{const Jt=mt[Tt];return null!=Jt?String(Jt):`<${Tt}?>`})}(Ln,Tt):"Error";return new un(Jt,`${this.serviceName}: ${Lt} (${Jt}).`,Tt)}}const dr=/\{\$([^}]+)}/g;function Yi(kt){for(const mt in kt)if(Object.prototype.hasOwnProperty.call(kt,mt))return!1;return!0}function Ni(kt,mt){if(kt===mt)return!0;const Ye=Object.keys(kt),Tt=Object.keys(mt);for(const Jt of Ye){if(!Tt.includes(Jt))return!1;const Ln=kt[Jt],Lt=mt[Jt];if(po(Ln)&&po(Lt)){if(!Ni(Ln,Lt))return!1}else if(Ln!==Lt)return!1}for(const Jt of Tt)if(!Ye.includes(Jt))return!1;return!0}function po(kt){return null!==kt&&"object"==typeof kt}function bs(kt){const mt=[];for(const[Ye,Tt]of Object.entries(kt))Array.isArray(Tt)?Tt.forEach(Jt=>{mt.push(encodeURIComponent(Ye)+"="+encodeURIComponent(Jt))}):mt.push(encodeURIComponent(Ye)+"="+encodeURIComponent(Tt));return mt.length?"&"+mt.join("&"):""}function Br(kt){const mt={};return kt.replace(/^\?/,"").split("&").forEach(Tt=>{if(Tt){const[Jt,Ln]=Tt.split("=");mt[decodeURIComponent(Jt)]=decodeURIComponent(Ln)}}),mt}function So(kt){const mt=kt.indexOf("?");if(!mt)return"";const Ye=kt.indexOf("#",mt);return kt.substring(mt,Ye>0?Ye:void 0)}function fo(kt,mt){const Ye=new Ts(kt,mt);return Ye.subscribe.bind(Ye)}class Ts{constructor(mt,Ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ye,this.task.then(()=>{mt(this)}).catch(Tt=>{this.error(Tt)})}next(mt){this.forEachObserver(Ye=>{Ye.next(mt)})}error(mt){this.forEachObserver(Ye=>{Ye.error(mt)}),this.close(mt)}complete(){this.forEachObserver(mt=>{mt.complete()}),this.close()}subscribe(mt,Ye,Tt){let Jt;if(void 0===mt&&void 0===Ye&&void 0===Tt)throw new Error("Missing Observer.");Jt=function Zr(kt,mt){if("object"!=typeof kt||null===kt)return!1;for(const Ye of mt)if(Ye in kt&&"function"==typeof kt[Ye])return!0;return!1}(mt,["next","error","complete"])?mt:{next:mt,error:Ye,complete:Tt},void 0===Jt.next&&(Jt.next=Qr),void 0===Jt.error&&(Jt.error=Qr),void 0===Jt.complete&&(Jt.complete=Qr);const Ln=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Jt.error(this.finalError):Jt.complete()}catch{}}),this.observers.push(Jt),Ln}unsubscribeOne(mt){void 0===this.observers||void 0===this.observers[mt]||(delete this.observers[mt],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(mt){if(!this.finalized)for(let Ye=0;Ye<this.observers.length;Ye++)this.sendOne(Ye,mt)}sendOne(mt,Ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[mt])try{Ye(this.observers[mt])}catch(Tt){typeof console<"u"&&console.error&&console.error(Tt)}})}close(mt){this.finalized||(this.finalized=!0,void 0!==mt&&(this.finalError=mt),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}function Kn(kt){return kt&&kt._delegate?kt._delegate:kt}},555:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{c:()=>Y});var V=_e(4878);let re;const l=(ft,qt,jt)=>{const wt=qt.startsWith("animation")?(ft=>(void 0===re&&(re=void 0===ft.style.animationName&&void 0!==ft.style.webkitAnimationName?"-webkit-":""),re))(ft):"";ft.style.setProperty(wt+qt,jt)},We=(ft=[],qt)=>{if(void 0!==qt){const jt=Array.isArray(qt)?qt:[qt];return[...ft,...jt]}return ft},Y=ft=>{let qt,jt,wt,C,At,Ut,ht,Ii,Et,kn,En,yt=[],fn=[],xn=[],rn=!1,ei={},Mn=[],Zn=[],xt={},Ot=0,wn=!1,Pn=!1,Te=!0,on=!1,Qt=!0,oo=!1;const Vn=ft,Ke=[],Ae=[],Ge=[],et=[],zt=[],qn=[],un=[],go=[],Qi=[],dr=[],Go=[],Dr="function"==typeof AnimationEffect||void 0!==V.w&&"function"==typeof V.w.AnimationEffect,cr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Dr,Ei=()=>Go,vi=(Kt,oi)=>{const Pi=oi.findIndex(Xo=>Xo.c===Kt);Pi>-1&&oi.splice(Pi,1)},ui=(Kt,oi)=>((null!=oi&&oi.oneTimeCallback?Ae:Ke).push({c:Kt,o:oi}),En),po=()=>{cr&&(Go.forEach(Kt=>{Kt.cancel()}),Go.length=0)},Xi=()=>{qn.forEach(Kt=>{null!=Kt&&Kt.parentNode&&Kt.parentNode.removeChild(Kt)}),qn.length=0},xr=()=>void 0!==At?At:ht?ht.getFill():"both",wr=()=>void 0!==Ii?Ii:void 0!==Ut?Ut:ht?ht.getDirection():"normal",aa=()=>wn?"linear":void 0!==wt?wt:ht?ht.getEasing():"linear",Jn=()=>Pn?0:void 0!==Et?Et:void 0!==jt?jt:ht?ht.getDuration():0,hs=()=>void 0!==C?C:ht?ht.getIterations():1,jr=()=>void 0!==kn?kn:void 0!==qt?qt:ht?ht.getDelay():0,Ee=()=>{0!==Ot&&(Ot--,0===Ot&&((()=>{Qi.forEach(pr=>pr()),dr.forEach(pr=>pr());const Kt=Te?1:0,oi=Mn,Pi=Zn,Xo=xt;et.forEach(pr=>{const es=pr.classList;oi.forEach(qr=>es.add(qr)),Pi.forEach(qr=>es.remove(qr));for(const qr in Xo)Xo.hasOwnProperty(qr)&&l(pr,qr,Xo[qr])}),Et=void 0,Ii=void 0,kn=void 0,Ke.forEach(pr=>pr.c(Kt,En)),Ae.forEach(pr=>pr.c(Kt,En)),Ae.length=0,Qt=!0,Te&&(on=!0),Te=!0})(),ht&&ht.animationFinish()))},ae=()=>{(()=>{un.forEach(Xo=>Xo()),go.forEach(Xo=>Xo());const Kt=fn,oi=xn,Pi=ei;et.forEach(Xo=>{const pr=Xo.classList;Kt.forEach(es=>pr.add(es)),oi.forEach(es=>pr.remove(es));for(const es in Pi)Pi.hasOwnProperty(es)&&l(Xo,es,Pi[es])})})(),yt.length>0&&cr&&(et.forEach(Kt=>{const oi=Kt.animate(yt,{id:Vn,delay:jr(),duration:Jn(),easing:aa(),iterations:hs(),fill:xr(),direction:wr()});oi.pause(),Go.push(oi)}),Go.length>0&&(Go[0].onfinish=()=>{Ee()})),rn=!0},we=Kt=>{Kt=Math.min(Math.max(Kt,0),.9999),cr&&Go.forEach(oi=>{oi.currentTime=oi.effect.getComputedTiming().delay+Jn()*Kt,oi.pause()})},Ue=Kt=>{Go.forEach(oi=>{oi.effect.updateTiming({delay:jr(),duration:Jn(),easing:aa(),iterations:hs(),fill:xr(),direction:wr()})}),void 0!==Kt&&we(Kt)},it=(Kt=!1,oi=!0,Pi)=>(Kt&&zt.forEach(Xo=>{Xo.update(Kt,oi,Pi)}),cr&&Ue(Pi),En),Nn=()=>{rn&&(cr?Go.forEach(Kt=>{Kt.pause()}):et.forEach(Kt=>{l(Kt,"animation-play-state","paused")}),oo=!0)},ii=Kt=>new Promise(oi=>{null!=Kt&&Kt.sync&&(Pn=!0,ui(()=>Pn=!1,{oneTimeCallback:!0})),rn||ae(),on&&(cr&&(we(0),Ue()),on=!1),Qt&&(Ot=zt.length+1,Qt=!1);const Pi=()=>{vi(Xo,Ae),oi()},Xo=()=>{vi(Pi,Ge),oi()};ui(Xo,{oneTimeCallback:!0}),((Kt,oi)=>{Ge.push({c:Kt,o:{oneTimeCallback:!0}})})(Pi),zt.forEach(pr=>{pr.play()}),cr?(Go.forEach(Kt=>{Kt.play()}),(0===yt.length||0===et.length)&&Ee()):Ee(),oo=!1}),di=(Kt,oi)=>{const Pi=yt[0];return void 0===Pi||void 0!==Pi.offset&&0!==Pi.offset?yt=[{offset:0,[Kt]:oi},...yt]:Pi[Kt]=oi,En};return En={parentAnimation:ht,elements:et,childAnimations:zt,id:Vn,animationFinish:Ee,from:di,to:(Kt,oi)=>{const Pi=yt[yt.length-1];return void 0===Pi||void 0!==Pi.offset&&1!==Pi.offset?yt=[...yt,{offset:1,[Kt]:oi}]:Pi[Kt]=oi,En},fromTo:(Kt,oi,Pi)=>di(Kt,oi).to(Kt,Pi),parent:Kt=>(ht=Kt,En),play:ii,pause:()=>(zt.forEach(Kt=>{Kt.pause()}),Nn(),En),stop:()=>{zt.forEach(Kt=>{Kt.stop()}),rn&&(po(),rn=!1),wn=!1,Pn=!1,Qt=!0,Ii=void 0,Et=void 0,kn=void 0,Ot=0,on=!1,Te=!0,oo=!1,Ge.forEach(Kt=>Kt.c(0,En)),Ge.length=0},destroy:Kt=>(zt.forEach(oi=>{oi.destroy(Kt)}),(Kt=>{po(),Kt&&Xi()})(Kt),et.length=0,zt.length=0,yt.length=0,Ke.length=0,Ae.length=0,rn=!1,Qt=!0,En),keyframes:Kt=>{const oi=yt!==Kt;return yt=Kt,oi&&(Kt=>{cr&&Ei().forEach(oi=>{const Pi=oi.effect;if(Pi.setKeyframes)Pi.setKeyframes(Kt);else{const Xo=new KeyframeEffect(Pi.target,Kt,Pi.getTiming());oi.effect=Xo}})})(yt),En},addAnimation:Kt=>{if(null!=Kt)if(Array.isArray(Kt))for(const oi of Kt)oi.parent(En),zt.push(oi);else Kt.parent(En),zt.push(Kt);return En},addElement:Kt=>{if(null!=Kt)if(1===Kt.nodeType)et.push(Kt);else if(Kt.length>=0)for(let oi=0;oi<Kt.length;oi++)et.push(Kt[oi]);else console.error("Invalid addElement value");return En},update:it,fill:Kt=>(At=Kt,it(!0),En),direction:Kt=>(Ut=Kt,it(!0),En),iterations:Kt=>(C=Kt,it(!0),En),duration:Kt=>(!cr&&0===Kt&&(Kt=1),jt=Kt,it(!0),En),easing:Kt=>(wt=Kt,it(!0),En),delay:Kt=>(qt=Kt,it(!0),En),getWebAnimations:Ei,getKeyframes:()=>yt,getFill:xr,getDirection:wr,getDelay:jr,getIterations:hs,getEasing:aa,getDuration:Jn,afterAddRead:Kt=>(Qi.push(Kt),En),afterAddWrite:Kt=>(dr.push(Kt),En),afterClearStyles:(Kt=[])=>{for(const oi of Kt)xt[oi]="";return En},afterStyles:(Kt={})=>(xt=Kt,En),afterRemoveClass:Kt=>(Zn=We(Zn,Kt),En),afterAddClass:Kt=>(Mn=We(Mn,Kt),En),beforeAddRead:Kt=>(un.push(Kt),En),beforeAddWrite:Kt=>(go.push(Kt),En),beforeClearStyles:(Kt=[])=>{for(const oi of Kt)ei[oi]="";return En},beforeStyles:(Kt={})=>(ei=Kt,En),beforeRemoveClass:Kt=>(xn=We(xn,Kt),En),beforeAddClass:Kt=>(fn=We(fn,Kt),En),onFinish:ui,isRunning:()=>0!==Ot&&!oo,progressStart:(Kt=!1,oi)=>(zt.forEach(Pi=>{Pi.progressStart(Kt,oi)}),Nn(),wn=Kt,rn||ae(),it(!1,!0,oi),En),progressStep:Kt=>(zt.forEach(oi=>{oi.progressStep(Kt)}),we(Kt),En),progressEnd:(Kt,oi,Pi)=>(wn=!1,zt.forEach(Xo=>{Xo.progressEnd(Kt,oi,Pi)}),void 0!==Pi&&(Et=Pi),on=!1,Te=!0,0===Kt?(Ii="reverse"===wr()?"normal":"reverse","reverse"===Ii&&(Te=!1),cr?(it(),we(1-oi)):(kn=(1-oi)*Jn()*-1,it(!1,!1))):1===Kt&&(cr?(it(),we(oi)):(kn=oi*Jn()*-1,it(!1,!1))),void 0!==Kt&&!ht&&ii(),En)}}},6081:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{g:()=>re});var V=_e(4878);const re=()=>{if(void 0!==V.w)return V.w.Capacitor}},2782:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{i:()=>V});const V=re=>re&&""!==re.dir?"rtl"===re.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase())},5498:(Yo,Xn,_e)=>{"use strict";_e.r(Xn),_e.d(Xn,{startFocusVisible:()=>l});const V="ion-focused",ne=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],l=We=>{let Y=[],ft=!0;const qt=We?We.shadowRoot:document,jt=We||document.body,wt=xn=>{Y.forEach(rn=>rn.classList.remove(V)),xn.forEach(rn=>rn.classList.add(V)),Y=xn},C=()=>{ft=!1,wt([])},At=xn=>{ft=ne.includes(xn.key),ft||wt([])},Ut=xn=>{if(ft&&void 0!==xn.composedPath){const rn=xn.composedPath().filter(ht=>!!ht.classList&&ht.classList.contains("ion-focusable"));wt(rn)}},yt=()=>{qt.activeElement===jt&&wt([])};return qt.addEventListener("keydown",At),qt.addEventListener("focusin",Ut),qt.addEventListener("focusout",yt),qt.addEventListener("touchstart",C,{passive:!0}),qt.addEventListener("mousedown",C),{destroy:()=>{qt.removeEventListener("keydown",At),qt.removeEventListener("focusin",Ut),qt.removeEventListener("focusout",yt),qt.removeEventListener("touchstart",C),qt.removeEventListener("mousedown",C)},setFocus:wt}}},8875:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{B:()=>l,G:()=>We});class re{constructor(ft,qt,jt,wt,C){this.id=qt,this.name=jt,this.disableScroll=C,this.priority=1e6*wt+qt,this.ctrl=ft}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ft=this.ctrl.capture(this.name,this.id,this.priority);return ft&&this.disableScroll&&this.ctrl.disableScroll(this.id),ft}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ne{constructor(ft,qt,jt,wt){this.id=qt,this.disable=jt,this.disableScroll=wt,this.ctrl=ft}block(){if(this.ctrl){if(this.disable)for(const ft of this.disable)this.ctrl.disableGesture(ft,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ft of this.disable)this.ctrl.enableGesture(ft,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const l="backdrop-no-scroll",We=new class V{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ft){var qt;return new re(this,this.newID(),ft.name,null!==(qt=ft.priority)&&void 0!==qt?qt:0,!!ft.disableScroll)}createBlocker(ft={}){return new ne(this,this.newID(),ft.disable,!!ft.disableScroll)}start(ft,qt,jt){return this.canStart(ft)?(this.requestedStart.set(qt,jt),!0):(this.requestedStart.delete(qt),!1)}capture(ft,qt,jt){if(!this.start(ft,qt,jt))return!1;const wt=this.requestedStart;let C=-1e4;if(wt.forEach(At=>{C=Math.max(C,At)}),C===jt){this.capturedId=qt,wt.clear();const At=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ft}});return document.dispatchEvent(At),!0}return wt.delete(qt),!1}release(ft){this.requestedStart.delete(ft),this.capturedId===ft&&(this.capturedId=void 0)}disableGesture(ft,qt){let jt=this.disabledGestures.get(ft);void 0===jt&&(jt=new Set,this.disabledGestures.set(ft,jt)),jt.add(qt)}enableGesture(ft,qt){const jt=this.disabledGestures.get(ft);void 0!==jt&&jt.delete(qt)}disableScroll(ft){this.disabledScroll.add(ft),1===this.disabledScroll.size&&document.body.classList.add(l)}enableScroll(ft){this.disabledScroll.delete(ft),0===this.disabledScroll.size&&document.body.classList.remove(l)}canStart(ft){return!(void 0!==this.capturedId||this.isDisabled(ft))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ft){const qt=this.disabledGestures.get(ft);return!!(qt&&qt.size>0)}newID(){return this.gestureId++,this.gestureId}}},5098:(Yo,Xn,_e)=>{"use strict";_e.r(Xn),_e.d(Xn,{MENU_BACK_BUTTON_PRIORITY:()=>qt,OVERLAY_BACK_BUTTON_PRIORITY:()=>ft,blockHardwareBackButton:()=>We,shouldUseCloseWatcher:()=>l,startHardwareBackButton:()=>Y});var V=_e(467),re=_e(4878),ne=_e(5531);const l=()=>ne.c.get("experimentalCloseWatcher",!1)&&void 0!==re.w&&"CloseWatcher"in re.w,We=()=>{document.addEventListener("backbutton",()=>{})},Y=()=>{const jt=document;let wt=!1;const C=()=>{if(wt)return;let At=0,Ut=[];const yt=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(rn,ht){Ut.push({priority:rn,handler:ht,id:At++})}}});jt.dispatchEvent(yt);const fn=function(){var rn=(0,V.A)(function*(ht){try{if(null!=ht&&ht.handler){const ei=ht.handler(xn);null!=ei&&(yield ei)}}catch(ei){console.error(ei)}});return function(ei){return rn.apply(this,arguments)}}(),xn=()=>{if(Ut.length>0){let rn={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ut.forEach(ht=>{ht.priority>=rn.priority&&(rn=ht)}),wt=!0,Ut=Ut.filter(ht=>ht.id!==rn.id),fn(rn).then(()=>wt=!1)}};xn()};if(l()){let At;const Ut=()=>{null==At||At.destroy(),At=new re.w.CloseWatcher,At.onclose=()=>{C(),Ut()}};Ut()}else jt.addEventListener("backbutton",C)},ft=100,qt=99},1656:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{a:()=>qt,b:()=>jt,c:()=>ne,d:()=>We,e:()=>yt,f:()=>Ut,g:()=>wt,h:()=>At,i:()=>ft,j:()=>l,k:()=>fn,l:()=>ei,p:()=>rn,r:()=>C,s:()=>Zn});const ne=(xt,Ot)=>{xt.componentOnReady?xt.componentOnReady().then(wn=>Ot(wn)):C(()=>Ot(xt))},l=xt=>void 0!==xt.componentOnReady,We=(xt,Ot=[])=>{const wn={};return Ot.forEach(Pn=>{xt.hasAttribute(Pn)&&(null!==xt.getAttribute(Pn)&&(wn[Pn]=xt.getAttribute(Pn)),xt.removeAttribute(Pn))}),wn},Y=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ft=(xt,Ot)=>{let wn=Y;return Ot&&Ot.length>0&&(wn=wn.filter(Pn=>!Ot.includes(Pn))),We(xt,wn)},qt=(xt,Ot,wn,Pn)=>{var Ii;if(typeof window<"u"){const Et=window,kn=null===(Ii=null==Et?void 0:Et.Ionic)||void 0===Ii?void 0:Ii.config;if(kn){const Te=kn.get("_ael");if(Te)return Te(xt,Ot,wn,Pn);if(kn._ael)return kn._ael(xt,Ot,wn,Pn)}}return xt.addEventListener(Ot,wn,Pn)},jt=(xt,Ot,wn,Pn)=>{var Ii;if(typeof window<"u"){const Et=window,kn=null===(Ii=null==Et?void 0:Et.Ionic)||void 0===Ii?void 0:Ii.config;if(kn){const Te=kn.get("_rel");if(Te)return Te(xt,Ot,wn,Pn);if(kn._rel)return kn._rel(xt,Ot,wn,Pn)}}return xt.removeEventListener(Ot,wn,Pn)},wt=(xt,Ot=xt)=>xt.shadowRoot||Ot,C=xt=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(xt):"function"==typeof requestAnimationFrame?requestAnimationFrame(xt):setTimeout(xt),At=xt=>!!xt.shadowRoot&&!!xt.attachShadow,Ut=xt=>{if(xt.focus(),xt.classList.contains("ion-focusable")){const Ot=xt.closest("ion-app");Ot&&Ot.setFocus([xt])}},yt=(xt,Ot,wn,Pn,Ii)=>{if(xt||At(Ot)){let Et=Ot.querySelector("input.aux-input");Et||(Et=Ot.ownerDocument.createElement("input"),Et.type="hidden",Et.classList.add("aux-input"),Ot.appendChild(Et)),Et.disabled=Ii,Et.name=wn,Et.value=Pn||""}},fn=(xt,Ot,wn)=>Math.max(xt,Math.min(Ot,wn)),rn=xt=>{if(xt){const Ot=xt.changedTouches;if(Ot&&Ot.length>0){const wn=Ot[0];return{x:wn.clientX,y:wn.clientY}}if(void 0!==xt.pageX)return{x:xt.pageX,y:xt.pageY}}return{x:0,y:0}},ei=(xt,Ot)=>{const wn=xt._original||xt;return{_original:xt,emit:Mn(wn.emit.bind(wn),Ot)}},Mn=(xt,Ot=0)=>{let wn;return(...Pn)=>{clearTimeout(wn),wn=setTimeout(xt,Ot,...Pn)}},Zn=(xt,Ot)=>{if(null!=xt||(xt={}),null!=Ot||(Ot={}),xt===Ot)return!0;const wn=Object.keys(xt);if(wn.length!==Object.keys(Ot).length)return!1;for(const Pn of wn)if(!(Pn in Ot)||xt[Pn]!==Ot[Pn])return!1;return!0}},6031:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{L:()=>Y,a:()=>ft,b:()=>qt,c:()=>jt,d:()=>wt,e:()=>En,g:()=>Ke,t:()=>ht,w:()=>Qt});var V=_e(467),re=_e(5531),ne=_e(1771),l=_e(1979),We=_e(1656);const Y="ionViewWillEnter",ft="ionViewDidEnter",qt="ionViewWillLeave",jt="ionViewDidLeave",wt="ionViewWillUnload",C=Ae=>{Ae.tabIndex=-1,Ae.focus()},At=Ae=>null!==Ae.offsetParent,yt="ion-last-focus",rn_saveViewFocus=et=>{if(re.c.get("focusManagerPriority",!1)){const qn=document.activeElement;null!==qn&&null!=et&&et.contains(qn)&&qn.setAttribute(yt,"true")}},rn_setViewFocus=et=>{const zt=re.c.get("focusManagerPriority",!1);if(Array.isArray(zt)&&!et.contains(document.activeElement)){const qn=et.querySelector(`[${yt}]`);if(qn&&At(qn))return void C(qn);for(const un of zt)switch(un){case"content":const go=et.querySelector('main, [role="main"]');if(go&&At(go))return void C(go);break;case"heading":const Qi=et.querySelector('h1, [role="heading"][aria-level="1"]');if(Qi&&At(Qi))return void C(Qi);break;case"banner":const dr=et.querySelector('header, [role="banner"]');if(dr&&At(dr))return void C(dr);break;default:(0,l.p)(`Unrecognized focus manager priority value ${un}`)}C(et)}},ht=Ae=>new Promise((Ge,et)=>{(0,ne.bN)(()=>{ei(Ae),Mn(Ae).then(zt=>{zt.animation&&zt.animation.destroy(),Zn(Ae),Ge(zt)},zt=>{Zn(Ae),et(zt)})})}),ei=Ae=>{const Ge=Ae.enteringEl,et=Ae.leavingEl;rn_saveViewFocus(et),Vn(Ge,et,Ae.direction),Ae.showGoBack?Ge.classList.add("can-go-back"):Ge.classList.remove("can-go-back"),oo(Ge,!1),Ge.style.setProperty("pointer-events","none"),et&&(oo(et,!1),et.style.setProperty("pointer-events","none"))},Mn=function(){var Ae=(0,V.A)(function*(Ge){const et=yield xt(Ge);return et&&ne.L2.isBrowser?Ot(et,Ge):wn(Ge)});return function(et){return Ae.apply(this,arguments)}}(),Zn=Ae=>{const Ge=Ae.enteringEl,et=Ae.leavingEl;Ge.classList.remove("ion-page-invisible"),Ge.style.removeProperty("pointer-events"),void 0!==et&&(et.classList.remove("ion-page-invisible"),et.style.removeProperty("pointer-events")),rn_setViewFocus(Ge)},xt=function(){var Ae=(0,V.A)(function*(Ge){return Ge.leavingEl&&Ge.animated&&0!==Ge.duration?Ge.animationBuilder?Ge.animationBuilder:"ios"===Ge.mode?(yield _e.e(4699).then(_e.bind(_e,4699))).iosTransitionAnimation:(yield _e.e(7179).then(_e.bind(_e,7179))).mdTransitionAnimation:void 0});return function(et){return Ae.apply(this,arguments)}}(),Ot=function(){var Ae=(0,V.A)(function*(Ge,et){yield Pn(et,!0);const zt=Ge(et.baseEl,et);kn(et.enteringEl,et.leavingEl);const qn=yield Et(zt,et);return et.progressCallback&&et.progressCallback(void 0),qn&&Te(et.enteringEl,et.leavingEl),{hasCompleted:qn,animation:zt}});return function(et,zt){return Ae.apply(this,arguments)}}(),wn=function(){var Ae=(0,V.A)(function*(Ge){const et=Ge.enteringEl,zt=Ge.leavingEl,qn=re.c.get("focusManagerPriority",!1);return yield Pn(Ge,qn),kn(et,zt),Te(et,zt),{hasCompleted:!0}});return function(et){return Ae.apply(this,arguments)}}(),Pn=function(){var Ae=(0,V.A)(function*(Ge,et){(void 0!==Ge.deepWait?Ge.deepWait:et)&&(yield Promise.all([En(Ge.enteringEl),En(Ge.leavingEl)])),yield Ii(Ge.viewIsReady,Ge.enteringEl)});return function(et,zt){return Ae.apply(this,arguments)}}(),Ii=function(){var Ae=(0,V.A)(function*(Ge,et){Ge&&(yield Ge(et))});return function(et,zt){return Ae.apply(this,arguments)}}(),Et=(Ae,Ge)=>{const et=Ge.progressCallback,zt=new Promise(qn=>{Ae.onFinish(un=>qn(1===un))});return et?(Ae.progressStart(!0),et(Ae)):Ae.play(),zt},kn=(Ae,Ge)=>{on(Ge,qt),on(Ae,Y)},Te=(Ae,Ge)=>{on(Ae,ft),on(Ge,jt)},on=(Ae,Ge)=>{if(Ae){const et=new CustomEvent(Ge,{bubbles:!1,cancelable:!1});Ae.dispatchEvent(et)}},Qt=()=>new Promise(Ae=>(0,We.r)(()=>(0,We.r)(()=>Ae()))),En=function(){var Ae=(0,V.A)(function*(Ge){const et=Ge;if(et){if(null!=et.componentOnReady){if(null!=(yield et.componentOnReady()))return}else if(null!=et.__registerHost)return void(yield new Promise(qn=>(0,We.r)(qn)));yield Promise.all(Array.from(et.children).map(En))}});return function(et){return Ae.apply(this,arguments)}}(),oo=(Ae,Ge)=>{Ge?(Ae.setAttribute("aria-hidden","true"),Ae.classList.add("ion-page-hidden")):(Ae.hidden=!1,Ae.removeAttribute("aria-hidden"),Ae.classList.remove("ion-page-hidden"))},Vn=(Ae,Ge,et)=>{void 0!==Ae&&(Ae.style.zIndex="back"===et?"99":"101"),void 0!==Ge&&(Ge.style.zIndex="100")},Ke=Ae=>Ae.classList.contains("ion-page")?Ae:Ae.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ae},2104:(Yo,Xn,_e)=>{"use strict";_e.r(Xn),_e.d(Xn,{GESTURE_CONTROLLER:()=>V.G,createGesture:()=>jt});var V=_e(8875);const re=(Ut,yt,fn,xn)=>{const rn=ne(Ut)?{capture:!!xn.capture,passive:!!xn.passive}:!!xn.capture;let ht,ei;return Ut.__zone_symbol__addEventListener?(ht="__zone_symbol__addEventListener",ei="__zone_symbol__removeEventListener"):(ht="addEventListener",ei="removeEventListener"),Ut[ht](yt,fn,rn),()=>{Ut[ei](yt,fn,rn)}},ne=Ut=>{if(void 0===l)try{const yt=Object.defineProperty({},"passive",{get:()=>{l=!0}});Ut.addEventListener("optsTest",()=>{},yt)}catch{l=!1}return!!l};let l;const ft=Ut=>Ut instanceof Document?Ut:Ut.ownerDocument,jt=Ut=>{let yt=!1,fn=!1,xn=!0,rn=!1;const ht=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ut),ei=ht.canStart,Mn=ht.onWillStart,Zn=ht.onStart,xt=ht.onEnd,Ot=ht.notCaptured,wn=ht.onMove,Pn=ht.threshold,Ii=ht.passive,Et=ht.blurOnStart,kn={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Te=((Ut,yt,fn)=>{const xn=fn*(Math.PI/180),rn="x"===Ut,ht=Math.cos(xn),ei=yt*yt;let Mn=0,Zn=0,xt=!1,Ot=0;return{start(wn,Pn){Mn=wn,Zn=Pn,Ot=0,xt=!0},detect(wn,Pn){if(!xt)return!1;const Ii=wn-Mn,Et=Pn-Zn,kn=Ii*Ii+Et*Et;if(kn<ei)return!1;const Te=Math.sqrt(kn),on=(rn?Ii:Et)/Te;return Ot=on>ht?1:on<-ht?-1:0,xt=!1,!0},isGesture:()=>0!==Ot,getDirection:()=>Ot}})(ht.direction,ht.threshold,ht.maxAngle),on=V.G.createGesture({name:Ut.gestureName,priority:Ut.gesturePriority,disableScroll:Ut.disableScroll}),oo=()=>{yt&&(rn=!1,wn&&wn(kn))},Vn=()=>!!on.capture()&&(yt=!0,xn=!1,kn.startX=kn.currentX,kn.startY=kn.currentY,kn.startTime=kn.currentTime,Mn?Mn(kn).then(Ae):Ae(),!0),Ae=()=>{Et&&(()=>{if(typeof document<"u"){const un=document.activeElement;null!=un&&un.blur&&un.blur()}})(),Zn&&Zn(kn),xn=!0},Ge=()=>{yt=!1,fn=!1,rn=!1,xn=!0,on.release()},et=un=>{const go=yt,Qi=xn;if(Ge(),Qi){if(wt(kn,un),go)return void(xt&&xt(kn));Ot&&Ot(kn)}},zt=((Ut,yt,fn,xn,rn)=>{let ht,ei,Mn,Zn,xt,Ot,wn,Pn=0;const Ii=Ke=>{Pn=Date.now()+2e3,yt(Ke)&&(!ei&&fn&&(ei=re(Ut,"touchmove",fn,rn)),Mn||(Mn=re(Ke.target,"touchend",kn,rn)),Zn||(Zn=re(Ke.target,"touchcancel",kn,rn)))},Et=Ke=>{Pn>Date.now()||yt(Ke)&&(!Ot&&fn&&(Ot=re(ft(Ut),"mousemove",fn,rn)),wn||(wn=re(ft(Ut),"mouseup",Te,rn)))},kn=Ke=>{on(),xn&&xn(Ke)},Te=Ke=>{Qt(),xn&&xn(Ke)},on=()=>{ei&&ei(),Mn&&Mn(),Zn&&Zn(),ei=Mn=Zn=void 0},Qt=()=>{Ot&&Ot(),wn&&wn(),Ot=wn=void 0},En=()=>{on(),Qt()},oo=(Ke=!0)=>{Ke?(ht||(ht=re(Ut,"touchstart",Ii,rn)),xt||(xt=re(Ut,"mousedown",Et,rn))):(ht&&ht(),xt&&xt(),ht=xt=void 0,En())};return{enable:oo,stop:En,destroy:()=>{oo(!1),xn=fn=yt=void 0}}})(ht.el,un=>{const go=At(un);return!(fn||!xn||(C(un,kn),kn.startX=kn.currentX,kn.startY=kn.currentY,kn.startTime=kn.currentTime=go,kn.velocityX=kn.velocityY=kn.deltaX=kn.deltaY=0,kn.event=un,ei&&!1===ei(kn))||(on.release(),!on.start()))&&(fn=!0,0===Pn?Vn():(Te.start(kn.startX,kn.startY),!0))},un=>{yt?!rn&&xn&&(rn=!0,wt(kn,un),requestAnimationFrame(oo)):(wt(kn,un),Te.detect(kn.currentX,kn.currentY)&&(!Te.isGesture()||!Vn())&&qn())},et,{capture:!1,passive:Ii}),qn=()=>{Ge(),zt.stop(),Ot&&Ot(kn)};return{enable(un=!0){un||(yt&&et(void 0),Ge()),zt.enable(un)},destroy(){on.destroy(),zt.destroy()}}},wt=(Ut,yt)=>{if(!yt)return;const fn=Ut.currentX,xn=Ut.currentY,rn=Ut.currentTime;C(yt,Ut);const ht=Ut.currentX,ei=Ut.currentY,Zn=(Ut.currentTime=At(yt))-rn;if(Zn>0&&Zn<100){const Ot=(ei-xn)/Zn;Ut.velocityX=(ht-fn)/Zn*.7+.3*Ut.velocityX,Ut.velocityY=.7*Ot+.3*Ut.velocityY}Ut.deltaX=ht-Ut.startX,Ut.deltaY=ei-Ut.startY,Ut.event=yt},C=(Ut,yt)=>{let fn=0,xn=0;if(Ut){const rn=Ut.changedTouches;if(rn&&rn.length>0){const ht=rn[0];fn=ht.clientX,xn=ht.clientY}else void 0!==Ut.pageX&&(fn=Ut.pageX,xn=Ut.pageY)}yt.currentX=fn,yt.currentY=xn},At=Ut=>Ut.timeStamp||Date.now()},4878:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{d:()=>re,w:()=>V});const V=typeof window<"u"?window:void 0,re=typeof document<"u"?document:void 0},1979:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{a:()=>re,b:()=>ne,p:()=>V});const V=(l,...We)=>console.warn(`[Ionic Warning]: ${l}`,...We),re=(l,...We)=>console.error(`[Ionic Error]: ${l}`,...We),ne=(l,...We)=>console.error(`<${l.tagName.toLowerCase()}> must be used inside ${We.join(" or ")}.`)},7849:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{a:()=>C,c:()=>Ut,d:()=>fn,f:()=>wt,g:()=>jt,i:()=>qt,p:()=>yt,r:()=>xn,s:()=>At});var V=_e(467),re=_e(1656),ne=_e(1979);const We="ion-content",Y=".ion-content-scroll-host",ft=`${We}, ${Y}`,qt=rn=>"ION-CONTENT"===rn.tagName,jt=function(){var rn=(0,V.A)(function*(ht){return qt(ht)?(yield new Promise(ei=>(0,re.c)(ht,ei)),ht.getScrollElement()):ht});return function(ei){return rn.apply(this,arguments)}}(),wt=rn=>rn.querySelector(Y)||rn.querySelector(ft),C=rn=>rn.closest(ft),At=(rn,ht)=>qt(rn)?rn.scrollToTop(ht):Promise.resolve(rn.scrollTo({top:0,left:0,behavior:ht>0?"smooth":"auto"})),Ut=(rn,ht,ei,Mn)=>qt(rn)?rn.scrollByPoint(ht,ei,Mn):Promise.resolve(rn.scrollBy({top:ei,left:ht,behavior:Mn>0?"smooth":"auto"})),yt=rn=>(0,ne.b)(rn,We),fn=rn=>{if(qt(rn)){const ei=rn.scrollY;return rn.scrollY=!1,ei}return rn.style.setProperty("overflow","hidden"),!0},xn=(rn,ht)=>{qt(rn)?rn.scrollY=ht:rn.style.removeProperty("overflow")}},5531:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{a:()=>C,b:()=>oo,c:()=>ne,g:()=>wt,i:()=>Vn});var V=_e(1771);class re{constructor(){this.m=new Map}reset(Ae){this.m=new Map(Object.entries(Ae))}get(Ae,Ge){const et=this.m.get(Ae);return void 0!==et?et:Ge}getBoolean(Ae,Ge=!1){const et=this.m.get(Ae);return void 0===et?Ge:"string"==typeof et?"true"===et:!!et}getNumber(Ae,Ge){const et=parseFloat(this.m.get(Ae));return isNaN(et)?void 0!==Ge?Ge:NaN:et}set(Ae,Ge){this.m.set(Ae,Ge)}}const ne=new re,jt="ionic-persist-config",wt=Ke=>At(Ke),C=(Ke,Ae)=>("string"==typeof Ke&&(Ae=Ke,Ke=void 0),wt(Ke).includes(Ae)),At=(Ke=window)=>{if(typeof Ke>"u")return[];Ke.Ionic=Ke.Ionic||{};let Ae=Ke.Ionic.platforms;return null==Ae&&(Ae=Ke.Ionic.platforms=Ut(Ke),Ae.forEach(Ge=>Ke.document.documentElement.classList.add(`plt-${Ge}`))),Ae},Ut=Ke=>{const Ae=ne.get("platform");return Object.keys(Qt).filter(Ge=>{const et=null==Ae?void 0:Ae[Ge];return"function"==typeof et?et(Ke):Qt[Ge](Ke)})},fn=Ke=>!!(Te(Ke,/iPad/i)||Te(Ke,/Macintosh/i)&&xt(Ke)),ht=Ke=>Te(Ke,/android|sink/i),xt=Ke=>on(Ke,"(any-pointer:coarse)"),wn=Ke=>Pn(Ke)||Ii(Ke),Pn=Ke=>!!(Ke.cordova||Ke.phonegap||Ke.PhoneGap),Ii=Ke=>{const Ae=Ke.Capacitor;return!(null==Ae||!Ae.isNative)},Te=(Ke,Ae)=>Ae.test(Ke.navigator.userAgent),on=(Ke,Ae)=>{var Ge;return null===(Ge=Ke.matchMedia)||void 0===Ge?void 0:Ge.call(Ke,Ae).matches},Qt={ipad:fn,iphone:Ke=>Te(Ke,/iPhone/i),ios:Ke=>Te(Ke,/iPhone|iPod/i)||fn(Ke),android:ht,phablet:Ke=>{const Ae=Ke.innerWidth,Ge=Ke.innerHeight,et=Math.min(Ae,Ge),zt=Math.max(Ae,Ge);return et>390&&et<520&&zt>620&&zt<800},tablet:Ke=>{const Ae=Ke.innerWidth,Ge=Ke.innerHeight,et=Math.min(Ae,Ge),zt=Math.max(Ae,Ge);return fn(Ke)||(Ke=>ht(Ke)&&!Te(Ke,/mobile/i))(Ke)||et>460&&et<820&&zt>780&&zt<1400},cordova:Pn,capacitor:Ii,electron:Ke=>Te(Ke,/electron/i),pwa:Ke=>{var Ae;return!!(null!==(Ae=Ke.matchMedia)&&void 0!==Ae&&Ae.call(Ke,"(display-mode: standalone)").matches||Ke.navigator.standalone)},mobile:xt,mobileweb:Ke=>xt(Ke)&&!wn(Ke),desktop:Ke=>!xt(Ke),hybrid:wn};let En;const oo=Ke=>Ke&&(0,V.Wi)(Ke)||En,Vn=(Ke={})=>{if(typeof window>"u")return;const Ae=window.document,Ge=window,et=Ge.Ionic=Ge.Ionic||{},zt={};Ke._ael&&(zt.ael=Ke._ael),Ke._rel&&(zt.rel=Ke._rel),Ke._ce&&(zt.ce=Ke._ce),(0,V.zb)(zt);const qn=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ke=>{try{const Ae=Ke.sessionStorage.getItem(jt);return null!==Ae?JSON.parse(Ae):{}}catch{return{}}})(Ge)),{persistConfig:!1}),et.config),(Ke=>{const Ae={};return Ke.location.search.slice(1).split("&").map(Ge=>Ge.split("=")).map(([Ge,et])=>{try{return[decodeURIComponent(Ge),decodeURIComponent(et)]}catch{return["",""]}}).filter(([Ge])=>((Ke,Ae)=>Ke.substr(0,Ae.length)===Ae)(Ge,"ionic:")).map(([Ge,et])=>[Ge.slice(6),et]).forEach(([Ge,et])=>{Ae[Ge]=et}),Ae})(Ge)),Ke);ne.reset(qn),ne.getBoolean("persistConfig")&&((Ke,Ae)=>{try{Ke.sessionStorage.setItem(jt,JSON.stringify(Ae))}catch{return}})(Ge,qn),At(Ge),et.config=ne,et.mode=En=ne.get("mode",Ae.documentElement.getAttribute("mode")||(C(Ge,"ios")?"ios":"md")),ne.set("mode",En),Ae.documentElement.setAttribute("mode",En),Ae.documentElement.classList.add(En),ne.getBoolean("_testing")&&ne.set("animated",!1);const un=Qi=>{var dr;return null===(dr=Qi.tagName)||void 0===dr?void 0:dr.startsWith("ION-")},go=Qi=>["ios","md"].includes(Qi);(0,V.iY)(Qi=>{for(;Qi;){const dr=Qi.mode||Qi.getAttribute("mode");if(dr){if(go(dr))return dr;un(Qi)&&console.warn('Invalid ionic mode: "'+dr+'", expected: "ios" or "md"')}Qi=Qi.parentElement}return En})}},5680:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{K:()=>l,a:()=>ne});var V=_e(6081),re=function(We){return We.Unimplemented="UNIMPLEMENTED",We.Unavailable="UNAVAILABLE",We}(re||{}),ne=function(We){return We.Body="body",We.Ionic="ionic",We.Native="native",We.None="none",We}(ne||{});const l={getEngine(){const We=(0,V.g)();if(null!=We&&We.isPluginAvailable("Keyboard"))return We.Plugins.Keyboard},getResizeMode(){const We=this.getEngine();return null!=We&&We.getResizeMode?We.getResizeMode().catch(Y=>{if(Y.code!==re.Unimplemented)throw Y}):Promise.resolve(void 0)}}},6008:(Yo,Xn,_e)=>{"use strict";_e.r(Xn),_e.d(Xn,{KEYBOARD_DID_CLOSE:()=>ne,KEYBOARD_DID_OPEN:()=>re,copyVisualViewport:()=>ei,keyboardDidClose:()=>fn,keyboardDidOpen:()=>Ut,keyboardDidResize:()=>yt,resetKeyboardAssist:()=>qt,setKeyboardClose:()=>At,setKeyboardOpen:()=>C,startKeyboardAssist:()=>jt,trackViewportChanges:()=>ht});var V=_e(5680);const re="ionKeyboardDidShow",ne="ionKeyboardDidHide";let We={},Y={},ft=!1;const qt=()=>{We={},Y={},ft=!1},jt=Mn=>{if(V.K.getEngine())wt(Mn);else{if(!Mn.visualViewport)return;Y=ei(Mn.visualViewport),Mn.visualViewport.onresize=()=>{ht(Mn),Ut()||yt(Mn)?C(Mn):fn(Mn)&&At(Mn)}}},wt=Mn=>{Mn.addEventListener("keyboardDidShow",Zn=>C(Mn,Zn)),Mn.addEventListener("keyboardDidHide",()=>At(Mn))},C=(Mn,Zn)=>{xn(Mn,Zn),ft=!0},At=Mn=>{rn(Mn),ft=!1},Ut=()=>!ft&&We.width===Y.width&&(We.height-Y.height)*Y.scale>150,yt=Mn=>ft&&!fn(Mn),fn=Mn=>ft&&Y.height===Mn.innerHeight,xn=(Mn,Zn)=>{const Ot=new CustomEvent(re,{detail:{keyboardHeight:Zn?Zn.keyboardHeight:Mn.innerHeight-Y.height}});Mn.dispatchEvent(Ot)},rn=Mn=>{const Zn=new CustomEvent(ne);Mn.dispatchEvent(Zn)},ht=Mn=>{We=Object.assign({},Y),Y=ei(Mn.visualViewport)},ei=Mn=>({width:Math.round(Mn.width),height:Math.round(Mn.height),offsetTop:Mn.offsetTop,offsetLeft:Mn.offsetLeft,pageTop:Mn.pageTop,pageLeft:Mn.pageLeft,scale:Mn.scale})},9986:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{c:()=>Y});var V=_e(8476);let re;const l=(ft,qt,jt)=>{const wt=qt.startsWith("animation")?(ft=>(void 0===re&&(re=void 0===ft.style.animationName&&void 0!==ft.style.webkitAnimationName?"-webkit-":""),re))(ft):"";ft.style.setProperty(wt+qt,jt)},We=(ft=[],qt)=>{if(void 0!==qt){const jt=Array.isArray(qt)?qt:[qt];return[...ft,...jt]}return ft},Y=ft=>{let qt,jt,wt,C,At,Ut,ht,Ii,Et,kn,En,yt=[],fn=[],xn=[],rn=!1,ei={},Mn=[],Zn=[],xt={},Ot=0,wn=!1,Pn=!1,Te=!0,on=!1,Qt=!0,oo=!1;const Vn=ft,Ke=[],Ae=[],Ge=[],et=[],zt=[],qn=[],un=[],go=[],Qi=[],dr=[],Go=[],Dr="function"==typeof AnimationEffect||void 0!==V.w&&"function"==typeof V.w.AnimationEffect,cr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Dr,Ei=()=>Go,vi=(Kt,oi)=>{const Pi=oi.findIndex(Xo=>Xo.c===Kt);Pi>-1&&oi.splice(Pi,1)},ui=(Kt,oi)=>((null!=oi&&oi.oneTimeCallback?Ae:Ke).push({c:Kt,o:oi}),En),po=()=>{cr&&(Go.forEach(Kt=>{Kt.cancel()}),Go.length=0)},Xi=()=>{qn.forEach(Kt=>{null!=Kt&&Kt.parentNode&&Kt.parentNode.removeChild(Kt)}),qn.length=0},xr=()=>void 0!==At?At:ht?ht.getFill():"both",wr=()=>void 0!==Ii?Ii:void 0!==Ut?Ut:ht?ht.getDirection():"normal",aa=()=>wn?"linear":void 0!==wt?wt:ht?ht.getEasing():"linear",Jn=()=>Pn?0:void 0!==Et?Et:void 0!==jt?jt:ht?ht.getDuration():0,hs=()=>void 0!==C?C:ht?ht.getIterations():1,jr=()=>void 0!==kn?kn:void 0!==qt?qt:ht?ht.getDelay():0,Ee=()=>{0!==Ot&&(Ot--,0===Ot&&((()=>{Qi.forEach(pr=>pr()),dr.forEach(pr=>pr());const Kt=Te?1:0,oi=Mn,Pi=Zn,Xo=xt;et.forEach(pr=>{const es=pr.classList;oi.forEach(qr=>es.add(qr)),Pi.forEach(qr=>es.remove(qr));for(const qr in Xo)Xo.hasOwnProperty(qr)&&l(pr,qr,Xo[qr])}),Et=void 0,Ii=void 0,kn=void 0,Ke.forEach(pr=>pr.c(Kt,En)),Ae.forEach(pr=>pr.c(Kt,En)),Ae.length=0,Qt=!0,Te&&(on=!0),Te=!0})(),ht&&ht.animationFinish()))},ae=()=>{(()=>{un.forEach(Xo=>Xo()),go.forEach(Xo=>Xo());const Kt=fn,oi=xn,Pi=ei;et.forEach(Xo=>{const pr=Xo.classList;Kt.forEach(es=>pr.add(es)),oi.forEach(es=>pr.remove(es));for(const es in Pi)Pi.hasOwnProperty(es)&&l(Xo,es,Pi[es])})})(),yt.length>0&&cr&&(et.forEach(Kt=>{const oi=Kt.animate(yt,{id:Vn,delay:jr(),duration:Jn(),easing:aa(),iterations:hs(),fill:xr(),direction:wr()});oi.pause(),Go.push(oi)}),Go.length>0&&(Go[0].onfinish=()=>{Ee()})),rn=!0},we=Kt=>{Kt=Math.min(Math.max(Kt,0),.9999),cr&&Go.forEach(oi=>{oi.currentTime=oi.effect.getComputedTiming().delay+Jn()*Kt,oi.pause()})},Ue=Kt=>{Go.forEach(oi=>{oi.effect.updateTiming({delay:jr(),duration:Jn(),easing:aa(),iterations:hs(),fill:xr(),direction:wr()})}),void 0!==Kt&&we(Kt)},it=(Kt=!1,oi=!0,Pi)=>(Kt&&zt.forEach(Xo=>{Xo.update(Kt,oi,Pi)}),cr&&Ue(Pi),En),Nn=()=>{rn&&(cr?Go.forEach(Kt=>{Kt.pause()}):et.forEach(Kt=>{l(Kt,"animation-play-state","paused")}),oo=!0)},ii=Kt=>new Promise(oi=>{null!=Kt&&Kt.sync&&(Pn=!0,ui(()=>Pn=!1,{oneTimeCallback:!0})),rn||ae(),on&&(cr&&(we(0),Ue()),on=!1),Qt&&(Ot=zt.length+1,Qt=!1);const Pi=()=>{vi(Xo,Ae),oi()},Xo=()=>{vi(Pi,Ge),oi()};ui(Xo,{oneTimeCallback:!0}),((Kt,oi)=>{Ge.push({c:Kt,o:{oneTimeCallback:!0}})})(Pi),zt.forEach(pr=>{pr.play()}),cr?(Go.forEach(Kt=>{Kt.play()}),(0===yt.length||0===et.length)&&Ee()):Ee(),oo=!1}),di=(Kt,oi)=>{const Pi=yt[0];return void 0===Pi||void 0!==Pi.offset&&0!==Pi.offset?yt=[{offset:0,[Kt]:oi},...yt]:Pi[Kt]=oi,En};return En={parentAnimation:ht,elements:et,childAnimations:zt,id:Vn,animationFinish:Ee,from:di,to:(Kt,oi)=>{const Pi=yt[yt.length-1];return void 0===Pi||void 0!==Pi.offset&&1!==Pi.offset?yt=[...yt,{offset:1,[Kt]:oi}]:Pi[Kt]=oi,En},fromTo:(Kt,oi,Pi)=>di(Kt,oi).to(Kt,Pi),parent:Kt=>(ht=Kt,En),play:ii,pause:()=>(zt.forEach(Kt=>{Kt.pause()}),Nn(),En),stop:()=>{zt.forEach(Kt=>{Kt.stop()}),rn&&(po(),rn=!1),wn=!1,Pn=!1,Qt=!0,Ii=void 0,Et=void 0,kn=void 0,Ot=0,on=!1,Te=!0,oo=!1,Ge.forEach(Kt=>Kt.c(0,En)),Ge.length=0},destroy:Kt=>(zt.forEach(oi=>{oi.destroy(Kt)}),(Kt=>{po(),Kt&&Xi()})(Kt),et.length=0,zt.length=0,yt.length=0,Ke.length=0,Ae.length=0,rn=!1,Qt=!0,En),keyframes:Kt=>{const oi=yt!==Kt;return yt=Kt,oi&&(Kt=>{cr&&Ei().forEach(oi=>{const Pi=oi.effect;if(Pi.setKeyframes)Pi.setKeyframes(Kt);else{const Xo=new KeyframeEffect(Pi.target,Kt,Pi.getTiming());oi.effect=Xo}})})(yt),En},addAnimation:Kt=>{if(null!=Kt)if(Array.isArray(Kt))for(const oi of Kt)oi.parent(En),zt.push(oi);else Kt.parent(En),zt.push(Kt);return En},addElement:Kt=>{if(null!=Kt)if(1===Kt.nodeType)et.push(Kt);else if(Kt.length>=0)for(let oi=0;oi<Kt.length;oi++)et.push(Kt[oi]);else console.error("Invalid addElement value");return En},update:it,fill:Kt=>(At=Kt,it(!0),En),direction:Kt=>(Ut=Kt,it(!0),En),iterations:Kt=>(C=Kt,it(!0),En),duration:Kt=>(!cr&&0===Kt&&(Kt=1),jt=Kt,it(!0),En),easing:Kt=>(wt=Kt,it(!0),En),delay:Kt=>(qt=Kt,it(!0),En),getWebAnimations:Ei,getKeyframes:()=>yt,getFill:xr,getDirection:wr,getDelay:jr,getIterations:hs,getEasing:aa,getDuration:Jn,afterAddRead:Kt=>(Qi.push(Kt),En),afterAddWrite:Kt=>(dr.push(Kt),En),afterClearStyles:(Kt=[])=>{for(const oi of Kt)xt[oi]="";return En},afterStyles:(Kt={})=>(xt=Kt,En),afterRemoveClass:Kt=>(Zn=We(Zn,Kt),En),afterAddClass:Kt=>(Mn=We(Mn,Kt),En),beforeAddRead:Kt=>(un.push(Kt),En),beforeAddWrite:Kt=>(go.push(Kt),En),beforeClearStyles:(Kt=[])=>{for(const oi of Kt)ei[oi]="";return En},beforeStyles:(Kt={})=>(ei=Kt,En),beforeRemoveClass:Kt=>(xn=We(xn,Kt),En),beforeAddClass:Kt=>(fn=We(fn,Kt),En),onFinish:ui,isRunning:()=>0!==Ot&&!oo,progressStart:(Kt=!1,oi)=>(zt.forEach(Pi=>{Pi.progressStart(Kt,oi)}),Nn(),wn=Kt,rn||ae(),it(!1,!0,oi),En),progressStep:Kt=>(zt.forEach(oi=>{oi.progressStep(Kt)}),we(Kt),En),progressEnd:(Kt,oi,Pi)=>(wn=!1,zt.forEach(Xo=>{Xo.progressEnd(Kt,oi,Pi)}),void 0!==Pi&&(Et=Pi),on=!1,Te=!0,0===Kt?(Ii="reverse"===wr()?"normal":"reverse","reverse"===Ii&&(Te=!1),cr?(it(),we(1-oi)):(kn=(1-oi)*Jn()*-1,it(!1,!1))):1===Kt&&(cr?(it(),we(oi)):(kn=oi*Jn()*-1,it(!1,!1))),void 0!==Kt&&!ht&&ii(),En)}}},8621:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{C:()=>We,a:()=>ne,d:()=>l});var V=_e(467),re=_e(4920);const ne=function(){var Y=(0,V.A)(function*(ft,qt,jt,wt,C,At){var Ut;if(ft)return ft.attachViewToDom(qt,jt,C,wt);if(!(At||"string"==typeof jt||jt instanceof HTMLElement))throw new Error("framework delegate is missing");const yt="string"==typeof jt?null===(Ut=qt.ownerDocument)||void 0===Ut?void 0:Ut.createElement(jt):jt;return wt&&wt.forEach(fn=>yt.classList.add(fn)),C&&Object.assign(yt,C),qt.appendChild(yt),yield new Promise(fn=>(0,re.c)(yt,fn)),yt});return function(qt,jt,wt,C,At,Ut){return Y.apply(this,arguments)}}(),l=(Y,ft)=>{if(ft){if(Y)return Y.removeViewFromDom(ft.parentElement,ft);ft.remove()}return Promise.resolve()},We=()=>{let Y,ft;return{attachViewToDom:function(){var wt=(0,V.A)(function*(C,At,Ut={},yt=[]){var fn,xn;let rn;if(Y=C,At){const ei="string"==typeof At?null===(fn=Y.ownerDocument)||void 0===fn?void 0:fn.createElement(At):At;yt.forEach(Mn=>ei.classList.add(Mn)),Object.assign(ei,Ut),Y.appendChild(ei),rn=ei,yield new Promise(Mn=>(0,re.c)(ei,Mn))}else if(Y.children.length>0&&("ION-MODAL"===Y.tagName||"ION-POPOVER"===Y.tagName)&&!(rn=Y.children[0]).classList.contains("ion-delegate-host")){const Mn=null===(xn=Y.ownerDocument)||void 0===xn?void 0:xn.createElement("div");Mn.classList.add("ion-delegate-host"),yt.forEach(Zn=>Mn.classList.add(Zn)),Mn.append(...Y.children),Y.appendChild(Mn),rn=Mn}const ht=document.querySelector("ion-app")||document.body;return ft=document.createComment("ionic teleport"),Y.parentNode.insertBefore(ft,Y),ht.appendChild(Y),null!=rn?rn:Y});return function(At,Ut){return wt.apply(this,arguments)}}(),removeViewFromDom:()=>(Y&&ft&&(ft.parentNode.insertBefore(Y,ft),ft.remove()),Promise.resolve())}}},1970:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{B:()=>l,G:()=>We});class re{constructor(ft,qt,jt,wt,C){this.id=qt,this.name=jt,this.disableScroll=C,this.priority=1e6*wt+qt,this.ctrl=ft}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ft=this.ctrl.capture(this.name,this.id,this.priority);return ft&&this.disableScroll&&this.ctrl.disableScroll(this.id),ft}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ne{constructor(ft,qt,jt,wt){this.id=qt,this.disable=jt,this.disableScroll=wt,this.ctrl=ft}block(){if(this.ctrl){if(this.disable)for(const ft of this.disable)this.ctrl.disableGesture(ft,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ft of this.disable)this.ctrl.enableGesture(ft,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const l="backdrop-no-scroll",We=new class V{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ft){var qt;return new re(this,this.newID(),ft.name,null!==(qt=ft.priority)&&void 0!==qt?qt:0,!!ft.disableScroll)}createBlocker(ft={}){return new ne(this,this.newID(),ft.disable,!!ft.disableScroll)}start(ft,qt,jt){return this.canStart(ft)?(this.requestedStart.set(qt,jt),!0):(this.requestedStart.delete(qt),!1)}capture(ft,qt,jt){if(!this.start(ft,qt,jt))return!1;const wt=this.requestedStart;let C=-1e4;if(wt.forEach(At=>{C=Math.max(C,At)}),C===jt){this.capturedId=qt,wt.clear();const At=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ft}});return document.dispatchEvent(At),!0}return wt.delete(qt),!1}release(ft){this.requestedStart.delete(ft),this.capturedId===ft&&(this.capturedId=void 0)}disableGesture(ft,qt){let jt=this.disabledGestures.get(ft);void 0===jt&&(jt=new Set,this.disabledGestures.set(ft,jt)),jt.add(qt)}enableGesture(ft,qt){const jt=this.disabledGestures.get(ft);void 0!==jt&&jt.delete(qt)}disableScroll(ft){this.disabledScroll.add(ft),1===this.disabledScroll.size&&document.body.classList.add(l)}enableScroll(ft){this.disabledScroll.delete(ft),0===this.disabledScroll.size&&document.body.classList.remove(l)}canStart(ft){return!(void 0!==this.capturedId||this.isDisabled(ft))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ft){const qt=this.disabledGestures.get(ft);return!!(qt&&qt.size>0)}newID(){return this.gestureId++,this.gestureId}}},8669:(Yo,Xn,_e)=>{"use strict";_e.r(Xn),_e.d(Xn,{MENU_BACK_BUTTON_PRIORITY:()=>jt,OVERLAY_BACK_BUTTON_PRIORITY:()=>qt,blockHardwareBackButton:()=>Y,shouldUseCloseWatcher:()=>We,startHardwareBackButton:()=>ft});var V=_e(467),re=_e(8476),ne=_e(4921);_e(8393);const We=()=>ne.c.get("experimentalCloseWatcher",!1)&&void 0!==re.w&&"CloseWatcher"in re.w,Y=()=>{document.addEventListener("backbutton",()=>{})},ft=()=>{const wt=document;let C=!1;const At=()=>{if(C)return;let Ut=0,yt=[];const fn=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ht,ei){yt.push({priority:ht,handler:ei,id:Ut++})}}});wt.dispatchEvent(fn);const xn=function(){var ht=(0,V.A)(function*(ei){try{if(null!=ei&&ei.handler){const Mn=ei.handler(rn);null!=Mn&&(yield Mn)}}catch(Mn){console.error(Mn)}});return function(Mn){return ht.apply(this,arguments)}}(),rn=()=>{if(yt.length>0){let ht={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};yt.forEach(ei=>{ei.priority>=ht.priority&&(ht=ei)}),C=!0,yt=yt.filter(ei=>ei.id!==ht.id),xn(ht).then(()=>C=!1)}};rn()};if(We()){let Ut;const yt=()=>{null==Ut||Ut.destroy(),Ut=new re.w.CloseWatcher,Ut.onclose=()=>{At(),yt()}};yt()}else wt.addEventListener("backbutton",At)},qt=100,jt=99},4920:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{a:()=>qt,b:()=>jt,c:()=>ne,d:()=>yt,e:()=>ei,f:()=>Ut,g:()=>wt,h:()=>We,i:()=>ft,j:()=>fn,k:()=>l,l:()=>At,m:()=>xn,n:()=>ht,o:()=>Mn,p:()=>rn,r:()=>C,s:()=>Zn,t:()=>V});const V=(xt,Ot=0)=>new Promise(wn=>{re(xt,Ot,wn)}),re=(xt,Ot=0,wn)=>{let Pn,Ii;const Et={passive:!0},Te=()=>{Pn&&Pn()},on=Qt=>{(void 0===Qt||xt===Qt.target)&&(Te(),wn(Qt))};return xt&&(xt.addEventListener("webkitTransitionEnd",on,Et),xt.addEventListener("transitionend",on,Et),Ii=setTimeout(on,Ot+500),Pn=()=>{void 0!==Ii&&(clearTimeout(Ii),Ii=void 0),xt.removeEventListener("webkitTransitionEnd",on,Et),xt.removeEventListener("transitionend",on,Et)}),Te},ne=(xt,Ot)=>{xt.componentOnReady?xt.componentOnReady().then(wn=>Ot(wn)):C(()=>Ot(xt))},l=xt=>void 0!==xt.componentOnReady,We=(xt,Ot=[])=>{const wn={};return Ot.forEach(Pn=>{xt.hasAttribute(Pn)&&(null!==xt.getAttribute(Pn)&&(wn[Pn]=xt.getAttribute(Pn)),xt.removeAttribute(Pn))}),wn},Y=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ft=(xt,Ot)=>{let wn=Y;return Ot&&Ot.length>0&&(wn=wn.filter(Pn=>!Ot.includes(Pn))),We(xt,wn)},qt=(xt,Ot,wn,Pn)=>{var Ii;if(typeof window<"u"){const Et=window,kn=null===(Ii=null==Et?void 0:Et.Ionic)||void 0===Ii?void 0:Ii.config;if(kn){const Te=kn.get("_ael");if(Te)return Te(xt,Ot,wn,Pn);if(kn._ael)return kn._ael(xt,Ot,wn,Pn)}}return xt.addEventListener(Ot,wn,Pn)},jt=(xt,Ot,wn,Pn)=>{var Ii;if(typeof window<"u"){const Et=window,kn=null===(Ii=null==Et?void 0:Et.Ionic)||void 0===Ii?void 0:Ii.config;if(kn){const Te=kn.get("_rel");if(Te)return Te(xt,Ot,wn,Pn);if(kn._rel)return kn._rel(xt,Ot,wn,Pn)}}return xt.removeEventListener(Ot,wn,Pn)},wt=(xt,Ot=xt)=>xt.shadowRoot||Ot,C=xt=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(xt):"function"==typeof requestAnimationFrame?requestAnimationFrame(xt):setTimeout(xt),At=xt=>!!xt.shadowRoot&&!!xt.attachShadow,Ut=xt=>{if(xt.focus(),xt.classList.contains("ion-focusable")){const Ot=xt.closest("ion-app");Ot&&Ot.setFocus([xt])}},yt=(xt,Ot,wn,Pn,Ii)=>{if(xt||At(Ot)){let Et=Ot.querySelector("input.aux-input");Et||(Et=Ot.ownerDocument.createElement("input"),Et.type="hidden",Et.classList.add("aux-input"),Ot.appendChild(Et)),Et.disabled=Ii,Et.name=wn,Et.value=Pn||""}},fn=(xt,Ot,wn)=>Math.max(xt,Math.min(Ot,wn)),xn=(xt,Ot)=>{if(!xt){const wn="ASSERT: "+Ot;throw console.error(wn),new Error(wn)}},rn=xt=>{if(xt){const Ot=xt.changedTouches;if(Ot&&Ot.length>0){const wn=Ot[0];return{x:wn.clientX,y:wn.clientY}}if(void 0!==xt.pageX)return{x:xt.pageX,y:xt.pageY}}return{x:0,y:0}},ht=xt=>{const Ot="rtl"===document.dir;switch(xt){case"start":return Ot;case"end":return!Ot;default:throw new Error(`"${xt}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ei=(xt,Ot)=>{const wn=xt._original||xt;return{_original:xt,emit:Mn(wn.emit.bind(wn),Ot)}},Mn=(xt,Ot=0)=>{let wn;return(...Pn)=>{clearTimeout(wn),wn=setTimeout(xt,Ot,...Pn)}},Zn=(xt,Ot)=>{if(null!=xt||(xt={}),null!=Ot||(Ot={}),xt===Ot)return!0;const wn=Object.keys(xt);if(wn.length!==Object.keys(Ot).length)return!1;for(const Pn of wn)if(!(Pn in Ot)||xt[Pn]!==Ot[Pn])return!1;return!0}},8607:(Yo,Xn,_e)=>{"use strict";_e.r(Xn),_e.d(Xn,{GESTURE_CONTROLLER:()=>V.G,createGesture:()=>jt});var V=_e(1970);const re=(Ut,yt,fn,xn)=>{const rn=ne(Ut)?{capture:!!xn.capture,passive:!!xn.passive}:!!xn.capture;let ht,ei;return Ut.__zone_symbol__addEventListener?(ht="__zone_symbol__addEventListener",ei="__zone_symbol__removeEventListener"):(ht="addEventListener",ei="removeEventListener"),Ut[ht](yt,fn,rn),()=>{Ut[ei](yt,fn,rn)}},ne=Ut=>{if(void 0===l)try{const yt=Object.defineProperty({},"passive",{get:()=>{l=!0}});Ut.addEventListener("optsTest",()=>{},yt)}catch{l=!1}return!!l};let l;const ft=Ut=>Ut instanceof Document?Ut:Ut.ownerDocument,jt=Ut=>{let yt=!1,fn=!1,xn=!0,rn=!1;const ht=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ut),ei=ht.canStart,Mn=ht.onWillStart,Zn=ht.onStart,xt=ht.onEnd,Ot=ht.notCaptured,wn=ht.onMove,Pn=ht.threshold,Ii=ht.passive,Et=ht.blurOnStart,kn={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Te=((Ut,yt,fn)=>{const xn=fn*(Math.PI/180),rn="x"===Ut,ht=Math.cos(xn),ei=yt*yt;let Mn=0,Zn=0,xt=!1,Ot=0;return{start(wn,Pn){Mn=wn,Zn=Pn,Ot=0,xt=!0},detect(wn,Pn){if(!xt)return!1;const Ii=wn-Mn,Et=Pn-Zn,kn=Ii*Ii+Et*Et;if(kn<ei)return!1;const Te=Math.sqrt(kn),on=(rn?Ii:Et)/Te;return Ot=on>ht?1:on<-ht?-1:0,xt=!1,!0},isGesture:()=>0!==Ot,getDirection:()=>Ot}})(ht.direction,ht.threshold,ht.maxAngle),on=V.G.createGesture({name:Ut.gestureName,priority:Ut.gesturePriority,disableScroll:Ut.disableScroll}),oo=()=>{yt&&(rn=!1,wn&&wn(kn))},Vn=()=>!!on.capture()&&(yt=!0,xn=!1,kn.startX=kn.currentX,kn.startY=kn.currentY,kn.startTime=kn.currentTime,Mn?Mn(kn).then(Ae):Ae(),!0),Ae=()=>{Et&&(()=>{if(typeof document<"u"){const un=document.activeElement;null!=un&&un.blur&&un.blur()}})(),Zn&&Zn(kn),xn=!0},Ge=()=>{yt=!1,fn=!1,rn=!1,xn=!0,on.release()},et=un=>{const go=yt,Qi=xn;if(Ge(),Qi){if(wt(kn,un),go)return void(xt&&xt(kn));Ot&&Ot(kn)}},zt=((Ut,yt,fn,xn,rn)=>{let ht,ei,Mn,Zn,xt,Ot,wn,Pn=0;const Ii=Ke=>{Pn=Date.now()+2e3,yt(Ke)&&(!ei&&fn&&(ei=re(Ut,"touchmove",fn,rn)),Mn||(Mn=re(Ke.target,"touchend",kn,rn)),Zn||(Zn=re(Ke.target,"touchcancel",kn,rn)))},Et=Ke=>{Pn>Date.now()||yt(Ke)&&(!Ot&&fn&&(Ot=re(ft(Ut),"mousemove",fn,rn)),wn||(wn=re(ft(Ut),"mouseup",Te,rn)))},kn=Ke=>{on(),xn&&xn(Ke)},Te=Ke=>{Qt(),xn&&xn(Ke)},on=()=>{ei&&ei(),Mn&&Mn(),Zn&&Zn(),ei=Mn=Zn=void 0},Qt=()=>{Ot&&Ot(),wn&&wn(),Ot=wn=void 0},En=()=>{on(),Qt()},oo=(Ke=!0)=>{Ke?(ht||(ht=re(Ut,"touchstart",Ii,rn)),xt||(xt=re(Ut,"mousedown",Et,rn))):(ht&&ht(),xt&&xt(),ht=xt=void 0,En())};return{enable:oo,stop:En,destroy:()=>{oo(!1),xn=fn=yt=void 0}}})(ht.el,un=>{const go=At(un);return!(fn||!xn||(C(un,kn),kn.startX=kn.currentX,kn.startY=kn.currentY,kn.startTime=kn.currentTime=go,kn.velocityX=kn.velocityY=kn.deltaX=kn.deltaY=0,kn.event=un,ei&&!1===ei(kn))||(on.release(),!on.start()))&&(fn=!0,0===Pn?Vn():(Te.start(kn.startX,kn.startY),!0))},un=>{yt?!rn&&xn&&(rn=!0,wt(kn,un),requestAnimationFrame(oo)):(wt(kn,un),Te.detect(kn.currentX,kn.currentY)&&(!Te.isGesture()||!Vn())&&qn())},et,{capture:!1,passive:Ii}),qn=()=>{Ge(),zt.stop(),Ot&&Ot(kn)};return{enable(un=!0){un||(yt&&et(void 0),Ge()),zt.enable(un)},destroy(){on.destroy(),zt.destroy()}}},wt=(Ut,yt)=>{if(!yt)return;const fn=Ut.currentX,xn=Ut.currentY,rn=Ut.currentTime;C(yt,Ut);const ht=Ut.currentX,ei=Ut.currentY,Zn=(Ut.currentTime=At(yt))-rn;if(Zn>0&&Zn<100){const Ot=(ei-xn)/Zn;Ut.velocityX=(ht-fn)/Zn*.7+.3*Ut.velocityX,Ut.velocityY=.7*Ot+.3*Ut.velocityY}Ut.deltaX=ht-Ut.startX,Ut.deltaY=ei-Ut.startY,Ut.event=yt},C=(Ut,yt)=>{let fn=0,xn=0;if(Ut){const rn=Ut.changedTouches;if(rn&&rn.length>0){const ht=rn[0];fn=ht.clientX,xn=ht.clientY}else void 0!==Ut.pageX&&(fn=Ut.pageX,xn=Ut.pageY)}yt.currentX=fn,yt.currentY=xn},At=Ut=>Ut.timeStamp||Date.now()},6073:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{m:()=>Ut});var V=_e(467),re=_e(8476),ne=_e(8669),l=_e(4929),We=_e(4920),Y=_e(4921),ft=_e(9986);const qt=yt=>(0,ft.c)().duration(yt?400:300),jt=yt=>{let fn,xn;const rn=yt.width+8,ht=(0,ft.c)(),ei=(0,ft.c)();yt.isEndSide?(fn=rn+"px",xn="0px"):(fn=-rn+"px",xn="0px"),ht.addElement(yt.menuInnerEl).fromTo("transform",`translateX(${fn})`,`translateX(${xn})`);const Zn="ios"===(0,Y.b)(yt),xt=Zn?.2:.25;return ei.addElement(yt.backdropEl).fromTo("opacity",.01,xt),qt(Zn).addAnimation([ht,ei])},wt=yt=>{let fn,xn;const rn=(0,Y.b)(yt),ht=yt.width;yt.isEndSide?(fn=-ht+"px",xn=ht+"px"):(fn=ht+"px",xn=-ht+"px");const ei=(0,ft.c)().addElement(yt.menuInnerEl).fromTo("transform",`translateX(${xn})`,"translateX(0px)"),Mn=(0,ft.c)().addElement(yt.contentEl).fromTo("transform","translateX(0px)",`translateX(${fn})`),Zn=(0,ft.c)().addElement(yt.backdropEl).fromTo("opacity",.01,.32);return qt("ios"===rn).addAnimation([ei,Mn,Zn])},C=yt=>{const fn=(0,Y.b)(yt),xn=yt.width*(yt.isEndSide?-1:1)+"px",rn=(0,ft.c)().addElement(yt.contentEl).fromTo("transform","translateX(0px)",`translateX(${xn})`);return qt("ios"===fn).addAnimation(rn)},Ut=(()=>{const yt=new Map,fn=[],xn=function(){var Ge=(0,V.A)(function*(et){const zt=yield Ot(et,!0);return!!zt&&zt.open()});return function(zt){return Ge.apply(this,arguments)}}(),rn=function(){var Ge=(0,V.A)(function*(et){const zt=yield void 0!==et?Ot(et,!0):wn();return void 0!==zt&&zt.close()});return function(zt){return Ge.apply(this,arguments)}}(),ht=function(){var Ge=(0,V.A)(function*(et){const zt=yield Ot(et,!0);return!!zt&&zt.toggle()});return function(zt){return Ge.apply(this,arguments)}}(),ei=function(){var Ge=(0,V.A)(function*(et,zt){const qn=yield Ot(zt);return qn&&(qn.disabled=!et),qn});return function(zt,qn){return Ge.apply(this,arguments)}}(),Mn=function(){var Ge=(0,V.A)(function*(et,zt){const qn=yield Ot(zt);return qn&&(qn.swipeGesture=et),qn});return function(zt,qn){return Ge.apply(this,arguments)}}(),Zn=function(){var Ge=(0,V.A)(function*(et){if(null!=et){const zt=yield Ot(et);return void 0!==zt&&zt.isOpen()}return void 0!==(yield wn())});return function(zt){return Ge.apply(this,arguments)}}(),xt=function(){var Ge=(0,V.A)(function*(et){const zt=yield Ot(et);return!!zt&&!zt.disabled});return function(zt){return Ge.apply(this,arguments)}}(),Ot=function(){var Ge=(0,V.A)(function*(et,zt=!1){if(yield Ae(),"start"===et||"end"===et){const un=fn.filter(Qi=>Qi.side===et&&!Qi.disabled);if(un.length>=1)return un.length>1&&zt&&(0,l.p)(`menuController queried for a menu on the "${et}" side, but ${un.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,un.map(Qi=>Qi.el)),un[0].el;const go=fn.filter(Qi=>Qi.side===et);if(go.length>=1)return go.length>1&&zt&&(0,l.p)(`menuController queried for a menu on the "${et}" side, but ${go.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,go.map(Qi=>Qi.el)),go[0].el}else if(null!=et)return Ke(un=>un.menuId===et);return Ke(un=>!un.disabled)||(fn.length>0?fn[0].el:void 0)});return function(zt){return Ge.apply(this,arguments)}}(),wn=function(){var Ge=(0,V.A)(function*(){return yield Ae(),En()});return function(){return Ge.apply(this,arguments)}}(),Pn=function(){var Ge=(0,V.A)(function*(){return yield Ae(),oo()});return function(){return Ge.apply(this,arguments)}}(),Ii=function(){var Ge=(0,V.A)(function*(){return yield Ae(),Vn()});return function(){return Ge.apply(this,arguments)}}(),Et=(Ge,et)=>{yt.set(Ge,et)},on=function(){var Ge=(0,V.A)(function*(et,zt,qn){if(Vn())return!1;if(zt){const un=yield wn();un&&et.el!==un&&(yield un.setOpen(!1,!1))}return et._setOpen(zt,qn)});return function(zt,qn,un){return Ge.apply(this,arguments)}}(),En=()=>Ke(Ge=>Ge._isOpen),oo=()=>fn.map(Ge=>Ge.el),Vn=()=>fn.some(Ge=>Ge.isAnimating),Ke=Ge=>{const et=fn.find(Ge);if(void 0!==et)return et.el},Ae=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ge=>new Promise(et=>(0,We.c)(Ge,et))));return Et("reveal",C),Et("push",wt),Et("overlay",jt),null==re.d||re.d.addEventListener("ionBackButton",Ge=>{const et=En();et&&Ge.detail.register(ne.MENU_BACK_BUTTON_PRIORITY,()=>et.close())}),{registerAnimation:Et,get:Ot,getMenus:Pn,getOpen:wn,isEnabled:xt,swipeGesture:Mn,isAnimating:Ii,isOpen:Zn,enable:ei,toggle:ht,close:rn,open:xn,_getOpenSync:En,_createAnimation:(Ge,et)=>{const zt=yt.get(Ge);if(!zt)throw new Error("animation not registered");return zt(et)},_register:Ge=>{fn.indexOf(Ge)<0&&fn.push(Ge)},_unregister:Ge=>{const et=fn.indexOf(Ge);et>-1&&fn.splice(et,1)},_setOpen:on}})()},8393:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{B:()=>Y,d:()=>hs,e:()=>Qi,f:()=>ro,g:()=>wr,h:()=>Br,i:()=>Jn,j:()=>Vr,k:()=>Go,r:()=>jt,w:()=>dr});var V=_e(467);var l=Object.defineProperty,Y={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ft=new WeakMap,qt=nt=>ft.get(nt),jt=(nt,Dt)=>ft.set(Dt.$lazyInstance$=nt,Dt),C=(nt,Dt)=>Dt in nt,At=(nt,Dt)=>(0,console.error)(nt,Dt),fn=new Map,Ii="http://www.w3.org/1999/xlink",Et=typeof window<"u"?window:{},kn=Et.document||{head:{}},on={$flags$:0,$resourcesUrl$:"",jmp:nt=>nt(),raf:nt=>requestAnimationFrame(nt),ael:(nt,Dt,Hn,Yn)=>nt.addEventListener(Dt,Hn,Yn),rel:(nt,Dt,Hn,Yn)=>nt.removeEventListener(Dt,Hn,Yn),ce:(nt,Dt)=>new CustomEvent(nt,Dt)},Ae=!1,Ge=[],et=[],zt=(nt,Dt)=>Hn=>{nt.push(Hn),Ae||(Ae=!0,Dt&&4&on.$flags$?go(un):on.raf(un))},qn=nt=>{for(let Dt=0;Dt<nt.length;Dt++)try{nt[Dt](performance.now())}catch(Hn){At(Hn)}nt.length=0},un=()=>{qn(Ge),qn(et),(Ae=Ge.length>0)&&on.raf(un)},go=nt=>Promise.resolve(void 0).then(nt),Qi=zt(Ge,!1),dr=zt(et,!0),Go=nt=>{const Dt=new URL(nt,on.$resourcesUrl$);return Dt.origin!==Et.location.origin?Dt.href:Dt.pathname},Dr={},Er=nt=>"object"==(nt=typeof nt)||"function"===nt;((nt,Dt)=>{for(var Hn in Dt)l(nt,Hn,{get:Dt[Hn],enumerable:!0})})({},{err:()=>Yi,map:()=>ui,ok:()=>vi,unwrap:()=>Ni,unwrapErr:()=>po});var vi=nt=>({isOk:!0,isErr:!1,value:nt}),Yi=nt=>({isOk:!1,isErr:!0,value:nt});function ui(nt,Dt){if(nt.isOk){const Hn=Dt(nt.value);return Hn instanceof Promise?Hn.then(Yn=>vi(Yn)):vi(Hn)}if(nt.isErr)return Yi(nt.value);throw"should never get here"}var Ni=nt=>{if(nt.isOk)return nt.value;throw nt.value},po=nt=>{if(nt.isErr)return nt.value;throw nt.value},Br=(nt,Dt,...Hn)=>{let Yn=null,On=null,li=null,bo=!1,Eo=!1;const so=[],mi=hr=>{for(let Ir=0;Ir<hr.length;Ir++)Yn=hr[Ir],Array.isArray(Yn)?mi(Yn):null!=Yn&&"boolean"!=typeof Yn&&((bo="function"!=typeof nt&&!Er(Yn))&&(Yn=String(Yn)),bo&&Eo?so[so.length-1].$text$+=Yn:so.push(bo?So(null,Yn):Yn),Eo=bo)};if(mi(Hn),Dt){Dt.key&&(On=Dt.key),Dt.name&&(li=Dt.name);{const hr=Dt.className||Dt.class;hr&&(Dt.class="object"!=typeof hr?hr:Object.keys(hr).filter(Ir=>hr[Ir]).join(" "))}}if("function"==typeof nt)return nt(null===Dt?{}:Dt,so,Ts);const qo=So(nt,null);return qo.$attrs$=Dt,so.length>0&&(qo.$children$=so),qo.$key$=On,qo.$name$=li,qo},So=(nt,Dt)=>({$flags$:0,$tag$:nt,$text$:Dt,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ro={},Ts={forEach:(nt,Dt)=>nt.map(zr).forEach(Dt),map:(nt,Dt)=>nt.map(zr).map(Dt).map(Zr)},zr=nt=>({vattrs:nt.$attrs$,vchildren:nt.$children$,vkey:nt.$key$,vname:nt.$name$,vtag:nt.$tag$,vtext:nt.$text$}),Zr=nt=>{if("function"==typeof nt.vtag){const Hn={...nt.vattrs};return nt.vkey&&(Hn.key=nt.vkey),nt.vname&&(Hn.name=nt.vname),Br(nt.vtag,Hn,...nt.vchildren||[])}const Dt=So(nt.vtag,nt.vtext);return Dt.$attrs$=nt.vattrs,Dt.$children$=nt.vchildren,Dt.$key$=nt.vkey,Dt.$name$=nt.vname,Dt},wr=nt=>qt(nt).$modeName$,Jn=nt=>qt(nt).$hostElement$,hs=(nt,Dt,Hn)=>{const Yn=Jn(nt);return{emit:On=>jr(Yn,Dt,{bubbles:!!(4&Hn),composed:!!(2&Hn),cancelable:!!(1&Hn),detail:On})}},jr=(nt,Dt,Hn)=>{const Yn=on.ce(Dt,Hn);return nt.dispatchEvent(Yn),Yn},Ns=new WeakMap,ni=(nt,Dt)=>"sc-"+(Dt&&32&nt.$flags$?nt.$tagName$+"-"+Dt:nt.$tagName$),Kn=(nt,Dt,Hn,Yn,On,li)=>{if(Hn!==Yn){let bo=C(nt,Dt),Eo=Dt.toLowerCase();if("class"===Dt){const so=nt.classList,mi=mt(Hn),qo=mt(Yn);so.remove(...mi.filter(hr=>hr&&!qo.includes(hr))),so.add(...qo.filter(hr=>hr&&!mi.includes(hr)))}else if("style"===Dt){for(const so in Hn)(!Yn||null==Yn[so])&&(so.includes("-")?nt.style.removeProperty(so):nt.style[so]="");for(const so in Yn)(!Hn||Yn[so]!==Hn[so])&&(so.includes("-")?nt.style.setProperty(so,Yn[so]):nt.style[so]=Yn[so])}else if("key"!==Dt)if("ref"===Dt)Yn&&Yn(nt);else if(bo||"o"!==Dt[0]||"n"!==Dt[1]){const so=Er(Yn);if((bo||so&&null!==Yn)&&!On)try{if(nt.tagName.includes("-"))nt[Dt]=Yn;else{const qo=null==Yn?"":Yn;"list"===Dt?bo=!1:(null==Hn||nt[Dt]!=qo)&&(nt[Dt]=qo)}}catch{}let mi=!1;Eo!==(Eo=Eo.replace(/^xlink\:?/,""))&&(Dt=Eo,mi=!0),null==Yn||!1===Yn?(!1!==Yn||""===nt.getAttribute(Dt))&&(mi?nt.removeAttributeNS(Ii,Dt):nt.removeAttribute(Dt)):(!bo||4&li||On)&&!so&&(Yn=!0===Yn?"":Yn,mi?nt.setAttributeNS(Ii,Dt,Yn):nt.setAttribute(Dt,Yn))}else if(Dt="-"===Dt[2]?Dt.slice(3):C(Et,Eo)?Eo.slice(2):Eo[2]+Dt.slice(3),Hn||Yn){const so=Dt.endsWith(Ye);Dt=Dt.replace(Tt,""),Hn&&on.rel(nt,Dt,Hn,so),Yn&&on.ael(nt,Dt,Yn,so)}}},kt=/\s/,mt=nt=>nt?nt.split(kt):[],Ye="Capture",Tt=new RegExp(Ye+"$"),Jt=(nt,Dt,Hn)=>{const Yn=11===Dt.$elm$.nodeType&&Dt.$elm$.host?Dt.$elm$.host:Dt.$elm$,On=nt&&nt.$attrs$||Dr,li=Dt.$attrs$||Dr;for(const bo of Ln(Object.keys(On)))bo in li||Kn(Yn,bo,On[bo],void 0,Hn,Dt.$flags$);for(const bo of Ln(Object.keys(li)))Kn(Yn,bo,On[bo],li[bo],Hn,Dt.$flags$)};function Ln(nt){return nt.includes("ref")?[...nt.filter(Dt=>"ref"!==Dt),"ref"]:nt}var Lt,Ee,ue,ae=!1,we=!1,Ue=!1,it=!1,Xt=(nt,Dt,Hn,Yn)=>{var On;const li=Dt.$children$[Hn];let Eo,so,mi,bo=0;if(ae||(Ue=!0,"slot"===li.$tag$&&(Lt&&Yn.classList.add(Lt+"-s"),li.$flags$|=li.$children$?2:1)),null!==li.$text$)Eo=li.$elm$=kn.createTextNode(li.$text$);else if(1&li.$flags$)Eo=li.$elm$=kn.createTextNode("");else{if(it||(it="svg"===li.$tag$),Eo=li.$elm$=kn.createElementNS(it?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!ae&&2&li.$flags$?"slot-fb":li.$tag$),it&&"foreignObject"===li.$tag$&&(it=!1),Jt(null,li,it),(nt=>null!=nt)(Lt)&&Eo["s-si"]!==Lt&&Eo.classList.add(Eo["s-si"]=Lt),pr(Eo,Yn),li.$children$)for(bo=0;bo<li.$children$.length;++bo)so=Xt(nt,li,bo,Eo),so&&Eo.appendChild(so);"svg"===li.$tag$?it=!1:"foreignObject"===Eo.tagName&&(it=!0)}return Eo["s-hn"]=ue,3&li.$flags$&&(Eo["s-sr"]=!0,Eo["s-cr"]=Ee,Eo["s-sn"]=li.$name$||"",Eo["s-rf"]=null==(On=li.$attrs$)?void 0:On.ref,mi=nt&&nt.$children$&&nt.$children$[Hn],mi&&mi.$tag$===li.$tag$&&nt.$elm$&&Cn(nt.$elm$)),Eo},Cn=nt=>{on.$flags$|=1;const Dt=nt.closest(ue.toLowerCase());if(null!=Dt){const Hn=Array.from(Dt.childNodes).find(On=>On["s-cr"]),Yn=Array.from(nt.childNodes);for(const On of Hn?Yn.reverse():Yn)null!=On["s-sh"]&&(Pi(Dt,On,null!=Hn?Hn:null),On["s-sh"]=void 0,Ue=!0)}on.$flags$&=-2},dn=(nt,Dt)=>{on.$flags$|=1;const Hn=Array.from(nt.childNodes);if(nt["s-sr"]){let Yn=nt;for(;Yn=Yn.nextSibling;)Yn&&Yn["s-sn"]===nt["s-sn"]&&Yn["s-sh"]===ue&&Hn.push(Yn)}for(let Yn=Hn.length-1;Yn>=0;Yn--){const On=Hn[Yn];On["s-hn"]!==ue&&On["s-ol"]&&(Pi(ii(On),On,nr(On)),On["s-ol"].remove(),On["s-ol"]=void 0,On["s-sh"]=void 0,Ue=!0),Dt&&dn(On,Dt)}on.$flags$&=-2},Nn=(nt,Dt,Hn,Yn,On,li)=>{let Eo,bo=nt["s-cr"]&&nt["s-cr"].parentNode||nt;for(bo.shadowRoot&&bo.tagName===ue&&(bo=bo.shadowRoot);On<=li;++On)Yn[On]&&(Eo=Xt(null,Hn,On,nt),Eo&&(Yn[On].$elm$=Eo,Pi(bo,Eo,nr(Dt))))},Hi=(nt,Dt,Hn)=>{for(let Yn=Dt;Yn<=Hn;++Yn){const On=nt[Yn];if(On){const li=On.$elm$;oi(On),li&&(we=!0,li["s-ol"]?li["s-ol"].remove():dn(li,!0),li.remove())}}},Fo=(nt,Dt,Hn=!1)=>nt.$tag$===Dt.$tag$&&("slot"===nt.$tag$?nt.$name$===Dt.$name$:!!Hn||nt.$key$===Dt.$key$),nr=nt=>nt&&nt["s-ol"]||nt,ii=nt=>(nt["s-ol"]?nt["s-ol"]:nt).parentNode,jn=(nt,Dt,Hn=!1)=>{const Yn=Dt.$elm$=nt.$elm$,On=nt.$children$,li=Dt.$children$,bo=Dt.$tag$,Eo=Dt.$text$;let so;null===Eo?(it="svg"===bo||"foreignObject"!==bo&&it,"slot"!==bo||ae?Jt(nt,Dt,it):nt.$name$!==Dt.$name$&&(Dt.$elm$["s-sn"]=Dt.$name$||"",Cn(Dt.$elm$.parentElement)),null!==On&&null!==li?((nt,Dt,Hn,Yn,On=!1)=>{let ea,Ps,li=0,bo=0,Eo=0,so=0,mi=Dt.length-1,qo=Dt[0],hr=Dt[mi],Ir=Yn.length-1,os=Yn[0],Cs=Yn[Ir];for(;li<=mi&&bo<=Ir;)if(null==qo)qo=Dt[++li];else if(null==hr)hr=Dt[--mi];else if(null==os)os=Yn[++bo];else if(null==Cs)Cs=Yn[--Ir];else if(Fo(qo,os,On))jn(qo,os,On),qo=Dt[++li],os=Yn[++bo];else if(Fo(hr,Cs,On))jn(hr,Cs,On),hr=Dt[--mi],Cs=Yn[--Ir];else if(Fo(qo,Cs,On))("slot"===qo.$tag$||"slot"===Cs.$tag$)&&dn(qo.$elm$.parentNode,!1),jn(qo,Cs,On),Pi(nt,qo.$elm$,hr.$elm$.nextSibling),qo=Dt[++li],Cs=Yn[--Ir];else if(Fo(hr,os,On))("slot"===qo.$tag$||"slot"===Cs.$tag$)&&dn(hr.$elm$.parentNode,!1),jn(hr,os,On),Pi(nt,hr.$elm$,qo.$elm$),hr=Dt[--mi],os=Yn[++bo];else{for(Eo=-1,so=li;so<=mi;++so)if(Dt[so]&&null!==Dt[so].$key$&&Dt[so].$key$===os.$key$){Eo=so;break}Eo>=0?(Ps=Dt[Eo],Ps.$tag$!==os.$tag$?ea=Xt(Dt&&Dt[bo],Hn,Eo,nt):(jn(Ps,os,On),Dt[Eo]=void 0,ea=Ps.$elm$),os=Yn[++bo]):(ea=Xt(Dt&&Dt[bo],Hn,bo,nt),os=Yn[++bo]),ea&&Pi(ii(qo.$elm$),ea,nr(qo.$elm$))}li>mi?Nn(nt,null==Yn[Ir+1]?null:Yn[Ir+1].$elm$,Hn,Yn,bo,Ir):bo>Ir&&Hi(Dt,li,mi)})(Yn,On,Dt,li,Hn):null!==li?(null!==nt.$text$&&(Yn.textContent=""),Nn(Yn,null,Dt,li,0,li.length-1)):null!==On&&Hi(On,0,On.length-1),it&&"svg"===bo&&(it=!1)):(so=Yn["s-cr"])?so.parentNode.textContent=Eo:nt.$text$!==Eo&&(Yn.data=Eo)},di=nt=>{const Dt=nt.childNodes;for(const Hn of Dt)if(1===Hn.nodeType){if(Hn["s-sr"]){const Yn=Hn["s-sn"];Hn.hidden=!1;for(const On of Dt)if(On!==Hn)if(On["s-hn"]!==Hn["s-hn"]||""!==Yn){if(1===On.nodeType&&(Yn===On.getAttribute("slot")||Yn===On["s-sn"])||3===On.nodeType&&Yn===On["s-sn"]){Hn.hidden=!0;break}}else if(1===On.nodeType||3===On.nodeType&&""!==On.textContent.trim()){Hn.hidden=!0;break}}di(Hn)}},co=[],Ki=nt=>{let Dt,Hn,Yn;for(const On of nt.childNodes){if(On["s-sr"]&&(Dt=On["s-cr"])&&Dt.parentNode){Hn=Dt.parentNode.childNodes;const li=On["s-sn"];for(Yn=Hn.length-1;Yn>=0;Yn--)if(Dt=Hn[Yn],!(Dt["s-cn"]||Dt["s-nr"]||Dt["s-hn"]===On["s-hn"]||Dt["s-sh"]&&Dt["s-sh"]===On["s-hn"]))if(Kt(Dt,li)){let bo=co.find(Eo=>Eo.$nodeToRelocate$===Dt);we=!0,Dt["s-sn"]=Dt["s-sn"]||li,bo?(bo.$nodeToRelocate$["s-sh"]=On["s-hn"],bo.$slotRefNode$=On):(Dt["s-sh"]=On["s-hn"],co.push({$slotRefNode$:On,$nodeToRelocate$:Dt})),Dt["s-sr"]&&co.map(Eo=>{Kt(Eo.$nodeToRelocate$,Dt["s-sn"])&&(bo=co.find(so=>so.$nodeToRelocate$===Dt),bo&&!Eo.$slotRefNode$&&(Eo.$slotRefNode$=bo.$slotRefNode$))})}else co.some(bo=>bo.$nodeToRelocate$===Dt)||co.push({$nodeToRelocate$:Dt})}1===On.nodeType&&Ki(On)}},Kt=(nt,Dt)=>1===nt.nodeType?null===nt.getAttribute("slot")&&""===Dt||nt.getAttribute("slot")===Dt:nt["s-sn"]===Dt||""===Dt,oi=nt=>{nt.$attrs$&&nt.$attrs$.ref&&nt.$attrs$.ref(null),nt.$children$&&nt.$children$.map(oi)},Pi=(nt,Dt,Hn)=>{const Yn=null==nt?void 0:nt.insertBefore(Dt,Hn);return pr(Dt,nt),Yn},Xo=nt=>{const Dt=[];return nt&&Dt.push(...nt["s-scs"]||[],nt["s-si"],nt["s-sc"],...Xo(nt.parentElement)),Dt},pr=(nt,Dt,Hn=!1)=>{var Yn;if(nt&&Dt&&1===nt.nodeType){const On=new Set(Xo(Dt).filter(Boolean));if(On.size&&(null==(Yn=nt.classList)||Yn.add(...nt["s-scs"]=[...On]),nt["s-ol"]||Hn))for(const li of Array.from(nt.childNodes))pr(li,nt,!0)}},Pa=(nt,Dt)=>{if(nt.$flags$|=16,!(4&nt.$flags$))return((nt,Dt)=>{Dt&&!nt.$onRenderResolve$&&Dt["s-p"]&&Dt["s-p"].push(new Promise(Hn=>nt.$onRenderResolve$=Hn))})(nt,nt.$ancestorComponent$),dr(()=>Jl(nt,Dt));nt.$flags$|=512},Jl=(nt,Dt)=>{const On=nt.$lazyInstance$;if(!On)throw new Error(`Can't render component <${nt.$hostElement$.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let li;return Dt&&(nt.$flags$|=256,nt.$queuedListeners$&&(nt.$queuedListeners$.map(([bo,Eo])=>Es(On,bo,Eo)),nt.$queuedListeners$=void 0),li=Es(On,"componentWillLoad")),li=ru(li,()=>Es(On,"componentWillRender")),ru(li,()=>Cr(nt,On,Dt))},ru=(nt,Dt)=>Oa(nt)?nt.then(Dt).catch(Hn=>{console.error(Hn),Dt()}):Dt(),Oa=nt=>nt instanceof Promise||nt&&nt.then&&"function"==typeof nt.then,Cr=function(){var nt=(0,V.A)(function*(Dt,Hn,Yn){var On;const li=Dt.$hostElement$,Eo=li["s-rc"];Yn&&(nt=>{const Dt=nt.$cmpMeta$,Hn=nt.$hostElement$,Yn=Dt.$flags$,li=((nt,Dt,Hn)=>{var Yn;const On=ni(Dt,Hn),li=fn.get(On);if(nt=11===nt.nodeType?nt:kn,li)if("string"==typeof li){let Eo,bo=Ns.get(nt=nt.head||nt);if(bo||Ns.set(nt,bo=new Set),!bo.has(On)){if(nt.host&&(Eo=nt.querySelector(`[sty-id="${On}"]`)))Eo.innerHTML=li;else{Eo=kn.createElement("style"),Eo.innerHTML=li;const so=null!=(Yn=on.$nonce$)?Yn:function Wr(nt){var Dt,Hn,Yn;return null!=(Yn=null==(Hn=null==(Dt=nt.head)?void 0:Dt.querySelector('meta[name="csp-nonce"]'))?void 0:Hn.getAttribute("content"))?Yn:void 0}(kn);null!=so&&Eo.setAttribute("nonce",so),nt.insertBefore(Eo,nt.querySelector("link"))}4&Dt.$flags$&&(Eo.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),bo&&bo.add(On)}}else nt.adoptedStyleSheets.includes(li)||(nt.adoptedStyleSheets=[...nt.adoptedStyleSheets,li]);return On})(Hn.shadowRoot?Hn.shadowRoot:Hn.getRootNode(),Dt,nt.$modeName$);10&Yn&&(Hn["s-sc"]=li,Hn.classList.add(li+"-h"),2&Yn&&Hn.classList.add(li+"-s"))})(Dt);bi(Dt,Hn,li,Yn),Eo&&(Eo.map(mi=>mi()),li["s-rc"]=void 0);{const mi=null!=(On=li["s-p"])?On:[],qo=()=>kr(Dt);0===mi.length?qo():(Promise.all(mi).then(qo),Dt.$flags$|=4,mi.length=0)}});return function(Hn,Yn,On){return nt.apply(this,arguments)}}(),bi=(nt,Dt,Hn,Yn)=>{try{Dt=Dt.render&&Dt.render(),nt.$flags$&=-17,nt.$flags$|=2,((nt,Dt,Hn=!1)=>{var Yn,On,li,bo,Eo;const so=nt.$hostElement$,mi=nt.$cmpMeta$,qo=nt.$vnode$||So(null,null),hr=(nt=>nt&&nt.$tag$===ro)(Dt)?Dt:Br(null,null,Dt);if(ue=so.tagName,mi.$attrsToReflect$&&(hr.$attrs$=hr.$attrs$||{},mi.$attrsToReflect$.map(([Ir,os])=>hr.$attrs$[os]=so[Ir])),Hn&&hr.$attrs$)for(const Ir of Object.keys(hr.$attrs$))so.hasAttribute(Ir)&&!["key","ref","style","class"].includes(Ir)&&(hr.$attrs$[Ir]=so[Ir]);if(hr.$tag$=null,hr.$flags$|=4,nt.$vnode$=hr,hr.$elm$=qo.$elm$=so.shadowRoot||so,Lt=so["s-sc"],ae=!!(1&mi.$flags$),Ee=so["s-cr"],we=!1,jn(qo,hr,Hn),on.$flags$|=1,Ue){Ki(hr.$elm$);for(const Ir of co){const os=Ir.$nodeToRelocate$;if(!os["s-ol"]){const Cs=kn.createTextNode("");Cs["s-nr"]=os,Pi(os.parentNode,os["s-ol"]=Cs,os)}}for(const Ir of co){const os=Ir.$nodeToRelocate$,Cs=Ir.$slotRefNode$;if(Cs){const ea=Cs.parentNode;let Ps=Cs.nextSibling;if(Ps&&1===Ps.nodeType){let Nr=null==(Yn=os["s-ol"])?void 0:Yn.previousSibling;for(;Nr;){let Yr=null!=(On=Nr["s-nr"])?On:null;if(Yr&&Yr["s-sn"]===os["s-sn"]&&ea===Yr.parentNode){for(Yr=Yr.nextSibling;Yr===os||null!=Yr&&Yr["s-sr"];)Yr=null==Yr?void 0:Yr.nextSibling;if(!Yr||!Yr["s-nr"]){Ps=Yr;break}}Nr=Nr.previousSibling}}(!Ps&&ea!==os.parentNode||os.nextSibling!==Ps)&&os!==Ps&&(Pi(ea,os,Ps),1===os.nodeType&&(os.hidden=null!=(li=os["s-ih"])&&li)),os&&"function"==typeof Cs["s-rf"]&&Cs["s-rf"](os)}else 1===os.nodeType&&(Hn&&(os["s-ih"]=null!=(bo=os.hidden)&&bo),os.hidden=!0)}}if(we&&di(hr.$elm$),on.$flags$&=-2,co.length=0,2&mi.$flags$)for(const Ir of hr.$elm$.childNodes)Ir["s-hn"]!==ue&&!Ir["s-sh"]&&(Hn&&null==Ir["s-ih"]&&(Ir["s-ih"]=null!=(Eo=Ir.hidden)&&Eo),Ir.hidden=!0);Ee=void 0})(nt,Dt,Yn)}catch(On){At(On,nt.$hostElement$)}return null},kr=nt=>{const Hn=nt.$hostElement$,On=nt.$lazyInstance$,li=nt.$ancestorComponent$;Es(On,"componentDidRender"),64&nt.$flags$?Es(On,"componentDidUpdate"):(nt.$flags$|=64,wa(Hn),Es(On,"componentDidLoad"),nt.$onReadyResolve$(Hn),li||is()),nt.$onInstanceResolve$(Hn),nt.$onRenderResolve$&&(nt.$onRenderResolve$(),nt.$onRenderResolve$=void 0),512&nt.$flags$&&go(()=>Pa(nt,!1)),nt.$flags$&=-517},Vr=nt=>{{const Dt=qt(nt),Hn=Dt.$hostElement$.isConnected;return Hn&&2==(18&Dt.$flags$)&&Pa(Dt,!1),Hn}},is=nt=>{wa(kn.documentElement),go(()=>jr(Et,"appload",{detail:{namespace:"ionic"}}))},Es=(nt,Dt,Hn)=>{if(nt&&nt[Dt])try{return nt[Dt](Hn)}catch(Yn){At(Yn)}},wa=nt=>nt.classList.add(("hydrated","hydrated"))},1331:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{b:()=>qt,c:()=>jt,d:()=>wt,e:()=>En,g:()=>Ke,l:()=>on,s:()=>oo,t:()=>ht,w:()=>Qt});var V=_e(467),re=_e(4921),ne=_e(8393),l=_e(4929),We=_e(4920);const qt="ionViewWillLeave",jt="ionViewDidLeave",wt="ionViewWillUnload",C=Ae=>{Ae.tabIndex=-1,Ae.focus()},At=Ae=>null!==Ae.offsetParent,yt="ion-last-focus",rn_saveViewFocus=et=>{if(re.c.get("focusManagerPriority",!1)){const qn=document.activeElement;null!==qn&&null!=et&&et.contains(qn)&&qn.setAttribute(yt,"true")}},rn_setViewFocus=et=>{const zt=re.c.get("focusManagerPriority",!1);if(Array.isArray(zt)&&!et.contains(document.activeElement)){const qn=et.querySelector(`[${yt}]`);if(qn&&At(qn))return void C(qn);for(const un of zt)switch(un){case"content":const go=et.querySelector('main, [role="main"]');if(go&&At(go))return void C(go);break;case"heading":const Qi=et.querySelector('h1, [role="heading"][aria-level="1"]');if(Qi&&At(Qi))return void C(Qi);break;case"banner":const dr=et.querySelector('header, [role="banner"]');if(dr&&At(dr))return void C(dr);break;default:(0,l.p)(`Unrecognized focus manager priority value ${un}`)}C(et)}},ht=Ae=>new Promise((Ge,et)=>{(0,ne.w)(()=>{ei(Ae),Mn(Ae).then(zt=>{zt.animation&&zt.animation.destroy(),Zn(Ae),Ge(zt)},zt=>{Zn(Ae),et(zt)})})}),ei=Ae=>{const Ge=Ae.enteringEl,et=Ae.leavingEl;rn_saveViewFocus(et),Vn(Ge,et,Ae.direction),Ae.showGoBack?Ge.classList.add("can-go-back"):Ge.classList.remove("can-go-back"),oo(Ge,!1),Ge.style.setProperty("pointer-events","none"),et&&(oo(et,!1),et.style.setProperty("pointer-events","none"))},Mn=function(){var Ae=(0,V.A)(function*(Ge){const et=yield xt(Ge);return et&&ne.B.isBrowser?Ot(et,Ge):wn(Ge)});return function(et){return Ae.apply(this,arguments)}}(),Zn=Ae=>{const Ge=Ae.enteringEl,et=Ae.leavingEl;Ge.classList.remove("ion-page-invisible"),Ge.style.removeProperty("pointer-events"),void 0!==et&&(et.classList.remove("ion-page-invisible"),et.style.removeProperty("pointer-events")),rn_setViewFocus(Ge)},xt=function(){var Ae=(0,V.A)(function*(Ge){return Ge.leavingEl&&Ge.animated&&0!==Ge.duration?Ge.animationBuilder?Ge.animationBuilder:"ios"===Ge.mode?(yield Promise.resolve().then(_e.bind(_e,9856))).iosTransitionAnimation:(yield Promise.resolve().then(_e.bind(_e,361))).mdTransitionAnimation:void 0});return function(et){return Ae.apply(this,arguments)}}(),Ot=function(){var Ae=(0,V.A)(function*(Ge,et){yield Pn(et,!0);const zt=Ge(et.baseEl,et);kn(et.enteringEl,et.leavingEl);const qn=yield Et(zt,et);return et.progressCallback&&et.progressCallback(void 0),qn&&Te(et.enteringEl,et.leavingEl),{hasCompleted:qn,animation:zt}});return function(et,zt){return Ae.apply(this,arguments)}}(),wn=function(){var Ae=(0,V.A)(function*(Ge){const et=Ge.enteringEl,zt=Ge.leavingEl,qn=re.c.get("focusManagerPriority",!1);return yield Pn(Ge,qn),kn(et,zt),Te(et,zt),{hasCompleted:!0}});return function(et){return Ae.apply(this,arguments)}}(),Pn=function(){var Ae=(0,V.A)(function*(Ge,et){(void 0!==Ge.deepWait?Ge.deepWait:et)&&(yield Promise.all([En(Ge.enteringEl),En(Ge.leavingEl)])),yield Ii(Ge.viewIsReady,Ge.enteringEl)});return function(et,zt){return Ae.apply(this,arguments)}}(),Ii=function(){var Ae=(0,V.A)(function*(Ge,et){Ge&&(yield Ge(et))});return function(et,zt){return Ae.apply(this,arguments)}}(),Et=(Ae,Ge)=>{const et=Ge.progressCallback,zt=new Promise(qn=>{Ae.onFinish(un=>qn(1===un))});return et?(Ae.progressStart(!0),et(Ae)):Ae.play(),zt},kn=(Ae,Ge)=>{on(Ge,qt),on(Ae,"ionViewWillEnter")},Te=(Ae,Ge)=>{on(Ae,"ionViewDidEnter"),on(Ge,jt)},on=(Ae,Ge)=>{if(Ae){const et=new CustomEvent(Ge,{bubbles:!1,cancelable:!1});Ae.dispatchEvent(et)}},Qt=()=>new Promise(Ae=>(0,We.r)(()=>(0,We.r)(()=>Ae()))),En=function(){var Ae=(0,V.A)(function*(Ge){const et=Ge;if(et){if(null!=et.componentOnReady){if(null!=(yield et.componentOnReady()))return}else if(null!=et.__registerHost)return void(yield new Promise(qn=>(0,We.r)(qn)));yield Promise.all(Array.from(et.children).map(En))}});return function(et){return Ae.apply(this,arguments)}}(),oo=(Ae,Ge)=>{Ge?(Ae.setAttribute("aria-hidden","true"),Ae.classList.add("ion-page-hidden")):(Ae.hidden=!1,Ae.removeAttribute("aria-hidden"),Ae.classList.remove("ion-page-hidden"))},Vn=(Ae,Ge,et)=>{void 0!==Ae&&(Ae.style.zIndex="back"===et?"99":"101"),void 0!==Ge&&(Ge.style.zIndex="100")},Ke=Ae=>Ae.classList.contains("ion-page")?Ae:Ae.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ae},4929:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{a:()=>re,b:()=>ne,p:()=>V});const V=(l,...We)=>console.warn(`[Ionic Warning]: ${l}`,...We),re=(l,...We)=>console.error(`[Ionic Error]: ${l}`,...We),ne=(l,...We)=>console.error(`<${l.tagName.toLowerCase()}> must be used inside ${We.join(" or ")}.`)},8476:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{d:()=>re,w:()=>V});const V=typeof window<"u"?window:void 0,re=typeof document<"u"?document:void 0},4921:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{a:()=>C,b:()=>oo,c:()=>ne});var V=_e(8393);class re{constructor(){this.m=new Map}reset(Ae){this.m=new Map(Object.entries(Ae))}get(Ae,Ge){const et=this.m.get(Ae);return void 0!==et?et:Ge}getBoolean(Ae,Ge=!1){const et=this.m.get(Ae);return void 0===et?Ge:"string"==typeof et?"true"===et:!!et}getNumber(Ae,Ge){const et=parseFloat(this.m.get(Ae));return isNaN(et)?void 0!==Ge?Ge:NaN:et}set(Ae,Ge){this.m.set(Ae,Ge)}}const ne=new re,C=(Ke,Ae)=>("string"==typeof Ke&&(Ae=Ke,Ke=void 0),(Ke=>At(Ke))(Ke).includes(Ae)),At=(Ke=window)=>{if(typeof Ke>"u")return[];Ke.Ionic=Ke.Ionic||{};let Ae=Ke.Ionic.platforms;return null==Ae&&(Ae=Ke.Ionic.platforms=Ut(Ke),Ae.forEach(Ge=>Ke.document.documentElement.classList.add(`plt-${Ge}`))),Ae},Ut=Ke=>{const Ae=ne.get("platform");return Object.keys(Qt).filter(Ge=>{const et=null==Ae?void 0:Ae[Ge];return"function"==typeof et?et(Ke):Qt[Ge](Ke)})},fn=Ke=>!!(Te(Ke,/iPad/i)||Te(Ke,/Macintosh/i)&&xt(Ke)),ht=Ke=>Te(Ke,/android|sink/i),xt=Ke=>on(Ke,"(any-pointer:coarse)"),wn=Ke=>Pn(Ke)||Ii(Ke),Pn=Ke=>!!(Ke.cordova||Ke.phonegap||Ke.PhoneGap),Ii=Ke=>{const Ae=Ke.Capacitor;return!(null==Ae||!Ae.isNative)},Te=(Ke,Ae)=>Ae.test(Ke.navigator.userAgent),on=(Ke,Ae)=>{var Ge;return null===(Ge=Ke.matchMedia)||void 0===Ge?void 0:Ge.call(Ke,Ae).matches},Qt={ipad:fn,iphone:Ke=>Te(Ke,/iPhone/i),ios:Ke=>Te(Ke,/iPhone|iPod/i)||fn(Ke),android:ht,phablet:Ke=>{const Ae=Ke.innerWidth,Ge=Ke.innerHeight,et=Math.min(Ae,Ge),zt=Math.max(Ae,Ge);return et>390&&et<520&&zt>620&&zt<800},tablet:Ke=>{const Ae=Ke.innerWidth,Ge=Ke.innerHeight,et=Math.min(Ae,Ge),zt=Math.max(Ae,Ge);return fn(Ke)||(Ke=>ht(Ke)&&!Te(Ke,/mobile/i))(Ke)||et>460&&et<820&&zt>780&&zt<1400},cordova:Pn,capacitor:Ii,electron:Ke=>Te(Ke,/electron/i),pwa:Ke=>{var Ae;return!!(null!==(Ae=Ke.matchMedia)&&void 0!==Ae&&Ae.call(Ke,"(display-mode: standalone)").matches||Ke.navigator.standalone)},mobile:xt,mobileweb:Ke=>xt(Ke)&&!wn(Ke),desktop:Ke=>!xt(Ke),hybrid:wn};const oo=Ke=>Ke&&(0,V.g)(Ke)||undefined},9856:(Yo,Xn,_e)=>{"use strict";_e.r(Xn),_e.d(Xn,{iosTransitionAnimation:()=>yt,shadow:()=>qt});var V=_e(9986),re=_e(1331);_e(8476),_e(4921),_e(8393);const ft=xn=>document.querySelector(`${xn}.ion-cloned-element`),qt=xn=>xn.shadowRoot||xn,jt=xn=>{const rn="ION-TABS"===xn.tagName?xn:xn.querySelector("ion-tabs"),ht="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=rn){const ei=rn.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=ei?ei.querySelector(ht):null}return xn.querySelector(ht)},wt=(xn,rn)=>{const ht="ION-TABS"===xn.tagName?xn:xn.querySelector("ion-tabs");let ei=[];if(null!=ht){const Mn=ht.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Mn&&(ei=Mn.querySelectorAll("ion-buttons"))}else ei=xn.querySelectorAll("ion-buttons");for(const Mn of ei){const Zn=Mn.closest("ion-header"),xt=Zn&&!Zn.classList.contains("header-collapse-condense-inactive"),Ot=Mn.querySelector("ion-back-button"),wn=Mn.classList.contains("buttons-collapse");if(null!==Ot&&("start"===Mn.slot||""===Mn.slot)&&(wn&&xt&&rn||!wn))return Ot}return null},At=(xn,rn,ht,ei,Mn,Zn,xt,Ot,wn)=>{var Pn,Ii;const Et=rn?`calc(100% - ${Mn.right+4}px)`:Mn.left-4+"px",kn=rn?"right":"left",Te=rn?"left":"right",on=rn?"right":"left";let Qt=1,En=1,oo=`scale(${En})`;const Vn="scale(1)";if(Zn&&xt){const Ni=(null===(Pn=Zn.textContent)||void 0===Pn?void 0:Pn.trim())===(null===(Ii=Ot.textContent)||void 0===Ii?void 0:Ii.trim());Qt=wn.width/xt.width,En=(wn.height-fn)/xt.height,oo=Ni?`scale(${Qt}, ${En})`:`scale(${En})`}const Ae=qt(ei).querySelector("ion-icon").getBoundingClientRect(),Ge=rn?Ae.width/2-(Ae.right-Mn.right)+"px":Mn.left-Ae.width/2+"px",et=rn?`-${window.innerWidth-Mn.right}px`:`${Mn.left}px`,zt=`${wn.top}px`,qn=`${Mn.top}px`,Qi=ht?[{offset:0,transform:`translate3d(${et}, ${qn}, 0)`},{offset:1,transform:`translate3d(${Ge}, ${zt}, 0)`}]:[{offset:0,transform:`translate3d(${Ge}, ${zt}, 0)`},{offset:1,transform:`translate3d(${et}, ${qn}, 0)`}],Dr=ht?[{offset:0,opacity:1,transform:Vn},{offset:1,opacity:0,transform:oo}]:[{offset:0,opacity:0,transform:oo},{offset:1,opacity:1,transform:Vn}],ko=ht?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Er=(0,V.c)(),Wr=(0,V.c)(),ji=(0,V.c)(),vi=ft("ion-back-button"),Yi=qt(vi).querySelector(".button-text"),ui=qt(vi).querySelector("ion-icon");vi.text=ei.text,vi.mode=ei.mode,vi.icon=ei.icon,vi.color=ei.color,vi.disabled=ei.disabled,vi.style.setProperty("display","block"),vi.style.setProperty("position","fixed"),Wr.addElement(ui),Er.addElement(Yi),ji.addElement(vi),ji.beforeStyles({position:"absolute",top:"0px",[on]:"0px"}).beforeAddWrite(()=>{ei.style.setProperty("display","none"),vi.style.setProperty(kn,Et)}).afterAddWrite(()=>{ei.style.setProperty("display",""),vi.style.setProperty("display","none"),vi.style.removeProperty(kn)}).keyframes(Qi),Er.beforeStyles({"transform-origin":`${kn} top`}).keyframes(Dr),Wr.beforeStyles({"transform-origin":`${Te} center`}).keyframes(ko),xn.addAnimation([Er,Wr,ji])},Ut=(xn,rn,ht,ei,Mn,Zn,xt,Ot,wn)=>{var Pn,Ii;const Et=rn?"right":"left",kn=rn?`calc(100% - ${Mn.right}px)`:`${Mn.left}px`,on=`${Mn.top}px`;let En=rn?`-${window.innerWidth-xt.right-8}px`:`${xt.x+8}px`,oo=.5;const Vn="scale(1)";let Ke=`scale(${oo})`;if(Ot&&wn){En=rn?`-${window.innerWidth-wn.right-8}px`:wn.x-8+"px";const dr=(null===(Pn=Ot.textContent)||void 0===Pn?void 0:Pn.trim())===(null===(Ii=ei.textContent)||void 0===Ii?void 0:Ii.trim());oo=wn.height/(Zn.height-fn),Ke=dr?`scale(${wn.width/Zn.width}, ${oo})`:`scale(${oo})`}const et=xt.top+xt.height/2-Mn.height*oo/2+"px",un=ht?[{offset:0,opacity:0,transform:`translate3d(${En}, ${et}, 0) ${Ke}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${on}, 0) ${Vn}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${on}, 0) ${Vn}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${En}, ${et}, 0) ${Ke}`}],go=ft("ion-title"),Qi=(0,V.c)();go.innerText=ei.innerText,go.size=ei.size,go.color=ei.color,Qi.addElement(go),Qi.beforeStyles({"transform-origin":`${Et} top`,height:`${Mn.height}px`,display:"",position:"relative",[Et]:kn}).beforeAddWrite(()=>{ei.style.setProperty("opacity","0")}).afterAddWrite(()=>{ei.style.setProperty("opacity",""),go.style.setProperty("display","none")}).keyframes(un),xn.addAnimation(Qi)},yt=(xn,rn)=>{var ht;try{const ei="cubic-bezier(0.32,0.72,0,1)",Mn="opacity",Zn="transform",xt="0%",wn="rtl"===xn.ownerDocument.dir,Pn=wn?"-99.5%":"99.5%",Ii=wn?"33%":"-33%",Et=rn.enteringEl,kn=rn.leavingEl,Te="back"===rn.direction,on=Et.querySelector(":scope > ion-content"),Qt=Et.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),En=Et.querySelectorAll(":scope > ion-header > ion-toolbar"),oo=(0,V.c)(),Vn=(0,V.c)();if(oo.addElement(Et).duration((null!==(ht=rn.duration)&&void 0!==ht?ht:0)||540).easing(rn.easing||ei).fill("both").beforeRemoveClass("ion-page-invisible"),kn&&null!=xn){const et=(0,V.c)();et.addElement(xn),oo.addAnimation(et)}if(on||0!==En.length||0!==Qt.length?(Vn.addElement(on),Vn.addElement(Qt)):Vn.addElement(Et.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),oo.addAnimation(Vn),Te?Vn.beforeClearStyles([Mn]).fromTo("transform",`translateX(${Ii})`,`translateX(${xt})`).fromTo(Mn,.8,1):Vn.beforeClearStyles([Mn]).fromTo("transform",`translateX(${Pn})`,`translateX(${xt})`),on){const et=qt(on).querySelector(".transition-effect");if(et){const zt=et.querySelector(".transition-cover"),qn=et.querySelector(".transition-shadow"),un=(0,V.c)(),go=(0,V.c)(),Qi=(0,V.c)();un.addElement(et).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),go.addElement(zt).beforeClearStyles([Mn]).fromTo(Mn,0,.1),Qi.addElement(qn).beforeClearStyles([Mn]).fromTo(Mn,.03,.7),un.addAnimation([go,Qi]),Vn.addAnimation([un])}}const Ke=Et.querySelector("ion-header.header-collapse-condense"),{forward:Ae,backward:Ge}=((xn,rn,ht,ei,Mn)=>{const Zn=wt(ei,ht),xt=jt(Mn),Ot=jt(ei),wn=wt(Mn,ht),Pn=null!==Zn&&null!==xt&&!ht,Ii=null!==Ot&&null!==wn&&ht;if(Pn){const Et=xt.getBoundingClientRect(),kn=Zn.getBoundingClientRect(),Te=qt(Zn).querySelector(".button-text"),on=null==Te?void 0:Te.getBoundingClientRect(),En=qt(xt).querySelector(".toolbar-title").getBoundingClientRect();Ut(xn,rn,ht,xt,Et,En,kn,Te,on),At(xn,rn,ht,Zn,kn,Te,on,xt,En)}else if(Ii){const Et=Ot.getBoundingClientRect(),kn=wn.getBoundingClientRect(),Te=qt(wn).querySelector(".button-text"),on=null==Te?void 0:Te.getBoundingClientRect(),En=qt(Ot).querySelector(".toolbar-title").getBoundingClientRect();Ut(xn,rn,ht,Ot,Et,En,kn,Te,on),At(xn,rn,ht,wn,kn,Te,on,Ot,En)}return{forward:Pn,backward:Ii}})(oo,wn,Te,Et,kn);if(En.forEach(et=>{const zt=(0,V.c)();zt.addElement(et),oo.addAnimation(zt);const qn=(0,V.c)();qn.addElement(et.querySelector("ion-title"));const un=(0,V.c)(),go=Array.from(et.querySelectorAll("ion-buttons,[menuToggle]")),Qi=et.closest("ion-header"),dr=null==Qi?void 0:Qi.classList.contains("header-collapse-condense-inactive");let Go;Go=go.filter(Te?Er=>{const Wr=Er.classList.contains("buttons-collapse");return Wr&&!dr||!Wr}:Er=>!Er.classList.contains("buttons-collapse")),un.addElement(Go);const Dr=(0,V.c)();Dr.addElement(et.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const cr=(0,V.c)();cr.addElement(qt(et).querySelector(".toolbar-background"));const Ei=(0,V.c)(),ko=et.querySelector("ion-back-button");if(ko&&Ei.addElement(ko),zt.addAnimation([qn,un,Dr,cr,Ei]),un.fromTo(Mn,.01,1),Dr.fromTo(Mn,.01,1),Te)dr||qn.fromTo("transform",`translateX(${Ii})`,`translateX(${xt})`).fromTo(Mn,.01,1),Dr.fromTo("transform",`translateX(${Ii})`,`translateX(${xt})`),Ei.fromTo(Mn,.01,1);else if(Ke||qn.fromTo("transform",`translateX(${Pn})`,`translateX(${xt})`).fromTo(Mn,.01,1),Dr.fromTo("transform",`translateX(${Pn})`,`translateX(${xt})`),cr.beforeClearStyles([Mn,"transform"]),(null==Qi?void 0:Qi.translucent)?cr.fromTo("transform",wn?"translateX(-100%)":"translateX(100%)","translateX(0px)"):cr.fromTo(Mn,.01,"var(--opacity)"),Ae||Ei.fromTo(Mn,.01,1),ko&&!Ae){const Wr=(0,V.c)();Wr.addElement(qt(ko).querySelector(".button-text")).fromTo("transform",wn?"translateX(-100px)":"translateX(100px)","translateX(0px)"),zt.addAnimation(Wr)}}),kn){const et=(0,V.c)(),zt=kn.querySelector(":scope > ion-content"),qn=kn.querySelectorAll(":scope > ion-header > ion-toolbar"),un=kn.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(zt||0!==qn.length||0!==un.length?(et.addElement(zt),et.addElement(un)):et.addElement(kn.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),oo.addAnimation(et),Te){et.beforeClearStyles([Mn]).fromTo("transform",`translateX(${xt})`,wn?"translateX(-100%)":"translateX(100%)");const go=(0,re.g)(kn);oo.afterAddWrite(()=>{"normal"===oo.getDirection()&&go.style.setProperty("display","none")})}else et.fromTo("transform",`translateX(${xt})`,`translateX(${Ii})`).fromTo(Mn,1,.8);if(zt){const go=qt(zt).querySelector(".transition-effect");if(go){const Qi=go.querySelector(".transition-cover"),dr=go.querySelector(".transition-shadow"),Go=(0,V.c)(),Dr=(0,V.c)(),cr=(0,V.c)();Go.addElement(go).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Dr.addElement(Qi).beforeClearStyles([Mn]).fromTo(Mn,.1,0),cr.addElement(dr).beforeClearStyles([Mn]).fromTo(Mn,.7,.03),Go.addAnimation([Dr,cr]),et.addAnimation([Go])}}qn.forEach(go=>{const Qi=(0,V.c)();Qi.addElement(go);const dr=(0,V.c)();dr.addElement(go.querySelector("ion-title"));const Go=(0,V.c)(),Dr=go.querySelectorAll("ion-buttons,[menuToggle]"),cr=go.closest("ion-header"),Ei=null==cr?void 0:cr.classList.contains("header-collapse-condense-inactive"),ko=Array.from(Dr).filter(ui=>{const Ni=ui.classList.contains("buttons-collapse");return Ni&&!Ei||!Ni});Go.addElement(ko);const Er=(0,V.c)(),Wr=go.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Wr.length>0&&Er.addElement(Wr);const ji=(0,V.c)();ji.addElement(qt(go).querySelector(".toolbar-background"));const vi=(0,V.c)(),Yi=go.querySelector("ion-back-button");if(Yi&&vi.addElement(Yi),Qi.addAnimation([dr,Go,Er,vi,ji]),oo.addAnimation(Qi),vi.fromTo(Mn,.99,0),Go.fromTo(Mn,.99,0),Er.fromTo(Mn,.99,0),Te){if(Ei||dr.fromTo("transform",`translateX(${xt})`,wn?"translateX(-100%)":"translateX(100%)").fromTo(Mn,.99,0),Er.fromTo("transform",`translateX(${xt})`,wn?"translateX(-100%)":"translateX(100%)"),ji.beforeClearStyles([Mn,"transform"]),(null==cr?void 0:cr.translucent)?ji.fromTo("transform","translateX(0px)",wn?"translateX(-100%)":"translateX(100%)"):ji.fromTo(Mn,"var(--opacity)",0),Yi&&!Ge){const Ni=(0,V.c)();Ni.addElement(qt(Yi).querySelector(".button-text")).fromTo("transform",`translateX(${xt})`,`translateX(${(wn?-124:124)+"px"})`),Qi.addAnimation(Ni)}}else Ei||dr.fromTo("transform",`translateX(${xt})`,`translateX(${Ii})`).fromTo(Mn,.99,0).afterClearStyles([Zn,Mn]),Er.fromTo("transform",`translateX(${xt})`,`translateX(${Ii})`).afterClearStyles([Zn,Mn]),vi.afterClearStyles([Mn]),dr.afterClearStyles([Mn]),Go.afterClearStyles([Mn])})}return oo}catch(ei){throw ei}},fn=10},361:(Yo,Xn,_e)=>{"use strict";_e.r(Xn),_e.d(Xn,{mdTransitionAnimation:()=>Y});var V=_e(9986),re=_e(1331);_e(8476),_e(4921),_e(8393);const Y=(ft,qt)=>{var jt,wt,C;const yt="back"===qt.direction,xn=qt.leavingEl,rn=(0,re.g)(qt.enteringEl),ht=rn.querySelector("ion-toolbar"),ei=(0,V.c)();if(ei.addElement(rn).fill("both").beforeRemoveClass("ion-page-invisible"),yt?ei.duration((null!==(jt=qt.duration)&&void 0!==jt?jt:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):ei.duration((null!==(wt=qt.duration)&&void 0!==wt?wt:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),ht){const Mn=(0,V.c)();Mn.addElement(ht),ei.addAnimation(Mn)}if(xn&&yt){ei.duration((null!==(C=qt.duration)&&void 0!==C?C:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Mn=(0,V.c)();Mn.addElement((0,re.g)(xn)).onFinish(Zn=>{1===Zn&&Mn.elements.length>0&&Mn.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),ei.addAnimation(Mn)}return ei}},1070:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{B:()=>Dr,F:()=>vi,G:()=>cr,O:()=>Ei,a:()=>rn,b:()=>ht,c:()=>xt,d:()=>ko,e:()=>Er,f:()=>Ae,g:()=>et,h:()=>un,i:()=>Qi,j:()=>wn,k:()=>Pn,l:()=>ei,m:()=>Mn,n:()=>wt,o:()=>Vn,q:()=>C,s:()=>Go,t:()=>Ot});var V=_e(467),re=_e(8476),ne=_e(4920),l=_e(8669),We=_e(4921),Y=_e(8621),ft=_e(1970),qt=_e(4929);const jt='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',wt=(Yi,ui)=>{const Ni=Yi.querySelector(jt);At(Ni,null!=ui?ui:Yi)},C=(Yi,ui)=>{const Ni=Array.from(Yi.querySelectorAll(jt));At(Ni.length>0?Ni[Ni.length-1]:null,null!=ui?ui:Yi)},At=(Yi,ui)=>{let Ni=Yi;const po=null==Yi?void 0:Yi.shadowRoot;po&&(Ni=po.querySelector(jt)||Yi),Ni?(0,ne.f)(Ni):ui.focus()};let Ut=0,yt=0;const fn=new WeakMap,xn=Yi=>({create:ui=>Ii(Yi,ui),dismiss:(ui,Ni,po)=>Qt(document,ui,Ni,Yi,po),getTop:()=>(0,V.A)(function*(){return Vn(document,Yi)})()}),rn=xn("ion-alert"),ht=xn("ion-action-sheet"),ei=xn("ion-loading"),Mn=xn("ion-modal"),xt=xn("ion-popover"),Ot=xn("ion-toast"),wn=Yi=>{typeof document<"u"&&on(document);const ui=Ut++;Yi.overlayIndex=ui},Pn=Yi=>(Yi.hasAttribute("id")||(Yi.id="ion-overlay-"+ ++yt),Yi.id),Ii=(Yi,ui)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Yi).then(()=>{const Ni=document.createElement(Yi);return Ni.classList.add("overlay-hidden"),Object.assign(Ni,Object.assign(Object.assign({},ui),{hasController:!0})),zt(document).appendChild(Ni),new Promise(po=>(0,ne.c)(Ni,po))}):Promise.resolve(),kn=(Yi,ui)=>{let Ni=Yi;const po=null==Yi?void 0:Yi.shadowRoot;po&&(Ni=po.querySelector(jt)||Yi),Ni?(0,ne.f)(Ni):ui.focus()},on=Yi=>{0===Ut&&(Ut=1,Yi.addEventListener("focus",ui=>{((Yi,ui)=>{const Ni=Vn(ui,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),po=Yi.target;Ni&&po&&!Ni.classList.contains(vi)&&(Ni.shadowRoot?(()=>{if(Ni.contains(po))Ni.lastFocus=po;else if("ION-TOAST"===po.tagName)kn(Ni.lastFocus,Ni);else{const Br=Ni.lastFocus;wt(Ni),Br===ui.activeElement&&C(Ni),Ni.lastFocus=ui.activeElement}})():(()=>{if(Ni===po)Ni.lastFocus=void 0;else if("ION-TOAST"===po.tagName)kn(Ni.lastFocus,Ni);else{const Br=(0,ne.g)(Ni);if(!Br.contains(po))return;const So=Br.querySelector(".ion-overlay-wrapper");if(!So)return;if(So.contains(po)||po===Br.querySelector("ion-backdrop"))Ni.lastFocus=po;else{const ro=Ni.lastFocus;wt(So,Ni),ro===ui.activeElement&&C(So,Ni),Ni.lastFocus=ui.activeElement}}})())})(ui,Yi)},!0),Yi.addEventListener("ionBackButton",ui=>{const Ni=Vn(Yi);null!=Ni&&Ni.backdropDismiss&&ui.detail.register(l.OVERLAY_BACK_BUTTON_PRIORITY,()=>{Ni.dismiss(void 0,Dr)})}),(0,l.shouldUseCloseWatcher)()||Yi.addEventListener("keydown",ui=>{if("Escape"===ui.key){const Ni=Vn(Yi);null!=Ni&&Ni.backdropDismiss&&Ni.dismiss(void 0,Dr)}}))},Qt=(Yi,ui,Ni,po,Xi)=>{const bs=Vn(Yi,po,Xi);return bs?bs.dismiss(ui,Ni):Promise.reject("overlay does not exist")},oo=(Yi,ui)=>((Yi,ui)=>(void 0===ui&&(ui="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(Yi.querySelectorAll(ui)).filter(Ni=>Ni.overlayIndex>0)))(Yi,ui).filter(Ni=>!(Yi=>Yi.classList.contains("overlay-hidden"))(Ni)),Vn=(Yi,ui,Ni)=>{const po=oo(Yi,ui);return void 0===Ni?po[po.length-1]:po.find(Xi=>Xi.id===Ni)},Ke=(Yi=!1)=>{const Ni=zt(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Ni&&(Yi?Ni.setAttribute("aria-hidden","true"):Ni.removeAttribute("aria-hidden"))},Ae=function(){var Yi=(0,V.A)(function*(ui,Ni,po,Xi,bs){var Br,So;if(ui.presented)return;Ke(!0),document.body.classList.add(ft.B),Wr(ui.el),ui.presented=!0,ui.willPresent.emit(),null===(Br=ui.willPresentShorthand)||void 0===Br||Br.emit();const ro=(0,We.b)(ui),fo=ui.enterAnimation?ui.enterAnimation:We.c.get(Ni,"ios"===ro?po:Xi);(yield qn(ui,fo,ui.el,bs))&&(ui.didPresent.emit(),null===(So=ui.didPresentShorthand)||void 0===So||So.emit()),"ION-TOAST"!==ui.el.tagName&&Ge(ui.el),ui.keyboardClose&&(null===document.activeElement||!ui.el.contains(document.activeElement))&&ui.el.focus(),ui.el.removeAttribute("aria-hidden")});return function(Ni,po,Xi,bs,Br){return Yi.apply(this,arguments)}}(),Ge=function(){var Yi=(0,V.A)(function*(ui){let Ni=document.activeElement;if(!Ni)return;const po=null==Ni?void 0:Ni.shadowRoot;po&&(Ni=po.querySelector(jt)||Ni),yield ui.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&Ni.focus()});return function(Ni){return Yi.apply(this,arguments)}}(),et=function(){var Yi=(0,V.A)(function*(ui,Ni,po,Xi,bs,Br,So){var ro,fo;if(!ui.presented)return!1;void 0!==re.d&&1===oo(re.d).length&&(Ke(!1),document.body.classList.remove(ft.B)),ui.presented=!1;try{ui.el.style.setProperty("pointer-events","none"),ui.willDismiss.emit({data:Ni,role:po}),null===(ro=ui.willDismissShorthand)||void 0===ro||ro.emit({data:Ni,role:po});const zr=(0,We.b)(ui),Zr=ui.leaveAnimation?ui.leaveAnimation:We.c.get(Xi,"ios"===zr?bs:Br);po!==cr&&(yield qn(ui,Zr,ui.el,So)),ui.didDismiss.emit({data:Ni,role:po}),null===(fo=ui.didDismissShorthand)||void 0===fo||fo.emit({data:Ni,role:po}),(fn.get(ui)||[]).forEach(Wo=>Wo.destroy()),fn.delete(ui),ui.el.classList.add("overlay-hidden"),ui.el.style.removeProperty("pointer-events"),void 0!==ui.el.lastFocus&&(ui.el.lastFocus=void 0)}catch(zr){console.error(zr)}return ui.el.remove(),ji(),!0});return function(Ni,po,Xi,bs,Br,So,ro){return Yi.apply(this,arguments)}}(),zt=Yi=>Yi.querySelector("ion-app")||Yi.body,qn=function(){var Yi=(0,V.A)(function*(ui,Ni,po,Xi){po.classList.remove("overlay-hidden");const Br=Ni(ui.el,Xi);(!ui.animated||!We.c.getBoolean("animated",!0))&&Br.duration(0),ui.keyboardClose&&Br.beforeAddWrite(()=>{const ro=po.ownerDocument.activeElement;null!=ro&&ro.matches("input,ion-input, ion-textarea")&&ro.blur()});const So=fn.get(ui)||[];return fn.set(ui,[...So,Br]),yield Br.play(),!0});return function(Ni,po,Xi,bs){return Yi.apply(this,arguments)}}(),un=(Yi,ui)=>{let Ni;const po=new Promise(Xi=>Ni=Xi);return go(Yi,ui,Xi=>{Ni(Xi.detail)}),po},go=(Yi,ui,Ni)=>{const po=Xi=>{(0,ne.b)(Yi,ui,po),Ni(Xi)};(0,ne.a)(Yi,ui,po)},Qi=Yi=>"cancel"===Yi||Yi===Dr,dr=Yi=>Yi(),Go=(Yi,ui)=>{if("function"==typeof Yi)return We.c.get("_zoneGate",dr)(()=>{try{return Yi(ui)}catch(po){throw po}})},Dr="backdrop",cr="gesture",Ei=39,ko=Yi=>{let Ni,ui=!1;const po=(0,Y.C)(),Xi=(So=!1)=>{if(Ni&&!So)return{delegate:Ni,inline:ui};const{el:ro,hasController:fo,delegate:Ts}=Yi;return ui=null!==ro.parentNode&&!fo,Ni=ui?Ts||po:Ts,{inline:ui,delegate:Ni}};return{attachViewToDom:function(){var So=(0,V.A)(function*(ro){const{delegate:fo}=Xi(!0);if(fo)return yield fo.attachViewToDom(Yi.el,ro);const{hasController:Ts}=Yi;if(Ts&&void 0!==ro)throw new Error("framework delegate is missing");return null});return function(fo){return So.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:So}=Xi();So&&void 0!==Yi.el&&So.removeViewFromDom(Yi.el.parentElement,Yi.el)}}},Er=()=>{let Yi;const ui=()=>{Yi&&(Yi(),Yi=void 0)};return{addClickListener:(po,Xi)=>{ui();const bs=void 0!==Xi?document.getElementById(Xi):null;bs?Yi=((So,ro)=>{const fo=()=>{ro.present()};return So.addEventListener("click",fo),()=>{So.removeEventListener("click",fo)}})(bs,po):(0,qt.p)(`A trigger element with the ID "${Xi}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,po)},removeClickListener:ui}},Wr=Yi=>{var ui;if(void 0===re.d)return;const Ni=oo(re.d);for(let po=Ni.length-1;po>=0;po--){const Xi=Ni[po],bs=null!==(ui=Ni[po+1])&&void 0!==ui?ui:Yi;(bs.hasAttribute("aria-hidden")||"ION-TOAST"!==bs.tagName)&&Xi.setAttribute("aria-hidden","true")}},ji=()=>{if(void 0===re.d)return;const Yi=oo(re.d);for(let ui=Yi.length-1;ui>=0;ui--){const Ni=Yi[ui];if(Ni.removeAttribute("aria-hidden"),"ION-TOAST"!==Ni.tagName)break}},vi="ion-disable-focus-trap"},1288:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{H:()=>ht,b:()=>bs,c:()=>xt,f:()=>ko,g:()=>Zn,h:()=>xn,p:()=>Ns,r:()=>Qr});var V=_e(467);let ne,l,We=!1,Y=!1;const wt={},yt=Ye=>"object"==(Ye=typeof Ye)||"function"===Ye;function fn(Ye){var Tt,Jt,Ln;return null!==(Ln=null===(Jt=null===(Tt=Ye.head)||void 0===Tt?void 0:Tt.querySelector('meta[name="csp-nonce"]'))||void 0===Jt?void 0:Jt.getAttribute("content"))&&void 0!==Ln?Ln:void 0}const xn=(Ye,Tt,...Jt)=>{let Ln=null,Lt=!1,Ee=!1;const ue=[],ae=Ue=>{for(let it=0;it<Ue.length;it++)Ln=Ue[it],Array.isArray(Ln)?ae(Ln):null!=Ln&&"boolean"!=typeof Ln&&((Lt="function"!=typeof Ye&&!yt(Ln))&&(Ln=String(Ln)),Lt&&Ee?ue[ue.length-1].$text$+=Ln:ue.push(Lt?rn(null,Ln):Ln),Ee=Lt)};if(ae(Jt),Tt){const Ue=Tt.className||Tt.class;Ue&&(Tt.class="object"!=typeof Ue?Ue:Object.keys(Ue).filter(it=>Ue[it]).join(" "))}const we=rn(Ye,null);return we.$attrs$=Tt,ue.length>0&&(we.$children$=ue),we},rn=(Ye,Tt)=>({$flags$:0,$tag$:Ye,$text$:Tt,$elm$:null,$children$:null,$attrs$:null}),ht={},Zn=Ye=>Zr(Ye).$hostElement$,xt=(Ye,Tt,Jt)=>{const Ln=Zn(Ye);return{emit:Lt=>Ot(Ln,Tt,{bubbles:!!(4&Jt),composed:!!(2&Jt),cancelable:!!(1&Jt),detail:Lt})}},Ot=(Ye,Tt,Jt)=>{const Ln=jr.ce(Tt,Jt);return Ye.dispatchEvent(Ln),Ln},wn=new WeakMap,kn=(Ye,Tt)=>"sc-"+Ye.$tagName$,Te=(Ye,Tt,Jt,Ln,Lt,Ee)=>{if(Jt!==Ln){let ue=lr(Ye,Tt),ae=Tt.toLowerCase();if("class"===Tt){const we=Ye.classList,Ue=Qt(Jt),it=Qt(Ln);we.remove(...Ue.filter(Xt=>Xt&&!it.includes(Xt))),we.add(...it.filter(Xt=>Xt&&!Ue.includes(Xt)))}else if("style"===Tt){for(const we in Jt)(!Ln||null==Ln[we])&&(we.includes("-")?Ye.style.removeProperty(we):Ye.style[we]="");for(const we in Ln)(!Jt||Ln[we]!==Jt[we])&&(we.includes("-")?Ye.style.setProperty(we,Ln[we]):Ye.style[we]=Ln[we])}else if("ref"===Tt)Ln&&Ln(Ye);else if(ue||"o"!==Tt[0]||"n"!==Tt[1]){const we=yt(Ln);if((ue||we&&null!==Ln)&&!Lt)try{if(Ye.tagName.includes("-"))Ye[Tt]=Ln;else{const Ue=null==Ln?"":Ln;"list"===Tt?ue=!1:(null==Jt||Ye[Tt]!=Ue)&&(Ye[Tt]=Ue)}}catch{}null==Ln||!1===Ln?(!1!==Ln||""===Ye.getAttribute(Tt))&&Ye.removeAttribute(Tt):(!ue||4&Ee||Lt)&&!we&&Ye.setAttribute(Tt,Ln=!0===Ln?"":Ln)}else Tt="-"===Tt[2]?Tt.slice(3):lr(Jn,ae)?ae.slice(2):ae[2]+Tt.slice(3),Jt&&jr.rel(Ye,Tt,Jt,!1),Ln&&jr.ael(Ye,Tt,Ln,!1)}},on=/\s/,Qt=Ye=>Ye?Ye.split(on):[],En=(Ye,Tt,Jt,Ln)=>{const Lt=11===Tt.$elm$.nodeType&&Tt.$elm$.host?Tt.$elm$.host:Tt.$elm$,Ee=Ye&&Ye.$attrs$||wt,ue=Tt.$attrs$||wt;for(Ln in Ee)Ln in ue||Te(Lt,Ln,Ee[Ln],void 0,Jt,Tt.$flags$);for(Ln in ue)Te(Lt,Ln,Ee[Ln],ue[Ln],Jt,Tt.$flags$)},oo=(Ye,Tt,Jt,Ln)=>{const Lt=Tt.$children$[Jt];let ue,ae,Ee=0;if(null!==Lt.$text$)ue=Lt.$elm$=hs.createTextNode(Lt.$text$);else{if(We||(We="svg"===Lt.$tag$),ue=Lt.$elm$=hs.createElementNS(We?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Lt.$tag$),We&&"foreignObject"===Lt.$tag$&&(We=!1),En(null,Lt,We),(Ye=>null!=Ye)(ne)&&ue["s-si"]!==ne&&ue.classList.add(ue["s-si"]=ne),Lt.$children$)for(Ee=0;Ee<Lt.$children$.length;++Ee)ae=oo(Ye,Lt,Ee),ae&&ue.appendChild(ae);"svg"===Lt.$tag$?We=!1:"foreignObject"===ue.tagName&&(We=!0)}return ue},Vn=(Ye,Tt,Jt,Ln,Lt,Ee)=>{let ae,ue=Ye;for(ue.shadowRoot&&ue.tagName===l&&(ue=ue.shadowRoot);Lt<=Ee;++Lt)Ln[Lt]&&(ae=oo(null,Jt,Lt),ae&&(Ln[Lt].$elm$=ae,ue.insertBefore(ae,Tt)))},Ke=(Ye,Tt,Jt)=>{for(let Ln=Tt;Ln<=Jt;++Ln){const Lt=Ye[Ln];if(Lt){const Ee=Lt.$elm$;zt(Lt),Ee&&Ee.remove()}}},Ge=(Ye,Tt)=>Ye.$tag$===Tt.$tag$,et=(Ye,Tt)=>{const Jt=Tt.$elm$=Ye.$elm$,Ln=Ye.$children$,Lt=Tt.$children$,Ee=Tt.$tag$,ue=Tt.$text$;null===ue?(We="svg"===Ee||"foreignObject"!==Ee&&We,En(Ye,Tt,We),null!==Ln&&null!==Lt?((Ye,Tt,Jt,Ln)=>{let Cn,Lt=0,Ee=0,ue=Tt.length-1,ae=Tt[0],we=Tt[ue],Ue=Ln.length-1,it=Ln[0],Xt=Ln[Ue];for(;Lt<=ue&&Ee<=Ue;)null==ae?ae=Tt[++Lt]:null==we?we=Tt[--ue]:null==it?it=Ln[++Ee]:null==Xt?Xt=Ln[--Ue]:Ge(ae,it)?(et(ae,it),ae=Tt[++Lt],it=Ln[++Ee]):Ge(we,Xt)?(et(we,Xt),we=Tt[--ue],Xt=Ln[--Ue]):Ge(ae,Xt)?(et(ae,Xt),Ye.insertBefore(ae.$elm$,we.$elm$.nextSibling),ae=Tt[++Lt],Xt=Ln[--Ue]):Ge(we,it)?(et(we,it),Ye.insertBefore(we.$elm$,ae.$elm$),we=Tt[--ue],it=Ln[++Ee]):(Cn=oo(Tt&&Tt[Ee],Jt,Ee),it=Ln[++Ee],Cn&&ae.$elm$.parentNode.insertBefore(Cn,ae.$elm$));Lt>ue?Vn(Ye,null==Ln[Ue+1]?null:Ln[Ue+1].$elm$,Jt,Ln,Ee,Ue):Ee>Ue&&Ke(Tt,Lt,ue)})(Jt,Ln,Tt,Lt):null!==Lt?(null!==Ye.$text$&&(Jt.textContent=""),Vn(Jt,null,Tt,Lt,0,Lt.length-1)):null!==Ln&&Ke(Ln,0,Ln.length-1),We&&"svg"===Ee&&(We=!1)):Ye.$text$!==ue&&(Jt.data=ue)},zt=Ye=>{Ye.$attrs$&&Ye.$attrs$.ref&&Ye.$attrs$.ref(null),Ye.$children$&&Ye.$children$.map(zt)},un=(Ye,Tt)=>{Tt&&!Ye.$onRenderResolve$&&Tt["s-p"]&&Tt["s-p"].push(new Promise(Jt=>Ye.$onRenderResolve$=Jt))},go=(Ye,Tt)=>{if(Ye.$flags$|=16,!(4&Ye.$flags$))return un(Ye,Ye.$ancestorComponent$),mt(()=>Qi(Ye,Tt));Ye.$flags$|=512},Qi=(Ye,Tt)=>{const Ln=Ye.$lazyInstance$;return Tt&&(Ye.$flags$|=256,Ye.$queuedListeners$&&(Ye.$queuedListeners$.map(([Ee,ue])=>Wr(Ln,Ee,ue)),Ye.$queuedListeners$=void 0)),dr(void 0,()=>Dr(Ye,Ln,Tt))},dr=(Ye,Tt)=>Go(Ye)?Ye.then(Tt):Tt(),Go=Ye=>Ye instanceof Promise||Ye&&Ye.then&&"function"==typeof Ye.then,Dr=function(){var Ye=(0,V.A)(function*(Tt,Jt,Ln){var Lt;const Ee=Tt.$hostElement$,ae=Ee["s-rc"];Ln&&(Ye=>{const Tt=Ye.$cmpMeta$,Jt=Ye.$hostElement$,Ln=Tt.$flags$,Ee=((Ye,Tt,Jt,Ln)=>{var Lt;let Ee=kn(Tt);const ue=aa.get(Ee);if(Ye=11===Ye.nodeType?Ye:hs,ue)if("string"==typeof ue){let we,ae=wn.get(Ye=Ye.head||Ye);if(ae||wn.set(Ye,ae=new Set),!ae.has(Ee)){{we=hs.createElement("style"),we.innerHTML=ue;const Ue=null!==(Lt=jr.$nonce$)&&void 0!==Lt?Lt:fn(hs);null!=Ue&&we.setAttribute("nonce",Ue),Ye.insertBefore(we,Ye.querySelector("link"))}ae&&ae.add(Ee)}}else Ye.adoptedStyleSheets.includes(ue)||(Ye.adoptedStyleSheets=[...Ye.adoptedStyleSheets,ue]);return Ee})(Jt.shadowRoot?Jt.shadowRoot:Jt.getRootNode(),Tt);10&Ln&&(Jt["s-sc"]=Ee,Jt.classList.add(Ee+"-h"))})(Tt);cr(Tt,Jt),ae&&(ae.map(Ue=>Ue()),Ee["s-rc"]=void 0);{const Ue=null!==(Lt=Ee["s-p"])&&void 0!==Lt?Lt:[],it=()=>Ei(Tt);0===Ue.length?it():(Promise.all(Ue).then(it),Tt.$flags$|=4,Ue.length=0)}});return function(Jt,Ln,Lt){return Ye.apply(this,arguments)}}(),cr=(Ye,Tt,Jt)=>{try{Tt=Tt.render(),Ye.$flags$&=-17,Ye.$flags$|=2,((Ye,Tt)=>{const Jt=Ye.$hostElement$,Ln=Ye.$vnode$||rn(null,null),Lt=(Ye=>Ye&&Ye.$tag$===ht)(Tt)?Tt:xn(null,null,Tt);l=Jt.tagName,Lt.$tag$=null,Lt.$flags$|=4,Ye.$vnode$=Lt,Lt.$elm$=Ln.$elm$=Jt.shadowRoot||Jt,ne=Jt["s-sc"],et(Ln,Lt)})(Ye,Tt)}catch(Ln){Pr(Ln,Ye.$hostElement$)}return null},Ei=Ye=>{const Jt=Ye.$hostElement$,Lt=Ye.$lazyInstance$,Ee=Ye.$ancestorComponent$;64&Ye.$flags$||(Ye.$flags$|=64,ji(Jt),Wr(Lt,"componentDidLoad"),Ye.$onReadyResolve$(Jt),Ee||Er()),Ye.$onInstanceResolve$(Jt),Ye.$onRenderResolve$&&(Ye.$onRenderResolve$(),Ye.$onRenderResolve$=void 0),512&Ye.$flags$&&kt(()=>go(Ye,!1)),Ye.$flags$&=-517},ko=Ye=>{{const Tt=Zr(Ye),Jt=Tt.$hostElement$.isConnected;return Jt&&2==(18&Tt.$flags$)&&go(Tt,!1),Jt}},Er=Ye=>{ji(hs.documentElement),kt(()=>Ot(Jn,"appload",{detail:{namespace:"ionicpwaelements"}}))},Wr=(Ye,Tt,Jt)=>{if(Ye&&Ye[Tt])try{return Ye[Tt](Jt)}catch(Ln){Pr(Ln)}},ji=Ye=>Ye.classList.add("hydrated"),ui=(Ye,Tt,Jt)=>{if(Tt.$members$){const Ln=Object.entries(Tt.$members$),Lt=Ye.prototype;if(Ln.map(([Ee,[ue]])=>{31&ue||2&Jt&&32&ue?Object.defineProperty(Lt,Ee,{get(){return((Ye,Tt)=>Zr(this).$instanceValues$.get(Tt))(0,Ee)},set(ae){((Ye,Tt,Jt,Ln)=>{const Lt=Zr(Ye),Ee=Lt.$instanceValues$.get(Tt),ue=Lt.$flags$,ae=Lt.$lazyInstance$;Jt=((Ye,Tt)=>null==Ye||yt(Ye)?Ye:4&Tt?"false"!==Ye&&(""===Ye||!!Ye):2&Tt?parseFloat(Ye):1&Tt?String(Ye):Ye)(Jt,Ln.$members$[Tt][0]);const we=Number.isNaN(Ee)&&Number.isNaN(Jt);(!(8&ue)||void 0===Ee)&&Jt!==Ee&&!we&&(Lt.$instanceValues$.set(Tt,Jt),ae&&2==(18&ue)&&go(Lt,!1))})(this,Ee,ae,Tt)},configurable:!0,enumerable:!0}):1&Jt&&64&ue&&Object.defineProperty(Lt,Ee,{value(...ae){const we=Zr(this);return we.$onInstancePromise$.then(()=>we.$lazyInstance$[Ee](...ae))}})}),1&Jt){const Ee=new Map;Lt.attributeChangedCallback=function(ue,ae,we){jr.jmp(()=>{const Ue=Ee.get(ue);if(this.hasOwnProperty(Ue))we=this[Ue],delete this[Ue];else if(Lt.hasOwnProperty(Ue)&&"number"==typeof this[Ue]&&this[Ue]==we)return;this[Ue]=(null!==we||"boolean"!=typeof this[Ue])&&we})},Ye.observedAttributes=Ln.filter(([ue,ae])=>15&ae[0]).map(([ue,ae])=>{const we=ae[1]||ue;return Ee.set(we,ue),we})}}return Ye},Ni=function(){var Ye=(0,V.A)(function*(Tt,Jt,Ln,Lt,Ee){if(!(32&Jt.$flags$)){Jt.$flags$|=32;{if((Ee=wr(Ln)).then){const Ue=()=>{};Ee=yield Ee,Ue()}Ee.isProxied||(ui(Ee,Ln,2),Ee.isProxied=!0);const we=()=>{};Jt.$flags$|=8;try{new Ee(Jt)}catch(Ue){Pr(Ue)}Jt.$flags$&=-9,we()}if(Ee.style){let we=Ee.style;const Ue=kn(Ln);if(!aa.has(Ue)){const it=()=>{};((Ye,Tt,Jt)=>{let Ln=aa.get(Ye);ps&&Jt?(Ln=Ln||new CSSStyleSheet,"string"==typeof Ln?Ln=Tt:Ln.replaceSync(Tt)):Ln=Tt,aa.set(Ye,Ln)})(Ue,we,!!(1&Ln.$flags$)),it()}}}const ue=Jt.$ancestorComponent$,ae=()=>go(Jt,!0);ue&&ue["s-rc"]?ue["s-rc"].push(ae):ae()});return function(Jt,Ln,Lt,Ee,ue){return Ye.apply(this,arguments)}}(),bs=(Ye,Tt={})=>{var Jt;const Lt=[],Ee=Tt.exclude||[],ue=Jn.customElements,ae=hs.head,we=ae.querySelector("meta[charset]"),Ue=hs.createElement("style"),it=[];let Xt,Cn=!0;Object.assign(jr,Tt),jr.$resourcesUrl$=new URL(Tt.resourcesUrl||"./",hs.baseURI).href,Ye.map(dn=>{dn[1].map(Nn=>{const Hi={$flags$:Nn[0],$tagName$:Nn[1],$members$:Nn[2],$listeners$:Nn[3]};Hi.$members$=Nn[2],Hi.$listeners$=Nn[3];const Oi=Hi.$tagName$,Fo=class extends HTMLElement{constructor(nr){super(nr),Wo(nr=this,Hi),1&Hi.$flags$&&nr.attachShadow({mode:"open"})}connectedCallback(){Xt&&(clearTimeout(Xt),Xt=null),Cn?it.push(this):jr.jmp(()=>(Ye=>{if(!(1&jr.$flags$)){const Tt=Zr(Ye),Jt=Tt.$cmpMeta$,Ln=()=>{};if(1&Tt.$flags$)Br(Ye,Tt,Jt.$listeners$);else{Tt.$flags$|=1;{let Lt=Ye;for(;Lt=Lt.parentNode||Lt.host;)if(Lt["s-p"]){un(Tt,Tt.$ancestorComponent$=Lt);break}}Jt.$members$&&Object.entries(Jt.$members$).map(([Lt,[Ee]])=>{if(31&Ee&&Ye.hasOwnProperty(Lt)){const ue=Ye[Lt];delete Ye[Lt],Ye[Lt]=ue}}),Ni(Ye,Tt,Jt)}Ln()}})(this))}disconnectedCallback(){jr.jmp(()=>(Ye=>{if(!(1&jr.$flags$)){const Tt=Zr(this),Jt=Tt.$lazyInstance$;Tt.$rmListeners$&&(Tt.$rmListeners$.map(Ln=>Ln()),Tt.$rmListeners$=void 0),Wr(Jt,"disconnectedCallback")}})())}componentOnReady(){return Zr(this).$onReadyPromise$}};Hi.$lazyBundleId$=dn[0],!Ee.includes(Oi)&&!ue.get(Oi)&&(Lt.push(Oi),ue.define(Oi,ui(Fo,Hi,1)))})});{Ue.innerHTML=Lt+"{visibility:hidden}.hydrated{visibility:inherit}",Ue.setAttribute("data-styles","");const dn=null!==(Jt=jr.$nonce$)&&void 0!==Jt?Jt:fn(hs);null!=dn&&Ue.setAttribute("nonce",dn),ae.insertBefore(Ue,we?we.nextSibling:ae.firstChild)}Cn=!1,it.length?it.map(dn=>dn.connectedCallback()):jr.jmp(()=>Xt=setTimeout(Er,30))},Br=(Ye,Tt,Jt,Ln)=>{Jt&&Jt.map(([Lt,Ee,ue])=>{const ae=ro(Ye,Lt),we=So(Tt,ue),Ue=fo(Lt);jr.ael(ae,Ee,we,Ue),(Tt.$rmListeners$=Tt.$rmListeners$||[]).push(()=>jr.rel(ae,Ee,we,Ue))})},So=(Ye,Tt)=>Jt=>{try{256&Ye.$flags$?Ye.$lazyInstance$[Tt](Jt):(Ye.$queuedListeners$=Ye.$queuedListeners$||[]).push([Tt,Jt])}catch(Ln){Pr(Ln)}},ro=(Ye,Tt)=>16&Tt?hs.body:Ye,fo=Ye=>!!(2&Ye),zr=new WeakMap,Zr=Ye=>zr.get(Ye),Qr=(Ye,Tt)=>zr.set(Tt.$lazyInstance$=Ye,Tt),Wo=(Ye,Tt)=>{const Jt={$flags$:0,$hostElement$:Ye,$cmpMeta$:Tt,$instanceValues$:new Map};return Jt.$onInstancePromise$=new Promise(Ln=>Jt.$onInstanceResolve$=Ln),Jt.$onReadyPromise$=new Promise(Ln=>Jt.$onReadyResolve$=Ln),Ye["s-p"]=[],Ye["s-rc"]=[],Br(Ye,Jt,Tt.$listeners$),zr.set(Ye,Jt)},lr=(Ye,Tt)=>Tt in Ye,Pr=(Ye,Tt)=>(0,console.error)(Ye,Tt),xr=new Map,wr=(Ye,Tt,Jt)=>{const Ln=Ye.$tagName$.replace(/-/g,"_"),Lt=Ye.$lazyBundleId$,Ee=xr.get(Lt);if(Ee)return Ee[Ln];if(!Jt||!BUILD.hotModuleReplacement){const ue=ae=>(xr.set(Lt,ae),ae[Ln]);switch(Lt){case"pwa-action-sheet":return _e.e(6301).then(_e.bind(_e,6301)).then(ue,Pr);case"pwa-camera-modal":return _e.e(2982).then(_e.bind(_e,2982)).then(ue,Pr);case"pwa-toast":return _e.e(3574).then(_e.bind(_e,3574)).then(ue,Pr);case"pwa-camera-modal-instance":return _e.e(5640).then(_e.bind(_e,5640)).then(ue,Pr);case"pwa-camera":return _e.e(6086).then(_e.bind(_e,6086)).then(ue,Pr)}}return _e(5235)(`./${Lt}.entry.js`).then(ue=>(xr.set(Lt,ue),ue[Ln]),Pr)},aa=new Map,Jn=typeof window<"u"?window:{},hs=Jn.document||{head:{}},jr={$flags$:0,$resourcesUrl$:"",jmp:Ye=>Ye(),raf:Ye=>requestAnimationFrame(Ye),ael:(Ye,Tt,Jt,Ln)=>Ye.addEventListener(Tt,Jt,Ln),rel:(Ye,Tt,Jt,Ln)=>Ye.removeEventListener(Tt,Jt,Ln),ce:(Ye,Tt)=>new CustomEvent(Ye,Tt)},Ns=Ye=>Promise.resolve(Ye),ps=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Kr=[],Fi=[],ni=(Ye,Tt)=>Jt=>{Ye.push(Jt),Y||(Y=!0,Tt&&4&jr.$flags$?kt(Kn):jr.raf(Kn))},Ai=Ye=>{for(let Tt=0;Tt<Ye.length;Tt++)try{Ye[Tt](performance.now())}catch(Jt){Pr(Jt)}Ye.length=0},Kn=()=>{Ai(Kr),Ai(Fi),(Y=Kr.length>0)&&jr.raf(Kn)},kt=Ye=>Ns().then(Ye),mt=ni(Fi,!0)},1832:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{L:()=>V});const V=[{id:1,text:"Service des routes et mobilit\xe9",value:"service_des_routes_et_mobilite",description:"Responsable de l'entretien des routes et de la gestion des transports.",contactEmail:"routes.mobilite@city.ch",phoneNumber:"+41 22 123 45 67",uniqueCode:"CH-SRM-001"},{id:2,text:"Service de l'\xe9clairage public",value:"service_de_leclairage_public",description:"G\xe8re l'\xe9clairage public et assure que les rues sont bien \xe9clair\xe9es.",contactEmail:"eclairage.public@city.ch",phoneNumber:"+41 22 234 56 78",uniqueCode:"CH-SEP-002"},{id:3,text:"Service des eaux",value:"service_des_eaux",description:"Assure l'approvisionnement en eau potable et maintient les infrastructures d'eau.",contactEmail:"eaux@city.ch",phoneNumber:"+41 22 345 67 89",uniqueCode:"CH-SDE-003",created:!1},{id:4,text:"Service de la propret\xe9",value:"service_de_la_proprete",description:"Maintient la propret\xe9 des espaces publics.",contactEmail:"proprete@city.ch",phoneNumber:"+41 22 456 78 90",uniqueCode:"CH-SDP-004",created:!1},{id:5,text:"Service des espaces verts",value:"service_des_espaces_verts",description:"Responsable de l'entretien des parcs et des espaces verts.",contactEmail:"espaces.verts@city.ch",phoneNumber:"+41 22 567 89 01",uniqueCode:"CH-SEV-005",created:!1},{id:6,text:"Police municipale",value:"police_municipale",description:"D\xe9partement de police local assurant la s\xe9curit\xe9 et l'ordre public.",contactEmail:"police.municipale@city.ch",phoneNumber:"+41 22 678 90 12",uniqueCode:"CH-PM-006",created:!1},{id:7,text:"Service de la mobilit\xe9",value:"service_de_la_mobilite",description:"G\xe8re la mobilit\xe9 urbaine et les transports publics.",contactEmail:"mobilite@city.ch",phoneNumber:"+41 22 789 01 23",uniqueCode:"CH-SDM-007",created:!1},{id:8,text:"Police cantonale",value:"police_cantonale",description:"Police responsable de la s\xe9curit\xe9 au niveau cantonal.",contactEmail:"police.cantonale@city.ch",phoneNumber:"+41 22 890 12 34",uniqueCode:"CH-PC-008",created:!1},{id:9,text:"Service client\xe8le Migros",value:"service_clientele_migros",description:"Service de soutien et d'assistance aux clients de Migros.",contactEmail:"clientele.migros@migros.ch",phoneNumber:"+41 22 901 23 45",uniqueCode:"CH-SCM-009",created:!1},{id:10,text:"Services de secours (144)",value:"services_de_secours_144",description:"Services d'urgence pour les secours m\xe9dicaux.",contactEmail:"secours.144@city.ch",phoneNumber:"+41 22 012 34 56",uniqueCode:"CH-SDS-010",created:!1},{id:11,text:"Service d'incendie et de secours (SIS)",value:"service_d_incendie_et_de_secours_sis",description:"Interventions en cas d'incendie et autres situations d'urgence.",contactEmail:"incendie.secours@city.ch",phoneNumber:"+41 22 123 45 67",uniqueCode:"CH-SIS-011",created:!1},{id:12,text:"Service v\xe9t\xe9rinaire cantonal",value:"service_veterinaire_cantonal",description:"Supervise la sant\xe9 et le bien-\xeatre des animaux au niveau cantonal.",contactEmail:"veterinaire.cantonal@city.ch",phoneNumber:"+41 22 234 56 78",uniqueCode:"CH-SVC-012",created:!1},{id:13,text:"Service social",value:"service_social",description:"Fournit des services de soutien et d'assistance sociale.",contactEmail:"social@city.ch",phoneNumber:"+41 22 345 67 89",uniqueCode:"CH-SS-013",created:!1},{id:14,text:"Service des travaux publics",value:"service_des_travaux_publics",description:"G\xe8re les infrastructures et les travaux publics.",contactEmail:"travaux.publics@city.ch",phoneNumber:"+41 22 456 78 90",uniqueCode:"CH-STP-014",created:!1},{id:15,text:"Transport public de Gen\xe8ve",value:"transport_public_de_geneve",description:"G\xe8re les transports publics de Gen\xe8ve.",contactEmail:"transport.geneve@city.ch",phoneNumber:"+41 22 567 89 01",uniqueCode:"CH-TPG-015",created:!1},{id:16,text:"Coop",value:"coop",description:"Service client\xe8le de Coop.",contactEmail:"clientele@coop.ch",phoneNumber:"+41 22 678 90 12",uniqueCode:"CH-COOP-016",created:!1},{id:17,text:"Poste Suisse",value:"poste_suisse",description:"Service postal suisse.",contactEmail:"contact@poste.ch",phoneNumber:"+41 22 789 01 23",uniqueCode:"CH-PS-017",created:!1},{id:18,text:"H\xf4pitaux Universitaires de Gen\xe8ve (HUG)",value:"hopitaux_universitaires_de_geneve",description:"H\xf4pitaux universitaires offrant des soins m\xe9dicaux avanc\xe9s.",contactEmail:"contact@hug.ch",phoneNumber:"+41 22 890 12 34",uniqueCode:"CH-HUG-018",created:!1},{id:19,text:"Protection Civile",value:"protection_civile",description:"Services de protection civile pour les situations d'urgence.",contactEmail:"protection.civile@city.ch",phoneNumber:"+41 22 901 23 45",uniqueCode:"CH-PC-019",created:!1},{id:20,text:"Ambulances Priv\xe9es de Gen\xe8ve",value:"ambulances_privees_de_geneve",description:"Services d'ambulance priv\xe9e \xe0 Gen\xe8ve.",contactEmail:"ambulances.privees@city.ch",phoneNumber:"+41 22 012 34 56",uniqueCode:"CH-APG-020",created:!1},{id:21,text:"Service des pompiers",value:"service_des_pompiers",description:"Service de lutte contre les incendies et interventions d'urgence.",contactEmail:"pompiers@city.ch",phoneNumber:"+41 22 123 45 67",uniqueCode:"CH-SDP-021",created:!1},{id:22,text:"Pro Infirmis",value:"pro_infirmis",description:"Organisation offrant des services aux personnes handicap\xe9es.",contactEmail:"info@proinfirmis.ch",phoneNumber:"+41 22 234 56 78",uniqueCode:"CH-PI-022",created:!1},{id:23,text:"Secours d'hiver",value:"secours_d_hiver",description:"Organisation d'aide sociale pour les p\xe9riodes hivernales.",contactEmail:"contact@secoursdhiver.ch",phoneNumber:"+41 22 345 67 89",uniqueCode:"CH-SDH-023",created:!1},{id:24,text:"Soci\xe9t\xe9 de secours mutuels",value:"societe_de_secours_mutuels",description:"Organisation d'entraide et de soutien mutuel.",contactEmail:"secours.mutuel@city.ch",phoneNumber:"+41 22 456 78 90",uniqueCode:"CH-SSM-024",created:!1},{id:25,text:"Fondation Partage",value:"fondation_partage",description:"Fondation offrant des services de distribution alimentaire et de soutien social.",contactEmail:"info@fondationpartage.ch",phoneNumber:"+41 22 567 89 01",uniqueCode:"CH-FP-025",created:!1},{id:26,text:"signaleur benevole",value:"signaleur_privee",description:"signaleurs benevoles engag\xe9e autours de chez sois",contactEmail:"",phoneNumber:"",uniqueCode:"CH-00-000",created:!1}]},4796:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{u:()=>We});var V=_e(467),re=_e(3953),ne=_e(2802),l=_e(5621);let We=(()=>{var Y;class ft{constructor(jt){this.auth=jt,this.userSignal=(0,re.vPA)(null),this.auth.setPersistence(ne.F0).then(()=>{console.log("Persistance de l'authentification configur\xe9e sur le stockage local.")}).catch(wt=>{console.error("Erreur lors de la configuration de la persistance de l'authentification:",wt)})}get user(){return this.userSignal.asReadonly()}signInAnonymously(){var jt=this;return(0,V.A)(function*(){try{const C=(yield(0,l.zK)(jt.auth)).user;return jt.userSignal.set(C),C}catch(wt){return console.error("Erreur lors de la connexion anonyme:",wt),null}})()}getCurrentUser(){return this.auth.currentUser}register(jt,wt){var C=this;return(0,V.A)(function*(){try{const Ut=(yield(0,l.eJ)(C.auth,jt,wt)).user;return C.userSignal.set(Ut),Ut}catch(At){throw At}})()}login(jt,wt){var C=this;return(0,V.A)(function*(){try{const Ut=(yield(0,l.x9)(C.auth,jt,wt)).user;return C.userSignal.set(Ut),Ut}catch(At){return"auth/wrong-password"===At.code?console.error("Mot de passe incorrect"):"auth/user-not-found"===At.code?console.error("Utilisateur non trouv\xe9"):console.error("Erreur lors de la connexion:",At.message),null}})()}logout(){var jt=this;return(0,V.A)(function*(){yield(0,ne.CI)(jt.auth),jt.userSignal.set(null),yield jt.signInAnonymously()})()}resetPassword(jt){var wt=this;return(0,V.A)(function*(){try{yield(0,l.J1)(wt.auth,jt),console.log("Email de r\xe9initialisation de mot de passe envoy\xe9.")}catch(C){throw console.error("Erreur lors de l'envoi de l'email de r\xe9initialisation de mot de passe:",C),C}})()}getUserFromLocalStorage(){const wt=Object.keys(localStorage).find(C=>C.startsWith("firebase:authUser:"));if(wt){const C=localStorage.getItem(wt);if(C){const At=JSON.parse(C);return this.userSignal.set(At),At}}return null}checkIfUserExists(jt){var wt=this;return(0,V.A)(function*(){try{return(yield(0,l.Wm)(wt.auth,jt)).length>0}catch(C){return console.error("Erreur lors de la v\xe9rification de l'utilisateur:",C),!1}})()}}return(Y=ft).\u0275fac=function(jt){return new(jt||Y)(re.KVO(l.Nj))},Y.\u0275prov=re.jDH({token:Y,factory:Y.\u0275fac,providedIn:"root"}),ft})()},1730:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{W:()=>jt});var V=_e(467),re=_e(3953),ne=_e(6354),l=_e(8455),We=_e(5558),Y=_e(9967),ft=_e(3273),qt=_e(4796);let jt=(()=>{var wt;class C{constructor(){this.firestore=(0,re.WQX)(Y._7),this.destroRef=(0,re.WQX)(re.abz),this.authService=(0,re.WQX)(qt.u),this.db=(0,ft.aU)(),this.userId=(0,re.vPA)(""),this.signalementsSignal=(0,re.vPA)([])}detectChanges(){throw new Error("Method not implemented.")}get signalements(){return this.signalementsSignal.asReadonly()}addSignalement(Ut){var yt=this;return(0,V.A)(function*(){const fn=(0,Y.rJ)(yt.firestore,"signalements"),xn=(0,ft.H9)(fn);return Ut.id=xn.id,(0,ft.BN)(xn,Ut)})()}addConfirmation(Ut,yt){var fn=this;return(0,V.A)(function*(){const xn=(0,ft.H9)(fn.firestore,`signalements/${Ut}`),rn=yield(0,ft.x7)(xn);if(!rn.exists())throw console.error("Signalement does not exist."),new Error("Signalement does not exist.");{const ht=rn.data();ht.confirmedByUsers.includes(yt)||(ht.confirmedByUsers.push(yt),yield(0,ft.BN)(xn,ht))}})()}deleteSignalement(Ut,yt){var fn=this;return(0,V.A)(function*(){const xn=(0,ft.H9)(fn.firestore,`signalements/${Ut}`),rn=yield(0,ft.x7)(xn);if(!rn.exists())throw console.error("No such document!"),new Error("No such document!");{var ht;const ei=rn.data();if(ei.id!==Ut||!ei.recipient.some(Mn=>yt.includes(Mn))||null!==(ht=fn.authService.userSignal())&&void 0!==ht&&ht.isAnonymous)throw new Error("User not authorized to delete this document.");yield(0,ft.kd)(xn),console.log("Document successfully deleted!")}})()}updateSignalementStatus(Ut,yt){var fn=this;return(0,V.A)(function*(){const xn=(0,ft.H9)(fn.firestore,`signalements/${Ut}`),rn=yield(0,ft.x7)(xn);if(!rn.exists())throw new Error("No such document!");{var ht;const ei=rn.data();if(console.log("attention this is sginalement :",ei.id),console.log("attention this is selected!! :",Ut),console.log("attention ce ci est destinataire :",yt),ei.id!==Ut||!ei.recipient.some(Mn=>yt.includes(Mn))||null!==(ht=fn.authService.userSignal())&&void 0!==ht&&ht.isAnonymous)throw new Error("seulement les diestinarie sont autoris\xe9 a changer le statut  cette annonce");ei.status="R\xe9solu",yield(0,ft.BN)(xn,ei),console.log('Signalement status updated to "R\xe9solu".')}})()}loadSignalements(){const Ut=this.authService.userSignal(),yt=null==Ut?void 0:Ut.isAnonymous,fn=(0,Y.rJ)(this.firestore,"signalements");if(yt)return(0,Y.xs)(fn,{idField:"id"}).pipe((0,ne.T)(xn=>xn));{const xn=(0,ft.H9)(this.firestore,"users",null==Ut?void 0:Ut.uid);return(0,l.H)((0,ft.x7)(xn)).pipe((0,We.n)(rn=>{if(rn.exists()){const ht=rn.data(),ei=null==ht?void 0:ht.categorie;if(!ei)throw new Error("User category not found");const Mn=(0,ft.P)(fn,(0,ft._M)("recipient","array-contains",ei));return(0,Y.xs)(Mn,{idField:"id"}).pipe((0,ne.T)(Zn=>Zn))}throw new Error("User data not found")}))}}getSignalementById(Ut){const yt=(0,ft.H9)(this.firestore,`signalements/${Ut}`);return(0,Y.Bg)(yt,{idField:"id"})}}return(wt=C).\u0275fac=function(Ut){return new(Ut||wt)},wt.\u0275prov=re.jDH({token:wt,factory:wt.\u0275fac,providedIn:"root"}),C})()},2926:(Yo,Xn,_e)=>{"use strict";var V=_e(345),re=_e(5113),ne=_e(8880),l=_e(2700),We=_e(1288),qt=_e(7440),jt=_e(5079),wt=_e(5873),C=_e(3953);let At=(()=>{var y;class h{ngOnInit(){}constructor(){(0,jt.a)({mapOutline:wt.dG8,listCircleOutline:wt.XjR})}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signalements"]],standalone:!0,features:[C.aNF],decls:12,vars:0,consts:[["value","all"],["value","favorites","routerLink","/signalements/carte"],["name","map-outline"],["value","all","routerLink","/signalements/liste"],["name","list-circle-outline"]],template:function(I,F){1&I&&(C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-segment",0)(3,"ion-segment-button",1)(4,"ion-label"),C.EFF(5,"carte"),C.k0s(),C.nrm(6,"ion-icon",2),C.k0s(),C.j41(7,"ion-segment-button",3)(8,"ion-label"),C.EFF(9,"liste "),C.k0s(),C.nrm(10,"ion-icon",4),C.k0s()()()(),C.nrm(11,"ion-router-outlet"))},dependencies:[l.iq,l.Rg,l.he,l.ai,l.eP,l.Gp,l.eU,re.Wk]}),h})();var Ut=_e(467),yt=_e(177);const fn=y=>["../",y];function xn(y,h){if(1&y&&(C.j41(0,"swiper-slide",2),C.nrm(1,"img",3),C.k0s()),2&y){const A=h.$implicit,I=C.XpG();C.R7$(),C.Y8G("alt",I.signalementFenetre().title)("src",A,C.B4B)}}let rn=(()=>{var y;class h{constructor(){this.signalementFenetre=C.hFB.required(),(0,jt.a)({locationOutline:wt.UN$})}ngOnInit(){}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signalement-large"]],inputs:{signalementFenetre:[1,"signalementFenetre"]},standalone:!0,features:[C.aNF],decls:10,vars:10,consts:[[3,"routerLink"],[3,"loop","pagination"],[2,"overflow","hidden","height","200px"],[2,"height","100%","width","100%","object-fit","cover",3,"alt","src"]],template:function(I,F){1&I&&(C.j41(0,"ion-card",0)(1,"swiper-container",1),C.Z7z(2,xn,2,2,"swiper-slide",2,C.fX1),C.k0s(),C.j41(4,"ion-card-header")(5,"ion-card-title"),C.EFF(6),C.k0s(),C.j41(7,"ion-card-subtitle"),C.EFF(8),C.nI1(9,"date"),C.k0s()()()),2&I&&(C.Y8G("routerLink",C.eq3(8,fn,F.signalementFenetre().id)),C.R7$(),C.Y8G("loop",!0)("pagination",!0),C.R7$(),C.Dyx(F.signalementFenetre().images),C.R7$(4),C.JRh(F.signalementFenetre().title),C.R7$(2),C.JRh(C.i5U(9,5,F.signalementFenetre().date,"full")))},dependencies:[l.HW,l.ME,l.tN,l.b_,re.Wk,yt.vh],styles:["swiper-container[_ngcontent-%COMP%]{width:100%;height:100%}swiper-slide[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.location-icon[_ngcontent-%COMP%]{color:green;font-size:1rem}ion-card[_ngcontent-%COMP%]{cursor:pointer}"]}),h})(),ht=(()=>{var y;class h{constructor(){this.signalement=C.hFB.required(),this.selected=C.hFB.required(),this.select=(0,C.CGW)()}onSelectSignalement(){this.select.emit(this.signalement().id)}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signalement-small"]],inputs:{signalement:[1,"signalement"],selected:[1,"selected"]},outputs:{select:"select"},standalone:!0,features:[C.aNF],decls:11,vars:11,consts:[[3,"click"],["slot","start"],[3,"src","alt"]],template:function(I,F){1&I&&(C.j41(0,"ion-item",0),C.bIt("click",function(){return F.onSelectSignalement()}),C.j41(1,"ion-thumbnail",1),C.nrm(2,"img",2),C.k0s(),C.j41(3,"ion-label")(4,"h3"),C.EFF(5),C.k0s(),C.j41(6,"p"),C.EFF(7),C.k0s(),C.j41(8,"p"),C.EFF(9),C.nI1(10,"date"),C.k0s()()()),2&I&&(C.AVh("active",F.selected()),C.R7$(2),C.Y8G("src",F.signalement().images[0],C.B4B)("alt",F.signalement().title),C.R7$(3),C.JRh(F.signalement().title),C.R7$(2),C.JRh(F.signalement().location),C.R7$(2),C.Lme("",C.i5U(10,8,F.signalement().date,"full")," |",F.signalement().status,""))},dependencies:[l.he,l.uz,l.Zx,yt.vh],styles:["ion-item[_ngcontent-%COMP%]{cursor:pointer;border:solid 2px transparent;transition:border .3s ease-in-out}.active[_ngcontent-%COMP%]{border:solid 2px grey}"]}),h})();var ei=_e(1730),Mn=_e(4796);const Zn=(y,h)=>h.id;function xt(y,h){1&y&&(C.j41(0,"ion-card")(1,"div",2)(2,"h1",3),C.EFF(3,"Chargement des signalements en cours..."),C.k0s()()())}function Ot(y,h){if(1&y&&(C.j41(0,"ion-card")(1,"div",2)(2,"h1",3),C.EFF(3),C.k0s()()()),2&y){const A=C.XpG();C.R7$(3),C.SpI(" Une erreur s'est produite, veuillez r\xe9essayer plus tard... ",A.error()," ")}}function wn(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-card",1)(1,"ion-item",4)(2,"ion-select",5,0),C.bIt("ionChange",function(){C.eBV(A);const F=C.sdS(3),X=C.XpG();return C.Njj(X.onChangeSignalementsFilter(F.value))}),C.j41(4,"ion-select-option",6),C.EFF(5,"Tous"),C.k0s(),C.j41(6,"ion-select-option",7),C.EFF(7,"Statut: En cours"),C.k0s(),C.j41(8,"ion-select-option",8),C.EFF(9,"Statut: R\xe9solus"),C.k0s(),C.j41(10,"ion-select-option",9),C.EFF(11,"Le plus confirm\xe9s"),C.k0s(),C.j41(12,"ion-select-option",10),C.EFF(13,"Les plus r\xe9centes"),C.k0s(),C.j41(14,"ion-select-option",11),C.EFF(15,"Les plus anciennes"),C.k0s()()(),C.j41(16,"div",2)(17,"h1",3),C.EFF(18,"Aucun signalement \xe0 afficher"),C.k0s()()()}}function Pn(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-list")(1,"app-signalement-small",14),C.bIt("select",function(F){C.eBV(A);const X=C.XpG(2);return C.Njj(X.onSelect(F))}),C.k0s()()}if(2&y){const A=h.$implicit,I=C.XpG(2);C.R7$(),C.Y8G("signalement",A)("selected",I.selectedSignalement().id===A.id)}}function Ii(y,h){1&y&&(C.j41(0,"p"),C.EFF(1,"Aucun signalement pour le moment..."),C.k0s())}function Et(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-card",12),C.nrm(1,"app-signalement-large",13),C.k0s(),C.j41(2,"ion-item")(3,"ion-select",5,0),C.bIt("ionChange",function(){C.eBV(A);const F=C.sdS(4),X=C.XpG();return C.Njj(X.onChangeSignalementsFilter(F.value))}),C.j41(5,"ion-select-option",6),C.EFF(6,"Tous"),C.k0s(),C.j41(7,"ion-select-option",7),C.EFF(8,"Statut: En cours"),C.k0s(),C.j41(9,"ion-select-option",8),C.EFF(10,"Statut: R\xe9solus"),C.k0s(),C.j41(11,"ion-select-option",9),C.EFF(12,"Le plus confirm\xe9s"),C.k0s(),C.j41(13,"ion-select-option",10),C.EFF(14,"Les plus r\xe9centes"),C.k0s(),C.j41(15,"ion-select-option",11),C.EFF(16,"Les plus anciennes"),C.k0s()()(),C.j41(17,"ion-content"),C.Z7z(18,Pn,2,2,"ion-list",null,Zn,!1,Ii,2,0,"p"),C.k0s()}if(2&y){const A=C.XpG();C.R7$(),C.Y8G("signalementFenetre",A.selectedSignalement()),C.R7$(17),C.Dyx(A.signalements())}}let kn=(()=>{var y;class h{onSelect(I){var F;this.selectedSignalement.set(null===(F=this.allSignalements())||void 0===F?void 0:F.find(X=>X.id===I))}onChangeSignalementsFilter(I){this.selectedFilter.set(I)}ngOnInit(){var I=this;return(0,Ut.A)(function*(){I.authService.getUserFromLocalStorage()?I.loadSignalements():yield I.fetchUser()})()}fetchUser(){var I=this;return(0,Ut.A)(function*(){I.isFetching.set(!0);try{(yield I.authService.signInAnonymously())&&(I.authService.getUserFromLocalStorage(),I.loadSignalements())}catch(F){console.log("Error in fetchUser",F),I.error.set("Erreur lors de l'initialisation"),I.isFetching.set(!1)}})()}loadSignalements(){this.signalementsService.loadSignalements().subscribe({next:I=>{I?(this.signalementsService.signalementsSignal.set(I),this.selectedSignalement.set(I[0]),this.isFetching.set(!1)):(console.log("cant fetch signalement..."),this.isFetching.set(!1))},error:I=>{console.log("Error loading data",I),this.error.set("erreur lors du chargement des signalement"),this.isFetching.set(!1)}})}constructor(){this.destroyRef=(0,C.WQX)(C.abz),this.signalementsService=(0,C.WQX)(ei.W),this.selectedFilter=(0,C.vPA)("all"),this.allSignalements=this.signalementsService.signalementsSignal,this.isFetching=(0,C.vPA)(!1),this.error=(0,C.vPA)(""),this.selectedSignalement=(0,C.vPA)({}),this.authService=(0,C.WQX)(Mn.u),this.user=this.authService.userSignal,this.signalements=(0,C.EWP)(()=>{switch(console.log("Calculating filtered signalements"),this.selectedFilter()){case"inProgress":return this.allSignalements().filter(I=>"En cours"===I.status);case"resolved":return this.allSignalements().filter(I=>"R\xe9solu"===I.status);case"mostConfirmed":return this.allSignalements().sort((I,F)=>F.confirmedByUsers.length-I.confirmedByUsers.length);case"mostRecent":return this.allSignalements().sort((I,F)=>new Date(F.date).getTime()-new Date(I.date).getTime());case"oldest":return this.allSignalements().sort((I,F)=>new Date(I.date).getTime()-new Date(F.date).getTime());default:return this.allSignalements()}}),console.log("constructor called")}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-liste"]],standalone:!0,features:[C.aNF],decls:4,vars:1,consts:[["filter",""],[2,"position","relative"],[2,"height","100vh","width","100%","display","flex","justify-content","center","align-items","center"],[2,"text-align","center"],[2,"position","absolute","top","4rem","width","100%"],["aria-label","Recherches","interface","action-sheet","placeholder","Filtrer les signalements",3,"ionChange"],["value","all"],["value","inProgress"],["value","resolved"],["value","mostConfirmed"],["value","mostRecent"],["value","oldest"],[2,"margin-top","5rem"],[3,"signalementFenetre"],[3,"select","signalement","selected"]],template:function(I,F){1&I&&C.DNE(0,xt,4,0,"ion-card")(1,Ot,4,1,"ion-card")(2,wn,19,0,"ion-card",1)(3,Et,21,2),2&I&&C.vxM(F.isFetching()?0:F.error()?1:0===F.signalements().length?2:3)},dependencies:[l.b_,l.nf,l.uz,l.W9,rn,ht,l.Nm,l.Ip]}),h})();var Te=_e(9842),on=_e(4341),En=(_e(1635),_e(3726)),et=(_e(9986),_e(1331),_e(9856),_e(361),_e(8607),_e(4921)),qn=(_e(6073),_e(1070));_e(8476),_e(8393),_e(1970),_e(8669);const Io={provide:on.cz,useExisting:(0,C.Rfq)(()=>Sc),multi:!0};let Sc=(()=>{var y;class h extends on.zX{}return y=h,(0,Te.A)(h,"\u0275fac",(()=>{let A;return function(F){return(A||(A=C.xGo(y)))(F||y)}})()),(0,Te.A)(h,"\u0275dir",C.FsC({type:y,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(I,F){2&I&&C.BMQ("max",F._enabled?F.max:null)},features:[C.Jv_([Io]),C.Vt3]})),h})();const vl={provide:on.cz,useExisting:(0,C.Rfq)(()=>rs),multi:!0};let rs=(()=>{var y;class h extends on.VZ{}return y=h,(0,Te.A)(h,"\u0275fac",(()=>{let A;return function(F){return(A||(A=C.xGo(y)))(F||y)}})()),(0,Te.A)(h,"\u0275dir",C.FsC({type:y,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(I,F){2&I&&C.BMQ("min",F._enabled?F.min:null)},features:[C.Jv_([vl]),C.Vt3]})),h})(),Yn=(()=>{var y;class h extends ne.Kb{constructor(){super(qn.l)}}return y=h,(0,Te.A)(h,"\u0275fac",function(I){return new(I||y)}),(0,Te.A)(h,"\u0275prov",C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})),h})(),li=(()=>{var y;class h extends ne.Kb{constructor(){super(qn.m),(0,Te.A)(this,"angularDelegate",(0,C.WQX)(ne.Yq)),(0,Te.A)(this,"injector",(0,C.WQX)(C.zZn)),(0,Te.A)(this,"environmentInjector",(0,C.WQX)(C.uvJ))}create(I){return super.create({...I,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return y=h,(0,Te.A)(h,"\u0275fac",function(I){return new(I||y)}),(0,Te.A)(h,"\u0275prov",C.jDH({token:y,factory:y.\u0275fac})),h})(),so=(()=>{var y;class h extends ne.Kb{constructor(){super(qn.t)}}return y=h,(0,Te.A)(h,"\u0275fac",function(I){return new(I||y)}),(0,Te.A)(h,"\u0275prov",C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})),h})();var os=_e(1247),Cs=_e.n(os),ea=_e(5083);const Ps=(0,ea.F3)("Geolocation",{web:()=>_e.e(2920).then(_e.bind(_e,2920)).then(y=>new y.GeolocationWeb)});let Nr=(()=>{var y;class h{getCurrentPosition(){var I=this;return(0,Ut.A)(function*(){try{if((0,et.a)("hybrid")){let F=yield Ps.checkPermissions();if("granted"!==F.location&&(F=yield Ps.requestPermissions()),"granted"===F.location){const X=yield Ps.getCurrentPosition();return{latitude:X.coords.latitude,longitude:X.coords.longitude}}return console.log("Location permission not granted"),null}return I.getCurrentPositionWeb()}catch(F){return console.error("Error getting location",F),null}})()}getCurrentPositionWeb(){return new Promise((I,F)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(X=>{I({latitude:X.coords.latitude,longitude:X.coords.longitude})},X=>{console.error("Error getting location",X),F(null)}):(console.error("Geolocation is not supported by this browser."),F(null))})}calculateDistance(I,F,X,Me){const ze=this.deg2rad(X-I),ct=this.deg2rad(Me-F),ot=Math.sin(ze/2)*Math.sin(ze/2)+Math.cos(this.deg2rad(I))*Math.cos(this.deg2rad(X))*Math.sin(ct/2)*Math.sin(ct/2);return 2*Math.atan2(Math.sqrt(ot),Math.sqrt(1-ot))*6371}deg2rad(I){return I*(Math.PI/180)}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})();var Yr=_e(1985),ta=_e(6977);function cc(y){y||((0,C.Af3)(cc),y=(0,C.WQX)(C.abz));const h=new Yr.c(A=>y.onDestroy(A.next.bind(A)));return A=>A.pipe((0,ta.Q)(h))}const Ea=()=>[0,.6];function Ga(y,h){if(1&y&&(C.j41(0,"swiper-slide",11),C.nrm(1,"img",12),C.k0s()),2&y){let A;const I=h.$implicit,F=C.XpG(2);C.R7$(),C.Y8G("alt",null==(A=F.selectedSignalement())?null:A.title)("src",I,C.B4B)}}function nl(y,h){if(1&y&&(C.j41(0,"ion-card",1)(1,"swiper-container",10),C.Z7z(2,Ga,2,2,"swiper-slide",11,C.fX1),C.k0s(),C.j41(4,"ion-card-header")(5,"ion-card-title"),C.EFF(6),C.k0s(),C.j41(7,"ion-card-subtitle"),C.EFF(8),C.nI1(9,"date"),C.k0s()(),C.j41(10,"ion-card-content"),C.EFF(11),C.k0s()()),2&y){let A,I,F,X;const Me=C.XpG();C.R7$(),C.Y8G("loop",!0)("pagination",!0),C.R7$(),C.Dyx(null==(A=Me.selectedSignalement())?null:A.images),C.R7$(4),C.JRh(null==(I=Me.selectedSignalement())?null:I.title),C.R7$(2),C.JRh(C.i5U(9,5,null==(F=Me.selectedSignalement())?null:F.date,"full")),C.R7$(3),C.SpI(" ",null==(X=Me.selectedSignalement())?null:X.content," ")}}let uc=(()=>{var y;class h{constructor(){this.locationService=(0,C.WQX)(Nr),this.signalementsService=(0,C.WQX)(ei.W),this.selectedFilter=(0,C.vPA)("all"),this.selectedSignalement=(0,C.vPA)(null),this.modalController=(0,C.WQX)(li),this.router=(0,C.WQX)(re.Ix),this.destroyRef=(0,C.WQX)(C.abz),this.allSignalements=this.signalementsService.signalementsSignal,this.markers=[],this.filteredSignalements=(0,C.EWP)(()=>{var I;const F=this.selectedFilter(),X=this.allSignalements()||[],Me=null===(I=this.map)||void 0===I?void 0:I.getCenter();return Me?X.filter(ze=>"inProgress"===F?"En cours"===ze.status:"resolved"!==F||"R\xe9solu"===ze.status).filter(ze=>!!ze.coordinates&&this.locationService.calculateDistance(Me.lat,Me.lng,ze.coordinates.lat,ze.coordinates.lng)<=30):[]})}ngAfterViewInit(){var I=this;return(0,Ut.A)(function*(){Cs().accessToken="pk.eyJ1IjoiZHpmdWxsc3RhY2tkZXYiLCJhIjoiY2x2eWJkejkzMjVodTJrbnlvaGs2c2Y0ZyJ9.IVAMRDDapDnAT7KWCYk4mA";const F=yield I.locationService.getCurrentPosition();F?(I.map=new(Cs().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[F.longitude,F.latitude],zoom:10}),I.map.on("load",(0,Ut.A)(function*(){I.map.addSource("user-location",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[F.longitude,F.latitude]},properties:{}}}),I.map.addLayer({id:"user-location-circle",type:"circle",source:"user-location",paint:{"circle-radius":10,"circle-color":"#ff0000","circle-stroke-color":"#ffffff","circle-stroke-width":2}}),I.map.flyTo({center:[F.longitude,F.latitude],zoom:14,speed:1.5,curve:1,easing:X=>X}),I.signalementsService.loadSignalements().pipe(cc(I.destroyRef)).subscribe({next:X=>{X?(I.signalementsService.signalementsSignal.set(X),I.displaySignalements()):console.log("No signalements available")},error:X=>{console.error("Error loading signalements:",X)}})}))):I.map=new(Cs().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[-74.5,40],zoom:10})})()}onChangeSignalementsFilter(I){this.selectedFilter.set(I),this.displaySignalements()}displaySignalements(){this.clearMarkers(),this.filteredSignalements().forEach(F=>{if(F.coordinates){const X=document.createElement("div");X.className="custom-marker";const Me=document.createElement("div");Me.style.display="flex",Me.style.flexDirection="column",Me.style.alignItems="center",Me.style.marginTop="10px";const $e=document.createElement("img");$e.src=F.images[0],$e.style.width="40px",$e.style.height="40px",$e.style.borderRadius="50%",$e.style.objectFit="cover",Me.appendChild($e);const ze=document.createElement("div");ze.innerText=F.title.slice(0,10)||"Signalement",ze.style.textAlign="center",ze.style.marginTop="8px",ze.style.padding="5px 10px",ze.style.backgroundColor="#007BFF",ze.style.color="#FFFFFF",ze.style.borderRadius="8px",ze.style.boxShadow="0px 4px 6px rgba(0, 0, 0, 0.1)",ze.style.fontSize="14px",ze.style.fontWeight="bold",ze.style.display="inline-block",Me.appendChild(ze),X.appendChild(Me);const ct=new(Cs().Marker)({element:X}).setLngLat([F.coordinates.lng,F.coordinates.lat]).addTo(this.map);ct.getElement().addEventListener("click",()=>{this.selectedSignalement.set(F);const ot=document.getElementById("open-modal");ot&&ot.click()}),this.markers.push(ct)}})}clearMarkers(){this.markers.forEach(I=>I.remove()),this.markers=[]}closeAndRedirect(){var I=this;return(0,Ut.A)(function*(){var F;yield I.modalController.dismiss();const X=null===(F=I.selectedSignalement())||void 0===F?void 0:F.id;X&&I.router.navigate(["/signalements/",X])})()}ngOnInit(){}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-carte"]],standalone:!0,features:[C.Jv_([li]),C.aNF],decls:14,vars:3,consts:[["filter",""],[2,"padding-top","4rem"],["aria-label","Recherches","interface","action-sheet","placeholder","Filtrer les signalements",3,"ionChange"],["value","all"],["value","inProgress"],["value","resolved"],["id","map"],[1,"ion-padding"],["id","open-modal",2,"display","none"],["trigger","open-modal",3,"click","initialBreakpoint","breakpoints"],[3,"loop","pagination"],[2,"overflow","hidden","height","200px"],[2,"height","100%","width","100%","object-fit","cover",3,"alt","src"]],template:function(I,F){if(1&I){const X=C.RV6();C.j41(0,"ion-item",1)(1,"ion-select",2,0),C.bIt("ionChange",function(){C.eBV(X);const $e=C.sdS(2);return C.Njj(F.onChangeSignalementsFilter($e.value))}),C.j41(3,"ion-select-option",3),C.EFF(4,"Tous"),C.k0s(),C.j41(5,"ion-select-option",4),C.EFF(6,"Statut: En cours"),C.k0s(),C.j41(7,"ion-select-option",5),C.EFF(8,"Statut: R\xe9solus"),C.k0s()()(),C.nrm(9,"div",6),C.j41(10,"ion-content",7),C.nrm(11,"ion-button",8),C.j41(12,"ion-modal",9),C.bIt("click",function(){return C.eBV(X),C.Njj(F.closeAndRedirect())}),C.DNE(13,nl,12,8,"ng-template"),C.k0s()()}2&I&&(C.R7$(12),C.Y8G("initialBreakpoint",.6)("breakpoints",C.lJ4(2,Ea)))},dependencies:[l.ME,l.I9,l.tN,l.HW,l.b_,l.Sb,l.Jm,l.W9,l.uz,l.Ip,l.Nm,yt.vh],styles:["#map[_ngcontent-%COMP%]{height:100%;width:100%}.mapboxgl-canvas[_ngcontent-%COMP%]{height:100%!important;width:100%!important}"]}),h})(),gd=(()=>{var y;class h{constructor(){this.toastController=(0,C.WQX)(so)}presentToast(I,F){var X=this;return(0,Ut.A)(function*(){yield(yield X.toastController.create({message:F,duration:1500,position:I})).present()})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})();function sd(y,h){if(1&y&&(C.j41(0,"swiper-slide"),C.nrm(1,"img",18),C.k0s()),2&y){let A;const I=h.$implicit,F=C.XpG(2);C.R7$(),C.Y8G("alt",null==(A=F.singleSignalement())?null:A.title)("src",I,C.B4B)}}function Le(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-fab-button",19),C.bIt("click",function(){C.eBV(A);const F=C.XpG(2);return C.Njj(F.confirmSignalement())}),C.nrm(1,"ion-icon",20),C.k0s()}}function qe(y,h){if(1&y&&(C.j41(0,"p",12)(1,"strong"),C.EFF(2,"Commentaire de r\xe9solution :"),C.k0s(),C.EFF(3),C.k0s()),2&y){let A;const I=C.XpG(2);C.R7$(3),C.SpI(" ",null==(A=I.singleSignalement())?null:A.resolutionComment," ")}}function St(y,h){if(1&y&&(C.j41(0,"ion-button",21),C.EFF(1," Mettre \xe0 jour le statut du signalement "),C.k0s(),C.nrm(2,"ion-action-sheet",22)),2&y){const A=C.XpG(2);C.R7$(2),C.Y8G("buttons",A.actionSheetButtonsUpdate)}}function ln(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-content")(1,"ion-card",0)(2,"ion-button",1),C.bIt("click",function(){C.eBV(A);const F=C.XpG();return C.Njj(F.goBack())}),C.EFF(3," Retour "),C.k0s(),C.j41(4,"swiper-container",2),C.Z7z(5,sd,2,2,"swiper-slide",null,C.fX1),C.k0s(),C.j41(7,"ion-card-header",3)(8,"ion-card-title",4),C.EFF(9),C.k0s(),C.j41(10,"ion-card-subtitle",5),C.EFF(11),C.nI1(12,"date"),C.k0s()(),C.j41(13,"ion-card-content",6)(14,"p",7),C.EFF(15),C.k0s(),C.j41(16,"p",8)(17,"strong"),C.EFF(18,"Lieu :"),C.k0s(),C.EFF(19),C.k0s(),C.j41(20,"p",8)(21,"strong"),C.EFF(22,"Cat\xe9gorie :"),C.k0s(),C.EFF(23),C.k0s(),C.j41(24,"p",9)(25,"strong"),C.EFF(26,"Confirm\xe9 par :"),C.k0s(),C.EFF(27),C.nrm(28,"ion-icon",10),C.k0s(),C.j41(29,"p",8)(30,"strong"),C.EFF(31,"Statut :"),C.k0s(),C.EFF(32),C.k0s(),C.DNE(33,Le,2,0,"ion-fab-button",11)(34,qe,4,1,"p",12),C.j41(35,"ion-label"),C.nrm(36,"div",13),C.k0s()(),C.j41(37,"div",14),C.DNE(38,St,3,1),C.j41(39,"ion-button",15),C.nrm(40,"ion-icon",16),C.k0s(),C.nrm(41,"ion-action-sheet",17),C.k0s()()()}if(2&y){let A,I,F,X,Me,$e,ze,ct,ot,pt;const Ct=C.XpG();C.R7$(4),C.Y8G("loop",!0)("pagination",!0),C.R7$(),C.Dyx(null==(A=Ct.singleSignalement())?null:A.images),C.R7$(4),C.SpI(" ",null==(I=Ct.singleSignalement())?null:I.title," "),C.R7$(2),C.SpI(" ",C.i5U(12,13,null==(F=Ct.singleSignalement())?null:F.date,"full")," "),C.R7$(4),C.SpI(" ",null==(X=Ct.singleSignalement())?null:X.content," "),C.R7$(4),C.SpI(" ",null==(Me=Ct.singleSignalement())?null:Me.location," "),C.R7$(4),C.SpI(" ",null==($e=Ct.singleSignalement())?null:$e.category," "),C.R7$(4),C.SpI(" ",null==(ze=Ct.singleSignalement())||null==ze.confirmedByUsers?null:ze.confirmedByUsers.length," utilisateur(s) "),C.R7$(5),C.SpI(" ",null==(ct=Ct.singleSignalement())?null:ct.status," "),C.R7$(),C.vxM(Ct.showConfimBtn()?33:-1),C.R7$(),C.vxM(null!=(ot=Ct.singleSignalement())&&ot.resolutionComment?34:-1),C.R7$(4),C.vxM("En cours"===(null==(pt=Ct.singleSignalement())?null:pt.status)?38:-1),C.R7$(3),C.Y8G("buttons",Ct.actionSheetButtonsRemove)}}const Gn=[{path:"",redirectTo:"liste",pathMatch:"full"},{path:"liste",component:kn},{path:"carte",component:uc},{path:":selectedSignalementId",component:(()=>{var y;class h{constructor(){this.router=(0,C.WQX)(re.Ix),this.locationService=(0,C.WQX)(Nr),this.toastService=(0,C.WQX)(gd),this.destroyRef=(0,C.WQX)(C.abz),this.signalementsService=(0,C.WQX)(ei.W),this.selectedSignalementId=(0,C.hFB)(),this.singleSignalement=(0,C.vPA)(void 0),this.isFetching=(0,C.vPA)(!1),this.error=(0,C.vPA)(""),this.showConfimBtn=(0,C.vPA)(!0),this.userId=this.signalementsService.userId(),this.location=(0,C.WQX)(yt.aZ),this.markers=[],this.signalement=(0,C.EWP)(()=>this.singleSignalement()),this.actionSheetButtonsUpdate=[{text:"Update",handler:()=>{this.updateSignalementStatus()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}],this.actionSheetButtonsRemove=[{text:"Remove",handler:()=>{this.removeSignalement()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}],(0,jt.a)({closeCircle:wt.P0k,camera:wt.UIk,send:wt.tN8,locateOutline:wt.jew,pin:wt.y_k,checkmarkCircle:wt.AUS,add:wt.WQq,trashOutline:wt.P1A,checkmarkDoneOutline:wt.u8Q})}confirmSignalement(){var I=this;return(0,Ut.A)(function*(){try{yield I.signalementsService.addConfirmation(I.selectedSignalementId(),I.userId),console.log("Confirmation added successfully")}catch(F){console.error("Error adding confirmation:",F)}})()}removeSignalement(){var I=this;return(0,Ut.A)(function*(){try{var F;yield I.signalementsService.deleteSignalement(I.selectedSignalementId(),null===(F=I.signalement())||void 0===F?void 0:F.recipient),yield I.signalementsService.loadSignalements(),I.router.navigate(["/signalements/liste"])}catch(X){I.toastService.presentToast("top","seulement les diestinarie sont autoris\xe9 a cloturer cette annonce"),console.error("Erreur lors de la suppression du signalement:",X)}})()}updateSignalementStatus(){var I=this;return(0,Ut.A)(function*(){try{var F;yield I.signalementsService.updateSignalementStatus(I.selectedSignalementId(),null===(F=I.signalement())||void 0===F?void 0:F.recipient),I.toastService.presentToast("top","le signalement a \xe9t\xe9 marqu\xe9 comme resolut")}catch(X){console.log(X),I.toastService.presentToast("top","seulement les diestinarie sont autoris\xe9 a changer le statut  cette annonce")}})()}ngOnInit(){this.isFetching.set(!0),this.signalementsService.getSignalementById(this.selectedSignalementId()).pipe(cc(this.destroyRef)).subscribe({next:I=>{this.singleSignalement.set(I),this.isFetching.set(!1),null!=I&&I.confirmedByUsers.includes(this.userId)&&this.showConfimBtn.set(!1)},error:I=>{console.log(I),this.error.set("chargement du signalement en cours...")}})}goBack(){document.referrer.includes("signalements/carte")?window.location.href="http://localhost:4200/signalements/carte":this.location.back()}ngAfterViewInit(){var I=this;return(0,Ut.A)(function*(){Cs().accessToken="pk.eyJ1IjoiZHpmdWxsc3RhY2tkZXYiLCJhIjoiY2x2eWJkejkzMjVodTJrbnlvaGs2c2Y0ZyJ9.IVAMRDDapDnAT7KWCYk4mA",yield I.locationService.getCurrentPosition(),I.signalementsService.getSignalementById(I.selectedSignalementId()).pipe(cc(I.destroyRef)).subscribe({next:X=>{I.map=new(Cs().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[null==X?void 0:X.coordinates.lng,null==X?void 0:X.coordinates.lat],zoom:10}),I.map.on("load",(0,Ut.A)(function*(){I.map.addSource("user-location",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[null==X?void 0:X.coordinates.lng,null==X?void 0:X.coordinates.lat]},properties:{}}}),I.map.addLayer({id:"user-location-circle",type:"circle",source:"user-location",paint:{"circle-radius":10,"circle-color":"#ff0000","circle-stroke-color":"#ffffff","circle-stroke-width":2}}),I.map.flyTo({center:[null==X?void 0:X.coordinates.lng,null==X?void 0:X.coordinates.lat],zoom:14,speed:1.5,curve:1,easing:Me=>Me})}))},error:X=>{console.log(X),I.error.set("Erreur lors du chargement du signalement.")}})})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signalement"]],inputs:{selectedSignalementId:[1,"selectedSignalementId"]},standalone:!0,features:[C.aNF],decls:1,vars:1,consts:[[2,"padding-top","4.5rem","position","relative","box-shadow","0px 4px 10px rgba(0, 0, 0, 0.1)","border-radius","15px","padding-bottom","3rem"],["routerLinkActive","router-link-active",2,"width","70px","height","40px","position","absolute","top","4rem","left","0rem","z-index","10000","background-color","#007bff","color","#fff","border-radius","8px","box-shadow","0px 2px 6px rgba(0, 0, 0, 0.2)",3,"click"],[3,"loop","pagination"],[2,"text-align","center"],[2,"font-size","1.5rem","font-weight","bold","margin-top","10px"],[2,"color","#666"],[2,"padding","1.5rem"],[2,"margin-bottom","1rem","font-size","1rem","color","#333"],[2,"margin-bottom","1rem","font-size","1rem","color","#666"],[2,"margin-bottom","1rem","font-size","1rem","color","#666","display","flex","align-items","center"],["name","checkmark-done-outline",2,"margin-left","0.5rem","color","#28a745"],[2,"color","#fff","box-shadow","0px 2px 6px rgba(0, 0, 0, 0.2)"],[2,"margin-top","1rem","color","#007bff"],["id","map",2,"height","100%","width","100%","min-height","300px","border-radius","15px"],[2,"position","fixed","bottom","0","left","0","width","100%","display","flex","z-index","999999"],["id","open-action-sheet-remove",2,"width","auto","background-color","#dc3545","color","#fff","border-radius","0"],["name","trash-outline"],["trigger","open-action-sheet-remove","header","Actions",3,"buttons"],[2,"height","100%","width","100%","object-fit","cover","border-radius","15px 15px 0 0",3,"alt","src"],[2,"color","#fff","box-shadow","0px 2px 6px rgba(0, 0, 0, 0.2)",3,"click"],["name","add"],["id","open-action-sheet",2,"flex","1","background-color","#ffc107","color","#fefefe","border-radius","0"],["trigger","open-action-sheet","header","Actions",3,"buttons"]],template:function(I,F){1&I&&C.DNE(0,ln,42,16,"ion-content"),2&I&&C.vxM(F.singleSignalement()?0:-1)},dependencies:[l.HW,l.b_,l.I9,l.tN,l.ME,l.he,yt.vh,yt.MD],styles:["#map[_ngcontent-%COMP%]{width:100%;height:300px;min-height:300px;border-radius:15px}.mapboxgl-canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important;min-height:300px;border-radius:15px}"]}),h})()}];var Mi=_e(1832),Li=_e(5407),ao=(_e(2214),_e(7852)),Ko=_e(1076),sr=_e(1362);const gr="firebasestorage.googleapis.com",Xr="storageBucket";class Vo extends Ko.g{constructor(h,A,I=0){super(Sa(h),`Firebase Storage: ${A} (${Sa(h)})`),this.status_=I,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vo.prototype)}get status(){return this.status_}set status(h){this.status_=h}_codeEquals(h){return Sa(h)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(h){this.customData.serverResponse=h,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var js=function(y){return y.UNKNOWN="unknown",y.OBJECT_NOT_FOUND="object-not-found",y.BUCKET_NOT_FOUND="bucket-not-found",y.PROJECT_NOT_FOUND="project-not-found",y.QUOTA_EXCEEDED="quota-exceeded",y.UNAUTHENTICATED="unauthenticated",y.UNAUTHORIZED="unauthorized",y.UNAUTHORIZED_APP="unauthorized-app",y.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",y.INVALID_CHECKSUM="invalid-checksum",y.CANCELED="canceled",y.INVALID_EVENT_NAME="invalid-event-name",y.INVALID_URL="invalid-url",y.INVALID_DEFAULT_BUCKET="invalid-default-bucket",y.NO_DEFAULT_BUCKET="no-default-bucket",y.CANNOT_SLICE_BLOB="cannot-slice-blob",y.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",y.NO_DOWNLOAD_URL="no-download-url",y.INVALID_ARGUMENT="invalid-argument",y.INVALID_ARGUMENT_COUNT="invalid-argument-count",y.APP_DELETED="app-deleted",y.INVALID_ROOT_OPERATION="invalid-root-operation",y.INVALID_FORMAT="invalid-format",y.INTERNAL_ERROR="internal-error",y.UNSUPPORTED_ENVIRONMENT="unsupported-environment",y}(js||{});function Sa(y){return"storage/"+y}function Tc(){return new Vo(js.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function cs(y){return new Vo(js.INVALID_ARGUMENT,y)}function _c(){return new Vo(js.APP_DELETED,"The Firebase app was deleted.")}function Dd(y,h){return new Vo(js.INVALID_FORMAT,"String does not match format '"+y+"': "+h)}function us(y){throw new Vo(js.INTERNAL_ERROR,"Internal error: "+y)}class ec{constructor(h,A){this.bucket=h,this.path_=A}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const h=encodeURIComponent;return"/b/"+h(this.bucket)+"/o/"+h(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(h,A){let I;try{I=ec.makeFromUrl(h,A)}catch{return new ec(h,"")}if(""===I.path)return I;throw function Uo(y){return new Vo(js.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+y+"'.")}(h)}static makeFromUrl(h,A){let I=null;const F="([A-Za-z0-9.\\-_]+)",$e=new RegExp("^gs://"+F+"(/(.*))?$","i");function ct(si){si.path_=decodeURIComponent(si.path)}const pt=A.replace(/[.]/g,"\\."),vn=[{regex:$e,indices:{bucket:1,path:3},postModify:function X(si){"/"===si.path.charAt(si.path.length-1)&&(si.path_=si.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${pt}/v[A-Za-z0-9_]+/b/${F}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ct},{regex:new RegExp(`^https?://${A===gr?"(?:storage.googleapis.com|storage.cloud.google.com)":A}/${F}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ct}];for(let si=0;si<vn.length;si++){const Si=vn[si],Qo=Si.regex.exec(h);if(Qo){let Bo=Qo[Si.indices.path];Bo||(Bo=""),I=new ec(Qo[Si.indices.bucket],Bo),Si.postModify(I);break}}if(null==I)throw function Zt(y){return new Vo(js.INVALID_URL,"Invalid URL '"+y+"'.")}(h);return I}}class vd{constructor(h){this.promise_=Promise.reject(h)}getPromise(){return this.promise_}cancel(h=!1){}}function dh(y){return"string"==typeof y||y instanceof String}function Eh(y){return _d()&&y instanceof Blob}function _d(){return typeof Blob<"u"}function pu(y,h,A,I){if(I<h)throw cs(`Invalid value for '${y}'. Expected ${h} or greater.`);if(I>A)throw cs(`Invalid value for '${y}'. Expected ${A} or less.`)}function dc(y,h,A){let I=h;return null==A&&(I=`https://${h}`),`${A}://${I}/v0${y}`}function Rc(y){const h=encodeURIComponent;let A="?";for(const I in y)y.hasOwnProperty(I)&&(A=A+(h(I)+"=")+h(y[I])+"&");return A=A.slice(0,-1),A}var Wd=function(y){return y[y.NO_ERROR=0]="NO_ERROR",y[y.NETWORK_ERROR=1]="NETWORK_ERROR",y[y.ABORT=2]="ABORT",y}(Wd||{});class ga{constructor(h,A,I,F,X,Me,$e,ze,ct,ot,pt,Ct=!0){this.url_=h,this.method_=A,this.headers_=I,this.body_=F,this.successCodes_=X,this.additionalRetryCodes_=Me,this.callback_=$e,this.errorCallback_=ze,this.timeout_=ct,this.progressCallback_=ot,this.connectionFactory_=pt,this.retry=Ct,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((sn,pn)=>{this.resolve_=sn,this.reject_=pn,this.start_()})}start_(){const A=(I,F)=>{const X=this.resolve_,Me=this.reject_,$e=F.connection;if(F.wasSuccessCode)try{const ze=this.callback_($e,$e.getResponse());!function xh(y){return void 0!==y}(ze)?X():X(ze)}catch(ze){Me(ze)}else if(null!==$e){const ze=Tc();ze.serverResponse=$e.getErrorText(),Me(this.errorCallback_?this.errorCallback_($e,ze):ze)}else Me(F.canceled?this.appDelete_?_c():function He(){return new Vo(js.CANCELED,"User canceled the upload/download.")}():function vt(){return new Vo(js.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?A(0,new a1(!1,null,!0)):this.backoffId_=function b0(y,h,A){let I=1,F=null,X=null,Me=!1,$e=0;function ze(){return 2===$e}let ct=!1;function ot(...yn){ct||(ct=!0,h.apply(null,yn))}function pt(yn){F=setTimeout(()=>{F=null,y(sn,ze())},yn)}function Ct(){X&&clearTimeout(X)}function sn(yn,...Rt){if(ct)return void Ct();if(yn)return Ct(),void ot.call(null,yn,...Rt);if(ze()||Me)return Ct(),void ot.call(null,yn,...Rt);let vn;I<64&&(I*=2),1===$e?($e=2,vn=0):vn=1e3*(I+Math.random()),pt(vn)}let pn=!1;function gn(yn){pn||(pn=!0,Ct(),!ct&&(null!==F?(yn||($e=2),clearTimeout(F),pt(0)):yn||($e=1)))}return pt(0),X=setTimeout(()=>{Me=!0,gn(!0)},A),gn}((I,F)=>{if(F)return void I(!1,new a1(!1,null,!0));const X=this.connectionFactory_();this.pendingConnection_=X;const Me=$e=>{null!==this.progressCallback_&&this.progressCallback_($e.loaded,$e.lengthComputable?$e.total:-1)};null!==this.progressCallback_&&X.addUploadProgressListener(Me),X.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&X.removeUploadProgressListener(Me),this.pendingConnection_=null;const $e=X.getErrorCode()===Wd.NO_ERROR,ze=X.getStatus();if(!$e||function ks(y,h){const A=y>=500&&y<600,F=-1!==[408,429].indexOf(y),X=-1!==h.indexOf(y);return A||F||X}(ze,this.additionalRetryCodes_)&&this.retry){const ot=X.getErrorCode()===Wd.ABORT;return void I(!1,new a1(!1,null,ot))}const ct=-1!==this.successCodes_.indexOf(ze);I(!0,new a1(ct,X))})},A,this.timeout_)}getPromise(){return this.promise_}cancel(h){this.canceled_=!0,this.appDelete_=h||!1,null!==this.backoffId_&&function uh(y){y(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class a1{constructor(h,A,I){this.wasSuccessCode=h,this.connection=A,this.canceled=!!I}}function j0(...y){const h=function Ls(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==h){const A=new h;for(let I=0;I<y.length;I++)A.append(y[I]);return A.getBlob()}if(_d())return new Blob(y);throw new Vo(js.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ku={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hh{constructor(h,A){this.data=h,this.contentType=A||null}}function Pd(y,h){switch(y){case ku.RAW:return new Hh(bc(h));case ku.BASE64:case ku.BASE64URL:return new Hh(Xs(y,h));case ku.DATA_URL:return new Hh(function Rr(y){const h=new E0(y);return h.base64?Xs(ku.BASE64,h.rest):function qd(y){let h;try{h=decodeURIComponent(y)}catch{throw Dd(ku.DATA_URL,"Malformed data URL.")}return bc(h)}(h.rest)}(h),function yd(y){return new E0(y).contentType}(h))}throw Tc()}function bc(y){const h=[];for(let A=0;A<y.length;A++){let I=y.charCodeAt(A);I<=127?h.push(I):I<=2047?h.push(192|I>>6,128|63&I):55296==(64512&I)?A<y.length-1&&56320==(64512&y.charCodeAt(A+1))?(I=65536|(1023&I)<<10|1023&y.charCodeAt(++A),h.push(240|I>>18,128|I>>12&63,128|I>>6&63,128|63&I)):h.push(239,191,189):56320==(64512&I)?h.push(239,191,189):h.push(224|I>>12,128|I>>6&63,128|63&I)}return new Uint8Array(h)}function Xs(y,h){switch(y){case ku.BASE64:{const F=-1!==h.indexOf("-"),X=-1!==h.indexOf("_");if(F||X)throw Dd(y,"Invalid character '"+(F?"-":"_")+"' found: is it base64url encoded?");break}case ku.BASE64URL:{const F=-1!==h.indexOf("+"),X=-1!==h.indexOf("/");if(F||X)throw Dd(y,"Invalid character '"+(F?"+":"/")+"' found: is it base64 encoded?");h=h.replace(/-/g,"+").replace(/_/g,"/");break}}let A;try{A=function Bl(y){if(typeof atob>"u")throw function Xa(y){return new Vo(js.UNSUPPORTED_ENVIRONMENT,`${y} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(y)}(h)}catch(F){throw F.message.includes("polyfill")?F:Dd(y,"Invalid character found")}const I=new Uint8Array(A.length);for(let F=0;F<A.length;F++)I[F]=A.charCodeAt(F);return I}class E0{constructor(h){this.base64=!1,this.contentType=null;const A=h.match(/^data:([^,]+)?,/);if(null===A)throw Dd(ku.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const I=A[1]||null;null!=I&&(this.base64=function Rd(y,h){return y.length>=h.length&&y.substring(y.length-h.length)===h}(I,";base64"),this.contentType=this.base64?I.substring(0,I.length-7):I),this.rest=h.substring(h.indexOf(",")+1)}}class cl{constructor(h,A){let I=0,F="";Eh(h)?(this.data_=h,I=h.size,F=h.type):h instanceof ArrayBuffer?(A?this.data_=new Uint8Array(h):(this.data_=new Uint8Array(h.byteLength),this.data_.set(new Uint8Array(h))),I=this.data_.length):h instanceof Uint8Array&&(A?this.data_=h:(this.data_=new Uint8Array(h.length),this.data_.set(h)),I=h.length),this.size_=I,this.type_=F}size(){return this.size_}type(){return this.type_}slice(h,A){if(Eh(this.data_)){const F=function I0(y,h,A){return y.webkitSlice?y.webkitSlice(h,A):y.mozSlice?y.mozSlice(h,A):y.slice?y.slice(h,A):null}(this.data_,h,A);return null===F?null:new cl(F)}{const I=new Uint8Array(this.data_.buffer,h,A-h);return new cl(I,!0)}}static getBlob(...h){if(_d()){const A=h.map(I=>I instanceof cl?I.data_:I);return new cl(j0.apply(null,A))}{const A=h.map(Me=>dh(Me)?Pd(ku.RAW,Me).data:Me.data_);let I=0;A.forEach(Me=>{I+=Me.byteLength});const F=new Uint8Array(I);let X=0;return A.forEach(Me=>{for(let $e=0;$e<Me.length;$e++)F[X++]=Me[$e]}),new cl(F,!0)}}uploadData(){return this.data_}}function fu(y){let h;try{h=JSON.parse(y)}catch{return null}return function Cu(y){return"object"==typeof y&&!Array.isArray(y)}(h)?h:null}function Ce(y){const h=y.lastIndexOf("/",y.length-2);return-1===h?y:y.slice(h+1)}function Nt(y,h){return h}class Ie{constructor(h,A,I,F){this.server=h,this.local=A||h,this.writable=!!I,this.xform=F||Nt}}let Gt=null;function pi(){if(Gt)return Gt;const y=[];y.push(new Ie("bucket")),y.push(new Ie("generation")),y.push(new Ie("metageneration")),y.push(new Ie("name","fullPath",!0));const A=new Ie("name");A.xform=function h(X,Me){return function Dn(y){return!dh(y)||y.length<2?y:Ce(y)}(Me)},y.push(A);const F=new Ie("size");return F.xform=function I(X,Me){return void 0!==Me?Number(Me):Me},y.push(F),y.push(new Ie("timeCreated")),y.push(new Ie("updated")),y.push(new Ie("md5Hash",null,!0)),y.push(new Ie("cacheControl",null,!0)),y.push(new Ie("contentDisposition",null,!0)),y.push(new Ie("contentEncoding",null,!0)),y.push(new Ie("contentLanguage",null,!0)),y.push(new Ie("contentType",null,!0)),y.push(new Ie("metadata","customMetadata",!0)),Gt=y,Gt}function na(y,h,A){const I=fu(h);return null===I?null:function fs(y,h,A){const I={type:"file"},F=A.length;for(let X=0;X<F;X++){const Me=A[X];I[Me.local]=Me.xform(I,h[Me.server])}return function ir(y,h){Object.defineProperty(y,"ref",{get:function A(){const X=new ec(y.bucket,y.fullPath);return h._makeStorageReference(X)}})}(I,y),I}(y,I,A)}class ul{constructor(h,A,I,F){this.url=h,this.method=A,this.handler=I,this.timeout=F,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ma(y){if(!y)throw Tc()}function wc(y){return function h(A,I){let F;return F=401===A.getStatus()?A.getErrorText().includes("Firebase App Check token is invalid")?function Xe(){return new Vo(js.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function ya(){return new Vo(js.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===A.getStatus()?function Ll(y){return new Vo(js.QUOTA_EXCEEDED,"Quota for bucket '"+y+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(y.bucket):403===A.getStatus()?function Se(y){return new Vo(js.UNAUTHORIZED,"User does not have permission to access '"+y+"'.")}(y.path):I,F.status=A.getStatus(),F.serverResponse=I.serverResponse,F}}function zc(y,h,A,I,F){const X=h.bucketOnlyServerUrl(),Me={"X-Goog-Upload-Protocol":"multipart"},ze=function $e(){let vn="";for(let si=0;si<2;si++)vn+=Math.random().toString().slice(2);return vn}();Me["Content-Type"]="multipart/related; boundary="+ze;const ct=function cd(y,h,A){const I=Object.assign({},A);return I.fullPath=y.path,I.size=h.size(),I.contentType||(I.contentType=function Fl(y,h){return y&&y.contentType||h&&h.type()||"application/octet-stream"}(null,h)),I}(h,I,F),ot=function $r(y,h){const A={},I=h.length;for(let F=0;F<I;F++){const X=h[F];X.writable&&(A[X.server]=y[X.local])}return JSON.stringify(A)}(ct,A),sn=cl.getBlob("--"+ze+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ot+"\r\n--"+ze+"\r\nContent-Type: "+ct.contentType+"\r\n\r\n",I,"\r\n--"+ze+"--");if(null===sn)throw function Wa(){return new Vo(js.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}();const pn={name:ct.fullPath},gn=dc(X,y.host,y._protocol),Rt=y.maxUploadRetryTime,Bn=new ul(gn,"POST",function Ta(y,h){return function A(I,F){const X=na(y,F,h);return ma(null!==X),X}}(y,A),Rt);return Bn.urlParams=pn,Bn.headers=Me,Bn.body=sn.uploadData(),Bn.errorHandler=wc(h),Bn}let xd=null;class C0{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wd.NO_ERROR,this.sendPromise_=new Promise(h=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wd.ABORT,h()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wd.NETWORK_ERROR,h()}),this.xhr_.addEventListener("load",()=>{h()})})}send(h,A,I,F){if(this.sent_)throw us("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(A,h,!0),void 0!==F)for(const X in F)F.hasOwnProperty(X)&&this.xhr_.setRequestHeader(X,F[X].toString());return void 0!==I?this.xhr_.send(I):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw us("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw us("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw us("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw us("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(h){return this.xhr_.getResponseHeader(h)}addUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",h)}removeUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",h)}}class $s extends C0{initXhr(){this.xhr_.responseType="text"}}function Tu(){return xd?xd():new $s}class gu{constructor(h,A){this._service=h,this._location=A instanceof ec?A:ec.makeFromUrl(A,h.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(h,A){return new gu(h,A)}get root(){const h=new ec(this._location.bucket,"");return this._newRef(this._service,h)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ce(this._location.path)}get storage(){return this._service}get parent(){const h=function Su(y){if(0===y.length)return null;const h=y.lastIndexOf("/");return-1===h?"":y.slice(0,h)}(this._location.path);if(null===h)return null;const A=new ec(this._location.bucket,h);return new gu(this._service,A)}_throwIfRoot(h){if(""===this._location.path)throw function ch(y){return new Vo(js.INVALID_ROOT_OPERATION,"The operation '"+y+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(h)}}function Od(y){y._throwIfRoot("getDownloadURL");const h=function tc(y,h,A){const F=dc(h.fullServerUrl(),y.host,y._protocol),Me=y.maxOperationRetryTime,$e=new ul(F,"GET",function Ka(y,h){return function A(I,F){const X=na(y,F,h);return ma(null!==X),function Ws(y,h,A,I){const F=fu(h);if(null===F||!dh(F.downloadTokens))return null;const X=F.downloadTokens;if(0===X.length)return null;const Me=encodeURIComponent;return X.split(",").map(ct=>{const pt=y.fullPath;return dc("/b/"+Me(y.bucket)+"/o/"+Me(pt),A,I)+Rc({alt:"media",token:ct})})[0]}(X,F,y.host,y._protocol)}}(y,A),Me);return $e.errorHandler=function Ya(y){const h=wc(y);return function A(I,F){let X=h(I,F);return 404===I.getStatus()&&(X=function Sl(y){return new Vo(js.OBJECT_NOT_FOUND,"Object '"+y+"' does not exist.")}(y.path)),X.serverResponse=F.serverResponse,X}}(h),$e}(y.storage,y._location,pi());return y.storage.makeRequestWithTokens(h,Tu).then(A=>{if(null===A)throw function Pc(){return new Vo(js.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return A})}function Z(y,h){if(y instanceof Be){const A=y;if(null==A._bucket)throw function Tr(){return new Vo(js.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Xr+"' property when initializing the app?")}();const I=new gu(A,A._bucket);return null!=h?Z(I,h):I}return void 0!==h?function Id(y,h){const A=function fe(y,h){const A=h.split("/").filter(I=>I.length>0).join("/");return 0===y.length?A:y+"/"+A}(y._location.path,h),I=new ec(y._location.bucket,A);return new gu(y.storage,I)}(y,h):y}function ke(y,h){const A=null==h?void 0:h[Xr];return null==A?null:ec.makeFromBucketSpec(A,y)}class Be{constructor(h,A,I,F,X){this.app=h,this._authProvider=A,this._appCheckProvider=I,this._url=F,this._firebaseVersion=X,this._bucket=null,this._host=gr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=F?ec.makeFromBucketSpec(F,this._host):ke(this._host,this.app.options)}get host(){return this._host}set host(h){this._host=h,this._bucket=null!=this._url?ec.makeFromBucketSpec(this._url,h):ke(h,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(h){pu("time",0,Number.POSITIVE_INFINITY,h),this._maxUploadRetryTime=h}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(h){pu("time",0,Number.POSITIVE_INFINITY,h),this._maxOperationRetryTime=h}_getAuthToken(){var h=this;return(0,Ut.A)(function*(){if(h._overrideAuthToken)return h._overrideAuthToken;const A=h._authProvider.getImmediate({optional:!0});if(A){const I=yield A.getToken();if(null!==I)return I.accessToken}return null})()}_getAppCheckToken(){var h=this;return(0,Ut.A)(function*(){const A=h._appCheckProvider.getImmediate({optional:!0});return A?(yield A.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(h=>h.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(h){return new gu(this,h)}_makeRequest(h,A,I,F,X=!0){if(this._deleted)return new vd(_c());{const Me=function yc(y,h,A,I,F,X,Me=!0){const $e=Rc(y.urlParams),ze=y.url+$e,ct=Object.assign({},y.headers);return function $0(y,h){h&&(y["X-Firebase-GMPID"]=h)}(ct,h),function w0(y,h){null!==h&&h.length>0&&(y.Authorization="Firebase "+h)}(ct,A),function x0(y,h){y["X-Firebase-Storage-Version"]="webjs/"+(null!=h?h:"AppManager")}(ct,X),function ll(y,h){null!==h&&(y["X-Firebase-AppCheck"]=h)}(ct,I),new ga(ze,y.method,ct,y.body,y.successCodes,y.additionalRetryCodes,y.handler,y.errorHandler,y.timeout,y.progressCallback,F,Me)}(h,this._appId,I,F,A,this._firebaseVersion,X);return this._requests.add(Me),Me.getPromise().then(()=>this._requests.delete(Me),()=>this._requests.delete(Me)),Me}}makeRequestWithTokens(h,A){var I=this;return(0,Ut.A)(function*(){const[F,X]=yield Promise.all([I._getAuthToken(),I._getAppCheckToken()]);return I._makeRequest(h,A,F,X).getPromise()})()}}const Mt="@firebase/storage",Ci="storage";function or(y,h,A,I){return function H0(y,h,A=ku.RAW,I){y._throwIfRoot("uploadString");const F=Pd(A,h),X=Object.assign({},I);return null==X.contentType&&null!=F.contentType&&(X.contentType=F.contentType),function nc(y,h,A){y._throwIfRoot("uploadBytes");const I=zc(y.storage,y._location,pi(),new cl(h,!0),A);return y.storage.makeRequestWithTokens(I,Tu).then(F=>({metadata:F,ref:y}))}(y,F.data,X)}(y=(0,Ko.Ku)(y),h,A,I)}function pc(y){return Od(y=(0,Ko.Ku)(y))}function $l(y,h){return function me(y,h){if(h&&function $c(y){return/^[A-Za-z]+:\/\//.test(y)}(h)){if(y instanceof Be)return function Xh(y,h){return new gu(y,h)}(y,h);throw cs("To use ref(service, url), the first argument must be a Storage instance.")}return Z(y,h)}(y=(0,Ko.Ku)(y),h)}function Jc(y=(0,ao.Sx)(),h){y=(0,Ko.Ku)(y);const I=(0,ao.j6)(y,Ci).getImmediate({identifier:h}),F=(0,Ko.yU)("storage");return F&&function Mu(y,h,A,I={}){!function ge(y,h,A,I={}){y.host=`${h}:${A}`,y._protocol="http";const{mockUserToken:F}=I;F&&(y._overrideAuthToken="string"==typeof F?F:(0,Ko.Fy)(F,y.app.options.projectId))}(y,h,A,I)}(I,...F),I}function vu(y,{instanceIdentifier:h}){const A=y.getProvider("app").getImmediate(),I=y.getProvider("auth-internal"),F=y.getProvider("app-check-internal");return new Be(A,I,F,h,ao.MF)}!function Nf(){(0,ao.om)(new sr.uA(Ci,vu,"PUBLIC").setMultipleInstances(!0)),(0,ao.KO)(Mt,"0.12.6",""),(0,ao.KO)(Mt,"0.12.6","esm2017")}();const Ah=(0,Li.S3)(pc,!0),yl=(0,Li.S3)(Jc,!0),Z1=(0,Li.S3)($l,!0),Q1=(0,Li.S3)(or,!0);var Yd=function(y){return y.Prompt="PROMPT",y.Camera="CAMERA",y.Photos="PHOTOS",y}(Yd||{}),Rh=function(y){return y.Rear="REAR",y.Front="FRONT",y}(Rh||{}),M1=function(y){return y.Uri="uri",y.Base64="base64",y.DataUrl="dataUrl",y}(M1||{});class Il extends ea.E_{getPhoto(h){var A=this;return(0,Ut.A)(function*(){return new Promise(function(){var I=(0,Ut.A)(function*(F,X){if(h.webUseInput||h.source===Yd.Photos)A.fileInputExperience(h,F,X);else if(h.source===Yd.Prompt){let Me=document.querySelector("pwa-action-sheet");Me||(Me=document.createElement("pwa-action-sheet"),document.body.appendChild(Me)),Me.header=h.promptLabelHeader||"Photo",Me.cancelable=!1,Me.options=[{title:h.promptLabelPhoto||"From Photos"},{title:h.promptLabelPicture||"Take Picture"}],Me.addEventListener("onSelection",function(){var $e=(0,Ut.A)(function*(ze){0===ze.detail?A.fileInputExperience(h,F,X):A.cameraExperience(h,F,X)});return function(ze){return $e.apply(this,arguments)}}())}else A.cameraExperience(h,F,X)});return function(F,X){return I.apply(this,arguments)}}())})()}pickImages(h){var A=this;return(0,Ut.A)(function*(){return new Promise(function(){var I=(0,Ut.A)(function*(F,X){A.multipleFileInputExperience(F,X)});return function(F,X){return I.apply(this,arguments)}}())})()}cameraExperience(h,A,I){var F=this;return(0,Ut.A)(function*(){if(customElements.get("pwa-camera-modal")){const X=document.createElement("pwa-camera-modal");X.facingMode=h.direction===Rh.Front?"user":"environment",document.body.appendChild(X);try{yield X.componentOnReady(),X.addEventListener("onPhoto",function(){var Me=(0,Ut.A)(function*($e){const ze=$e.detail;null===ze?I(new ea.I9("User cancelled photos app")):ze instanceof Error?I(ze):A(yield F._getCameraPhoto(ze,h)),X.dismiss(),document.body.removeChild(X)});return function($e){return Me.apply(this,arguments)}}()),X.present()}catch{F.fileInputExperience(h,A,I)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),F.fileInputExperience(h,A,I)})()}fileInputExperience(h,A,I){let F=document.querySelector("#_capacitor-camera-input");const X=()=>{var Me;null===(Me=F.parentNode)||void 0===Me||Me.removeChild(F)};F||(F=document.createElement("input"),F.id="_capacitor-camera-input",F.type="file",F.hidden=!0,document.body.appendChild(F),F.addEventListener("change",Me=>{const $e=F.files[0];let ze="jpeg";if("image/png"===$e.type?ze="png":"image/gif"===$e.type&&(ze="gif"),"dataUrl"===h.resultType||"base64"===h.resultType){const ct=new FileReader;ct.addEventListener("load",()=>{if("dataUrl"===h.resultType)A({dataUrl:ct.result,format:ze});else if("base64"===h.resultType){const ot=ct.result.split(",")[1];A({base64String:ot,format:ze})}X()}),ct.readAsDataURL($e)}else A({webPath:URL.createObjectURL($e),format:ze}),X()}),F.addEventListener("cancel",Me=>{I(new ea.I9("User cancelled photos app")),X()})),F.accept="image/*",F.capture=!0,h.source===Yd.Photos||h.source===Yd.Prompt?F.removeAttribute("capture"):h.direction===Rh.Front?F.capture="user":h.direction===Rh.Rear&&(F.capture="environment"),F.click()}multipleFileInputExperience(h,A){let I=document.querySelector("#_capacitor-camera-input-multiple");const F=()=>{var X;null===(X=I.parentNode)||void 0===X||X.removeChild(I)};I||(I=document.createElement("input"),I.id="_capacitor-camera-input-multiple",I.type="file",I.hidden=!0,I.multiple=!0,document.body.appendChild(I),I.addEventListener("change",X=>{const Me=[];for(let $e=0;$e<I.files.length;$e++){const ze=I.files[$e];let ct="jpeg";"image/png"===ze.type?ct="png":"image/gif"===ze.type&&(ct="gif"),Me.push({webPath:URL.createObjectURL(ze),format:ct})}h({photos:Me}),F()}),I.addEventListener("cancel",X=>{A(new ea.I9("User cancelled photos app")),F()})),I.accept="image/*",I.click()}_getCameraPhoto(h,A){return new Promise((I,F)=>{const X=new FileReader,Me=h.type.split("/")[1];"uri"===A.resultType?I({webPath:URL.createObjectURL(h),format:Me,saved:!1}):(X.readAsDataURL(h),X.onloadend=()=>{const $e=X.result;I("dataUrl"===A.resultType?{dataUrl:$e,format:Me,saved:!1}:{base64String:$e.split(",")[1],format:Me,saved:!1})},X.onerror=$e=>{F($e)})})}checkPermissions(){var h=this;return(0,Ut.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw h.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw h.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var h=this;return(0,Ut.A)(function*(){throw h.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var h=this;return(0,Ut.A)(function*(){throw h.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var h=this;return(0,Ut.A)(function*(){throw h.unavailable("Not implemented on web.")})()}}new Il;const ds=(0,ea.F3)("Camera",{web:()=>new Il});let Xl=(()=>{var y;class h{constructor(){this.photos=[],this.convertBlobToBase64=I=>new Promise((F,X)=>{const Me=new FileReader;Me.onerror=X,Me.onload=()=>{F(Me.result)},Me.readAsDataURL(I)})}addNewToGallery(){var I=this;return(0,Ut.A)(function*(){const F=yield ds.getPhoto({resultType:M1.Uri,source:Yd.Camera,quality:100}),X=yield I.savePicture(F);return I.photos.unshift(X),X})()}savePicture(I){var F=this;return(0,Ut.A)(function*(){const X=yield F.readAsBase64(I),Me=yl(),$e=`${(new Date).getTime()}.jpeg`,ze=Z1(Me,`photos/${$e}`),ct=yield Q1(ze,X,"data_url"),ot=yield Ah(ct.ref);return{filepath:ze.fullPath,webviewPath:ot}})()}readAsBase64(I){var F=this;return(0,Ut.A)(function*(){const Me=yield(yield fetch(I.webPath)).blob();return yield F.convertBlobToBase64(Me)})()}removePhoto(I){I>-1&&this.photos.splice(I,1)}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})();function gh(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-item")(1,"ion-checkbox",6),C.bIt("ionChange",function(F){C.eBV(A);const X=C.XpG();return C.Njj(X.checkboxChange(F))}),C.EFF(2),C.k0s()()}if(2&y){const A=h.$implicit,I=C.XpG();C.R7$(),C.Y8G("value",A.value)("checked",I.isChecked(A.value)),C.R7$(),C.JRh(A.text)}}let il=(()=>{var y;class h{constructor(){this.items=[],this.selectedItems=[],this.title="Select Items",this.selectionCancel=new C.bkB,this.selectionChange=new C.bkB,this.filteredItems=[],this.workingSelectedValues=[]}ngOnInit(){this.filteredItems=[...this.items],this.workingSelectedValues=[...this.selectedItems]}trackItems(I,F){return F.value}cancelChanges(){this.selectionCancel.emit()}confirmChanges(){this.selectionChange.emit(this.workingSelectedValues)}searchbarInput(I){this.filterList(I.target.value)}filterList(I){if(void 0===I)this.filteredItems=[...this.items];else{const F=I.toLowerCase();this.filteredItems=this.items.filter(X=>X.text.toLowerCase().includes(F))}}isChecked(I){return this.workingSelectedValues.find(F=>F===I)}checkboxChange(I){const{checked:F,value:X}=I.detail;this.workingSelectedValues=F?[...this.workingSelectedValues,X]:this.workingSelectedValues.filter(Me=>Me!==X)}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-typehead"]],inputs:{items:"items",selectedItems:"selectedItems",title:"title"},outputs:{selectionCancel:"selectionCancel",selectionChange:"selectionChange"},standalone:!0,features:[C.aNF],decls:16,vars:2,consts:[["slot","start"],[3,"click"],["slot","end"],[3,"ionInput"],["color","light",1,"ion-padding"],["id","modal-list",3,"inset"],[3,"ionChange","value","checked"]],template:function(I,F){1&I&&(C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),C.bIt("click",function(){return F.cancelChanges()}),C.EFF(4,"Cancel"),C.k0s()(),C.j41(5,"ion-title"),C.EFF(6),C.k0s(),C.j41(7,"ion-buttons",2)(8,"ion-button",1),C.bIt("click",function(){return F.confirmChanges()}),C.EFF(9,"Done"),C.k0s()()(),C.j41(10,"ion-toolbar")(11,"ion-searchbar",3),C.bIt("ionInput",function(Me){return F.searchbarInput(Me)}),C.k0s()()(),C.j41(12,"ion-content",4)(13,"ion-list",5),C.Z7z(14,gh,3,3,"ion-item",null,C.fX1),C.k0s()()),2&I&&(C.R7$(6),C.JRh(F.title),C.R7$(7),C.Y8G("inset",!0),C.R7$(),C.Dyx(F.filteredItems))},dependencies:[l.BC,l.S1,l.nf,l.uz,l.eY,l.W9,l.ai,l.Jm,l.QW,l.eU,yt.MD]}),h})();var fc=_e(7673),Bd=_e(8455),$a=_e(274),ol=_e(5964),mc=_e(6354),Fs=_e(980),Zd=_e(5558);class Qh{}class hd{}class ja{constructor(h){this.normalizedNames=new Map,this.lazyUpdate=null,h?"string"==typeof h?this.lazyInit=()=>{this.headers=new Map,h.split("\n").forEach(A=>{const I=A.indexOf(":");if(I>0){const F=A.slice(0,I),X=F.toLowerCase(),Me=A.slice(I+1).trim();this.maybeSetNormalizedName(F,X),this.headers.has(X)?this.headers.get(X).push(Me):this.headers.set(X,[Me])}})}:typeof Headers<"u"&&h instanceof Headers?(this.headers=new Map,h.forEach((A,I)=>{this.setHeaderEntries(I,A)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(h).forEach(([A,I])=>{this.setHeaderEntries(A,I)})}:this.headers=new Map}has(h){return this.init(),this.headers.has(h.toLowerCase())}get(h){this.init();const A=this.headers.get(h.toLowerCase());return A&&A.length>0?A[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(h){return this.init(),this.headers.get(h.toLowerCase())||null}append(h,A){return this.clone({name:h,value:A,op:"a"})}set(h,A){return this.clone({name:h,value:A,op:"s"})}delete(h,A){return this.clone({name:h,value:A,op:"d"})}maybeSetNormalizedName(h,A){this.normalizedNames.has(A)||this.normalizedNames.set(A,h)}init(){this.lazyInit&&(this.lazyInit instanceof ja?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(h=>this.applyUpdate(h)),this.lazyUpdate=null))}copyFrom(h){h.init(),Array.from(h.headers.keys()).forEach(A=>{this.headers.set(A,h.headers.get(A)),this.normalizedNames.set(A,h.normalizedNames.get(A))})}clone(h){const A=new ja;return A.lazyInit=this.lazyInit&&this.lazyInit instanceof ja?this.lazyInit:this,A.lazyUpdate=(this.lazyUpdate||[]).concat([h]),A}applyUpdate(h){const A=h.name.toLowerCase();switch(h.op){case"a":case"s":let I=h.value;if("string"==typeof I&&(I=[I]),0===I.length)return;this.maybeSetNormalizedName(h.name,A);const F=("a"===h.op?this.headers.get(A):void 0)||[];F.push(...I),this.headers.set(A,F);break;case"d":const X=h.value;if(X){let Me=this.headers.get(A);if(!Me)return;Me=Me.filter($e=>-1===X.indexOf($e)),0===Me.length?(this.headers.delete(A),this.normalizedNames.delete(A)):this.headers.set(A,Me)}else this.headers.delete(A),this.normalizedNames.delete(A)}}setHeaderEntries(h,A){const I=(Array.isArray(A)?A:[A]).map(X=>X.toString()),F=h.toLowerCase();this.headers.set(F,I),this.maybeSetNormalizedName(h,F)}forEach(h){this.init(),Array.from(this.normalizedNames.keys()).forEach(A=>h(this.normalizedNames.get(A),this.headers.get(A)))}}class jl{encodeKey(h){return zh(h)}encodeValue(h){return zh(h)}decodeKey(h){return decodeURIComponent(h)}decodeValue(h){return decodeURIComponent(h)}}const d1=/%(\d[a-f0-9])/gi,A1={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zh(y){return encodeURIComponent(y).replace(d1,(h,A)=>{var I;return null!==(I=A1[A])&&void 0!==I?I:h})}function Jd(y){return`${y}`}class Lc{constructor(h={}){if(this.updates=null,this.cloneFrom=null,this.encoder=h.encoder||new jl,h.fromString){if(h.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function vh(y,h){const A=new Map;return y.length>0&&y.replace(/^\?/,"").split("&").forEach(F=>{const X=F.indexOf("="),[Me,$e]=-1==X?[h.decodeKey(F),""]:[h.decodeKey(F.slice(0,X)),h.decodeValue(F.slice(X+1))],ze=A.get(Me)||[];ze.push($e),A.set(Me,ze)}),A}(h.fromString,this.encoder)}else h.fromObject?(this.map=new Map,Object.keys(h.fromObject).forEach(A=>{const I=h.fromObject[A],F=Array.isArray(I)?I.map(Jd):[Jd(I)];this.map.set(A,F)})):this.map=null}has(h){return this.init(),this.map.has(h)}get(h){this.init();const A=this.map.get(h);return A?A[0]:null}getAll(h){return this.init(),this.map.get(h)||null}keys(){return this.init(),Array.from(this.map.keys())}append(h,A){return this.clone({param:h,value:A,op:"a"})}appendAll(h){const A=[];return Object.keys(h).forEach(I=>{const F=h[I];Array.isArray(F)?F.forEach(X=>{A.push({param:I,value:X,op:"a"})}):A.push({param:I,value:F,op:"a"})}),this.clone(A)}set(h,A){return this.clone({param:h,value:A,op:"s"})}delete(h,A){return this.clone({param:h,value:A,op:"d"})}toString(){return this.init(),this.keys().map(h=>{const A=this.encoder.encodeKey(h);return this.map.get(h).map(I=>A+"="+this.encoder.encodeValue(I)).join("&")}).filter(h=>""!==h).join("&")}clone(h){const A=new Lc({encoder:this.encoder});return A.cloneFrom=this.cloneFrom||this,A.updates=(this.updates||[]).concat(h),A}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(h=>this.map.set(h,this.cloneFrom.map.get(h))),this.updates.forEach(h=>{switch(h.op){case"a":case"s":const A=("a"===h.op?this.map.get(h.param):void 0)||[];A.push(Jd(h.value)),this.map.set(h.param,A);break;case"d":if(void 0===h.value){this.map.delete(h.param);break}{let I=this.map.get(h.param)||[];const F=I.indexOf(Jd(h.value));-1!==F&&I.splice(F,1),I.length>0?this.map.set(h.param,I):this.map.delete(h.param)}}}),this.cloneFrom=this.updates=null)}}class Oh{constructor(){this.map=new Map}set(h,A){return this.map.set(h,A),this}get(h){return this.map.has(h)||this.map.set(h,h.defaultValue()),this.map.get(h)}delete(h){return this.map.delete(h),this}has(h){return this.map.has(h)}keys(){return this.map.keys()}}function Wu(y){return typeof ArrayBuffer<"u"&&y instanceof ArrayBuffer}function R0(y){return typeof Blob<"u"&&y instanceof Blob}function Lh(y){return typeof FormData<"u"&&y instanceof FormData}class Nd{constructor(h,A,I,F){var X,Me;let $e;if(this.url=A,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=h.toUpperCase(),function q0(y){switch(y){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||F?(this.body=void 0!==I?I:null,$e=F):$e=I,$e&&(this.reportProgress=!!$e.reportProgress,this.withCredentials=!!$e.withCredentials,$e.responseType&&(this.responseType=$e.responseType),$e.headers&&(this.headers=$e.headers),$e.context&&(this.context=$e.context),$e.params&&(this.params=$e.params),this.transferCache=$e.transferCache),null!==(X=this.headers)&&void 0!==X||(this.headers=new ja),null!==(Me=this.context)&&void 0!==Me||(this.context=new Oh),this.params){const ze=this.params.toString();if(0===ze.length)this.urlWithParams=A;else{const ct=A.indexOf("?");this.urlWithParams=A+(-1===ct?"?":ct<A.length-1?"&":"")+ze}}else this.params=new Lc,this.urlWithParams=A}serializeBody(){return null===this.body?null:"string"==typeof this.body||Wu(this.body)||R0(this.body)||Lh(this.body)||function Kl(y){return typeof URLSearchParams<"u"&&y instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Lc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Lh(this.body)?null:R0(this.body)?this.body.type||null:Wu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Lc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(h={}){var A,I,F,X;const Me=h.method||this.method,$e=h.url||this.url,ze=h.responseType||this.responseType,ct=null!==(A=h.transferCache)&&void 0!==A?A:this.transferCache,ot=void 0!==h.body?h.body:this.body,pt=null!==(I=h.withCredentials)&&void 0!==I?I:this.withCredentials,Ct=null!==(F=h.reportProgress)&&void 0!==F?F:this.reportProgress;let sn=h.headers||this.headers,pn=h.params||this.params;const gn=null!==(X=h.context)&&void 0!==X?X:this.context;return void 0!==h.setHeaders&&(sn=Object.keys(h.setHeaders).reduce((yn,Rt)=>yn.set(Rt,h.setHeaders[Rt]),sn)),h.setParams&&(pn=Object.keys(h.setParams).reduce((yn,Rt)=>yn.set(Rt,h.setParams[Rt]),pn)),new Nd(Me,$e,ot,{params:pn,headers:sn,context:gn,reportProgress:Ct,responseType:ze,withCredentials:pt,transferCache:ct})}}var rl=function(y){return y[y.Sent=0]="Sent",y[y.UploadProgress=1]="UploadProgress",y[y.ResponseHeader=2]="ResponseHeader",y[y.DownloadProgress=3]="DownloadProgress",y[y.Response=4]="Response",y[y.User=5]="User",y}(rl||{});class Bc{constructor(h,A=200,I="OK"){this.headers=h.headers||new ja,this.status=void 0!==h.status?h.status:A,this.statusText=h.statusText||I,this.url=h.url||null,this.ok=this.status>=200&&this.status<300}}class Fd extends Bc{constructor(h={}){super(h),this.type=rl.ResponseHeader}clone(h={}){return new Fd({headers:h.headers||this.headers,status:void 0!==h.status?h.status:this.status,statusText:h.statusText||this.statusText,url:h.url||this.url||void 0})}}class pd extends Bc{constructor(h={}){super(h),this.type=rl.Response,this.body=void 0!==h.body?h.body:null}clone(h={}){return new pd({body:void 0!==h.body?h.body:this.body,headers:h.headers||this.headers,status:void 0!==h.status?h.status:this.status,statusText:h.statusText||this.statusText,url:h.url||this.url||void 0})}}class _h extends Bc{constructor(h){super(h,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${h.url||"(unknown url)"}`:`Http failure response for ${h.url||"(unknown url)"}: ${h.status} ${h.statusText}`,this.error=h.error||null}}function b(y,h){return{body:h,headers:y.headers,context:y.context,observe:y.observe,params:y.params,reportProgress:y.reportProgress,responseType:y.responseType,withCredentials:y.withCredentials,transferCache:y.transferCache}}let M=(()=>{var y;class h{constructor(I){this.handler=I}request(I,F,X={}){let Me;if(I instanceof Nd)Me=I;else{let ct,ot;ct=X.headers instanceof ja?X.headers:new ja(X.headers),X.params&&(ot=X.params instanceof Lc?X.params:new Lc({fromObject:X.params})),Me=new Nd(I,F,void 0!==X.body?X.body:null,{headers:ct,context:X.context,params:ot,reportProgress:X.reportProgress,responseType:X.responseType||"json",withCredentials:X.withCredentials,transferCache:X.transferCache})}const $e=(0,fc.of)(Me).pipe((0,$a.H)(ct=>this.handler.handle(ct)));if(I instanceof Nd||"events"===X.observe)return $e;const ze=$e.pipe((0,ol.p)(ct=>ct instanceof pd));switch(X.observe||"body"){case"body":switch(Me.responseType){case"arraybuffer":return ze.pipe((0,mc.T)(ct=>{if(null!==ct.body&&!(ct.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ct.body}));case"blob":return ze.pipe((0,mc.T)(ct=>{if(null!==ct.body&&!(ct.body instanceof Blob))throw new Error("Response is not a Blob.");return ct.body}));case"text":return ze.pipe((0,mc.T)(ct=>{if(null!==ct.body&&"string"!=typeof ct.body)throw new Error("Response is not a string.");return ct.body}));default:return ze.pipe((0,mc.T)(ct=>ct.body))}case"response":return ze;default:throw new Error(`Unreachable: unhandled observe type ${X.observe}}`)}}delete(I,F={}){return this.request("DELETE",I,F)}get(I,F={}){return this.request("GET",I,F)}head(I,F={}){return this.request("HEAD",I,F)}jsonp(I,F){return this.request("JSONP",I,{params:(new Lc).append(F,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(I,F={}){return this.request("OPTIONS",I,F)}patch(I,F,X={}){return this.request("PATCH",I,b(X,F))}post(I,F,X={}){return this.request("POST",I,b(X,F))}put(I,F,X={}){return this.request("PUT",I,b(X,F))}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(Qh))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();const R=/^\)\]\}',?\n/;function H(y){if(y.url)return y.url;const h="X-Request-URL".toLocaleLowerCase();return y.headers.get(h)}let ee=(()=>{var y;class h{constructor(){var I,F;this.fetchImpl=null!==(I=null===(F=(0,C.WQX)(se,{optional:!0}))||void 0===F?void 0:F.fetch)&&void 0!==I?I:fetch.bind(globalThis),this.ngZone=(0,C.WQX)(C.SKi)}handle(I){return new Yr.c(F=>{const X=new AbortController;return this.doRequest(I,X.signal,F).then(he,Me=>F.error(new _h({error:Me}))),()=>X.abort()})}doRequest(I,F,X){var Me=this;return(0,Ut.A)(function*(){var $e;const ze=Me.createRequestInit(I);let ct;try{const vn=Me.ngZone.runOutsideAngular(()=>Me.fetchImpl(I.urlWithParams,{signal:F,...ze}));(function ye(y){y.then(he,he)})(vn),X.next({type:rl.Sent}),ct=yield vn}catch(vn){var ot;return void X.error(new _h({error:vn,status:null!==(ot=vn.status)&&void 0!==ot?ot:0,statusText:vn.statusText,url:I.urlWithParams,headers:vn.headers}))}const pt=new ja(ct.headers),Ct=ct.statusText,sn=null!==($e=H(ct))&&void 0!==$e?$e:I.urlWithParams;let pn=ct.status,gn=null;if(I.reportProgress&&X.next(new Fd({headers:pt,status:pn,statusText:Ct,url:sn})),ct.body){const vn=ct.headers.get("content-length"),si=[],Si=ct.body.getReader();let ur,Bo,Qo=0;const no=typeof Zone<"u"&&Zone.current;yield Me.ngZone.runOutsideAngular((0,Ut.A)(function*(){for(;;){const{done:ho,value:Ro}=yield Si.read();if(ho)break;if(si.push(Ro),Qo+=Ro.length,I.reportProgress){var Jo,mo;Bo="text"===I.responseType?(null!==(Jo=Bo)&&void 0!==Jo?Jo:"")+(null!==(mo=ur)&&void 0!==mo?mo:ur=new TextDecoder).decode(Ro,{stream:!0}):void 0;const fr=()=>X.next({type:rl.DownloadProgress,total:vn?+vn:void 0,loaded:Qo,partialText:Bo});no?no.run(fr):fr()}}}));const To=Me.concatChunks(si,Qo);try{var yn;const Jo=null!==(yn=ct.headers.get("Content-Type"))&&void 0!==yn?yn:"";gn=Me.parseBody(I,To,Jo)}catch(Jo){var Rt;return void X.error(new _h({error:Jo,headers:new ja(ct.headers),status:ct.status,statusText:ct.statusText,url:null!==(Rt=H(ct))&&void 0!==Rt?Rt:I.urlWithParams}))}}0===pn&&(pn=gn?200:0),pn>=200&&pn<300?(X.next(new pd({body:gn,headers:pt,status:pn,statusText:Ct,url:sn})),X.complete()):X.error(new _h({error:gn,headers:pt,status:pn,statusText:Ct,url:sn}))})()}parseBody(I,F,X){switch(I.responseType){case"json":const Me=(new TextDecoder).decode(F).replace(R,"");return""===Me?null:JSON.parse(Me);case"text":return(new TextDecoder).decode(F);case"blob":return new Blob([F],{type:X});case"arraybuffer":return F.buffer}}createRequestInit(I){const F={},X=I.withCredentials?"include":void 0;if(I.headers.forEach((Me,$e)=>F[Me]=$e.join(",")),I.headers.has("Accept")||(F.Accept="application/json, text/plain, */*"),!I.headers.has("Content-Type")){const Me=I.detectContentTypeHeader();null!==Me&&(F["Content-Type"]=Me)}return{body:I.serializeBody(),method:I.method,headers:F,credentials:X}}concatChunks(I,F){const X=new Uint8Array(F);let Me=0;for(const $e of I)X.set($e,Me),Me+=$e.length;return X}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();class se{}function he(){}function Pe(y,h){return h(y)}const tt=new C.nKC(""),rt=new C.nKC(""),Pt=new C.nKC("",{providedIn:"root",factory:()=>!0});let en=(()=>{var y;class h extends Qh{constructor(I,F){super(),this.backend=I,this.injector=F,this.chain=null,this.pendingTasks=(0,C.WQX)(C.TgB),this.contributeToStability=(0,C.WQX)(Pt)}handle(I){if(null===this.chain){const F=Array.from(new Set([...this.injector.get(tt),...this.injector.get(rt,[])]));this.chain=F.reduceRight((X,Me)=>function Qe(y,h,A){return(I,F)=>(0,C.N4e)(A,()=>h(I,X=>y(X,F)))}(X,Me,this.injector),Pe)}if(this.contributeToStability){const F=this.pendingTasks.add();return this.chain(I,X=>this.backend.handle(X)).pipe((0,Fs.j)(()=>this.pendingTasks.remove(F)))}return this.chain(I,F=>this.backend.handle(F))}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(hd),C.KVO(C.uvJ))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();const L=/^\)\]\}',?\n/;let oe=(()=>{var y;class h{constructor(I){this.xhrFactory=I}handle(I){if("JSONP"===I.method)throw new C.wOt(-2800,!1);const F=this.xhrFactory;return(F.\u0275loadImpl?(0,Bd.H)(F.\u0275loadImpl()):(0,fc.of)(null)).pipe((0,Zd.n)(()=>new Yr.c(Me=>{const $e=F.build();if($e.open(I.method,I.urlWithParams),I.withCredentials&&($e.withCredentials=!0),I.headers.forEach((yn,Rt)=>$e.setRequestHeader(yn,Rt.join(","))),I.headers.has("Accept")||$e.setRequestHeader("Accept","application/json, text/plain, */*"),!I.headers.has("Content-Type")){const yn=I.detectContentTypeHeader();null!==yn&&$e.setRequestHeader("Content-Type",yn)}if(I.responseType){const yn=I.responseType.toLowerCase();$e.responseType="json"!==yn?yn:"text"}const ze=I.serializeBody();let ct=null;const ot=()=>{if(null!==ct)return ct;const yn=$e.statusText||"OK",Rt=new ja($e.getAllResponseHeaders()),Bn=function j(y){return"responseURL"in y&&y.responseURL?y.responseURL:/^X-Request-URL:/m.test(y.getAllResponseHeaders())?y.getResponseHeader("X-Request-URL"):null}($e)||I.url;return ct=new Fd({headers:Rt,status:$e.status,statusText:yn,url:Bn}),ct},pt=()=>{let{headers:yn,status:Rt,statusText:Bn,url:vn}=ot(),si=null;204!==Rt&&(si=typeof $e.response>"u"?$e.responseText:$e.response),0===Rt&&(Rt=si?200:0);let Si=Rt>=200&&Rt<300;if("json"===I.responseType&&"string"==typeof si){const Qo=si;si=si.replace(L,"");try{si=""!==si?JSON.parse(si):null}catch(ur){si=Qo,Si&&(Si=!1,si={error:ur,text:si})}}Si?(Me.next(new pd({body:si,headers:yn,status:Rt,statusText:Bn,url:vn||void 0})),Me.complete()):Me.error(new _h({error:si,headers:yn,status:Rt,statusText:Bn,url:vn||void 0}))},Ct=yn=>{const{url:Rt}=ot(),Bn=new _h({error:yn,status:$e.status||0,statusText:$e.statusText||"Unknown Error",url:Rt||void 0});Me.error(Bn)};let sn=!1;const pn=yn=>{sn||(Me.next(ot()),sn=!0);let Rt={type:rl.DownloadProgress,loaded:yn.loaded};yn.lengthComputable&&(Rt.total=yn.total),"text"===I.responseType&&$e.responseText&&(Rt.partialText=$e.responseText),Me.next(Rt)},gn=yn=>{let Rt={type:rl.UploadProgress,loaded:yn.loaded};yn.lengthComputable&&(Rt.total=yn.total),Me.next(Rt)};return $e.addEventListener("load",pt),$e.addEventListener("error",Ct),$e.addEventListener("timeout",Ct),$e.addEventListener("abort",Ct),I.reportProgress&&($e.addEventListener("progress",pn),null!==ze&&$e.upload&&$e.upload.addEventListener("progress",gn)),$e.send(ze),Me.next({type:rl.Sent}),()=>{$e.removeEventListener("error",Ct),$e.removeEventListener("abort",Ct),$e.removeEventListener("load",pt),$e.removeEventListener("timeout",Ct),I.reportProgress&&($e.removeEventListener("progress",pn),null!==ze&&$e.upload&&$e.upload.removeEventListener("progress",gn)),$e.readyState!==$e.DONE&&$e.abort()}})))}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(yt.N0))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();const Ve=new C.nKC(""),cn=new C.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Qn=new C.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Wn{}let Wi=(()=>{var y;class h{constructor(I,F,X){this.doc=I,this.platform=F,this.cookieName=X,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const I=this.doc.cookie||"";return I!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,yt._b)(I,this.cookieName),this.lastCookieString=I),this.lastToken}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(yt.qQ),C.KVO(C.Agw),C.KVO(cn))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();function vr(y,h){const A=y.url.toLowerCase();if(!(0,C.WQX)(Ve)||"GET"===y.method||"HEAD"===y.method||A.startsWith("http://")||A.startsWith("https://"))return h(y);const I=(0,C.WQX)(Wn).getToken(),F=(0,C.WQX)(Qn);return null!=I&&!y.headers.has(F)&&(y=y.clone({headers:y.headers.set(F,I)})),h(y)}const Nh_mapbox_accessToken="pk.eyJ1IjoiZHpmdWxsc3RhY2tkZXYiLCJhIjoiY2x2eWJkejkzMjVodTJrbnlvaGs2c2Y0ZyJ9.IVAMRDDapDnAT7KWCYk4mA",Nh_firebaseConfig={apiKey:"AIzaSyCV-vExmckUfc3t0mAOrtOOIUpnvkDUw2Y",authDomain:"urbanecho-dcb01.firebaseapp.com",projectId:"urbanecho-dcb01",storageBucket:"urbanecho-dcb01.appspot.com",messagingSenderId:"681789095193",appId:"1:681789095193:web:d2dd5f9add0fb9b5be5988"};let wl=(()=>{var y;class h{constructor(){this.address=[],this.mapboxToken="pk.eyJ1IjoiZHpmdWxsc3RhY2tkZXYiLCJhIjoiY2x6b21oYmtxMHlpbjJrcXdxZzQ3ZW9meSJ9.tLI1_4tHGZbLMdLtyopXdw",this.http=(0,C.WQX)(M)}search_word(I){return this.http.get("https://api.mapbox.com/geocoding/v5/mapbox.places/"+I+".json?types=address&access_token="+Nh_mapbox_accessToken).pipe((0,mc.T)(X=>X.features))}getAdresseFromCoords(I,F){return this.http.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${F},${I}.json?types=address&access_token=${Nh_mapbox_accessToken}`).pipe((0,mc.T)(Me=>Me))}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})();const qu=["modal"],Pu=["form"];function el(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2," Veuillez fournir le titre de votre signalement."),C.k0s()())}function J1(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-item",30),C.bIt("click",function(){const F=C.eBV(A).$implicit,X=C.XpG(2);return C.Njj(X.onSelect(F))}),C.nrm(1,"ion-icon",31),C.j41(2,"p"),C.EFF(3),C.k0s()()}if(2&y){const A=h.$implicit;C.R7$(3),C.JRh(A)}}function ep(y,h){if(1&y&&(C.j41(0,"ion-list",28),C.DNE(1,J1,4,1,"ion-item",29),C.k0s()),2&y){const A=C.XpG();C.R7$(),C.Y8G("ngForOf",A.Alladresses)}}function sl(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2," Veuillez fournir l'adresse du lieu de signalement."),C.k0s()())}function va(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2,"Veuillez choisir le type de signalement."),C.k0s()())}function yh(y,h){if(1&y){const A=C.RV6();C.j41(0,"app-typehead",32),C.bIt("selectionChange",function(F){C.eBV(A);const X=C.XpG();return C.Njj(X.DestinatairesSelectionChanged(F))})("selectionCancel",function(){C.eBV(A),C.XpG();const F=C.sdS(34);return C.Njj(F.dismiss())}),C.k0s()}if(2&y){const A=C.XpG();C.Y8G("items",A.categories)("selectedItems",A.selectedDestinataires())}}function Xu(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2," Veuillez choisir le destinataire du signalement."),C.k0s()())}function Ip(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2," Veuillez fournir la description de votre signalement (maximum 1000 caract\xe8res)."),C.k0s()())}function Fh(y,h){if(1&y){const A=C.RV6();C.qex(0),C.j41(1,"ion-col",33),C.nrm(2,"ion-img",34),C.j41(3,"ion-button",22),C.bIt("click",function(){const F=C.eBV(A).index,X=C.XpG();return C.Njj(X.removePhoto(F))}),C.nrm(4,"ion-icon",35),C.k0s()(),C.bVm()}if(2&y){const A=h.$implicit;C.R7$(2),C.Y8G("src",A.webviewPath)}}function _u(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2,"Veuillez fournir au moins une photo."),C.k0s()())}const h1=[{path:"",redirectTo:"signalements/liste",pathMatch:"full"},{path:"signalements",component:At,children:Gn},{path:"signaler",component:(()=>{var y;class h{get Alladresses(){return this.mapboxService.address}get titlesInvalid(){return this.formSubmitted&&this.signalementForm.controls.title.invalid}get contentIsInvalid(){return this.formSubmitted&&this.signalementForm.controls.content.invalid}get addressIsInvalid(){return this.formSubmitted&&this.signalementForm.controls.address.invalid}get selectedTypeIsInvalid(){return this.formSubmitted&&this.signalementForm.controls.selectedType.invalid}get recipientTypeIsInvalid(){return this.formSubmitted&&this.selectedDestinataires().length<1}constructor(){this.signalementsService=(0,C.WQX)(ei.W),this.router=(0,C.WQX)(re.Ix),this.photoService=(0,C.WQX)(Xl),this.locationService=(0,C.WQX)(Nr),this.mapboxService=(0,C.WQX)(wl),this.destroyRef=(0,C.WQX)(C.abz),this.loadingController=(0,C.WQX)(Yn),this.toasService=(0,C.WQX)(gd),this.formSubmitted=!1,this.categories=Mi.L,this.destinatairesSelections="aucun",this.selectedDestinataires=(0,C.vPA)([]),this.signalementPosition=(0,C.vPA)({lat:0,lng:0}),this.signalementForm=new on.gE({title:new on.MJ("",[on.k0.required]),content:new on.MJ("",[on.k0.required,on.k0.maxLength(1e3)]),address:new on.MJ("",[on.k0.required]),selectedType:new on.MJ("",[on.k0.required]),photos:new on.Yp([],[on.k0.required])}),(0,jt.a)({closeCircle:wt.P0k,camera:wt.UIk,send:wt.tN8,locateOutline:wt.jew,pin:wt.y_k})}get photos(){return this.signalementForm.get("photos")}formatData(I){if(1===I.length){const F=this.categories.find(X=>X.value===I[0]);return null==F?void 0:F.text}return`${I.length} destinataires`}DestinatairesSelectionChanged(I){this.selectedDestinataires.set(I),this.destinatairesSelections=this.formatData(this.selectedDestinataires()),console.log("categorie choisi par moi",this.selectedDestinataires()),this.modal.dismiss()}addPhoto(){var I=this;return(0,Ut.A)(function*(){const F=yield I.presentLoading();try{yield I.openCamera();const X=yield I.photoService.addNewToGallery();if(X){const Me=new on.MJ(X.webviewPath,on.k0.required);I.photos.push(Me)}else console.log("L'utilisateur a refus\xe9 l'acc\xe8s \xe0 la cam\xe9ra ou une erreur s'est produite"),I.toasService.presentToast("top","L'acc\xe8s \xe0 la cam\xe9ra a \xe9t\xe9 refus\xe9 ou une erreur s'est produite")}catch(X){console.error("Erreur lors de l'ajout de la photo :",X),I.toasService.presentToast("top","Erreur lors de l'ajout de la photo")}finally{yield F.dismiss()}})()}openCamera(){var I=this;return(0,Ut.A)(function*(){try{yield navigator.mediaDevices.getUserMedia({video:!0}),console.log("Cam\xe9ra accessible")}catch(F){console.error("Erreur lors de l'acc\xe8s \xe0 la cam\xe9ra : ",F),I.toasService.presentToast("top","Erreur lors de l'acc\xe8s \xe0 la cam\xe9ra")}})()}removePhoto(I){this.photoService.removePhoto(I)}getCurrentLocation(){var I=this;return(0,Ut.A)(function*(){I.signalementForm.controls.address.setValue("");const F=yield I.locationService.getCurrentPosition();if(F){console.log("this is my position : ",F),I.signalementPosition.set({lat:F.latitude,lng:F.longitude});const X=I.mapboxService.getAdresseFromCoords(F.latitude,F.longitude).subscribe({next:Me=>{var $e;const ze=null===($e=Me.features[0])||void 0===$e?void 0:$e.place_name;console.log(ze,"as place name"),I.signalementForm.controls.address.setValue(ze)},error:Me=>{console.error("Erreur lors de la r\xe9cup\xe9ration de l'adresse:",Me)}});I.destroyRef.onDestroy(()=>{X.unsubscribe()})}})()}search(I){var F=this;return(0,Ut.A)(function*(){const X=I.target.value.toLowerCase();if(X&&X.length>0){const Me=F.mapboxService.search_word(X).subscribe({next:$e=>{F.mapboxService.address=$e.map(ze=>ze.place_name)}});F.destroyRef.onDestroy(()=>{Me.unsubscribe()})}else F.mapboxService.address=[]})()}onSelect(I){var F=this;return(0,Ut.A)(function*(){F.signalementForm.controls.address.setValue(I),F.mapboxService.address=[];const X=yield F.locationService.getCurrentPosition();X&&(console.log("this is my position : ",X),F.signalementPosition.set({lat:X.latitude,lng:X.longitude}))})()}onFormSubmit(){var I=this;return(0,Ut.A)(function*(){if(I.formSubmitted=!0,I.signalementForm.invalid)return;const F={id:"",title:I.signalementForm.value.title,location:I.signalementForm.value.address,date:(new Date).toISOString(),images:I.signalementForm.value.photos,content:I.signalementForm.value.content,coordinates:I.signalementPosition(),category:I.signalementForm.value.selectedType,recipient:I.selectedDestinataires(),status:"En cours",resolutionComment:"",confirmedByUsers:[],userId:I.signalementsService.userId()};console.log("this is my signalement location",F);try{yield I.signalementsService.addSignalement(F),yield I.signalementsService.loadSignalements(),I.toasService.presentToast("top","Signalement ajout\xe9 avec succ\xe8s"),console.log("Signalement ajout\xe9 avec succ\xe8s"),I.router.navigate(["/signalements/liste"])}catch(X){console.error("Erreur lors de l'ajout du signalement:",X),I.toasService.presentToast("top","Erreur lors de l'ajout du signalement")}I.signalementForm.reset(),I.selectedDestinataires.set([]),I.destinatairesSelections="aucun",I.photoService.photos=[]})()}get photosAreInvalid(){return this.formSubmitted&&0===this.photos.controls.length}presentLoading(){var I=this;return(0,Ut.A)(function*(){const F=yield I.loadingController.create({message:"Chargement..."});return yield F.present(),F})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signaler"]],viewQuery:function(I,F){if(1&I&&(C.GBs(qu,7),C.GBs(Pu,5)),2&I){let X;C.mGM(X=C.lsd())&&(F.modal=X.first),C.mGM(X=C.lsd())&&(F.form=X.first)}},standalone:!0,features:[C.aNF],decls:54,vars:12,consts:[["modal",""],[1,"formulaire"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","title","placeholder","Comportement raciste d'un vendeur"],[1,"error-message"],[2,"position","relative","display","flex","align-items","center"],["debounce","500","formControlName","address",2,"width","95%","position","relative",3,"ionInput","value"],["color","primary-contrast",1,"location-btn",3,"click"],["color","primary","slot","icon-only","name","locate-outline"],[2,"position","absolute","top","100%","width","100%","z-index","999"],["lines","none",4,"ngIf"],["placeholder","Choisir le Type de Signalement","formControlName","selectedType","name","typeSignalement","interface","action-sheet"],["value","comportement","name","comportement"],["value","incident","name","incident"],["button","true","detail","false","id","select-destinataires"],["slot","end","id","Destinataires","name","recipient"],["trigger","select-destinataires"],["placeholder","Veuillez fournir la description de votre signalement (maximum 100 caract\xe8res).","formControlName","content","autoGrow","true",3,"clearOnEdit"],[4,"ngFor","ngForOf"],[1,"fixed-bottom-buttons"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","camera"],["vertical","bottom","horizontal","end","slot","fixed"],["type","submit"],["name","send"],[1,"show"],["lines","none"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["name","pin"],["title","Destinataires",1,"ion-page",3,"selectionChange","selectionCancel","items","selectedItems"],["size","6"],[3,"src"],["slot","icon-only","name","close-circle","shape","circle"]],template:function(I,F){if(1&I){const X=C.RV6();C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),C.EFF(3,"Ajouter un Signalement"),C.k0s()()(),C.j41(4,"ion-content",1)(5,"form",2),C.bIt("ngSubmit",function(){return C.eBV(X),C.Njj(F.onFormSubmit())}),C.j41(6,"ion-item")(7,"ion-label",3),C.EFF(8,"Titre"),C.k0s(),C.nrm(9,"ion-input",4),C.k0s(),C.DNE(10,el,3,0,"div",5),C.j41(11,"ion-grid")(12,"ion-row")(13,"ion-col")(14,"div",6)(15,"ion-searchbar",7),C.bIt("ionInput",function($e){return C.eBV(X),C.Njj(F.search($e))}),C.k0s(),C.j41(16,"ion-button",8),C.bIt("click",function(){return C.eBV(X),C.Njj(F.getCurrentLocation())}),C.nrm(17,"ion-icon",9),C.k0s(),C.j41(18,"div",10),C.DNE(19,ep,2,1,"ion-list",11),C.k0s()(),C.DNE(20,sl,3,0,"div",5),C.k0s()()(),C.j41(21,"ion-item")(22,"ion-select",12)(23,"ion-select-option",13),C.EFF(24," Comportement "),C.k0s(),C.j41(25,"ion-select-option",14),C.EFF(26," Incident "),C.k0s()()(),C.DNE(27,va,3,0,"div",5),C.j41(28,"ion-item",15)(29,"ion-label"),C.EFF(30,"Destinataires"),C.k0s(),C.j41(31,"div",16),C.EFF(32),C.k0s()(),C.j41(33,"ion-modal",17,0),C.DNE(35,yh,1,2,"ng-template"),C.k0s(),C.DNE(36,Xu,3,0,"div",5),C.j41(37,"ion-item")(38,"ion-label",3),C.EFF(39,"Contenu"),C.k0s(),C.nrm(40,"ion-textarea",18),C.k0s(),C.DNE(41,Ip,3,0,"div",5),C.j41(42,"ion-item")(43,"ion-grid")(44,"ion-row"),C.DNE(45,Fh,5,1,"ng-container",19),C.k0s(),C.DNE(46,_u,3,0,"div",5),C.k0s()(),C.j41(47,"div",20)(48,"ion-fab",21)(49,"ion-fab-button",22),C.bIt("click",function(){return C.eBV(X),C.Njj(F.addPhoto())}),C.nrm(50,"ion-icon",23),C.k0s()(),C.j41(51,"ion-fab",24)(52,"ion-button",25),C.nrm(53,"ion-icon",26),C.k0s()()()()()}2&I&&(C.R7$(5),C.Y8G("formGroup",F.signalementForm),C.R7$(5),C.vxM(F.titlesInvalid?10:-1),C.R7$(5),C.Y8G("value",F.signalementForm.controls.address.value),C.R7$(4),C.Y8G("ngIf",F.Alladresses.length>0),C.R7$(),C.vxM(F.addressIsInvalid?20:-1),C.R7$(7),C.vxM(F.selectedTypeIsInvalid?27:-1),C.R7$(5),C.SpI(" ",F.destinatairesSelections," "),C.R7$(4),C.vxM(F.recipientTypeIsInvalid?36:-1),C.R7$(4),C.Y8G("clearOnEdit",!0),C.R7$(),C.vxM(F.contentIsInvalid?41:-1),C.R7$(4),C.Y8G("ngForOf",F.photoService.photos),C.R7$(),C.vxM(F.photosAreInvalid?46:-1))},dependencies:[l.lO,l.hU,l.ln,l.YW,l.Q8,l.iq,l.S1,l.KW,l.Jm,l.nc,l.nf,l.ai,l.uz,l.W9,l.he,l.BC,l.eU,l.$w,on.YN,on.qT,on.BC,on.cb,l.Nm,l.Ip,l.Sb,il,yt.MD,yt.Sq,yt.bT,on.X1,on.j4,on.JD],styles:['@charset "UTF-8";ion-thumbnail[_ngcontent-%COMP%]{margin-right:10px}ion-img[_ngcontent-%COMP%]{object-fit:cover;width:50px;height:50px}.fixed-bottom-buttons[_ngcontent-%COMP%]{position:fixed;bottom:1rem;width:100%;display:flex;justify-content:space-between;padding:0 1rem;box-sizing:border-box;z-index:10}.location-btn[_ngcontent-%COMP%]{cursor:pointer;height:30px}.error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;margin-top:10px;text-align:center;opacity:0;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out forwards}.error-message[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}']}),h})()},{path:"auth",component:(()=>{var y;class h{constructor(){this.authPageTitle=C.hFB.required()}ngOnInit(){}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-authentification"]],inputs:{authPageTitle:[1,"authPageTitle"]},standalone:!0,features:[C.aNF],decls:6,vars:0,consts:[["onMounte",""]],template:function(I,F){1&I&&(C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),C.EFF(3," Authentification"),C.k0s()()(),C.j41(4,"ion-content"),C.nrm(5,"router-outlet"),C.k0s())},dependencies:[l.eU,l.ai,l.W9,l.BC,re.n3]}),h})(),children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>Promise.all([_e.e(2076),_e.e(5508)]).then(_e.bind(_e,5508)).then(y=>y.LoginPage)},{path:"signup",loadComponent:()=>Promise.all([_e.e(2076),_e.e(3453)]).then(_e.bind(_e,3453)).then(y=>y.SignupPage)},{path:"password-reset",loadComponent:()=>_e.e(7867).then(_e.bind(_e,7867)).then(y=>y.PasswordResetPage)}]},{path:"profile",component:(()=>{var y;class h{constructor(){this.authService=(0,C.WQX)(Mn.u),this.signalementsService=(0,C.WQX)(ei.W),this.router=(0,C.WQX)(re.Ix),this.userName="",this.userEmail="",this.userCategory="",(0,jt.a)({addOutline:wt.EKF,searchOutline:wt.jBE,playCircle:wt.Jns,radio:wt.Ow_,library:wt.Yvo,search:wt.$P,personOutline:wt.wAZ,listOutline:wt.PFj,idCardOutline:wt.O0q,logOutOutline:wt.z_V,notificationsOutline:wt.rqk})}ngOnInit(){const I=this.authService.getCurrentUser();I&&(this.userName=I.displayName||"Utilisateur",this.userEmail=I.email||"Email non disponible")}goToNotifications(){this.router.navigate(["/notifications"])}logout(){var I=this;return(0,Ut.A)(function*(){yield I.authService.logout(),yield I.signalementsService.loadSignalements(),I.router.navigate(["/"])})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-profile"]],standalone:!0,features:[C.aNF],decls:26,vars:3,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","notifications-outline"],["slot","icon-only","name","log-out-outline"]],template:function(I,F){1&I&&(C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),C.EFF(3,"Profil"),C.k0s(),C.j41(4,"ion-buttons",0)(5,"ion-button",1),C.bIt("click",function(){return F.goToNotifications()}),C.nrm(6,"ion-icon",2),C.k0s(),C.j41(7,"ion-button",1),C.bIt("click",function(){return F.logout()}),C.nrm(8,"ion-icon",3),C.k0s()()()(),C.j41(9,"ion-content")(10,"ion-card")(11,"ion-card-header")(12,"ion-card-title"),C.EFF(13),C.k0s()(),C.j41(14,"ion-card-content")(15,"ion-list")(16,"ion-item")(17,"ion-label"),C.EFF(18,"Email"),C.k0s(),C.j41(19,"ion-text"),C.EFF(20),C.k0s()(),C.j41(21,"ion-item")(22,"ion-label"),C.EFF(23,"Cat\xe9gorie"),C.k0s(),C.j41(24,"ion-text"),C.EFF(25),C.k0s()()()()()()),2&I&&(C.R7$(13),C.SpI("Bonjour, ",F.userName,""),C.R7$(7),C.JRh(F.userEmail),C.R7$(5),C.JRh(F.userCategory))},dependencies:[l.iq,l.Jm,l.QW,l.BC,l.ai,l.he,l.tN,l.b_,l.IO,l.uz,l.nf,l.I9,l.ME,l.W9,l.eU]}),h})(),canActivate:[(()=>{var y;class h{constructor(I,F){this.authService=I,this.router=F}canActivate(){const I=this.authService.userSignal();return!(!I||I.isAnonymous)||(this.router.navigate(["/auth/login"]),!1)}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(Mn.u),C.KVO(re.Ix))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})()]},{path:"**",component:(()=>{var y;class h{constructor(){}ngOnInit(){}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-not-found"]],standalone:!0,features:[C.aNF],decls:9,vars:0,consts:[[1,"full-page"],["src","assets/not-found.svg","alt","not found"],["routerLink","/"]],template:function(I,F){1&I&&(C.j41(0,"div",0)(1,"div"),C.nrm(2,"img",1),C.j41(3,"h1"),C.EFF(4,"Page Not Found"),C.k0s(),C.j41(5,"p"),C.EFF(6,"we can't seem to find the page you're looking for"),C.k0s(),C.j41(7,"a",2),C.EFF(8,"Back Home"),C.k0s()()())},dependencies:[re.Wk],styles:[".full-page[_ngcontent-%COMP%]{min-height:100vh;text-align:center;display:flex;justify-content:center;align-items:center}img[_ngcontent-%COMP%]{max-width:600px;display:block;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin-bottom:.5rem}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem;color:#5b5d60}a[_ngcontent-%COMP%]{color:#e86060;text-decoration:underline;text-transform:capitalize}"]}),h})()}];function af(y){return null!==y&&"object"==typeof y&&"constructor"in y&&y.constructor===Object}function kd(y,h){void 0===y&&(y={}),void 0===h&&(h={}),Object.keys(h).forEach(A=>{typeof y[A]>"u"?y[A]=h[A]:af(h[A])&&af(y[A])&&Object.keys(h[A]).length>0&&kd(y[A],h[A])})}const Vh={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Hc(){const y=typeof document<"u"?document:{};return kd(y,Vh),y}const Vf={document:Vh,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:y=>typeof setTimeout>"u"?(y(),null):setTimeout(y,0),cancelAnimationFrame(y){typeof setTimeout>"u"||clearTimeout(y)}};function xc(){const y=typeof window<"u"?window:{};return kd(y,Vf),y}function z0(y){return void 0===y&&(y=""),y.trim().split(" ").filter(h=>!!h.trim())}function p1(y,h){return void 0===h&&(h=0),setTimeout(y,h)}function Sd(){return Date.now()}function O0(y,h){void 0===h&&(h="x");const A=xc();let I,F,X;const Me=function Y0(y){const h=xc();let A;return h.getComputedStyle&&(A=h.getComputedStyle(y,null)),!A&&y.currentStyle&&(A=y.currentStyle),A||(A=y.style),A}(y);return A.WebKitCSSMatrix?(F=Me.transform||Me.webkitTransform,F.split(",").length>6&&(F=F.split(", ").map($e=>$e.replace(",",".")).join(", ")),X=new A.WebKitCSSMatrix("none"===F?"":F)):(X=Me.MozTransform||Me.OTransform||Me.MsTransform||Me.msTransform||Me.transform||Me.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),I=X.toString().split(",")),"x"===h&&(F=A.WebKitCSSMatrix?X.m41:16===I.length?parseFloat(I[12]):parseFloat(I[4])),"y"===h&&(F=A.WebKitCSSMatrix?X.m42:16===I.length?parseFloat(I[13]):parseFloat(I[5])),F||0}function th(y){return"object"==typeof y&&null!==y&&y.constructor&&"Object"===Object.prototype.toString.call(y).slice(8,-1)}function Yu(y){return typeof window<"u"&&typeof window.HTMLElement<"u"?y instanceof HTMLElement:y&&(1===y.nodeType||11===y.nodeType)}function tu(){const y=Object(arguments.length<=0?void 0:arguments[0]),h=["__proto__","constructor","prototype"];for(let A=1;A<arguments.length;A+=1){const I=A<0||arguments.length<=A?void 0:arguments[A];if(null!=I&&!Yu(I)){const F=Object.keys(Object(I)).filter(X=>h.indexOf(X)<0);for(let X=0,Me=F.length;X<Me;X+=1){const $e=F[X],ze=Object.getOwnPropertyDescriptor(I,$e);void 0!==ze&&ze.enumerable&&(th(y[$e])&&th(I[$e])?I[$e].__swiper__?y[$e]=I[$e]:tu(y[$e],I[$e]):!th(y[$e])&&th(I[$e])?(y[$e]={},I[$e].__swiper__?y[$e]=I[$e]:tu(y[$e],I[$e])):y[$e]=I[$e])}}}return y}function Al(y,h,A){y.style.setProperty(h,A)}function $f(y){let{swiper:h,targetPosition:A,side:I}=y;const F=xc(),X=-h.translate;let $e,Me=null;const ze=h.params.speed;h.wrapperEl.style.scrollSnapType="none",F.cancelAnimationFrame(h.cssModeFrameID);const ct=A>X?"next":"prev",ot=(Ct,sn)=>"next"===ct&&Ct>=sn||"prev"===ct&&Ct<=sn,pt=()=>{$e=(new Date).getTime(),null===Me&&(Me=$e);const Ct=Math.max(Math.min(($e-Me)/ze,1),0),sn=.5-Math.cos(Ct*Math.PI)/2;let pn=X+sn*(A-X);if(ot(pn,A)&&(pn=A),h.wrapperEl.scrollTo({[I]:pn}),ot(pn,A))return h.wrapperEl.style.overflow="hidden",h.wrapperEl.style.scrollSnapType="",setTimeout(()=>{h.wrapperEl.style.overflow="",h.wrapperEl.scrollTo({[I]:pn})}),void F.cancelAnimationFrame(h.cssModeFrameID);h.cssModeFrameID=F.requestAnimationFrame(pt)};pt()}function Z0(y){return y.querySelector(".swiper-slide-transform")||y.shadowRoot&&y.shadowRoot.querySelector(".swiper-slide-transform")||y}function md(y,h){return void 0===h&&(h=""),[...y.children].filter(A=>A.matches(h))}function Ep(y){try{return void console.warn(y)}catch{}}function zu(y,h){void 0===h&&(h=[]);const A=document.createElement(y);return A.classList.add(...Array.isArray(h)?h:z0(h)),A}function tp(y){const h=xc(),A=Hc(),I=y.getBoundingClientRect(),F=A.body;return{top:I.top+(y===h?h.scrollY:y.scrollTop)-(y.clientTop||F.clientTop||0),left:I.left+(y===h?h.scrollX:y.scrollLeft)-(y.clientLeft||F.clientLeft||0)}}function f1(y,h){return xc().getComputedStyle(y,null).getPropertyValue(h)}function Q0(y){let A,h=y;if(h){for(A=0;null!==(h=h.previousSibling);)1===h.nodeType&&(A+=1);return A}}function J0(y,h){const A=[];let I=y.parentElement;for(;I;)h?I.matches(h)&&A.push(I):A.push(I),I=I.parentElement;return A}function e1(y,h){h&&y.addEventListener("transitionend",function A(I){I.target===y&&(h.call(y,I),y.removeEventListener("transitionend",A))})}function lf(y,h,A){const I=xc();return A?y["width"===h?"offsetWidth":"offsetHeight"]+parseFloat(I.getComputedStyle(y,null).getPropertyValue("width"===h?"margin-right":"margin-top"))+parseFloat(I.getComputedStyle(y,null).getPropertyValue("width"===h?"margin-left":"margin-bottom")):y.offsetWidth}function La(y){return(Array.isArray(y)?y:[y]).filter(h=>!!h)}function z1(y){return h=>Math.abs(h)>0&&y.browser&&y.browser.need3dFix&&Math.abs(h)%90==0?h+.001:h}let cf,jf,I2;function np(){return cf||(cf=function al(){const y=xc(),h=Hc();return{smoothScroll:h.documentElement&&h.documentElement.style&&"scrollBehavior"in h.documentElement.style,touch:!!("ontouchstart"in y||y.DocumentTouch&&h instanceof y.DocumentTouch)}}()),cf}function O1(y){return void 0===y&&(y={}),jf||(jf=function Uf(y){let{userAgent:h}=void 0===y?{}:y;const A=np(),I=xc(),F=I.navigator.platform,X=h||I.navigator.userAgent,Me={ios:!1,android:!1},$e=I.screen.width,ze=I.screen.height,ct=X.match(/(Android);?[\s\/]+([\d.]+)?/);let ot=X.match(/(iPad).*OS\s([\d_]+)/);const pt=X.match(/(iPod)(.*OS\s([\d_]+))?/),Ct=!ot&&X.match(/(iPhone\sOS|iOS)\s([\d_]+)/),sn="Win32"===F;let pn="MacIntel"===F;return!ot&&pn&&A.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${$e}x${ze}`)>=0&&(ot=X.match(/(Version)\/([\d.]+)/),ot||(ot=[0,1,"13_0_0"]),pn=!1),ct&&!sn&&(Me.os="android",Me.android=!0),(ot||Ct||pt)&&(Me.os="ios",Me.ios=!0),Me}(y)),jf}var Gc={on(y,h,A){const I=this;if(!I.eventsListeners||I.destroyed||"function"!=typeof h)return I;const F=A?"unshift":"push";return y.split(" ").forEach(X=>{I.eventsListeners[X]||(I.eventsListeners[X]=[]),I.eventsListeners[X][F](h)}),I},once(y,h,A){const I=this;if(!I.eventsListeners||I.destroyed||"function"!=typeof h)return I;function F(){I.off(y,F),F.__emitterProxy&&delete F.__emitterProxy;for(var X=arguments.length,Me=new Array(X),$e=0;$e<X;$e++)Me[$e]=arguments[$e];h.apply(I,Me)}return F.__emitterProxy=h,I.on(y,F,A)},onAny(y,h){const A=this;if(!A.eventsListeners||A.destroyed||"function"!=typeof y)return A;const I=h?"unshift":"push";return A.eventsAnyListeners.indexOf(y)<0&&A.eventsAnyListeners[I](y),A},offAny(y){const h=this;if(!h.eventsListeners||h.destroyed||!h.eventsAnyListeners)return h;const A=h.eventsAnyListeners.indexOf(y);return A>=0&&h.eventsAnyListeners.splice(A,1),h},off(y,h){const A=this;return!A.eventsListeners||A.destroyed||!A.eventsListeners||y.split(" ").forEach(I=>{typeof h>"u"?A.eventsListeners[I]=[]:A.eventsListeners[I]&&A.eventsListeners[I].forEach((F,X)=>{(F===h||F.__emitterProxy&&F.__emitterProxy===h)&&A.eventsListeners[I].splice(X,1)})}),A},emit(){const y=this;if(!y.eventsListeners||y.destroyed||!y.eventsListeners)return y;let h,A,I;for(var F=arguments.length,X=new Array(F),Me=0;Me<F;Me++)X[Me]=arguments[Me];return"string"==typeof X[0]||Array.isArray(X[0])?(h=X[0],A=X.slice(1,X.length),I=y):(h=X[0].events,A=X[0].data,I=X[0].context||y),A.unshift(I),(Array.isArray(h)?h:h.split(" ")).forEach(ze=>{y.eventsAnyListeners&&y.eventsAnyListeners.length&&y.eventsAnyListeners.forEach(ct=>{ct.apply(I,[ze,...A])}),y.eventsListeners&&y.eventsListeners[ze]&&y.eventsListeners[ze].forEach(ct=>{ct.apply(I,A)})}),y}};const E2=(y,h,A)=>{h&&!y.classList.contains(A)?y.classList.add(A):!h&&y.classList.contains(A)&&y.classList.remove(A)},um=(y,h,A)=>{h&&!y.classList.contains(A)?y.classList.add(A):!h&&y.classList.contains(A)&&y.classList.remove(A)},rp=(y,h)=>{if(!y||y.destroyed||!y.params)return;const I=h.closest(y.isElement?"swiper-slide":`.${y.params.slideClass}`);if(I){let F=I.querySelector(`.${y.params.lazyPreloaderClass}`);!F&&y.isElement&&(I.shadowRoot?F=I.shadowRoot.querySelector(`.${y.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{I.shadowRoot&&(F=I.shadowRoot.querySelector(`.${y.params.lazyPreloaderClass}`),F&&F.remove())})),F&&F.remove()}},Cp=(y,h)=>{if(!y.slides[h])return;const A=y.slides[h].querySelector('[loading="lazy"]');A&&A.removeAttribute("loading")},Zu=y=>{if(!y||y.destroyed||!y.params)return;let h=y.params.lazyPreloadPrevNext;const A=y.slides.length;if(!A||!h||h<0)return;h=Math.min(h,A);const I="auto"===y.params.slidesPerView?y.slidesPerViewDynamic():Math.ceil(y.params.slidesPerView),F=y.activeIndex;if(y.params.grid&&y.params.grid.rows>1){const Me=F,$e=[Me-h];return $e.push(...Array.from({length:h}).map((ze,ct)=>Me+I+ct)),void y.slides.forEach((ze,ct)=>{$e.includes(ze.column)&&Cp(y,ct)})}const X=F+I-1;if(y.params.rewind||y.params.loop)for(let Me=F-h;Me<=X+h;Me+=1){const $e=(Me%A+A)%A;($e<F||$e>X)&&Cp(y,$e)}else for(let Me=Math.max(F-h,0);Me<=Math.min(X+h,A-1);Me+=1)Me!==F&&(Me>X||Me<F)&&Cp(y,Me)};var g1={updateSize:function nh(){const y=this;let h,A;const I=y.el;h=typeof y.params.width<"u"&&null!==y.params.width?y.params.width:I.clientWidth,A=typeof y.params.height<"u"&&null!==y.params.height?y.params.height:I.clientHeight,!(0===h&&y.isHorizontal()||0===A&&y.isVertical())&&(h=h-parseInt(f1(I,"padding-left")||0,10)-parseInt(f1(I,"padding-right")||0,10),A=A-parseInt(f1(I,"padding-top")||0,10)-parseInt(f1(I,"padding-bottom")||0,10),Number.isNaN(h)&&(h=0),Number.isNaN(A)&&(A=0),Object.assign(y,{width:h,height:A,size:y.isHorizontal()?h:A}))},updateSlides:function op(){const y=this;function h(To,Jo){return parseFloat(To.getPropertyValue(y.getDirectionLabel(Jo))||0)}const A=y.params,{wrapperEl:I,slidesEl:F,size:X,rtlTranslate:Me,wrongRTL:$e}=y,ze=y.virtual&&A.virtual.enabled,ct=ze?y.virtual.slides.length:y.slides.length,ot=md(F,`.${y.params.slideClass}, swiper-slide`),pt=ze?y.virtual.slides.length:ot.length;let Ct=[];const sn=[],pn=[];let gn=A.slidesOffsetBefore;"function"==typeof gn&&(gn=A.slidesOffsetBefore.call(y));let yn=A.slidesOffsetAfter;"function"==typeof yn&&(yn=A.slidesOffsetAfter.call(y));const Rt=y.snapGrid.length,Bn=y.slidesGrid.length;let vn=A.spaceBetween,si=-gn,Si=0,Qo=0;if(typeof X>"u")return;"string"==typeof vn&&vn.indexOf("%")>=0?vn=parseFloat(vn.replace("%",""))/100*X:"string"==typeof vn&&(vn=parseFloat(vn)),y.virtualSize=-vn,ot.forEach(To=>{Me?To.style.marginLeft="":To.style.marginRight="",To.style.marginBottom="",To.style.marginTop=""}),A.centeredSlides&&A.cssMode&&(Al(I,"--swiper-centered-offset-before",""),Al(I,"--swiper-centered-offset-after",""));const ur=A.grid&&A.grid.rows>1&&y.grid;let Bo;ur?y.grid.initSlides(ot):y.grid&&y.grid.unsetSlides();const no="auto"===A.slidesPerView&&A.breakpoints&&Object.keys(A.breakpoints).filter(To=>typeof A.breakpoints[To].slidesPerView<"u").length>0;for(let To=0;To<pt;To+=1){let Jo;if(Bo=0,ot[To]&&(Jo=ot[To]),ur&&y.grid.updateSlide(To,Jo,ot),!ot[To]||"none"!==f1(Jo,"display")){if("auto"===A.slidesPerView){no&&(ot[To].style[y.getDirectionLabel("width")]="");const mo=getComputedStyle(Jo),ho=Jo.style.transform,Ro=Jo.style.webkitTransform;if(ho&&(Jo.style.transform="none"),Ro&&(Jo.style.webkitTransform="none"),A.roundLengths)Bo=y.isHorizontal()?lf(Jo,"width",!0):lf(Jo,"height",!0);else{const fr=h(mo,"width"),Rs=h(mo,"padding-left"),$o=h(mo,"padding-right"),Ho=h(mo,"margin-left"),Or=h(mo,"margin-right"),Ma=mo.getPropertyValue("box-sizing");if(Ma&&"border-box"===Ma)Bo=fr+Ho+Or;else{const{clientWidth:wo,offsetWidth:Gr}=Jo;Bo=fr+Rs+$o+Ho+Or+(Gr-wo)}}ho&&(Jo.style.transform=ho),Ro&&(Jo.style.webkitTransform=Ro),A.roundLengths&&(Bo=Math.floor(Bo))}else Bo=(X-(A.slidesPerView-1)*vn)/A.slidesPerView,A.roundLengths&&(Bo=Math.floor(Bo)),ot[To]&&(ot[To].style[y.getDirectionLabel("width")]=`${Bo}px`);ot[To]&&(ot[To].swiperSlideSize=Bo),pn.push(Bo),A.centeredSlides?(si=si+Bo/2+Si/2+vn,0===Si&&0!==To&&(si=si-X/2-vn),0===To&&(si=si-X/2-vn),Math.abs(si)<.001&&(si=0),A.roundLengths&&(si=Math.floor(si)),Qo%A.slidesPerGroup==0&&Ct.push(si),sn.push(si)):(A.roundLengths&&(si=Math.floor(si)),(Qo-Math.min(y.params.slidesPerGroupSkip,Qo))%y.params.slidesPerGroup==0&&Ct.push(si),sn.push(si),si=si+Bo+vn),y.virtualSize+=Bo+vn,Si=Bo,Qo+=1}}if(y.virtualSize=Math.max(y.virtualSize,X)+yn,Me&&$e&&("slide"===A.effect||"coverflow"===A.effect)&&(I.style.width=`${y.virtualSize+vn}px`),A.setWrapperSize&&(I.style[y.getDirectionLabel("width")]=`${y.virtualSize+vn}px`),ur&&y.grid.updateWrapperSize(Bo,Ct),!A.centeredSlides){const To=[];for(let Jo=0;Jo<Ct.length;Jo+=1){let mo=Ct[Jo];A.roundLengths&&(mo=Math.floor(mo)),Ct[Jo]<=y.virtualSize-X&&To.push(mo)}Ct=To,Math.floor(y.virtualSize-X)-Math.floor(Ct[Ct.length-1])>1&&Ct.push(y.virtualSize-X)}if(ze&&A.loop){const To=pn[0]+vn;if(A.slidesPerGroup>1){const Jo=Math.ceil((y.virtual.slidesBefore+y.virtual.slidesAfter)/A.slidesPerGroup),mo=To*A.slidesPerGroup;for(let ho=0;ho<Jo;ho+=1)Ct.push(Ct[Ct.length-1]+mo)}for(let Jo=0;Jo<y.virtual.slidesBefore+y.virtual.slidesAfter;Jo+=1)1===A.slidesPerGroup&&Ct.push(Ct[Ct.length-1]+To),sn.push(sn[sn.length-1]+To),y.virtualSize+=To}if(0===Ct.length&&(Ct=[0]),0!==vn){const To=y.isHorizontal()&&Me?"marginLeft":y.getDirectionLabel("marginRight");ot.filter((Jo,mo)=>!(A.cssMode&&!A.loop)||mo!==ot.length-1).forEach(Jo=>{Jo.style[To]=`${vn}px`})}if(A.centeredSlides&&A.centeredSlidesBounds){let To=0;pn.forEach(mo=>{To+=mo+(vn||0)}),To-=vn;const Jo=To-X;Ct=Ct.map(mo=>mo<=0?-gn:mo>Jo?Jo+yn:mo)}if(A.centerInsufficientSlides){let To=0;pn.forEach(mo=>{To+=mo+(vn||0)}),To-=vn;const Jo=(A.slidesOffsetBefore||0)+(A.slidesOffsetAfter||0);if(To+Jo<X){const mo=(X-To-Jo)/2;Ct.forEach((ho,Ro)=>{Ct[Ro]=ho-mo}),sn.forEach((ho,Ro)=>{sn[Ro]=ho+mo})}}if(Object.assign(y,{slides:ot,snapGrid:Ct,slidesGrid:sn,slidesSizesGrid:pn}),A.centeredSlides&&A.cssMode&&!A.centeredSlidesBounds){Al(I,"--swiper-centered-offset-before",-Ct[0]+"px"),Al(I,"--swiper-centered-offset-after",y.size/2-pn[pn.length-1]/2+"px");const To=-y.snapGrid[0],Jo=-y.slidesGrid[0];y.snapGrid=y.snapGrid.map(mo=>mo+To),y.slidesGrid=y.slidesGrid.map(mo=>mo+Jo)}if(pt!==ct&&y.emit("slidesLengthChange"),Ct.length!==Rt&&(y.params.watchOverflow&&y.checkOverflow(),y.emit("snapGridLengthChange")),sn.length!==Bn&&y.emit("slidesGridLengthChange"),A.watchSlidesProgress&&y.updateSlidesOffset(),y.emit("slidesUpdated"),!(ze||A.cssMode||"slide"!==A.effect&&"fade"!==A.effect)){const To=`${A.containerModifierClass}backface-hidden`,Jo=y.el.classList.contains(To);pt<=A.maxBackfaceHiddenSlides?Jo||y.el.classList.add(To):Jo&&y.el.classList.remove(To)}},updateAutoHeight:function Hf(y){const h=this,A=[],I=h.virtual&&h.params.virtual.enabled;let X,F=0;"number"==typeof y?h.setTransition(y):!0===y&&h.setTransition(h.params.speed);const Me=$e=>I?h.slides[h.getSlideIndexByData($e)]:h.slides[$e];if("auto"!==h.params.slidesPerView&&h.params.slidesPerView>1)if(h.params.centeredSlides)(h.visibleSlides||[]).forEach($e=>{A.push($e)});else for(X=0;X<Math.ceil(h.params.slidesPerView);X+=1){const $e=h.activeIndex+X;if($e>h.slides.length&&!I)break;A.push(Me($e))}else A.push(Me(h.activeIndex));for(X=0;X<A.length;X+=1)if(typeof A[X]<"u"){const $e=A[X].offsetHeight;F=$e>F?$e:F}(F||0===F)&&(h.wrapperEl.style.height=`${F}px`)},updateSlidesOffset:function df(){const y=this,h=y.slides,A=y.isElement?y.isHorizontal()?y.wrapperEl.offsetLeft:y.wrapperEl.offsetTop:0;for(let I=0;I<h.length;I+=1)h[I].swiperSlideOffset=(y.isHorizontal()?h[I].offsetLeft:h[I].offsetTop)-A-y.cssOverflowAdjustment()},updateSlidesProgress:function bh(y){void 0===y&&(y=this&&this.translate||0);const h=this,A=h.params,{slides:I,rtlTranslate:F,snapGrid:X}=h;if(0===I.length)return;typeof I[0].swiperSlideOffset>"u"&&h.updateSlidesOffset();let Me=-y;F&&(Me=y),h.visibleSlidesIndexes=[],h.visibleSlides=[];let $e=A.spaceBetween;"string"==typeof $e&&$e.indexOf("%")>=0?$e=parseFloat($e.replace("%",""))/100*h.size:"string"==typeof $e&&($e=parseFloat($e));for(let ze=0;ze<I.length;ze+=1){const ct=I[ze];let ot=ct.swiperSlideOffset;A.cssMode&&A.centeredSlides&&(ot-=I[0].swiperSlideOffset);const pt=(Me+(A.centeredSlides?h.minTranslate():0)-ot)/(ct.swiperSlideSize+$e),Ct=(Me-X[0]+(A.centeredSlides?h.minTranslate():0)-ot)/(ct.swiperSlideSize+$e),sn=-(Me-ot),pn=sn+h.slidesSizesGrid[ze],gn=sn>=0&&sn<=h.size-h.slidesSizesGrid[ze],yn=sn>=0&&sn<h.size-1||pn>1&&pn<=h.size||sn<=0&&pn>=h.size;yn&&(h.visibleSlides.push(ct),h.visibleSlidesIndexes.push(ze)),E2(ct,yn,A.slideVisibleClass),E2(ct,gn,A.slideFullyVisibleClass),ct.progress=F?-pt:pt,ct.originalProgress=F?-Ct:Ct}},updateProgress:function hf(y){const h=this;typeof y>"u"&&(y=h&&h.translate&&h.translate*(h.rtlTranslate?-1:1)||0);const A=h.params,I=h.maxTranslate()-h.minTranslate();let{progress:F,isBeginning:X,isEnd:Me,progressLoop:$e}=h;const ze=X,ct=Me;if(0===I)F=0,X=!0,Me=!0;else{F=(y-h.minTranslate())/I;const ot=Math.abs(y-h.minTranslate())<1,pt=Math.abs(y-h.maxTranslate())<1;X=ot||F<=0,Me=pt||F>=1,ot&&(F=0),pt&&(F=1)}if(A.loop){const ot=h.getSlideIndexByData(0),pt=h.getSlideIndexByData(h.slides.length-1),Ct=h.slidesGrid[ot],sn=h.slidesGrid[pt],pn=h.slidesGrid[h.slidesGrid.length-1],gn=Math.abs(y);$e=gn>=Ct?(gn-Ct)/pn:(gn+pn-sn)/pn,$e>1&&($e-=1)}Object.assign(h,{progress:F,progressLoop:$e,isBeginning:X,isEnd:Me}),(A.watchSlidesProgress||A.centeredSlides&&A.autoHeight)&&h.updateSlidesProgress(y),X&&!ze&&h.emit("reachBeginning toEdge"),Me&&!ct&&h.emit("reachEnd toEdge"),(ze&&!X||ct&&!Me)&&h.emit("fromEdge"),h.emit("progress",F)},updateSlidesClasses:function pf(){const y=this,{slides:h,params:A,slidesEl:I,activeIndex:F}=y,Me=y.grid&&A.grid&&A.grid.rows>1,$e=pt=>md(I,`.${A.slideClass}${pt}, swiper-slide${pt}`)[0];let ze,ct,ot;if(y.virtual&&A.virtual.enabled)if(A.loop){let pt=F-y.virtual.slidesBefore;pt<0&&(pt=y.virtual.slides.length+pt),pt>=y.virtual.slides.length&&(pt-=y.virtual.slides.length),ze=$e(`[data-swiper-slide-index="${pt}"]`)}else ze=$e(`[data-swiper-slide-index="${F}"]`);else Me?(ze=h.filter(pt=>pt.column===F)[0],ot=h.filter(pt=>pt.column===F+1)[0],ct=h.filter(pt=>pt.column===F-1)[0]):ze=h[F];ze&&(Me||(ot=function n0(y,h){const A=[];for(;y.nextElementSibling;){const I=y.nextElementSibling;h?I.matches(h)&&A.push(I):A.push(I),y=I}return A}(ze,`.${A.slideClass}, swiper-slide`)[0],A.loop&&!ot&&(ot=h[0]),ct=function R1(y,h){const A=[];for(;y.previousElementSibling;){const I=y.previousElementSibling;h?I.matches(h)&&A.push(I):A.push(I),y=I}return A}(ze,`.${A.slideClass}, swiper-slide`)[0],A.loop&&0===!ct&&(ct=h[h.length-1]))),h.forEach(pt=>{um(pt,pt===ze,A.slideActiveClass),um(pt,pt===ot,A.slideNextClass),um(pt,pt===ct,A.slidePrevClass)}),y.emitSlidesClasses()},updateActiveIndex:function ih(y){const h=this,A=h.rtlTranslate?h.translate:-h.translate,{snapGrid:I,params:F,activeIndex:X,realIndex:Me,snapIndex:$e}=h;let ct,ze=y;const ot=sn=>{let pn=sn-h.virtual.slidesBefore;return pn<0&&(pn=h.virtual.slides.length+pn),pn>=h.virtual.slides.length&&(pn-=h.virtual.slides.length),pn};if(typeof ze>"u"&&(ze=function L1(y){const{slidesGrid:h,params:A}=y,I=y.rtlTranslate?y.translate:-y.translate;let F;for(let X=0;X<h.length;X+=1)typeof h[X+1]<"u"?I>=h[X]&&I<h[X+1]-(h[X+1]-h[X])/2?F=X:I>=h[X]&&I<h[X+1]&&(F=X+1):I>=h[X]&&(F=X);return A.normalizeSlideIndex&&(F<0||typeof F>"u")&&(F=0),F}(h)),I.indexOf(A)>=0)ct=I.indexOf(A);else{const sn=Math.min(F.slidesPerGroupSkip,ze);ct=sn+Math.floor((ze-sn)/F.slidesPerGroup)}if(ct>=I.length&&(ct=I.length-1),ze===X&&!h.params.loop)return void(ct!==$e&&(h.snapIndex=ct,h.emit("snapIndexChange")));if(ze===X&&h.params.loop&&h.virtual&&h.params.virtual.enabled)return void(h.realIndex=ot(ze));const pt=h.grid&&F.grid&&F.grid.rows>1;let Ct;if(h.virtual&&F.virtual.enabled&&F.loop)Ct=ot(ze);else if(pt){const sn=h.slides.filter(gn=>gn.column===ze)[0];let pn=parseInt(sn.getAttribute("data-swiper-slide-index"),10);Number.isNaN(pn)&&(pn=Math.max(h.slides.indexOf(sn),0)),Ct=Math.floor(pn/F.grid.rows)}else if(h.slides[ze]){const sn=h.slides[ze].getAttribute("data-swiper-slide-index");Ct=sn?parseInt(sn,10):ze}else Ct=ze;Object.assign(h,{previousSnapIndex:$e,snapIndex:ct,previousRealIndex:Me,realIndex:Ct,previousIndex:X,activeIndex:ze}),h.initialized&&Zu(h),h.emit("activeIndexChange"),h.emit("snapIndexChange"),(h.initialized||h.params.runCallbacksOnInit)&&(Me!==Ct&&h.emit("realIndexChange"),h.emit("slideChange"))},updateClickedSlide:function B1(y,h){const A=this,I=A.params;let F=y.closest(`.${I.slideClass}, swiper-slide`);!F&&A.isElement&&h&&h.length>1&&h.includes(y)&&[...h.slice(h.indexOf(y)+1,h.length)].forEach($e=>{!F&&$e.matches&&$e.matches(`.${I.slideClass}, swiper-slide`)&&(F=$e)});let Me,X=!1;if(F)for(let $e=0;$e<A.slides.length;$e+=1)if(A.slides[$e]===F){X=!0,Me=$e;break}if(!F||!X)return A.clickedSlide=void 0,void(A.clickedIndex=void 0);A.clickedSlide=F,A.clickedIndex=A.virtual&&A.params.virtual.enabled?parseInt(F.getAttribute("data-swiper-slide-index"),10):Me,I.slideToClickedSlide&&void 0!==A.clickedIndex&&A.clickedIndex!==A.activeIndex&&A.slideToClickedSlide()}},dm={getTranslate:function v1(y){void 0===y&&(y=this.isHorizontal()?"x":"y");const{params:A,rtlTranslate:I,translate:F,wrapperEl:X}=this;if(A.virtualTranslate)return I?-F:F;if(A.cssMode)return F;let Me=O0(X,y);return Me+=this.cssOverflowAdjustment(),I&&(Me=-Me),Me||0},setTranslate:function Gf(y,h){const A=this,{rtlTranslate:I,params:F,wrapperEl:X,progress:Me}=A;let ot,$e=0,ze=0;A.isHorizontal()?$e=I?-y:y:ze=y,F.roundLengths&&($e=Math.floor($e),ze=Math.floor(ze)),A.previousTranslate=A.translate,A.translate=A.isHorizontal()?$e:ze,F.cssMode?X[A.isHorizontal()?"scrollLeft":"scrollTop"]=A.isHorizontal()?-$e:-ze:F.virtualTranslate||(A.isHorizontal()?$e-=A.cssOverflowAdjustment():ze-=A.cssOverflowAdjustment(),X.style.transform=`translate3d(${$e}px, ${ze}px, 0px)`);const pt=A.maxTranslate()-A.minTranslate();ot=0===pt?0:(y-A.minTranslate())/pt,ot!==Me&&A.updateProgress(y),A.emit("setTranslate",A.translate,h)},minTranslate:function Gm(){return-this.snapGrid[0]},maxTranslate:function C2(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function Wm(y,h,A,I,F){void 0===y&&(y=0),void 0===h&&(h=this.params.speed),void 0===A&&(A=!0),void 0===I&&(I=!0);const X=this,{params:Me,wrapperEl:$e}=X;if(X.animating&&Me.preventInteractionOnTransition)return!1;const ze=X.minTranslate(),ct=X.maxTranslate();let ot;if(ot=I&&y>ze?ze:I&&y<ct?ct:y,X.updateProgress(ot),Me.cssMode){const pt=X.isHorizontal();if(0===h)$e[pt?"scrollLeft":"scrollTop"]=-ot;else{if(!X.support.smoothScroll)return $f({swiper:X,targetPosition:-ot,side:pt?"left":"top"}),!0;$e.scrollTo({[pt?"left":"top"]:-ot,behavior:"smooth"})}return!0}return 0===h?(X.setTransition(0),X.setTranslate(ot),A&&(X.emit("beforeTransitionStart",h,F),X.emit("transitionEnd"))):(X.setTransition(h),X.setTranslate(ot),A&&(X.emit("beforeTransitionStart",h,F),X.emit("transitionStart")),X.animating||(X.animating=!0,X.onTranslateToWrapperTransitionEnd||(X.onTranslateToWrapperTransitionEnd=function(Ct){!X||X.destroyed||Ct.target===this&&(X.wrapperEl.removeEventListener("transitionend",X.onTranslateToWrapperTransitionEnd),X.onTranslateToWrapperTransitionEnd=null,delete X.onTranslateToWrapperTransitionEnd,X.animating=!1,A&&X.emit("transitionEnd"))}),X.wrapperEl.addEventListener("transitionend",X.onTranslateToWrapperTransitionEnd))),!0}};function sp(y){let{swiper:h,runCallbacks:A,direction:I,step:F}=y;const{activeIndex:X,previousIndex:Me}=h;let $e=I;if($e||($e=X>Me?"next":X<Me?"prev":"reset"),h.emit(`transition${F}`),A&&X!==Me){if("reset"===$e)return void h.emit(`slideResetTransition${F}`);h.emit(`slideChangeTransition${F}`),h.emit("next"===$e?`slideNextTransition${F}`:`slidePrevTransition${F}`)}}var N1={setTransition:function Vd(y,h){const A=this;A.params.cssMode||(A.wrapperEl.style.transitionDuration=`${y}ms`,A.wrapperEl.style.transitionDelay=0===y?"0ms":""),A.emit("setTransition",y,h)},transitionStart:function Wf(y,h){void 0===y&&(y=!0);const A=this,{params:I}=A;I.cssMode||(I.autoHeight&&A.updateAutoHeight(),sp({swiper:A,runCallbacks:y,direction:h,step:"Start"}))},transitionEnd:function ap(y,h){void 0===y&&(y=!0);const A=this,{params:I}=A;A.animating=!1,!I.cssMode&&(A.setTransition(0),sp({swiper:A,runCallbacks:y,direction:h,step:"End"}))}},oa={slideTo:function qf(y,h,A,I,F){void 0===y&&(y=0),void 0===A&&(A=!0),"string"==typeof y&&(y=parseInt(y,10));const X=this;let Me=y;Me<0&&(Me=0);const{params:$e,snapGrid:ze,slidesGrid:ct,previousIndex:ot,activeIndex:pt,rtlTranslate:Ct,wrapperEl:sn,enabled:pn}=X;if(!pn&&!I&&!F||X.destroyed||X.animating&&$e.preventInteractionOnTransition)return!1;typeof h>"u"&&(h=X.params.speed);const gn=Math.min(X.params.slidesPerGroupSkip,Me);let yn=gn+Math.floor((Me-gn)/X.params.slidesPerGroup);yn>=ze.length&&(yn=ze.length-1);const Rt=-ze[yn];if($e.normalizeSlideIndex)for(let vn=0;vn<ct.length;vn+=1){const si=-Math.floor(100*Rt),Si=Math.floor(100*ct[vn]),Qo=Math.floor(100*ct[vn+1]);typeof ct[vn+1]<"u"?si>=Si&&si<Qo-(Qo-Si)/2?Me=vn:si>=Si&&si<Qo&&(Me=vn+1):si>=Si&&(Me=vn)}if(X.initialized&&Me!==pt&&(!X.allowSlideNext&&(Ct?Rt>X.translate&&Rt>X.minTranslate():Rt<X.translate&&Rt<X.minTranslate())||!X.allowSlidePrev&&Rt>X.translate&&Rt>X.maxTranslate()&&(pt||0)!==Me))return!1;let Bn;if(Me!==(ot||0)&&A&&X.emit("beforeSlideChangeStart"),X.updateProgress(Rt),Bn=Me>pt?"next":Me<pt?"prev":"reset",Ct&&-Rt===X.translate||!Ct&&Rt===X.translate)return X.updateActiveIndex(Me),$e.autoHeight&&X.updateAutoHeight(),X.updateSlidesClasses(),"slide"!==$e.effect&&X.setTranslate(Rt),"reset"!==Bn&&(X.transitionStart(A,Bn),X.transitionEnd(A,Bn)),!1;if($e.cssMode){const vn=X.isHorizontal(),si=Ct?Rt:-Rt;if(0===h){const Si=X.virtual&&X.params.virtual.enabled;Si&&(X.wrapperEl.style.scrollSnapType="none",X._immediateVirtual=!0),Si&&!X._cssModeVirtualInitialSet&&X.params.initialSlide>0?(X._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{sn[vn?"scrollLeft":"scrollTop"]=si})):sn[vn?"scrollLeft":"scrollTop"]=si,Si&&requestAnimationFrame(()=>{X.wrapperEl.style.scrollSnapType="",X._immediateVirtual=!1})}else{if(!X.support.smoothScroll)return $f({swiper:X,targetPosition:si,side:vn?"left":"top"}),!0;sn.scrollTo({[vn?"left":"top"]:si,behavior:"smooth"})}return!0}return X.setTransition(h),X.setTranslate(Rt),X.updateActiveIndex(Me),X.updateSlidesClasses(),X.emit("beforeTransitionStart",h,I),X.transitionStart(A,Bn),0===h?X.transitionEnd(A,Bn):X.animating||(X.animating=!0,X.onSlideToWrapperTransitionEnd||(X.onSlideToWrapperTransitionEnd=function(si){!X||X.destroyed||si.target===this&&(X.wrapperEl.removeEventListener("transitionend",X.onSlideToWrapperTransitionEnd),X.onSlideToWrapperTransitionEnd=null,delete X.onSlideToWrapperTransitionEnd,X.transitionEnd(A,Bn))}),X.wrapperEl.addEventListener("transitionend",X.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function o0(y,h,A,I){void 0===y&&(y=0),void 0===A&&(A=!0),"string"==typeof y&&(y=parseInt(y,10));const F=this;if(F.destroyed)return;typeof h>"u"&&(h=F.params.speed);const X=F.grid&&F.params.grid&&F.params.grid.rows>1;let Me=y;if(F.params.loop)if(F.virtual&&F.params.virtual.enabled)Me+=F.virtual.slidesBefore;else{let $e;if(X){const Ct=Me*F.params.grid.rows;$e=F.slides.filter(sn=>1*sn.getAttribute("data-swiper-slide-index")===Ct)[0].column}else $e=F.getSlideIndexByData(Me);const ze=X?Math.ceil(F.slides.length/F.params.grid.rows):F.slides.length,{centeredSlides:ct}=F.params;let ot=F.params.slidesPerView;"auto"===ot?ot=F.slidesPerViewDynamic():(ot=Math.ceil(parseFloat(F.params.slidesPerView,10)),ct&&ot%2==0&&(ot+=1));let pt=ze-$e<ot;if(ct&&(pt=pt||$e<Math.ceil(ot/2)),I&&ct&&"auto"!==F.params.slidesPerView&&!X&&(pt=!1),pt){const Ct=ct?$e<F.activeIndex?"prev":"next":$e-F.activeIndex-1<F.params.slidesPerView?"next":"prev";F.loopFix({direction:Ct,slideTo:!0,activeSlideIndex:"next"===Ct?$e+1:$e-ze+1,slideRealIndex:"next"===Ct?F.realIndex:void 0})}if(X){const Ct=Me*F.params.grid.rows;Me=F.slides.filter(sn=>1*sn.getAttribute("data-swiper-slide-index")===Ct)[0].column}else Me=F.getSlideIndexByData(Me)}return requestAnimationFrame(()=>{F.slideTo(Me,h,A,I)}),F},slideNext:function yu(y,h,A){void 0===h&&(h=!0);const I=this,{enabled:F,params:X,animating:Me}=I;if(!F||I.destroyed)return I;typeof y>"u"&&(y=I.params.speed);let $e=X.slidesPerGroup;"auto"===X.slidesPerView&&1===X.slidesPerGroup&&X.slidesPerGroupAuto&&($e=Math.max(I.slidesPerViewDynamic("current",!0),1));const ze=I.activeIndex<X.slidesPerGroupSkip?1:$e;if(X.loop){if(Me&&(!I.virtual||!X.virtual.enabled)&&X.loopPreventsSliding)return!1;if(I.loopFix({direction:"next"}),I._clientLeft=I.wrapperEl.clientLeft,I.activeIndex===I.slides.length-1&&X.cssMode)return requestAnimationFrame(()=>{I.slideTo(I.activeIndex+ze,y,h,A)}),!0}return I.slideTo(X.rewind&&I.isEnd?0:I.activeIndex+ze,y,h,A)},slidePrev:function t1(y,h,A){void 0===h&&(h=!0);const I=this,{params:F,snapGrid:X,slidesGrid:Me,rtlTranslate:$e,enabled:ze,animating:ct}=I;if(!ze||I.destroyed)return I;if(typeof y>"u"&&(y=I.params.speed),F.loop){if(ct&&(!I.virtual||!F.virtual.enabled)&&F.loopPreventsSliding)return!1;I.loopFix({direction:"prev"}),I._clientLeft=I.wrapperEl.clientLeft}function Ct(Rt){return Rt<0?-Math.floor(Math.abs(Rt)):Math.floor(Rt)}const sn=Ct($e?I.translate:-I.translate),pn=X.map(Rt=>Ct(Rt));let gn=X[pn.indexOf(sn)-1];if(typeof gn>"u"&&F.cssMode){let Rt;X.forEach((Bn,vn)=>{sn>=Bn&&(Rt=vn)}),typeof Rt<"u"&&(gn=X[Rt>0?Rt-1:Rt])}let yn=0;return typeof gn<"u"&&(yn=Me.indexOf(gn),yn<0&&(yn=I.activeIndex-1),"auto"===F.slidesPerView&&1===F.slidesPerGroup&&F.slidesPerGroupAuto&&(yn=yn-I.slidesPerViewDynamic("previous",!0)+1,yn=Math.max(yn,0))),F.rewind&&I.isBeginning?I.slideTo(I.params.virtual&&I.params.virtual.enabled&&I.virtual?I.virtual.slides.length-1:I.slides.length-1,y,h,A):F.loop&&0===I.activeIndex&&F.cssMode?(requestAnimationFrame(()=>{I.slideTo(yn,y,h,A)}),!0):I.slideTo(yn,y,h,A)},slideReset:function Ic(y,h,A){void 0===h&&(h=!0);const I=this;if(!I.destroyed)return typeof y>"u"&&(y=I.params.speed),I.slideTo(I.activeIndex,y,h,A)},slideToClosest:function lp(y,h,A,I){void 0===h&&(h=!0),void 0===I&&(I=.5);const F=this;if(F.destroyed)return;typeof y>"u"&&(y=F.params.speed);let X=F.activeIndex;const Me=Math.min(F.params.slidesPerGroupSkip,X),$e=Me+Math.floor((X-Me)/F.params.slidesPerGroup),ze=F.rtlTranslate?F.translate:-F.translate;if(ze>=F.snapGrid[$e]){const ct=F.snapGrid[$e];ze-ct>(F.snapGrid[$e+1]-ct)*I&&(X+=F.params.slidesPerGroup)}else{const ct=F.snapGrid[$e-1];ze-ct<=(F.snapGrid[$e]-ct)*I&&(X-=F.params.slidesPerGroup)}return X=Math.max(X,0),X=Math.min(X,F.slidesGrid.length-1),F.slideTo(X,y,h,A)},slideToClickedSlide:function F1(){const y=this;if(y.destroyed)return;const{params:h,slidesEl:A}=y,I="auto"===h.slidesPerView?y.slidesPerViewDynamic():h.slidesPerView;let X,F=y.clickedIndex;const Me=y.isElement?"swiper-slide":`.${h.slideClass}`;if(h.loop){if(y.animating)return;X=parseInt(y.clickedSlide.getAttribute("data-swiper-slide-index"),10),h.centeredSlides?F<y.loopedSlides-I/2||F>y.slides.length-y.loopedSlides+I/2?(y.loopFix(),F=y.getSlideIndex(md(A,`${Me}[data-swiper-slide-index="${X}"]`)[0]),p1(()=>{y.slideTo(F)})):y.slideTo(F):F>y.slides.length-I?(y.loopFix(),F=y.getSlideIndex(md(A,`${Me}[data-swiper-slide-index="${X}"]`)[0]),p1(()=>{y.slideTo(F)})):y.slideTo(F)}else y.slideTo(F)}},cp={loopCreate:function n1(y){const h=this,{params:A,slidesEl:I}=h;if(!A.loop||h.virtual&&h.params.virtual.enabled)return;const F=()=>{md(I,`.${A.slideClass}, swiper-slide`).forEach((pt,Ct)=>{pt.setAttribute("data-swiper-slide-index",Ct)})},X=h.grid&&A.grid&&A.grid.rows>1,Me=A.slidesPerGroup*(X?A.grid.rows:1),ze=X&&h.slides.length%A.grid.rows!=0,ct=ot=>{for(let pt=0;pt<ot;pt+=1){const Ct=h.isElement?zu("swiper-slide",[A.slideBlankClass]):zu("div",[A.slideClass,A.slideBlankClass]);h.slidesEl.append(Ct)}};h.slides.length%Me!=0?(A.loopAddBlankSlides?(ct(Me-h.slides.length%Me),h.recalcSlides(),h.updateSlides()):Ep("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),F()):ze?(A.loopAddBlankSlides?(ct(A.grid.rows-h.slides.length%A.grid.rows),h.recalcSlides(),h.updateSlides()):Ep("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),F()):F(),h.loopFix({slideRealIndex:y,direction:A.centeredSlides?void 0:"next"})},loopFix:function hm(y){let{slideRealIndex:h,slideTo:A=!0,direction:I,setTranslate:F,activeSlideIndex:X,byController:Me,byMousewheel:$e}=void 0===y?{}:y;const ze=this;if(!ze.params.loop)return;ze.emit("beforeLoopFix");const{slides:ct,allowSlidePrev:ot,allowSlideNext:pt,slidesEl:Ct,params:sn}=ze,{centeredSlides:pn}=sn;if(ze.allowSlidePrev=!0,ze.allowSlideNext=!0,ze.virtual&&sn.virtual.enabled)return A&&(sn.centeredSlides||0!==ze.snapIndex?sn.centeredSlides&&ze.snapIndex<sn.slidesPerView?ze.slideTo(ze.virtual.slides.length+ze.snapIndex,0,!1,!0):ze.snapIndex===ze.snapGrid.length-1&&ze.slideTo(ze.virtual.slidesBefore,0,!1,!0):ze.slideTo(ze.virtual.slides.length,0,!1,!0)),ze.allowSlidePrev=ot,ze.allowSlideNext=pt,void ze.emit("loopFix");let gn=sn.slidesPerView;"auto"===gn?gn=ze.slidesPerViewDynamic():(gn=Math.ceil(parseFloat(sn.slidesPerView,10)),pn&&gn%2==0&&(gn+=1));const yn=sn.slidesPerGroupAuto?gn:sn.slidesPerGroup;let Rt=yn;Rt%yn!=0&&(Rt+=yn-Rt%yn),Rt+=sn.loopAdditionalSlides,ze.loopedSlides=Rt;const Bn=ze.grid&&sn.grid&&sn.grid.rows>1;ct.length<gn+Rt?Ep("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):Bn&&"row"===sn.grid.fill&&Ep("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const vn=[],si=[];let Si=ze.activeIndex;typeof X>"u"?X=ze.getSlideIndex(ct.filter(ho=>ho.classList.contains(sn.slideActiveClass))[0]):Si=X;const Qo="next"===I||!I,ur="prev"===I||!I;let Bo=0,no=0;const To=Bn?Math.ceil(ct.length/sn.grid.rows):ct.length,mo=(Bn?ct[X].column:X)+(pn&&typeof F>"u"?-gn/2+.5:0);if(mo<Rt){Bo=Math.max(Rt-mo,yn);for(let ho=0;ho<Rt-mo;ho+=1){const Ro=ho-Math.floor(ho/To)*To;if(Bn){const fr=To-Ro-1;for(let Rs=ct.length-1;Rs>=0;Rs-=1)ct[Rs].column===fr&&vn.push(Rs)}else vn.push(To-Ro-1)}}else if(mo+gn>To-Rt){no=Math.max(mo-(To-2*Rt),yn);for(let ho=0;ho<no;ho+=1){const Ro=ho-Math.floor(ho/To)*To;Bn?ct.forEach((fr,Rs)=>{fr.column===Ro&&si.push(Rs)}):si.push(Ro)}}if(ze.__preventObserver__=!0,requestAnimationFrame(()=>{ze.__preventObserver__=!1}),ur&&vn.forEach(ho=>{ct[ho].swiperLoopMoveDOM=!0,Ct.prepend(ct[ho]),ct[ho].swiperLoopMoveDOM=!1}),Qo&&si.forEach(ho=>{ct[ho].swiperLoopMoveDOM=!0,Ct.append(ct[ho]),ct[ho].swiperLoopMoveDOM=!1}),ze.recalcSlides(),"auto"===sn.slidesPerView?ze.updateSlides():Bn&&(vn.length>0&&ur||si.length>0&&Qo)&&ze.slides.forEach((ho,Ro)=>{ze.grid.updateSlide(Ro,ho,ze.slides)}),sn.watchSlidesProgress&&ze.updateSlidesOffset(),A)if(vn.length>0&&ur)if(typeof h>"u"){const fr=ze.slidesGrid[Si+Bo]-ze.slidesGrid[Si];$e?ze.setTranslate(ze.translate-fr):(ze.slideTo(Si+Math.ceil(Bo),0,!1,!0),F&&(ze.touchEventsData.startTranslate=ze.touchEventsData.startTranslate-fr,ze.touchEventsData.currentTranslate=ze.touchEventsData.currentTranslate-fr))}else F&&(ze.slideTo(ze.activeIndex+(Bn?vn.length/sn.grid.rows:vn.length),0,!1,!0),ze.touchEventsData.currentTranslate=ze.translate);else if(si.length>0&&Qo)if(typeof h>"u"){const fr=ze.slidesGrid[Si-no]-ze.slidesGrid[Si];$e?ze.setTranslate(ze.translate-fr):(ze.slideTo(Si-no,0,!1,!0),F&&(ze.touchEventsData.startTranslate=ze.touchEventsData.startTranslate-fr,ze.touchEventsData.currentTranslate=ze.touchEventsData.currentTranslate-fr))}else ze.slideTo(ze.activeIndex-(Bn?si.length/sn.grid.rows:si.length),0,!1,!0);if(ze.allowSlidePrev=ot,ze.allowSlideNext=pt,ze.controller&&ze.controller.control&&!Me){const ho={slideRealIndex:h,direction:I,setTranslate:F,activeSlideIndex:X,byController:!0};Array.isArray(ze.controller.control)?ze.controller.control.forEach(Ro=>{!Ro.destroyed&&Ro.params.loop&&Ro.loopFix({...ho,slideTo:Ro.params.slidesPerView===sn.slidesPerView&&A})}):ze.controller.control instanceof ze.constructor&&ze.controller.control.params.loop&&ze.controller.control.loopFix({...ho,slideTo:ze.controller.control.params.slidesPerView===sn.slidesPerView&&A})}ze.emit("loopFix")},loopDestroy:function k2(){const y=this,{params:h,slidesEl:A}=y;if(!h.loop||y.virtual&&y.params.virtual.enabled)return;y.recalcSlides();const I=[];y.slides.forEach(F=>{const X=typeof F.swiperSlideIndex>"u"?1*F.getAttribute("data-swiper-slide-index"):F.swiperSlideIndex;I[X]=F}),y.slides.forEach(F=>{F.removeAttribute("data-swiper-slide-index")}),I.forEach(F=>{A.append(F)}),y.recalcSlides(),y.slideTo(y.realIndex,0)}},_1={setGrabCursor:function Xf(y){const h=this;if(!h.params.simulateTouch||h.params.watchOverflow&&h.isLocked||h.params.cssMode)return;const A="container"===h.params.touchEventsTarget?h.el:h.wrapperEl;h.isElement&&(h.__preventObserver__=!0),A.style.cursor="move",A.style.cursor=y?"grabbing":"grab",h.isElement&&requestAnimationFrame(()=>{h.__preventObserver__=!1})},unsetGrabCursor:function Ec(){const y=this;y.params.watchOverflow&&y.isLocked||y.params.cssMode||(y.isElement&&(y.__preventObserver__=!0),y["container"===y.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",y.isElement&&requestAnimationFrame(()=>{y.__preventObserver__=!1}))}};function S2(y,h,A){const I=xc(),{params:F}=y,X=F.edgeSwipeDetection,Me=F.edgeSwipeThreshold;return!X||!(A<=Me||A>=I.innerWidth-Me)||"prevent"===X&&(h.preventDefault(),!0)}function qm(y){const h=this,A=Hc();let I=y;I.originalEvent&&(I=I.originalEvent);const F=h.touchEventsData;if("pointerdown"===I.type){if(null!==F.pointerId&&F.pointerId!==I.pointerId)return;F.pointerId=I.pointerId}else"touchstart"===I.type&&1===I.targetTouches.length&&(F.touchId=I.targetTouches[0].identifier);if("touchstart"===I.type)return void S2(h,I,I.targetTouches[0].pageX);const{params:X,touches:Me,enabled:$e}=h;if(!$e||!X.simulateTouch&&"mouse"===I.pointerType||h.animating&&X.preventInteractionOnTransition)return;!h.animating&&X.cssMode&&X.loop&&h.loopFix();let ze=I.target;if("wrapper"===X.touchEventsTarget&&!h.wrapperEl.contains(ze)||"which"in I&&3===I.which||"button"in I&&I.button>0||F.isTouched&&F.isMoved)return;const ct=!!X.noSwipingClass&&""!==X.noSwipingClass,ot=I.composedPath?I.composedPath():I.path;ct&&I.target&&I.target.shadowRoot&&ot&&(ze=ot[0]);const pt=X.noSwipingSelector?X.noSwipingSelector:`.${X.noSwipingClass}`;if(X.noSwiping&&(I.target&&I.target.shadowRoot?function pm(y,h){return void 0===h&&(h=this),function A(I){if(!I||I===Hc()||I===xc())return null;I.assignedSlot&&(I=I.assignedSlot);const F=I.closest(y);return F||I.getRootNode?F||A(I.getRootNode().host):null}(h)}(pt,ze):ze.closest(pt)))return void(h.allowClick=!0);if(X.swipeHandler&&!ze.closest(X.swipeHandler))return;Me.currentX=I.pageX,Me.currentY=I.pageY;const sn=Me.currentX,pn=Me.currentY;if(!S2(h,I,sn))return;Object.assign(F,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Me.startX=sn,Me.startY=pn,F.touchStartTime=Sd(),h.allowClick=!0,h.updateSize(),h.swipeDirection=void 0,X.threshold>0&&(F.allowThresholdMove=!1);let gn=!0;ze.matches(F.focusableElements)&&(gn=!1,"SELECT"===ze.nodeName&&(F.isTouched=!1)),A.activeElement&&A.activeElement.matches(F.focusableElements)&&A.activeElement!==ze&&A.activeElement.blur(),(X.touchStartForcePreventDefault||gn&&h.allowTouchMove&&X.touchStartPreventDefault)&&!ze.isContentEditable&&I.preventDefault(),X.freeMode&&X.freeMode.enabled&&h.freeMode&&h.animating&&!X.cssMode&&h.freeMode.onTouchStart(),h.emit("touchStart",I)}function Kf(y){const h=Hc(),A=this,I=A.touchEventsData,{params:F,touches:X,rtlTranslate:Me,enabled:$e}=A;if(!$e||!F.simulateTouch&&"mouse"===y.pointerType)return;let ct,ze=y;if(ze.originalEvent&&(ze=ze.originalEvent),"pointermove"===ze.type&&(null!==I.touchId||ze.pointerId!==I.pointerId))return;if("touchmove"===ze.type){if(ct=[...ze.changedTouches].filter(Qo=>Qo.identifier===I.touchId)[0],!ct||ct.identifier!==I.touchId)return}else ct=ze;if(!I.isTouched)return void(I.startMoving&&I.isScrolling&&A.emit("touchMoveOpposite",ze));const ot=ct.pageX,pt=ct.pageY;if(ze.preventedByNestedSwiper)return X.startX=ot,void(X.startY=pt);if(!A.allowTouchMove)return ze.target.matches(I.focusableElements)||(A.allowClick=!1),void(I.isTouched&&(Object.assign(X,{startX:ot,startY:pt,currentX:ot,currentY:pt}),I.touchStartTime=Sd()));if(F.touchReleaseOnEdges&&!F.loop)if(A.isVertical()){if(pt<X.startY&&A.translate<=A.maxTranslate()||pt>X.startY&&A.translate>=A.minTranslate())return I.isTouched=!1,void(I.isMoved=!1)}else if(ot<X.startX&&A.translate<=A.maxTranslate()||ot>X.startX&&A.translate>=A.minTranslate())return;if(h.activeElement&&ze.target===h.activeElement&&ze.target.matches(I.focusableElements))return I.isMoved=!0,void(A.allowClick=!1);I.allowTouchCallbacks&&A.emit("touchMove",ze),X.previousX=X.currentX,X.previousY=X.currentY,X.currentX=ot,X.currentY=pt;const Ct=X.currentX-X.startX,sn=X.currentY-X.startY;if(A.params.threshold&&Math.sqrt(Ct**2+sn**2)<A.params.threshold)return;if(typeof I.isScrolling>"u"){let Qo;A.isHorizontal()&&X.currentY===X.startY||A.isVertical()&&X.currentX===X.startX?I.isScrolling=!1:Ct*Ct+sn*sn>=25&&(Qo=180*Math.atan2(Math.abs(sn),Math.abs(Ct))/Math.PI,I.isScrolling=A.isHorizontal()?Qo>F.touchAngle:90-Qo>F.touchAngle)}if(I.isScrolling&&A.emit("touchMoveOpposite",ze),typeof I.startMoving>"u"&&(X.currentX!==X.startX||X.currentY!==X.startY)&&(I.startMoving=!0),I.isScrolling||"touchmove"===ze.type&&I.preventTouchMoveFromPointerMove)return void(I.isTouched=!1);if(!I.startMoving)return;A.allowClick=!1,!F.cssMode&&ze.cancelable&&ze.preventDefault(),F.touchMoveStopPropagation&&!F.nested&&ze.stopPropagation();let pn=A.isHorizontal()?Ct:sn,gn=A.isHorizontal()?X.currentX-X.previousX:X.currentY-X.previousY;F.oneWayMovement&&(pn=Math.abs(pn)*(Me?1:-1),gn=Math.abs(gn)*(Me?1:-1)),X.diff=pn,pn*=F.touchRatio,Me&&(pn=-pn,gn=-gn);const yn=A.touchesDirection;A.swipeDirection=pn>0?"prev":"next",A.touchesDirection=gn>0?"prev":"next";const Rt=A.params.loop&&!F.cssMode,Bn="next"===A.touchesDirection&&A.allowSlideNext||"prev"===A.touchesDirection&&A.allowSlidePrev;if(!I.isMoved){if(Rt&&Bn&&A.loopFix({direction:A.swipeDirection}),I.startTranslate=A.getTranslate(),A.setTransition(0),A.animating){const Qo=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});A.wrapperEl.dispatchEvent(Qo)}I.allowMomentumBounce=!1,F.grabCursor&&(!0===A.allowSlideNext||!0===A.allowSlidePrev)&&A.setGrabCursor(!0),A.emit("sliderFirstMove",ze)}if((new Date).getTime(),I.isMoved&&I.allowThresholdMove&&yn!==A.touchesDirection&&Rt&&Bn&&Math.abs(pn)>=1)return Object.assign(X,{startX:ot,startY:pt,currentX:ot,currentY:pt,startTranslate:I.currentTranslate}),I.loopSwapReset=!0,void(I.startTranslate=I.currentTranslate);A.emit("sliderMove",ze),I.isMoved=!0,I.currentTranslate=pn+I.startTranslate;let si=!0,Si=F.resistanceRatio;if(F.touchReleaseOnEdges&&(Si=0),pn>0?(Rt&&Bn&&I.allowThresholdMove&&I.currentTranslate>(F.centeredSlides?A.minTranslate()-A.slidesSizesGrid[A.activeIndex+1]:A.minTranslate())&&A.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),I.currentTranslate>A.minTranslate()&&(si=!1,F.resistance&&(I.currentTranslate=A.minTranslate()-1+(-A.minTranslate()+I.startTranslate+pn)**Si))):pn<0&&(Rt&&Bn&&I.allowThresholdMove&&I.currentTranslate<(F.centeredSlides?A.maxTranslate()+A.slidesSizesGrid[A.slidesSizesGrid.length-1]:A.maxTranslate())&&A.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:A.slides.length-("auto"===F.slidesPerView?A.slidesPerViewDynamic():Math.ceil(parseFloat(F.slidesPerView,10)))}),I.currentTranslate<A.maxTranslate()&&(si=!1,F.resistance&&(I.currentTranslate=A.maxTranslate()+1-(A.maxTranslate()-I.startTranslate-pn)**Si))),si&&(ze.preventedByNestedSwiper=!0),!A.allowSlideNext&&"next"===A.swipeDirection&&I.currentTranslate<I.startTranslate&&(I.currentTranslate=I.startTranslate),!A.allowSlidePrev&&"prev"===A.swipeDirection&&I.currentTranslate>I.startTranslate&&(I.currentTranslate=I.startTranslate),!A.allowSlidePrev&&!A.allowSlideNext&&(I.currentTranslate=I.startTranslate),F.threshold>0){if(!(Math.abs(pn)>F.threshold||I.allowThresholdMove))return void(I.currentTranslate=I.startTranslate);if(!I.allowThresholdMove)return I.allowThresholdMove=!0,X.startX=X.currentX,X.startY=X.currentY,I.currentTranslate=I.startTranslate,void(X.diff=A.isHorizontal()?X.currentX-X.startX:X.currentY-X.startY)}!F.followFinger||F.cssMode||((F.freeMode&&F.freeMode.enabled&&A.freeMode||F.watchSlidesProgress)&&(A.updateActiveIndex(),A.updateSlidesClasses()),F.freeMode&&F.freeMode.enabled&&A.freeMode&&A.freeMode.onTouchMove(),A.updateProgress(I.currentTranslate),A.setTranslate(I.currentTranslate))}function r0(y){const h=this,A=h.touchEventsData;let F,I=y;if(I.originalEvent&&(I=I.originalEvent),"touchend"===I.type||"touchcancel"===I.type){if(F=[...I.changedTouches].filter(Si=>Si.identifier===A.touchId)[0],!F||F.identifier!==A.touchId)return}else{if(null!==A.touchId||I.pointerId!==A.pointerId)return;F=I}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(I.type)&&(!["pointercancel","contextmenu"].includes(I.type)||!h.browser.isSafari&&!h.browser.isWebView))return;A.pointerId=null,A.touchId=null;const{params:Me,touches:$e,rtlTranslate:ze,slidesGrid:ct,enabled:ot}=h;if(!ot||!Me.simulateTouch&&"mouse"===I.pointerType)return;if(A.allowTouchCallbacks&&h.emit("touchEnd",I),A.allowTouchCallbacks=!1,!A.isTouched)return A.isMoved&&Me.grabCursor&&h.setGrabCursor(!1),A.isMoved=!1,void(A.startMoving=!1);Me.grabCursor&&A.isMoved&&A.isTouched&&(!0===h.allowSlideNext||!0===h.allowSlidePrev)&&h.setGrabCursor(!1);const pt=Sd(),Ct=pt-A.touchStartTime;if(h.allowClick){const Si=I.path||I.composedPath&&I.composedPath();h.updateClickedSlide(Si&&Si[0]||I.target,Si),h.emit("tap click",I),Ct<300&&pt-A.lastClickTime<300&&h.emit("doubleTap doubleClick",I)}if(A.lastClickTime=Sd(),p1(()=>{h.destroyed||(h.allowClick=!0)}),!A.isTouched||!A.isMoved||!h.swipeDirection||0===$e.diff&&!A.loopSwapReset||A.currentTranslate===A.startTranslate&&!A.loopSwapReset)return A.isTouched=!1,A.isMoved=!1,void(A.startMoving=!1);let sn;if(A.isTouched=!1,A.isMoved=!1,A.startMoving=!1,sn=Me.followFinger?ze?h.translate:-h.translate:-A.currentTranslate,Me.cssMode)return;if(Me.freeMode&&Me.freeMode.enabled)return void h.freeMode.onTouchEnd({currentPos:sn});const pn=sn>=-h.maxTranslate()&&!h.params.loop;let gn=0,yn=h.slidesSizesGrid[0];for(let Si=0;Si<ct.length;Si+=Si<Me.slidesPerGroupSkip?1:Me.slidesPerGroup){const Qo=Si<Me.slidesPerGroupSkip-1?1:Me.slidesPerGroup;typeof ct[Si+Qo]<"u"?(pn||sn>=ct[Si]&&sn<ct[Si+Qo])&&(gn=Si,yn=ct[Si+Qo]-ct[Si]):(pn||sn>=ct[Si])&&(gn=Si,yn=ct[ct.length-1]-ct[ct.length-2])}let Rt=null,Bn=null;Me.rewind&&(h.isBeginning?Bn=Me.virtual&&Me.virtual.enabled&&h.virtual?h.virtual.slides.length-1:h.slides.length-1:h.isEnd&&(Rt=0));const vn=(sn-ct[gn])/yn,si=gn<Me.slidesPerGroupSkip-1?1:Me.slidesPerGroup;if(Ct>Me.longSwipesMs){if(!Me.longSwipes)return void h.slideTo(h.activeIndex);"next"===h.swipeDirection&&h.slideTo(vn>=Me.longSwipesRatio?Me.rewind&&h.isEnd?Rt:gn+si:gn),"prev"===h.swipeDirection&&(vn>1-Me.longSwipesRatio?h.slideTo(gn+si):null!==Bn&&vn<0&&Math.abs(vn)>Me.longSwipesRatio?h.slideTo(Bn):h.slideTo(gn))}else{if(!Me.shortSwipes)return void h.slideTo(h.activeIndex);!h.navigation||I.target!==h.navigation.nextEl&&I.target!==h.navigation.prevEl?("next"===h.swipeDirection&&h.slideTo(null!==Rt?Rt:gn+si),"prev"===h.swipeDirection&&h.slideTo(null!==Bn?Bn:gn)):h.slideTo(I.target===h.navigation.nextEl?gn+si:gn)}}function $h(){const y=this,{params:h,el:A}=y;if(A&&0===A.offsetWidth)return;h.breakpoints&&y.setBreakpoint();const{allowSlideNext:I,allowSlidePrev:F,snapGrid:X}=y,Me=y.virtual&&y.params.virtual.enabled;y.allowSlideNext=!0,y.allowSlidePrev=!0,y.updateSize(),y.updateSlides(),y.updateSlidesClasses(),!("auto"===h.slidesPerView||h.slidesPerView>1)||!y.isEnd||y.isBeginning||y.params.centeredSlides||Me&&h.loop?y.params.loop&&!Me?y.slideToLoop(y.realIndex,0,!1,!0):y.slideTo(y.activeIndex,0,!1,!0):y.slideTo(y.slides.length-1,0,!1,!0),y.autoplay&&y.autoplay.running&&y.autoplay.paused&&(clearTimeout(y.autoplay.resizeTimeout),y.autoplay.resizeTimeout=setTimeout(()=>{y.autoplay&&y.autoplay.running&&y.autoplay.paused&&y.autoplay.resume()},500)),y.allowSlidePrev=F,y.allowSlideNext=I,y.params.watchOverflow&&X!==y.snapGrid&&y.checkOverflow()}function Dl(y){const h=this;h.enabled&&(h.allowClick||(h.params.preventClicks&&y.preventDefault(),h.params.preventClicksPropagation&&h.animating&&(y.stopPropagation(),y.stopImmediatePropagation())))}function bu(){const y=this,{wrapperEl:h,rtlTranslate:A,enabled:I}=y;if(!I)return;let F;y.previousTranslate=y.translate,y.translate=y.isHorizontal()?-h.scrollLeft:-h.scrollTop,0===y.translate&&(y.translate=0),y.updateActiveIndex(),y.updateSlidesClasses();const X=y.maxTranslate()-y.minTranslate();F=0===X?0:(y.translate-y.minTranslate())/X,F!==y.progress&&y.updateProgress(A?-y.translate:y.translate),y.emit("setTranslate",y.translate,!1)}function Fc(y){const h=this;rp(h,y.target),!h.params.cssMode&&("auto"===h.params.slidesPerView||h.params.autoHeight)&&h.update()}function Dg(){const y=this;y.documentTouchHandlerProceeded||(y.documentTouchHandlerProceeded=!0,y.params.touchReleaseOnEdges&&(y.el.style.touchAction="auto"))}const Yl=(y,h)=>{const A=Hc(),{params:I,el:F,wrapperEl:X,device:Me}=y,$e=!!I.nested,ze="on"===h?"addEventListener":"removeEventListener",ct=h;!F||"string"==typeof F||(A[ze]("touchstart",y.onDocumentTouchStart,{passive:!1,capture:$e}),F[ze]("touchstart",y.onTouchStart,{passive:!1}),F[ze]("pointerdown",y.onTouchStart,{passive:!1}),A[ze]("touchmove",y.onTouchMove,{passive:!1,capture:$e}),A[ze]("pointermove",y.onTouchMove,{passive:!1,capture:$e}),A[ze]("touchend",y.onTouchEnd,{passive:!0}),A[ze]("pointerup",y.onTouchEnd,{passive:!0}),A[ze]("pointercancel",y.onTouchEnd,{passive:!0}),A[ze]("touchcancel",y.onTouchEnd,{passive:!0}),A[ze]("pointerout",y.onTouchEnd,{passive:!0}),A[ze]("pointerleave",y.onTouchEnd,{passive:!0}),A[ze]("contextmenu",y.onTouchEnd,{passive:!0}),(I.preventClicks||I.preventClicksPropagation)&&F[ze]("click",y.onClick,!0),I.cssMode&&X[ze]("scroll",y.onScroll),y[ct](I.updateOnWindowResize?Me.ios||Me.android?"resize orientationchange observerUpdate":"resize observerUpdate":"observerUpdate",$h,!0),F[ze]("load",y.onLoad,{capture:!0}))};var Xm={attachEvents:function ff(){const y=this,{params:h}=y;y.onTouchStart=qm.bind(y),y.onTouchMove=Kf.bind(y),y.onTouchEnd=r0.bind(y),y.onDocumentTouchStart=Dg.bind(y),h.cssMode&&(y.onScroll=bu.bind(y)),y.onClick=Dl.bind(y),y.onLoad=Fc.bind(y),Yl(y,"on")},detachEvents:function Zl(){Yl(this,"off")}};const mf=(y,h)=>y.grid&&h.grid&&h.grid.rows>1;var fm={setBreakpoint:function $d(){const y=this,{realIndex:h,initialized:A,params:I,el:F}=y,X=I.breakpoints;if(!X||X&&0===Object.keys(X).length)return;const Me=y.getBreakpoint(X,y.params.breakpointsBase,y.el);if(!Me||y.currentBreakpoint===Me)return;const ze=(Me in X?X[Me]:void 0)||y.originalParams,ct=mf(y,I),ot=mf(y,ze),pt=y.params.grabCursor,Ct=ze.grabCursor,sn=I.enabled;ct&&!ot?(F.classList.remove(`${I.containerModifierClass}grid`,`${I.containerModifierClass}grid-column`),y.emitContainerClasses()):!ct&&ot&&(F.classList.add(`${I.containerModifierClass}grid`),(ze.grid.fill&&"column"===ze.grid.fill||!ze.grid.fill&&"column"===I.grid.fill)&&F.classList.add(`${I.containerModifierClass}grid-column`),y.emitContainerClasses()),pt&&!Ct?y.unsetGrabCursor():!pt&&Ct&&y.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(vn=>{if(typeof ze[vn]>"u")return;const si=I[vn]&&I[vn].enabled,Si=ze[vn]&&ze[vn].enabled;si&&!Si&&y[vn].disable(),!si&&Si&&y[vn].enable()});const pn=ze.direction&&ze.direction!==I.direction,gn=I.loop&&(ze.slidesPerView!==I.slidesPerView||pn),yn=I.loop;pn&&A&&y.changeDirection(),tu(y.params,ze);const Rt=y.params.enabled,Bn=y.params.loop;Object.assign(y,{allowTouchMove:y.params.allowTouchMove,allowSlideNext:y.params.allowSlideNext,allowSlidePrev:y.params.allowSlidePrev}),sn&&!Rt?y.disable():!sn&&Rt&&y.enable(),y.currentBreakpoint=Me,y.emit("_beforeBreakpoint",ze),A&&(gn?(y.loopDestroy(),y.loopCreate(h),y.updateSlides()):!yn&&Bn?(y.loopCreate(h),y.updateSlides()):yn&&!Bn&&y.loopDestroy()),y.emit("breakpoint",ze)},getBreakpoint:function T2(y,h,A){if(void 0===h&&(h="window"),!y||"container"===h&&!A)return;let I=!1;const F=xc(),X="window"===h?F.innerHeight:A.clientHeight,Me=Object.keys(y).map($e=>{if("string"==typeof $e&&0===$e.indexOf("@")){const ze=parseFloat($e.substr(1));return{value:X*ze,point:$e}}return{value:$e,point:$e}});Me.sort(($e,ze)=>parseInt($e.value,10)-parseInt(ze.value,10));for(let $e=0;$e<Me.length;$e+=1){const{point:ze,value:ct}=Me[$e];"window"===h?F.matchMedia(`(min-width: ${ct}px)`).matches&&(I=ze):ct<=A.clientWidth&&(I=ze)}return I||"max"}},y1={addClasses:function s0(){const y=this,{classNames:h,params:A,rtl:I,el:F,device:X}=y,Me=function kp(y,h){const A=[];return y.forEach(I=>{"object"==typeof I?Object.keys(I).forEach(F=>{I[F]&&A.push(h+F)}):"string"==typeof I&&A.push(h+I)}),A}(["initialized",A.direction,{"free-mode":y.params.freeMode&&A.freeMode.enabled},{autoheight:A.autoHeight},{rtl:I},{grid:A.grid&&A.grid.rows>1},{"grid-column":A.grid&&A.grid.rows>1&&"column"===A.grid.fill},{android:X.android},{ios:X.ios},{"css-mode":A.cssMode},{centered:A.cssMode&&A.centeredSlides},{"watch-progress":A.watchSlidesProgress}],A.containerModifierClass);h.push(...Me),F.classList.add(...h),y.emitContainerClasses()},removeClasses:function Sp(){const{el:h,classNames:A}=this;!h||"string"==typeof h||(h.classList.remove(...A),this.emitContainerClasses())}},L0={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function M2(y,h){return function(I){void 0===I&&(I={});const F=Object.keys(I)[0],X=I[F];"object"==typeof X&&null!==X?(!0===y[F]&&(y[F]={enabled:!0}),"navigation"===F&&y[F]&&y[F].enabled&&!y[F].prevEl&&!y[F].nextEl&&(y[F].auto=!0),["pagination","scrollbar"].indexOf(F)>=0&&y[F]&&y[F].enabled&&!y[F].el&&(y[F].auto=!0),F in y&&"enabled"in X?("object"==typeof y[F]&&!("enabled"in y[F])&&(y[F].enabled=!0),y[F]||(y[F]={enabled:!1}),tu(h,I)):tu(h,I)):tu(h,I)}}const gf={eventsEmitter:Gc,update:g1,translate:dm,transition:N1,slide:oa,loop:cp,grabCursor:_1,events:Xm,breakpoints:fm,checkOverflow:{checkOverflow:function Pg(){const y=this,{isLocked:h,params:A}=y,{slidesOffsetBefore:I}=A;if(I){const F=y.slides.length-1;y.isLocked=y.size>y.slidesGrid[F]+y.slidesSizesGrid[F]+2*I}else y.isLocked=1===y.snapGrid.length;!0===A.allowSlideNext&&(y.allowSlideNext=!y.isLocked),!0===A.allowSlidePrev&&(y.allowSlidePrev=!y.isLocked),h&&h!==y.isLocked&&(y.isEnd=!1),h!==y.isLocked&&y.emit(y.isLocked?"lock":"unlock")}},classes:y1},Tp={};class wu{constructor(){let h,A;for(var I=arguments.length,F=new Array(I),X=0;X<I;X++)F[X]=arguments[X];1===F.length&&F[0].constructor&&"Object"===Object.prototype.toString.call(F[0]).slice(8,-1)?A=F[0]:[h,A]=F,A||(A={}),A=tu({},A),h&&!A.el&&(A.el=h);const Me=Hc();if(A.el&&"string"==typeof A.el&&Me.querySelectorAll(A.el).length>1){const ot=[];return Me.querySelectorAll(A.el).forEach(pt=>{const Ct=tu({},A,{el:pt});ot.push(new wu(Ct))}),ot}const $e=this;$e.__swiper__=!0,$e.support=np(),$e.device=O1({userAgent:A.userAgent}),$e.browser=function cm(){return I2||(I2=function uf(){const y=xc(),h=O1();let A=!1;function I(){const $e=y.navigator.userAgent.toLowerCase();return $e.indexOf("safari")>=0&&$e.indexOf("chrome")<0&&$e.indexOf("android")<0}if(I()){const $e=String(y.navigator.userAgent);if($e.includes("Version/")){const[ze,ct]=$e.split("Version/")[1].split(" ")[0].split(".").map(ot=>Number(ot));A=ze<16||16===ze&&ct<2}}const F=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(y.navigator.userAgent),X=I();return{isSafari:A||X,needPerspectiveFix:A,need3dFix:X||F&&h.ios,isWebView:F}}()),I2}(),$e.eventsListeners={},$e.eventsAnyListeners=[],$e.modules=[...$e.__modules__],A.modules&&Array.isArray(A.modules)&&$e.modules.push(...A.modules);const ze={};$e.modules.forEach(ot=>{ot({params:A,swiper:$e,extendParams:M2(A,ze),on:$e.on.bind($e),once:$e.once.bind($e),off:$e.off.bind($e),emit:$e.emit.bind($e)})});const ct=tu({},L0,ze);return $e.params=tu({},ct,Tp,A),$e.originalParams=tu({},$e.params),$e.passedParams=tu({},A),$e.params&&$e.params.on&&Object.keys($e.params.on).forEach(ot=>{$e.on(ot,$e.params.on[ot])}),$e.params&&$e.params.onAny&&$e.onAny($e.params.onAny),Object.assign($e,{enabled:$e.params.enabled,el:h,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===$e.params.direction,isVertical:()=>"vertical"===$e.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:$e.params.allowSlideNext,allowSlidePrev:$e.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:$e.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:$e.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),$e.emit("_swiper"),$e.params.init&&$e.init(),$e}getDirectionLabel(h){return this.isHorizontal()?h:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[h]}getSlideIndex(h){const{slidesEl:A,params:I}=this,X=Q0(md(A,`.${I.slideClass}, swiper-slide`)[0]);return Q0(h)-X}getSlideIndexByData(h){return this.getSlideIndex(this.slides.filter(A=>1*A.getAttribute("data-swiper-slide-index")===h)[0])}recalcSlides(){const{slidesEl:A,params:I}=this;this.slides=md(A,`.${I.slideClass}, swiper-slide`)}enable(){const h=this;h.enabled||(h.enabled=!0,h.params.grabCursor&&h.setGrabCursor(),h.emit("enable"))}disable(){const h=this;h.enabled&&(h.enabled=!1,h.params.grabCursor&&h.unsetGrabCursor(),h.emit("disable"))}setProgress(h,A){const I=this;h=Math.min(Math.max(h,0),1);const F=I.minTranslate(),Me=(I.maxTranslate()-F)*h+F;I.translateTo(Me,typeof A>"u"?0:A),I.updateActiveIndex(),I.updateSlidesClasses()}emitContainerClasses(){const h=this;if(!h.params._emitClasses||!h.el)return;const A=h.el.className.split(" ").filter(I=>0===I.indexOf("swiper")||0===I.indexOf(h.params.containerModifierClass));h.emit("_containerClasses",A.join(" "))}getSlideClasses(h){const A=this;return A.destroyed?"":h.className.split(" ").filter(I=>0===I.indexOf("swiper-slide")||0===I.indexOf(A.params.slideClass)).join(" ")}emitSlidesClasses(){const h=this;if(!h.params._emitClasses||!h.el)return;const A=[];h.slides.forEach(I=>{const F=h.getSlideClasses(I);A.push({slideEl:I,classNames:F}),h.emit("_slideClass",I,F)}),h.emit("_slideClasses",A)}slidesPerViewDynamic(h,A){void 0===h&&(h="current"),void 0===A&&(A=!1);const{params:F,slides:X,slidesGrid:Me,slidesSizesGrid:$e,size:ze,activeIndex:ct}=this;let ot=1;if("number"==typeof F.slidesPerView)return F.slidesPerView;if(F.centeredSlides){let Ct,pt=X[ct]?Math.ceil(X[ct].swiperSlideSize):0;for(let sn=ct+1;sn<X.length;sn+=1)X[sn]&&!Ct&&(pt+=Math.ceil(X[sn].swiperSlideSize),ot+=1,pt>ze&&(Ct=!0));for(let sn=ct-1;sn>=0;sn-=1)X[sn]&&!Ct&&(pt+=X[sn].swiperSlideSize,ot+=1,pt>ze&&(Ct=!0))}else if("current"===h)for(let pt=ct+1;pt<X.length;pt+=1)(A?Me[pt]+$e[pt]-Me[ct]<ze:Me[pt]-Me[ct]<ze)&&(ot+=1);else for(let pt=ct-1;pt>=0;pt-=1)Me[ct]-Me[pt]<ze&&(ot+=1);return ot}update(){const h=this;if(!h||h.destroyed)return;const{snapGrid:A,params:I}=h;function F(){const $e=Math.min(Math.max(h.rtlTranslate?-1*h.translate:h.translate,h.maxTranslate()),h.minTranslate());h.setTranslate($e),h.updateActiveIndex(),h.updateSlidesClasses()}let X;I.breakpoints&&h.setBreakpoint(),[...h.el.querySelectorAll('[loading="lazy"]')].forEach(Me=>{Me.complete&&rp(h,Me)}),h.updateSize(),h.updateSlides(),h.updateProgress(),h.updateSlidesClasses(),I.freeMode&&I.freeMode.enabled&&!I.cssMode?(F(),I.autoHeight&&h.updateAutoHeight()):(X=h.slideTo(("auto"===I.slidesPerView||I.slidesPerView>1)&&h.isEnd&&!I.centeredSlides?(h.virtual&&I.virtual.enabled?h.virtual.slides:h.slides).length-1:h.activeIndex,0,!1,!0),X||F()),I.watchOverflow&&A!==h.snapGrid&&h.checkOverflow(),h.emit("update")}changeDirection(h,A){void 0===A&&(A=!0);const I=this,F=I.params.direction;return h||(h="horizontal"===F?"vertical":"horizontal"),h===F||"horizontal"!==h&&"vertical"!==h||(I.el.classList.remove(`${I.params.containerModifierClass}${F}`),I.el.classList.add(`${I.params.containerModifierClass}${h}`),I.emitContainerClasses(),I.params.direction=h,I.slides.forEach(X=>{"vertical"===h?X.style.width="":X.style.height=""}),I.emit("changeDirection"),A&&I.update()),I}changeLanguageDirection(h){const A=this;A.rtl&&"rtl"===h||!A.rtl&&"ltr"===h||(A.rtl="rtl"===h,A.rtlTranslate="horizontal"===A.params.direction&&A.rtl,A.rtl?(A.el.classList.add(`${A.params.containerModifierClass}rtl`),A.el.dir="rtl"):(A.el.classList.remove(`${A.params.containerModifierClass}rtl`),A.el.dir="ltr"),A.update())}mount(h){const A=this;if(A.mounted)return!0;let I=h||A.params.el;if("string"==typeof I&&(I=document.querySelector(I)),!I)return!1;I.swiper=A,I.parentNode&&I.parentNode.host&&I.parentNode.host.nodeName===A.params.swiperElementNodeName.toUpperCase()&&(A.isElement=!0);const F=()=>`.${(A.params.wrapperClass||"").trim().split(" ").join(".")}`;let Me=I&&I.shadowRoot&&I.shadowRoot.querySelector?I.shadowRoot.querySelector(F()):md(I,F())[0];return!Me&&A.params.createElements&&(Me=zu("div",A.params.wrapperClass),I.append(Me),md(I,`.${A.params.slideClass}`).forEach($e=>{Me.append($e)})),Object.assign(A,{el:I,wrapperEl:Me,slidesEl:A.isElement&&!I.parentNode.host.slideSlots?I.parentNode.host:Me,hostEl:A.isElement?I.parentNode.host:I,mounted:!0,rtl:"rtl"===I.dir.toLowerCase()||"rtl"===f1(I,"direction"),rtlTranslate:"horizontal"===A.params.direction&&("rtl"===I.dir.toLowerCase()||"rtl"===f1(I,"direction")),wrongRTL:"-webkit-box"===f1(Me,"display")}),!0}init(h){const A=this;if(A.initialized||!1===A.mount(h))return A;A.emit("beforeInit"),A.params.breakpoints&&A.setBreakpoint(),A.addClasses(),A.updateSize(),A.updateSlides(),A.params.watchOverflow&&A.checkOverflow(),A.params.grabCursor&&A.enabled&&A.setGrabCursor(),A.slideTo(A.params.loop&&A.virtual&&A.params.virtual.enabled?A.params.initialSlide+A.virtual.slidesBefore:A.params.initialSlide,0,A.params.runCallbacksOnInit,!1,!0),A.params.loop&&A.loopCreate(),A.attachEvents();const F=[...A.el.querySelectorAll('[loading="lazy"]')];return A.isElement&&F.push(...A.hostEl.querySelectorAll('[loading="lazy"]')),F.forEach(X=>{X.complete?rp(A,X):X.addEventListener("load",Me=>{rp(A,Me.target)})}),Zu(A),A.initialized=!0,Zu(A),A.emit("init"),A.emit("afterInit"),A}destroy(h,A){void 0===h&&(h=!0),void 0===A&&(A=!0);const I=this,{params:F,el:X,wrapperEl:Me,slides:$e}=I;return typeof I.params>"u"||I.destroyed||(I.emit("beforeDestroy"),I.initialized=!1,I.detachEvents(),F.loop&&I.loopDestroy(),A&&(I.removeClasses(),X&&"string"!=typeof X&&X.removeAttribute("style"),Me&&Me.removeAttribute("style"),$e&&$e.length&&$e.forEach(ze=>{ze.classList.remove(F.slideVisibleClass,F.slideFullyVisibleClass,F.slideActiveClass,F.slideNextClass,F.slidePrevClass),ze.removeAttribute("style"),ze.removeAttribute("data-swiper-slide-index")})),I.emit("destroy"),Object.keys(I.eventsListeners).forEach(ze=>{I.off(ze)}),!1!==h&&(I.el&&"string"!=typeof I.el&&(I.el.swiper=null),function eu(y){const h=y;Object.keys(h).forEach(A=>{try{h[A]=null}catch{}try{delete h[A]}catch{}})}(I)),I.destroyed=!0),null}static extendDefaults(h){tu(Tp,h)}static get extendedDefaults(){return Tp}static get defaults(){return L0}static installModule(h){wu.prototype.__modules__||(wu.prototype.__modules__=[]);const A=wu.prototype.__modules__;"function"==typeof h&&A.indexOf(h)<0&&A.push(h)}static use(h){return Array.isArray(h)?(h.forEach(A=>wu.installModule(A)),wu):(wu.installModule(h),wu)}}function b1(y,h,A,I){return y.params.createElements&&Object.keys(I).forEach(F=>{if(!A[F]&&!0===A.auto){let X=md(y.el,`.${I[F]}`)[0];X||(X=zu("div",I[F]),X.className=I[F],y.el.append(X)),A[F]=X,h[F]=X}}),A}function Ks(y){return void 0===y&&(y=""),`.${y.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Rg(y){const h=this,{params:A,slidesEl:I}=h;A.loop&&h.loopDestroy();const F=X=>{if("string"==typeof X){const Me=document.createElement("div");Me.innerHTML=X,I.append(Me.children[0]),Me.innerHTML=""}else I.append(X)};if("object"==typeof y&&"length"in y)for(let X=0;X<y.length;X+=1)y[X]&&F(y[X]);else F(y);h.recalcSlides(),A.loop&&h.loopCreate(),(!A.observer||h.isElement)&&h.update()}function Zf(y){const h=this,{params:A,activeIndex:I,slidesEl:F}=h;A.loop&&h.loopDestroy();let X=I+1;const Me=$e=>{if("string"==typeof $e){const ze=document.createElement("div");ze.innerHTML=$e,F.prepend(ze.children[0]),ze.innerHTML=""}else F.prepend($e)};if("object"==typeof y&&"length"in y){for(let $e=0;$e<y.length;$e+=1)y[$e]&&Me(y[$e]);X=I+y.length}else Me(y);h.recalcSlides(),A.loop&&h.loopCreate(),(!A.observer||h.isElement)&&h.update(),h.slideTo(X,0,!1)}function R2(y,h){const A=this,{params:I,activeIndex:F,slidesEl:X}=A;let Me=F;I.loop&&(Me-=A.loopedSlides,A.loopDestroy(),A.recalcSlides());const $e=A.slides.length;if(y<=0)return void A.prependSlide(h);if(y>=$e)return void A.appendSlide(h);let ze=Me>y?Me+1:Me;const ct=[];for(let ot=$e-1;ot>=y;ot-=1){const pt=A.slides[ot];pt.remove(),ct.unshift(pt)}if("object"==typeof h&&"length"in h){for(let ot=0;ot<h.length;ot+=1)h[ot]&&X.append(h[ot]);ze=Me>y?Me+h.length:Me}else X.append(h);for(let ot=0;ot<ct.length;ot+=1)X.append(ct[ot]);A.recalcSlides(),I.loop&&A.loopCreate(),(!I.observer||A.isElement)&&A.update(),A.slideTo(I.loop?ze+A.loopedSlides:ze,0,!1)}function z2(y){const h=this,{params:A,activeIndex:I}=h;let F=I;A.loop&&(F-=h.loopedSlides,h.loopDestroy());let Me,X=F;if("object"==typeof y&&"length"in y){for(let $e=0;$e<y.length;$e+=1)Me=y[$e],h.slides[Me]&&h.slides[Me].remove(),Me<X&&(X-=1);X=Math.max(X,0)}else Me=y,h.slides[Me]&&h.slides[Me].remove(),Me<X&&(X-=1),X=Math.max(X,0);h.recalcSlides(),A.loop&&h.loopCreate(),(!A.observer||h.isElement)&&h.update(),h.slideTo(A.loop?X+h.loopedSlides:X,0,!1)}function ic(){const y=this,h=[];for(let A=0;A<y.slides.length;A+=1)h.push(A);y.removeSlide(h)}function Ju(y){const{effect:h,swiper:A,on:I,setTranslate:F,setTransition:X,overwriteParams:Me,perspective:$e,recreateShadows:ze,getEffectParams:ct}=y;let ot;I("beforeInit",()=>{if(A.params.effect!==h)return;A.classNames.push(`${A.params.containerModifierClass}${h}`),$e&&$e()&&A.classNames.push(`${A.params.containerModifierClass}3d`);const pt=Me?Me():{};Object.assign(A.params,pt),Object.assign(A.originalParams,pt)}),I("setTranslate",()=>{A.params.effect===h&&F()}),I("setTransition",(pt,Ct)=>{A.params.effect===h&&X(Ct)}),I("transitionEnd",()=>{if(A.params.effect===h&&ze){if(!ct||!ct().slideShadows)return;A.slides.forEach(pt=>{pt.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(Ct=>Ct.remove())}),ze()}}),I("virtualUpdate",()=>{A.params.effect===h&&(A.slides.length||(ot=!0),requestAnimationFrame(()=>{ot&&A.slides&&A.slides.length&&(F(),ot=!1)}))})}function El(y,h){const A=Z0(h);return A!==h&&(A.style.backfaceVisibility="hidden",A.style["-webkit-backface-visibility"]="hidden"),A}function pl(y){let{swiper:h,duration:A,transformElements:I,allSlides:F}=y;const{activeIndex:X}=h;if(h.params.virtualTranslate&&0!==A){let ze,$e=!1;ze=F?I:I.filter(ct=>{const ot=ct.classList.contains("swiper-slide-transform")?($e=>$e.parentElement?$e.parentElement:h.slides.filter(ct=>ct.shadowRoot&&ct.shadowRoot===$e.parentNode)[0])(ct):ct;return h.getSlideIndex(ot)===X}),ze.forEach(ct=>{e1(ct,()=>{if($e||!h||h.destroyed)return;$e=!0,h.animating=!1;const ot=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});h.wrapperEl.dispatchEvent(ot)})})}}function Dp(y,h,A){const I=`swiper-slide-shadow${A?`-${A}`:""}${y?` swiper-slide-shadow-${y}`:""}`,F=Z0(h);let X=F.querySelector(`.${I.split(" ").join(".")}`);return X||(X=zu("div",I.split(" ")),F.append(X)),X}Object.keys(gf).forEach(y=>{Object.keys(gf[y]).forEach(h=>{wu.prototype[h]=gf[y][h]})}),wu.use([function m1(y){let{swiper:h,on:A,emit:I}=y;const F=xc();let X=null,Me=null;const $e=()=>{!h||h.destroyed||!h.initialized||(I("beforeResize"),I("resize"))},ot=()=>{!h||h.destroyed||!h.initialized||I("orientationchange")};A("init",()=>{h.params.resizeObserver&&typeof F.ResizeObserver<"u"?!h||h.destroyed||!h.initialized||(X=new ResizeObserver(pt=>{Me=F.requestAnimationFrame(()=>{const{width:Ct,height:sn}=h;let pn=Ct,gn=sn;pt.forEach(yn=>{let{contentBoxSize:Rt,contentRect:Bn,target:vn}=yn;vn&&vn!==h.el||(pn=Bn?Bn.width:(Rt[0]||Rt).inlineSize,gn=Bn?Bn.height:(Rt[0]||Rt).blockSize)}),(pn!==Ct||gn!==sn)&&$e()})}),X.observe(h.el)):(F.addEventListener("resize",$e),F.addEventListener("orientationchange",ot))}),A("destroy",()=>{Me&&F.cancelAnimationFrame(Me),X&&X.unobserve&&h.el&&(X.unobserve(h.el),X=null),F.removeEventListener("resize",$e),F.removeEventListener("orientationchange",ot)})},function ip(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const X=[],Me=xc(),$e=function(ot,pt){void 0===pt&&(pt={});const sn=new(Me.MutationObserver||Me.WebkitMutationObserver)(pn=>{if(h.__preventObserver__)return;if(1===pn.length)return void F("observerUpdate",pn[0]);const gn=function(){F("observerUpdate",pn[0])};Me.requestAnimationFrame?Me.requestAnimationFrame(gn):Me.setTimeout(gn,0)});sn.observe(ot,{attributes:typeof pt.attributes>"u"||pt.attributes,childList:h.isElement||(typeof pt.childList>"u"||pt).childList,characterData:typeof pt.characterData>"u"||pt.characterData}),X.push(sn)};A({observer:!1,observeParents:!1,observeSlideChildren:!1}),I("init",()=>{if(h.params.observer){if(h.params.observeParents){const ot=J0(h.hostEl);for(let pt=0;pt<ot.length;pt+=1)$e(ot[pt])}$e(h.hostEl,{childList:h.params.observeSlideChildren}),$e(h.wrapperEl,{attributes:!1})}}),I("destroy",()=>{X.forEach(ot=>{ot.disconnect()}),X.splice(0,X.length)})}]);const u4=[function A2(y){let X,{swiper:h,extendParams:A,on:I,emit:F}=y;A({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});const Me=Hc();h.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const $e=Me.createElement("div");function ze(pn,gn){const yn=h.params.virtual;if(yn.cache&&h.virtual.cache[gn])return h.virtual.cache[gn];let Rt;return yn.renderSlide?(Rt=yn.renderSlide.call(h,pn,gn),"string"==typeof Rt&&($e.innerHTML=Rt,Rt=$e.children[0])):Rt=h.isElement?zu("swiper-slide"):zu("div",h.params.slideClass),Rt.setAttribute("data-swiper-slide-index",gn),yn.renderSlide||(Rt.innerHTML=pn),yn.cache&&(h.virtual.cache[gn]=Rt),Rt}function ct(pn,gn){const{slidesPerView:yn,slidesPerGroup:Rt,centeredSlides:Bn,loop:vn,initialSlide:si}=h.params;if(gn&&!vn&&si>0)return;const{addSlidesBefore:Si,addSlidesAfter:Qo}=h.params.virtual,{from:ur,to:Bo,slides:no,slidesGrid:To,offset:Jo}=h.virtual;h.params.cssMode||h.updateActiveIndex();const mo=h.activeIndex||0;let ho,Ro,fr;ho=h.rtlTranslate?"right":h.isHorizontal()?"left":"top",Bn?(Ro=Math.floor(yn/2)+Rt+Qo,fr=Math.floor(yn/2)+Rt+Si):(Ro=yn+(Rt-1)+Qo,fr=(vn?yn:Rt)+Si);let Rs=mo-fr,$o=mo+Ro;vn||(Rs=Math.max(Rs,0),$o=Math.min($o,no.length-1));let Ho=(h.slidesGrid[Rs]||0)-(h.slidesGrid[0]||0);function Or(){h.updateSlides(),h.updateProgress(),h.updateSlidesClasses(),F("virtualUpdate")}if(vn&&mo>=fr?(Rs-=fr,Bn||(Ho+=h.slidesGrid[0])):vn&&mo<fr&&(Rs=-fr,Bn&&(Ho+=h.slidesGrid[0])),Object.assign(h.virtual,{from:Rs,to:$o,offset:Ho,slidesGrid:h.slidesGrid,slidesBefore:fr,slidesAfter:Ro}),ur===Rs&&Bo===$o&&!pn)return h.slidesGrid!==To&&Ho!==Jo&&h.slides.forEach(qs=>{qs.style[ho]=Ho-Math.abs(h.cssOverflowAdjustment())+"px"}),h.updateProgress(),void F("virtualUpdate");if(h.params.virtual.renderExternal)return h.params.virtual.renderExternal.call(h,{offset:Ho,from:Rs,to:$o,slides:function(){const oc=[];for(let c0=Rs;c0<=$o;c0+=1)oc.push(no[c0]);return oc}()}),void(h.params.virtual.renderExternalUpdate?Or():F("virtualUpdate"));const Ma=[],wo=[],Gr=qs=>{let oc=qs;return qs<0?oc=no.length+qs:oc>=no.length&&(oc-=no.length),oc};if(pn)h.slides.filter(qs=>qs.matches(`.${h.params.slideClass}, swiper-slide`)).forEach(qs=>{qs.remove()});else for(let qs=ur;qs<=Bo;qs+=1)if(qs<Rs||qs>$o){const oc=Gr(qs);h.slides.filter(c0=>c0.matches(`.${h.params.slideClass}[data-swiper-slide-index="${oc}"], swiper-slide[data-swiper-slide-index="${oc}"]`)).forEach(c0=>{c0.remove()})}const iu=vn?2*no.length:no.length;for(let qs=vn?-no.length:0;qs<iu;qs+=1)if(qs>=Rs&&qs<=$o){const oc=Gr(qs);typeof Bo>"u"||pn?wo.push(oc):(qs>Bo&&wo.push(oc),qs<ur&&Ma.push(oc))}if(wo.forEach(qs=>{h.slidesEl.append(ze(no[qs],qs))}),vn)for(let qs=Ma.length-1;qs>=0;qs-=1){const oc=Ma[qs];h.slidesEl.prepend(ze(no[oc],oc))}else Ma.sort((qs,oc)=>oc-qs),Ma.forEach(qs=>{h.slidesEl.prepend(ze(no[qs],qs))});md(h.slidesEl,".swiper-slide, swiper-slide").forEach(qs=>{qs.style[ho]=Ho-Math.abs(h.cssOverflowAdjustment())+"px"}),Or()}I("beforeInit",()=>{if(!h.params.virtual.enabled)return;let pn;if(typeof h.passedParams.virtual.slides>"u"){const gn=[...h.slidesEl.children].filter(yn=>yn.matches(`.${h.params.slideClass}, swiper-slide`));gn&&gn.length&&(h.virtual.slides=[...gn],pn=!0,gn.forEach((yn,Rt)=>{yn.setAttribute("data-swiper-slide-index",Rt),h.virtual.cache[Rt]=yn,yn.remove()}))}pn||(h.virtual.slides=h.params.virtual.slides),h.classNames.push(`${h.params.containerModifierClass}virtual`),h.params.watchSlidesProgress=!0,h.originalParams.watchSlidesProgress=!0,ct(!1,!0)}),I("setTranslate",()=>{h.params.virtual.enabled&&(h.params.cssMode&&!h._immediateVirtual?(clearTimeout(X),X=setTimeout(()=>{ct()},100)):ct())}),I("init update resize",()=>{h.params.virtual.enabled&&h.params.cssMode&&Al(h.wrapperEl,"--swiper-virtual-size",`${h.virtualSize}px`)}),Object.assign(h.virtual,{appendSlide:function ot(pn){if("object"==typeof pn&&"length"in pn)for(let gn=0;gn<pn.length;gn+=1)pn[gn]&&h.virtual.slides.push(pn[gn]);else h.virtual.slides.push(pn);ct(!0)},prependSlide:function pt(pn){const gn=h.activeIndex;let yn=gn+1,Rt=1;if(Array.isArray(pn)){for(let Bn=0;Bn<pn.length;Bn+=1)pn[Bn]&&h.virtual.slides.unshift(pn[Bn]);yn=gn+pn.length,Rt=pn.length}else h.virtual.slides.unshift(pn);if(h.params.virtual.cache){const Bn=h.virtual.cache,vn={};Object.keys(Bn).forEach(si=>{const Si=Bn[si],Qo=Si.getAttribute("data-swiper-slide-index");Qo&&Si.setAttribute("data-swiper-slide-index",parseInt(Qo,10)+Rt),vn[parseInt(si,10)+Rt]=Si}),h.virtual.cache=vn}ct(!0),h.slideTo(yn,0)},removeSlide:function Ct(pn){if(typeof pn>"u"||null===pn)return;let gn=h.activeIndex;if(Array.isArray(pn))for(let yn=pn.length-1;yn>=0;yn-=1)h.params.virtual.cache&&(delete h.virtual.cache[pn[yn]],Object.keys(h.virtual.cache).forEach(Rt=>{Rt>pn&&(h.virtual.cache[Rt-1]=h.virtual.cache[Rt],h.virtual.cache[Rt-1].setAttribute("data-swiper-slide-index",Rt-1),delete h.virtual.cache[Rt])})),h.virtual.slides.splice(pn[yn],1),pn[yn]<gn&&(gn-=1),gn=Math.max(gn,0);else h.params.virtual.cache&&(delete h.virtual.cache[pn],Object.keys(h.virtual.cache).forEach(yn=>{yn>pn&&(h.virtual.cache[yn-1]=h.virtual.cache[yn],h.virtual.cache[yn-1].setAttribute("data-swiper-slide-index",yn-1),delete h.virtual.cache[yn])})),h.virtual.slides.splice(pn,1),pn<gn&&(gn-=1),gn=Math.max(gn,0);ct(!0),h.slideTo(gn,0)},removeAllSlides:function sn(){h.virtual.slides=[],h.params.virtual.cache&&(h.virtual.cache={}),ct(!0),h.slideTo(0,0)},update:ct})},function D2(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const X=Hc(),Me=xc();function $e(ot){if(!h.enabled)return;const{rtlTranslate:pt}=h;let Ct=ot;Ct.originalEvent&&(Ct=Ct.originalEvent);const sn=Ct.keyCode||Ct.charCode,pn=h.params.keyboard.pageUpDown,gn=pn&&33===sn,yn=pn&&34===sn,Rt=37===sn,Bn=39===sn,vn=38===sn,si=40===sn;if(!h.allowSlideNext&&(h.isHorizontal()&&Bn||h.isVertical()&&si||yn)||!h.allowSlidePrev&&(h.isHorizontal()&&Rt||h.isVertical()&&vn||gn))return!1;if(!(Ct.shiftKey||Ct.altKey||Ct.ctrlKey||Ct.metaKey||X.activeElement&&X.activeElement.nodeName&&("input"===X.activeElement.nodeName.toLowerCase()||"textarea"===X.activeElement.nodeName.toLowerCase()))){if(h.params.keyboard.onlyInViewport&&(gn||yn||Rt||Bn||vn||si)){let Si=!1;if(J0(h.el,`.${h.params.slideClass}, swiper-slide`).length>0&&0===J0(h.el,`.${h.params.slideActiveClass}`).length)return;const Qo=h.el,ur=Qo.clientWidth,Bo=Qo.clientHeight,no=Me.innerWidth,To=Me.innerHeight,Jo=tp(Qo);pt&&(Jo.left-=Qo.scrollLeft);const mo=[[Jo.left,Jo.top],[Jo.left+ur,Jo.top],[Jo.left,Jo.top+Bo],[Jo.left+ur,Jo.top+Bo]];for(let ho=0;ho<mo.length;ho+=1){const Ro=mo[ho];if(Ro[0]>=0&&Ro[0]<=no&&Ro[1]>=0&&Ro[1]<=To){if(0===Ro[0]&&0===Ro[1])continue;Si=!0}}if(!Si)return}h.isHorizontal()?((gn||yn||Rt||Bn)&&(Ct.preventDefault?Ct.preventDefault():Ct.returnValue=!1),((yn||Bn)&&!pt||(gn||Rt)&&pt)&&h.slideNext(),((gn||Rt)&&!pt||(yn||Bn)&&pt)&&h.slidePrev()):((gn||yn||vn||si)&&(Ct.preventDefault?Ct.preventDefault():Ct.returnValue=!1),(yn||si)&&h.slideNext(),(gn||vn)&&h.slidePrev()),F("keyPress",sn)}}function ze(){h.keyboard.enabled||(X.addEventListener("keydown",$e),h.keyboard.enabled=!0)}function ct(){h.keyboard.enabled&&(X.removeEventListener("keydown",$e),h.keyboard.enabled=!1)}h.keyboard={enabled:!1},A({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),I("init",()=>{h.params.keyboard.enabled&&ze()}),I("destroy",()=>{h.keyboard.enabled&&ct()}),Object.assign(h.keyboard,{enable:ze,disable:ct})},function Mp(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const X=xc();A({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),h.mousewheel={enabled:!1};let Me,ze,$e=Sd();const ct=[];function pt(){h.enabled&&(h.mouseEntered=!0)}function Ct(){h.enabled&&(h.mouseEntered=!1)}function sn(vn){return!(h.params.mousewheel.thresholdDelta&&vn.delta<h.params.mousewheel.thresholdDelta||h.params.mousewheel.thresholdTime&&Sd()-$e<h.params.mousewheel.thresholdTime)&&(vn.delta>=6&&Sd()-$e<60||(vn.direction<0?(!h.isEnd||h.params.loop)&&!h.animating&&(h.slideNext(),F("scroll",vn.raw)):(!h.isBeginning||h.params.loop)&&!h.animating&&(h.slidePrev(),F("scroll",vn.raw)),$e=(new X.Date).getTime(),!1))}function gn(vn){let si=vn,Si=!0;if(!h.enabled||vn.target.closest(`.${h.params.mousewheel.noMousewheelClass}`))return;const Qo=h.params.mousewheel;h.params.cssMode&&si.preventDefault();let ur=h.el;"container"!==h.params.mousewheel.eventsTarget&&(ur=document.querySelector(h.params.mousewheel.eventsTarget));const Bo=ur&&ur.contains(si.target);if(!h.mouseEntered&&!Bo&&!Qo.releaseOnEdges)return!0;si.originalEvent&&(si=si.originalEvent);let no=0;const To=h.rtlTranslate?-1:1,Jo=function ot(vn){let ur=0,Bo=0,no=0,To=0;return"detail"in vn&&(Bo=vn.detail),"wheelDelta"in vn&&(Bo=-vn.wheelDelta/120),"wheelDeltaY"in vn&&(Bo=-vn.wheelDeltaY/120),"wheelDeltaX"in vn&&(ur=-vn.wheelDeltaX/120),"axis"in vn&&vn.axis===vn.HORIZONTAL_AXIS&&(ur=Bo,Bo=0),no=10*ur,To=10*Bo,"deltaY"in vn&&(To=vn.deltaY),"deltaX"in vn&&(no=vn.deltaX),vn.shiftKey&&!no&&(no=To,To=0),(no||To)&&vn.deltaMode&&(1===vn.deltaMode?(no*=40,To*=40):(no*=800,To*=800)),no&&!ur&&(ur=no<1?-1:1),To&&!Bo&&(Bo=To<1?-1:1),{spinX:ur,spinY:Bo,pixelX:no,pixelY:To}}(si);if(Qo.forceToAxis)if(h.isHorizontal()){if(!(Math.abs(Jo.pixelX)>Math.abs(Jo.pixelY)))return!0;no=-Jo.pixelX*To}else{if(!(Math.abs(Jo.pixelY)>Math.abs(Jo.pixelX)))return!0;no=-Jo.pixelY}else no=Math.abs(Jo.pixelX)>Math.abs(Jo.pixelY)?-Jo.pixelX*To:-Jo.pixelY;if(0===no)return!0;Qo.invert&&(no=-no);let mo=h.getTranslate()+no*Qo.sensitivity;if(mo>=h.minTranslate()&&(mo=h.minTranslate()),mo<=h.maxTranslate()&&(mo=h.maxTranslate()),Si=!!h.params.loop||!(mo===h.minTranslate()||mo===h.maxTranslate()),Si&&h.params.nested&&si.stopPropagation(),h.params.freeMode&&h.params.freeMode.enabled){const ho={time:Sd(),delta:Math.abs(no),direction:Math.sign(no)},Ro=ze&&ho.time<ze.time+500&&ho.delta<=ze.delta&&ho.direction===ze.direction;if(!Ro){ze=void 0;let fr=h.getTranslate()+no*Qo.sensitivity;const Rs=h.isBeginning,$o=h.isEnd;if(fr>=h.minTranslate()&&(fr=h.minTranslate()),fr<=h.maxTranslate()&&(fr=h.maxTranslate()),h.setTransition(0),h.setTranslate(fr),h.updateProgress(),h.updateActiveIndex(),h.updateSlidesClasses(),(!Rs&&h.isBeginning||!$o&&h.isEnd)&&h.updateSlidesClasses(),h.params.loop&&h.loopFix({direction:ho.direction<0?"next":"prev",byMousewheel:!0}),h.params.freeMode.sticky){clearTimeout(Me),Me=void 0,ct.length>=15&&ct.shift();const Ho=ct.length?ct[ct.length-1]:void 0,Or=ct[0];if(ct.push(ho),Ho&&(ho.delta>Ho.delta||ho.direction!==Ho.direction))ct.splice(0);else if(ct.length>=15&&ho.time-Or.time<500&&Or.delta-ho.delta>=1&&ho.delta<=6){const Ma=no>0?.8:.2;ze=ho,ct.splice(0),Me=p1(()=>{h.slideToClosest(h.params.speed,!0,void 0,Ma)},0)}Me||(Me=p1(()=>{ze=ho,ct.splice(0),h.slideToClosest(h.params.speed,!0,void 0,.5)},500))}if(Ro||F("scroll",si),h.params.autoplay&&h.params.autoplayDisableOnInteraction&&h.autoplay.stop(),Qo.releaseOnEdges&&(fr===h.minTranslate()||fr===h.maxTranslate()))return!0}}else{const ho={time:Sd(),delta:Math.abs(no),direction:Math.sign(no),raw:vn};ct.length>=2&&ct.shift();const Ro=ct.length?ct[ct.length-1]:void 0;if(ct.push(ho),Ro?(ho.direction!==Ro.direction||ho.delta>Ro.delta||ho.time>Ro.time+150)&&sn(ho):sn(ho),function pn(vn){const si=h.params.mousewheel;if(vn.direction<0){if(h.isEnd&&!h.params.loop&&si.releaseOnEdges)return!0}else if(h.isBeginning&&!h.params.loop&&si.releaseOnEdges)return!0;return!1}(ho))return!0}return si.preventDefault?si.preventDefault():si.returnValue=!1,!1}function yn(vn){let si=h.el;"container"!==h.params.mousewheel.eventsTarget&&(si=document.querySelector(h.params.mousewheel.eventsTarget)),si[vn]("mouseenter",pt),si[vn]("mouseleave",Ct),si[vn]("wheel",gn)}function Rt(){return h.params.cssMode?(h.wrapperEl.removeEventListener("wheel",gn),!0):!h.mousewheel.enabled&&(yn("addEventListener"),h.mousewheel.enabled=!0,!0)}function Bn(){return h.params.cssMode?(h.wrapperEl.addEventListener(event,gn),!0):!!h.mousewheel.enabled&&(yn("removeEventListener"),h.mousewheel.enabled=!1,!0)}I("init",()=>{!h.params.mousewheel.enabled&&h.params.cssMode&&Bn(),h.params.mousewheel.enabled&&Rt()}),I("destroy",()=>{h.params.cssMode&&Rt(),h.mousewheel.enabled&&Bn()}),Object.assign(h.mousewheel,{enable:Rt,disable:Bn})},function Yf(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;function X(pn){let gn;return pn&&"string"==typeof pn&&h.isElement&&(gn=h.el.querySelector(pn),gn)?gn:(pn&&("string"==typeof pn&&(gn=[...document.querySelectorAll(pn)]),h.params.uniqueNavElements&&"string"==typeof pn&&gn&&gn.length>1&&1===h.el.querySelectorAll(pn).length?gn=h.el.querySelector(pn):gn&&1===gn.length&&(gn=gn[0])),pn&&!gn?pn:gn)}function Me(pn,gn){const yn=h.params.navigation;(pn=La(pn)).forEach(Rt=>{Rt&&(Rt.classList[gn?"add":"remove"](...yn.disabledClass.split(" ")),"BUTTON"===Rt.tagName&&(Rt.disabled=gn),h.params.watchOverflow&&h.enabled&&Rt.classList[h.isLocked?"add":"remove"](yn.lockClass))})}function $e(){const{nextEl:pn,prevEl:gn}=h.navigation;if(h.params.loop)return Me(gn,!1),void Me(pn,!1);Me(gn,h.isBeginning&&!h.params.rewind),Me(pn,h.isEnd&&!h.params.rewind)}function ze(pn){pn.preventDefault(),(!h.isBeginning||h.params.loop||h.params.rewind)&&(h.slidePrev(),F("navigationPrev"))}function ct(pn){pn.preventDefault(),(!h.isEnd||h.params.loop||h.params.rewind)&&(h.slideNext(),F("navigationNext"))}function ot(){const pn=h.params.navigation;if(h.params.navigation=b1(h,h.originalParams.navigation,h.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!pn.nextEl&&!pn.prevEl)return;let gn=X(pn.nextEl),yn=X(pn.prevEl);Object.assign(h.navigation,{nextEl:gn,prevEl:yn}),gn=La(gn),yn=La(yn);const Rt=(Bn,vn)=>{Bn&&Bn.addEventListener("click","next"===vn?ct:ze),!h.enabled&&Bn&&Bn.classList.add(...pn.lockClass.split(" "))};gn.forEach(Bn=>Rt(Bn,"next")),yn.forEach(Bn=>Rt(Bn,"prev"))}function pt(){let{nextEl:pn,prevEl:gn}=h.navigation;pn=La(pn),gn=La(gn);const yn=(Rt,Bn)=>{Rt.removeEventListener("click","next"===Bn?ct:ze),Rt.classList.remove(...h.params.navigation.disabledClass.split(" "))};pn.forEach(Rt=>yn(Rt,"next")),gn.forEach(Rt=>yn(Rt,"prev"))}A({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),h.navigation={nextEl:null,prevEl:null},I("init",()=>{!1===h.params.navigation.enabled?sn():(ot(),$e())}),I("toEdge fromEdge lock unlock",()=>{$e()}),I("destroy",()=>{pt()}),I("enable disable",()=>{let{nextEl:pn,prevEl:gn}=h.navigation;pn=La(pn),gn=La(gn),h.enabled?$e():[...pn,...gn].filter(yn=>!!yn).forEach(yn=>yn.classList.add(h.params.navigation.lockClass))}),I("click",(pn,gn)=>{let{nextEl:yn,prevEl:Rt}=h.navigation;yn=La(yn),Rt=La(Rt);const Bn=gn.target;let vn=Rt.includes(Bn)||yn.includes(Bn);if(h.isElement&&!vn){const si=gn.path||gn.composedPath&&gn.composedPath();si&&(vn=si.find(Si=>yn.includes(Si)||Rt.includes(Si)))}if(h.params.navigation.hideOnClick&&!vn){if(h.pagination&&h.params.pagination&&h.params.pagination.clickable&&(h.pagination.el===Bn||h.pagination.el.contains(Bn)))return;let si;yn.length?si=yn[0].classList.contains(h.params.navigation.hiddenClass):Rt.length&&(si=Rt[0].classList.contains(h.params.navigation.hiddenClass)),F(!0===si?"navigationShow":"navigationHide"),[...yn,...Rt].filter(Si=>!!Si).forEach(Si=>Si.classList.toggle(h.params.navigation.hiddenClass))}});const sn=()=>{h.el.classList.add(...h.params.navigation.navigationDisabledClass.split(" ")),pt()};Object.assign(h.navigation,{enable:()=>{h.el.classList.remove(...h.params.navigation.navigationDisabledClass.split(" ")),ot(),$e()},disable:sn,update:$e,init:ot,destroy:pt})},function Km(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const X="swiper-pagination";A({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:Rt=>Rt,formatFractionTotal:Rt=>Rt,bulletClass:`${X}-bullet`,bulletActiveClass:`${X}-bullet-active`,modifierClass:`${X}-`,currentClass:`${X}-current`,totalClass:`${X}-total`,hiddenClass:`${X}-hidden`,progressbarFillClass:`${X}-progressbar-fill`,progressbarOppositeClass:`${X}-progressbar-opposite`,clickableClass:`${X}-clickable`,lockClass:`${X}-lock`,horizontalClass:`${X}-horizontal`,verticalClass:`${X}-vertical`,paginationDisabledClass:`${X}-disabled`}}),h.pagination={el:null,bullets:[]};let Me,$e=0;function ze(){return!h.params.pagination.el||!h.pagination.el||Array.isArray(h.pagination.el)&&0===h.pagination.el.length}function ct(Rt,Bn){const{bulletActiveClass:vn}=h.params.pagination;Rt&&(Rt=Rt[("prev"===Bn?"previous":"next")+"ElementSibling"])&&(Rt.classList.add(`${vn}-${Bn}`),(Rt=Rt[("prev"===Bn?"previous":"next")+"ElementSibling"])&&Rt.classList.add(`${vn}-${Bn}-${Bn}`))}function ot(Rt){const Bn=Rt.target.closest(Ks(h.params.pagination.bulletClass));if(!Bn)return;Rt.preventDefault();const vn=Q0(Bn)*h.params.slidesPerGroup;if(h.params.loop){if(h.realIndex===vn)return;h.slideToLoop(vn)}else h.slideTo(vn)}function pt(){const Rt=h.rtl,Bn=h.params.pagination;if(ze())return;let si,Si,vn=h.pagination.el;vn=La(vn);const ur=h.params.loop?Math.ceil((h.virtual&&h.params.virtual.enabled?h.virtual.slides.length:h.slides.length)/h.params.slidesPerGroup):h.snapGrid.length;if(h.params.loop?(Si=h.previousRealIndex||0,si=h.params.slidesPerGroup>1?Math.floor(h.realIndex/h.params.slidesPerGroup):h.realIndex):typeof h.snapIndex<"u"?(si=h.snapIndex,Si=h.previousSnapIndex):(Si=h.previousIndex||0,si=h.activeIndex||0),"bullets"===Bn.type&&h.pagination.bullets&&h.pagination.bullets.length>0){const Bo=h.pagination.bullets;let no,To,Jo;if(Bn.dynamicBullets&&(Me=lf(Bo[0],h.isHorizontal()?"width":"height",!0),vn.forEach(mo=>{mo.style[h.isHorizontal()?"width":"height"]=Me*(Bn.dynamicMainBullets+4)+"px"}),Bn.dynamicMainBullets>1&&void 0!==Si&&($e+=si-(Si||0),$e>Bn.dynamicMainBullets-1?$e=Bn.dynamicMainBullets-1:$e<0&&($e=0)),no=Math.max(si-$e,0),To=no+(Math.min(Bo.length,Bn.dynamicMainBullets)-1),Jo=(To+no)/2),Bo.forEach(mo=>{const ho=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(Ro=>`${Bn.bulletActiveClass}${Ro}`)].map(Ro=>"string"==typeof Ro&&Ro.includes(" ")?Ro.split(" "):Ro).flat();mo.classList.remove(...ho)}),vn.length>1)Bo.forEach(mo=>{const ho=Q0(mo);ho===si?mo.classList.add(...Bn.bulletActiveClass.split(" ")):h.isElement&&mo.setAttribute("part","bullet"),Bn.dynamicBullets&&(ho>=no&&ho<=To&&mo.classList.add(...`${Bn.bulletActiveClass}-main`.split(" ")),ho===no&&ct(mo,"prev"),ho===To&&ct(mo,"next"))});else{const mo=Bo[si];if(mo&&mo.classList.add(...Bn.bulletActiveClass.split(" ")),h.isElement&&Bo.forEach((ho,Ro)=>{ho.setAttribute("part",Ro===si?"bullet-active":"bullet")}),Bn.dynamicBullets){const ho=Bo[no],Ro=Bo[To];for(let fr=no;fr<=To;fr+=1)Bo[fr]&&Bo[fr].classList.add(...`${Bn.bulletActiveClass}-main`.split(" "));ct(ho,"prev"),ct(Ro,"next")}}if(Bn.dynamicBullets){const mo=Math.min(Bo.length,Bn.dynamicMainBullets+4),ho=(Me*mo-Me)/2-Jo*Me,Ro=Rt?"right":"left";Bo.forEach(fr=>{fr.style[h.isHorizontal()?Ro:"top"]=`${ho}px`})}}vn.forEach((Bo,no)=>{if("fraction"===Bn.type&&(Bo.querySelectorAll(Ks(Bn.currentClass)).forEach(To=>{To.textContent=Bn.formatFractionCurrent(si+1)}),Bo.querySelectorAll(Ks(Bn.totalClass)).forEach(To=>{To.textContent=Bn.formatFractionTotal(ur)})),"progressbar"===Bn.type){let To;To=Bn.progressbarOpposite?h.isHorizontal()?"vertical":"horizontal":h.isHorizontal()?"horizontal":"vertical";const Jo=(si+1)/ur;let mo=1,ho=1;"horizontal"===To?mo=Jo:ho=Jo,Bo.querySelectorAll(Ks(Bn.progressbarFillClass)).forEach(Ro=>{Ro.style.transform=`translate3d(0,0,0) scaleX(${mo}) scaleY(${ho})`,Ro.style.transitionDuration=`${h.params.speed}ms`})}"custom"===Bn.type&&Bn.renderCustom?(Bo.innerHTML=Bn.renderCustom(h,si+1,ur),0===no&&F("paginationRender",Bo)):(0===no&&F("paginationRender",Bo),F("paginationUpdate",Bo)),h.params.watchOverflow&&h.enabled&&Bo.classList[h.isLocked?"add":"remove"](Bn.lockClass)})}function Ct(){const Rt=h.params.pagination;if(ze())return;const Bn=h.virtual&&h.params.virtual.enabled?h.virtual.slides.length:h.grid&&h.params.grid.rows>1?h.slides.length/Math.ceil(h.params.grid.rows):h.slides.length;let vn=h.pagination.el;vn=La(vn);let si="";if("bullets"===Rt.type){let Si=h.params.loop?Math.ceil(Bn/h.params.slidesPerGroup):h.snapGrid.length;h.params.freeMode&&h.params.freeMode.enabled&&Si>Bn&&(Si=Bn);for(let Qo=0;Qo<Si;Qo+=1)si+=Rt.renderBullet?Rt.renderBullet.call(h,Qo,Rt.bulletClass):`<${Rt.bulletElement} ${h.isElement?'part="bullet"':""} class="${Rt.bulletClass}"></${Rt.bulletElement}>`}"fraction"===Rt.type&&(si=Rt.renderFraction?Rt.renderFraction.call(h,Rt.currentClass,Rt.totalClass):`<span class="${Rt.currentClass}"></span> / <span class="${Rt.totalClass}"></span>`),"progressbar"===Rt.type&&(si=Rt.renderProgressbar?Rt.renderProgressbar.call(h,Rt.progressbarFillClass):`<span class="${Rt.progressbarFillClass}"></span>`),h.pagination.bullets=[],vn.forEach(Si=>{"custom"!==Rt.type&&(Si.innerHTML=si||""),"bullets"===Rt.type&&h.pagination.bullets.push(...Si.querySelectorAll(Ks(Rt.bulletClass)))}),"custom"!==Rt.type&&F("paginationRender",vn[0])}function sn(){h.params.pagination=b1(h,h.originalParams.pagination,h.params.pagination,{el:"swiper-pagination"});const Rt=h.params.pagination;if(!Rt.el)return;let Bn;"string"==typeof Rt.el&&h.isElement&&(Bn=h.el.querySelector(Rt.el)),!Bn&&"string"==typeof Rt.el&&(Bn=[...document.querySelectorAll(Rt.el)]),Bn||(Bn=Rt.el),Bn&&0!==Bn.length&&(h.params.uniqueNavElements&&"string"==typeof Rt.el&&Array.isArray(Bn)&&Bn.length>1&&(Bn=[...h.el.querySelectorAll(Rt.el)],Bn.length>1&&(Bn=Bn.filter(vn=>J0(vn,".swiper")[0]===h.el)[0])),Array.isArray(Bn)&&1===Bn.length&&(Bn=Bn[0]),Object.assign(h.pagination,{el:Bn}),Bn=La(Bn),Bn.forEach(vn=>{"bullets"===Rt.type&&Rt.clickable&&vn.classList.add(...(Rt.clickableClass||"").split(" ")),vn.classList.add(Rt.modifierClass+Rt.type),vn.classList.add(h.isHorizontal()?Rt.horizontalClass:Rt.verticalClass),"bullets"===Rt.type&&Rt.dynamicBullets&&(vn.classList.add(`${Rt.modifierClass}${Rt.type}-dynamic`),$e=0,Rt.dynamicMainBullets<1&&(Rt.dynamicMainBullets=1)),"progressbar"===Rt.type&&Rt.progressbarOpposite&&vn.classList.add(Rt.progressbarOppositeClass),Rt.clickable&&vn.addEventListener("click",ot),h.enabled||vn.classList.add(Rt.lockClass)}))}function pn(){const Rt=h.params.pagination;if(ze())return;let Bn=h.pagination.el;Bn&&(Bn=La(Bn),Bn.forEach(vn=>{vn.classList.remove(Rt.hiddenClass),vn.classList.remove(Rt.modifierClass+Rt.type),vn.classList.remove(h.isHorizontal()?Rt.horizontalClass:Rt.verticalClass),Rt.clickable&&(vn.classList.remove(...(Rt.clickableClass||"").split(" ")),vn.removeEventListener("click",ot))})),h.pagination.bullets&&h.pagination.bullets.forEach(vn=>vn.classList.remove(...Rt.bulletActiveClass.split(" ")))}I("changeDirection",()=>{if(!h.pagination||!h.pagination.el)return;const Rt=h.params.pagination;let{el:Bn}=h.pagination;Bn=La(Bn),Bn.forEach(vn=>{vn.classList.remove(Rt.horizontalClass,Rt.verticalClass),vn.classList.add(h.isHorizontal()?Rt.horizontalClass:Rt.verticalClass)})}),I("init",()=>{!1===h.params.pagination.enabled?yn():(sn(),Ct(),pt())}),I("activeIndexChange",()=>{typeof h.snapIndex>"u"&&pt()}),I("snapIndexChange",()=>{pt()}),I("snapGridLengthChange",()=>{Ct(),pt()}),I("destroy",()=>{pn()}),I("enable disable",()=>{let{el:Rt}=h.pagination;Rt&&(Rt=La(Rt),Rt.forEach(Bn=>Bn.classList[h.enabled?"remove":"add"](h.params.pagination.lockClass)))}),I("lock unlock",()=>{pt()}),I("click",(Rt,Bn)=>{const vn=Bn.target,si=La(h.pagination.el);if(h.params.pagination.el&&h.params.pagination.hideOnClick&&si&&si.length>0&&!vn.classList.contains(h.params.pagination.bulletClass)){if(h.navigation&&(h.navigation.nextEl&&vn===h.navigation.nextEl||h.navigation.prevEl&&vn===h.navigation.prevEl))return;const Si=si[0].classList.contains(h.params.pagination.hiddenClass);F(!0===Si?"paginationShow":"paginationHide"),si.forEach(Qo=>Qo.classList.toggle(h.params.pagination.hiddenClass))}});const yn=()=>{h.el.classList.add(h.params.pagination.paginationDisabledClass);let{el:Rt}=h.pagination;Rt&&(Rt=La(Rt),Rt.forEach(Bn=>Bn.classList.add(h.params.pagination.paginationDisabledClass))),pn()};Object.assign(h.pagination,{enable:()=>{h.el.classList.remove(h.params.pagination.paginationDisabledClass);let{el:Rt}=h.pagination;Rt&&(Rt=La(Rt),Rt.forEach(Bn=>Bn.classList.remove(h.params.pagination.paginationDisabledClass))),sn(),Ct(),pt()},disable:yn,render:Ct,update:pt,init:sn,destroy:pn})},function mm(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const X=Hc();let ct,ot,pt,Ct,Me=!1,$e=null,ze=null;function sn(){if(!h.params.scrollbar.el||!h.scrollbar.el)return;const{scrollbar:mo,rtlTranslate:ho}=h,{dragEl:Ro,el:fr}=mo,Rs=h.params.scrollbar;let Ho=ot,Or=(pt-ot)*(h.params.loop?h.progressLoop:h.progress);ho?(Or=-Or,Or>0?(Ho=ot-Or,Or=0):-Or+ot>pt&&(Ho=pt+Or)):Or<0?(Ho=ot+Or,Or=0):Or+ot>pt&&(Ho=pt-Or),h.isHorizontal()?(Ro.style.transform=`translate3d(${Or}px, 0, 0)`,Ro.style.width=`${Ho}px`):(Ro.style.transform=`translate3d(0px, ${Or}px, 0)`,Ro.style.height=`${Ho}px`),Rs.hide&&(clearTimeout($e),fr.style.opacity=1,$e=setTimeout(()=>{fr.style.opacity=0,fr.style.transitionDuration="400ms"},1e3))}function gn(){if(!h.params.scrollbar.el||!h.scrollbar.el)return;const{scrollbar:mo}=h,{dragEl:ho,el:Ro}=mo;ho.style.width="",ho.style.height="",pt=h.isHorizontal()?Ro.offsetWidth:Ro.offsetHeight,Ct=h.size/(h.virtualSize+h.params.slidesOffsetBefore-(h.params.centeredSlides?h.snapGrid[0]:0)),ot="auto"===h.params.scrollbar.dragSize?pt*Ct:parseInt(h.params.scrollbar.dragSize,10),h.isHorizontal()?ho.style.width=`${ot}px`:ho.style.height=`${ot}px`,Ro.style.display=Ct>=1?"none":"",h.params.scrollbar.hide&&(Ro.style.opacity=0),h.params.watchOverflow&&h.enabled&&mo.el.classList[h.isLocked?"add":"remove"](h.params.scrollbar.lockClass)}function yn(mo){return h.isHorizontal()?mo.clientX:mo.clientY}function Rt(mo){const{scrollbar:ho,rtlTranslate:Ro}=h,{el:fr}=ho;let Rs;Rs=(yn(mo)-tp(fr)[h.isHorizontal()?"left":"top"]-(null!==ct?ct:ot/2))/(pt-ot),Rs=Math.max(Math.min(Rs,1),0),Ro&&(Rs=1-Rs);const $o=h.minTranslate()+(h.maxTranslate()-h.minTranslate())*Rs;h.updateProgress($o),h.setTranslate($o),h.updateActiveIndex(),h.updateSlidesClasses()}function Bn(mo){const ho=h.params.scrollbar,{scrollbar:Ro,wrapperEl:fr}=h,{el:Rs,dragEl:$o}=Ro;Me=!0,ct=mo.target===$o?yn(mo)-mo.target.getBoundingClientRect()[h.isHorizontal()?"left":"top"]:null,mo.preventDefault(),mo.stopPropagation(),fr.style.transitionDuration="100ms",$o.style.transitionDuration="100ms",Rt(mo),clearTimeout(ze),Rs.style.transitionDuration="0ms",ho.hide&&(Rs.style.opacity=1),h.params.cssMode&&(h.wrapperEl.style["scroll-snap-type"]="none"),F("scrollbarDragStart",mo)}function vn(mo){const{scrollbar:ho,wrapperEl:Ro}=h,{el:fr,dragEl:Rs}=ho;Me&&(mo.preventDefault&&mo.cancelable?mo.preventDefault():mo.returnValue=!1,Rt(mo),Ro.style.transitionDuration="0ms",fr.style.transitionDuration="0ms",Rs.style.transitionDuration="0ms",F("scrollbarDragMove",mo))}function si(mo){const ho=h.params.scrollbar,{scrollbar:Ro,wrapperEl:fr}=h,{el:Rs}=Ro;Me&&(Me=!1,h.params.cssMode&&(h.wrapperEl.style["scroll-snap-type"]="",fr.style.transitionDuration=""),ho.hide&&(clearTimeout(ze),ze=p1(()=>{Rs.style.opacity=0,Rs.style.transitionDuration="400ms"},1e3)),F("scrollbarDragEnd",mo),ho.snapOnRelease&&h.slideToClosest())}function Si(mo){const{scrollbar:ho,params:Ro}=h,fr=ho.el;if(!fr)return;const $o=!!Ro.passiveListeners&&{passive:!1,capture:!1},Ho=!!Ro.passiveListeners&&{passive:!0,capture:!1};if(!fr)return;const Or="on"===mo?"addEventListener":"removeEventListener";fr[Or]("pointerdown",Bn,$o),X[Or]("pointermove",vn,$o),X[Or]("pointerup",si,Ho)}function Bo(){const{scrollbar:mo,el:ho}=h;h.params.scrollbar=b1(h,h.originalParams.scrollbar,h.params.scrollbar,{el:"swiper-scrollbar"});const Ro=h.params.scrollbar;if(!Ro.el)return;let fr,Rs;if("string"==typeof Ro.el&&h.isElement&&(fr=h.el.querySelector(Ro.el)),fr||"string"!=typeof Ro.el)fr||(fr=Ro.el);else if(fr=X.querySelectorAll(Ro.el),!fr.length)return;h.params.uniqueNavElements&&"string"==typeof Ro.el&&fr.length>1&&1===ho.querySelectorAll(Ro.el).length&&(fr=ho.querySelector(Ro.el)),fr.length>0&&(fr=fr[0]),fr.classList.add(h.isHorizontal()?Ro.horizontalClass:Ro.verticalClass),fr&&(Rs=fr.querySelector(Ks(h.params.scrollbar.dragClass)),Rs||(Rs=zu("div",h.params.scrollbar.dragClass),fr.append(Rs))),Object.assign(mo,{el:fr,dragEl:Rs}),Ro.draggable&&function Qo(){!h.params.scrollbar.el||!h.scrollbar.el||Si("on")}(),fr&&fr.classList[h.enabled?"remove":"add"](...z0(h.params.scrollbar.lockClass))}function no(){const mo=h.params.scrollbar,ho=h.scrollbar.el;ho&&ho.classList.remove(...z0(h.isHorizontal()?mo.horizontalClass:mo.verticalClass)),function ur(){!h.params.scrollbar.el||!h.scrollbar.el||Si("off")}()}A({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),h.scrollbar={el:null,dragEl:null},I("changeDirection",()=>{if(!h.scrollbar||!h.scrollbar.el)return;const mo=h.params.scrollbar;let{el:ho}=h.scrollbar;ho=La(ho),ho.forEach(Ro=>{Ro.classList.remove(mo.horizontalClass,mo.verticalClass),Ro.classList.add(h.isHorizontal()?mo.horizontalClass:mo.verticalClass)})}),I("init",()=>{!1===h.params.scrollbar.enabled?Jo():(Bo(),gn(),sn())}),I("update resize observerUpdate lock unlock changeDirection",()=>{gn()}),I("setTranslate",()=>{sn()}),I("setTransition",(mo,ho)=>{!function pn(mo){!h.params.scrollbar.el||!h.scrollbar.el||(h.scrollbar.dragEl.style.transitionDuration=`${mo}ms`)}(ho)}),I("enable disable",()=>{const{el:mo}=h.scrollbar;mo&&mo.classList[h.enabled?"remove":"add"](...z0(h.params.scrollbar.lockClass))}),I("destroy",()=>{no()});const Jo=()=>{h.el.classList.add(...z0(h.params.scrollbar.scrollbarDisabledClass)),h.scrollbar.el&&h.scrollbar.el.classList.add(...z0(h.params.scrollbar.scrollbarDisabledClass)),no()};Object.assign(h.scrollbar,{enable:()=>{h.el.classList.remove(...z0(h.params.scrollbar.scrollbarDisabledClass)),h.scrollbar.el&&h.scrollbar.el.classList.remove(...z0(h.params.scrollbar.scrollbarDisabledClass)),Bo(),gn(),sn()},disable:Jo,updateSize:gn,setTranslate:sn,init:Bo,destroy:no})},function Qu(y){let{swiper:h,extendParams:A,on:I}=y;A({parallax:{enabled:!1}});const F="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",X=(ze,ct)=>{const{rtl:ot}=h,pt=ot?-1:1,Ct=ze.getAttribute("data-swiper-parallax")||"0";let sn=ze.getAttribute("data-swiper-parallax-x"),pn=ze.getAttribute("data-swiper-parallax-y");const gn=ze.getAttribute("data-swiper-parallax-scale"),yn=ze.getAttribute("data-swiper-parallax-opacity"),Rt=ze.getAttribute("data-swiper-parallax-rotate");if(sn||pn?(sn=sn||"0",pn=pn||"0"):h.isHorizontal()?(sn=Ct,pn="0"):(pn=Ct,sn="0"),sn=sn.indexOf("%")>=0?parseInt(sn,10)*ct*pt+"%":sn*ct*pt+"px",pn=pn.indexOf("%")>=0?parseInt(pn,10)*ct+"%":pn*ct+"px",typeof yn<"u"&&null!==yn){const vn=yn-(yn-1)*(1-Math.abs(ct));ze.style.opacity=vn}let Bn=`translate3d(${sn}, ${pn}, 0px)`;typeof gn<"u"&&null!==gn&&(Bn+=` scale(${gn-(gn-1)*(1-Math.abs(ct))})`),Rt&&typeof Rt<"u"&&null!==Rt&&(Bn+=` rotate(${Rt*ct*-1}deg)`),ze.style.transform=Bn},Me=()=>{const{el:ze,slides:ct,progress:ot,snapGrid:pt}=h,sn=md(ze,F);h.isElement&&sn.push(...md(h.hostEl,F)),sn.forEach(pn=>{X(pn,ot)}),ct.forEach((pn,gn)=>{let yn=pn.progress;h.params.slidesPerGroup>1&&"auto"!==h.params.slidesPerView&&(yn+=Math.ceil(gn/2)-ot*(pt.length-1)),yn=Math.min(Math.max(yn,-1),1),pn.querySelectorAll(`${F}, [data-swiper-parallax-rotate]`).forEach(Rt=>{X(Rt,yn)})})};I("beforeInit",()=>{h.params.parallax.enabled&&(h.params.watchSlidesProgress=!0,h.originalParams.watchSlidesProgress=!0)}),I("init",()=>{h.params.parallax.enabled&&Me()}),I("setTranslate",()=>{h.params.parallax.enabled&&Me()}),I("setTransition",(ze,ct)=>{h.params.parallax.enabled&&function(ze){void 0===ze&&(ze=h.params.speed);const{el:ct,hostEl:ot}=h,pt=[...ct.querySelectorAll(F)];h.isElement&&pt.push(...ot.querySelectorAll(F)),pt.forEach(Ct=>{let sn=parseInt(Ct.getAttribute("data-swiper-parallax-duration"),10)||ze;0===ze&&(sn=0),Ct.style.transitionDuration=`${sn}ms`})}(ct)})},function Ym(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const X=xc();A({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),h.zoom={enabled:!1};let ze,ct,Me=1,$e=!1;const ot=[],pt={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},Ct={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},sn={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let Bo,pn=1;function gn(){return ot.length<2?1:Math.sqrt((ot[1].pageX-ot[0].pageX)**2+(ot[1].pageY-ot[0].pageY)**2)}function yn(){const wo=h.params.zoom,Gr=pt.imageWrapEl.getAttribute("data-swiper-zoom")||wo.maxRatio;return wo.limitToOriginalSize&&pt.imageEl&&pt.imageEl.naturalWidth?Math.min(pt.imageEl.naturalWidth/pt.imageEl.offsetWidth,Gr):Gr}function vn(wo){const Gr=function Bn(){return h.isElement?"swiper-slide":`.${h.params.slideClass}`}();return!!(wo.target.matches(Gr)||h.slides.filter(vs=>vs.contains(wo.target)).length>0)}function Si(wo){if("mouse"===wo.pointerType&&ot.splice(0,ot.length),!vn(wo))return;const Gr=h.params.zoom;if(ze=!1,ct=!1,ot.push(wo),!(ot.length<2)){if(ze=!0,pt.scaleStart=gn(),!pt.slideEl){pt.slideEl=wo.target.closest(`.${h.params.slideClass}, swiper-slide`),pt.slideEl||(pt.slideEl=h.slides[h.activeIndex]);let vs=pt.slideEl.querySelector(`.${Gr.containerClass}`);if(vs&&(vs=vs.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),pt.imageEl=vs,pt.imageWrapEl=vs?J0(pt.imageEl,`.${Gr.containerClass}`)[0]:void 0,!pt.imageWrapEl)return void(pt.imageEl=void 0);pt.maxRatio=yn()}if(pt.imageEl){const[vs,iu]=function Rt(){if(ot.length<2)return{x:null,y:null};const wo=pt.imageEl.getBoundingClientRect();return[(ot[0].pageX+(ot[1].pageX-ot[0].pageX)/2-wo.x-X.scrollX)/Me,(ot[0].pageY+(ot[1].pageY-ot[0].pageY)/2-wo.y-X.scrollY)/Me]}();pt.originX=vs,pt.originY=iu,pt.imageEl.style.transitionDuration="0ms"}$e=!0}}function Qo(wo){if(!vn(wo))return;const Gr=h.params.zoom,vs=h.zoom,iu=ot.findIndex(qs=>qs.pointerId===wo.pointerId);iu>=0&&(ot[iu]=wo),!(ot.length<2)&&(ct=!0,pt.scaleMove=gn(),pt.imageEl&&(vs.scale=pt.scaleMove/pt.scaleStart*Me,vs.scale>pt.maxRatio&&(vs.scale=pt.maxRatio-1+(vs.scale-pt.maxRatio+1)**.5),vs.scale<Gr.minRatio&&(vs.scale=Gr.minRatio+1-(Gr.minRatio-vs.scale+1)**.5),pt.imageEl.style.transform=`translate3d(0,0,0) scale(${vs.scale})`))}function ur(wo){if(!vn(wo)||"mouse"===wo.pointerType&&"pointerout"===wo.type)return;const Gr=h.params.zoom,vs=h.zoom,iu=ot.findIndex(qs=>qs.pointerId===wo.pointerId);iu>=0&&ot.splice(iu,1),ze&&ct&&(ze=!1,ct=!1,pt.imageEl&&(vs.scale=Math.max(Math.min(vs.scale,pt.maxRatio),Gr.minRatio),pt.imageEl.style.transitionDuration=`${h.params.speed}ms`,pt.imageEl.style.transform=`translate3d(0,0,0) scale(${vs.scale})`,Me=vs.scale,$e=!1,vs.scale>1&&pt.slideEl?pt.slideEl.classList.add(`${Gr.zoomedSlideClass}`):vs.scale<=1&&pt.slideEl&&pt.slideEl.classList.remove(`${Gr.zoomedSlideClass}`),1===vs.scale&&(pt.originX=0,pt.originY=0,pt.slideEl=void 0)))}function no(){h.touchEventsData.preventTouchMoveFromPointerMove=!1}function mo(wo){if(!vn(wo)||!function si(wo){const Gr=`.${h.params.zoom.containerClass}`;return!!(wo.target.matches(Gr)||[...h.hostEl.querySelectorAll(Gr)].filter(vs=>vs.contains(wo.target)).length>0)}(wo))return;const Gr=h.zoom;if(!pt.imageEl||!Ct.isTouched||!pt.slideEl)return;Ct.isMoved||(Ct.width=pt.imageEl.offsetWidth||pt.imageEl.clientWidth,Ct.height=pt.imageEl.offsetHeight||pt.imageEl.clientHeight,Ct.startX=O0(pt.imageWrapEl,"x")||0,Ct.startY=O0(pt.imageWrapEl,"y")||0,pt.slideWidth=pt.slideEl.offsetWidth,pt.slideHeight=pt.slideEl.offsetHeight,pt.imageWrapEl.style.transitionDuration="0ms");const iu=Ct.height*Gr.scale;if(Ct.minX=Math.min(pt.slideWidth/2-Ct.width*Gr.scale/2,0),Ct.maxX=-Ct.minX,Ct.minY=Math.min(pt.slideHeight/2-iu/2,0),Ct.maxY=-Ct.minY,Ct.touchesCurrent.x=ot.length>0?ot[0].pageX:wo.pageX,Ct.touchesCurrent.y=ot.length>0?ot[0].pageY:wo.pageY,Math.max(Math.abs(Ct.touchesCurrent.x-Ct.touchesStart.x),Math.abs(Ct.touchesCurrent.y-Ct.touchesStart.y))>5&&(h.allowClick=!1),!Ct.isMoved&&!$e){if(h.isHorizontal()&&(Math.floor(Ct.minX)===Math.floor(Ct.startX)&&Ct.touchesCurrent.x<Ct.touchesStart.x||Math.floor(Ct.maxX)===Math.floor(Ct.startX)&&Ct.touchesCurrent.x>Ct.touchesStart.x))return Ct.isTouched=!1,void no();if(!h.isHorizontal()&&(Math.floor(Ct.minY)===Math.floor(Ct.startY)&&Ct.touchesCurrent.y<Ct.touchesStart.y||Math.floor(Ct.maxY)===Math.floor(Ct.startY)&&Ct.touchesCurrent.y>Ct.touchesStart.y))return Ct.isTouched=!1,void no()}wo.cancelable&&wo.preventDefault(),wo.stopPropagation(),function To(){clearTimeout(Bo),h.touchEventsData.preventTouchMoveFromPointerMove=!0,Bo=setTimeout(()=>{no()})}(),Ct.isMoved=!0;const oc=(Gr.scale-Me)/(pt.maxRatio-h.params.zoom.minRatio),{originX:c0,originY:H2}=pt;Ct.currentX=Ct.touchesCurrent.x-Ct.touchesStart.x+Ct.startX+oc*(Ct.width-2*c0),Ct.currentY=Ct.touchesCurrent.y-Ct.touchesStart.y+Ct.startY+oc*(Ct.height-2*H2),Ct.currentX<Ct.minX&&(Ct.currentX=Ct.minX+1-(Ct.minX-Ct.currentX+1)**.8),Ct.currentX>Ct.maxX&&(Ct.currentX=Ct.maxX-1+(Ct.currentX-Ct.maxX+1)**.8),Ct.currentY<Ct.minY&&(Ct.currentY=Ct.minY+1-(Ct.minY-Ct.currentY+1)**.8),Ct.currentY>Ct.maxY&&(Ct.currentY=Ct.maxY-1+(Ct.currentY-Ct.maxY+1)**.8),sn.prevPositionX||(sn.prevPositionX=Ct.touchesCurrent.x),sn.prevPositionY||(sn.prevPositionY=Ct.touchesCurrent.y),sn.prevTime||(sn.prevTime=Date.now()),sn.x=(Ct.touchesCurrent.x-sn.prevPositionX)/(Date.now()-sn.prevTime)/2,sn.y=(Ct.touchesCurrent.y-sn.prevPositionY)/(Date.now()-sn.prevTime)/2,Math.abs(Ct.touchesCurrent.x-sn.prevPositionX)<2&&(sn.x=0),Math.abs(Ct.touchesCurrent.y-sn.prevPositionY)<2&&(sn.y=0),sn.prevPositionX=Ct.touchesCurrent.x,sn.prevPositionY=Ct.touchesCurrent.y,sn.prevTime=Date.now(),pt.imageWrapEl.style.transform=`translate3d(${Ct.currentX}px, ${Ct.currentY}px,0)`}function Ro(){const wo=h.zoom;pt.slideEl&&h.activeIndex!==h.slides.indexOf(pt.slideEl)&&(pt.imageEl&&(pt.imageEl.style.transform="translate3d(0,0,0) scale(1)"),pt.imageWrapEl&&(pt.imageWrapEl.style.transform="translate3d(0,0,0)"),pt.slideEl.classList.remove(`${h.params.zoom.zoomedSlideClass}`),wo.scale=1,Me=1,pt.slideEl=void 0,pt.imageEl=void 0,pt.imageWrapEl=void 0,pt.originX=0,pt.originY=0)}function fr(wo){const Gr=h.zoom,vs=h.params.zoom;if(!pt.slideEl){wo&&wo.target&&(pt.slideEl=wo.target.closest(`.${h.params.slideClass}, swiper-slide`)),pt.slideEl||(pt.slideEl=h.params.virtual&&h.params.virtual.enabled&&h.virtual?md(h.slidesEl,`.${h.params.slideActiveClass}`)[0]:h.slides[h.activeIndex]);let S=pt.slideEl.querySelector(`.${vs.containerClass}`);S&&(S=S.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),pt.imageEl=S,pt.imageWrapEl=S?J0(pt.imageEl,`.${vs.containerClass}`)[0]:void 0}if(!pt.imageEl||!pt.imageWrapEl)return;let iu,qs,oc,c0,H2,G2,pp,fp,Cm,og,w1,W1,Up,Tf,mp,Hp,rg,Bg;h.params.cssMode&&(h.wrapperEl.style.overflow="hidden",h.wrapperEl.style.touchAction="none"),pt.slideEl.classList.add(`${vs.zoomedSlideClass}`),typeof Ct.touchesStart.x>"u"&&wo?(iu=wo.pageX,qs=wo.pageY):(iu=Ct.touchesStart.x,qs=Ct.touchesStart.y);const a2="number"==typeof wo?wo:null;1===Me&&a2&&(iu=void 0,qs=void 0);const Gp=yn();Gr.scale=a2||Gp,Me=a2||Gp,!wo||1===Me&&a2?(pp=0,fp=0):(rg=pt.slideEl.offsetWidth,Bg=pt.slideEl.offsetHeight,oc=tp(pt.slideEl).left+X.scrollX,c0=tp(pt.slideEl).top+X.scrollY,H2=oc+rg/2-iu,G2=c0+Bg/2-qs,Cm=pt.imageEl.offsetWidth||pt.imageEl.clientWidth,og=pt.imageEl.offsetHeight||pt.imageEl.clientHeight,w1=Cm*Gr.scale,W1=og*Gr.scale,Up=Math.min(rg/2-w1/2,0),Tf=Math.min(Bg/2-W1/2,0),mp=-Up,Hp=-Tf,pp=H2*Gr.scale,fp=G2*Gr.scale,pp<Up&&(pp=Up),pp>mp&&(pp=mp),fp<Tf&&(fp=Tf),fp>Hp&&(fp=Hp)),a2&&1===Gr.scale&&(pt.originX=0,pt.originY=0),pt.imageWrapEl.style.transitionDuration="300ms",pt.imageWrapEl.style.transform=`translate3d(${pp}px, ${fp}px,0)`,pt.imageEl.style.transitionDuration="300ms",pt.imageEl.style.transform=`translate3d(0,0,0) scale(${Gr.scale})`}function Rs(){const wo=h.zoom,Gr=h.params.zoom;if(!pt.slideEl){pt.slideEl=h.params.virtual&&h.params.virtual.enabled&&h.virtual?md(h.slidesEl,`.${h.params.slideActiveClass}`)[0]:h.slides[h.activeIndex];let vs=pt.slideEl.querySelector(`.${Gr.containerClass}`);vs&&(vs=vs.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),pt.imageEl=vs,pt.imageWrapEl=vs?J0(pt.imageEl,`.${Gr.containerClass}`)[0]:void 0}!pt.imageEl||!pt.imageWrapEl||(h.params.cssMode&&(h.wrapperEl.style.overflow="",h.wrapperEl.style.touchAction=""),wo.scale=1,Me=1,pt.imageWrapEl.style.transitionDuration="300ms",pt.imageWrapEl.style.transform="translate3d(0,0,0)",pt.imageEl.style.transitionDuration="300ms",pt.imageEl.style.transform="translate3d(0,0,0) scale(1)",pt.slideEl.classList.remove(`${Gr.zoomedSlideClass}`),pt.slideEl=void 0,pt.originX=0,pt.originY=0)}function $o(wo){const Gr=h.zoom;Gr.scale&&1!==Gr.scale?Rs():fr(wo)}function Ho(){return{passiveListener:!!h.params.passiveListeners&&{passive:!0,capture:!1},activeListenerWithCapture:!h.params.passiveListeners||{passive:!1,capture:!0}}}function Or(){const wo=h.zoom;if(wo.enabled)return;wo.enabled=!0;const{passiveListener:Gr,activeListenerWithCapture:vs}=Ho();h.wrapperEl.addEventListener("pointerdown",Si,Gr),h.wrapperEl.addEventListener("pointermove",Qo,vs),["pointerup","pointercancel","pointerout"].forEach(iu=>{h.wrapperEl.addEventListener(iu,ur,Gr)}),h.wrapperEl.addEventListener("pointermove",mo,vs)}function Ma(){const wo=h.zoom;if(!wo.enabled)return;wo.enabled=!1;const{passiveListener:Gr,activeListenerWithCapture:vs}=Ho();h.wrapperEl.removeEventListener("pointerdown",Si,Gr),h.wrapperEl.removeEventListener("pointermove",Qo,vs),["pointerup","pointercancel","pointerout"].forEach(iu=>{h.wrapperEl.removeEventListener(iu,ur,Gr)}),h.wrapperEl.removeEventListener("pointermove",mo,vs)}Object.defineProperty(h.zoom,"scale",{get:()=>pn,set(wo){pn!==wo&&F("zoomChange",wo,pt.imageEl,pt.slideEl),pn=wo}}),I("init",()=>{h.params.zoom.enabled&&Or()}),I("destroy",()=>{Ma()}),I("touchStart",(wo,Gr)=>{h.zoom.enabled&&function Jo(wo){if(!pt.imageEl||Ct.isTouched)return;h.device.android&&wo.cancelable&&wo.preventDefault(),Ct.isTouched=!0;const vs=ot.length>0?ot[0]:wo;Ct.touchesStart.x=vs.pageX,Ct.touchesStart.y=vs.pageY}(Gr)}),I("touchEnd",(wo,Gr)=>{h.zoom.enabled&&function ho(){const wo=h.zoom;if(!pt.imageEl)return;if(!Ct.isTouched||!Ct.isMoved)return Ct.isTouched=!1,void(Ct.isMoved=!1);Ct.isTouched=!1,Ct.isMoved=!1;let Gr=300,vs=300;const qs=Ct.currentX+sn.x*Gr,c0=Ct.currentY+sn.y*vs;0!==sn.x&&(Gr=Math.abs((qs-Ct.currentX)/sn.x)),0!==sn.y&&(vs=Math.abs((c0-Ct.currentY)/sn.y));const H2=Math.max(Gr,vs);Ct.currentX=qs,Ct.currentY=c0;const pp=Ct.height*wo.scale;Ct.minX=Math.min(pt.slideWidth/2-Ct.width*wo.scale/2,0),Ct.maxX=-Ct.minX,Ct.minY=Math.min(pt.slideHeight/2-pp/2,0),Ct.maxY=-Ct.minY,Ct.currentX=Math.max(Math.min(Ct.currentX,Ct.maxX),Ct.minX),Ct.currentY=Math.max(Math.min(Ct.currentY,Ct.maxY),Ct.minY),pt.imageWrapEl.style.transitionDuration=`${H2}ms`,pt.imageWrapEl.style.transform=`translate3d(${Ct.currentX}px, ${Ct.currentY}px,0)`}()}),I("doubleTap",(wo,Gr)=>{!h.animating&&h.params.zoom.enabled&&h.zoom.enabled&&h.params.zoom.toggle&&$o(Gr)}),I("transitionEnd",()=>{h.zoom.enabled&&h.params.zoom.enabled&&Ro()}),I("slideChange",()=>{h.zoom.enabled&&h.params.zoom.enabled&&h.params.cssMode&&Ro()}),Object.assign(h.zoom,{enable:Or,disable:Ma,in:fr,out:Rs,toggle:$o})},function Ou(y){let{swiper:h,extendParams:A,on:I}=y;function F(ct,ot){const pt=function(){let gn,yn,Rt;return(Bn,vn)=>{for(yn=-1,gn=Bn.length;gn-yn>1;)Rt=gn+yn>>1,Bn[Rt]<=vn?yn=Rt:gn=Rt;return gn}}();let Ct,sn;return this.x=ct,this.y=ot,this.lastIndex=ct.length-1,this.interpolate=function(gn){return gn?(sn=pt(this.x,gn),Ct=sn-1,(gn-this.x[Ct])*(this.y[sn]-this.y[Ct])/(this.x[sn]-this.x[Ct])+this.y[Ct]):0},this}function ze(){h.controller.control&&h.controller.spline&&(h.controller.spline=void 0,delete h.controller.spline)}A({controller:{control:void 0,inverse:!1,by:"slide"}}),h.controller={control:void 0},I("beforeInit",()=>{if(typeof window<"u"&&("string"==typeof h.params.controller.control||h.params.controller.control instanceof HTMLElement)){const ct=document.querySelector(h.params.controller.control);if(ct&&ct.swiper)h.controller.control=ct.swiper;else if(ct){const ot=pt=>{h.controller.control=pt.detail[0],h.update(),ct.removeEventListener("init",ot)};ct.addEventListener("init",ot)}}else h.controller.control=h.params.controller.control}),I("update",()=>{ze()}),I("resize",()=>{ze()}),I("observerUpdate",()=>{ze()}),I("setTranslate",(ct,ot,pt)=>{!h.controller.control||h.controller.control.destroyed||h.controller.setTranslate(ot,pt)}),I("setTransition",(ct,ot,pt)=>{!h.controller.control||h.controller.control.destroyed||h.controller.setTransition(ot,pt)}),Object.assign(h.controller,{setTranslate:function Me(ct,ot){const pt=h.controller.control;let Ct,sn;const pn=h.constructor;function gn(yn){if(yn.destroyed)return;const Rt=h.rtlTranslate?-h.translate:h.translate;"slide"===h.params.controller.by&&(function X(ct){h.controller.spline=h.params.loop?new F(h.slidesGrid,ct.slidesGrid):new F(h.snapGrid,ct.snapGrid)}(yn),sn=-h.controller.spline.interpolate(-Rt)),(!sn||"container"===h.params.controller.by)&&(Ct=(yn.maxTranslate()-yn.minTranslate())/(h.maxTranslate()-h.minTranslate()),(Number.isNaN(Ct)||!Number.isFinite(Ct))&&(Ct=1),sn=(Rt-h.minTranslate())*Ct+yn.minTranslate()),h.params.controller.inverse&&(sn=yn.maxTranslate()-sn),yn.updateProgress(sn),yn.setTranslate(sn,h),yn.updateActiveIndex(),yn.updateSlidesClasses()}if(Array.isArray(pt))for(let yn=0;yn<pt.length;yn+=1)pt[yn]!==ot&&pt[yn]instanceof pn&&gn(pt[yn]);else pt instanceof pn&&ot!==pt&&gn(pt)},setTransition:function $e(ct,ot){const pt=h.constructor,Ct=h.controller.control;let sn;function pn(gn){gn.destroyed||(gn.setTransition(ct,h),0!==ct&&(gn.transitionStart(),gn.params.autoHeight&&p1(()=>{gn.updateAutoHeight()}),e1(gn.wrapperEl,()=>{Ct&&gn.transitionEnd()})))}if(Array.isArray(Ct))for(sn=0;sn<Ct.length;sn+=1)Ct[sn]!==ot&&Ct[sn]instanceof pt&&pn(Ct[sn]);else Ct instanceof pt&&ot!==Ct&&pn(Ct)}})},function Ul(y){let{swiper:h,extendParams:A,on:I}=y;A({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),h.a11y={clicked:!1};let X,Me,F=null,$e=(new Date).getTime();function ze($o){const Ho=F;0!==Ho.length&&(Ho.innerHTML="",Ho.innerHTML=$o)}function ot($o){($o=La($o)).forEach(Ho=>{Ho.setAttribute("tabIndex","0")})}function pt($o){($o=La($o)).forEach(Ho=>{Ho.setAttribute("tabIndex","-1")})}function Ct($o,Ho){($o=La($o)).forEach(Or=>{Or.setAttribute("role",Ho)})}function sn($o,Ho){($o=La($o)).forEach(Or=>{Or.setAttribute("aria-roledescription",Ho)})}function gn($o,Ho){($o=La($o)).forEach(Or=>{Or.setAttribute("aria-label",Ho)})}function Bn($o){($o=La($o)).forEach(Ho=>{Ho.setAttribute("aria-disabled",!0)})}function vn($o){($o=La($o)).forEach(Ho=>{Ho.setAttribute("aria-disabled",!1)})}function si($o){if(13!==$o.keyCode&&32!==$o.keyCode)return;const Ho=h.params.a11y,Or=$o.target;if(!h.pagination||!h.pagination.el||Or!==h.pagination.el&&!h.pagination.el.contains($o.target)||$o.target.matches(Ks(h.params.pagination.bulletClass))){if(h.navigation&&h.navigation.prevEl&&h.navigation.nextEl){const Ma=La(h.navigation.prevEl);La(h.navigation.nextEl).includes(Or)&&(h.isEnd&&!h.params.loop||h.slideNext(),ze(h.isEnd?Ho.lastSlideMessage:Ho.nextSlideMessage)),Ma.includes(Or)&&(h.isBeginning&&!h.params.loop||h.slidePrev(),ze(h.isBeginning?Ho.firstSlideMessage:Ho.prevSlideMessage))}h.pagination&&Or.matches(Ks(h.params.pagination.bulletClass))&&Or.click()}}function Qo(){return h.pagination&&h.pagination.bullets&&h.pagination.bullets.length}function ur(){return Qo()&&h.params.pagination.clickable}const no=($o,Ho,Or)=>{ot($o),"BUTTON"!==$o.tagName&&(Ct($o,"button"),$o.addEventListener("keydown",si)),gn($o,Or),function pn($o,Ho){($o=La($o)).forEach(Or=>{Or.setAttribute("aria-controls",Ho)})}($o,Ho)},To=$o=>{Me&&Me!==$o.target&&!Me.contains($o.target)&&(X=!0),h.a11y.clicked=!0},Jo=()=>{X=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{h.destroyed||(h.a11y.clicked=!1)})})},mo=$o=>{$e=(new Date).getTime()},ho=$o=>{if(h.a11y.clicked||(new Date).getTime()-$e<100)return;const Ho=$o.target.closest(`.${h.params.slideClass}, swiper-slide`);if(!Ho||!h.slides.includes(Ho))return;Me=Ho;const Or=h.slides.indexOf(Ho)===h.activeIndex,Ma=h.params.watchSlidesProgress&&h.visibleSlides&&h.visibleSlides.includes(Ho);Or||Ma||$o.sourceCapabilities&&$o.sourceCapabilities.firesTouchEvents||(h.isHorizontal()?h.el.scrollLeft=0:h.el.scrollTop=0,requestAnimationFrame(()=>{X||(h.params.loop?h.slideToLoop(parseInt(Ho.getAttribute("data-swiper-slide-index")),0):h.slideTo(h.slides.indexOf(Ho),0),X=!1)}))},Ro=()=>{const $o=h.params.a11y;$o.itemRoleDescriptionMessage&&sn(h.slides,$o.itemRoleDescriptionMessage),$o.slideRole&&Ct(h.slides,$o.slideRole);const Ho=h.slides.length;$o.slideLabelMessage&&h.slides.forEach((Or,Ma)=>{const wo=h.params.loop?parseInt(Or.getAttribute("data-swiper-slide-index"),10):Ma;gn(Or,$o.slideLabelMessage.replace(/\{\{index\}\}/,wo+1).replace(/\{\{slidesLength\}\}/,Ho))})};I("beforeInit",()=>{F=zu("span",h.params.a11y.notificationClass),F.setAttribute("aria-live","assertive"),F.setAttribute("aria-atomic","true")}),I("afterInit",()=>{h.params.a11y.enabled&&(()=>{const $o=h.params.a11y;h.el.append(F);const Ho=h.el;$o.containerRoleDescriptionMessage&&sn(Ho,$o.containerRoleDescriptionMessage),$o.containerMessage&&gn(Ho,$o.containerMessage);const Or=h.wrapperEl,Ma=$o.id||Or.getAttribute("id")||`swiper-wrapper-${function ct($o){return void 0===$o&&($o=16),"x".repeat($o).replace(/x/g,()=>Math.round(16*Math.random()).toString(16))}(16)}`,wo=h.params.autoplay&&h.params.autoplay.enabled?"off":"polite";(function yn($o,Ho){($o=La($o)).forEach(Or=>{Or.setAttribute("id",Ho)})})(Or,Ma),function Rt($o,Ho){($o=La($o)).forEach(Or=>{Or.setAttribute("aria-live",Ho)})}(Or,wo),Ro();let{nextEl:Gr,prevEl:vs}=h.navigation?h.navigation:{};Gr=La(Gr),vs=La(vs),Gr&&Gr.forEach(qs=>no(qs,Ma,$o.nextSlideMessage)),vs&&vs.forEach(qs=>no(qs,Ma,$o.prevSlideMessage)),ur()&&La(h.pagination.el).forEach(oc=>{oc.addEventListener("keydown",si)}),Hc().addEventListener("visibilitychange",mo),h.el.addEventListener("focus",ho,!0),h.el.addEventListener("focus",ho,!0),h.el.addEventListener("pointerdown",To,!0),h.el.addEventListener("pointerup",Jo,!0)})()}),I("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{h.params.a11y.enabled&&Ro()}),I("fromEdge toEdge afterInit lock unlock",()=>{h.params.a11y.enabled&&function Si(){if(h.params.loop||h.params.rewind||!h.navigation)return;const{nextEl:$o,prevEl:Ho}=h.navigation;Ho&&(h.isBeginning?(Bn(Ho),pt(Ho)):(vn(Ho),ot(Ho))),$o&&(h.isEnd?(Bn($o),pt($o)):(vn($o),ot($o)))}()}),I("paginationUpdate",()=>{h.params.a11y.enabled&&function Bo(){const $o=h.params.a11y;Qo()&&h.pagination.bullets.forEach(Ho=>{h.params.pagination.clickable&&(ot(Ho),h.params.pagination.renderBullet||(Ct(Ho,"button"),gn(Ho,$o.paginationBulletMessage.replace(/\{\{index\}\}/,Q0(Ho)+1)))),Ho.matches(Ks(h.params.pagination.bulletActiveClass))?Ho.setAttribute("aria-current","true"):Ho.removeAttribute("aria-current")})}()}),I("destroy",()=>{h.params.a11y.enabled&&function Rs(){F&&F.remove();let{nextEl:$o,prevEl:Ho}=h.navigation?h.navigation:{};$o=La($o),Ho=La(Ho),$o&&$o.forEach(Ma=>Ma.removeEventListener("keydown",si)),Ho&&Ho.forEach(Ma=>Ma.removeEventListener("keydown",si)),ur()&&La(h.pagination.el).forEach(wo=>{wo.removeEventListener("keydown",si)}),Hc().removeEventListener("visibilitychange",mo),h.el&&"string"!=typeof h.el&&(h.el.removeEventListener("focus",ho,!0),h.el.removeEventListener("pointerdown",To,!0),h.el.removeEventListener("pointerup",Jo,!0))}()})},function a0(y){let{swiper:h,extendParams:A,on:I}=y;A({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let F=!1,X={};const Me=sn=>sn.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),$e=sn=>{const pn=xc();let gn;gn=sn?new URL(sn):pn.location;const yn=gn.pathname.slice(1).split("/").filter(si=>""!==si),Rt=yn.length;return{key:yn[Rt-2],value:yn[Rt-1]}},ze=(sn,pn)=>{const gn=xc();if(!F||!h.params.history.enabled)return;let yn;yn=h.params.url?new URL(h.params.url):gn.location;const Rt=h.virtual&&h.params.virtual.enabled?h.slidesEl.querySelector(`[data-swiper-slide-index="${pn}"]`):h.slides[pn];let Bn=Me(Rt.getAttribute("data-history"));if(h.params.history.root.length>0){let si=h.params.history.root;"/"===si[si.length-1]&&(si=si.slice(0,si.length-1)),Bn=`${si}/${sn?`${sn}/`:""}${Bn}`}else yn.pathname.includes(sn)||(Bn=`${sn?`${sn}/`:""}${Bn}`);h.params.history.keepQuery&&(Bn+=yn.search);const vn=gn.history.state;vn&&vn.value===Bn||(h.params.history.replaceState?gn.history.replaceState({value:Bn},null,Bn):gn.history.pushState({value:Bn},null,Bn))},ct=(sn,pn,gn)=>{if(pn)for(let yn=0,Rt=h.slides.length;yn<Rt;yn+=1){const Bn=h.slides[yn];if(Me(Bn.getAttribute("data-history"))===pn){const si=h.getSlideIndex(Bn);h.slideTo(si,sn,gn)}}else h.slideTo(0,sn,gn)},ot=()=>{X=$e(h.params.url),ct(h.params.speed,X.value,!1)};I("init",()=>{h.params.history.enabled&&(()=>{const sn=xc();if(h.params.history){if(!sn.history||!sn.history.pushState)return h.params.history.enabled=!1,void(h.params.hashNavigation.enabled=!0);if(F=!0,X=$e(h.params.url),!X.key&&!X.value)return void(h.params.history.replaceState||sn.addEventListener("popstate",ot));ct(0,X.value,h.params.runCallbacksOnInit),h.params.history.replaceState||sn.addEventListener("popstate",ot)}})()}),I("destroy",()=>{h.params.history.enabled&&(()=>{const sn=xc();h.params.history.replaceState||sn.removeEventListener("popstate",ot)})()}),I("transitionEnd _freeModeNoMomentumRelease",()=>{F&&ze(h.params.history.key,h.activeIndex)}),I("slideChange",()=>{F&&h.params.cssMode&&ze(h.params.history.key,h.activeIndex)})},function Ap(y){let{swiper:h,extendParams:A,emit:I,on:F}=y,X=!1;const Me=Hc(),$e=xc();A({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(Ct,sn){if(h.virtual&&h.params.virtual.enabled){const pn=h.slides.filter(yn=>yn.getAttribute("data-hash")===sn)[0];return pn?parseInt(pn.getAttribute("data-swiper-slide-index"),10):0}return h.getSlideIndex(md(h.slidesEl,`.${h.params.slideClass}[data-hash="${sn}"], swiper-slide[data-hash="${sn}"]`)[0])}}});const ze=()=>{I("hashChange");const Ct=Me.location.hash.replace("#",""),sn=h.virtual&&h.params.virtual.enabled?h.slidesEl.querySelector(`[data-swiper-slide-index="${h.activeIndex}"]`):h.slides[h.activeIndex];if(Ct!==(sn?sn.getAttribute("data-hash"):"")){const gn=h.params.hashNavigation.getSlideIndex(h,Ct);if(typeof gn>"u"||Number.isNaN(gn))return;h.slideTo(gn)}},ct=()=>{if(!X||!h.params.hashNavigation.enabled)return;const Ct=h.virtual&&h.params.virtual.enabled?h.slidesEl.querySelector(`[data-swiper-slide-index="${h.activeIndex}"]`):h.slides[h.activeIndex],sn=Ct?Ct.getAttribute("data-hash")||Ct.getAttribute("data-history"):"";h.params.hashNavigation.replaceState&&$e.history&&$e.history.replaceState?($e.history.replaceState(null,null,`#${sn}`||""),I("hashSet")):(Me.location.hash=sn||"",I("hashSet"))};F("init",()=>{h.params.hashNavigation.enabled&&(()=>{if(!h.params.hashNavigation.enabled||h.params.history&&h.params.history.enabled)return;X=!0;const Ct=Me.location.hash.replace("#","");if(Ct){const pn=h.params.hashNavigation.getSlideIndex(h,Ct);h.slideTo(pn||0,0,h.params.runCallbacksOnInit,!0)}h.params.hashNavigation.watchState&&$e.addEventListener("hashchange",ze)})()}),F("destroy",()=>{h.params.hashNavigation.enabled&&h.params.hashNavigation.watchState&&$e.removeEventListener("hashchange",ze)}),F("transitionEnd _freeModeNoMomentumRelease",()=>{X&&ct()}),F("slideChange",()=>{X&&h.params.cssMode&&ct()})},function gm(y){let{swiper:h,extendParams:A,on:I,emit:F,params:X}=y;h.autoplay={running:!1,paused:!1,timeLeft:0},A({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let Me,$e,ot,Ct,sn,pn,gn,yn,Rt,Bn,ze=X&&X.autoplay?X.autoplay.delay:3e3,ct=X&&X.autoplay?X.autoplay.delay:3e3,pt=(new Date).getTime();function vn(Ho){!h||h.destroyed||!h.wrapperEl||Ho.target===h.wrapperEl&&(h.wrapperEl.removeEventListener("transitionend",vn),!(Bn||Ho.detail&&Ho.detail.bySwiperTouchMove)&&To())}const si=()=>{if(h.destroyed||!h.autoplay.running)return;h.autoplay.paused?Ct=!0:Ct&&(ct=ot,Ct=!1);const Ho=h.autoplay.paused?ot:pt+ct-(new Date).getTime();h.autoplay.timeLeft=Ho,F("autoplayTimeLeft",Ho,Ho/ze),$e=requestAnimationFrame(()=>{si()})},Qo=Ho=>{if(h.destroyed||!h.autoplay.running)return;cancelAnimationFrame($e),si();let Or=typeof Ho>"u"?h.params.autoplay.delay:Ho;ze=h.params.autoplay.delay,ct=h.params.autoplay.delay;const Ma=(()=>{let Ho;return Ho=h.virtual&&h.params.virtual.enabled?h.slides.filter(Ma=>Ma.classList.contains("swiper-slide-active"))[0]:h.slides[h.activeIndex],Ho?parseInt(Ho.getAttribute("data-swiper-autoplay"),10):void 0})();!Number.isNaN(Ma)&&Ma>0&&typeof Ho>"u"&&(Or=Ma,ze=Ma,ct=Ma),ot=Or;const wo=h.params.speed,Gr=()=>{!h||h.destroyed||(h.params.autoplay.reverseDirection?!h.isBeginning||h.params.loop||h.params.rewind?(h.slidePrev(wo,!0,!0),F("autoplay")):h.params.autoplay.stopOnLastSlide||(h.slideTo(h.slides.length-1,wo,!0,!0),F("autoplay")):!h.isEnd||h.params.loop||h.params.rewind?(h.slideNext(wo,!0,!0),F("autoplay")):h.params.autoplay.stopOnLastSlide||(h.slideTo(0,wo,!0,!0),F("autoplay")),h.params.cssMode&&(pt=(new Date).getTime(),requestAnimationFrame(()=>{Qo()})))};return Or>0?(clearTimeout(Me),Me=setTimeout(()=>{Gr()},Or)):requestAnimationFrame(()=>{Gr()}),Or},ur=()=>{pt=(new Date).getTime(),h.autoplay.running=!0,Qo(),F("autoplayStart")},Bo=()=>{h.autoplay.running=!1,clearTimeout(Me),cancelAnimationFrame($e),F("autoplayStop")},no=(Ho,Or)=>{if(h.destroyed||!h.autoplay.running)return;clearTimeout(Me),Ho||(Rt=!0);const Ma=()=>{F("autoplayPause"),h.params.autoplay.waitForTransition?h.wrapperEl.addEventListener("transitionend",vn):To()};if(h.autoplay.paused=!0,Or)return yn&&(ot=h.params.autoplay.delay),yn=!1,void Ma();ot=(ot||h.params.autoplay.delay)-((new Date).getTime()-pt),(!(h.isEnd&&ot<0)||h.params.loop)&&(ot<0&&(ot=0),Ma())},To=()=>{h.isEnd&&ot<0&&!h.params.loop||h.destroyed||!h.autoplay.running||(pt=(new Date).getTime(),Rt?(Rt=!1,Qo(ot)):Qo(),h.autoplay.paused=!1,F("autoplayResume"))},Jo=()=>{if(h.destroyed||!h.autoplay.running)return;const Ho=Hc();"hidden"===Ho.visibilityState&&(Rt=!0,no(!0)),"visible"===Ho.visibilityState&&To()},mo=Ho=>{"mouse"===Ho.pointerType&&(Rt=!0,Bn=!0,!h.animating&&!h.autoplay.paused&&no(!0))},ho=Ho=>{"mouse"===Ho.pointerType&&(Bn=!1,h.autoplay.paused&&To())};I("init",()=>{h.params.autoplay.enabled&&(h.params.autoplay.pauseOnMouseEnter&&(h.el.addEventListener("pointerenter",mo),h.el.addEventListener("pointerleave",ho)),Hc().addEventListener("visibilitychange",Jo),ur())}),I("destroy",()=>{h.el&&"string"!=typeof h.el&&(h.el.removeEventListener("pointerenter",mo),h.el.removeEventListener("pointerleave",ho)),Hc().removeEventListener("visibilitychange",Jo),h.autoplay.running&&Bo()}),I("_freeModeStaticRelease",()=>{(pn||Rt)&&To()}),I("_freeModeNoMomentumRelease",()=>{h.params.autoplay.disableOnInteraction?Bo():no(!0,!0)}),I("beforeTransitionStart",(Ho,Or,Ma)=>{h.destroyed||!h.autoplay.running||(Ma||!h.params.autoplay.disableOnInteraction?no(!0,!0):Bo())}),I("sliderFirstMove",()=>{if(!h.destroyed&&h.autoplay.running){if(h.params.autoplay.disableOnInteraction)return void Bo();sn=!0,pn=!1,Rt=!1,gn=setTimeout(()=>{Rt=!0,pn=!0,no(!0)},200)}}),I("touchEnd",()=>{if(!h.destroyed&&h.autoplay.running&&sn){if(clearTimeout(gn),clearTimeout(Me),h.params.autoplay.disableOnInteraction)return pn=!1,void(sn=!1);pn&&h.params.cssMode&&To(),pn=!1,sn=!1}}),I("slideChange",()=>{h.destroyed||!h.autoplay.running||(yn=!0)}),Object.assign(h.autoplay,{start:ur,stop:Bo,pause:no,resume:To})},function vf(y){let{swiper:h,extendParams:A,on:I}=y;A({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let F=!1,X=!1;function Me(){const ct=h.thumbs.swiper;if(!ct||ct.destroyed)return;const ot=ct.clickedIndex,pt=ct.clickedSlide;if(pt&&pt.classList.contains(h.params.thumbs.slideThumbActiveClass)||typeof ot>"u"||null===ot)return;let Ct;Ct=ct.params.loop?parseInt(ct.clickedSlide.getAttribute("data-swiper-slide-index"),10):ot,h.params.loop?h.slideToLoop(Ct):h.slideTo(Ct)}function $e(){const{thumbs:ct}=h.params;if(F)return!1;F=!0;const ot=h.constructor;if(ct.swiper instanceof ot)h.thumbs.swiper=ct.swiper,Object.assign(h.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(h.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),h.thumbs.swiper.update();else if(th(ct.swiper)){const pt=Object.assign({},ct.swiper);Object.assign(pt,{watchSlidesProgress:!0,slideToClickedSlide:!1}),h.thumbs.swiper=new ot(pt),X=!0}return h.thumbs.swiper.el.classList.add(h.params.thumbs.thumbsContainerClass),h.thumbs.swiper.on("tap",Me),!0}function ze(ct){const ot=h.thumbs.swiper;if(!ot||ot.destroyed)return;const pt="auto"===ot.params.slidesPerView?ot.slidesPerViewDynamic():ot.params.slidesPerView;let Ct=1;const sn=h.params.thumbs.slideThumbActiveClass;if(h.params.slidesPerView>1&&!h.params.centeredSlides&&(Ct=h.params.slidesPerView),h.params.thumbs.multipleActiveThumbs||(Ct=1),Ct=Math.floor(Ct),ot.slides.forEach(yn=>yn.classList.remove(sn)),ot.params.loop||ot.params.virtual&&ot.params.virtual.enabled)for(let yn=0;yn<Ct;yn+=1)md(ot.slidesEl,`[data-swiper-slide-index="${h.realIndex+yn}"]`).forEach(Rt=>{Rt.classList.add(sn)});else for(let yn=0;yn<Ct;yn+=1)ot.slides[h.realIndex+yn]&&ot.slides[h.realIndex+yn].classList.add(sn);const pn=h.params.thumbs.autoScrollOffset,gn=pn&&!ot.params.loop;if(h.realIndex!==ot.realIndex||gn){const yn=ot.activeIndex;let Rt,Bn;if(ot.params.loop){const vn=ot.slides.filter(si=>si.getAttribute("data-swiper-slide-index")===`${h.realIndex}`)[0];Rt=ot.slides.indexOf(vn),Bn=h.activeIndex>h.previousIndex?"next":"prev"}else Rt=h.realIndex,Bn=Rt>h.previousIndex?"next":"prev";gn&&(Rt+="next"===Bn?pn:-1*pn),ot.visibleSlidesIndexes&&ot.visibleSlidesIndexes.indexOf(Rt)<0&&(ot.params.centeredSlides&&(Rt=Rt>yn?Rt-Math.floor(pt/2)+1:Rt+Math.floor(pt/2)-1),ot.slideTo(Rt,ct?0:void 0))}}h.thumbs={swiper:null},I("beforeInit",()=>{const{thumbs:ct}=h.params;if(ct&&ct.swiper)if("string"==typeof ct.swiper||ct.swiper instanceof HTMLElement){const ot=Hc(),pt=()=>{const sn="string"==typeof ct.swiper?ot.querySelector(ct.swiper):ct.swiper;if(sn&&sn.swiper)ct.swiper=sn.swiper,$e(),ze(!0);else if(sn){const pn=gn=>{ct.swiper=gn.detail[0],sn.removeEventListener("init",pn),$e(),ze(!0),ct.swiper.update(),h.update()};sn.addEventListener("init",pn)}return sn},Ct=()=>{h.destroyed||pt()||requestAnimationFrame(Ct)};requestAnimationFrame(Ct)}else $e(),ze(!0)}),I("slideChange update resize observerUpdate",()=>{ze()}),I("setTransition",(ct,ot)=>{const pt=h.thumbs.swiper;!pt||pt.destroyed||pt.setTransition(ot)}),I("beforeDestroy",()=>{const ct=h.thumbs.swiper;!ct||ct.destroyed||X&&ct.destroy()}),Object.assign(h.thumbs,{init:$e,update:ze})},function vm(y){let{swiper:h,extendParams:A,emit:I,once:F}=y;A({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(h,{freeMode:{onTouchStart:function X(){if(h.params.cssMode)return;const ze=h.getTranslate();h.setTranslate(ze),h.setTransition(0),h.touchEventsData.velocities.length=0,h.freeMode.onTouchEnd({currentPos:h.rtl?h.translate:-h.translate})},onTouchMove:function Me(){if(h.params.cssMode)return;const{touchEventsData:ze,touches:ct}=h;0===ze.velocities.length&&ze.velocities.push({position:ct[h.isHorizontal()?"startX":"startY"],time:ze.touchStartTime}),ze.velocities.push({position:ct[h.isHorizontal()?"currentX":"currentY"],time:Sd()})},onTouchEnd:function $e(ze){let{currentPos:ct}=ze;if(h.params.cssMode)return;const{params:ot,wrapperEl:pt,rtlTranslate:Ct,snapGrid:sn,touchEventsData:pn}=h,yn=Sd()-pn.touchStartTime;if(ct<-h.minTranslate())h.slideTo(h.activeIndex);else if(ct>-h.maxTranslate())h.slideTo(h.slides.length<sn.length?sn.length-1:h.slides.length-1);else{if(ot.freeMode.momentum){if(pn.velocities.length>1){const Bo=pn.velocities.pop(),no=pn.velocities.pop(),Jo=Bo.time-no.time;h.velocity=(Bo.position-no.position)/Jo,h.velocity/=2,Math.abs(h.velocity)<ot.freeMode.minimumVelocity&&(h.velocity=0),(Jo>150||Sd()-Bo.time>300)&&(h.velocity=0)}else h.velocity=0;h.velocity*=ot.freeMode.momentumVelocityRatio,pn.velocities.length=0;let Rt=1e3*ot.freeMode.momentumRatio,vn=h.translate+h.velocity*Rt;Ct&&(vn=-vn);let Si,si=!1;const Qo=20*Math.abs(h.velocity)*ot.freeMode.momentumBounceRatio;let ur;if(vn<h.maxTranslate())ot.freeMode.momentumBounce?(vn+h.maxTranslate()<-Qo&&(vn=h.maxTranslate()-Qo),Si=h.maxTranslate(),si=!0,pn.allowMomentumBounce=!0):vn=h.maxTranslate(),ot.loop&&ot.centeredSlides&&(ur=!0);else if(vn>h.minTranslate())ot.freeMode.momentumBounce?(vn-h.minTranslate()>Qo&&(vn=h.minTranslate()+Qo),Si=h.minTranslate(),si=!0,pn.allowMomentumBounce=!0):vn=h.minTranslate(),ot.loop&&ot.centeredSlides&&(ur=!0);else if(ot.freeMode.sticky){let Bo;for(let no=0;no<sn.length;no+=1)if(sn[no]>-vn){Bo=no;break}vn=Math.abs(sn[Bo]-vn)<Math.abs(sn[Bo-1]-vn)||"next"===h.swipeDirection?sn[Bo]:sn[Bo-1],vn=-vn}if(ur&&F("transitionEnd",()=>{h.loopFix()}),0!==h.velocity){if(Rt=Ct?Math.abs((-vn-h.translate)/h.velocity):Math.abs((vn-h.translate)/h.velocity),ot.freeMode.sticky){const Bo=Math.abs((Ct?-vn:vn)-h.translate),no=h.slidesSizesGrid[h.activeIndex];Rt=Bo<no?ot.speed:Bo<2*no?1.5*ot.speed:2.5*ot.speed}}else if(ot.freeMode.sticky)return void h.slideToClosest();ot.freeMode.momentumBounce&&si?(h.updateProgress(Si),h.setTransition(Rt),h.setTranslate(vn),h.transitionStart(!0,h.swipeDirection),h.animating=!0,e1(pt,()=>{!h||h.destroyed||!pn.allowMomentumBounce||(I("momentumBounce"),h.setTransition(ot.speed),setTimeout(()=>{h.setTranslate(Si),e1(pt,()=>{!h||h.destroyed||h.transitionEnd()})},0))})):h.velocity?(I("_freeModeNoMomentumRelease"),h.updateProgress(vn),h.setTransition(Rt),h.setTranslate(vn),h.transitionStart(!0,h.swipeDirection),h.animating||(h.animating=!0,e1(pt,()=>{!h||h.destroyed||h.transitionEnd()}))):h.updateProgress(vn),h.updateActiveIndex(),h.updateSlidesClasses()}else{if(ot.freeMode.sticky)return void h.slideToClosest();ot.freeMode&&I("_freeModeNoMomentumRelease")}(!ot.freeMode.momentum||yn>=ot.longSwipesMs)&&(I("_freeModeStaticRelease"),h.updateProgress(),h.updateActiveIndex(),h.updateSlidesClasses())}}}})},function P2(y){let F,X,Me,$e,{swiper:h,extendParams:A,on:I}=y;A({grid:{rows:1,fill:"column"}});const ze=()=>{let gn=h.params.spaceBetween;return"string"==typeof gn&&gn.indexOf("%")>=0?gn=parseFloat(gn.replace("%",""))/100*h.size:"string"==typeof gn&&(gn=parseFloat(gn)),gn};I("init",()=>{$e=h.params.grid&&h.params.grid.rows>1}),I("update",()=>{const{params:gn,el:yn}=h,Rt=gn.grid&&gn.grid.rows>1;$e&&!Rt?(yn.classList.remove(`${gn.containerModifierClass}grid`,`${gn.containerModifierClass}grid-column`),Me=1,h.emitContainerClasses()):!$e&&Rt&&(yn.classList.add(`${gn.containerModifierClass}grid`),"column"===gn.grid.fill&&yn.classList.add(`${gn.containerModifierClass}grid-column`),h.emitContainerClasses()),$e=Rt}),h.grid={initSlides:gn=>{const{slidesPerView:yn}=h.params,{rows:Rt,fill:Bn}=h.params.grid,vn=h.virtual&&h.params.virtual.enabled?h.virtual.slides.length:gn.length;Me=Math.floor(vn/Rt),F=Math.floor(vn/Rt)===vn/Rt?vn:Math.ceil(vn/Rt)*Rt,"auto"!==yn&&"row"===Bn&&(F=Math.max(F,yn*Rt)),X=F/Rt},unsetSlides:()=>{h.slides&&h.slides.forEach(gn=>{gn.swiperSlideGridSet&&(gn.style.height="",gn.style[h.getDirectionLabel("margin-top")]="")})},updateSlide:(gn,yn,Rt)=>{const{slidesPerGroup:Bn}=h.params,vn=ze(),{rows:si,fill:Si}=h.params.grid,Qo=h.virtual&&h.params.virtual.enabled?h.virtual.slides.length:Rt.length;let ur,Bo,no;if("row"===Si&&Bn>1){const To=Math.floor(gn/(Bn*si)),Jo=gn-si*Bn*To,mo=0===To?Bn:Math.min(Math.ceil((Qo-To*si*Bn)/si),Bn);no=Math.floor(Jo/mo),Bo=Jo-no*mo+To*Bn,ur=Bo+no*F/si,yn.style.order=ur}else"column"===Si?(Bo=Math.floor(gn/si),no=gn-Bo*si,(Bo>Me||Bo===Me&&no===si-1)&&(no+=1,no>=si&&(no=0,Bo+=1))):(no=Math.floor(gn/X),Bo=gn-no*X);yn.row=no,yn.column=Bo,yn.style.height=`calc((100% - ${(si-1)*vn}px) / ${si})`,yn.style[h.getDirectionLabel("margin-top")]=0!==no?vn&&`${vn}px`:"",yn.swiperSlideGridSet=!0},updateWrapperSize:(gn,yn)=>{const{centeredSlides:Rt,roundLengths:Bn}=h.params,vn=ze(),{rows:si}=h.params.grid;if(h.virtualSize=(gn+vn)*F,h.virtualSize=Math.ceil(h.virtualSize/si)-vn,h.params.cssMode||(h.wrapperEl.style[h.getDirectionLabel("width")]=`${h.virtualSize+vn}px`),Rt){const Si=[];for(let Qo=0;Qo<yn.length;Qo+=1){let ur=yn[Qo];Bn&&(ur=Math.floor(ur)),yn[Qo]<h.virtualSize+yn[0]&&Si.push(ur)}yn.splice(0,yn.length),yn.push(...Si)}}}},function zg(y){let{swiper:h}=y;Object.assign(h,{appendSlide:Rg.bind(h),prependSlide:Zf.bind(h),addSlide:R2.bind(h),removeSlide:z2.bind(h),removeAllSlides:ic.bind(h)})},function _m(y){let{swiper:h,extendParams:A,on:I}=y;A({fadeEffect:{crossFade:!1}}),Ju({effect:"fade",swiper:h,on:I,setTranslate:()=>{const{slides:Me}=h;for(let ze=0;ze<Me.length;ze+=1){const ct=h.slides[ze];let pt=-ct.swiperSlideOffset;h.params.virtualTranslate||(pt-=h.translate);let Ct=0;h.isHorizontal()||(Ct=pt,pt=0);const sn=h.params.fadeEffect.crossFade?Math.max(1-Math.abs(ct.progress),0):1+Math.min(Math.max(ct.progress,-1),0),pn=El(0,ct);pn.style.opacity=sn,pn.style.transform=`translate3d(${pt}px, ${Ct}px, 0px)`}},setTransition:Me=>{const $e=h.slides.map(ze=>Z0(ze));$e.forEach(ze=>{ze.style.transitionDuration=`${Me}ms`}),pl({swiper:h,duration:Me,transformElements:$e,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!h.params.cssMode})})},function Zm(y){let{swiper:h,extendParams:A,on:I}=y;A({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const F=(ze,ct,ot)=>{let pt=ze.querySelector(ot?".swiper-slide-shadow-left":".swiper-slide-shadow-top"),Ct=ze.querySelector(ot?".swiper-slide-shadow-right":".swiper-slide-shadow-bottom");pt||(pt=zu("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(ot?"left":"top")).split(" ")),ze.append(pt)),Ct||(Ct=zu("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(ot?"right":"bottom")).split(" ")),ze.append(Ct)),pt&&(pt.style.opacity=Math.max(-ct,0)),Ct&&(Ct.style.opacity=Math.max(ct,0))};Ju({effect:"cube",swiper:h,on:I,setTranslate:()=>{const{el:ze,wrapperEl:ct,slides:ot,width:pt,height:Ct,rtlTranslate:sn,size:pn,browser:gn}=h,yn=z1(h),Rt=h.params.cubeEffect,Bn=h.isHorizontal(),vn=h.virtual&&h.params.virtual.enabled;let Si,si=0;Rt.shadow&&(Bn?(Si=h.wrapperEl.querySelector(".swiper-cube-shadow"),Si||(Si=zu("div","swiper-cube-shadow"),h.wrapperEl.append(Si)),Si.style.height=`${pt}px`):(Si=ze.querySelector(".swiper-cube-shadow"),Si||(Si=zu("div","swiper-cube-shadow"),ze.append(Si))));for(let ur=0;ur<ot.length;ur+=1){const Bo=ot[ur];let no=ur;vn&&(no=parseInt(Bo.getAttribute("data-swiper-slide-index"),10));let To=90*no,Jo=Math.floor(To/360);sn&&(To=-To,Jo=Math.floor(-To/360));const mo=Math.max(Math.min(Bo.progress,1),-1);let ho=0,Ro=0,fr=0;no%4==0?(ho=4*-Jo*pn,fr=0):(no-1)%4==0?(ho=0,fr=4*-Jo*pn):(no-2)%4==0?(ho=pn+4*Jo*pn,fr=pn):(no-3)%4==0&&(ho=-pn,fr=3*pn+4*pn*Jo),sn&&(ho=-ho),Bn||(Ro=ho,ho=0);const Rs=`rotateX(${yn(Bn?0:-To)}deg) rotateY(${yn(Bn?To:0)}deg) translate3d(${ho}px, ${Ro}px, ${fr}px)`;mo<=1&&mo>-1&&(si=90*no+90*mo,sn&&(si=90*-no-90*mo)),Bo.style.transform=Rs,Rt.slideShadows&&F(Bo,mo,Bn)}if(ct.style.transformOrigin=`50% 50% -${pn/2}px`,ct.style["-webkit-transform-origin"]=`50% 50% -${pn/2}px`,Rt.shadow)if(Bn)Si.style.transform=`translate3d(0px, ${pt/2+Rt.shadowOffset}px, ${-pt/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${Rt.shadowScale})`;else{const ur=Math.abs(si)-90*Math.floor(Math.abs(si)/90),Bo=1.5-(Math.sin(2*ur*Math.PI/360)/2+Math.cos(2*ur*Math.PI/360)/2),To=Rt.shadowScale/Bo;Si.style.transform=`scale3d(${Rt.shadowScale}, 1, ${To}) translate3d(0px, ${Ct/2+Rt.shadowOffset}px, ${-Ct/2/To}px) rotateX(-89.99deg)`}const Qo=(gn.isSafari||gn.isWebView)&&gn.needPerspectiveFix?-pn/2:0;ct.style.transform=`translate3d(0px,0,${Qo}px) rotateX(${yn(h.isHorizontal()?0:si)}deg) rotateY(${yn(h.isHorizontal()?-si:0)}deg)`,ct.style.setProperty("--swiper-cube-translate-z",`${Qo}px`)},setTransition:ze=>{const{el:ct,slides:ot}=h;if(ot.forEach(pt=>{pt.style.transitionDuration=`${ze}ms`,pt.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(Ct=>{Ct.style.transitionDuration=`${ze}ms`})}),h.params.cubeEffect.shadow&&!h.isHorizontal()){const pt=ct.querySelector(".swiper-cube-shadow");pt&&(pt.style.transitionDuration=`${ze}ms`)}},recreateShadows:()=>{const ze=h.isHorizontal();h.slides.forEach(ct=>{const ot=Math.max(Math.min(ct.progress,1),-1);F(ct,ot,ze)})},getEffectParams:()=>h.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})},function Td(y){let{swiper:h,extendParams:A,on:I}=y;A({flipEffect:{slideShadows:!0,limitRotation:!0}});const F=(ze,ct)=>{let ot=h.isHorizontal()?ze.querySelector(".swiper-slide-shadow-left"):ze.querySelector(".swiper-slide-shadow-top"),pt=h.isHorizontal()?ze.querySelector(".swiper-slide-shadow-right"):ze.querySelector(".swiper-slide-shadow-bottom");ot||(ot=Dp("flip",ze,h.isHorizontal()?"left":"top")),pt||(pt=Dp("flip",ze,h.isHorizontal()?"right":"bottom")),ot&&(ot.style.opacity=Math.max(-ct,0)),pt&&(pt.style.opacity=Math.max(ct,0))};Ju({effect:"flip",swiper:h,on:I,setTranslate:()=>{const{slides:ze,rtlTranslate:ct}=h,ot=h.params.flipEffect,pt=z1(h);for(let Ct=0;Ct<ze.length;Ct+=1){const sn=ze[Ct];let pn=sn.progress;h.params.flipEffect.limitRotation&&(pn=Math.max(Math.min(sn.progress,1),-1));const gn=sn.swiperSlideOffset;let Rt=-180*pn,Bn=0,vn=h.params.cssMode?-gn-h.translate:-gn,si=0;h.isHorizontal()?ct&&(Rt=-Rt):(si=vn,vn=0,Bn=-Rt,Rt=0),sn.style.zIndex=-Math.abs(Math.round(pn))+ze.length,ot.slideShadows&&F(sn,pn);const Si=`translate3d(${vn}px, ${si}px, 0px) rotateX(${pt(Bn)}deg) rotateY(${pt(Rt)}deg)`;El(0,sn).style.transform=Si}},setTransition:ze=>{const ct=h.slides.map(ot=>Z0(ot));ct.forEach(ot=>{ot.style.transitionDuration=`${ze}ms`,ot.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(pt=>{pt.style.transitionDuration=`${ze}ms`})}),pl({swiper:h,duration:ze,transformElements:ct})},recreateShadows:()=>{h.slides.forEach(ze=>{let ct=ze.progress;h.params.flipEffect.limitRotation&&(ct=Math.max(Math.min(ze.progress,1),-1)),F(ze,ct)})},getEffectParams:()=>h.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!h.params.cssMode})})},function up(y){let{swiper:h,extendParams:A,on:I}=y;A({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Ju({effect:"coverflow",swiper:h,on:I,setTranslate:()=>{const{width:Me,height:$e,slides:ze,slidesSizesGrid:ct}=h,ot=h.params.coverflowEffect,pt=h.isHorizontal(),Ct=h.translate,sn=pt?Me/2-Ct:$e/2-Ct,pn=pt?ot.rotate:-ot.rotate,gn=ot.depth,yn=z1(h);for(let Rt=0,Bn=ze.length;Rt<Bn;Rt+=1){const vn=ze[Rt],si=ct[Rt],Qo=(sn-vn.swiperSlideOffset-si/2)/si,ur="function"==typeof ot.modifier?ot.modifier(Qo):Qo*ot.modifier;let Bo=pt?pn*ur:0,no=pt?0:pn*ur,To=-gn*Math.abs(ur),Jo=ot.stretch;"string"==typeof Jo&&-1!==Jo.indexOf("%")&&(Jo=parseFloat(ot.stretch)/100*si);let mo=pt?0:Jo*ur,ho=pt?Jo*ur:0,Ro=1-(1-ot.scale)*Math.abs(ur);Math.abs(ho)<.001&&(ho=0),Math.abs(mo)<.001&&(mo=0),Math.abs(To)<.001&&(To=0),Math.abs(Bo)<.001&&(Bo=0),Math.abs(no)<.001&&(no=0),Math.abs(Ro)<.001&&(Ro=0);const fr=`translate3d(${ho}px,${mo}px,${To}px)  rotateX(${yn(no)}deg) rotateY(${yn(Bo)}deg) scale(${Ro})`;if(El(0,vn).style.transform=fr,vn.style.zIndex=1-Math.abs(Math.round(ur)),ot.slideShadows){let $o=vn.querySelector(pt?".swiper-slide-shadow-left":".swiper-slide-shadow-top"),Ho=vn.querySelector(pt?".swiper-slide-shadow-right":".swiper-slide-shadow-bottom");$o||($o=Dp("coverflow",vn,pt?"left":"top")),Ho||(Ho=Dp("coverflow",vn,pt?"right":"bottom")),$o&&($o.style.opacity=ur>0?ur:0),Ho&&(Ho.style.opacity=-ur>0?-ur:0)}}},setTransition:Me=>{h.slides.map(ze=>Z0(ze)).forEach(ze=>{ze.style.transitionDuration=`${Me}ms`,ze.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(ct=>{ct.style.transitionDuration=`${Me}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})},function c4(y){let{swiper:h,extendParams:A,on:I}=y;A({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const F=$e=>"string"==typeof $e?$e:`${$e}px`;Ju({effect:"creative",swiper:h,on:I,setTranslate:()=>{const{slides:$e,wrapperEl:ze,slidesSizesGrid:ct}=h,ot=h.params.creativeEffect,{progressMultiplier:pt}=ot,Ct=h.params.centeredSlides,sn=z1(h);Ct&&(ze.style.transform=`translateX(calc(50% - ${ct[0]/2-h.params.slidesOffsetBefore||0}px))`);for(let pn=0;pn<$e.length;pn+=1){const gn=$e[pn],yn=gn.progress,Rt=Math.min(Math.max(gn.progress,-ot.limitProgress),ot.limitProgress);let Bn=Rt;Ct||(Bn=Math.min(Math.max(gn.originalProgress,-ot.limitProgress),ot.limitProgress));const vn=gn.swiperSlideOffset,si=[h.params.cssMode?-vn-h.translate:-vn,0,0],Si=[0,0,0];let Qo=!1;h.isHorizontal()||(si[1]=si[0],si[0]=0);let ur={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};Rt<0?(ur=ot.next,Qo=!0):Rt>0&&(ur=ot.prev,Qo=!0),si.forEach((Ro,fr)=>{si[fr]=`calc(${Ro}px + (${F(ur.translate[fr])} * ${Math.abs(Rt*pt)}))`}),Si.forEach((Ro,fr)=>{let Rs=ur.rotate[fr]*Math.abs(Rt*pt);Si[fr]=Rs}),gn.style.zIndex=-Math.abs(Math.round(yn))+$e.length;const Bo=si.join(", "),no=`rotateX(${sn(Si[0])}deg) rotateY(${sn(Si[1])}deg) rotateZ(${sn(Si[2])}deg)`,Jo=Bn<0?1+(1-ur.opacity)*Bn*pt:1-(1-ur.opacity)*Bn*pt,mo=`translate3d(${Bo}) ${no} ${Bn<0?`scale(${1+(1-ur.scale)*Bn*pt})`:`scale(${1-(1-ur.scale)*Bn*pt})`}`;if(Qo&&ur.shadow||!Qo){let Ro=gn.querySelector(".swiper-slide-shadow");!Ro&&ur.shadow&&(Ro=Dp("creative",gn)),Ro&&(Ro.style.opacity=Math.min(Math.max(Math.abs(ot.shadowPerProgress?Rt*(1/ot.limitProgress):Rt),0),1))}const ho=El(0,gn);ho.style.transform=mo,ho.style.opacity=Jo,ur.origin&&(ho.style.transformOrigin=ur.origin)}},setTransition:$e=>{const ze=h.slides.map(ct=>Z0(ct));ze.forEach(ct=>{ct.style.transitionDuration=`${$e}ms`,ct.querySelectorAll(".swiper-slide-shadow").forEach(ot=>{ot.style.transitionDuration=`${$e}ms`})}),pl({swiper:h,duration:$e,transformElements:ze,allSlides:!0})},perspective:()=>h.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!h.params.cssMode})})},function Qm(y){let{swiper:h,extendParams:A,on:I}=y;A({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),Ju({effect:"cards",swiper:h,on:I,setTranslate:()=>{const{slides:Me,activeIndex:$e,rtlTranslate:ze}=h,ct=h.params.cardsEffect,{startTranslate:ot,isTouched:pt}=h.touchEventsData,Ct=ze?-h.translate:h.translate;for(let sn=0;sn<Me.length;sn+=1){const pn=Me[sn],gn=pn.progress,yn=Math.min(Math.max(gn,-4),4);let Rt=pn.swiperSlideOffset;h.params.centeredSlides&&!h.params.cssMode&&(h.wrapperEl.style.transform=`translateX(${h.minTranslate()}px)`),h.params.centeredSlides&&h.params.cssMode&&(Rt-=Me[0].swiperSlideOffset);let Bn=h.params.cssMode?-Rt-h.translate:-Rt,vn=0;const si=-100*Math.abs(yn);let Si=1,Qo=-ct.perSlideRotate*yn,ur=ct.perSlideOffset-.75*Math.abs(yn);const Bo=h.virtual&&h.params.virtual.enabled?h.virtual.from+sn:sn;if((Bo===$e||Bo===$e-1)&&yn>0&&yn<1&&(pt||h.params.cssMode)&&Ct<ot||(Bo===$e||Bo===$e+1)&&yn<0&&yn>-1&&(pt||h.params.cssMode)&&Ct>ot){const Ro=(1-Math.abs((Math.abs(yn)-.5)/.5))**.5;Qo+=-28*yn*Ro,Si+=-.5*Ro,ur+=96*Ro,vn=-25*Ro*Math.abs(yn)+"%"}if(Bn=yn<0?`calc(${Bn}px ${ze?"-":"+"} (${ur*Math.abs(yn)}%))`:yn>0?`calc(${Bn}px ${ze?"-":"+"} (-${ur*Math.abs(yn)}%))`:`${Bn}px`,!h.isHorizontal()){const Ro=vn;vn=Bn,Bn=Ro}const mo=`\n        translate3d(${Bn}, ${vn}, ${si}px)\n        rotateZ(${ct.rotate?ze?-Qo:Qo:0}deg)\n        scale(${yn<0?""+(1+(1-Si)*yn):""+(1-(1-Si)*yn)})\n      `;if(ct.slideShadows){let Ro=pn.querySelector(".swiper-slide-shadow");Ro||(Ro=Dp("cards",pn)),Ro&&(Ro.style.opacity=Math.min(Math.max((Math.abs(yn)-.5)/.5,0),1))}pn.style.zIndex=-Math.abs(Math.round(gn))+Me.length,El(0,pn).style.transform=mo}},setTransition:Me=>{const $e=h.slides.map(ze=>Z0(ze));$e.forEach(ze=>{ze.style.transitionDuration=`${Me}ms`,ze.querySelectorAll(".swiper-slide-shadow").forEach(ct=>{ct.style.transitionDuration=`${Me}ms`})}),pl({swiper:h,duration:Me,transformElements:$e})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!h.params.cssMode})})}];wu.use(u4);const Pp=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function oh(y){return"object"==typeof y&&null!==y&&y.constructor&&"Object"===Object.prototype.toString.call(y).slice(8,-1)&&!y.__swiper__}function Md(y,h){const A=["__proto__","constructor","prototype"];Object.keys(h).filter(I=>A.indexOf(I)<0).forEach(I=>{typeof y[I]>"u"?y[I]=h[I]:oh(h[I])&&oh(y[I])&&Object.keys(h[I]).length>0?h[I].__swiper__?y[I]=h[I]:Md(y[I],h[I]):y[I]=h[I]})}function O2(y){return void 0===y&&(y=""),y.replace(/-[a-z]/g,h=>h.toUpperCase().replace("-",""))}const L2=y=>{if(parseFloat(y)===Number(y))return Number(y);if("true"===y||""===y)return!0;if("false"===y)return!1;if("null"===y)return null;if("undefined"!==y){if("string"==typeof y&&y.includes("{")&&y.includes("}")&&y.includes('"')){let h;try{h=JSON.parse(y)}catch{h=y}return h}return y}},zp=["a11y","autoplay","controller","cards-effect","coverflow-effect","creative-effect","cube-effect","fade-effect","flip-effect","free-mode","grid","hash-navigation","history","keyboard","mousewheel","navigation","pagination","parallax","scrollbar","thumbs","virtual","zoom"];function dp(y,h,A){const I={},F={};Md(I,L0);const X=[...Pp,"on"],Me=X.map(ze=>ze.replace(/_/,""));X.forEach(ze=>{ze=ze.replace("_",""),typeof y[ze]<"u"&&(F[ze]=y[ze])});const $e=[...y.attributes];return"string"==typeof h&&typeof A<"u"&&$e.push({name:h,value:oh(A)?{...A}:A}),$e.forEach(ze=>{const ct=zp.filter(ot=>0===ze.name.indexOf(`${ot}-`))[0];if(ct){const ot=O2(ct),pt=O2(ze.name.split(`${ct}-`)[1]);typeof F[ot]>"u"&&(F[ot]={}),!0===F[ot]&&(F[ot]={enabled:!0}),F[ot][pt]=L2(ze.value)}else{const ot=O2(ze.name);if(!Me.includes(ot))return;const pt=L2(ze.value);F[ot]&&zp.includes(ze.name)&&!oh(pt)?(F[ot].constructor!==Object&&(F[ot]={}),F[ot].enabled=!!pt):F[ot]=pt}}),Md(I,F),I.navigation?I.navigation={prevEl:".swiper-button-prev",nextEl:".swiper-button-next",...!0!==I.navigation?I.navigation:{}}:!1===I.navigation&&delete I.navigation,I.scrollbar?I.scrollbar={el:".swiper-scrollbar",...!0!==I.scrollbar?I.scrollbar:{}}:!1===I.scrollbar&&delete I.scrollbar,I.pagination?I.pagination={el:".swiper-pagination",...!0!==I.pagination?I.pagination:{}}:!1===I.pagination&&delete I.pagination,{params:I,passedParams:F}}const Qf=":host{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{width:100%;height:100%;margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android ::slotted(swiper-slide),.swiper-ios ::slotted(swiper-slide),.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}::slotted(swiper-slide){flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}::slotted(.swiper-slide-invisible-blank){visibility:hidden}.swiper-autoheight,.swiper-autoheight ::slotted(swiper-slide){height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden ::slotted(swiper-slide){transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d ::slotted(swiper-slide){transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode ::slotted(swiper-slide){scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode ::slotted(swiper-slide){scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered ::slotted(swiper-slide){scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal ::slotted(swiper-slide):first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical ::slotted(swiper-slide):first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-virtual ::slotted(swiper-slide){-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:host{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}::slotted(.swiper-slide-zoomed){cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode ::slotted(swiper-slide){transition-timing-function:ease-out}.swiper-fade ::slotted(swiper-slide){pointer-events:none;transition-property:opacity}.swiper-fade ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-fade ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-fade ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube{overflow:visible}.swiper-cube ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-cube.swiper-rtl ::slotted(swiper-slide){transform-origin:100% 0}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-next),.swiper-cube ::slotted(.swiper-slide-prev){pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube ::slotted(.swiper-slide-next)+::slotted(swiper-slide){pointer-events:auto;visibility:visible}.swiper-flip{overflow:visible}.swiper-flip ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-flip ::slotted(.swiper-slide-active),.swiper-flip ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-creative ::slotted(swiper-slide){-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper-cards{overflow:visible}.swiper-cards ::slotted(swiper-slide){transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}",rh=typeof window>"u"||typeof HTMLElement>"u"?class bm{}:HTMLElement,bf='<svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.38296 20.0762C0.111788 19.805 0.111788 19.3654 0.38296 19.0942L9.19758 10.2796L0.38296 1.46497C0.111788 1.19379 0.111788 0.754138 0.38296 0.482966C0.654131 0.211794 1.09379 0.211794 1.36496 0.482966L10.4341 9.55214C10.8359 9.9539 10.8359 10.6053 10.4341 11.007L1.36496 20.0762C1.09379 20.3474 0.654131 20.3474 0.38296 20.0762Z" fill="currentColor"/></svg>\n    ',Op=(y,h)=>{if(typeof CSSStyleSheet<"u"&&y.adoptedStyleSheets){const A=new CSSStyleSheet;A.replaceSync(h),y.adoptedStyleSheets=[A]}else{const A=document.createElement("style");A.rel="stylesheet",A.textContent=h,y.appendChild(A)}};class B2 extends rh{constructor(){super(),this.attachShadow({mode:"open"})}static get nextButtonSvg(){return bf}static get prevButtonSvg(){return bf.replace("/></svg>",' transform-origin="center" transform="rotate(180)"/></svg>')}cssStyles(){return[Qf,...this.injectStyles&&Array.isArray(this.injectStyles)?this.injectStyles:[]].join("\n")}cssLinks(){return this.injectStylesUrls||[]}calcSlideSlots(){const h=this.slideSlots||0,A=[...this.querySelectorAll("[slot^=slide-]")].map(I=>parseInt(I.getAttribute("slot").split("slide-")[1],10));if(this.slideSlots=A.length?Math.max(...A)+1:0,this.rendered)if(this.slideSlots>h)for(let I=h;I<this.slideSlots;I+=1){const F=document.createElement("swiper-slide");F.setAttribute("part",`slide slide-${I+1}`);const X=document.createElement("slot");X.setAttribute("name",`slide-${I+1}`),F.appendChild(X),this.shadowRoot.querySelector(".swiper-wrapper").appendChild(F)}else if(this.slideSlots<h){const I=this.swiper.slides;for(let F=I.length-1;F>=0;F-=1)F>this.slideSlots&&I[F].remove()}}render(){if(this.rendered)return;this.calcSlideSlots();let h=this.cssStyles();this.slideSlots>0&&(h=h.replace(/::slotted\(([a-z-0-9.]*)\)/g,"$1")),h.length&&Op(this.shadowRoot,h),this.cssLinks().forEach(I=>{if(this.shadowRoot.querySelector(`link[href="${I}"]`))return;const X=document.createElement("link");X.rel="stylesheet",X.href=I,this.shadowRoot.appendChild(X)});const A=document.createElement("div");A.classList.add("swiper"),A.part="container",A.innerHTML=`\n      <slot name="container-start"></slot>\n      <div class="swiper-wrapper" part="wrapper">\n        <slot></slot>\n        ${Array.from({length:this.slideSlots}).map((I,F)=>`\n        <swiper-slide part="slide slide-${F}">\n          <slot name="slide-${F}"></slot>\n        </swiper-slide>\n        `).join("")}\n      </div>\n      <slot name="container-end"></slot>\n      ${function _f(y){return void 0===y&&(y={}),y.navigation&&typeof y.navigation.nextEl>"u"&&typeof y.navigation.prevEl>"u"}(this.passedParams)?`\n        <div part="button-prev" class="swiper-button-prev">${this.constructor.prevButtonSvg}</div>\n        <div part="button-next" class="swiper-button-next">${this.constructor.nextButtonSvg}</div>\n      `:""}\n      ${function ym(y){return void 0===y&&(y={}),y.pagination&&typeof y.pagination.el>"u"}(this.passedParams)?'\n        <div part="pagination" class="swiper-pagination"></div>\n      ':""}\n      ${function Rp(y){return void 0===y&&(y={}),y.scrollbar&&typeof y.scrollbar.el>"u"}(this.passedParams)?'\n        <div part="scrollbar" class="swiper-scrollbar"></div>\n      ':""}\n    `,this.shadowRoot.appendChild(A),this.rendered=!0}initialize(){var h=this;if(this.initialized)return;this.initialized=!0;const{params:A,passedParams:I}=dp(this);this.swiperParams=A,this.passedParams=I,delete this.swiperParams.init,this.render(),this.swiper=new wu(this.shadowRoot.querySelector(".swiper"),{...A.virtual?{}:{observer:!0},...A,touchEventsTarget:"container",onAny:function(F){"observerUpdate"===F&&h.calcSlideSlots();const X=A.eventsPrefix?`${A.eventsPrefix}${F.toLowerCase()}`:F.toLowerCase();for(var Me=arguments.length,$e=new Array(Me>1?Me-1:0),ze=1;ze<Me;ze++)$e[ze-1]=arguments[ze];const ct=new CustomEvent(X,{detail:$e,bubbles:"hashChange"!==F,cancelable:!0});h.dispatchEvent(ct)}})}connectedCallback(){this.initialized&&this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||!1===this.init||"false"===this.getAttribute("init")||this.initialize()}disconnectedCallback(){this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||(this.swiper&&this.swiper.destroy&&this.swiper.destroy(),this.initialized=!1)}updateSwiperOnPropChange(h,A){const{params:I,passedParams:F}=dp(this,h,A);this.passedParams=F,this.swiperParams=I,(!this.swiper||this.swiper.params[h]!==A)&&function yf(y){let{swiper:h,slides:A,passedParams:I,changedParams:F,nextEl:X,prevEl:Me,scrollbarEl:$e,paginationEl:ze}=y;const ct=F.filter(no=>"children"!==no&&"direction"!==no&&"wrapperClass"!==no),{params:ot,pagination:pt,navigation:Ct,scrollbar:sn,virtual:pn,thumbs:gn}=h;let yn,Rt,Bn,vn,si,Si,Qo,ur;F.includes("thumbs")&&I.thumbs&&I.thumbs.swiper&&ot.thumbs&&!ot.thumbs.swiper&&(yn=!0),F.includes("controller")&&I.controller&&I.controller.control&&ot.controller&&!ot.controller.control&&(Rt=!0),F.includes("pagination")&&I.pagination&&(I.pagination.el||ze)&&(ot.pagination||!1===ot.pagination)&&pt&&!pt.el&&(Bn=!0),F.includes("scrollbar")&&I.scrollbar&&(I.scrollbar.el||$e)&&(ot.scrollbar||!1===ot.scrollbar)&&sn&&!sn.el&&(vn=!0),F.includes("navigation")&&I.navigation&&(I.navigation.prevEl||Me)&&(I.navigation.nextEl||X)&&(ot.navigation||!1===ot.navigation)&&Ct&&!Ct.prevEl&&!Ct.nextEl&&(si=!0);const Bo=no=>{h[no]&&(h[no].destroy(),"navigation"===no?(h.isElement&&(h[no].prevEl.remove(),h[no].nextEl.remove()),ot[no].prevEl=void 0,ot[no].nextEl=void 0,h[no].prevEl=void 0,h[no].nextEl=void 0):(h.isElement&&h[no].el.remove(),ot[no].el=void 0,h[no].el=void 0))};F.includes("loop")&&h.isElement&&(ot.loop&&!I.loop?Si=!0:!ot.loop&&I.loop?Qo=!0:ur=!0),ct.forEach(no=>{if(oh(ot[no])&&oh(I[no]))Object.assign(ot[no],I[no]),("navigation"===no||"pagination"===no||"scrollbar"===no)&&"enabled"in I[no]&&!I[no].enabled&&Bo(no);else{const To=I[no];!0!==To&&!1!==To||"navigation"!==no&&"pagination"!==no&&"scrollbar"!==no?ot[no]=I[no]:!1===To&&Bo(no)}}),ct.includes("controller")&&!Rt&&h.controller&&h.controller.control&&ot.controller&&ot.controller.control&&(h.controller.control=ot.controller.control),F.includes("children")&&A&&pn&&ot.virtual.enabled?(pn.slides=A,pn.update(!0)):F.includes("virtual")&&pn&&ot.virtual.enabled&&(A&&(pn.slides=A),pn.update(!0)),F.includes("children")&&A&&ot.loop&&(ur=!0),yn&&gn.init()&&gn.update(!0),Rt&&(h.controller.control=ot.controller.control),Bn&&(h.isElement&&(!ze||"string"==typeof ze)&&(ze=document.createElement("div"),ze.classList.add("swiper-pagination"),ze.part.add("pagination"),h.el.appendChild(ze)),ze&&(ot.pagination.el=ze),pt.init(),pt.render(),pt.update()),vn&&(h.isElement&&(!$e||"string"==typeof $e)&&($e=document.createElement("div"),$e.classList.add("swiper-scrollbar"),$e.part.add("scrollbar"),h.el.appendChild($e)),$e&&(ot.scrollbar.el=$e),sn.init(),sn.updateSize(),sn.setTranslate()),si&&(h.isElement&&((!X||"string"==typeof X)&&(X=document.createElement("div"),X.classList.add("swiper-button-next"),X.innerHTML=h.hostEl.constructor.nextButtonSvg,X.part.add("button-next"),h.el.appendChild(X)),(!Me||"string"==typeof Me)&&(Me=document.createElement("div"),Me.classList.add("swiper-button-prev"),Me.innerHTML=h.hostEl.constructor.prevButtonSvg,Me.part.add("button-prev"),h.el.appendChild(Me))),X&&(ot.navigation.nextEl=X),Me&&(ot.navigation.prevEl=Me),Ct.init(),Ct.update()),F.includes("allowSlideNext")&&(h.allowSlideNext=I.allowSlideNext),F.includes("allowSlidePrev")&&(h.allowSlidePrev=I.allowSlidePrev),F.includes("direction")&&h.changeDirection(I.direction,!1),(Si||ur)&&h.loopDestroy(),(Qo||ur)&&h.loopCreate(),h.update()}({swiper:this.swiper,passedParams:this.passedParams,changedParams:[O2(h)],..."navigation"===h&&F[h]?{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}:{},..."pagination"===h&&F[h]?{paginationEl:".swiper-pagination"}:{},..."scrollbar"===h&&F[h]?{scrollbarEl:".swiper-scrollbar"}:{}})}attributeChangedCallback(h,A,I){this.initialized&&("true"===A&&null===I&&(I=!1),this.updateSwiperOnPropChange(h,I))}static get observedAttributes(){return Pp.filter(A=>A.includes("_")).map(A=>A.replace(/[A-Z]/g,I=>`-${I}`).replace("_","").toLowerCase())}}Pp.forEach(y=>{"init"!==y&&(y=y.replace("_",""),Object.defineProperty(B2.prototype,y,{configurable:!0,get(){return(this.passedParams||{})[y]},set(h){this.passedParams||(this.passedParams={}),this.passedParams[y]=h,this.initialized&&this.updateSwiperOnPropChange(y,h)}}))});function Og(y,h){1&y&&(C.j41(0,"ion-tab-button",5),C.nrm(1,"ion-icon",6),C.EFF(2," Signaler "),C.k0s(),C.j41(3,"ion-tab-button",7),C.nrm(4,"ion-icon",8),C.EFF(5," Login "),C.k0s())}function e2(y,h){1&y&&(C.j41(0,"ion-tab-button",2),C.nrm(1,"ion-icon",9),C.EFF(2," Mon Espace "),C.k0s())}typeof window<"u"&&(window.SwiperElementRegisterParams=y=>{Pp.push(...y)}),typeof window>"u"||(window.customElements.get("swiper-container")||window.customElements.define("swiper-container",B2),window.customElements.get("swiper-slide")||window.customElements.define("swiper-slide",class wm extends rh{constructor(){super(),this.attachShadow({mode:"open"})}render(){const h=this.lazy||""===this.getAttribute("lazy")||"true"===this.getAttribute("lazy");if(Op(this.shadowRoot,"::slotted(.swiper-slide-shadow),::slotted(.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-top){position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}::slotted(.swiper-slide-shadow){background:rgba(0,0,0,.15)}::slotted(.swiper-slide-shadow-left){background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-right){background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-top){background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-bottom){background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear;width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-zoom-container){width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}::slotted(.swiper-zoom-container)>canvas,::slotted(.swiper-zoom-container)>img,::slotted(.swiper-zoom-container)>svg{max-width:100%;max-height:100%;object-fit:contain}"),this.shadowRoot.appendChild(document.createElement("slot")),h){const A=document.createElement("div");A.classList.add("swiper-lazy-preloader"),A.part.add("preloader"),this.shadowRoot.appendChild(A)}}initialize(){this.render()}connectedCallback(){this.initialize()}}));let wf=(()=>{var y;class h{constructor(){this.authService=(0,C.WQX)(Mn.u),this.signalementsService=(0,C.WQX)(ei.W),this.user=this.authService.userSignal,(0,jt.a)({addOutline:wt.EKF,searchOutline:wt.jBE,playCircle:wt.Jns,radio:wt.Ow_,library:wt.Yvo,search:wt.$P,personOutline:wt.wAZ,listOutline:wt.PFj,idCardOutline:wt.O0q})}ngOnInit(){this.authService.getUserFromLocalStorage()||this.fetchUser()}fetchUser(){var I=this;return(0,Ut.A)(function*(){try{const F=yield I.authService.signInAnonymously();F&&(console.log("je suis la"),I.authService.userSignal.set(F))}catch(F){console.log(F)}})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-root"]],standalone:!0,features:[C.aNF],decls:10,vars:2,consts:[[3,"fullscreen"],["slot","bottom"],["routerLink","/profile","routerLinkActive","active-tab"],["routerLink","/signalements","routerLinkActive","active-tab"],["name","list-outline"],["routerLink","/signaler","routerLinkActive","active-tab"],["name","add-outline"],["routerLink","/auth","routerLinkActive","active-tab"],["name","person-outline"],["name","id-card-outline"]],template:function(I,F){if(1&I&&(C.j41(0,"ion-app")(1,"ion-content",0),C.nrm(2,"ion-router-outlet"),C.j41(3,"ion-tabs")(4,"ion-tab-bar",1),C.DNE(5,Og,6,0)(6,e2,3,0,"ion-tab-button",2),C.j41(7,"ion-tab-button",3),C.nrm(8,"ion-icon",4),C.EFF(9," Signalements "),C.k0s()()()()()),2&I){let X;C.R7$(),C.Y8G("fullscreen",!0),C.R7$(4),C.vxM(null!=(X=F.user())&&X.isAnonymous?5:6)}},dependencies:[l.Jq,l.iq,l.W9,l.p4,l.qW,l.U1,re.Wk,l.Rg,re.wQ,yt.MD],styles:[".active-tab[_ngcontent-%COMP%]{color:green}"]}),h})();var Lp=_e(9030),Jm=_e(8810),hp=_e(8793),F2=_e(1413),xf=_e(5343);const j1=new Yr.c(xf.l);var Bp=_e(6365),l0=_e(8750),Ad=_e(983),If=_e(9326);function Ef(...y){const h=(0,If.lI)(y),A=(0,If.R0)(y,1/0),I=y;return I.length?1===I.length?(0,l0.Tg)(I[0]):(0,Bp.U)(A)((0,Bd.H)(I,h)):Ad.w}var d4=_e(17),U1=_e(8071),V2=_e(9974);const $2={connector:()=>new F2.B};function Lg(y,h=$2){const{connector:A}=h;return(0,V2.N)((I,F)=>{const X=A();(0,l0.Tg)(y(function eg(y){return new Yr.c(h=>y.subscribe(h))}(X))).subscribe(F),F.add(I.subscribe(X))})}var nu=_e(6697),Cf=_e(8141),t2=_e(3236),Np=_e(4360),H1=_e(3703),j2=_e(1397);function Fp(y,h){return h?A=>(0,hp.x)(h.pipe((0,nu.s)(1),function ng(){return(0,V2.N)((y,h)=>{y.subscribe((0,Np._)(h,xf.l))})}()),A.pipe(Fp(y))):(0,j2.Z)((A,I)=>(0,l0.Tg)(y(A,I)).pipe((0,nu.s)(1),(0,H1.u)(A)))}var n2=_e(9470);const xm="Service workers are disabled or not supported by this browser";class r1{constructor(h){if(this.serviceWorker=h,h){const I=(0,En.R)(h,"controllerchange").pipe((0,mc.T)(()=>h.controller)),F=(0,Lp.v)(()=>(0,fc.of)(h.controller)),X=(0,hp.x)(F,I);this.worker=X.pipe((0,ol.p)(ot=>!!ot)),this.registration=this.worker.pipe((0,Zd.n)(()=>h.getRegistration()));const ct=(0,En.R)(h,"message").pipe((0,mc.T)(ot=>ot.data)).pipe((0,ol.p)(ot=>ot&&ot.type)).pipe(function tg(y){return y?h=>Lg(y)(h):h=>function N0(y,h){const A=(0,U1.T)(y)?y:()=>y;return(0,U1.T)(h)?Lg(h,{connector:A}):I=>new d4.G(I,A)}(new F2.B)(h)}());ct.connect(),this.events=ct}else this.worker=this.events=this.registration=function Wc(y){return(0,Lp.v)(()=>(0,Jm.$)(new Error(y)))}(xm)}postMessage(h,A){return this.worker.pipe((0,nu.s)(1),(0,Cf.M)(I=>{I.postMessage({action:h,...A})})).toPromise().then(()=>{})}postMessageWithOperation(h,A,I){const F=this.waitForOperationCompleted(I),X=this.postMessage(h,A);return Promise.all([X,F]).then(([,Me])=>Me)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(h){let A;return A="string"==typeof h?I=>I.type===h:I=>h.includes(I.type),this.events.pipe((0,ol.p)(A))}nextEventOfType(h){return this.eventsOfType(h).pipe((0,nu.s)(1))}waitForOperationCompleted(h){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,ol.p)(A=>A.nonce===h),(0,nu.s)(1),(0,mc.T)(A=>{if(void 0!==A.result)return A.result;throw new Error(A.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Im=(()=>{var y;class h{get isEnabled(){return this.sw.isEnabled}constructor(I){if(this.sw=I,this.pushManager=null,this.subscriptionChanges=new F2.B,!I.isEnabled)return this.messages=j1,this.notificationClicks=j1,void(this.subscription=j1);this.messages=this.sw.eventsOfType("PUSH").pipe((0,mc.T)(X=>X.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,mc.T)(X=>X.data)),this.pushManager=this.sw.registration.pipe((0,mc.T)(X=>X.pushManager));const F=this.pushManager.pipe((0,Zd.n)(X=>X.getSubscription()));this.subscription=Ef(F,this.subscriptionChanges)}requestSubscription(I){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(xm));const F={userVisibleOnly:!0};let X=this.decodeBase64(I.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),Me=new Uint8Array(new ArrayBuffer(X.length));for(let $e=0;$e<X.length;$e++)Me[$e]=X.charCodeAt($e);return F.applicationServerKey=Me,this.pushManager.pipe((0,Zd.n)($e=>$e.subscribe(F)),(0,nu.s)(1)).toPromise().then($e=>(this.subscriptionChanges.next($e),$e))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,nu.s)(1),(0,Zd.n)(F=>{if(null===F)throw new Error("Not subscribed to push notifications.");return F.unsubscribe().then(X=>{if(!X)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(xm))}decodeBase64(I){return atob(I)}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(r1))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})(),i2=(()=>{var y;class h{get isEnabled(){return this.sw.isEnabled}constructor(I){if(this.sw=I,!I.isEnabled)return this.versionUpdates=j1,void(this.unrecoverable=j1);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(xm));const I=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:I},I)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(xm));const I=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:I},I)}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(r1))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();const kf=new C.nKC("");function Sf(y,h,A,I){return()=>{if(!(0,yt.UE)(I)||!("serviceWorker"in navigator)||!1===A.enabled)return;const F=y.get(C.SKi),X=y.get(C.o8S);let Me;if(F.runOutsideAngular(()=>{const $e=navigator.serviceWorker,ze=()=>{var ct;return null===(ct=$e.controller)||void 0===ct?void 0:ct.postMessage({action:"INITIALIZE"})};$e.addEventListener("controllerchange",ze),X.onDestroy(()=>{$e.removeEventListener("controllerchange",ze)})}),"function"==typeof A.registrationStrategy)Me=A.registrationStrategy();else{const[$e,...ze]=(A.registrationStrategy||"registerWhenStable:30000").split(":");switch($e){case"registerImmediately":Me=(0,fc.of)(null);break;case"registerWithDelay":Me=G1(+ze[0]||0);break;case"registerWhenStable":Me=ze[0]?Ef($p(y),G1(+ze[0])):$p(y);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${A.registrationStrategy}`)}}F.runOutsideAngular(()=>Me.pipe((0,nu.s)(1)).subscribe(()=>navigator.serviceWorker.register(h,{scope:A.scope}).catch($e=>console.error("Service worker registration failed with:",$e))))}}function G1(y){return(0,fc.of)(null).pipe(function F0(y,h=t2.E){const A=function U2(y=0,h,A=t2.b){let I=-1;return null!=h&&((0,n2.m)(h)?A=h:I=h),new Yr.c(F=>{let X=function Vp(y){return y instanceof Date&&!isNaN(y)}(y)?+y-A.now():y;X<0&&(X=0);let Me=0;return A.schedule(function(){F.closed||(F.next(Me++),0<=I?this.schedule(void 0,I):F.complete())},X)})}(y,h);return Fp(()=>A)}(y))}function $p(y){return y.get(C.o8S).isStable.pipe((0,ol.p)(A=>A))}function o2(y,h){return new r1((0,yt.UE)(h)&&!1!==y.enabled?navigator.serviceWorker:void 0)}class r2{}var s2=_e(5621),ig=_e(9967);(0,V.B8)(wf,{providers:[{provide:re.b,useClass:ne.jM},(0,l._H)(),(0,re.lh)(h1,(0,re.lG)(),(0,re.Sn)(re.Kp)),(0,qt.MW)(()=>(0,qt.Wp)(Nh_firebaseConfig)),(0,ig.hV)(()=>(0,ig.aU)()),(0,s2._q)(()=>(0,s2.xI)()),function Za(...y){const h=[M,oe,en,{provide:Qh,useExisting:en},{provide:hd,useFactory:()=>{var A;return null!==(A=(0,C.WQX)(ee,{optional:!0}))&&void 0!==A?A:(0,C.WQX)(oe)}},{provide:tt,useValue:vr,multi:!0},{provide:Ve,useValue:!0},{provide:Wn,useClass:Wi}];for(const A of y)h.push(...A.\u0275providers);return(0,C.EmA)(h)}(),function jp(y,h={}){return(0,C.EmA)([Im,i2,{provide:kf,useValue:y},{provide:r2,useValue:h},{provide:r1,useFactory:o2,deps:[r2,C.Agw]},{provide:C.hnV,useFactory:Sf,deps:[C.zZn,kf,r2,C.Agw],multi:!0}])}("ngsw-worker.js",{enabled:!(0,C.naY)(),registrationStrategy:"registerWhenStable:30000"})]}),window,typeof window>"u"?Promise.resolve():(0,We.p)().then(()=>(0,We.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],undefined)),(0,C.SmG)()},5079:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{a:()=>ne});var V,ne=function(yt){Object.keys(yt).forEach(function(fn){l(fn,yt[fn]);var xn=fn.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();fn!==xn&&l(xn,yt[fn])})},l=function(yt,fn){var xn=function(){if(typeof window>"u")return new Map;if(!V){var yt=window;yt.Ionicons=yt.Ionicons||{},V=yt.Ionicons.map=yt.Ionicons.map||new Map}return V}(),rn=xn.get(yt);void 0===rn?xn.set(yt,fn):rn!==fn&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(yt,'". Ensure that multiple icons are not mapped to the same icon name.'))}},1247:function(Yo){Yo.exports=function(){"use strict";var Xn,_e,V;function re(l,We){if(Xn)if(_e){var Y="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Xn+")(sharedChunk); ("+_e+")(sharedChunk); self.onerror = null;",ft={};Xn(ft),V=We(ft),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(V.workerUrl=window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"})))}else _e=We;else Xn=We}return re(0,function(l){var We="3.5.2";let Y;const ft={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Y){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Y=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):t}catch{Y=t}}return Y},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!ft.API_URL)return null;try{const t=new URL(ft.API_URL);return"api.mapbox.cn"===t.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===t.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function qt(t){return ft.API_URL_REGEX.test(t)}function jt(t){return 0===t.indexOf("mapbox:")}function wt(t){return ft.API_CDN_URL_REGEX.test(t)}function C(t){return ft.API_SPRITE_REGEX.test(t)}function At(t){return ft.API_STYLE_REGEX.test(t)&&!C(t)}const Ut={create:"create",load:"load",fullLoad:"fullLoad"},yt={mark(t){performance.mark(t)},measure(t,e,n){performance.measure(t,e,n)}};function fn(t){const e=t.name.split("?")[0];return wt(e)&&e.includes("mapbox-gl.js")?"javascript":wt(e)&&e.includes("mapbox-gl.css")?"css":ft.API_FONTS_REGEX.test(e)?"fontRange":C(e)?"sprite":At(e)?"style":ft.API_TILEJSON_REGEX.test(e)?"tilejson":"other"}function xn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rn={},ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.setMatrixArrayType=function(t){ht.ARRAY_TYPE=Mn=t},ht.toRadian=function(t){return t*xt},ht.equals=function(t,e){return Math.abs(t-e)<=ei*Math.max(1,Math.abs(t),Math.abs(e))},ht.RANDOM=ht.ARRAY_TYPE=ht.EPSILON=void 0;var ei=1e-6;ht.EPSILON=ei;var Mn=typeof Float32Array<"u"?Float32Array:Array;ht.ARRAY_TYPE=Mn;var Zn=Math.random;ht.RANDOM=Zn;var xt=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ot={};function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.create=function(){var t=new Pn.ARRAY_TYPE(4);return Pn.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},Ot.clone=function(t){var e=new Pn.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Ot.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Ot.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ot.fromValues=function(t,e,n,s){var u=new Pn.ARRAY_TYPE(4);return u[0]=t,u[1]=e,u[2]=n,u[3]=s,u},Ot.set=function(t,e,n,s,u){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t},Ot.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},Ot.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n*m-u*s;return g?(t[0]=m*(g=1/g),t[1]=-s*g,t[2]=-u*g,t[3]=n*g,t):null},Ot.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},Ot.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},Ot.multiply=Et,Ot.rotate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=Math.sin(n),T=Math.cos(n);return t[0]=s*T+m*E,t[1]=u*T+g*E,t[2]=s*-E+m*T,t[3]=u*-E+g*T,t},Ot.scale=function(t,e,n){var s=e[1],u=e[2],m=e[3],g=n[0],E=n[1];return t[0]=e[0]*g,t[1]=s*g,t[2]=u*E,t[3]=m*E,t},Ot.fromRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=-n,t[3]=s,t},Ot.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},Ot.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ot.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},Ot.LDU=function(t,e,n,s){return t[2]=s[2]/s[0],n[0]=s[0],n[1]=s[1],n[3]=s[3]-t[2]*n[1],[t,e,n]},Ot.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Ot.subtract=kn,Ot.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},Ot.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=e[0],E=e[1],T=e[2],z=e[3];return Math.abs(n-g)<=Pn.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(s-E)<=Pn.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-T)<=Pn.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(m-z)<=Pn.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))},Ot.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Ot.multiplyScalarAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t},Ot.sub=Ot.mul=void 0;var Pn=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==wn(t)&&"function"!=typeof t)return{default:t};var n=Ii(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function Ii(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(Ii=function(s){return s?n:e})(t)}function Et(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=n[0],T=n[1],z=n[2],$=n[3];return t[0]=s*E+m*T,t[1]=u*E+g*T,t[2]=s*z+m*$,t[3]=u*z+g*$,t}function kn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Ot.mul=Et,Ot.sub=kn;var Te={};function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Te,"__esModule",{value:!0}),Te.create=function(){var t=new Qt.ARRAY_TYPE(6);return Qt.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},Te.clone=function(t){var e=new Qt.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},Te.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},Te.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},Te.fromValues=function(t,e,n,s,u,m){var g=new Qt.ARRAY_TYPE(6);return g[0]=t,g[1]=e,g[2]=n,g[3]=s,g[4]=u,g[5]=m,g},Te.set=function(t,e,n,s,u,m,g){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t[4]=m,t[5]=g,t},Te.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=n*m-s*u;return T?(t[0]=m*(T=1/T),t[1]=-s*T,t[2]=-u*T,t[3]=n*T,t[4]=(u*E-m*g)*T,t[5]=(s*g-n*E)*T,t):null},Te.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},Te.multiply=oo,Te.rotate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=Math.sin(n),$=Math.cos(n);return t[0]=s*$+m*z,t[1]=u*$+g*z,t[2]=s*-z+m*$,t[3]=u*-z+g*$,t[4]=E,t[5]=T,t},Te.scale=function(t,e,n){var s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=n[0],z=n[1];return t[0]=e[0]*T,t[1]=s*T,t[2]=u*z,t[3]=m*z,t[4]=g,t[5]=E,t},Te.translate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=n[0],$=n[1];return t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=s*z+m*$+E,t[5]=u*z+g*$+T,t},Te.fromRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=-n,t[3]=s,t[4]=0,t[5]=0,t},Te.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},Te.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},Te.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Te.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},Te.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},Te.subtract=Vn,Te.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},Te.multiplyScalarAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t[4]=e[4]+n[4]*s,t[5]=e[5]+n[5]*s,t},Te.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},Te.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=t[4],E=t[5],T=e[0],z=e[1],$=e[2],W=e[3],Q=e[4],le=e[5];return Math.abs(n-T)<=Qt.EPSILON*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(s-z)<=Qt.EPSILON*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(u-$)<=Qt.EPSILON*Math.max(1,Math.abs(u),Math.abs($))&&Math.abs(m-W)<=Qt.EPSILON*Math.max(1,Math.abs(m),Math.abs(W))&&Math.abs(g-Q)<=Qt.EPSILON*Math.max(1,Math.abs(g),Math.abs(Q))&&Math.abs(E-le)<=Qt.EPSILON*Math.max(1,Math.abs(E),Math.abs(le))},Te.sub=Te.mul=void 0;var Qt=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==on(t)&&"function"!=typeof t)return{default:t};var n=En(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function En(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(En=function(s){return s?n:e})(t)}function oo(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=n[0],$=n[1],W=n[2],Q=n[3],le=n[4],de=n[5];return t[0]=s*z+m*$,t[1]=u*z+g*$,t[2]=s*W+m*Q,t[3]=u*W+g*Q,t[4]=s*le+m*de+E,t[5]=u*le+g*de+T,t}function Vn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Te.mul=oo,Te.sub=Vn;var Ke={};function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.create=function(){var t=new Ge.ARRAY_TYPE(9);return Ge.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ke.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},Ke.clone=function(t){var e=new Ge.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},Ke.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},Ke.fromValues=function(t,e,n,s,u,m,g,E,T){var z=new Ge.ARRAY_TYPE(9);return z[0]=t,z[1]=e,z[2]=n,z[3]=s,z[4]=u,z[5]=m,z[6]=g,z[7]=E,z[8]=T,z},Ke.set=function(t,e,n,s,u,m,g,E,T,z){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t[4]=m,t[5]=g,t[6]=E,t[7]=T,t[8]=z,t},Ke.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ke.transpose=function(t,e){if(t===e){var n=e[1],s=e[2],u=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=s,t[7]=u}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},Ke.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8],W=$*g-E*z,Q=-$*m+E*T,le=z*m-g*T,de=n*W+s*Q+u*le;return de?(t[0]=W*(de=1/de),t[1]=(-$*s+u*z)*de,t[2]=(E*s-u*g)*de,t[3]=Q*de,t[4]=($*n-u*T)*de,t[5]=(-E*n+u*m)*de,t[6]=le*de,t[7]=(-z*n+s*T)*de,t[8]=(g*n-s*m)*de,t):null},Ke.adjoint=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8];return t[0]=g*$-E*z,t[1]=u*z-s*$,t[2]=s*E-u*g,t[3]=E*T-m*$,t[4]=n*$-u*T,t[5]=u*m-n*E,t[6]=m*z-g*T,t[7]=s*T-n*z,t[8]=n*g-s*m,t},Ke.determinant=function(t){var e=t[3],n=t[4],s=t[5],u=t[6],m=t[7],g=t[8];return t[0]*(g*n-s*m)+t[1]*(-g*e+s*u)+t[2]*(m*e-n*u)},Ke.multiply=zt,Ke.translate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Q=n[0],le=n[1];return t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=E,t[5]=T,t[6]=Q*s+le*g+z,t[7]=Q*u+le*E+$,t[8]=Q*m+le*T+W,t},Ke.rotate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Q=Math.sin(n),le=Math.cos(n);return t[0]=le*s+Q*g,t[1]=le*u+Q*E,t[2]=le*m+Q*T,t[3]=le*g-Q*s,t[4]=le*E-Q*u,t[5]=le*T-Q*m,t[6]=z,t[7]=$,t[8]=W,t},Ke.scale=function(t,e,n){var s=n[0],u=n[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=u*e[3],t[4]=u*e[4],t[5]=u*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},Ke.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},Ke.fromRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=0,t[3]=-n,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ke.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ke.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},Ke.fromQuat=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n+n,E=s+s,T=u+u,z=n*g,$=s*g,W=s*E,Q=u*g,le=u*E,de=u*T,be=m*g,xe=m*E,je=m*T;return t[0]=1-W-de,t[3]=$-je,t[6]=Q+xe,t[1]=$+je,t[4]=1-z-de,t[7]=le-be,t[2]=Q-xe,t[5]=le+be,t[8]=1-z-W,t},Ke.normalFromMat4=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8],W=e[9],Q=e[10],le=e[11],de=e[12],be=e[13],xe=e[14],je=e[15],gt=n*E-s*g,_t=n*T-u*g,bt=n*z-m*g,nn=s*T-u*E,Yt=s*z-m*E,Sn=u*z-m*T,Rn=$*be-W*de,ai=$*xe-Q*de,Di=$*je-le*de,wi=W*xe-Q*be,Zi=W*je-le*be,Mo=Q*je-le*xe,Gi=gt*Mo-_t*Zi+bt*wi+nn*Di-Yt*ai+Sn*Rn;return Gi?(t[0]=(E*Mo-T*Zi+z*wi)*(Gi=1/Gi),t[1]=(T*Di-g*Mo-z*ai)*Gi,t[2]=(g*Zi-E*Di+z*Rn)*Gi,t[3]=(u*Zi-s*Mo-m*wi)*Gi,t[4]=(n*Mo-u*Di+m*ai)*Gi,t[5]=(s*Di-n*Zi-m*Rn)*Gi,t[6]=(be*Sn-xe*Yt+je*nn)*Gi,t[7]=(xe*bt-de*Sn-je*_t)*Gi,t[8]=(de*Yt-be*bt+je*gt)*Gi,t):null},Ke.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ke.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Ke.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Ke.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},Ke.subtract=qn,Ke.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},Ke.multiplyScalarAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t[4]=e[4]+n[4]*s,t[5]=e[5]+n[5]*s,t[6]=e[6]+n[6]*s,t[7]=e[7]+n[7]*s,t[8]=e[8]+n[8]*s,t},Ke.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},Ke.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=t[4],E=t[5],T=t[6],z=t[7],$=t[8],W=e[0],Q=e[1],le=e[2],de=e[3],be=e[4],xe=e[5],je=e[6],gt=e[7],_t=e[8];return Math.abs(n-W)<=Ge.EPSILON*Math.max(1,Math.abs(n),Math.abs(W))&&Math.abs(s-Q)<=Ge.EPSILON*Math.max(1,Math.abs(s),Math.abs(Q))&&Math.abs(u-le)<=Ge.EPSILON*Math.max(1,Math.abs(u),Math.abs(le))&&Math.abs(m-de)<=Ge.EPSILON*Math.max(1,Math.abs(m),Math.abs(de))&&Math.abs(g-be)<=Ge.EPSILON*Math.max(1,Math.abs(g),Math.abs(be))&&Math.abs(E-xe)<=Ge.EPSILON*Math.max(1,Math.abs(E),Math.abs(xe))&&Math.abs(T-je)<=Ge.EPSILON*Math.max(1,Math.abs(T),Math.abs(je))&&Math.abs(z-gt)<=Ge.EPSILON*Math.max(1,Math.abs(z),Math.abs(gt))&&Math.abs($-_t)<=Ge.EPSILON*Math.max(1,Math.abs($),Math.abs(_t))},Ke.sub=Ke.mul=void 0;var Ge=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Ae(t)&&"function"!=typeof t)return{default:t};var n=et(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function et(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(et=function(s){return s?n:e})(t)}function zt(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Q=n[0],le=n[1],de=n[2],be=n[3],xe=n[4],je=n[5],gt=n[6],_t=n[7],bt=n[8];return t[0]=Q*s+le*g+de*z,t[1]=Q*u+le*E+de*$,t[2]=Q*m+le*T+de*W,t[3]=be*s+xe*g+je*z,t[4]=be*u+xe*E+je*$,t[5]=be*m+xe*T+je*W,t[6]=gt*s+_t*g+bt*z,t[7]=gt*u+_t*E+bt*$,t[8]=gt*m+_t*T+bt*W,t}function qn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Ke.mul=zt,Ke.sub=qn;var un={};function go(t){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(un,"__esModule",{value:!0}),un.create=function(){var t=new Qi.ARRAY_TYPE(16);return Qi.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},un.clone=function(t){var e=new Qi.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},un.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},un.fromValues=function(t,e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be){var xe=new Qi.ARRAY_TYPE(16);return xe[0]=t,xe[1]=e,xe[2]=n,xe[3]=s,xe[4]=u,xe[5]=m,xe[6]=g,xe[7]=E,xe[8]=T,xe[9]=z,xe[10]=$,xe[11]=W,xe[12]=Q,xe[13]=le,xe[14]=de,xe[15]=be,xe},un.set=function(t,e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t[4]=m,t[5]=g,t[6]=E,t[7]=T,t[8]=z,t[9]=$,t[10]=W,t[11]=Q,t[12]=le,t[13]=de,t[14]=be,t[15]=xe,t},un.identity=Go,un.transpose=function(t,e){if(t===e){var n=e[1],s=e[2],u=e[3],m=e[6],g=e[7],E=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=m,t[11]=e[14],t[12]=u,t[13]=g,t[14]=E}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},un.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8],W=e[9],Q=e[10],le=e[11],de=e[12],be=e[13],xe=e[14],je=e[15],gt=n*E-s*g,_t=n*T-u*g,bt=n*z-m*g,nn=s*T-u*E,Yt=s*z-m*E,Sn=u*z-m*T,Rn=$*be-W*de,ai=$*xe-Q*de,Di=$*je-le*de,wi=W*xe-Q*be,Zi=W*je-le*be,Mo=Q*je-le*xe,Gi=gt*Mo-_t*Zi+bt*wi+nn*Di-Yt*ai+Sn*Rn;return Gi?(t[0]=(E*Mo-T*Zi+z*wi)*(Gi=1/Gi),t[1]=(u*Zi-s*Mo-m*wi)*Gi,t[2]=(be*Sn-xe*Yt+je*nn)*Gi,t[3]=(Q*Yt-W*Sn-le*nn)*Gi,t[4]=(T*Di-g*Mo-z*ai)*Gi,t[5]=(n*Mo-u*Di+m*ai)*Gi,t[6]=(xe*bt-de*Sn-je*_t)*Gi,t[7]=($*Sn-Q*bt+le*_t)*Gi,t[8]=(g*Zi-E*Di+z*Rn)*Gi,t[9]=(s*Di-n*Zi-m*Rn)*Gi,t[10]=(de*Yt-be*bt+je*gt)*Gi,t[11]=(W*bt-$*Yt-le*gt)*Gi,t[12]=(E*ai-g*wi-T*Rn)*Gi,t[13]=(n*wi-s*ai+u*Rn)*Gi,t[14]=(be*_t-de*nn-xe*gt)*Gi,t[15]=($*nn-W*_t+Q*gt)*Gi,t):null},un.adjoint=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8],W=e[9],Q=e[10],le=e[11],de=e[12],be=e[13],xe=e[14],je=e[15];return t[0]=E*(Q*je-le*xe)-W*(T*je-z*xe)+be*(T*le-z*Q),t[1]=-(s*(Q*je-le*xe)-W*(u*je-m*xe)+be*(u*le-m*Q)),t[2]=s*(T*je-z*xe)-E*(u*je-m*xe)+be*(u*z-m*T),t[3]=-(s*(T*le-z*Q)-E*(u*le-m*Q)+W*(u*z-m*T)),t[4]=-(g*(Q*je-le*xe)-$*(T*je-z*xe)+de*(T*le-z*Q)),t[5]=n*(Q*je-le*xe)-$*(u*je-m*xe)+de*(u*le-m*Q),t[6]=-(n*(T*je-z*xe)-g*(u*je-m*xe)+de*(u*z-m*T)),t[7]=n*(T*le-z*Q)-g*(u*le-m*Q)+$*(u*z-m*T),t[8]=g*(W*je-le*be)-$*(E*je-z*be)+de*(E*le-z*W),t[9]=-(n*(W*je-le*be)-$*(s*je-m*be)+de*(s*le-m*W)),t[10]=n*(E*je-z*be)-g*(s*je-m*be)+de*(s*z-m*E),t[11]=-(n*(E*le-z*W)-g*(s*le-m*W)+$*(s*z-m*E)),t[12]=-(g*(W*xe-Q*be)-$*(E*xe-T*be)+de*(E*Q-T*W)),t[13]=n*(W*xe-Q*be)-$*(s*xe-u*be)+de*(s*Q-u*W),t[14]=-(n*(E*xe-T*be)-g*(s*xe-u*be)+de*(s*T-u*E)),t[15]=n*(E*Q-T*W)-g*(s*Q-u*W)+$*(s*T-u*E),t},un.determinant=function(t){var e=t[0],n=t[1],s=t[2],u=t[3],m=t[4],g=t[5],E=t[6],T=t[7],z=t[8],$=t[9],W=t[10],Q=t[11],le=t[12],de=t[13],be=t[14],xe=t[15];return(e*g-n*m)*(W*xe-Q*be)-(e*E-s*m)*($*xe-Q*de)+(e*T-u*m)*($*be-W*de)+(n*E-s*g)*(z*xe-Q*le)-(n*T-u*g)*(z*be-W*le)+(s*T-u*E)*(z*de-$*le)},un.multiply=Dr,un.translate=function(t,e,n){var s,u,m,g,E,T,z,$,W,Q,le,de,be=n[0],xe=n[1],je=n[2];return e===t?(t[12]=e[0]*be+e[4]*xe+e[8]*je+e[12],t[13]=e[1]*be+e[5]*xe+e[9]*je+e[13],t[14]=e[2]*be+e[6]*xe+e[10]*je+e[14],t[15]=e[3]*be+e[7]*xe+e[11]*je+e[15]):(u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Q=e[9],le=e[10],de=e[11],t[0]=s=e[0],t[1]=u,t[2]=m,t[3]=g,t[4]=E,t[5]=T,t[6]=z,t[7]=$,t[8]=W,t[9]=Q,t[10]=le,t[11]=de,t[12]=s*be+E*xe+W*je+e[12],t[13]=u*be+T*xe+Q*je+e[13],t[14]=m*be+z*xe+le*je+e[14],t[15]=g*be+$*xe+de*je+e[15]),t},un.scale=function(t,e,n){var s=n[0],u=n[1],m=n[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*u,t[5]=e[5]*u,t[6]=e[6]*u,t[7]=e[7]*u,t[8]=e[8]*m,t[9]=e[9]*m,t[10]=e[10]*m,t[11]=e[11]*m,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},un.rotate=function(t,e,n,s){var u,m,g,E,T,z,$,W,Q,le,de,be,xe,je,gt,_t,bt,nn,Yt,Sn,Rn,ai,Di,wi,Zi=s[0],Mo=s[1],Gi=s[2],yo=Math.hypot(Zi,Mo,Gi);return yo<Qi.EPSILON?null:(Zi*=yo=1/yo,Mo*=yo,Gi*=yo,u=Math.sin(n),m=Math.cos(n),T=e[1],z=e[2],$=e[3],Q=e[5],le=e[6],de=e[7],xe=e[9],je=e[10],gt=e[11],_t=Zi*Zi*(g=1-m)+m,Yt=Zi*Mo*g-Gi*u,Sn=Mo*Mo*g+m,Rn=Gi*Mo*g+Zi*u,ai=Zi*Gi*g+Mo*u,Di=Mo*Gi*g-Zi*u,wi=Gi*Gi*g+m,t[0]=(E=e[0])*_t+(W=e[4])*(bt=Mo*Zi*g+Gi*u)+(be=e[8])*(nn=Gi*Zi*g-Mo*u),t[1]=T*_t+Q*bt+xe*nn,t[2]=z*_t+le*bt+je*nn,t[3]=$*_t+de*bt+gt*nn,t[4]=E*Yt+W*Sn+be*Rn,t[5]=T*Yt+Q*Sn+xe*Rn,t[6]=z*Yt+le*Sn+je*Rn,t[7]=$*Yt+de*Sn+gt*Rn,t[8]=E*ai+W*Di+be*wi,t[9]=T*ai+Q*Di+xe*wi,t[10]=z*ai+le*Di+je*wi,t[11]=$*ai+de*Di+gt*wi,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},un.rotateX=function(t,e,n){var s=Math.sin(n),u=Math.cos(n),m=e[4],g=e[5],E=e[6],T=e[7],z=e[8],$=e[9],W=e[10],Q=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=m*u+z*s,t[5]=g*u+$*s,t[6]=E*u+W*s,t[7]=T*u+Q*s,t[8]=z*u-m*s,t[9]=$*u-g*s,t[10]=W*u-E*s,t[11]=Q*u-T*s,t},un.rotateY=function(t,e,n){var s=Math.sin(n),u=Math.cos(n),m=e[0],g=e[1],E=e[2],T=e[3],z=e[8],$=e[9],W=e[10],Q=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=m*u-z*s,t[1]=g*u-$*s,t[2]=E*u-W*s,t[3]=T*u-Q*s,t[8]=m*s+z*u,t[9]=g*s+$*u,t[10]=E*s+W*u,t[11]=T*s+Q*u,t},un.rotateZ=function(t,e,n){var s=Math.sin(n),u=Math.cos(n),m=e[0],g=e[1],E=e[2],T=e[3],z=e[4],$=e[5],W=e[6],Q=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=m*u+z*s,t[1]=g*u+$*s,t[2]=E*u+W*s,t[3]=T*u+Q*s,t[4]=z*u-m*s,t[5]=$*u-g*s,t[6]=W*u-E*s,t[7]=Q*u-T*s,t},un.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},un.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},un.fromRotation=function(t,e,n){var s,u,m,g=n[0],E=n[1],T=n[2],z=Math.hypot(g,E,T);return z<Qi.EPSILON?null:(g*=z=1/z,E*=z,T*=z,s=Math.sin(e),u=Math.cos(e),t[0]=g*g*(m=1-u)+u,t[1]=E*g*m+T*s,t[2]=T*g*m-E*s,t[3]=0,t[4]=g*E*m-T*s,t[5]=E*E*m+u,t[6]=T*E*m+g*s,t[7]=0,t[8]=g*T*m+E*s,t[9]=E*T*m-g*s,t[10]=T*T*m+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},un.fromXRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},un.fromYRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},un.fromZRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},un.fromRotationTranslation=cr,un.fromQuat2=function(t,e){var n=new Qi.ARRAY_TYPE(3),s=-e[0],u=-e[1],m=-e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=s*s+u*u+m*m+g*g;return W>0?(n[0]=2*(E*g+$*s+T*m-z*u)/W,n[1]=2*(T*g+$*u+z*s-E*m)/W,n[2]=2*(z*g+$*m+E*u-T*s)/W):(n[0]=2*(E*g+$*s+T*m-z*u),n[1]=2*(T*g+$*u+z*s-E*m),n[2]=2*(z*g+$*m+E*u-T*s)),cr(t,e,n),t},un.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},un.getScaling=Ei,un.getRotation=function(t,e){var n=new Qi.ARRAY_TYPE(3);Ei(n,e);var s=1/n[0],u=1/n[1],m=1/n[2],g=e[0]*s,E=e[1]*u,T=e[2]*m,z=e[4]*s,$=e[5]*u,W=e[6]*m,Q=e[8]*s,le=e[9]*u,de=e[10]*m,be=g+$+de,xe=0;return be>0?(xe=2*Math.sqrt(be+1),t[3]=.25*xe,t[0]=(W-le)/xe,t[1]=(Q-T)/xe,t[2]=(E-z)/xe):g>$&&g>de?(xe=2*Math.sqrt(1+g-$-de),t[3]=(W-le)/xe,t[0]=.25*xe,t[1]=(E+z)/xe,t[2]=(Q+T)/xe):$>de?(xe=2*Math.sqrt(1+$-g-de),t[3]=(Q-T)/xe,t[0]=(E+z)/xe,t[1]=.25*xe,t[2]=(W+le)/xe):(xe=2*Math.sqrt(1+de-g-$),t[3]=(E-z)/xe,t[0]=(Q+T)/xe,t[1]=(W+le)/xe,t[2]=.25*xe),t},un.fromRotationTranslationScale=function(t,e,n,s){var u=e[0],m=e[1],g=e[2],E=e[3],T=u+u,z=m+m,$=g+g,W=u*T,Q=u*z,le=u*$,de=m*z,be=m*$,xe=g*$,je=E*T,gt=E*z,_t=E*$,bt=s[0],nn=s[1],Yt=s[2];return t[0]=(1-(de+xe))*bt,t[1]=(Q+_t)*bt,t[2]=(le-gt)*bt,t[3]=0,t[4]=(Q-_t)*nn,t[5]=(1-(W+xe))*nn,t[6]=(be+je)*nn,t[7]=0,t[8]=(le+gt)*Yt,t[9]=(be-je)*Yt,t[10]=(1-(W+de))*Yt,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},un.fromRotationTranslationScaleOrigin=function(t,e,n,s,u){var m=e[0],g=e[1],E=e[2],T=e[3],z=m+m,$=g+g,W=E+E,Q=m*z,le=m*$,de=m*W,be=g*$,xe=g*W,je=E*W,gt=T*z,_t=T*$,bt=T*W,nn=s[0],Yt=s[1],Sn=s[2],Rn=u[0],ai=u[1],Di=u[2],wi=(1-(be+je))*nn,Zi=(le+bt)*nn,Mo=(de-_t)*nn,Gi=(le-bt)*Yt,yo=(1-(Q+je))*Yt,Ri=(xe+gt)*Yt,vo=(de+_t)*Sn,Oo=(xe-gt)*Sn,Co=(1-(Q+be))*Sn;return t[0]=wi,t[1]=Zi,t[2]=Mo,t[3]=0,t[4]=Gi,t[5]=yo,t[6]=Ri,t[7]=0,t[8]=vo,t[9]=Oo,t[10]=Co,t[11]=0,t[12]=n[0]+Rn-(wi*Rn+Gi*ai+vo*Di),t[13]=n[1]+ai-(Zi*Rn+yo*ai+Oo*Di),t[14]=n[2]+Di-(Mo*Rn+Ri*ai+Co*Di),t[15]=1,t},un.fromQuat=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n+n,E=s+s,T=u+u,z=n*g,$=s*g,W=s*E,Q=u*g,le=u*E,de=u*T,be=m*g,xe=m*E,je=m*T;return t[0]=1-W-de,t[1]=$+je,t[2]=Q-xe,t[3]=0,t[4]=$-je,t[5]=1-z-de,t[6]=le+be,t[7]=0,t[8]=Q+xe,t[9]=le-be,t[10]=1-z-W,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},un.frustum=function(t,e,n,s,u,m,g){var E=1/(n-e),T=1/(u-s),z=1/(m-g);return t[0]=2*m*E,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*m*T,t[6]=0,t[7]=0,t[8]=(n+e)*E,t[9]=(u+s)*T,t[10]=(g+m)*z,t[11]=-1,t[12]=0,t[13]=0,t[14]=g*m*2*z,t[15]=0,t},un.perspectiveNO=ko,un.perspectiveZO=function(t,e,n,s,u){var m,g=1/Math.tan(e/2);return t[0]=g/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=u&&u!==1/0?(t[10]=u*(m=1/(s-u)),t[14]=u*s*m):(t[10]=-1,t[14]=-s),t},un.perspectiveFromFieldOfView=function(t,e,n,s){var u=Math.tan(e.upDegrees*Math.PI/180),m=Math.tan(e.downDegrees*Math.PI/180),g=Math.tan(e.leftDegrees*Math.PI/180),E=Math.tan(e.rightDegrees*Math.PI/180),T=2/(g+E),z=2/(u+m);return t[0]=T,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=z,t[6]=0,t[7]=0,t[8]=-(g-E)*T*.5,t[9]=(u-m)*z*.5,t[10]=s/(n-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*n/(n-s),t[15]=0,t},un.orthoNO=Er,un.orthoZO=function(t,e,n,s,u,m,g){var E=1/(e-n),T=1/(s-u),z=1/(m-g);return t[0]=-2*E,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*T,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=z,t[11]=0,t[12]=(e+n)*E,t[13]=(u+s)*T,t[14]=m*z,t[15]=1,t},un.lookAt=function(t,e,n,s){var u,m,g,E,T,z,$,W,Q,le,de=e[0],be=e[1],xe=e[2],je=s[0],gt=s[1],_t=s[2],bt=n[0],nn=n[1],Yt=n[2];return Math.abs(de-bt)<Qi.EPSILON&&Math.abs(be-nn)<Qi.EPSILON&&Math.abs(xe-Yt)<Qi.EPSILON?Go(t):($=de-bt,W=be-nn,Q=xe-Yt,u=gt*(Q*=le=1/Math.hypot($,W,Q))-_t*(W*=le),m=_t*($*=le)-je*Q,g=je*W-gt*$,(le=Math.hypot(u,m,g))?(u*=le=1/le,m*=le,g*=le):(u=0,m=0,g=0),E=W*g-Q*m,T=Q*u-$*g,z=$*m-W*u,(le=Math.hypot(E,T,z))?(E*=le=1/le,T*=le,z*=le):(E=0,T=0,z=0),t[0]=u,t[1]=E,t[2]=$,t[3]=0,t[4]=m,t[5]=T,t[6]=W,t[7]=0,t[8]=g,t[9]=z,t[10]=Q,t[11]=0,t[12]=-(u*de+m*be+g*xe),t[13]=-(E*de+T*be+z*xe),t[14]=-($*de+W*be+Q*xe),t[15]=1,t)},un.targetTo=function(t,e,n,s){var u=e[0],m=e[1],g=e[2],E=s[0],T=s[1],z=s[2],$=u-n[0],W=m-n[1],Q=g-n[2],le=$*$+W*W+Q*Q;le>0&&($*=le=1/Math.sqrt(le),W*=le,Q*=le);var de=T*Q-z*W,be=z*$-E*Q,xe=E*W-T*$;return(le=de*de+be*be+xe*xe)>0&&(de*=le=1/Math.sqrt(le),be*=le,xe*=le),t[0]=de,t[1]=be,t[2]=xe,t[3]=0,t[4]=W*xe-Q*be,t[5]=Q*de-$*xe,t[6]=$*be-W*de,t[7]=0,t[8]=$,t[9]=W,t[10]=Q,t[11]=0,t[12]=u,t[13]=m,t[14]=g,t[15]=1,t},un.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},un.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},un.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},un.subtract=Wr,un.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},un.multiplyScalarAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t[4]=e[4]+n[4]*s,t[5]=e[5]+n[5]*s,t[6]=e[6]+n[6]*s,t[7]=e[7]+n[7]*s,t[8]=e[8]+n[8]*s,t[9]=e[9]+n[9]*s,t[10]=e[10]+n[10]*s,t[11]=e[11]+n[11]*s,t[12]=e[12]+n[12]*s,t[13]=e[13]+n[13]*s,t[14]=e[14]+n[14]*s,t[15]=e[15]+n[15]*s,t},un.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},un.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=t[4],E=t[5],T=t[6],z=t[7],$=t[8],W=t[9],Q=t[10],le=t[11],de=t[12],be=t[13],xe=t[14],je=t[15],gt=e[0],_t=e[1],bt=e[2],nn=e[3],Yt=e[4],Sn=e[5],Rn=e[6],ai=e[7],Di=e[8],wi=e[9],Zi=e[10],Mo=e[11],Gi=e[12],yo=e[13],Ri=e[14],vo=e[15];return Math.abs(n-gt)<=Qi.EPSILON*Math.max(1,Math.abs(n),Math.abs(gt))&&Math.abs(s-_t)<=Qi.EPSILON*Math.max(1,Math.abs(s),Math.abs(_t))&&Math.abs(u-bt)<=Qi.EPSILON*Math.max(1,Math.abs(u),Math.abs(bt))&&Math.abs(m-nn)<=Qi.EPSILON*Math.max(1,Math.abs(m),Math.abs(nn))&&Math.abs(g-Yt)<=Qi.EPSILON*Math.max(1,Math.abs(g),Math.abs(Yt))&&Math.abs(E-Sn)<=Qi.EPSILON*Math.max(1,Math.abs(E),Math.abs(Sn))&&Math.abs(T-Rn)<=Qi.EPSILON*Math.max(1,Math.abs(T),Math.abs(Rn))&&Math.abs(z-ai)<=Qi.EPSILON*Math.max(1,Math.abs(z),Math.abs(ai))&&Math.abs($-Di)<=Qi.EPSILON*Math.max(1,Math.abs($),Math.abs(Di))&&Math.abs(W-wi)<=Qi.EPSILON*Math.max(1,Math.abs(W),Math.abs(wi))&&Math.abs(Q-Zi)<=Qi.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Zi))&&Math.abs(le-Mo)<=Qi.EPSILON*Math.max(1,Math.abs(le),Math.abs(Mo))&&Math.abs(de-Gi)<=Qi.EPSILON*Math.max(1,Math.abs(de),Math.abs(Gi))&&Math.abs(be-yo)<=Qi.EPSILON*Math.max(1,Math.abs(be),Math.abs(yo))&&Math.abs(xe-Ri)<=Qi.EPSILON*Math.max(1,Math.abs(xe),Math.abs(Ri))&&Math.abs(je-vo)<=Qi.EPSILON*Math.max(1,Math.abs(je),Math.abs(vo))},un.sub=un.mul=un.ortho=un.perspective=void 0;var Qi=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==go(t)&&"function"!=typeof t)return{default:t};var n=dr(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function dr(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(dr=function(s){return s?n:e})(t)}function Go(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Dr(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Q=e[9],le=e[10],de=e[11],be=e[12],xe=e[13],je=e[14],gt=e[15],_t=n[0],bt=n[1],nn=n[2],Yt=n[3];return t[0]=_t*s+bt*E+nn*W+Yt*be,t[1]=_t*u+bt*T+nn*Q+Yt*xe,t[2]=_t*m+bt*z+nn*le+Yt*je,t[3]=_t*g+bt*$+nn*de+Yt*gt,t[4]=(_t=n[4])*s+(bt=n[5])*E+(nn=n[6])*W+(Yt=n[7])*be,t[5]=_t*u+bt*T+nn*Q+Yt*xe,t[6]=_t*m+bt*z+nn*le+Yt*je,t[7]=_t*g+bt*$+nn*de+Yt*gt,t[8]=(_t=n[8])*s+(bt=n[9])*E+(nn=n[10])*W+(Yt=n[11])*be,t[9]=_t*u+bt*T+nn*Q+Yt*xe,t[10]=_t*m+bt*z+nn*le+Yt*je,t[11]=_t*g+bt*$+nn*de+Yt*gt,t[12]=(_t=n[12])*s+(bt=n[13])*E+(nn=n[14])*W+(Yt=n[15])*be,t[13]=_t*u+bt*T+nn*Q+Yt*xe,t[14]=_t*m+bt*z+nn*le+Yt*je,t[15]=_t*g+bt*$+nn*de+Yt*gt,t}function cr(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=s+s,T=u+u,z=m+m,$=s*E,W=s*T,Q=s*z,le=u*T,de=u*z,be=m*z,xe=g*E,je=g*T,gt=g*z;return t[0]=1-(le+be),t[1]=W+gt,t[2]=Q-je,t[3]=0,t[4]=W-gt,t[5]=1-($+be),t[6]=de+xe,t[7]=0,t[8]=Q+je,t[9]=de-xe,t[10]=1-($+le),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ei(t,e){var n=e[4],s=e[5],u=e[6],m=e[8],g=e[9],E=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(n,s,u),t[2]=Math.hypot(m,g,E),t}function ko(t,e,n,s,u){var m,g=1/Math.tan(e/2);return t[0]=g/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=u&&u!==1/0?(t[10]=(u+s)*(m=1/(s-u)),t[14]=2*u*s*m):(t[10]=-1,t[14]=-2*s),t}function Er(t,e,n,s,u,m,g){var E=1/(e-n),T=1/(s-u),z=1/(m-g);return t[0]=-2*E,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*T,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*z,t[11]=0,t[12]=(e+n)*E,t[13]=(u+s)*T,t[14]=(g+m)*z,t[15]=1,t}function Wr(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}un.perspective=ko,un.ortho=Er,un.mul=Dr,un.sub=Wr;var ji={},vi={};function Yi(t){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(vi,"__esModule",{value:!0}),vi.create=po,vi.clone=function(t){var e=new ui.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},vi.length=Xi,vi.fromValues=function(t,e,n){var s=new ui.ARRAY_TYPE(3);return s[0]=t,s[1]=e,s[2]=n,s},vi.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},vi.set=function(t,e,n,s){return t[0]=e,t[1]=n,t[2]=s,t},vi.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},vi.subtract=bs,vi.multiply=Br,vi.divide=So,vi.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},vi.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},vi.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},vi.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},vi.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},vi.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},vi.scaleAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t},vi.distance=ro,vi.squaredDistance=fo,vi.squaredLength=Ts,vi.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},vi.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},vi.normalize=function(t,e){var n=e[0],s=e[1],u=e[2],m=n*n+s*s+u*u;return m>0&&(m=1/Math.sqrt(m)),t[0]=e[0]*m,t[1]=e[1]*m,t[2]=e[2]*m,t},vi.dot=zr,vi.cross=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=n[0],E=n[1],T=n[2];return t[0]=u*T-m*E,t[1]=m*g-s*T,t[2]=s*E-u*g,t},vi.lerp=function(t,e,n,s){var u=e[0],m=e[1],g=e[2];return t[0]=u+s*(n[0]-u),t[1]=m+s*(n[1]-m),t[2]=g+s*(n[2]-g),t},vi.hermite=function(t,e,n,s,u,m){var g=m*m,E=g*(2*m-3)+1,T=g*(m-2)+m,z=g*(m-1),$=g*(3-2*m);return t[0]=e[0]*E+n[0]*T+s[0]*z+u[0]*$,t[1]=e[1]*E+n[1]*T+s[1]*z+u[1]*$,t[2]=e[2]*E+n[2]*T+s[2]*z+u[2]*$,t},vi.bezier=function(t,e,n,s,u,m){var g=1-m,E=g*g,T=m*m,z=E*g,$=3*m*E,W=3*T*g,Q=T*m;return t[0]=e[0]*z+n[0]*$+s[0]*W+u[0]*Q,t[1]=e[1]*z+n[1]*$+s[1]*W+u[1]*Q,t[2]=e[2]*z+n[2]*$+s[2]*W+u[2]*Q,t},vi.random=function(t,e){e=e||1;var n=2*ui.RANDOM()*Math.PI,s=2*ui.RANDOM()-1,u=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(n)*u,t[1]=Math.sin(n)*u,t[2]=s*e,t},vi.transformMat4=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=n[3]*s+n[7]*u+n[11]*m+n[15];return t[0]=(n[0]*s+n[4]*u+n[8]*m+n[12])/(g=g||1),t[1]=(n[1]*s+n[5]*u+n[9]*m+n[13])/g,t[2]=(n[2]*s+n[6]*u+n[10]*m+n[14])/g,t},vi.transformMat3=function(t,e,n){var s=e[0],u=e[1],m=e[2];return t[0]=s*n[0]+u*n[3]+m*n[6],t[1]=s*n[1]+u*n[4]+m*n[7],t[2]=s*n[2]+u*n[5]+m*n[8],t},vi.transformQuat=function(t,e,n){var s=n[0],u=n[1],m=n[2],g=e[0],E=e[1],T=e[2],z=u*T-m*E,$=m*g-s*T,W=s*E-u*g,Q=u*W-m*$,le=m*z-s*W,de=s*$-u*z,be=2*n[3];return $*=be,W*=be,le*=2,de*=2,t[0]=g+(z*=be)+(Q*=2),t[1]=E+$+le,t[2]=T+W+de,t},vi.rotateX=function(t,e,n,s){var u=[],m=[];return u[0]=e[0]-n[0],u[1]=e[1]-n[1],u[2]=e[2]-n[2],m[0]=u[0],m[1]=u[1]*Math.cos(s)-u[2]*Math.sin(s),m[2]=u[1]*Math.sin(s)+u[2]*Math.cos(s),t[0]=m[0]+n[0],t[1]=m[1]+n[1],t[2]=m[2]+n[2],t},vi.rotateY=function(t,e,n,s){var u=[],m=[];return u[0]=e[0]-n[0],u[1]=e[1]-n[1],u[2]=e[2]-n[2],m[0]=u[2]*Math.sin(s)+u[0]*Math.cos(s),m[1]=u[1],m[2]=u[2]*Math.cos(s)-u[0]*Math.sin(s),t[0]=m[0]+n[0],t[1]=m[1]+n[1],t[2]=m[2]+n[2],t},vi.rotateZ=function(t,e,n,s){var u=[],m=[];return u[0]=e[0]-n[0],u[1]=e[1]-n[1],u[2]=e[2]-n[2],m[0]=u[0]*Math.cos(s)-u[1]*Math.sin(s),m[1]=u[0]*Math.sin(s)+u[1]*Math.cos(s),m[2]=u[2],t[0]=m[0]+n[0],t[1]=m[1]+n[1],t[2]=m[2]+n[2],t},vi.angle=function(t,e){var n=t[0],s=t[1],u=t[2],m=e[0],g=e[1],E=e[2],T=Math.sqrt(n*n+s*s+u*u)*Math.sqrt(m*m+g*g+E*E),z=T&&zr(t,e)/T;return Math.acos(Math.min(Math.max(z,-1),1))},vi.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},vi.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},vi.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},vi.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=e[0],g=e[1],E=e[2];return Math.abs(n-m)<=ui.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-g)<=ui.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-E)<=ui.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))},vi.forEach=vi.sqrLen=vi.len=vi.sqrDist=vi.dist=vi.div=vi.mul=vi.sub=void 0;var ui=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Yi(t)&&"function"!=typeof t)return{default:t};var n=Ni(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function Ni(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(Ni=function(s){return s?n:e})(t)}function po(){var t=new ui.ARRAY_TYPE(3);return ui.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xi(t){return Math.hypot(t[0],t[1],t[2])}function bs(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Br(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function So(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function ro(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])}function fo(t,e){var n=e[0]-t[0],s=e[1]-t[1],u=e[2]-t[2];return n*n+s*s+u*u}function Ts(t){var e=t[0],n=t[1],s=t[2];return e*e+n*n+s*s}function zr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}vi.sub=bs,vi.mul=Br,vi.div=So,vi.dist=ro,vi.sqrDist=fo,vi.len=Xi,vi.sqrLen=Ts;var Zr,Qr=(Zr=po(),function(t,e,n,s,u,m){var g,E;for(e||(e=3),n||(n=0),E=s?Math.min(s*e+n,t.length):t.length,g=n;g<E;g+=e)Zr[0]=t[g],Zr[1]=t[g+1],Zr[2]=t[g+2],u(Zr,Zr,m),t[g]=Zr[0],t[g+1]=Zr[1],t[g+2]=Zr[2];return t});vi.forEach=Qr;var Wo={};function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.create=wr,Wo.clone=function(t){var e=new Pr.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Wo.fromValues=function(t,e,n,s){var u=new Pr.ARRAY_TYPE(4);return u[0]=t,u[1]=e,u[2]=n,u[3]=s,u},Wo.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Wo.set=function(t,e,n,s,u){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t},Wo.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Wo.subtract=aa,Wo.multiply=Jn,Wo.divide=hs,Wo.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},Wo.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},Wo.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},Wo.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},Wo.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},Wo.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Wo.scaleAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t},Wo.distance=jr,Wo.squaredDistance=Ns,Wo.length=ps,Wo.squaredLength=Kr,Wo.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},Wo.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},Wo.normalize=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n*n+s*s+u*u+m*m;return g>0&&(g=1/Math.sqrt(g)),t[0]=n*g,t[1]=s*g,t[2]=u*g,t[3]=m*g,t},Wo.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},Wo.cross=function(t,e,n,s){var u=n[0]*s[1]-n[1]*s[0],m=n[0]*s[2]-n[2]*s[0],g=n[0]*s[3]-n[3]*s[0],E=n[1]*s[2]-n[2]*s[1],T=n[1]*s[3]-n[3]*s[1],z=n[2]*s[3]-n[3]*s[2],$=e[0],W=e[1],Q=e[2],le=e[3];return t[0]=W*z-Q*T+le*E,t[1]=-$*z+Q*g-le*m,t[2]=$*T-W*g+le*u,t[3]=-$*E+W*m-Q*u,t},Wo.lerp=function(t,e,n,s){var u=e[0],m=e[1],g=e[2],E=e[3];return t[0]=u+s*(n[0]-u),t[1]=m+s*(n[1]-m),t[2]=g+s*(n[2]-g),t[3]=E+s*(n[3]-E),t},Wo.random=function(t,e){var n,s,u,m,g,E;e=e||1;do{g=(n=2*Pr.RANDOM()-1)*n+(s=2*Pr.RANDOM()-1)*s}while(g>=1);do{E=(u=2*Pr.RANDOM()-1)*u+(m=2*Pr.RANDOM()-1)*m}while(E>=1);var T=Math.sqrt((1-g)/E);return t[0]=e*n,t[1]=e*s,t[2]=e*u*T,t[3]=e*m*T,t},Wo.transformMat4=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3];return t[0]=n[0]*s+n[4]*u+n[8]*m+n[12]*g,t[1]=n[1]*s+n[5]*u+n[9]*m+n[13]*g,t[2]=n[2]*s+n[6]*u+n[10]*m+n[14]*g,t[3]=n[3]*s+n[7]*u+n[11]*m+n[15]*g,t},Wo.transformQuat=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=n[0],E=n[1],T=n[2],z=n[3],$=z*s+E*m-T*u,W=z*u+T*s-g*m,Q=z*m+g*u-E*s,le=-g*s-E*u-T*m;return t[0]=$*z+le*-g+W*-T-Q*-E,t[1]=W*z+le*-E+Q*-g-$*-T,t[2]=Q*z+le*-T+$*-E-W*-g,t[3]=e[3],t},Wo.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Wo.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Wo.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},Wo.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=e[0],E=e[1],T=e[2],z=e[3];return Math.abs(n-g)<=Pr.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(s-E)<=Pr.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-T)<=Pr.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(m-z)<=Pr.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))},Wo.forEach=Wo.sqrLen=Wo.len=Wo.sqrDist=Wo.dist=Wo.div=Wo.mul=Wo.sub=void 0;var Pr=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==lr(t)&&"function"!=typeof t)return{default:t};var n=xr(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function xr(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(xr=function(s){return s?n:e})(t)}function wr(){var t=new Pr.ARRAY_TYPE(4);return Pr.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function aa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Jn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function hs(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function jr(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])}function Ns(t,e){var n=e[0]-t[0],s=e[1]-t[1],u=e[2]-t[2],m=e[3]-t[3];return n*n+s*s+u*u+m*m}function ps(t){return Math.hypot(t[0],t[1],t[2],t[3])}function Kr(t){var e=t[0],n=t[1],s=t[2],u=t[3];return e*e+n*n+s*s+u*u}Wo.sub=aa,Wo.mul=Jn,Wo.div=hs,Wo.dist=jr,Wo.sqrDist=Ns,Wo.len=ps,Wo.sqrLen=Kr;var t,Fi=(t=wr(),function(e,n,s,u,m,g){var E,T;for(n||(n=4),s||(s=0),T=u?Math.min(u*n+s,e.length):e.length,E=s;E<T;E+=n)t[0]=e[E],t[1]=e[E+1],t[2]=e[E+2],t[3]=e[E+3],m(t,t,g),e[E]=t[0],e[E+1]=t[1],e[E+2]=t[2],e[E+3]=t[3];return e});function ni(t){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Wo.forEach=Fi,Object.defineProperty(ji,"__esModule",{value:!0}),ji.create=Jt,ji.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},ji.setAxisAngle=Ln,ji.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),s=Math.sin(n/2);return s>Ai.EPSILON?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),n},ji.getAngle=function(t,e){var n=it(t,e);return Math.acos(2*n*n-1)},ji.multiply=Lt,ji.rotateX=function(t,e,n){n*=.5;var s=e[0],u=e[1],m=e[2],g=e[3],E=Math.sin(n),T=Math.cos(n);return t[0]=s*T+g*E,t[1]=u*T+m*E,t[2]=m*T-u*E,t[3]=g*T-s*E,t},ji.rotateY=function(t,e,n){n*=.5;var s=e[0],u=e[1],m=e[2],g=e[3],E=Math.sin(n),T=Math.cos(n);return t[0]=s*T-m*E,t[1]=u*T+g*E,t[2]=m*T+s*E,t[3]=g*T-u*E,t},ji.rotateZ=function(t,e,n){n*=.5;var s=e[0],u=e[1],m=e[2],g=e[3],E=Math.sin(n),T=Math.cos(n);return t[0]=s*T+u*E,t[1]=u*T-s*E,t[2]=m*T+g*E,t[3]=g*T-m*E,t},ji.calculateW=function(t,e){var n=e[0],s=e[1],u=e[2];return t[0]=n,t[1]=s,t[2]=u,t[3]=Math.sqrt(Math.abs(1-n*n-s*s-u*u)),t},ji.exp=Ee,ji.ln=ue,ji.pow=function(t,e,n){return ue(t,e),Ue(t,t,n),Ee(t,t),t},ji.slerp=ae,ji.random=function(t){var e=Ai.RANDOM(),n=Ai.RANDOM(),s=Ai.RANDOM(),u=Math.sqrt(1-e),m=Math.sqrt(e);return t[0]=u*Math.sin(2*Math.PI*n),t[1]=u*Math.cos(2*Math.PI*n),t[2]=m*Math.sin(2*Math.PI*s),t[3]=m*Math.cos(2*Math.PI*s),t},ji.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n*n+s*s+u*u+m*m,E=g?1/g:0;return t[0]=-n*E,t[1]=-s*E,t[2]=-u*E,t[3]=m*E,t},ji.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},ji.fromMat3=we,ji.fromEuler=function(t,e,n,s){var u=.5*Math.PI/180;e*=u,n*=u,s*=u;var m=Math.sin(e),g=Math.cos(e),E=Math.sin(n),T=Math.cos(n),z=Math.sin(s),$=Math.cos(s);return t[0]=m*T*$-g*E*z,t[1]=g*E*$+m*T*z,t[2]=g*T*z-m*E*$,t[3]=g*T*$+m*E*z,t},ji.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ji.setAxes=ji.sqlerp=ji.rotationTo=ji.equals=ji.exactEquals=ji.normalize=ji.sqrLen=ji.squaredLength=ji.len=ji.length=ji.lerp=ji.dot=ji.scale=ji.mul=ji.add=ji.set=ji.copy=ji.fromValues=ji.clone=void 0;var Ai=Tt(ht),Kn=Tt(Ke),kt=Tt(vi),mt=Tt(Wo);function Ye(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(Ye=function(s){return s?n:e})(t)}function Tt(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==ni(t)&&"function"!=typeof t)return{default:t};var n=Ye(e);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}function Jt(){var t=new Ai.ARRAY_TYPE(4);return Ai.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ln(t,e,n){n*=.5;var s=Math.sin(n);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(n),t}function Lt(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=n[0],T=n[1],z=n[2],$=n[3];return t[0]=s*$+g*E+u*z-m*T,t[1]=u*$+g*T+m*E-s*z,t[2]=m*$+g*z+s*T-u*E,t[3]=g*$-s*E-u*T-m*z,t}function Ee(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=Math.sqrt(n*n+s*s+u*u),E=Math.exp(m),T=g>0?E*Math.sin(g)/g:0;return t[0]=n*T,t[1]=s*T,t[2]=u*T,t[3]=E*Math.cos(g),t}function ue(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=Math.sqrt(n*n+s*s+u*u),E=g>0?Math.atan2(g,m)/g:0;return t[0]=n*E,t[1]=s*E,t[2]=u*E,t[3]=.5*Math.log(n*n+s*s+u*u+m*m),t}function ae(t,e,n,s){var u,m,g,E,T,z=e[0],$=e[1],W=e[2],Q=e[3],le=n[0],de=n[1],be=n[2],xe=n[3];return(m=z*le+$*de+W*be+Q*xe)<0&&(m=-m,le=-le,de=-de,be=-be,xe=-xe),1-m>Ai.EPSILON?(u=Math.acos(m),g=Math.sin(u),E=Math.sin((1-s)*u)/g,T=Math.sin(s*u)/g):(E=1-s,T=s),t[0]=E*z+T*le,t[1]=E*$+T*de,t[2]=E*W+T*be,t[3]=E*Q+T*xe,t}function we(t,e){var n,s=e[0]+e[4]+e[8];if(s>0)n=Math.sqrt(s+1),t[3]=.5*n,t[0]=(e[5]-e[7])*(n=.5/n),t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var u=0;e[4]>e[0]&&(u=1),e[8]>e[3*u+u]&&(u=2);var m=(u+1)%3,g=(u+2)%3;n=Math.sqrt(e[3*u+u]-e[3*m+m]-e[3*g+g]+1),t[u]=.5*n,t[3]=(e[3*m+g]-e[3*g+m])*(n=.5/n),t[m]=(e[3*m+u]+e[3*u+m])*n,t[g]=(e[3*g+u]+e[3*u+g])*n}return t}ji.clone=mt.clone,ji.fromValues=mt.fromValues,ji.copy=mt.copy,ji.set=mt.set,ji.add=mt.add,ji.mul=Lt;var Ue=mt.scale;ji.scale=Ue;var it=mt.dot;ji.dot=it,ji.lerp=mt.lerp;var Xt=mt.length;ji.length=Xt,ji.len=Xt;var Cn=mt.squaredLength;ji.squaredLength=Cn,ji.sqrLen=Cn;var dn=mt.normalize;ji.normalize=dn,ji.exactEquals=mt.exactEquals,ji.equals=mt.equals;var Nn,Hi,Oi,Fo=(Nn=kt.create(),Hi=kt.fromValues(1,0,0),Oi=kt.fromValues(0,1,0),function(t,e,n){var s=kt.dot(e,n);return s<-.999999?(kt.cross(Nn,Hi,e),kt.len(Nn)<1e-6&&kt.cross(Nn,Oi,e),kt.normalize(Nn,Nn),Ln(t,Nn,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(kt.cross(Nn,e,n),t[0]=Nn[0],t[1]=Nn[1],t[2]=Nn[2],t[3]=1+s,dn(t,t))});ji.rotationTo=Fo;var nr,ii,jn=(nr=Jt(),ii=Jt(),function(t,e,n,s,u,m){return ae(nr,e,u,m),ae(ii,n,s,m),ae(t,nr,ii,2*m*(1-m)),t});ji.sqlerp=jn;var di,co=(di=Kn.create(),function(t,e,n,s){return di[0]=n[0],di[3]=n[1],di[6]=n[2],di[1]=s[0],di[4]=s[1],di[7]=s[2],di[2]=-e[0],di[5]=-e[1],di[8]=-e[2],dn(t,we(t,di))});ji.setAxes=co;var Ki={};function Kt(t){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.create=function(){var t=new oi.ARRAY_TYPE(8);return oi.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Ki.clone=function(t){var e=new oi.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},Ki.fromValues=function(t,e,n,s,u,m,g,E){var T=new oi.ARRAY_TYPE(8);return T[0]=t,T[1]=e,T[2]=n,T[3]=s,T[4]=u,T[5]=m,T[6]=g,T[7]=E,T},Ki.fromRotationTranslationValues=function(t,e,n,s,u,m,g){var E=new oi.ARRAY_TYPE(8);E[0]=t,E[1]=e,E[2]=n,E[3]=s;var T=.5*u,z=.5*m,$=.5*g;return E[4]=T*s+z*n-$*e,E[5]=z*s+$*t-T*n,E[6]=$*s+T*e-z*t,E[7]=-T*t-z*e-$*n,E},Ki.fromRotationTranslation=qr,Ki.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},Ki.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ki.fromMat4=function(t,e){var n=Pi.create();Xo.getRotation(n,e);var s=new oi.ARRAY_TYPE(3);return Xo.getTranslation(s,e),qr(t,n,s),t},Ki.copy=Pa,Ki.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ki.set=function(t,e,n,s,u,m,g,E,T){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t[4]=m,t[5]=g,t[6]=E,t[7]=T,t},Ki.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},Ki.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},Ki.getTranslation=function(t,e){var n=e[4],s=e[5],u=e[6],m=e[7],g=-e[0],E=-e[1],T=-e[2],z=e[3];return t[0]=2*(n*z+m*g+s*T-u*E),t[1]=2*(s*z+m*E+u*g-n*T),t[2]=2*(u*z+m*T+n*E-s*g),t},Ki.translate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=.5*n[0],T=.5*n[1],z=.5*n[2],$=e[4],W=e[5],Q=e[6],le=e[7];return t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=g*E+u*z-m*T+$,t[5]=g*T+m*E-s*z+W,t[6]=g*z+s*T-u*E+Q,t[7]=-s*E-u*T-m*z+le,t},Ki.rotateX=function(t,e,n){var s=-e[0],u=-e[1],m=-e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=E*g+$*s+T*m-z*u,Q=T*g+$*u+z*s-E*m,le=z*g+$*m+E*u-T*s,de=$*g-E*s-T*u-z*m;return Pi.rotateX(t,e,n),t[4]=W*(g=t[3])+de*(s=t[0])+Q*(m=t[2])-le*(u=t[1]),t[5]=Q*g+de*u+le*s-W*m,t[6]=le*g+de*m+W*u-Q*s,t[7]=de*g-W*s-Q*u-le*m,t},Ki.rotateY=function(t,e,n){var s=-e[0],u=-e[1],m=-e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=E*g+$*s+T*m-z*u,Q=T*g+$*u+z*s-E*m,le=z*g+$*m+E*u-T*s,de=$*g-E*s-T*u-z*m;return Pi.rotateY(t,e,n),t[4]=W*(g=t[3])+de*(s=t[0])+Q*(m=t[2])-le*(u=t[1]),t[5]=Q*g+de*u+le*s-W*m,t[6]=le*g+de*m+W*u-Q*s,t[7]=de*g-W*s-Q*u-le*m,t},Ki.rotateZ=function(t,e,n){var s=-e[0],u=-e[1],m=-e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=E*g+$*s+T*m-z*u,Q=T*g+$*u+z*s-E*m,le=z*g+$*m+E*u-T*s,de=$*g-E*s-T*u-z*m;return Pi.rotateZ(t,e,n),t[4]=W*(g=t[3])+de*(s=t[0])+Q*(m=t[2])-le*(u=t[1]),t[5]=Q*g+de*u+le*s-W*m,t[6]=le*g+de*m+W*u-Q*s,t[7]=de*g-W*s-Q*u-le*m,t},Ki.rotateByQuatAppend=function(t,e,n){var s=n[0],u=n[1],m=n[2],g=n[3],E=e[0],T=e[1],z=e[2],$=e[3];return t[0]=E*g+$*s+T*m-z*u,t[1]=T*g+$*u+z*s-E*m,t[2]=z*g+$*m+E*u-T*s,t[3]=$*g-E*s-T*u-z*m,t[4]=(E=e[4])*g+($=e[7])*s+(T=e[5])*m-(z=e[6])*u,t[5]=T*g+$*u+z*s-E*m,t[6]=z*g+$*m+E*u-T*s,t[7]=$*g-E*s-T*u-z*m,t},Ki.rotateByQuatPrepend=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=n[0],T=n[1],z=n[2],$=n[3];return t[0]=s*$+g*E+u*z-m*T,t[1]=u*$+g*T+m*E-s*z,t[2]=m*$+g*z+s*T-u*E,t[3]=g*$-s*E-u*T-m*z,t[4]=s*($=n[7])+g*(E=n[4])+u*(z=n[6])-m*(T=n[5]),t[5]=u*$+g*T+m*E-s*z,t[6]=m*$+g*z+s*T-u*E,t[7]=g*$-s*E-u*T-m*z,t},Ki.rotateAroundAxis=function(t,e,n,s){if(Math.abs(s)<oi.EPSILON)return Pa(t,e);var u=Math.hypot(n[0],n[1],n[2]);s*=.5;var m=Math.sin(s),g=m*n[0]/u,E=m*n[1]/u,T=m*n[2]/u,z=Math.cos(s),$=e[0],W=e[1],Q=e[2],le=e[3];t[0]=$*z+le*g+W*T-Q*E,t[1]=W*z+le*E+Q*g-$*T,t[2]=Q*z+le*T+$*E-W*g,t[3]=le*z-$*g-W*E-Q*T;var de=e[4],be=e[5],xe=e[6],je=e[7];return t[4]=de*z+je*g+be*T-xe*E,t[5]=be*z+je*E+xe*g-de*T,t[6]=xe*z+je*T+de*E-be*g,t[7]=je*z-de*g-be*E-xe*T,t},Ki.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},Ki.multiply=Jl,Ki.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},Ki.lerp=function(t,e,n,s){var u=1-s;return ru(e,n)<0&&(s=-s),t[0]=e[0]*u+n[0]*s,t[1]=e[1]*u+n[1]*s,t[2]=e[2]*u+n[2]*s,t[3]=e[3]*u+n[3]*s,t[4]=e[4]*u+n[4]*s,t[5]=e[5]*u+n[5]*s,t[6]=e[6]*u+n[6]*s,t[7]=e[7]*u+n[7]*s,t},Ki.invert=function(t,e){var n=Cr(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},Ki.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},Ki.normalize=function(t,e){var n=Cr(e);if(n>0){n=Math.sqrt(n);var s=e[0]/n,u=e[1]/n,m=e[2]/n,g=e[3]/n,E=e[4],T=e[5],z=e[6],$=e[7],W=s*E+u*T+m*z+g*$;t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=(E-s*W)/n,t[5]=(T-u*W)/n,t[6]=(z-m*W)/n,t[7]=($-g*W)/n}return t},Ki.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Ki.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},Ki.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=t[4],E=t[5],T=t[6],z=t[7],$=e[0],W=e[1],Q=e[2],le=e[3],de=e[4],be=e[5],xe=e[6],je=e[7];return Math.abs(n-$)<=oi.EPSILON*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(s-W)<=oi.EPSILON*Math.max(1,Math.abs(s),Math.abs(W))&&Math.abs(u-Q)<=oi.EPSILON*Math.max(1,Math.abs(u),Math.abs(Q))&&Math.abs(m-le)<=oi.EPSILON*Math.max(1,Math.abs(m),Math.abs(le))&&Math.abs(g-de)<=oi.EPSILON*Math.max(1,Math.abs(g),Math.abs(de))&&Math.abs(E-be)<=oi.EPSILON*Math.max(1,Math.abs(E),Math.abs(be))&&Math.abs(T-xe)<=oi.EPSILON*Math.max(1,Math.abs(T),Math.abs(xe))&&Math.abs(z-je)<=oi.EPSILON*Math.max(1,Math.abs(z),Math.abs(je))},Ki.sqrLen=Ki.squaredLength=Ki.len=Ki.length=Ki.dot=Ki.mul=Ki.setReal=Ki.getReal=void 0;var oi=es(ht),Pi=es(ji),Xo=es(un);function pr(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(pr=function(s){return s?n:e})(t)}function es(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Kt(t)&&"function"!=typeof t)return{default:t};var n=pr(e);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}function qr(t,e,n){var s=.5*n[0],u=.5*n[1],m=.5*n[2],g=e[0],E=e[1],T=e[2],z=e[3];return t[0]=g,t[1]=E,t[2]=T,t[3]=z,t[4]=s*z+u*T-m*E,t[5]=u*z+m*g-s*T,t[6]=m*z+s*E-u*g,t[7]=-s*g-u*E-m*T,t}function Pa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Jl(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=n[4],T=n[5],z=n[6],$=n[7],W=e[4],Q=e[5],le=e[6],de=e[7],be=n[0],xe=n[1],je=n[2],gt=n[3];return t[0]=s*gt+g*be+u*je-m*xe,t[1]=u*gt+g*xe+m*be-s*je,t[2]=m*gt+g*je+s*xe-u*be,t[3]=g*gt-s*be-u*xe-m*je,t[4]=s*$+g*E+u*z-m*T+W*gt+de*be+Q*je-le*xe,t[5]=u*$+g*T+m*E-s*z+Q*gt+de*xe+le*be-W*je,t[6]=m*$+g*z+s*T-u*E+le*gt+de*je+W*xe-Q*be,t[7]=g*$-s*E-u*T-m*z+de*gt-W*be-Q*xe-le*je,t}Ki.getReal=Pi.copy,Ki.setReal=Pi.copy,Ki.mul=Jl;var ru=Pi.dot;Ki.dot=ru;var Oa=Pi.length;Ki.length=Oa,Ki.len=Oa;var Cr=Pi.squaredLength;Ki.squaredLength=Cr,Ki.sqrLen=Cr;var bi={};function kr(t){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(bi,"__esModule",{value:!0}),bi.create=Es,bi.clone=function(t){var e=new Vr.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},bi.fromValues=function(t,e){var n=new Vr.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},bi.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},bi.set=function(t,e,n){return t[0]=e,t[1]=n,t},bi.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},bi.subtract=wa,bi.multiply=Gs,bi.divide=xa,bi.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},bi.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},bi.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},bi.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},bi.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},bi.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},bi.scaleAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t},bi.distance=gl,bi.squaredDistance=Ha,bi.length=su,bi.squaredLength=au,bi.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},bi.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},bi.normalize=function(t,e){var n=e[0],s=e[1],u=n*n+s*s;return u>0&&(u=1/Math.sqrt(u)),t[0]=e[0]*u,t[1]=e[1]*u,t},bi.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},bi.cross=function(t,e,n){var s=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=s,t},bi.lerp=function(t,e,n,s){var u=e[0],m=e[1];return t[0]=u+s*(n[0]-u),t[1]=m+s*(n[1]-m),t},bi.random=function(t,e){e=e||1;var n=2*Vr.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},bi.transformMat2=function(t,e,n){var s=e[0],u=e[1];return t[0]=n[0]*s+n[2]*u,t[1]=n[1]*s+n[3]*u,t},bi.transformMat2d=function(t,e,n){var s=e[0],u=e[1];return t[0]=n[0]*s+n[2]*u+n[4],t[1]=n[1]*s+n[3]*u+n[5],t},bi.transformMat3=function(t,e,n){var s=e[0],u=e[1];return t[0]=n[0]*s+n[3]*u+n[6],t[1]=n[1]*s+n[4]*u+n[7],t},bi.transformMat4=function(t,e,n){var s=e[0],u=e[1];return t[0]=n[0]*s+n[4]*u+n[12],t[1]=n[1]*s+n[5]*u+n[13],t},bi.rotate=function(t,e,n,s){var u=e[0]-n[0],m=e[1]-n[1],g=Math.sin(s),E=Math.cos(s);return t[0]=u*E-m*g+n[0],t[1]=u*g+m*E+n[1],t},bi.angle=function(t,e){var n=t[0],s=t[1],u=e[0],m=e[1],g=Math.sqrt(n*n+s*s)*Math.sqrt(u*u+m*m);return Math.acos(Math.min(Math.max(g&&(n*u+s*m)/g,-1),1))},bi.zero=function(t){return t[0]=0,t[1]=0,t},bi.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},bi.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},bi.equals=function(t,e){var n=t[0],s=t[1],u=e[0],m=e[1];return Math.abs(n-u)<=Vr.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(s-m)<=Vr.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))},bi.forEach=bi.sqrLen=bi.sqrDist=bi.dist=bi.div=bi.mul=bi.sub=bi.len=void 0;var Vr=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==kr(t)&&"function"!=typeof t)return{default:t};var n=is(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function is(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(is=function(s){return s?n:e})(t)}function Es(){var t=new Vr.ARRAY_TYPE(2);return Vr.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function wa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Gs(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function xa(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function gl(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}function Ha(t,e){var n=e[0]-t[0],s=e[1]-t[1];return n*n+s*s}function su(t){return Math.hypot(t[0],t[1])}function au(t){var e=t[0],n=t[1];return e*e+n*n}bi.len=su,bi.sub=wa,bi.mul=Gs,bi.div=xa,bi.dist=gl,bi.sqrDist=Ha,bi.sqrLen=au;var _a=function(){var t=Es();return function(e,n,s,u,m,g){var E,T;for(n||(n=2),s||(s=0),T=u?Math.min(u*n+s,e.length):e.length,E=s;E<T;E+=n)t[0]=e[E],t[1]=e[E+1],m(t,t,g),e[E]=t[0],e[E+1]=t[1];return e}}();function Eu(t){return(Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}bi.forEach=_a,Object.defineProperty(rn,"__esModule",{value:!0}),l.aA=rn.vec4=l._=rn.vec3=rn.vec2=rn.quat2=l.av=rn.quat=l.ad=rn.mat4=l.bC=rn.mat3=rn.mat2d=l.aC=rn.mat2=rn.glMatrix=void 0;var Ja=Ia(ht);rn.glMatrix=Ja;var Ra=Ia(Ot);l.aC=rn.mat2=Ra;var Vc=Ia(Te);rn.mat2d=Vc;var $u=Ia(Ke);l.bC=rn.mat3=$u;var ju=Ia(un);l.ad=rn.mat4=ju;var Ol=Ia(ji);l.av=rn.quat=Ol;var Ms=Ia(Ki);rn.quat2=Ms;var lu=Ia(bi);rn.vec2=lu;var Dc=Ia(vi);l._=rn.vec3=Dc;var cu=Ia(Wo);function lc(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(lc=function(s){return s?n:e})(t)}function Ia(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Eu(t)&&"function"!=typeof t)return{default:t};var n=lc(e);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}l.aA=rn.vec4=cu;var gc=Gl;function Gl(t,e,n,s){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(s-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=s}Gl.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,s=0;s<8;s++){var u=this.sampleCurveX(n)-t;if(Math.abs(u)<e)return n;var m=this.sampleCurveDerivativeX(n);if(Math.abs(m)<1e-6)break;n-=u/m}var g=0,E=1;for(n=t,s=0;s<20&&(u=this.sampleCurveX(n),!(Math.abs(u-t)<e));s++)t>u?g=n:E=n,n=.5*(E-g)+g;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var uu=xn(gc),vc=du;function du(t,e){this.x=t,this.y=e}du.prototype={clone:function(){return new du(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),s=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=s,this},_rotateAround:function(t,e){var n=Math.cos(t),s=Math.sin(t),u=e.y+s*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-s*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},du.convert=function(t){return t instanceof du?t:Array.isArray(t)?new du(t[0],t[1]):t};var Io=xn(vc);const Sc=Math.PI/180,vl=180/Math.PI;function rs(t){return t*Sc}function Na(t){return t*vl}const nt=[[0,0],[1,0],[1,1],[0,1]];function Dt(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Hn(t,e,n,s){const u=new uu(t,e,n,s);return function(m){return u.solve(m)}}const Yn=Hn(.25,.1,.25,1);function On(t,e,n){return Math.min(n,Math.max(e,t))}function li(t,e,n){return(n=On((n-t)/(e-t),0,1))*n*(3-2*n)}function bo(t,e,n){const s=n-e,u=((t-e)%s+s)%s+e;return u===e?n:u}function Eo(t,e,n){if(!t.length)return n(null,[]);let s=t.length;const u=new Array(t.length);let m=null;t.forEach((g,E)=>{e(g,(T,z)=>{T&&(m=T),u[E]=z,0==--s&&n(m,u)})})}function so(t){const e=[];for(const n in t)e.push(t[n]);return e}function mi(t,...e){for(const n of e)for(const s in n)t[s]=n[s];return t}let qo=1;function hr(){return qo++}function Ir(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function os(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Cs(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function ea(t,e){t.forEach(n=>{e[n]&&(e[n]=e[n].bind(e))})}function Ps(t,e){return-1!==t.indexOf(e,t.length-e.length)}function Nr(t,e,n){const s={};for(const u in t)s[u]=e.call(this,t[u],u,t);return s}function Yr(t,e,n){const s={};for(const u in t)e.call(this,t[u],u,t)&&(s[u]=t[u]);return s}function ta(t){return Array.isArray(t)?t.map(ta):"object"==typeof t&&t?Nr(t,ta):t}const cc={};function fa(t){cc[t]||(typeof console<"u"&&console.warn(t),cc[t]=!0)}function Os(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function Yc(t){let e=0;for(let n,s,u=0,m=t.length,g=m-1;u<m;g=u++)n=t[u],s=t[g],e+=(s.x-n.x)*(n.y+s.y);return e}function Zs([t,e,n]){const s=rs(e+90),u=rs(n);return{x:t*Math.cos(s)*Math.sin(u),y:t*Math.sin(s)*Math.sin(u),z:t*Math.cos(u),azimuthal:e,polar:n}}function hu(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Uu(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,s,u,m)=>{const g=u||m;return e[s]=!g||g.toLowerCase(),""}),e["max-age"]){const n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}let Ea,Ga,nl,uc,gd,sd,Le=null;function qe(t){try{const e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function St(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function ln(t,e,n,s){for(;e<n;){const u=e+n>>1;t[u]<s?e=u+1:n=u}return e}function Fn(t,e,n,s){for(;e<n;){const u=e+n>>1;t[u]<=s?e=u+1:n=u}return e}function Gn(t){return t>0?1/(1.001-t):1+t}function Mi(t){return t>0?1-1/(1.001-t):-t}function Li(){return null==Ea&&(Ea=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ea}const ki={now:()=>void 0!==uc?uc:performance.now(),setNow(t){uc=t},restoreNow(){uc=void 0},frame(t){const e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t,e=0){const{width:n,height:s}=t;gd||(gd=document.createElement("canvas"));const u=gd.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return(n>gd.width||s>gd.height)&&(gd.width=n,gd.height=s),u.clearRect(-e,-e,n+2*e,s+2*e),u.drawImage(t,0,0,n,s),u.getImageData(-e,-e,n+2*e,s+2*e)},resolveURL:t=>(Ga||(Ga=document.createElement("a")),Ga.href=t,Ga.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(null==nl&&(nl=window.matchMedia("(prefers-reduced-motion: reduce)")),nl.matches)},hasCanvasFingerprintNoise(){if(void 0!==sd)return sd;if(!Li())return sd=!1,!1;const t=new OffscreenCanvas(85,1),e=t.getContext("2d",{willReadFrequently:!0});let n=0;for(let u=0;u<t.width;++u)e.fillStyle=`rgba(${n++},${n++},${n++}, 255)`,e.fillRect(u,0,1,1);const s=e.getImageData(0,0,t.width,t.height);n=0;for(let u=0;u<s.data.length;++u)if(u%4!=3&&n++!==s.data[u])return sd=!0,!0;return sd=!1,!1}};function ao(t,e){const n=t.indexOf("?");if(n<0)return`${t}?${new URLSearchParams(e).toString()}`;const s=new URLSearchParams(t.slice(n));for(const u in e)s.set(u,e[u]);return`${t.slice(0,n)}?${s.toString()}`}function Ko(t,e={persistentParams:[]}){const n=t.indexOf("?");if(n<0)return t;const s=new URLSearchParams,u=new URLSearchParams(t.slice(n));for(const g of e.persistentParams){const E=u.get(g);E&&s.set(g,E)}const m=s.toString();return`${t.slice(0,n)}${m.length>0?`?${m}`:""}`}const sr="mapbox-tiles";let sa,xl,gr=500,Xr=50;function ms(){try{return caches}catch{}}function Vo(){const t=ms();t&&!sa&&(sa=t.open(sr))}let js=1/0;const Sa={supported:!1,testSupport:function(t){!Ll&&Sl&&(ya?Se(t):Tc=t)}};let Tc,Sl,Ll=!1,ya=!1;const Xe=typeof self<"u"?self:{};function Se(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,Sl),t.isContextLost())return;Sa.supported=!0}catch{}t.deleteTexture(e),Ll=!0}Xe.document&&(Sl=Xe.document.createElement("img"),Sl.onload=function(){Tc&&Se(Tc),Tc=null,ya=!0},Sl.onerror=function(){Ll=!0,Tc=null},Sl.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const vt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};"function"==typeof Object.freeze&&Object.freeze(vt);class He extends Error{constructor(e,n,s){401===n&&qt(s)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=n,this.url=s}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Zt=hu()?()=>self.worker&&self.worker.referrer:()=>("blob:"===location.protocol?parent:self).location.href,Uo=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(Zt())&&!/^\w+:/.test(n))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(s,u){const m=new AbortController,g=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,referrer:Zt(),referrerPolicy:s.referrerPolicy,signal:m.signal});let E=!1,T=!1;const z=($=g.url).indexOf("sku=")>0&&qt($);var $;"json"===s.type&&g.headers.set("Accept","application/json");const W=(le,de,be)=>{if(T)return;if(le&&"SecurityError"!==le.message&&fa(le.toString()),de&&be)return Q(de);const xe=Date.now();fetch(g).then(je=>{if(je.ok){const gt=z?je.clone():null;return Q(je,gt,xe)}return u(new He(je.statusText,je.status,s.url))}).catch(je=>{"AbortError"!==je.name&&u(new Error(`${je.message} ${s.url}`))})},Q=(le,de,be)=>{("arrayBuffer"===s.type?le.arrayBuffer():"json"===s.type?le.json():le.text()).then(xe=>{T||(de&&be&&function(je,gt,_t){if(Vo(),!sa)return;const bt=Uu(gt.headers.get("Cache-Control")||"");if(bt["no-store"])return;const nn={status:gt.status,statusText:gt.statusText,headers:new Headers};gt.headers.forEach((Rn,ai)=>nn.headers.set(ai,Rn)),bt["max-age"]&&nn.headers.set("Expires",new Date(_t+1e3*bt["max-age"]).toUTCString());const Yt=nn.headers.get("Expires");if(!Yt||new Date(Yt).getTime()-_t<42e4)return;let Sn=Ko(je.url,{persistentParams:["language","worldview"]});if(206===gt.status){const Rn=je.headers.get("Range");if(!Rn)return;nn.status=200,Sn=ao(Sn,{range:Rn})}!function(Rn,ai){if(void 0===xl)try{new Response(new ReadableStream),xl=!0}catch{xl=!1}xl?ai(Rn.body):Rn.blob().then(ai)}(gt,Rn=>{const ai=new Response(200!==(Di=gt.status)&&404!==Di&&[101,103,204,205,304].includes(Di)?null:Rn,nn);var Di;Vo(),sa&&sa.then(wi=>wi.put(Sn,ai)).catch(wi=>fa(wi.message))})}(g,de,be),E=!0,u(null,xe,le.headers.get("Cache-Control"),le.headers.get("Expires")))}).catch(xe=>{T||u(new Error(xe.message))})};return z?function(le,de){if(Vo(),!sa)return de(null);sa.then(be=>{let xe=Ko(le.url,{persistentParams:["language","worldview"]});const je=le.headers.get("Range");je&&(xe=ao(xe,{range:je})),be.match(xe).then(gt=>{const _t=function(bt){if(!bt)return!1;const nn=new Date(bt.headers.get("Expires")||0),Yt=Uu(bt.headers.get("Cache-Control")||"");return nn>Date.now()&&!Yt["no-cache"]}(gt);be.delete(xe),_t&&be.put(xe,gt.clone()),de(null,gt,_t)}).catch(de)}).catch(de)}(g,W):W(null,null),{cancel:()=>{T=!0,E||m.abort()}}}(t,e);if(hu()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(s,u){const m=new XMLHttpRequest;m.open(s.method||"GET",s.url,!0),"arrayBuffer"===s.type&&(m.responseType="arraybuffer");for(const g in s.headers)m.setRequestHeader(g,s.headers[g]);return"json"===s.type&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials="include"===s.credentials,m.onerror=()=>{u(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||0===m.status)&&null!==m.response){let g=m.response;if("json"===s.type)try{g=JSON.parse(m.response)}catch(E){return u(E)}u(null,g,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else u(new He(m.statusText,m.status,s.url))},m.send(s.body),{cancel:()=>m.abort()}}(t,e)},Tr=function(t,e){return Uo(mi(t,{type:"arrayBuffer"}),e)};function Wa(t){const e=document.createElement("a");return e.href=t,e.protocol===location.protocol&&e.host===location.host}const _l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Pc,Xa;Pc=[],Xa=0;const cs=function(t,e){if(Sa.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Xa>=ft.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Pc.push(m),m}Xa++;let n=!1;const s=()=>{if(!n)for(n=!0,Xa--;Pc.length&&Xa<ft.MAX_PARALLEL_IMAGE_REQUESTS;){const m=Pc.shift(),{requestParameters:g,callback:E,cancelled:T}=m;T||(m.cancel=cs(g,E).cancel)}},u=Tr(t,(m,g,E,T)=>{s(),m?e(m):g&&(self.createImageBitmap?function(z,$){const W=new Blob([new Uint8Array(z)],{type:"image/png"});createImageBitmap(W).then(Q=>{$(null,Q)}).catch(Q=>{$(new Error(`Could not load image because of ${Q.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(g,(z,$)=>e(z,$,E,T)):function(z,$){const W=new Image;W.onload=()=>{$(null,W),URL.revokeObjectURL(W.src),W.onload=null,requestAnimationFrame(()=>{W.src=_l})},W.onerror=()=>$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Q=new Blob([new Uint8Array(z)],{type:"image/png"});W.src=z.byteLength?URL.createObjectURL(Q):_l}(g,(z,$)=>e(z,$,E,T)))});return{cancel:()=>{u.cancel(),s()}}},_c="01",ch="NO_ACCESS_TOKEN",Dd=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function us(t){const e=t.match(Dd);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function ec(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}const vd="mapbox.eventData";function b0(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(atob(e[1]).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class uh{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const n=b0(ft.ACCESS_TOKEN);let s="";return s=n&&n.u?btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(u,m)=>String.fromCharCode(+("0x"+m)))):ft.ACCESS_TOKEN||"",e?`${vd}.${e}:${s}`:`${vd}:${s}`}fetchEventData(){const e=qe("localStorage"),n=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{const u=localStorage.getItem(n);u&&(this.eventData=JSON.parse(u));const m=localStorage.getItem(s);m&&(this.anonId=m)}catch{fa("Unable to read from LocalStorage")}}saveEventData(){const e=qe("localStorage"),n=this.getStorageKey(),s=this.getStorageKey("uuid"),u=this.anonId;if(e&&u)try{localStorage.setItem(s,u),Object.keys(this.eventData).length>=1&&localStorage.setItem(n,JSON.stringify(this.eventData))}catch{fa("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,n,s,u){if(!ft.EVENTS_URL)return;const m=us(ft.EVENTS_URL);m.params.push(`access_token=${u||ft.ACCESS_TOKEN||""}`);const g={event:this.type,created:new Date(e).toISOString()},E=n?mi(g,n):g,T={url:ec(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};var $;this.pendingRequest=($=z=>{this.pendingRequest=null,s(z),this.saveEventData(),this.processRequests(u)},Uo(mi(T,{method:"POST"}),$))}queueRequest(e,n){this.queue.push(e),this.processRequests(n)}}const xh=new class extends uh{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){ft.EVENTS_URL&&ft.ACCESS_TOKEN&&Array.isArray(t)&&t.some(n=>jt(n)||qt(n))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=b0(ft.ACCESS_TOKEN),n=e?e.u:ft.ACCESS_TOKEN;let s=n!==this.eventData.tokenU;Cs(this.anonId)||(this.anonId=Ir(),s=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),g=new Date(u),E=(u-this.eventData.lastSuccess)/864e5;s=s||E>=1||E<-1||m.getDate()!==g.getDate()}else s=!0;s?this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:We,skuId:_c,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=u,this.eventData.tokenU=n)},t):this.processRequests()}},Ih=xh.postTurnstileEvent.bind(xh),Cu=new class extends uh{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,s){this.skuToken=e,this.errorCb=s,ft.EVENTS_URL&&(n||ft.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(ch)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),Cs(this.anonId)||(this.anonId=Ir()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:We,skuId:_c,skuToken:this.skuToken,userId:this.anonId},s=>{s?this.errorCb(s):e&&(this.success[e]=!0)},t))}remove(){this.errorCb=null}},dh=Cu.postMapLoadEvent.bind(Cu),Eh=new class extends uh{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(t){let e=this.mapInstanceIdMap.get(t);return e||(e=Ir(),this.mapInstanceIdMap.set(t,e)),e}getEventId(t){const e=this.eventIdPerMapInstanceMap.get(t)||0;return this.eventIdPerMapInstanceMap.set(t,e+1),e}postStyleLoadEvent(t,e){const{map:n,style:s,importedStyles:u}=e;if(!ft.EVENTS_URL||!t&&!ft.ACCESS_TOKEN)return;const m=this.getMapInstanceId(n),g={mapInstanceId:m,eventId:this.getEventId(m),style:s};u.length&&(g.importedStyles=u),this.queueRequest({timestamp:Date.now(),payload:g},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:e,payload:n}=this.queue.shift();this.postEvent(e,n,()=>{},t)}},_d=Eh.postStyleLoadEvent.bind(Eh),pu=new class extends uh{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){ft.EVENTS_URL&&(t||ft.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:e,performanceData:n}=this.queue.shift(),s=function(u){const m=performance.getEntriesByType("resource"),g=performance.getEntriesByType("mark"),E=function(le){const de={};if(le)for(const be in le)if("other"!==be)for(const xe of le[be]){const je=`${be}ResolveRangeMin`,gt=`${be}ResolveRangeMax`,_t=`${be}RequestCount`,bt=`${be}RequestCachedCount`;de[je]=Math.min(de[je]||1/0,xe.startTime),de[gt]=Math.max(de[gt]||-1/0,xe.responseEnd);const nn=Yt=>{void 0===de[Yt]&&(de[Yt]=0),++de[Yt]};void 0!==xe.transferSize&&0===xe.transferSize&&nn(bt),nn(_t)}return de}(function(le,de){const be={};if(le)for(const xe of le){const je=de(xe);void 0===be[je]&&(be[je]=[]),be[je].push(xe)}return be}(m,fn)),T=window.devicePixelRatio,z=navigator.connection||navigator.mozConnection||navigator.webkitConnection,$=z?z.effectiveType:void 0,W={counters:[],metadata:[],attributes:[]},Q=(le,de,be)=>{null!=be&&le.push({name:de,value:be.toString()})};for(const le in E)Q(W.counters,le,E[le]);if(u.interactionRange[0]!==1/0&&u.interactionRange[1]!==-1/0&&(Q(W.counters,"interactionRangeMin",u.interactionRange[0]),Q(W.counters,"interactionRangeMax",u.interactionRange[1])),g)for(const le of Object.keys(Ut)){const de=Ut[le],be=g.find(xe=>xe.name===de);be&&Q(W.counters,de,be.startTime)}return Q(W.counters,"visibilityHidden",u.visibilityHidden),Q(W.attributes,"style",function(le){if(le)for(const de of le){const be=de.name.split("?")[0];if(At(be)){const xe=be.split("/").slice(-2);if(2===xe.length)return`mapbox://styles/${xe[0]}/${xe[1]}`}}}(m)),Q(W.attributes,"terrainEnabled",u.terrainEnabled?"true":"false"),Q(W.attributes,"fogEnabled",u.fogEnabled?"true":"false"),Q(W.attributes,"projection",u.projection),Q(W.attributes,"zoom",u.zoom),Q(W.metadata,"devicePixelRatio",T),Q(W.metadata,"connectionEffectiveType",$),Q(W.metadata,"navigatorUserAgent",navigator.userAgent),Q(W.metadata,"screenWidth",window.screen.width),Q(W.metadata,"screenHeight",window.screen.height),Q(W.metadata,"windowWidth",window.innerWidth),Q(W.metadata,"windowHeight",window.innerHeight),Q(W.metadata,"mapWidth",u.width/T),Q(W.metadata,"mapHeight",u.height/T),Q(W.metadata,"webglRenderer",u.renderer),Q(W.metadata,"webglVendor",u.vendor),Q(W.metadata,"sdkVersion",We),Q(W.metadata,"sdkIdentifier","mapbox-gl-js"),W}(n);for(const u of s.metadata);for(const u of s.counters);for(const u of s.attributes);this.postEvent(e,s,()=>{},t)}},dc=pu.postPerformanceEvent.bind(pu),Rc=new class extends uh{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,s){if(!ft.API_URL||!ft.SESSION_PATH)return;const u=us(ft.API_URL+ft.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${s||ft.ACCESS_TOKEN||""}`);const m={url:ec(u),headers:{"Content-Type":"text/plain"}};var E;this.pendingRequest=(E=g=>{this.pendingRequest=null,n(g),this.saveEventData(),this.processRequests(s)},Uo(mi(m,{method:"GET"}),E))}getSessionAPI(t,e,n,s){this.skuToken=e,this.errorCb=s,ft.SESSION_PATH&&ft.API_URL&&(n||ft.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(ch)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,s=>{s?this.errorCb(s):e&&(this.success[e]=!0)},t)}remove(){this.errorCb=null}},Wd=Rc.getSessionAPI.bind(Rc),ks=new Set;var ga={exports:{}},x0=function(t,e){var n,s,u,m,g,E,T,z;for(s=t.length-(n=3&t.length),u=e,g=3432918353,E=461845907,z=0;z<s;)T=255&t.charCodeAt(z)|(255&t.charCodeAt(++z))<<8|(255&t.charCodeAt(++z))<<16|(255&t.charCodeAt(++z))<<24,++z,u=27492+(65535&(m=5*(65535&(u=(u^=T=(65535&(T=(T=(65535&T)*g+(((T>>>16)*g&65535)<<16)&4294967295)<<15|T>>>17))*E+(((T>>>16)*E&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(T=0,n){case 3:T^=(255&t.charCodeAt(z+2))<<16;case 2:T^=(255&t.charCodeAt(z+1))<<8;case 1:u^=T=(65535&(T=(T=(65535&(T^=255&t.charCodeAt(z)))*g+(((T>>>16)*g&65535)<<16)&4294967295)<<15|T>>>17))*E+(((T>>>16)*E&65535)<<16)&4294967295}return u^=t.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0},$0=function(t,e){for(var n,s=t.length,u=e^s,m=0;s>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(m)|(255&t.charCodeAt(++m))<<8|(255&t.charCodeAt(++m))<<16|(255&t.charCodeAt(++m))<<24))+((1540483477*(n>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),s-=4,++m;switch(s){case 3:u^=(255&t.charCodeAt(m+2))<<16;case 2:u^=(255&t.charCodeAt(m+1))<<8;case 1:u=1540483477*(65535&(u^=255&t.charCodeAt(m)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0};ga.exports=x0,ga.exports.murmur3=x0,ga.exports.murmur2=$0;var ll=xn(ga.exports);class yc{constructor(e,...n){mi(this,n[0]||{}),this.type=e}}class Ls extends yc{constructor(e,n={}){super("error",mi({error:e},n))}}function j0(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function I0(t,e,n){if(n&&n[t]){const s=n[t].indexOf(e);-1!==s&&n[t].splice(s,1)}}class Bl{on(e,n){return this._listeners=this._listeners||{},j0(e,n,this._listeners),this}off(e,n){return I0(e,n,this._listeners),I0(e,n,this._oneTimeListeners),this}once(e,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},j0(e,n,this._oneTimeListeners),this):new Promise(s=>this.once(e,s))}fire(e,n){const s="string"==typeof e?new yc(e,n):e,u=s.type;if(this.listens(u)){s.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const T of m)T.call(this,s);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const T of g)I0(u,T,this._oneTimeListeners),T.call(this,s);const E=this._eventedParent;E&&(mi(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),E.fire(s))}else s instanceof Ls&&console.error(s.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,n){return this._eventedParent=e,this._eventedParentData=n,this}}l.F=void 0;var ku={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Hh(t){return(t=Math.round(t))<0?0:t>255?255:t}function Pd(t){return Hh("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function bc(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function qd(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{l.F={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in ku)return ku[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var s=n.indexOf("("),u=n.indexOf(")");if(-1!==s&&u+1===n.length){var m=n.substr(0,s),g=n.substr(s+1,u-(s+1)).split(","),E=1;switch(m){case"rgba":if(4!==g.length)return null;E=bc(g.pop());case"rgb":return 3!==g.length?null:[Pd(g[0]),Pd(g[1]),Pd(g[2]),E];case"hsla":if(4!==g.length)return null;E=bc(g.pop());case"hsl":if(3!==g.length)return null;var T=(parseFloat(g[0])%360+360)%360/360,z=bc(g[1]),$=bc(g[2]),W=$<=.5?$*(z+1):$+z-$*z,Q=2*$-W;return[Hh(255*qd(Q,W,T+1/3)),Hh(255*qd(Q,W,T)),Hh(255*qd(Q,W,T-1/3)),E];default:return null}}return null}}catch{}class Xs{constructor(e,n,s,u=1){this.r=e,this.g=n,this.b=s,this.a=u}static parse(e){if(!e)return;if(e instanceof Xs)return e;if("string"!=typeof e)return;const n=l.F(e);return n?new Xs(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}toString(){const[e,n,s,u]=0===this.a?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(s)},${u})`}toRenderColor(e){const{r:n,g:s,b:u,a:m}=this;return new E0(e,n,s,u,m)}}class E0{constructor(e,n,s,u,m){if(e){const g=e.image.height,E=g*g;n=0===m?0:n/m*(g-1),s=0===m?0:s/m*(g-1),u=0===m?0:u/m*(g-1);const T=Math.floor(n),z=Math.floor(s),$=Math.floor(u),W=Math.ceil(n),Q=Math.ceil(s),le=Math.ceil(u),de=n-T,be=s-z,xe=u-$,je=e.image.data,gt=4*(T+z*E+$*g),_t=4*(T+z*E+le*g),bt=4*(T+Q*E+$*g),nn=4*(T+Q*E+le*g),Yt=4*(W+z*E+$*g),Sn=4*(W+z*E+le*g),Rn=4*(W+Q*E+$*g),ai=4*(W+Q*E+le*g);if(gt<0||ai>=je.length)throw new Error("out of range");this.r=Rr(Rr(Rr(je[gt],je[_t],xe),Rr(je[bt],je[nn],xe),be),Rr(Rr(je[Yt],je[Sn],xe),Rr(je[Rn],je[ai],xe),be),de)/255*m,this.g=Rr(Rr(Rr(je[gt+1],je[_t+1],xe),Rr(je[bt+1],je[nn+1],xe),be),Rr(Rr(je[Yt+1],je[Sn+1],xe),Rr(je[Rn+1],je[ai+1],xe),be),de)/255*m,this.b=Rr(Rr(Rr(je[gt+2],je[_t+2],xe),Rr(je[bt+2],je[nn+2],xe),be),Rr(Rr(je[Yt+2],je[Sn+2],xe),Rr(je[Rn+2],je[ai+2],xe),be),de)/255*m,this.a=m}else this.r=n,this.g=s,this.b=u,this.a=m}toArray(){const{r:e,g:n,b:s,a:u}=this;return 0===u?[0,0,0,0]:[255*e/u,255*n/u,255*s/u,u]}toArray01(){const{r:e,g:n,b:s,a:u}=this;return 0===u?[0,0,0,0]:[e/u,n/u,s/u,u]}toArray01Scaled(e){const{r:n,g:s,b:u,a:m}=this;return 0===m?[0,0,0]:[n/m*e,s/m*e,u/m*e]}toArray01PremultipliedAlpha(){const{r:e,g:n,b:s,a:u}=this;return[e,n,s,u]}toArray01Linear(){const{r:e,g:n,b:s,a:u}=this;return 0===u?[0,0,0,0]:[Math.pow(e/u,2.2),Math.pow(n/u,2.2),Math.pow(s/u,2.2),u]}}function Rr(t,e,n){return t*(1-n)+e*n}function yd(t,e,n){return t.map((s,u)=>Rr(s,e[u],n))}Xs.black=new Xs(0,0,0,1),Xs.white=new Xs(1,1,1,1),Xs.transparent=new Xs(0,0,0,0),Xs.red=new Xs(1,0,0,1),Xs.blue=new Xs(0,0,1,1);var Rd=Object.freeze({__proto__:null,array:yd,color:function(t,e,n){return new Xs(Rr(t.r,e.r,n),Rr(t.g,e.g,n),Rr(t.b,e.b,n),Rr(t.a,e.a,n))},number:Rr});function cl(t,...e){for(const n of e)for(const s in n)t[s]=n[s];return t}class fu extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class Su{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[s,u]of n)this.bindings[s]=u}concat(e){return new Su(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const fe={kind:"null"},Ce={kind:"number"},Nt={kind:"string"},Ie={kind:"boolean"},Gt={kind:"color"},Dn={kind:"object"},pi={kind:"value"},ir={kind:"collator"},fs={kind:"formatted"},na={kind:"resolvedImage"};function Ws(t,e){return{kind:"array",itemType:t,N:e}}function $r(t){if("array"===t.kind){const e=$r(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const Fa=[fe,Ce,Nt,Ie,Gt,fs,Dn,Ws(pi),na];function la(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!la(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const n of Fa)if(!la(n,e))return null}return`Expected ${$r(t)} but found ${$r(e)} instead.`}function Wl(t,e){return e.some(n=>n.kind===t.kind)}function Tl(t,e){return e.some(n=>"null"===n?null===t:"array"===n?Array.isArray(t):"object"===n?t&&!Array.isArray(t)&&"object"==typeof t:n===typeof t)}class ul{constructor(e,n,s){this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ma{constructor(e,n,s,u,m){this.text=e.normalize?e.normalize():e,this.image=n,this.scale=s,this.fontStack=u,this.textColor=m}}class Ta{constructor(e){this.sections=e}static fromString(e){return new Ta([new ma(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.namePrimary.length)}static factory(e){return e instanceof Ta?e:Ta.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const n of this.sections){if(n.image){e.push(["image",n.image.namePrimary]);continue}e.push(n.text);const s={};n.fontStack&&(s["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(s["font-scale"]=n.scale),n.textColor&&(s["text-color"]=["rgba"].concat(n.textColor.toRenderColor(null).toArray())),e.push(s)}return e}}class hc{constructor(e){this.namePrimary=e.namePrimary,e.nameSecondary&&(this.nameSecondary=e.nameSecondary),this.available=e.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(e,n){return e?new hc({namePrimary:e,nameSecondary:n,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function Ka(t,e,n,s){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===s||"number"==typeof s&&s>=0&&s<=1?null:`Invalid rgba value [${[t,e,n,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof s?[t,e,n,s]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wc(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof Xs||t instanceof ul||t instanceof Ta||t instanceof hc)return!0;if(Array.isArray(t)){for(const e of t)if(!wc(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!wc(t[e]))return!1;return!0}return!1}function Ya(t){if(null===t)return fe;if("string"==typeof t)return Nt;if("boolean"==typeof t)return Ie;if("number"==typeof t)return Ce;if(t instanceof Xs)return Gt;if(t instanceof ul)return ir;if(t instanceof Ta)return fs;if(t instanceof hc)return na;if(Array.isArray(t)){const e=t.length;let n;for(const s of t){const u=Ya(s);if(n){if(n===u)continue;n=pi;break}n=u}return Ws(n||pi,e)}return Dn}function ad(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Xs||t instanceof Ta||t instanceof hc?t.toString():JSON.stringify(t)}class Xd{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(2!==e.length)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!wc(e[1]))return n.error("invalid value");const s=e[1];let u=Ya(s);const m=n.expectedType;return"array"!==u.kind||0!==u.N||!m||"array"!==m.kind||"number"==typeof m.N&&0!==m.N||(u=m),new Xd(u,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Xs?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Ta?this.value.serialize():this.value}}class Nl{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const tc={string:Nt,number:Ce,boolean:Ie,object:Dn};class ld{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let s,u=1;const m=e[0];if("array"===m){let E,T;if(e.length>2){const z=e[1];if("string"!=typeof z||!(z in tc)||"object"===z)return n.error('The item type argument of "array" must be one of string, number, boolean',1);E=tc[z],u++}else E=pi;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);T=e[2],u++}s=Ws(E,T)}else s=tc[m];const g=[];for(;u<e.length;u++){const E=n.parse(e[u],u,pi);if(!E)return null;g.push(E)}return new ld(s,g)}evaluate(e){for(let n=0;n<this.args.length;n++){const s=this.args[n].evaluate(e);if(!la(this.type,Ya(s)))return s;if(n===this.args.length-1)throw new Nl(`Expected value to be of type ${$r(this.type)}, but found ${$r(Ya(s))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,n=[e.kind];if("array"===e.kind){const s=e.itemType;if("string"===s.kind||"number"===s.kind||"boolean"===s.kind){n.push(s.kind);const u=e.N;("number"==typeof u||this.args.length>1)&&n.push(u)}}return n.concat(this.args.map(s=>s.serialize()))}}class bd{constructor(e){this.type=fs,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const s=e[1];if(!Array.isArray(s)&&"object"==typeof s)return n.error("First argument must be an image or text section.");const u=[];let m=!1;for(let g=1;g<=e.length-1;++g){const E=e[g];if(m&&"object"==typeof E&&!Array.isArray(E)){m=!1;let T=null;if(E["font-scale"]&&(T=n.parse(E["font-scale"],1,Ce),!T))return null;let z=null;if(E["text-font"]&&(z=n.parse(E["text-font"],1,Ws(Nt)),!z))return null;let $=null;if(E["text-color"]&&($=n.parse(E["text-color"],1,Gt),!$))return null;const W=u[u.length-1];W.scale=T,W.font=z,W.textColor=$}else{const T=n.parse(e[g],1,pi);if(!T)return null;const z=T.type.kind;if("string"!==z&&"value"!==z&&"null"!==z&&"resolvedImage"!==z)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,u.push({content:T,scale:null,font:null,textColor:null})}}return new bd(u)}evaluate(e){return new Ta(this.sections.map(n=>{const s=n.content.evaluate(e);return Ya(s)===na?new ma("",s,null,null,null):new ma(ad(s),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)}))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const n of this.sections){e.push(n.content.serialize());const s={};n.scale&&(s["font-scale"]=n.scale.serialize()),n.font&&(s["text-font"]=n.font.serialize()),n.textColor&&(s["text-color"]=n.textColor.serialize()),e.push(s)}return e}}class Fl{constructor(e,n){this.type=na,this.inputPrimary=e,this.inputSecondary=n}static parse(e,n){if(e.length<2)return n.error("Expected two or more arguments.");const s=n.parse(e[1],1,Nt);if(!s)return n.error("No image name provided.");if(2===e.length)return new Fl(s);const u=n.parse(e[2],1,Nt);return u?new Fl(s,u):n.error("Secondary image variant is not a string.")}evaluate(e){const n=hc.fromString(this.inputPrimary.evaluate(e),this.inputSecondary?this.inputSecondary.evaluate(e):void 0);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(n.namePrimary)>-1,n.nameSecondary&&n.available&&e.availableImages&&(n.available=e.availableImages.indexOf(n.nameSecondary)>-1)),n}eachChild(e){e(this.inputPrimary),this.inputSecondary&&e(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function cd(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}const zc={"to-boolean":Ie,"to-color":Gt,"to-number":Ce,"to-string":Nt};class ia{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const s=e[0],u=[];let m=fe;if("to-array"===s){if(!Array.isArray(e[1]))return null;const g=e[1].length;if(n.expectedType){if("array"!==n.expectedType.kind)return n.error(`Expected ${n.expectedType.kind} but found array.`);m=Ws(n.expectedType.itemType,g)}else{if(!(g>0&&wc(e[1][0])))return null;m=Ws(Ya(e[1][0]),g)}for(let E=0;E<g;E++){const T=e[1][E];let z;if("array"===cd(T))z=n.parse(T,void 0,m.itemType);else{const $=cd(T);if($!==m.itemType.kind)return n.error(`Expected ${m.itemType.kind} but found ${$}.`);z=n.registry.literal.parse(["literal",void 0===T?null:T],n)}if(!z)return null;u.push(z)}}else{if(("to-boolean"===s||"to-string"===s)&&2!==e.length)return n.error("Expected one argument.");m=zc[s];for(let g=1;g<e.length;g++){const E=n.parse(e[g],g,pi);if(!E)return null;u.push(E)}}return new ia(m,u)}evaluate(e){if("boolean"===this.type.kind)return!!this.args[0].evaluate(e);if("color"===this.type.kind){let n,s;for(const u of this.args){if(n=u.evaluate(e),s=null,n instanceof Xs)return n;if("string"==typeof n){const m=e.parseColor(n);if(m)return m}else if(Array.isArray(n)&&(s=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:Ka(n[0],n[1],n[2],n[3]),!s))return new Xs(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Nl(s||`Could not parse color from value '${"string"==typeof n?n:String(JSON.stringify(n))}'`)}if("number"===this.type.kind){let n=null;for(const s of this.args){if(n=s.evaluate(e),null===n)return 0;const u=Number(n);if(!isNaN(u))return u}throw new Nl(`Could not convert ${JSON.stringify(n)} to number.`)}return"formatted"===this.type.kind?Ta.fromString(ad(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?hc.fromString(ad(this.args[0].evaluate(e))):"array"===this.type.kind?this.args.map(n=>n.evaluate(e)):ad(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new bd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Fl(this.args[0]).serialize();const e="array"===this.type.kind?[]:[`to-${this.type.kind}`];return this.eachChild(n=>{e.push(n.serialize())}),e}}const Zc=["Unknown","Point","LineString","Polygon"];class Vl{constructor(e,n){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=e,this.options=n}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Zc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(e){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:s,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*n-e[0])+this.featureDistanceData.bearing[1]*(u*n-e[1])}return 0}parseColor(e){let n=this._parseColorCache[e];return n||(n=this._parseColorCache[e]=Xs.parse(e)),n}getConfig(e){return this.options?this.options.get(e):null}}class Oc{constructor(e,n,s,u,m){this.name=e,this.type=n,this._evaluate=s,this.args=u,this._overloadIndex=m}evaluate(e){if(!this._evaluate){const n=Oc.definitions[this.name];this._evaluate=Array.isArray(n)?n[2]:n.overloads[this._overloadIndex][1]}return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,n){const s=e[0],u=Oc.definitions[s];if(!u)return n.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(u)?u[0]:u.type,g=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,E=[];let T=null,z=-1;for(const[$,W]of g){if(Array.isArray($)&&$.length!==e.length-1)continue;E.push($),z++,T=new jc(n.registry,n.path,null,n.scope,void 0,n._scope,n.options);const Q=[];let le=!1;for(let de=1;de<e.length;de++){const be=e[de],xe=Array.isArray($)?$[de-1]:$.type,je=T.parse(be,1+Q.length,xe);if(!je){le=!0;break}Q.push(je)}if(!le)if(Array.isArray($)&&$.length!==Q.length)T.error(`Expected ${$.length} arguments, but found ${Q.length} instead.`);else{for(let de=0;de<Q.length;de++){const be=Array.isArray($)?$[de]:$.type,xe=Q[de];T.concat(de+1).checkSubtype(be,xe.type)}if(0===T.errors.length)return new Oc(s,m,W,Q,z)}}if(1===E.length)n.errors.push(...T.errors);else{const $=(E.length?E:g.map(([Q])=>Q)).map(Kd).join(" | "),W=[];for(let Q=1;Q<e.length;Q++){const le=n.parse(e[Q],1+W.length);if(!le)return null;W.push($r(le.type))}n.error(`Expected arguments of type ${$}, but found (${W.join(", ")}) instead.`)}return null}static register(e,n){Oc.definitions=n;for(const s in n)e[s]=Oc}}function Kd(t){return Array.isArray(t)?`(${t.map($r).join(", ")})`:`(${$r(t.type)}...)`}class Ch{constructor(e,n,s){this.type=ir,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(2!==e.length)return n.error("Expected one argument.");const s=e[1];if("object"!=typeof s||Array.isArray(s))return n.error("Collator options argument must be an object.");const u=n.parse(void 0!==s["case-sensitive"]&&s["case-sensitive"],1,Ie);if(!u)return null;const m=n.parse(void 0!==s["diacritic-sensitive"]&&s["diacritic-sensitive"],1,Ie);if(!m)return null;let g=null;return s.locale&&(g=n.parse(s.locale,1,Nt),!g)?null:new Ch(u,m,g)}evaluate(e){return new ul(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}function Gh(t,e,n=0,s=t.length-1,u=l1){for(;s>n;){if(s-n>600){const T=s-n+1,z=e-n+1,$=Math.log(T),W=.5*Math.exp(2*$/3),Q=.5*Math.sqrt($*W*(T-W)/T)*(z-T/2<0?-1:1);Gh(t,e,Math.max(n,Math.floor(e-z*W/T+Q)),Math.min(s,Math.floor(e+(T-z)*W/T+Q)),u)}const m=t[e];let g=n,E=s;for(dl(t,n,e),u(t[s],m)>0&&dl(t,n,s);g<E;){for(dl(t,g,E),g++,E--;u(t[g],m)<0;)g++;for(;u(t[E],m)>0;)E--}0===u(t[n],m)?dl(t,n,E):(E++,dl(t,E,s)),E<=e&&(n=E+1),e<=E&&(s=E-1)}}function dl(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}function l1(t,e){return t<e?-1:t>e?1:0}function ql(t){let e=0;for(let n,s,u=0,m=t.length,g=m-1;u<m;g=u++)n=t[u],s=t[g],e+=(s.x-n.x)*(n.y+s.y);return e}function wd(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function xd(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function C0(t,e,n){const s=t[0]-e[0],u=t[1]-e[1],m=t[0]-n[0],g=t[1]-n[1];return s*g-m*u==0&&s*m<=0&&u*g<=0}function $s(t,e,n=!1){let s=!1;for(let E=0,T=e.length;E<T;E++){const z=e[E];for(let $=0,W=z.length,Q=W-1;$<W;Q=$++){const le=z[Q],de=z[$];if(C0(t,le,de))return n;(m=le)[1]>(u=t)[1]!=(g=de)[1]>u[1]&&u[0]<(g[0]-m[0])*(u[1]-m[1])/(g[1]-m[1])+m[0]&&(s=!s)}}var u,m,g;return s}function Tu(t,e,n,s){const u=s[0]-n[0],m=s[1]-n[1],g=(t[0]-n[0])*m-u*(t[1]-n[1]),E=(e[0]-n[0])*m-u*(e[1]-n[1]);return g>0&&E<0||g<0&&E>0}function hh(t,e,n,s){return(u=[s[0]-n[0],s[1]-n[1]])[0]*(m=[e[0]-t[0],e[1]-t[1]])[1]-u[1]*m[0]!=0&&!(!Tu(t,e,n,s)||!Tu(n,s,t,e));var u,m}const zd=8192;function wp(t,e){const n=(180+t[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(n*u*zd),Math.round(s*u*zd)]}function Wh(t,e){for(let n=0;n<e.length;n++)if($s(t,e[n]))return!0;return!1}function mu(t,e,n){for(const s of n)for(let u=0,m=s.length,g=m-1;u<m;g=u++)if(hh(t,e,s[g],s[u]))return!0;return!1}function gu(t,e){for(let n=0;n<t.length;++n)if(!$s(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(mu(t[n],t[n+1],e))return!1;return!0}function U0(t,e){for(let n=0;n<e.length;n++)if(gu(t,e[n]))return!0;return!1}function k0(t,e,n){const s=[];for(let u=0;u<t.length;u++){const m=[];for(let g=0;g<t[u].length;g++){const E=wp(t[u][g],n);wd(e,E),m.push(E)}s.push(m)}return s}function nc(t,e,n){const s=[];for(let u=0;u<t.length;u++){const m=k0(t[u],e,n);s.push(m)}return s}function qh(t,e,n,s){if(t[0]<n[0]||t[0]>n[2]){const u=.5*s;let m=t[0]-n[0]>u?-s:n[0]-t[0]>u?s:0;0===m&&(m=t[0]-n[2]>u?-s:n[2]-t[0]>u?s:0),t[0]+=m}wd(e,t)}function H0(t,e,n,s){const u=Math.pow(2,s.z)*zd,m=[s.x*zd,s.y*zd],g=[];if(!t)return g;for(const E of t)for(const T of E){const z=[T.x+m[0],T.y+m[1]];qh(z,e,n,u),g.push(z)}return g}function S0(t,e,n,s){const u=Math.pow(2,s.z)*zd,m=[s.x*zd,s.y*zd],g=[];if(!t)return g;for(const T of t){const z=[];for(const $ of T){const W=[$.x+m[0],$.y+m[1]];wd(e,W),z.push(W)}g.push(z)}if(e[2]-e[0]<=u/2){(E=e)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const T of g)for(const z of T)qh(z,e,n,u)}var E;return g}class ud{constructor(e,n){this.type=Ie,this.geojson=e,this.geometries=n}static parse(e,n){if(2!==e.length)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(wc(e[1])){const s=e[1];if("FeatureCollection"===s.type)for(let u=0;u<s.features.length;++u){const m=s.features[u].geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new ud(s,s.features[u].geometry)}else if("Feature"===s.type){const u=s.geometry.type;if("Polygon"===u||"MultiPolygon"===u)return new ud(s,s.geometry)}else if("Polygon"===s.type||"MultiPolygon"===s.type)return new ud(s,s)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(n,s){const u=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],g=n.canonicalID();if(!g)return!1;if("Polygon"===s.type){const E=k0(s.coordinates,m,g),T=H0(n.geometry(),u,m,g);if(!xd(u,m))return!1;for(const z of T)if(!$s(z,E))return!1}if("MultiPolygon"===s.type){const E=nc(s.coordinates,m,g),T=H0(n.geometry(),u,m,g);if(!xd(u,m))return!1;for(const z of T)if(!Wh(z,E))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(n,s){const u=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],g=n.canonicalID();if(!g)return!1;if("Polygon"===s.type){const E=k0(s.coordinates,m,g),T=S0(n.geometry(),u,m,g);if(!xd(u,m))return!1;for(const z of T)if(!gu(z,E))return!1}if("MultiPolygon"===s.type){const E=nc(s.coordinates,m,g),T=S0(n.geometry(),u,m,g);if(!xd(u,m))return!1;for(const z of T)if(!U0(z,E))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Hu={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},T0=1/298.257223563,kh=T0*(2-T0),M0=Math.PI/180;class Od{static fromTile(e,n,s){const u=Math.PI*(1-2*(e+.5)/Math.pow(2,n)),m=Math.atan(.5*(Math.exp(u)-Math.exp(-u)))/M0;return new Od(m,s)}static get units(){return Hu}constructor(e,n){if(void 0===e)throw new Error("No latitude given.");if(n&&!Hu[n])throw new Error(`Unknown unit ${n}. Use one of: ${Object.keys(Hu).join(", ")}`);const s=6378.137*M0*(n?Hu[n]:1),u=Math.cos(e*M0),m=1/(1-kh*(1-u*u)),g=Math.sqrt(m);this.kx=s*g*u,this.ky=s*g*m*(1-kh)}distance(e,n){const s=$c(e[0]-n[0])*this.kx,u=(e[1]-n[1])*this.ky;return Math.sqrt(s*s+u*u)}bearing(e,n){const s=$c(n[0]-e[0])*this.kx;return Math.atan2(s,(n[1]-e[1])*this.ky)/M0}destination(e,n,s){const u=s*M0;return this.offset(e,Math.sin(u)*n,Math.cos(u)*n)}offset(e,n,s){return[e[0]+n/this.kx,e[1]+s/this.ky]}lineDistance(e){let n=0;for(let s=0;s<e.length-1;s++)n+=this.distance(e[s],e[s+1]);return n}area(e){let n=0;for(let s=0;s<e.length;s++){const u=e[s];for(let m=0,g=u.length,E=g-1;m<g;E=m++)n+=$c(u[m][0]-u[E][0])*(u[m][1]+u[E][1])*(s?-1:1)}return Math.abs(n)/2*this.kx*this.ky}along(e,n){let s=0;if(n<=0)return e[0];for(let u=0;u<e.length-1;u++){const m=e[u],g=e[u+1],E=this.distance(m,g);if(s+=E,s>n)return Id(m,g,(n-(s-E))/E)}return e[e.length-1]}pointToSegmentDistance(e,n,s){let[u,m]=n,g=$c(s[0]-u)*this.kx,E=(s[1]-m)*this.ky;if(0!==g||0!==E){const T=($c(e[0]-u)*this.kx*g+(e[1]-m)*this.ky*E)/(g*g+E*E);T>1?(u=s[0],m=s[1]):T>0&&(u+=g/this.kx*T,m+=E/this.ky*T)}return g=$c(e[0]-u)*this.kx,E=(e[1]-m)*this.ky,Math.sqrt(g*g+E*E)}pointOnLine(e,n){let s=1/0,u=e[0][0],m=e[0][1],g=0,E=0;for(let T=0;T<e.length-1;T++){let z=e[T][0],$=e[T][1],W=$c(e[T+1][0]-z)*this.kx,Q=(e[T+1][1]-$)*this.ky,le=0;0===W&&0===Q||(le=($c(n[0]-z)*this.kx*W+(n[1]-$)*this.ky*Q)/(W*W+Q*Q),le>1?(z=e[T+1][0],$=e[T+1][1]):le>0&&(z+=W/this.kx*le,$+=Q/this.ky*le)),W=$c(n[0]-z)*this.kx,Q=(n[1]-$)*this.ky;const de=W*W+Q*Q;de<s&&(s=de,u=z,m=$,g=T,E=le)}return{point:[u,m],index:g,t:Math.max(0,Math.min(1,E))}}lineSlice(e,n,s){let u=this.pointOnLine(s,e),m=this.pointOnLine(s,n);if(u.index>m.index||u.index===m.index&&u.t>m.t){const z=u;u=m,m=z}const g=[u.point],E=u.index+1,T=m.index;!ph(s[E],g[0])&&E<=T&&g.push(s[E]);for(let z=E+1;z<=T;z++)g.push(s[z]);return ph(s[T],m.point)||g.push(m.point),g}lineSliceAlong(e,n,s){let u=0;const m=[];for(let g=0;g<s.length-1;g++){const E=s[g],T=s[g+1],z=this.distance(E,T);if(u+=z,u>e&&0===m.length&&m.push(Id(E,T,(e-(u-z))/z)),u>=n)return m.push(Id(E,T,(n-(u-z))/z)),m;u>e&&m.push(T)}return m}bufferPoint(e,n){const s=n/this.ky,u=n/this.kx;return[e[0]-u,e[1]-s,e[0]+u,e[1]+s]}bufferBBox(e,n){const s=n/this.ky,u=n/this.kx;return[e[0]-u,e[1]-s,e[2]+u,e[3]+s]}insideBBox(e,n){return $c(e[0]-n[0])>=0&&$c(e[0]-n[2])<=0&&e[1]>=n[1]&&e[1]<=n[3]}}function ph(t,e){return t[0]===e[0]&&t[1]===e[1]}function Id(t,e,n){const s=$c(e[0]-t[0]);return[t[0]+s*n,t[1]+(e[1]-t[1])*n]}function $c(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}class Xh{constructor(e=[],n=((s,u)=>s<u?-1:s>u?1:0)){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:s}=this,u=n[e];for(;e>0;){const m=e-1>>1,g=n[m];if(s(u,g)>=0)break;n[e]=g,e=m}n[e]=u}_down(e){const{data:n,compare:s}=this,u=this.length>>1,m=n[e];for(;e<u;){let g=1+(e<<1);const E=g+1;if(E<this.length&&s(n[E],n[g])<0&&(g=E),s(n[g],m)>=0)break;n[e]=n[g],e=g}n[e]=m}}var Z=8192;function me(t,e){return e.dist-t.dist}const ke=100,ge=50;function Be(t){const e=[1/0,1/0,-1/0,-1/0];if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Mt(t){return t[1]-t[0]+1}function Ht(t,e){const n=t[1]>=t[0]&&t[1]<e;return n||console.warn("Distance Expression: Index is out of range"),n}function Ci(t,e){if(t[0]>t[1])return[null,null];const n=Mt(t);if(e){if(2===n)return[t,null];const s=Math.floor(n/2);return[[t[0],t[0]+s],[t[0]+s,t[1]]]}{if(1===n)return[t,null];const s=Math.floor(n/2)-1;return[[t[0],t[0]+s],[t[0]+s+1,t[1]]]}}function _o(t,e){const n=[1/0,1/0,-1/0,-1/0];if(!Ht(e,t.length))return n;for(let s=e[0];s<=e[1];++s)wd(n,t[s]);return n}function Ti(t){const e=[1/0,1/0,-1/0,-1/0];for(let n=0;n<t.length;++n)for(let s=0;s<t[n].length;++s)wd(e,t[n][s]);return e}function or(t,e,n){if(Be(t)||Be(e))return NaN;let s=0,u=0;return t[2]<e[0]&&(s=e[0]-t[2]),t[0]>e[2]&&(s=t[0]-e[2]),t[1]>e[3]&&(u=t[1]-e[3]),t[3]<e[1]&&(u=e[1]-t[3]),n.distance([0,0],[s,u])}function Us(t){return 360*t-180}function Va(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Qs(t,e){const n=Math.pow(2,e.z),s=(t.y/Z+e.y)/n;return[Us((t.x/Z+e.x)/n),Va(s)]}function Ml(t,e){const n=[];for(let s=0;s<t.length;++s)n.push(Qs(t[s],e));return n}function Qc(t,e,n){const s=n.pointOnLine(e,t).point;return n.distance(t,s)}function pc(t,e,n,s,u){const m=n.slice(s[0],s[1]+1);let g=1/0;for(let E=e[0];E<=e[1];++E)if(0===(g=Math.min(g,Qc(t[E],m,u))))return 0;return g}function Ld(t,e,n,s,u){const m=Math.min(u.pointToSegmentDistance(t,n,s),u.pointToSegmentDistance(e,n,s)),g=Math.min(u.pointToSegmentDistance(n,t,e),u.pointToSegmentDistance(s,t,e));return Math.min(m,g)}function $l(t,e,n,s,u){if(!Ht(e,t.length)||!Ht(s,n.length))return NaN;let m=1/0;for(let g=e[0];g<e[1];++g)for(let E=s[0];E<s[1];++E){if(hh(t[g],t[g+1],n[E],n[E+1]))return 0;m=Math.min(m,Ld(t[g],t[g+1],n[E],n[E+1],u))}return m}function A0(t,e,n,s,u){if(!Ht(e,t.length)||!Ht(s,n.length))return NaN;let m=1/0;for(let g=e[0];g<=e[1];++g)for(let E=s[0];E<=s[1];++E)if(0===(m=Math.min(m,u.distance(t[g],n[E]))))return m;return m}function Jc(t,e,n){if($s(t,e,!0))return 0;let s=1/0;for(const u of e){const m=u.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(u[0]!==u[m-1]&&0===(s=Math.min(s,n.pointToSegmentDistance(t,u[m-1],u[0])))||0===(s=Math.min(s,Qc(t,u,n))))return s}return s}function Mu(t,e,n,s){if(!Ht(e,t.length))return NaN;for(let m=e[0];m<=e[1];++m)if($s(t[m],n,!0))return 0;let u=1/0;for(let m=e[0];m<e[1];++m)for(const g of n)for(let E=0,T=g.length,z=T-1;E<T;z=E++){if(hh(t[m],t[m+1],g[z],g[E]))return 0;u=Math.min(u,Ld(t[m],t[m+1],g[z],g[E],s))}return u}function S1(t,e){for(const n of t)for(let s=0;s<=n.length-1;++s)if($s(n[s],e,!0))return!0;return!1}function Kh(t,e,n,s=1/0){const u=Ti(t),m=Ti(e);if(s!==1/0&&or(u,m,n)>=s)return s;if(xd(u,m)){if(S1(t,e))return 0}else if(S1(e,t))return 0;let g=s;for(const E of t)for(let T=0,z=E.length,$=z-1;T<z;$=T++)for(const W of e)for(let Q=0,le=W.length,de=le-1;Q<le;de=Q++){if(hh(E[$],E[T],W[de],W[Q]))return 0;g=Math.min(g,Ld(E[$],E[T],W[de],W[Q],n))}return g}function vu(t,e,n,s,u,m,g){if(null===m||null===g)return;const E=or(_o(s,m),_o(u,g),n);E<e&&t.push({dist:E,range1:m,range2:g})}function Nf(t,e,n,s,u=1/0){let m=Math.min(s.distance(t[0],n[0][0]),u);if(0===m)return m;const g=new Xh([{dist:0,range1:[0,t.length-1],range2:[0,0]}],me),E=e?ge:ke,T=Ti(n);for(;g.length;){const z=g.pop();if(z.dist>=m)continue;const $=z.range1;if(Mt($)<=E){if(!Ht($,t.length))return NaN;if(e){const W=Mu(t,$,n,s);if(0===(m=Math.min(m,W)))return m}else for(let W=$[0];W<=$[1];++W){const Q=Jc(t[W],n,s);if(0===(m=Math.min(m,Q)))return m}}else{const W=Ci($,e);if(null!==W[0]){const Q=or(_o(t,W[0]),T,s);Q<m&&g.push({dist:Q,range1:W[0],range2:[0,0]})}if(null!==W[1]){const Q=or(_o(t,W[1]),T,s);Q<m&&g.push({dist:Q,range1:W[1],range2:[0,0]})}}}return m}function dd(t,e,n,s,u,m=1/0){let g=Math.min(m,u.distance(t[0],n[0]));if(0===g)return g;const E=new Xh([{dist:0,range1:[0,t.length-1],range2:[0,n.length-1]}],me),T=e?ge:ke,z=s?ge:ke;for(;E.length;){const $=E.pop();if($.dist>=g)continue;const W=$.range1,Q=$.range2;if(Mt(W)<=T&&Mt(Q)<=z){if(!Ht(W,t.length)||!Ht(Q,n.length))return NaN;if(e&&s?g=Math.min(g,$l(t,W,n,Q,u)):e||s?e&&!s?g=Math.min(g,pc(n,Q,t,W,u)):!e&&s&&(g=Math.min(g,pc(t,W,n,Q,u))):g=Math.min(g,A0(t,W,n,Q,u)),0===g)return g}else{const le=Ci(W,e),de=Ci(Q,s);vu(E,g,u,t,n,le[0],de[0]),vu(E,g,u,t,n,le[0],de[1]),vu(E,g,u,t,n,le[1],de[0]),vu(E,g,u,t,n,le[1],de[1])}}return g}function Sh(t,e,n,s,u=1/0){let m=u;const g=_o(t,[0,t.length-1]);for(const E of n)if(!(m!==1/0&&or(g,_o(E,[0,E.length-1]),s)>=m)&&(m=Math.min(m,dd(t,e,E,!0,s,m)),0===m))return m;return m}function Gu(t,e,n,s,u=1/0){let m=u;const g=_o(t,[0,t.length-1]);for(const E of n){if(m!==1/0&&or(g,Ti(E),s)>=m)continue;const T=Nf(t,e,E,s,m);if(isNaN(T))return T;if(0===(m=Math.min(m,T)))return m}return m}function Yh(t){return"Point"===t||"MultiPoint"===t||"LineString"===t||"MultiLineString"===t||"Polygon"===t||"MultiPolygon"===t}class Ed{constructor(e,n){this.type=Ce,this.geojson=e,this.geometries=n}static parse(e,n){if(2!==e.length)return n.error(`'distance' expression requires either one argument, but found ' ${e.length-1} instead.`);if(wc(e[1])){const s=e[1];if("FeatureCollection"===s.type){for(let u=0;u<s.features.length;++u)if(Yh(s.features[u].geometry.type))return new Ed(s,s.features[u].geometry)}else if("Feature"===s.type){if(Yh(s.geometry.type))return new Ed(s,s.geometry)}else if(Yh(s.type))return new Ed(s,s)}return n.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(e){const n=e.geometry(),s=e.canonicalID();if(null!=n&&null!=s){if("Point"===e.geometryType())return function(u,m,g){const E=[];for(const z of u)for(const $ of z)E.push(Qs($,m));const T=new Od(E[0][1],"meters");return"Point"===g.type||"MultiPoint"===g.type||"LineString"===g.type?dd(E,!1,"Point"===g.type?[g.coordinates]:g.coordinates,"LineString"===g.type,T):"MultiLineString"===g.type?Sh(E,!1,g.coordinates,T):"Polygon"===g.type||"MultiPolygon"===g.type?Gu(E,!1,"Polygon"===g.type?[g.coordinates]:g.coordinates,T):null}(n,s,this.geometries);if("LineString"===e.geometryType())return function(u,m,g){const E=[];for(const z of u){const $=[];for(const W of z)$.push(Qs(W,m));E.push($)}const T=new Od(E[0][0][1],"meters");if("Point"===g.type||"MultiPoint"===g.type||"LineString"===g.type)return Sh("Point"===g.type?[g.coordinates]:g.coordinates,"LineString"===g.type,E,T);if("MultiLineString"===g.type){let z=1/0;for(let $=0;$<g.coordinates.length;$++){const W=Sh(g.coordinates[$],!0,E,T,z);if(isNaN(W))return W;if(0===(z=Math.min(z,W)))return z}return z}if("Polygon"===g.type||"MultiPolygon"===g.type){let z=1/0;for(let $=0;$<E.length;$++){const W=Gu(E[$],!0,"Polygon"===g.type?[g.coordinates]:g.coordinates,T,z);if(isNaN(W))return W;if(0===(z=Math.min(z,W)))return z}return z}return null}(n,s,this.geometries);if("Polygon"===e.geometryType())return function(u,m,g){const E=[];for(const z of function($,W){const Q=$.length;if(Q<=1)return[$];const le=[];let de,be;for(let xe=0;xe<Q;xe++){const je=ql($[xe]);0!==je&&($[xe].area=Math.abs(je),void 0===be&&(be=je<0),be===je<0?(de&&le.push(de),de=[$[xe]]):de.push($[xe]))}return de&&le.push(de),le}(u)){const $=[];for(let W=0;W<z.length;++W)$.push(Ml(z[W],m));E.push($)}const T=new Od(E[0][0][0][1],"meters");if("Point"===g.type||"MultiPoint"===g.type||"LineString"===g.type)return Gu("Point"===g.type?[g.coordinates]:g.coordinates,"LineString"===g.type,E,T);if("MultiLineString"===g.type){let z=1/0;for(let $=0;$<g.coordinates.length;$++){const W=Gu(g.coordinates[$],!0,E,T,z);if(isNaN(W))return W;if(0===(z=Math.min(z,W)))return z}return z}return"Polygon"===g.type||"MultiPolygon"===g.type?function(z,$,W){let Q=1/0;for(const le of z)for(const de of $){const be=Kh(le,de,W,Q);if(isNaN(be))return be;if(0===(Q=Math.min(Q,be)))return Q}return Q}("Polygon"===g.type?[g.coordinates]:g.coordinates,E,T):null}(n,s,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Th(t,e){switch(t){case"string":return ad(e);case"number":return+e;case"boolean":return!!e;case"color":return Xs.parse(e);case"formatted":return Ta.fromString(ad(e));case"resolvedImage":return hc.fromString(ad(e))}return e}function Au(t,e,n,s){return void 0!==s&&(t=s*Math.round(t/s)),void 0!==e&&t<e&&(t=e),void 0!==n&&t>n&&(t=n),t}class D0{constructor(e,n,s){this.type=e,this.key=n,this.scope=s}static parse(e,n){let s=n.expectedType;if(null==s&&(s=pi),e.length<2||e.length>3)return n.error("Invalid number of arguments for 'config' expression.");const u=n.parse(e[1],1);if(!(u instanceof Xd))return n.error("Key name of 'config' expression must be a string literal.");if(e.length>=3){const m=n.parse(e[2],2);return m instanceof Xd?new D0(s,ad(u.value),ad(m.value)):n.error("Scope of 'config' expression must be a string literal.")}return new D0(s,ad(u.value))}evaluate(e){const n=[this.key,this.scope,e.scope].filter(Boolean).join("\x1f"),s=e.getConfig(n);if(!s)return null;const{type:u,value:m,values:g,minValue:E,maxValue:T,stepValue:z}=s,$=s.default.evaluate(e);let W=$;if(m){const Q=e.scope;e.scope=(Q||"").split("\x1f").slice(1).join("\x1f"),W=m.evaluate(e),e.scope=Q}return u&&(W=Th(u,W)),void 0===W||void 0===E&&void 0===T&&void 0===z||("number"==typeof W?W=Au(W,E,T,z):Array.isArray(W)&&(W=W.map(Q=>"number"==typeof Q?Au(Q,E,T,z):Q))),void 0!==m&&void 0!==W&&g&&!g.includes(W)&&(W=$,u&&(W=Th(u,W))),(u&&u!==this.type||void 0!==W&&Ya(W)!==this.type)&&(W=Th(this.type.kind,W)),W}eachChild(){}outputDefined(){return!1}serialize(){const e=["config",this.key];return this.scope&&e.concat(this.key),e}}function Mh(t){if(t instanceof Oc&&("get"===t.name&&1===t.args.length||"feature-state"===t.name||"has"===t.name&&1===t.args.length||"properties"===t.name||"geometry-type"===t.name||"id"===t.name||/^filter-/.test(t.name))||t instanceof ud||t instanceof Ed)return!1;let e=!0;return t.eachChild(n=>{e&&!Mh(n)&&(e=!1)}),e}function Zh(t){if(t instanceof Oc&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(n=>{e&&!Zh(n)&&(e=!1)}),e}function T1(t){if(t instanceof D0)return!1;let e=!0;return t.eachChild(n=>{e&&!T1(n)&&(e=!1)}),e}function fh(t,e){if(t instanceof Oc&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild(s=>{n&&!fh(s,e)&&(n=!1)}),n}class G0{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(2!==e.length||"string"!=typeof e[1])return n.error("'var' expression requires exactly one string literal argument.");const s=e[1];return n.scope.has(s)?new G0(s,n.scope.get(s)):n.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class c1{constructor(e,n=[],s,u=new Su,m=[],g,E){this.registry=e,this.path=n,this.key=n.map(T=>`[${T}]`).join(""),this.scope=u,this.errors=m,this.expectedType=s,this._scope=g,this.options=E}parse(e,n,s,u,m={}){return n||s?this.concat(n,s,u)._parse(e,m):this._parse(e,m)}_parse(e,n){function s(u,m,g){return"assert"===g?new ld(m,[u]):"coerce"===g?new ia(m,[u]):u}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u="string"==typeof e[0]?this.registry[e[0]]:void 0;if(u){let m=u.parse(e,this);if(!m)return null;if(this.expectedType){const g=this.expectedType,E=m.type;if("string"!==g.kind&&"number"!==g.kind&&"boolean"!==g.kind&&"object"!==g.kind&&"array"!==g.kind||"value"!==E.kind)if("color"!==g.kind&&"formatted"!==g.kind&&"resolvedImage"!==g.kind||"value"!==E.kind&&"string"!==E.kind){if(this.checkSubtype(g,E))return null}else m=s(m,g,n.typeAnnotation||"coerce");else m=s(m,g,n.typeAnnotation||"assert")}if(!(m instanceof Xd)&&"resolvedImage"!==m.type.kind&&W0(m)){const g=new Vl(this._scope,this.options);try{m=new Xd(m.type,m.evaluate(g))}catch(E){return this.error(E.message),null}}return m}return ia.parse(["to-array",e],this)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,n,s){const u="number"==typeof e?this.path.concat(e):this.path,m=s?this.scope.concat(s):this.scope;return new c1(this.registry,u,n||null,m,this.errors,this._scope,this.options)}error(e,...n){const s=`${this.key}${n.map(u=>`[${u}]`).join("")}`;this.errors.push(new fu(s,e))}checkSubtype(e,n){const s=la(e,n);return s&&this.error(s),s}}var jc=c1;function W0(t){if(t instanceof G0)return W0(t.boundExpression);if(t instanceof Oc&&"error"===t.name||t instanceof Ch||t instanceof ud||t instanceof Ed||t instanceof D0)return!1;const e=t instanceof ia||t instanceof ld;let n=!0;return t.eachChild(s=>{n=e?n&&W0(s):n&&s instanceof Xd}),!!n&&Mh(t)&&fh(t,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Cd(t,e){const n=t.length-1;let s,u,m=0,g=n,E=0;for(;m<=g;)if(E=Math.floor((m+g)/2),s=t[E],u=t[E+1],s<=e){if(E===n||e<u)return E;m=E+1}else{if(!(s>e))throw new Nl("Input is not a number.");g=E-1}return 0}class Ah{constructor(e,n,s){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[u,m]of s)this.labels.push(u),this.outputs.push(m)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");const s=n.parse(e[1],1,Ce);if(!s)return null;const u=[];let m=null;n.expectedType&&"value"!==n.expectedType.kind&&(m=n.expectedType);for(let g=1;g<e.length;g+=2){const E=1===g?-1/0:e[g],T=e[g+1],z=g,$=g+1;if("number"!=typeof E)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(u.length&&u[u.length-1][0]>=E)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const W=n.parse(T,$,m);if(!W)return null;m=m||W.type,u.push([E,W])}return new Ah(m,s,u)}evaluate(e){const n=this.labels,s=this.outputs;if(1===n.length)return s[0].evaluate(e);const u=this.input.evaluate(e);if(u<=n[0])return s[0].evaluate(e);const m=n.length;return u>=n[m-1]?s[m-1].evaluate(e):s[Cd(n,u)].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&e.push(this.labels[n]),e.push(this.outputs[n].serialize());return e}}const Dh=4/29,Ph=6/29,mh=3*Ph*Ph,Z1=Ph*Ph*Ph,u1=Math.PI/180,nf=180/Math.PI;function P0(t){return t>Z1?Math.pow(t,1/3):t/mh+Dh}function Q1(t){return t>Ph?t*t*t:mh*(t-Dh)}function Yd(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Rh(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function M1(t){const e=Rh(t.r),n=Rh(t.g),s=Rh(t.b),u=P0((.4124564*e+.3575761*n+.1804375*s)/.95047),m=P0((.2126729*e+.7151522*n+.072175*s)/1);return{l:116*m-16,a:500*(u-m),b:200*(m-P0((.0193339*e+.119192*n+.9503041*s)/1.08883)),alpha:t.a}}function Il(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,s=isNaN(t.b)?e:e-t.b/200;return e=1*Q1(e),n=.95047*Q1(n),s=1.08883*Q1(s),new Xs(Yd(3.2404542*n-1.5371385*e-.4985314*s),Yd(-.969266*n+1.8760108*e+.041556*s),Yd(.0556434*n-.2040259*e+1.0572252*s),t.alpha)}function _r(t,e,n){const s=e-t;return t+n*(s>180||s<-180?s-360*Math.round(s/360):s)}const ds={forward:M1,reverse:Il,interpolate:function(t,e,n){return{l:Rr(t.l,e.l,n),a:Rr(t.a,e.a,n),b:Rr(t.b,e.b,n),alpha:Rr(t.alpha,e.alpha,n)}}},Xl={forward:function(t){const{l:e,a:n,b:s}=M1(t),u=Math.atan2(s,n)*nf;return{h:u<0?u+360:u,c:Math.sqrt(n*n+s*s),l:e,alpha:t.a}},reverse:function(t){const e=t.h*u1,n=t.c;return Il({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:_r(t.h,e.h,n),c:Rr(t.c,e.c,n),l:Rr(t.l,e.l,n),alpha:Rr(t.alpha,e.alpha,n)}}};var gh=Object.freeze({__proto__:null,hcl:Xl,lab:ds});class il{constructor(e,n,s,u,m){this.type=e,this.operator=n,this.interpolation=s,this.input=u,this.labels=[],this.outputs=[];for(const[g,E]of m)this.labels.push(g),this.outputs.push(E)}static interpolationFactor(e,n,s,u){let m=0;if("exponential"===e.name)m=fc(n,e.base,s,u);else if("linear"===e.name)m=fc(n,1,s,u);else if("cubic-bezier"===e.name){const g=e.controlPoints;m=new uu(g[0],g[1],g[2],g[3]).solve(fc(n,1,s,u))}return m}static parse(e,n){let[s,u,m,...g]=e;if(!Array.isArray(u)||0===u.length)return n.error("Expected an interpolation type expression.",1);if("linear"===u[0])u={name:"linear"};else if("exponential"===u[0]){const z=u[1];if("number"!=typeof z)return n.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:z}}else{if("cubic-bezier"!==u[0])return n.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const z=u.slice(1);if(4!==z.length||z.some($=>"number"!=typeof $||$<0||$>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:z}}}if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(m=n.parse(m,2,Ce),!m)return null;const E=[];let T=null;"interpolate-hcl"===s||"interpolate-lab"===s?T=Gt:n.expectedType&&"value"!==n.expectedType.kind&&(T=n.expectedType);for(let z=0;z<g.length;z+=2){const $=g[z],W=g[z+1],Q=z+3,le=z+4;if("number"!=typeof $)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(E.length&&E[E.length-1][0]>=$)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);const de=n.parse(W,le,T);if(!de)return null;T=T||de.type,E.push([$,de])}return"number"===T.kind||"color"===T.kind||"array"===T.kind&&"number"===T.itemType.kind&&"number"==typeof T.N?new il(T,s,u,m,E):n.error(`Type ${$r(T)} is not interpolatable.`)}evaluate(e){const n=this.labels,s=this.outputs;if(1===n.length)return s[0].evaluate(e);const u=this.input.evaluate(e);if(u<=n[0])return s[0].evaluate(e);const m=n.length;if(u>=n[m-1])return s[m-1].evaluate(e);const g=Cd(n,u),E=il.interpolationFactor(this.interpolation,u,n[g],n[g+1]),T=s[g].evaluate(e),z=s[g+1].evaluate(e);return"interpolate"===this.operator?Rd[this.type.kind.toLowerCase()](T,z,E):"interpolate-hcl"===this.operator?Xl.reverse(Xl.interpolate(Xl.forward(T),Xl.forward(z),E)):ds.reverse(ds.interpolate(ds.forward(T),ds.forward(z),E))}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const n=[this.operator,e,this.input.serialize()];for(let s=0;s<this.labels.length;s++)n.push(this.labels[s],this.outputs[s].serialize());return n}}function fc(t,e,n,s){const u=s-n,m=t-n;return 0===u?0:1===e?m/u:(Math.pow(e,m)-1)/(Math.pow(e,u)-1)}class Bd{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let s=null;const u=n.expectedType;u&&"value"!==u.kind&&(s=u);const m=[];for(const E of e.slice(1)){const T=n.parse(E,1+m.length,s,void 0,{typeAnnotation:"omit"});if(!T)return null;s=s||T.type,m.push(T)}const g=u&&m.some(E=>la(u,E.type));return new Bd(g?pi:s,m)}evaluate(e){let n,s=null,u=0;for(const m of this.args){if(u++,s=m.evaluate(e),s&&s instanceof hc&&!s.available&&(n||(n=s),s=null,u===this.args.length))return n;if(null!==s)break}return s}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class $a{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const s=[];for(let m=1;m<e.length-1;m+=2){const g=e[m];if("string"!=typeof g)return n.error(`Expected string, but found ${typeof g} instead.`,m);if(/[^a-zA-Z0-9_]/.test(g))return n.error("Variable names must contain only alphanumeric characters or '_'.",m);const E=n.parse(e[m+1],m+1);if(!E)return null;s.push([g,E])}const u=n.parse(e[e.length-1],e.length-1,n.expectedType,s);return u?new $a(s,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[n,s]of this.bindings)e.push(n,s.serialize());return e.push(this.result.serialize()),e}}class ol{constructor(e,n,s){this.type=e,this.index=n,this.input=s}static parse(e,n){if(3!==e.length)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,Ce),u=n.parse(e[2],2,Ws(n.expectedType||pi));return s&&u?new ol(u.type.itemType,s,u):null}evaluate(e){const n=this.index.evaluate(e),s=this.input.evaluate(e);if(n<0)throw new Nl(`Array index out of bounds: ${n} < 0.`);if(n>=s.length)throw new Nl(`Array index out of bounds: ${n} > ${s.length-1}.`);if(n!==Math.floor(n))throw new Nl(`Array index must be an integer, but found ${n} instead.`);return s[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class mc{constructor(e,n){this.type=Ie,this.needle=e,this.haystack=n}static parse(e,n){if(3!==e.length)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,pi),u=n.parse(e[2],2,pi);return s&&u?Wl(s.type,[Ie,Nt,Ce,fe,pi])?new mc(s,u):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${$r(s.type)} instead`):null}evaluate(e){const n=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(null==s)return!1;if(!Tl(n,["boolean","string","number","null"]))throw new Nl(`Expected first argument to be of type boolean, string, number or null, but found ${$r(Ya(n))} instead.`);if(!Tl(s,["string","array"]))throw new Nl(`Expected second argument to be of type array or string, but found ${$r(Ya(s))} instead.`);return s.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Fs{constructor(e,n,s){this.type=Ce,this.needle=e,this.haystack=n,this.fromIndex=s}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,pi),u=n.parse(e[2],2,pi);if(!s||!u)return null;if(!Wl(s.type,[Ie,Nt,Ce,fe,pi]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${$r(s.type)} instead`);if(4===e.length){const m=n.parse(e[3],3,Ce);return m?new Fs(s,u,m):null}return new Fs(s,u)}evaluate(e){const n=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!Tl(n,["boolean","string","number","null"]))throw new Nl(`Expected first argument to be of type boolean, string, number or null, but found ${$r(Ya(n))} instead.`);if(!Tl(s,["string","array"]))throw new Nl(`Expected second argument to be of type array or string, but found ${$r(Ya(s))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return s.indexOf(n,u)}return s.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Zd{constructor(e,n,s,u,m,g){this.inputType=e,this.type=n,this.input=s,this.cases=u,this.outputs=m,this.otherwise=g}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return n.error("Expected an even number of arguments.");let s,u;n.expectedType&&"value"!==n.expectedType.kind&&(u=n.expectedType);const m={},g=[];for(let z=2;z<e.length-1;z+=2){let $=e[z];const W=e[z+1];Array.isArray($)||($=[$]);const Q=n.concat(z);if(0===$.length)return Q.error("Expected at least one branch label.");for(const de of $){if("number"!=typeof de&&"string"!=typeof de)return Q.error("Branch labels must be numbers or strings.");if("number"==typeof de&&Math.abs(de)>Number.MAX_SAFE_INTEGER)return Q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof de&&Math.floor(de)!==de)return Q.error("Numeric branch labels must be integer values.");if(s){if(Q.checkSubtype(s,Ya(de)))return null}else s=Ya(de);if(void 0!==m[String(de)])return Q.error("Branch labels must be unique.");m[String(de)]=g.length}const le=n.parse(W,z,u);if(!le)return null;u=u||le.type,g.push(le)}const E=n.parse(e[1],1,pi);if(!E)return null;const T=n.parse(e[e.length-1],e.length-1,u);return T?"value"!==E.type.kind&&n.concat(1).checkSubtype(s,E.type)?null:new Zd(s,u,E,m,g,T):null}evaluate(e){const n=this.input.evaluate(e);return(Ya(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),s=[],u={};for(const g of n){const E=u[this.cases[g]];void 0===E?(u[this.cases[g]]=s.length,s.push([this.cases[g],[g]])):s[E][1].push(g)}const m=g=>"number"===this.inputType.kind?Number(g):g;for(const[g,E]of s)e.push(1===E.length?m(E[0]):E.map(m)),e.push(this.outputs[g].serialize());return e.push(this.otherwise.serialize()),e}}class Qh{constructor(e,n,s){this.type=e,this.branches=n,this.otherwise=s}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return n.error("Expected an odd number of arguments.");let s;n.expectedType&&"value"!==n.expectedType.kind&&(s=n.expectedType);const u=[];for(let g=1;g<e.length-1;g+=2){const E=n.parse(e[g],g,Ie);if(!E)return null;const T=n.parse(e[g+1],g+1,s);if(!T)return null;u.push([E,T]),s=s||T.type}const m=n.parse(e[e.length-1],e.length-1,s);return m?new Qh(s,u,m):null}evaluate(e){for(const[n,s]of this.branches)if(n.evaluate(e))return s.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,s]of this.branches)e(n),e(s);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class hd{constructor(e,n,s,u){this.type=e,this.input=n,this.beginIndex=s,this.endIndex=u}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,pi),u=n.parse(e[2],2,Ce);if(!s||!u)return null;if(!Wl(s.type,[Ws(pi),Nt,pi]))return n.error(`Expected first argument to be of type array or string, but found ${$r(s.type)} instead`);if(4===e.length){const m=n.parse(e[3],3,Ce);return m?new hd(s.type,s,u,m):null}return new hd(s.type,s,u)}evaluate(e){const n=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!Tl(n,["string","array"]))throw new Nl(`Expected first argument to be of type array or string, but found ${$r(Ya(n))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return n.slice(s,u)}return n.slice(s)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function ja(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Qd(t,e,n,s){return 0===s.compare(e,n)}function jl(t,e,n){const s="=="!==t&&"!="!==t;return class Zx{constructor(m,g,E){this.type=Ie,this.lhs=m,this.rhs=g,this.collator=E,this.hasUntypedArgument="value"===m.type.kind||"value"===g.type.kind}static parse(m,g){if(3!==m.length&&4!==m.length)return g.error("Expected two or three arguments.");const E=m[0];let T=g.parse(m[1],1,pi);if(!T)return null;if(!ja(E,T.type))return g.concat(1).error(`"${E}" comparisons are not supported for type '${$r(T.type)}'.`);let z=g.parse(m[2],2,pi);if(!z)return null;if(!ja(E,z.type))return g.concat(2).error(`"${E}" comparisons are not supported for type '${$r(z.type)}'.`);if(T.type.kind!==z.type.kind&&"value"!==T.type.kind&&"value"!==z.type.kind)return g.error(`Cannot compare types '${$r(T.type)}' and '${$r(z.type)}'.`);s&&("value"===T.type.kind&&"value"!==z.type.kind?T=new ld(z.type,[T]):"value"!==T.type.kind&&"value"===z.type.kind&&(z=new ld(T.type,[z])));let $=null;if(4===m.length){if("string"!==T.type.kind&&"string"!==z.type.kind&&"value"!==T.type.kind&&"value"!==z.type.kind)return g.error("Cannot use collator to compare non-string types.");if($=g.parse(m[3],3,ir),!$)return null}return new Zx(T,z,$)}evaluate(m){const g=this.lhs.evaluate(m),E=this.rhs.evaluate(m);if(s&&this.hasUntypedArgument){const T=Ya(g),z=Ya(E);if(T.kind!==z.kind||"string"!==T.kind&&"number"!==T.kind)throw new Nl(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${T.kind}, ${z.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const T=Ya(g),z=Ya(E);if("string"!==T.kind||"string"!==z.kind)return e(m,g,E)}return this.collator?n(m,g,E,this.collator.evaluate(m)):e(m,g,E)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[t];return this.eachChild(g=>{m.push(g.serialize())}),m}}}const vh=jl("==",function(t,e,n){return e===n},Qd),d1=jl("!=",function(t,e,n){return e!==n},function(t,e,n,s){return!Qd(0,e,n,s)}),A1=jl("<",function(t,e,n){return e<n},function(t,e,n,s){return s.compare(e,n)<0}),zh=jl(">",function(t,e,n){return e>n},function(t,e,n,s){return s.compare(e,n)>0}),Jd=jl("<=",function(t,e,n){return e<=n},function(t,e,n,s){return s.compare(e,n)<=0}),Lc=jl(">=",function(t,e,n){return e>=n},function(t,e,n,s){return s.compare(e,n)>=0});class ls{constructor(e,n,s,u,m,g){this.type=Nt,this.number=e,this.locale=n,this.currency=s,this.unit=u,this.minFractionDigits=m,this.maxFractionDigits=g}static parse(e,n){if(3!==e.length)return n.error("Expected two arguments.");const s=n.parse(e[1],1,Ce);if(!s)return null;const u=e[2];if("object"!=typeof u||Array.isArray(u))return n.error("NumberFormat options argument must be an object.");let m=null;if(u.locale&&(m=n.parse(u.locale,1,Nt),!m))return null;let g=null;if(u.currency&&(g=n.parse(u.currency,1,Nt),!g))return null;let E=null;if(u.unit&&(E=n.parse(u.unit,1,Nt),!E))return null;let T=null;if(u["min-fraction-digits"]&&(T=n.parse(u["min-fraction-digits"],1,Ce),!T))return null;let z=null;return u["max-fraction-digits"]&&(z=n.parse(u["max-fraction-digits"],1,Ce),!z)?null:new ls(s,m,g,E,T,z)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Oh{constructor(e){this.type=Ce,this.input=e}static parse(e,n){if(2!==e.length)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const s=n.parse(e[1],1);return s?"array"!==s.type.kind&&"string"!==s.type.kind&&"value"!==s.type.kind?n.error(`Expected argument of type string or array, but found ${$r(s.type)} instead.`):new Oh(s):null}evaluate(e){const n=this.input.evaluate(e);if("string"==typeof n||Array.isArray(n))return n.length;throw new Nl(`Expected value to be of type string or array, but found ${$r(Ya(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(n=>{e.push(n.serialize())}),e}}function q0(t){return function(){t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}const Wu={"==":vh,"!=":d1,">":zh,"<":A1,">=":Lc,"<=":Jd,array:ld,at:ol,boolean:ld,case:Qh,coalesce:Bd,collator:Ch,format:bd,image:Fl,in:mc,"index-of":Fs,interpolate:il,"interpolate-hcl":il,"interpolate-lab":il,length:Oh,let:$a,literal:Xd,match:Zd,number:ld,"number-format":ls,object:ld,slice:hd,step:Ah,string:ld,"to-boolean":ia,"to-color":ia,"to-number":ia,"to-string":ia,var:G0,within:ud,distance:Ed,config:D0};function R0(t,[e,n,s,u]){e=e.evaluate(t),n=n.evaluate(t),s=s.evaluate(t);const m=u?u.evaluate(t):1,g=Ka(e,n,s,m);if(g)throw new Nl(g);return new Xs(e/255*m,n/255*m,s/255*m,m)}function Lh(t,[e,n,s,u]){e=e.evaluate(t),n=n.evaluate(t),s=s.evaluate(t);const m=u?u.evaluate(t):1,g=($=n,W=s,Q=m,"number"==typeof(z=e)&&z>=0&&z<=360?"number"==typeof $&&$>=0&&$<=100&&"number"==typeof W&&W>=0&&W<=100?void 0===Q||"number"==typeof Q&&Q>=0&&Q<=1?null:`Invalid hsla value [${[z,$,W,Q].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${("number"==typeof Q?[z,$,W,Q]:[z,$,W]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${("number"==typeof Q?[z,$,W,Q]:[z,$,W]).join(", ")}]: 'h' must be between 0 and 360.`);var z,$,W,Q;if(g)throw new Nl(g);const E=`hsla(${e}, ${n}%, ${s}%, ${m})`,T=Xs.parse(E);if(!T)throw new Nl(`Failed to parse HSLA color: ${E}`);return T}function Kl(t,e){return t in e}function Nd(t,e){const n=e[t];return void 0===n?null:n}function rl(t){return{type:t}}function Bc(t){return{result:"success",value:t}}function Fd(t){return{result:"error",value:t}}function pd(t,e){return!!t&&!!t.parameters&&t.parameters.indexOf(e)>-1}function _h(t){return"data-driven"===t["property-type"]}function v(t){return pd(t.expression,"measure-light")}function r(t){return pd(t.expression,"zoom")}function d(t){return!!t.expression&&t.expression.interpolated}function b(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function M(t){return t}function R(t,e){const n="color"===e.type,s=t.stops&&"object"==typeof t.stops[0][0],u=s||!(s||void 0!==t.property),m=t.type||(d(e)?"exponential":"interval");if(n&&((t=cl({},t)).stops&&(t.stops=t.stops.map(z=>[z[0],Xs.parse(z[1])])),t.default=Xs.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!gh[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let g,E,T;if("exponential"===m)g=se;else if("interval"===m)g=ee;else if("categorical"===m){g=H,E=Object.create(null);for(const z of t.stops)E[z[0]]=z[1];T=typeof t.stops[0][0]}else{if("identity"!==m)throw new Error(`Unknown function type "${m}"`);g=he}if(s){const z={},$=[];for(let le=0;le<t.stops.length;le++){const de=t.stops[le],be=de[0].zoom;void 0===z[be]&&(z[be]={zoom:be,type:t.type,property:t.property,default:t.default,stops:[]},$.push(be)),z[be].stops.push([de[0].value,de[1]])}const W=[];for(const le of $)W.push([z[le].zoom,R(z[le],e)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:il.interpolationFactor.bind(void 0,Q),zoomStops:W.map(le=>le[0]),evaluate:({zoom:le},de)=>se({stops:W,base:t.base},e,le).evaluate(le,de)}}if(u){const z="exponential"===m?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:il.interpolationFactor.bind(void 0,z),zoomStops:t.stops.map($=>$[0]),evaluate:({zoom:$})=>g(t,e,$,E,T)}}return{kind:"source",evaluate(z,$){const W=$&&$.properties?$.properties[t.property]:void 0;return void 0===W?N(t.default,e.default):g(t,e,W,E,T)}}}function N(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function H(t,e,n,s,u){return N(typeof n===u?s[n]:void 0,t.default,e.default)}function ee(t,e,n){if("number"!==cd(n))return N(t.default,e.default);const s=t.stops.length;if(1===s||n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[s-1][0])return t.stops[s-1][1];const u=Cd(t.stops.map(m=>m[0]),n);return t.stops[u][1]}function se(t,e,n){const s=void 0!==t.base?t.base:1;if("number"!==cd(n))return N(t.default,e.default);const u=t.stops.length;if(1===u||n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[u-1][0])return t.stops[u-1][1];const m=Cd(t.stops.map($=>$[0]),n),g=function($,W,Q,le){const de=le-Q,be=$-Q;return 0===de?0:1===W?be/de:(Math.pow(W,be)-1)/(Math.pow(W,de)-1)}(n,s,t.stops[m][0],t.stops[m+1][0]),E=t.stops[m][1],T=t.stops[m+1][1];let z=Rd[e.type]||M;if(t.colorSpace&&"rgb"!==t.colorSpace){const $=gh[t.colorSpace];z=(W,Q)=>$.reverse($.interpolate($.forward(W),$.forward(Q),g))}return"function"==typeof E.evaluate?{evaluate(...$){const W=E.evaluate.apply(void 0,$),Q=T.evaluate.apply(void 0,$);if(void 0!==W&&void 0!==Q)return z(W,Q,g)}}:z(E,T,g)}function he(t,e,n){return"color"===e.type?n=Xs.parse(n):"formatted"===e.type?n=Ta.fromString(n.toString()):"resolvedImage"===e.type?n=hc.fromString(n.toString()):cd(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),N(n,t.default,e.default)}Oc.register(Wu,{error:[{kind:"error"},[Nt],(t,[e])=>{throw new Nl(e.evaluate(t))}],typeof:[Nt,[pi],(t,[e])=>$r(Ya(e.evaluate(t)))],"to-rgba":[Ws(Ce,4),[Gt],(t,[e])=>e.evaluate(t).toRenderColor(null).toArray()],rgb:[Gt,[Ce,Ce,Ce],R0],rgba:[Gt,[Ce,Ce,Ce,Ce],R0],hsl:[Gt,[Ce,Ce,Ce],Lh],hsla:[Gt,[Ce,Ce,Ce,Ce],Lh],has:{type:Ie,overloads:[[[Nt],(t,[e])=>Kl(e.evaluate(t),t.properties())],[[Nt,Dn],(t,[e,n])=>Kl(e.evaluate(t),n.evaluate(t))]]},get:{type:pi,overloads:[[[Nt],(t,[e])=>Nd(e.evaluate(t),t.properties())],[[Nt,Dn],(t,[e,n])=>Nd(e.evaluate(t),n.evaluate(t))]]},"feature-state":[pi,[Nt],(t,[e])=>Nd(e.evaluate(t),t.featureState||{})],properties:[Dn,[],t=>t.properties()],"geometry-type":[Nt,[],t=>t.geometryType()],id:[pi,[],t=>t.id()],zoom:[Ce,[],t=>t.globals.zoom],pitch:[Ce,[],t=>t.globals.pitch||0],"distance-from-center":[Ce,[],t=>t.distanceFromCenter()],"measure-light":[Ce,[Nt],(t,[e])=>t.measureLight(e.evaluate(t))],"heatmap-density":[Ce,[],t=>t.globals.heatmapDensity||0],"line-progress":[Ce,[],t=>t.globals.lineProgress||0],"raster-value":[Ce,[],t=>t.globals.rasterValue||0],"raster-particle-speed":[Ce,[],t=>t.globals.rasterParticleSpeed||0],"sky-radial-progress":[Ce,[],t=>t.globals.skyRadialProgress||0],accumulated:[pi,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[Ce,rl(Ce),(t,e)=>{let n=0;for(const s of e)n+=s.evaluate(t);return n}],"*":[Ce,rl(Ce),(t,e)=>{let n=1;for(const s of e)n*=s.evaluate(t);return n}],"-":{type:Ce,overloads:[[[Ce,Ce],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[Ce],(t,[e])=>-e.evaluate(t)]]},"/":[Ce,[Ce,Ce],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[Ce,[Ce,Ce],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[Ce,[],()=>Math.LN2],pi:[Ce,[],()=>Math.PI],e:[Ce,[],()=>Math.E],"^":[Ce,[Ce,Ce],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[Ce,[Ce],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ce,[Ce],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ce,[Ce],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ce,[Ce],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ce,[Ce],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ce,[Ce],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ce,[Ce],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ce,[Ce],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ce,[Ce],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ce,[Ce],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ce,rl(Ce),(t,e)=>Math.min(...e.map(n=>n.evaluate(t)))],max:[Ce,rl(Ce),(t,e)=>Math.max(...e.map(n=>n.evaluate(t)))],abs:[Ce,[Ce],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ce,[Ce],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ce,[Ce],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ce,[Ce],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Ie,[Nt,pi],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[Ie,[pi],(t,[e])=>t.id()===e.value],"filter-type-==":[Ie,[Nt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Ie,[Nt,pi],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s<u}],"filter-id-<":[Ie,[pi],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n<s}],"filter->":[Ie,[Nt,pi],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s>u}],"filter-id->":[Ie,[pi],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n>s}],"filter-<=":[Ie,[Nt,pi],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s<=u}],"filter-id-<=":[Ie,[pi],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n<=s}],"filter->=":[Ie,[Nt,pi],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s>=u}],"filter-id->=":[Ie,[pi],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n>=s}],"filter-has":[Ie,[pi],(t,[e])=>e.value in t.properties()],"filter-has-id":[Ie,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Ie,[Ws(Nt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Ie,[Ws(pi)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Ie,[Nt,Ws(pi)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Ie,[Nt,Ws(pi)],(t,[e,n])=>function(s,u,m,g){for(;m<=g;){const E=m+g>>1;if(u[E]===s)return!0;u[E]>s?g=E-1:m=E+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Ie,overloads:[[[Ie,Ie],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[rl(Ie),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:Ie,overloads:[[[Ie,Ie],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[rl(Ie),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[Ie,[Ie],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Ie,[Nt],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[Nt,[Nt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Nt,[Nt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Nt,rl(pi),(t,e)=>e.map(n=>ad(n.evaluate(t))).join("")],"resolved-locale":[Nt,[ir],(t,[e])=>e.evaluate(t).resolvedLocale()],random:[Ce,[Ce,Ce,pi],(t,e)=>{const[n,s,u]=e.map(g=>g.evaluate(t));if(n>s||n===s)return n;let m;if("string"==typeof u)m=function(g){let E=0;if(0===g.length)return E;for(let T=0;T<g.length;T++)E=(E<<5)-E+g.charCodeAt(T),E|=0;return E}(u);else{if("number"!=typeof u)throw new Nl(`Invalid seed input: ${u}`);m=u}return n+q0(m)()*(s-n)}]});class ye{constructor(e,n,s,u){var m;this.expression=e,this._warningHistory={},this._evaluator=new Vl(s,u),this._defaultValue=n?"color"===(m=n).type&&(b(m.default)||Array.isArray(m.default))?new Xs(0,0,0,0):"color"===m.type?Xs.parse(m.default)||null:void 0===m.default?null:m.default:null,this._enumValues=n&&"enum"===n.type?n.values:null}evaluateWithoutErrorHandling(e,n,s,u,m,g,E,T){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=s,this._evaluator.canonical=u||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=g,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=T||null,this.expression.evaluate(this._evaluator)}evaluate(e,n,s,u,m,g,E,T){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=s||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=g||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=T||null;try{const z=this.expression.evaluate(this._evaluator);if(null==z||"number"==typeof z&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new Nl(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(z)} instead.`);return z}catch(z){return this._warningHistory[z.message]||(this._warningHistory[z.message]=!0,typeof console<"u"&&console.warn(z.message)),this._defaultValue}}}function Pe(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Wu}function Fe(t,e,n,s){const u=new jc(Wu,[],e?function(g){const E={color:Gt,string:Nt,number:Ce,enum:Nt,boolean:Ie,formatted:fs,resolvedImage:na};return"array"===g.type?Ws(E[g.value]||pi,g.length):E[g.type]}(e):void 0,void 0,void 0,n,s),m=u.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return m?Bc(new ye(m,e,n,s)):Fd(u.errors)}class Qe{constructor(e,n,s){this.kind=e,this._styleExpression=n,this.isLightConstant=s,this.isStateDependent="constant"!==e&&!Zh(n.expression),this.isConfigDependent=!T1(n.expression)}evaluateWithoutErrorHandling(e,n,s,u,m,g){return this._styleExpression.evaluateWithoutErrorHandling(e,n,s,u,m,g)}evaluate(e,n,s,u,m,g){return this._styleExpression.evaluate(e,n,s,u,m,g)}}class Je{constructor(e,n,s,u,m){this.kind=e,this.zoomStops=s,this._styleExpression=n,this.isStateDependent="camera"!==e&&!Zh(n.expression),this.isLightConstant=m,this.isConfigDependent=!T1(n.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,n,s,u,m,g){return this._styleExpression.evaluateWithoutErrorHandling(e,n,s,u,m,g)}evaluate(e,n,s,u,m,g){return this._styleExpression.evaluate(e,n,s,u,m,g)}interpolationFactor(e,n,s){return this.interpolationType?il.interpolationFactor(this.interpolationType,e,n,s):0}}function tt(t,e,n,s){if("error"===(t=Fe(t,e,n,s)).result)return t;const u=t.value.expression,m=Mh(u);if(!m&&!_h(e))return Fd([new fu("","data expressions not supported")]);const g=fh(u,["zoom","pitch","distance-from-center"]);if(!g&&!r(e))return Fd([new fu("","zoom expressions not supported")]);const E=fh(u,["measure-light"]);if(!E&&!v(e))return Fd([new fu("","measure-light expression not supported")]);const T=e.expression&&e.expression.relaxZoomRestriction,z=Pt(u);return z||g||T?z instanceof fu?Fd([z]):z instanceof il&&!d(e)?Fd([new fu("",'"interpolate" expressions cannot be used with this property')]):Bc(z?new Je(m?"camera":"composite",t.value,z.labels,z instanceof il?z.interpolation:void 0,E):new Qe(m?"constant":"source",t.value,E)):Fd([new fu("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class rt{constructor(e,n){this._parameters=e,this._specification=n,cl(this,R(this._parameters,this._specification))}static deserialize(e){return new rt(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Pt(t){let e=null;if(t instanceof $a)e=Pt(t.result);else if(t instanceof Bd){for(const n of t.args)if(e=Pt(n),e)break}else(t instanceof Ah||t instanceof il)&&t.input instanceof Oc&&"zoom"===t.input.name&&(e=t);return e instanceof fu||t.eachChild(n=>{const s=Pt(n);s instanceof fu?e=s:e&&s&&e!==s&&(e=new fu("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}var Bt=tn,Ft=3;function tn(t,e,n){var s=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var u=new Int32Array(this.arrayBuffer);t=u[0],this.d=(e=u[1])+2*(n=u[2]);for(var m=0;m<this.d*this.d;m++){var g=u[Ft+m],E=u[Ft+m+1];s.push(g===E?null:u.subarray(g,E))}var T=u[Ft+s.length+1];this.keys=u.subarray(u[Ft+s.length],T),this.bboxes=u.subarray(T),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var z=0;z<this.d*this.d;z++)s.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var $=n/e*t;this.min=-$,this.max=t+$}tn.prototype.insert=function(t,e,n,s,u){this._forEachCell(e,n,s,u,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(u)},tn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},tn.prototype._insertCell=function(t,e,n,s,u,m){this.cells[u].push(m)},tn.prototype.query=function(t,e,n,s,u){var m=this.min,g=this.max;if(t<=m&&e<=m&&g<=n&&g<=s&&!u)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(t,e,n,s,this._queryCell,E,{},u),E},tn.prototype._queryCell=function(t,e,n,s,u,m,g,E){var T=this.cells[u];if(null!==T)for(var z=this.keys,$=this.bboxes,W=0;W<T.length;W++){var Q=T[W];if(void 0===g[Q]){var le=4*Q;(E?E($[le+0],$[le+1],$[le+2],$[le+3]):t<=$[le+2]&&e<=$[le+3]&&n>=$[le+0]&&s>=$[le+1])?(g[Q]=!0,m.push(z[Q])):g[Q]=!1}}},tn.prototype._forEachCell=function(t,e,n,s,u,m,g,E){for(var T=this._convertToCellCoord(t),z=this._convertToCellCoord(e),$=this._convertToCellCoord(n),W=this._convertToCellCoord(s),Q=T;Q<=$;Q++)for(var le=z;le<=W;le++){var de=this.d*le+Q;if((!E||E(this._convertFromCellCoord(Q),this._convertFromCellCoord(le),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(le+1)))&&u.call(this,t,e,n,s,de,m,g,E))return}},tn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},tn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},tn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Ft+this.cells.length+1+1,n=0,s=0;s<this.cells.length;s++)n+=this.cells[s].length;var u=new Int32Array(e+n+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var m=e,g=0;g<t.length;g++){var E=t[g];u[Ft+g]=m,u.set(E,m),m+=E.length}return u[Ft+t.length]=m,u.set(this.keys,m),u[Ft+t.length+1]=m+=this.keys.length,u.set(this.bboxes,m),m+=this.bboxes.length,u.buffer};var en=xn(Bt);const _n={};function at(t,e,n={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writable:!1}),_n[e]={klass:t,omit:n.omit||[]}}at(Object,"Object"),en.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.add(n),{buffer:n}},en.deserialize=function(t){return new en(t.buffer)},Object.defineProperty(en,"name",{value:"Grid"}),at(en,"Grid"),at(Xs,"Color"),at(Error,"Error"),at(Ta,"Formatted"),at(ma,"FormattedSection"),at(He,"AJAXError"),at(hc,"ResolvedImage"),at(rt,"StylePropertyFunction"),at(ye,"StyleExpression",{omit:["_evaluator"]}),at(Je,"ZoomDependentExpression"),at(Qe,"ZoomConstantExpression"),at(Oc,"CompoundExpression",{omit:["_evaluate"]});for(const t in Wu)_n[Wu[t]._classRegistryKey]||at(Wu[t],`Expression${t}`);function $t(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Tn(t){return self.ImageBitmap&&t instanceof ImageBitmap}function ci(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if($t(t)||Tn(t))return e&&e.add(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.add(n.buffer),n}if(t instanceof ImageData)return e&&e.add(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const s of t)n.push(ci(s,e));return n}if(t instanceof Map){const n={$name:"Map"};for(const[s,u]of t.entries())n[s]=ci(u);return n}if("object"==typeof t){const n=t.constructor,s=n._classRegistryKey;if(!s)throw new Error(`can't serialize object of unregistered class ${s}`);const u=n.serialize?n.serialize(t,e):{};if(!n.serialize){for(const m in t)t.hasOwnProperty(m)&&(_n[s].omit.indexOf(m)>=0||(u[m]=ci(t[m],e)));t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function zn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||$t(t)||Tn(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(zn);if("object"==typeof t){const e=t.$name||"Object";if("Map"===e){const u=new Map;for(const m of Object.keys(t))"$name"!==m&&u.set(m,zn(t[m]));return u}const{klass:n}=_n[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const s=Object.create(n.prototype);for(const u of Object.keys(t))"$name"!==u&&(s[u]=zn(t[u]));return s}throw new Error("can't deserialize object of type "+typeof t)}const mn={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519,"CJK Unified Ideographs Extension B":t=>t>=131072&&t<=173791};function _i(t){for(const e of t)if(ie(e.charCodeAt(0)))return!0;return!1}function eo(t){for(const e of t)if(!io(e.charCodeAt(0)))return!1;return!0}function io(t){return!(mn.Arabic(t)||mn["Arabic Supplement"](t)||mn["Arabic Extended-A"](t)||mn["Arabic Presentation Forms-A"](t)||mn["Arabic Presentation Forms-B"](t))}function ie(t){return!(746!==t&&747!==t&&(t<4352||!(mn["Bopomofo Extended"](t)||mn.Bopomofo(t)||mn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||mn["CJK Compatibility Ideographs"](t)||mn["CJK Compatibility"](t)||mn["CJK Radicals Supplement"](t)||mn["CJK Strokes"](t)||!(!mn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||mn["CJK Unified Ideographs Extension A"](t)||mn["CJK Unified Ideographs"](t)||mn["Enclosed CJK Letters and Months"](t)||mn["Hangul Compatibility Jamo"](t)||mn["Hangul Jamo Extended-A"](t)||mn["Hangul Jamo Extended-B"](t)||mn["Hangul Jamo"](t)||mn["Hangul Syllables"](t)||mn.Hiragana(t)||mn["Ideographic Description Characters"](t)||mn.Kanbun(t)||mn["Kangxi Radicals"](t)||mn["Katakana Phonetic Extensions"](t)||mn.Katakana(t)&&12540!==t||!(!mn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!mn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||mn["Unified Canadian Aboriginal Syllabics"](t)||mn["Unified Canadian Aboriginal Syllabics Extended"](t)||mn["Vertical Forms"](t)||mn["Yijing Hexagram Symbols"](t)||mn["Yi Syllables"](t)||mn["Yi Radicals"](t))))}function L(t){return!(ie(t)||(e=t,mn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||mn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||mn["Letterlike Symbols"](e)||mn["Number Forms"](e)||mn["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||mn["Control Pictures"](e)&&9251!==e||mn["Optical Character Recognition"](e)||mn["Enclosed Alphanumerics"](e)||mn["Geometric Shapes"](e)||mn["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||mn["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||mn["CJK Symbols and Punctuation"](e)||mn.Katakana(e)||mn["Private Use Area"](e)||mn["CJK Compatibility Forms"](e)||mn["Small Form Variants"](e)||mn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function j(t){return t>=1424&&t<=2303||mn["Arabic Presentation Forms-A"](t)||mn["Arabic Presentation Forms-B"](t)}function oe(t,e){return!(!e&&j(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||mn.Khmer(t))}function Ve(t){for(const e of t)if(j(e.charCodeAt(0)))return!0;return!1}const lt="deferred",cn="loading",hn="loaded";let Qn=null,Wn="unavailable",Wi=null;const vr=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Wn="error"),Qn&&Qn(t)};function Sr(){Mr.fire(new yc("pluginStateChange",{pluginStatus:Wn,pluginURL:Wi}))}const Mr=new Bl,Hr=function(){return Wn},Za=function(){if(Wn!==lt||!Wi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Wn=cn,Sr(),Wi&&Tr({url:Wi},t=>{t?vr(t):(Wn=hn,Sr())})},As={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Wn===hn||null!=As.applyArabicShaping,isLoading:()=>Wn===cn,setState(t){Wn=t.pluginStatus,Wi=t.pluginURL},isParsed:()=>null!=As.applyArabicShaping&&null!=As.processBidirectionalText&&null!=As.processStyledBidirectionalText,getPluginURL:()=>Wi};class ts{constructor(e,n){this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch,this.brightness=n.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(e){return function(n,s){for(const u of n)if(!oe(u.charCodeAt(0),s))return!1;return!0}(e,As.isLoaded())}}class Js{constructor(e,n,s,u){this.property=e,this.value=n,this.expression=function(m,g,E,T){if(b(m))return new rt(m,g);if(Pe(m)||Array.isArray(m)&&m.length>0){const z=tt(m,g,E,T);if("error"===z.result)throw new Error(z.value.map($=>`${$.key}: ${$.message}`).join(", "));return z.value}{let z=m;return"string"==typeof m&&"color"===g.type&&(z=Xs.parse(m)),{kind:"constant",isConfigDependent:!1,evaluate:()=>z}}}(void 0===n?e.specification.default:n,e.specification,s,u)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,n,s){return this.property.possiblyEvaluate(this,e,n,s)}}class ca{constructor(e,n,s){this.property=e,this.value=new Js(e,void 0,n,s)}transitioned(e,n){return new gs(this.property,this.value,n,mi({},e.transition,this.transition),e.now)}untransitioned(){return new gs(this.property,this.value,null,{},0)}}class Hs{constructor(e,n,s){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._scope=n,this._options=s,this.isConfigDependent=!1}getValue(e){return ta(this._values[e].value.value)}setValue(e,n){this._values.hasOwnProperty(e)||(this._values[e]=new ca(this._values[e].property,this._scope,this._options)),this._values[e].value=new Js(this._values[e].property,null===n?void 0:ta(n),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].value.expression.isConfigDependent}setTransitionOrValue(e,n){n&&(this._options=n);const s=this._properties.properties;if(e)for(const u in e){const m=e[u];if(Ps(u,"-transition")){const g=u.slice(0,-11);s[g]&&this.setTransition(g,m)}else s.hasOwnProperty(u)&&this.setValue(u,m)}}getTransition(e){return ta(this._values[e].transition)}setTransition(e,n){this._values.hasOwnProperty(e)||(this._values[e]=new ca(this._values[e].property)),this._values[e].transition=ta(n)||void 0}serialize(){const e={};for(const n of Object.keys(this._values)){const s=this.getValue(n);void 0!==s&&(e[n]=s);const u=this.getTransition(n);void 0!==u&&(e[`${n}-transition`]=u)}return e}transitioned(e,n){const s=new Ca(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].transitioned(e,n._values[u]);return s}untransitioned(){const e=new Ca(this._properties);for(const n of Object.keys(this._values))e._values[n]=this._values[n].untransitioned();return e}}class gs{constructor(e,n,s,u,m){const g=u.delay||0,E=u.duration||0;m=m||0,this.property=e,this.value=n,this.begin=m+g,this.end=this.begin+E,e.specification.transition&&(u.delay||u.duration)&&(this.prior=s)}possiblyEvaluate(e,n,s){const u=e.now||0,m=this.value.possiblyEvaluate(e,n,s),g=this.prior;if(g){if(u>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(u<this.begin)return g.possiblyEvaluate(e,n,s);{const E=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(e,n,s),m,Dt(E))}}return m}}class Ca{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,n,s){const u=new za(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].possiblyEvaluate(e,n,s);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class bl{constructor(e,n,s){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._scope=n,this._options=s,this.isConfigDependent=!1}getValue(e){return ta(this._values[e].value)}setValue(e,n){this._values[e]=new Js(this._values[e].property,null===n?void 0:ta(n),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].expression.isConfigDependent}serialize(){const e={};for(const n of Object.keys(this._values)){const s=this.getValue(n);void 0!==s&&(e[n]=s)}return e}possiblyEvaluate(e,n,s){const u=new za(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].possiblyEvaluate(e,n,s);return u}}class ua{constructor(e,n,s){this.property=e,this.value=n,this.parameters=s}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,n,s,u){return this.property.evaluate(this.value,this.parameters,e,n,s,u)}}class za{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class qi{constructor(e){this.specification=e}possiblyEvaluate(e,n){return e.expression.evaluate(n)}interpolate(e,n,s){const u=Rd[this.specification.type];return u?u(e,n,s):e}}class er{constructor(e,n){this.specification=e,this.overrides=n}possiblyEvaluate(e,n,s,u){return new ua(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(n,null,{},s,u)}:e.expression,n)}interpolate(e,n,s){if("constant"!==e.value.kind||"constant"!==n.value.kind)return e;if(void 0===e.value.value||void 0===n.value.value)return new ua(this,{kind:"constant",value:void 0},e.parameters);const u=Rd[this.specification.type];return u?new ua(this,{kind:"constant",value:u(e.value.value,n.value.value,s)},e.parameters):e}evaluate(e,n,s,u,m,g){return"constant"===e.kind?e.value:e.evaluate(n,s,u,m,g)}}class ss{constructor(e){this.specification=e}possiblyEvaluate(e,n,s,u){return!!e.expression.evaluate(n,null,{},s,u)}interpolate(){return!1}}class pa{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const n=new ts(0,{});for(const s in e){const u=e[s];u.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new Js(u,void 0),g=this.defaultTransitionablePropertyValues[s]=new ca(u);this.defaultTransitioningPropertyValues[s]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate(n)}}}at(er,"DataDrivenProperty"),at(qi,"DataConstantProperty"),at(ss,"ColorRampProperty");var ri=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Du(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function fd(t){if(Array.isArray(t))return t.map(fd);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=fd(t[n]);return e}return Du(t)}function Uc(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Uc(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function Nc(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Uc(t)||(t=e0(t));const n=t;let s=!0;try{s=function(z){if(!hl(z))return z;let $=fd(z);return Jh($),$=Bh($),$}(n)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const u=ri[`filter_${e}`],m=Fe(s,u);let g=null;if("error"===m.result)throw new Error(m.value.map(z=>`${z.key}: ${z.message}`).join(", "));g=(z,$,W)=>m.value.evaluate(z,$,{},W);let E=null,T=null;if(s!==n){const z=Fe(n,u);if("error"===z.result)throw new Error(z.value.map($=>`${$.key}: ${$.message}`).join(", "));E=($,W,Q,le,de)=>z.value.evaluate($,W,{},Q,void 0,void 0,le,de),T=!Mh(z.value.expression)}return{filter:g,dynamicFilter:E||void 0,needGeometry:D1(s),needFeature:!!T}}function Bh(t){if(!Array.isArray(t))return t;const e=function(n){if(X0.has(n[0]))for(let s=1;s<n.length;s++)if(hl(n[s]))return!0;return n}(t);return!0===e?e:e.map(n=>Bh(n))}function Jh(t){let e=!1;const n=[];if("case"===t[0]){for(let s=1;s<t.length-1;s+=2)e=e||hl(t[s]),n.push(t[s+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||hl(t[1]);for(let s=2;s<t.length-1;s+=2)n.push(t[s+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||hl(t[1]);for(let s=1;s<t.length-1;s+=2)n.push(t[s+1])}e&&(t.length=0,t.push("any",...n));for(let s=1;s<t.length;s++)Jh(t[s])}function hl(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let n=1;n<t.length;n++)if(hl(t[n]))return!0;return!1}const X0=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function K0(t,e){return t<e?-1:t>e?1:0}function D1(t){if(!Array.isArray(t))return!1;if("within"===t[0]||"distance"===t[0])return!0;for(let e=1;e<t.length;e++)if(D1(t[e]))return!0;return!1}function e0(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?P1(t[1],t[2],"=="):"!="===e?xp(P1(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?P1(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(e0))):"all"===e?["all"].concat(t.slice(1).map(e0)):"none"===e?["all"].concat(t.slice(1).map(e0).map(xp)):"in"===e?Po(t[1],t.slice(2)):"!in"===e?xp(Po(t[1],t.slice(2))):"has"===e?da(t[1]):"!has"!==e||xp(da(t[1]));var n}function P1(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Po(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(n=>typeof n!=typeof e[0])?["filter-in-large",t,["literal",e.sort(K0)]]:["filter-in-small",t,["literal",e]]}}function da(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function xp(t){return["!",t]}function wl(t,e){return e?`${t}\x1f${e}`:t}const qu="-transition",Pu=new Set(["fill","line","background","hillshade","raster"]);class el extends Bl{constructor(e,n,s,u,m){if(super(),this.id=e.id,this.fqid=wl(this.id,s),this.type=e.type,this.scope=s,this.lut=u,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&"slot"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),e.slot&&(this.slot=e.slot),n.layout&&(this._unevaluatedLayout=new bl(n.layout,this.scope,m),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),n.paint)){this._transitionablePaint=new Hs(n.paint,this.scope,m);for(const g in e.paint)this.setPaintProperty(g,e.paint[g]);for(const g in e.layout)this.setLayoutProperty(g,e.layout[g]);this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new za(n.paint)}}onAdd(e){}onRemove(e){}isDraped(e){return Pu.has(this.type)}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,n){if("custom"===this.type&&"visibility"===e)return void(this.visibility=n);const s=this._unevaluatedLayout;s._properties.properties[e]&&(s.setValue(e,n),this.isConfigDependent=this.isConfigDependent||s.isConfigDependent,"visibility"===e&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(e){return Ps(e,qu)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,n){const s=this._transitionablePaint,u=s._properties.properties;if(Ps(e,qu)){const W=e.slice(0,-11);return u[W]&&s.setTransition(W,n||void 0),!1}if(!u[e])return!1;const m=s._values[e],g=m.value.isDataDriven(),E=m.value;s.setValue(e,n),this.isConfigDependent=this.isConfigDependent||s.isConfigDependent,this._handleSpecialPaintPropertyUpdate(e);const T=s._values[e].value,z=T.isDataDriven(),$=Ps(e,"pattern")||"line-dasharray"===e;return z||g||$||this._handleOverridablePaintPropertyUpdate(e,E,T)}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getDefaultProgramParams(e,n,s){return null}_handleOverridablePaintPropertyUpdate(e,n,s){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,n){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,n)}serialize(){return Yr({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(e,n)=>!(void 0===e||"layout"===n&&!Object.keys(e).length||"paint"===n&&!Object.keys(e).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const e in this.paint._values){const n=this.paint.get(e);if(n instanceof ua&&_h(n.property.specification)&&("source"===n.value.kind||"composite"===n.value.kind)&&n.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Nc(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(e){this._stats&&("shadow"===e.renderPass?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(e){}queryIntersectsFeature(e,n,s,u,m,g,E,T,z){}queryIntersectsMatchingFeature(e,n,s,u){}}const J1={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ep{constructor(e,n){this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class sl{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,n){return e._trim(),n&&(e.isTransferred=!0,n.add(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const n=Object.create(this.prototype);return n.arrayBuffer=e.arrayBuffer,n.length=e.length,n.capacity=e.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...e){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...e){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function va(t,e=1){let n=0,s=0;return{members:t.map(u=>{const m=J1[u.type].BYTES_PER_ELEMENT,g=n=yh(n,Math.max(e,m)),E=u.components||1;return s=Math.max(s,m),n+=m*E,{name:u.name,type:u.type,components:E,offset:g}}),size:yh(n,Math.max(s,e)),alignment:e}}function yh(t,e){return Math.ceil(t/e)*e}class Xu extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.int16[u+0]=n,this.int16[u+1]=s,e}}Xu.prototype.bytesPerElement=4,at(Xu,"StructArrayLayout2i4");class Ip extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const m=3*e;return this.int16[m+0]=n,this.int16[m+1]=s,this.int16[m+2]=u,e}}Ip.prototype.bytesPerElement=6,at(Ip,"StructArrayLayout3i6");class Fh extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=4*e;return this.int16[g+0]=n,this.int16[g+1]=s,this.int16[g+2]=u,this.int16[g+3]=m,e}}Fh.prototype.bytesPerElement=8,at(Fh,"StructArrayLayout4i8");class _u extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,s,u,m)}emplace(e,n,s,u,m,g){const E=5*e;return this.int16[E+0]=n,this.int16[E+1]=s,this.int16[E+2]=u,this.int16[E+3]=m,this.int16[E+4]=g,e}}_u.prototype.bytesPerElement=10,at(_u,"StructArrayLayout5i10");class Ku extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,n,s,u,m,g,E)}emplace(e,n,s,u,m,g,E,T){const z=6*e,$=12*e,W=3*e;return this.int16[z+0]=n,this.int16[z+1]=s,this.uint8[$+4]=u,this.uint8[$+5]=m,this.uint8[$+6]=g,this.uint8[$+7]=E,this.float32[W+2]=T,e}}Ku.prototype.bytesPerElement=12,at(Ku,"StructArrayLayout2i4ub1f12");class t0 extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=4*e;return this.float32[g+0]=n,this.float32[g+1]=s,this.float32[g+2]=u,this.float32[g+3]=m,e}}t0.prototype.bytesPerElement=16,at(t0,"StructArrayLayout4f16");class Ru extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const m=3*e;return this.float32[m+0]=n,this.float32[m+1]=s,this.float32[m+2]=u,e}}Ru.prototype.bytesPerElement=12,at(Ru,"StructArrayLayout3f12");class eh extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,s,u,m)}emplace(e,n,s,u,m,g){const E=6*e,T=3*e;return this.uint16[E+0]=n,this.uint16[E+1]=s,this.uint16[E+2]=u,this.uint16[E+3]=m,this.float32[T+2]=g,e}}eh.prototype.bytesPerElement=12,at(eh,"StructArrayLayout4ui1f12");class rf extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=4*e;return this.uint16[g+0]=n,this.uint16[g+1]=s,this.uint16[g+2]=u,this.uint16[g+3]=m,e}}rf.prototype.bytesPerElement=8,at(rf,"StructArrayLayout4ui8");class sf extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g){const E=this.length;return this.resize(E+1),this.emplace(E,e,n,s,u,m,g)}emplace(e,n,s,u,m,g,E){const T=6*e;return this.int16[T+0]=n,this.int16[T+1]=s,this.int16[T+2]=u,this.int16[T+3]=m,this.int16[T+4]=g,this.int16[T+5]=E,e}}sf.prototype.bytesPerElement=12,at(sf,"StructArrayLayout6i12");class x2 extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Q){const le=this.length;return this.resize(le+1),this.emplace(le,e,n,s,u,m,g,E,T,z,$,W,Q)}emplace(e,n,s,u,m,g,E,T,z,$,W,Q,le){const de=12*e;return this.int16[de+0]=n,this.int16[de+1]=s,this.int16[de+2]=u,this.int16[de+3]=m,this.uint16[de+4]=g,this.uint16[de+5]=E,this.uint16[de+6]=T,this.uint16[de+7]=z,this.int16[de+8]=$,this.int16[de+9]=W,this.int16[de+10]=Q,this.int16[de+11]=le,e}}x2.prototype.bytesPerElement=24,at(x2,"StructArrayLayout4i4ui4i24");class h1 extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g){const E=this.length;return this.resize(E+1),this.emplace(E,e,n,s,u,m,g)}emplace(e,n,s,u,m,g,E){const T=10*e,z=5*e;return this.int16[T+0]=n,this.int16[T+1]=s,this.int16[T+2]=u,this.float32[z+2]=m,this.float32[z+3]=g,this.float32[z+4]=E,e}}h1.prototype.bytesPerElement=20,at(h1,"StructArrayLayout3i3f20");class af extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint32[1*e+0]=n,e}}af.prototype.bytesPerElement=4,at(af,"StructArrayLayout1ul4");class kd extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.float32[1*e+0]=n,e}}kd.prototype.bytesPerElement=4,at(kd,"StructArrayLayout1f4");class Vh extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.uint16[u+0]=n,this.uint16[u+1]=s,e}}Vh.prototype.bytesPerElement=4,at(Vh,"StructArrayLayout2ui4");class Hc extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Q,le){const de=this.length;return this.resize(de+1),this.emplace(de,e,n,s,u,m,g,E,T,z,$,W,Q,le)}emplace(e,n,s,u,m,g,E,T,z,$,W,Q,le,de){const be=20*e,xe=10*e;return this.int16[be+0]=n,this.int16[be+1]=s,this.int16[be+2]=u,this.int16[be+3]=m,this.int16[be+4]=g,this.float32[xe+3]=E,this.float32[xe+4]=T,this.float32[xe+5]=z,this.float32[xe+6]=$,this.int16[be+14]=W,this.uint32[xe+8]=Q,this.uint16[be+18]=le,this.uint16[be+19]=de,e}}Hc.prototype.bytesPerElement=40,at(Hc,"StructArrayLayout5i4f1i1ul2ui40");class Vf extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,n,s,u,m,g,E)}emplace(e,n,s,u,m,g,E,T){const z=8*e;return this.int16[z+0]=n,this.int16[z+1]=s,this.int16[z+2]=u,this.int16[z+4]=m,this.int16[z+5]=g,this.int16[z+6]=E,this.int16[z+7]=T,e}}Vf.prototype.bytesPerElement=16,at(Vf,"StructArrayLayout3i2i2i16");class xc extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,s,u,m)}emplace(e,n,s,u,m,g){const E=4*e,T=8*e;return this.float32[E+0]=n,this.float32[E+1]=s,this.float32[E+2]=u,this.int16[T+6]=m,this.int16[T+7]=g,e}}xc.prototype.bytesPerElement=16,at(xc,"StructArrayLayout2f1f2i16");class z0 extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=12*e,E=3*e;return this.uint8[g+0]=n,this.uint8[g+1]=s,this.float32[E+1]=u,this.float32[E+2]=m,e}}z0.prototype.bytesPerElement=12,at(z0,"StructArrayLayout2ub2f12");class eu extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const m=3*e;return this.uint16[m+0]=n,this.uint16[m+1]=s,this.uint16[m+2]=u,e}}eu.prototype.bytesPerElement=6,at(eu,"StructArrayLayout3ui6");class p1 extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe,je,gt,_t,bt,nn){const Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe,je,gt,_t,bt,nn)}emplace(e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe,je,gt,_t,bt,nn,Yt){const Sn=30*e,Rn=15*e,ai=60*e;return this.int16[Sn+0]=n,this.int16[Sn+1]=s,this.int16[Sn+2]=u,this.float32[Rn+2]=m,this.float32[Rn+3]=g,this.uint16[Sn+8]=E,this.uint16[Sn+9]=T,this.uint32[Rn+5]=z,this.uint32[Rn+6]=$,this.uint32[Rn+7]=W,this.uint16[Sn+16]=Q,this.uint16[Sn+17]=le,this.uint16[Sn+18]=de,this.float32[Rn+10]=be,this.float32[Rn+11]=xe,this.uint8[ai+48]=je,this.uint8[ai+49]=gt,this.uint8[ai+50]=_t,this.uint32[Rn+13]=bt,this.int16[Sn+28]=nn,this.uint8[ai+58]=Yt,e}}p1.prototype.bytesPerElement=60,at(p1,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Sd extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe,je,gt,_t,bt,nn,Yt,Sn,Rn,ai,Di,wi,Zi,Mo,Gi,yo,Ri,vo,Oo){const Co=this.length;return this.resize(Co+1),this.emplace(Co,e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe,je,gt,_t,bt,nn,Yt,Sn,Rn,ai,Di,wi,Zi,Mo,Gi,yo,Ri,vo,Oo)}emplace(e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe,je,gt,_t,bt,nn,Yt,Sn,Rn,ai,Di,wi,Zi,Mo,Gi,yo,Ri,vo,Oo,Co){const ar=22*e,Ao=44*e,jo=88*e;return this.float32[ar+0]=n,this.float32[ar+1]=s,this.int16[Ao+4]=u,this.int16[Ao+5]=m,this.int16[Ao+6]=g,this.int16[Ao+7]=E,this.int16[Ao+8]=T,this.int16[Ao+9]=z,this.int16[Ao+10]=$,this.int16[Ao+11]=W,this.int16[Ao+12]=Q,this.uint16[Ao+13]=le,this.uint16[Ao+14]=de,this.uint16[Ao+15]=be,this.uint16[Ao+16]=xe,this.uint16[Ao+17]=je,this.uint16[Ao+18]=gt,this.uint16[Ao+19]=_t,this.uint16[Ao+20]=bt,this.uint16[Ao+21]=nn,this.uint16[Ao+22]=Yt,this.uint16[Ao+23]=Sn,this.uint16[Ao+24]=Rn,this.uint16[Ao+25]=ai,this.uint16[Ao+26]=Di,this.uint16[Ao+27]=wi,this.uint32[ar+14]=Zi,this.float32[ar+15]=Mo,this.float32[ar+16]=Gi,this.float32[ar+17]=yo,this.float32[ar+18]=Ri,this.float32[ar+19]=vo,this.float32[ar+20]=Oo,this.uint8[jo+84]=Co,e}}Sd.prototype.bytesPerElement=88,at(Sd,"StructArrayLayout2f9i15ui1ul6f1ub88");class Y0 extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,s,u,m)}emplace(e,n,s,u,m,g){const E=5*e;return this.float32[E+0]=n,this.float32[E+1]=s,this.float32[E+2]=u,this.float32[E+3]=m,this.float32[E+4]=g,e}}Y0.prototype.bytesPerElement=20,at(Y0,"StructArrayLayout5f20");class O0 extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,n,s,u,m,g,E)}emplace(e,n,s,u,m,g,E,T){const z=7*e;return this.float32[z+0]=n,this.float32[z+1]=s,this.float32[z+2]=u,this.float32[z+3]=m,this.float32[z+4]=g,this.float32[z+5]=E,this.float32[z+6]=T,e}}O0.prototype.bytesPerElement=28,at(O0,"StructArrayLayout7f28");class th extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.float32[u+0]=n,this.float32[u+1]=s,e}}th.prototype.bytesPerElement=8,at(th,"StructArrayLayout2f8");class Yu extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=6*e;return this.uint32[3*e+0]=n,this.uint16[g+2]=s,this.uint16[g+3]=u,this.uint16[g+4]=m,e}}Yu.prototype.bytesPerElement=12,at(Yu,"StructArrayLayout1ul3ui12");class tu extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint16[1*e+0]=n,e}}tu.prototype.bytesPerElement=2,at(tu,"StructArrayLayout1ui2");class Al extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe){const je=this.length;return this.resize(je+1),this.emplace(je,e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe)}emplace(e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe,je){const gt=16*e;return this.float32[gt+0]=n,this.float32[gt+1]=s,this.float32[gt+2]=u,this.float32[gt+3]=m,this.float32[gt+4]=g,this.float32[gt+5]=E,this.float32[gt+6]=T,this.float32[gt+7]=z,this.float32[gt+8]=$,this.float32[gt+9]=W,this.float32[gt+10]=Q,this.float32[gt+11]=le,this.float32[gt+12]=de,this.float32[gt+13]=be,this.float32[gt+14]=xe,this.float32[gt+15]=je,e}}Al.prototype.bytesPerElement=64,at(Al,"StructArrayLayout16f64");class $f extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,n,s,u,m,g,E)}emplace(e,n,s,u,m,g,E,T){const z=10*e,$=5*e;return this.uint16[z+0]=n,this.uint16[z+1]=s,this.uint16[z+2]=u,this.uint16[z+3]=m,this.float32[$+2]=g,this.float32[$+3]=E,this.float32[$+4]=T,e}}$f.prototype.bytesPerElement=20,at($f,"StructArrayLayout4ui3f20");class Z0 extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.int16[1*e+0]=n,e}}Z0.prototype.bytesPerElement=2,at(Z0,"StructArrayLayout1i2");class md extends sl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint8[1*e+0]=n,e}}md.prototype.bytesPerElement=1,at(md,"StructArrayLayout1ub1");class Ep extends ep{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ep.prototype.size=40;class zu extends Hc{get(e){return new Ep(this,e)}}at(zu,"CollisionBoxArray");class tp extends ep{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}tp.prototype.size=60;class R1 extends p1{get(e){return new tp(this,e)}}at(R1,"PlacedSymbolArray");class n0 extends ep{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(e){this._structArray.uint32[this._pos4+14]=e}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(e){this._structArray.float32[this._pos4+18]=e}get occlusionState(){return this._structArray.float32[this._pos4+19]}set occlusionState(e){this._structArray.float32[this._pos4+19]=e}get occlusionOpacity(){return this._structArray.float32[this._pos4+20]}set occlusionOpacity(e){this._structArray.float32[this._pos4+20]=e}get hasIconTextFit(){return this._structArray.uint8[this._pos1+84]}}n0.prototype.size=88;class f1 extends Sd{get(e){return new n0(this,e)}}at(f1,"SymbolInstanceArray");class Q0 extends kd{getoffsetX(e){return this.float32[1*e+0]}}at(Q0,"GlyphOffsetArray");class J0 extends Xu{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}at(J0,"SymbolLineVertexArray");class e1 extends ep{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}e1.prototype.size=12;class lf extends Yu{get(e){return new e1(this,e)}}at(lf,"FeatureIndexArray");class La extends Vh{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}at(La,"FillExtrusionCentroidArray");const z1=va([{name:"a_pos",components:2,type:"Int16"}],4),cf=va([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class al{constructor(e=[]){this.segments=e}_prepareSegment(e,n,s,u){let m=this.segments[this.segments.length-1];return e>al.MAX_VERTEX_ARRAY_LENGTH&&fa(`Max vertices per segment is ${al.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!m||m.vertexLength+e>al.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==u)&&(m={vertexOffset:n,primitiveOffset:s,vertexLength:0,primitiveLength:0},void 0!==u&&(m.sortKey=u),this.segments.push(m)),m}prepareSegment(e,n,s,u){return this._prepareSegment(e,n.length,s.length,u)}get(){return this.segments}destroy(){for(const e of this.segments)for(const n in e.vaos)e.vaos[n].destroy()}static simpleSegment(e,n,s,u){return new al([{vertexOffset:e,primitiveOffset:n,vertexLength:s,primitiveLength:u,vaos:{},sortKey:0}])}}function np(t,e){return 256*(t=On(Math.floor(t),0,255))+On(Math.floor(e),0,255)}al.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,at(al,"SegmentVector");const jf=va([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Uf=va([{name:"a_dash",components:4,type:"Uint16"}]);class O1{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(e,n,s,u){this.ids.push(I2(e)),this.positions.push(n,s,u)}eachPosition(e,n){const s=I2(e);let u=0,m=this.ids.length-1;for(;u<m;){const g=u+m>>1;this.ids[g]>=s?m=g:u=g+1}for(;this.ids[u]===s;)n(this.positions[3*u],this.positions[3*u+1],this.positions[3*u+2]),u++}static serialize(e,n){const s=new Float64Array(e.ids),u=new Uint32Array(e.positions);return uf(s,u,0,s.length-1),n&&(n.add(s.buffer),n.add(u.buffer)),{ids:s,positions:u}}static deserialize(e){const n=new O1;let s;n.ids=e.ids,n.positions=e.positions;for(const u of n.ids)u!==s&&n.uniqueIds.push(u),s=u;return n.indexed=!0,n}}function I2(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:ll(String(t))}function uf(t,e,n,s){for(;n<s;){const u=t[n+s>>1];let m=n-1,g=s+1;for(;;){do{m++}while(t[m]<u);do{g--}while(t[g]>u);if(m>=g)break;cm(t,m,g),cm(e,3*m,3*g),cm(e,3*m+1,3*g+1),cm(e,3*m+2,3*g+2)}g-n<s-g?(uf(t,e,n,g),n=g+1):(uf(t,e,g+1,s),s=g)}}function cm(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}at(O1,"FeaturePositionMap");class m1{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,n){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,n),this.initialized=!0),!!this.location}set(e,n,s){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class ip extends m1{constructor(e){super(e),this.current=0}set(e,n,s){this.fetchUniformLocation(e,n)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}}class Gc extends m1{constructor(e){super(e),this.current=0}set(e,n,s){this.fetchUniformLocation(e,n)&&this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class nh extends m1{constructor(e){super(e),this.current=[0,0]}set(e,n,s){this.fetchUniformLocation(e,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}}class op extends m1{constructor(e){super(e),this.current=[0,0,0]}set(e,n,s){this.fetchUniformLocation(e,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}}class Hf extends m1{constructor(e){super(e),this.current=[0,0,0,0]}set(e,n,s){this.fetchUniformLocation(e,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3])))}}class df extends m1{constructor(e){super(e),this.current=Xs.transparent.toRenderColor(null)}set(e,n,s){this.fetchUniformLocation(e,n)&&(s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a)))}}const E2=new Float32Array(16);class bh extends m1{constructor(e){super(e),this.current=E2}set(e,n,s){if(this.fetchUniformLocation(e,n)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let u=1;u<16;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}}const hf=new Float32Array(9),um=new Float32Array(4);class pf extends m1{constructor(e){super(e),this.current=um}set(e,n,s){if(this.fetchUniformLocation(e,n))for(let u=0;u<4;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}function rp(t){return[np(255*t.r,255*t.g),np(255*t.b,255*t.a)]}class Cp{constructor(e,n,s,u){this.value=e,this.uniformNames=n.map(m=>`u_${m}`),this.type=s,this.context=u}setUniform(e,n,s,u,m){const g=u.constantOr(this.value);n.set(e,m,g instanceof Xs?g.toRenderColor(this.context.lut):g)}getBinding(e,n){return"color"===this.type?new df(e):new Gc(e)}}class Zu{constructor(e,n){this.uniformNames=n.map(s=>`u_${s}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,n,s,u,m){const g="u_pattern"===m||"u_dash"===m?this.pattern:"u_pixel_ratio"===m?this.pixelRatio:null;g&&n.set(e,m,g)}getBinding(e,n){return"u_pattern"===n||"u_dash"===n?new Hf(e):new Gc(e)}}class L1{constructor(e,n,s,u){this.expression=e,this.type=s,this.maxValue=0,this.paintVertexAttributes=n.map(m=>({name:`a_${m}`,type:"Float32",components:"color"===s?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,n,s,u,m,g,E){const T=this.paintVertexArray.length,z=this.expression.evaluate(new ts(0,{brightness:g}),n,{},m,u,E);this.paintVertexArray.resize(e),this._setPaintValue(T,e,z,this.context)}updatePaintArray(e,n,s,u,m,g,E){const T=this.expression.evaluate({zoom:0,brightness:E},s,u,void 0,m);this._setPaintValue(e,n,T,this.context)}_setPaintValue(e,n,s,u){if("color"===this.type){const m=rp(s.toRenderColor(u.lut));for(let g=e;g<n;g++)this.paintVertexArray.emplace(g,m[0],m[1])}else{for(let m=e;m<n;m++)this.paintVertexArray.emplace(m,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ih{constructor(e,n,s,u,m,g){this.expression=e,this.uniformNames=n.map(E=>`u_${E}_t`),this.type=s,this.useIntegerZoom=u,this.context=m,this.maxValue=0,this.paintVertexAttributes=n.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===s?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(e,n,s,u,m,g,E){const T=this.expression.evaluate(new ts(this.context.zoom,{brightness:g}),n,{},m,u,E),z=this.expression.evaluate(new ts(this.context.zoom+1,{brightness:g}),n,{},m,u,E),$=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue($,e,T,z,this.context)}updatePaintArray(e,n,s,u,m,g,E){const T=this.expression.evaluate({zoom:this.context.zoom,brightness:E},s,u,void 0,m),z=this.expression.evaluate({zoom:this.context.zoom+1,brightness:E},s,u,void 0,m);this._setPaintValue(e,n,T,z,this.context)}_setPaintValue(e,n,s,u,m){if("color"===this.type){const g=rp(s.toRenderColor(m.lut)),E=rp(s.toRenderColor(m.lut));for(let T=e;T<n;T++)this.paintVertexArray.emplace(T,g[0],g[1],E[0],E[1])}else{for(let g=e;g<n;g++)this.paintVertexArray.emplace(g,s,u);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,n,s,u,m){const g=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,E=On(this.expression.interpolationFactor(g,this.context.zoom,this.context.zoom+1),0,1);n.set(e,m,E)}getBinding(e,n){return new Gc(e)}}class B1{constructor(e,n,s,u,m){this.expression=e,this.layerId=m,this.paintVertexAttributes=("array"===s?Uf:jf).members;for(let g=0;g<n.length;++g);this.paintVertexArray=new u}populatePaintArray(e,n,s,u){const m=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(m,e,n.patterns&&n.patterns[this.layerId],s)}updatePaintArray(e,n,s,u,m,g,E){this._setPaintValues(e,n,s.patterns&&s.patterns[this.layerId],g)}_setPaintValues(e,n,s,u){if(!u||!s)return;const m=u[s];if(!m)return;const{tl:g,br:E,pixelRatio:T}=m;for(let z=e;z<n;z++)this.paintVertexArray.emplace(z,g[0],g[1],E[0],E[1],T)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class g1{constructor(e,n,s=(()=>!0)){this.binders={},this._buffers=[],this.context=n;const u=[];for(const m in e.paint._values){const g=e.paint.get(m);if(!s(m)||!(g instanceof ua&&_h(g.property.specification)))continue;const E=Gm(m,e.type),T=g.value,z=g.property.specification.type,$=!!g.property.useIntegerZoom,W="line-dasharray"===m||m.endsWith("pattern"),Q="line-dasharray"===m&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==T.kind||Q)if("source"===T.kind||Q||W){const le=dm(m,z,"source");this.binders[m]=W?new B1(T,E,z,le,e.id):new L1(T,E,z,le),u.push(`/a_${m}`)}else{const le=dm(m,z,"composite");this.binders[m]=new ih(T,E,z,$,n,le),u.push(`/z_${m}`)}else this.binders[m]=W?new Zu(T.value,E):new Cp(T.value,E,z,n),u.push(`/u_${m}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const n=this.binders[e];return n instanceof L1||n instanceof ih?n.maxValue:0}populatePaintArrays(e,n,s,u,m,g,E){for(const T in this.binders){const z=this.binders[T];z.context=this.context,(z instanceof L1||z instanceof ih||z instanceof B1)&&z.populatePaintArray(e,n,s,u,m,g,E)}}setConstantPatternPositions(e){for(const n in this.binders){const s=this.binders[n];s instanceof Zu&&s.setConstantPatternPositions(e)}}updatePaintArrays(e,n,s,u,m,g,E,T){let z=!1;const $=Object.keys(e),W=0!==$.length,Q=W?$:n.uniqueIds;this.context.lut=m.lut;for(const le in this.binders){const de=this.binders[le];if(de.context=this.context,(de instanceof L1||de instanceof ih||de instanceof B1)&&(!0===de.expression.isStateDependent||!1===de.expression.isLightConstant)){const be=m.paint.get(le);de.expression=be.value;for(const xe of Q){const je=e[xe.toString()];n.eachPosition(xe,(gt,_t,bt)=>{const nn=u.feature(gt);de.updatePaintArray(_t,bt,nn,je,g,E,T)})}if(!W)for(const xe of s.uniqueIds){const je=e[xe.toString()];s.eachPosition(xe,(gt,_t,bt)=>{const nn=u.feature(gt);de.updatePaintArray(_t,bt,nn,je,g,E,T)})}z=!0}}return z}defines(){const e=[];for(const n in this.binders){const s=this.binders[n];(s instanceof Cp||s instanceof Zu)&&e.push(...s.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof L1||s instanceof ih||s instanceof B1)for(let u=0;u<s.paintVertexAttributes.length;u++)e.push(s.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof Cp||s instanceof Zu||s instanceof ih)for(const u of s.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const n=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Cp||u instanceof Zu||u instanceof ih)for(const m of u.uniformNames)n.push({name:m,property:s,binding:u.getBinding(e,m)})}return n}setUniforms(e,n,s,u,m){for(const{name:g,property:E,binding:T}of s)this.binders[E].setUniform(e,T,m,u.get(E),g)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const n=this.binders[e];(n instanceof L1||n instanceof ih||n instanceof B1)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const n in this.binders){const s=this.binders[n];(s instanceof L1||s instanceof ih||s instanceof B1)&&s.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const n=this.binders[e];(n instanceof L1||n instanceof ih||n instanceof B1)&&n.destroy()}}}class v1{constructor(e,n,s=(()=>!0)){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new g1(u,n,s);this.needsUpload=!1,this._featureMap=new O1,this._featureMapWithoutIds=new O1,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(e,n,s,u,m,g,E,T){for(const z in this.programConfigurations)this.programConfigurations[z].populatePaintArrays(e,n,u,m,g,E,T);void 0!==n.id?this._featureMap.add(n.id,s,this._bufferOffset,e):(this._featureMapWithoutIds.add(this._idlessCounter,s,this._bufferOffset,e),this._idlessCounter+=1),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,n,s,u,m,g){for(const E of s)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(e,this._featureMap,this._featureMapWithoutIds,n,E,u,m,g||0)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Gf={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Gm(t,e){return Gf[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const C2={"line-pattern":{source:eh,composite:eh},"fill-pattern":{source:eh,composite:eh},"fill-extrusion-pattern":{source:eh,composite:eh},"line-dasharray":{source:rf,composite:rf}},Wm={color:{source:th,composite:t0},number:{source:kd,composite:th}};function dm(t,e,n){const s=C2[t];return s&&s[n]||Wm[e][n]}at(Cp,"ConstantBinder"),at(Zu,"PatternConstantBinder"),at(L1,"SourceExpressionBinder"),at(B1,"PatternCompositeBinder"),at(ih,"CompositeExpressionBinder"),at(g1,"ProgramConfiguration",{omit:["_buffers"]}),at(v1,"ProgramConfigurationSet");const Vd=Z/Math.PI/2,sp=5,Wf=6,ap=16383,qf=[64,32,16],o0=-Vd,yu=Vd;function t1(t,e,n,s=Vd){return n=rs(n),[t*Math.sin(n)*s,-e*s,t*Math.cos(n)*s]}function Ic(t,e,n){return t1(Math.cos(rs(t)),Math.sin(rs(t)),e,n)}const lp=6371008.8,F1=2*Math.PI*lp;class oa{constructor(e,n){if(isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new oa(bo(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const n=Math.PI/180,s=this.lat*n,u=e.lat*n,m=Math.sin(s)*Math.sin(u)+Math.cos(s)*Math.cos(u)*Math.cos((e.lng-this.lng)*n);return lp*Math.acos(Math.min(m,1))}toBounds(e=0){const n=360*e/40075017,s=n/Math.cos(Math.PI/180*this.lat);return new n1({lng:this.lng-s,lat:this.lat-n},{lng:this.lng+s,lat:this.lat+n})}toEcef(e){return Ic(this.lat,this.lng,Vd+e*Vd/lp)}static convert(e){if(e instanceof oa)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new oa(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new oa(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class n1{constructor(e,n){if(e)if(n)this.setSouthWest(e).setNorthEast(n);else if(4===e.length){const s=e;this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]])}else{const s=e;this.setSouthWest(s[0]).setNorthEast(s[1])}}setNorthEast(e){return this._ne=e instanceof oa?new oa(e.lng,e.lat):oa.convert(e),this}setSouthWest(e){return this._sw=e instanceof oa?new oa(e.lng,e.lat):oa.convert(e),this}extend(e){const n=this._sw,s=this._ne;let u,m;if(e instanceof oa)u=e,m=e;else{if(!(e instanceof n1))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(n1.convert(e)):this.extend(oa.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(oa.convert(e)):this;if(u=e._sw,m=e._ne,!u||!m)return this}return n||s?(n.lng=Math.min(u.lng,n.lng),n.lat=Math.min(u.lat,n.lat),s.lng=Math.max(m.lng,s.lng),s.lat=Math.max(m.lat,s.lat)):(this._sw=new oa(u.lng,u.lat),this._ne=new oa(m.lng,m.lat)),this}getCenter(){return new oa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new oa(this.getWest(),this.getNorth())}getSouthEast(){return new oa(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:s}=oa.convert(e);let u=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=s&&s<=this._ne.lat&&u}static convert(e){return!e||e instanceof n1?e:new n1(e)}}var hm={};!function(n){function s(m,g,E){var T=u(256*m,256*(g=Math.pow(2,E)-g-1),E),z=u(256*(m+1),256*(g+1),E);return T[0]+","+T[1]+","+z[0]+","+z[1]}function u(m,g,E){var T=2*Math.PI*6378137/256/Math.pow(2,E);return[m*T-2*Math.PI*6378137/2,g*T-2*Math.PI*6378137/2]}n.getURL=function(m,g,E,T,z,$){return $=$||{},m+"?"+["bbox="+s(E,T,z),"format="+($.format||"image/png"),"service="+($.service||"WMS"),"version="+($.version||"1.1.1"),"request="+($.request||"GetMap"),"srs="+($.srs||"EPSG:3857"),"width="+($.width||256),"height="+($.height||256),"layers="+g].join("&")},n.getTileBBox=s,n.getMercCoords=u,Object.defineProperty(n,"__esModule",{value:!0})}(hm);var k2=hm;class cp{constructor(e,n,s){this.z=e,this.x=n,this.y=s,this.key=_1(0,e,e,n,s)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,n){const s=k2.getTileBBox(this.x,this.y,this.z),u=function(m,g,E){let T,z="";for(let $=m;$>0;$--)T=1<<$-1,z+=(g&T?1:0)+(E&T?2:0);return z}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Xf{constructor(e,n){this.wrap=e,this.canonical=n,this.key=_1(e,n.z,n.z,n.x,n.y)}}class Ec{constructor(e,n,s,u,m){this.overscaledZ=e,this.wrap=n,this.canonical=new cp(s,+u,+m),this.key=0===n&&e===s?this.canonical.key:_1(n,e,s,u,m)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const n=this.canonical.z-e;return e>this.canonical.z?new Ec(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ec(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(e,n=!0){if(this.overscaledZ===e&&n)return this.key;if(e>this.canonical.z)return _1(this.wrap*+n,e,this.canonical.z,this.canonical.x,this.canonical.y);{const s=this.canonical.z-e;return _1(this.wrap*+n,e,e,this.canonical.x>>s,this.canonical.y>>s)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const n=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.z<this.canonical.z&&e.canonical.x===this.canonical.x>>n&&e.canonical.y===this.canonical.y>>n}children(e){if(this.overscaledZ>=e)return[new Ec(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,s=2*this.canonical.x,u=2*this.canonical.y;return[new Ec(n,this.wrap,n,s,u),new Ec(n,this.wrap,n,s+1,u),new Ec(n,this.wrap,n,s,u+1),new Ec(n,this.wrap,n,s+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Ec(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Ec(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Xf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function _1(t,e,n,s,u){const m=1<<Math.min(n,22);let g=m*(u%m)+s%m;return t&&n<22&&(g+=m*m*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*g+n)+(e-n)}const pm=[t=>{let e=t.canonical.x-1,n=t.wrap;return e<0&&(e=(1<<t.canonical.z)-1,n--),new Ec(t.overscaledZ,n,t.canonical.z,e,t.canonical.y)},t=>{let e=t.canonical.x+1,n=t.wrap;return e===1<<t.canonical.z&&(e=0,n++),new Ec(t.overscaledZ,n,t.canonical.z,e,t.canonical.y)},t=>new Ec(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new Ec(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)];at(cp,"CanonicalTileID"),at(Ec,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const S2=0,qm=25.5;function Kf(t){return F1*Math.cos(t*Math.PI/180)}function r0(t){return(180+t)/360}function $h(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Dl(t,e){return t/Kf(e)}function bu(t){return 360*t-180}function Fc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Dg(t,e){return t*Kf(Fc(e))}const Yl=85.051129;function ff(t){return Math.cos(rs(On(t,-Yl,Yl)))}function Zl(t,e){const n=On(e,S2,qm),s=Math.pow(2,n);return ff(t)*F1/(512*s)}function Xm(t){return 1/Math.cos(t*Math.PI/180)}function mf(t,e=0){const n=Math.exp(Math.PI*(1-(t.y+e/Z)/(1<<t.z)*2));return 80150034*n/(n*n+1)/Z/(1<<t.z)}class $d{constructor(e,n,s=0){this.x=+e,this.y=+n,this.z=+s}static fromLngLat(e,n=0){const s=oa.convert(e);return new $d(r0(s.lng),$h(s.lat),Dl(n,s.lat))}toLngLat(){return new oa(bu(this.x),Fc(this.y))}toAltitude(){return Dg(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/F1*Xm(Fc(this.y))}}function T2(t,e,n,s,u,m,g,E,T){const z=(e+s)/2,$=(n+u)/2,W=new Io(z,$);E(W),function(Q,le,de,be,xe,je){const gt=de-xe,_t=be-je;return Math.abs((be-le)*gt-(de-Q)*_t)/Math.hypot(gt,_t)}(W.x,W.y,m.x,m.y,g.x,g.y)>=T?(T2(t,e,n,z,$,m,W,E,T),T2(t,z,$,s,u,W,g,E,T)):t.push(g)}function fm(t,e,n){let s=t[0],u=s.x,m=s.y;e(s);const g=[s];for(let E=1;E<t.length;E++){const T=t[E],{x:z,y:$}=T;e(T),T2(g,u,m,z,$,s,T,e,n),u=z,m=$,s=T}return g}function kp(t,e,n,s){if(s(e,n)){const u=e.add(n)._mult(.5);kp(t,e,u,s),kp(t,u,n,s)}else t.push(n)}function s0(t,e){let n=t[0];const s=[n];for(let u=1;u<t.length;u++){const m=t[u];kp(s,n,m,e),n=m}return s}const Sp=Math.pow(2,14)-1,y1=-Sp-1;function Pg(t,e){const n=Math.round(t.x*e),s=Math.round(t.y*e);return t.x=On(n,y1,Sp),t.y=On(s,y1,Sp),(n<t.x||n>t.x+1||s<t.y||s>t.y+1)&&fa("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function o1(t,e,n){const s=t.loadGeometry(),u=t.extent,m=Z/u;if(e&&n&&n.projection.isReprojectedInTileSpace){const g=1<<e.z,{scale:E,x:T,y:z,projection:$}=n,W=Q=>{const le=bu((e.x+Q.x/u)/g),de=Fc((e.y+Q.y/u)/g),be=$.project(le,de);Q.x=(be.x*E-T)*u,Q.y=(be.y*E-z)*u};for(let Q=0;Q<s.length;Q++)if(1!==t.type)s[Q]=fm(s[Q],W,1);else{const le=[];for(const de of s[Q])de.x<0||de.x>=u||de.y<0||de.y>=u||(W(de),le.push(de));s[Q]=le}}for(const g of s)for(const E of g)Pg(E,m);return s}function L0(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?o1(t):[]}}function M2(t,e,n,s,u){t.emplaceBack(2*e+(s+1)/2,2*n+(u+1)/2)}function gf(t,e,n){t.emplaceBack(e.x,e.y,e.z,16384*n[0],16384*n[1],16384*n[2])}class Tp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Xu,this.indexArray=new eu,this.segments=new al,this.programConfigurations=new v1(e.layers,{zoom:e.zoom,lut:e.lut}),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}updateFootprints(e,n){}populate(e,n,s,u){const m=this.layers[0],g=[];let E=null;"circle"===m.type&&(E=m.layout.get("circle-sort-key"));for(const{feature:z,id:$,index:W,sourceLayerIndex:Q}of e){const le=this.layers[0]._featureFilter.needGeometry,de=L0(z,le);if(!this.layers[0]._featureFilter.filter(new ts(this.zoom),de,s))continue;const be=E?E.evaluate(de,{},s):void 0,xe={id:$,properties:z.properties,type:z.type,sourceLayerIndex:Q,index:W,geometry:le?de.geometry:o1(z,s,u),patterns:{},sortKey:be};g.push(xe)}E&&g.sort((z,$)=>z.sortKey-$.sortKey);let T=null;"globe"===u.projection.name&&(this.globeExtVertexArray=new sf,T=u.projection);for(const z of g){const{geometry:$,index:W,sourceLayerIndex:Q}=z,le=e[W].feature;this.addFeature(z,$,W,n.availableImages,s,T,n.brightness),n.featureIndex.insert(le,$,W,Q,this.index)}}update(e,n,s,u,m){const g=0!==Object.keys(e).length;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,g?this.stateDependentLayers:this.layers,s,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,z1.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,cf.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,n,s,u,m,g,E){for(const T of n)for(const z of T){const $=z.x,W=z.y;if($<0||$>=Z||W<0||W>=Z)continue;if(g){const de=g.projectTilePoint($,W,m),be=g.upVector(m,$,W),xe=this.globeExtVertexArray;gf(xe,de,be),gf(xe,de,be),gf(xe,de,be),gf(xe,de,be)}const Q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),le=Q.vertexLength;M2(this.layoutVertexArray,$,W,-1,-1),M2(this.layoutVertexArray,$,W,1,-1),M2(this.layoutVertexArray,$,W,1,1),M2(this.layoutVertexArray,$,W,-1,1),this.indexArray.emplaceBack(le,le+1,le+2),this.indexArray.emplaceBack(le,le+2,le+3),Q.vertexLength+=4,Q.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,{},u,m,E)}}function wu(t,e){for(let n=0;n<t.length;n++)if(Qu(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Qu(t,e[n]))return!0;return!!b1(t,e)}function A2(t,e,n){return!!Qu(t,e)||!!Ks(e,t,n)}function D2(t,e){if(1===t.length)return mm(e,t[0]);for(let n=0;n<e.length;n++){const s=e[n];for(let u=0;u<s.length;u++)if(Qu(t,s[u]))return!0}for(let n=0;n<t.length;n++)if(mm(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(b1(t,e[n]))return!0;return!1}function Mp(t,e,n){if(t.length>1){if(b1(t,e))return!0;for(let s=0;s<e.length;s++)if(Ks(e[s],t,n))return!0}for(let s=0;s<t.length;s++)if(Ks(t[s],e,n))return!0;return!1}function b1(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const s=t[n],u=t[n+1];for(let m=0;m<e.length-1;m++)if(Yf(s,u,e[m],e[m+1]))return!0}return!1}function Yf(t,e,n,s){return Os(t,n,s)!==Os(e,n,s)&&Os(t,e,n)!==Os(t,e,s)}function Ks(t,e,n){const s=n*n;if(1===e.length)return t.distSqr(e[0])<s;for(let u=1;u<e.length;u++)if(Km(t,e[u-1],e[u])<s)return!0;return!1}function Km(t,e,n){const s=e.distSqr(n);if(0===s)return t.distSqr(e);const u=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/s;return t.distSqr(u<0?e:u>1?n:n.sub(e)._mult(u)._add(e))}function mm(t,e){let n,s,u,m=!1;for(let g=0;g<t.length;g++){n=t[g];for(let E=0,T=n.length-1;E<n.length;T=E++)s=n[E],u=n[T],s.y>e.y!=u.y>e.y&&e.x<(u.x-s.x)*(e.y-s.y)/(u.y-s.y)+s.x&&(m=!m)}return m}function Qu(t,e){let n=!1;for(let s=0,u=t.length-1;s<t.length;u=s++){const m=t[s],g=t[u];m.y>e.y!=g.y>e.y&&e.x<(g.x-m.x)*(e.y-m.y)/(g.y-m.y)+m.x&&(n=!n)}return n}function Ym(t,e,n,s,u){for(const g of t)if(e<=g.x&&n<=g.y&&s>=g.x&&u>=g.y)return!0;const m=[new Io(e,n),new Io(e,u),new Io(s,u),new Io(s,n)];if(t.length>2)for(const g of m)if(Qu(t,g))return!0;for(let g=0;g<t.length-1;g++)if(Ou(t[g],t[g+1],m))return!0;return!1}function Ou(t,e,n){const s=n[0],u=n[2];if(t.x<s.x&&e.x<s.x||t.x>u.x&&e.x>u.x||t.y<s.y&&e.y<s.y||t.y>u.y&&e.y>u.y)return!1;const m=Os(t,e,n[0]);return m!==Os(t,e,n[1])||m!==Os(t,e,n[2])||m!==Os(t,e,n[3])}function Ul(t,e,n,s,u,m){let g=e.y-t.y,E=t.x-e.x;if(m=m||0){const T=g*g+E*E;if(0===T)return!0;const z=Math.sqrt(T);g/=z,E/=z}return!((n.x-t.x)*g+(n.y-t.y)*E-m<0||(s.x-t.x)*g+(s.y-t.y)*E-m<0||(u.x-t.x)*g+(u.y-t.y)*E-m<0)}function a0(t,e,n,s,u,m,g){return!(Ul(t,e,s,u,m,g)||Ul(e,n,s,u,m,g)||Ul(n,t,s,u,m,g)||Ul(s,u,t,e,n,g)||Ul(u,m,t,e,n,g)||Ul(m,s,t,e,n,g))}function Ap(t,e,n){const s=e.paint.get(t).value;return"constant"===s.kind?s.value:n.programConfigurations.get(e.id).getMaxValue(t)}function gm(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function vf(t,e,n,s,u){if(!e[0]&&!e[1])return t;const m=Io.convert(e)._mult(u);"viewport"===n&&m._rotate(-s);const g=[];for(let E=0;E<t.length;E++)g.push(t[E].sub(m));return g}function vm(t,e,n,s){const u=Io.convert(t)._mult(s);return"viewport"===e&&u._rotate(-n),u}at(Tp,"CircleBucket",{omit:["layers"]});const P2=new pa({"circle-sort-key":new er(ri.layout_circle["circle-sort-key"]),visibility:new qi(ri.layout_circle.visibility)});var Rg={paint:new pa({"circle-radius":new er(ri.paint_circle["circle-radius"]),"circle-color":new er(ri.paint_circle["circle-color"]),"circle-blur":new er(ri.paint_circle["circle-blur"]),"circle-opacity":new er(ri.paint_circle["circle-opacity"]),"circle-translate":new qi(ri.paint_circle["circle-translate"]),"circle-translate-anchor":new qi(ri.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qi(ri.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qi(ri.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new er(ri.paint_circle["circle-stroke-width"]),"circle-stroke-color":new er(ri.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new er(ri.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new qi(ri.paint_circle["circle-emissive-strength"])}),layout:P2};class Zf{constructor(e,n){this.pos=e,this.dir=n}intersectsPlane(e,n,s){const u=l._.dot(n,this.dir);if(Math.abs(u)<1e-6)return!1;const m=((e[0]-this.pos[0])*n[0]+(e[1]-this.pos[1])*n[1]+(e[2]-this.pos[2])*n[2])/u;return s[0]=this.pos[0]+this.dir[0]*m,s[1]=this.pos[1]+this.dir[1]*m,s[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(e,n,s){if(l._.equals(this.pos,e)||0===n)return s[0]=s[1]=s[2]=0,!1;const[u,m,g]=this.dir,E=this.pos[0]-e[0],T=this.pos[1]-e[1],z=this.pos[2]-e[2],$=u*u+m*m+g*g,W=2*(E*u+T*m+z*g),Q=W*W-4*$*(E*E+T*T+z*z-n*n);if(Q<0){const le=Math.max(-W/2,0),de=E+u*le,be=T+m*le,xe=z+g*le,je=Math.hypot(de,be,xe);return s[0]=de*n/je,s[1]=be*n/je,s[2]=xe*n/je,!1}{const le=(-W-Math.sqrt(Q))/(2*$);if(le<0){const de=Math.hypot(E,T,z);return s[0]=E*n/de,s[1]=T*n/de,s[2]=z*n/de,!1}return s[0]=E+u*le,s[1]=T+m*le,s[2]=z+g*le,!0}}}class R2{constructor(e,n,s,u,m){this.TL=e,this.TR=n,this.BR=s,this.BL=u,this.horizon=m}static fromInvProjectionMatrix(e,n,s){const u=[-1,1,1],m=[1,1,1],g=[1,-1,1],E=[-1,-1,1],T=l._.transformMat4(u,u,e),z=l._.transformMat4(m,m,e),$=l._.transformMat4(g,g,e),W=l._.transformMat4(E,E,e);return new R2(T,z,$,W,n/s)}}function z2(t,e,n){let s=1/0,u=-1/0;const m=[];for(const g of t){l._.sub(m,g,e);const E=l._.dot(m,n);s=Math.min(s,E),u=Math.max(u,E)}return[s,u]}function ic(t,e){let n=!0;for(let s=0;s<t.planes.length;s++){const u=t.planes[s];let m=0;for(let g=0;g<e.length;g++)m+=l._.dot(u,e[g])+u[3]>=0;if(0===m)return 0;m!==e.length&&(n=!1)}return n?2:1}function zg(t,e){for(const n of t.projections){const s=z2(e,t.points[0],n.axis);if(n.projection[1]<s[0]||n.projection[0]>s[1])return 0}return 1}function Ju(t,e){let n=0;const s=[0,0,0,0];for(let u=0;u<t.length;u++)s[0]=t[u][0],s[1]=t[u][1],s[2]=t[u][2],s[3]=1,l.aA.dot(s,e)>=0&&n++;return n}class El{constructor(e,n){this.points=e||new Array(8).fill([0,0,0]),this.planes=n||new Array(6).fill([0,0,0,0]),this.bounds=pl.fromPoints(this.points),this.projections=[],this.frustumEdges=[l._.sub([],this.points[2],this.points[3]),l._.sub([],this.points[0],this.points[3]),l._.sub([],this.points[4],this.points[0]),l._.sub([],this.points[5],this.points[1]),l._.sub([],this.points[6],this.points[2]),l._.sub([],this.points[7],this.points[3])];for(const s of this.frustumEdges){const u=[0,-s[2],s[1]],m=[s[2],0,-s[0]];this.projections.push({axis:u,projection:z2(this.points,this.points[0],u)}),this.projections.push({axis:m,projection:z2(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(e,n,s,u){const m=Math.pow(2,s),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const $=l.aA.transformMat4([],z,e),W=1/$[3]/n*m;return l.aA.mul($,$,[W,W,u?1/$[3]:W,W])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const $=l._.sub([],g[z[0]],g[z[1]]),W=l._.sub([],g[z[2]],g[z[1]]),Q=l._.normalize([],l._.cross([],$,W)),le=-l._.dot(Q,g[z[1]]);return Q.concat(le)}),T=[];for(let z=0;z<g.length;z++)T.push([g[z][0],g[z][1],g[z][2]]);return new El(T,E)}intersectsPrecise(e,n,s){for(let u=0;u<n.length;u++)if(!Ju(e,n[u]))return 0;for(let u=0;u<this.planes.length;u++)if(!Ju(e,this.planes[u]))return 0;for(const u of s)for(const m of this.frustumEdges){const g=l._.cross([],u,m),E=l._.length(g);if(0===E)continue;l._.scale(g,g,1/E);const T=z2(this.points,this.points[0],g),z=z2(e,this.points[0],g);if(T[0]>z[1]||z[0]>T[1])return 0}return 1}}class pl{static fromPoints(e){const n=[1/0,1/0,1/0],s=[-1/0,-1/0,-1/0];for(const u of e)l._.min(n,n,u),l._.max(s,s,u);return new pl(n,s)}static fromTileIdAndHeight(e,n,s){const u=1<<e.canonical.z,m=e.canonical.x,g=e.canonical.y;return new pl([m/u,g/u,n],[(m+1)/u,(g+1)/u,s])}static applyTransform(e,n){const s=e.getCorners();for(let u=0;u<s.length;++u)l._.transformMat4(s[u],s[u],n);return pl.fromPoints(s)}static applyTransformFast(e,n){const s=[n[12],n[13],n[14]],u=[...s];for(let m=0;m<3;m++)for(let g=0;g<3;g++){const E=n[4*g+m],T=E*e.min[g],z=E*e.max[g];s[m]+=Math.min(T,z),u[m]+=Math.max(T,z)}return new pl(s,u)}static projectAabbCorners(e,n){const s=e.getCorners();for(let u=0;u<s.length;++u)l._.transformMat4(s[u],s[u],n);return s}constructor(e,n){this.min=e,this.max=n,this.center=l._.scale([],l._.add([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],s=l._.clone(this.min),u=l._.clone(this.max);for(let m=0;m<n.length;m++)s[m]=n[m]?this.min[m]:this.center[m],u[m]=n[m]?this.center[m]:this.max[m];return u[2]=this.max[2],new pl(s,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,n=this.max;return[[e[0],e[1],e[2]],[n[0],e[1],e[2]],[n[0],n[1],e[2]],[e[0],n[1],e[2]],[e[0],e[1],n[2]],[n[0],e[1],n[2]],[n[0],n[1],n[2]],[e[0],n[1],n[2]]]}intersects(e){return this.intersectsAabb(e.bounds)?ic(e,this.getCorners()):0}intersectsFlat(e){return this.intersectsAabb(e.bounds)?ic(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(e,n){return n||this.intersects(e)?zg(e,this.getCorners()):0}intersectsPreciseFlat(e,n){return n||this.intersectsFlat(e)?zg(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(e){for(let n=0;n<3;++n)if(this.min[n]>e.max[n]||e.min[n]>this.max[n])return!1;return!0}intersectsAabbXY(e){return!(this.min[0]>e.max[0]||e.min[0]>this.max[0]||this.min[1]>e.max[1]||e.min[1]>this.max[1])}encapsulate(e){for(let n=0;n<3;n++)this.min[n]=Math.min(this.min[n],e.min[n]),this.max[n]=Math.max(this.max[n],e.max[n])}encapsulatePoint(e){for(let n=0;n<3;n++)this.min[n]=Math.min(this.min[n],e[n]),this.max[n]=Math.max(this.max[n],e[n])}closestPoint(e){return[Math.max(Math.min(this.max[0],e[0]),this.min[0]),Math.max(Math.min(this.max[1],e[1]),this.min[1]),Math.max(Math.min(this.max[2],e[2]),this.min[2])]}}at(pl,"Aabb");const _m=va([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Zm}=_m,Dp=va([{name:"a_pos_3",components:3,type:"Int16"}]);var Td=va([{name:"a_pos",type:"Int16",components:2}]);function up(t){return t*Vd/lp}const c4=[new pl([o0,o0,o0],[yu,yu,yu]),new pl([o0,o0,o0],[0,0,yu]),new pl([0,o0,o0],[yu,0,yu]),new pl([o0,0,o0],[0,yu,yu]),new pl([0,0,o0],[yu,yu,yu])];function Qm(t,e,n,s=!0){const u=l._.scale([],t._camera.position,t.worldSize),m=[e,n,1,1];l.aA.transformMat4(m,m,t.pixelMatrixInverse),l.aA.scale(m,m,1/m[3]);const g=l._.sub([],m,u),E=l._.normalize([],g),T=t.globeMatrix,z=[T[12],T[13],T[14]],$=l._.sub([],z,u),W=l._.length($),Q=l._.normalize([],$),le=t.worldSize/(2*Math.PI),de=l._.dot(Q,E),be=Math.asin(le/W);if(be<Math.acos(de)){if(!s)return null;const wi=[],Zi=[];l._.scale(wi,E,W/de),l._.normalize(Zi,l._.sub(Zi,wi,$)),l._.normalize(E,l._.add(E,$,l._.scale(E,Zi,Math.tan(be)*W)))}const xe=[];new Zf(u,E).closestPointOnSphere(z,le,xe);const je=l._.normalize([],St(T,0)),gt=l._.normalize([],St(T,1)),_t=l._.normalize([],St(T,2)),bt=l._.dot(je,xe),nn=l._.dot(gt,xe),Yt=l._.dot(_t,xe),Sn=Na(Math.asin(-nn/le));let Rn=Na(Math.atan2(bt,Yt));Rn=t.center.lng+function(wi,Zi){const Mo=(Zi-wi+180)%360-180;return Mo<-180?Mo+360:Mo}(t.center.lng,Rn);const ai=r0(Rn),Di=On($h(Sn),0,1);return new $d(ai,Di)}class u4{constructor(e,n,s){this.a=l._.sub([],e,s),this.b=l._.sub([],n,s),this.center=s;const u=l._.normalize([],this.a),m=l._.normalize([],this.b);this.angle=Math.acos(l._.dot(u,m))}}function Pp(t,e){if(0===t.angle)return null;let n;return n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(s,u,m,g){const E=Math.sin(m);return s*(Math.sin((1-g)*m)/E)+u*(Math.sin(g*m)/E)}(t.a[e],t.b[e],t.angle,On(n,0,1))+t.center[e]}function oh(t){if(t.z<=1)return c4[t.z+2*t.y+t.x];const e=O2(V1(t));return pl.fromPoints(e)}function Md(t,e,n){return l._.scale(t,t,1-n),l._.scaleAndAdd(t,t,e,n)}function _f(t,e){const n=rh(e.zoom);if(0===n)return oh(t);const s=V1(t),u=O2(s),m=r0(s.getWest())*e.worldSize,g=r0(s.getEast())*e.worldSize,E=$h(s.getNorth())*e.worldSize,T=$h(s.getSouth())*e.worldSize,z=[m,E,0],$=[g,E,0],W=[m,T,0],Q=[g,T,0],le=l.ad.invert([],e.globeMatrix);return l._.transformMat4(z,z,le),l._.transformMat4($,$,le),l._.transformMat4(W,W,le),l._.transformMat4(Q,Q,le),u[0]=Md(u[0],W,n),u[1]=Md(u[1],Q,n),u[2]=Md(u[2],$,n),u[3]=Md(u[3],z,n),pl.fromPoints(u)}function ym(t,e,n){for(const s of t)l._.transformMat4(s,s,e),l._.scale(s,s,n)}function Rp(t,e,n,s){const u=e/t.worldSize,m=t.globeMatrix;if(n.z<=1){const ai=oh(n).getCorners();return ym(ai,m,u),pl.fromPoints(ai)}const g=V1(n,s),E=O2(g,Vd+up(t._tileCoverLift));ym(E,m,u);const T=Number.MAX_VALUE,z=[-T,-T,-T],$=[T,T,T];if(g.contains(t.center)){for(const wi of E)l._.min($,$,wi),l._.max(z,z,wi);z[2]=0;const ai=t.point,Di=[ai.x*u,ai.y*u,0];return l._.min($,$,Di),l._.max(z,z,Di),new pl($,z)}if(t._tileCoverLift>0){for(const ai of E)l._.min($,$,ai),l._.max(z,z,ai);return new pl($,z)}const W=[m[12]*u,m[13]*u,m[14]*u],Q=g.getCenter(),le=On(t.center.lat,-Yl,Yl),de=On(Q.lat,-Yl,Yl),be=r0(t.center.lng),xe=$h(le);let je=be-r0(Q.lng);const gt=xe-$h(de);je>.5?je-=1:je<-.5&&(je+=1);let _t=0;if(Math.abs(je)>Math.abs(gt))_t=je>=0?1:3;else{_t=gt>=0?0:2;const ai=[m[4]*u,m[5]*u,m[6]*u],Di=-Math.sin(rs(gt>=0?g.getSouth():g.getNorth()))*Vd;l._.scaleAndAdd(W,W,ai,Di)}const bt=E[_t],nn=E[(_t+1)%4],Yt=new u4(bt,nn,W),Sn=[Pp(Yt,0)||bt[0],Pp(Yt,1)||bt[1],Pp(Yt,2)||bt[2]],Rn=rh(t.zoom);if(Rn>0){const ai=function({x:wi,y:Zi,z:Mo},Gi,yo,Ri,vo){const Oo=1/(1<<Mo);let Co=wi*Oo,ar=Co+Oo,Ao=Zi*Oo,jo=Ao+Oo,Jr=0;const Fr=(Co+ar)/2-Ri;return Fr>.5?Jr=-1:Fr<-.5&&(Jr=1),Co=((Co+Jr)*Gi-(Ri*=Gi))*yo+Ri,ar=((ar+Jr)*Gi-Ri)*yo+Ri,Ao=(Ao*Gi-(vo*=Gi))*yo+vo,jo=(jo*Gi-vo)*yo+vo,[[Co,jo,0],[ar,jo,0],[ar,Ao,0],[Co,Ao,0]]}(n,e,t._pixelsPerMercatorPixel,be,xe);for(let wi=0;wi<E.length;wi++)Md(E[wi],ai[wi],Rn);const Di=l._.add([],ai[_t],ai[(_t+1)%4]);l._.scale(Di,Di,.5),Md(Sn,Di,Rn)}for(const ai of E)l._.min($,$,ai),l._.max(z,z,ai);return $[2]=Math.min(bt[2],nn[2]),l._.min($,$,Sn),l._.max(z,z,Sn),new pl($,z)}function V1({x:t,y:e,z:n},s=!1){const u=1/(1<<n),m=new oa(bu(t*u),e===(1<<n)-1&&s?-90:Fc((e+1)*u)),g=new oa(bu((t+1)*u),0===e&&s?90:Fc(e*u));return new n1(m,g)}function O2(t,e=Vd){const n=rs(t.getNorth()),s=rs(t.getSouth()),u=Math.cos(n),m=Math.cos(s),g=Math.sin(n),E=Math.sin(s),T=t.getWest(),z=t.getEast();return[t1(m,E,T,e),t1(m,E,z,e),t1(u,g,z,e),t1(u,g,T,e)]}function $1(t,e,n,s){const u=1<<n.z,m=(t/Z+n.x)/u;return Ic(Fc((e/Z+n.y)/u),bu(m),s)}function yf({min:t,max:e}){return ap/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}const L2=new Float64Array(16);function zp(t){const e=yf(t),n=l.ad.fromScaling(L2,[e,e,e]);return l.ad.translate(n,n,l._.negate([],t.min))}function dp(t){const e=l.ad.fromTranslation(L2,t.min),n=1/yf(t);return l.ad.scale(e,e,[n,n,n])}function Qf(t){const e=Z/(2*Math.PI);return t/(2*Math.PI)/e}function Jf(t,e){return Z/(512*Math.pow(2,t))*yf(oh(e))}function bm(t,e,n,s,u){const m=Qf(n),g=[t,e,-n/(2*Math.PI)],E=l.ad.identity(new Float64Array(16));return l.ad.translate(E,E,g),l.ad.scale(E,E,[m,m,m]),l.ad.rotateX(E,E,rs(-u)),l.ad.rotateY(E,E,rs(-s)),E}function rh(t){return li(sp,Wf,t)}function bf(t,e){const n=Ic(e.lat,e.lng),s=function(m){const g=Ic(m._center.lat,m._center.lng),E=l._.fromValues(0,1,0);let T=l._.cross([],E,g);const z=l.ad.fromRotation([],-m.angle,g);T=l._.transformMat4(T,T,z),l.ad.fromRotation(z,-m._pitch,T);const $=l._.normalize([],g);return l._.scale($,$,up(m.cameraToCenterDistance/m.pixelsPerMeter)),l._.transformMat4($,$,z),l._.add([],g,$)}(t),u=l._.subtract([],s,n);return l._.angle(u,n)}function Op(t,e){return bf(t,e)>Math.PI/2*1.01}const B2=rs(85),wm=Math.cos(B2),N2=Math.sin(B2),Og=l.ad.create(),e2=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e};function wf(t,e,n,s,u,m,g,E,T){if(m&&t.queryGeometry.isAboveHorizon)return!1;m&&(T*=t.pixelToTileUnitsFactor);const z=t.tileID.canonical,$=n.projection.upVectorScale(z,n.center.lat,n.worldSize).metersToTile;for(const W of e)for(const Q of W){const le=Q.add(E),de=u&&n.elevation?n.elevation.exaggeration()*u.getElevationAt(le.x,le.y,!0):0,be=n.projection.projectTilePoint(le.x,le.y,z);if(de>0){const _t=n.projection.upVector(z,le.x,le.y);be.x+=_t[0]*$*de,be.y+=_t[1]*$*de,be.z+=_t[2]*$*de}const xe=m?le:Lp(be.x,be.y,be.z,s),je=m?t.tilespaceRays.map(_t=>F2(_t,de)):t.queryGeometry.screenGeometry,gt=l.aA.transformMat4([],[be.x,be.y,be.z,1],s);if(!g&&m?T*=gt[3]/n.cameraToCenterDistance:g&&!m&&(T*=n.cameraToCenterDistance/gt[3]),m){const _t=Fc((Q.y/Z+z.y)/(1<<z.z));T/=n.projection.pixelsPerMeter(_t,1)/Dl(1,_t)}if(A2(je,xe,T))return!0}return!1}function Lp(t,e,n,s){const u=l.aA.transformMat4([],[t,e,n,1],s);return new Io(u[0]/u[3],u[1]/u[3])}const Jm=l._.fromValues(0,0,0),hp=l._.fromValues(0,0,1);function F2(t,e){const n=l._.create();return Jm[2]=e,t.intersectsPlane(Jm,hp,n),new Io(n[0],n[1])}class xf extends Tp{}function j1(t,{width:e,height:n},s,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*n*s)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*n*s);return t.width=e,t.height=n,t.data=u,t}function B0(t,e,n){const{width:s,height:u}=e;s===t.width&&u===t.height||(Bp(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,s),height:Math.min(t.height,u)},n,null),t.width=s,t.height=u,t.data=e.data)}function Bp(t,e,n,s,u,m,g,E){if(0===u.width||0===u.height)return e;if(u.width>t.width||u.height>t.height||n.x>t.width-u.width||n.y>t.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||s.x>e.width-u.width||s.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const T=t.data,z=e.data,$=4===m&&E;for(let W=0;W<u.height;W++){const Q=((n.y+W)*t.width+n.x)*m,le=((s.y+W)*e.width+s.x)*m;if($)for(let de=0;de<u.width;de++){const be=Q+de*m+3,xe=le+de*m;z[xe+0]=255,z[xe+1]=255,z[xe+2]=255,z[xe+3]=T[be]}else if(g)for(let de=0;de<u.width;de++){const be=Q+de*m,xe=le+de*m,je=T[be+3],gt=new Xs(T[be+0]/255*je,T[be+1]/255*je,T[be+2]/255*je,je).toRenderColor(g).toArray();z[xe+0]=gt[0],z[xe+1]=gt[1],z[xe+2]=gt[2],z[xe+3]=gt[3]}else for(let de=0;de<u.width*m;de++)z[le+de]=T[Q+de]}return e}at(xf,"HeatmapBucket",{omit:["layers"]});class l0{constructor(e,n){j1(this,e,1,n)}resize(e){B0(this,new l0(e),1)}clone(){return new l0({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,s,u,m){Bp(e,n,s,u,m,1,null)}}class Ad{constructor(e,n){j1(this,e,4,n)}resize(e){B0(this,new Ad(e),4)}replace(e,n){n?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ad({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,s,u,m,g,E){Bp(e,n,s,u,m,4,g,E)}}class If{constructor(e,n){this.width=e.width,this.height=e.height,this.data=n instanceof Uint8Array?new Float32Array(n.buffer):n}}at(l0,"AlphaImage"),at(Ad,"RGBAImage");const Ef=new pa({visibility:new qi(ri.layout_heatmap.visibility)});var d4={paint:new pa({"heatmap-radius":new er(ri.paint_heatmap["heatmap-radius"]),"heatmap-weight":new er(ri.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qi(ri.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ss(ri.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qi(ri.paint_heatmap["heatmap-opacity"])}),layout:Ef};function U1(t){const e={},n=t.resolution||256,s=t.clips?t.clips.length:1,u=t.image||new Ad({width:n,height:s}),m=(g,E,T)=>{e[t.evaluationKey]=T;const z=t.expression.evaluate(e);z&&(u.data[g+E+0]=Math.floor(255*z.r/z.a),u.data[g+E+1]=Math.floor(255*z.g/z.a),u.data[g+E+2]=Math.floor(255*z.b/z.a),u.data[g+E+3]=Math.floor(255*z.a))};if(t.clips)for(let g=0,E=0;g<s;++g,E+=4*n)for(let T=0,z=0;T<n;T++,z+=4){const $=T/(n-1),{start:W,end:Q}=t.clips[g];m(E,z,W*(1-$)+Q*$)}else for(let g=0,E=0;g<n;g++,E+=4)m(0,E,g/(n-1));return u}const V2=new pa({visibility:new qi(ri.layout_hillshade.visibility)});var eg={paint:new pa({"hillshade-illumination-direction":new qi(ri.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qi(ri.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qi(ri.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qi(ri.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qi(ri.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qi(ri.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new qi(ri.paint_hillshade["hillshade-emissive-strength"])}),layout:V2};const $2=va([{name:"a_pos",components:2,type:"Int16"}],4),{members:Lg}=$2;function N0(t,e,n=2){const s=e&&e.length,u=s?e[0]*n:t.length;let m=tg(t,0,u,n,!0);const g=[];if(!m||m.next===m.prev)return g;let E,T,z;if(s&&(m=function($,W,Q,le){const de=[];for(let be=0,xe=W.length;be<xe;be++){const je=tg($,W[be]*le,be<xe-1?W[be+1]*le:$.length,le,!1);je===je.next&&(je.steiner=!0),de.push(U2(je))}de.sort(j2);for(let be=0;be<de.length;be++)Q=Fp(de[be],Q);return Q}(t,e,m,n)),t.length>80*n){E=1/0,T=1/0;let $=-1/0,W=-1/0;for(let Q=n;Q<u;Q+=n){const le=t[Q],de=t[Q+1];le<E&&(E=le),de<T&&(T=de),le>$&&($=le),de>W&&(W=de)}z=Math.max($-E,W-T),z=0!==z?32767/z:0}return Cf(m,g,n,E,T,z,0),g}function tg(t,e,n,s,u){let m;if(u===function(g,E,T,z){let $=0;for(let W=E,Q=T-z;W<T;W+=z)$+=(g[Q]-g[W])*(g[W+1]+g[Q+1]),Q=W;return $}(t,e,n,s)>0)for(let g=e;g<n;g+=s)m=$p(g/s|0,t[g],t[g+1],m);else for(let g=n-s;g>=e;g-=s)m=$p(g/s|0,t[g],t[g+1],m);return m&&r1(m,m.next)&&(o2(m),m=m.next),m}function nu(t,e){if(!t)return t;e||(e=t);let n,s=t;do{if(n=!1,s.steiner||!r1(s,s.next)&&0!==Wc(s.prev,s,s.next))s=s.next;else{if(o2(s),s=e=s.prev,s===s.next)break;n=!0}}while(n||s!==e);return e}function Cf(t,e,n,s,u,m,g){if(!t)return;!g&&m&&function(T,z,$,W){let Q=T;do{0===Q.z&&(Q.z=Vp(Q.x,Q.y,z,$,W)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next}while(Q!==T);Q.prevZ.nextZ=null,Q.prevZ=null,function(le){let de,be=1;do{let xe,je=le;le=null;let gt=null;for(de=0;je;){de++;let _t=je,bt=0;for(let Yt=0;Yt<be&&(bt++,_t=_t.nextZ,_t);Yt++);let nn=be;for(;bt>0||nn>0&&_t;)0!==bt&&(0===nn||!_t||je.z<=_t.z)?(xe=je,je=je.nextZ,bt--):(xe=_t,_t=_t.nextZ,nn--),gt?gt.nextZ=xe:le=xe,xe.prevZ=gt,gt=xe;je=_t}gt.nextZ=null,be*=2}while(de>1)}(Q)}(t,s,u,m);let E=t;for(;t.prev!==t.next;){const T=t.prev,z=t.next;if(m?Np(t,s,u,m):t2(t))e.push(T.i,t.i,z.i),o2(t),t=z.next,E=z.next;else if((t=z)===E){g?1===g?Cf(t=ng(nu(t),e),e,n,s,u,m,2):2===g&&H1(t,e,n,s,u,m):Cf(nu(t),e,n,s,u,m,1);break}}}function t2(t){const e=t.prev,n=t,s=t.next;if(Wc(e,n,s)>=0)return!1;const u=e.x,m=n.x,g=s.x,E=e.y,T=n.y,z=s.y,$=u<m?u<g?u:g:m<g?m:g,W=E<T?E<z?E:z:T<z?T:z,Q=u>m?u>g?u:g:m>g?m:g,le=E>T?E>z?E:z:T>z?T:z;let de=s.next;for(;de!==e;){if(de.x>=$&&de.x<=Q&&de.y>=W&&de.y<=le&&F0(u,E,m,T,g,z,de.x,de.y)&&Wc(de.prev,de,de.next)>=0)return!1;de=de.next}return!0}function Np(t,e,n,s){const u=t.prev,m=t,g=t.next;if(Wc(u,m,g)>=0)return!1;const E=u.x,T=m.x,z=g.x,$=u.y,W=m.y,Q=g.y,le=E<T?E<z?E:z:T<z?T:z,de=$<W?$<Q?$:Q:W<Q?W:Q,be=E>T?E>z?E:z:T>z?T:z,xe=$>W?$>Q?$:Q:W>Q?W:Q,je=Vp(le,de,e,n,s),gt=Vp(be,xe,e,n,s);let _t=t.prevZ,bt=t.nextZ;for(;_t&&_t.z>=je&&bt&&bt.z<=gt;){if(_t.x>=le&&_t.x<=be&&_t.y>=de&&_t.y<=xe&&_t!==u&&_t!==g&&F0(E,$,T,W,z,Q,_t.x,_t.y)&&Wc(_t.prev,_t,_t.next)>=0||(_t=_t.prevZ,bt.x>=le&&bt.x<=be&&bt.y>=de&&bt.y<=xe&&bt!==u&&bt!==g&&F0(E,$,T,W,z,Q,bt.x,bt.y)&&Wc(bt.prev,bt,bt.next)>=0))return!1;bt=bt.nextZ}for(;_t&&_t.z>=je;){if(_t.x>=le&&_t.x<=be&&_t.y>=de&&_t.y<=xe&&_t!==u&&_t!==g&&F0(E,$,T,W,z,Q,_t.x,_t.y)&&Wc(_t.prev,_t,_t.next)>=0)return!1;_t=_t.prevZ}for(;bt&&bt.z<=gt;){if(bt.x>=le&&bt.x<=be&&bt.y>=de&&bt.y<=xe&&bt!==u&&bt!==g&&F0(E,$,T,W,z,Q,bt.x,bt.y)&&Wc(bt.prev,bt,bt.next)>=0)return!1;bt=bt.nextZ}return!0}function ng(t,e){let n=t;do{const s=n.prev,u=n.next.next;!r1(s,u)&&Im(s,n,n.next,u)&&Sf(s,u)&&Sf(u,s)&&(e.push(s.i,n.i,u.i),o2(n),o2(n.next),n=t=u),n=n.next}while(n!==t);return nu(n)}function H1(t,e,n,s,u,m){let g=t;do{let E=g.next.next;for(;E!==g.prev;){if(g.i!==E.i&&xm(g,E)){let T=G1(g,E);return g=nu(g,g.next),T=nu(T,T.next),Cf(g,e,n,s,u,m,0),void Cf(T,e,n,s,u,m,0)}E=E.next}g=g.next}while(g!==t)}function j2(t,e){return t.x-e.x}function Fp(t,e){const n=function(u,m){let g=m;const E=u.x,T=u.y;let z,$=-1/0;do{if(T<=g.y&&T>=g.next.y&&g.next.y!==g.y){const be=g.x+(T-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(be<=E&&be>$&&($=be,z=g.x<g.next.x?g:g.next,be===E))return z}g=g.next}while(g!==m);if(!z)return null;const W=z,Q=z.x,le=z.y;let de=1/0;g=z;do{if(E>=g.x&&g.x>=Q&&E!==g.x&&F0(T<le?E:$,T,Q,le,T<le?$:E,T,g.x,g.y)){const be=Math.abs(T-g.y)/(E-g.x);Sf(g,u)&&(be<de||be===de&&(g.x>z.x||g.x===z.x&&n2(z,g)))&&(z=g,de=be)}g=g.next}while(g!==W);return z}(t,e);if(!n)return e;const s=G1(n,t);return nu(s,s.next),nu(n,n.next)}function n2(t,e){return Wc(t.prev,t,e.prev)<0&&Wc(e.next,t,t.next)<0}function Vp(t,e,n,s,u){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*u|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*u|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function U2(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function F0(t,e,n,s,u,m,g,E){return(u-g)*(e-E)>=(t-g)*(m-E)&&(t-g)*(s-E)>=(n-g)*(e-E)&&(n-g)*(m-E)>=(u-g)*(s-E)}function xm(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(n,s){let u=n;do{if(u.i!==n.i&&u.next.i!==n.i&&u.i!==s.i&&u.next.i!==s.i&&Im(u,u.next,n,s))return!0;u=u.next}while(u!==n);return!1}(t,e)&&(Sf(t,e)&&Sf(e,t)&&function(n,s){let u=n,m=!1;const g=(n.x+s.x)/2,E=(n.y+s.y)/2;do{u.y>E!=u.next.y>E&&u.next.y!==u.y&&g<(u.next.x-u.x)*(E-u.y)/(u.next.y-u.y)+u.x&&(m=!m),u=u.next}while(u!==n);return m}(t,e)&&(Wc(t.prev,t,e.prev)||Wc(t,e.prev,e))||r1(t,e)&&Wc(t.prev,t,t.next)>0&&Wc(e.prev,e,e.next)>0)}function Wc(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function r1(t,e){return t.x===e.x&&t.y===e.y}function Im(t,e,n,s){const u=kf(Wc(t,e,n)),m=kf(Wc(t,e,s)),g=kf(Wc(n,s,t)),E=kf(Wc(n,s,e));return u!==m&&g!==E||!(0!==u||!i2(t,n,e))||!(0!==m||!i2(t,s,e))||!(0!==g||!i2(n,t,s))||!(0!==E||!i2(n,e,s))}function i2(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function kf(t){return t>0?1:t<0?-1:0}function Sf(t,e){return Wc(t.prev,t,t.next)<0?Wc(t,e,t.next)>=0&&Wc(t,t.prev,e)>=0:Wc(t,e,t.prev)<0||Wc(t,t.next,e)<0}function G1(t,e){const n=r2(t.i,t.x,t.y),s=r2(e.i,e.x,e.y),u=t.next,m=e.prev;return t.next=e,e.prev=t,n.next=u,u.prev=n,s.next=n,n.prev=s,m.next=s,s.prev=m,s}function $p(t,e,n,s){const u=r2(t,e,n);return s?(u.next=s.next,u.prev=s,s.next.prev=u,s.next=u):(u.prev=u,u.next=u),u}function o2(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function r2(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function jp(t,e){const n=t.length;if(n<=1)return[t];const s=[];let u,m;for(let g=0;g<n;g++){const E=Yc(t[g]);0!==E&&(t[g].area=Math.abs(E),void 0===m&&(m=E<0),m===E<0?(u&&s.push(u),u=[t[g]]):u.push(t[g]))}if(u&&s.push(u),e>1)for(let g=0;g<s.length;g++)s[g].length<=e||(Gh(s[g],e,1,s[g].length-1,Em),s[g]=s[g].slice(0,e));return s}function Em(t,e){return e.area-t.area}function s2(t,e,n){const s=n.patternDependencies;let u=!1;for(const m of e){const g=m.paint.get(`${t}-pattern`);g.isConstant()||(u=!0);const E=g.constantOr(null);E&&(u=!0,s[E]=!0)}return u}function ig(t,e,n,s,u){const m=u.patternDependencies;for(const g of e){const E=g.paint.get(`${t}-pattern`).value;if("constant"!==E.kind){let T=E.evaluate({zoom:s},n,{},u.availableImages);T=T&&T.name?T.name:T,m[T]=!0,n.patterns[g.id]=T}}return n}class y{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xu,this.indexArray=new eu,this.indexArray2=new Vh,this.programConfigurations=new v1(e.layers,{zoom:e.zoom,lut:e.lut}),this.segments=new al,this.segments2=new al,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.projection=e.projection}updateFootprints(e,n){}populate(e,n,s,u){this.hasPattern=s2("fill",this.layers,n);const m=this.layers[0].layout.get("fill-sort-key"),g=[];for(const{feature:E,id:T,index:z,sourceLayerIndex:$}of e){const W=this.layers[0]._featureFilter.needGeometry,Q=L0(E,W);if(!this.layers[0]._featureFilter.filter(new ts(this.zoom),Q,s))continue;const le=m?m.evaluate(Q,{},s,n.availableImages):void 0,de={id:T,properties:E.properties,type:E.type,sourceLayerIndex:$,index:z,geometry:W?Q.geometry:o1(E,s,u),patterns:{},sortKey:le};g.push(de)}m&&g.sort((E,T)=>E.sortKey-T.sortKey);for(const E of g){const{geometry:T,index:z,sourceLayerIndex:$}=E;if(this.hasPattern){const W=ig("fill",this.layers,E,this.zoom,n);this.patternFeatures.push(W)}else this.addFeature(E,T,z,s,{},n.availableImages,n.brightness);n.featureIndex.insert(e[z].feature,T,z,$,this.index)}}update(e,n,s,u,m){const g=0!==Object.keys(e).length;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,g?this.stateDependentLayers:this.layers,s,u,m)}addFeatures(e,n,s,u,m,g){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,n,s,u,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Lg),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,n,s,u,m,g=[],E){for(const T of jp(n,500)){let z=0;for(const be of T)z+=be.length;const $=this.segments.prepareSegment(z,this.layoutVertexArray,this.indexArray),W=$.vertexLength,Q=[],le=[];for(const be of T){if(0===be.length)continue;be!==T[0]&&le.push(Q.length/2);const xe=this.segments2.prepareSegment(be.length,this.layoutVertexArray,this.indexArray2),je=xe.vertexLength;this.layoutVertexArray.emplaceBack(be[0].x,be[0].y),this.indexArray2.emplaceBack(je+be.length-1,je),Q.push(be[0].x),Q.push(be[0].y);for(let gt=1;gt<be.length;gt++)this.layoutVertexArray.emplaceBack(be[gt].x,be[gt].y),this.indexArray2.emplaceBack(je+gt-1,je+gt),Q.push(be[gt].x),Q.push(be[gt].y);xe.vertexLength+=be.length,xe.primitiveLength+=be.length}const de=N0(Q,le);for(let be=0;be<de.length;be+=3)this.indexArray.emplaceBack(W+de[be],W+de[be+1],W+de[be+2]);$.vertexLength+=z,$.primitiveLength+=de.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,g,u,E)}}at(y,"FillBucket",{omit:["layers","patternFeatures"]});const h=new pa({"fill-sort-key":new er(ri.layout_fill["fill-sort-key"]),visibility:new qi(ri.layout_fill.visibility)});var A={paint:new pa({"fill-antialias":new qi(ri.paint_fill["fill-antialias"]),"fill-opacity":new er(ri.paint_fill["fill-opacity"]),"fill-color":new er(ri.paint_fill["fill-color"]),"fill-outline-color":new er(ri.paint_fill["fill-outline-color"]),"fill-translate":new qi(ri.paint_fill["fill-translate"]),"fill-translate-anchor":new qi(ri.paint_fill["fill-translate-anchor"]),"fill-pattern":new er(ri.paint_fill["fill-pattern"]),"fill-emissive-strength":new qi(ri.paint_fill["fill-emissive-strength"])}),layout:h};class I{constructor(e,n,s,u){if(this.triangleCount=n.length/3,this.min=new Io(0,0),this.max=new Io(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],0===this.triangleCount||0===e.length)return;const[m,g]=[e[0].clone(),e[0].clone()];for(let W=1;W<e.length;++W){const Q=e[W];m.x=Math.min(m.x,Q.x),m.y=Math.min(m.y,Q.y),g.x=Math.max(g.x,Q.x),g.y=Math.max(g.y,Q.y)}if(u){const W=Math.ceil(Math.max(g.x-m.x,g.y-m.y)/u);s=Math.max(s,W)}if(0===s)return;this.min=m,this.max=g;const E=this.max.sub(this.min);E.x=Math.max(E.x,1),E.y=Math.max(E.y,1);const T=Math.max(E.x,E.y)/s;this.cellsX=Math.max(1,Math.ceil(E.x/T)),this.cellsY=Math.max(1,Math.ceil(E.y/T)),this.xScale=1/T,this.yScale=1/T;const z=[];for(let W=0;W<this.triangleCount;W++){const Q=e[n[3*W+0]].sub(this.min),le=e[n[3*W+1]].sub(this.min),de=e[n[3*W+2]].sub(this.min),be=F(Math.floor(Math.min(Q.x,le.x,de.x)),this.xScale,this.cellsX),xe=F(Math.floor(Math.max(Q.x,le.x,de.x)),this.xScale,this.cellsX),je=F(Math.floor(Math.min(Q.y,le.y,de.y)),this.yScale,this.cellsY),gt=F(Math.floor(Math.max(Q.y,le.y,de.y)),this.yScale,this.cellsY),_t=new Io(0,0),bt=new Io(0,0),nn=new Io(0,0),Yt=new Io(0,0);for(let Sn=je;Sn<=gt;++Sn){_t.y=bt.y=Sn*T,nn.y=Yt.y=(Sn+1)*T;for(let Rn=be;Rn<=xe;++Rn)_t.x=nn.x=Rn*T,bt.x=Yt.x=(Rn+1)*T,(a0(Q,le,de,_t,bt,Yt)||a0(Q,le,de,_t,Yt,nn))&&z.push({cellIdx:Sn*this.cellsX+Rn,triIdx:W})}}if(0===z.length)return;z.sort((W,Q)=>W.cellIdx-Q.cellIdx||W.triIdx-Q.triIdx);let $=0;for(;$<z.length;){const W=z[$].cellIdx,Q={start:this.payload.length,len:0};for(;$<z.length&&z[$].cellIdx===W;)++Q.len,this.payload.push(z[$++].triIdx);this.cells[W]=Q}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(e,n){if(0===this.triangleCount||0===this.cells.length||e.x>this.max.x||this.min.x>e.x||e.y>this.max.y||this.min.y>e.y)return;const s=F(e.x-this.min.x,this.xScale,this.cellsX),u=F(e.y-this.min.y,this.yScale,this.cellsY),m=this.cells[u*this.cellsX+s];if(m){this._lazyInitLookup();for(let g=0;g<m.len;g++){const E=this.payload[m.start+g],T=Math.floor(E/8),z=1<<E%8;if(!(this.lookup[T]&z)&&(this.lookup[T]|=z,n.push(E),n.length===this.triangleCount))return}}}query(e,n,s){if(0===this.triangleCount||0===this.cells.length||e.x>this.max.x||this.min.x>n.x||e.y>this.max.y||this.min.y>n.y)return;this._lazyInitLookup();const u=F(e.x-this.min.x,this.xScale,this.cellsX),m=F(n.x-this.min.x,this.xScale,this.cellsX),g=F(e.y-this.min.y,this.yScale,this.cellsY),E=F(n.y-this.min.y,this.yScale,this.cellsY);for(let T=g;T<=E;T++)for(let z=u;z<=m;z++){const $=this.cells[T*this.cellsX+z];if($)for(let W=0;W<$.len;W++){const Q=this.payload[$.start+W],le=Math.floor(Q/8),de=1<<Q%8;if(!(this.lookup[le]&de)&&(this.lookup[le]|=de,s.push(Q),s.length===this.triangleCount))return}}}}function F(t,e,n){return Math.max(0,Math.min(n-1,Math.floor(t*e)))}at(I,"TriangleGridIndex");class X{constructor(e){this.zoom=e.zoom,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.footprints=[]}updateFootprints(e,n){for(const s of this.footprints)n.push({footprint:s,id:e})}populate(e,n,s,u){const m=[];for(const{feature:g,id:E,index:T,sourceLayerIndex:z}of e){const $=this.layers[0]._featureFilter.needGeometry,W=L0(g,$);if(!this.layers[0]._featureFilter.filter(new ts(this.zoom),W,s))continue;const Q={id:E,properties:g.properties,type:g.type,sourceLayerIndex:z,index:T,geometry:$?W.geometry:o1(g,s,u),patterns:{}};m.push(Q)}for(const g of m){const{geometry:E,index:T,sourceLayerIndex:z}=g;this.addFeature(g,E,T,s,{},n.availableImages,n.brightness),n.featureIndex.insert(e[T].feature,E,T,z,this.index)}}isEmpty(){return 0===this.footprints.length}uploadPending(){return!1}upload(e){}update(e,n,s,u,m){}destroy(){}addFeature(e,n,s,u,m,g=[],E){for(const T of jp(n,2)){const z=[],$=[],W=[],Q=new Io(1/0,1/0),le=new Io(-1/0,-1/0);for(const xe of T)if(0!==xe.length){xe!==T[0]&&W.push($.length/2);for(let je=0;je<xe.length;je++)$.push(xe[je].x),$.push(xe[je].y),z.push(xe[je]),Q.x=Math.min(Q.x,xe[je].x),Q.y=Math.min(Q.y,xe[je].y),le.x=Math.max(le.x,xe[je].x),le.y=Math.max(le.y,xe[je].y)}const de=N0($,W),be=new I(z,de,8,256);this.footprints.push({vertices:z,indices:de,grid:be,min:Q,max:le})}}}at(X,"ClipBucket",{omit:["layers"]});const Me=new pa({"clip-layer-types":new qi(ri.layout_clip["clip-layer-types"])});var $e={paint:new pa({}),layout:Me};const ze=va([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),ct=va([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),ot=va([{name:"a_centroid_pos",components:2,type:"Uint16"}]),pt=va([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),Ct=va([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:sn}=ze;var pn={},gn=vc,yn=Rt;function Rt(t,e,n,s,u){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=s,this._values=u,t.readFields(Bn,this,e)}function Bn(t,e,n){1==t?e.id=n.readVarint():2==t?function(s,u){for(var m=s.readVarint()+s.pos;s.pos<m;){var g=u._keys[s.readVarint()],E=u._values[s.readVarint()];u.properties[g]=E}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function vn(t){for(var e,n,s=0,u=0,m=t.length,g=m-1;u<m;g=u++)s+=((n=t[g]).x-(e=t[u]).x)*(e.y+n.y);return s}Rt.types=["Unknown","Point","LineString","Polygon"],Rt.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,s=1,u=0,m=0,g=0,E=[];t.pos<n;){if(u<=0){var T=t.readVarint();s=7&T,u=T>>3}if(u--,1===s||2===s)m+=t.readSVarint(),g+=t.readSVarint(),1===s&&(e&&E.push(e),e=[]),e.push(new gn(m,g));else{if(7!==s)throw new Error("unknown command "+s);e&&e.push(e[0].clone())}}return e&&E.push(e),E},Rt.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,s=0,u=0,m=0,g=1/0,E=-1/0,T=1/0,z=-1/0;t.pos<e;){if(s<=0){var $=t.readVarint();n=7&$,s=$>>3}if(s--,1===n||2===n)(u+=t.readSVarint())<g&&(g=u),u>E&&(E=u),(m+=t.readSVarint())<T&&(T=m),m>z&&(z=m);else if(7!==n)throw new Error("unknown command "+n)}return[g,T,E,z]},Rt.prototype.toGeoJSON=function(t,e,n){var s,u,m=this.extent*Math.pow(2,n),g=this.extent*t,E=this.extent*e,T=this.loadGeometry(),z=Rt.types[this.type];function $(le){for(var de=0;de<le.length;de++){var be=le[de];le[de]=[360*(be.x+g)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+E)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(s=0;s<T.length;s++)W[s]=T[s][0];$(T=W);break;case 2:for(s=0;s<T.length;s++)$(T[s]);break;case 3:for(T=function(le){var de=le.length;if(de<=1)return[le];for(var be,xe,je=[],gt=0;gt<de;gt++){var _t=vn(le[gt]);0!==_t&&(void 0===xe&&(xe=_t<0),xe===_t<0?(be&&je.push(be),be=[le[gt]]):be.push(le[gt]))}return be&&je.push(be),je}(T),s=0;s<T.length;s++)for(u=0;u<T[s].length;u++)$(T[s][u])}1===T.length?T=T[0]:z="Multi"+z;var Q={type:"Feature",geometry:{type:z,coordinates:T},properties:this.properties};return"id"in this&&(Q.id=this.id),Q};var si=yn,Si=Qo;function Qo(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ur,this,e),this.length=this._features.length}function ur(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(s){for(var u=null,m=s.readVarint()+s.pos;s.pos<m;){var g=s.readVarint()>>3;u=1===g?s.readString():2===g?s.readFloat():3===g?s.readDouble():4===g?s.readVarint64():5===g?s.readVarint():6===g?s.readSVarint():7===g?s.readBoolean():null}return u}(n))}Qo.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new si(this._pbf,e,this.extent,this._keys,this._values)};var Bo=Si;function no(t,e,n){if(3===t){var s=new Bo(n,n.readVarint()+n.pos);s.length&&(e[s.name]=s)}}var To=pn.VectorTile=function(t,e){this.layers=t.readFields(no,{},e)},Jo=pn.VectorTileFeature=yn;pn.VectorTileLayer=Si;class mo extends Io{constructor(e,n,s){super(e,n),this.z=s}}class ho extends mo{constructor(e,n,s,u){super(e,n,s),this.w=u}}function Ro(t,e,n,s){const u=[],m=0===s?(g,E,T,z,$,W)=>{g.push(new Io(W,T+(W-E)/(z-E)*($-T)))}:(g,E,T,z,$,W)=>{g.push(new Io(E+(W-T)/($-T)*(z-E),W))};for(const g of t){const E=[];for(const T of g){if(T.length<=2)continue;const z=[];for(let Q=0;Q<T.length-1;Q++){const le=T[Q].x,de=T[Q].y,be=T[Q+1].x,xe=T[Q+1].y,je=0===s?le:de,gt=0===s?be:xe;je<e?gt>e&&m(z,le,de,be,xe,e):je>n?gt<n&&m(z,le,de,be,xe,n):z.push(T[Q]),gt<e&&je>=e&&m(z,le,de,be,xe,e),gt>n&&je<=n&&m(z,le,de,be,xe,n)}let $=T[T.length-1];const W=0===s?$.x:$.y;W>=e&&W<=n&&z.push($),z.length&&($=z[z.length-1],z[0].x===$.x&&z[0].y===$.y||z.push(z[0]),E.push(z))}E.length&&u.push(E)}return u}function fr(t,e,n,s){const u="x"===n?"y":"x",m=(s-t[n])/(e[n]-t[n]);t[u]=t[u]+(e[u]-t[u])*m,t[n]=s,t.hasOwnProperty("z")&&(t.z=Rr(t.z,e.z,m)),t.hasOwnProperty("w")&&(t.w=Rr(t.w,e.w,m))}function Rs(t,e,n,s){const u=n,m=s;for(const g of["x","y"]){let E=t,T=e;E[g]>=T[g]&&(E=e,T=t),E[g]<u&&T[g]>u&&fr(E,T,g,u),E[g]<m&&T[g]>m&&fr(T,E,g,m)}}function $o(t,e){return t.x-e.x||t.y-e.y}function Ho(t,e){return 0===$o(t.min,e.min)&&0===$o(t.max,e.max)}function Or(t,e){return!(t.min.x>e.max.x||t.max.x<e.min.x||t.min.y>e.max.y||t.max.y<e.min.y)}function Ma(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].sourceId!==e[n].sourceId||!Ho(t[n],e[n])||t[n].order!==e[n].order||t[n].clipMask!==e[n].clipMask)return!1;return!0}function wo(t,e,n){const s=1/Z,u=1/(1<<n.canonical.z),m=(e.x*s+n.canonical.x)*u+n.wrap,g=(e.y*s+n.canonical.y)*u;return{min:new Io((t.x*s+n.canonical.x)*u+n.wrap,(t.y*s+n.canonical.y)*u),max:new Io(m,g)}}function Gr(t,e,n){const s=1<<n.canonical.z,u=((e.x-n.wrap)*s-n.canonical.x)*Z,m=(e.y*s-n.canonical.y)*Z;return{min:new Io(((t.x-n.wrap)*s-n.canonical.x)*Z,(t.y*s-n.canonical.y)*Z),max:new Io(u,m)}}function vs(t,e,n,s,u,m,g){const E=t.indices,T=t.vertices,z=[];for(let $=s;$<s+u;$+=3){const W=e[n[$+0]+m],Q=e[n[$+1]+m],le=e[n[$+2]+m],de=Math.min(W.x,Q.x,le.x),be=Math.max(W.x,Q.x,le.x),xe=Math.min(W.y,Q.y,le.y),je=Math.max(W.y,Q.y,le.y);z.length=0,t.grid.query(new Io(de,xe),new Io(be,je),z);for(let gt=0;gt<z.length;gt++){const _t=z[gt];if(a0(T[E[3*_t+0]],T[E[3*_t+1]],T[E[3*_t+2]],W,Q,le,g))return!0}}return!1}function iu(t,e,n,s){if(!t||!n)return!1;let u=t.vertices;if(!e.canonical.equals(s.canonical)||e.wrap!==s.wrap){if(n.vertices.length<t.vertices.length)return iu(n,s,t,e);const m=e.canonical,g=s.canonical,E=Math.pow(2,g.z-m.z);u=t.vertices.map(T=>new Io((T.x+m.x*Z)*E-g.x*Z,(T.y+m.y*Z)*E-g.y*Z))}return vs(n,u,t.indices,0,t.indices.length,0,0)}function qs(t,e,n,s){const u=Math.pow(2,s.z-n.z);return new Io((t+n.x*Z)*u-s.x*Z,(e+n.y*Z)*u-s.y*Z)}function oc(t,e){const n=[];e.footprint.grid.queryPoint(t,n);const s=e.footprint.indices,u=e.footprint.vertices;for(let m=0;m<n.length;m++){const g=n[m];if(Qu([u[s[3*g+0]],u[s[3*g+1]],u[s[3*g+2]]],t))return!0}return!1}class c0{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,n){const s=this.toIdx(e,n);return{min:this.minimums[s],max:this.maximums[s]}}isLeaf(e,n){return this.leaves[this.toIdx(e,n)]}toIdx(e,n){return n*this.size+e}}function H2(t,e,n,s){let u=0,m=Number.MAX_VALUE;for(let g=0;g<3;g++)if(Math.abs(s[g])<1e-15){if(n[g]<t[g]||n[g]>e[g])return null}else{const E=1/s[g];let T=(t[g]-n[g])*E,z=(e[g]-n[g])*E;if(T>z){const $=T;T=z,z=$}if(T>u&&(u=T),z<m&&(m=z),u>m)return null}return u}function G2(t,e,n,s,u,m,g,E,T,z,$){const W=s-t,Q=u-e,le=m-n,de=g-t,be=E-e,xe=T-n,je=$[1]*xe-$[2]*be,gt=$[2]*de-$[0]*xe,_t=$[0]*be-$[1]*de,bt=W*je+Q*gt+le*_t;if(Math.abs(bt)<1e-15)return null;const nn=1/bt,Yt=z[0]-t,Sn=z[1]-e,Rn=z[2]-n,ai=(Yt*je+Sn*gt+Rn*_t)*nn;if(ai<0||ai>1)return null;const Di=Sn*le-Rn*Q,wi=Rn*W-Yt*le,Zi=Yt*Q-Sn*W,Mo=($[0]*Di+$[1]*wi+$[2]*Zi)*nn;return Mo<0||ai+Mo>1?null:(de*Di+be*wi+xe*Zi)*nn}function pp(t,e,n){return(t-e)/(n-e)}function fp(t,e,n,s,u,m,g,E,T){const z=1<<n,$=m-s,W=g-u,Q=(t+1)/z*$+s,le=(e+0)/z*W+u,de=(e+1)/z*W+u;E[0]=(t+0)/z*$+s,E[1]=le,T[0]=Q,T[1]=de}class Cm{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const n=function(m){const g=Math.ceil(Math.log2(m.dim/8)),E=[];let T=Math.ceil(Math.pow(2,g));const z=1/T,$=(le,de,be,xe,je)=>{const gt=xe?1:0,_t=(le+1)*be-gt,bt=de*be,nn=(de+1)*be-gt;je[0]=le*be,je[1]=bt,je[2]=_t,je[3]=nn};let W=new c0(T);const Q=[];for(let le=0;le<T*T;le++){$(le%T,Math.floor(le/T),z,!1,Q);const de=w1(Q[0],Q[1],m),be=w1(Q[2],Q[1],m),xe=w1(Q[2],Q[3],m),je=w1(Q[0],Q[3],m);W.minimums.push(Math.min(de,be,xe,je)),W.maximums.push(Math.max(de,be,xe,je)),W.leaves.push(1)}for(E.push(W),T/=2;T>=1;T/=2){const le=E[E.length-1];W=new c0(T);for(let de=0;de<T*T;de++){$(de%T,Math.floor(de/T),2,!0,Q);const be=le.getElevation(Q[0],Q[1]),xe=le.getElevation(Q[2],Q[1]),je=le.getElevation(Q[2],Q[3]),gt=le.getElevation(Q[0],Q[3]),_t=le.isLeaf(Q[0],Q[1]),bt=le.isLeaf(Q[2],Q[1]),nn=le.isLeaf(Q[2],Q[3]),Yt=le.isLeaf(Q[0],Q[3]),Sn=Math.min(be.min,xe.min,je.min,gt.min),Rn=Math.max(be.max,xe.max,je.max,gt.max),ai=_t&&bt&&nn&&Yt;W.maximums.push(Rn),W.minimums.push(Sn),W.leaves.push(Rn-Sn<=5&&ai?1:0)}E.push(W)}return E}(this.dem),s=n.length-1,u=n[s];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(n,0,0,s,0)}raycastRoot(e,n,s,u,m,g,E=1){return H2([e,n,-100],[s,u,this.maximums[0]*E],m,g)}raycast(e,n,s,u,m,g,E=1){if(!this.nodeCount)return null;const T=this.raycastRoot(e,n,s,u,m,g,E);if(null==T)return null;const z=[],$=[],W=[],Q=[],le=[{idx:0,t:T,nodex:0,nodey:0,depth:0}];for(;le.length>0;){const{idx:de,t:be,nodex:xe,nodey:je,depth:gt}=le.pop();if(this.leaves[de]){fp(xe,je,gt,e,n,s,u,W,Q);const bt=1<<gt,nn=(xe+0)/bt,Yt=(xe+1)/bt,Sn=(je+0)/bt,Rn=(je+1)/bt,ai=w1(nn,Sn,this.dem)*E,Di=w1(Yt,Sn,this.dem)*E,wi=w1(Yt,Rn,this.dem)*E,Zi=w1(nn,Rn,this.dem)*E,Mo=G2(W[0],W[1],ai,Q[0],W[1],Di,Q[0],Q[1],wi,m,g),Gi=G2(Q[0],Q[1],wi,W[0],Q[1],Zi,W[0],W[1],ai,m,g),yo=Math.min(null!==Mo?Mo:Number.MAX_VALUE,null!==Gi?Gi:Number.MAX_VALUE);if(yo!==Number.MAX_VALUE)return yo;{const Ri=l._.scaleAndAdd([],m,g,be);if(og(ai,Di,Zi,wi,pp(Ri[0],W[0],Q[0]),pp(Ri[1],W[1],Q[1]))>=Ri[2])return be}continue}let _t=0;for(let bt=0;bt<this._siblingOffset.length;bt++){fp((xe<<1)+this._siblingOffset[bt][0],(je<<1)+this._siblingOffset[bt][1],gt+1,e,n,s,u,W,Q),W[2]=-100,Q[2]=this.maximums[this.childOffsets[de]+bt]*E;const nn=H2(W,Q,m,g);if(null!=nn){const Yt=nn;z[bt]=Yt;let Sn=!1;for(let Rn=0;Rn<_t&&!Sn;Rn++)Yt>=z[$[Rn]]&&($.splice(Rn,0,bt),Sn=!0);Sn||($[_t]=bt),_t++}}for(let bt=0;bt<_t;bt++){const nn=$[bt];le.push({idx:this.childOffsets[de]+nn,t:z[nn],nodex:(xe<<1)+this._siblingOffset[nn][0],nodey:(je<<1)+this._siblingOffset[nn][1],depth:gt+1})}}return null}_addNode(e,n,s){return this.minimums.push(e),this.maximums.push(n),this.leaves.push(s),this.childOffsets.push(0),this.nodeCount++}_construct(e,n,s,u,m){if(1===e[u].isLeaf(n,s))return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const g=u-1,E=e[g];let T=0,z=0;for(let $=0;$<this._siblingOffset.length;$++){const W=2*n+this._siblingOffset[$][0],Q=2*s+this._siblingOffset[$][1],le=E.getElevation(W,Q),de=E.isLeaf(W,Q),be=this._addNode(le.min,le.max,de);de&&(T|=1<<$),z||(z=be)}for(let $=0;$<this._siblingOffset.length;$++)T&1<<$||this._construct(e,2*n+this._siblingOffset[$][0],2*s+this._siblingOffset[$][1],g,z+$)}}function og(t,e,n,s,u,m){return Rr(Rr(t,n,m),Rr(e,s,m),u)}function w1(t,e,n){const s=n.dim,u=On(t*s-.5,0,s-1),m=On(e*s-.5,0,s-1),g=Math.floor(u),E=Math.floor(m),T=Math.min(g+1,s-1),z=Math.min(E+1,s-1);return og(n.get(g,E),n.get(T,E),n.get(g,z),n.get(T,z),u-g,m-E)}const W1={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Up(t,e,n){return(256*t*256+256*e+n)/10-1e4}function Tf(t,e,n){return 256*t+e+n/256-32768}class mp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,n,s,u=!1){if(this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(s&&"mapbox"!==s&&"terrarium"!==s)return fa(`"${s}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=n.height;const m=this.dim=n.height-2,g=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.floatView=new Float32Array(n.data.buffer),this.borderReady=u,this._modifiedForSources={},!u){for(let T=0;T<m;T++)g[this._idx(-1,T)]=g[this._idx(0,T)],g[this._idx(m,T)]=g[this._idx(m-1,T)],g[this._idx(T,-1)]=g[this._idx(T,0)],g[this._idx(T,m)]=g[this._idx(T,m-1)];g[this._idx(-1,-1)]=g[this._idx(0,0)],g[this._idx(m,-1)]=g[this._idx(m-1,0)],g[this._idx(-1,m)]=g[this._idx(0,m-1)],g[this._idx(m,m)]=g[this._idx(m-1,m-1)]}const E="terrarium"===s?Tf:Up;for(let T=0;T<g.length;++T){const z=4*T;this.floatView[T]=E(this.pixels[z],this.pixels[z+1],this.pixels[z+2])}this._timestamp=ki.now()}_buildQuadTree(){this._tree=new Cm(this)}get(e,n,s=!1){s&&(e=On(e,-1,this.dim),n=On(n,-1,this.dim));const u=this._idx(e,n);return this.floatView[u]}set(e,n,s){const u=this._idx(e,n),m=this.floatView[u];return this.floatView[u]=s,s-m}static getUnpackVector(e){return W1[e]}_idx(e,n){if(e<-1||e>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(e+1)}static pack(e,n){const s=[0,0,0,0],u=mp.getUnpackVector(n);let m=Math.floor((e+u[3])/u[2]);return s[2]=m%256,m=Math.floor(m/256),s[1]=m%256,m=Math.floor(m/256),s[0]=m,s}getPixels(){return new If({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,n,s){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=n*this.dim,m=n*this.dim+this.dim,g=s*this.dim,E=s*this.dim+this.dim;switch(n){case-1:u=m-1;break;case 1:m=u+1}switch(s){case-1:g=E-1;break;case 1:E=g+1}const T=-n*this.dim,z=-s*this.dim;for(let $=g;$<E;$++)for(let W=u;W<m;W++){const Q=4*this._idx(W,$),le=4*this._idx(W+T,$+z);this.pixels[Q+0]=e.pixels[le+0],this.pixels[Q+1]=e.pixels[le+1],this.pixels[Q+2]=e.pixels[le+2],this.pixels[Q+3]=e.pixels[le+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}at(mp,"DEMData"),at(Cm,"DemMinMaxQuadTree",{omit:["dem"]});class Hp{constructor(e,n,s){this._demTile=e,this._dem=this._demTile.dem,this._scale=n,this._offset=s}static create(e,n,s){const u=s||e.findDEMTileFor(n);if(!u||!u.dem)return;const m=u.dem,g=u.tileID,E=1<<n.canonical.z-g.canonical.z;return new Hp(u,m.dim/Z/E,[(n.canonical.x/E-g.canonical.x)*m.dim,(n.canonical.y/E-g.canonical.y)*m.dim])}tileCoordToPixel(e,n){const s=n*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),m=Math.floor(s);return new Io(u,m)}getElevationAt(e,n,s,u){const m=e*this._scale+this._offset[0],g=n*this._scale+this._offset[1],E=Math.floor(m),T=Math.floor(g),z=this._dem;return u=!!u,s?Rr(Rr(z.get(E,T,u),z.get(E,T+1,u),g-T),Rr(z.get(E+1,T,u),z.get(E+1,T+1,u),g-T),m-E):z.get(E,T,u)}getElevationAtPixel(e,n,s){return this._dem.get(e,n,!!s)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Dl(1,e)*this._dem.stride}}const rg={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7},Bg=Jo.types,a2=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],Gp=["fill-extrusion-flood-light-ground-radius"],S=Math.pow(2,13),a=Math.pow(2,15)-1,p=new Io(0,1),w=2147483648;function P(t,e,n,s,u,m,g,E){t.emplaceBack((e<<1)+g,(n<<1)+m,(Math.floor(s*S)<<1)+u,Math.round(E))}function U(t,e,n,s,u,m){t.emplaceBack(e.x,e.y,(n.x<<1)+s,(n.y<<1)+u,m)}function J(t,e,n){t.emplaceBack(e.x,e.y,e.z,16384*n[0],16384*n[1],16384*n[2])}class ve{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class Re{constructor(){this.centroidXY=new Io(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Io(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Io(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Io(this.max.x-this.min.x,this.max.y-this.min.y)}}class st{constructor(){this.acc=new Io(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(e,n){e.min.x===Number.MAX_VALUE&&(e.min.x=e.max.x=n.x,e.min.y=e.max.y=n.y)}appendEdge(e,n,s){this.accCount++,this.acc._add(n);let u=!!this.borders;n.x<e.min.x?(e.min.x=n.x,u=!0):n.x>e.max.x&&(e.max.x=n.x,u=!0),n.y<e.min.y?(e.min.y=n.y,u=!0):n.y>e.max.y&&(e.max.y=n.y,u=!0),((0===n.x||n.x===Z)&&n.x===s.x)!=((0===n.y||n.y===Z)&&n.y===s.y)&&this.processBorderOverlap(n,s),u&&this.checkBorderIntersection(n,s)}checkBorderIntersection(e,n){n.x<0!=e.x<0&&this.addBorderIntersection(0,Rr(n.y,e.y,(0-n.x)/(e.x-n.x))),n.x>Z!=e.x>Z&&this.addBorderIntersection(1,Rr(n.y,e.y,(Z-n.x)/(e.x-n.x))),n.y<0!=e.y<0&&this.addBorderIntersection(2,Rr(n.x,e.x,(0-n.y)/(e.y-n.y))),n.y>Z!=e.y>Z&&this.addBorderIntersection(3,Rr(n.x,e.x,(Z-n.y)/(e.y-n.y)))}addBorderIntersection(e,n){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const s=this.borders[e];n<s[0]&&(s[0]=n),n>s[1]&&(s[1]=n)}processBorderOverlap(e,n){if(e.x===n.x){if(e.y===n.y)return;const s=0===e.x?0:1;this.addBorderIntersection(s,n.y),this.addBorderIntersection(s,e.y)}else{const s=0===e.y?2:3;this.addBorderIntersection(s,n.x),this.addBorderIntersection(s,e.x)}}centroid(){return 0===this.accCount?new Io(0,0):new Io(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((e,n)=>e+ +(n[0]!==Number.MAX_VALUE),0):0}}function Wt(t,e){const n=t.add(e)._unit(),s=On(t.x*n.x+t.y*n.y,-1,1);var u,m,g;return u=Math.acos(s),Math.min(4,Math.max(-4,Math.tan(u)))/4*a*((m=t).x*(g=e).y-m.y*g.x<0?-1:1)}const In=[t=>t.x<0,t=>t.x>Z,t=>t.y<0,t=>t.y>Z];function hi(t,e,n,s){const u=[4];if(0===s)return u;n._mult(s);const m=t.sub(n),g=e.sub(n),E=[t,e,m,g];for(let T=0;T<4;T++)for(const z of E)if(In[T](z)){u.push(T);break}return u}class Ji{constructor(e){this.vertexArray=new _u,this.indexArray=new eu,this.programConfigurations=new v1(e.layers,{zoom:e.zoom,lut:e.lut},n=>Gp.includes(n)),this._segments=new al,this.hiddenByLandmarkVertexArray=new md,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new al}getDefaultSegment(){return this.regionSegments[4]}hasData(){return 0!==this.vertexArray.length}addData(e,n,s,u=!1){const m=e.length;if(m>2){let g=Math.max(0,this._segments.get().length-1);const E=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[g].length);let T;g!==this._segments.get().length-1&&(g++,this._segmentToGroundQuads[g]=[],this._segmentToRegionTriCounts[g]=[0,0,0,0,0]);{const z=e[0],$=e[1];T=Wt(z.sub(e[m-1])._perp()._unit(),$.sub(z)._perp()._unit())}for(let z=0;z<m;z++){const $=z===m-1?0:z+1,W=e[z],Q=e[$],le=e[$===m-1?0:$+1],de=Q.sub(W)._perp()._unit(),be=Wt(de,le.sub(Q)._perp()._unit()),xe=T,je=be;if(zs(W,Q,n)||u&&Bs(W,n)&&Bs(Q,n)){T=be;continue}const gt=E.vertexLength;U(this.vertexArray,W,Q,1,1,xe),U(this.vertexArray,W,Q,1,0,xe),U(this.vertexArray,W,Q,0,1,je),U(this.vertexArray,W,Q,0,0,je),E.vertexLength+=4;const _t=hi(W,Q,de,s);for(const bt of _t)this._segmentToGroundQuads[g].push({id:gt,region:bt}),this._segmentToRegionTriCounts[g][bt]+=2,E.primitiveLength+=2;T=be}}}prepareBorderSegments(){if(!this.hasData())return;const e=this._segments.get(),n=e.length;for(let s=0;s<n;s++)this._segmentToGroundQuads[s].sort((u,m)=>u.region-m.region);for(let s=0;s<n;s++){const u=this._segmentToGroundQuads[s],m=e[s],g=this._segmentToRegionTriCounts[s];g.reduce((T,z)=>T+z,0);let E=0;for(let T=0;T<=4;T++){const z=g[T];if(0!==z){let $=this.regionSegments[T];$||($=this.regionSegments[T]=new al);const W={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+E,vertexLength:m.vertexLength,primitiveLength:z};$.get().push(W)}E+=z}for(let T=0;T<u.length;T++){const z=u[T].id;this.indexArray.emplaceBack(z,z+1,z+3),this.indexArray.emplaceBack(z,z+3,z+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(e,n,s,u,m,g){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,e,n,s,u,m,g)}upload(e){this.hasData()&&(this.vertexBuffer=e.createVertexBuffer(this.vertexArray,ct.members),this.indexBuffer=e.createIndexBuffer(this.indexArray))}uploadPaintProperties(e){this.hasData()&&this.programConfigurations.upload(e)}update(e,n,s,u,m,g){this.hasData()&&this.programConfigurations.updatePaintArrays(e,n,s,u,m,g)}updateHiddenByLandmark(e){if(!this.hasData())return;const n=e.groundVertexCount+e.groundVertexArrayOffset;if(0===e.groundVertexCount)return;const s=e.flags&w?1:0;for(let u=e.groundVertexArrayOffset;u<n;++u)this.hiddenByLandmarkVertexArray.emplace(u,s);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(e){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=e.createVertexBuffer(this.hiddenByLandmarkVertexArray,pt.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let e=0;e<=4;e++){const n=this.regionSegments[e];n&&n.destroy()}}}}class Zo{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new eu,this.footprintVertices=new Xu,this.footprintSegments=[],this.layoutVertexArray=new Fh,this.centroidVertexArray=new La,this.indexArray=new eu,this.programConfigurations=new v1(e.layers,{zoom:e.zoom,lut:e.lut},n=>a2.includes(n)),this.segments=new al,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.groundEffect=new Ji(e),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(e,n){}populate(e,n,s,u){this.features=[],this.hasPattern=s2("fill-extrusion",this.layers,n),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=mf(s),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:g,index:E,sourceLayerIndex:T}of e){const z=this.layers[0]._featureFilter.needGeometry,$=L0(m,z);if(!this.layers[0]._featureFilter.filter(new ts(this.zoom),$,s))continue;const W={id:g,sourceLayerIndex:T,index:E,geometry:z?$.geometry:o1(m,s,u),properties:m.properties,type:m.type,patterns:{}},Q=this.layoutVertexArray.length;this.hasPattern?this.features.push(ig("fill-extrusion",this.layers,W,this.zoom,n)):this.addFeature(W,W.geometry,E,s,{},n.availableImages,u,n.brightness),n.featureIndex.insert(m,W.geometry,E,T,this.index,Q)}this.sortBorders(),"mercator"===this.projection.name&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(e,n,s,u,m,g){for(const E of this.features){const{geometry:T}=E;this.addFeature(E,T,E.index,n,s,u,m,g)}this.sortBorders(),"mercator"===this.projection.name&&this.splitToSubtiles()}update(e,n,s,u,m){const g=0!==Object.keys(e).length;if(g&&!this.stateDependentLayers.length)return;const E=g?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(e,n,E,s,u,m),this.groundEffect.update(e,n,E,s,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,sn),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Ct.members,!0)),this.groundEffect.upload(e)),this.groundEffect.uploadPaintProperties(e),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.groundEffect.uploadHiddenByLandmark(e),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,ot.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,s,u,m,g,E,T){const z=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(e,{})/this.tileToMeter,$=[new Io(0,0),new Io(Z,Z)],W=E.projection,Q="globe"===W.name,le="Polygon"===Bg[e.type],de=new st;de.centroidDataIndex=this.centroidData.length;const be=new Re,xe=this.layers[0].paint.get("fill-extrusion-base").evaluate(e,{},u)<=0,je=this.layers[0].paint.get("fill-extrusion-height").evaluate(e,{},u);be.height=je,be.vertexArrayOffset=this.layoutVertexArray.length,be.groundVertexArrayOffset=this.groundEffect.vertexArray.length,Q&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new sf);const gt=jp(n,500);for(let Rn=gt.length-1;Rn>=0;Rn--){const ai=gt[Rn];(0===ai.length||(_t=ai[0]).every(Di=>Di.x<=0)||_t.every(Di=>Di.x>=Z)||_t.every(Di=>Di.y<=0)||_t.every(Di=>Di.y>=Z))&&gt.splice(Rn,1)}var _t;let bt;if(Q)bt=zi(gt,$,u);else{bt=[];for(const Rn of gt)bt.push({polygon:Rn,bounds:$})}const nn=le?this.edgeRadius:0,Yt=nn>0&&this.zoom<17,Sn=(Rn,ai)=>{if(0===Rn.length)return!1;const Di=Rn[Rn.length-1];return ai.x===Di.x&&ai.y===Di.y};for(const{polygon:Rn,bounds:ai}of bt){let Di=0,wi=0;for(const yo of Rn)le&&!yo[0].equals(yo[yo.length-1])&&yo.push(yo[0]),wi+=le?yo.length-1:yo.length;const Zi=this.segments.prepareSegment((le?5:4)*wi,this.layoutVertexArray,this.indexArray);be.footprintSegIdx<0&&(be.footprintSegIdx=this.footprintSegments.length),be.polygonSegIdx<0&&(be.polygonSegIdx=this.polygonSegments.length);const Mo={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Gi=new ve;if(Gi.vertexOffset=this.footprintVertices.length,Gi.indexOffset=3*this.footprintIndices.length,Gi.ringIndices=[],le){const yo=[],Ri=[];Di=Zi.vertexLength;for(let Oo=0;Oo<Rn.length;Oo++){const Co=Rn[Oo];Co.length&&0!==Oo&&Ri.push(yo.length/2);const ar=[];let Ao,jo;Ao=Co[1].sub(Co[0])._perp()._unit(),Gi.ringIndices.push(Co.length-1);for(let Jr=1;Jr<Co.length;Jr++){const Fr=Co[Jr],Lr=Co[Jr===Co.length-1?1:Jr+1],No=Fr.clone();if(nn){jo=Lr.sub(Fr)._perp()._unit();const ns=Ao.add(jo)._unit(),Ys=nn*Math.min(4,1/(Ao.x*ns.x+Ao.y*ns.y));No.x+=Ys*ns.x,No.y+=Ys*ns.y,No.x=Math.round(No.x),No.y=Math.round(No.y),Ao=jo}!xe||0!==nn&&!Yt||Sn(ar,No)||ar.push(No),P(this.layoutVertexArray,No.x,No.y,0,0,1,1,0),Zi.vertexLength++,this.footprintVertices.emplaceBack(Fr.x,Fr.y),yo.push(Fr.x,Fr.y),Q&&J(this.layoutVertexExtArray,W.projectTilePoint(No.x,No.y,u),W.upVector(u,No.x,No.y))}xe&&(0===nn||Yt)&&(0!==ar.length&&Sn(ar,ar[0])&&ar.pop(),this.groundEffect.addData(ar,ai,z))}const vo=N0(yo,Ri);for(let Oo=0;Oo<vo.length;Oo+=3)this.footprintIndices.emplaceBack(Gi.vertexOffset+vo[Oo+0],Gi.vertexOffset+vo[Oo+1],Gi.vertexOffset+vo[Oo+2]),this.indexArray.emplaceBack(Di+vo[Oo],Di+vo[Oo+2],Di+vo[Oo+1]),Zi.primitiveLength++;Gi.indexCount+=vo.length,Gi.vertexCount+=this.footprintVertices.length-Gi.vertexOffset}for(let yo=0;yo<Rn.length;yo++){const Ri=Rn[yo];de.startRing(be,Ri[0]);let vo=Ri.length>4&&Aa(Ri[Ri.length-2],Ri[0],Ri[1]),Oo=nn?rr(Ri[Ri.length-2],Ri[0],Ri[1],nn):0;const Co=[];let ar,Ao,jo;Ao=Ri[1].sub(Ri[0])._perp()._unit();let Jr=!0;for(let Fr=1,Lr=0;Fr<Ri.length;Fr++){let No=Ri[Fr-1],ns=Ri[Fr];const Ys=Ri[Fr===Ri.length-1?1:Fr+1];if(de.appendEdge(be,ns,No),zs(ns,No,ai)){nn&&(Ao=Ys.sub(ns)._perp()._unit(),Jr=!Jr);continue}const Ss=ns.sub(No)._perp(),ha=Ss.x/(Math.abs(Ss.x)+Math.abs(Ss.y)),ra=Ss.y>0?1:0,ba=No.dist(ns);if(Lr+ba>32768&&(Lr=0),nn){jo=Ys.sub(ns)._perp()._unit();let Qa=Ds(No,ns,Ys,br(Ao,jo),nn);isNaN(Qa)&&(Qa=0);const Ba=ns.sub(No)._unit();No=No.add(Ba.mult(Oo))._round(),ns=ns.add(Ba.mult(-Qa))._round(),Oo=Qa,Ao=jo,xe&&this.zoom>=17&&(Sn(Co,No)||Co.push(No),Sn(Co,ns)||Co.push(ns))}const ys=Zi.vertexLength,Hl=Ri.length>4&&Aa(No,ns,Ys);let zl=Pl(Lr,vo,Jr);if(P(this.layoutVertexArray,No.x,No.y,ha,ra,0,0,zl),P(this.layoutVertexArray,No.x,No.y,ha,ra,0,1,zl),Lr+=ba,zl=Pl(Lr,Hl,!Jr),vo=Hl,P(this.layoutVertexArray,ns.x,ns.y,ha,ra,0,0,zl),P(this.layoutVertexArray,ns.x,ns.y,ha,ra,0,1,zl),Zi.vertexLength+=4,this.indexArray.emplaceBack(ys+0,ys+1,ys+2),this.indexArray.emplaceBack(ys+1,ys+3,ys+2),Zi.primitiveLength+=2,nn){const Qa=Di+(1===Fr?Ri.length-2:Fr-2),Ba=1===Fr?Di:Qa+1;if(this.indexArray.emplaceBack(ys+1,Qa,ys+3),this.indexArray.emplaceBack(Qa,Ba,ys+3),Zi.primitiveLength+=2,void 0===ar&&(ar=ys),!zs(Ys,Ri[Fr],ai)){const Ua=Fr===Ri.length-1?ar:Zi.vertexLength;this.indexArray.emplaceBack(ys+2,ys+3,Ua),this.indexArray.emplaceBack(ys+3,Ua+1,Ua),this.indexArray.emplaceBack(ys+3,Ba,Ua+1),Zi.primitiveLength+=3}Jr=!Jr}if(Q){const Qa=this.layoutVertexExtArray,Ba=W.projectTilePoint(No.x,No.y,u),Ua=W.projectTilePoint(ns.x,ns.y,u),rc=W.upVector(u,No.x,No.y),sc=W.upVector(u,ns.x,ns.y);J(Qa,Ba,rc),J(Qa,Ba,rc),J(Qa,Ua,sc),J(Qa,Ua,sc)}}le&&(Di+=Ri.length-1),xe&&nn&&this.zoom>=17&&(0!==Co.length&&Sn(Co,Co[0])&&Co.pop(),this.groundEffect.addData(Co,ai,z,nn>0))}this.footprintSegments.push(Gi),Mo.triangleCount=this.indexArray.length-Mo.triangleArrayOffset,this.polygonSegments.push(Mo),++be.footprintSegLen,++be.polygonSegLen}if(be.vertexCount=this.layoutVertexArray.length-be.vertexArrayOffset,be.groundVertexCount=this.groundEffect.vertexArray.length-be.groundVertexArrayOffset,0!==be.vertexCount){if(be.centroidXY=de.borders?p:this.encodeCentroid(de,be),this.centroidData.push(be),de.borders){this.featuresOnBorder.push(de);const Rn=this.featuresOnBorder.length-1;for(let ai=0;ai<de.borders.length;ai++)de.borders[ai][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[ai].push(Rn)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,g,u,T),this.groundEffect.addPaintPropertiesData(e,s,m,g,u,T),this.maxHeight=Math.max(this.maxHeight,je)}}sortBorders(){for(let e=0;e<this.borderFeatureIndices.length;e++)this.borderFeatureIndices[e].sort((n,s)=>this.featuresOnBorder[n].borders[e][0]-this.featuresOnBorder[s].borders[e][0])}splitToSubtiles(){const e=[];for(let E=0;E<this.centroidData.length;E++){const T=this.centroidData[E],z=+(T.min.y+T.max.y>Z),$=2*z+(+(T.min.x+T.max.x>Z)^z);for(let W=0;W<T.polygonSegLen;W++){const Q=T.polygonSegIdx+W;e.push({centroidIdx:E,subtile:$,polygonSegmentIdx:Q,triangleSegmentIdx:this.polygonSegments[Q].triangleSegIdx})}}const n=new eu;e.sort((E,T)=>E.triangleSegmentIdx===T.triangleSegmentIdx?E.subtile-T.subtile:E.triangleSegmentIdx-T.triangleSegmentIdx);let s=0,u=0,m=0;for(const E of e){if(E.triangleSegmentIdx!==s)break;m++}const g=e.length;for(;u!==e.length;){s=e[u].triangleSegmentIdx;let E=0,T=u,z=u;for(let $=T;$<m&&e[$].subtile===E;$++)z++;for(;T!==m;){const $=e[T];E=$.subtile;const W=this.centroidData[$.centroidIdx].min.clone(),Q=this.centroidData[$.centroidIdx].max.clone(),le={vertexOffset:this.segments.segments[s].vertexOffset,primitiveOffset:n.length,vertexLength:this.segments.segments[s].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let de=T;de<z;de++){const be=e[de],xe=this.polygonSegments[be.polygonSegmentIdx],je=this.centroidData[be.centroidIdx].min,gt=this.centroidData[be.centroidIdx].max,_t=this.indexArray.uint16;for(let bt=xe.triangleArrayOffset;bt<xe.triangleArrayOffset+xe.triangleCount;bt++)n.emplaceBack(_t[3*bt],_t[3*bt+1],_t[3*bt+2]);le.primitiveLength+=xe.triangleCount,W.x=Math.min(W.x,je.x),W.y=Math.min(W.y,je.y),Q.x=Math.max(Q.x,gt.x),Q.y=Math.max(Q.y,gt.y)}le.primitiveLength>0&&this.triangleSubSegments.push({segment:le,min:W,max:Q}),T=z;for(let de=T;de<m&&e[de].subtile===e[T].subtile;de++)z++}u=m;for(let $=u;$<g&&e[$].triangleSegmentIdx===e[u].triangleSegmentIdx;$++)m++}n._trim(),this.indexArray=n}getVisibleSegments(e,n,s){let u=0,m=0;const g=1<<e.canonical.z;if(n){const be=n.getMinMaxForTile(e);be&&(u=be.min,m=be.max)}m+=this.maxHeight;const E=e.toUnwrapped();let T;const z=[E.canonical.x/g+E.wrap,E.canonical.y/g],$=[(E.canonical.x+1)/g+E.wrap,(E.canonical.y+1)/g],W=new al,Q=(be,xe,je)=>[be[0]*(1-je[0])+xe[0]*je[0],be[1]*(1-je[1])+xe[1]*je[1]],le=[],de=[];for(const be of this.triangleSubSegments){le[0]=be.min.x/Z,le[1]=be.min.y/Z,de[0]=be.max.x/Z,de[1]=be.max.y/Z;const xe=Q(z,$,le),je=Q(z,$,de);if(0===new pl([xe[0],xe[1],u],[je[0],je[1],m]).intersectsPrecise(s)){T&&(W.segments.push(T),T=void 0);continue}const gt=be.segment;T&&T.vertexOffset!==gt.vertexOffset&&(W.segments.push(T),T=void 0),T?(T.vertexLength+=gt.vertexLength,T.primitiveLength+=gt.primitiveLength):T={vertexOffset:gt.vertexOffset,primitiveLength:gt.primitiveLength,vertexLength:gt.vertexLength,primitiveOffset:gt.primitiveOffset,sortKey:void 0,vaos:{}}}return T&&W.segments.push(T),W}encodeCentroid(e,n){const s=e.centroid(),u=n.span(),m=Math.min(7,Math.round(u.x*this.tileToMeter/10)),g=Math.min(7,Math.round(u.y*this.tileToMeter/10));return new Io(On(s.x,1,Z-1)<<3|m,On(s.y,1,Z-1)<<3|g)}encodeBorderCentroid(e){if(!e.borders)return new Io(0,0);const n=e.borders,s=Number.MAX_VALUE;if(n[0][0]!==s||n[1][0]!==s){const u=n[0][0]!==s?0:1;return new Io(6|(n[0][0]!==s?0:65528),(n[u][0]+n[u][1])/2<<3|6)}{const u=n[2][0]!==s?2:3;return new Io((n[u][0]+n[u][1])/2<<3|6,6|(n[2][0]!==s?0:65528))}}showCentroid(e){const n=this.centroidData[e.centroidDataIndex];n.flags&=w,n.centroidXY.x=0,n.centroidXY.y=0,this.writeCentroidToBuffer(n)}writeCentroidToBuffer(e){this.groundEffect.updateHiddenByLandmark(e);const n=e.vertexArrayOffset,s=e.vertexCount+e.vertexArrayOffset,u=e.flags&w?p:e.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(n);if(this.centroidVertexArray.geta_centroid_pos1(n)!==u.y||m!==u.x){for(let g=n;g<s;++g)this.centroidVertexArray.emplace(g,u.x,u.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const e of this.centroidData)this.writeCentroidToBuffer(e)}updateReplacement(e,n,s){if(n.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=n.updateTime;const u=n.getReplacementRegionsForTile(e.toUnwrapped());if(Ma(this.activeReplacements,u))return;if(this.activeReplacements=u,0===this.centroidVertexArray.length)this.createCentroidsBuffer();else for(const g of this.centroidData)g.flags&=2147483647;const m=[];for(const g of this.activeReplacements){if(g.order<s)continue;const E=Math.pow(2,g.footprintTileId.canonical.z-e.canonical.z);for(const T of this.centroidData)if(!(T.flags&w||g.min.x>T.max.x||T.min.x>g.max.x||g.min.y>T.max.y||T.min.y>g.max.y))for(let z=0;z<T.footprintSegLen;z++){const $=this.footprintSegments[T.footprintSegIdx+z];if(m.length=0,ti(this.footprintVertices,$.vertexOffset,$.vertexCount,g.footprintTileId.canonical,e.canonical,m),vs(g.footprint,m,this.footprintIndices.uint16,$.indexOffset,$.indexCount,-$.vertexOffset,-E)){T.flags|=w;break}}}for(const g of this.centroidData)this.writeCentroidToBuffer(g);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(e,n,s){let u=!1;for(let m=0;m<s.footprintSegLen;m++){const g=this.footprintSegments[s.footprintSegIdx+m];let E=0;for(const T of g.ringIndices){for(let z=E,$=T+E-1;z<T+E;$=z++){const W=this.footprintVertices.int16[2*(z+g.vertexOffset)+0],Q=this.footprintVertices.int16[2*(z+g.vertexOffset)+1],le=this.footprintVertices.int16[2*($+g.vertexOffset)+1];Q>n!=le>n&&e<(this.footprintVertices.int16[2*($+g.vertexOffset)+0]-W)*(n-Q)/(le-Q)+W&&(u=!u)}E=T}}return u}getHeightAtTileCoord(e,n){let s=Number.NEGATIVE_INFINITY,u=!0;const m=4*(e+Z)*Z+(n+Z);if(this.partLookup.hasOwnProperty(m)){const g=this.partLookup[m];return g?{height:g.height,hidden:!!(g.flags&w)}:void 0}for(const g of this.centroidData)e>g.max.x||g.min.x>e||n>g.max.y||g.min.y>n||this.footprintContainsPoint(e,n,g)&&g&&g.height>s&&(s=g.height,this.partLookup[m]=g,u=!!(g.flags&w));if(s!==Number.NEGATIVE_INFINITY)return{height:s,hidden:u};this.partLookup[m]=void 0}}function br(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function rr(t,e,n,s){const u=e.sub(t)._perp()._unit(),m=n.sub(e)._perp()._unit();return Ds(t,e,n,br(u,m),s)}function Ds(t,e,n,s,u){const m=Math.sqrt(1-s*s);return Math.min(t.dist(e)/3,e.dist(n)/3,u*m/s)}function zs(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function Bs(t,e){return t.x<e[0].x||t.x>e[1].x||t.y<e[0].y||t.y>e[1].y}function Aa(t,e,n){if(t.x<0||t.x>=Z||e.x<0||e.x>=Z||n.x<0||n.x>=Z)return!1;const s=n.sub(e),u=s.perp(),m=t.sub(e);return(s.x*m.x+s.y*m.y)/Math.sqrt((s.x*s.x+s.y*s.y)*(m.x*m.x+m.y*m.y))>-.866&&u.x*m.x+u.y*m.y<0}function Pl(t,e,n){const s=e?2|t:-3&t;return n?1|s:-2&s}function qa(){const t=Math.PI/32,e=Math.tan(t),n=lp;return n*Math.sqrt(1+2*e*e)-n}function zi(t,e,n){const s=1<<n.z,u=bu(n.x/s),m=bu((n.x+1)/s),g=Fc(n.y/s),E=Fc((n.y+1)/s);return function(T,z,$,W,Q=0,le){const de=[];if(!T.length||!$||!W)return de;const be=(Yt,Sn)=>{for(const Rn of Yt)de.push({polygon:Rn,bounds:Sn})},xe=Math.ceil(Math.log2($)),je=Math.ceil(Math.log2(W)),gt=xe-je,_t=[];for(let Yt=0;Yt<Math.abs(gt);Yt++)_t.push(gt>0?0:1);for(let Yt=0;Yt<Math.min(xe,je);Yt++)_t.push(0),_t.push(1);let bt=T;if(bt=Ro(bt,z[0].y-Q,z[1].y+Q,1),bt=Ro(bt,z[0].x-Q,z[1].x+Q,0),!bt.length)return de;const nn=[];for(_t.length?nn.push({polygons:bt,bounds:z,depth:0}):be(bt,z);nn.length;){const Yt=nn.pop(),Sn=Yt.depth,Rn=_t[Sn],ai=Yt.bounds[0],Di=Yt.bounds[1],wi=0===Rn?ai.x:ai.y,Zi=0===Rn?Di.x:Di.y,Mo=le?le(Rn,wi,Zi):.5*(wi+Zi),Gi=Ro(Yt.polygons,wi-Q,Mo+Q,Rn),yo=Ro(Yt.polygons,Mo-Q,Zi+Q,Rn);if(Gi.length){const Ri=[ai,new Io(0===Rn?Mo:Di.x,1===Rn?Mo:Di.y)];_t.length>Sn+1?nn.push({polygons:Gi,bounds:Ri,depth:Sn+1}):be(Gi,Ri)}if(yo.length){const Ri=[new Io(0===Rn?Mo:ai.x,1===Rn?Mo:ai.y),Di];_t.length>Sn+1?nn.push({polygons:yo,bounds:Ri,depth:Sn+1}):be(yo,Ri)}}return de}(t,e,Math.ceil((m-u)/11.25),Math.ceil((g-E)/11.25),1,(T,z,$)=>{if(0===T)return.5*(z+$);{const W=Fc((n.y+z/Z)/s);return($h(.5*(Fc((n.y+$/Z)/s)+W))*s-n.y)*Z}})}function ti(t,e,n,s,u,m){const g=Math.pow(2,s.z-u.z);for(let E=0;E<n;E++){let T=t.int16[2*(E+e)+0],z=t.int16[2*(E+e)+1];T=(T+u.x*Z)*g-s.x*Z,z=(z+u.y*Z)*g-s.y*Z,m.push(new Io(T,z))}}at(Zo,"FillExtrusionBucket",{omit:["layers","features"]}),at(Re,"PartData"),at(ve,"FootprintSegment"),at(st,"BorderCentroidData"),at(Ji,"GroundEffect");const yi=new pa({visibility:new qi(ri["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new qi(ri["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Bi={paint:new pa({"fill-extrusion-opacity":new qi(ri["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new er(ri["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qi(ri["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qi(ri["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new er(ri["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new er(ri["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new er(ri["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qi(ri["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new qi(ri["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new qi(ri["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new qi(ri["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new qi(ri["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new qi(ri["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new qi(ri["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new qi(ri["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new er(ri["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new er(ri["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new qi(ri["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new qi(ri["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new qi(ri["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new qi(ri["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new qi(ri["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:yi};function Ui(t,e){return t.x*e.x+t.y*e.y}function lo(t,e){if(1===t.length){let n=0;const s=e[n++];let u;for(;!u||s.equals(u);)if(u=e[n++],!u)return 1/0;for(;n<e.length;n++){const m=e[n],g=t[0],E=u.sub(s),T=m.sub(s),z=g.sub(s),$=Ui(E,E),W=Ui(E,T),Q=Ui(T,T),le=Ui(z,E),de=Ui(z,T),be=$*Q-W*W,xe=(Q*le-W*de)/be,je=($*de-W*le)/be,gt=s.z*(1-xe-je)+u.z*xe+m.z*je;if(isFinite(gt))return gt}return 1/0}{let n=1/0;for(const s of e)n=Math.min(n,s.z);return n}}function gi(t,e,n,s,u,m,g,E){const T=g*u.getElevationAt(t,e,!0,!0),z=0!==m[0],$=z?0===m[1]?g*(m[0]/7-450):g*function(W,Q,le){const de=Math.floor(Q[0]/8),be=Math.floor(Q[1]/8),xe=10*(Q[0]-8*de),je=10*(Q[1]-8*be),gt=W.getElevationAt(de,be,!0,!0),_t=W.getMeterToDEM(le),bt=Math.floor(.5*(xe*_t-1)),nn=Math.floor(.5*(je*_t-1)),Yt=W.tileCoordToPixel(de,be),Sn=2*bt+1,Rn=2*nn+1,ai=(Oo=Sn,Co=Rn,[(yo=W).getElevationAtPixel(Ri=Yt.x-bt,vo=Yt.y-nn,!0),yo.getElevationAtPixel(Ri+Co,vo,!0),yo.getElevationAtPixel(Ri,vo+Co,!0),yo.getElevationAtPixel(Ri+Oo,vo+Co,!0)]),Di=Math.abs(ai[0]-ai[1]),wi=Math.abs(ai[2]-ai[3]),Zi=Math.abs(ai[0]-ai[2])+Math.abs(ai[1]-ai[3]),Mo=Math.min(.25,.5*_t*(Di+wi)/Sn),Gi=Math.min(.25,.5*_t*Zi/Rn);var yo,Ri,vo,Oo,Co;return gt+Math.max(Mo*xe,Gi*je)}(u,m,E):T;return{base:T+(0===n)?-1:n,top:z?Math.max($+s,T+n+2):T+s}}const x1=va([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:sg}=x1,bv=va([{name:"a_packed",components:4,type:"Float32"}]),{members:ag}=bv,km=va([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Ng}=km,h4=va([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),L4=va([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),l2=va([{name:"a_projected_pos",components:4,type:"Float32"}],4);va([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const sh=va([{name:"a_occlusion_query_opacity",components:1,type:"Float32"}],4),B4=va([{name:"a_z_offset",components:1,type:"Float32"}],4),Wp=va([{name:"a_texb",components:2,type:"Uint16"}]),wv=va([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),lg=va([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);va([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cg=va([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xv=va([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);va([{name:"triangle",components:3,type:"Uint16"}]),va([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),va([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Float32",name:"occlusionState"},{type:"Float32",name:"occlusionOpacity"},{type:"Uint8",name:"hasIconTextFit"}]),va([{type:"Float32",name:"offsetX"}]),va([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);class Fg{constructor(e,n){this.width=e,this.height=n,this.nextRow=0,this.image=new l0({width:e,height:n}),this.positions={},this.uploaded=!1}getDash(e,n){const s=this.getKey(e,n);return this.positions[s]}trim(){const e=this.width,n=this.height=os(this.nextRow);this.image.resize({width:e,height:n})}getKey(e,n){return e.join(",")+n}getDashRanges(e,n,s){const u=[];let m=e.length%2==1?-e[e.length-1]*s:0,g=e[0]*s,E=!0;u.push({left:m,right:g,isDash:E,zeroLength:0===e[0]});let T=e[0];for(let z=1;z<e.length;z++){E=!E;const $=e[z];m=T*s,T+=$,g=T*s,u.push({left:m,right:g,isDash:E,zeroLength:0===$})}return u}addRoundDash(e,n,s){const u=n/2;for(let m=-s;m<=s;m++){const g=this.width*(this.nextRow+s+m);let E=0,T=e[E];for(let z=0;z<this.width;z++){z/T.right>1&&(T=e[++E]);const $=Math.abs(z-T.left),W=Math.abs(z-T.right),Q=Math.min($,W);let le;const de=m/s*(u+1);if(T.isDash){const be=u-Math.abs(de);le=Math.sqrt(Q*Q+be*be)}else le=u-Math.sqrt(Q*Q+de*de);this.image.data[g+z]=Math.max(0,Math.min(255,le+128))}}}addRegularDash(e,n){for(let T=e.length-1;T>=0;--T){const z=e[T],$=e[T+1];z.zeroLength?e.splice(T,1):$&&$.isDash===z.isDash&&($.left=z.left,e.splice(T,1))}const s=e[0],u=e[e.length-1];s.isDash===u.isDash&&(s.left=u.left-this.width,u.right=s.right+this.width);const m=this.width*this.nextRow;let g=0,E=e[g];for(let T=0;T<this.width;T++){T/E.right>1&&(E=e[++g]);const z=Math.abs(T-E.left),$=Math.abs(T-E.right),W=Math.min(z,$);this.image.data[m+T]=Math.max(0,Math.min(255,(E.isDash?W:-W)+n+128))}}addDash(e,n){const s=this.getKey(e,n);if(this.positions[s])return this.positions[s];const u="round"===n,m=u?7:0,g=2*m+1;if(this.nextRow+g>this.height)return fa("LineAtlas out of space"),null;0===e.length&&e.push(1);let E=0;for(let $=0;$<e.length;$++)e[$]<0&&(fa("Negative value is found in line dasharray, replacing values with 0"),e[$]=0),E+=e[$];if(0!==E){const $=this.width/E,W=this.getDashRanges(e,this.width,$);u?this.addRoundDash(W,$,m):this.addRegularDash(W,"square"===n?.5*$:0)}const T=this.nextRow+m;this.nextRow+=g;const z={tl:[T,m],br:[E,0]};return this.positions[s]=z,z}}at(Fg,"LineAtlas");const Vg=Jo.types,p4=Math.cos(Math.PI/180*37.5),f4=Math.cos(Math.PI/180*5);class W2{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new Ku,this.layoutVertexArray2=new t0,this.patternVertexArray=new Ru,this.indexArray=new eu,this.programConfigurations=new v1(e.layers,{zoom:e.zoom,lut:e.lut}),this.segments=new al,this.maxLineLength=0,this.zOffsetVertexArray=new kd,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.tessellationStep=e.tessellationStep?e.tessellationStep:Z/64}updateFootprints(e,n){}populate(e,n,s,u){this.hasPattern=s2("line",this.layers,n);const m=this.layers[0].layout.get("line-sort-key"),g=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!g.isConstant()||!!g.constantOr(0);const E=[];for(const{feature:W,id:Q,index:le,sourceLayerIndex:de}of e){const be=this.layers[0]._featureFilter.needGeometry,xe=L0(W,be);if(!this.layers[0]._featureFilter.filter(new ts(this.zoom),xe,s))continue;const je=m?m.evaluate(xe,{},s):void 0,gt={id:Q,properties:W.properties,type:W.type,sourceLayerIndex:de,index:le,geometry:be?xe.geometry:o1(W,s,u),patterns:{},sortKey:je};E.push(gt)}m&&E.sort((W,Q)=>W.sortKey-Q.sortKey);const{lineAtlas:T,featureIndex:z}=n,$=this.addConstantDashes(T);for(const W of E){const{geometry:Q,index:le,sourceLayerIndex:de}=W;if($&&this.addFeatureDashes(W,T),this.hasPattern){const be=ig("line",this.layers,W,this.zoom,n);this.patternFeatures.push(be)}else this.addFeature(W,Q,le,s,T.positions,n.availableImages,n.brightness);z.insert(e[le].feature,Q,le,de,this.index)}}addConstantDashes(e){let n=!1;for(const s of this.layers){const u=s.paint.get("line-dasharray").value,m=s.layout.get("line-cap").value;if("constant"!==u.kind||"constant"!==m.kind)n=!0;else{const g=m.value,E=u.value;if(!E)continue;e.addDash(E,g)}}return n}addFeatureDashes(e,n){const s=this.zoom;for(const u of this.layers){const m=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if("constant"===m.kind&&"constant"===g.kind)continue;let E,T;if("constant"===m.kind){if(E=m.value,!E)continue}else E=m.evaluate({zoom:s},e);T="constant"===g.kind?g.value:g.evaluate({zoom:s},e),n.addDash(E,T),e.patterns[u.id]=n.getKey(E,T)}}update(e,n,s,u,m){const g=0!==Object.keys(e).length;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,g?this.stateDependentLayers:this.layers,s,u,m)}addFeatures(e,n,s,u,m,g){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,n,s,u,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ag)),0!==this.patternVertexArray.length&&(this.patternVertexBuffer=e.createVertexBuffer(this.patternVertexArray,Ng)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,B4.members,!0)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,sg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,n,s,u,m,g,E){const T=this.layers[0].layout,z=T.get("line-join").evaluate(e,{}),$=T.get("line-cap").evaluate(e,{}),W=T.get("line-miter-limit"),Q=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const le of n)this.addLine(le,e,u,z,$,W,Q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,g,u,E)}addLine(e,n,s,u,m,g,E){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const T={zoom:this.zoom,lineProgress:void 0},z=this.layers[0].layout,$="none"===u;if(this.patternJoinNone=this.hasPattern&&$,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Yt=0;Yt<e.length-1;Yt++)this.totalDistance+=e[Yt].dist(e[Yt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const W="Polygon"===Vg[n.type];let Q=e.length;for(;Q>=2&&e[Q-1].equals(e[Q-2]);)Q--;let le=0;for(;le<Q-1&&e[le].equals(e[le+1]);)le++;if(Q<(W?3:2))return;"bevel"===u&&(g=1.05);const de=this.overscaling<=16?15*Z/(512*this.overscaling):0,be=this.segments.prepareSegment(10*Q,this.layoutVertexArray,this.indexArray);let xe,je,gt,_t,bt,nn;this.e1=this.e2=-1,W&&(xe=e[Q-2],bt=e[le].sub(xe)._unit()._perp());for(let Yt=le;Yt<Q;Yt++){if(gt=Yt===Q-1?W?e[le+1]:void 0:e[Yt+1],gt&&e[Yt].equals(gt))continue;if(bt&&(_t=bt),xe&&(je=xe),xe=e[Yt],this.hasZOffset){const Ri=z.get("line-z-offset").value;if("constant"===Ri.kind)nn=Ri.value;else{if(this.lineClips){const vo=this.totalDistance/(this.lineClips.end-this.lineClips.start);T.lineProgress=(vo*this.lineClips.start+this.distance+(je?je.dist(xe):0))/vo}else fa(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),T.lineProgress=0;nn=Ri.evaluate(T,n)}nn=nn||0}bt=gt?gt.sub(xe)._unit()._perp():_t,_t=_t||bt;const Sn=je&&gt;let Rn=Sn?u:W||$?"butt":m;const ai=_t.x*bt.x+_t.y*bt.y;if($){const Ri=function(vo){if(vo.patternJoinNone){const Oo=vo.segmentPoints.length/2,Co=vo.lineSoFar-vo.segmentStart;for(let ar=0;ar<Oo;++ar){const Ao=vo.segmentPoints[2*ar+1],jo=Math.round(vo.segmentPoints[2*ar])+.5+.25*Ao;vo.patternVertexArray.emplaceBack(jo,Co,vo.segmentStart),vo.patternVertexArray.emplaceBack(jo,Co,vo.segmentStart)}vo.segmentPoints.length=0}vo.e1=vo.e2=-1};if(Sn&&ai<f4){this.updateDistance(je,xe),this.addCurrentVertex(xe,_t,1,1,be,nn),Ri(this),this.addCurrentVertex(xe,bt,-1,-1,be,nn);continue}if(je){if(!gt){this.updateDistance(je,xe),this.addCurrentVertex(xe,_t,1,1,be,nn),Ri(this);continue}Rn="miter"}}let Di=_t.add(bt);0===Di.x&&0===Di.y||Di._unit();const wi=Di.x*bt.x+Di.y*bt.y,Zi=0!==wi?1/wi:1/0,Mo=2*Math.sqrt(2-2*wi),Gi=wi<p4&&je&&gt,yo=_t.x*bt.y-_t.y*bt.x>0;if(Gi&&Yt>le){const Ri=xe.dist(je);if(Ri>2*de){const vo=xe.sub(xe.sub(je)._mult(de/Ri)._round());this.updateDistance(je,vo),this.addCurrentVertex(vo,_t,0,0,be,nn),je=vo}}if(Sn&&"round"===Rn&&(Zi<E?Rn="miter":Zi<=2&&(Rn="fakeround")),"miter"===Rn&&Zi>g&&(Rn="bevel"),"bevel"===Rn&&(Zi>2&&(Rn="flipbevel"),Zi<g&&(Rn="miter")),je&&this.updateDistance(je,xe),"miter"===Rn)Di._mult(Zi),this.addCurrentVertex(xe,Di,0,0,be,nn);else if("flipbevel"===Rn){if(Zi>100)Di=bt.mult(-1);else{const Ri=Zi*_t.add(bt).mag()/_t.sub(bt).mag();Di._perp()._mult(Ri*(yo?-1:1))}this.addCurrentVertex(xe,Di,0,0,be,nn),this.addCurrentVertex(xe,Di.mult(-1),0,0,be,nn)}else if("bevel"===Rn||"fakeround"===Rn){const Ri=-Math.sqrt(Zi*Zi-1),vo=yo?Ri:0,Oo=yo?0:Ri;if(je&&this.addCurrentVertex(xe,_t,vo,Oo,be,nn),"fakeround"===Rn){const Co=Math.round(180*Mo/Math.PI/20);for(let ar=1;ar<Co;ar++){let Ao=ar/Co;if(.5!==Ao){const Jr=Ao-.5;Ao+=Ao*Jr*(Ao-1)*((1.0904+ai*(ai*(3.55645-1.43519*ai)-3.2452))*Jr*Jr+(.848013+ai*(.215638*ai-1.06021)))}const jo=bt.sub(_t)._mult(Ao)._add(_t)._unit()._mult(yo?-1:1);this.addHalfVertex(xe,jo.x,jo.y,!1,yo,0,be,nn)}}gt&&this.addCurrentVertex(xe,bt,-vo,-Oo,be,nn)}else"butt"===Rn?this.addCurrentVertex(xe,Di,0,0,be,nn):"square"===Rn?(je||this.addCurrentVertex(xe,Di,-1,-1,be,nn),this.addCurrentVertex(xe,Di,0,0,be,nn),je&&this.addCurrentVertex(xe,Di,1,1,be,nn)):"round"===Rn&&(je&&(this.addCurrentVertex(xe,_t,0,0,be,nn),this.addCurrentVertex(xe,_t,1,1,be,nn,!0)),gt&&(this.addCurrentVertex(xe,bt,-1,-1,be,nn,!0),this.addCurrentVertex(xe,bt,0,0,be,nn)));if(Gi&&Yt<Q-1){const Ri=xe.dist(gt);if(Ri>2*de){const vo=xe.add(gt.sub(xe)._mult(de/Ri)._round());this.updateDistance(xe,vo),this.addCurrentVertex(vo,bt,0,0,be,nn),xe=vo}}}}addVerticesTo(e,n,s,u,m,g,E,T,z,$){const W=(n.w-e.w)/this.tessellationStep|0;if(W>1){this.lineSoFar=e.w;const Q=(n.x-e.x)/W,le=(n.y-e.y)/W,de=(n.z-e.z)/W,be=(n.w-e.w)/W;for(let xe=1;xe<W;++xe)e.x+=Q,e.y+=le,e.z+=de,this.lineSoFar+=be,this.addHalfVertex(e,s,u,$,!1,E,z,e.z),this.addHalfVertex(e,m,g,$,!0,-T,z,e.z)}this.lineSoFar=n.w,this.addHalfVertex(n,s,u,$,!1,E,z,n.z),this.addHalfVertex(n,m,g,$,!0,-T,z,n.z)}addCurrentVertex(e,n,s,u,m,g,E=!1){const T=n.x+n.y*s,z=n.y-n.x*s,$=n.y*u-n.x,W=-n.y-n.x*u;if(null!=g){const le=Z+10,de=g,be=new ho(e.x,e.y,de,this.lineSoFar),xe=c2(e,-10,le),je=this.lineSoFar;if(this.currentVertex)if(xe){const gt=this.currentVertexIsOutside,_t=this.currentVertex,bt=new ho(e.x,e.y,de,this.lineSoFar);Rs(_t,bt,-10,le),c2(bt,-10,le)||(gt&&(this.e1=this.e2=-1,this.lineSoFar=_t.w,this.addHalfVertex(_t,T,z,E,!1,s,m,_t.z),this.addHalfVertex(_t,$,W,E,!0,-u,m,_t.z)),this.addVerticesTo(_t,bt,T,z,$,W,s,u,m,E))}else{const gt=this.currentVertex;this.currentVertexIsOutside&&(Rs(gt,be,-10,le),this.e1=this.e2=-1,this.lineSoFar=gt.w,this.addHalfVertex(gt,T,z,E,!1,s,m,gt.z),this.addHalfVertex(gt,$,W,E,!0,-u,m,gt.z)),this.addVerticesTo(gt,be,T,z,$,W,s,u,m,E)}else xe||(this.addHalfVertex(e,T,z,E,!1,s,m,g),this.addHalfVertex(e,$,W,E,!0,-u,m,g));this.currentVertex=be,this.currentVertexIsOutside=xe,this.lineSoFar=je}else this.addHalfVertex(e,T,z,E,!1,s,m,g),this.addHalfVertex(e,$,W,E,!0,-u,m,g)}addHalfVertex({x:e,y:n},s,u,m,g,E,T,z){this.patternJoinNone&&(0===this.segmentPoints.length&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),g||this.segmentPoints.push(this.lineSoFar-this.segmentStart,E)),this.layoutVertexArray.emplaceBack((e<<1)+(m?1:0),(n<<1)+(g?1:0),Math.round(63*s)+128,Math.round(63*u)+128,1+(0===E?0:E<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const $=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),T.primitiveLength++),g?this.e2=$:this.e1=$,null!=z&&this.zOffsetVertexArray.emplaceBack(z)}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,n){this.distance+=e.dist(n),this.updateScaledDistance()}}function c2(t,e,n){return t.x<e||t.x>n||t.y<e||t.y>n}at(W2,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const Sm=new pa({"line-cap":new er(ri.layout_line["line-cap"]),"line-join":new er(ri.layout_line["line-join"]),"line-miter-limit":new qi(ri.layout_line["line-miter-limit"]),"line-round-limit":new qi(ri.layout_line["line-round-limit"]),"line-sort-key":new er(ri.layout_line["line-sort-key"]),"line-z-offset":new er(ri.layout_line["line-z-offset"]),visibility:new qi(ri.layout_line.visibility)});var Tm={paint:new pa({"line-opacity":new er(ri.paint_line["line-opacity"]),"line-color":new er(ri.paint_line["line-color"]),"line-translate":new qi(ri.paint_line["line-translate"]),"line-translate-anchor":new qi(ri.paint_line["line-translate-anchor"]),"line-width":new er(ri.paint_line["line-width"]),"line-gap-width":new er(ri.paint_line["line-gap-width"]),"line-offset":new er(ri.paint_line["line-offset"]),"line-blur":new er(ri.paint_line["line-blur"]),"line-dasharray":new er(ri.paint_line["line-dasharray"]),"line-pattern":new er(ri.paint_line["line-pattern"]),"line-gradient":new ss(ri.paint_line["line-gradient"]),"line-trim-offset":new qi(ri.paint_line["line-trim-offset"]),"line-trim-fade-range":new qi(ri.paint_line["line-trim-fade-range"]),"line-trim-color":new qi(ri.paint_line["line-trim-color"]),"line-emissive-strength":new qi(ri.paint_line["line-emissive-strength"]),"line-border-width":new er(ri.paint_line["line-border-width"]),"line-border-color":new er(ri.paint_line["line-border-color"]),"line-occlusion-opacity":new qi(ri.paint_line["line-occlusion-opacity"])}),layout:Sm};function $g(t,e,n){return e*(Z/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}function jg(t,e){return 1/$g(t,1,e.tileZoom)}function m4(t,e,n,s){return t.translatePosMatrix(s||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Ug=t=>{const e=[];Hg(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const n=t.paint.get("line-trim-offset");0===n[0]&&0===n[1]||e.push("RENDER_LINE_TRIM_OFFSET"),0!==t.paint.get("line-border-width").constantOr(1)&&e.push("RENDER_LINE_BORDER");const s="none"===t.layout.get("line-join").constantOr("miter"),u=!!t.paint.get("line-pattern").constantOr(1);return s&&u&&e.push("LINE_JOIN_NONE"),e};function Hg(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}class q2{constructor(e){this._stringToNumber={},this._numberToString=[];for(let n=0;n<e.length;n++){const s=e[n];this._stringToNumber[s]=n,this._numberToString[n]=s}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}var u0={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,e,n,s,u){var m,g,E=8*u-s-1,T=(1<<E)-1,z=T>>1,$=-7,W=n?u-1:0,Q=n?-1:1,le=t[e+W];for(W+=Q,m=le&(1<<-$)-1,le>>=-$,$+=E;$>0;m=256*m+t[e+W],W+=Q,$-=8);for(g=m&(1<<-$)-1,m>>=-$,$+=s;$>0;g=256*g+t[e+W],W+=Q,$-=8);if(0===m)m=1-z;else{if(m===T)return g?NaN:1/0*(le?-1:1);g+=Math.pow(2,s),m-=z}return(le?-1:1)*g*Math.pow(2,m-s)},write:function(t,e,n,s,u,m){var g,E,T,z=8*m-u-1,$=(1<<z)-1,W=$>>1,Q=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,le=s?0:m-1,de=s?1:-1,be=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(E=isNaN(e)?1:0,g=$):(g=Math.floor(Math.log(e)/Math.LN2),e*(T=Math.pow(2,-g))<1&&(g--,T*=2),(e+=g+W>=1?Q/T:Q*Math.pow(2,1-W))*T>=2&&(g++,T/=2),g+W>=$?(E=0,g=$):g+W>=1?(E=(e*T-1)*Math.pow(2,u),g+=W):(E=e*Math.pow(2,W-1)*Math.pow(2,u),g=0));u>=8;t[n+le]=255&E,le+=de,E/=256,u-=8);for(g=g<<u|E,z+=u;z>0;t[n+le]=255&g,le+=de,g/=256,z-=8);t[n+le-de]|=128*be}},jh=Da,u2=u0;function Da(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Da.Varint=0,Da.Fixed64=1,Da.Bytes=2,Da.Fixed32=5;var ah=4294967296,ug=1/ah,g4=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function q1(t){return t.type===Da.Bytes?t.readVarint()+t.pos:t.pos+1}function Mm(t,e,n){var s=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(s);for(var u=n.pos-1;u>=t;u--)n.buf[u+s]=n.buf[u]}function Am(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Dm(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Pm(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function N4(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function X2(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Rm(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Gg(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function dg(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Mf(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function K2(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function qp(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Xp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Da.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var s=this.readVarint(),u=s>>3,m=this.pos;this.type=7&s,t(u,e,this),this.pos===m&&this.skip(s)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=K2(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Xp(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=K2(this.buf,this.pos)+K2(this.buf,this.pos+4)*ah;return this.pos+=8,t},readSFixed64:function(){var t=K2(this.buf,this.pos)+Xp(this.buf,this.pos+4)*ah;return this.pos+=8,t},readFloat:function(){var t=u2.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=u2.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,s=this.buf;return e=127&(n=s[this.pos++]),n<128?e:(e|=(127&(n=s[this.pos++]))<<7,n<128?e:(e|=(127&(n=s[this.pos++]))<<14,n<128?e:(e|=(127&(n=s[this.pos++]))<<21,n<128?e:function(u,m,g){var E,T,z=g.buf;if(E=(112&(T=z[g.pos++]))>>4,T<128||(E|=(127&(T=z[g.pos++]))<<3,T<128)||(E|=(127&(T=z[g.pos++]))<<10,T<128)||(E|=(127&(T=z[g.pos++]))<<17,T<128)||(E|=(127&(T=z[g.pos++]))<<24,T<128)||(E|=(1&(T=z[g.pos++]))<<31,T<128))return function d2(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}(u,E,m);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=s[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&g4?g4.decode(this.buf.subarray(e,t)):function(n,s,u){for(var m="",g=s;g<u;){var E,T,z,$=n[g],W=null,Q=$>239?4:$>223?3:$>191?2:1;if(g+Q>u)break;1===Q?$<128&&(W=$):2===Q?128==(192&(E=n[g+1]))&&(W=(31&$)<<6|63&E)<=127&&(W=null):3===Q?(T=n[g+2],128==(192&(E=n[g+1]))&&128==(192&T)&&((W=(15&$)<<12|(63&E)<<6|63&T)<=2047||W>=55296&&W<=57343)&&(W=null)):4===Q&&(T=n[g+2],z=n[g+3],128==(192&(E=n[g+1]))&&128==(192&T)&&128==(192&z)&&((W=(15&$)<<18|(63&E)<<12|(63&T)<<6|63&z)<=65535||W>=1114112)&&(W=null)),null===W?(W=65533,Q=1):W>65535&&(W-=65536,m+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),m+=String.fromCharCode(W),g+=Q}return m}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Da.Bytes)return t.push(this.readVarint(e));var n=q1(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Da.Bytes)return t.push(this.readSVarint());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Da.Bytes)return t.push(this.readBoolean());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Da.Bytes)return t.push(this.readFloat());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Da.Bytes)return t.push(this.readDouble());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Da.Bytes)return t.push(this.readFixed32());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Da.Bytes)return t.push(this.readSFixed32());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Da.Bytes)return t.push(this.readFixed64());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Da.Bytes)return t.push(this.readSFixed64());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Da.Varint)for(;this.buf[this.pos++]>127;);else if(e===Da.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Da.Fixed32)this.pos+=4;else{if(e!==Da.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),qp(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),qp(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),qp(this.buf,-1&t,this.pos),qp(this.buf,Math.floor(t*ug),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),qp(this.buf,-1&t,this.pos),qp(this.buf,Math.floor(t*ug),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,n){var s,u,m,E;if(e>=0?(s=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(s=~(-e%4294967296))?s=s+1|0:(s=0,u=u+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),m=s,(E=n).buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,E.buf[E.pos]=127&(m>>>=7),function(m,g){var E=(7&m)<<4;g.buf[g.pos++]|=E|((m>>>=3)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m)))))}(u,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(s,u,m){for(var g,E,T=0;T<u.length;T++){if((g=u.charCodeAt(T))>55295&&g<57344){if(!E){g>56319||T+1===u.length?(s[m++]=239,s[m++]=191,s[m++]=189):E=g;continue}if(g<56320){s[m++]=239,s[m++]=191,s[m++]=189,E=g;continue}g=E-55296<<10|g-56320|65536,E=null}else E&&(s[m++]=239,s[m++]=191,s[m++]=189,E=null);g<128?s[m++]=g:(g<2048?s[m++]=g>>6|192:(g<65536?s[m++]=g>>12|224:(s[m++]=g>>18|240,s[m++]=g>>12&63|128),s[m++]=g>>6&63|128),s[m++]=63&g|128)}return m}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Mm(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),u2.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),u2.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var s=this.pos-n;s>=128&&Mm(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeMessage:function(t,e,n){this.writeTag(t,Da.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Am,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Dm,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,X2,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Pm,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,N4,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Rm,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Gg,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,dg,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Mf,e)},writeBytesField:function(t,e){this.writeTag(t,Da.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Da.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Da.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Da.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Da.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Da.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Da.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Da.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Da.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Da.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};var h2=xn(jh);const zm=["id","tile","layer","source","sourceLayer","state"];class hg{constructor(e,n,s,u,m){this.type="Feature",this._vectorTileFeature=e,this._z=n,this._x=s,this._y=u,this.properties=e.properties,this.id=m}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const n of zm)void 0!==this[n]&&(e[n]=this[n]);return e}}class p2{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,s){const u=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},mi(this.stateChanges[e][u],s),null===this.deletedStates[e]){this.deletedStates[e]={};for(const m in this.state[e])m!==u&&(this.deletedStates[e][m]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][u]){this.deletedStates[e][u]={};for(const m in this.state[e][u])s[m]||(this.deletedStates[e][u][m]=null)}else for(const m in s)this.deletedStates[e]&&this.deletedStates[e][u]&&null===this.deletedStates[e][u][m]&&delete this.deletedStates[e][u][m]}removeFeatureState(e,n,s){if(null===this.deletedStates[e])return;const u=String(n);if(this.deletedStates[e]=this.deletedStates[e]||{},s&&void 0!==n)null!==this.deletedStates[e][u]&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][s]=null);else if(void 0!==n)if(this.stateChanges[e]&&this.stateChanges[e][u])for(s in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][s]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,n){const s=String(n),u=mi({},(this.state[e]||{})[s],(this.stateChanges[e]||{})[s]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const m=this.deletedStates[e][n];if(null===m)return{};for(const g in m)delete u[g]}return u}initializeTileState(e,n){e.setFeatureState(this.state,n)}coalesceChanges(e,n){const s={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const m={};for(const g in this.stateChanges[u])this.state[u][g]||(this.state[u][g]={}),mi(this.state[u][g],this.stateChanges[u][g]),m[g]=this.state[u][g];s[u]=m}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const m={};if(null===this.deletedStates[u])for(const g in this.state[u])m[g]={},this.state[u][g]={};else for(const g in this.deletedStates[u]){if(null===this.deletedStates[u][g])this.state[u][g]={};else if(this.state[u][g])for(const E of Object.keys(this.deletedStates[u][g]))delete this.state[u][g][E];m[g]=this.state[u][g]}s[u]=s[u]||{},mi(s[u],m)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(s).length)for(const u in e)e[u].setFeatureState(s,n)}}class Af{constructor(e,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new en(Z,16,0),this.featureIndexArray=new lf,this.promoteId=n,this.is3DTile=!1}insert(e,n,s,u,m,g=0,E=0){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,u,m,g);const z=this.grid;for(let $=0;$<n.length;$++){const W=n[$],Q=[1/0,1/0,-1/0,-1/0];for(let le=0;le<W.length;le++){const de=W[le];Q[0]=Math.min(Q[0],de.x),Q[1]=Math.min(Q[1],de.y),Q[2]=Math.max(Q[2],de.x),Q[3]=Math.max(Q[3],de.y)}0!==E&&(Q[0]-=E,Q[1]-=E,Q[2]+=E,Q[3]+=E),Q[0]<Z&&Q[1]<Z&&Q[2]>=0&&Q[3]>=0&&z.insert(T,Q[0],Q[1],Q[2],Q[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new To(new h2(this.rawTileData)).layers,this.sourceLayerCoder=new q2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,n,s,u){this.loadVTLayers();const m=e.params||{},g=Nc(m.filter),E=e.tileResult,T=e.transform,z=E.bufferedTilespaceBounds,$=this.grid.query(z.min.x,z.min.y,z.max.x,z.max.y,(de,be,xe,je)=>Ym(E.bufferedTilespaceGeometry,de,be,xe,je));$.sort(pg);let W=null;T.elevation&&$.length>0&&(W=Hp.create(T.elevation,this.tileID));const Q={};let le;for(let de=0;de<$.length;de++){const be=$[de];if(be===le)continue;le=be;const xe=this.featureIndexArray.get(be);let je=null;if(this.is3DTile){const gt=this.bucketLayerIDs[0][0],_t=n[gt];if("model"!==_t.type)continue;const{queryFeature:bt,intersectionZ:nn}=_t.queryIntersectsMatchingFeature(E,xe.featureIndex,g,T);bt&&this.appendToResult(Q,gt,xe.featureIndex,bt,nn)}else this.loadMatchingFeature(Q,xe,g,m.layers,m.availableImages,n,s,u,(gt,_t,bt,nn=0)=>(je||(je=o1(gt,this.tileID.canonical,e.tileTransform)),_t.queryIntersectsFeature(E,gt,bt,je,this.z,e.transform,e.pixelPosMatrix,W,nn)))}return Q}loadMatchingFeature(e,n,s,u,m,g,E,T,z){const{featureIndex:$,bucketIndex:W,sourceLayerIndex:Q,layoutVertexArrayOffset:le}=n,de=this.bucketLayerIDs[W];if(u&&!function(gt,_t){for(let bt=0;bt<gt.length;bt++)if(_t.indexOf(gt[bt])>=0)return!0;return!1}(u,de))return;const be=this.sourceLayerCoder.decode(Q),xe=this.vtLayers[be].feature($);if(s.needGeometry){const gt=L0(xe,!0);if(!s.filter(new ts(this.tileID.overscaledZ),gt,this.tileID.canonical))return}else if(!s.filter(new ts(this.tileID.overscaledZ),xe))return;const je=this.getId(xe,be);for(let gt=0;gt<de.length;gt++){const _t=de[gt];if(u&&u.indexOf(_t)<0)continue;const bt=g[_t];if(!bt)continue;let nn={};void 0!==je&&T&&(nn=T.getState(bt.sourceLayer||"_geojsonTileLayer",je));const Yt=!z||z(xe,bt,nn,le);if(!Yt)continue;const Sn=new hg(xe,this.z,this.x,this.y,je),Rn=mi({},E[_t]);Rn.paint=jd(Rn.paint,bt.paint,xe,nn,m),Rn.layout=jd(Rn.layout,bt.layout,xe,nn,m),Sn.layer=Rn,this.appendToResult(e,_t,$,Sn,Yt)}}appendToResult(e,n,s,u,m){let g=e[n];void 0===g&&(g=e[n]=[]),g.push({featureIndex:s,feature:u,intersectionZ:m})}lookupSymbolFeatures(e,n,s,u,m,g,E,T){const z={};this.loadVTLayers();const $=Nc(m);for(const W of e)this.loadMatchingFeature(z,{bucketIndex:s,sourceLayerIndex:u,featureIndex:W,layoutVertexArrayOffset:0},$,g,E,T,n);return z}loadFeature(e){const{featureIndex:n,sourceLayerIndex:s}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(s),m=this.vtFeatures[u];if(m[n])return m[n];const g=this.vtLayers[u].feature(n);return m[n]=g,g}hasLayer(e){for(const n of this.bucketLayerIDs)for(const s of n)if(e===s)return!0;return!1}getId(e,n){let s=e.id;if(this.promoteId){const u="string"==typeof this.promoteId?this.promoteId:this.promoteId[n];null!=u&&(s=e.properties[u]),"boolean"==typeof s&&(s=Number(s))}return s}}function jd(t,e,n,s,u){return Nr(t,(m,g)=>{const E=e instanceof za?e.get(g):null;return E&&E.evaluate?E.evaluate(n,s,u):E})}function pg(t,e){return e-t}at(Af,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var xu=24;const d0=128;function Om(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ts(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:s,interpolationType:u}=n;let m=0;for(;m<s.length&&s[m]<=t;)m++;m=Math.max(0,m-1);let g=m;for(;g<s.length&&s[g]<t+1;)g++;g=Math.min(s.length-1,g);const E=s[m],T=s[g];return"composite"===n.kind?{kind:"composite",minZoom:E,maxZoom:T,interpolationType:u}:{kind:"camera",minZoom:E,maxZoom:T,minSize:n.evaluate(new ts(E)),maxSize:n.evaluate(new ts(T)),interpolationType:u}}}function Lm(t,{uSize:e,uSizeT:n},{lowerSize:s,upperSize:u}){return"source"===t.kind?s/d0:"composite"===t.kind?Rr(s/d0,u/d0,n):e}function B(t,e){let n=0,s=0;if("constant"===t.kind)s=t.layoutSize;else if("source"!==t.kind){const{interpolationType:u,minZoom:m,maxZoom:g}=t,E=u?On(il.interpolationFactor(u,e,m,g),0,1):0;"camera"===t.kind?s=Rr(t.minSize,t.maxSize,E):n=E}return{uSizeT:n,uSize:s}}var _=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:d0,evaluateSizeForFeature:Lm,evaluateSizeForZoom:B,getSizeData:Om});function k(t,e,n){return t.sections.forEach(s=>{s.text=function(u,m,g){const E=m.layout.get("text-transform").evaluate(g,{});return"uppercase"===E?u=u.toLocaleUpperCase():"lowercase"===E&&(u=u.toLocaleLowerCase()),As.applyArabicShaping&&(u=As.applyArabicShaping(u)),u}(s.text,e,n)}),t}const D={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function q(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function ce(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}const De=3;function dt(t,e,n){e.glyphs=[],1===t&&n.readMessage(Vt,e)}function Vt(t,e,n){if(3===t){const{id:s,bitmap:u,width:m,height:g,left:E,top:T,advance:z}=n.readMessage(bn,{});e.glyphs.push({id:s,bitmap:new l0({width:m+2*De,height:g+2*De},u),metrics:{width:m,height:g,left:E,top:T,advance:z}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function bn(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}const fi=De,xi={horizontal:1,vertical:2,horizontalOnly:3};class to{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,n){const s=new to;return s.scale=e||1,s.fontStack=n,s}static forImage(e){const n=new to;return n.imageName=e,n}}class Vi{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,n){const s=new Vi;for(let u=0;u<e.sections.length;u++){const m=e.sections[u];m.image?s.addImageSection(m):s.addTextSection(m,n)}return s}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCodePoint(e){return this.text.codePointAt(e)}verticalizePunctuation(e){this.text=function(n,s){let u="";for(let m=0;m<n.length;m++){const g=n.charCodeAt(m+1)||null,E=n.charCodeAt(m-1)||null;u+=!s&&(g&&L(g)&&!D[n[m+1]]||E&&L(E)&&!D[n[m-1]])||!D[n[m]]?n[m]:D[n[m]]}return u}(this.text,e)}trim(){let e=0;for(let s=0;s<this.text.length&&zo[this.text.charCodeAt(s)];s++)e++;let n=this.text.length;for(let s=this.text.length-1;s>=0&&s>=e&&zo[this.text.charCodeAt(s)];s--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}substring(e,n){const s=new Vi;return s.text=this.text.substring(e,n),s.sectionIndex=this.sectionIndex.slice(e,n),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,n)=>Math.max(e,this.sections[n].scale),0)}addTextSection(e,n){this.text+=e.text,this.sections.push(to.forText(e.scale,e.fontStack||n));const s=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(s)}addImageSection(e){const n=e.image?e.image.namePrimary:"";if(0===n.length)return void fa("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCodePoint(s),this.sections.push(to.forImage(n)),this.sectionIndex.push(this.sections.length-1)):fa("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function xo(t,e,n,s,u,m,g,E,T,z,$,W,Q,le,de){const be=Vi.fromFeature(t,u);W===xi.vertical&&be.verticalizePunctuation(Q);let xe=[];const je=function(Yt,Sn,Rn,ai,Di,wi){if(!Yt)return[];const Zi=[],Mo=function(vo,Oo,Co,ar,Ao,jo){let Jr=0;for(let Fr=0;Fr<vo.length();Fr++){const Lr=vo.getSection(Fr);Jr+=as(vo.getCodePoint(Fr),Lr,ar,Ao,Oo,jo)}return Jr/Math.max(1,Math.ceil(Jr/Co))}(Yt,Sn,Rn,ai,Di,wi),Gi=Yt.text.indexOf("\u200b")>=0;let yo=0;for(let vo=0;vo<Yt.length();vo++){const Oo=Yt.getSection(vo),Co=Yt.getCodePoint(vo);if(zo[Co]||(yo+=as(Co,Oo,ai,Di,Sn,wi)),vo<Yt.length()-1){const ar=!((Ri=Co)<11904||!(mn["Bopomofo Extended"](Ri)||mn.Bopomofo(Ri)||mn["CJK Compatibility Forms"](Ri)||mn["CJK Compatibility Ideographs"](Ri)||mn["CJK Compatibility"](Ri)||mn["CJK Radicals Supplement"](Ri)||mn["CJK Strokes"](Ri)||mn["CJK Symbols and Punctuation"](Ri)||mn["CJK Unified Ideographs Extension A"](Ri)||mn["CJK Unified Ideographs"](Ri)||mn["Enclosed CJK Letters and Months"](Ri)||mn["Halfwidth and Fullwidth Forms"](Ri)||mn.Hiragana(Ri)||mn["Ideographic Description Characters"](Ri)||mn["Kangxi Radicals"](Ri)||mn["Katakana Phonetic Extensions"](Ri)||mn.Katakana(Ri)||mn["Vertical Forms"](Ri)||mn["Yi Radicals"](Ri)||mn["Yi Syllables"](Ri)));(yr[Co]||ar||Oo.imageName)&&Zi.push(ws(vo+1,yo,Mo,Zi,Ur(Co,Yt.getCodePoint(vo+1),ar&&Gi),!1))}}var Ri;return xs(ws(Yt.length(),yo,Mo,Zi,0,!0))}(be,z,m,e,s,le),{processBidirectionalText:gt,processStyledBidirectionalText:_t}=As;if(gt&&1===be.sections.length){const Yt=gt(be.toString(),je);for(const Sn of Yt){const Rn=new Vi;Rn.text=Sn,Rn.sections=be.sections;for(let ai=0;ai<Sn.length;ai++)Rn.sectionIndex.push(0);xe.push(Rn)}}else if(_t){const Yt=_t(be.text,be.sectionIndex,je);for(const Sn of Yt){const Rn=new Vi;Rn.text=Sn[0],Rn.sectionIndex=Sn[1],Rn.sections=be.sections,xe.push(Rn)}}else xe=function(Yt,Sn){const Rn=[],ai=Yt.text;let Di=0;for(const wi of Sn)Rn.push(Yt.substring(Di,wi)),Di=wi;return Di<ai.length&&Rn.push(Yt.substring(Di,ai.length)),Rn}(be,je);const bt=[],nn={positionedLines:bt,text:be.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:W,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Yt,Sn,Rn,ai,Di,wi,Zi,Mo,Gi,yo,Ri,vo){let Oo=0,Co=0,ar=0;const Ao="right"===Mo?1:"left"===Mo?0:.5;let jo=!1;for(const Ys of Di){const Ss=Ys.getSections();for(const ha of Ss){if(ha.imageName)continue;const ra=Sn[ha.fontStack];if(ra&&(jo=void 0!==ra.ascender&&void 0!==ra.descender,!jo))break}if(!jo)break}let Jr=0;for(const Ys of Di){Ys.trim();const Ss=Ys.getMaxScale(),ha=(Ss-1)*xu,ra={positionedGlyphs:[],lineOffset:0};Yt.positionedLines[Jr]=ra;const ba=ra.positionedGlyphs;let ys=0;if(!Ys.length()){Co+=wi,++Jr;continue}let Hl=0,zl=0;for(let Ba=0;Ba<Ys.length();Ba++){const Ua=Ys.getSection(Ba),rc=Ys.getSectionIndex(Ba),sc=Ys.getCodePoint(Ba);let Iu=Ua.scale,ou=null,s1=null,rd=null,Xc=xu,Gd=0;const m0=!(Gi===xi.horizontal||!Ri&&!ie(sc)||Ri&&(zo[sc]||(Fr=sc,mn.Arabic(Fr)||mn["Arabic Supplement"](Fr)||mn["Arabic Extended-A"](Fr)||mn["Arabic Presentation Forms-A"](Fr)||mn["Arabic Presentation Forms-B"](Fr))));if(Ua.imageName){const g0=ai[Ua.imageName];if(!g0)continue;rd=Ua.imageName,Yt.iconsInText=Yt.iconsInText||!0,s1=g0.paddedRect;const ac=g0.displaySize;Iu=Iu*xu/vo,ou={width:ac[0],height:ac[1],left:0,top:-fi,advance:m0?ac[1]:ac[0],localGlyph:!1},Gd=jo?-ou.height*Iu:Ss*xu-17-ac[1]*Iu,Xc=ou.advance;const wh=(m0?ac[0]:ac[1])*Iu-xu*Ss;wh>0&&wh>ys&&(ys=wh)}else{const g0=Rn[Ua.fontStack];if(!g0)continue;g0[sc]&&(s1=g0[sc]);const ac=Sn[Ua.fontStack];if(!ac)continue;const wh=ac.glyphs[sc];if(!wh)continue;if(ou=wh.metrics,Xc=8203!==sc?xu:0,jo){const ef=void 0!==ac.ascender?Math.abs(ac.ascender):0,Of=void 0!==ac.descender?Math.abs(ac.descender):0,am=(ef+Of)*Iu;Hl<am&&(Hl=am,zl=(ef-Of)/2*Iu),Gd=-ef*Iu}else Gd=(Ss-Iu)*xu-17}m0?(Yt.verticalizable=!0,ba.push({glyph:sc,imageName:rd,x:Oo,y:Co+Gd,vertical:m0,scale:Iu,localGlyph:ou.localGlyph,fontStack:Ua.fontStack,sectionIndex:rc,metrics:ou,rect:s1}),Oo+=Xc*Iu+yo):(ba.push({glyph:sc,imageName:rd,x:Oo,y:Co+Gd,vertical:m0,scale:Iu,localGlyph:ou.localGlyph,fontStack:Ua.fontStack,sectionIndex:rc,metrics:ou,rect:s1}),Oo+=ou.advance*Iu+yo)}0!==ba.length&&(ar=Math.max(Oo-yo,ar),jo?fl(ba,Ao,ys,zl,wi*Ss/2):fl(ba,Ao,ys,0,wi/2)),Oo=0;const Qa=wi*Ss+ys;ra.lineOffset=Math.max(ys,ha),Co+=Qa,++Jr}var Fr;const Lr=Co,{horizontalAlign:No,verticalAlign:ns}=Vs(Zi);(function(Ys,Ss,ha,ra,ba,ys){const Hl=(Ss-ha)*ba,zl=-ys*ra;for(const Qa of Ys)for(const Ba of Qa.positionedGlyphs)Ba.x+=Hl,Ba.y+=zl})(Yt.positionedLines,Ao,No,ns,ar,Lr),Yt.top+=-ns*Lr,Yt.bottom=Yt.top+Lr,Yt.left+=-No*ar,Yt.right=Yt.left+ar,Yt.hasBaseline=jo}(nn,e,n,s,xe,g,E,T,W,z,Q,de),!function(Yt){for(const Sn of Yt)if(0!==Sn.positionedGlyphs.length)return!1;return!0}(bt)&&nn}const zo={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yr={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function as(t,e,n,s,u,m){if(e.imageName){const g=s[e.imageName];return g?g.displaySize[0]*e.scale*xu/m+u:0}{const g=n[e.fontStack],E=g&&g.glyphs[t];return E?E.metrics.advance*e.scale+u:0}}function _s(t,e,n,s){const u=Math.pow(t-e,2);return s?t<e?u/2:2*u:u+Math.abs(n)*n}function Ur(t,e,n){let s=0;return 10===t&&(s-=1e4),n&&(s+=150),40!==t&&65288!==t||(s+=50),41!==e&&65289!==e||(s+=50),s}function ws(t,e,n,s,u,m){let g=null,E=_s(e,n,u,m);for(const T of s){const z=_s(e-T.x,n,u,m)+T.badness;z<=E&&(g=T,E=z)}return{index:t,x:e,priorBreak:g,badness:E}}function xs(t){return t?xs(t.priorBreak).concat(t.index):[]}function Vs(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function fl(t,e,n,s,u){if(!(e||n||s||u))return;const m=t.length-1,g=t[m],E=(g.x+g.metrics.advance*g.scale)*e;for(let T=0;T<=m;T++)t[T].x-=E,t[T].y+=n+s+u}function Cc(t,e,n,s){const{horizontalAlign:u,verticalAlign:m}=Vs(s),g=n[0]-t.displaySize[0]*u,E=n[1]-t.displaySize[1]*m;return{imagePrimary:t,imageSecondary:e,top:E,bottom:E+t.displaySize[1],left:g,right:g+t.displaySize[0]}}function Rl(t,e,n,s,u,m){const g=t.imagePrimary;let E;if(g.content){const xe=g.content,je=g.pixelRatio||1;E=[xe[0]/je,xe[1]/je,g.displaySize[0]-xe[2]/je,g.displaySize[1]-xe[3]/je]}const T=e.left*m,z=e.right*m;let $,W,Q,le;"width"===n||"both"===n?(le=u[0]+T-s[3],W=u[0]+z+s[1]):(le=u[0]+(T+z-g.displaySize[0])/2,W=le+g.displaySize[0]);const de=e.top*m,be=e.bottom*m;return"height"===n||"both"===n?($=u[1]+de-s[0],Q=u[1]+be+s[2]):($=u[1]+(de+be-g.displaySize[1])/2,Q=$+g.displaySize[1]),{imagePrimary:g,imageSecondary:void 0,top:$,right:W,bottom:Q,left:le,collisionPadding:E}}class Ql extends Io{constructor(e,n,s,u,m){super(e,n),this.angle=u,this.z=s,void 0!==m&&(this.segment=m)}clone(){return new Ql(this.x,this.y,this.z,this.angle,this.segment)}}function Is(t,e,n,s,u){if(void 0===e.segment)return!0;let m=e,g=e.segment+1,E=0;for(;E>-n/2;){if(g--,g<0)return!1;E-=t[g].dist(m),m=t[g]}E+=t[g].dist(t[g+1]),g++;const T=[];let z=0;for(;E<n/2;){const $=t[g],W=t[g+1];if(!W)return!1;let Q=t[g-1].angleTo($)-$.angleTo(W);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:E,angleDelta:Q}),z+=Q;E-T[0].distance>s;)z-=T.shift().angleDelta;if(z>u)return!1;g++,E+=$.dist(W)}return!0}function Lu(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function ed(t,e,n){return t?.6*e*n:0}function Ud(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Bu(t,e,n,s,u,m){const g=ed(n,u,m),E=Ud(n,s)*m;let T=0;const z=Lu(t)/2;for(let $=0;$<t.length-1;$++){const W=t[$],Q=t[$+1],le=W.dist(Q);if(T+le>z){const de=(z-T)/le,be=Rr(W.x,Q.x,de),xe=Rr(W.y,Q.y,de),je=new Ql(be,xe,0,Q.angleTo(W),$);return!g||Is(t,je,E,g,e)?je:void 0}T+=le}}function td(t,e,n,s,u,m,g,E,T){const z=ed(s,m,g),$=Ud(s,u),W=$*g,Q=0===t[0].x||t[0].x===T||0===t[0].y||t[0].y===T;return e-W<e/4&&(e=W+e/4),lh(t,Q?e/2*E%e:($/2+2*m)*g*E%e,e,z,n,W,Q,!1,T)}function lh(t,e,n,s,u,m,g,E,T){const z=m/2,$=Lu(t);let W=0,Q=e-n,le=[];for(let de=0;de<t.length-1;de++){const be=t[de],xe=t[de+1],je=be.dist(xe),gt=xe.angleTo(be);for(;Q+n<W+je;){Q+=n;const _t=(Q-W)/je,bt=Rr(be.x,xe.x,_t),nn=Rr(be.y,xe.y,_t);if(bt>=0&&bt<T&&nn>=0&&nn<T&&Q-z>=0&&Q+z<=$){const Yt=new Ql(bt,nn,0,gt,de);s&&!Is(t,Yt,m,s,u)||le.push(Yt)}}W+=je}return E||le.length||g||(le=lh(t,W/2,n,s,u,m,g,!0,T)),le}function Mc(t,e,n,s,u){const m=[];for(let g=0;g<t.length;g++){const E=t[g];let T;for(let z=0;z<E.length-1;z++){let $=E[z],W=E[z+1];$.x<e&&W.x<e||($.x<e?$=new Io(e,$.y+(e-$.x)/(W.x-$.x)*(W.y-$.y))._round():W.x<e&&(W=new Io(e,$.y+(e-$.x)/(W.x-$.x)*(W.y-$.y))._round()),$.y<n&&W.y<n||($.y<n?$=new Io($.x+(n-$.y)/(W.y-$.y)*(W.x-$.x),n)._round():W.y<n&&(W=new Io($.x+(n-$.y)/(W.y-$.y)*(W.x-$.x),n)._round()),$.x>=s&&W.x>=s||($.x>=s?$=new Io(s,$.y+(s-$.x)/(W.x-$.x)*(W.y-$.y))._round():W.x>=s&&(W=new Io(s,$.y+(s-$.x)/(W.x-$.x)*(W.y-$.y))._round()),$.y>=u&&W.y>=u||($.y>=u?$=new Io($.x+(u-$.y)/(W.y-$.y)*(W.x-$.x),u)._round():W.y>=u&&(W=new Io($.x+(u-$.y)/(W.y-$.y)*(W.x-$.x),u)._round()),T&&$.equals(T[T.length-1])||(T=[$],m.push(T)),T.push(W)))))}}return m}function Nu(t){let e=0,n=0;for(const g of t)e+=g.w*g.h,n=Math.max(n,g.w);t.sort((g,E)=>E.h-g.h);const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let u=0,m=0;for(const g of t)for(let E=s.length-1;E>=0;E--){const T=s[E];if(!(g.w>T.w||g.h>T.h)){if(g.x=T.x,g.y=T.y,m=Math.max(m,g.y+g.h),u=Math.max(u,g.x+g.w),g.w===T.w&&g.h===T.h){const z=s.pop();E<s.length&&(s[E]=z)}else g.h===T.h?(T.x+=g.w,T.w-=g.w):g.w===T.w?(T.y+=g.h,T.h-=g.h):(s.push({x:T.x+g.w,y:T.y,w:T.w-g.w,h:g.h}),T.y+=g.h,T.h-=g.h);break}}return{w:u,h:m,fill:e/(u*m)||0}}at(Ql,"Anchor");const kc=1;class Fu{constructor(e,{pixelRatio:n,version:s,stretchX:u,stretchY:m,content:g}){this.paddedRect=e,this.pixelRatio=n,this.stretchX=u,this.stretchY=m,this.content=g,this.version=s}get tl(){return[this.paddedRect.x+kc,this.paddedRect.y+kc]}get br(){return[this.paddedRect.x+this.paddedRect.w-kc,this.paddedRect.y+this.paddedRect.h-kc]}get displaySize(){return[(this.paddedRect.w-2*kc)/this.pixelRatio,(this.paddedRect.h-2*kc)/this.pixelRatio]}}class f2{constructor(e,n,s){const u={},m={};this.haveRenderCallbacks=[];const g=[];this.addImages(e,u,g),this.addImages(n,m,g);const{w:E,h:T}=Nu(g),z=new Ad({width:E||1,height:T||1});for(const $ in e){const W=e[$],Q=u[$].paddedRect;Ad.copy(W.data,z,{x:0,y:0},{x:Q.x+kc,y:Q.y+kc},W.data,s,W.sdf)}for(const $ in n){const W=n[$],Q=m[$].paddedRect,le=Q.x+kc,de=Q.y+kc,be=W.data.width,xe=W.data.height;Ad.copy(W.data,z,{x:0,y:0},{x:le,y:de},W.data,s),Ad.copy(W.data,z,{x:0,y:xe-1},{x:le,y:de-1},{width:be,height:1},s),Ad.copy(W.data,z,{x:0,y:0},{x:le,y:de+xe},{width:be,height:1},s),Ad.copy(W.data,z,{x:be-1,y:0},{x:le-1,y:de},{width:1,height:xe},s),Ad.copy(W.data,z,{x:0,y:0},{x:le+be,y:de},{width:1,height:xe},s)}this.image=z,this.iconPositions=u,this.patternPositions=m}addImages(e,n,s){for(const u in e){const m=e[u],g={x:0,y:0,w:m.data.width+2*kc,h:m.data.height+2*kc};s.push(g),n[u]=new Fu(g,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,n,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>e.hasImage(u,s)),e.dispatchRenderCallbacks(this.haveRenderCallbacks,s);for(const u in e.getUpdatedImages(s))this.patchUpdatedImage(this.iconPositions[u],e.getImage(u,s),n),this.patchUpdatedImage(this.patternPositions[u],e.getImage(u,s),n)}patchUpdatedImage(e,n,s){if(!e||!n||e.version===n.version)return;e.version=n.version;const[u,m]=e.tl,g=!!Object.keys(this.patternPositions).length;s.update(n.data,{useMipmap:g},{x:u,y:m})}}at(Fu,"ImagePosition"),at(f2,"ImageAtlas");const Cl=1e20;function gp(t,e,n,s,u,m,g,E,T){for(let z=e;z<e+s;z++)Df(t,n*m+z,m,u,g,E,T);for(let z=n;z<n+u;z++)Df(t,z*m+e,1,s,g,E,T)}function Df(t,e,n,s,u,m,g){m[0]=0,g[0]=-Cl,g[1]=Cl,u[0]=t[e];for(let E=1,T=0,z=0;E<s;E++){u[E]=t[e+E*n];const $=E*E;do{const W=m[T];z=(u[E]-u[W]+$-W*W)/(E-W)/2}while(z<=g[T]&&--T>-1);T++,m[T]=E,g[T]=z,g[T+1]=Cl}for(let E=0,T=0;E<s;E++){for(;g[T+1]<E;)T++;const z=m[T],$=E-z;t[e+E*n]=u[z]+$*$}}const h0=2,Wg={none:0,ideographs:1,all:2};class Bm{constructor(e,n,s){this.requestManager=e,this.localGlyphMode=n,this.localFontFamily=s,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e,n){this.urls[n]=e}getGlyphs(e,n,s){const u=[],m=this.urls[n]||ft.GLYPHS_URL;for(const g in e)for(const E of e[g])u.push({stack:g,id:E});Eo(u,({stack:g,id:E},T)=>{let z=this.entries[g];z||(z=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let $=z.glyphs[E];if(void 0!==$)return void T(null,{stack:g,id:E,glyph:$});if($=this._tinySDF(z,g,E),$)return z.glyphs[E]=$,void T(null,{stack:g,id:E,glyph:$});const W=Math.floor(E/256);if(256*W>65535)return void T(new Error("glyphs > 65535 not supported"));if(z.ranges[W])return void T(null,{stack:g,id:E,glyph:$});let Q=z.requests[W];Q||(Q=z.requests[W]=[],Bm.loadGlyphRange(g,W,m,this.requestManager,(le,de)=>{if(de){z.ascender=de.ascender,z.descender=de.descender;for(const be in de.glyphs)this._doesCharSupportLocalGlyph(+be)||(z.glyphs[+be]=de.glyphs[+be]);z.ranges[W]=!0}for(const be of Q)be(le,de);delete z.requests[W]})),Q.push((le,de)=>{le?T(le):de&&T(null,{stack:g,id:E,glyph:de.glyphs[E]||null})})},(g,E)=>{if(g)s(g);else if(E){const T={};for(const{stack:z,id:$,glyph:W}of E)void 0===T[z]&&(T[z]={}),void 0===T[z].glyphs&&(T[z].glyphs={}),T[z].glyphs[$]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics},T[z].ascender=this.entries[z].ascender,T[z].descender=this.entries[z].descender;s(null,T)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Wg.none&&(this.localGlyphMode===Wg.all?!!this.localFontFamily:!!this.localFontFamily&&(mn["CJK Unified Ideographs"](e)||mn["Hangul Syllables"](e)||mn.Hiragana(e)||mn.Katakana(e)||mn["CJK Symbols and Punctuation"](e)||mn["CJK Unified Ideographs Extension A"](e)||mn["CJK Unified Ideographs Extension B"](e)))}_tinySDF(e,n,s){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(s))return;let m=e.tinySDF;if(!m){let be="400";/bold/i.test(n)?be="900":/medium/i.test(n)?be="500":/light/i.test(n)&&(be="200"),m=e.tinySDF=new Bm.TinySDF({fontFamily:u,fontWeight:be,fontSize:24*h0,buffer:3*h0,radius:8*h0}),m.fontWeight=be}if(this.localGlyphs[m.fontWeight][s])return this.localGlyphs[m.fontWeight][s];const g=String.fromCodePoint(s),{data:E,width:T,height:z,glyphWidth:$,glyphHeight:W,glyphLeft:Q,glyphTop:le,glyphAdvance:de}=m.draw(g);return this.localGlyphs[m.fontWeight][s]={id:s,bitmap:new l0({width:T,height:z},E),metrics:{width:$/h0,height:W/h0,left:Q/h0,top:le/h0-27,advance:de/h0,localGlyph:!0}}}}Bm.loadGlyphRange=function(t,e,n,s,u){const m=256*e,g=m+255,E=s.transformRequest(s.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${m}-${g}`),vt.Glyphs);Tr(E,(T,z)=>{if(T)u(T);else if(z){const $={},W=new h2(z).readFields(dt,{});for(const Q of W.glyphs)$[Q.id]=Q;u(null,{glyphs:$,ascender:W.ascender,descender:W.descender})}})},Bm.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:s=.25,fontFamily:u="sans-serif",fontWeight:m="normal",fontStyle:g="normal"}={}){this.buffer=e,this.cutoff=s,this.radius=n;const E=this.size=t+4*e,T=this._createCanvas(E),z=this.ctx=T.getContext("2d",{willReadFrequently:!0});z.font=`${g} ${m} ${t}px ${u}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:s,actualBoundingBoxLeft:u,actualBoundingBoxRight:m}=this.ctx.measureText(t),g=Math.ceil(n),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-u))),T=Math.min(this.size-this.buffer,g+Math.ceil(s)),z=E+2*this.buffer,$=T+2*this.buffer,W=Math.max(z*$,0),Q=new Uint8ClampedArray(W),le={data:Q,width:z,height:$,glyphWidth:E,glyphHeight:T,glyphTop:g,glyphLeft:0,glyphAdvance:e};if(0===E||0===T)return le;const{ctx:de,buffer:be,gridInner:xe,gridOuter:je}=this;de.clearRect(be,be,E,T),de.fillText(t,be,be+g);const gt=de.getImageData(be,be,E,T);je.fill(Cl,0,W),xe.fill(0,0,W);for(let _t=0;_t<T;_t++)for(let bt=0;bt<E;bt++){const nn=gt.data[4*(_t*E+bt)+3]/255;if(0===nn)continue;const Yt=(_t+be)*z+bt+be;if(1===nn)je[Yt]=0,xe[Yt]=Cl;else{const Sn=.5-nn;je[Yt]=Sn>0?Sn*Sn:0,xe[Yt]=Sn<0?Sn*Sn:0}}gp(je,0,0,z,$,z,this.f,this.v,this.z),gp(xe,be,be,E,T,z,this.f,this.v,this.z);for(let _t=0;_t<W;_t++){const bt=Math.sqrt(je[_t])-Math.sqrt(xe[_t]);Q[_t]=Math.round(255-255*(bt/this.radius+this.cutoff))}return le}};const Y2=kc;function Iv(t,e,n,s){const u=[],m=t.imagePrimary,g=m.pixelRatio,E=m.paddedRect.w-2*Y2,T=m.paddedRect.h-2*Y2,z=t.right-t.left,$=t.bottom-t.top,W=m.stretchX||[[0,E]],Q=m.stretchY||[[0,T]],le=(wi,Zi)=>wi+Zi[1]-Zi[0],de=W.reduce(le,0),be=Q.reduce(le,0),xe=E-de,je=T-be;let gt=0,_t=de,bt=0,nn=be,Yt=0,Sn=xe,Rn=0,ai=je;if(m.content&&s){const wi=m.content;gt=qg(W,0,wi[0]),bt=qg(Q,0,wi[1]),_t=qg(W,wi[0],wi[2]),nn=qg(Q,wi[1],wi[3]),Yt=wi[0]-gt,Rn=wi[1]-bt,Sn=wi[2]-wi[0]-_t,ai=wi[3]-wi[1]-nn}const Di=(wi,Zi,Mo,Gi)=>{const yo=Z2(wi.stretch-gt,_t,z,t.left),Ri=Kp(wi.fixed-Yt,Sn,wi.stretch,de),vo=Z2(Zi.stretch-bt,nn,$,t.top),Oo=Kp(Zi.fixed-Rn,ai,Zi.stretch,be),Co=Z2(Mo.stretch-gt,_t,z,t.left),ar=Kp(Mo.fixed-Yt,Sn,Mo.stretch,de),Ao=Z2(Gi.stretch-bt,nn,$,t.top),jo=Kp(Gi.fixed-Rn,ai,Gi.stretch,be),Jr=new Io(yo,vo),Fr=new Io(Co,vo),Lr=new Io(Co,Ao),No=new Io(yo,Ao),ns=new Io(Ri/g,Oo/g),Ys=new Io(ar/g,jo/g),Ss=e*Math.PI/180;if(Ss){const zl=Math.sin(Ss),Qa=Math.cos(Ss),Ba=[Qa,-zl,zl,Qa];Jr._matMult(Ba),Fr._matMult(Ba),No._matMult(Ba),Lr._matMult(Ba)}const ha=wi.stretch+wi.fixed,ra=Mo.stretch+Mo.fixed,ba=Zi.stretch+Zi.fixed,ys=Gi.stretch+Gi.fixed,Hl=t.imageSecondary;return{tl:Jr,tr:Fr,bl:No,br:Lr,texPrimary:{x:m.paddedRect.x+Y2+ha,y:m.paddedRect.y+Y2+ba,w:ra-ha,h:ys-ba},texSecondary:Hl?{x:Hl.paddedRect.x+Y2+ha,y:Hl.paddedRect.y+Y2+ba,w:ra-ha,h:ys-ba}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ns,pixelOffsetBR:Ys,minFontScaleX:Sn/g/z,minFontScaleY:ai/g/$,isSDF:n}};if(s&&(m.stretchX||m.stretchY)){const wi=Ev(W,xe,de),Zi=Ev(Q,je,be);for(let Mo=0;Mo<wi.length-1;Mo++){const Gi=wi[Mo],yo=wi[Mo+1];for(let Ri=0;Ri<Zi.length-1;Ri++)u.push(Di(Gi,Zi[Ri],yo,Zi[Ri+1]))}}else u.push(Di({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:T+1}));return u}function qg(t,e,n){let s=0;for(const u of t)s+=Math.max(e,Math.min(n,u[1]))-Math.max(e,Math.min(n,u[0]));return s}function Ev(t,e,n){const s=[{fixed:-Y2,stretch:0}];for(const[u,m]of t){const g=s[s.length-1];s.push({fixed:u-g.stretch,stretch:g.stretch}),s.push({fixed:u-g.stretch,stretch:g.stretch+(m-u)})}return s.push({fixed:e+Y2,stretch:n}),s}function Z2(t,e,n,s){return t/e*n+s}function Kp(t,e,n,s){return t-e*n/s}function F4(t,e,n,s){const u=e+t.positionedLines[s].lineOffset;return 0===s?n+u/2:n+(u+(e+t.positionedLines[s-1].lineOffset))/2}function V4(t,e=1,n=!1){let s=1/0,u=1/0,m=-1/0,g=-1/0;const E=t[0];for(let le=0;le<E.length;le++){const de=E[le];(!le||de.x<s)&&(s=de.x),(!le||de.y<u)&&(u=de.y),(!le||de.x>m)&&(m=de.x),(!le||de.y>g)&&(g=de.y)}const T=Math.min(m-s,g-u);let z=T/2;const $=new Xh([],$4);if(0===T)return new Io(s,u);for(let le=s;le<m;le+=T)for(let de=u;de<g;de+=T)$.push(new Yp(le+z,de+z,z,t));let W=function(le){let de=0,be=0,xe=0;const je=le[0];for(let gt=0,_t=je.length,bt=_t-1;gt<_t;bt=gt++){const nn=je[gt],Yt=je[bt],Sn=nn.x*Yt.y-Yt.x*nn.y;be+=(nn.x+Yt.x)*Sn,xe+=(nn.y+Yt.y)*Sn,de+=3*Sn}return new Yp(be/de,xe/de,0,le)}(t),Q=$.length;for(;$.length;){const le=$.pop();(le.d>W.d||!W.d)&&(W=le,n&&console.log("found best %d after %d probes",Math.round(1e4*le.d)/1e4,Q)),le.max-W.d<=e||(z=le.h/2,$.push(new Yp(le.p.x-z,le.p.y-z,z,t)),$.push(new Yp(le.p.x+z,le.p.y-z,z,t)),$.push(new Yp(le.p.x-z,le.p.y+z,z,t)),$.push(new Yp(le.p.x+z,le.p.y+z,z,t)),Q+=4)}return n&&(console.log(`num probes: ${Q}`),console.log(`best distance: ${W.d}`)),W.p}function $4(t,e){return e.max-t.max}class Yp{constructor(e,n,s,u){this.p=new Io(e,n),this.h=s,this.d=function(m,g){let E=!1,T=1/0;for(let z=0;z<g.length;z++){const $=g[z];for(let W=0,Q=$.length,le=Q-1;W<Q;le=W++){const de=$[W],be=$[le];de.y>m.y!=be.y>m.y&&m.x<(be.x-de.x)*(m.y-de.y)/(be.y-de.y)+de.x&&(E=!E),T=Math.min(T,Km(m,de,be))}}return(E?1:-1)*Math.sqrt(T)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}}const j4=Number.POSITIVE_INFINITY,I1=Math.sqrt(2);function Cv(t,[e,n]){let s=0,u=0;if(n===j4){e<0&&(e=0);const m=e/I1;switch(t){case"top-right":case"top-left":u=m-7;break;case"bottom-right":case"bottom-left":u=7-m;break;case"bottom":u=7-e;break;case"top":u=e-7}switch(t){case"top-right":case"bottom-right":s=-m;break;case"top-left":case"bottom-left":s=m;break;case"left":s=e;break;case"right":s=-e}}else{switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":u=n-7;break;case"bottom-right":case"bottom-left":case"bottom":u=7-n}switch(t){case"top-right":case"bottom-right":case"right":s=-e;break;case"top-left":case"bottom-left":case"left":s=e}}return[s,u]}function Pf(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function d6(t,e,n,s,u,m,g,E,T,z,$,W,Q,le,de){let be=m.textMaxSize.evaluate(e,{},W);void 0===be&&(be=g);const xe=t.layers[0].layout,je=xe.get("icon-offset").evaluate(e,{},W),gt=U4(n.horizontal)||n.vertical,_t="globe"===Q.name,bt=xu,nn=g/bt,Yt=t.tilePixelRatio*be/bt,Sn=(yo=t.overscaling,t.zoom>18&&yo>2&&(yo>>=1),Math.max(Z/(512*yo),1)*xe.get("symbol-spacing")),Rn=xe.get("text-padding")*t.tilePixelRatio,ai=xe.get("icon-padding")*t.tilePixelRatio,Di=rs(xe.get("text-max-angle")),wi="map"===xe.get("text-rotation-alignment")&&"point"!==xe.get("symbol-placement"),Zi="map"===xe.get("icon-rotation-alignment")&&"point"!==xe.get("symbol-placement"),Mo=xe.get("symbol-placement"),Gi=Sn/2;var yo;const Ri=xe.get("icon-text-fit").evaluate(e,{},W),vo=xe.get("icon-text-fit-padding").evaluate(e,{},W),Oo="none"!==Ri;let Co;!1===t.hasAnyIconTextFit&&Oo&&(t.hasAnyIconTextFit=!0),s&&Oo&&(t.allowVerticalPlacement&&n.vertical&&(Co=Rl(s,n.vertical,Ri,vo,je,nn)),gt&&(s=Rl(s,gt,Ri,vo,je,nn)));const ar=(Ao,jo,Jr)=>{if(jo.x<0||jo.x>=Z||jo.y<0||jo.y>=Z)return;let Fr=null;if(_t){const{x:Lr,y:No,z:ns}=Q.projectTilePoint(jo.x,jo.y,Jr);Fr={anchor:new Ql(Lr,No,ns,0,void 0),up:Q.upVector(Jr,jo.x,jo.y)}}!function(Lr,No,ns,Ys,Ss,ha,ra,ba,ys,Hl,zl,Qa,Ba,Ua,rc,sc,Iu,ou,s1,rd,Xc,Gd,m0,g0,ac,wh,ef){const Of=Lr.addToLineVertexArray(No,Ys);let am,Um,Eg,z4,$6,j6,U6,hv=0,L3=0,H6=0,B3=0,G6=-1,Jv=-1;const Hm={};let W6=ll("");const Cg=ns?ns.anchor:No,pv="none"!==ys.layout.get("icon-text-fit").evaluate(Xc,{},ac);let N3=0,F3=0;if(void 0===ys._unevaluatedLayout.getValue("text-radial-offset")?[N3,F3]=ys.layout.get("text-offset").evaluate(Xc,{},ac).map(_p=>_p*xu):(N3=ys.layout.get("text-radial-offset").evaluate(Xc,{},ac)*xu,F3=j4),Lr.allowVerticalPlacement&&Ss.vertical){const _p=Ss.vertical;if(rc)j6=m2(_p),ba&&(U6=m2(ba));else{const yp=ys.layout.get("text-rotate").evaluate(Xc,{},ac)+90;Eg=Q2(Hl,Cg,No,zl,Qa,Ba,_p,Ua,yp,sc),ba&&(z4=Q2(Hl,Cg,No,zl,Qa,Ba,ba,ou,yp))}}if(ha){const _p=ys.layout.get("icon-rotate").evaluate(Xc,{},ac),yp=Iv(ha,_p,m0,pv),O4=ba?Iv(ba,_p,m0,pv):void 0;Um=Q2(Hl,Cg,No,zl,Qa,Ba,ha,ou,_p),hv=4*yp.length;const q6=Lr.iconSizeData;let s4=null;"source"===q6.kind?(s4=[d0*ys.layout.get("icon-size").evaluate(Xc,{},ac)],s4[0]>X1&&fa(`${Lr.layerIds[0]}: Value for "icon-size" is >= ${Nm}. Reduce your "icon-size".`)):"composite"===q6.kind&&(s4=[d0*Gd.compositeIconSizes[0].evaluate(Xc,{},ac),d0*Gd.compositeIconSizes[1].evaluate(Xc,{},ac)],(s4[0]>X1||s4[1]>X1)&&fa(`${Lr.layerIds[0]}: Value for "icon-size" is >= ${Nm}. Reduce your "icon-size".`)),Lr.addSymbols(Lr.icon,yp,s4,rd,s1,Xc,!1,ns,No,Of.lineStartIndex,Of.lineLength,-1,g0,ac,wh,ef),G6=Lr.icon.placedSymbolArray.length-1,O4&&(L3=4*O4.length,Lr.addSymbols(Lr.icon,O4,s4,rd,s1,Xc,xi.vertical,ns,No,Of.lineStartIndex,Of.lineLength,-1,g0,ac,wh,ef),Jv=Lr.icon.placedSymbolArray.length-1)}for(const _p in Ss.horizontal){const yp=Ss.horizontal[_p];am||(W6=ll(yp.text),rc?$6=m2(yp):am=Q2(Hl,Cg,No,zl,Qa,Ba,yp,Ua,ys.layout.get("text-rotate").evaluate(Xc,{},ac),sc));const O4=1===yp.positionedLines.length;if(H6+=Xg(Lr,ns,No,yp,ra,ys,rc,Xc,sc,Of,Ss.vertical?xi.horizontal:xi.horizontalOnly,O4?Object.keys(Ss.horizontal):[_p],Hm,G6,Gd,g0,ac,wh),O4)break}Ss.vertical&&(B3+=Xg(Lr,ns,No,Ss.vertical,ra,ys,rc,Xc,sc,Of,xi.vertical,["vertical"],Hm,Jv,Gd,g0,ac,wh));let Lf=-1;const V3=(_p,yp)=>_p?Math.max(_p,yp):yp;Lf=V3($6,Lf),Lf=V3(j6,Lf),Lf=V3(U6,Lf);const K5=Lf>-1?1:0;Lr.glyphOffsetArray.length>=65535&&fa("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Xc.sortKey&&Lr.addToSortKeyRanges(Lr.symbolInstances.length,Xc.sortKey),Lr.symbolInstances.emplaceBack(No.x,No.y,Cg.x,Cg.y,Cg.z,Hm.right>=0?Hm.right:-1,Hm.center>=0?Hm.center:-1,Hm.left>=0?Hm.left:-1,Hm.vertical>=0?Hm.vertical:-1,G6,Jv,W6,void 0!==am?am:Lr.collisionBoxArray.length,void 0!==am?am+1:Lr.collisionBoxArray.length,void 0!==Eg?Eg:Lr.collisionBoxArray.length,void 0!==Eg?Eg+1:Lr.collisionBoxArray.length,void 0!==Um?Um:Lr.collisionBoxArray.length,void 0!==Um?Um+1:Lr.collisionBoxArray.length,z4||Lr.collisionBoxArray.length,z4?z4+1:Lr.collisionBoxArray.length,zl,H6,B3,hv,L3,K5,0,N3,F3,Lf,0,1,1,pv?1:0)}(t,jo,Fr,Ao,n,s,u,Co,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,Rn,wi,T,0,ai,Zi,je,e,m,z,$,W,le,de)};if("line"===Mo)for(const Ao of Mc(e.geometry,0,0,Z,Z)){const jo=td(Ao,Sn,Di,n.vertical||gt,s,bt,Yt,t.overscaling,Z);for(const Jr of jo)gt&&kv(t,gt.text,Gi,Jr)||ar(Ao,Jr,W)}else if("line-center"===Mo){for(const Ao of e.geometry)if(Ao.length>1){const jo=Bu(Ao,Di,n.vertical||gt,s,bt,Yt);jo&&ar(Ao,jo,W)}}else if("Polygon"===e.type)for(const Ao of jp(e.geometry,0)){const jo=V4(Ao,16);ar(Ao[0],new Ql(jo.x,jo.y,0,0,void 0),W)}else if("LineString"===e.type)for(const Ao of e.geometry)ar(Ao,new Ql(Ao[0].x,Ao[0].y,0,0,void 0),W);else if("Point"===e.type)for(const Ao of e.geometry)for(const jo of Ao)ar([jo],new Ql(jo.x,jo.y,0,0,void 0),W)}const Nm=255,X1=Nm*d0;function Xg(t,e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe,je){const gt=function(nn,Yt,Sn,Rn,ai,Di,wi,Zi){const Mo=[];if(0===Yt.positionedLines.length)return Mo;const Gi=Rn.layout.get("text-rotate").evaluate(Di,{})*Math.PI/180,yo=function(ar){const Ao=ar[0],jo=ar[1],Jr=Ao*jo;return Jr>0?[Ao,-jo]:Jr<0?[-Ao,jo]:0===Ao?[jo,Ao]:[jo,-Ao]}(Sn);let Ri=Math.abs(Yt.top-Yt.bottom);for(const ar of Yt.positionedLines)Ri-=ar.lineOffset;const vo=Yt.positionedLines.length,Oo=Ri/vo;let Co=Yt.top-Sn[1];for(let ar=0;ar<vo;++ar){const Ao=Yt.positionedLines[ar];Co=F4(Yt,Oo,Co,ar);for(const jo of Ao.positionedGlyphs){if(!jo.rect)continue;const Jr=jo.rect||{};let Fr=fi+1,Lr=!0,No=1,ns=0;if(jo.imageName){const rd=wi[jo.imageName];if(!rd)continue;if(rd.sdf){fa("SDF images are not supported in formatted text and will be ignored.");continue}Lr=!1,No=rd.pixelRatio,Fr=kc/No}const Ys=(ai||Zi)&&jo.vertical,Ss=jo.metrics.advance*jo.scale/2,ha=jo.metrics,ra=jo.rect;if(null===ra)continue;Zi&&Yt.verticalizable&&(ns=jo.imageName?Ss-jo.metrics.width*jo.scale/2:0);const ba=ai?[jo.x+Ss,jo.y]:[0,0];let ys=[0,0],Hl=[0,0],zl=!1;ai||(Ys?(Hl=[jo.x+Ss+yo[0],jo.y+yo[1]-ns],zl=!0):ys=[jo.x+Ss+Sn[0],jo.y+Sn[1]-ns]);const Qa=ra.w*jo.scale/(No*(jo.localGlyph?h0:1)),Ba=ra.h*jo.scale/(No*(jo.localGlyph?h0:1));let Ua,rc,sc,Iu;if(Ys){const rd=jo.y-Co,Xc=new Io(-Ss,Ss-rd),Gd=-Math.PI/2,m0=new Io(...Hl);Ua=new Io(-Ss+ys[0],ys[1]),Ua._rotateAround(Gd,Xc)._add(m0),Ua.x+=-rd+Ss,Ua.y-=(ha.left-Fr)*jo.scale;const g0=jo.imageName?ha.advance*jo.scale:xu*jo.scale,ac=String.fromCodePoint(jo.glyph);q(ac)?Ua.x+=(1-Fr)*jo.scale:ce(ac)?Ua.x+=g0-ha.height*jo.scale+(-Fr-1)*jo.scale:Ua.x+=jo.imageName||ha.width+2*Fr===ra.w&&ha.height+2*Fr===ra.h?(g0-Ba)/2:(g0-(ha.height+2*Fr)*jo.scale)/2,rc=new Io(Ua.x,Ua.y-Qa),sc=new Io(Ua.x+Ba,Ua.y),Iu=new Io(Ua.x+Ba,Ua.y-Qa)}else{const rd=(ha.left-Fr)*jo.scale-Ss+ys[0],Xc=(-ha.top-Fr)*jo.scale+ys[1],Gd=rd+Qa,m0=Xc+Ba;Ua=new Io(rd,Xc),rc=new Io(Gd,Xc),sc=new Io(rd,m0),Iu=new Io(Gd,m0)}if(Gi){let rd;rd=ai?new Io(0,0):zl?new Io(yo[0],yo[1]):new Io(Sn[0],Sn[1]),Ua._rotateAround(Gi,rd),rc._rotateAround(Gi,rd),sc._rotateAround(Gi,rd),Iu._rotateAround(Gi,rd)}const ou=new Io(0,0),s1=new Io(0,0);Mo.push({tl:Ua,tr:rc,bl:sc,br:Iu,texPrimary:Jr,texSecondary:void 0,writingMode:Yt.writingMode,glyphOffset:ba,sectionIndex:jo.sectionIndex,isSDF:Lr,pixelOffsetTL:ou,pixelOffsetBR:s1,minFontScaleX:0,minFontScaleY:0})}}return Mo}(0,s,T,m,g,E,u,t.allowVerticalPlacement),_t=t.textSizeData;let bt=null;"source"===_t.kind?(bt=[d0*m.layout.get("text-size").evaluate(E,{},xe)],bt[0]>X1&&fa(`${t.layerIds[0]}: Value for "text-size" is >= ${Nm}. Reduce your "text-size".`)):"composite"===_t.kind&&(bt=[d0*de.compositeTextSizes[0].evaluate(E,{},xe),d0*de.compositeTextSizes[1].evaluate(E,{},xe)],(bt[0]>X1||bt[1]>X1)&&fa(`${t.layerIds[0]}: Value for "text-size" is >= ${Nm}. Reduce your "text-size".`)),t.addSymbols(t.text,gt,bt,T,g,E,$,e,n,z.lineStartIndex,z.lineLength,le,be,xe,je,!1);for(const nn of W)Q[nn]=t.text.placedSymbolArray.length-1;return 4*gt.length}function U4(t){for(const e in t)return t[e];return null}function Q2(t,e,n,s,u,m,g,E,T,z){let $=g.top,W=g.bottom,Q=g.left,le=g.right;const de=g.collisionPadding;if(de&&(Q-=de[0],$-=de[1],le+=de[2],W+=de[3]),T){const be=new Io(Q,$),xe=new Io(le,$),je=new Io(Q,W),gt=new Io(le,W),_t=rs(T);let bt=new Io(0,0);z&&(bt=new Io(z[0],z[1])),be._rotateAround(_t,bt),xe._rotateAround(_t,bt),je._rotateAround(_t,bt),gt._rotateAround(_t,bt),Q=Math.min(be.x,xe.x,je.x,gt.x),le=Math.max(be.x,xe.x,je.x,gt.x),$=Math.min(be.y,xe.y,je.y,gt.y),W=Math.max(be.y,xe.y,je.y,gt.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,Q,$,le,W,E,s,u,m),t.length-1}function m2(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function kv(t,e,n,s){const u=t.compareText;if(e in u){const m=u[e];for(let g=m.length-1;g>=0;g--)if(s.dist(m[g])<n)return!0}else u[e]=[];return u[e].push(s),!1}function v4(t,e){const n=t.fovAboveCenter,s=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,u=(t._camera.position[2]*t.worldSize-s)/Math.cos(t._pitch),m=Math.sin(n)*u/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),g=Math.sin(t._pitch)*m+u;return Math.min(1.01*g,u*(1/t._horizonShift))}function Ac(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),s=t.x*n,u=(t.x+1)*n,m=t.y*n,g=(t.y+1)*n,E=bu(s),T=bu(u),z=Fc(m),$=Fc(g),W=e.project(E,z),Q=e.project(T,z),le=e.project(T,$),de=e.project(E,$);let be=Math.min(W.x,Q.x,le.x,de.x),xe=Math.min(W.y,Q.y,le.y,de.y),je=Math.max(W.x,Q.x,le.x,de.x),gt=Math.max(W.y,Q.y,le.y,de.y);const _t=n/16;function bt(Yt,Sn,Rn,ai,Di,wi){const Zi=(Rn+Di)/2,Mo=(ai+wi)/2,Gi=e.project(bu(Zi),Fc(Mo)),yo=Math.max(0,be-Gi.x,xe-Gi.y,Gi.x-je,Gi.y-gt);be=Math.min(be,Gi.x),je=Math.max(je,Gi.x),xe=Math.min(xe,Gi.y),gt=Math.max(gt,Gi.y),yo>_t&&(bt(Yt,Gi,Rn,ai,Zi,Mo),bt(Gi,Sn,Zi,Mo,Di,wi))}bt(W,Q,s,m,u,m),bt(Q,le,u,m,u,g),bt(le,de,u,g,s,g),bt(de,W,s,g,s,m),be-=_t,xe-=_t,je+=_t,gt+=_t;const nn=1/Math.max(je-be,gt-xe);return{scale:nn,x:be*nn,y:xe*nn,x2:je*nn,y2:gt*nn,projection:e}}function Sv(t,{x:e,y:n},s=0){return new Io(((e-s)*t.scale-t.x)*Z,(n*t.scale-t.y)*Z)}const s3=l.ad.identity(new Float32Array(16));class g2{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,n){return{x:0,y:0,z:0}}unproject(e,n){return new oa(0,0)}projectTilePoint(e,n,s){return{x:e,y:n,z:0}}locationPoint(e,n,s=!0){return e._coordinatePoint(e.locationCoordinate(n),s)}pixelsPerMeter(e,n){return Dl(1,e)*n}pixelSpaceConversion(e,n,s){return 1}farthestPixelDistance(e){return v4(e,e.pixelsPerMeter)}pointCoordinate(e,n,s,u){const m=e.horizonLineFromTop(!1),g=new Io(n,Math.max(m,s));return e.rayIntersectionCoordinate(e.pointRayIntersection(g,u))}pointCoordinate3D(e,n,s){const u=new Io(n,s);if(e.elevation)return e.elevation.pointCoordinate(u);{const m=this.pointCoordinate(e,u.x,u.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(e,n){if(e.elevation&&e.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(e,n.x,n.y);const s=e.horizonLineFromTop();return n.y<s}createInversionMatrix(e,n){return s3}createTileMatrix(e,n,s){let u,m,g;const E=s.canonical,T=l.ad.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const z=Ac(E,this);u=1,m=z.x+s.wrap*z.scale,g=z.y,l.ad.scale(T,T,[u/z.scale,u/z.scale,e.pixelsPerMeter/n])}else u=n/e.zoomScale(E.z),m=(E.x+Math.pow(2,E.z)*s.wrap)*u,g=E.y*u;return l.ad.translate(T,T,[m,g,0]),l.ad.scale(T,T,[u/Z,u/Z,1]),T}upVector(e,n,s){return[0,0,1]}upVectorScale(e,n,s){return{metersToTile:1}}}class Tv extends g2{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[n,s]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(rs(n));this.n=(u+Math.sin(rs(s)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,n){const{n:s,c:u,r0:m}=this,g=rs(e-this.center[0]),E=rs(n),T=Math.sqrt(u-2*s*Math.sin(E))/s;return{x:T*Math.sin(g*s),y:T*Math.cos(g*s)-m,z:0}}unproject(e,n){const{n:s,c:u,r0:m}=this,g=m+n;let E=Math.atan2(e,Math.abs(g))*Math.sign(g);g*s<0&&(E-=Math.PI*Math.sign(e)*Math.sign(g));const T=rs(this.center[0])*s;E=bo(E,-Math.PI-T,Math.PI-T);const z=On(Na(E/s)+this.center[0],-180,180),$=Math.asin(On((u-(e*e+g*g)*s*s)/(2*s),-1,1)),W=On(Na($),-Yl,Yl);return new oa(z,W)}}const fg=1.340264,p0=-.081106,J2=893e-6,K1=.003796,Kg=Math.sqrt(3)/2;class Mv extends g2{project(e,n){n=n/180*Math.PI,e=e/180*Math.PI;const s=Math.asin(Kg*Math.sin(n)),u=s*s,m=u*u*u;return{x:.5*(e*Math.cos(s)/(Kg*(fg+3*p0*u+m*(7*J2+9*K1*u)))/Math.PI+.5),y:1-.5*(s*(fg+p0*u+m*(J2+K1*u))/Math.PI+1),z:0}}unproject(e,n){e=(2*e-.5)*Math.PI;let s=n=(2*(1-n)-1)*Math.PI,u=s*s,m=u*u*u;for(let $,W,Q,le=0;le<12&&(W=s*(fg+p0*u+m*(J2+K1*u))-n,Q=fg+3*p0*u+m*(7*J2+9*K1*u),$=W/Q,s=On(s-$,-Math.PI/3,Math.PI/3),u=s*s,m=u*u*u,!(Math.abs($)<1e-12));++le);const g=Kg*e*(fg+3*p0*u+m*(7*J2+9*K1*u))/Math.cos(s),E=Math.asin(Math.sin(s)/Kg),T=On(180*g/Math.PI,-180,180),z=On(180*E/Math.PI,-Yl,Yl);return new oa(T,z)}}class mg extends g2{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,n){return{x:.5+e/360,y:.5-n/360,z:0}}unproject(e,n){const s=360*(e-.5),u=On(360*(.5-n),-Yl,Yl);return new oa(s,u)}}const Rf=Math.PI/2;function em(t){return Math.tan((Rf+t)/2)}class H4 extends g2{constructor(e){super(e),this.center=e.center||[0,30];const[n,s]=this.parallels=e.parallels||[30,30];let u=rs(n),m=rs(s);this.southernCenter=u+m<0,this.southernCenter&&(u=-u,m=-m);const g=Math.cos(u),E=em(u);this.n=u===m?Math.sin(u):Math.log(g/Math.cos(m))/Math.log(em(m)/E),this.f=g*Math.pow(em(u),this.n)/this.n}project(e,n){n=rs(n),this.southernCenter&&(n=-n),e=rs(e-this.center[0]);const s=1e-6,{n:u,f:m}=this;m>0?n<-Rf+s&&(n=-Rf+s):n>Rf-s&&(n=Rf-s);const g=m/Math.pow(em(n),u);let E=g*Math.sin(u*e),T=m-g*Math.cos(u*e);return E=.5*(E/Math.PI+.5),T=.5*(T/Math.PI+.5),{x:E,y:this.southernCenter?T:1-T,z:0}}unproject(e,n){e=(2*e-.5)*Math.PI,this.southernCenter&&(n=1-n),n=(2*(1-n)-.5)*Math.PI;const{n:s,f:u}=this,m=u-n,g=Math.sign(m),E=Math.sign(s)*Math.sqrt(e*e+m*m);let T=Math.atan2(e,Math.abs(m))*g;m*s<0&&(T-=Math.PI*Math.sign(e)*g);const z=On(Na(T/s)+this.center[0],-180,180),$=On(Na(2*Math.atan(Math.pow(u/E,1/s))-Rf),-Yl,Yl);return new oa(z,this.southernCenter?-$:$)}}class _4 extends g2{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,n){return{x:r0(e),y:$h(n),z:0}}unproject(e,n){const s=bu(e),u=Fc(n);return new oa(s,u)}}const Fm=rs(Yl);class Av extends g2{project(e,n){const s=(n=rs(n))*n,u=s*s;return{x:.5*((e=rs(e))*(.8707-.131979*s+u*(u*(.003971*s-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(n*(1.007226+s*(.015085+u*(.028874*s-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,n){e=(2*e-.5)*Math.PI;let s=n=(2*(1-n)-1)*Math.PI,u=25,m=0,g=s*s;do{g=s*s;const z=g*g;m=(s*(1.007226+g*(.015085+z*(.028874*g-.044475-.005916*z)))-n)/(1.007226+g*(.045255+z*(.259866*g-.311325-.005916*11*z))),s=On(s-m,-Fm,Fm)}while(Math.abs(m)>1e-6&&--u>0);g=s*s;const E=On(Na(e/(.8707+g*(g*(g*g*g*(.003971-.001529*g)-.013791)-.131979))),-180,180),T=Na(s);return new oa(E,T)}}const gg=rs(Yl);class Vm extends g2{project(e,n){n=rs(n),e=rs(e);const s=Math.cos(n),u=2/Math.PI,m=Math.acos(s*Math.cos(e/2)),g=Math.sin(m)/m,E=.5*(e*u+2*s*Math.sin(e/2)/g)||0,T=.5*(n+Math.sin(n)/g)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(T/Math.PI+1),z:0}}unproject(e,n){let s=e=(2*e-.5)*Math.PI,u=n=(2*(1-n)-1)*Math.PI,m=25;const g=1e-6;let E=0,T=0;do{const z=Math.cos(u),$=Math.sin(u),W=2*$*z,Q=$*$,le=z*z,de=Math.cos(s/2),be=Math.sin(s/2),xe=2*de*be,je=be*be,gt=1-le*de*de,_t=gt?1/gt:0,bt=gt?Math.acos(z*de)*Math.sqrt(1/gt):0,nn=.5*(2*bt*z*be+2*s/Math.PI)-e,Yt=.5*(bt*$+u)-n,Sn=.5*_t*(le*je+bt*z*de*Q)+1/Math.PI,Rn=_t*(xe*W/4-bt*$*be),ai=.125*_t*(W*be-bt*$*le*xe),Di=.5*_t*(Q*de+bt*je*z)+.5,wi=Rn*ai-Di*Sn;E=(Yt*Rn-nn*Di)/wi,T=(nn*ai-Yt*Sn)/wi,s=On(s-E,-Math.PI,Math.PI),u=On(u-T,-gg,gg)}while((Math.abs(E)>g||Math.abs(T)>g)&&--m>0);return new oa(Na(s),Na(u))}}class Zp extends g2{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(rs(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,n){const{scale:s,cosPhi:u}=this;return{x:rs(e)*u*s+.5,y:-Math.sin(rs(n))/u*s+.5,z:0}}unproject(e,n){const{scale:s,cosPhi:u}=this,m=-(n-.5)/s,g=On(Na((e-.5)/s)/u,-180,180),E=Math.asin(On(m*u,-1,1)),T=On(Na(E),-Yl,Yl);return new oa(g,T)}}class Dv extends _4{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,n,s){const u=$1(e,n,s),m=zp(oh(s));return l._.transformMat4(u,u,m),{x:u[0],y:u[1],z:u[2]}}locationPoint(e,n){const s=Ic(n.lat,n.lng),u=l._.normalize([],s),m=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(n),e._centerAltitude):e._centerAltitude,g=Dl(1,0)*Z*m;l._.scaleAndAdd(s,s,u,g);const E=l.ad.identity(new Float64Array(16));return l.ad.multiply(E,e.pixelMatrix,e.globeMatrix),l._.transformMat4(s,s,E),new Io(s[0],s[1])}pixelsPerMeter(e,n){return Dl(1,0)*n}pixelSpaceConversion(e,n,s){const u=Dl(1,e)*n,m=Rr(Dl(1,45)*n,u,s);return this.pixelsPerMeter(e,n)/m}createTileMatrix(e,n,s){const u=dp(oh(s.canonical));return l.ad.multiply(new Float64Array(16),e.globeMatrix,u)}createInversionMatrix(e,n){const{center:s}=e,u=zp(oh(n));return l.ad.rotateY(u,u,rs(s.lng)),l.ad.rotateX(u,u,rs(s.lat)),l.ad.scale(u,u,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(u)}pointCoordinate(e,n,s,u){return Qm(e,n,s,!0)||new $d(0,0)}pointCoordinate3D(e,n,s){const u=this.pointCoordinate(e,n,s,0);return[u.x,u.y,u.z]}isPointAboveHorizon(e,n){return!Qm(e,n.x,n.y,!1)}farthestPixelDistance(e){const n=function(u,m){const g=u.cameraToCenterDistance,E=u._centerAltitude*m,T=u._camera,z=u._camera.forward(),$=l._.add([],l._.scale([],z,-g),[0,0,E]),W=u.worldSize/(2*Math.PI),Q=[0,0,-W],le=u.width/u.height,de=Math.tan(u.fovAboveCenter),be=l._.scale([],T.up(),de),xe=l._.scale([],T.right(),de*le),je=l._.normalize([],l._.add([],l._.add([],z,be),xe)),gt=[];let _t;if(new Zf($,je).closestPointOnSphere(Q,W,gt)){const bt=l._.add([],gt,Q),nn=l._.sub([],bt,$);_t=Math.cos(u.fovAboveCenter)*l._.length(nn)}else{const bt=l._.sub([],$,Q),nn=l._.sub([],Q,$);l._.normalize(nn,nn);const Yt=l._.length(bt)-W;_t=Math.sqrt(Yt*(Yt+2*W));const Sn=Math.acos(_t/(W+Yt))-Math.acos(l._.dot(z,nn));_t*=Math.cos(Sn)}return 1.01*_t}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),s=rh(e.zoom);if(s>0){const u=v4(e,Dl(1,e.center.lat)*e.worldSize),m=e.worldSize/(2*Math.PI),g=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Rr(n,u+m*(1-Math.cos(g)),Math.pow(s,10))}return n}upVector(e,n,s){return $1(n,s,e,1)}upVectorScale(e){return{metersToTile:up(yf(oh(e)))}}}function y4(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new _4(t);case"equirectangular":return new mg(t);case"naturalEarth":return new Av(t);case"equalEarth":return new Mv(t);case"winkelTripel":return new Vm(t);case"albers":return n?new Zp(t):new Tv(t);case"lambertConformalConic":return n?new Zp(t):new H4(t);case"globe":return new Dv(t)}throw new Error(`Invalid projection name: ${t.name}`)}let Yg=(()=>{class t{constructor(n,s,u,m){this.id=t.uniqueIdxCounter,t.uniqueIdxCounter++,this.context=n;const g=n.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||m||s.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){this.id=t.uniqueIdxCounter,t.uniqueIdxCounter++;const s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}return t.uniqueIdxCounter=0,t})();class $m{constructor(e,n,s){this.func=e,this.mask=n,this.range=s}}$m.ReadOnly=!1,$m.ReadWrite=!0,$m.disabled=new $m(519,$m.ReadOnly,[0,1]);class Zg{constructor(e,n,s,u,m,g){this.test=e,this.ref=n,this.mask=s,this.fail=u,this.depthFail=m,this.pass=g}}Zg.disabled=new Zg({func:519,mask:0},0,0,7680,7680,7680);class Vu{constructor(e,n,s,u){this.blendFunction=e,this.blendColor=n,this.mask=s,this.blendEquation=u}}Vu.Replace=[1,0,1,0],Vu.disabled=new Vu(Vu.Replace,Xs.transparent,[!1,!1,!1,!1]),Vu.unblended=new Vu(Vu.Replace,Xs.transparent,[!0,!0,!0,!0]),Vu.alphaBlended=new Vu([1,771,1,771],Xs.transparent,[!0,!0,!0,!0]),Vu.alphaBlendedNonPremultiplied=new Vu([770,771,770,771],Xs.transparent,[!0,!0,!0,!0]),Vu.multiply=new Vu([774,0,774,0],Xs.transparent,[!0,!0,!0,!0]);class Y1{constructor(e,n,s){this.enable=e,this.mode=n,this.frontFace=s}}Y1.disabled=new Y1(!1,1029,2305),Y1.backCCW=new Y1(!0,1029,2305),Y1.backCW=new Y1(!0,1029,2304),Y1.frontCW=new Y1(!0,1028,2304),Y1.frontCCW=new Y1(!0,1028,2305);const G4=Jo.types,b4=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function V0(t,e,n,s,u,m,g,E,T,z,$,W,Q){const le=E?Math.min(X1,Math.round(E[0])):0,de=E?Math.min(X1,Math.round(E[1])):0;t.emplaceBack(e,n,Math.round(32*s),Math.round(32*u),m,g,(le<<1)+(T?1:0),de,16*z,16*$,256*W,256*Q)}function Qg(t,e,n){t.emplaceBack(e,n)}function Jg(t,e,n,s,u,m,g){t.emplaceBack(e,n,s,u,m,g)}function v2(t,e,n,s,u){t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u)}function K(t){for(const e of t.sections)if(Ve(e.text))return!0;return!1}class Oe{constructor(e){this.layoutVertexArray=new x2,this.indexArray=new eu,this.programConfigurations=e,this.segments=new al,this.dynamicLayoutVertexArray=new t0,this.opacityVertexArray=new af,this.occlusionQueryOpacityVertexArray=new kd,this.placedSymbolArray=new R1,this.iconTransitioningVertexArray=new Vh,this.globeExtVertexArray=new h1,this.zOffsetVertexArray=new kd}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length&&0===this.iconTransitioningVertexArray.length}upload(e,n,s,u,m){this.isEmpty()||(s&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,h4.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,l2.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,b4,!0),this.occlusionQueryOpacityVertexBuffer=e.createVertexBuffer(this.occlusionQueryOpacityVertexArray,sh.members,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=e.createVertexBuffer(this.iconTransitioningVertexArray,Wp.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,L4.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,B4.members,!0)),this.opacityVertexBuffer.itemSize=1),(s||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.occlusionQueryOpacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}at(Oe,"SymbolBuffers");class ut{constructor(e,n,s){this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new s,this.segments=new al,this.collisionVertexArray=new z0,this.collisionVertexArrayExt=new t0}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,wv.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,lg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}at(ut,"CollisionBuffers");class an{constructor(e){this.queries=new Map,this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.lut=e.lut,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(g=>g.fqid),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=l.ad.identity([]),this.placementViewportMatrix=l.ad.identity([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Om(this.zoom,n["text-size"]),this.iconSizeData=Om(this.zoom,n["icon-size"]);const s=this.layers[0].layout,u=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==m&&void 0!==u.constantOr(1),this.sortFeaturesByY=("viewport-y"===m||"auto"===m&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=s.get("text-writing-mode").map(g=>xi[g]),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=e.sourceID,this.projection=e.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=s.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new Oe(new v1(this.layers,{zoom:this.zoom,lut:this.lut},e=>/^text/.test(e))),this.icon=new Oe(new v1(this.layers,{zoom:this.zoom,lut:this.lut},e=>/^icon/.test(e))),this.glyphOffsetArray=new Q0,this.lineVertexArray=new J0,this.symbolInstances=new f1}calculateGlyphDependencies(e,n,s,u,m){for(let g=0;g<e.length;g++){const E=e.codePointAt(g);if(void 0===E)break;if(n[E]=!0,u&&m&&E<=65535){const T=D[e.charAt(g)];T&&(n[T.charCodeAt(0)]=!0)}}}updateFootprints(e,n){}updateReplacement(e,n){if(n.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=n.updateTime;const s=n.getReplacementRegionsForTile(e.toUnwrapped(),!0);return!Ma(this.activeReplacements,s)&&(this.activeReplacements=s,!0)}populate(e,n,s,u){const m=this.layers[0],g=m.layout,E="globe"===this.projection.name,T=g.get("text-font"),z=g.get("text-field"),$=g.get("icon-image"),W=("constant"!==z.value.kind||z.value.value instanceof Ta&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&("constant"!==T.value.kind||T.value.value.length>0),Q="constant"!==$.value.kind||!!$.value.value||Object.keys($.parameters).length>0,le=g.get("symbol-sort-key");if(this.features=[],!W&&!Q)return;const de=n.iconDependencies,be=n.glyphDependencies,xe=n.availableImages,je=new ts(this.zoom);for(const{feature:gt,id:_t,index:bt,sourceLayerIndex:nn}of e){const Yt=m._featureFilter.needGeometry,Sn=L0(gt,Yt);if(!m._featureFilter.filter(je,Sn,s))continue;if(Yt||(Sn.geometry=o1(gt,s,u)),E&&1!==gt.type&&s.z<=5){const wi=Sn.geometry,Zi=.98078528056,Mo=(Gi,yo)=>{const Ri=$1(Gi.x,Gi.y,s,1),vo=$1(yo.x,yo.y,s,1);return l._.dot(Ri,vo)<Zi};for(let Gi=0;Gi<wi.length;Gi++)wi[Gi]=s0(wi[Gi],Mo)}let Rn,ai;if(W){const wi=m.getValueAndResolveTokens("text-field",Sn,s,xe),Zi=Ta.factory(wi);K(Zi)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Hr()||this.hasRTLText&&As.isParsed())&&(Rn=k(Zi,m,Sn))}if(Q){const wi=m.getValueAndResolveTokens("icon-image",Sn,s,xe);ai=wi instanceof hc?wi:hc.fromString(wi)}if(!Rn&&!ai)continue;const Di=this.sortFeaturesByKey?le.evaluate(Sn,{},s):void 0;if(this.features.push({id:_t,text:Rn,icon:ai,index:bt,sourceLayerIndex:nn,geometry:Sn.geometry,properties:gt.properties,type:G4[gt.type],sortKey:Di}),ai&&(de[ai.namePrimary]=!0,ai.nameSecondary&&(de[ai.nameSecondary]=!0)),Rn){const wi=T.evaluate(Sn,{},s).join(","),Zi="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(xi.vertical)>=0;for(const Mo of Rn.sections)if(Mo.image)de[Mo.image.namePrimary]=!0;else{const Gi=_i(Rn.toString()),yo=Mo.fontStack||wi,Ri=be[yo]=be[yo]||{};this.calculateGlyphDependencies(Mo.text,Ri,Zi,this.allowVerticalPlacement,Gi)}}}"line"===g.get("symbol-placement")&&(this.features=function(gt){const _t={},bt={},nn=[];let Yt=0;function Sn(wi){nn.push(gt[wi]),Yt++}function Rn(wi,Zi,Mo){const Gi=bt[wi];return delete bt[wi],bt[Zi]=Gi,nn[Gi].geometry[0].pop(),nn[Gi].geometry[0]=nn[Gi].geometry[0].concat(Mo[0]),Gi}function ai(wi,Zi,Mo){const Gi=_t[Zi];return delete _t[Zi],_t[wi]=Gi,nn[Gi].geometry[0].shift(),nn[Gi].geometry[0]=Mo[0].concat(nn[Gi].geometry[0]),Gi}function Di(wi,Zi,Mo){const Gi=Mo?Zi[0][Zi[0].length-1]:Zi[0][0];return`${wi}:${Gi.x}:${Gi.y}`}for(let wi=0;wi<gt.length;wi++){const Zi=gt[wi],Mo=Zi.geometry,Gi=Zi.text?Zi.text.toString():null;if(!Gi){Sn(wi);continue}const yo=Di(Gi,Mo),Ri=Di(Gi,Mo,!0);if(yo in bt&&Ri in _t&&bt[yo]!==_t[Ri]){const vo=ai(yo,Ri,Mo),Oo=Rn(yo,Ri,nn[vo].geometry);delete _t[yo],delete bt[Ri],bt[Di(Gi,nn[Oo].geometry,!0)]=Oo,nn[vo].geometry=null}else yo in bt?Rn(yo,Ri,Mo):Ri in _t?ai(yo,Ri,Mo):(Sn(wi),_t[yo]=Yt-1,bt[Ri]=Yt-1)}return nn.filter(wi=>wi.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((gt,_t)=>gt.sortKey-_t.sortKey)}update(e,n,s,u,m){const g=0!==Object.keys(e).length;if(g&&!this.stateDependentLayers.length)return;const E=g?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(e,n,E,s,u,m),this.icon.programConfigurations.updatePaintArrays(e,n,E,s,u,m)}updateOcclusionOpacities(e,n,s){if(!n.useOcclusionQueries)return!1;const u=this;if("globe"===u.projection.name)return!1;let m=!1;u.hasTextData()&&(m=m||0!==u.text.occlusionQueryOpacityVertexArray.length),u.hasIconData()&&(m=m||0!==u.icon.occlusionQueryOpacityVertexArray.length);const g=u.layers[0].paint,E=g.get("icon-occlusion-opacity").constantOr(0),T=g.get("text-occlusion-opacity").constantOr(0);if(!u.layers[0].hasInitialOcclusionOpacityProperties||1===E&&1===T)return!1;let z=!m;for(let le=0;le<u.symbolInstances.length;le++){const de=u.symbolInstances.get(le),be=de.occlusionOpacity;de.occlusionOpacity+=(de.occlusionState>.5?1:-1)*n.fadeSpeed*s*.001,de.occlusionOpacity=On(de.occlusionOpacity,0,1),z=z||de.occlusionOpacity!==be}if(!z)return!1;let $=0,W=0;const Q=(le,de,be,xe)=>{let je=0,gt=0;be?(je=W,W+=xe,gt=W):(je=$,$+=xe,gt=$),gt>de.occlusionQueryOpacityVertexArray.length&&de.occlusionQueryOpacityVertexArray.resize(gt);const _t=le.occlusionOpacity;for(let bt=0;bt<xe;bt++)de.occlusionQueryOpacityVertexArray.emplace(bt+je,_t)};for(let le=0;le<u.symbolInstances.length;le++){const de=u.symbolInstances.get(le),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:xe,numIconVertices:je}=de,gt=je>0;if((be>0||xe>0)&&(Q(de,u.text,!1,be),Q(de,u.text,!1,xe)),gt){const{placedIconSymbolIndex:_t,verticalPlacedIconSymbolIndex:bt}=de;_t>=0&&Q(de,u.icon,!0,je),bt>=0&&Q(de,u.icon,!0,de.numVerticalIconVertices)}}return u.hasTextData()&&u.text.occlusionQueryOpacityVertexBuffer&&(u.text.occlusionQueryOpacityVertexBuffer.length<u.text.occlusionQueryOpacityVertexArray.length?u.text.occlusionQueryOpacityVertexBuffer=e.createVertexBuffer(u.text.occlusionQueryOpacityVertexArray,sh.members,!0):u.text.occlusionQueryOpacityVertexBuffer.updateData(u.text.occlusionQueryOpacityVertexArray)),u.hasIconData()&&u.icon.occlusionQueryOpacityVertexBuffer&&(u.icon.occlusionQueryOpacityVertexBuffer.length<u.icon.occlusionQueryOpacityVertexArray.length?u.icon.occlusionQueryOpacityVertexBuffer=e.createVertexBuffer(u.icon.occlusionQueryOpacityVertexArray,sh.members,!0):u.icon.occlusionQueryOpacityVertexBuffer.updateData(u.icon.occlusionQueryOpacityVertexArray)),!0}updateZOffset(){const e=(m,g,E)=>{s+=g,s>m.length&&m.resize(s);for(let T=-g;T<0;T++)m.emplace(T+s,E)},n=(m,g,E)=>{u+=g,u>m.length&&m.resize(u);for(let T=-g;T<0;T++)m.emplace(T+u,E)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let s=0,u=0;for(let m=0;m<this.symbolInstances.length;m++){const g=this.symbolInstances.get(m),{numHorizontalGlyphVertices:E,numVerticalGlyphVertices:T,numIconVertices:z}=g,$=g.zOffset,W=z>0;if((E>0||T>0)&&(e(this.text.zOffsetVertexArray,E,$),e(this.text.zOffsetVertexArray,T,$)),W){const{placedIconSymbolIndex:Q,verticalPlacedIconSymbolIndex:le}=g;Q>=0&&n(this.icon.zOffsetVertexArray,z,$),le>=0&&n(this.icon.zOffsetVertexArray,g.numVerticalIconVertices,$)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=y4(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData();for(const e of this.queries.values())e.destroy()}addToLineVertexArray(e,n){const s=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:u,y:m}of n)this.lineVertexArray.emplaceBack(u,m);return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(e,n,s,u,m,g,E,T,z,$,W,Q,le,de,be,xe){const je=e.indexArray,gt=e.layoutVertexArray,_t=e.globeExtVertexArray,bt=e.segments.prepareSegment(4*n.length,gt,je,this.canOverlap?g.sortKey:void 0),nn=this.glyphOffsetArray.length,Yt=bt.vertexLength,Sn=this.allowVerticalPlacement&&E===xi.vertical?Math.PI/2:0,Rn=g.text&&g.text.sections;for(let Di=0;Di<n.length;Di++){const{tl:wi,tr:Zi,bl:Mo,br:Gi,texPrimary:yo,texSecondary:Ri,pixelOffsetTL:vo,pixelOffsetBR:Oo,minFontScaleX:Co,minFontScaleY:ar,glyphOffset:Ao,isSDF:jo,sectionIndex:Jr}=n[Di],Fr=bt.vertexLength,Lr=Ao[1];if(V0(gt,z.x,z.y,wi.x,Lr+wi.y,yo.x,yo.y,s,jo,vo.x,vo.y,Co,ar),V0(gt,z.x,z.y,Zi.x,Lr+Zi.y,yo.x+yo.w,yo.y,s,jo,Oo.x,vo.y,Co,ar),V0(gt,z.x,z.y,Mo.x,Lr+Mo.y,yo.x,yo.y+yo.h,s,jo,vo.x,Oo.y,Co,ar),V0(gt,z.x,z.y,Gi.x,Lr+Gi.y,yo.x+yo.w,yo.y+yo.h,s,jo,Oo.x,Oo.y,Co,ar),T){const{x:No,y:ns,z:Ys}=T.anchor,[Ss,ha,ra]=T.up;Jg(_t,No,ns,Ys,Ss,ha,ra),Jg(_t,No,ns,Ys,Ss,ha,ra),Jg(_t,No,ns,Ys,Ss,ha,ra),Jg(_t,No,ns,Ys,Ss,ha,ra),v2(e.dynamicLayoutVertexArray,No,ns,Ys,Sn)}else v2(e.dynamicLayoutVertexArray,z.x,z.y,z.z,Sn);if(xe){const No=Ri||yo;Qg(e.iconTransitioningVertexArray,No.x,No.y),Qg(e.iconTransitioningVertexArray,No.x+No.w,No.y),Qg(e.iconTransitioningVertexArray,No.x,No.y+No.h),Qg(e.iconTransitioningVertexArray,No.x+No.w,No.y+No.h)}je.emplaceBack(Fr,Fr+1,Fr+2),je.emplaceBack(Fr+1,Fr+2,Fr+3),bt.vertexLength+=4,bt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ao[0]),Di!==n.length-1&&Jr===n[Di+1].sectionIndex||e.programConfigurations.populatePaintArrays(gt.length,g,g.index,{},le,de,be,Rn&&Rn[Jr])}const ai=T?T.anchor:z;e.placedSymbolArray.emplaceBack(ai.x,ai.y,ai.z,z.x,z.y,nn,this.glyphOffsetArray.length-nn,Yt,$,W,z.segment,s?s[0]:0,s?s[1]:0,u[0],u[1],E,0,!1,0,Q,0)}_commitLayoutVertex(e,n,s,u,m,g,E){e.emplaceBack(n,s,u,m,g,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(e,n,s,u,m,g,E){const T=s.segments.prepareSegment(4,s.layoutVertexArray,s.indexArray),z=T.vertexLength,$=E.tileAnchorX,W=E.tileAnchorY;for(let le=0;le<4;le++)s.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(s.collisionVertexArrayExt,n,e.padding,E.zOffset),this._commitLayoutVertex(s.layoutVertexArray,u,m,g,$,W,new Io(e.x1,e.y1)),this._commitLayoutVertex(s.layoutVertexArray,u,m,g,$,W,new Io(e.x2,e.y1)),this._commitLayoutVertex(s.layoutVertexArray,u,m,g,$,W,new Io(e.x2,e.y2)),this._commitLayoutVertex(s.layoutVertexArray,u,m,g,$,W,new Io(e.x1,e.y2)),T.vertexLength+=4;const Q=s.indexArray;Q.emplaceBack(z,z+1),Q.emplaceBack(z+1,z+2),Q.emplaceBack(z+2,z+3),Q.emplaceBack(z+3,z),T.primitiveLength+=4}_addTextDebugCollisionBoxes(e,n,s,u,m,g){for(let E=u;E<m;E++){const T=s.get(E),z=this.getSymbolInstanceTextSize(e,g,n,E);this._addCollisionDebugVertices(T,z,this.textCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,g)}}_addIconDebugCollisionBoxes(e,n,s,u,m,g){for(let E=u;E<m;E++){const T=s.get(E),z=this.getSymbolInstanceIconSize(e,n,g.placedIconSymbolIndex);this._addCollisionDebugVertices(T,z,this.iconCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,g)}}generateCollisionDebugBuffers(e,n){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ut(Vf,cg.members,Vh),this.iconCollisionBox=new ut(Vf,cg.members,Vh);const s=B(this.iconSizeData,e),u=B(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const g=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(u,e,n,g.textBoxStartIndex,g.textBoxEndIndex,g),this._addTextDebugCollisionBoxes(u,e,n,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._addIconDebugCollisionBoxes(s,e,n,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._addIconDebugCollisionBoxes(s,e,n,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}}getSymbolInstanceTextSize(e,n,s,u){const m=this.text.placedSymbolArray.get(n.rightJustifiedTextSymbolIndex>=0?n.rightJustifiedTextSymbolIndex:n.centerJustifiedTextSymbolIndex>=0?n.centerJustifiedTextSymbolIndex:n.leftJustifiedTextSymbolIndex>=0?n.leftJustifiedTextSymbolIndex:n.verticalPlacedTextSymbolIndex>=0?n.verticalPlacedTextSymbolIndex:u),g=Lm(this.textSizeData,e,m)/xu;return this.tilePixelRatio*g}getSymbolInstanceIconSize(e,n,s){const u=this.icon.placedSymbolArray.get(s),m=Lm(this.iconSizeData,e,u);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(e,n,s,u){e.emplaceBack(n,-s,-s,u),e.emplaceBack(n,s,-s,u),e.emplaceBack(n,s,s,u),e.emplaceBack(n,-s,s,u)}_updateTextDebugCollisionBoxes(e,n,s,u,m,g){for(let E=u;E<m;E++){const T=s.get(E),z=this.getSymbolInstanceTextSize(e,g,n,E);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,z,T.padding,g.zOffset)}}_updateIconDebugCollisionBoxes(e,n,s,u,m,g){for(let E=u;E<m;E++){const T=s.get(E),z=this.getSymbolInstanceIconSize(e,n,g.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,z,T.padding,g.zOffset)}}updateCollisionDebugBuffers(e,n){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const s=B(this.iconSizeData,e),u=B(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const g=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(u,e,n,g.textBoxStartIndex,g.textBoxEndIndex,g),this._updateTextDebugCollisionBoxes(u,e,n,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._updateIconDebugCollisionBoxes(s,e,n,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._updateIconDebugCollisionBoxes(s,e,n,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,n,s,u,m,g,E,T,z){const $={};if(n<s){const{x1:W,y1:Q,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:je,projectedAnchorZ:gt,tileAnchorX:_t,tileAnchorY:bt,featureIndex:nn}=e.get(n);$.textBox={x1:W,y1:Q,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:je,projectedAnchorZ:gt,tileAnchorX:_t,tileAnchorY:bt},$.textFeatureIndex=nn}if(u<m){const{x1:W,y1:Q,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:je,projectedAnchorZ:gt,tileAnchorX:_t,tileAnchorY:bt,featureIndex:nn}=e.get(u);$.verticalTextBox={x1:W,y1:Q,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:je,projectedAnchorZ:gt,tileAnchorX:_t,tileAnchorY:bt},$.verticalTextFeatureIndex=nn}if(g<E){const{x1:W,y1:Q,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:je,projectedAnchorZ:gt,tileAnchorX:_t,tileAnchorY:bt,featureIndex:nn}=e.get(g);$.iconBox={x1:W,y1:Q,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:je,projectedAnchorZ:gt,tileAnchorX:_t,tileAnchorY:bt},$.iconFeatureIndex=nn}if(T<z){const{x1:W,y1:Q,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:je,projectedAnchorZ:gt,tileAnchorX:_t,tileAnchorY:bt,featureIndex:nn}=e.get(T);$.verticalIconBox={x1:W,y1:Q,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:je,projectedAnchorZ:gt,tileAnchorX:_t,tileAnchorY:bt},$.verticalIconFeatureIndex=nn}return $}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(e,n){const s=e.placedSymbolArray.get(n),u=s.vertexStartIndex+4*s.numGlyphs;for(let m=s.vertexStartIndex;m<u;m+=4)e.indexArray.emplaceBack(m,m+1,m+2),e.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const n=Math.sin(e),s=Math.cos(e),u=[],m=[],g=[];for(let E=0;E<this.symbolInstances.length;++E){g.push(E);const T=this.symbolInstances.get(E);u.push(0|Math.round(n*T.tileAnchorX+s*T.tileAnchorY)),m.push(T.featureIndex)}return g.sort((E,T)=>u[E]-u[T]||m[T]-m[E]),g}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let e=0;e<this.symbolInstances.length;++e)this.symbolInstanceIndexesSortedZOffset.push(e)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((e,n)=>this.symbolInstances.get(n).zOffset-this.symbolInstances.get(e).zOffset)}addToSortKeyRanges(e,n){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===n?s.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const s=this.symbolInstances.get(n);this.featureSortOrder.push(s.featureIndex);const{rightJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:g,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:T,verticalPlacedIconSymbolIndex:z}=s;u>=0&&this.addIndicesForPlacedSymbol(this.text,u),m>=0&&m!==u&&this.addIndicesForPlacedSymbol(this.text,m),g>=0&&g!==m&&g!==u&&this.addIndicesForPlacedSymbol(this.text,g),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T),z>=0&&this.addIndicesForPlacedSymbol(this.icon,z)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}at(an,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),an.addDynamicAttributes=v2;class $i{constructor(e,n,s,u){this.context=e,this.format=s,this.texture=e.gl.createTexture(),this.update(n,u)}update(e,n,s){const{width:u,height:m}=e,{context:g}=this,{gl:E}=g;if(E.bindTexture(E.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!n||!1!==n.premultiply)),this.useMipmap=!(!n||!n.useMipmap),s||this.size&&this.size[0]===u&&this.size[1]===m){const{x:T,y:z}=s||{x:0,y:0};if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap)E.texSubImage2D(E.TEXTURE_2D,0,T,z,E.RGBA,E.UNSIGNED_BYTE,e);else{let $=this.format,W=E.UNSIGNED_BYTE;this.format===E.R32F&&($=E.RED,W=E.FLOAT),E.texSubImage2D(E.TEXTURE_2D,0,T,z,u,m,$,W,e.data)}}else if(this.size=[u,m],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap){let T=this.format;this.format===E.R8&&(T=E.RED),E.texImage2D(E.TEXTURE_2D,0,this.format,T,E.UNSIGNED_BYTE,e)}else{let T=this.format,z=this.format,$=E.UNSIGNED_BYTE,W=!1;this.format===E.DEPTH_COMPONENT&&(T=E.DEPTH_COMPONENT16,$=E.UNSIGNED_SHORT),this.format===E.DEPTH_STENCIL&&(T=E.DEPTH24_STENCIL8,$=E.UNSIGNED_INT_24_8,W=!0),this.format===E.R8&&(z=E.RED),this.format===E.R32F&&($=E.FLOAT,z=E.RED),!this.useMipmap&&W?E.texStorage2D(E.TEXTURE_2D,1,T,u,m):E.texImage2D(E.TEXTURE_2D,0,T,u,m,0,z,$,e.data)}this.useMipmap&&E.generateMipmap(E.TEXTURE_2D)}bind(e,n,s=!1){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),e!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,e),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!s?e===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),n!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,n),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,n),this.wrapS=n)}bindExtraParam(e,n,s,u){const{context:m}=this,{gl:g}=m;g.bindTexture(g.TEXTURE_2D,this.texture),n!==this.magFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,n),this.magFilter=n),e!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?e===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),s!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,s),this.wrapS=s),u!==this.wrapT&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrapT=u)}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Do{constructor(e,n){this.context=e,this.texture=n}bind(e,n){const{context:s}=this,{gl:u}=s;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.minFilter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,e),this.minFilter=e),n!==this.wrapS&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,n),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,n),this.wrapS=n)}}const nd=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,n=0,s=0,u=0,m=0,g=0,E=0;for(1&e?u=m=g=32:n=s=E=32;(e>>=1)>1;){const z=n+u>>1,$=s+m>>1;1&e?(u=n,m=s,n=g,s=E):(n=u,s=m,u=g,m=E),g=z,E=$}const T=4*t;nd[T+0]=n,nd[T+1]=s,nd[T+2]=u,nd[T+3]=m}const tl=new Uint16Array(2178),id=new Uint8Array(1089),Hd=new Uint16Array(1089);function nm(t){return 0===t?-.03125:32===t?.03125:0}var Uh=va([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),im=va([{name:"a_index",type:"Int16",components:1}]);const om={type:2,extent:Z,loadGeometry:()=>[[new Io(0,0),new Io(Z+1,0),new Io(Z+1,Z+1),new Io(0,Z+1),new Io(0,0)]]};class Pv{constructor(e,n,s,u,m){this.tileID=e,this.uid=hr(),this.uses=0,this.tileSize=n,this.tileZoom=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,u&&u.style&&(this._lastUpdatedBrightness=u.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const n=e+this.timeAdded;n<ki.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Ac(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,n,s){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,m){const g={};if(!m)return g;for(const E of u){const T=E.layerIds.map(z=>m.getLayer(z)).filter(Boolean);if(0!==T.length){E.layers=T,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(z=>T.filter($=>$.id===z)[0]));for(const z of T)g[z.fqid]=E}}return g}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const m=this.buckets[u];if(m instanceof an){if(this.hasSymbolBuckets=!0,!s)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const m=this.buckets[u];if(m instanceof an&&m.hasRTLText){this.hasRTLText=!0,As.isLoading()||As.isLoaded()||"deferred"!==Hr()||Za();break}}this.queryPadding=0;for(const u in this.buckets){const m=this.buckets[u],g=n.style.getOwnLayer(u);if(!g)continue;const E=g.queryRadius(m);this.queryPadding=Math.max(this.queryPadding,E)}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas),this._lastUpdatedBrightness=e.brightness}else this.collisionBoxArray=new zu}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.fqid]}upload(e){for(const u in this.buckets){const m=this.buckets[u];m.uploadPending()&&m.upload(e)}const n=e.gl,s=this.imageAtlas;if(s&&!s.uploaded){const u=!!Object.keys(s.patternPositions).length;this.imageAtlasTexture=new $i(e,s.image,n.RGBA,{useMipmap:u}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new $i(e,this.glyphAtlasImage,n.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new $i(e,this.lineAtlas.image,n.R8),this.lineAtlas.uploaded=!0)}prepare(e,n,s){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture,s),!n||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const u=n.style.getBrightness();(this._lastUpdatedBrightness||u)&&(this._lastUpdatedBrightness&&u&&Math.abs(this._lastUpdatedBrightness-u)<.001||(this._lastUpdatedBrightness=u,this.updateBuckets(void 0,n)))}queryRenderedFeatures(e,n,s,u,m,g,E,T){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:E,transform:g,params:m,tileTransform:this.tileTransform},e,n,s):{}}querySourceFeatures(e,n){const s=this.latestFeatureIndex;if(!s||!s.rawTileData)return;const u=s.loadVTLayers(),m=n?n.sourceLayer:"",g=u._geojsonTileLayer||u[m];if(!g)return;const E=Nc(n&&n.filter),{z:T,x:z,y:$}=this.tileID.canonical,W={z:T,x:z,y:$};for(let Q=0;Q<g.length;Q++){const le=g.feature(Q);if(E.needGeometry){const xe=L0(le,!0);if(!E.filter(new ts(this.tileID.overscaledZ),xe,this.tileID.canonical))continue}else if(!E.filter(new ts(this.tileID.overscaledZ),le))continue;const de=s.getId(le,m),be=new hg(le,T,z,$,de);be.tile=W,e.push(be)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}bucketsLoaded(){for(const e in this.buckets)if(this.buckets[e].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const s=Uu(e.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const s=Date.now();let u=!1;if(this.expirationTime>s)u=!1;else if(n)if(this.expirationTime<n)u=!0;else{const m=this.expirationTime-n;m?this.expirationTime=s+Math.max(m,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,n){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&n&&this.updateBuckets(e,n)}updateBuckets(e,n){if(!this.latestFeatureIndex)return;const s=this.latestFeatureIndex.loadVTLayers(),u=n.style.listImages(),m=n.style.getBrightness();for(const g in this.buckets){if(!n.style.hasLayer(g))continue;const E=this.buckets[g],T=E.layers[0].sourceLayer||"_geojsonTileLayer",z=s[T];let $={};if(e&&($=e[T],!z||!$||0===Object.keys($).length))continue;if(E.update($,z,u,this.imageAtlas&&this.imageAtlas.patternPositions||{},m),E instanceof W2||E instanceof y){const Q=n.style.getOwnSourceCache(E.layers[0].source);n._terrain&&n._terrain.enabled&&Q&&E.programConfigurations.needsUpload&&n._terrain._clearRenderCacheForTile(Q.id,this.tileID)}const W=n&&n.style&&n.style.getOwnLayer(g);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(E)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ki.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=ki.now()+e}setTexture(e,n){const s=n.context,u=s.gl;this.texture=this.texture||n.getTileTexture(e.width),this.texture&&this.texture instanceof $i?this.texture.update(e,{useMipmap:!0}):(this.texture=new $i(s,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE))}setDependencies(e,n){const s={};for(const u of n)s[u]=!0;this.dependencies[e]=s}hasDependency(e,n){for(const s of e){const u=this.dependencies[s];if(u)for(const m of n)if(u[m])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,n){if(!n||"mercator"===n.name||this._tileDebugBuffer)return;const s=o1(om,this.tileID.canonical,this.tileTransform)[0],u=new Xu,m=new tu;for(let g=0;g<s.length;g++){const{x:E,y:T}=s[g];u.emplaceBack(E,T),m.emplaceBack(g)}m.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(m),this._tileDebugBuffer=e.createVertexBuffer(u,Td.members),this._tileDebugSegments=al.simpleSegment(0,0,u.length,m.length)}_makeTileBoundsBuffers(e,n){if(this._tileBoundsBuffer||!n||"mercator"===n.name)return;const s=o1(om,this.tileID.canonical,this.tileTransform)[0];let u,m;if(this.isRaster){const g=function(E,T){const z=Ac(E,T),$=Math.pow(2,E.z);for(let xe=0;xe<33;xe++)for(let je=0;je<33;je++){const gt=bu((E.x+(je+nm(je))/32)/$),_t=Fc((E.y+(xe+nm(xe))/32)/$),bt=T.project(gt,_t),nn=33*xe+je;tl[2*nn+0]=Math.round((bt.x*z.scale-z.x)*Z),tl[2*nn+1]=Math.round((bt.y*z.scale-z.y)*Z)}id.fill(0),Hd.fill(0);for(let xe=2045;xe>=0;xe--){const je=4*xe,gt=nd[je+0],_t=nd[je+1],bt=nd[je+2],nn=nd[je+3],Yt=gt+bt>>1,Sn=_t+nn>>1,Rn=Yt+Sn-_t,ai=Sn+gt-Yt,Di=33*_t+gt,wi=33*nn+bt,Zi=33*Sn+Yt,Mo=Math.hypot((tl[2*Di+0]+tl[2*wi+0])/2-tl[2*Zi+0],(tl[2*Di+1]+tl[2*wi+1])/2-tl[2*Zi+1])>=16;id[Zi]=id[Zi]||(Mo?1:0),xe<1022&&(id[Zi]=id[Zi]||id[33*(_t+ai>>1)+(gt+Rn>>1)]||id[33*(nn+ai>>1)+(bt+Rn>>1)])}const W=new Fh,Q=new eu;let le=0;function de(xe,je){const gt=33*je+xe;return 0===Hd[gt]&&(W.emplaceBack(tl[2*gt+0],tl[2*gt+1],xe*Z/32,je*Z/32),Hd[gt]=++le),Hd[gt]-1}function be(xe,je,gt,_t,bt,nn){const Yt=xe+gt>>1,Sn=je+_t>>1;if(Math.abs(xe-bt)+Math.abs(je-nn)>1&&id[33*Sn+Yt])be(bt,nn,xe,je,Yt,Sn),be(gt,_t,bt,nn,Yt,Sn);else{const Rn=de(xe,je),ai=de(gt,_t),Di=de(bt,nn);Q.emplaceBack(Rn,ai,Di)}}return be(0,0,32,32,32,0),be(32,32,0,0,0,32),{vertices:W,indices:Q}}(this.tileID.canonical,n);u=g.vertices,m=g.indices}else{u=new Fh,m=new eu;for(const{x:E,y:T}of s)u.emplaceBack(E,T,0,0);const g=N0(u.int16,void 0,4);for(let E=0;E<g.length;E+=3)m.emplaceBack(g[E],g[E+1],g[E+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,Uh.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(m),this._tileBoundsSegments=al.simpleSegment(0,0,u.length,m.length)}_makeGlobeTileDebugBuffers(e,n){const s=n.projection;if(!s||"globe"!==s.name||n.freezeTileCoverage)return;const u=this.tileID.canonical,m=zp(_f(u,n)),g=rh(n.zoom);let E;g>0&&(E=l.ad.invert(new Float64Array(16),n.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,u,n,m,E,g),this._makeGlobeTileDebugTextBuffer(e,u,n,m,E,g)}_globePoint(e,n,s,u,m,g,E){let T=$1(e,n,s);if(g){const z=1<<s.z,$=r0(u.center.lng),W=$h(u.center.lat),Q=(s.x+.5)/z-$;let le=0;Q>.5?le=-1:Q<-.5&&(le=1);let de=(e/Z+s.x)/z+le,be=(n/Z+s.y)/z;de=(de-$)*u._pixelsPerMercatorPixel+$,be=(be-W)*u._pixelsPerMercatorPixel+W;const xe=[de*u.worldSize,be*u.worldSize,0];l._.transformMat4(xe,xe,g),T=Md(T,xe,E)}return l._.transformMat4(T,T,m)}_makeGlobeTileDebugBorderBuffer(e,n,s,u,m,g){const E=new Xu,T=new tu,z=new Ip,$=(Q,le,de,be,xe)=>{const je=(de-Q)/(xe-1),gt=(be-le)/(xe-1),_t=E.length;for(let bt=0;bt<xe;bt++){const nn=Q+bt*je,Yt=le+bt*gt;E.emplaceBack(nn,Yt);const Sn=this._globePoint(nn,Yt,n,s,u,m,g);z.emplaceBack(Sn[0],Sn[1],Sn[2]),T.emplaceBack(_t+bt)}},W=Z;$(0,0,W,0,16),$(W,0,W,W,16),$(W,W,0,W,16),$(0,W,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(T),this._tileDebugBuffer=e.createVertexBuffer(E,Td.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(z,Dp.members),this._tileDebugSegments=al.simpleSegment(0,0,E.length,T.length)}_makeGlobeTileDebugTextBuffer(e,n,s,u,m,g){const E=Z/4,T=new Xu,z=new eu,$=new Ip,W=25;z.reserve(32),T.reserve(W),$.reserve(W);const Q=(le,de)=>W*le+de;for(let le=0;le<W;le++){const de=le*E;for(let be=0;be<W;be++){const xe=be*E;T.emplaceBack(xe,de);const je=this._globePoint(xe,de,n,s,u,m,g);$.emplaceBack(je[0],je[1],je[2])}}for(let le=0;le<4;le++)for(let de=0;de<4;de++){const be=Q(le,de),xe=Q(le,de+1),je=Q(le+1,de),gt=Q(le+1,de+1);z.emplaceBack(be,xe,je),z.emplaceBack(je,xe,gt)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(z),this._tileDebugTextBuffer=e.createVertexBuffer(T,Td.members),this._globeTileDebugTextBuffer=e.createVertexBuffer($,Dp.members),this._tileDebugTextSegments=al.simpleSegment(0,0,W,32)}destroy(e=!1){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!e&&this.texture&&this.texture instanceof $i&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}function g5(t,e,n){var s,u;1===t?e.header_length=n.readFixed32():2===t?e.x=n.readVarint():3===t?e.y=n.readVarint():4===t?e.z=n.readVarint():5===t&&e.layers.push((s=n,u=n.readVarint()+n.pos,s.readFields(A8,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},u)))}function v5(t,e,n){var s,u;1===t?(e.delta_filter=(s=n,u=n.readVarint()+n.pos,s.readFields(Rv,{block_size:0},u)),e.filter="delta_filter"):2===t?(n.readVarint(),e.filter="zigzag_filter"):3===t?(n.readVarint(),e.filter="bitshuffle_filter"):4===t&&(n.readVarint(),e.filter="byteshuffle_filter")}function Rv(t,e,n){1===t&&(e.block_size=n.readVarint())}function a3(t,e,n){1===t?(n.readVarint(),e.codec="gzip_data"):2===t?(n.readVarint(),e.codec="jpeg_image"):3===t?(n.readVarint(),e.codec="webp_image"):4===t&&(n.readVarint(),e.codec="png_image")}function _5(t,e,n){var s,u;1===t?e.first_byte=n.readFixed64():2===t?e.last_byte=n.readFixed64():3===t?e.filters.push((s=n,u=n.readVarint()+n.pos,s.readFields(v5,{},u))):4===t?e.codec=function(s,u){return s.readFields(a3,{},u)}(n,n.readVarint()+n.pos):5===t?e.offset=n.readFloat():6===t?e.scale=n.readFloat():7===t&&e.bands.push(n.readString())}function A8(t,e,n){var s,u;1===t?e.version=n.readVarint():2===t?e.name=n.readString():3===t?e.units=n.readString():4===t?e.tilesize=n.readVarint():5===t?e.buffer=n.readVarint():6===t?e.pixel_format=n.readVarint():7===t&&e.data_index.push((s=n,u=n.readVarint()+n.pos,s.readFields(_5,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},u)))}function D8(t,e,n){if(2===t)s=n,u=n.readVarint()+n.pos,s.readFields(y5,e,u);else if(3===t)throw new Error("Not implemented");var s,u}function y5(t,e,n){if(1===t){let s=0;const u=n.readVarint()+n.pos;for(;n.pos<u;)e[s++]=n.readVarint()}}class b5{constructor(e=0,n=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=n}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const n=this.items[e];delete this.items[e],this.size--,null!==n.prev&&(n.prev.next=n.next),null!==n.next&&(n.next.prev=n.prev),this.first===n&&(this.first=n.next),this.last===n&&(this.last=n.prev)}return this}entries(e=this.keys()){return e.map(n=>[n,this.get(n)])}evict(e=!1){if(e||this.size>0){const n=this.first;delete this.items[n.key],0==--this.size?(this.first=null,this.last=null):(this.first=n.next,this.first.prev=null)}return this}expiresAt(e){let n;return this.has(e)&&(n=this.items[e].expiry),n}get(e){let n;if(this.has(e)){const s=this.items[e];this.ttl>0&&s.expiry<=Date.now()?this.delete(e):(n=s.value,this.set(e,n,!0))}return n}has(e){return e in this.items}keys(){const e=[];let n=this.first;for(;null!==n;)e.push(n.key),n=n.next;return e}set(e,n,s=!1,u=this.resetTtl){let m;if(s||this.has(e)){if(m=this.items[e],m.value=n,!1===s&&u&&(m.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==m){const g=this.last,E=m.next,T=m.prev;this.first===m&&(this.first=m.next),m.next=null,m.prev=this.last,g.next=m,null!==T&&(T.next=E),null!==E&&(E.prev=T)}}else this.max>0&&this.size===this.max&&this.evict(!0),m=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:n},1==++this.size?this.first=m:this.last.next=m;return this.last=m,this}values(e=this.keys()){return e.map(n=>this.get(n))}}function P8(t,e){if(4!==e.length)throw new Error(`Expected data of dimension 4 but got ${e.length}.`);let n=e[3];for(let s=2;s>=1;s--){const u=1===s?1:0,m=2===s?1:0;for(let g=0;g<e[0];g++){const E=e[1]*g;for(let T=u;T<e[1];T++){const z=e[2]*(T+E);for(let $=m;$<e[2];$++){const W=e[3]*($+z);for(let Q=0;Q<e[3];Q++){const le=W+Q;t[le]+=t[le-n]}}}}n*=e[s]}return t}function w5(t){for(let e=0,n=t.length;e<n;e++)t[e]=t[e]>>>1^-(1&t[e]);return t}function x5(t,e){switch(e){case"uint32":return t;case"uint16":for(let n=0;n<t.length;n+=2){const s=t[n],u=t[n+1];t[n]=(240&s)>>4|(61440&s)>>8|(240&u)<<4|61440&u,t[n+1]=15&s|(3840&s)>>4|(15&u)<<8|(3840&u)<<4}return t;case"uint8":for(let n=0;n<t.length;n+=4){const s=t[n],u=t[n+1],m=t[n+2],g=t[n+3];t[n+0]=(192&s)>>6|(192&u)>>4|(192&m)>>2|192&g,t[n+1]=(48&s)>>4|(48&u)>>2|48&m|(48&g)<<2,t[n+2]=(12&s)>>2|12&u|(12&m)<<2|(12&g)<<4,t[n+3]=3&s|(3&u)<<2|(3&m)<<4|(3&g)<<6}return t;default:throw new Error(`Invalid pixel format, "${e}"`)}}class _g extends Error{constructor(e){super(e),this.name="MRTError"}}var Jp=Uint8Array,w4=Uint16Array,l3=Int32Array,x4=new Jp([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zv=new Jp([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ov=new Jp([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c3=function(t,e){for(var n=new w4(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];var u=new l3(n[30]);for(s=1;s<30;++s)for(var m=n[s];m<n[s+1];++m)u[m]=m-n[s]<<5|s;return{b:n,r:u}},I4=c3(x4,2),u3=I4.b,I5=I4.r;u3[28]=258,I5[258]=28;for(var W4=c3(zv,0).b,Lv=new w4(32768),od=0;od<32768;++od){var e4=(43690&od)>>1|(21845&od)<<1;Lv[od]=((65280&(e4=(61680&(e4=(52428&e4)>>2|(13107&e4)<<2))>>4|(3855&e4)<<4))>>8|(255&e4)<<8)>>1}var E4=function(t,e,n){for(var s=t.length,u=0,m=new w4(e);u<s;++u)t[u]&&++m[t[u]-1];var g,E=new w4(e);for(u=1;u<e;++u)E[u]=E[u-1]+m[u-1]<<1;if(n){g=new w4(1<<e);var T=15-e;for(u=0;u<s;++u)if(t[u])for(var z=u<<4|t[u],$=e-t[u],W=E[t[u]-1]++<<$,Q=W|(1<<$)-1;W<=Q;++W)g[Lv[W]>>T]=z}else for(g=new w4(s),u=0;u<s;++u)t[u]&&(g[u]=Lv[E[t[u]-1]++]>>15-t[u]);return g},q4=new Jp(288);for(od=0;od<144;++od)q4[od]=8;for(od=144;od<256;++od)q4[od]=9;for(od=256;od<280;++od)q4[od]=7;for(od=280;od<288;++od)q4[od]=8;var h6=new Jp(32);for(od=0;od<32;++od)h6[od]=5;var E5=E4(q4,9,1),X4=E4(h6,5,1),d3=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},_2=function(t,e,n){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(7&e)&n},h3=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},Bv=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zf=function(t,e,n){var s=new Error(e||Bv[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,zf),!n)throw s;return s},p6=new Jp(0),f6=typeof TextDecoder<"u"&&new TextDecoder;try{f6.decode(p6,{stream:!0})}catch{}const C5={gzip_data:"gzip"},m6={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},p3={uint32:1,uint16:2,uint8:4},Nv={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};class f3{constructor(e=1){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=e}getLayer(e){return this.layers[e]}getHeaderLength(e){const n=new Uint8Array(e),s=new DataView(e);if(13!==n[0])throw new _g("File is not a valid MRT.");return s.getUint32(1,!0)}parseHeader(e){const n=new Uint8Array(e),s=this.getHeaderLength(e);if(n.length<s)throw new _g(`Expected header with length >= ${s} but got buffer of length ${n.length}`);const u=new h2(n.subarray(0,s)).readFields(g5,{header_length:0,x:0,y:0,z:0,layers:[]},void 0);if(!isNaN(this.x)&&(this.x!==u.x||this.y!==u.y||this.z!==u.z))throw new _g(`Invalid attempt to parse header ${u.z}/${u.x}/${u.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=u.x,this.y=u.y,this.z=u.z;for(const m of u.layers)this.layers[m.name]=new k5(m,{cacheSize:this._cacheSize});return this}createDecodingTask(e){const n=[],s=this.getLayer(e.layerName);for(let u=0;u<s.dataIndex.length;u++){const m=s.dataIndex[u],g=m.first_byte-e.firstByte,E=m.last_byte+1-e.firstByte;if(u<e.firstBlock||u>e.lastBlock||s._blocksInProgress.has(u))continue;const T={layerName:s.name,firstByte:g,lastByte:E,pixelFormat:s.pixelFormat,blockIndex:u,blockShape:[m.bands.length].concat(s.bandShape),buffer:s.buffer,codec:m.codec.codec,filters:m.filters.map(z=>z.filter)};s._blocksInProgress.add(u),n.push(T)}return new g6(n,()=>{n.forEach(u=>s._blocksInProgress.delete(u.blockIndex))},(u,m)=>{if(n.forEach(g=>s._blocksInProgress.delete(g.blockIndex)),u)throw u;m.forEach(g=>{this.getLayer(g.layerName).processDecodedData(g)})})}}class k5{constructor({version:e,name:n,units:s,tilesize:u,pixel_format:m,buffer:g,data_index:E},T){if(this.version=e,1!==this.version)throw new _g(`Cannot parse raster layer encoded with MRT version ${e}`);this.name=n,this.units=s,this.tileSize=u,this.buffer=g,this.pixelFormat=m6[m],this.dataIndex=E,this.bandShape=[u+2*g,u+2*g,p3[this.pixelFormat]],this._decodedBlocks=function(z=1e3,$=0,W=!1){if(isNaN(z)||z<0)throw new TypeError("Invalid max value");if(isNaN($)||$<0)throw new TypeError("Invalid ttl value");if("boolean"!=typeof W)throw new TypeError("Invalid resetTtl value");return new b5(z,$,W)}(T?T.cacheSize:5),this._blocksInProgress=new Set}processDecodedData(e){const n=e.blockIndex.toString();this._decodedBlocks.get(n)||this._decodedBlocks.set(n,e.data)}getBlockForBand(e){let n=0;switch(typeof e){case"string":for(const[s,u]of this.dataIndex.entries()){for(const[m,g]of u.bands.entries())if(g===e)return{bandIndex:n+m,blockIndex:s,blockBandIndex:m};n+=u.bands.length}break;case"number":for(const[s,u]of this.dataIndex.entries()){if(e>=n&&e<n+u.bands.length)return{bandIndex:e,blockIndex:s,blockBandIndex:e-n};n+=u.bands.length}break;default:throw new _g(`Invalid band \`${JSON.stringify(e)}\`. Expected string or integer.`)}throw new _g(`Band not found: ${JSON.stringify(e)}`)}getDataRange(e){let n=1/0,s=-1/0,u=1/0,m=-1/0;for(const g of e){const{blockIndex:E}=this.getBlockForBand(g);if(E<0)throw new _g(`Invalid band: ${JSON.stringify(g)}`);const T=this.dataIndex[E];u=Math.min(u,E),m=Math.max(m,E),n=Math.min(n,T.first_byte),s=Math.max(s,T.last_byte)}return{layerName:this.name,firstByte:n,lastByte:s,firstBlock:u,lastBlock:m}}hasBand(e){const{blockIndex:n}=this.getBlockForBand(e);return n>=0}hasDataForBand(e){const{blockIndex:n}=this.getBlockForBand(e);return n>=0&&!!this._decodedBlocks.get(n.toString())}getBandView(e){const{blockIndex:n,blockBandIndex:s}=this.getBlockForBand(e),u=this._decodedBlocks.get(n.toString());if(!u)throw new _g(`Data for band ${JSON.stringify(e)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[n],g=this.bandShape.reduce((z,$)=>z*$,1),E=s*g,T=u.subarray(E,E+g);return{data:T,bytes:new Uint8Array(T.buffer).subarray(T.byteOffset,T.byteOffset+T.byteLength),tileSize:this.tileSize,buffer:this.buffer,offset:m.offset,scale:m.scale}}}class g6{constructor(e,n,s){this.tasks=e,this._onCancel=n,this._onComplete=s,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(e,n){this._finalized||(this._onComplete(e,n),this._finalized=!0)}}f3.performDecoding=function(t,e){return Promise.all(e.tasks.map(n=>{const{layerName:s,firstByte:u,lastByte:m,pixelFormat:g,blockShape:E,blockIndex:T,filters:z,codec:$}=n,W=new Uint8Array(t).subarray(u,m+1),Q=new Uint32Array(E[0]*E[1]*E[2]);let le;if("gzip_data"!==$)throw new Error(`Unhandled codec: ${$}`);return le=function(de,be){if(!globalThis.DecompressionStream&&"gzip_data"===be)return Promise.resolve(((_t=function(Yt){31==Yt[0]&&139==Yt[1]&&8==Yt[2]||zf(6,"invalid gzip data");var Sn=Yt[3],Rn=10;4&Sn&&(Rn+=2+(Yt[10]|Yt[11]<<8));for(var ai=(Sn>>3&1)+(Sn>>4&1);ai>0;ai-=!Yt[Rn++]);return Rn+(2&Sn)}(gt=de))+8>gt.length&&zf(6,"invalid gzip data"),function(Yt,Sn,Rn,ai){var Di=Yt.length;if(!Di||Sn.f&&!Sn.l)return Rn||new Jp(0);var wi=!Rn,Zi=wi||2!=Sn.i,Mo=Sn.i;wi&&(Rn=new Jp(3*Di));var Gi,yo,Ri=function(Um){var Eg=Rn.length;if(Um>Eg){var z4=new Jp(Math.max(2*Eg,Um));z4.set(Rn),Rn=z4}},vo=Sn.f||0,Oo=Sn.p||0,Co=Sn.b||0,ar=Sn.l,Ao=Sn.d,jo=Sn.m,Jr=Sn.n,Fr=8*Di;do{if(!ar){vo=_2(Yt,Oo,1);var Lr=_2(Yt,Oo+1,3);if(Oo+=3,!Lr){var No=Yt[(Ba=4+((Oo+7)/8|0))-4]|Yt[Ba-3]<<8,ns=Ba+No;if(ns>Di){Mo&&zf(0);break}Zi&&Ri(Co+No),Rn.set(Yt.subarray(Ba,ns),Co),Sn.b=Co+=No,Sn.p=Oo=8*ns,Sn.f=vo;continue}if(1==Lr)ar=E5,Ao=X4,jo=9,Jr=5;else if(2==Lr){var Ys=_2(Yt,Oo,31)+257,Ss=_2(Yt,Oo+10,15)+4,ha=Ys+_2(Yt,Oo+5,31)+1;Oo+=14;for(var ra=new Jp(ha),ba=new Jp(19),ys=0;ys<Ss;++ys)ba[Ov[ys]]=_2(Yt,Oo+3*ys,7);Oo+=3*Ss;var Hl=d3(ba),zl=(1<<Hl)-1,Qa=E4(ba,Hl,1);for(ys=0;ys<ha;){var Ba,Ua=Qa[_2(Yt,Oo,zl)];if(Oo+=15&Ua,(Ba=Ua>>4)<16)ra[ys++]=Ba;else{var rc=0,sc=0;for(16==Ba?(sc=3+_2(Yt,Oo,3),Oo+=2,rc=ra[ys-1]):17==Ba?(sc=3+_2(Yt,Oo,7),Oo+=3):18==Ba&&(sc=11+_2(Yt,Oo,127),Oo+=7);sc--;)ra[ys++]=rc}}var Iu=ra.subarray(0,Ys),ou=ra.subarray(Ys);jo=d3(Iu),Jr=d3(ou),ar=E4(Iu,jo,1),Ao=E4(ou,Jr,1)}else zf(1);if(Oo>Fr){Mo&&zf(0);break}}Zi&&Ri(Co+131072);for(var s1=(1<<jo)-1,rd=(1<<Jr)-1,Xc=Oo;;Xc=Oo){var Gd=(rc=ar[h3(Yt,Oo)&s1])>>4;if((Oo+=15&rc)>Fr){Mo&&zf(0);break}if(rc||zf(2),Gd<256)Rn[Co++]=Gd;else{if(256==Gd){Xc=Oo,ar=null;break}var m0=Gd-254;Gd>264&&(m0=_2(Yt,Oo,(1<<(wh=x4[ys=Gd-257]))-1)+u3[ys],Oo+=wh);var g0=Ao[h3(Yt,Oo)&rd],ac=g0>>4;if(g0||zf(3),Oo+=15&g0,ou=W4[ac],ac>3){var wh=zv[ac];ou+=h3(Yt,Oo)&(1<<wh)-1,Oo+=wh}if(Oo>Fr){Mo&&zf(0);break}Zi&&Ri(Co+131072);var ef=Co+m0;if(Co<ou){var Of=0-ou,am=Math.min(ou,ef);for(Of+Co<0&&zf(3);Co<am;++Co)Rn[Co]=(void 0)[Of+Co]}for(;Co<ef;++Co)Rn[Co]=Rn[Co-ou]}}Sn.l=ar,Sn.p=Xc,Sn.b=Co,Sn.f=vo,ar&&(vo=1,Sn.m=jo,Sn.d=Ao,Sn.n=Jr)}while(!vo);return Co!=Rn.length&&wi?(Gi=Rn,(null==(yo=Co)||yo>Gi.length)&&(yo=Gi.length),new Jp(Gi.subarray(0,yo))):Rn.subarray(0,Co)}(gt.subarray(_t,-8),{i:2},new Jp(((xe=gt)[(je=xe.length)-4]|xe[je-3]<<8|xe[je-2]<<16|xe[je-1]<<24)>>>0))));var xe,je,gt,_t;const bt=C5[be];if(!bt)throw new Error(`Unhandled codec: ${be}`);const nn=new globalThis.DecompressionStream(bt);return new Response(new Blob([de]).stream().pipeThrough(nn)).arrayBuffer().then(Yt=>new Uint8Array(Yt))}(W,$).then(de=>(new h2(de).readFields(D8,Q),new Nv[g](Q.buffer))),le.then(de=>{for(let be=z.length-1;be>=0;be--)switch(z[be]){case"delta_filter":P8(de,E);break;case"zigzag_filter":w5(de);break;case"bitshuffle_filter":x5(de,g);break;default:throw new Error(`Unhandled filter "${z[be]}"`)}return{layerName:s,blockIndex:T,data:de}}).catch(de=>{throw de})}))};class v6 extends Pv{constructor(e,n,s,u,m){super(e,n,s,u,m),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(e,n){const s=n.context,u=s.gl;this.texture=this.texture||n.getTileTexture(e.width),this.texture&&this.texture instanceof $i?this.texture.update(e,{useMipmap:!1,premultiply:!1}):this.texture=new $i(s,e,u.RGBA,{useMipmap:!1,premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(e=16384,n){const s=this._mrt=new f3(30),u=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(e-1)}});return this.entireBuffer=null,this.request=Tr(u,(m,g,E,T)=>{if(m)n(m);else try{const z=s.getHeaderLength(g);if(z>e)return void(this.request=this.fetchHeader(z,n));s.parseHeader(g),this._isHeaderLoaded=!0;let $=0;for(const W of Object.values(s.layers))$=Math.max($,W.dataIndex[W.dataIndex.length-1].last_byte);g.byteLength>=$&&(this.entireBuffer=g),n(null,this.entireBuffer||g,E,T)}catch(z){n(z)}}),this.request}fetchBand(e,n,s){const u=this._mrt;if(!this._isHeaderLoaded||!u)return void s(new Error("Tile header is not ready"));const m=this.actor;if(!m)return void s(new Error("Can't fetch tile band without an actor"));let g;const E=(W,Q)=>{g.complete(W,Q),W?s(W):(this.updateTextureDescriptor(e,n),s(null,this.textureDescriptor&&this.textureDescriptor.img))},T=(W,Q)=>{if(W)return s(W);const le=m.send("decodeRasterArray",{buffer:Q,task:g},E,void 0,!0);this._workQueue.push(()=>{le&&le.cancel(),g.cancel()})},z=u.getLayer(e);if(!z)return void s(new Error(`Unknown sourceLayer "${e}"`));if(z.hasDataForBand(n))return this.updateTextureDescriptor(e,n),void s(null,this.textureDescriptor?this.textureDescriptor.img:null);const $=z.getDataRange([n]);if(g=u.createDecodingTask($),!g||g.tasks.length)if(this.flushQueues(),this.entireBuffer)T(null,this.entireBuffer.slice($.firstByte,$.lastByte+1));else{const W=Object.assign({},this.requestParams,{headers:{Range:`bytes=${$.firstByte}-${$.lastByte}`}}),Q=Tr(W,T);this._fetchQueue.push(()=>{Q.cancel(),g.cancel()})}else s(null)}updateNeeded(e,n){return(!this.textureDescriptor||this.textureDescriptor.band!==n||this.textureDescriptor.layer!==e)&&"errored"!==this.state}updateTextureDescriptor(e,n){if(!this._mrt)return;const s=this._mrt.getLayer(e);if(!s||!s.hasBand(n)||!s.hasDataForBand(n))return;const{bytes:u,tileSize:m,buffer:g,offset:E,scale:T}=s.getBandView(n),z=m+2*g,$={data:u,width:z,height:z},W=this.texture;W&&W instanceof $i&&W.update($,{useMipmap:!1,premultiply:!1}),this.textureDescriptor={layer:e,band:n,img:$,buffer:g,offset:E,tileSize:m,format:s.pixelFormat,mix:[T,256*T,65536*T,16777216*T]}}}class S5{constructor(e,n){this.max=e,this.onRemove=n,this.reset()}reset(){for(const e in this.data)for(const n of this.data[e])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(e,n,s){const u=e.wrapped().key;void 0===this.data[u]&&(this.data[u]=[]);const m={value:n,timeout:void 0};if(void 0!==s&&(m.timeout=setTimeout(()=>{this.remove(e,m)},s)),this.data[u].push(m),this.order.push(u),this.order.length>this.max){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const n=this.data[e].shift();return n.timeout&&clearTimeout(n.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),n.value}getByKey(e){const n=this.data[e];return n?n[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,n){if(!this.has(e))return this;const s=e.wrapped().key,u=void 0===n?0:this.data[s].indexOf(n),m=this.data[s][u];return this.data[s].splice(u,1),m.timeout&&clearTimeout(m.timeout),0===this.data[s].length&&delete this.data[s],this.onRemove(m.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this}filter(e){const n=[];for(const s in this.data)for(const u of this.data[s])e(u.value)||n.push(u);for(const s of n)this.remove(s.value.tileID,s)}}class t4 extends Bl{constructor(e,n,s){super(),this.id=e,this._onlySymbols=s,n.on("data",u=>{"source"===u.dataType&&"metadata"===u.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===u.dataType&&"content"===u.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),n.on("error",()=>{this._sourceErrored=!0}),this._source=n,this._tiles={},this._cache=new S5(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=n.minTileCacheSize,this._maxTileCacheSize=n.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new p2,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"raster-array"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const n=this._tiles[e];if("errored"!==n.state&&("loaded"!==n.state||!n.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,n){return e.isSymbolTile=this._onlySymbols,e.isExtraShadowCaster=this._shadowCasterTiles[e.tileID.key],this._source.loadTile(e,n)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e)}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e)}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const n in this._tiles){const s=this._tiles[n];s.upload(e),s.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return so(this._tiles).map(e=>e.tileID).sort(Fv).map(e=>e.key)}getRenderableIds(e,n){const s=[];for(const u in this._tiles)this._isIdRenderable(+u,e,n)&&s.push(this._tiles[u]);return e?s.sort((u,m)=>{const g=u.tileID,E=m.tileID,T=new Io(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),z=new Io(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-E.overscaledZ||z.y-T.y||z.x-T.x}).map(u=>u.tileID.key):s.map(u=>u.tileID).sort(Fv).map(u=>u.key)}hasRenderableParent(e){const n=this.findLoadedParent(e,0);return!!n&&this._isIdRenderable(n.tileID.key)}_isIdRenderable(e,n,s){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(n||!this._tiles[e].holdingForFade())&&(s||!this._shadowCasterTiles[e])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,n){const s=this._tiles[e];s&&("loading"!==s.state&&(s.state=n),this._loadTile(s,this._tileLoaded.bind(this,s,e,n)))}_tileLoaded(e,n,s,u){if(u)if(e.state="errored",404!==u.status)this._source.fire(new Ls(u,{tile:e}));else{if(!(e.tileID.key in this._loadedParentTiles))return void this._source.fire(new yc("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform)}else e.timeAdded=ki.now(),"expired"===s&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new yc("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const n=this.getRenderableIds();for(let u=0;u<n.length;u++){const m=n[u];if(e.neighboringTiles&&e.neighboringTiles[m]){const g=this.getTileByID(m);s(e,g),s(g,e)}}function s(u,m){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let g=m.tileID.canonical.x-u.tileID.canonical.x;const E=m.tileID.canonical.y-u.tileID.canonical.y,T=Math.pow(2,u.tileID.canonical.z),z=m.tileID.key;0===g&&0===E||Math.abs(E)>1||(Math.abs(g)>1&&(1===Math.abs(g+T)?g+=T:1===Math.abs(g-T)&&(g-=T)),m.dem&&u.dem&&(u.dem.backfillBorder(m.dem,g,E),u.neighboringTiles&&u.neighboringTiles[z]&&(u.neighboringTiles[z].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,n,s,u){for(const m in this._tiles){let g=this._tiles[m];if(u[m]||!g.hasData()||g.tileID.overscaledZ<=n||g.tileID.overscaledZ>s)continue;let E=g.tileID;for(;g&&g.tileID.overscaledZ>n+1;){const z=g.tileID.scaledTo(g.tileID.overscaledZ-1);g=this._tiles[z.key],g&&g.hasData()&&(E=z)}let T=E;for(;T.overscaledZ>n;)if(T=T.scaledTo(T.overscaledZ-1),e[T.key]){u[E.key]=E;break}}}findLoadedParent(e,n){if(e.key in this._loadedParentTiles){const s=this._loadedParentTiles[e.key];return s&&s.tileID.overscaledZ>=n?s:null}for(let s=e.overscaledZ-1;s>=n;s--){const u=e.scaledTo(s),m=this._getLoadedTile(u);if(m)return m}}_getLoadedTile(e){const n=this._tiles[e.key];return n&&n.hasData()?n:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,n){n=n||this._source.tileSize;const s=Math.ceil(e.width/n)+1,u=Math.ceil(e.height/n)+1,m=Math.floor(s*u*5),g="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,m):m,E="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(E)}handleWrapJump(e){const n=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,n){const s={};for(const u in this._tiles){const m=this._tiles[u];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+n),s[m.tileID.key]=m}this._tiles=s;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,n,s,u){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!s)return;let m;if(this.updateCacheSize(e,n),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain){if(this._source.tileID)m=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(T=>new Ec(T.canonical.z,T.wrap,T.canonical.z,T.canonical.x,T.canonical.y));else if(0!==this.tileCoverLift){const T=e.clone();T.tileCoverLift=this.tileCoverLift,m=T.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!s,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.minzoom<=1&&"globe"===e.projection.name&&(m.push(new Ec(1,0,1,0,0)),m.push(new Ec(1,0,1,1,0)),m.push(new Ec(1,0,1,0,1)),m.push(new Ec(1,0,1,1,1)))}else if(m=e.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!s,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile){const T=this._source.hasTile.bind(this._source);m=m.filter(z=>T(z))}}else m=[];if(m.length>0&&this.castsShadows&&u&&"globe"!==this.transform.projection.name&&!this.usedForTerrain&&!n4(this._source.type)){const T=e.coveringZoomLevel({tileSize:n||this._source.tileSize,roundZoom:this._source.roundZoom&&!s}),z=Math.min(T,this._source.maxzoom),$=e.extendTileCoverForShadows(m,u,z);for(const W of $)this._shadowCasterTiles[W.key]=!0,m.push(W)}const g=this._updateRetainedTiles(m);if(n4(this._source.type)&&0!==m.length){const T={},z={},$=Object.keys(g);for(const Q of $){const le=g[Q],de=this._tiles[Q];if(!de||de.fadeEndTime&&de.fadeEndTime<=ki.now())continue;const be=this.findLoadedParent(le,Math.max(le.overscaledZ-t4.maxOverzooming,this._source.minzoom));be&&(this._addTile(be.tileID),T[be.tileID.key]=be.tileID),z[Q]=le}const W=m[m.length-1].overscaledZ;for(const Q in this._tiles){const le=this._tiles[Q];if(g[Q]||!le.hasData())continue;let de=le.tileID;for(;de.overscaledZ>W;){de=de.scaledTo(de.overscaledZ-1);const be=this._tiles[de.key];if(be&&be.hasData()&&z[de.key]){g[Q]=le.tileID;break}}}for(const Q in T)g[Q]||(this._coveredTiles[Q]=!0,g[Q]=T[Q])}for(const T in g)this._tiles[T].clearFadeHold();const E=function(T,z){const $=[];for(const W in T)W in z||$.push(W);return $}(this._tiles,g);for(const T of E){const z=this._tiles[T];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(+T)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const n={};if(0===e.length)return n;const s={},u=e.reduce((z,$)=>Math.min(z,$.overscaledZ),1/0),m=e[0].overscaledZ,g=Math.max(m-t4.maxOverzooming,this._source.minzoom),E=Math.max(m+t4.maxUnderzooming,this._source.minzoom),T={};for(const z of e){const $=this._addTile(z);n[z.key]=z,$.hasData()||u<this._source.maxzoom&&(T[z.key]=z)}this._retainLoadedChildren(T,u,E,n);for(const z of e){let $=this._tiles[z.key];if($.hasData())continue;if(z.canonical.z>=this._source.maxzoom){const Q=z.children(this._source.maxzoom)[0],le=this.getTile(Q);if(le&&le.hasData()){n[Q.key]=Q;continue}}else{const Q=z.children(this._source.maxzoom);if(n[Q[0].key]&&n[Q[1].key]&&n[Q[2].key]&&n[Q[3].key])continue}let W=$.wasRequested();for(let Q=z.overscaledZ-1;Q>=g;--Q){const le=z.scaledTo(Q);if(s[le.key]||(s[le.key]=!0,$=this.getTile(le),!$&&W&&($=this._addTile(le)),$&&(n[le.key]=le,W=$.wasRequested(),$.hasData())))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const n=[];let s,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){s=this._loadedParentTiles[u.key];break}n.push(u.key);const m=u.scaledTo(u.overscaledZ-1);if(s=this._getLoadedTile(m),s)break;u=m}for(const m of n)this._loadedParentTiles[m]=s}}_addTile(e){let n=this._tiles[e.key];if(n)return!0!==n.isExtraShadowCaster||this._shadowCasterTiles[e.key]||this._reloadTile(e.key,"reloading"),n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const s=!!n;if(!s){const u=this.map?this.map.painter:null,m=this._source.tileSize*e.overscaleFactor();n="raster-array"===this._source.type?new v6(e,m,this.transform.tileZoom,u,this._isRaster):new Pv(e,m,this.transform.tileZoom,u,this._isRaster),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))}return n?(n.uses++,this._tiles[e.key]=n,s||this._source.fire(new yc("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null}_setTileReloadTimer(e,n){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const s=n.getExpiryTimeout();s&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},s))}_removeTile(e){const n=this._tiles[e];n&&(n.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),n.uses>0||(n.hasData()&&"reloading"!==n.state||"empty"===n.state?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,n,s){const u=[],m=this.transform;if(!m)return u;const g="globe"===m.projection.name,E=r0(m.center.lng);for(const T in this._tiles){const z=this._tiles[T];if(s&&z.clearQueryDebugViz(),z.holdingForFade())continue;let $;if(g){const W=z.tileID.canonical;if(0===W.z){const Q=[Math.abs(On(E,...C4(W,-1))-E),Math.abs(On(E,...C4(W,1))-E)];$=[0,2*Q.indexOf(Math.min(...Q))-1]}else{const Q=[Math.abs(On(E,...C4(W,-1))-E),Math.abs(On(E,...C4(W,0))-E),Math.abs(On(E,...C4(W,1))-E)];$=[Q.indexOf(Math.min(...Q))-1]}}else $=[0];for(const W of $){const Q=e.containsTile(z,m,n,W);Q&&u.push(Q)}}return u}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(e){return this._getRenderableCoordinates(e)}_getRenderableCoordinates(e,n){const s=this.getRenderableIds(e,n).map(m=>this._tiles[m].tileID),u="globe"===this.transform.projection.name;for(const m of s)m.projMatrix=this.transform.calculateProjMatrix(m.toUnwrapped()),m.expandedProjMatrix=u?this.transform.calculateProjMatrix(m.toUnwrapped(),!1,!0):m.projMatrix;return s}sortCoordinatesByDistance(e){const n=e.slice(),s=this.transform._camera.position,u=this.transform._camera.forward(),m={};for(const g of n){const E=1/(1<<g.canonical.z);m[g.key]=((g.canonical.x+.5)*E+g.wrap-s[0])*u[0]+((g.canonical.y+.5)*E-s[1])*u[1]-s[2]*u[2]}return n.sort((g,E)=>m[g.key]-m[E.key]),n}hasTransition(){if(this._source.hasTransition())return!0;if(n4(this._source.type))for(const e in this._tiles){const n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=ki.now())return!0}return!1}setFeatureState(e,n,s){this._state.updateState(e=e||"_geojsonTileLayer",n,s)}removeFeatureState(e,n,s){this._state.removeFeatureState(e=e||"_geojsonTileLayer",n,s)}getFeatureState(e,n){return this._state.getState(e=e||"_geojsonTileLayer",n)}setDependencies(e,n,s){const u=this._tiles[e];u&&u.setDependencies(n,s)}reloadTilesForDependencies(e,n){for(const s in this._tiles)this._tiles[s].hasDependency(e,n)&&this._reloadTile(+s,"reloading");this._cache.filter(s=>!s.hasDependency(e,n))}_preloadTiles(e,n){if(!this._sourceLoaded){const E=()=>{this._sourceLoaded&&(this._source.off("data",E),this._preloadTiles(e,n))};return void this._source.on("data",E)}const s=new Map,u=Array.isArray(e)?e:[e],m=this.map.painter.terrain,g=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const E of u){const T=E.coveringTiles({tileSize:g,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const z of T)s.set(z.key,z);this.usedForTerrain&&E.updateElevation(!1)}Eo(Array.from(s.values()),(E,T)=>{const z=new Pv(E,this._source.tileSize*E.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(z,$=>{"raster-dem"===this._source.type&&z.dem&&this._backfillDEM(z),T($,z)})},n)}}function Fv(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),s=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||s-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function n4(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function C4(t,e){const n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}t4.maxOverzooming=10,t4.maxUnderzooming=3;const m3=new class extends er{possiblyEvaluate(t,e){return e=new ts(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,s){return e=mi({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,s)}}(Tm.paint.properties["line-width"].specification);function _6(t,e){return e>0?e+2*t:t}m3.useIntegerZoom=!0;const K4=new pa({"symbol-placement":new qi(ri.layout_symbol["symbol-placement"]),"symbol-spacing":new qi(ri.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qi(ri.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new er(ri.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qi(ri.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new qi(ri.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new qi(ri.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new qi(ri.layout_symbol["icon-ignore-placement"]),"icon-optional":new qi(ri.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qi(ri.layout_symbol["icon-rotation-alignment"]),"icon-size":new er(ri.layout_symbol["icon-size"]),"icon-text-fit":new er(ri.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new er(ri.layout_symbol["icon-text-fit-padding"]),"icon-image":new er(ri.layout_symbol["icon-image"]),"icon-rotate":new er(ri.layout_symbol["icon-rotate"]),"icon-padding":new qi(ri.layout_symbol["icon-padding"]),"icon-keep-upright":new qi(ri.layout_symbol["icon-keep-upright"]),"icon-offset":new er(ri.layout_symbol["icon-offset"]),"icon-anchor":new er(ri.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qi(ri.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qi(ri.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qi(ri.layout_symbol["text-rotation-alignment"]),"text-field":new er(ri.layout_symbol["text-field"]),"text-font":new er(ri.layout_symbol["text-font"]),"text-size":new er(ri.layout_symbol["text-size"]),"text-max-width":new er(ri.layout_symbol["text-max-width"]),"text-line-height":new er(ri.layout_symbol["text-line-height"]),"text-letter-spacing":new er(ri.layout_symbol["text-letter-spacing"]),"text-justify":new er(ri.layout_symbol["text-justify"]),"text-radial-offset":new er(ri.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qi(ri.layout_symbol["text-variable-anchor"]),"text-anchor":new er(ri.layout_symbol["text-anchor"]),"text-max-angle":new qi(ri.layout_symbol["text-max-angle"]),"text-writing-mode":new qi(ri.layout_symbol["text-writing-mode"]),"text-rotate":new er(ri.layout_symbol["text-rotate"]),"text-padding":new qi(ri.layout_symbol["text-padding"]),"text-keep-upright":new qi(ri.layout_symbol["text-keep-upright"]),"text-transform":new er(ri.layout_symbol["text-transform"]),"text-offset":new er(ri.layout_symbol["text-offset"]),"text-allow-overlap":new qi(ri.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new qi(ri.layout_symbol["text-ignore-placement"]),"text-optional":new qi(ri.layout_symbol["text-optional"]),visibility:new qi(ri.layout_symbol.visibility)});var k4={paint:new pa({"icon-opacity":new er(ri.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new er(ri.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new er(ri.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new er(ri.paint_symbol["text-emissive-strength"]),"icon-color":new er(ri.paint_symbol["icon-color"]),"icon-halo-color":new er(ri.paint_symbol["icon-halo-color"]),"icon-halo-width":new er(ri.paint_symbol["icon-halo-width"]),"icon-halo-blur":new er(ri.paint_symbol["icon-halo-blur"]),"icon-translate":new qi(ri.paint_symbol["icon-translate"]),"icon-translate-anchor":new qi(ri.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new er(ri.paint_symbol["icon-image-cross-fade"]),"text-opacity":new er(ri.paint_symbol["text-opacity"]),"text-occlusion-opacity":new er(ri.paint_symbol["text-occlusion-opacity"]),"text-color":new er(ri.paint_symbol["text-color"],{runtimeType:Gt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new er(ri.paint_symbol["text-halo-color"]),"text-halo-width":new er(ri.paint_symbol["text-halo-width"]),"text-halo-blur":new er(ri.paint_symbol["text-halo-blur"]),"text-translate":new qi(ri.paint_symbol["text-translate"]),"text-translate-anchor":new qi(ri.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new qi(ri.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new qi(ri.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new qi(ri.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new qi(ri.paint_symbol["icon-color-brightness-max"])}),layout:K4};class T5{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:fe,this.defaultValue=e}evaluate(e){if(e.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(e.formattedSection))return n.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}at(T5,"FormatSectionOverride",{omit:["defaultValue"]});class Vv extends el{constructor(e,n,s,u){super(e,k4,n,s,u),this._colorAdjustmentMatrix=l.ad.identity([]),this.hasInitialOcclusionOpacityProperties=void 0!==e.paint&&("icon-occlusion-opacity"in e.paint||"text-occlusion-opacity"in e.paint)}recalculate(e,n){super.recalculate(e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const s=this.layout.get("text-writing-mode");if(s){const u=[];for(const m of s)u.indexOf(m)<0&&u.push(m);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(e,n,s,u){return this._saturation===e&&this._contrast===n&&this._brightnessMin===s&&this._brightnessMax===u||(this._colorAdjustmentMatrix=function(m,g,E,T){m=Mi(m),g=Gn(g);const z=l.ad.create(),$=m/3,W=1-2*$,Q=[W,$,$,0,$,W,$,0,$,$,W,0,0,0,0,1],le=.5-.5*g,de=T-E;return l.ad.multiply(z,[de,0,0,0,0,de,0,0,0,0,de,0,E,E,E,1],[g,0,0,0,0,g,0,0,0,0,g,0,le,le,le,1]),l.ad.multiply(z,z,Q),z}(e,n,s,u),this._saturation=e,this._contrast=n,this._brightnessMin=s,this._brightnessMax=u),this._colorAdjustmentMatrix}getValueAndResolveTokens(e,n,s,u){const m=this.layout.get(e).evaluate(n,{},s,u),g=this._unevaluatedLayout._values[e];return g.isDataDriven()||Pe(g.value)||!m?m:(E=n.properties,m.replace(/{([^{}]+)}/g,(z,$)=>$ in E?String(E[$]):""));var E}createBucket(e){return new an(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of k4.paint.overridableProperties){if(!Vv.hasPaintOverride(this.layout,e))continue;const n=this.paint.get(e),s=new T5(n),u=new ye(s,n.property.specification,this.scope,this.options);let m=null;m="constant"===n.value.kind||"source"===n.value.kind?new Qe("source",u):new Je("composite",u,n.value.zoomStops,n.value._interpolationType),this.paint._values[e]=new ua(n.property,m,n.parameters)}}_handleOverridablePaintPropertyUpdate(e,n,s){return!(!this.layout||n.isDataDriven()||s.isDataDriven())&&Vv.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,n){const s=e.get("text-field"),u=k4.paint.properties[n];let m=!1;const g=E=>{for(const T of E)if(u.overrides&&u.overrides.hasOverride(T))return void(m=!0)};if("constant"===s.value.kind&&s.value.value instanceof Ta)g(s.value.value.sections);else if("source"===s.value.kind){const E=z=>{m||(z instanceof Xd&&Ya(z.value)===fs?g(z.value.sections):z instanceof bd?g(z.sections):z.eachChild(E))},T=s.value;T._styleExpression&&E(T._styleExpression.expression)}return m}getProgramIds(){const e=0!==this.paint.get("icon-opacity").constantOr(1),n=0!==this.paint.get("text-opacity").constantOr(1),s=[];return e&&s.push("symbolIcon"),n&&s.push("symbolSDF"),s}getDefaultProgramParams(e,n,s){return{config:new g1(this,{zoom:n,lut:s}),overrideFog:!1}}}const y6=new pa({visibility:new qi(ri.layout_background.visibility)});var g3={paint:new pa({"background-color":new qi(ri.paint_background["background-color"]),"background-pattern":new qi(ri.paint_background["background-pattern"]),"background-opacity":new qi(ri.paint_background["background-opacity"]),"background-emissive-strength":new qi(ri.paint_background["background-emissive-strength"])}),layout:y6};const M5=new pa({visibility:new qi(ri.layout_raster.visibility)});var b6={paint:new pa({"raster-opacity":new qi(ri.paint_raster["raster-opacity"]),"raster-color":new ss(ri.paint_raster["raster-color"]),"raster-color-mix":new qi(ri.paint_raster["raster-color-mix"]),"raster-color-range":new qi(ri.paint_raster["raster-color-range"]),"raster-hue-rotate":new qi(ri.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qi(ri.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qi(ri.paint_raster["raster-brightness-max"]),"raster-saturation":new qi(ri.paint_raster["raster-saturation"]),"raster-contrast":new qi(ri.paint_raster["raster-contrast"]),"raster-resampling":new qi(ri.paint_raster["raster-resampling"]),"raster-fade-duration":new qi(ri.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new qi(ri.paint_raster["raster-emissive-strength"]),"raster-array-band":new qi(ri.paint_raster["raster-array-band"]),"raster-elevation":new qi(ri.paint_raster["raster-elevation"])}),layout:M5};function $v(t,e,n,s,u,m,g,E){const T=[t,e,1,n,s,1,u,m,1],z=[g,E,1],$=l.bC.adjoint([],T),[W,Q,le]=l._.transformMat3(z,z,$);return l.bC.multiply(T,T,[W,0,0,0,Q,0,0,0,le])}function v3(t,e,n,s,u,m,g,E){const T=function(z,$,W,Q,le,de,be,xe){const je=$v(0,0,1,0,1,1,0,1),gt=$v(z,$,W,Q,le,de,be,xe),_t=l.bC.adjoint([],je);return l.bC.multiply(gt,gt,_t)}(t,e,n,s,u,m,g,E);return[T[2]/T[8]/Z,T[5]/T[8]/Z]}function Y4(t){return[t[0],Math.min(Math.max(t[1],-Yl),Yl)]}class _3 extends Bl{constructor(e,n,s,u){super(),this.id=e,this.dispatcher=s,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(u),this.options=n,this._dirty=!1}load(e,n){if(this._loaded=n||!1,this.fire(new yc("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return e&&(this.coordinates=e),this._loaded=!0,void this._finishLoading();this._imageRequest=cs(this.map._requestManager.transformRequest(this.url,vt.Image),(s,u)=>{this._imageRequest=null,this._loaded=!0,s?this.fire(new Ls(s)):u&&(this.image=u instanceof HTMLImageElement?ki.getImageData(u):u,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}setTexture(e){if(!(e.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Do(this.map.painter.context,e.handle),this.width=e.dimensions[0],this.height=e.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new yc("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(e){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Do||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(e){if(this.coordinates=e,this._boundsArray=void 0,this._unsupportedCoords=!1,!e.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let n=e[0][1],s=e[0][1];for(const m of e)m[1]>s&&(s=m[1]),m[1]<n&&(n=m[1]);const u=(s+n)/2;if(u>Yl?this.onNorthPole=!0:u<-Yl&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=e.map($d.fromLngLat);this.tileID=function(g){let E=1/0,T=1/0,z=-1/0,$=-1/0;for(const be of g)E=Math.min(E,be.x),T=Math.min(T,be.y),z=Math.max(z,be.x),$=Math.max($,be.y);const W=Math.max(z-E,$-T),Q=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),le=Math.pow(2,Q);let de=Math.floor((E+z)/2*le);return de>1&&(de-=1),new cp(Q,de,Math.floor((T+$)/2*le))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new yc("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(e){for(const xe in this.tiles){const je=this.tiles[xe];"loaded"!==je.state&&(je.state="loaded",je.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const n=Ac(new cp(0,0,0),this.map.transform.projection),s=[n.projection.project(this.coordinates[0][0],this.coordinates[0][1]),n.projection.project(this.coordinates[1][0],this.coordinates[1][1]),n.projection.project(this.coordinates[2][0],this.coordinates[2][1]),n.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(xe){const je=xe[1].x-xe[0].x,gt=xe[1].y-xe[0].y,_t=xe[2].x-xe[1].x,bt=xe[2].y-xe[1].y,nn=xe[3].x-xe[2].x,Yt=xe[3].y-xe[2].y,Sn=xe[0].x-xe[3].x,Rn=xe[0].y-xe[3].y,ai=je*bt-_t*gt,Di=_t*Yt-nn*bt,wi=nn*Rn-Sn*Yt,Zi=Sn*gt-je*Rn;return ai>0&&Di>0&&wi>0&&Zi>0||ai<0&&Di<0&&wi<0&&Zi<0}(s))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const u=Ac(this.tileID,this.map.transform.projection),[m,g,E,T]=this.coordinates.map(xe=>{const je=u.projection.project(xe[0],xe[1]);return Sv(u,je)._round()});this.perspectiveTransform=v3(m.x,m.y,g.x,g.y,E.x,E.y,T.x,T.y);const z=this._boundsArray=new Fh;z.emplaceBack(m.x,m.y,0,0),z.emplaceBack(g.x,g.y,Z,0),z.emplaceBack(T.x,T.y,0,Z),z.emplaceBack(E.x,E.y,Z,Z),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=e.createVertexBuffer(z,Uh.members),this.boundsSegments=al.simpleSegment(0,0,4,2);const $=[],W=[Y4((xe=this.coordinates)[0]),Y4(xe[1]),Y4(xe[2]),Y4(xe[3])],[Q,le,de,be]=function(xe){let je=xe[0][0],gt=je,_t=xe[0][1],bt=_t;for(let nn=1;nn<xe.length;nn++)xe[nn][0]<je?je=xe[nn][0]:xe[nn][0]>gt&&(gt=xe[nn][0]),xe[nn][1]<_t?_t=xe[nn][1]:xe[nn][1]>bt&&(bt=xe[nn][1]);return[je,_t,gt-je,bt-_t]}(W);var xe;{const xe=new Fh,[je,gt,_t,bt]=function(Ri){let vo=Ri[0].x,Oo=vo,Co=Ri[0].y,ar=Co;for(let Ao=1;Ao<Ri.length;Ao++)Ri[Ao].x<vo?vo=Ri[Ao].x:Ri[Ao].x>Oo&&(Oo=Ri[Ao].x),Ri[Ao].y<Co?Co=Ri[Ao].y:Ri[Ao].y>ar&&(ar=Ri[Ao].y);return[vo,Co,Oo-vo,ar-Co]}(s),nn=Ri=>[(Ri.x-je)/_t,(Ri.y-gt)/bt],[Yt,Sn,Rn,ai]=s.map(nn),Di=function(Ri,vo,Oo,Co,ar,Ao,jo,Jr){const Fr=$v(0,0,1,0,1,1,0,1),Lr=$v(Ri,vo,Oo,Co,ar,Ao,jo,Jr),No=l.bC.adjoint([],Lr);return l.bC.multiply(Fr,Fr,No)}(Yt[0],Yt[1],Sn[0],Sn[1],Rn[0],Rn[1],ai[0],ai[1]);this.elevatedGlobePerspectiveTransform=v3(Yt[0],Yt[1],Sn[0],Sn[1],Rn[0],Rn[1],ai[0],ai[1]);const wi=(Ri,vo)=>{$.push(Ri.lng);const Oo=Math.round((Ri.lng-Q)/de*Z),Co=Math.round((Ri.lat-le)/be*Z),ar=nn(vo),Ao=l._.transformMat3([],[ar[0],ar[1],1],Di),jo=Math.round(Ao[0]/Ao[2]*Z),Jr=Math.round(Ao[1]/Ao[2]*Z);xe.emplaceBack(Oo,Co,jo,Jr)},Zi=s[3].x-s[0].x,Mo=s[3].y-s[0].y,Gi=s[2].x-s[1].x,yo=s[2].y-s[1].y;for(let Ri=0;Ri<65;Ri++){const vo=Ri/64,Oo=[s[0].x+vo*Zi,s[0].y+vo*Mo],Co=[s[1].x+vo*Gi,s[1].y+vo*yo],ar=Co[0]-Oo[0],Ao=Co[1]-Oo[1];for(let jo=0;jo<65;jo++){const Jr=jo/64,Fr={x:Oo[0]+ar*Jr,y:Oo[1]+Ao*Jr,z:0};wi(n.projection.unproject(Fr.x,Fr.y),Fr)}}this.elevatedGlobeVertexBuffer=e.createVertexBuffer(xe,Uh.members)}{this.maxLongitudeTriangleSize=0;let xe=[],je=new eu;const gt=(_t,bt,nn)=>{je.emplaceBack(_t,bt,nn);const Yt=$[_t],Sn=$[bt],Rn=$[nn],ai=Math.min(Math.min(Yt,Sn),Rn),Di=Math.max(Math.max(Yt,Sn),Rn)-ai;Di>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Di),xe.push(ai+Di/2)};for(let _t=0;_t<64;_t++)for(let bt=0;bt<64;bt++){const nn=65*_t+bt,Yt=nn+1,Sn=nn+65,Rn=Sn+1;gt(nn,Sn,Yt),gt(Yt,Sn,Rn)}[xe,je]=function(_t,bt){const nn=Array.from({length:_t.length},(Rn,ai)=>ai);nn.sort((Rn,ai)=>_t[Rn]-_t[ai]);const Yt=[],Sn=new eu;for(let Rn=0;Rn<nn.length;Rn++){const ai=nn[Rn];Yt.push(_t[ai]);const Di=3*ai,wi=Di+1;Sn.emplaceBack(bt.uint16[Di],bt.uint16[wi],bt.uint16[wi+1])}return[Yt,Sn]}(xe,je),this.elevatedGlobeTrianglesCenterLongitudes=xe,this.elevatedGlobeIndexBuffer=e.createIndexBuffer(je)}this.elevatedGlobeSegments=al.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,de/Z,0,be/Z,0,0,le,Q,0])}prepare(){const e=0!==Object.keys(this.tiles).length;if(this.tileID&&!e)return;const n=this.map.painter.context,s=n.gl;!this._dirty||this.texture instanceof Do||(this.texture?this.texture.update(this.image):(this.texture=new $i(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this._dirty=!1),e&&this._prepareData(n)}loadTile(e,n){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},n(null)):(e.state="errored",n(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(e){const n=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!n)return null;const s=this.elevatedGlobeTrianglesCenterLongitudes;let u=(m=e+180)+360*Math.round((s[0]-m)/360);var m;const g=new al,E=(W,Q)=>{g.segments.push({vertexOffset:0,primitiveOffset:W,vertexLength:n.segments[0].vertexLength,primitiveLength:Q,sortKey:void 0,vaos:{}})},T=.51*this.maxLongitudeTriangleSize;if(Math.abs(s[0]-u)<=T){const W=Fn(s,0,s.length,u+T);return W===s.length||E(W,ln(s,W+1,s.length,u+360-T)-W),g}u<s[0]&&(u+=360);const z=ln(s,0,s.length,u-T);if(z===s.length)return E(0,s.length),g;E(0,z-0);const $=Fn(s,z+1,s.length,u+T);return $!==s.length&&E($,s.length-$),g}}const y3=(Math.pow(256,2)-1)/16907520;class w6 extends el{constructor(e,n,s,u){super(e,b6,n,s,u),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(e){return!(e&&e._source instanceof _3&&(e._source.onNorthPole||e._source.onSouthPole))&&0===this.paint.get("raster-elevation")}_handleSpecialPaintPropertyUpdate(e){"raster-color"!==e&&"raster-color-range"!==e||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(e){if(!this.hasColorMap()||!this._curRampRange)return;const n=this._transitionablePaint._values["raster-color"].value.expression,[s,u]=e||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(s)&&isNaN(u)||s===this._curRampRange[0]&&u===this._curRampRange[1]||(this.colorRamp=U1({expression:n,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:s,end:u}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[s,u])}}const A5=new pa({visibility:new qi(ri["layout_raster-particle"].visibility)});var D5={paint:new pa({"raster-particle-array-band":new qi(ri["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new qi(ri["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new ss(ri["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new qi(ri["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new qi(ri["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new qi(ri["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new qi(ri["paint_raster-particle"]["raster-particle-reset-rate-factor"])}),layout:A5};class x6 extends el{constructor(e,n,s,u){super(e,D5,n,s,u),this._updateColorRamp(),this.lastInvalidatedAt=ki.now()}onRemove(e){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return"none"!==this.visibility}isDraped(e){return!1}_handleSpecialPaintPropertyUpdate(e){"raster-particle-color"!==e&&"raster-particle-max-speed"!==e||(this._updateColorRamp(),this._invalidateAnimationState()),"raster-particle-count"===e&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const e=this._transitionablePaint._values["raster-particle-color"].value.expression,n=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=U1({expression:e,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:n}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=ki.now()}}class P5 extends el{constructor(e,n){super(e,{},n,null),this.implementation=e,e.slot&&(this.slot=e.slot)}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isDraped(e){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}const R5=new pa({visibility:new qi(ri.layout_sky.visibility)});var b3={paint:new pa({"sky-type":new qi(ri.paint_sky["sky-type"]),"sky-atmosphere-sun":new qi(ri.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new qi(ri.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new qi(ri.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new qi(ri.paint_sky["sky-gradient-radius"]),"sky-gradient":new ss(ri.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new qi(ri.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new qi(ri.paint_sky["sky-atmosphere-color"]),"sky-opacity":new qi(ri.paint_sky["sky-opacity"])}),layout:R5};function w3(t,e,n){const s=[0,0,1],u=l.av.identity([]);return l.av.rotateY(u,u,n?-rs(t)+Math.PI:rs(t)),l.av.rotateX(u,u,-rs(e)),l._.transformQuat(s,s,u),l._.normalize(s,s)}var z5={paint:new pa({})};function I6(t,e){const n=bg(t.projection,t.zoom,t.width,t.height),s=function(m,g,E,T,z){const $=new oa(E.lng-180*rm,E.lat),W=new oa(E.lng+180*rm,E.lat),Q=m.project($.lng,$.lat),le=m.project(W.lng,W.lat),de=-Math.atan2(le.y-Q.y,le.x-Q.x),be=$d.fromLngLat(E);be.y=On(be.y,-1+rm,1-rm);const xe=be.toLngLat(),je=m.project(xe.lng,xe.lat),gt=$d.fromLngLat(xe);gt.x+=rm;const _t=gt.toLngLat(),bt=m.project(_t.lng,_t.lat),nn=E6(bt.x-je.x,bt.y-je.y,de),Yt=$d.fromLngLat(xe);Yt.y+=rm;const Sn=Yt.toLngLat(),Rn=m.project(Sn.lng,Sn.lat),ai=E6(Rn.x-je.x,Rn.y-je.y,de),Di=Math.abs(nn.x)/Math.abs(ai.y),wi=l.ad.identity([]);l.ad.rotateZ(wi,wi,-de*(1-(z?0:T)));const Zi=l.ad.identity([]);return l.ad.scale(Zi,Zi,[1,1-(1-Di)*T,1]),Zi[4]=-ai.x/ai.y*T,l.ad.rotateZ(Zi,Zi,de),l.ad.multiply(Zi,wi,Zi),Zi}(t.projection,0,t.center,n,e),u=yg(t);return l.ad.scale(s,s,[u,u,1]),s}function yg(t){const e=t.projection,n=bg(t.projection,t.zoom,t.width,t.height),s=jv(e,t.center),u=jv(e,oa.convert(e.center));return Math.pow(2,s*n+(1-n)*u)}function bg(t,e,n,s,u=1/0){const m=t.range;if(!m)return 0;const g=Math.min(u,Math.max(n,s)),E=Math.log(g/1024)/Math.LN2;return li(m[0]+E,m[1]+E,e)}const rm=1/4e4;function jv(t,e){const n=On(e.lat,-Yl,Yl),s=new oa(e.lng-180*rm,n),u=new oa(e.lng+180*rm,n),m=t.project(s.lng,n),g=t.project(u.lng,n),E=$d.fromLngLat(s),T=$d.fromLngLat(u),z=g.x-m.x,$=g.y-m.y,W=T.x-E.x,Q=T.y-E.y,le=Math.sqrt((W*W+Q*Q)/(z*z+$*$));return Math.log(le)/Math.LN2}function E6(t,e,n){const s=Math.cos(n),u=Math.sin(n);return{x:t*s-e*u,y:t*u+e*s}}function i4(t,e,n){l.ad.identity(t),l.ad.rotateZ(t,t,rs(e[2])),l.ad.rotateX(t,t,rs(e[0])),l.ad.rotateY(t,t,rs(e[1])),l.ad.scale(t,t,n),l.ad.multiply(t,t,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Z4(t,e,n,s,u,m,g,E){const T=[n[0]-e[0],n[1]-e[1],0],z=[s[0]-e[0],s[1]-e[1],0];if(l._.length(T)<1e-12||l._.length(z)<1e-12)return l.av.identity(t);const $=l._.cross([],T,z);l._.normalize($,$),l._.subtract(z,s,e),T[2]=(m-u)*E,z[2]=(g-u)*E;const W=T;return l._.cross(W,T,z),l._.normalize(W,W),l.av.rotationTo(t,$,W)}function x3(t,e,n=!1){const s=rh(e.zoom),u=function(m,g,E){const T=g.worldSize,z=[m[12],m[13],m[14]],$=Fc(z[1]/T),W=bu(z[0]/T),Q=l.ad.identity([]),le=Dl(1,$)*T,de=Dl(1,0)*T*Zl($,g.zoom),be=1/Qf(T);let xe=de*be;if(E){const bt=bg(g.projection,g.zoom,g.width,g.height,1024);xe=be*g.projection.pixelSpaceConversion(g.center.lat,T,bt)}const je=Ic($,W);l._.add(je,je,l._.scale([],l._.normalize([],je),le*xe*z[2]));const gt=function(bt){const nn=[bt[0],bt[1],bt[2]];let Yt=[0,1,0];const Sn=l._.cross([],Yt,nn);return l._.cross(Yt,nn,Sn),0===l._.squaredLength(Yt)&&(Yt=[0,1,0],l._.cross(Sn,nn,Yt)),l._.normalize(Sn,Sn),l._.normalize(Yt,Yt),l._.normalize(nn,nn),[Sn[0],Sn[1],Sn[2],0,Yt[0],Yt[1],Yt[2],0,nn[0],nn[1],nn[2],0,bt[0],bt[1],bt[2],1]}(je);l.ad.scale(Q,Q,[xe,xe,xe*le]),l.ad.translate(Q,Q,[-z[0],-z[1],-z[2]]);const _t=l.ad.multiply([],g.globeMatrix,gt);return l.ad.multiply(_t,_t,Q),l.ad.multiply(_t,_t,m),_t}(t,e,n);return s>0?function(g,E,T){const z=(de,be,xe)=>{const je=l._.length(de),gt=l._.length(be),_t=Md(de,be,xe);return l._.scale(_t,_t,1/l._.length(_t)*Rr(je,gt,xe))},$=z([g[0],g[1],g[2]],[E[0],E[1],E[2]],T),W=z([g[4],g[5],g[6]],[E[4],E[5],E[6]],T),Q=z([g[8],g[9],g[10]],[E[8],E[9],E[10]],T),le=Md([g[12],g[13],g[14]],[E[12],E[13],E[14]],T);return[$[0],$[1],$[2],0,W[0],W[1],W[2],0,Q[0],Q[1],Q[2],0,le[0],le[1],le[2],1]}(u,function(g,E){const T=E.worldSize,z=Dl(1,0)*T*Zl(E.center.lat,E.zoom)/Qf(T),$=Dl(1,E.center.lat)*T,W=l.ad.identity([]);return l.ad.rotateY(W,W,rs(E.center.lng)),l.ad.rotateX(W,W,rs(E.center.lat)),l.ad.translate(W,W,[0,0,Vd]),l.ad.scale(W,W,[z,z,z*$]),l.ad.translate(W,W,[E.point.x-.5*T,E.point.y-.5*T,0]),l.ad.multiply(W,W,g),l.ad.multiply(W,E.globeMatrix,W)}(t,e),s):u}function C6(t,e,n,s){const u=pl.projectAabbCorners(s,n);let m=Number.MAX_VALUE,g=-1;for(let z=0;z<u.length;++z){const $=u[z];$[0]=(.5*$[0]+.5)*e.width,$[1]=(.5-.5*$[1])*e.height,$[2]<m&&(g=z,m=$[2])}const E=z=>new Io(u[z][0],u[z][1]);let T;switch(g){case 0:case 6:T=[E(1),E(5),E(4),E(7),E(3),E(2),E(1)];break;case 1:case 7:T=[E(0),E(4),E(5),E(6),E(2),E(3),E(0)];break;case 3:case 5:T=[E(1),E(0),E(4),E(7),E(6),E(2),E(1)];break;default:T=[E(1),E(5),E(6),E(7),E(3),E(0),E(1)]}if(wu(t,T))return m}const O5=va([{name:"a_pos_3f",components:3,type:"Float32"}]),L5=va([{name:"a_color_3f",components:3,type:"Float32"}]),B5=va([{name:"a_color_4f",components:4,type:"Float32"}]),k6=va([{name:"a_uv_2f",components:2,type:"Float32"}]),N5=va([{name:"a_normal_3f",components:3,type:"Float32"}]),S6=va([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),Uv=va([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class Hv{constructor(e,n,s,u){this.message=(e?`${e}: `:"")+s,u&&(this.identifier=u),null!=n&&n.__line__&&(this.line=n.__line__)}}function T6(t,e){const n=-1===t.indexOf("://");try{return new URL(t,n&&e?"http://example.com":void 0),!0}catch{return!1}}class I3{constructor(e,n){this.feature=e,this.instancedDataOffset=n,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class M6{constructor(){this.instancedDataArray=new Al,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class E3{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.projection=e.projection,this.index=e.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(e,n){}populate(e,n,s,u){this.tileToMeter=mf(s);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:g,id:E,index:T,sourceLayerIndex:z}of e){const $=null!=E?E:g.properties&&g.properties.hasOwnProperty("id")?g.properties.id:void 0,W=L0(g,m);if(!this.layers[0]._featureFilter.filter(new ts(this.zoom),W,s))continue;const Q={id:$,sourceLayerIndex:z,index:T,geometry:m?W.geometry:o1(g,s,u),properties:g.properties,type:g.type,patterns:{}},le=this.addFeature(Q,Q.geometry,W);le&&n.featureIndex.insert(g,Q.geometry,T,z,this.index,this.instancesPerModel[le].instancedDataArray.length,Z/32)}this.lookup=null}update(e,n,s,u){for(const m in this.instancesPerModel){const g=this.instancesPerModel[m];for(const E in e)g.idToFeaturesIndex.hasOwnProperty(E)&&(this.evaluate(g.features[g.idToFeaturesIndex[E]],e[E],g,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let e=!1;for(const n in this.instancesPerModel){const s=this.instancesPerModel[n];for(const u of s.features){const m=this.layers[0],g=u.feature,E=this.canonical,T=m.paint.get("model-rotation").evaluate(g,{},E),z=m.paint.get("model-scale").evaluate(g,{},E),$=m.paint.get("model-translation").evaluate(g,{},E);l._.exactEquals(u.rotation,T)&&l._.exactEquals(u.scale,z)&&l._.exactEquals(u.translation,$)||(this.evaluate(u,u.featureStates,s,!0),e=!0)}}return e}updateReplacement(e,n,s){if(n.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=n.updateTime;const u=n.getReplacementRegionsForTile(e.toUnwrapped(),!0);if(Ma(this.activeReplacements,u))return!1;this.activeReplacements=u;let m=!1;for(const g in this.instancesPerModel){const E=this.instancesPerModel[g],T=E.instancedDataArray;for(const z of E.features){const $=z.instancedDataOffset,W=z.instancedDataCount;for(let Q=0;Q<W;Q++){const le=16*(Q+$);let de=T.float32[le+0];de=de>Z?de-Z:de;const be=Math.floor(de),xe=T.float32[le+1];let je=!1;for(const gt of this.activeReplacements)if(!(gt.order<s||gt.order===1/0)&&gt.clipMask&rg.Model&&!(gt.min.x>be||be>gt.max.x||gt.min.y>xe||xe>gt.max.y)&&(je=oc(qs(be,xe,e.canonical,gt.footprintTileId.canonical),gt),je))break;T.float32[le]=je?de+Z:de,m=m||je}}}return m}isEmpty(){for(const e in this.instancesPerModel)if(0!==this.instancesPerModel[e].instancedDataArray.length)return!1;return!0}uploadPending(){return!this.uploaded}upload(e){if(!this.uploaded)for(const n in this.instancesPerModel){const s=this.instancesPerModel[n];s.instancedDataArray.length<0||0===s.instancedDataArray.length||(s.instancedDataBuffer?s.instancedDataBuffer.updateData(s.instancedDataArray):s.instancedDataBuffer=e.createVertexBuffer(s.instancedDataArray,S6.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const n in this.instancesPerModel){const s=this.instancesPerModel[n];0!==s.instancedDataArray.length&&s.instancedDataBuffer&&s.instancedDataBuffer.destroy()}const e=this.layers[0].modelManager;if(e&&this.modelUris)for(const n of this.modelUris)e.removeModel(n,"")}addFeature(e,n,s){const u=this.layers[0],m=u.layout.get("model-id").evaluate(s,{},this.canonical);if(!m)return fa(`modelId is not evaluated for layer ${u.id} and it is not going to get rendered.`),m;T6(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new M6);const g=this.instancesPerModel[m],E=g.instancedDataArray,T=new I3(s,E.length);for(const z of n)for(const $ of z){if($.x<0||$.x>=Z||$.y<0||$.y>=Z)continue;const W=(this.lookupDim-1)/Z,Q=this.lookupDim*($.y*W|0)+$.x*W|0;if(this.lookup){if(0!==this.lookup[Q])continue;this.lookup[Q]=1}this.instanceCount++;const le=E.length;E.resize(le+1),g.instancesEvaluatedElevation.push(0),E.float32[16*le]=$.x,E.float32[16*le+1]=$.y}return T.instancedDataCount=g.instancedDataArray.length-T.instancedDataOffset,T.instancedDataCount>0&&(e.id&&(g.idToFeaturesIndex[e.id]=g.features.length),g.features.push(T),this.evaluate(T,{},g,!1)),m}getModelUris(){return this.modelUris}evaluate(e,n,s,u){const m=this.layers[0],g=e.feature,E=this.canonical,T=e.rotation=m.paint.get("model-rotation").evaluate(g,n,E),z=e.scale=m.paint.get("model-scale").evaluate(g,n,E),$=e.translation=m.paint.get("model-translation").evaluate(g,n,E),W=m.paint.get("model-color").evaluate(g,n,E);W.a=m.paint.get("model-color-mix-intensity").evaluate(g,n,E);const Q=[];this.maxVerticalOffset<$[2]&&(this.maxVerticalOffset=$[2]),this.maxScale=Math.max(Math.max(this.maxScale,z[0]),Math.max(z[1],z[2])),i4(Q,T,z);const le=Math.round(100*W.a)+W.b/1.05;for(let de=0;de<e.instancedDataCount;++de){const be=e.instancedDataOffset+de,xe=16*be,je=s.instancedDataArray.float32;let gt=0;u&&(gt=je[xe+6]-s.instancesEvaluatedElevation[be]);const _t=0|je[xe+1];je[xe]=(0|je[xe])+W.r/1.05,je[xe+1]=_t+W.g/1.05,je[xe+2]=le,je[xe+3]=1/(E.z>10?this.tileToMeter:mf(E,_t)),je[xe+4]=$[0],je[xe+5]=$[1],je[xe+6]=$[2]+gt,je[xe+7]=Q[0],je[xe+8]=Q[1],je[xe+9]=Q[2],je[xe+10]=Q[4],je[xe+11]=Q[5],je[xe+12]=Q[6],je[xe+13]=Q[8],je[xe+14]=Q[9],je[xe+15]=Q[10],s.instancesEvaluatedElevation[be]=$[2]}}}at(E3,"ModelBucket",{omit:["layers"]}),at(M6,"PerModelAttributes"),at(I3,"ModelFeature");const o4=new pa({visibility:new qi(ri.layout_model.visibility),"model-id":new er(ri.layout_model["model-id"])});var S4={paint:new pa({"model-opacity":new qi(ri.paint_model["model-opacity"]),"model-rotation":new er(ri.paint_model["model-rotation"]),"model-scale":new er(ri.paint_model["model-scale"]),"model-translation":new er(ri.paint_model["model-translation"]),"model-color":new er(ri.paint_model["model-color"]),"model-color-mix-intensity":new er(ri.paint_model["model-color-mix-intensity"]),"model-type":new qi(ri.paint_model["model-type"]),"model-cast-shadows":new qi(ri.paint_model["model-cast-shadows"]),"model-receive-shadows":new qi(ri.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new qi(ri.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new er(ri.paint_model["model-emissive-strength"]),"model-roughness":new er(ri.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new er(ri.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new qi(ri.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new qi(ri.paint_model["model-front-cutoff"])}),layout:o4};const Q4={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function C3(t,e,n,s,u,m,g,E,T,z=!1){const $=n.zoom,W=n.project(s),Q=Zl(s.lat,$),le=1/Q;l.ad.identity(t),l.ad.translate(t,t,[W.x+g[0]*le,W.y+g[1]*le,g[2]]);let de=1,be=1;const xe=n.worldSize;if(z){if("mercator"===n.projection.name){let bt=0;n.elevation&&(bt=n.elevation.getAtPointOrZero(new $d(W.x/xe,W.y/xe),0));const nn=l.aA.transformMat4([],[W.x,W.y,bt,1],n.projMatrix)[3]/n.cameraToCenterDistance;de=nn,be=nn*Zl(n.center.lat,$)}else if("globe"===n.projection.name){const bt=x3(t,n),nn=l.ad.multiply([],n.projMatrix,bt),Yt=[0,0,0,1];l.aA.transformMat4(Yt,Yt,nn);const Sn=Yt[3]/n.cameraToCenterDistance,Rn=rh($),ai=n.projection.pixelsPerMeter(s.lat,xe)*Zl(s.lat,$),Di=n.projection.pixelsPerMeter(n.center.lat,xe)*Zl(n.center.lat,$);de=Sn/Rr(ai,ff(n.center.lat),Rn),be=Sn*Q/ai,de*=Di,be*=Di}}else de=le;l.ad.scale(t,t,[de,de,be]);const je=[...t],gt=e.orientation,_t=[];if(i4(_t,[gt[0]+u[0],gt[1]+u[1],gt[2]+u[2]],m),l.ad.multiply(t,je,_t),E&&n.elevation){let bt=0;const nn=[];if(T&&n.elevation){bt=function(Rn,ai,Di,wi,Zi){const Mo=ai.elevation;if(!Mo)return 0;const Gi=pl.projectAabbCorners(Di,wi),yo=Dl(1,Zi.lat)*ai.worldSize,Ri=function(ns,Ys){const Ss=[0,0,1],ha=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const ra of ha){const ba=ns[ra.corners[0]],ys=ns[ra.corners[1]],Hl=ns[ra.corners[2]],zl=[ys[0]-ba[0],ys[1]-ba[1],Ys*(ys[2]-ba[2])],Qa=l._.cross(zl,zl,[Hl[0]-ba[0],Hl[1]-ba[1],Ys*(Hl[2]-ba[2])]);l._.normalize(Qa,Qa),ra.dotProductWithUp=l._.dot(Qa,Ss)}return ha.sort((ra,ba)=>ra.dotProductWithUp-ba.dotProductWithUp),ha[0].corners}(Gi,yo),vo=Gi[Ri[0]],Oo=Gi[Ri[1]],Co=Gi[Ri[2]],ar=Gi[Ri[3]],Ao=Mo.getAtPointOrZero(new $d(vo[0]/ai.worldSize,vo[1]/ai.worldSize),0),jo=Mo.getAtPointOrZero(new $d(Oo[0]/ai.worldSize,Oo[1]/ai.worldSize),0),Jr=Mo.getAtPointOrZero(new $d(Co[0]/ai.worldSize,Co[1]/ai.worldSize),0),Fr=Mo.getAtPointOrZero(new $d(ar[0]/ai.worldSize,ar[1]/ai.worldSize),0),Lr=(Ao+Fr)/2,No=(jo+Jr)/2;return Lr>No?jo<Jr?Z4(Rn,Oo,ar,vo,jo,Fr,Ao,yo):Z4(Rn,Co,vo,ar,Jr,Ao,Fr,yo):Ao<Fr?Z4(Rn,vo,Oo,Co,Ao,jo,Jr,yo):Z4(Rn,ar,Co,Oo,Fr,Jr,jo,yo),Math.max(Lr,No)}(nn,n,e.aabb,t,s);const Yt=l.ad.fromQuat([],nn),Sn=l.ad.multiply([],Yt,_t);l.ad.multiply(t,je,Sn)}else bt=n.elevation.getAtPointOrZero(new $d(W.x/xe,W.y/xe),0);0!==bt&&(t[14]+=bt)}}function J4(t,e,n=!1){t.uploaded||(t.gfxTexture=new $i(e,t.image,n?e.gl.R8:e.gl.RGBA,{useMipmap:t.sampler.minFilter>=e.gl.NEAREST_MIPMAP_NEAREST}),t.uploaded=!0,t.image=null)}function A6(t,e,n){t.indexBuffer=e.createIndexBuffer(t.indexArray,!1,!0),t.vertexBuffer=e.createVertexBuffer(t.vertexArray,O5.members,!1,!0),t.normalArray&&(t.normalBuffer=e.createVertexBuffer(t.normalArray,N5.members,!1,!0)),t.texcoordArray&&(t.texcoordBuffer=e.createVertexBuffer(t.texcoordArray,k6.members,!1,!0)),t.colorArray&&(t.colorBuffer=e.createVertexBuffer(t.colorArray,(12===t.colorArray.bytesPerElement?L5:B5).members,!1,!0)),t.featureArray&&(t.pbrBuffer=e.createVertexBuffer(t.featureArray,Uv.members,!0)),t.segments=al.simpleSegment(0,0,t.vertexArray.length,t.indexArray.length);const s=t.material;s.pbrMetallicRoughness.baseColorTexture&&J4(s.pbrMetallicRoughness.baseColorTexture,e),s.pbrMetallicRoughness.metallicRoughnessTexture&&J4(s.pbrMetallicRoughness.metallicRoughnessTexture,e),s.normalTexture&&J4(s.normalTexture,e),s.occlusionTexture&&J4(s.occlusionTexture,e,n),s.emissionTexture&&J4(s.emissionTexture,e)}function k3(t,e,n){if(t.meshes)for(const s of t.meshes)A6(s,e,n);if(t.children)for(const s of t.children)k3(s,e,n)}function ev(t){if(t.meshes)for(const e of t.meshes)e.indexArray.destroy(),e.vertexArray.destroy(),e.colorArray&&e.colorArray.destroy(),e.normalArray&&e.normalArray.destroy(),e.texcoordArray&&e.texcoordArray.destroy(),e.featureArray&&e.featureArray.destroy();if(t.children)for(const e of t.children)ev(e)}function S3(t){if(t.meshes)for(const n of t.meshes)n.vertexBuffer&&(n.vertexBuffer.destroy(),n.indexBuffer.destroy(),n.normalBuffer&&n.normalBuffer.destroy(),n.texcoordBuffer&&n.texcoordBuffer.destroy(),n.colorBuffer&&n.colorBuffer.destroy(),n.pbrBuffer&&n.pbrBuffer.destroy(),n.segments.destroy(),n.material&&((e=n.material).pbrMetallicRoughness.baseColorTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),e.pbrMetallicRoughness.metallicRoughnessTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),e.normalTexture&&e.normalTexture.gfxTexture&&e.normalTexture.gfxTexture.destroy(),e.emissionTexture&&e.emissionTexture.gfxTexture&&e.emissionTexture.gfxTexture.destroy(),e.occlusionTexture&&e.occlusionTexture.gfxTexture&&e.occlusionTexture.gfxTexture.destroy()));var e;if(t.children)for(const n of t.children)S3(n)}class F5{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class tv{constructor(){this.tasks={},this.taskQueue=[],ea(["process"],this),this.invoker=new F5(this.process),this.nextId=0}add(e,n){const s=this.nextId++,u=function({type:m,isSymbolTile:g,zoom:E}){return E=E||0,"message"===m?0:"maybePrepare"!==m||g?"parseTile"!==m||g?"parseTile"===m&&g?300-E:"maybePrepare"===m&&g?400-E:500:200-E:100-E}(n);if(0===u){try{e()}finally{}return null}return this.tasks[s]={fn:e,metadata:n,priority:u,id:s},this.taskQueue.push(s),this.invoker.trigger(),{cancel:()=>{delete this.tasks[s]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(s=>!!this.tasks[s]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const n=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}pick(){let e=null,n=1/0;for(let u=0;u<this.taskQueue.length;u++){const m=this.tasks[this.taskQueue[u]];m.priority<n&&(n=m.priority,e=u)}if(null===e)return null;const s=this.taskQueue[e];return this.taskQueue.splice(e,1),s}remove(){this.invoker.remove()}}class Gv{constructor(e,n,s){this.target=e,this.parent=n,this.mapId=s,this.callbacks={},this.cancelCallbacks={},ea(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new tv}send(e,n,s,u,m=!1,g){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=g,this.callbacks[E]=s);const T=new Set;return this.target.postMessage({id:E,type:e,hasCallback:!!s,targetMapId:u,mustQueue:m,sourceMapId:this.mapId,data:ci(n,T)},T),{cancel:()=>{s&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(e){const n=e.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){const u=this.cancelCallbacks[s];delete this.cancelCallbacks[s],u&&u.cancel()}else if(n.mustQueue||hu()){const u=this.callbacks[s],m=this.scheduler.add(()=>this.processTask(s,n),u&&u.metadata||{type:"message"});m&&(this.cancelCallbacks[s]=m)}else this.processTask(s,n)}processTask(e,n){if(delete this.cancelCallbacks[e],"<response>"===n.type){const s=this.callbacks[e];delete this.callbacks[e],s&&(n.error?s(zn(n.error)):s(null,zn(n.data)))}else{const s=new Set,u=n.hasCallback?(g,E)=>{this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:g?ci(g):null,data:ci(E,s)},s)}:g=>{},m=zn(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,m,u);else if(this.parent.getWorkerSource){const g=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,g[0],m.source,m.scope)[g[1]](m,u)}else u(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}let Wv=(()=>{class t{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=hr();const u=this.workerPool.acquire(this.id);for(let m=0;m<u.length;m++){const g=new t.Actor(u[m],s,this.id);g.name=`Worker ${m}`,this.actors.push(g)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(n,s,u){Eo(this.actors,(m,g)=>{m.send(n,s,g)},u=u||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}return t.Actor=Gv,t})();var nv={workerUrl:"",workerClass:null,workerParams:void 0};function D6(){return null!=nv.workerClass?new nv.workerClass:new self.Worker(nv.workerUrl,nv.workerParams)}const P6="mapboxgl_preloaded_worker_pool";class T4{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<T4.workerCount;)this.workers.push(new D6);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.workers&&0===this.numActive()&&(this.workers.forEach(n=>{n.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[P6]}numActive(){return Object.keys(this.active).length}}let f0;function iv(){return f0||(f0=new T4),f0}T4.workerCount=2;let ov,qv,sm,qc,T3,wg=null;function R6(){return hu()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:qv||ft.DRACO_URL}function z6(){if(hu()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(qc)return qc;const t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if("object"!=typeof WebAssembly)throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return qc=WebAssembly.validate(t)?ft.MESHOPT_SIMD_URL:ft.MESHOPT_URL,qc}const M4={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},O6={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},A4={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function Xv(t,e,n){const s=n.json.bufferViews.length,u=n.buffers.length;e.bufferView=s,n.json.bufferViews[s]={buffer:u,byteLength:t.byteLength},n.buffers[u]=t}const M3="KHR_draco_mesh_compression";function V5(t,e){const n=t.extensions&&t.extensions[M3];if(!n)return;const s=new sm.Decoder,u=L6(e,n.bufferView),m=new sm.Mesh;if(!s.DecodeArrayToMesh(u,u.byteLength,m))throw new Error("Failed to decode Draco mesh");const g=e.json.accessors[t.indices],E=M4[g.componentType],T=g.count*E.BYTES_PER_ELEMENT,z=sm._malloc(T);E===Uint16Array?s.GetTrianglesUInt16Array(m,T,z):s.GetTrianglesUInt32Array(m,T,z),Xv(sm.memory.buffer.slice(z,z+T),g,e),sm._free(z);for(const $ of Object.keys(n.attributes)){const W=s.GetAttributeByUniqueId(m,n.attributes[$]),Q=e.json.accessors[t.attributes[$]],le=O6[Q.componentType],de=Q.count*A4[Q.type]*M4[Q.componentType].BYTES_PER_ELEMENT,be=sm._malloc(de);s.GetAttributeDataArrayForAllPoints(m,W,sm[le],de,be),Xv(sm.memory.buffer.slice(be,be+de),Q,e),sm._free(be)}s.destroy(),m.destroy(),delete t.extensions[M3]}const rv="EXT_meshopt_compression";function $5(t,e){if(!t.extensions||!t.extensions[rv])return;const n=t.extensions[rv],s=new Uint8Array(e.buffers[n.buffer],n.byteOffset||0,n.byteLength||0),u=new Uint8Array(n.count*n.byteStride);T3.decodeGltfBuffer(u,n.count,n.byteStride,s,n.mode,n.filter),t.buffer=e.buffers.length,t.byteOffset=0,e.buffers[t.buffer]=u.buffer,delete t.extensions[rv]}const E1=1179937895,A3=new TextDecoder("utf8");function Kv(t,e){return new URL(t,e).href}function j5(t,e,n,s){return fetch(Kv(t.uri,s)).then(u=>u.arrayBuffer()).then(u=>{e.buffers[n]=u})}function L6(t,e){const n=t.json.bufferViews[e];return new Uint8Array(t.buffers[n.buffer],n.byteOffset||0,n.byteLength)}function U5(t,e,n,s){if(t.uri){const u=Kv(t.uri,s);return fetch(u).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{e.images[n]=m})}if(void 0!==t.bufferView){const u=L6(e,t.bufferView),m=new Blob([u],{type:t.mimeType});return createImageBitmap(m).then(g=>{e.images[n]=g})}}function D3(t,e=0,n){const s={json:null,images:[],buffers:[]};if(new Uint32Array(t,e,1)[0]===E1){const $=new Uint32Array(t,e);let W=2;const Q=($[W++]>>2)-3,le=$[W++]>>2;if(W++,s.json=JSON.parse(A3.decode($.subarray(W,W+le))),W+=le,W<Q){const de=$[W++];W++;const be=e+(W<<2);s.buffers[0]=t.slice(be,be+de)}}else s.json=JSON.parse(A3.decode(new Uint8Array(t,e)));const{buffers:u,images:m,meshes:g,extensionsUsed:E,bufferViews:T}=s.json;let z=Promise.resolve();if(u){const $=[];for(let W=0;W<u.length;W++){const Q=u[W];Q.uri?$.push(j5(Q,s,W,n)):s.buffers[W]||(s.buffers[W]=null)}z=Promise.all($)}return z.then(()=>{const $=[],W=E&&E.includes(M3),Q=E&&E.includes(rv);if(W&&$.push(function(){if(!sm)return ov||(ov=function(le){let de,be=null;function xe(){de=new Uint8Array(be.buffer)}function je(){throw new Error("Unexpected Draco error.")}const gt={a:{a:je,d:function(_t,bt,nn){return de.copyWithin(_t,bt,bt+nn)},c:function(_t){const bt=de.length,nn=Math.max(_t>>>0,Math.ceil(1.2*bt)),Yt=Math.ceil((nn-bt)/65536);try{return be.grow(Yt),xe(),!0}catch{return!1}},b:je}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(le,gt):le.then(_t=>_t.arrayBuffer()).then(_t=>WebAssembly.instantiate(_t,gt))).then(_t=>{const{Rb:bt,Qb:nn,P:Yt,T:Sn,X:Rn,Ja:ai,La:Di,Qa:wi,Va:Zi,Wa:Mo,eb:Gi,jb:yo,f:Ri,e:vo,yb:Oo,zb:Co,Ab:ar,Bb:Ao,Db:jo,Gb:Jr}=_t.instance.exports;be=vo;const Fr=(()=>{let Lr=0,No=0,ns=0,Ys=0;return Ss=>{ns&&(bt(Ys),bt(Lr),No+=ns,ns=Lr=0),Lr||(No+=128,Lr=nn(No));const ha=Ss.length+7&-8;let ra=Lr;ha>=No&&(ns=ha,ra=Ys=nn(ha));for(let ba=0;ba<Ss.length;ba++)de[ra+ba]=Ss[ba];return ra}})();return xe(),Ri(),{memory:vo,_free:bt,_malloc:nn,Mesh:class{constructor(){this.ptr=Yt()}destroy(){Sn(this.ptr)}},Decoder:class{constructor(){this.ptr=ai()}destroy(){yo(this.ptr)}DecodeArrayToMesh(Lr,No,ns){const Ys=Fr(Lr),Ss=Di(this.ptr,Ys,No,ns.ptr);return!!Rn(Ss)}GetAttributeByUniqueId(Lr,No){return{ptr:wi(this.ptr,Lr.ptr,No)}}GetTrianglesUInt16Array(Lr,No,ns){Zi(this.ptr,Lr.ptr,No,ns)}GetTrianglesUInt32Array(Lr,No,ns){Mo(this.ptr,Lr.ptr,No,ns)}GetAttributeDataArrayForAllPoints(Lr,No,ns,Ys,Ss){Gi(this.ptr,Lr.ptr,No.ptr,ns,Ys,Ss)}},DT_INT8:Oo(),DT_UINT8:Co(),DT_INT16:ar(),DT_UINT16:Ao(),DT_UINT32:jo(),DT_FLOAT32:Jr()}})}(fetch(R6())),ov.then(le=>{sm=le,ov=void 0}))}()),Q&&$.push(function(){if(T3)return;const le=function(de){let be;const xe=WebAssembly.instantiateStreaming(de,{}).then(_t=>{be=_t.instance,be.exports.__wasm_call_ctors()}),je={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},gt={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:xe,supported:!0,decodeGltfBuffer(_t,bt,nn,Yt,Sn,Rn){!function(ai,Di,wi,Zi,Mo,Gi,yo){const Ri=ai.exports.sbrk,vo=Zi+3&-4,Oo=Ri(vo*Mo),Co=Ri(Gi.length),ar=new Uint8Array(ai.exports.memory.buffer);ar.set(Gi,Co);const Ao=Di(Oo,Zi,Mo,Co,Gi.length);if(0===Ao&&yo&&yo(Oo,vo,Mo),wi.set(ar.subarray(Oo,Oo+Zi*Mo)),Ri(Oo-Ri(0)),0!==Ao)throw new Error(`Malformed buffer data: ${Ao}`)}(be,be.exports[gt[Sn]],_t,bt,nn,Yt,be.exports[je[Rn]])}}}(fetch(z6()));return le.ready.then(()=>{T3=le})}()),m)for(let le=0;le<m.length;le++)$.push(U5(m[le],s,le,n));return($.length?Promise.all($):Promise.resolve()).then(()=>{if(W&&g)for(const{primitives:le}of g)for(const de of le)V5(de,s);if(Q&&g&&T)for(const le of T)$5(le,s);return s})})}function r4(t,e){const n=t.json.bufferViews[e.bufferView],s=M4[e.componentType];return new s(t.buffers[n.buffer],(e.byteOffset||0)+(n.byteOffset||0),e.count*(n.byteStride&&n.byteStride!==A4[e.type]*s.BYTES_PER_ELEMENT?n.byteStride/s.BYTES_PER_ELEMENT:A4[e.type]))}function P3(t,e,n,s){const u=M4[e.componentType],m=function($){switch($){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(u),g=t.json.bufferViews[e.bufferView],E=g.byteStride?g.byteStride/u.BYTES_PER_ELEMENT:A4[e.type],T=n.float32,z=T.length/n.capacity;for(let $=0,W=0;$<e.count*E;$+=E,W+=z)for(let Q=0;Q<z;Q++)T[W+Q]=s[$+Q]*m;n._trim()}function Yv(t,e,n){const s=t.indices,u=t.attributes,m={};m.indexArray=new eu;const g=e.json.accessors[s],E=g.count/3;m.indexArray.reserve(E);const T=r4(e,g);for(let Q=0;Q<E;Q++)m.indexArray.emplaceBack(T[3*Q],T[3*Q+1],T[3*Q+2]);m.indexArray._trim(),m.vertexArray=new Ru;const z=e.json.accessors[u.POSITION];m.vertexArray.reserve(z.count);const $=r4(e,z);for(let Q=0;Q<z.count;Q++)m.vertexArray.emplaceBack($[3*Q],$[3*Q+1],$[3*Q+2]);if(m.vertexArray._trim(),m.aabb=new pl(z.min,z.max),m.centroid=function(Q,le){const de=[0,0,0],be=Q.length;if(be>0){for(let xe=0;xe<be;xe++){const je=3*Q[xe];de[0]+=le[je],de[1]+=le[je+1],de[2]+=le[je+2]}de[0]/=be,de[1]/=be,de[2]/=be}return de}(T,$),void 0!==u.COLOR_0){const Q=e.json.accessors[u.COLOR_0],le=A4[Q.type],de=r4(e,Q);m.colorArray=3===le?new Ru:new t0,m.colorArray.resize(Q.count),P3(e,Q,m.colorArray,de)}if(void 0!==u.NORMAL){m.normalArray=new Ru;const Q=e.json.accessors[u.NORMAL];m.normalArray.resize(Q.count);const le=r4(e,Q);P3(e,Q,m.normalArray,le)}if(void 0!==u.TEXCOORD_0&&n.length>0){m.texcoordArray=new th;const Q=e.json.accessors[u.TEXCOORD_0];m.texcoordArray.resize(Q.count);const le=r4(e,Q);P3(e,Q,m.texcoordArray,le)}if(void 0!==u._FEATURE_ID_RGBA4444){const Q=e.json.accessors[u._FEATURE_ID_RGBA4444];e.json.extensionsUsed&&e.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=r4(e,Q))}void 0!==u._FEATURE_RGBA4444&&(m.featureData=new Uint32Array(r4(e,e.json.accessors[u._FEATURE_RGBA4444]).buffer));const W=t.material;return m.material=function(Q,le){const{emissiveFactor:de=[0,0,0],alphaMode:be="OPAQUE",alphaCutoff:xe=.5,normalTexture:je,occlusionTexture:gt,emissiveTexture:_t,doubleSided:bt}=Q,{baseColorFactor:nn=[1,1,1,1],metallicFactor:Yt=1,roughnessFactor:Sn=1,baseColorTexture:Rn,metallicRoughnessTexture:ai}=Q.pbrMetallicRoughness||{},Di=gt?le[gt.index]:void 0;if(gt&&gt.extensions&&gt.extensions.KHR_texture_transform&&Di){const wi=gt.extensions.KHR_texture_transform;Di.offsetScale=[wi.offset[0],wi.offset[1],wi.scale[0],wi.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new Xs(...nn),metallicFactor:Yt,roughnessFactor:Sn,baseColorTexture:Rn?le[Rn.index]:void 0,metallicRoughnessTexture:ai?le[ai.index]:void 0},doubleSided:bt,emissiveFactor:de,alphaMode:be,alphaCutoff:xe,normalTexture:je?le[je.index]:void 0,occlusionTexture:Di,emissionTexture:_t?le[_t.index]:void 0,defined:void 0===Q.defined}}(void 0!==W?e.json.materials[W]:{defined:!1},n),m}function Zv(t,e,n){const{matrix:s,rotation:u,translation:m,scale:g,mesh:E,extras:T,children:z}=t,$={};if($.matrix=s||l.ad.fromRotationTranslationScale([],u||[0,0,0,1],m||[0,0,0],g||[1,1,1]),void 0!==E){$.meshes=n[E];const W=$.anchor=[0,0];for(const Q of $.meshes){const{min:le,max:de}=Q.aabb;W[0]+=le[0]+de[0],W[1]+=le[1]+de[1]}W[0]=Math.floor(W[0]/$.meshes.length/2),W[1]=Math.floor(W[1]/$.meshes.length/2)}if(T&&(T.id&&($.id=T.id),T.lights&&($.lights=function(W){if(!W.length)return[];const Q=function(je){const gt=atob(je),_t=new Uint8Array(gt.length);for(let bt=0;bt<gt.length;bt++)_t[bt]=gt.codePointAt(bt);return _t}(W),le=[],de=Q.length/24,be=new Uint16Array(Q.buffer),xe=new Float32Array(Q.buffer);for(let je=0;je<de;je++){const gt=be[2*je*6]/30,_t=be[2*je*6+1]/30,bt=be[2*je*6+10]/100,nn=xe[6*je+1],Yt=xe[6*je+2],Sn=xe[6*je+3],Rn=xe[6*je+4],ai=Sn-nn,Di=Rn-Yt,wi=Math.hypot(ai,Di);le.push({pos:[nn+.5*ai,Yt+.5*Di,_t],normal:[Di/wi,-ai/wi,0],width:wi,height:gt,depth:bt,points:[nn,Yt,Sn,Rn]})}return le}(T.lights))),z){const W=[];for(const Q of z)W.push(Zv(e.json.nodes[Q],e,n));$.children=W}return $}function xg(t){if(0===t.vertices.length||0===t.indices.length)return null;const e=new I(t.vertices,t.indices,8,256),[n,s]=[e.min.clone(),e.max.clone()];return{vertices:t.vertices,indices:t.indices,grid:e,min:n,max:s}}function Qv(t){if(!t.extras||!t.extras.ground)return null;const e=t.extras.ground;if(!e||!Array.isArray(e)||0===e.length)return null;const n=e[0];if(!n||!Array.isArray(n)||0===n.length)return null;const s=[];for(const g of n){if(!Array.isArray(g)||2!==g.length)continue;const E=g[0],T=g[1];"number"==typeof E&&"number"==typeof T&&s.push(new Io(E,T))}if(s.length<3)return null;s.length>1&&s[s.length-1].equals(s[0])&&s.pop();let u=0;for(let g=0;g<s.length;g++){const E=s[g],T=s[(g+1)%s.length],z=s[(g+2)%s.length];u+=(E.x-T.x)*(z.y-T.y)-(z.x-T.x)*(E.y-T.y)}u>0&&s.reverse();const m=N0(s.flatMap(g=>[g.x,g.y]),[]);return 0===m.length?null:{vertices:s,indices:m}}function B6(t,e){const n=[],s=[];let u=0;const m=[];for(const g of t){u=n.length;const E=g.vertexArray.float32,T=g.indexArray.uint16;for(let z=0;z<g.vertexArray.length;z++)m[0]=E[3*z+0],m[1]=E[3*z+1],m[2]=E[3*z+2],l._.transformMat4(m,m,e),n.push(new Io(m[0],m[1]));for(let z=0;z<3*g.indexArray.length;z++)s.push(T[z]+u)}if(s.length%3!=0)return null;for(let g=0;g<s.length;g+=3){const E=n[s[g+0]],T=n[s[g+1]],z=n[s[g+2]];(E.x-T.x)*(z.y-T.y)-(z.x-T.x)*(E.y-T.y)>0&&([s[g+1],s[g+2]]=[s[g+2],s[g+1]])}return{vertices:n,indices:s}}function D4(t){const n=function(T,z){const $=[];for(const W of T.json.meshes){const Q=[];for(const le of W.primitives)Q.push(Yv(le,T,z));$.push(Q)}return $}(t,function(T,z){const $=[],W=WebGL2RenderingContext;if(T.json.textures)for(const Q of T.json.textures){const le={magFilter:W.LINEAR,minFilter:W.NEAREST,wrapS:W.REPEAT,wrapT:W.REPEAT};void 0!==Q.sampler&&Object.assign(le,T.json.samplers[Q.sampler]),$.push({image:z[Q.source],sampler:le,uploaded:!1})}return $}(t,t.images)),{scenes:s,scene:u,nodes:m}=t.json,g=s?s[u||0].nodes:m,E=[];for(const T of g)E.push(Zv(m[T],t,n));return function(T,z,$){const W={},Q=new Set;for(let le=0;le<T.length;le++){const de=$[z[le]];if(!de.extras)continue;const be=de.extras["mapbox:footprint:version"],xe=de.extras["mapbox:footprint:id"];(be||xe)&&Q.add(le),"1.0.0"===be&&xe&&(W[xe]=le)}for(let le=0;le<T.length;le++){if(Q.has(le))continue;const de=T[le],be=$[z[le]];if(!be.extras)continue;let xe=null;de.id in W&&(xe=B6(T[W[de.id]].meshes,de.matrix)),xe||(xe=Qv(be)),xe&&(de.footprint=xg(xe))}if(Q.size>0){const le=Array.from(Q.values()).sort((de,be)=>de-be);for(let de=le.length-1;de>=0;de--)T.splice(le[de],1)}}(E,g,t.json.nodes),E}function H5(t){t.heightmap=new Float32Array(4096),t.heightmap.fill(-1);const e=t.vertexArray.float32,n=t.aabb.min[0]-1,s=t.aabb.min[1]-1,u=64/(t.aabb.max[0]-n+2),m=64/(t.aabb.max[1]-s+2);for(let g=0;g<e.length;g+=3){const E=e[g+2],T=(e[g+0]-n)*u|0,z=(e[g+1]-s)*m|0;E>t.heightmap[64*z+T]&&(t.heightmap[64*z+T]=E)}}function G5(t,e){const n={};n.indexArray=new eu,n.indexArray.reserve(4*t.length),n.vertexArray=new Ru,n.vertexArray.reserve(10*t.length),n.colorArray=new t0,n.vertexArray.reserve(10*t.length);let s=0;for(const g of t){const E=Math.min(10,Math.max(4,1.3*g.height))*e,T=[-g.normal[1],g.normal[0],0],z=Math.min(.29,.1*g.width/g.depth),$=g.width-2*g.depth*e*(z+.01),W=l._.scaleAndAdd([],g.pos,T,$/2),Q=l._.scaleAndAdd([],g.pos,T,-$/2),le=[W[0],W[1],W[2]+g.height],de=[Q[0],Q[1],Q[2]+g.height],be=l._.scaleAndAdd([],g.normal,T,z);l._.scale(be,be,E);const xe=l._.scaleAndAdd([],g.normal,T,-z);l._.scale(xe,xe,E),l._.add(be,W,be),l._.add(xe,Q,xe),W[2]+=.1,Q[2]+=.1,n.vertexArray.emplaceBack(be[0],be[1],be[2]),n.vertexArray.emplaceBack(xe[0],xe[1],xe[2]),n.vertexArray.emplaceBack(W[0],W[1],W[2]),n.vertexArray.emplaceBack(Q[0],Q[1],Q[2]),n.vertexArray.emplaceBack(le[0],le[1],le[2]),n.vertexArray.emplaceBack(de[0],de[1],de[2]),n.vertexArray.emplaceBack(W[0],W[1],W[2]),n.vertexArray.emplaceBack(Q[0],Q[1],Q[2]),n.vertexArray.emplaceBack(be[0],be[1],be[2]),n.vertexArray.emplaceBack(xe[0],xe[1],xe[2]);const je=$/E/2;n.colorArray.emplaceBack(-je-z,-1,je,.8),n.colorArray.emplaceBack(je+z,-1,je,.8),n.colorArray.emplaceBack(-je,0,je,1.3),n.colorArray.emplaceBack(je,0,je,1.3),n.colorArray.emplaceBack(je+z,-.8,je,.7),n.colorArray.emplaceBack(je+z,-.8,je,.7),n.colorArray.emplaceBack(0,0,je,1.3),n.colorArray.emplaceBack(0,0,je,1.3),n.colorArray.emplaceBack(je+z,-1.2,je,.8),n.colorArray.emplaceBack(je+z,-1.2,je,.8),n.indexArray.emplaceBack(6+s,4+s,8+s),n.indexArray.emplaceBack(7+s,9+s,5+s),n.indexArray.emplaceBack(0+s,1+s,2+s),n.indexArray.emplaceBack(1+s,3+s,2+s),s+=10}const u={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=Xs.white,u.pbrMetallicRoughness=m,n.material=u,n.aabb=new pl([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),n}const sv=new Float32Array(262144),Ig=new Uint8Array(262144);function jm(t){let e=0;if(t.meshes)for(const n of t.meshes)e=Math.max(e,n.aabb.max[2]);if(t.children)for(const n of t.children)e=Math.max(e,jm(n));return e}function P4(t,e,n){if(t.meshes)for(const s of t.meshes)s.aabb.min[0]!==1/0&&n.insert(e,s.aabb.min[0],s.aabb.min[1],s.aabb.max[0],s.aabb.max[1]);if(t.children)for(const s of t.children)P4(s,e,n)}const W5=["","wall","door","roof","window","lamp","logo"];class av{constructor(e){this.node=e,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:e.id,geometry:[],properties:{height:jm(e)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new pl([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let e=0;const n=new pl([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const s of this.node.meshes)this.node.lightMeshIndex!==e&&(s.transformedAabb=pl.applyTransformFast(s.aabb,this.node.matrix),n.encapsulate(s.transformedAabb)),e++;this.aabb=n}return this.aabb}}class lv{constructor(e,n,s,u,m,g){this.id=n,this.modelTraits|=Q4.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,s&&(this.modelTraits|=Q4.HasMapboxMeshFeatures),u&&(this.modelTraits|=Q4.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=m,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const E of e)this.nodesInfo.push(new av(E)),P4(E,g.featureIndexArray.length,g.grid),g.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,g.bucketLayerIDs.length-1,0)}updateFootprints(e,n){for(const s of this.getNodesInfo()){const u=s.node;u.footprint&&n.push({footprint:u.footprint,id:e})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(e){if(!this.needsUpload)return;const n=this.getNodesInfo();for(const s of n){const u=s.node;this.uploaded?this.updatePbrBuffer(u):k3(u,e,!0)}for(const s of n)ev(s.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(e){let n=!1;if(!e.meshes)return n;for(const s of e.meshes)s.pbrBuffer&&(s.pbrBuffer.updateData(s.featureArray),n=!0);return n}needsReEvaluation(e,n,s){const u=e.transform.projectionOptions,m=e.style.getBrightness(),g=this.brightness!==m;return!!(!this.uploaded||this.dirty||u.name!==this.projection.name||R4(s.paint.get("model-color").value,g)||R4(s.paint.get("model-color-mix-intensity").value,g)||R4(s.paint.get("model-roughness").value,g)||R4(s.paint.get("model-emissive-strength").value,g)||R4(s.paint.get("model-height-based-emissive-strength-multiplier").value,g))&&(this.projection=u,this.brightness=m,!0)}evaluateScale(e,n){if(e.transform.zoom===this.zoom)return;this.zoom=e.transform.zoom;const s=this.getNodesInfo(),u=this.id.canonical;for(const m of s){const g=m.feature;m.evaluatedScale=n.paint.get("model-scale").evaluate(g,{},u)}}evaluate(e){const n=this.getNodesInfo();for(const s of n){if(!s.node.meshes)continue;const u=s.feature,m=s.node.meshes&&s.node.meshes[0].featureData,g=s.evaluatedColor[2],E=s.evaluatedRMEA[2],T=this.id.canonical;if(s.hasTranslucentParts=!1,m){for(let z=0;z<W5.length;z++){const $=W5[z];$.length&&(u.properties.part=$);const W=e.paint.get("model-color").evaluate(u,{},T).toRenderColor(null),Q=e.paint.get("model-color-mix-intensity").evaluate(u,{},T);s.evaluatedColor[z]=[W.r,W.g,W.b,Q],s.evaluatedRMEA[z][0]=e.paint.get("model-roughness").evaluate(u,{},T),s.evaluatedRMEA[z][2]=e.paint.get("model-emissive-strength").evaluate(u,{},T),s.evaluatedRMEA[z][3]=W.a,s.emissionHeightBasedParams[z]=e.paint.get("model-height-based-emissive-strength-multiplier").evaluate(u,{},T),!s.hasTranslucentParts&&W.a<1&&(s.hasTranslucentParts=!0)}delete u.properties.part,cv(s,g!==s.evaluatedColor[2]||E!==s.evaluatedRMEA[2],this.modelTraits)}else s.evaluatedRMEA[0][2]=e.paint.get("model-emissive-strength").evaluate(u,{},T);s.evaluatedScale=e.paint.get("model-scale").evaluate(u,{},T),this.updatePbrBuffer(s.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(e,n,s,u){const m=e.findDEMTileFor(s);if(m&&(m.tileID.canonical!==this.terrainTile||n!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const g=Hp.create(e,s,m);if(!g)return;this.modelTraits&Q4.HasMapboxMeshFeatures&&this.updateDEM(e,g,s,u);for(const E of this.getNodesInfo()){const T=E.node;if(!T.footprint||!T.footprint.vertices||!T.footprint.vertices.length)continue;const z=T.footprint.vertices;let $=g.getElevationAt(z[0].x,z[0].y,!0,!0);for(let W=1;W<z.length;W++)$=Math.min($,g.getElevationAt(z[W].x,z[W].y,!0,!0));T.elevation=$}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=n}}updateDEM(e,n,s,u){let m=n._dem._modifiedForSources[u];if(void 0===m&&(n._dem._modifiedForSources[u]=[],m=n._dem._modifiedForSources[u]),m.includes(s.canonical))return;const g=n._dem.dim;m.push(s.canonical);let E=!1;for(const T of this.getNodesInfo()){const z=T.node;if(!z.footprint||!z.footprint.grid)continue;const $=z.footprint.grid,W=n.tileCoordToPixel($.min.x,$.min.y),Q=n.tileCoordToPixel($.max.x,$.max.y),le=Math.min(Math.min(g-Q.y,W.x),Math.min(W.y,g-Q.x));if(le<0)continue;const de=On(le,2,5);let be=Math.max(0,W.x-de),xe=Math.max(0,W.y-de),je=Math.min(Q.x+de,g-1),gt=Math.min(Q.y+de,g-1);for(let Yt=xe;Yt<=gt;++Yt)for(let Sn=be;Sn<=je;++Sn)Ig[Yt*g+Sn]=255;let _t=0,bt=0;for(let Yt=0;Yt<$.cellsY;++Yt)for(let Sn=0;Sn<$.cellsX;++Sn){if(!$.cells[Yt*$.cellsX+Sn])continue;const Rn=n.tileCoordToPixel($.min.x+Sn/$.xScale,$.min.y+Yt/$.yScale),ai=n.tileCoordToPixel($.min.x+(Sn+1)/$.xScale,$.min.y+(Yt+1)/$.yScale);for(let Di=Rn.y;Di<=Math.min(ai.y+1,g-1);++Di)for(let wi=Rn.x;wi<=Math.min(ai.x+1,g-1);++wi)255===Ig[Di*g+wi]&&(Ig[Di*g+wi]=0,_t+=n.getElevationAtPixel(wi,Di),bt++)}const nn=_t/bt;be=Math.max(1,W.x-de),xe=Math.max(1,W.y-de),je=Math.min(Q.x+de,g-2),gt=Math.min(Q.y+de,g-2),E=!0;for(let Yt=xe;Yt<=gt;++Yt)for(let Sn=be;Sn<=je;++Sn)0===Ig[Yt*g+Sn]&&(sv[Yt*g+Sn]=n._dem.set(Sn,Yt,nn));for(let Yt=1;Yt<de;++Yt){be=Math.max(1,W.x-Yt),xe=Math.max(1,W.y-Yt),je=Math.min(Q.x+Yt,g-2),gt=Math.min(Q.y+Yt,g-2);for(let Sn=xe;Sn<=gt;++Sn)for(let Rn=be;Rn<=je;++Rn){const ai=Sn*g+Rn;if(255===Ig[ai]){let Di=0,wi=0,Zi=-1,Mo=-1;for(let Gi=-1;Gi<=1;++Gi)for(let yo=-1;yo<=1;++yo){const Ri=(Sn+Gi)*g+Rn+yo;if(Ig[Ri]>=Yt)continue;const vo=sv[Ri],Oo=Math.abs(vo);Oo>wi&&(Di=vo,wi=Oo,Zi=yo,Mo=Gi)}if(wi>.1){const Gi=1-(Yt+.5*Math.abs(Zi*Mo))/de;let yo=n._dem.get(Rn,Sn)+Di*Gi;const Ri=n._dem.get(Rn+Zi,Sn+Mo),vo=n._dem.get(Rn-Zi,Sn-Mo,!0);(yo-Ri)*(yo-vo)>0&&(yo=(Ri+vo)/2),sv[ai]=n._dem.set(Rn,Sn,yo),Ig[ai]=Yt}}}}}E&&(n._demTile.needsDEMTextureUpload=!0,n._dem._timestamp=ki.now())}getNodesInfo(){return this.nodesInfo}destroy(){const e=this.getNodesInfo();for(const n of e)ev(n.node),S3(n.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(e,n){if(n.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=n.updateTime;const s=n.getReplacementRegionsForTile(e.toUnwrapped()),u=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const g=u[m].node;u[m].hiddenByReplacement=!!g.footprint&&!s.find(E=>E.footprint===g.footprint)}}getHeightAtTileCoord(e,n){const s=this.getNodesInfo(),u=[],m=[0,0,0],g=l.ad.identity([]);for(let E=0;E<this.nodesInfo.length;E++){const T=s[E],z=T.node.meshes[0],$=z.transformedAabb;if(e<$.min[0]||n<$.min[1]||e>$.max[0]||n>$.max[1])continue;if(!0===T.node.hidden)return{height:0,maxHeight:T.feature.properties.height,hidden:!1,verticalScale:T.evaluatedScale[2]};l.ad.invert(g,T.node.matrix),m[0]=e,m[1]=n,l._.transformMat4(m,m,g);const W=(m[0]-z.aabb.min[0])/(z.aabb.max[0]-z.aabb.min[0])*64|0,Q=64*Math.min(63,(m[1]-z.aabb.min[1])/(z.aabb.max[1]-z.aabb.min[1])*64|0)+Math.min(63,W),le=z.heightmap[Q];if(!(le<0&&T.node.footprint))return T.hiddenByReplacement?void 0:{height:le,maxHeight:T.feature.properties.height,hidden:!1,verticalScale:T.evaluatedScale[2]};if(T.node.footprint.grid.query(new Io(e,n),new Io(e,n),u),u.length>0)return{height:void 0,maxHeight:T.feature.properties.height,hidden:T.hiddenByReplacement,verticalScale:T.evaluatedScale[2]}}}}function R4(t,e){return!t.isLightConstant&&e}function q5(t,e,n,s,u,m,g,E){let T=(61440&e|(61440&e)>>4)>>8,z=(3840&e|(3840&e)>>4)>>4,$=240&e|(240&e)>>4;n[3]>0&&(T=Rr(T,255*n[0],n[3]),z=Rr(z,255*n[1],n[3]),$=Rr($,255*n[2],n[3]));const W=T<<8|z,Q=$<<8|Math.floor(255*s[3]),le=function(Yt){const Sn=On(Yt,0,2);return Math.min(Math.round(.5*Sn*255),255)}(s[2])<<8|15*s[0]<<4|15*s[1],de=On(u[0],0,1),be=On(u[1],0,1),xe=On(u[2],0,1),je=On(u[3],0,1);let gt,_t,bt,nn;if(de!==be&&g!==m&&be!==de){const Yt=g-m;_t=1/(Yt*(be-de)),bt=-(m+Yt*de)/(Yt*(be-de));const Sn=On(u[4],-1,1);nn=Math.pow(10,Sn),gt=255*xe<<8|255*je}else gt=65535,_t=0,bt=1,nn=1;if(t.emplaceBack(W,Q,le,gt,_t,bt,nn),E){const Yt=E.length;E.clear();for(let Sn=0;Sn<Yt;Sn++)E.emplaceBack(W,Q,le,gt,_t,bt,nn)}}function cv(t,e,n){const s=t.node;let u=0;const m=n&Q4.HasMeshoptCompression;for(const g of s.meshes){if(s.lights&&s.lightMeshIndex===u||!g.featureData)continue;g.featureArray=new $f,g.featureArray.reserve(g.featureData.length);let E=e;for(const T of g.featureData){const z=m?65535&T:T>>16&65535,$=m?T>>16&65535:65535&T,W=(15&$)<8?15&$:0,Q=t.evaluatedRMEA[W],le=t.evaluatedColor[W],de=t.emissionHeightBasedParams[W];let be;if(E&&2===W&&s.lights&&(be=new $f,be.resize(10*s.lights.length)),q5(g.featureArray,z,le,Q,de,g.aabb.min[2],g.aabb.max[2],be),be&&E){E=!1;const xe=s.meshes[s.lightMeshIndex];xe.featureArray=be,xe.featureArray._trim()}}g.featureArray._trim(),u++}}function N6(t,e,n,s){const u=1<<t.z;e.lat=Fc((s/Z+t.y)/u),e.lng=bu((n/Z+t.x)/u)}at(lv,"Tiled3dModelBucket",{omit:["layers"]}),at(av,"Tiled3dModelFeature");const X5={circle:class extends el{constructor(t,e,n,s){super(t,Rg,e,n,s)}createBucket(t){return new Tp(t)}queryRadius(t){const e=t;return Ap("circle-radius",this,e)+Ap("circle-stroke-width",this,e)+gm(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,s,u,m,g,E){const T=vm(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,t.pixelToTileUnitsFactor),z=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return wf(t,s,m,g,E,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),T,z)}getProgramIds(){return["circle"]}getDefaultProgramParams(t,e,n){const s=e2(this);return{config:new g1(this,{zoom:e,lut:n}),defines:s,overrideFog:!1}}},heatmap:class extends el{createBucket(t){return new xf(t)}constructor(t,e,n,s){super(t,d4,e,n,s),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=U1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return Ap("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,s,u,m,g,E){const T=this.paint.get("heatmap-radius").evaluate(e,n);return wf(t,s,m,g,E,!0,!0,new Io(0,0),T)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(t,e,n){return"heatmap"===t?{config:new g1(this,{zoom:e,lut:n}),overrideFog:!1}:{}}},hillshade:class extends el{constructor(t,e,n,s){super(t,eg,e,n,s)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(t,e,n){return{overrideFog:!1}}},fill:class extends el{constructor(t,e,n,s){super(t,A,e,n,s)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getDefaultProgramParams(t,e,n){return{config:new g1(this,{zoom:e,lut:n}),overrideFog:!1}}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new y(t)}queryRadius(){return gm(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,s,u,m){return!t.queryGeometry.isAboveHorizon&&D2(vf(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,t.pixelToTileUnitsFactor),s)}isTileClipped(){return!0}},"fill-extrusion":class extends el{constructor(t,e,n,s){super(t,Bi,e,n,s),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(t){return new Zo(t)}queryRadius(){return gm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(t,e,n,s,u,m,g,E,T){const z=vm(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,t.pixelToTileUnitsFactor),$=this.paint.get("fill-extrusion-height").evaluate(e,n),W=this.paint.get("fill-extrusion-base").evaluate(e,n),Q=[0,0],le=E&&m.elevation,de=m.elevation?m.elevation.exaggeration():1,be=t.tile.getBucket(this);if(le&&be instanceof Zo){const bt=be.centroidVertexArray,nn=T+1;nn<bt.length&&(Q[0]=bt.geta_centroid_pos0(nn),Q[1]=bt.geta_centroid_pos1(nn))}if(0===Q[0]&&1===Q[1])return!1;"globe"===m.projection.name&&(s=zi([s],[new Io(0,0),new Io(Z,Z)],t.tileID.canonical).map(bt=>bt.polygon).flat());const xe=le?E:null,[je,gt]=(nn=s,Yt=W,Sn=$,Rn=z,ai=g,Di=xe,wi=Q,Zi=de,Mo=m.center.lat,"globe"===(bt=m).projection.name?function(yo,Ri,vo,Oo,Co,ar,Ao,jo,Jr,Fr,Lr){const No=[],ns=[],Ys=yo.projection.upVectorScale(Lr,yo.center.lat,yo.worldSize).metersToTile,Ss=[0,0,0,1],ha=[0,0,0,1],ra=(ys,Hl,zl,Qa)=>{ys[0]=Hl,ys[1]=zl,ys[2]=Qa,ys[3]=1},ba=qa();vo>0&&(vo+=ba),Oo+=ba;for(const ys of Ri){const Hl=[],zl=[];for(const Qa of ys){const Ba=Qa.x+Co.x,Ua=Qa.y+Co.y,rc=yo.projection.projectTilePoint(Ba,Ua,Lr),sc=yo.projection.upVector(Lr,Qa.x,Qa.y);let Iu=vo,ou=Oo;if(Ao){const s1=gi(Ba,Ua,vo,Oo,Ao,jo,Jr,Fr);Iu+=s1.base,ou+=s1.top}0!==vo?ra(Ss,rc.x+sc[0]*Ys*Iu,rc.y+sc[1]*Ys*Iu,rc.z+sc[2]*Ys*Iu):ra(Ss,rc.x,rc.y,rc.z),ra(ha,rc.x+sc[0]*Ys*ou,rc.y+sc[1]*Ys*ou,rc.z+sc[2]*Ys*ou),l._.transformMat4(Ss,Ss,ar),l._.transformMat4(ha,ha,ar),Hl.push(new mo(Ss[0],Ss[1],Ss[2])),zl.push(new mo(ha[0],ha[1],ha[2]))}No.push(Hl),ns.push(zl)}return[No,ns]}(bt,nn,Yt,Sn,Rn,ai,Di,wi,Zi,Mo,t.tileID.canonical):Di?function(yo,Ri,vo,Oo,Co,ar,Ao,jo,Jr){const Fr=[],Lr=[],No=[0,0,0,1];for(const ns of yo){const Ys=[],Ss=[];for(const ha of ns){const ra=ha.x+Oo.x,ba=ha.y+Oo.y,ys=gi(ra,ba,Ri,vo,ar,Ao,jo,Jr);No[0]=ra,No[1]=ba,No[2]=ys.base,No[3]=1,l.aA.transformMat4(No,No,Co),No[3]=Math.max(No[3],1e-5);const Hl=new mo(No[0]/No[3],No[1]/No[3],No[2]/No[3]);No[0]=ra,No[1]=ba,No[2]=ys.top,No[3]=1,l.aA.transformMat4(No,No,Co),No[3]=Math.max(No[3],1e-5);const zl=new mo(No[0]/No[3],No[1]/No[3],No[2]/No[3]);Ys.push(Hl),Ss.push(zl)}Fr.push(Ys),Lr.push(Ss)}return[Fr,Lr]}(nn,Yt,Sn,Rn,ai,Di,wi,Zi,Mo):function(yo,Ri,vo,Oo,Co){const ar=[],Ao=[],jo=Co[8]*Ri,Jr=Co[9]*Ri,Fr=Co[10]*Ri,Lr=Co[11]*Ri,No=Co[8]*vo,ns=Co[9]*vo,Ys=Co[10]*vo,Ss=Co[11]*vo;for(const ha of yo){const ra=[],ba=[];for(const ys of ha){const Hl=ys.x+Oo.x,zl=ys.y+Oo.y,Qa=Co[0]*Hl+Co[4]*zl+Co[12],Ba=Co[1]*Hl+Co[5]*zl+Co[13],Ua=Co[2]*Hl+Co[6]*zl+Co[14],rc=Co[3]*Hl+Co[7]*zl+Co[15],sc=Qa+jo,Iu=Ba+Jr,ou=Ua+Fr,s1=Math.max(rc+Lr,1e-5),rd=Qa+No,Xc=Ba+ns,Gd=Ua+Ys,m0=Math.max(rc+Ss,1e-5);ra.push(new mo(sc/s1,Iu/s1,ou/s1)),ba.push(new mo(rd/m0,Xc/m0,Gd/m0))}ar.push(ra),Ao.push(ba)}return[ar,Ao]}(nn,Yt,Sn,Rn,ai)),_t=t.queryGeometry;var bt,nn,Yt,Sn,Rn,ai,Di,wi,Zi,Mo;return function(bt,nn,Yt){let Sn=1/0;D2(Yt,nn)&&(Sn=lo(Yt,nn[0]));for(let Rn=0;Rn<nn.length;Rn++){const ai=nn[Rn],Di=bt[Rn];for(let wi=0;wi<ai.length-1;wi++){const Zi=ai[wi],Mo=[Zi,ai[wi+1],Di[wi+1],Di[wi],Zi];wu(Yt,Mo)&&(Sn=Math.min(Sn,lo(Yt,Mo)))}}return Sn!==1/0&&Sn}(je,gt,_t.isPointQuery()?_t.screenBounds:_t.screenGeometry)}},line:class extends el{constructor(t,e,n,s){super(t,Tm,e,n,s),Tm.layout&&(this.layout=new za(Tm.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Ah,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=m3.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new W2(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(t,e,n){const s=Ug(this);return{config:new g1(this,{zoom:e,lut:n}),defines:s,overrideFog:!1}}queryRadius(t){const e=t,n=_6(Ap("line-width",this,e),Ap("line-gap-width",this,e)),s=Ap("line-offset",this,e);return n/2+Math.abs(s)+gm(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,s,u,m){if(t.queryGeometry.isAboveHorizon)return!1;const g=vf(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,t.pixelToTileUnitsFactor),E=t.pixelToTileUnitsFactor/2*_6(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),T=this.paint.get("line-offset").evaluate(e,n);return T&&(s=function(z,$){const W=[],Q=new Io(0,0);for(let le=0;le<z.length;le++){const de=z[le],be=[];for(let xe=0;xe<de.length;xe++){const je=de[xe],gt=de[xe+1],_t=0===xe?Q:je.sub(de[xe-1])._unit()._perp(),bt=xe===de.length-1?Q:gt.sub(je)._unit()._perp(),nn=_t._add(bt)._unit();nn._mult(1/(nn.x*bt.x+nn.y*bt.y)),be.push(nn._mult($)._add(je))}W.push(be)}return W}(s,T*t.pixelToTileUnitsFactor)),function(z,$,W){for(let Q=0;Q<$.length;Q++){const le=$[Q];if(z.length>=3)for(let de=0;de<le.length;de++)if(Qu(z,le[de]))return!0;if(Mp(z,le,W))return!0}return!1}(g,s,E)}isTileClipped(){return!0}isDraped(t){const e=this.layout.get("line-z-offset");return e.isConstant()&&!e.constantOr(0)}},symbol:Vv,background:class extends el{constructor(t,e,n,s){super(t,g3,e,n,s)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(t,e,n){return{overrideFog:!1}}},raster:w6,"raster-particle":x6,sky:class extends el{constructor(t,e,n,s){super(t,b3,e,n,s),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=U1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const s=this.paint.get("sky-atmosphere-sun"),u=!s,m=t.style.light,g=m.properties.get("position");return u&&"viewport"===m.properties.get("anchor")&&fa("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?w3(g.azimuthal,90-g.polar,e):w3(s[0],90-s[1],e)}const n=this.paint.get("sky-gradient-center");return w3(n[0],90-n[1],e)}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}},slot:class extends el{constructor(t,e,n,s){super(t,z5,e,null)}},model:class extends el{constructor(t,e,n,s){super(t,S4,e,n,s),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(t){return new E3(t)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(t){return t instanceof lv?Z-1:0}queryIntersectsFeature(t,e,n,s,u,m){if(!this.modelManager)return!1;const g=this.modelManager,E=t.tile.getBucket(this);if(!(E&&E instanceof E3))return!1;const T=E;for(const z in T.instancesPerModel){const $=T.instancesPerModel[z],W=void 0!==e.id?e.id:e.properties&&e.properties.hasOwnProperty("id")?e.properties.id:void 0;if($.idToFeaturesIndex.hasOwnProperty(W)){const Q=$.features[$.idToFeaturesIndex[W]],le=g.getModel(z,this.scope);if(!le)return!1;let de=l.ad.create();const be=new oa(0,0),xe=T.canonical;let je=Number.MAX_VALUE;for(let gt=0;gt<Q.instancedDataCount;++gt){const _t=16*(Q.instancedDataOffset+gt),bt=$.instancedDataArray.float32,nn=[bt[_t+4],bt[_t+5],bt[_t+6]];N6(xe,be,bt[_t],0|bt[_t+1]),C3(de,le,m,be,Q.rotation,Q.scale,nn,!1,!1,!1),"globe"===m.projection.name&&(de=x3(de,m));const Yt=l.ad.multiply([],m.projMatrix,de),Sn=t.queryGeometry,Rn=C6(Sn.isPointQuery()?Sn.screenBounds:Sn.screenGeometry,m,Yt,le.aabb);null!=Rn&&(je=Math.min(Rn,je))}return je!==Number.MAX_VALUE&&je}}return!1}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven()||"model-color"!==t&&"model-color-mix-intensity"!==t&&"model-rotation"!==t&&"model-scale"!==t&&"model-translation"!==t&&"model-emissive-strength"!==t)}_isPropertyZoomDependent(t){const e=this._transitionablePaint._values[t];return null!=e&&null!=e.value&&null!=e.value.expression&&e.value.expression instanceof Je}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(t,e,n,s){const u=t.tile,m=u.getBucket(this);let g=null,E=Number.MAX_VALUE;if(!(m&&m instanceof lv))return{queryFeature:g,intersectionZ:E};const T=m.getNodesInfo()[e];if(T.hiddenByReplacement||!T.node.meshes||!n.filter(new ts(u.tileID.overscaledZ),T.feature,u.tileID.canonical))return{queryFeature:g,intersectionZ:E};const z=T.node,$=s.calculatePosMatrix(u.tileID.toUnwrapped(),s.worldSize),W=T.evaluatedScale;let Q=0;s.elevation&&z.elevation&&(Q=z.elevation*s.elevation.exaggeration()),l.ad.translate($,$,[(z.anchor?z.anchor[0]:0)*(W[0]-1),(z.anchor?z.anchor[1]:0)*(W[1]-1),Q]),l.ad.scale($,$,W),l.ad.multiply($,$,z.matrix);const le=t.queryGeometry,de=le.isPointQuery()?le.screenBounds:le.screenGeometry,be=function(je){const gt=l.ad.multiply([],$,je.matrix),_t=l.ad.multiply(gt,s.expandedFarZProjMatrix,gt);for(let bt=0;bt<je.meshes.length;++bt){const nn=je.meshes[bt];if(bt===je.lightMeshIndex)continue;const Yt=C6(de,s,_t,nn.aabb);null!=Yt&&(E=Math.min(Yt,E))}if(je.children)for(const bt of je.children)be(bt)};if(be(z),E===Number.MAX_VALUE)return{queryFeature:g,intersectionZ:E};const xe=new oa(0,0);return N6(u.tileID.canonical,xe,T.node.anchor[0],T.node.anchor[1]),g={type:"Feature",geometry:{type:"Point",coordinates:[xe.lng,xe.lat]},properties:T.feature.properties,id:T.feature.id,state:{},layer:this.serialize()},{queryFeature:g,intersectionZ:E}}},clip:class extends el{constructor(t,e,n,s){super(t,$e,e,n,s)}recalculate(t,e){super.recalculate(t,e)}createBucket(t){return new X(t)}isTileClipped(){return!0}is3D(){return!0}}};at(g6,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});const F6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class R3{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,s]=new Uint8Array(e,0,2);if(219!==n)throw new Error("Data does not appear to be in a KDBush format.");const u=s>>4;if(1!==u)throw new Error(`Got v${u} data when expected v1.`);const m=F6[15&s];if(!m)throw new Error("Unrecognized array type.");const[g]=new Uint16Array(e,2,1),[E]=new Uint32Array(e,4,1);return new R3(E,g,m,e)}constructor(e,n=64,s=Float64Array,u){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const m=F6.indexOf(this.ArrayType),g=2*e*this.ArrayType.BYTES_PER_ELEMENT,E=e*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-E%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${s}.`);u&&u instanceof ArrayBuffer?(this.data=u,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+E+T,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+g+E+T),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+E+T,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=n,s}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return z3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:g,nodeSize:E}=this,T=[0,m.length-1,0],z=[];for(;T.length;){const $=T.pop()||0,W=T.pop()||0,Q=T.pop()||0;if(W-Q<=E){for(let xe=Q;xe<=W;xe++){const je=g[2*xe],gt=g[2*xe+1];je>=e&&je<=s&&gt>=n&&gt<=u&&z.push(m[xe])}continue}const le=Q+W>>1,de=g[2*le],be=g[2*le+1];de>=e&&de<=s&&be>=n&&be<=u&&z.push(m[le]),(0===$?e<=de:n<=be)&&(T.push(Q),T.push(le-1),T.push(1-$)),(0===$?s>=de:u>=be)&&(T.push(le+1),T.push(W),T.push(1-$))}return z}within(e,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:m,nodeSize:g}=this,E=[0,u.length-1,0],T=[],z=s*s;for(;E.length;){const $=E.pop()||0,W=E.pop()||0,Q=E.pop()||0;if(W-Q<=g){for(let xe=Q;xe<=W;xe++)dv(m[2*xe],m[2*xe+1],e,n)<=z&&T.push(u[xe]);continue}const le=Q+W>>1,de=m[2*le],be=m[2*le+1];dv(de,be,e,n)<=z&&T.push(u[le]),(0===$?e-s<=de:n-s<=be)&&(E.push(Q),E.push(le-1),E.push(1-$)),(0===$?e+s>=de:n+s>=be)&&(E.push(le+1),E.push(W),E.push(1-$))}return T}}function z3(t,e,n,s,u,m){if(u-s<=n)return;const g=s+u>>1;V6(t,e,g,s,u,m),z3(t,e,n,s,g-1,1-m),z3(t,e,n,g+1,u,1-m)}function V6(t,e,n,s,u,m){for(;u>s;){if(u-s>600){const z=u-s+1,$=n-s+1,W=Math.log(z),Q=.5*Math.exp(2*W/3),le=.5*Math.sqrt(W*Q*(z-Q)/z)*($-z/2<0?-1:1);V6(t,e,n,Math.max(s,Math.floor(n-$*Q/z+le)),Math.min(u,Math.floor(n+(z-$)*Q/z+le)),m)}const g=e[2*n+m];let E=s,T=u;for(uv(t,e,s,n),e[2*u+m]>g&&uv(t,e,s,u);E<T;){for(uv(t,e,E,T),E++,T--;e[2*E+m]<g;)E++;for(;e[2*T+m]>g;)T--}e[2*s+m]===g?uv(t,e,s,T):(T++,uv(t,e,T,u)),T<=n&&(s=T+1),n<=T&&(u=T-1)}}function uv(t,e,n,s){O3(t,n,s),O3(e,2*n,2*s),O3(e,2*n+1,2*s+1)}function O3(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}function dv(t,e,n,s){const u=t-n,m=e-s;return u*u+m*m}l.$=li,l.A=fh,l.B=Mh,l.C=Xs,l.D=Oc,l.E=Bl,l.G=Uc,l.H=b,l.I=Yg,l.J=v,l.K=function(t){const e=t.value;let n=[];if(!e)return n;const s=cd(e);return"string"!==s?(n=n.concat([new Hv(t.key,e,`string expected, "${s}" found`)]),n):(T6(e,!0)||(n=n.concat([new Hv(t.key,e,`invalid url "${e}"`)])),n)},l.L=ri,l.M=class{constructor(t,e,n,s){this.id=t,this.position=null!=e?new oa(e[0],e[1]):new oa(0,0),this.orientation=null!=n?n:[0,0,0],this.nodes=s,this.uploaded=!1,this.aabb=new pl([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(t,e){if(l.ad.multiply(t.matrix,e,t.matrix),t.meshes)for(const n of t.meshes){const s=pl.applyTransformFast(n.aabb,t.matrix);this.aabb.encapsulate(s)}if(t.children)for(const n of t.children)this._applyTransformations(n,t.matrix)}computeBoundsAndApplyParent(){const t=l.ad.identity([]);for(const e of this.nodes)this._applyTransformations(e,t)}computeModelMatrix(t,e,n,s,u,m,g=!1){C3(this.matrix,this,t.transform,this.position,e,n,s,u,m,g)}upload(t){if(!this.uploaded){for(const e of this.nodes)k3(e,t);for(const e of this.nodes)ev(e);this.uploaded=!0}}destroy(){for(const t of this.nodes)S3(t)}},l.N=pa,l.O=qi,l.P=Io,l.Q=class{constructor(t){this.specification=t}possiblyEvaluate(t,e){return Zs(t.expression.evaluate(e))}interpolate(t,e,n){return{x:Rr(t.x,e.x,n),y:Rr(t.y,e.y,n),z:Rr(t.z,e.z,n),azimuthal:Rr(t.azimuthal,e.azimuthal,n),polar:Rr(t.polar,e.polar,n)}}},l.R=vt,l.S=Z0,l.T=$i,l.U=Hs,l.V=Hv,l.W=mi,l.X=ts,l.Y=$d,l.Z=Je,l.a=Vu,l.a$=function(t){const{x:e,y:n}=t.point,{lng:s,lat:u}=t._center;return bm(e,n,t.worldSize,s,u)},l.a0=za,l.a1=rh,l.a2=Rr,l.a3=Z,l.a4=yd,l.a5=class{constructor(t){this.specification=t}possiblyEvaluate(t,e){return function([n,s]){const u=Zs([1,n,s]);return{x:u.x,y:u.y,z:u.z}}(t.expression.evaluate(e))}interpolate(t,e,n){return{x:Rr(t.x,e.x,n),y:Rr(t.y,e.y,n),z:Rr(t.z,e.z,n)}}},l.a6=bh,l.a7=ip,l.a8=nh,l.a9=df,l.aB=function(t,e){const{x:n,y:s}=t.point,u=bm(n,s,t.worldSize/t._pixelsPerMercatorPixel,0,0);return l.ad.multiply(u,u,dp(oh(e)))},l.aD=B,l.aE=xi,l.aF=Lm,l.aG=function(t,e,n,s,u){const m=5*e+2;t.float32[m+0]=n,t.float32[m+1]=s,t.float32[m+2]=u},l.aH=v2,l.aI=oa,l.aJ=y4,l.aK=Xf,l.aL=Ec,l.aM=El,l.aN=yg,l.aO=cp,l.aP=Rp,l.aQ=function(t,e,n,s,u,m,g,E,T){if("globe"===T.name)return Rp(t,e,new cp(n,s,u),!1);const z=Ac({z:n,x:s,y:u},T);return new pl([(m+z.x/z.scale)*e,e*(z.y/z.scale),g],[(m+z.x2/z.scale)*e,e*(z.y2/z.scale),E])},l.aR=function(t,e,n){let s=0;for(let u=0;u<2;++u)t[u]>0&&(s+=(t[u]-0)*(t[u]-0)),e[u]<0&&(s+=(0-e[u])*(0-e[u]));return s},l.aS=Yl,l.aT=Zf,l.aU=Wf,l.aV=function(t){const e=l.ad.identity(new Float64Array(16));l.ad.multiply(e,t.pixelMatrix,t.globeMatrix);const n=[0,o0,0],s=[0,yu,0];return l._.transformMat4(n,n,e),l._.transformMat4(s,s,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!Op(t,new oa(t.center.lat,90)),s[0]>0&&s[0]<=t.width&&s[1]>0&&s[1]<=t.height&&!Op(t,new oa(t.center.lat,-90))]},l.aW=function(t,e){const{scale:n}=t.tileTransform,s=n*Z/(t.tileSize*Math.pow(2,e.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return l.aC.scale(new Float32Array(4),e.inverseAdjustmentMatrix,[s,s])},l.aX=bg,l.aY=I6,l.aZ=function(t){const e=I6(t,!0);return l.aC.invert([],[e[0],e[1],e[4],e[5]])},l.a_=R2,l.aa=Gc,l.ab=rs,l.ac=function(t,e,n){const s=Math.sqrt(t*t+e*e+n*n),u=s>0?Math.acos(n/s)*vl:0;let m=0!==t||0!==e?Math.atan2(-e,-t)*vl+90:0;return m<0&&(m+=360),[s,m,u]},l.ae=$m,l.af=Y1,l.ag=Zg,l.ah=function(t,e){const n={};for(let s=0;s<e.length;s++){const u=e[s];u in t&&(n[u]=t[u])}return n},l.ai=n1,l.aj=r0,l.ak=$h,l.al=wl,l.am=function(t){js++,js>Xr&&(t.getActor().send("enforceCacheSizeLimit",gr),js=0)},l.an=Ih,l.ao=class{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,s){const u=this.entries[t]=this.entries[t]||{callbacks:[]};if(u.result){const[m,g]=u.result;return this.scheduler?this.scheduler.add(()=>{s(m,g)},e):s(m,g),()=>{}}return u.callbacks.push(s),u.cancel||(u.cancel=n((m,g)=>{u.result=[m,g];for(const E of u.callbacks)this.scheduler?this.scheduler.add(()=>{E(m,g)},e):E(m,g);setTimeout(()=>delete this.entries[t],3e3)})),()=>{u.result||(u.callbacks=u.callbacks.filter(m=>m!==s),u.callbacks.length||(u.cancel(),delete this.entries[t]))}}},l.ap=function(t,e,n){const s=JSON.stringify(t.request);return t.data&&(this.deduped.entries[s]={result:[null,t.data]}),this.deduped.request(s,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},u=>{const m=Tr(t.request,(g,E,T,z)=>{g?u(g):E&&u(null,{vectorTile:n?void 0:new To(new h2(E)),rawData:E,cacheControl:T,expires:z})});return()=>{m.cancel(),u()}},e)},l.aq=op,l.ar=class extends m1{constructor(t){super(t),this.current=hf}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let s=0;s<9;s++)if(n[s]!==this.current[s]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},l.as=Hf,l.at=On,l.au=bo,l.aw=St,l.ax=Dl,l.ay=Fc,l.az=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},l.b=al,l.b$=w,l.b0=Na,l.b1=sp,l.b2=function(t){const e=Math.round((t+45+360)%360/90)%4;return nt[e]},l.b3=45,l.b4=Kf,l.b5=mf,l.b6=pl,l.b7=Zs,l.b8=function(t){return[Math.pow(t[0],1/2.2),Math.pow(t[1],1/2.2),Math.pow(t[2],1/2.2)]},l.b9=Dt,l.bA=function(t,e){return[Math.pow(t[0],2.2)*e,Math.pow(t[1],2.2)*e,Math.pow(t[2],2.2)*e]},l.bB=$g,l.bD=Jf,l.bE=Mi,l.bF=Gn,l.bG=256,l.bH=function(t,e){const n=[0,0,0],s=zp(oh(e.canonical));return l._.transformMat4(n,n,s),l._.transformMat4(n,n,t),n},l.bI=t=>({u_camera_to_center_distance:new Gc(t),u_extrude_scale:new pf(t),u_device_pixel_ratio:new Gc(t),u_matrix:new bh(t),u_inv_rot_matrix:new bh(t),u_merc_center:new nh(t),u_tile_id:new op(t),u_zoom_transition:new Gc(t),u_up_dir:new op(t),u_emissive_strength:new Gc(t)}),l.bJ=t=>({u_matrix:new bh(t),u_pixels_to_tile_units:new pf(t),u_device_pixel_ratio:new Gc(t),u_units_to_pixels:new nh(t),u_dash_image:new ip(t),u_gradient_image:new ip(t),u_image_height:new Gc(t),u_texsize:new nh(t),u_tile_units_to_pixels:new Gc(t),u_alpha_discard_threshold:new Gc(t),u_trim_offset:new nh(t),u_trim_fade_range:new nh(t),u_trim_color:new Hf(t),u_emissive_strength:new Gc(t)}),l.bK=t=>({u_matrix:new bh(t),u_texsize:new nh(t),u_pixels_to_tile_units:new pf(t),u_device_pixel_ratio:new Gc(t),u_image:new ip(t),u_units_to_pixels:new nh(t),u_tile_units_to_pixels:new Gc(t),u_alpha_discard_threshold:new Gc(t),u_trim_offset:new nh(t)}),l.bL=xc,l.bM=xv,l.bN=xu,l.bO=_,l.bP=Cv,l.bQ=Vs,l.bR=e2,l.bS=(t,e,n,s,u,m)=>{const g=t.transform,E="globe"===g.projection.name;let T;if("map"===m.paint.get("circle-pitch-alignment"))if(E){const $=Jf(g.zoom,e.canonical)*g._pixelsPerMercatorPixel;T=Float32Array.from([$,0,0,$])}else T=g.calculatePixelsToTileUnitsMatrix(n);else T=new Float32Array([g.pixelsToGLUnits[0],0,0,g.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:t.transform.getCameraToCenterDistance(g.projection),u_matrix:t.translatePosMatrix(e.projMatrix,n,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:ki.devicePixelRatio,u_extrude_scale:T,u_inv_rot_matrix:Og,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(E){z.u_inv_rot_matrix=s,z.u_merc_center=u,z.u_tile_id=[e.canonical.x,e.canonical.y,1<<e.canonical.z],z.u_zoom_transition=rh(g.zoom);const $=u[0]*Z,W=u[1]*Z;z.u_up_dir=g.projection.upVector(new cp(0,0,0),$,W)}return z},l.bT=Ug,l.bU=(t,e,n,s,u,m)=>{const g=t.transform;return{u_matrix:m4(t,e,n,s),u_texsize:e.imageAtlasTexture?e.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:g.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:u,u_image:0,u_tile_units_to_pixels:jg(e,g),u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:m}},l.bV=(t,e,n,s,u,m,g)=>{const E=t.transform,T=E.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:m4(t,e,n,s),u_pixels_to_tile_units:T,u_device_pixel_ratio:m,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:u,u_texsize:Hg(n)&&e.lineAtlasTexture?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:jg(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:g,u_trim_fade_range:n.paint.get("line-trim-fade-range"),u_trim_color:n.paint.get("line-trim-color").toRenderColor(n.lut).toArray01(),u_emissive_strength:n.paint.get("line-emissive-strength")}},l.bW=os,l.bX=U1,l.bY=qa,l.bZ=pm,l.b_=Zo,l.ba=function(t,e,n){const s=rh(n.zoom),u=t.style.map._antialias,m=e.options.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===s&&!u&&!m},l.bb=function(t){const e=t.pixelsPerMeter,n=e/Dl(1,t.center.lat),s=l.ad.identity(new Float64Array(16));return l.ad.translate(s,s,[t.point.x,t.point.y,0]),l.ad.scale(s,s,[n,n,e]),Float32Array.from(s)},l.bc=V1,l.bd=function(t){const e=Yl-5;t=On(t,-e,e)/e*90;const n=Math.pow(Math.abs(Math.sin(rs(t))),3);return Math.round(n*(qf.length-1))},l.be=function(t,e,n,s){const u=e.getNorth(),m=e.getSouth(),g=e.getWest(),E=e.getEast(),T=1<<t.z,z=E-g,$=u-m,W=z/64,Q=-$/qf[n],le=[0,W,0,Q,0,0,u,g,0];if(t.z>0){const de=180/s;l.bC.multiply(le,le,[de/z+1,0,0,0,de/$+1,0,-.5*de/W,.5*de/Q,1])}return le[2]=T,le[5]=t.x,le[8]=t.y,le},l.bf=zp,l.bg=oh,l.bh=function(t,e,n){const s=l.ad.identity(new Float64Array(16)),u=(e/(1<<t)-.5)*Math.PI*2;return l.ad.rotateY(s,n.globeMatrix,u),Float32Array.from(s)},l.bi=Li,l.bj=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},l.bk=w6,l.bl=x6,l.bm=_3,l.bn=function(t,e){const n=document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let s=0;s<t.length;s++){const u=document.createElement("source");Wa(t[s])||(n.crossOrigin="Anonymous"),u.src=t[s],n.appendChild(u)}return{cancel:()=>{}}},l.bo=Do,l.bp=ea,l.bq=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const n=e.getSource().maxzoom,s=1<<n,u=Math.floor(t.x),m=Math.floor((t.x-u)*s),g=Math.floor(t.y*s),E=this.findDEMTileFor(new Ec(n,u,n,m,g));return!(!E||!E.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){if(this.isUsingMockSource())return null;null==e&&(e=null);const s=this._source();if(!s||t.y<0||t.y>1)return e;const u=s.getSource().maxzoom,m=1<<u,g=Math.floor(t.x),E=t.x-g,T=new Ec(u,g,u,Math.floor(E*m),Math.floor(t.y*m)),z=this.findDEMTileFor(T);if(!z||!z.dem)return e;const $=z.dem,W=1<<z.tileID.canonical.z,Q=(E*W-z.tileID.canonical.x)*$.dim,le=(t.y*W-z.tileID.canonical.y)*$.dim,de=Math.floor(Q),be=Math.floor(le);return(n?this.exaggeration():1)*Rr(Rr($.get(de,be),$.get(de,be+1),le-be),Rr($.get(de+1,be),$.get(de+1,be+1),le-be),Q-de)}getAtTileOffset(t,e,n){const s=1<<t.canonical.z;return this.getAtPointOrZero(new $d(t.wrap+(t.canonical.x+e/Z)/s,(t.canonical.y+n/Z)/s))}getAtTileOffsetFunc(t,e,n,s){return u=>{const m=this.getAtTileOffset(t,u.x,u.y),g=s.upVector(t.canonical,u.x,u.y),E=s.upVectorScale(t.canonical,e,n).metersToTile;return l._.scale(g,g,m*E),g}}getForTilePoints(t,e,n,s){if(this.isUsingMockSource())return!1;const u=Hp.create(this,t,s);return!!u&&(e.forEach(m=>{m[2]=this.exaggeration()*u.getElevationAt(m[0],m[1],n)}),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,s=e.tileID,u=1<<t.canonical.z-s.canonical.z;let m=t.canonical.x/u-s.canonical.x,g=t.canonical.y/u-s.canonical.y,E=0;for(let T=0;T<t.canonical.z-s.canonical.z&&!n.leaves[E];T++){m*=2,g*=2;const z=2*Math.floor(g)+Math.floor(m);E=n.childOffsets[E]+z,m%=1,g%=1}return{min:this.exaggeration()*n.minimums[E],max:this.exaggeration()*n.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const t=this.visibleDemTiles;if(0===t.length)return null;let e=!1,n=Number.MAX_VALUE,s=Number.MIN_VALUE;for(const u of t){const m=this.getMinMaxForTile(u.tileID);m&&(n=Math.min(n,m.min),s=Math.max(s,m.max),e=!0)}return e?{min:n,max:s}:null}},l.br=Td,l.bs=up,l.bt=Xu,l.bu=eu,l.bv=t4,l.bw=Wv,l.bx=iv,l.by=Pv,l.bz=If,l.c=D4,l.c$=Uo,l.c0=450,l.c1=7,l.c2=y3,l.c3=v6,l.c4=256,l.c5=_f,l.c6=dp,l.c7=va,l.c8=Ru,l.c9=Y0,l.cA=function(t){let e=1/0,n=1/0,s=-1/0,u=-1/0;for(const m of t)e=Math.min(e,m.x),n=Math.min(n,m.y),s=Math.max(s,m.x),u=Math.max(u,m.y);return{min:new Io(e,n),max:new Io(s,u)}},l.cB=Qu,l.cC=fm,l.cD=Vd,l.cE=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.cF=Mc,l.cG=wu,l.cH=qs,l.cI=oc,l.cJ=Pf,l.cK=R3,l.cL=function(t){return t({pluginStatus:Wn,pluginURL:Wi}),Mr.on("pluginStateChange",t),t},l.cM=Bm,l.cN=Wg,l.cO=Zt,l.cP=vr,l.cQ=jt,l.cR=Ko,l.cS=ll,l.cT=ta,l.cU=function(t){const e=t.indexOf("\x1f");return e>=0?t.slice(0,e):t},l.cV=function(t){return t.indexOf("\x1f")>=0},l.cW=function(t){const e=t.indexOf("\x1f");return e>=0?t.slice(e+1):""},l.cX=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},l.cY=function(t,e,n,s){return"custom"===t.type?new P5(t,e):new X5[t.type](t,e,n,s)},l.cZ=Yr,l.c_=Mr,l.ca=1,l.cb=771,l.cc=0,l.cd=O0,l.ce=function(t,e,n,s,u){return On((t-e)/(n-e)*(u-s)+s,s,u)},l.cf=q0,l.cg=Zl,l.ch=class{constructor(t,e,n,s){this.context=t,this.format=s,this.size=n,this.texture=t.gl.createTexture();const[u,m,g]=this.size,{gl:E}=t;E.bindTexture(E.TEXTURE_3D,this.texture),t.pixelStoreUnpackFlipY.set(!1),t.pixelStoreUnpack.set(1),t.pixelStoreUnpackPremultiplyAlpha.set(!1);let T=this.format,z=E.UNSIGNED_BYTE;this.format===E.DEPTH_COMPONENT&&(T=E.DEPTH_COMPONENT16,z=E.UNSIGNED_SHORT),this.format===E.R8&&(s=E.RED),this.format===E.R32F&&(z=E.FLOAT,s=E.RED),E.texImage3D(E.TEXTURE_3D,0,T,u,m,g,0,s,z,e.data)}bind(t,e){const{context:n}=this,{gl:s}=n;s.bindTexture(s.TEXTURE_3D,this.texture),t!==this.minFilter&&(s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MAG_FILTER,t),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MIN_FILTER,t),this.minFilter=t),e!==this.wrapS&&(s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_S,e),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_T,e),this.wrapS=e)}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}},l.ci=x3,l.cj=[1,1,1],l.ck=Hp,l.cl=Q4,l.cm=Vh,l.cn=th,l.co=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Io(1/0,1/0),max:new Io(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(t,e=!1){const n=wo(new Io(0,0),new Io(Z,Z),t),s=[];if(e&&!Or(n,this._globalClipBounds))return s;for(const u of this._activeRegions){if(u.hiddenByOverlap||!Or(n,u))continue;const m=Gr(u.min,u.max,t);s.push({min:m.min,max:m.max,sourceId:this._sourceIds[u.priority],footprint:u.footprint,footprintTileId:u.tileId,order:u.order,clipMask:u.clipMask})}return s}setSources(t){this._setSources(t.map(e=>({getSourceId:()=>e.cache.id,getFootprints:()=>{const n=[];for(const s of e.cache.getVisibleCoordinates()){const u=e.cache.getTile(s).buckets[e.layer];u&&u.updateFootprints(s.toUnwrapped(),n)}return n},getOrder:()=>e.order,getClipMask:()=>e.clipMask})))}_addSource(t){const e=t.getFootprints();if(0===e.length)return;const n=t.getOrder(),s=t.getClipMask();for(const u of e){if(!u.footprint)continue;const m=wo(u.footprint.min,u.footprint.max,u.id);this._activeRegions.push({min:m.min,max:m.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:u.id,footprint:u.footprint,order:n,clipMask:s})}this._sourceIds.push(t.getSourceId())}_computeReplacement(){this._activeRegions.sort((e,n)=>e.priority-n.priority||$o(e.min,n.min)||$o(e.max,n.max));let t=this._activeRegions.length!==this._prevRegions.length;if(!t){let e=0;for(;!t&&e!==this._activeRegions.length;){const n=this._activeRegions[e],s=this._prevRegions[e];t=n.priority!==s.priority||!Ho(n,s)||n.order!==s.order||n.clipMask!==s.clipMask,++e}}if(t){++this._updateTime;for(const n of this._activeRegions)n.order!==1/0&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,n.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,n.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,n.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,n.max.y));const e=n=>{const s=this._activeRegions;if(n>=s.length)return n;const u=s[n].priority;for(;n<s.length&&s[n].priority===u;)++n;return n};if(this._sourceIds.length>1){let n=0,s=e(n);for(;n!==s;){let u=n;const m=n;for(;u!==s;){const g=this._activeRegions[u];g.hiddenByOverlap=!1;for(let E=0;E<m;E++){const T=this._activeRegions[E];if(!T.hiddenByOverlap&&g.order===1/0&&Or(g,T)&&(g.hiddenByOverlap=iu(g.footprint,g.tileId,T.footprint,T.tileId),g.hiddenByOverlap))break}++u}n=s,s=e(n)}}}}_setSources(t){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let e=t.length-1;e>=0;e--)this._addSource(t[e]);this._computeReplacement()}},l.cp=Fh,l.cq=Uh,l.cr=tu,l.cs=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy()}_fillGridMeshWithLods(t,e){const n=new Xu,s=new eu,u=[],m=t+1+2,g=e[0]+1,E=e[0]+1+(1+e.length),T=(z,$,W)=>{let Q=z===m-1?z-2:0===z?z:z-1;return Q+=W?24575:0,[Q,$]};for(let z=0;z<m;++z)n.emplaceBack(...T(z,0,!0));for(let z=0;z<g;++z)for(let $=0;$<m;++$)n.emplaceBack(...T($,z,(0===$||$===m-1)&&!0));for(let z=0;z<e.length;++z){const $=e[z];for(let W=0;W<m;++W)n.emplaceBack(...T(W,$,!0))}for(let z=0;z<e.length;++z){const $=s.length,W=e[z]+1+2,Q=new eu;for(let be=0;be<W-1;be++){const xe=be===W-2,je=xe?m*(E-e.length+z-be):m;for(let gt=0;gt<m-1;gt++){const _t=be*m+gt;0===be||xe||0===gt||gt===m-2?(Q.emplaceBack(_t+1,_t,_t+je),Q.emplaceBack(_t+je,_t+je+1,_t+1)):(s.emplaceBack(_t+1,_t,_t+je),s.emplaceBack(_t+je,_t+je+1,_t+1))}}const le=al.simpleSegment(0,$,n.length,s.length-$);for(let be=0;be<Q.uint16.length;be+=3)s.emplaceBack(Q.uint16[be],Q.uint16[be+1],Q.uint16[be+2]);const de=al.simpleSegment(0,$,n.length,s.length-$);u.push({withoutSkirts:le,withSkirts:de})}return{vertices:n,indices:s,segments:u}}_createGrid(t){const e=this._fillGridMeshWithLods(64,qf);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,Td.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}_createPoles(t){const e=new eu;for(let g=0;g<=64;g++)e.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const n=new Y0,s=new Y0,u=new Y0,m=new Y0;this._poleSegments=[];for(let g=0,E=0;g<sp;g++){const T=360/(1<<g);n.emplaceBack(0,-Vd,0,.5,0),s.emplaceBack(0,-Vd,0,.5,1),u.emplaceBack(0,-Vd,0,.5,.5),m.emplaceBack(0,-Vd,0,.5,.5);for(let z=0;z<=64;z++){let $=z/64,W=0;const Q=Rr(0,T,$),[le,de,be]=t1(wm,N2,Q,Vd);n.emplaceBack(le,de,be,$,W),s.emplaceBack(le,de,be,$,1-W);const xe=rs(Q);$=.5+.5*Math.sin(xe),W=.5+.5*Math.cos(xe),u.emplaceBack(le,de,be,$,W),m.emplaceBack(le,de,be,$,1-W)}this._poleSegments.push(al.simpleSegment(E,0,66,64)),E+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,Zm,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(s,Zm,!1),this._texturedPoleNorthVertexBuffer=t.createVertexBuffer(u,Zm,!1),this._texturedPoleSouthVertexBuffer=t.createVertexBuffer(m,Zm,!1)}getGridBuffers(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t,e){return[e?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,e?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}},l.ct=function(t){return ks.has(t)},l.cu=rg,l.cv=function(t,e,n=0,s=!0){const u=new Io(n,n),m=t.sub(u),g=e.add(u),E=[m,new Io(g.x,m.y),g,new Io(m.x,g.y)];return s&&E.push(m.clone()),E},l.cw=function(t,e){const n=[];for(let s=0;s<t.length;s++){const u=bo(s-1,-1,t.length-1),m=bo(s+1,-1,t.length-1),g=t[s],E=t[m],T=t[u].sub(g).unit(),z=E.sub(g).unit(),$=z.angleWithSep(T.x,T.y),W=T.add(z).unit().mult(-1*e/Math.sin($/2));n.push(g.add(W))}return n},l.cx=Sv,l.cy=Ym,l.cz=function(t,e,n=0){return l._.fromValues(((e.x-n)*t.scale-t.x)*Z,(e.y*t.scale-t.y)*Z,Dg(e.z,e.y))},l.d=Ls,l.d$=vc,l.d0=Hn,l.d1=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},l.d2=Yn,l.d3=Xm,l.d4=Ic,l.d5=function([t,e,n]){const s=Math.hypot(t,e,n),u=Math.atan2(t,n),m=.5*Math.PI-Math.acos(-e/s);return new oa(Na(u),Na(m))},l.d6=bu,l.d7=lp,l.d8=ft,l.d9=Op,l.dA=function(t){const e=ms();if(!e)return;const n=e.delete(sr);t&&n.catch(t).then(()=>t())},l.dB=nv,l.dC=R6,l.dD=function(t){qv=ki.resolveURL(t),wg||(wg=new Wv(iv(),new Bl)),wg.broadcast("setDracoUrl",qv)},l.dE=z6,l.dF=function(t){qc=ki.resolveURL(t),wg||(wg=new Wv(iv(),new Bl)),wg.broadcast("setMeshoptUrl",qc)},l.dG=so,l.dH=at,l.dI=l0,l.dJ=h0,l.dK=Ac,l.dL=zu,l.dM=q2,l.dN=Af,l.dO=Fg,l.dP=Nr,l.dQ=f2,l.dR=an,l.dS=function(t,e,n,s,u,m,g,E,T,z,$){t.createArrays(),t.tilePixelRatio=Z/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const W=t.layers[0].layout,Q=t.layers[0]._unevaluatedLayout._values,le={};if("composite"===t.textSizeData.kind){const{minZoom:je,maxZoom:gt}=t.textSizeData;le.compositeTextSizes=[Q["text-size"].possiblyEvaluate(new ts(je),E),Q["text-size"].possiblyEvaluate(new ts(gt),E)]}if("composite"===t.iconSizeData.kind){const{minZoom:je,maxZoom:gt}=t.iconSizeData;le.compositeIconSizes=[Q["icon-size"].possiblyEvaluate(new ts(je),E),Q["icon-size"].possiblyEvaluate(new ts(gt),E)]}le.layoutTextSize=Q["text-size"].possiblyEvaluate(new ts(T+1),E),le.layoutIconSize=Q["icon-size"].possiblyEvaluate(new ts(T+1),E),le.textMaxSize=Q["text-size"].possiblyEvaluate(new ts(18),E);const de="map"===W.get("text-rotation-alignment")&&"point"!==W.get("symbol-placement"),be=W.get("text-size");let xe=!1;for(const je of t.features)if(je.icon&&je.icon.nameSecondary){xe=!0;break}for(const je of t.features){const gt=W.get("text-font").evaluate(je,{},E).join(","),_t=be.evaluate(je,{},E),bt=le.layoutTextSize.evaluate(je,{},E),nn=(le.layoutIconSize.evaluate(je,{},E),{horizontal:{},vertical:void 0}),Yt=je.text;let Sn,Rn=[0,0];if(Yt){const wi=Yt.toString(),Zi=W.get("text-letter-spacing").evaluate(je,{},E)*xu,Mo=W.get("text-line-height").evaluate(je,{},E)*xu,Gi=eo(wi)?Zi:0,yo=W.get("text-anchor").evaluate(je,{},E),Ri=W.get("text-variable-anchor");if(!Ri){const Ao=W.get("text-radial-offset").evaluate(je,{},E);Rn=Ao?Cv(yo,[Ao*xu,j4]):W.get("text-offset").evaluate(je,{},E).map(jo=>jo*xu)}let vo=de?"center":W.get("text-justify").evaluate(je,{},E);const Oo="point"===W.get("symbol-placement"),Co=Oo?W.get("text-max-width").evaluate(je,{},E)*xu:1/0,ar=Ao=>{t.allowVerticalPlacement&&_i(wi)&&(nn.vertical=xo(Yt,e,n,u,gt,Co,Mo,yo,Ao,Gi,Rn,xi.vertical,!0,bt,_t))};if(!de&&Ri){const Ao="auto"===vo?Ri.map(Jr=>Pf(Jr)):[vo];let jo=!1;for(let Jr=0;Jr<Ao.length;Jr++){const Fr=Ao[Jr];if(!nn.horizontal[Fr])if(jo)nn.horizontal[Fr]=nn.horizontal[0];else{const Lr=xo(Yt,e,n,u,gt,Co,Mo,"center",Fr,Gi,Rn,xi.horizontal,!1,bt,_t);Lr&&(nn.horizontal[Fr]=Lr,jo=1===Lr.positionedLines.length)}}ar("left")}else{if("auto"===vo&&(vo=Pf(yo)),Oo||W.get("text-writing-mode").indexOf("horizontal")>=0||!_i(wi)){const Ao=xo(Yt,e,n,u,gt,Co,Mo,yo,vo,Gi,Rn,xi.horizontal,!1,bt,_t);Ao&&(nn.horizontal[vo]=Ao)}ar(Oo?"left":vo)}}let ai=!1;if(je.icon&&je.icon.namePrimary){const wi=s[je.icon.namePrimary];wi&&(Sn=Cc(u[je.icon.namePrimary],je.icon.nameSecondary?u[je.icon.nameSecondary]:void 0,W.get("icon-offset").evaluate(je,{},E),W.get("icon-anchor").evaluate(je,{},E)),ai=wi.sdf,void 0===t.sdfIcons?t.sdfIcons=wi.sdf:t.sdfIcons!==wi.sdf&&fa("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(wi.pixelRatio!==t.pixelRatio||0!==W.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const Di=U4(nn.horizontal)||nn.vertical;t.iconsInText||(t.iconsInText=!!Di&&Di.iconsInText),(Di||Sn)&&d6(t,je,nn,Sn,s,le,bt,0,Rn,ai,g,E,z,$,xe)}m&&t.generateCollisionDebugBuffers(T,t.collisionBoxArray)},l.dT=W2,l.dU=y,l.dV=To,l.dW=h2,l.dX=mp,l.dY=f3,l.dZ=Jo,l.d_=pn,l.da=bf,l.db=function(t){const e=[0,0,0],n=l.ad.identity(new Float64Array(16));return l.ad.multiply(n,t.pixelMatrix,t.globeMatrix),l._.transformMat4(e,e,n),new Io(e[0],e[1])},l.dc=yt,l.dd=Ut,l.de=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!function(n){if(null==Le){const s=n.navigator?n.navigator.userAgent:null;Le=!!n.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Le}(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},l.df=hr,l.dg=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let e="";for(let n=0;n<10;n++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",_c,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!jt(t))return t;const n=us(t);return n.params.push(`sdk=js-${We}`),n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!jt(t))return t;const n=us(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeModelURL(t,e){if(!jt(t))return t;const n=us(t);return n.path=`/models/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,s){if(!jt(t))return t;const u=us(t);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),n&&u.params.push(`language=${n}`),s&&u.params.push(`worldview=${s}`),this._makeAPIURL(u,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,s){const u=us(t);return jt(t)?(u.path=`/styles/v1${u.path}/sprite${e}${n}`,this._makeAPIURL(u,this._customAccessToken||s)):(u.path+=`${e}${n}`,ec(u))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!jt(t))return t;const s=us(t);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||n&&"raster"!==s.authority&&512===n?"@2x":""}${Sa.supported?".webp":"$1"}`),"raster"===s.authority?s.path=`/${ft.RASTER_URL_PREFIX}${s.path}`:"rasterarrays"===s.authority?s.path=`/${ft.RASTERARRAYS_URL_PREFIX}${s.path}`:"3dtiles"===s.authority?s.path=`/${ft.TILES3D_URL_PREFIX}${s.path}`:(s.path=s.path.replace(/^.+\/v4\//,"/"),s.path=`/${ft.TILE_URL_VERSION}${s.path}`);const u=this._customAccessToken||function(m){for(const g of m){const E=g.match(/^access_token=(.*)$/);if(E)return E[1]}return null}(s.params)||ft.ACCESS_TOKEN;return ft.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&s.params.push(`sku=${this._skuToken}`),this._makeAPIURL(s,u)}canonicalizeTileURL(t,e){const n=us(t);if(!n.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let s="mapbox://";n.path.match(/^\/raster\/v1\//)?s+=`raster/${n.path.replace(`/${ft.RASTER_URL_PREFIX}/`,"")}`:n.path.match(/^\/rasterarrays\/v1\//)?s+=`rasterarrays/${n.path.replace(`/${ft.RASTERARRAYS_URL_PREFIX}/`,"")}`:s+=`tiles/${n.path.replace(`/${ft.TILE_URL_VERSION}/`,"")}`;let u=n.params;return e&&(u=u.filter(m=>!m.match(/^access_token=/))),u.length&&(s+=`?${u.join("&")}`),s}canonicalizeTileset(t,e){const n=!!e&&jt(e),s=[];for(const u of t.tiles||[])qt(u)?s.push(this.canonicalizeTileURL(u,n)):s.push(u);return s}_makeAPIURL(t,e){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",s=us(ft.API_URL);if(t.protocol=s.protocol,t.authority=s.authority,"http"===t.protocol){const u=t.params.indexOf("secure");u>=0&&t.params.splice(u,1)}if("/"!==s.path&&(t.path=`${s.path}${t.path}`),!ft.REQUIRE_ACCESS_TOKEN)return ec(t);if(e=e||ft.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter(u=>-1===u.indexOf("access_token")),t.params.push(`access_token=${e||""}`),ec(t)}},l.dh=function(t,e){e?ks.add(t):ks.delete(t)},l.di=Sa,l.dj=dc,l.dk=Wd,l.dl=ch,l.dm=dh,l.dn=_d,l.dp=function(t){ks.delete(t)},l.dq=Rc,l.dr=Cu,l.ds=Eo,l.dt=We,l.du=function(t,e){gr=t,Xr=e},l.dv=function(t,e,n=!1){if(Wn===lt||Wn===cn||Wn===hn)throw new Error("setRTLTextPlugin cannot be called multiple times.");Wi=ki.resolveURL(t),Wn=lt,Qn=e,Sr(),n||Za()},l.dw=Hr,l.dx=function(){iv().acquire(P6)},l.dy=function(){const t=f0;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(P6),f0=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.dz=T4,l.e=ki,l.e0=jh,l.e1=xn,l.e2=Tr,l.e3=function(t){let e=0;if(new Uint32Array(t,0,1)[0]!==E1){const n=new Uint32Array(t,0,7),[,,s,u,m,g]=n;e=n.byteLength+u+m+g+m,(s!==t.byteLength||e>=t.byteLength)&&fa("Invalid b3dm header information.")}return D3(t,e)},l.e4=function(t,e){const n=D4(t);for(const s of n){for(const u of s.meshes)H5(u);s.lights&&(s.lightMeshIndex=s.meshes.length,s.meshes.push(G5(s.lights,e)))}return n},l.e5=lv,l.e6=Gv,l.e7=As,l.e8=function(t){Vo(),sa&&sa.then(e=>{e.keys().then(n=>{for(let s=0;s<n.length-t;s++)e.delete(n[s])})})},l.f=yc,l.g=function(t,e){return Uo(mi(t,{type:"json"}),e)},l.h=cs,l.i=Ad,l.j=Nu,l.k=Fu,l.l=function(t){return fetch(t).then(e=>e.arrayBuffer()).then(e=>D3(e,0,t))},l.m=class extends Hv{},l.n=cd,l.o=cl,l.p=im,l.q=_h,l.r=r,l.s=d,l.t=Pe,l.u=Du,l.v=fd,l.w=fa,l.x=tt,l.y=Fe,l.z=Zh}),re(0,function(l){function We(Ee){const ue=Ee?Ee.url.toString():void 0;return ue?performance.getEntriesByName(ue):[]}function Y(Ee){if("number"==typeof Ee||"boolean"==typeof Ee||"string"==typeof Ee||null==Ee)return JSON.stringify(Ee);if(Array.isArray(Ee)){let ae="[";for(const we of Ee)ae+=`${Y(we)},`;return`${ae}]`}let ue="{";for(const ae of Object.keys(Ee).sort())ue+=`${ae}:${Y(Ee[ae])},`;return`${ue}}`}function ft(Ee){let ue="";for(const ae of l.cE)ue+=`/${Y(Ee[ae])}`;return ue}class qt{constructor(ue){this.keyCache={},this._layers={},this._layerConfigs={},ue&&this.replace(ue)}replace(ue,ae){this._layerConfigs={},this._layers={},this.update(ue,[],ae)}update(ue,ae,we){this._options=we;for(const it of ue)this._layerConfigs[it.id]=it,(this._layers[it.id]=l.cY(it,this.scope,null,this._options)).compileFilter(),this.keyCache[it.id]&&delete this.keyCache[it.id];for(const it of ae)delete this.keyCache[it],delete this._layerConfigs[it],delete this._layers[it];this.familiesBySource={};const Ue=function(it,Xt){const Cn={};for(let Nn=0;Nn<it.length;Nn++){const Hi=Xt&&Xt[it[Nn].id]||ft(it[Nn]);Xt&&(Xt[it[Nn].id]=Hi);let Oi=Cn[Hi];Oi||(Oi=Cn[Hi]=[]),Oi.push(it[Nn])}const dn=[];for(const Nn in Cn)dn.push(Cn[Nn]);return dn}(l.dG(this._layerConfigs),this.keyCache);for(const it of Ue){const Xt=it.map(Fo=>this._layers[Fo.id]),Cn=Xt[0];if("none"===Cn.visibility)continue;const dn=Cn.source||"";let Nn=this.familiesBySource[dn];Nn||(Nn=this.familiesBySource[dn]={});const Hi=Cn.sourceLayer||"_geojsonTileLayer";let Oi=Nn[Hi];Oi||(Oi=Nn[Hi]=[]),Oi.push(Xt)}}}const jt=1*l.dJ;class wt{constructor(ue){const ae={},we=[];for(const Cn in ue){const dn=ue[Cn],Nn=ae[Cn]={};for(const Hi in dn.glyphs){const Oi=dn.glyphs[+Hi];if(!Oi||0===Oi.bitmap.width||0===Oi.bitmap.height)continue;const Fo=Oi.metrics.localGlyph?jt:1,nr={x:0,y:0,w:Oi.bitmap.width+2*Fo,h:Oi.bitmap.height+2*Fo};we.push(nr),Nn[Hi]=nr}}const{w:Ue,h:it}=l.j(we),Xt=new l.dI({width:Ue||1,height:it||1});for(const Cn in ue){const dn=ue[Cn];for(const Nn in dn.glyphs){const Hi=dn.glyphs[+Nn];if(!Hi||0===Hi.bitmap.width||0===Hi.bitmap.height)continue;const Oi=ae[Cn][Nn],Fo=Hi.metrics.localGlyph?jt:1;l.dI.copy(Hi.bitmap,Xt,{x:0,y:0},{x:Oi.x+Fo,y:Oi.y+Fo},Hi.bitmap)}}this.image=Xt,this.positions=ae}}l.dH(wt,"GlyphAtlas");class C{constructor(ue){this.tileID=new l.aL(ue.tileID.overscaledZ,ue.tileID.wrap,ue.tileID.canonical.z,ue.tileID.canonical.x,ue.tileID.canonical.y),this.tileZoom=ue.tileZoom,this.uid=ue.uid,this.zoom=ue.zoom,this.lut=ue.lut,this.canonical=ue.tileID.canonical,this.pixelRatio=ue.pixelRatio,this.tileSize=ue.tileSize,this.source=ue.source,this.scope=ue.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ue.showCollisionBoxes,this.collectResourceTiming=!!ue.collectResourceTiming,this.promoteId=ue.promoteId,this.isSymbolTile=ue.isSymbolTile,this.tileTransform=l.dK(ue.tileID.canonical,ue.projection),this.projection=ue.projection,this.brightness=ue.brightness,this.extraShadowCaster=!!ue.extraShadowCaster,this.tessellationStep=ue.tessellationStep}parse(ue,ae,we,Ue,it){this.status="parsing",this.data=ue,this.collisionBoxArray=new l.dL;const Xt=new l.dM(Object.keys(ue.layers).sort()),Cn=new l.dN(this.tileID,this.promoteId);Cn.bucketLayerIDs=[];const dn={},Nn=new l.dO(256,256),Hi={featureIndex:Cn,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Nn,availableImages:we,brightness:this.brightness},Oi=ae.familiesBySource[this.source];for(const Ki in Oi){const Kt=ue.layers[Ki];if(!Kt)continue;let oi=!1,Pi=!1,Xo=!1;for(const qr of Oi[Ki])"symbol"===qr[0].type?oi=!0:Pi=!0,qr[0].is3D()&&"model"!==qr[0].type&&(Xo=!0);if(this.extraShadowCaster&&!Xo||!0===this.isSymbolTile&&!oi||!1===this.isSymbolTile&&!Pi)continue;1===Kt.version&&l.w(`Vector tile source "${this.source}" layer "${Ki}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const pr=Xt.encode(Ki),es=[];for(let qr=0;qr<Kt.length;qr++){const Pa=Kt.feature(qr),Jl=Cn.getId(Pa,Ki);es.push({feature:Pa,id:Jl,index:qr,sourceLayerIndex:pr})}for(const qr of Oi[Ki]){const Pa=qr[0];(!this.extraShadowCaster||Pa.is3D()&&"model"!==Pa.type)&&(void 0!==this.isSymbolTile&&"symbol"===Pa.type!==this.isSymbolTile||Pa.minzoom&&this.zoom<Math.floor(Pa.minzoom)||Pa.maxzoom&&this.zoom>=Pa.maxzoom||"none"!==Pa.visibility&&(At(qr,this.zoom,Hi.brightness,we),(dn[Pa.id]=Pa.createBucket({index:Cn.bucketLayerIDs.length,layers:qr,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pr,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(es,Hi,this.tileID.canonical,this.tileTransform),Cn.bucketLayerIDs.push(qr.map(Jl=>Jl.id))))}}let Fo,nr,ii,jn;Nn.trim();const di={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},co=()=>{if(Fo)return this.status="done",it(Fo);if(this.extraShadowCaster)this.status="done",it(null,{buckets:l.dG(dn).filter(Ki=>!Ki.isEmpty()),featureIndex:Cn,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Hi.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(nr&&ii&&jn){const Ki=new wt(nr),Kt=new l.dQ(ii,jn,this.lut);for(const oi in dn){const Pi=dn[oi];Pi instanceof l.dR?(At(Pi.layers,this.zoom,Hi.brightness,we),l.dS(Pi,nr,Ki.positions,ii,Kt.iconPositions,this.showCollisionBoxes,we,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Pi.hasPattern&&(Pi instanceof l.dT||Pi instanceof l.dU||Pi instanceof l.b_)&&(At(Pi.layers,this.zoom,Hi.brightness,we),Pi.addFeatures(Hi,this.tileID.canonical,Kt.patternPositions,we,this.tileTransform,this.brightness))}this.status="done",it(null,{buckets:l.dG(dn).filter(oi=>!oi.isEmpty()),featureIndex:Cn,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ki.image,lineAtlas:Nn,imageAtlas:Kt,brightness:Hi.brightness})}};if(!this.extraShadowCaster){const Ki=l.dP(Hi.glyphDependencies,Pi=>Object.keys(Pi).map(Number));Object.keys(Ki).length?Ue.send("getGlyphs",{uid:this.uid,stacks:Ki,scope:this.scope},(Pi,Xo)=>{Fo||(Fo=Pi,nr=Xo,co())},void 0,!1,di):nr={};const Kt=Object.keys(Hi.iconDependencies);Kt.length?Ue.send("getImages",{icons:Kt,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Pi,Xo)=>{Fo||(Fo=Pi,ii=Xo,co())},void 0,!1,di):ii={};const oi=Object.keys(Hi.patternDependencies);oi.length?Ue.send("getImages",{icons:oi,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Pi,Xo)=>{Fo||(Fo=Pi,jn=Xo,co())},void 0,!1,di):jn={}}co()}}function At(Ee,ue,ae,we){const Ue=new l.X(ue,{brightness:ae});for(const it of Ee)it.recalculate(Ue,we)}class Ut extends l.E{constructor(ue,ae,we,Ue,it,Xt){super(),this.actor=ue,this.layerIndex=ae,this.availableImages=we,this.loadVectorData=it||l.ap,this.loading={},this.loaded={},this.deduped=new l.ao(ue.scheduler),this.isSpriteLoaded=Ue,this.scheduler=ue.scheduler,this.brightness=Xt}loadTile(ue,ae){const we=ue.uid,Ue=ue&&ue.request,it=Ue&&Ue.collectResourceTiming,Xt=this.loading[we]=new C(ue);Xt.abort=this.loadVectorData(ue,(Cn,dn)=>{const Nn=!this.loading[we];if(delete this.loading[we],Nn||Cn||!dn)return Xt.status="done",Nn||(this.loaded[we]=Xt),ae(Cn);const Hi=dn.rawData,Oi={};dn.expires&&(Oi.expires=dn.expires),dn.cacheControl&&(Oi.cacheControl=dn.cacheControl),Xt.vectorTile=dn.vectorTile||new l.dV(new l.dW(Hi));const Fo=()=>{Xt.parse(Xt.vectorTile,this.layerIndex,this.availableImages,this.actor,(nr,ii)=>{if(nr||!ii)return ae(nr);const jn={};if(it){const di=We(Ue);di.length>0&&(jn.resourceTiming=JSON.parse(JSON.stringify(di)))}ae(null,l.W({rawTileData:Hi.slice(0)},ii,Oi,jn))})};this.isSpriteLoaded?Fo():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Fo,{type:"parseTile",isSymbolTile:ue.isSymbolTile,zoom:ue.tileZoom}):Fo()}),this.loaded=this.loaded||{},this.loaded[we]=Xt})}reloadTile(ue,ae){const we=this.loaded,Ue=ue.uid;if(we&&we[Ue]){const it=we[Ue];it.showCollisionBoxes=ue.showCollisionBoxes,it.projection=ue.projection,it.brightness=ue.brightness,it.tileTransform=l.dK(ue.tileID.canonical,ue.projection),it.extraShadowCaster=ue.extraShadowCaster,it.lut=ue.lut;const Xt=(Cn,dn)=>{const Nn=it.reloadCallback;Nn&&(delete it.reloadCallback,it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,Nn)),ae(Cn,dn)};"parsing"===it.status?it.reloadCallback=Xt:"done"===it.status&&(it.vectorTile?it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,Xt):Xt())}else ae(null,void 0)}abortTile(ue,ae){const we=ue.uid,Ue=this.loading[we];Ue&&(Ue.abort&&Ue.abort(),delete this.loading[we]),ae()}removeTile(ue,ae){const we=this.loaded,Ue=ue.uid;we&&we[Ue]&&delete we[Ue],ae()}}class yt{loadTile(ue,ae){const{uid:we,encoding:Ue,rawImageData:it,padding:Xt}=ue,Cn=ImageBitmap&&it instanceof ImageBitmap?this.getImageData(it,Xt):it;ae(null,new l.dX(we,Cn,Ue,Xt<1))}getImageData(ue,ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ue.width,ue.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ue.width,this.offscreenCanvas.height=ue.height,this.offscreenCanvasContext.drawImage(ue,0,0,ue.width,ue.height);const we=this.offscreenCanvasContext.getImageData(-ae,-ae,ue.width+2*ae,ue.height+2*ae);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),we}}class fn{decodeRasterArray({task:ue,buffer:ae},we){l.dY.performDecoding(ae,ue).then(Ue=>{we(null,Ue)},Ue=>{we(Ue)})}}const xn=l.dZ.prototype.toGeoJSON;let rn=class{constructor(Ee){this._feature=Ee,this.extent=l.a3,this.type=Ee.type,this.properties=Ee.tags,"id"in Ee&&!isNaN(Ee.id)&&(this.id=parseInt(Ee.id,10))}loadGeometry(){if(1===this._feature.type){const Ee=[];for(const ue of this._feature.geometry)Ee.push([new l.P(ue[0],ue[1])]);return Ee}{const Ee=[];for(const ue of this._feature.geometry){const ae=[];for(const we of ue)ae.push(new l.P(we[0],we[1]));Ee.push(ae)}return Ee}}toGeoJSON(Ee,ue,ae){return xn.call(this,Ee,ue,ae)}},ht=class{constructor(Ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.a3,this.length=Ee.length,this._features=Ee}feature(Ee){return new rn(this._features[Ee])}};const ei=64/4096;class Mn{constructor(){this.features=new Map}clear(){this.features.clear()}load(ue=[],ae){for(const we of ue){const Ue=we.id;if(null==Ue)continue;let it=this.features.get(Ue);it&&this.updateCache(it,ae),we.geometry?(it=xt(we),this.updateCache(it,ae),this.features.set(Ue,it)):this.features.delete(Ue),this.updateCache(it,ae)}}updateCache(ue,ae){for(const{canonical:we,uid:Ue}of Object.values(ae)){const{z:it,x:Xt,y:Cn}=we;Zn(ue,Math.pow(2,it),Xt,Cn)&&delete ae[Ue]}}getTile(ue,ae,we){const Ue=Math.pow(2,ue),it=[];for(const Xt of this.features.values())Zn(Xt,Ue,ae,we)&&it.push(Ii(Xt,Ue,ae,we));return{features:it}}getFeatures(){return[...this.features.values()]}}function Zn({minX:Ee,minY:ue,maxX:ae,maxY:we},Ue,it,Xt){return Ee<(it+1+ei)/Ue&&ue<(Xt+1+ei)/Ue&&ae>(it-ei)/Ue&&we>(Xt-ei)/Ue}function xt(Ee){const{id:ue,geometry:ae,properties:we}=Ee;if(!ae)return;if("GeometryCollection"===ae.type)throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Ue,coordinates:it}=ae,Xt={id:ue,type:1,geometry:[],tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Cn=Xt.geometry;if("Point"===Ue)Ot(it,Cn,Xt);else if("MultiPoint"===Ue)for(const dn of it)Ot(dn,Cn,Xt);else if("LineString"===Ue)Xt.type=2,wn(it,Cn,Xt);else if("MultiLineString"===Ue)Xt.type=2,Pn(it,Cn,Xt);else if("Polygon"===Ue)Xt.type=3,Pn(it,Cn,Xt,!0);else{if("MultiPolygon"!==Ue)throw new Error("Input data is not a valid GeoJSON object.");Xt.type=3;for(const dn of it)Pn(dn,Cn,Xt,!0)}return Xt}function Ot([Ee,ue],ae,we){const Ue=l.aj(Ee);let it=l.ak(ue);it=it<0?0:it>1?1:it,ae.push(Ue,it),we.minX=Math.min(we.minX,Ue),we.minY=Math.min(we.minY,it),we.maxX=Math.max(we.maxX,Ue),we.maxY=Math.max(we.maxY,it)}function wn(Ee,ue,ae,we=!1,Ue=!1){const it=[];for(const Xt of Ee)Ot(Xt,it,ae);ue.push(it),we&&function(Xt,Cn){let dn=0;for(let Nn=0,Hi=Xt.length,Oi=Hi-2;Nn<Hi;Oi=Nn,Nn+=2)dn+=(Xt[Nn]-Xt[Oi])*(Xt[Nn+1]+Xt[Oi+1]);if(dn>0===Cn)for(let Nn=0,Hi=Xt.length;Nn<Hi/2;Nn+=2){const Oi=Xt[Nn],Fo=Xt[Nn+1];Xt[Nn]=Xt[Hi-2-Nn],Xt[Nn+1]=Xt[Hi-1-Nn],Xt[Hi-2-Nn]=Oi,Xt[Hi-1-Nn]=Fo}}(it,Ue)}function Pn(Ee,ue,ae,we=!1){for(let Ue=0;Ue<Ee.length;Ue++)wn(Ee[Ue],ue,ae,we,0===Ue)}function Ii(Ee,ue,ae,we){const{id:Ue,type:it,geometry:Xt,tags:Cn}=Ee,dn=[];if(1===it)Et(Xt,ue,ae,we,dn);else for(const Nn of Xt)dn.push(Et(Nn,ue,ae,we));return{id:Ue,type:it,geometry:dn,tags:Cn}}function Et(Ee,ue,ae,we,Ue=[]){for(let it=0;it<Ee.length;it+=2)Ue.push(kn(Ee[it],Ee[it+1],ue,ae,we));return Ue}function kn(Ee,ue,ae,we,Ue){return[Math.round(l.a3*(Ee*ae-we)),Math.round(l.a3*(ue*ae-Ue))]}var Te={exports:{}},on=l.d$,Qt=l.d_.VectorTileFeature,En=oo;function oo(Ee,ue){this.options=ue||{},this.features=Ee,this.length=Ee.length}function Vn(Ee,ue){this.id="number"==typeof Ee.id?Ee.id:void 0,this.type=Ee.type,this.rawGeometry=1===Ee.type?[Ee.geometry]:Ee.geometry,this.properties=Ee.tags,this.extent=ue||4096}oo.prototype.feature=function(Ee){return new Vn(this.features[Ee],this.options.extent)},Vn.prototype.loadGeometry=function(){var Ee=this.rawGeometry;this.geometry=[];for(var ue=0;ue<Ee.length;ue++){for(var ae=Ee[ue],we=[],Ue=0;Ue<ae.length;Ue++)we.push(new on(ae[Ue][0],ae[Ue][1]));this.geometry.push(we)}return this.geometry},Vn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ee=this.geometry,ue=1/0,ae=-1/0,we=1/0,Ue=-1/0,it=0;it<Ee.length;it++)for(var Xt=Ee[it],Cn=0;Cn<Xt.length;Cn++){var dn=Xt[Cn];ue=Math.min(ue,dn.x),ae=Math.max(ae,dn.x),we=Math.min(we,dn.y),Ue=Math.max(Ue,dn.y)}return[ue,we,ae,Ue]},Vn.prototype.toGeoJSON=Qt.prototype.toGeoJSON;var Ke=l.e0,Ae=En;function Ge(Ee){var ue=new Ke;return function(ae,we){for(var Ue in ae.layers)we.writeMessage(3,et,ae.layers[Ue])}(Ee,ue),ue.finish()}function et(Ee,ue){var ae;ue.writeVarintField(15,Ee.version||1),ue.writeStringField(1,Ee.name||""),ue.writeVarintField(5,Ee.extent||4096);var we={keys:[],values:[],keycache:{},valuecache:{}};for(ae=0;ae<Ee.length;ae++)we.feature=Ee.feature(ae),ue.writeMessage(2,zt,we);var Ue=we.keys;for(ae=0;ae<Ue.length;ae++)ue.writeStringField(3,Ue[ae]);var it=we.values;for(ae=0;ae<it.length;ae++)ue.writeMessage(4,dr,it[ae])}function zt(Ee,ue){var ae=Ee.feature;void 0!==ae.id&&ue.writeVarintField(1,ae.id),ue.writeMessage(2,qn,Ee),ue.writeVarintField(3,ae.type),ue.writeMessage(4,Qi,ae)}function qn(Ee,ue){var ae=Ee.feature,we=Ee.keys,Ue=Ee.values,it=Ee.keycache,Xt=Ee.valuecache;for(var Cn in ae.properties){var dn=ae.properties[Cn],Nn=it[Cn];if(null!==dn){void 0===Nn&&(we.push(Cn),it[Cn]=Nn=we.length-1),ue.writeVarint(Nn);var Hi=typeof dn;"string"!==Hi&&"boolean"!==Hi&&"number"!==Hi&&(dn=JSON.stringify(dn));var Oi=Hi+":"+dn,Fo=Xt[Oi];void 0===Fo&&(Ue.push(dn),Xt[Oi]=Fo=Ue.length-1),ue.writeVarint(Fo)}}}function un(Ee,ue){return(ue<<3)+(7&Ee)}function go(Ee){return Ee<<1^Ee>>31}function Qi(Ee,ue){for(var ae=Ee.loadGeometry(),we=Ee.type,Ue=0,it=0,Xt=ae.length,Cn=0;Cn<Xt;Cn++){var dn=ae[Cn],Nn=1;1===we&&(Nn=dn.length),ue.writeVarint(un(1,Nn));for(var Hi=3===we?dn.length-1:dn.length,Oi=0;Oi<Hi;Oi++){1===Oi&&1!==we&&ue.writeVarint(un(2,Hi-1));var Fo=dn[Oi].x-Ue,nr=dn[Oi].y-it;ue.writeVarint(go(Fo)),ue.writeVarint(go(nr)),Ue+=Fo,it+=nr}3===we&&ue.writeVarint(un(7,1))}}function dr(Ee,ue){var ae=typeof Ee;"string"===ae?ue.writeStringField(1,Ee):"boolean"===ae?ue.writeBooleanField(7,Ee):"number"===ae&&(Ee%1!=0?ue.writeDoubleField(3,Ee):Ee<0?ue.writeSVarintField(6,Ee):ue.writeVarintField(5,Ee))}Te.exports=Ge,Te.exports.fromVectorTileJs=Ge,Te.exports.fromGeojsonVt=function(Ee,ue){ue=ue||{};var ae={};for(var we in Ee)ae[we]=new Ae(Ee[we].features,ue),ae[we].name=we,ae[we].version=ue.version,ae[we].extent=ue.extent;return Ge({layers:ae})},Te.exports.GeoJSONWrapper=Ae;var Go=l.e1(Te.exports);const Dr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ee=>Ee},cr=Math.fround||(Ei=new Float32Array(1),Ee=>(Ei[0]=+Ee,Ei[0]));var Ei;const ko=3,Er=5,Wr=6;class ji{constructor(ue){this.options=Object.assign(Object.create(Dr),ue),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ue){const{log:ae,minZoom:we,maxZoom:Ue}=this.options;ae&&console.time("total time");const it=`prepare ${ue.length} points`;ae&&console.time(it),this.points=ue;const Xt=[];for(let dn=0;dn<ue.length;dn++){const Nn=ue[dn];if(!Nn.geometry)continue;const[Hi,Oi]=Nn.geometry.coordinates,Fo=cr(ui(Hi)),nr=cr(Ni(Oi));Xt.push(Fo,nr,1/0,dn,-1,1),this.options.reduce&&Xt.push(0)}let Cn=this.trees[Ue+1]=this._createTree(Xt);ae&&console.timeEnd(it);for(let dn=Ue;dn>=we;dn--){const Nn=+Date.now();Cn=this.trees[dn]=this._createTree(this._cluster(Cn,dn)),ae&&console.log("z%d: %d clusters in %dms",dn,Cn.numItems,+Date.now()-Nn)}return ae&&console.timeEnd("total time"),this}getClusters(ue,ae){let we=((ue[0]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,ue[1]));let it=180===ue[2]?180:((ue[2]+180)%360+360)%360-180;const Xt=Math.max(-90,Math.min(90,ue[3]));if(ue[2]-ue[0]>=360)we=-180,it=180;else if(we>it){const Oi=this.getClusters([we,Ue,180,Xt],ae),Fo=this.getClusters([-180,Ue,it,Xt],ae);return Oi.concat(Fo)}const Cn=this.trees[this._limitZoom(ae)],dn=Cn.range(ui(we),Ni(Xt),ui(it),Ni(Ue)),Nn=Cn.data,Hi=[];for(const Oi of dn){const Fo=this.stride*Oi;Hi.push(Nn[Fo+Er]>1?vi(Nn,Fo,this.clusterProps):this.points[Nn[Fo+ko]])}return Hi}getChildren(ue){const ae=this._getOriginId(ue),we=this._getOriginZoom(ue),Ue="No cluster with the specified id.",it=this.trees[we];if(!it)throw new Error(Ue);const Xt=it.data;if(ae*this.stride>=Xt.length)throw new Error(Ue);const Cn=this.options.radius/(this.options.extent*Math.pow(2,we-1)),dn=it.within(Xt[ae*this.stride],Xt[ae*this.stride+1],Cn),Nn=[];for(const Hi of dn){const Oi=Hi*this.stride;Xt[Oi+4]===ue&&Nn.push(Xt[Oi+Er]>1?vi(Xt,Oi,this.clusterProps):this.points[Xt[Oi+ko]])}if(0===Nn.length)throw new Error(Ue);return Nn}getLeaves(ue,ae,we){const Ue=[];return this._appendLeaves(Ue,ue,ae=ae||10,we=we||0,0),Ue}getTile(ue,ae,we){const Ue=this.trees[this._limitZoom(ue)],it=Math.pow(2,ue),{extent:Xt,radius:Cn}=this.options,dn=Cn/Xt,Nn=(we-dn)/it,Hi=(we+1+dn)/it,Oi={features:[]};return this._addTileFeatures(Ue.range((ae-dn)/it,Nn,(ae+1+dn)/it,Hi),Ue.data,ae,we,it,Oi),0===ae&&this._addTileFeatures(Ue.range(1-dn/it,Nn,1,Hi),Ue.data,it,we,it,Oi),ae===it-1&&this._addTileFeatures(Ue.range(0,Nn,dn/it,Hi),Ue.data,-1,we,it,Oi),Oi.features.length?Oi:null}getClusterExpansionZoom(ue){let ae=this._getOriginZoom(ue)-1;for(;ae<=this.options.maxZoom;){const we=this.getChildren(ue);if(ae++,1!==we.length)break;ue=we[0].properties.cluster_id}return ae}_appendLeaves(ue,ae,we,Ue,it){const Xt=this.getChildren(ae);for(const Cn of Xt){const dn=Cn.properties;if(dn&&dn.cluster?it+dn.point_count<=Ue?it+=dn.point_count:it=this._appendLeaves(ue,dn.cluster_id,we,Ue,it):it<Ue?it++:ue.push(Cn),ue.length===we)break}return it}_createTree(ue){const ae=new l.cK(ue.length/this.stride|0,this.options.nodeSize,Float32Array);for(let we=0;we<ue.length;we+=this.stride)ae.add(ue[we],ue[we+1]);return ae.finish(),ae.data=ue,ae}_addTileFeatures(ue,ae,we,Ue,it,Xt){for(const Cn of ue){const dn=Cn*this.stride,Nn=ae[dn+Er]>1;let Hi,Oi,Fo;if(Nn)Hi=Yi(ae,dn,this.clusterProps),Oi=ae[dn],Fo=ae[dn+1];else{const jn=this.points[ae[dn+ko]];Hi=jn.properties;const[di,co]=jn.geometry.coordinates;Oi=ui(di),Fo=Ni(co)}const nr={type:1,geometry:[[Math.round(this.options.extent*(Oi*it-we)),Math.round(this.options.extent*(Fo*it-Ue))]],tags:Hi};let ii;ii=Nn||this.options.generateId?ae[dn+ko]:this.points[ae[dn+ko]].id,void 0!==ii&&(nr.id=ii),Xt.features.push(nr)}}_limitZoom(ue){return Math.max(this.options.minZoom,Math.min(Math.floor(+ue),this.options.maxZoom+1))}_cluster(ue,ae){const{radius:we,extent:Ue,reduce:it,minPoints:Xt}=this.options,Cn=we/(Ue*Math.pow(2,ae)),dn=ue.data,Nn=[],Hi=this.stride;for(let Oi=0;Oi<dn.length;Oi+=Hi){if(dn[Oi+2]<=ae)continue;dn[Oi+2]=ae;const Fo=dn[Oi],nr=dn[Oi+1],ii=ue.within(dn[Oi],dn[Oi+1],Cn),jn=dn[Oi+Er];let di=jn;for(const co of ii){const Ki=co*Hi;dn[Ki+2]>ae&&(di+=dn[Ki+Er])}if(di>jn&&di>=Xt){let co,Ki=Fo*jn,Kt=nr*jn,oi=-1;const Pi=(Oi/Hi<<5)+(ae+1)+this.points.length;for(const Xo of ii){const pr=Xo*Hi;if(dn[pr+2]<=ae)continue;dn[pr+2]=ae;const es=dn[pr+Er];Ki+=dn[pr]*es,Kt+=dn[pr+1]*es,dn[pr+4]=Pi,it&&(co||(co=this._map(dn,Oi,!0),oi=this.clusterProps.length,this.clusterProps.push(co)),it(co,this._map(dn,pr)))}dn[Oi+4]=Pi,Nn.push(Ki/di,Kt/di,1/0,Pi,-1,di),it&&Nn.push(oi)}else{for(let co=0;co<Hi;co++)Nn.push(dn[Oi+co]);if(di>1)for(const co of ii){const Ki=co*Hi;if(!(dn[Ki+2]<=ae)){dn[Ki+2]=ae;for(let Kt=0;Kt<Hi;Kt++)Nn.push(dn[Ki+Kt])}}}}return Nn}_getOriginId(ue){return ue-this.points.length>>5}_getOriginZoom(ue){return(ue-this.points.length)%32}_map(ue,ae,we){if(ue[ae+Er]>1){const Xt=this.clusterProps[ue[ae+Wr]];return we?Object.assign({},Xt):Xt}const Ue=this.points[ue[ae+ko]].properties,it=this.options.map(Ue);return we&&it===Ue?Object.assign({},it):it}}function vi(Ee,ue,ae){return{type:"Feature",id:Ee[ue+ko],properties:Yi(Ee,ue,ae),geometry:{type:"Point",coordinates:[(we=Ee[ue],360*(we-.5)),po(Ee[ue+1])]}};var we}function Yi(Ee,ue,ae){const we=Ee[ue+Er],Ue=we>=1e4?`${Math.round(we/1e3)}k`:we>=1e3?Math.round(we/100)/10+"k":we,it=Ee[ue+Wr],Xt=-1===it?{}:Object.assign({},ae[it]);return Object.assign(Xt,{cluster:!0,cluster_id:Ee[ue+ko],point_count:we,point_count_abbreviated:Ue})}function ui(Ee){return Ee/360+.5}function Ni(Ee){const ue=Math.sin(Ee*Math.PI/180),ae=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return ae<0?0:ae>1?1:ae}function po(Ee){const ue=(180-360*Ee)*Math.PI/180;return 360*Math.atan(Math.exp(ue))/Math.PI-90}function Xi(Ee,ue,ae,we){let Ue=we;const it=ue+(ae-ue>>1);let Xt,Cn=ae-ue;const dn=Ee[ue],Nn=Ee[ue+1],Hi=Ee[ae],Oi=Ee[ae+1];for(let Fo=ue+3;Fo<ae;Fo+=3){const nr=bs(Ee[Fo],Ee[Fo+1],dn,Nn,Hi,Oi);if(nr>Ue)Xt=Fo,Ue=nr;else if(nr===Ue){const ii=Math.abs(Fo-it);ii<Cn&&(Xt=Fo,Cn=ii)}}Ue>we&&(Xt-ue>3&&Xi(Ee,ue,Xt,we),Ee[Xt+2]=Ue,ae-Xt>3&&Xi(Ee,Xt,ae,we))}function bs(Ee,ue,ae,we,Ue,it){let Xt=Ue-ae,Cn=it-we;if(0!==Xt||0!==Cn){const dn=((Ee-ae)*Xt+(ue-we)*Cn)/(Xt*Xt+Cn*Cn);dn>1?(ae=Ue,we=it):dn>0&&(ae+=Xt*dn,we+=Cn*dn)}return Xt=Ee-ae,Cn=ue-we,Xt*Xt+Cn*Cn}function Br(Ee,ue,ae,we){const Ue={id:null!=Ee?Ee:null,type:ue,geometry:ae,tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===ue||"MultiPoint"===ue||"LineString"===ue)So(Ue,ae);else if("Polygon"===ue)So(Ue,ae[0]);else if("MultiLineString"===ue)for(const it of ae)So(Ue,it);else if("MultiPolygon"===ue)for(const it of ae)So(Ue,it[0]);return Ue}function So(Ee,ue){for(let ae=0;ae<ue.length;ae+=3)Ee.minX=Math.min(Ee.minX,ue[ae]),Ee.minY=Math.min(Ee.minY,ue[ae+1]),Ee.maxX=Math.max(Ee.maxX,ue[ae]),Ee.maxY=Math.max(Ee.maxY,ue[ae+1])}function ro(Ee,ue,ae,we){if(!ue.geometry)return;const Ue=ue.geometry.coordinates;if(Ue&&0===Ue.length)return;const it=ue.geometry.type,Xt=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let Cn=[],dn=ue.id;if(ae.promoteId?dn=ue.properties[ae.promoteId]:ae.generateId&&(dn=we||0),"Point"===it)fo(Ue,Cn);else if("MultiPoint"===it)for(const Nn of Ue)fo(Nn,Cn);else if("LineString"===it)Ts(Ue,Cn,Xt,!1);else if("MultiLineString"===it){if(ae.lineMetrics){for(const Nn of Ue)Cn=[],Ts(Nn,Cn,Xt,!1),Ee.push(Br(dn,"LineString",Cn,ue.properties));return}zr(Ue,Cn,Xt,!1)}else if("Polygon"===it)zr(Ue,Cn,Xt,!0);else{if("MultiPolygon"!==it){if("GeometryCollection"===it){for(const Nn of ue.geometry.geometries)ro(Ee,{id:dn,geometry:Nn,properties:ue.properties},ae,we);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Nn of Ue){const Hi=[];zr(Nn,Hi,Xt,!0),Cn.push(Hi)}}Ee.push(Br(dn,it,Cn,ue.properties))}function fo(Ee,ue){ue.push(Zr(Ee[0]),Qr(Ee[1]),0)}function Ts(Ee,ue,ae,we){let Ue,it,Xt=0;for(let dn=0;dn<Ee.length;dn++){const Nn=Zr(Ee[dn][0]),Hi=Qr(Ee[dn][1]);ue.push(Nn,Hi,0),dn>0&&(Xt+=we?(Ue*Hi-Nn*it)/2:Math.sqrt(Math.pow(Nn-Ue,2)+Math.pow(Hi-it,2))),Ue=Nn,it=Hi}const Cn=ue.length-3;ue[2]=1,Xi(ue,0,Cn,ae),ue[Cn+2]=1,ue.size=Math.abs(Xt),ue.start=0,ue.end=ue.size}function zr(Ee,ue,ae,we){for(let Ue=0;Ue<Ee.length;Ue++){const it=[];Ts(Ee[Ue],it,ae,we),ue.push(it)}}function Zr(Ee){return Ee/360+.5}function Qr(Ee){const ue=Math.sin(Ee*Math.PI/180),ae=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return ae<0?0:ae>1?1:ae}function Wo(Ee,ue,ae,we,Ue,it,Xt,Cn){if(we/=ue,it>=(ae/=ue)&&Xt<we)return Ee;if(Xt<ae||it>=we)return null;const dn=[];for(const Nn of Ee){const Hi=Nn.geometry;let Oi=Nn.type;const Fo=0===Ue?Nn.minX:Nn.minY,nr=0===Ue?Nn.maxX:Nn.maxY;if(Fo>=ae&&nr<we){dn.push(Nn);continue}if(nr<ae||Fo>=we)continue;let ii=[];if("Point"===Oi||"MultiPoint"===Oi)lr(Hi,ii,ae,we,Ue);else if("LineString"===Oi)Pr(Hi,ii,ae,we,Ue,!1,Cn.lineMetrics);else if("MultiLineString"===Oi)wr(Hi,ii,ae,we,Ue,!1);else if("Polygon"===Oi)wr(Hi,ii,ae,we,Ue,!0);else if("MultiPolygon"===Oi)for(const jn of Hi){const di=[];wr(jn,di,ae,we,Ue,!0),di.length&&ii.push(di)}if(ii.length){if(Cn.lineMetrics&&"LineString"===Oi){for(const jn of ii)dn.push(Br(Nn.id,Oi,jn,Nn.tags));continue}"LineString"!==Oi&&"MultiLineString"!==Oi||(1===ii.length?(Oi="LineString",ii=ii[0]):Oi="MultiLineString"),"Point"!==Oi&&"MultiPoint"!==Oi||(Oi=3===ii.length?"Point":"MultiPoint"),dn.push(Br(Nn.id,Oi,ii,Nn.tags))}}return dn.length?dn:null}function lr(Ee,ue,ae,we,Ue){for(let it=0;it<Ee.length;it+=3){const Xt=Ee[it+Ue];Xt>=ae&&Xt<=we&&aa(ue,Ee[it],Ee[it+1],Ee[it+2])}}function Pr(Ee,ue,ae,we,Ue,it,Xt){let Cn=xr(Ee);const dn=0===Ue?Jn:hs;let Nn,Hi,Oi=Ee.start;for(let di=0;di<Ee.length-3;di+=3){const co=Ee[di],Ki=Ee[di+1],Kt=Ee[di+2],oi=Ee[di+3],Pi=Ee[di+4],Xo=0===Ue?co:Ki,pr=0===Ue?oi:Pi;let es=!1;Xt&&(Nn=Math.sqrt(Math.pow(co-oi,2)+Math.pow(Ki-Pi,2))),Xo<ae?pr>ae&&(Hi=dn(Cn,co,Ki,oi,Pi,ae),Xt&&(Cn.start=Oi+Nn*Hi)):Xo>we?pr<we&&(Hi=dn(Cn,co,Ki,oi,Pi,we),Xt&&(Cn.start=Oi+Nn*Hi)):aa(Cn,co,Ki,Kt),pr<ae&&Xo>=ae&&(Hi=dn(Cn,co,Ki,oi,Pi,ae),es=!0),pr>we&&Xo<=we&&(Hi=dn(Cn,co,Ki,oi,Pi,we),es=!0),!it&&es&&(Xt&&(Cn.end=Oi+Nn*Hi),ue.push(Cn),Cn=xr(Ee)),Xt&&(Oi+=Nn)}let Fo=Ee.length-3;const nr=Ee[Fo],ii=Ee[Fo+1],jn=0===Ue?nr:ii;jn>=ae&&jn<=we&&aa(Cn,nr,ii,Ee[Fo+2]),Fo=Cn.length-3,it&&Fo>=3&&(Cn[Fo]!==Cn[0]||Cn[Fo+1]!==Cn[1])&&aa(Cn,Cn[0],Cn[1],Cn[2]),Cn.length&&ue.push(Cn)}function xr(Ee){const ue=[];return ue.size=Ee.size,ue.start=Ee.start,ue.end=Ee.end,ue}function wr(Ee,ue,ae,we,Ue,it){for(const Xt of Ee)Pr(Xt,ue,ae,we,Ue,it,!1)}function aa(Ee,ue,ae,we){Ee.push(ue,ae,we)}function Jn(Ee,ue,ae,we,Ue,it){const Xt=(it-ue)/(we-ue);return aa(Ee,it,ae+(Ue-ae)*Xt,1),Xt}function hs(Ee,ue,ae,we,Ue,it){const Xt=(it-ae)/(Ue-ae);return aa(Ee,ue+(we-ue)*Xt,it,1),Xt}function jr(Ee,ue){const ae=[];for(let we=0;we<Ee.length;we++){const Ue=Ee[we],it=Ue.type;let Xt;if("Point"===it||"MultiPoint"===it||"LineString"===it)Xt=Ns(Ue.geometry,ue);else if("MultiLineString"===it||"Polygon"===it){Xt=[];for(const Cn of Ue.geometry)Xt.push(Ns(Cn,ue))}else if("MultiPolygon"===it){Xt=[];for(const Cn of Ue.geometry){const dn=[];for(const Nn of Cn)dn.push(Ns(Nn,ue));Xt.push(dn)}}ae.push(Br(Ue.id,it,Xt,Ue.tags))}return ae}function Ns(Ee,ue){const ae=[];ae.size=Ee.size,void 0!==Ee.start&&(ae.start=Ee.start,ae.end=Ee.end);for(let we=0;we<Ee.length;we+=3)ae.push(Ee[we]+ue,Ee[we+1],Ee[we+2]);return ae}function ps(Ee,ue){if(Ee.transformed)return Ee;const ae=1<<Ee.z,we=Ee.x,Ue=Ee.y;for(const it of Ee.features){const Xt=it.geometry,Cn=it.type;if(it.geometry=[],1===Cn)for(let dn=0;dn<Xt.length;dn+=2)it.geometry.push(Kr(Xt[dn],Xt[dn+1],ue,ae,we,Ue));else for(let dn=0;dn<Xt.length;dn++){const Nn=[];for(let Hi=0;Hi<Xt[dn].length;Hi+=2)Nn.push(Kr(Xt[dn][Hi],Xt[dn][Hi+1],ue,ae,we,Ue));it.geometry.push(Nn)}}return Ee.transformed=!0,Ee}function Kr(Ee,ue,ae,we,Ue,it){return[Math.round(ae*(Ee*we-Ue)),Math.round(ae*(ue*we-it))]}function Fi(Ee,ue,ae,we,Ue){const it=ue===Ue.maxZoom?0:Ue.tolerance/((1<<ue)*Ue.extent),Xt={features:[],numPoints:0,numSimplified:0,numFeatures:Ee.length,source:null,x:ae,y:we,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Cn of Ee)ni(Xt,Cn,it,Ue);return Xt}function ni(Ee,ue,ae,we){const Ue=ue.geometry,it=ue.type,Xt=[];if(Ee.minX=Math.min(Ee.minX,ue.minX),Ee.minY=Math.min(Ee.minY,ue.minY),Ee.maxX=Math.max(Ee.maxX,ue.maxX),Ee.maxY=Math.max(Ee.maxY,ue.maxY),"Point"===it||"MultiPoint"===it)for(let Cn=0;Cn<Ue.length;Cn+=3)Xt.push(Ue[Cn],Ue[Cn+1]),Ee.numPoints++,Ee.numSimplified++;else if("LineString"===it)Ai(Xt,Ue,Ee,ae,!1,!1);else if("MultiLineString"===it||"Polygon"===it)for(let Cn=0;Cn<Ue.length;Cn++)Ai(Xt,Ue[Cn],Ee,ae,"Polygon"===it,0===Cn);else if("MultiPolygon"===it)for(let Cn=0;Cn<Ue.length;Cn++){const dn=Ue[Cn];for(let Nn=0;Nn<dn.length;Nn++)Ai(Xt,dn[Nn],Ee,ae,!0,0===Nn)}if(Xt.length){let Cn=ue.tags||null;if("LineString"===it&&we.lineMetrics){Cn={};for(const Nn in ue.tags)Cn[Nn]=ue.tags[Nn];Cn.mapbox_clip_start=Ue.start/Ue.size,Cn.mapbox_clip_end=Ue.end/Ue.size}const dn={geometry:Xt,type:"Polygon"===it||"MultiPolygon"===it?3:"LineString"===it||"MultiLineString"===it?2:1,tags:Cn};null!==ue.id&&(dn.id=ue.id),Ee.features.push(dn)}}function Ai(Ee,ue,ae,we,Ue,it){const Xt=we*we;if(we>0&&ue.size<(Ue?Xt:we))return void(ae.numPoints+=ue.length/3);const Cn=[];for(let dn=0;dn<ue.length;dn+=3)(0===we||ue[dn+2]>Xt)&&(ae.numSimplified++,Cn.push(ue[dn],ue[dn+1])),ae.numPoints++;Ue&&function(dn,Nn){let Hi=0;for(let Oi=0,Fo=dn.length,nr=Fo-2;Oi<Fo;nr=Oi,Oi+=2)Hi+=(dn[Oi]-dn[nr])*(dn[Oi+1]+dn[nr+1]);if(Hi>0===Nn)for(let Oi=0,Fo=dn.length;Oi<Fo/2;Oi+=2){const nr=dn[Oi],ii=dn[Oi+1];dn[Oi]=dn[Fo-2-Oi],dn[Oi+1]=dn[Fo-1-Oi],dn[Fo-2-Oi]=nr,dn[Fo-1-Oi]=ii}}(Cn,it),Ee.push(Cn)}const Kn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class kt{constructor(ue,ae){const we=(ae=this.options=function(it,Xt){for(const Cn in Xt)it[Cn]=Xt[Cn];return it}(Object.create(Kn),ae)).debug;if(we&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ue=function(it,Xt){const Cn=[];if("FeatureCollection"===it.type)for(let dn=0;dn<it.features.length;dn++)ro(Cn,it.features[dn],Xt,dn);else ro(Cn,"Feature"===it.type?it:{geometry:it},Xt);return Cn}(ue,ae);this.tiles={},this.tileCoords=[],we&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ue=function(it,Xt){const Cn=Xt.buffer/Xt.extent;let dn=it;const Nn=Wo(it,1,-1-Cn,Cn,0,-1,2,Xt),Hi=Wo(it,1,1-Cn,2+Cn,0,-1,2,Xt);return(Nn||Hi)&&(dn=Wo(it,1,-Cn,1+Cn,0,-1,2,Xt)||[],Nn&&(dn=jr(Nn,1).concat(dn)),Hi&&(dn=dn.concat(jr(Hi,-1)))),dn}(Ue,ae),Ue.length&&this.splitTile(Ue,0,0,0),we&&(Ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ue,ae,we,Ue,it,Xt,Cn){const dn=[ue,ae,we,Ue],Nn=this.options,Hi=Nn.debug;for(;dn.length;){Ue=dn.pop(),we=dn.pop(),ae=dn.pop(),ue=dn.pop();const Oi=1<<ae,Fo=mt(ae,we,Ue);let nr=this.tiles[Fo];if(!nr&&(Hi>1&&console.time("creation"),nr=this.tiles[Fo]=Fi(ue,ae,we,Ue,Nn),this.tileCoords.push({z:ae,x:we,y:Ue}),Hi)){Hi>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,we,Ue,nr.numFeatures,nr.numPoints,nr.numSimplified),console.timeEnd("creation"));const es=`z${ae}`;this.stats[es]=(this.stats[es]||0)+1,this.total++}if(nr.source=ue,null==it){if(ae===Nn.indexMaxZoom||nr.numPoints<=Nn.indexMaxPoints)continue}else{if(ae===Nn.maxZoom||ae===it)continue;if(null!=it){const es=it-ae;if(we!==Xt>>es||Ue!==Cn>>es)continue}}if(nr.source=null,0===ue.length)continue;Hi>1&&console.time("clipping");const ii=.5*Nn.buffer/Nn.extent,jn=.5-ii,di=.5+ii,co=1+ii;let Ki=null,Kt=null,oi=null,Pi=null,Xo=Wo(ue,Oi,we-ii,we+di,0,nr.minX,nr.maxX,Nn),pr=Wo(ue,Oi,we+jn,we+co,0,nr.minX,nr.maxX,Nn);ue=null,Xo&&(Ki=Wo(Xo,Oi,Ue-ii,Ue+di,1,nr.minY,nr.maxY,Nn),Kt=Wo(Xo,Oi,Ue+jn,Ue+co,1,nr.minY,nr.maxY,Nn),Xo=null),pr&&(oi=Wo(pr,Oi,Ue-ii,Ue+di,1,nr.minY,nr.maxY,Nn),Pi=Wo(pr,Oi,Ue+jn,Ue+co,1,nr.minY,nr.maxY,Nn),pr=null),Hi>1&&console.timeEnd("clipping"),dn.push(Ki||[],ae+1,2*we,2*Ue),dn.push(Kt||[],ae+1,2*we,2*Ue+1),dn.push(oi||[],ae+1,2*we+1,2*Ue),dn.push(Pi||[],ae+1,2*we+1,2*Ue+1)}}getTile(ue,ae,we){ue=+ue,ae=+ae,we=+we;const Ue=this.options,{extent:it,debug:Xt}=Ue;if(ue<0||ue>24)return null;const Cn=1<<ue,dn=mt(ue,ae=ae+Cn&Cn-1,we);if(this.tiles[dn])return ps(this.tiles[dn],it);Xt>1&&console.log("drilling down to z%d-%d-%d",ue,ae,we);let Nn,Hi=ue,Oi=ae,Fo=we;for(;!Nn&&Hi>0;)Hi--,Oi>>=1,Fo>>=1,Nn=this.tiles[mt(Hi,Oi,Fo)];return Nn&&Nn.source?(Xt>1&&(console.log("found parent tile z%d-%d-%d",Hi,Oi,Fo),console.time("drilling down")),this.splitTile(Nn.source,Hi,Oi,Fo,ue,ae,we),Xt>1&&console.timeEnd("drilling down"),this.tiles[dn]?ps(this.tiles[dn],it):null):null}}function mt(Ee,ue,ae){return 32*((1<<Ee)*ae+ue)+Ee}function Ye(Ee,ue){const ae=Ee.tileID.canonical;if(!this._geoJSONIndex)return ue(null,null);const we=this._geoJSONIndex.getTile(ae.z,ae.x,ae.y);if(!we)return ue(null,null);const Ue=new ht(we.features);let it=Go(Ue);0===it.byteOffset&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),ue(null,{vectorTile:Ue,rawData:it.buffer})}class Tt extends Ut{constructor(ue,ae,we,Ue,it,Xt){super(ue,ae,we,Ue,Ye,Xt),it&&(this.loadGeoJSON=it),this._dynamicIndex=new Mn}loadData(ue,ae){const we=ue&&ue.request,Ue=we&&we.collectResourceTiming;this.loadGeoJSON(ue,(it,Xt)=>{if(it||!Xt)return ae(it);if("object"!=typeof Xt)return ae(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));{try{if(ue.filter){const dn=l.y(ue.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===dn.result)throw new Error(dn.value.map(Nn=>`${Nn.key}: ${Nn.message}`).join(", "));Xt.features=Xt.features.filter(Nn=>dn.value.evaluate({zoom:0},Nn))}ue.dynamic?("Feature"===Xt.type&&(Xt={type:"FeatureCollection",features:[Xt]}),ue.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Xt.features,this.loaded),ue.cluster&&(Xt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ue.cluster?new ji(function({superclusterOptions:dn,clusterProperties:Nn}){if(!Nn||!dn)return dn;const Hi={},Oi={},Fo={accumulated:null,zoom:0},nr={properties:null},ii=Object.keys(Nn);for(const jn of ii){const[di,co]=Nn[jn],Ki=l.y(co),Kt=l.y("string"==typeof di?[di,["accumulated"],["get",jn]]:di);Hi[jn]=Ki.value,Oi[jn]=Kt.value}return dn.map=jn=>{nr.properties=jn;const di={};for(const co of ii)di[co]=Hi[co].evaluate(Fo,nr);return di},dn.reduce=(jn,di)=>{nr.properties=di;for(const co of ii)Fo.accumulated=jn[co],jn[co]=Oi[co].evaluate(Fo,nr)},dn}(ue)).load(Xt.features):ue.dynamic?this._dynamicIndex:new kt(dn=Xt,ue.geojsonVtOptions)}catch(dn){return ae(dn)}const Cn={};if(Ue){const dn=We(we);dn&&(Cn.resourceTiming={},Cn.resourceTiming[ue.source]=JSON.parse(JSON.stringify(dn)))}ae(null,Cn)}var dn})}reloadTile(ue,ae){const we=this.loaded;return we&&we[ue.uid]?ue.partial?ae(null,void 0):super.reloadTile(ue,ae):this.loadTile(ue,ae)}loadGeoJSON(ue,ae){if(ue.request)l.g(ue.request,ae);else{if("string"!=typeof ue.data)return ae(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));try{return ae(null,JSON.parse(ue.data))}catch{return ae(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ue,ae){try{ae(null,this._geoJSONIndex.getClusterExpansionZoom(ue.clusterId))}catch(we){ae(we)}}getClusterChildren(ue,ae){try{ae(null,this._geoJSONIndex.getChildren(ue.clusterId))}catch(we){ae(we)}}getClusterLeaves(ue,ae){try{ae(null,this._geoJSONIndex.getLeaves(ue.clusterId,ue.limit,ue.offset))}catch(we){ae(we)}}}class Jt{constructor(ue,ae){this.tileID=new l.aL(ue.tileID.overscaledZ,ue.tileID.wrap,ue.tileID.canonical.z,ue.tileID.canonical.x,ue.tileID.canonical.y),this.tileZoom=ue.tileZoom,this.uid=ue.uid,this.zoom=ue.zoom,this.canonical=ue.tileID.canonical,this.pixelRatio=ue.pixelRatio,this.tileSize=ue.tileSize,this.source=ue.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ue.projection,this.brightness=ae}parse(ue,ae,we,Ue){this.status="parsing";const it=new l.aL(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),Xt={},Cn=ae.familiesBySource[we.source],dn=new l.dN(it,we.promoteId);return dn.bucketLayerIDs=[],dn.is3DTile=!0,l.e3(ue).then(Nn=>{if(!Nn)return Ue(new Error("Could not parse tile"));const Hi=l.e4(Nn,1/l.b5(we.tileID.canonical)),Oi=Nn.json.extensionsUsed&&Nn.json.extensionsUsed.includes("MAPBOX_mesh_features")||Nn.json.asset.extras&&Nn.json.asset.extras.MAPBOX_mesh_features,Fo=Nn.json.extensionsUsed&&Nn.json.extensionsUsed.includes("EXT_meshopt_compression"),nr=new l.X(this.zoom,{brightness:this.brightness});for(const ii in Cn)for(const jn of Cn[ii]){const di=jn[0];dn.bucketLayerIDs.push(jn.map(Ki=>Ki.id)),di.recalculate(nr,[]);const co=new l.e5(Hi,it,Oi,Fo,this.brightness,dn);Oi||(co.needsUpload=!0),Xt[di.fqid]=co,co.evaluate(di)}this.status="done",Ue(null,{buckets:Xt,featureIndex:dn})}).catch(Nn=>Ue(new Error(Nn.message)))}}class Ln{constructor(ue,ae,we,Ue,it,Xt){this.actor=ue,this.layerIndex=ae,this.brightness=Xt,this.loading={},this.loaded={}}loadTile(ue,ae){const we=ue.uid,Ue=this.loading[we]=new Jt(ue,this.brightness);l.e2(ue.request,(it,Xt)=>{const Cn=!this.loading[we];return delete this.loading[we],Cn||it?(Ue.status="done",Cn||(this.loaded[we]=Ue),ae(it)):Xt&&0!==Xt.byteLength?void Ue.parse(Xt,this.layerIndex,ue,(dn,Nn)=>{Ue.status="done",this.loaded=this.loaded||{},this.loaded[we]=Ue,dn||!Nn?ae(dn):ae(null,Nn)}):(Ue.status="done",this.loaded[we]=Ue,ae())})}reloadTile(ue,ae){const we=this.loaded,Ue=ue.uid;if(we&&we[Ue]){const it=we[Ue];it.projection=ue.projection,it.brightness=ue.brightness;const Xt=(Cn,dn)=>{it.reloadCallback&&(delete it.reloadCallback,this.loadTile(ue,ae)),ae(Cn,dn)};"parsing"===it.status?it.reloadCallback=Xt:"done"===it.status&&this.loadTile(ue,ae)}}abortTile(ue,ae){const we=ue.uid;this.loading[we]&&delete this.loading[we],ae()}removeTile(ue,ae){const we=this.loaded,Ue=ue.uid;we&&we[Ue]&&delete we[Ue],ae()}}class Lt{constructor(ue){this.self=ue,this.actor=new l.e6(ue,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=l.aJ({name:"mercator"}),this.workerSourceTypes={vector:Ut,geojson:Tt,"batched-model":Ln},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ae,we)=>{if(this.workerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.workerSourceTypes[ae]=we},this.self.registerRTLTextPlugin=ae=>{if(l.e7.isParsed())throw new Error("RTL text plugin already registered.");l.e7.applyArabicShaping=ae.applyArabicShaping,l.e7.processBidirectionalText=ae.processBidirectionalText,l.e7.processStyledBidirectionalText=ae.processStyledBidirectionalText}}clearCaches(ue,ae,we){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue],delete this.rasterArrayWorkerSource,we()}checkIfReady(ue,ae,we){we()}setReferrer(ue,ae){this.referrer=ae}spriteLoaded(ue,{scope:ae,isLoaded:we}){if(this.isSpriteLoaded[ue]||(this.isSpriteLoaded[ue]={}),this.isSpriteLoaded[ue][ae]=we,this.workerSources[ue]&&this.workerSources[ue][ae])for(const Ue in this.workerSources[ue][ae]){const it=this.workerSources[ue][ae][Ue];for(const Xt in it){const Cn=it[Xt];Cn instanceof Ut&&(Cn.isSpriteLoaded=we,Cn.fire(new l.f("isSpriteLoaded")))}}}setImages(ue,{scope:ae,images:we},Ue){if(this.availableImages[ue]||(this.availableImages[ue]={}),this.availableImages[ue][ae]=we,this.workerSources[ue]&&this.workerSources[ue][ae]){for(const it in this.workerSources[ue][ae]){const Xt=this.workerSources[ue][ae][it];for(const Cn in Xt)Xt[Cn].availableImages=we}Ue()}else Ue()}setProjection(ue,ae){this.projections[ue]=l.aJ(ae)}setBrightness(ue,ae,we){this.brightness=ae,we()}setLayers(ue,ae,we){this.getLayerIndex(ue,ae.scope).replace(ae.layers,ae.options),we()}updateLayers(ue,ae,we){this.getLayerIndex(ue,ae.scope).update(ae.layers,ae.removedIds,ae.options),we()}loadTile(ue,ae,we){ae.projection=this.projections[ue]||this.defaultProjection,this.getWorkerSource(ue,ae.type,ae.source,ae.scope).loadTile(ae,we)}loadDEMTile(ue,ae,we){this.getDEMWorkerSource(ue,ae.source,ae.scope).loadTile(ae,we)}decodeRasterArray(ue,ae,we){this.getRasterArrayWorkerSource().decodeRasterArray(ae,we)}reloadTile(ue,ae,we){ae.projection=this.projections[ue]||this.defaultProjection,this.getWorkerSource(ue,ae.type,ae.source,ae.scope).reloadTile(ae,we)}abortTile(ue,ae,we){this.getWorkerSource(ue,ae.type,ae.source,ae.scope).abortTile(ae,we)}removeTile(ue,ae,we){this.getWorkerSource(ue,ae.type,ae.source,ae.scope).removeTile(ae,we)}removeSource(ue,ae,we){if(!(this.workerSources[ue]&&this.workerSources[ue][ae.scope]&&this.workerSources[ue][ae.scope][ae.type]&&this.workerSources[ue][ae.scope][ae.type][ae.source]))return;const Ue=this.workerSources[ue][ae.scope][ae.type][ae.source];delete this.workerSources[ue][ae.scope][ae.type][ae.source],void 0!==Ue.removeSource?Ue.removeSource(ae,we):we()}loadWorkerSource(ue,ae,we){try{this.self.importScripts(ae.url),we()}catch(Ue){we(Ue.toString())}}syncRTLPluginState(ue,ae,we){try{l.e7.setState(ae);const Ue=l.e7.getPluginURL();if(l.e7.isLoaded()&&!l.e7.isParsed()&&null!=Ue){this.self.importScripts(Ue);const it=l.e7.isParsed();we(it?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ue}`),it)}}catch(Ue){we(Ue.toString())}}setDracoUrl(ue,ae){this.dracoUrl=ae}getAvailableImages(ue,ae){this.availableImages[ue]||(this.availableImages[ue]={});let we=this.availableImages[ue][ae];return we||(we=[]),we}getLayerIndex(ue,ae){this.layerIndexes[ue]||(this.layerIndexes[ue]={});let we=this.layerIndexes[ue][ae];return we||(we=this.layerIndexes[ue][ae]=new qt,we.scope=ae),we}getWorkerSource(ue,ae,we,Ue){return this.workerSources[ue]||(this.workerSources[ue]={}),this.workerSources[ue][Ue]||(this.workerSources[ue][Ue]={}),this.workerSources[ue][Ue][ae]||(this.workerSources[ue][Ue][ae]={}),this.isSpriteLoaded[ue]||(this.isSpriteLoaded[ue]={}),this.workerSources[ue][Ue][ae][we]||(this.workerSources[ue][Ue][ae][we]=new this.workerSourceTypes[ae]({send:(it,Xt,Cn,dn,Nn,Hi)=>{this.actor.send(it,Xt,Cn,ue,Nn,Hi)},scheduler:this.actor.scheduler},this.getLayerIndex(ue,Ue),this.getAvailableImages(ue,Ue),this.isSpriteLoaded[ue][Ue],void 0,this.brightness)),this.workerSources[ue][Ue][ae][we]}getDEMWorkerSource(ue,ae,we){return this.demWorkerSources[ue]||(this.demWorkerSources[ue]={}),this.demWorkerSources[ue][we]||(this.demWorkerSources[ue][we]={}),this.demWorkerSources[ue][we][ae]||(this.demWorkerSources[ue][we][ae]=new yt),this.demWorkerSources[ue][we][ae]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new fn),this.rasterArrayWorkerSource}enforceCacheSizeLimit(ue,ae){l.e8(ae)}getWorkerPerformanceMetrics(ue,ae,we){we(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Lt(self)),Lt}),re(0,function(l){function We(v,r){if(Array.isArray(v)){if(!Array.isArray(r)||v.length!==r.length)return!1;for(let d=0;d<v.length;d++)if(!We(v[d],r[d]))return!1;return!0}if("object"==typeof v&&null!==v&&null!==r){if("object"!=typeof r||Object.keys(v).length!==Object.keys(r).length)return!1;for(const d in v)if(!We(v[d],r[d]))return!1;return!0}return v===r}var Y=ft;function ft(v){return r=v,!(typeof window>"u"||typeof document>"u"||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,M,R=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(R);try{M=new Worker(N),b=!0}catch{b=!1}return M&&M.terminate(),URL.revokeObjectURL(N),b}()||!function(){var b=document.createElement("canvas");b.width=b.height=1;var M=b.getContext("2d");if(!M)return!1;var R=M.getImageData(0,0,1,1);return R&&R.width===b.width}()||(void 0===qt[d=r&&r.failIfMajorPerformanceCaveat]&&(qt[d]=function(b){var M,N,H,ee,R=(N=b,H=document.createElement("canvas"),(ee=Object.create(ft.webGLContextAttributes)).failIfMajorPerformanceCaveat=N,H.getContext("webgl2",ee));if(!R)return!1;try{M=R.createShader(R.VERTEX_SHADER)}catch{return!1}return!(!M||R.isContextLost())&&(R.shaderSource(M,"void main() {}"),R.compileShader(M),!0===R.getShaderParameter(M,R.COMPILE_STATUS))}(d)),!qt[d]||document.documentMode));var r,d}var qt={};function jt(v,r,d){const b=document.createElement(v);return null!=r&&(b.className=r),d&&d.appendChild(b),b}function wt(v,r,d){const b=document.createElementNS("http://www.w3.org/2000/svg",v);for(const M of Object.keys(r))b.setAttributeNS(null,M,String(r[M]));return d&&d.appendChild(b),b}ft.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const C=typeof document<"u"?document.documentElement&&document.documentElement.style:null,At=C&&void 0!==C.userSelect?"userSelect":"WebkitUserSelect";let Ut;function yt(){C&&At&&(Ut=C[At],C[At]="none")}function fn(){C&&At&&(C[At]=Ut)}function xn(v){v.preventDefault(),v.stopPropagation(),window.removeEventListener("click",xn,!0)}function rn(){window.addEventListener("click",xn,!0),window.setTimeout(()=>{window.removeEventListener("click",xn,!0)},0)}function ht(v,r){const d=v.getBoundingClientRect();return Zn(v,d,r)}function ei(v,r){const d=v.getBoundingClientRect(),b=[];for(let M=0;M<r.length;M++)b.push(Zn(v,d,r[M]));return b}function Mn(v){return void 0!==window.InstallTrigger&&2===v.button&&v.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function Zn(v,r,d){const b=v.offsetWidth===r.width?1:v.offsetWidth/r.width;return new l.P((d.clientX-r.left)*b,(d.clientY-r.top)*b)}class xt{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(r,d){this._updatedSourceCaches[r]=d,this.setDirty()}discardSourceCacheUpdate(r){delete this._updatedSourceCaches[r]}updateLayer(r){const d=r.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(r.id),this.setDirty()}removeLayer(r){const d=r.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][r.id]=r,this._updatedLayers[d].delete(r.id),this._updatedPaintProps.delete(r.fqid),this.setDirty()}getRemovedLayer(r){return this._removedLayers[r.scope]?this._removedLayers[r.scope][r.id]:null}discardLayerRemoval(r){this._removedLayers[r.scope]&&delete this._removedLayers[r.scope][r.id]}getLayerUpdatesByScope(){const r={};for(const d in this._updatedLayers)r[d]=r[d]||{},r[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)r[d]=r[d]||{},r[d].removedIds=Object.keys(this._removedLayers[d]);return r}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(r){this._updatedPaintProps.add(r.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(r){this._updatedImages.add(r),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}const Ot={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wn{constructor(r,d,b,M,R,N){this.length=d.length,this.attributes=b,this.itemSize=d.bytesPerElement,this.dynamicDraw=M,this.instanceCount=N,this.context=r;const H=r.gl;this.buffer=H.createBuffer(),r.bindVertexBuffer.set(this.buffer),H.bufferData(H.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?H.DYNAMIC_DRAW:H.STATIC_DRAW),this.dynamicDraw||R||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,d){for(let b=0;b<this.attributes.length;b++){const M=d.attributes[this.attributes[b].name];void 0!==M&&r.enableVertexAttribArray(M)}}setVertexAttribPointers(r,d,b){for(let M=0;M<this.attributes.length;M++){const R=this.attributes[M],N=d.attributes[R.name];void 0!==N&&r.vertexAttribPointer(N,R.components,r[Ot[R.type]],!1,this.itemSize,R.offset+this.itemSize*(b||0))}}setVertexAttribDivisor(r,d,b){for(let M=0;M<this.attributes.length;M++){const R=d.attributes[this.attributes[M].name];void 0!==R&&this.instanceCount&&this.instanceCount>0&&r.vertexAttribDivisor(R,b)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ii extends Pn{getDefault(){return l.C.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Et extends Pn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class kn extends Pn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Te extends Pn{getDefault(){return[!0,!0,!0,!0]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class on extends Pn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Qt extends Pn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class En extends Pn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const d=this.current;(r.func!==d.func||r.ref!==d.ref||r.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class oo extends Pn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Vn extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ke extends Pn{getDefault(){return[0,1]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ae extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=r,this.dirty=!1}}class Ge extends Pn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class et extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.BLEND):d.disable(d.BLEND),this.current=r,this.dirty=!1}}class zt extends Pn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO,r.ONE,r.ZERO]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class qn extends Pn{getDefault(){return l.C.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class un extends Pn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(r,r),this.current=r,this.dirty=!1)}}class go extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=r,this.dirty=!1}}class Qi extends Pn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class dr extends Pn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}let Go=class extends Pn{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class Dr extends Pn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class cr extends Pn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ei extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class ko extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Er extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Wr extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ji extends Pn{getDefault(){return null}set(r){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class vi extends Pn{getDefault(){return null}set(r){this.gl&&(r!==this.current||this.dirty)&&(this.gl.bindVertexArray(r),this.current=r,this.dirty=!1)}}class Yi extends Pn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ui extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Ni extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class po extends Pn{constructor(r,d){super(r),this.context=r,this.parent=d}getDefault(){return null}}class Xi extends po{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class bs extends po{attachment(){return this.gl.DEPTH_ATTACHMENT}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Br extends po{attachment(){return this.gl.DEPTH_ATTACHMENT}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class So extends bs{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ro{constructor(r,d,b,M,R){this.context=r,this.width=d,this.height=b;const N=this.framebuffer=r.gl.createFramebuffer();M&&(this.colorAttachment=new Xi(r,N)),R&&(this.depthAttachmentType=R,this.depthAttachment="renderbuffer"===R?new bs(r,N):new Br(r,N))}destroy(){const r=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&r.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if("renderbuffer"===this.depthAttachmentType){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&r.deleteTexture(d)}r.deleteFramebuffer(this.framebuffer)}}class fo{constructor(r,d){this.gl=r,this.clearColor=new Ii(this),this.clearDepth=new Et(this),this.clearStencil=new kn(this),this.colorMask=new Te(this),this.depthMask=new on(this),this.stencilMask=new Qt(this),this.stencilFunc=new En(this),this.stencilOp=new oo(this),this.stencilTest=new Vn(this),this.depthRange=new Ke(this),this.depthTest=new Ae(this),this.depthFunc=new Ge(this),this.blend=new et(this),this.blendFunc=new zt(this),this.blendColor=new qn(this),this.blendEquation=new un(this),this.cullFace=new go(this),this.cullFaceSide=new Qi(this),this.frontFace=new dr(this),this.program=new Go(this),this.activeTexture=new Dr(this),this.viewport=new cr(this),this.bindFramebuffer=new Ei(this),this.bindRenderbuffer=new ko(this),this.bindTexture=new Er(this),this.bindVertexBuffer=new Wr(this),this.bindElementBuffer=new ji(this),this.bindVertexArrayOES=new vi(this),this.pixelStoreUnpack=new Yi(this),this.pixelStoreUnpackPremultiplyAlpha=new ui(this),this.pixelStoreUnpackFlipY=new Ni(this),this.options=d?{...d}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=r.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=r.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=r.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=r.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.maxPointSize=r.getParameter(r.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,d,b){return new l.I(this,r,d,b)}createVertexBuffer(r,d,b,M,R){return new wn(this,r,d,b,M,R)}createRenderbuffer(r,d,b){const M=this.gl,R=M.createRenderbuffer();return this.bindRenderbuffer.set(R),M.renderbufferStorage(M.RENDERBUFFER,r,d,b),this.bindRenderbuffer.set(null),R}createFramebuffer(r,d,b,M){return new ro(this,r,d,b,M)}clear({color:r,depth:d,stencil:b,colorMask:M}){const R=this.gl;let N=0;r&&(N|=R.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set(M||[!0,!0,!0,!0])),void 0!==d&&(N|=R.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==b&&(N|=R.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),R.clear(N)}setCullFace(r){!1===r.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){We(r.blendFunction,l.a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor),r.blendEquation?this.blendEquation.set(r.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(r.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}class Ts{constructor(r){this._gl=r.gl,this._query=this._gl.createQuery(),this._isFree=!0}begin(){this._gl.beginQuery(this._gl.ANY_SAMPLES_PASSED,this._query),this._isFree=!1}end(){this._gl.endQuery(this._gl.ANY_SAMPLES_PASSED)}isResultAvailable(){return this._gl.getQueryParameter(this._query,this._gl.QUERY_RESULT_AVAILABLE)}consumeResult(){const r=this._gl.getQueryParameter(this._query,this._gl.QUERY_RESULT);return this._isFree=!0,r}isFree(){return this._isFree}destroy(){this._gl.deleteQuery(this._query)}}class zr{constructor(r){this.useOcclusionQueries=!0,this.visualizeOcclusions="none",this.occlusionQueryFrameWindow=5,this.occluderSize=32,this.fadeSpeed=7,this.depthOffset=-1e-4,r.registerParameter(this,["Symbols"],"useOcclusionQueries"),r.registerParameter(this,["Symbols"],"visualizeOcclusions",{options:{none:"none",zPass:"zPass",zTest:"zTest"}}),r.registerParameter(this,["Symbols"],"occlusionQueryFrameWindow",{min:1,max:30,step:1}),r.registerParameter(this,["Symbols"],"occluderSize",{min:1,max:100,step:1}),r.registerParameter(this,["Symbols"],"fadeSpeed",{min:.1,max:50,step:.1}),r.registerParameter(this,["Symbols"],"depthOffset",{min:-.001,max:0,step:1e-4})}}class Zr{constructor(r,d,b,M){const R={width:b[0],height:b[1],data:null},N=r.gl;this.targetColorTexture=new l.T(r,R,N.RGBA,{useMipmap:!1}),this.backgroundColorTexture=new l.T(r,R,N.RGBA,{useMipmap:!1}),this.context=r,this.updateParticleTexture(d,M),this.lastInvalidatedAt=0}updateParticleTexture(r,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const b=this.context.gl,M=d.width*d.height;this.particleTexture0=new l.T(this.context,d,b.RGBA,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new l.T(this.context,d,b.RGBA,{premultiply:!1,useMipmap:!1});const R=new l.S;R.reserve(M);for(let N=0;N<M;N++)R.emplaceBack(N);this.particleIndexBuffer=this.context.createVertexBuffer(R,l.p.members,!0),this.particleSegment=l.b.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(r){return!(this.lastInvalidatedAt<r&&(this.lastInvalidatedAt=l.e.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}class Qr extends l.E{constructor(r){super(),this.requestManager=r,this.models={"":{}},this.numModelsLoading={}}loadModel(r,d){return l.l(this.requestManager.transformRequest(d,l.R.Model).url).then(b=>{if(!b)return;const M=l.c(b),R=new l.M(r,void 0,void 0,M);return R.computeBoundsAndApplyParent(),R}).catch(b=>{if(b&&404===b.status)return null;this.fire(new l.d(new Error(`Could not load model ${r} from ${d}: ${b.message}`)))})}load(r,d){this.models[d]||(this.models[d]={});const b=Object.keys(r);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+b.length;const M=[];for(const R of b)M.push(this.loadModel(R,r[R]));Promise.allSettled(M).then(R=>{for(let N=0;N<R.length;N++){const{status:H,value:ee}=R[N];"fulfilled"===H&&ee&&(this.models[d][b[N]]={model:ee,numReferences:1})}this.numModelsLoading[d]-=b.length,this.fire(new l.f("data",{dataType:"style"}))}).catch(R=>{this.fire(new l.d(new Error(`Could not load models: ${R.message}`)))})}isLoaded(){for(const r in this.numModelsLoading)if(this.numModelsLoading[r]>0)return!1;return!0}hasModel(r,d){return!!this.getModel(r,d)}getModel(r,d){return this.models[d]||(this.models[d]={}),this.models[d][r]?this.models[d][r].model:void 0}addModel(r,d,b){this.models[b]||(this.models[b]={}),this.hasModel(r,b)&&this.models[b][r].numReferences++,this.load({[r]:this.requestManager.normalizeModelURL(d)},b)}addModels(r,d){this.models[d]||(this.models[d]={});const b={};for(const M in r)this.models[d][M]={},b[M]=this.requestManager.normalizeModelURL(r[M]);this.load(b,d)}addModelsFromBucket(r,d){this.models[d]||(this.models[d]={});const b={};for(const M of r)this.hasModel(M,d)?this.models[d][M].numReferences++:b[M]=this.requestManager.normalizeModelURL(M);this.load(b,d)}removeModel(r,d){if(this.models[d]&&this.models[d][r]&&(this.models[d][r].numReferences--,0===this.models[d][r].numReferences)){const b=this.models[d][r].model;delete this.models[d][r],b.destroy()}}listModels(r){return this.models[r]||(this.models[r]={}),Object.keys(this.models[r])}upload(r,d){this.models[d]||(this.models[d]={});for(const b in this.models[d])this.models[d][b].model&&this.models[d][b].model.upload(r.context)}}function Wo(v){const{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class lr extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(r){this.images[r]={},this.loaded[r]=!1,this.updatedImages[r]={},this.patterns[r]={},this.callbackDispatchedThisFrame[r]={},this.atlasImage[r]=new l.i({width:1,height:1})}isLoaded(){for(const r in this.loaded)if(!this.loaded[r])return!1;return!0}setLoaded(r,d){if(this.loaded[d]!==r&&(this.loaded[d]=r,r)){for(const{ids:b,callback:M}of this.requestors)this._notify(b,d,M);this.requestors=[]}}hasImage(r,d){return!!this.getImage(r,d)}getImage(r,d){return this.images[d][r]}addImage(r,d,b){this._validate(r,b)&&(this.images[d][r]=b)}_validate(r,d){let b=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new l.d(new Error(`Image "${r}" has invalid "stretchX" value`))),b=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new l.d(new Error(`Image "${r}" has invalid "stretchY" value`))),b=!1),this._validateContent(d.content,d)||(this.fire(new l.d(new Error(`Image "${r}" has invalid "content" value`))),b=!1),b}_validateStretch(r,d){if(!r)return!0;let b=0;for(const M of r){if(M[0]<b||M[1]<M[0]||d<M[1])return!1;b=M[1]}return!0}_validateContent(r,d){return!(r&&(4!==r.length||r[0]<0||d.data.width<r[0]||r[1]<0||d.data.height<r[1]||r[2]<0||d.data.width<r[2]||r[3]<0||d.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))}updateImage(r,d,b){b.version=this.images[d][r].version+1,this.images[d][r]=b,this.updatedImages[d][r]=!0}removeImage(r,d){const b=this.images[d][r];delete this.images[d][r],delete this.patterns[d][r],b.userImage&&b.userImage.onRemove&&b.userImage.onRemove()}listImages(r){return Object.keys(this.images[r])}getImages(r,d,b){let M=!0;const R=!!this.loaded[d];if(!R)for(const N of r)this.images[d][N]||(M=!1);R||M?this._notify(r,d,b):this.requestors.push({ids:r,scope:d,callback:b})}getUpdatedImages(r){return this.updatedImages[r]}_notify(r,d,b){const M={};for(const R of r){this.images[d][R]||this.fire(new l.f("styleimagemissing",{id:R}));const N=this.images[d][R];N?M[R]={data:N.data.clone(),pixelRatio:N.pixelRatio,sdf:N.sdf,version:N.version,stretchX:N.stretchX,stretchY:N.stretchY,content:N.content,hasRenderCallback:!(!N.userImage||!N.userImage.render)}:l.w(`Image "${R}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}b(null,M)}getPixelSize(r){const{width:d,height:b}=this.atlasImage[r];return{width:d,height:b}}getPattern(r,d,b){const M=this.patterns[d][r],R=this.getImage(r,d);if(!R)return null;if(M&&M.position.version===R.version)return M.position;if(M)M.position.version=R.version;else{const N={w:R.data.width+2,h:R.data.height+2,x:0,y:0},H=new l.k(N,R);this.patterns[d][r]={bin:N,position:H}}return this._updatePatternAtlas(d,b),this.patterns[d][r].position}bind(r,d){const b=r.gl;let M=this.atlasTexture[d];M?this.dirty&&(M.update(this.atlasImage[d]),this.dirty=!1):(M=new l.T(r,this.atlasImage[d],b.RGBA),this.atlasTexture[d]=M),M.bind(b.LINEAR,b.CLAMP_TO_EDGE)}_updatePatternAtlas(r,d){const b=[];for(const H in this.patterns[r])b.push(this.patterns[r][H].bin);const{w:M,h:R}=l.j(b),N=this.atlasImage[r];N.resize({width:M||1,height:R||1});for(const H in this.patterns[r]){const{bin:ee}=this.patterns[r][H],se=ee.x+1,he=ee.y+1,ye=this.images[r][H].data,Pe=ye.width,Fe=ye.height;l.i.copy(ye,N,{x:0,y:0},{x:se,y:he},{width:Pe,height:Fe},d),l.i.copy(ye,N,{x:0,y:Fe-1},{x:se,y:he-1},{width:Pe,height:1},d),l.i.copy(ye,N,{x:0,y:0},{x:se,y:he+Fe},{width:Pe,height:1},d),l.i.copy(ye,N,{x:Pe-1,y:0},{x:se-1,y:he},{width:1,height:Fe},d),l.i.copy(ye,N,{x:0,y:0},{x:se+Pe,y:he},{width:1,height:Fe},d)}this.dirty=!0}beginFrame(){for(const r in this.images)this.callbackDispatchedThisFrame[r]={}}dispatchRenderCallbacks(r,d){for(const b of r){if(this.callbackDispatchedThisFrame[d][b])continue;this.callbackDispatchedThisFrame[d][b]=!0;const M=this.images[d][b];Wo(M)&&this.updateImage(b,d,M)}}}function Pr(v){const r=v.key,d=v.value,b=v.valueSpec||{},M=v.objectElementValidators||{},R=v.style,N=v.styleSpec;let H=[];const ee=l.n(d);if("object"!==ee)return[new l.V(r,d,`object expected, ${ee} found`)];for(const se in d){const he=se.split(".")[0];let ye;M[he]?ye=M[he]:b[he]?ye=ue:M["*"]?ye=M["*"]:b["*"]&&(ye=ue),ye?H=H.concat(ye({key:(r&&`${r}.`)+se,value:d[se],valueSpec:b[he]||b["*"],style:R,styleSpec:N,object:d,objectKey:se},d)):H.push(new l.m(r,d[se],`unknown property "${se}"`))}for(const se in b)M[se]||b[se].required&&void 0===b[se].default&&void 0===d[se]&&H.push(new l.V(r,d,`missing required property "${se}"`));return H}function xr(v){const r=v.value,d=v.valueSpec,b=v.style,M=v.styleSpec,R=v.key,N=v.arrayElementValidator||ue;if("array"!==l.n(r))return[new l.V(R,r,`array expected, ${l.n(r)} found`)];if(d.length&&r.length!==d.length)return[new l.V(R,r,`array length ${d.length} expected, length ${r.length} found`)];if(d["min-length"]&&r.length<d["min-length"])return[new l.V(R,r,`array length at least ${d["min-length"]} expected, length ${r.length} found`)];let H={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};M.$version<7&&(H.function=d.function),"object"===l.n(d.value)&&(H=d.value);let ee=[];for(let se=0;se<r.length;se++)ee=ee.concat(N({array:r,arrayIndex:se,value:r[se],valueSpec:H,style:b,styleSpec:M,key:`${R}[${se}]`},!0));return ee}function wr(v){const r=v.key,d=v.value,b=v.valueSpec;let M=l.n(d);if("number"===M&&d!=d&&(M="NaN"),"number"!==M)return[new l.V(r,d,`number expected, ${M} found`)];if("minimum"in b){let R=b.minimum;if("array"===l.n(b.minimum)&&(R=b.minimum[v.arrayIndex]),d<R)return[new l.V(r,d,`${d} is less than the minimum value ${R}`)]}if("maximum"in b){let R=b.maximum;if("array"===l.n(b.maximum)&&(R=b.maximum[v.arrayIndex]),d>R)return[new l.V(r,d,`${d} is greater than the maximum value ${R}`)]}return[]}function aa(v){const r=v.valueSpec,d=l.u(v.value.type);let b,M,R,N={};const H="categorical"!==d&&void 0===v.value.property,ee=!H,se="array"===l.n(v.value.stops)&&"array"===l.n(v.value.stops[0])&&"object"===l.n(v.value.stops[0][0]),he=Pr({key:v.key,value:v.value,valueSpec:v.styleSpec.function,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{stops:function(Fe){if("identity"===d)return[new l.V(Fe.key,Fe.value,'identity function may not have a "stops" property')];let Qe=[];const Je=Fe.value;return Qe=Qe.concat(xr({key:Fe.key,value:Je,valueSpec:Fe.valueSpec,style:Fe.style,styleSpec:Fe.styleSpec,arrayElementValidator:ye})),"array"===l.n(Je)&&0===Je.length&&Qe.push(new l.V(Fe.key,Je,"array must have at least one stop")),Qe},default:function(Fe){return ue({key:Fe.key,value:Fe.value,valueSpec:r,style:Fe.style,styleSpec:Fe.styleSpec})}}});return"identity"===d&&H&&he.push(new l.V(v.key,v.value,'missing required property "property"')),"identity"===d||v.value.stops||he.push(new l.V(v.key,v.value,'missing required property "stops"')),"exponential"===d&&v.valueSpec.expression&&!l.s(v.valueSpec)&&he.push(new l.V(v.key,v.value,"exponential functions not supported")),v.styleSpec.$version>=8&&(ee&&!l.q(v.valueSpec)?he.push(new l.V(v.key,v.value,"property functions not supported")):H&&!l.r(v.valueSpec)&&he.push(new l.V(v.key,v.value,"zoom functions not supported"))),"categorical"!==d&&!se||void 0!==v.value.property||he.push(new l.V(v.key,v.value,'"property" property is required')),he;function ye(Fe){let Qe=[];const Je=Fe.value,tt=Fe.key;if("array"!==l.n(Je))return[new l.V(tt,Je,`array expected, ${l.n(Je)} found`)];if(2!==Je.length)return[new l.V(tt,Je,`array length 2 expected, length ${Je.length} found`)];if(se){if("object"!==l.n(Je[0]))return[new l.V(tt,Je,`object expected, ${l.n(Je[0])} found`)];if(void 0===Je[0].zoom)return[new l.V(tt,Je,"object stop key must have zoom")];if(void 0===Je[0].value)return[new l.V(tt,Je,"object stop key must have value")];const rt=l.u(Je[0].zoom);if("number"!=typeof rt)return[new l.V(tt,Je[0].zoom,"stop zoom values must be numbers")];if(R&&R>rt)return[new l.V(tt,Je[0].zoom,"stop zoom values must appear in ascending order")];rt!==R&&(R=rt,M=void 0,N={}),Qe=Qe.concat(Pr({key:`${tt}[0]`,value:Je[0],valueSpec:{zoom:{}},style:Fe.style,styleSpec:Fe.styleSpec,objectElementValidators:{zoom:wr,value:Pe}}))}else Qe=Qe.concat(Pe({key:`${tt}[0]`,value:Je[0],valueSpec:{},style:Fe.style,styleSpec:Fe.styleSpec},Je));return l.t(l.v(Je[1]))?Qe.concat([new l.V(`${tt}[1]`,Je[1],"expressions are not allowed in function stops.")]):Qe.concat(ue({key:`${tt}[1]`,value:Je[1],valueSpec:r,style:Fe.style,styleSpec:Fe.styleSpec}))}function Pe(Fe,Qe){const Je=l.n(Fe.value),tt=l.u(Fe.value),rt=null!==Fe.value?Fe.value:Qe;if(b){if(Je!==b)return[new l.V(Fe.key,rt,`${Je} stop domain type must match previous stop domain type ${b}`)]}else b=Je;if("number"!==Je&&"string"!==Je&&"boolean"!==Je&&"number"!=typeof tt&&"string"!=typeof tt&&"boolean"!=typeof tt)return[new l.V(Fe.key,rt,"stop domain value must be a number, string, or boolean")];if("number"!==Je&&"categorical"!==d){let Pt=`number expected, ${Je} found`;return l.q(r)&&void 0===d&&(Pt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new l.V(Fe.key,rt,Pt)]}return"categorical"!==d||"number"!==Je||"number"==typeof tt&&isFinite(tt)&&Math.floor(tt)===tt?"categorical"!==d&&"number"===Je&&"number"==typeof tt&&"number"==typeof M&&void 0!==M&&tt<M?[new l.V(Fe.key,rt,"stop domain values must appear in ascending order")]:(M=tt,"categorical"===d&&tt in N?[new l.V(Fe.key,rt,"stop domain values must be unique")]:(N[tt]=!0,[])):[new l.V(Fe.key,rt,`integer expected, found ${String(tt)}`)]}}function Jn(v){const r=("property"===v.expressionContext?l.x:l.y)(l.v(v.value),v.valueSpec);if("error"===r.result)return r.value.map(b=>new l.V(`${v.key}${b.key}`,v.value,b.message));const d=r.value.expression||r.value._styleExpression.expression;if("property"===v.expressionContext&&"text-font"===v.propertyKey&&!d.outputDefined())return[new l.V(v.key,v.value,`Invalid data expression for "${v.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===v.expressionContext&&"layout"===v.propertyType&&!l.z(d))return[new l.V(v.key,v.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===v.expressionContext)return hs(d,v);if(v.expressionContext&&0===v.expressionContext.indexOf("cluster")){if(!l.A(d,["zoom","feature-state"]))return[new l.V(v.key,v.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===v.expressionContext&&!l.B(d))return[new l.V(v.key,v.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hs(v,r){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(const M of r.valueSpec.expression.parameters)d.delete(M);if(0===d.size)return[];const b=[];return v instanceof l.D&&d.has(v.name)?[new l.V(r.key,r.value,`["${v.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(v.eachChild(M=>{b.push(...hs(M,r))}),b)}function jr(v){const r=v.key,d=v.value,b=v.valueSpec,M=[];return Array.isArray(b.values)?-1===b.values.indexOf(l.u(d))&&M.push(new l.V(r,d,`expected one of [${b.values.join(", ")}], ${JSON.stringify(d)} found`)):-1===Object.keys(b.values).indexOf(l.u(d))&&M.push(new l.V(r,d,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(d)} found`)),M}function Ns(v){return l.G(l.v(v.value))?Jn(l.o({},v,{expressionContext:"filter",valueSpec:v.styleSpec[`filter_${v.layerType||"fill"}`]})):ps(v)}function ps(v){const r=v.value,d=v.key;if("array"!==l.n(r))return[new l.V(d,r,`array expected, ${l.n(r)} found`)];const b=v.styleSpec;let M,R=[];if(r.length<1)return[new l.V(d,r,"filter array must have at least 1 element")];switch(R=R.concat(jr({key:`${d}[0]`,value:r[0],valueSpec:b.filter_operator,style:v.style,styleSpec:v.styleSpec})),l.u(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===l.u(r[1])&&R.push(new l.V(d,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":3!==r.length&&R.push(new l.V(d,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(M=l.n(r[1]),"string"!==M&&R.push(new l.V(`${d}[1]`,r[1],`string expected, ${M} found`)));for(let N=2;N<r.length;N++)M=l.n(r[N]),"$type"===l.u(r[1])?R=R.concat(jr({key:`${d}[${N}]`,value:r[N],valueSpec:b.geometry_type,style:v.style,styleSpec:v.styleSpec})):"string"!==M&&"number"!==M&&"boolean"!==M&&R.push(new l.V(`${d}[${N}]`,r[N],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let N=1;N<r.length;N++)R=R.concat(ps({key:`${d}[${N}]`,value:r[N],style:v.style,styleSpec:v.styleSpec}));break;case"has":case"!has":M=l.n(r[1]),2!==r.length?R.push(new l.V(d,r,`filter array for "${r[0]}" operator must have 2 elements`)):"string"!==M&&R.push(new l.V(`${d}[1]`,r[1],`string expected, ${M} found`))}return R}function Kr(v,r){const d=v.key,b=v.style,M=v.layer,R=v.styleSpec,N=v.value,H=v.objectKey,ee=R[`${r}_${v.layerType}`];if(!ee)return[];const se=H.match(/^(.*)-transition$/);if("paint"===r&&se&&ee[se[1]]&&ee[se[1]].transition)return ue({key:d,value:N,valueSpec:R.transition,style:b,styleSpec:R});const he=v.valueSpec||ee[H];if(!he)return[new l.m(d,N,`unknown property "${H}"`)];let ye;if("string"===l.n(N)&&l.q(he)&&!he.tokens&&(ye=/^{([^}]+)}$/.exec(N))){const Fe=`\`{ "type": "identity", "property": ${ye?JSON.stringify(ye[1]):'"_"'} }\``;return[new l.V(d,N,`"${H}" does not support interpolation syntax\nUse an identity property function instead: ${Fe}.`)]}const Pe=[];if("symbol"===v.layerType)"text-field"!==H||!b||b.glyphs||b.imports||Pe.push(new l.V(d,N,'use of "text-field" requires a style "glyphs" property')),"text-font"===H&&l.H(l.v(N))&&"identity"===l.u(N.type)&&Pe.push(new l.V(d,N,'"text-font" does not support identity functions'));else if("model"===v.layerType&&"paint"===r&&M&&M.layout&&M.layout.hasOwnProperty("model-id")&&l.q(he)&&(l.J(he)||l.r(he))){const Fe=l.x(l.v(N),he),Qe=Fe.value.expression||Fe.value._styleExpression.expression;Qe&&!l.A(Qe,["measure-light"])&&("model-emissive-strength"===H&&l.B(Qe)&&l.z(Qe)||Pe.push(new l.V(d,N,`${H} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return Pe.concat(ue({key:v.key,value:N,valueSpec:he,style:b,styleSpec:R,expressionContext:"property",propertyType:r,propertyKey:H}))}function Fi(v){return Kr(v,"paint")}function ni(v){return Kr(v,"layout")}function Ai(v){let r=[];const d=v.value,b=v.key,M=v.style,R=v.styleSpec;d.type||d.ref||r.push(new l.V(b,d,'either "type" or "ref" is required'));let N=l.u(d.type);const H=l.u(d.ref);if(d.id){const ee=l.u(d.id);for(let se=0;se<v.arrayIndex;se++){const he=M.layers[se];l.u(he.id)===ee&&r.push(new l.V(b,d.id,`duplicate layer id "${d.id}", previously used at line ${he.id.__line__}`))}}if("ref"in d){let ee;["type","source","source-layer","filter","layout"].forEach(se=>{se in d&&r.push(new l.V(b,d[se],`"${se}" is prohibited for ref layers`))}),M.layers.forEach(se=>{l.u(se.id)===H&&(ee=se)}),ee?ee.ref?r.push(new l.V(b,d.ref,"ref cannot reference another ref layer")):N=l.u(ee.type):"string"==typeof H&&r.push(new l.V(b,d.ref,`ref layer "${H}" not found`))}else if("background"!==N&&"sky"!==N&&"slot"!==N)if(d.source){const ee=M.sources&&M.sources[d.source],se=ee&&l.u(ee.type);ee?"vector"===se&&"raster"===N?r.push(new l.V(b,d.source,`layer "${d.id}" requires a raster source`)):"raster"===se&&"raster"!==N?r.push(new l.V(b,d.source,`layer "${d.id}" requires a vector source`)):"vector"!==se||d["source-layer"]?"raster-dem"===se&&"hillshade"!==N?r.push(new l.V(b,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):"raster-array"!==se||["raster","raster-particle"].includes(N)?"line"!==N||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||"geojson"===se&&ee.lineMetrics?"raster-particle"===N&&"raster-array"!==se&&r.push(new l.V(b,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):r.push(new l.V(b,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new l.V(b,d.source,"raster-array source can only be used with layer type 'raster'.")):r.push(new l.V(b,d,`layer "${d.id}" must specify a "source-layer"`)):r.push(new l.V(b,d.source,`source "${d.source}" not found`))}else r.push(new l.V(b,d,'missing required property "source"'));return r=r.concat(Pr({key:b,value:d,valueSpec:R.layer,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ue({key:`${b}.type`,value:d.type,valueSpec:R.layer.type,style:v.style,styleSpec:v.styleSpec,object:d,objectKey:"type"}),filter:ee=>Ns(l.o({layerType:N},ee)),layout:ee=>Pr({layer:d,key:ee.key,value:ee.value,valueSpec:{},style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{"*":se=>ni(l.o({layerType:N},se))}}),paint:ee=>Pr({layer:d,key:ee.key,value:ee.value,valueSpec:{},style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{"*":se=>Fi(l.o({layerType:N,layer:d},se))}})}})),r}function Kn(v){const r=v.value,d=v.key,b=l.n(r);return"string"!==b?[new l.V(d,r,`string expected, ${b} found`)]:[]}const kt={promoteId:function({key:v,value:r}){if("string"===l.n(r))return Kn({key:v,value:r});{const d=[];for(const b in r)d.push(...Kn({key:`${v}.${b}`,value:r[b]}));return d}}};function mt(v){const r=v.value,d=v.key,b=v.styleSpec,M=v.style;if(!r.type)return[new l.V(d,r,'"type" is required')];const R=l.u(r.type);let N=[];switch(["vector","raster","raster-dem","raster-array"].includes(R)&&(r.url||r.tiles||N.push(new l.m(d,r,'Either "url" or "tiles" is required.'))),R){case"vector":case"raster":case"raster-dem":case"raster-array":return N=N.concat(Pr({key:d,value:r,valueSpec:b[`source_${R.replace("-","_")}`],style:v.style,styleSpec:b,objectElementValidators:kt})),N;case"geojson":if(N=Pr({key:d,value:r,valueSpec:b.source_geojson,style:M,styleSpec:b,objectElementValidators:kt}),r.cluster)for(const H in r.clusterProperties){const[ee,se]=r.clusterProperties[H],he="string"==typeof ee?[ee,["accumulated"],["get",H]]:ee;N.push(...Jn({key:`${d}.${H}.map`,value:se,expressionContext:"cluster-map"})),N.push(...Jn({key:`${d}.${H}.reduce`,value:he,expressionContext:"cluster-reduce"}))}return N;case"video":return Pr({key:d,value:r,valueSpec:b.source_video,style:M,styleSpec:b});case"image":return Pr({key:d,value:r,valueSpec:b.source_image,style:M,styleSpec:b});case"canvas":return[new l.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return jr({key:`${d}.type`,value:r.type,valueSpec:{values:Ye(b)},style:M,styleSpec:b})}}function Ye(v){return v.source.reduce((r,d)=>{const b=v[d];return"enum"===b.type.type&&(r=r.concat(Object.keys(b.type.values))),r},[])}function Tt(v){const r=v.value,d=v.styleSpec,b=d.light,M=v.style;let R=[];const N=l.n(r);if(void 0===r)return R;if("object"!==N)return R=R.concat([new l.V("light",r,`object expected, ${N} found`)]),R;for(const H in r){const ee=H.match(/^(.*)-transition$/);R=R.concat(ee&&b[ee[1]]&&b[ee[1]].transition?ue({key:H,value:r[H],valueSpec:d.transition,style:M,styleSpec:d}):b[H]?ue({key:H,value:r[H],valueSpec:b[H],style:M,styleSpec:d}):[new l.V(H,r[H],`unknown property "${H}"`)])}return R}function Jt(v){const r=v.value;let d=[];if(!r)return d;const b=l.n(r);if("object"!==b)return d=d.concat([new l.V("light-3d",r,`object expected, ${b} found`)]),d;const M=v.styleSpec,R=M["light-3d"],N=v.key,H=v.style,ee=v.style.lights;for(const ye of["type","id"])if(!(ye in r))return d=d.concat([new l.V("light-3d",r,`missing property ${ye} on light`)]),d;if(r.type&&ee)for(let ye=0;ye<v.arrayIndex;ye++){const Pe=l.u(r.type),Fe=ee[ye];l.u(Fe.type)===Pe&&d.push(new l.V(N,r.id,`duplicate light type "${r.type}", previously defined at line ${Fe.id.__line__}`))}const se=`properties_light_${r.type}`;if(!(se in M))return d=d.concat([new l.V("light-3d",r,`Invalid light type ${r.type}`)]),d;const he=M[se];for(const ye in r)if("properties"===ye){const Pe=r[ye],Fe=l.n(Pe);if("object"!==Fe)return d=d.concat([new l.V("properties",Pe,`object expected, ${Fe} found`)]),d;for(const Qe in Pe)d=d.concat(he[Qe]?ue({key:Qe,value:Pe[Qe],valueSpec:he[Qe],style:H,styleSpec:M}):[new l.m(v.key,Pe[Qe],`unknown property "${Qe}"`)])}else{const Pe=ye.match(/^(.*)-transition$/);d=d.concat(Pe&&R[Pe[1]]&&R[Pe[1]].transition?ue({key:ye,value:r[ye],valueSpec:M.transition,style:H,styleSpec:M}):R[ye]?ue({key:ye,value:r[ye],valueSpec:R[ye],style:H,styleSpec:M}):[new l.m(ye,r[ye],`unknown property "${ye}"`)])}return d}function Ln(v){const r=v.value,d=v.key,b=v.style,M=v.styleSpec,R=M.terrain;let N=[];const H=l.n(r);if(void 0===r||"null"===H)return N;if("object"!==H)return N=N.concat([new l.V("terrain",r,`object expected, ${H} found`)]),N;for(const ee in r){const se=ee.match(/^(.*)-transition$/);N=N.concat(se&&R[se[1]]&&R[se[1]].transition?ue({key:ee,value:r[ee],valueSpec:M.transition,style:b,styleSpec:M}):R[ee]?ue({key:ee,value:r[ee],valueSpec:R[ee],style:b,styleSpec:M}):[new l.m(ee,r[ee],`unknown property "${ee}"`)])}if(r.source){const ee=b.sources&&b.sources[r.source],se=ee&&l.u(ee.type);ee?"raster-dem"!==se&&N.push(new l.V(d,r.source,`terrain cannot be used with a source of type ${String(se)}, it only be used with a "raster-dem" source type`)):N.push(new l.V(d,r.source,`source "${r.source}" not found`))}else N.push(new l.V(d,r,'terrain is missing required property "source"'));return N}function Lt(v){const r=v.value,d=v.style,b=v.styleSpec,M=b.fog;let R=[];const N=l.n(r);if(void 0===r)return R;if("object"!==N)return R=R.concat([new l.V("fog",r,`object expected, ${N} found`)]),R;for(const H in r){const ee=H.match(/^(.*)-transition$/);R=R.concat(ee&&M[ee[1]]&&M[ee[1]].transition?ue({key:H,value:r[H],valueSpec:b.transition,style:d,styleSpec:b}):M[H]?ue({key:H,value:r[H],valueSpec:M[H],style:d,styleSpec:b}):[new l.m(H,r[H],`unknown property "${H}"`)])}return R}const Ee={"*":()=>[],array:xr,boolean:function(v){const r=v.value,d=v.key,b=l.n(r);return"boolean"!==b?[new l.V(d,r,`boolean expected, ${b} found`)]:[]},number:wr,color:function(v){const r=v.key,d=v.value,b=l.n(d);return"string"!==b?[new l.V(r,d,`color expected, ${b} found`)]:null===l.F(d)?[new l.V(r,d,`color expected, "${d}" found`)]:[]},enum:jr,filter:Ns,function:aa,layer:Ai,object:Pr,source:mt,model:l.K,light:Tt,"light-3d":Jt,terrain:Ln,fog:Lt,string:Kn,formatted:function(v){return 0===Kn(v).length?[]:Jn(v)},resolvedImage:function(v){return 0===Kn(v).length?[]:Jn(v)},projection:function(v){const r=v.value,d=v.styleSpec,b=d.projection,M=v.style;let R=[];const N=l.n(r);if("object"===N)for(const H in r)R=R.concat(ue({key:H,value:r[H],valueSpec:b[H],style:M,styleSpec:d}));else"string"!==N&&(R=R.concat([new l.V("projection",r,`object or string expected, ${N} found`)]));return R},import:function(v){const{value:r,styleSpec:d}=v,{data:b,...M}=r;Object.defineProperty(M,"__line__",{value:r.__line__,enumerable:!1});let R=Pr(l.o({},v,{value:M,valueSpec:d.import}));return""===l.u(M.id)&&R.push(new l.V(`${v.key}.id`,M,"import id can't be an empty string")),b&&(R=R.concat(we(b,d,{key:`${v.key}.data`}))),R}};function ue(v,r=!1){const d=v.value,b=v.valueSpec,M=v.styleSpec;if(b.expression&&l.H(l.u(d)))return aa(v);if(b.expression&&l.t(l.v(d)))return Jn(v);if(b.type&&Ee[b.type]){const R=Ee[b.type](v);return!0===r&&R.length>0&&"array"===l.n(v.value)?Jn(v):R}return Pr(l.o({},v,{valueSpec:b.type?M[b.type]:b}))}function ae(v){const r=v.value,d=v.key,b=Kn(v);return b.length||(-1===r.indexOf("{fontstack}")&&b.push(new l.V(d,r,'"glyphs" url must include a "{fontstack}" token')),-1===r.indexOf("{range}")&&b.push(new l.V(d,r,'"glyphs" url must include a "{range}" token'))),b}function we(v,r=l.L,d={}){return ue({key:d.key||"",value:v,valueSpec:r.$root,styleSpec:r,style:v,objectElementValidators:{glyphs:ae,"*":()=>[]}})}function Ue(v,r=l.L){return jn(we(v,r))}const it=v=>jn(mt(v)),Xt=v=>jn(Tt(v)),Cn=v=>jn(Jt(v)),dn=v=>jn(Ln(v)),Nn=v=>jn(Lt(v)),Hi=v=>jn(Ai(v)),Oi=v=>jn(Ns(v)),Fo=v=>jn(Fi(v)),nr=v=>jn(ni(v)),ii=v=>jn(l.K(v));function jn(v){return v.slice().sort((r,d)=>r.line&&d.line?r.line-d.line:0)}function di(v,r){let d=!1;if(r&&r.length)for(const b of r)b instanceof l.m?l.w(b.message):(v.fire(new l.d(new Error(b.message))),d=!0);return d}const co=new l.N({anchor:new l.O(l.L.light.anchor),position:new l.Q(l.L.light.position),color:new l.O(l.L.light.color),intensity:new l.O(l.L.light.intensity)});class Ki extends l.E{constructor(r,d="flat"){super(),this._transitionable=new l.U(co),this.setLight(r,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,d,b={}){this._validate(Xt,r,b)||(this._transitionable.setTransitionOrValue(r),this.id=d)}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,d,b){return(!b||!1!==b.validate)&&di(this,r.call(Ue,l.W({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.L})))}}const Kt=new l.N({source:new l.O(l.L.terrain.source),exaggeration:new l.O(l.L.terrain.exaggeration)});let oi=class extends l.E{constructor(v,r,d,b){super(),this.scope=d,this._transitionable=new l.U(Kt,d,b),this._transitionable.setTransitionOrValue(v,b),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=r}get(){return this._transitionable.serialize()}set(v,r){this._transitionable.setTransitionOrValue(v,r)}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}getExaggeration(v){return this._transitioning.possiblyEvaluate(new l.X(v)).get("exaggeration")}isZoomDependent(){const v=this._transitionable._values.exaggeration;return null!=v&&null!=v.value&&null!=v.value.expression&&v.value.expression instanceof l.Z}};const Pi=45,Xo=65,pr=.05;function es(v,r,d,b){const M=l.$(Pi,Xo,d),[R,N]=qr(v,b);let H=1-Math.min(1,Math.exp((r-R)/(N-R)*-6));return H*=H*H,H=Math.min(1,1.00747*H),H*M*v.alpha}function qr(v,r){const d=.5/Math.tan(.5*r);return[v.range[0]+d,v.range[1]+d]}function Pa(v,r,d,b,M){const R=l._.transformMat4([],[r,d,b],M.mercatorFogMatrix);return es(v,l._.length(R),M.pitch,M._fov)}function Jl(v,r,d,b,M,R,N){const H=[[d,b,0],[M,b,0],[M,R,0],[d,R,0]];let ee=Number.MAX_VALUE,se=-Number.MAX_VALUE;for(const he of H){const ye=l._.transformMat4([],he,r),Pe=l._.length(ye);ee=Math.min(ee,Pe),se=Math.max(se,Pe)}return[es(v,ee,N.pitch,N._fov),es(v,se,N.pitch,N._fov)]}const ru=new l.N({range:new l.O(l.L.fog.range),color:new l.O(l.L.fog.color),"high-color":new l.O(l.L.fog["high-color"]),"space-color":new l.O(l.L.fog["space-color"]),"horizon-blend":new l.O(l.L.fog["horizon-blend"]),"star-intensity":new l.O(l.L.fog["star-intensity"]),"vertical-range":new l.O(l.L.fog["vertical-range"])});class Oa extends l.E{constructor(r,d,b,M){super(),this._transitionable=new l.U(ru,b,new Map(M)),this.set(r,M),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new l.a0(ru),this.scope=b}get state(){const r=this._transform,d="globe"===r.projection.name,b=l.a1(r.zoom),M=this.properties.get("range"),R=[.5,3];return{range:d?[l.a2(R[0],M[0],b),l.a2(R[1],M[1],b)]:M,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(r,d,b={}){if(this._validate(Nn,r,b))return;const M=l.W({},r);for(const R of Object.keys(l.L.fog))void 0===M[R]&&(M[R]=l.L.fog[R].default);this._options=M,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(r){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:l.$(Pi,Xo,r))*d.a}getOpacityAtLatLng(r,d){return this._transform.projection.supportsFog?function(b,M,R){const N=l.Y.fromLngLat(M),H=R.elevation?R.elevation.getAtPointOrZero(N):0;return Pa(b,N.x,N.y,H,R)}(this.state,r,d):0}getOpacityForTile(r){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(r.toUnwrapped());return Jl(this.state,d,0,0,l.a3,l.a3,this._transform)}getOpacityForBounds(r,d,b,M,R){return this._transform.projection.supportsFog?Jl(this.state,r,d,b,M,R,this._transform):[1,1]}getFovAdjustedRange(r){return this._transform.projection.supportsFog?qr(this.state,r):[0,1]}isVisibleOnFrustum(r){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const b of d){const M=r.points[b];let R;if(M[2]>=0)R=M;else{const N=r.points[b-4];R=l.a4(N,M,N[2]/(N[2]-M[2]))}if(Pa(this.state,R[0],R[1],0,this._transform)>=pr)return!0}return!1}updateConfig(r){this._transitionable.setTransitionOrValue(this._options,new Map(r))}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,d,b){return(!b||!1!==b.validate)&&di(this,r.call(Ue,l.W({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.L})))}}class Cr extends l.E{constructor(r,d,b,M){super(),this.scope=b,this._options=r,this.properties=new l.a0(d),this._transitionable=new l.U(d,b,new Map(M)),this._transitionable.setTransitionOrValue(r.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(r){this._transitionable.setTransitionOrValue(this._options.properties,new Map(r))}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(r,d){this._options=r,this._transitionable.setTransitionOrValue(r.properties,d)}shadowsEnabled(){return!!this.properties&&!0===this.properties.get("cast-shadows")}}const bi=new l.N({color:new l.O(l.L.properties_light_ambient.color),intensity:new l.O(l.L.properties_light_ambient.intensity)}),kr=new l.N({direction:new l.a5(l.L.properties_light_directional.direction),color:new l.O(l.L.properties_light_directional.color),intensity:new l.O(l.L.properties_light_directional.intensity),"cast-shadows":new l.O(l.L.properties_light_directional["cast-shadows"]),"shadow-intensity":new l.O(l.L.properties_light_directional["shadow-intensity"])});var Vr="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef RENDER_CUTOFF\nfloat cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}\n#endif",is="\nout vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#ifdef INDICATOR_CUTOUT\nuniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;\n#endif\nvec4 applyCutout(vec4 color) {\n#ifdef INDICATOR_CUTOUT\nfloat holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);\n#else\nreturn color;\n#endif\n}\n#ifdef DEBUG_WIREFRAME\n#define HANDLE_WIREFRAME_DEBUG \\\nglFragColor=vec4(0.7,0.0,0.0,0.7); \\\ngl_FragDepth=gl_FragCoord.z-0.0001;\n#else\n#define HANDLE_WIREFRAME_DEBUG\n#endif\n#ifdef RENDER_CUTOFF\nuniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;\n#endif\nvec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}",Es="\n#define EXTENT 8192.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}\n#ifdef RENDER_CUTOFF\nuniform vec4 u_cutoff_params;out float v_cutoff_opacity;\n#endif\nconst vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}",wa="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Gs="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform highp sampler2D u_depth;uniform vec2 u_depth_size_inv;uniform vec2 u_depth_range_unpack;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\n#ifdef TERRAIN_DEPTH_D24\nfloat unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}\n#else\nhighp float unpack_depth_rgba(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}\n#endif\nbool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;\n#ifdef TERRAIN_DEPTH_D24\nfloat depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);\n#else\nfloat depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));\n#endif\nreturn coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;\n#ifdef TERRAIN_DEPTH_D24\nvec4 depth=vec4(\ntexture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r\n);depth=unpack_depth4(depth);\n#else\nvec4 depth=vec4(\nunpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))\n);\n#endif\nreturn dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",xa="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",gl="highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {\n#ifdef FOG_DITHERING\nvec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);\n#else\nreturn color;\n#endif\n}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",Ha="#ifdef RASTER_ARRAY\nuniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)\n);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)\n);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}\n#endif",su="#ifdef RASTER_ARRAY\nuniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}\n#endif\nuniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}",au="#ifdef RENDER_SHADOWS\nuniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}\n#endif//RENDER_SHADOWS",_a="#ifdef RENDER_SHADOWS\n#ifdef DEPTH_TEXTURE\nuniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;\n#else\nuniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;\n#endif\nuniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;\n#ifdef DEPTH_TEXTURE\nshadow_depth=texture(u_shadowmap_1,uv).r;\n#else\nshadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;\n#endif\nreturn step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;\n#ifdef DEPTH_TEXTURE\nshadow_depth=texture(u_shadowmap_0,uv).r;\n#else\nshadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;\n#endif\nreturn step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;\n#ifdef NATIVE\nhighp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));\n#else\nhighp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(\nshadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)\n);\n#endif\nvec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {\n#ifdef SHADOWS_SINGLE_CASCADE\nlight_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);\n#else\nlight_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));\n#endif\n}highp float calculate_shadow_bias(float NDotL) {\n#ifdef NORMAL_OFFSET\nreturn 0.5*u_shadow_bias.x;\n#else\nreturn 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));\n#endif\n}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}\n#endif";const Eu=[];Ol(Vr,Eu),Ol(Es,Eu),Ol(is,Eu);const Ja={"_prelude_fog.vertex.glsl":xa,"_prelude_terrain.vertex.glsl":Gs,"_prelude_shadow.vertex.glsl":au,"_prelude_fog.fragment.glsl":gl,"_prelude_shadow.fragment.glsl":_a,"_prelude_lighting.glsl":"\n#ifdef LIGHTING_3D_MODE\nuniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}\n#endif//LIGHTING_3D_MODE","_prelude_raster_array.glsl":Ha,"_prelude_raster_particle.glsl":su},Ra={};Ms("",Gs),Ms(gl,xa),Ms(_a,au),Ms(Ha,""),Ms(su,"");const Vc=Ms(is,Es),$u=Vr;var ju={background:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nin vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_lighting.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),backgroundPattern:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),circle:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nuniform float u_emissive_strength;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\nglFragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nout vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}'),clippingMask:Ms("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ms('#include "_prelude_fog.fragment.glsl"\nuniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nout vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),heatmapTexture:Ms("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(0.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}","in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ms("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",'#include "_prelude_terrain.vertex.glsl"\nin vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}'),collisionCircle:Ms("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}","in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ms("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",'#include "_prelude_terrain.vertex.glsl"\nin vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;\n#endif\nout vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}'),fill:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nuniform float u_emissive_strength;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillOutline:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin highp vec2 v_pos;uniform float u_emissive_strength;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillOutlinePattern:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillPattern:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillExtrusion:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec4 v_color;in vec4 v_flat;\n#ifdef RENDER_SHADOWS\nin highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;\n#endif\nuniform lowp float u_opacity;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;in vec2 v_ao;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nin vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nin highp vec3 v_normal;\n#endif\nuniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;\n#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)\nin float v_flood_radius;in float v_has_floodlight;\n#endif\nuniform float u_emissive_strength;in float v_height;void main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nvec3 normal=normalize(v_normal);\n#endif\nfloat z;vec4 color=v_color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);\n#ifdef LIGHTING_3D_MODE\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#else\ncolor=mix(v_color,v_roof_color,z);\n#endif\n#endif\nfloat h=max(0.0,v_height);float ao_shade=1.0;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);\n#ifdef LIGHTING_3D_MODE\n#ifdef FLOOD_LIGHT\ncolor.rgb*=mix(ao_shade,1.0,v_has_floodlight);\n#else\ncolor.rgb*=ao_shade;\n#endif\n#else\ncolor.rgb*=ao_shade;\n#endif\n#endif\n#ifdef LIGHTING_3D_MODE\nfloat flood_radiance=0.0;\n#ifdef FLOOD_LIGHT\nflood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef FLOOD_LIGHT\nfloat ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);\n#else\nfloat shadowed_lighting_factor;\n#ifdef RENDER_CUTOFF\nshadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}\n#else\nshadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);\n#endif\ncolor.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);\n#endif\n#else\ncolor.rgb=apply_lighting(color.rgb,normal);\n#ifdef FLOOD_LIGHT\ncolor.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);\n#endif\n#endif\ncolor.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));\n#endif\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color);\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\n#include "_prelude_lighting.glsl"\nuniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nuniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nout vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nout highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;out vec2 v_ao;\n#endif\n#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)\nout float v_flood_radius;out float v_has_floodlight;\n#endif\nout float v_height;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define highp float flood_light_wall_radius\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize highp float flood_light_wall_radius\nbase*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nv_normal=normal;\n#endif\nbase=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat cutoff=1.0;vec3 scaled_pos=pos;\n#ifdef RENDER_CUTOFF\nvec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);\n#endif\nfloat hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=pos;vec3 shd_pos1=pos;\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifndef LIGHTING_3D_MODE\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#endif\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\n#ifdef FLOOD_LIGHT\nfloat is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;\n#endif\nv_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);\n#else\nv_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),fillExtrusionDepth:Ms("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}",'#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\nout highp float v_depth;void main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\nbase*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nvec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);\n#else\npos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}'),fillExtrusionPattern:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;in vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nin vec3 v_normal;\n#endif\nin vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define highp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize highp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_lighting.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nout vec2 v_pos;out vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;out vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nout vec3 v_normal;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define highp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize highp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_normal=normal;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}'),groundShadow:Ms('#include "_prelude_shadow.fragment.glsl"\nprecision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;\n#ifdef FOG\nin float v_fog_opacity;\n#endif\nvoid main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);\n#ifdef RENDER_CUTOFF\nshadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));\n#endif\n#ifdef FOG\nshadow=mix(shadow,vec3(1.0),v_fog_opacity);\n#endif\n#ifdef INDICATOR_CUTOUT\nshadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);\n#endif\nglFragColor=vec4(shadow,1.0);}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;\n#ifdef FOG\nout float v_fog_opacity;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);\n#endif\n}'),fillExtrusionGroundEffect:Ms("uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;\n#ifdef SDF_SUBPASS\nin highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}\n#ifdef FOG\nin highp float v_fog;\n#endif\n#endif\nvoid main() {\n#ifdef CLEAR_SUBPASS\nvec4 color=vec4(1.0);\n#ifdef CLEAR_FROM_TEXTURE\ncolor=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));\n#endif\nglFragColor=color;\n#else\n#ifdef SDF_SUBPASS\nhighp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;\n#ifdef FOG\nfog=v_fog;\n#endif\n#ifdef RENDER_CUTOFF\nfog*=v_cutoff_opacity;\n#endif\nglFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));\n#else\nvec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);\n#ifdef OVERDRAW_INSPECTOR\ncolor=vec4(1.0);\n#endif\nglFragColor=color;\n#endif\nHANDLE_WIREFRAME_DEBUG;\n#endif\n}",'#include "_prelude_fog.vertex.glsl"\nin highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;\n#ifdef SDF_SUBPASS\nout highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;\n#ifdef FOG\nout highp float v_fog;\n#endif\n#endif\nuniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;\n#pragma mapbox: define highp float flood_light_ground_radius\nconst float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {\n#pragma mapbox: initialize highp float flood_light_ground_radius\nvec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;\n#ifdef SDF_SUBPASS\nv_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);\n#ifdef FOG\nv_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);\n#endif\n#endif\nfloat hidden_by_landmark=0.0;\n#ifdef HAS_CENTROID\nhidden_by_landmark=a_hidden_by_landmark;\n#endif\nfloat isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n}'),hillshadePrepare:Ms("precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\nglFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);\n#endif\n#ifdef FOG\nglFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),line:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform lowp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;in vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nfloat luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float border_width\n#pragma mapbox: define lowp vec4 border_color\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float border_width\n#pragma mapbox: initialize lowp vec4 border_color\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trim_alpha=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/clamp(u_trim_fade_range[0],1e-4,1.0)));float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/clamp(u_trim_fade_range[1],1e-4,1.0)));float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}\n#endif\nif (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nout_color*=(alpha*opacity);\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define EXTRUDE_SCALE 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;\n#if defined(ELEVATED)\nin float a_z_offset;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nin highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nin float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float border_width\n#pragma mapbox: define lowp vec4 border_color\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float border_width\n#pragma mapbox: initialize lowp vec4 border_color\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);\n#if defined(ELEVATED)\nvec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);\n#else\ngl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#endif\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),linePattern:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef RENDER_LINE_TRIM_OFFSET\nin highp vec4 v_uv;\n#endif\n#ifdef LINE_JOIN_NONE\nin vec2 v_pattern_data;\n#endif\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define mediump float pixel_ratio\n#pragma mapbox: define mediump float blur\n#pragma mapbox: define mediump float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize mediump float pixel_ratio\n#pragma mapbox: initialize mediump float blur\n#pragma mapbox: initialize mediump float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}\n#endif\n#ifdef LINE_JOIN_NONE\nfloat pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}\n#endif\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting_ground(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ncolor*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color);\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;\n#if defined(ELEVATED)\nin float a_z_offset;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nin highp vec4 a_packed;\n#endif\nin highp float a_linesofar;\n#ifdef LINE_JOIN_NONE\nin highp vec3 a_pattern_data;out vec2 v_pattern_data;\n#endif\nuniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef RENDER_LINE_TRIM_OFFSET\nout highp vec4 v_uv;\n#endif\n#pragma mapbox: define mediump float blur\n#pragma mapbox: define mediump float opacity\n#pragma mapbox: define mediump float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define mediump float floorwidth\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define mediump float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize mediump float blur\n#pragma mapbox: initialize mediump float opacity\n#pragma mapbox: initialize mediump float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize mediump float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);\n#if defined(ELEVATED)\nvec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);\n#else\ngl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#endif\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nfloat a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef LINE_JOIN_NONE\nv_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),raster:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_raster_array.glsl"\nuniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;\n#ifdef PROJECTION_GLOBE_VIEW\nin float v_split_fade;\n#endif\nuniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;\n#ifndef RASTER_ARRAY\nuniform sampler2D u_image0;uniform sampler2D u_image1;\n#endif\n#ifdef RASTER_COLOR\nuniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;\n#endif\nvoid main() {vec4 color0,color1,color;vec2 value;\n#ifdef RASTER_COLOR\n#ifdef RASTER_ARRAY\n#ifdef RASTER_ARRAY_LINEAR\nvalue=mix(\nraTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t\n);\n#else\nvalue=mix(\nraTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t\n);\n#endif\nif (value.y > 0.0) value.x/=value.y;\n#else\ncolor=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);\n#endif\ncolor=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;\n#else\ncolor0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);\n#endif\ncolor.a*=u_opacity;\n#ifdef GLOBE_POLES\ncolor.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);\n#endif\nvec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;\n#endif\n#ifdef FOG\nhighp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));\n#endif\nglFragColor=vec4(out_color*color.a,color.a);\n#ifdef PROJECTION_GLOBE_VIEW\nglFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));\n#endif\n#ifdef RENDER_CUTOFF\nglFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;\n#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8\n#ifdef GLOBE_POLES\nin vec3 a_globe_pos;in vec2 a_uv;\n#else\nin vec2 a_pos;in vec2 a_texture_pos;\n#endif\nout vec2 v_pos0;out vec2 v_pos1;out float v_depth;\n#ifdef PROJECTION_GLOBE_VIEW\nout float v_split_fade;\n#endif\nvoid main() {vec2 uv;\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);\n#endif\n#else\nfloat w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    \nv_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n#else\ngl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n#endif\n#endif\nv_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;\n#ifdef RENDER_CUTOFF\nv_depth=gl_Position.z;\n#endif\n}'),rasterParticle:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;\n#endif\n#ifdef FOG\nhighp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));\n#endif\nglFragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;\n#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8\nin vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n#else\nuv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n#endif\nv_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}'),rasterParticleDraw:Ms("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",'#include "_prelude_raster_particle.glsl"\nin float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(\nmod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}'),rasterParticleTexture:Ms("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Ms('#include "_prelude_raster_particle.glsl"\nuniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(\nlinearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)\n);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}',"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbolIcon:Ms('#include "_prelude_lighting.glsl"\nuniform sampler2D u_texture;\n#ifdef ICON_TRANSITION\nuniform float u_icon_transition;\n#endif\nin float v_fade_opacity;in vec2 v_tex_a;\n#ifdef ICON_TRANSITION\nin vec2 v_tex_b;\n#endif\n#ifdef COLOR_ADJUSTMENT\nuniform mat4 u_color_adj_mat;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float emissive_strength\nlowp float alpha=opacity*v_fade_opacity;vec4 out_color;\n#ifdef ICON_TRANSITION\nvec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);\n#else\nout_color=texture(u_texture,v_tex_a);\n#endif\n#ifdef COLOR_ADJUSTMENT\nout_color=u_color_adj_mat*out_color;\n#endif\nout_color*=alpha;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef OCCLUSION_QUERIES\nin float a_occlusion_query_opacity;\n#endif\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\n#ifdef ICON_TRANSITION\nin vec2 a_texb;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout vec2 v_tex_a;\n#ifdef ICON_TRANSITION\nout vec2 v_tex_b;\n#endif\nout float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float emissive_strength\n#pragma mapbox: define lowp float occlusion_opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float emissive_strength\n#pragma mapbox: initialize lowp float occlusion_opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;vec2 a;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;\n#endif\nvec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=globe_occlusion_fade;\n#ifdef SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH\nocclusion_fade*=occlusionFade(projected_point);\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nv_tex_a=a_tex/u_texsize;\n#ifdef ICON_TRANSITION\nv_tex_b=a_texb/u_texsize;\n#endif\nv_fade_opacity=out_fade_opacity;\n#ifdef OCCLUSION_QUERIES\nfloat occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);v_fade_opacity*=occludedFadeMultiplier;\n#endif\n}'),symbolSDF:Ms('#include "_prelude_lighting.glsl"\n#define SDF_PX 8.0\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\n#ifdef OCCLUSION_QUERIES\nin float a_occlusion_query_opacity;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout float v_draw_halo;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\n#pragma mapbox: define lowp float occlusion_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\n#pragma mapbox: initialize lowp float occlusion_opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;\n#endif\nvec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=globe_occlusion_fade;\n#ifdef SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH\nocclusion_fade*=occlusionFade(projected_point);\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;\n#ifdef OCCLUSION_QUERIES\nfloat occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;\n#endif\nfloat alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nfloat gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}'),symbolTextAndIcon:Ms('#include "_prelude_lighting.glsl"\n#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef OCCLUSION_QUERIES\nin float a_occlusion_query_opacity;\n#endif\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout float v_draw_halo;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\n#pragma mapbox: define lowp float occlusion_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\n#pragma mapbox: initialize lowp float occlusion_opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=globe_occlusion_fade;\n#ifdef SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH\nocclusion_fade*=occlusionFade(projected_point);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nfloat out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;\n#ifdef OCCLUSION_QUERIES\nfloat occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;\n#endif\nfloat alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+ xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nfloat gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}'),terrainRaster:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image0;in vec2 v_pos0;\n#ifdef FOG\nin float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nin vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;\n#endif\nuniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;\n#ifdef LIGHTING_3D_MODE\nconst vec3 normal=vec3(0.0,0.0,1.0);\n#ifdef RENDER_SHADOWS\nfloat cutoffOpacity=1.0;\n#ifdef RENDER_CUTOFF\ncutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);\n#endif\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\nvec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;\n#else\nfloat lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));\n#endif\n#else\nfloat lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\ncolor.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;\n#endif\n#endif\n#else\ncolor=image_color;\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;\n#ifdef FOG\nout float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;\n#endif\nvoid main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);\n#endif\n}'),terrainDepth:Ms("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",'#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}'),skybox:Ms('#include "_prelude_fog.fragment.glsl"\nin lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}',wa),skyboxGradient:Ms('#include "_prelude_fog.fragment.glsl"\nin highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}',wa),skyboxCapture:Ms("\nin highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}","in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);\n#ifdef LIGHTING_3D_MODE\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\nraster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);\n#else\nraster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#endif\n#else\ncolor=vec4(raster.rgb*antialias,raster.a*antialias);\n#endif\n#else\ncolor=texture(u_image0,v_pos0);\n#ifdef LIGHTING_3D_MODE\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\ncolor=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;\n#else\ncolor=apply_lighting_ground(color);\n#endif\n#endif\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ncolor*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nin vec3 a_globe_pos;in vec2 a_uv;\n#else\nin vec2 a_pos;\n#endif\nout vec2 v_pos0;void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);globe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}'),globeAtmosphere:Ms('#include "_prelude_fog.fragment.glsl"\nuniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {\n#ifdef ALPHA_PASS\nglFragColor=vec4(0,0,0,0);return;\n#else\n#ifdef NATIVE\nglFragColor=vec4(1,1,1,1);\n#else\nglFragColor=vec4(0,0,0,1);\n#endif\nreturn;\n#endif\n}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;\n#ifdef ALPHA_PASS\nfloat a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);\n#else\nvec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;\n#ifndef NATIVE\nc=dither(c,gl_FragCoord.xy+u_temporal_offset);\n#endif\nglFragColor=vec4(c*t,t);\n#endif\n}',"in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}"),model:Ms('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;\n#ifdef RENDER_SHADOWS\nin vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;\n#endif\n#ifdef OCCLUSION_TEXTURE_TRANSFORM\nuniform vec4 u_occlusionTextureTransform;\n#endif\n#pragma mapbox: define-attribute highp vec3 normal_3f\n#pragma mapbox: define-attribute highp vec3 color_3f\n#pragma mapbox: define-attribute highp vec4 color_4f\n#pragma mapbox: define-attribute highp vec2 uv_2f\n#pragma mapbox: initialize-attribute highp vec3 normal_3f\n#pragma mapbox: initialize-attribute highp vec3 color_3f\n#pragma mapbox: initialize-attribute highp vec4 color_4f\n#pragma mapbox: initialize-attribute highp vec2 uv_2f\n#ifdef HAS_ATTRIBUTE_a_pbr\nin lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;\n#endif\n#ifdef HAS_TEXTURE_u_baseColorTexture\nuniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;\n#endif\n#ifdef HAS_TEXTURE_u_metallicRoughnessTexture\nuniform sampler2D u_metallicRoughnessTexture;\n#endif\n#ifdef HAS_TEXTURE_u_occlusionTexture\nuniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;\n#endif\n#ifdef HAS_TEXTURE_u_normalTexture\nuniform sampler2D u_normalTexture;\n#endif\n#ifdef HAS_TEXTURE_u_emissionTexture\nuniform sampler2D u_emissionTexture;\n#endif\n#ifdef APPLY_LUT_ON_GPU\nuniform highp sampler3D u_lutTexture;\n#endif\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nin highp float v_depth;uniform highp sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;uniform vec2 u_depth_range_unpack;\n#ifdef TERRAIN_DEPTH_D24\nfloat unpack_depth(float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}\n#else\nhighp float unpack_depth_rgba(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}\n#endif\nbool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;\n#ifdef TERRAIN_DEPTH_D24\nhighp float depth=unpack_depth(texture(u_depthTexture,coord).r);\n#else\nhighp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));\n#endif\nreturn v_depth > depth+0.0005;}\n#endif\n#define saturate(_x) clamp(_x,0.,1.)\nvec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)\n{\n#ifdef LIGHTING_3D_MODE\nvec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;\n#ifdef RENDER_SHADOWS\nlighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nlighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));\n#endif\nreturn apply_lighting(albedo,transformed_normal,lighting_factor);\n#else\nvec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;\n#endif\n}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;\n#ifdef HAS_ATTRIBUTE_a_color_3f\nalbedo*=vec4(color_3f,1.0);\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\n#else\n#ifdef HAS_ATTRIBUTE_a_color_4f\nalbedo*=color_4f;\n#endif\n#endif\n#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)\nvec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}\n#ifdef UNPREMULT_TEXTURE_IN_SHADER\nif(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;\n#endif\nif(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}\n#endif\nvec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);\n#ifdef APPLY_LUT_ON_GPU\ncolor=applyLUT(u_lutTexture,color);\n#endif\nreturn color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {\n#ifdef HAS_TEXTURE_u_normalTexture\nhighp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;\n#else\nreturn mat3(1.0);\n#endif\n}highp vec3 getNormal(){highp vec3 n;\n#ifdef HAS_ATTRIBUTE_a_normal_3f\nn=normalize(normal_3f);\n#else\nhighp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;\n#endif\n#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\nvec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);\n#endif\nreturn n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;\n#ifdef HAS_ATTRIBUTE_a_pbr\nmat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;\n#endif\n#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) \nvec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;\n#endif\nconst float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)\n{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)\n{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)\n{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)\n{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)\n{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)\n{\n#ifdef LIGHTING_3D_MODE\nreturn mat.diffuseColor;\n#else\nreturn mat.diffuseColor/PI;\n#endif\n}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)\n{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)\n{vec3 env_light=vec3(0.65,0.65,0.65);\n#ifdef LIGHTING_3D_MODE\nfloat ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;\n#endif\nvec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)\n{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;\n#ifdef RENDER_SHADOWS\nlighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nlighting_factor=NdotL;\n#endif\nvec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;\n#if !defined(LIGHTING_3D_MODE)\nconst vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);\n#endif\ncolor*=intensityFactor;return color;}void main() {\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nif (isOccluded()) {discard;}\n#endif\nvec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;\n#ifdef LIGHTING_3D_MODE\nlightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;\n#endif\nvec4 finalColor;\n#ifdef DIFFUSE_SHADED\nvec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);\n#ifdef HAS_TEXTURE_u_occlusionTexture\nfloat ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;\n#endif\nfinalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;\n#else\nMaterial mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;\n#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\n#ifdef OCCLUSION_TEXTURE_TRANSFORM\nvec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;\n#else\nvec2 uv=uv_2f;\n#endif\nao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;\n#endif\nvec4 emissive=u_emissiveFactor;\n#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\nemissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);\n#endif\n#ifdef APPLY_LUT_ON_GPU\nfloat emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;\n#endif\ncolor+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;\n#ifdef HAS_ATTRIBUTE_a_pbr\nfloat resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;\n#ifdef APPLY_LUT_ON_GPU\ncolor_mix=applyLUT(u_lutTexture,color_mix);\n#endif\ncolor=mix(color,color_mix,min(1.0,resEmission));\n#ifdef HAS_ATTRIBUTE_a_color_4f\nfloat distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);\n#endif\n#endif\nvec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);\n#endif\n#ifdef FOG\nfinalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));\n#endif\n#ifdef RENDER_CUTOFF\nfinalColor*=v_cutoff_opacity;\n#endif\n#ifdef INDICATOR_CUTOUT\nfinalColor=applyCutout(finalColor);\n#endif\nglFragColor=finalColor;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec3 a_pos_3f;\n#pragma mapbox: define-attribute highp vec3 normal_3f\n#pragma mapbox: define-attribute highp vec2 uv_2f\n#pragma mapbox: define-attribute highp vec3 color_3f\n#pragma mapbox: define-attribute highp vec4 color_4f\n#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr\n#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength\nuniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;\n#ifdef INSTANCED_ARRAYS\nin vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;\n#else\nuniform highp mat4 u_normal_matrix;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;\n#endif\nout vec4 v_position_height;out lowp vec4 v_color_mix;\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nout highp float v_depth;\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\nout lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;\n#endif\nvec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {\n#pragma mapbox: initialize-attribute highp vec3 normal_3f\n#pragma mapbox: initialize-attribute highp vec2 uv_2f\n#pragma mapbox: initialize-attribute highp vec3 color_3f\n#pragma mapbox: initialize-attribute highp vec4 color_4f\n#pragma mapbox: initialize-attribute-custom highp vec4 pbr\n#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength\nhighp mat4 normal_matrix;\n#ifdef INSTANCED_ARRAYS\nnormal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);\n#else\nnormal_matrix=u_normal_matrix;\n#endif\nvec3 local_pos;mat3 rs;\n#ifdef MODEL_POSITION_ON_GPU\nvec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;\n#else\nlocal_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);\n#endif\nv_position_height.w=a_pos_3f.z;\n#ifdef HAS_ATTRIBUTE_a_pbr\nvec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(local_pos);\n#endif\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef HAS_ATTRIBUTE_a_normal_3f\n#ifdef MODEL_POSITION_ON_GPU\nfloat x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);\n#else\nnormal_3f=vec3(normal_matrix*vec4(normal_3f,0));\n#endif\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\n#ifdef HAS_ATTRIBUTE_a_color_4f\nv_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);\n#ifdef NORMAL_OFFSET\n#ifdef HAS_ATTRIBUTE_a_normal_3f\n#ifdef MODEL_POSITION_ON_GPU\nvec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();\n#else\nvec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();\n#endif\n#endif\n#endif\nv_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;\n#endif\n}'),modelDepth:Ms("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}","in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;\n#ifdef MODEL_POSITION_ON_GPU\n#ifdef INSTANCED_ARRAYS\nin vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;\n#else\nuniform highp mat4 u_instance;\n#endif\nuniform highp mat4 u_node_matrix;\n#endif\nvoid main() {\n#ifdef MODEL_POSITION_ON_GPU\nhighp mat4 instance;\n#ifdef INSTANCED_ARRAYS\ninstance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);\n#else\ninstance=u_instance;\n#endif\nvec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(a_pos_3f,1);\n#endif\nv_depth=gl_Position.z/gl_Position.w;}"),stars:Ms("in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)\n{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}","\nin vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}"),occlusion:Ms("uniform vec4 u_color;void main() {glFragColor=u_color;}",'#include "_prelude_terrain.vertex.glsl"\nin highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;\n#ifdef TERRAIN\nfloat e=elevation(world_pos.xy);world_pos.z+=e;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}')};function Ol(v,r){const d=v.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let b of d)if(b=b.trim(),"#"===b[0]&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const M=b.split(" ");for(const R of M)r.includes(R)||r.push(R)}}function Ms(v,r){const d=/#include\s+"([^"]+)"/g,b=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let M=r.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);M&&(M=M.map(se=>{const he=se.split(" ");return he[he.length-1]}),M=[...new Set(M)]);const R={},N=[],H=[];if(v=v.replace(d,(se,he)=>(H.push(he),"")),(r=r.replace(d,(se,he)=>(N.push(he),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let ee=[...Eu];Ol(v,ee),Ol(r,ee);for(const se of[...N,...H])Ja[se]||console.error(`Undefined include: ${se}`),Ra[se]||(Ra[se]=[],Ol(Ja[se],Ra[se])),ee=[...ee,...Ra[se]];return{fragmentSource:v=v.replace(b,(se,he,ye,Pe,Fe)=>(R[Fe]=!0,"define"===he?`\n#ifndef HAS_UNIFORM_u_${Fe}\nin ${ye} ${Pe} ${Fe};\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:"initialize"===he?`\n#ifdef HAS_UNIFORM_u_${Fe}\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`:"define-attribute"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\n    in ${ye} ${Pe} ${Fe};\n#endif\n`:"initialize-attribute"===he?"":void 0)),vertexSource:r=r.replace(b,(se,he,ye,Pe,Fe)=>{const Qe="float"===Pe?"vec2":Pe,Je=Fe.match(/color/)?"color":Qe;return"define-attribute-vertex-shader-only"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\nin ${ye} ${Pe} a_${Fe};\n#endif\n`:R[Fe]?"define"===he?`\n#ifndef HAS_UNIFORM_u_${Fe}\nuniform lowp float u_${Fe}_t;\nin ${ye} ${Qe} a_${Fe};\nout ${ye} ${Pe} ${Fe};\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:"initialize"===he?"vec4"===Je?`\n#ifndef HAS_UNIFORM_u_${Fe}\n    ${Fe} = a_${Fe};\n#else\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Fe}\n    ${Fe} = unpack_mix_${Je}(a_${Fe}, u_${Fe}_t);\n#else\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`:"define-attribute"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\n    in ${ye} ${Pe} a_${Fe};\n    out ${ye} ${Pe} ${Fe};\n#endif\n`:"initialize-attribute"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\n    ${Fe} = a_${Fe};\n#endif\n`:void 0:"define"===he?`\n#ifndef HAS_UNIFORM_u_${Fe}\nuniform lowp float u_${Fe}_t;\nin ${ye} ${Qe} a_${Fe};\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:"define-instanced"===he?"mat4"===Je?`\n#ifdef INSTANCED_ARRAYS\nin vec4 a_${Fe}0;\nin vec4 a_${Fe}1;\nin vec4 a_${Fe}2;\nin vec4 a_${Fe}3;\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:`\n#ifdef INSTANCED_ARRAYS\nin ${ye} ${Qe} a_${Fe};\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:"initialize-attribute-custom"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\n    ${ye} ${Pe} ${Fe} = a_${Fe};\n#endif\n`:"vec4"===Je?`\n#ifndef HAS_UNIFORM_u_${Fe}\n    ${ye} ${Pe} ${Fe} = a_${Fe};\n#else\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Fe}\n    ${ye} ${Pe} ${Fe} = unpack_mix_${Je}(a_${Fe}, u_${Fe}_t);\n#else\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`}),staticAttributes:M,usedDefines:ee,vertexIncludes:N,fragmentIncludes:H}}class lu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(r,d,b,M,R,N,H,ee){this.context=r;let se=this.boundPaintVertexBuffers.length!==M.length;for(let ye=0;!se&&ye<M.length;ye++)this.boundPaintVertexBuffers[ye]!==M[ye]&&(se=!0);let he=this.boundDynamicVertexBuffers.length!==H.length;for(let ye=0;!he&&ye<H.length;ye++)this.boundDynamicVertexBuffers[ye]!==H[ye]&&(he=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==b||se||he||this.boundIndexBuffer!==R||this.boundVertexOffset!==N)this.freshBind(d,b,M,R,N,H,ee);else{r.bindVertexArrayOES.set(this.vao);for(const ye of H)ye&&(ye.bind(),ee&&ye.instanceCount&&ye.setVertexAttribDivisor(r.gl,d,ee));R&&R.dynamicDraw&&R.bind()}}freshBind(r,d,b,M,R,N,H){const ee=r.numAttributes,se=this.context,he=se.gl;this.vao&&this.destroy(),this.vao=se.gl.createVertexArray(),se.bindVertexArrayOES.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=M,this.boundVertexOffset=R,this.boundDynamicVertexBuffers=N,d.enableAttributes(he,r),d.bind(),d.setVertexAttribPointers(he,r,R);for(const ye of b)ye.enableAttributes(he,r),ye.bind(),ye.setVertexAttribPointers(he,r,R);for(const ye of N)ye&&(ye.enableAttributes(he,r),ye.bind(),ye.setVertexAttribPointers(he,r,R),H&&ye.instanceCount&&ye.setVertexAttribDivisor(he,r,H));M&&M.bind(),se.currentNumAttributes=ee}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Dc(v,r){const d=Math.pow(2,r.canonical.z),b=r.canonical.y;return[new l.Y(0,b/d).toLngLat().lat,new l.Y(0,(b+1)/d).toLngLat().lat]}function cu(v,r,d,b,M,R,N){const H=v.context,ee=H.gl,se=d.hillshadeFBO;if(!se)return;v.prepareDrawTile();const he=v.isTileAffectedByFog(r),ye=v.getOrCreateProgram("hillshade",{overrideFog:he});H.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,se.colorAttachment.get());const Pe=((tt,rt,Pt,Bt)=>{const Ft=Pt.paint.get("hillshade-shadow-color"),tn=Pt.paint.get("hillshade-highlight-color"),en=Pt.paint.get("hillshade-accent-color"),_n=Pt.paint.get("hillshade-emissive-strength");let at=l.ab(Pt.paint.get("hillshade-illumination-direction"));if("viewport"===Pt.paint.get("hillshade-illumination-anchor"))at-=tt.transform.angle;else if(tt.style&&tt.style.enable3dLights()&&tt.style.directionalLight){const Tn=tt.style.directionalLight.properties.get("direction"),ci=l.ac(Tn.x,Tn.y,Tn.z);at=l.ab(ci[1])}const $t=!tt.options.moving;return{u_matrix:Bt||tt.transform.calculateProjMatrix(rt.tileID.toUnwrapped(),$t),u_image:0,u_latrange:Dc(0,rt.tileID),u_light:[Pt.paint.get("hillshade-exaggeration"),at],u_shadow:Ft.toRenderColor(Pt.lut),u_highlight:tn.toRenderColor(Pt.lut),u_emissive_strength:_n,u_accent:en.toRenderColor(Pt.lut)}})(v,d,b,v.terrain?r.projMatrix:null);v.uploadCommonUniforms(H,ye,r.toUnwrapped());const{tileBoundsBuffer:Fe,tileBoundsIndexBuffer:Qe,tileBoundsSegments:Je}=v.getTileBoundsBuffers(d);ye.draw(v,ee.TRIANGLES,M,R,N,l.af.disabled,Pe,b.id,Fe,Qe,Je)}function lc(v,r,d){if(!r.needsDEMTextureUpload)return;const b=v.context,M=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(d.stride);const R=d.getPixels();r.demTexture?r.demTexture.update(R,{premultiply:!1}):r.demTexture=new l.T(b,R,M.R32F,{premultiply:!1}),r.needsDEMTextureUpload=!1}function Ia(v,r,d){const b=v.context,M=b.gl;if(!r.dem)return;const R=r.dem;if(b.activeTexture.set(M.TEXTURE1),lc(v,r,R),!r.demTexture)return;r.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);const N=R.dim;b.activeTexture.set(M.TEXTURE0);let H=r.hillshadeFBO;if(!H){const Pe=new l.T(b,{width:N,height:N,data:null},M.RGBA);Pe.bind(M.LINEAR,M.CLAMP_TO_EDGE),H=r.hillshadeFBO=b.createFramebuffer(N,N,!0,"renderbuffer"),H.colorAttachment.set(Pe.texture)}b.bindFramebuffer.set(H.framebuffer),b.viewport.set([0,0,N,N]);const{tileBoundsBuffer:ee,tileBoundsIndexBuffer:se,tileBoundsSegments:he}=v.getMercatorTileBoundsBuffers(),ye=[];v.linearFloatFilteringSupported()&&ye.push("TERRAIN_DEM_FLOAT_FORMAT"),v.getOrCreateProgram("hillshadePrepare",{defines:ye}).draw(v,M.TRIANGLES,l.ae.disabled,l.ag.disabled,l.a.unblended,l.af.disabled,((Pe,Fe)=>{const Qe=Fe.stride,Je=l.ad.create();return l.ad.ortho(Je,0,l.a3,-l.a3,0,0,1),l.ad.translate(Je,Je,[0,-l.a3,0]),{u_matrix:Je,u_image:1,u_dimension:[Qe,Qe],u_zoom:Pe.overscaledZ}})(r.tileID,R),d.id,ee,se,he),r.needsHillshadePrepare=!1}function gc(v,r,d,b,M){const R=function(N,H){if(N)return M(N);if(H){if(v.url&&H.tiles&&v.tiles&&delete v.tiles,H.variants){if(!Array.isArray(H.variants))return M(new Error("variants must be an array"));for(const se of H.variants){if(null==se||"object"!=typeof se||se.constructor!==Object)return M(new Error("variant must be an object"));if(!Array.isArray(se.capabilities))return M(new Error("capabilities must be an array"));if(1===se.capabilities.length&&"meshopt"===se.capabilities[0]){H=l.W(H,se);break}}}const ee=l.ah(l.W(H,v),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);H.vector_layers&&(ee.vectorLayers=H.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(se=>se.id)),H.raster_layers&&(ee.rasterLayers=H.raster_layers,ee.rasterLayerIds=ee.rasterLayers.map(se=>se.id)),ee.tiles=r.canonicalizeTileset(ee,v.url),M(null,ee)}};return v.url?l.g(r.transformRequest(r.normalizeSourceURL(v.url,null,d,b),l.R.Source),R):l.e.frame(()=>R(null,v))}class Gl{constructor(r,d,b){this.bounds=l.ai.convert(this.validateBounds(r)),this.minzoom=d||0,this.maxzoom=b||24}validateBounds(r){return Array.isArray(r)&&4===r.length?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const d=Math.pow(2,r.z),b=Math.floor(l.aj(this.bounds.getWest())*d),M=Math.floor(l.ak(this.bounds.getNorth())*d),R=Math.ceil(l.aj(this.bounds.getEast())*d),N=Math.ceil(l.ak(this.bounds.getSouth())*d);return r.x>=b&&r.x<R&&r.y>=M&&r.y<N}}class uu extends l.E{constructor(r,d,b,M){super(),this.id=r,this.dispatcher=b,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.W({type:"raster"},d),l.W(this,l.ah(d,["url","scheme","tileSize"]))}load(r){this._loaded=!1,this.fire(new l.f("dataloading",{dataType:"source"})),this._tileJSONRequest=gc(this._options,this.map._requestManager,null,null,(d,b)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new l.d(d)):b&&(l.W(this,b),b.bounds&&(this.tileBounds=new Gl(b.bounds,this.minzoom,this.maxzoom)),l.an(b.tiles),this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))),r&&r(d)})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}reload(){this.cancelTileJSONRequest();const r=l.al(this.id,this.scope);this.load(()=>this.map.style.clearSource(r))}setTiles(r){return this._options.tiles=r,this.reload(),this}setUrl(r){return this.url=r,this._options.url=r,this.reload(),this}onRemove(r){this.cancelTileJSONRequest()}serialize(){return l.W({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,d){const b=l.e.devicePixelRatio>=2,M=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);r.request=l.h(this.map._requestManager.transformRequest(M,l.R.Tile),(R,N,H,ee)=>(delete r.request,r.aborted?(r.state="unloaded",d(null)):R?(r.state="errored",d(R)):N?(this.map._refreshExpiredTiles&&r.setExpiryData({cacheControl:H,expires:ee}),r.setTexture(N,this.map.painter),r.state="loaded",l.am(this.dispatcher),void d(null)):d(null)))}abortTile(r,d){r.request&&(r.request.cancel(),delete r.request),d&&d()}unloadTile(r,d){r.texture&&r.texture instanceof l.T?(r.destroy(!0),r.texture&&r.texture instanceof l.T&&this.map.painter.saveTileTexture(r.texture)):r.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class vc extends l.E{constructor(r,d,b,M){if(super(),this.id=r,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.W(this,l.ah(d,["url","scheme","tileSize","promoteId"])),this._options=l.W({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M),this._tileWorkers={},this._deduped=new l.ao}load(r){this._loaded=!1,this.fire(new l.f("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,b=this.map._worldview;this._tileJSONRequest=gc(this._options,this.map._requestManager,d,b,(M,R)=>{this._tileJSONRequest=null,this._loaded=!0,M?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),b&&2!==b.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${b}`),this.fire(new l.d(M))):R&&(l.W(this,R),R.bounds&&(this.tileBounds=new Gl(R.bounds,this.minzoom,this.maxzoom)),l.an(R.tiles,this.map._requestManager._customAccessToken),this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))),r&&r(M)})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}reload(){this.cancelTileJSONRequest();const r=l.al(this.id,this.scope);this.load(()=>this.map.style.clearSource(r))}setTiles(r){return this._options.tiles=r,this.reload(),this}setUrl(r){return this.url=r,this._options.url=r,this.reload(),this}onRemove(r){this.cancelTileJSONRequest()}serialize(){return l.W({},this._options)}loadTile(r,d){const b=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme)),M=this.map._requestManager.transformRequest(b,l.R.Tile),R=this.map.style?this.map.style.getLut(this.scope):null,N={request:M,data:void 0,uid:r.uid,tileID:r.tileID,tileZoom:r.tileZoom,zoom:r.tileID.overscaledZ,lut:R?{image:R.image.clone()}:null,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:l.e.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:r.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:r.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(N.request.collectResourceTiming=this._collectResourceTiming,r.actor&&"expired"!==r.state)"loading"===r.state?r.reloadCallback=d:r.request=r.actor.send("reloadTile",N,H.bind(this));else if(r.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)r.request=r.actor.send("loadTile",N,H.bind(this),void 0,!0);else{const ee=l.ap.call({deduped:this._deduped},N,(se,he)=>{se||!he?H.call(this,se):(N.data={cacheControl:he.cacheControl,expires:he.expires,rawData:he.rawData.slice(0)},r.actor&&r.actor.send("loadTile",N,H.bind(this),void 0,!0))},!0);r.request={cancel:ee}}function H(ee,se){return delete r.request,r.aborted?d(null):ee&&404!==ee.status?d(ee):(se&&se.resourceTiming&&(r.resourceTiming=se.resourceTiming),this.map._refreshExpiredTiles&&se&&r.setExpiryData(se),r.loadVectorData(se,this.map.painter),l.am(this.dispatcher),d(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(r,d){r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id,scope:this.scope}),r.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}const du=(v,r,d)=>({u_matrix:v,u_image0:0,u_skirt_height:r,u_ground_shadow_factor:d}),Io=(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:r,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:d,u_zoom_transition:M,u_merc_center:R,u_image0:0,u_frustum_tl:N,u_frustum_tr:H,u_frustum_br:ee,u_frustum_bl:se,u_globe_pos:he,u_globe_radius:ye,u_viewport:Pe,u_grid_matrix:Je?Float32Array.from(Je):new Float32Array(9),u_skirt_height:Fe,u_far_z_cutoff:Qe});class Sc{constructor(r=0,d=0,b=0,M=0){if(isNaN(r)||r<0||isNaN(d)||d<0||isNaN(b)||b<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=d,this.left=b,this.right=M}interpolate(r,d,b){return null!=d.top&&null!=r.top&&(this.top=l.a2(r.top,d.top,b)),null!=d.bottom&&null!=r.bottom&&(this.bottom=l.a2(r.bottom,d.bottom,b)),null!=d.left&&null!=r.left&&(this.left=l.a2(r.left,d.left,b)),null!=d.right&&null!=r.right&&(this.right=l.a2(r.right,d.right,b)),this}getCenter(r,d){const b=l.at((this.left+r-this.right)/2,0,r),M=l.at((this.top+d-this.bottom)/2,0,d);return new l.P(b,M)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Sc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function vl(v,r){const d=l.aw(v,3);l.ad.fromQuat(v,r),l.az(v,3,d)}function rs(v,r){const d=l.av.identity([]);return l.av.rotateZ(d,d,-r),l.av.rotateX(d,d,-v),d}function Na(v,r){const d=[v[0],v[1],0],b=[r[0],r[1],0];if(l._.length(d)>=1e-15){const N=l._.normalize([],d);l._.scale(b,N,l._.dot(b,N)),r[0]=b[0],r[1]=b[1]}const M=l._.cross([],r,v);if(l._.len(M)<1e-15)return null;const R=Math.atan2(-M[1],M[0]);return rs(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),R)}class nt{constructor(r,d){this.position=r,this.orientation=d}get position(){return this._position}set position(r){if(r){const d=r instanceof l.Y?r:new l.Y(r[0],r[1],r[2]);this._renderWorldCopies&&(d.x=l.au(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(r,d){if(this.orientation=null,!this.position)return;const b=this.position,M=this._elevation?this._elevation.getAtPointOrZero(l.Y.fromLngLat(r)):0,R=l.Y.fromLngLat(r,M),N=[R.x-b.x,R.y-b.y,R.z-b.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Na(N,d)}setPitchBearing(r,d){this.orientation=rs(l.ab(r),l.ab(-d))}}class Dt{constructor(r,d){this._transform=l.ad.identity([]),this.orientation=d,this.position=r}get mercatorPosition(){const r=this.position;return new l.Y(r[0],r[1],r[2])}get position(){const r=l.aw(this._transform,3);return[r[0],r[1],r[2]]}set position(r){var d;r&&l.az(this._transform,3,[(d=r)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(r){this._orientation=r||l.av.identity([]),r&&vl(this._transform,this._orientation)}getPitchBearing(){const r=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(r[0]*r[0]+r[1]*r[1]),-r[2])}}setPitchBearing(r,d){this._orientation=rs(r,d),vl(this._transform,this._orientation)}forward(){const r=l.aw(this._transform,2);return[-r[0],-r[1],-r[2]]}up(){const r=l.aw(this._transform,1);return[-r[0],-r[1],-r[2]]}right(){const r=l.aw(this._transform,0);return[r[0],r[1],r[2]]}getCameraToWorld(r,d){const b=new Float64Array(16);return l.ad.invert(b,this.getWorldToCamera(r,d)),b}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(r,d,b){const M=this.position;l._.scale(M,M,-r);const R=new Float64Array(16);return l.ad.fromScaling(R,[b,b,b]),l.ad.translate(R,R,M),R[10]*=d,R}getWorldToCamera(r,d){const b=new Float64Array(16),M=new Float64Array(4),R=this.position;return l.av.conjugate(M,this._orientation),l._.scale(R,R,-r),l.ad.fromQuat(b,M),l.ad.translate(b,b,R),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=d,b[9]*=d,b[10]*=d,b[11]*=d,b}getCameraToClipPerspective(r,d,b,M){const R=new Float64Array(16);return l.ad.perspective(R,r,d,b,M),R}getCameraToClipOrthographic(r,d,b,M,R,N){const H=new Float64Array(16);return l.ad.ortho(H,r,d,b,M,R,N),H}getDistanceToElevation(r,d=!1){const b=0===r?0:l.ax(r,d?l.ay(this.position[1]):this.position[1]),M=this.forward();return(b-this.position[2])/M[2]}clone(){return new Dt([...this.position],[...this.orientation])}}const Hn={unknown:0,flipRequired:1,flipNotRequired:2},Yn=Math.tan(85*Math.PI/180);function On(v,r,d,b,M,R,N){const H=l.ad.create();if(d)if("globe"===R.name){const ee=l.aB(M,r);l.ad.multiply(H,H,ee)}else{const ee=l.aC.invert([],N);H[0]=ee[0],H[1]=ee[1],H[4]=ee[2],H[5]=ee[3],b||l.ad.rotateZ(H,H,M.angle)}else l.ad.multiply(H,M.labelPlaneMatrix,v);return H}function li(v,r,d,b,M,R,N){const H=On(v,r,d,b,M,R,N);return"globe"===R.name&&d||(H[2]=H[6]=H[10]=H[14]=0),H}function bo(v,r,d,b,M,R,N){if(d){if("globe"===R.name){const H=On(v,r,d,b,M,R,N);return l.ad.invert(H,H),l.ad.multiply(H,v,H),H}{const H=l.ad.clone(v),ee=l.ad.identity([]);return ee[0]=N[0],ee[1]=N[1],ee[4]=N[2],ee[5]=N[3],l.ad.multiply(H,H,ee),b||l.ad.rotateZ(H,H,-M.angle),H}}return M.glCoordMatrix}function Eo(v,r,d,b){const M=[v,r,d,1];d?l.aA.transformMat4(M,M,b):Yr(M,M,b);const R=M[3];return M[0]/=R,M[1]/=R,M[2]/=R,M}function so(v,r){return Math.min(.5+v/r*.5,1.5)}function mi(v,r){const d=v[0]/v[3],b=v[1]/v[3];return d>=-r[0]&&d<=r[0]&&b>=-r[1]&&b<=r[1]}function qo(v,r,d,b,M,R,N,H,ee,se){const he=d.transform,ye=b?v.textSizeData:v.iconSizeData,Pe=l.aD(ye,d.transform.zoom),Fe="globe"===he.projection.name,Qe=[256/d.width*2+1,256/d.height*2+1],Je=b?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Je.clear();let tt=null;Fe&&(tt=b?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const rt=v.lineVertexArray,Pt=b?v.text.placedSymbolArray:v.icon.placedSymbolArray,Bt=d.transform.width/d.transform.height;let Ft,tn=!1;for(let en=0;en<Pt.length;en++){const _n=Pt.get(en),{numGlyphs:at,writingMode:$t}=_n;if($t!==l.aE.vertical||tn||Ft===l.aE.horizontal||(tn=!0),Ft=$t,(_n.hidden||$t===l.aE.vertical)&&!tn){Nr(at,Je);continue}tn=!1;const Tn=new l.P(_n.tileAnchorX,_n.tileAnchorY);let{x:ci,y:zn,z:mn}=he.projection.projectTilePoint(Tn.x,Tn.y,se.canonical);if(ee){const[cn,hn,Qn]=ee(Tn);ci+=cn,zn+=hn,mn+=Qn}const _i=[ci,zn,mn,1];if(l.aA.transformMat4(_i,_i,r),!mi(_i,Qe)){Nr(at,Je);continue}const eo=_i[3],io=so(d.transform.getCameraToCenterDistance(he.projection),eo),ie=l.aF(ye,Pe,_n),L=N?ie/io:ie*io,j=Eo(ci,zn,mn,M);if(j[3]<=0){Nr(at,Je);continue}let oe={};const Ve=N?null:ee,lt=os(_n,L,!1,H,r,M,R,v.glyphOffsetArray,rt,Je,tt,j,Tn,oe,Bt,Ve,he.projection,se,N);tn=lt.useVertical,Ve&&lt.needsFlipping&&(oe={}),(lt.notEnoughRoom||tn||lt.needsFlipping&&os(_n,L,!0,H,r,M,R,v.glyphOffsetArray,rt,Je,tt,j,Tn,oe,Bt,Ve,he.projection,se,N).notEnoughRoom)&&Nr(at,Je)}b?(v.text.dynamicLayoutVertexBuffer.updateData(Je),tt&&v.text.globeExtVertexBuffer&&v.text.globeExtVertexBuffer.updateData(tt)):(v.icon.dynamicLayoutVertexBuffer.updateData(Je),tt&&v.icon.globeExtVertexBuffer&&v.icon.globeExtVertexBuffer.updateData(tt))}function hr(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je){const{lineStartIndex:tt,glyphStartIndex:rt,segment:Pt}=H,Bt=rt+H.numGlyphs,Ft=tt+H.lineLength,tn=r.getoffsetX(rt),en=r.getoffsetX(Bt-1),_n=Ps(v*tn,d,b,M,R,N,Pt,tt,Ft,ee,se,he,ye,Pe,!0,Fe,Qe,Je);if(!_n)return null;const at=Ps(v*en,d,b,M,R,N,Pt,tt,Ft,ee,se,he,ye,Pe,!0,Fe,Qe,Je);return at?{first:_n,last:at}:null}function Ir(v,r,d,b){return v===l.aE.horizontal&&Math.abs(b)>Math.abs(d)?{useVertical:!0}:v===l.aE.vertical?b>0?{needsFlipping:!0}:null:r!==Hn.unknown&&(0===(M=d)||Math.abs(b/M)>Yn)?r===Hn.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null;var M}function os(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je,tt,rt,Pt){const Bt=r/24,Ft=v.lineOffsetX*Bt,tn=v.lineOffsetY*Bt,{lineStartIndex:en,glyphStartIndex:_n,numGlyphs:at,segment:$t,writingMode:Tn,flipState:ci}=v,zn=en+v.lineLength,mn=_i=>{if(he){const[L,j,oe]=_i.up,Ve=se.length;l.aG(he,Ve+0,L,j,oe),l.aG(he,Ve+1,L,j,oe),l.aG(he,Ve+2,L,j,oe),l.aG(he,Ve+3,L,j,oe)}const[eo,io,ie]=_i.point;l.aH(se,eo,io,ie,_i.angle)};if(at>1){const _i=hr(Bt,H,Ft,tn,d,ye,Pe,v,ee,R,Fe,Je,!1,tt,rt,Pt);if(!_i)return{notEnoughRoom:!0};if(b&&!d){let[eo,io,ie]=_i.first.point,[L,j,oe]=_i.last.point;[eo,io]=Eo(eo,io,ie,N),[L,j]=Eo(L,j,oe,N);const Ve=Ir(Tn,ci,(L-eo)*Qe,j-io);if(v.flipState=Ve&&Ve.needsFlipping?Hn.flipRequired:Hn.flipNotRequired,Ve)return Ve}mn(_i.first);for(let eo=_n+1;eo<_n+at-1;eo++){const io=Ps(Bt*H.getoffsetX(eo),Ft,tn,d,ye,Pe,$t,en,zn,ee,R,Fe,Je,!1,!1,tt,rt,Pt);if(!io)return se.length-=4*(eo-_n),{notEnoughRoom:!0};mn(io)}mn(_i.last)}else{if(b&&!d){const eo=Eo(Pe.x,Pe.y,0,M),io=en+$t+1,ie=new l.P(ee.getx(io),ee.gety(io)),L=Eo(ie.x,ie.y,0,M),j=L[3]>0?L:ea(Pe,ie,eo,1,M,void 0,tt,rt.canonical),oe=Ir(Tn,ci,(j[0]-eo[0])*Qe,j[1]-eo[1]);if(v.flipState=oe&&oe.needsFlipping?Hn.flipRequired:Hn.flipNotRequired,oe)return oe}const _i=Ps(Bt*H.getoffsetX(_n),Ft,tn,d,ye,Pe,$t,en,zn,ee,R,Fe,Je,!1,!1,tt,rt,Pt);if(!_i)return{notEnoughRoom:!0};mn(_i)}return{}}function Cs(v,r,d,b,M){const{x:R,y:N,z:H}=b.projectTilePoint(v.x,v.y,r);if(!M)return Eo(R,N,H,d);const[ee,se,he]=M(v);return Eo(R+ee,N+se,H+he,d)}function ea(v,r,d,b,M,R,N,H){const ee=Cs(v.sub(r)._unit()._add(v),H,M,N,R);return l._.sub(ee,d,ee),l._.normalize(ee,ee),l._.scaleAndAdd(ee,d,ee,b)}function Ps(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je,tt,rt){const Pt=b?v-r:v+r;let Bt=Pt>0?1:-1,Ft=0;b&&(Bt*=-1,Ft=Math.PI),Bt<0&&(Ft+=Math.PI);let tn=H+N+(Bt>0?0:1)|0,en=M,_n=M,at=0,$t=0;const Tn=Math.abs(Pt),ci=[],zn=[];let mn=R,_i=mn;const eo=()=>ea(_i,mn,_n,Tn-at+1,he,Pe,Je,tt.canonical);for(;at+$t<=Tn;){if(tn+=Bt,tn<H||tn>=ee)return null;if(_n=en,_i=mn,ci.push(_n),Fe&&zn.push(_i),mn=new l.P(se.getx(tn),se.gety(tn)),en=ye[tn],!en){const hn=Cs(mn,tt.canonical,he,Je,Pe);en=hn[3]>0?ye[tn]=hn:eo()}at+=$t,$t=l._.distance(_n,en)}Qe&&Pe&&(ye[tn]&&(en=eo(),$t=l._.distance(_n,en)),ye[tn]=en);const io=(Tn-at)/$t,ie=mn.sub(_i)._mult(io)._add(_i),L=l._.sub([],en,_n),j=l._.scaleAndAdd([],_n,L,io);let oe=[0,0,1],Ve=L[0],lt=L[1];if(rt&&(oe=Je.upVector(tt.canonical,ie.x,ie.y),0!==oe[0]||0!==oe[1]||1!==oe[2])){const hn=[oe[2],0,-oe[0]],Qn=l._.cross([],oe,hn);l._.normalize(hn,hn),l._.normalize(Qn,Qn),Ve=l._.dot(L,hn),lt=l._.dot(L,Qn)}if(d){const hn=l._.cross([],oe,L);l._.normalize(hn,hn),l._.scaleAndAdd(j,j,hn,d*Bt)}const cn=Ft+Math.atan2(lt,Ve);return ci.push(j),Fe&&zn.push(ie),{point:j,angle:cn,path:ci,tilePath:zn,up:oe}}function Nr(v,r){const d=r.length,b=d+4*v;r.resize(b),r.float32.fill(-1/0,4*d,4*b)}function Yr(v,r,d){const b=r[0],M=r[1];return v[0]=d[0]*b+d[4]*M+d[12],v[1]=d[1]*b+d[5]*M+d[13],v[3]=d[3]*b+d[7]*M+d[15],v}const ta=(v,r,d)=>(1-d)*v+d*r,cc=v=>v*v*v*v*v;class fa{constructor(r,d,b,M,R,N,H){this.tileSize=512,this._renderWorldCopies=void 0===R||R,this._minZoom=r||0,this._maxZoom=d||22,this._minPitch=null!=b?b:0,this._maxPitch=null!=M?M:60,this.setProjection(N),this.setMaxBounds(H),this.width=0,this.height=0,this._center=new l.aI(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Sc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Dt,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const r=new fa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return r._elevation=this._elevation,r._centerAltitude=this._centerAltitude,r._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,r.tileSize=this.tileSize,r.mercatorFromTransition=this.mercatorFromTransition,r.width=this.width,r.height=this.height,r.cameraElevationReference=this.cameraElevationReference,r._center=this._center,r._setZoom(this.zoom),r._seaLevelZoom=this._seaLevelZoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._nearZ=this._nearZ,r._farZ=this._farZ,r._averageElevation=this._averageElevation,r._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._camera=this._camera.clone(),r._calcMatrices(),r.freezeTileCoverage=this.freezeTileCoverage,r.frustumCorners=this.frustumCorners,r}get isOrthographic(){return"globe"!==this.projection.name&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(r){this._elevation!==r&&(this._elevation=r,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return"globe"!==this.projection.name&&!this.isOrthographic}updateElevation(r,d=!1){const b=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||b)&&this._updateCameraOnTerrain(),(r||b)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return l.ah(this.projection,["name","center","parallels"])}setProjection(r){this.projectionOptions=r||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=l.aJ(this.projectionOptions);const b=!We(d,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setOrthographicProjectionAtLowPitch(r){return this._orthographicProjectionAtLowPitch!==r&&(this._orthographicProjectionAtLowPitch=r,this._calcMatrices(),!0)}setMercatorFromTransition(){const r=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=l.aJ({name:"mercator"});const d=r!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(r){void 0===r?r=!0:null===r&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const r=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(r))}get cameraWorldSize(){const r=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(r))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return l.ax(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return l.au(this.rotation,-180,180)}set bearing(r){this.rotation=r}get rotation(){return-this.angle/Math.PI*180}set rotation(r){const d=-r*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=l.aC.create(),l.aC.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const d=l.at(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const r=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/r)}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=l.ab(r),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(r){this._averageElevation=r,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(r){const d=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(r){this._zoom=r,this.scale=this.zoomScale(r),this.tileZoom=Math.floor(r),this.zoomFraction=r-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(r){this._tileCoverLift!==r&&(this._tileCoverLift=r)}_updateCameraOnTerrain(){const r=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&r===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||r===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const b=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&b.exaggeration()&&this._centerAltitudeValidForExaggeration!==b.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*b.exaggeration(),this._centerAltitudeValidForExaggeration=b.exaggeration()):(this._centerAltitude=r||0,this._centerAltitudeValidForExaggeration=b.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const r=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let M=0,R=0;for(let N=0;N<d.length;N++){const H=new l.P(d[N][0]*this.width,b+d[N][1]*(this.height-b)),ee=r.pointCoordinate(H);if(!ee)continue;const se=1/Math.hypot(ee[0]-this._camera.position[0],ee[1]-this._camera.position[1]);M+=ee[3]*se,R+=se}return 0===R?NaN:M/R}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const r=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*d,M=this._mercatorZfromZoom(r),R=this._mercatorZfromZoom(this._maxZoom),N=Math.max(M-b,R);this._setZoom(this._zoomFromMercatorZ(N))}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}computeZoomRelativeTo(r){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,r.toAltitude()));let b;b=r.z<this._camera.position[2]?[d.x,d.y,d.z]:[r.x,r.y,r.z];const M=l._.length(l._.sub([],this._camera.position,b));return l.at(this._zoomFromMercatorZ(M),this._minZoom,this._maxZoom)}setFreeCameraOptions(r){if(!this.height||!r.position&&!r.orientation)return;this._updateCameraState();let d=!1;if(r.orientation&&!l.av.exactEquals(r.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(r.orientation)),r.position){const b=[r.position.x,r.position.y,r.position.z];l._.exactEquals(b,this._camera.position)||(this._setCameraPosition(b),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const r=this._camera.position,d=new nt;return d.position=new l.Y(r[0],r[1],r[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(r){if(!l.av.length(r))return!1;l.av.normalize(r,r);const d=l._.transformQuat([],[0,0,-1],r),b=l._.transformQuat([],[0,-1,0],r);if(b[2]<0)return!1;const M=Na(d,b);return!!M&&(this._camera.orientation=M,!0)}_setCameraPosition(r){const d=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,M=this.cameraToCenterDistance;r[2]=l.at(r[2],M/b,M/d),this._camera.position=r}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,d,b){this._unmodified=!1,this._edgeInsets.interpolate(r,d,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const d=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(r){const d=[new l.aK(0,r)];if(this.renderWorldCopies){const b=this.pointCoordinate(new l.P(0,0)),M=this.pointCoordinate(new l.P(this.width,0)),R=this.pointCoordinate(new l.P(this.width,this.height)),N=this.pointCoordinate(new l.P(0,this.height)),H=Math.floor(Math.min(b.x,M.x,R.x,N.x)),ee=Math.floor(Math.max(b.x,M.x,R.x,N.x)),se=1;for(let he=H-se;he<=ee+se;he++)0!==he&&d.push(new l.aK(he,r))}return d}isLODDisabled(r){return(!r||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(r,d,b){let M=[];if(0===d[0]&&0===d[1])return M;for(const N of r){const H=N.canonical,ee=N.overscaledZ,se=N.wrap,he=1<<H.z,ye=H.x+1<he,Pe=H.x>0,Fe=H.y+1<he,Qe=H.y>0,Je=N.wrap-(Pe?0:1),tt=N.wrap+(ye?0:1),rt=Pe?H.x-1:he-1,Pt=ye?H.x+1:0;d[0]<0?(M.push(new l.aL(ee,tt,H.z,Pt,H.y)),d[1]<0&&Fe&&(M.push(new l.aL(ee,se,H.z,H.x,H.y+1)),M.push(new l.aL(ee,tt,H.z,Pt,H.y+1))),d[1]>0&&Qe&&(M.push(new l.aL(ee,se,H.z,H.x,H.y-1)),M.push(new l.aL(ee,tt,H.z,Pt,H.y-1)))):d[0]>0?(M.push(new l.aL(ee,Je,H.z,rt,H.y)),d[1]<0&&Fe&&(M.push(new l.aL(ee,se,H.z,H.x,H.y+1)),M.push(new l.aL(ee,Je,H.z,rt,H.y+1))),d[1]>0&&Qe&&(M.push(new l.aL(ee,se,H.z,H.x,H.y-1)),M.push(new l.aL(ee,Je,H.z,rt,H.y-1)))):d[1]<0&&Fe?M.push(new l.aL(ee,se,H.z,H.x,H.y+1)):Qe&&M.push(new l.aL(ee,se,H.z,H.x,H.y-1))}if(M.length>1){M.sort((ee,se)=>ee.overscaledZ-se.overscaledZ||ee.wrap-se.wrap||ee.canonical.z-se.canonical.z||ee.canonical.x-se.canonical.x||ee.canonical.y-se.canonical.y);let N=0,H=0;for(;H<M.length;)M[H].equals(M[N])?++H:M[++N]=M[H++];M.length=N+1}const R=[];for(const N of M)M.some(H=>N.isChildOf(H))||R.push(N);return M=R.filter(N=>!r.some(H=>!!(N.overscaledZ<b&&H.isChildOf(N))||N.equals(H)||N.isChildOf(H))),M}coveringTiles(r){let d=this.coveringZoomLevel(r);const b=d,M=this.elevation&&this.elevation.exaggeration(),R=M&&!r.isTerrainDEM,N="mercator"===this.projection.name;if(void 0!==r.minzoom&&d<r.minzoom)return[];void 0!==r.maxzoom&&d>r.maxzoom&&(d=r.maxzoom);const H=this.locationCoordinate(this.center),ee=this.center.lat,se=1<<d,he=[se*H.x,se*H.y,0],ye="globe"===this.projection.name,Pe=!ye,Fe=l.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,Pe),Qe=ye?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Je=se*l.ax(1,this.center.lat),tt=this._camera.position[2]/l.ax(1,this.center.lat),rt=[se*Qe.x,se*Qe.y,tt*(Pe?1:Je)],Pt=ye||M,Bt=this.cameraToCenterDistance/r.tileSize*(r.roundZoom?1:.502),Ft=this.isLODDisabled(!0)?d:0;let tn;if(this._elevation&&r.isTerrainDEM)tn=1e4*this._elevation.exaggeration();else if(this._elevation){const L=this._elevation.getMinMaxForVisibleTiles();tn=L?L.max:this._centerAltitude}else tn=this._centerAltitude;const en=r.isTerrainDEM?-tn:this._elevation?this._elevation.getMinElevationBelowMSL():0,_n=this.projection.isReprojectedInTileSpace?l.aN(this):1,at=L=>{const oe=new l.Y(L.x+25e-6,L.y,L.z),Ve=new l.Y(L.x,L.y+25e-6,L.z),lt=L.toLngLat(),cn=oe.toLngLat(),hn=Ve.toLngLat(),Qn=this.locationCoordinate(lt),Wn=this.locationCoordinate(cn),Wi=this.locationCoordinate(hn),vr=Math.hypot(Wn.x-Qn.x,Wn.y-Qn.y),Sr=Math.hypot(Wi.x-Qn.x,Wi.y-Qn.y);return Math.sqrt(vr*Sr)*_n/25e-6},$t=L=>{const j=tn,oe=en;return{aabb:l.aQ(this,se,0,0,0,L,oe,j,this.projection),zoom:0,x:0,y:0,minZ:oe,maxZ:j,wrap:L,fullyVisible:!1}},Tn=[];let ci=[];const zn=d,mn=r.reparseOverscaled?b:d,_i=(tt-this._centerAltitude)*Je,eo=L=>{if(!this._elevation||!L.tileID||!N)return;const j=this._elevation.getMinMaxForTile(L.tileID),oe=L.aabb;j?(oe.min[2]=j.min,oe.max[2]=j.max,oe.center[2]=(oe.min[2]+oe.max[2])/2):(L.shouldSplit=ie(L),L.shouldSplit||(oe.min[2]=oe.max[2]=oe.center[2]=this._centerAltitude))},io=(L,j)=>{if(.707*j<L)return 1;const oe=j/L;return oe/(1.4144271570014144+(Math.pow(1.1,oe-1.4144271570014144+1)-1)/(1.1-1)-1)},ie=L=>{if(L.zoom<Ft)return!0;if(L.zoom===zn)return!1;if(null!=L.shouldSplit)return L.shouldSplit;const j=L.aabb.distanceX(rt),oe=L.aabb.distanceY(rt);let Ve=_i,lt=1;if(ye){Ve=L.aabb.distanceZ(rt);const Sr=Math.pow(2,L.zoom),Mr=l.ay((L.y+1)/Sr),Hr=l.ay(L.y/Sr),Za=Math.min(Math.max(ee,Mr),Hr),As=l.b4(Za)/l.b4(ee);if(lt=Za===ee?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,As/this._mercatorScaleRatio),this.zoom<=l.b1&&L.zoom===zn-1&&As>=.9)return!0}else if(R&&(Ve=L.aabb.distanceZ(rt)*Je),this.projection.isReprojectedInTileSpace&&b<=5){const Sr=Math.pow(2,L.zoom),Mr=at(new l.Y((L.x+.5)/Sr,(L.y+.5)/Sr));lt=Mr>.85?1:Mr}if(!N){const Sr=Math.sqrt(j*j+oe*oe+Ve*Ve);let Mr=(1<<zn-L.zoom)*Bt*lt;return Mr*=io(Math.max(Ve,_i),Sr),Sr<Mr}let cn=Number.MAX_VALUE,hn=0;const Qn=L.aabb.getCorners(),Wn=[];for(const Sr of Qn){l._.sub(Wn,Sr,rt),ye||(R?Wn[2]*=Je:Wn[2]=_i);const Mr=l._.dot(Wn,this._camera.forward());Mr<cn&&(cn=Mr,hn=Math.abs(Wn[2]))}let Wi=(1<<zn-L.zoom)*Bt*lt;if(Wi*=io(Math.max(hn,_i),cn),cn<Wi)return!0;const vr=L.aabb.closestPoint(he);return vr[0]===he[0]&&vr[1]===he[1]};if(this.renderWorldCopies)for(let L=1;L<=3;L++)Tn.push($t(-L)),Tn.push($t(L));for(Tn.push($t(0));Tn.length>0;){const L=Tn.pop(),j=L.x,oe=L.y;let Ve=L.fullyVisible;const lt=()=>"globe"===this.projection.name&&(0===L.y||L.y===(1<<L.zoom)-1);if(!Ve){let cn=Pt?L.aabb.intersects(Fe):L.aabb.intersectsFlat(Fe);if(0===cn&&lt()){const hn=new l.aO(L.zoom,j,oe);cn=l.aP(this,se,hn,!0).intersects(Fe)}if(0===cn)continue;Ve=2===cn}if(L.zoom!==zn&&ie(L))for(let cn=0;cn<4;cn++){const hn=(j<<1)+cn%2,Qn=(oe<<1)+(cn>>1),Wn={aabb:N?L.aabb.quadrant(cn):l.aQ(this,se,L.zoom+1,hn,Qn,L.wrap,L.minZ,L.maxZ,this.projection),zoom:L.zoom+1,x:hn,y:Qn,wrap:L.wrap,fullyVisible:Ve,tileID:void 0,shouldSplit:void 0,minZ:L.minZ,maxZ:L.maxZ};R&&!ye&&(Wn.tileID=new l.aL(L.zoom+1===zn?mn:L.zoom+1,L.wrap,L.zoom+1,hn,Qn),eo(Wn)),Tn.push(Wn)}else{const cn=L.zoom===zn?mn:L.zoom;if(r.minzoom&&r.minzoom>cn)continue;if(!Ve){let Wi=Pt?L.aabb.intersectsPrecise(Fe):L.aabb.intersectsPreciseFlat(Fe);if(0===Wi&&lt()){const vr=new l.aO(L.zoom,j,oe);Wi=l.aP(this,se,vr,!0).intersectsPrecise(Fe)}if(0===Wi)continue}const hn=he[0]-(.5+j+(L.wrap<<L.zoom))*(1<<d-L.zoom),Qn=he[1]-.5-oe,Wn=L.tileID?L.tileID:new l.aL(cn,L.wrap,L.zoom,j,oe);ci.push({tileID:Wn,distanceSq:hn*hn+Qn*Qn})}}if(this.fogCullDistSq){const L=this.fogCullDistSq,j=this.horizonLineFromTop();ci=ci.filter(oe=>{const Ve=[0,0,0,1],lt=[l.a3,l.a3,0,1],cn=this.calculateFogTileMatrix(oe.tileID.toUnwrapped());l.aA.transformMat4(Ve,Ve,cn),l.aA.transformMat4(lt,lt,cn);const hn=l.aA.min([],Ve,lt),Qn=l.aA.max([],Ve,lt),Wn=l.aR(hn,Qn);if(0===Wn)return!0;let Wi=!1;const vr=this._elevation;if(vr&&Wn>L&&0!==j){const Sr=this.calculateProjMatrix(oe.tileID.toUnwrapped());let Mr;r.isTerrainDEM||(Mr=vr.getMinMaxForTile(oe.tileID)),Mr||(Mr={min:en,max:tn});const Hr=l.b2(this.rotation),Za=[Hr[0]*l.a3,Hr[1]*l.a3,Mr.max];l._.transformMat4(Za,Za,Sr),Wi=(1-Za[1])*this.height*.5<j}return Wn<L||Wi})}return ci.sort((L,j)=>L.distanceSq-j.distanceSq).map(L=>L.tileID)}resize(r,d){this.width=r,this.height=d,this.pixelsToGLUnits=[2/r,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const d=l.at(r.lat,-l.aS,l.aS),b=this.projection.project(r.lng,d);return new l.P(b.x*this.worldSize,b.y*this.worldSize)}unproject(r){return this.projection.unproject(r.x/this.worldSize,r.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/l.ax(1,this.center.lat)/this.worldSize}setLocationAtPoint(r,d){let b,M;const R=this.centerPoint;if("globe"===this.projection.name){const H=this.worldSize;b=(d.x-R.x)/H,M=(d.y-R.y)/H}else{const H=this.pointCoordinate(d),ee=this.pointCoordinate(R);b=H.x-ee.x,M=H.y-ee.y}const N=this.locationCoordinate(r);this.setLocation(new l.Y(N.x-b,N.y-M))}setLocation(r){this.center=this.coordinateLocation(r),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(r){return this.projection.locationPoint(this,r)}locationPoint3D(r){return this.projection.locationPoint(this,r,!0)}pointLocation(r){return this.coordinateLocation(this.pointCoordinate(r))}pointLocation3D(r){return this.coordinateLocation(this.pointCoordinate3D(r))}locationCoordinate(r,d){const b=d?l.ax(d,r.lat):void 0,M=this.projection.project(r.lng,r.lat);return new l.Y(M.x,M.y,b)}coordinateLocation(r){return this.projection.unproject(r.x,r.y)}pointRayIntersection(r,d){const b=null!=d?d:this._centerAltitude,M=[r.x,r.y,0,1],R=[r.x,r.y,1,1];l.aA.transformMat4(M,M,this.pixelMatrixInverse),l.aA.transformMat4(R,R,this.pixelMatrixInverse);const N=R[3];l.aA.scale(M,M,1/M[3]),l.aA.scale(R,R,1/N);const H=M[2],ee=R[2];return{p0:M,p1:R,t:H===ee?0:(b-H)/(ee-H)}}screenPointToMercatorRay(r){const d=[r.x,r.y,0,1],b=[r.x,r.y,1,1];return l.aA.transformMat4(d,d,this.pixelMatrixInverse),l.aA.transformMat4(b,b,this.pixelMatrixInverse),l.aA.scale(d,d,1/d[3]),l.aA.scale(b,b,1/b[3]),d[2]=l.ax(d[2],this._center.lat)*this.worldSize,b[2]=l.ax(b[2],this._center.lat)*this.worldSize,l.aA.scale(d,d,1/this.worldSize),l.aA.scale(b,b,1/this.worldSize),new l.aT([d[0],d[1],d[2]],l._.normalize([],l._.sub([],b,d)))}rayIntersectionCoordinate(r){const{p0:d,p1:b,t:M}=r,R=l.ax(d[2],this._center.lat),N=l.ax(b[2],this._center.lat);return new l.Y(l.a2(d[0],b[0],M)/this.worldSize,l.a2(d[1],b[1],M)/this.worldSize,l.a2(R,N,M))}pointCoordinate(r,d=this._centerAltitude){return this.projection.pointCoordinate(this,r.x,r.y,d)}pointCoordinate3D(r){if(!this.elevation)return this.pointCoordinate(r);let d=this.projection.pointCoordinate3D(this,r.x,r.y);if(d)return new l.Y(d[0],d[1],d[2]);let b=0,M=this.horizonLineFromTop();if(r.y>M)return this.pointCoordinate(r);const R=.02*M,N=r.clone();for(let H=0;H<10&&M-b>R;H++){N.y=l.a2(b,M,.66);const ee=this.projection.pointCoordinate3D(this,N.x,N.y);ee?(M=N.y,d=ee):b=N.y}return d?new l.Y(d[0],d[1],d[2]):this.pointCoordinate(r)}isPointAboveHorizon(r){return this.projection.isPointAboveHorizon(this,r)}isPointOnSurface(r){if(r.y<0||r.y>this.height||r.x<0||r.x>this.width)return!1;if(this.elevation||this.zoom>=l.aU)return!this.isPointAboveHorizon(r);const d=this.pointCoordinate(r);return d.y>=0&&d.y<=1}_coordinatePoint(r,d){const b=d&&this.elevation?this.elevation.getAtPointOrZero(r,this._centerAltitude):this._centerAltitude,M=[r.x*this.worldSize,r.y*this.worldSize,b+r.toAltitude(),1];return l.aA.transformMat4(M,M,this.pixelMatrix),M[3]>0?new l.P(M[0]/M[3],M[1]/M[3]):new l.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:r,left:d}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,R=this.pointLocation3D(new l.P(d,r)),N=this.pointLocation3D(new l.P(M,r)),H=this.pointLocation3D(new l.P(M,b)),ee=this.pointLocation3D(new l.P(d,b));let se=Math.min(R.lng,N.lng,H.lng,ee.lng),he=Math.max(R.lng,N.lng,H.lng,ee.lng),ye=Math.min(R.lat,N.lat,H.lat,ee.lat),Pe=Math.max(R.lat,N.lat,H.lat,ee.lat);const Fe=Math.pow(2,-this.zoom)/16*270,Qe="globe"===this.projection.name?1:4,Je=(tt,rt,Pt,Bt,Ft)=>{const tn=(tt+Pt)/2,en=(rt+Bt)/2,_n=new l.P(tn,en),{lng:at,lat:$t}=this.pointLocation3D(_n),Tn=Math.max(0,se-at,ye-$t,at-he,$t-Pe);se=Math.min(se,at),he=Math.max(he,at),ye=Math.min(ye,$t),Pe=Math.max(Pe,$t),(Ft<Qe||Tn>Fe)&&(Je(tt,rt,tn,en,Ft+1),Je(tn,en,Pt,Bt,Ft+1))};if(Je(d,r,M,r,1),Je(M,r,M,b,1),Je(M,b,d,b,1),Je(d,b,d,r,1),"globe"===this.projection.name){const[tt,rt]=l.aV(this);tt?(Pe=90,he=180,se=-180):rt&&(ye=-90,he=180,se=-180)}return new l.ai(new l.aI(se,ye),new l.aI(he,Pe))}_getBoundsRectangular(r,d){const{top:b,left:M}=this._edgeInsets,R=this.height-this._edgeInsets.bottom,N=this.width-this._edgeInsets.right,H=new l.P(M,b),ee=new l.P(N,b),se=new l.P(N,R),he=new l.P(M,R);let ye=this.pointCoordinate(H,r),Pe=this.pointCoordinate(ee,r);const Fe=this.pointCoordinate(se,d),Qe=this.pointCoordinate(he,d),Je=(tt,rt)=>(rt.y-tt.y)/(rt.x-tt.x);return ye.y>1&&Pe.y>=0?ye=new l.Y((1-Qe.y)/Je(Qe,ye)+Qe.x,1):ye.y<0&&Pe.y<=1&&(ye=new l.Y(-Qe.y/Je(Qe,ye)+Qe.x,0)),Pe.y>1&&ye.y>=0?Pe=new l.Y((1-Fe.y)/Je(Fe,Pe)+Fe.x,1):Pe.y<0&&ye.y<=1&&(Pe=new l.Y(-Fe.y/Je(Fe,Pe)+Fe.x,0)),(new l.ai).extend(this.coordinateLocation(ye)).extend(this.coordinateLocation(Pe)).extend(this.coordinateLocation(Qe)).extend(this.coordinateLocation(Fe))}_getBoundsRectangularTerrain(){const r=this.elevation;if(!r.visibleDemTiles.length||r.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=r.visibleDemTiles.reduce((b,M)=>{if(M.dem){const R=M.dem.tree;b.min=Math.min(b.min,R.minimums[0]),b.max=Math.max(b.max,R.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*r.exaggeration(),d.max*r.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(r=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,b=this.height/2-d*(1-this._horizonShift);return r?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(r){this.maxBounds=r,this.minLat=-l.aS,this.maxLat=l.aS,this.minLng=-180,this.maxLng=180,r&&(this.minLat=r.getSouth(),this.maxLat=r.getNorth(),this.minLng=r.getWest(),this.maxLng=r.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=l.aj(this.minLng)*this.tileSize,this.worldMaxX=l.aj(this.maxLng)*this.tileSize,this.worldMinY=l.ak(this.maxLat)*this.tileSize,this.worldMaxY=l.ak(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(r,d){return this.projection.createTileMatrix(this,d,r)}calculateDistanceTileData(r){const d=r.key,b=this._distanceTileDataCache;if(b[d])return b[d];const M=r.canonical,R=1/this.height,N=this.cameraWorldSize,H=N/this.zoomScale(M.z),ee=(M.x+Math.pow(2,M.z)*r.wrap)*H,se=M.y*H,he=this.point;he.x*=N/this.worldSize,he.y*=N/this.worldSize;const ye=this.angle,Pe=Math.sin(-ye),Fe=-Math.cos(-ye);return b[d]={bearing:[Pe,Fe],center:[(he.x-ee)*R,(he.y-se)*R],scale:H/l.a3*R},b[d]}calculateFogTileMatrix(r){const d=r.key,b=this._fogTileMatrixCache;if(b[d])return b[d];const M=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,r);return l.ad.multiply(M,this.worldToFogMatrix,M),b[d]=new Float32Array(M),b[d]}calculateProjMatrix(r,d=!1,b=!1){const M=r.key;let R;if(R=b?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,R[M])return R[M];const N=this.calculatePosMatrix(r,this.worldSize);let H;return H=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:b?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,l.ad.multiply(N,H,N),R[M]=new Float32Array(N),R[M]}calculatePixelsToTileUnitsMatrix(r){const d=r.tileID.key,b=this._pixelsToTileUnitsCache;if(b[d])return b[d];const M=l.aW(r,this);return b[d]=M,b[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const r=1/this.worldSize,d=l.ad.fromScaling([],[r,r,r]);return l.ad.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const r=this._elevation;this._updateCameraState();const d=l.ax(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(d),M=this._camera.forward(),R=l.ax(1,this._center.lat);b[2]/=R,M[2]/=R,l._.normalize(M,M);const N=r.raycast(b,M,r.exaggeration());if(N){const H=l._.scaleAndAdd([],b,M,N),ee=new l.Y(H[0],H[1],l.ax(H[2],l.ay(H[1]))),se=(ee.z+l._.length([ee.x-b[0],ee.y-b[1],ee.z-b[2]*R]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(se),this._centerAltitude=ee.toAltitude(),this._center=this.coordinateLocation(ee),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(r=!1){if(!this._elevation)return;const d=this._elevation,b=l.ax(1,this._center.lat)*this.worldSize,M=this._computeCameraPosition(b),R=d.getAtPointOrZero(new l.Y(...M)),N=this.pixelsPerMeter/this.worldSize*R,H=this._minimumHeightOverTerrain(),ee=M[2]-N;if(ee<=H)if(ee<0||r){const se=this.locationCoordinate(this._center,this._centerAltitude),he=[M[0],M[1],se.z-M[2]],ye=l._.length(he);he[2]-=(H-ee)/this._pixelsPerMercatorPixel;const Pe=l._.length(he);if(0===Pe)return;l._.scale(he,he,ye/Pe*this._pixelsPerMercatorPixel),this._camera.position=[M[0],M[1],se.z*this._pixelsPerMercatorPixel-he[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||r){const Pe=this.center;return Pe.lat=l.at(Pe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!r)&&(Pe.lng=l.at(Pe.lng,this.minLng,this.maxLng)),this.center=Pe,void(this._constraining=!1)}const d=this._unmodified,{x:b,y:M}=this.point;let R=0,N=b,H=M;const ee=this.width/2,se=this.height/2,he=this.worldMinY*this.scale,ye=this.worldMaxY*this.scale;if(M-se<he&&(H=he+se),M+se>ye&&(H=ye-se),ye-he<this.height&&(R=Math.max(R,this.height/(ye-he)),H=(ye+he)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Pe=this.worldMinX*this.scale,Fe=this.worldMaxX*this.scale,Qe=this.worldSize/2-(Pe+Fe)/2;N=(b+Qe+this.worldSize)%this.worldSize-Qe,N-ee<Pe&&(N=Pe+ee),N+ee>Fe&&(N=Fe-ee),Fe-Pe<this.width&&(R=Math.max(R,this.width/(Fe-Pe)),N=(Fe+Pe)/2)}N===b&&H===M||(this.center=this.unproject(new l.P(N,H))),R&&(this.zoom+=this.scaleZoom(R)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let r=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(r=Math.max(r,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),r}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,d="globe"===this.projection.name,b=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=l.ax(1,this.center.lat)/l.ax(1,l.b3));const M=l.aX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,M),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const R="meters"===this.projection.zAxisUnit?b:1,N=this._camera.getWorldToCamera(this.worldSize,R);let H;const ee=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(ee[8]=2*-r.x/this.width,ee[9]=2*r.y/this.height,this.isOrthographic){let $t=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Tn=$t*this.aspect,ci=-Tn,zn=-$t;Tn-=r.x,ci-=r.x,$t+=r.y,zn+=r.y,H=this._camera.getCameraToClipOrthographic(ci,Tn,zn,$t,this._nearZ,this._farZ),((mn,_i,eo,io)=>{for(let ie=0;ie<16;ie++)mn[ie]=ta(_i[ie],eo[ie],io)})(H,H,ee,cc(this.pitch>=15?1:this.pitch/15))}else H=ee;const se=l.ad.mul([],ee,N);let he=l.ad.mul([],H,N);if(this.projection.isReprojectedInTileSpace){const $t=this.locationCoordinate(this.center),Tn=l.ad.identity([]);l.ad.translate(Tn,Tn,[$t.x*this.worldSize,$t.y*this.worldSize,0]),l.ad.multiply(Tn,Tn,l.aY(this)),l.ad.translate(Tn,Tn,[-$t.x*this.worldSize,-$t.y*this.worldSize,0]),l.ad.multiply(he,he,Tn),l.ad.multiply(se,se,Tn),this.inverseAdjustmentMatrix=l.aZ(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=l.ad.scale([],he,[this.worldSize,this.worldSize,this.worldSize/R,1]),this.projMatrix=he,this.invProjMatrix=l.ad.invert(new Float64Array(16),this.projMatrix),d){const $t=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);$t[8]=2*-r.x/this.width,$t[9]=2*r.y/this.height,this.expandedFarZProjMatrix=l.ad.mul([],$t,N)}else this.expandedFarZProjMatrix=this.projMatrix;const ye=l.ad.invert([],H);this.frustumCorners=l.a_.fromInvProjectionMatrix(ye,this.horizonLineFromTop(),this.height),this.cameraFrustum=l.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const Pe=new Float32Array(16);l.ad.identity(Pe),l.ad.scale(Pe,Pe,[1,-1,1]),l.ad.rotateX(Pe,Pe,this._pitch),l.ad.rotateZ(Pe,Pe,this.angle);const Fe=l.ad.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=l.ad.clone(Fe);const Qe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Fe[8]=2*-r.x/this.width,Fe[9]=2*(r.y+Qe)/this.height,this.skyboxMatrix=l.ad.multiply(Pe,Fe,Pe);const Je=this.point,tt=Je.x,rt=Je.y,Pt=this.width%2/2,Bt=this.height%2/2,Ft=Math.cos(this.angle),tn=Math.sin(this.angle),en=tt-Math.round(tt)+Ft*Pt+tn*Bt,_n=rt-Math.round(rt)+Ft*Bt+tn*Pt,at=new Float64Array(he);if(l.ad.translate(at,at,[en>.5?en-1:en,_n>.5?_n-1:_n,0]),this.alignedProjMatrix=at,he=l.ad.create(),l.ad.scale(he,he,[this.width/2,-this.height/2,1]),l.ad.translate(he,he,[1,-1,0]),this.labelPlaneMatrix=he,he=l.ad.create(),l.ad.scale(he,he,[1,-1,1]),l.ad.translate(he,he,[-1,-1,0]),l.ad.scale(he,he,[2/this.width,2/this.height,1]),this.glCoordMatrix=he,this.pixelMatrix=l.ad.multiply(new Float64Array(16),this.labelPlaneMatrix,se),this._calcFogMatrices(),this._distanceTileDataCache={},he=l.ad.invert(new Float64Array(16),this.pixelMatrix),!he)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=he,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=l.a$(this);const $t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=l._.transformMat4($t,$t,N),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=he;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const r=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,b=this._camera.position,M=1/this.height/this._pixelsPerMercatorPixel,R=[r,r,d];l._.scale(R,R,M),l._.scale(b,b,-1),l._.multiply(b,b,R);const N=l.ad.create();l.ad.translate(N,N,b),l.ad.scale(N,N,R),this.mercatorFogMatrix=N,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(r,d,M)}_computeCameraPosition(r){const d=(r=r||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),M=this.point,R=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-r/this.worldSize*this._centerAltitude;return[M.x/this.worldSize-b[0]*R,M.y/this.worldSize-b[1]*R,r/this.worldSize*this._centerAltitude-b[2]*R]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(r){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=this._camera.position[2],M=r[2];let R=1;this.projection.wrap&&(this.center=this.center.wrap()),M>0&&(R=Math.min((d-b)/M,1)),this._camera.position=l._.scaleAndAdd([],this._camera.position,r,R),this._updateStateFromCamera()}_updateStateFromCamera(){const r=this._camera.position,d=this._camera.forward(),{pitch:b,bearing:M}=this._camera.getPitchBearing(),R=l.ax(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,N=this._mercatorZfromZoom(this._maxZoom)*Math.cos(l.ab(this._maxPitch)),H=Math.max((r[2]-R)/Math.cos(b),N),ee=this._zoomFromMercatorZ(H);l._.scaleAndAdd(r,r,d,H),this._pitch=l.at(b,l.ab(this.minPitch),l.ab(this.maxPitch)),this.angle=l.au(M,-Math.PI,Math.PI),this._setZoom(l.at(ee,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new l.Y(r[0],r[1],r[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(r){return Math.pow(2,r)*this.tileSize}_mercatorZfromZoom(r){return this.cameraToCenterDistance/this._worldSizeFromZoom(r)}_minimumHeightOverTerrain(){const r=Math.min(null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(r)}_zoomFromMercatorZ(r){return this.scaleZoom(this.cameraToCenterDistance/(r*this.tileSize))}zoomFromMercatorZAdjusted(r){let d=0,b=l.aU,M=0,R=1/0;for(;b-d>1e-6&&b>d;){const N=d+.5*(b-d),H=this.tileSize*Math.pow(2,N),ee=this.getCameraToCenterDistance(this.projection,N,H),se=this.scaleZoom(ee/(r*this.tileSize)),he=Math.abs(N-se);he<R&&(R=he,M=N),N<se?d=N:b=N}return M}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(l.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(r,d){const b=Math.min(r.x,d.x),M=Math.max(r.x,d.x),R=Math.min(r.y,d.y),N=Math.max(r.y,d.y);if(R<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const H=[new l.P(b,R),new l.P(M,N),new l.P(b,N),new l.P(M,R)],ee=this.renderWorldCopies?-3:0,se=this.renderWorldCopies?4:1;for(const he of H){const ye=this.pointRayIntersection(he);if(ye.t<0)return!0;const Pe=this.rayIntersectionCoordinate(ye);if(Pe.x<ee||Pe.y<0||Pe.x>se||Pe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+l.b0(this.fovAboveCenter)>88||this.anyCornerOffEdge(new l.P(0,0),new l.P(this.width,this.height))}zoomDeltaToMovement(r,d){const b=l._.length(l._.sub([],this._camera.position,r)),M=this._zoomFromMercatorZ(b)+d;return b-this._mercatorZfromZoom(M)}getCameraPoint(){if("globe"===this.projection.name){const r=function([d,b,M],R){const N=[d,b,M,1];l.aA.transformMat4(N,N,R);const H=N[3]=Math.max(N[3],1e-6);return N[0]/=H,N[1]/=H,N[2]/=H,N}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new l.P(r[0],r[1])}{const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,r))}}getCameraToCenterDistance(r,d=this.zoom,b=this.worldSize){const M=l.aX(r,d,this.width,this.height,1024),R=r.pixelSpaceConversion(this.center.lat,b,M);let N=.5/Math.tan(.5*this._fov)*this.height*R;return this.isOrthographic&&(N=ta(1,N,cc(this.pitch>=15?1:this.pitch/15))),N}getWorldToCameraMatrix(){const r=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&l.ad.multiply(r,r,this.globeMatrix),r}getFrustum(r){return l.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,"meters"===this.projection.zAxisUnit)}}const Os={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11},Yc=(v,r)=>{if(r>0&&v.terrain&&l.w("Cutoff is currently disabled on terrain"),r<=0||v.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=v.transform,b=Math.max(Math.abs(d._zoom-(v.minCutoffZoom-1)),1),M=d.isLODDisabled(!1)?l.$(60,45,d.pitch):l.$(30,15,d.pitch),R=d._farZ-d._nearZ,N=r*d.height,H=((1-(ee=M))*d.cameraToCenterDistance+ee*(d._farZ+N))*b;var ee;return{shouldRenderCutoff:M<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(H-d._nearZ)/R,(H-N-d._nearZ)/R]}}},Zs={cascadeCount:2,shadowMapResolution:2048};class hu{constructor(r,d){this.aabb=r,this.lastCascade=d}}class Uu{add(r,d){const b=this.receivers[r.key];void 0!==b?(b.aabb.min[0]=Math.min(b.aabb.min[0],d.min[0]),b.aabb.min[1]=Math.min(b.aabb.min[1],d.min[1]),b.aabb.min[2]=Math.min(b.aabb.min[2],d.min[2]),b.aabb.max[0]=Math.max(b.aabb.max[0],d.max[0]),b.aabb.max[1]=Math.max(b.aabb.max[1],d.max[1]),b.aabb.max[2]=Math.max(b.aabb.max[2],d.max[2])):this.receivers[r.key]=new hu(d,null)}clear(){this.receivers={}}get(r){return this.receivers[r.key]}computeRequiredCascades(r,d,b){const M=l.b6.fromPoints(r.points);let R=0;for(const N in this.receivers){const H=this.receivers[N];if(!H||!M.intersectsAabb(H.aabb))continue;H.aabb.min=M.closestPoint(H.aabb.min),H.aabb.max=M.closestPoint(H.aabb.max);const ee=H.aabb.getCorners();for(let se=0;se<b.length;se++){let he=!0;for(const ye of ee){const Pe=[ye[0]*d,ye[1]*d,ye[2]];if(l._.transformMat4(Pe,Pe,b[se].matrix),Pe[0]<-1||Pe[0]>1||Pe[1]<-1||Pe[1]>1){he=!1;break}}if(H.lastCascade=se,R=Math.max(R,se),he)break}}return R+1}}class Ea{constructor(r){this.painter=r,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Uu,this._depthMode=new l.ae(r.context.gl.LEQUAL,l.ae.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,r.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),r.tp.registerParameter(Zs,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),r.tp.registerParameter(Zs,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),r.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const r of this._cascades)r.texture.destroy(),r.framebuffer.destroy();this._cascades=[]}updateShadowParameters(r,d){const b=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const M=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||M<=0||(this._shadowLayerCount=b.style.order.reduce((Qe,Je)=>{const tt=b.style._mergedLayers[Je];return Qe+(tt.hasShadowPass()&&!tt.isHidden(r.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const R=b.context,N=Zs.shadowMapResolution,H=Zs.shadowMapResolution;if(0===this._cascades.length||Zs.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Qe=0;Qe<Zs.cascadeCount;++Qe){const Je=b._shadowMapDebug,tt=R.gl,rt=R.createFramebuffer(N,H,Je,"texture"),Pt=new l.T(R,{width:N,height:H,data:null},tt.DEPTH_COMPONENT);if(rt.depthAttachment.set(Pt.texture),Je){const Bt=new l.T(R,{width:N,height:H,data:null},tt.RGBA);rt.colorAttachment.set(Bt.texture)}this._cascades.push({framebuffer:rt,texture:Pt,matrix:[],far:0,boundingSphereRadius:0,frustum:new l.aM,scale:0})}}this.shadowDirection=nl(d);let ee=0;if(r.elevation){const Qe=r.elevation,Je=[1e4,-1e4];Qe.visibleDemTiles.filter(tt=>tt.dem).forEach(tt=>{const rt=tt.dem.tree;Je[0]=Math.min(Je[0],rt.minimums[0]),Je[1]=Math.max(Je[1],rt.maximums[0])}),1e4!==Je[0]&&(ee=(Je[1]-Je[0])*Qe.exaggeration())}const se=1.5*r.cameraToCenterDistance,he=3*se,ye=new Float64Array(16);for(let Qe=0;Qe<this._cascades.length;++Qe){const Je=this._cascades[Qe];let tt=r.height/50,rt=1;1===Zs.cascadeCount?rt=he:0===Qe?rt=se:(tt=se,rt=he);const[Pt,Bt]=gd(r,this.shadowDirection,tt,rt,Zs.shadowMapResolution,ee);Je.scale=r.scale,Je.matrix=Pt,Je.boundingSphereRadius=Bt,l.ad.invert(ye,Je.matrix),Je.frustum=l.aM.fromInvProjectionMatrix(ye,1,0,!0),Je.far=rt}const Pe=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[Pe].far,this._cascades[Pe].far],this._uniformValues.u_shadow_intensity=M,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Zs.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Zs.shadowMapResolution,this._uniformValues.u_shadowmap_0=Os.ShadowMap0,this._uniformValues.u_shadowmap_1=Os.ShadowMap0+1,this._groundShadowTiles=b.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Fe=b.transform.elevation;for(const Qe of this._groundShadowTiles){let Je={min:0,max:0};if(Fe){const tt=Fe.getMinMaxForTile(Qe);tt&&(Je=tt)}this.addShadowReceiver(Qe.toUnwrapped(),Je.min,Je.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(r){this._enabled=r}drawShadowPass(r,d){if(!this.enabled)return;const b=this.painter,M=b.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(b.transform.getFrustum(0),b.transform.worldSize,this._cascades),M.viewport.set([0,0,Zs.shadowMapResolution,Zs.shadowMapResolution]);for(let R=0;R<this._numCascadesToRender;++R){b.currentShadowCascade=R,M.bindFramebuffer.set(this._cascades[R].framebuffer.framebuffer),M.clear({color:l.C.white,depth:1});for(const N of r.order){const H=r._mergedLayers[N];if(!H.hasShadowPass()||H.isHidden(b.transform.zoom))continue;const ee=r.getLayerSourceCache(H),se=ee?d[ee.id]:void 0;("model"===H.type||se&&se.length)&&b.renderLayer(b,ee,H,se)}}b.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const r=this.painter,d=r.style,b=r.context,M=d.directionalLight,R=d.ambientLight;if(!M||!R)return;const N=[],H=Yc(r,r.longestCutoffRange);H.shouldRenderCutoff&&N.push("RENDER_CUTOFF");const ee=uc(d,M,R),se=new l.ae(b.gl.LEQUAL,l.ae.ReadOnly,r.depthRangeFor3D);for(const he of this._groundShadowTiles){const ye=he.toUnwrapped(),Pe=r.isTileAffectedByFog(he),Fe=r.getOrCreateProgram("groundShadow",{defines:N,overrideFog:Pe});this.setupShadows(ye,Fe),r.uploadCommonUniforms(b,Fe,ye,null,H);const Qe={u_matrix:r.transform.calculateProjMatrix(ye),u_ground_shadow_factor:ee};Fe.draw(r,b.gl.TRIANGLES,se,l.ag.disabled,l.a.multiply,l.af.disabled,Qe,"ground_shadow",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments,{},r.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?l.a.unblended:l.a.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(r){const d=this.painter.transform,b=d.calculatePosMatrix(r,d.worldSize);return l.ad.multiply(b,this._cascades[this.painter.currentShadowCascade].matrix,b),Float32Array.from(b)}calculateShadowPassMatrixFromMatrix(r){return l.ad.multiply(r,this._cascades[this.painter.currentShadowCascade].matrix,r),Float32Array.from(r)}setupShadows(r,d,b,M=0){if(!this.enabled)return;const R=this.painter.transform,N=this.painter.context,H=N.gl,ee=this._uniformValues,se=new Float64Array(16),he=R.calculatePosMatrix(r,R.worldSize);for(let ye=0;ye<this._cascades.length;ye++)l.ad.multiply(se,this._cascades[ye].matrix,he),ee[0===ye?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(se),N.activeTexture.set(H.TEXTURE0+Os.ShadowMap0+ye),this._cascades[ye].texture.bind(H.NEAREST,H.CLAMP_TO_EDGE);if(this.useNormalOffset=!!b,this.useNormalOffset){const ye=l.b5(r.canonical),Pe=2/R.tileSize*l.a3/Zs.shadowMapResolution,Fe=Pe*this._cascades[0].boundingSphereRadius,Qe=Pe*this._cascades[this._cascades.length-1].boundingSphereRadius,Je=("vector-tile"===b?1:3)/Math.pow(2,M-r.canonical.z-(1-R.zoom+Math.floor(R.zoom)));ee.u_shadow_normal_offset=[ye,Fe*Je,Qe*Je],ee.u_shadow_bias=[6e-5,.0012,.012]}else ee.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(N,ee)}setupShadowsFromMatrix(r,d,b=!1){if(!this.enabled)return;const M=this.painter.context,R=M.gl,N=this._uniformValues,H=new Float64Array(16);for(let ee=0;ee<Zs.cascadeCount;ee++)l.ad.multiply(H,this._cascades[ee].matrix,r),N[0===ee?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(H),M.activeTexture.set(R.TEXTURE0+Os.ShadowMap0+ee),this._cascades[ee].texture.bind(R.NEAREST,R.CLAMP_TO_EDGE);this.useNormalOffset=b,b?(N.u_shadow_normal_offset=[1,5,5],N.u_shadow_bias=[6e-5,.0012,.012]):N.u_shadow_bias=[36e-5,.0012,.012],d.setShadowUniformValues(M,N)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(r,d,b,M){if(M[2]>=0)return{};const R=function(ee,se,he){const ye=he/(1<<ee.canonical.z);return new l.b6([ee.canonical.x*ye+ee.wrap*he,ee.canonical.y*ye+ee.wrap*he,0],[(ee.canonical.x+1)*ye+ee.wrap*he,(ee.canonical.y+1)*ye+ee.wrap*he,se])}(r,d,b).getCorners(),N=d/-M[2];M[0]<0?(l._.add(R[0],R[0],[M[0]*N,0,0]),l._.add(R[3],R[3],[M[0]*N,0,0])):M[0]>0&&(l._.add(R[1],R[1],[M[0]*N,0,0]),l._.add(R[2],R[2],[M[0]*N,0,0])),M[1]<0?(l._.add(R[0],R[0],[0,M[1]*N,0]),l._.add(R[1],R[1],[0,M[1]*N,0])):M[1]>0&&(l._.add(R[2],R[2],[0,M[1]*N,0]),l._.add(R[3],R[3],[0,M[1]*N,0]));const H={};return H.vertices=R,H.planes=[Ga(R[1],R[0],R[4]),Ga(R[2],R[1],R[5]),Ga(R[3],R[2],R[6]),Ga(R[0],R[3],R[7])],H}addShadowReceiver(r,d,b){this._receivers.add(r,l.b6.fromTileIdAndHeight(r,d,b))}getMaxCascadeForTile(r){const d=this._receivers.get(r);return d&&d.lastCascade?d.lastCascade:0}}function Ga(v,r,d){const b=l._.sub([],d,r),M=l._.sub([],v,r),R=l._.cross([],b,M),N=l._.length(R);return 0===N?[0,0,1,0]:(l._.scale(R,R,1/N),[R[0],R[1],R[2],-l._.dot(R,r)])}function nl(v){const r=v.properties.get("direction"),d=l.ac(r.x,r.y,r.z);d[2]=l.at(d[2],0,75);const b=l.b7([d[0],d[1],d[2]]);return l._.fromValues(b.x,b.y,b.z)}function uc(v,r,d){const b=r.properties.get("color"),M=r.properties.get("intensity"),R=r.properties.get("direction"),N=[R.x,R.y,R.z],H=d.properties.get("color"),ee=d.properties.get("intensity"),se=Math.max(l._.dot([0,0,1],N),0),he=[0,0,0];l._.scale(he,H.toRenderColor(v.getLut(r.scope)).toArray01Linear().slice(0,3),ee);const ye=[0,0,0];return l._.scale(ye,b.toRenderColor(v.getLut(d.scope)).toArray01Linear().slice(0,3),se*M),l.b8([he[0]>0?he[0]/(he[0]+ye[0]):0,he[1]>0?he[1]/(he[1]+ye[1]):0,he[2]>0?he[2]/(he[2]+ye[2]):0])}function gd(v,r,d,b,M,R){const N=v.zoom,H=v.scale,ee=v.worldSize,se=1/ee,he=v.aspect,ye=Math.sqrt(1+he*he)*Math.tan(.5*v.fovX),Pe=ye*ye,Fe=b-d,Qe=b+d;let Je,tt;Pe>Fe/Qe?(Je=b,tt=b*ye):(Je=.5*Qe*(1+Pe),tt=.5*Math.sqrt(Fe*Fe+2*(b*b+d*d)*Pe+Qe*Qe*Pe*Pe));const rt=v.projection.pixelsPerMeter(v.center.lat,ee),Pt=v._camera.getCameraToWorldMercator(),Bt=[0,0,-Je*se];l._.transformMat4(Bt,Bt,Pt);let Ft=tt*se;const tn=v._edgeInsets;if(!(0===tn.left&&0===tn.top&&0===tn.right&&0===tn.bottom||tn.left===tn.right&&tn.top===tn.bottom)){const Ve=v._camera.getWorldToCamera(v.worldSize,"meters"===v.projection.zAxisUnit?rt:1),lt=v._camera.getCameraToClipPerspective(v._fov,v.width/v.height,d,b);lt[8]=2*-v.centerOffset.x/v.width,lt[9]=2*v.centerOffset.y/v.height;const cn=new Float64Array(16);l.ad.mul(cn,lt,Ve);const hn=new Float64Array(16);l.ad.invert(hn,cn);const Qn=l.aM.fromInvProjectionMatrix(hn,ee,N,!0);for(const Wn of Qn.points){const Wi=((en=Wn)[0]/=H,en[1]/=H,en[2]=l.ax(en[2],v._center.lat),en);Ft=Math.max(Ft,l._.len(l._.subtract([],Bt,Wi)))}}var en;Ft*=M/(M-1);const _n=Math.acos(r[2]),at=Math.atan2(-r[0],-r[1]),$t=new Dt;$t.position=Bt,$t.setPitchBearing(_n,at);const Tn=$t.getWorldToCamera(ee,rt),ci=Ft*ee,zn=Math.min(v._mercatorZfromZoom(17)*ee*-2,-2*ci),mn=$t.getCameraToClipOrthographic(-ci,ci,-ci,ci,zn,(ci+R*rt)/r[2]),_i=new Float64Array(16);l.ad.multiply(_i,mn,Tn);const eo=l._.fromValues(Math.floor(1e6*Bt[0])/1e6*ee,Math.floor(1e6*Bt[1])/1e6*ee,0),io=.5*M,ie=[0,0,0];l._.transformMat4(ie,eo,_i),l._.scale(ie,ie,io);const L=[Math.floor(ie[0]),Math.floor(ie[1]),Math.floor(ie[2])],j=[0,0,0];l._.sub(j,ie,L),l._.scale(j,j,-1/io);const oe=new Float64Array(16);return l.ad.identity(oe),l.ad.translate(oe,oe,j),l.ad.multiply(_i,oe,_i),[_i,ci]}function sd(v,r){return null!=v&&null!=r&&!(!v.hasData()||!r.hasData())&&null!=v.demTexture&&null!=r.demTexture&&v.tileID.key!==r.tileID.key}const Le=new class{constructor(){this.operations={}}newMorphing(v,r,d,b,M){if(v in this.operations){const R=this.operations[v];R.to.tileID.key!==d.tileID.key&&(R.queued=d)}else this.operations[v]={startTime:b,phase:0,duration:M,from:r,to:d,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const r=this.operations[v];return{from:r.from,to:r.to,phase:r.phase}}update(v){for(const r in this.operations){const d=this.operations[r];for(d.phase=(v-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,v)){delete this.operations[r];break}}}_nextOp(v,r){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=r,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},qe={0:null,1:"TERRAIN_VERTEX_MORPHING"};function St(v,r,d){if(0===r)return 0;const b=r<1&&514===d?.25/r:1;return 6*Math.pow(1.5,22-v)*Math.max(r,1)*b}function ln(v,r){const d=1<<v.z;return!r&&(0===v.x||v.x===d-1)||0===v.y||v.y===d-1}const Fn=v=>({u_matrix:v});function Gn(v,r,d,b,M){if(M>0){const R=l.e.now(),N=(R-v.timeAdded)/M,H=r?(R-r.timeAdded)/M:-1,ee=d.getSource(),se=b.coveringZoomLevel({tileSize:ee.tileSize,roundZoom:ee.roundZoom}),he=!r||Math.abs(r.tileID.overscaledZ-se)>Math.abs(v.tileID.overscaledZ-se),ye=he&&v.refreshedUponExpiration?1:l.at(he?N:1-H,0,1);return v.refreshedUponExpiration&&N>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ye}:{opacity:ye,mix:0}}return{opacity:1,mix:0}}class Mi extends uu{constructor(r,d,b,M){super(r,d,b,M),this.type="raster-array",this.maxzoom=22,this._options=l.W({type:"raster-array"},d)}triggerRepaint(r){const d=this.map.painter._terrain,b=this.map.style.getSourceCache(this.id);d&&d.enabled&&b&&d._clearRenderCacheForTile(b.id,r.tileID),this.map.triggerRepaint()}loadTile(r,d){const b=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),M=this.map._requestManager.transformRequest(b,l.R.Tile);r.requestParams=M,r.actor||(r.actor=this.dispatcher.getActor()),r.request=r.fetchHeader(void 0,(R,N,H,ee)=>(delete r.request,r.aborted?(r.state="unloaded",d(null)):R?20===R.code?void 0:(r.state="errored",d(R)):(this.map._refreshExpiredTiles&&r.setExpiryData({cacheControl:H,expires:ee}),r.state="empty",void d(null))))}unloadTile(r,d){const b=r.texture;b&&b instanceof l.T?(r.destroy(!0),this.map.painter.saveTileTexture(b)):(r.destroy(),r.flushQueues(),r._isHeaderLoaded=!1,delete r._mrt,delete r.textureDescriptor),r.fbo&&(r.fbo.destroy(),delete r.fbo),delete r.request,delete r.requestParams,delete r.neighboringTiles,r.state="unloaded"}prepareTile(r,d,b){r._isHeaderLoaded&&("empty"!==r.state&&(r.state="reloading"),r.fetchBand(d,b,(M,R)=>{if(M)return r.state="errored",this.fire(new l.d(M)),void this.triggerRepaint(r);R&&(r.setTexture(R,this.map.painter),r.state="loaded",this.triggerRepaint(r))}))}getInitialBand(r){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:R})=>R===r),b=d&&d.fields,M=b&&b.bands&&b.bands;return M?M[0]:0}getTextureDescriptor(r,d,b){if(!r)return;const M=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!M)return;let R=null;d instanceof l.bk?R=d.paint.get("raster-array-band"):d instanceof l.bl&&(R=d.paint.get("raster-particle-array-band"));const N=R||this.getInitialBand(M);if(null!=N)if(r.textureDescriptor){if(!r.updateNeeded(M,N)||b)return Object.assign({},r.textureDescriptor,{texture:r.texture})}else this.prepareTile(r,M,N)}}const Li={vector:vc,raster:uu,"raster-dem":class extends uu{constructor(v,r,d,b){super(v,r,d,b),this.type="raster-dem",this.maxzoom=22,this._options=l.W({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(v,r){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(M,R){M&&(v.state="errored",r(M)),R&&(v.dem=R,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",r(null))}v.request=l.h(this.map._requestManager.transformRequest(d,l.R.Tile),function(M,R,N,H){if(delete v.request,v.aborted)v.state="unloaded",r(null);else if(M)v.state="errored",r(M);else if(R){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:N,expires:H});const ee=ImageBitmap&&R instanceof ImageBitmap&&l.bi(),se=1-(R.width-l.bj(R.width))/2;se<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const he=ee?R:l.e.getImageData(R,se),ye={uid:v.uid,coord:v.tileID,source:this.id,scope:this.scope,rawImageData:he,encoding:this.encoding,padding:se};v.actor&&"expired"!==v.state||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",ye,b.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(v){const r=v.canonical,d=Math.pow(2,r.z),b=(r.x-1+d)%d,M=0===r.x?v.wrap-1:v.wrap,R=(r.x+1+d)%d,N=r.x+1===d?v.wrap+1:v.wrap,H={};return H[new l.aL(v.overscaledZ,M,r.z,b,r.y).key]={backfilled:!1},H[new l.aL(v.overscaledZ,N,r.z,R,r.y).key]={backfilled:!1},r.y>0&&(H[new l.aL(v.overscaledZ,M,r.z,b,r.y-1).key]={backfilled:!1},H[new l.aL(v.overscaledZ,v.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},H[new l.aL(v.overscaledZ,N,r.z,R,r.y-1).key]={backfilled:!1}),r.y+1<d&&(H[new l.aL(v.overscaledZ,M,r.z,b,r.y+1).key]={backfilled:!1},H[new l.aL(v.overscaledZ,v.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},H[new l.aL(v.overscaledZ,N,r.z,R,r.y+1).key]={backfilled:!1}),H}},"raster-array":Mi,geojson:class extends l.E{constructor(v,r,d,b){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(b),this._data=r.data,this._options=l.W({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),void 0!==r.minzoom&&(this.minzoom=r.minzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const M=l.a3/this.tileSize;this.workerOptions=l.W({source:this.id,scope:this.scope,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*M,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*M,extent:l.a3,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:l.a3,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*M,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter,dynamic:r.dynamic},r.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}updateData(v){return this._options.dynamic?"string"!=typeof v&&("Feature"===v.type&&(v={type:"FeatureCollection",features:[v]}),"FeatureCollection"!==v.type)?this.fire(new l.d(new Error("Data to update should be a feature or a feature collection."))):(this._coalesce&&"string"!=typeof v&&"string"!=typeof this._data&&"FeatureCollection"===this._data.type?this._data.features.push(...v.features):this._data=v,this._updateWorkerData(!0),this):this.fire(new l.d(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")))}getClusterExpansionZoom(v,r){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id,scope:this.scope},r),this}getClusterChildren(v,r){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id,scope:this.scope},r),this}getClusterLeaves(v,r,d,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:v,limit:r,offset:d},b),this}_updateWorkerData(v=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new l.f("dataloading",{dataType:"source"})),this._loaded=!1;const r=l.W({append:v},this.workerOptions);r.scope=this.scope;const d=this._data;"string"==typeof d?(r.request=this.map._requestManager.transformRequest(l.e.resolveURL(d),l.R.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,r,(b,M)=>{if(this._loaded=!0,this._pendingLoad=null,b)this.fire(new l.d(b));else{const R={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&M&&M.resourceTiming&&M.resourceTiming[this.id]&&(R.resourceTiming=M.resourceTiming[this.id]),v&&(this._partialReload=!0),this.fire(new l.f("data",R)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(v),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(v,r){const d=v.actor?"reloadTile":"loadTile";v.actor=this.actor;const b=this.map.style?this.map.style.getLut(this.scope):null,M=this._partialReload,R={type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:b?{image:b.image.clone()}:null,scope:this.scope,pixelRatio:l.e.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:M};v.request=this.actor.send(d,R,(N,H)=>M&&!H?(v.state="loaded",r(null)):(delete v.request,v.destroy(),v.aborted?r(null):N?r(N):(v.loadVectorData(H,this.map.painter,"reloadTile"===d),r(null))),void 0,"loadTile"===d)}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v,r){this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id,scope:this.scope}),v.destroy()}onRemove(v){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return l.W({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends l.bm{constructor(v,r,d,b){super(v,r,d,b),this.roundZoom=!0,this.type="video",this.options=r}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const r of v.urls)this.urls.push(this.map._requestManager.transformRequest(r,l.R.Source).url);l.bn(this.urls,(r,d)=>{this._loaded=!0,r?this.fire(new l.d(r)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const r=this.video.seekable;v<r.start(0)||v>r.end(0)?this.fire(new l.d(new l.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const v=this.map.painter.context,r=v.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new l.T(v,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:l.bm,model:class extends l.E{constructor(v,r,d,b){super(),this.id=v,this.type="model",this.models=[],this._loaded=!1,this._options=r}load(){const v=[];for(const r in this._options.models){const d=this._options.models[r],b=l.l(this.map._requestManager.transformRequest(d.uri,l.R.Model).url).then(M=>{if(!M)return;const R=l.c(M),N=new l.M(r,d.position,d.orientation,R);N.computeBoundsAndApplyParent(),this.models.push(N)}).catch(M=>{this.fire(new l.d(new Error(`Could not load model ${r} from ${d.uri}: ${M.message}`)))});v.push(b)}return Promise.allSettled(v).then(()=>{this._loaded=!0,this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(r=>{this.fire(new l.d(new Error(`Could not load models: ${r.message}`)))})}onAdd(v){this.map=v,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(v,r){}serialize(){return{type:"model"}}},"batched-model":class extends l.E{constructor(v,r,d,b){super(),this.type="batched-model",this.id=v,this.tileSize=512,this._options=r,this.tiles=this._options.tiles,this.maxzoom=r.maxzoom||19,this.minzoom=r.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(b)}onAdd(v){this.map=v,this.load()}load(v){this._loaded=!1,this.fire(new l.f("dataloading",{dataType:"source"}));const r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map._worldview;this._tileJSONRequest=gc(this._options,this.map._requestManager,r,d,(b,M)=>{this._tileJSONRequest=null,this._loaded=!0,b?(r&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${r}`),d&&2!==d.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new l.d(b))):M&&(l.W(this,M),M.bounds&&(this.tileBounds=new Gl(M.bounds,this.minzoom,this.maxzoom)),l.an(M.tiles,this.map._requestManager._customAccessToken),this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))),v&&v(b)})}hasTransition(){return!1}hasTile(v){return!this.tileBounds||this.tileBounds.contains(v.canonical)}loaded(){return this._loaded}loadTile(v,r){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(d,l.R.Tile),data:void 0,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,tileSize:this.tileSize*v.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:v.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(v.actor&&"expired"!==v.state)if("loading"===v.state)v.reloadCallback=r;else{if(v.buckets){const R=Object.values(v.buckets);for(const N of R)N.dirty=!0;return void(v.state="loaded")}v.request=v.actor.send("reloadTile",b,M.bind(this))}else v.actor=this.dispatcher.getActor(),v.request=v.actor.send("loadTile",b,M.bind(this),void 0,!0);function M(R,N){return v.aborted?r(null):R&&404!==R.status?r(R):(N&&(N.resourceTiming&&(v.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&v.setExpiryData(N),v.buckets={...v.buckets,...N.buckets},N.featureIndex&&(v.latestFeatureIndex=N.featureIndex)),v.state="loaded",void r(null))}}serialize(){return l.W({},this._options)}},canvas:class extends l.bm{constructor(v,r,d,b){super(v,r,d,b),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(M=>!Array.isArray(M)||2!==M.length||M.some(R=>"number"!=typeof R))||this.fire(new l.d(new l.V(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.d(new l.V(`sources.${v}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new l.d(new l.V(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof HTMLCanvasElement||this.fire(new l.d(new l.V(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.d(new l.V(`sources.${v}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.d(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(v){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const r=this.map.painter.context;this.texture?!v&&!this._playing||this.texture instanceof l.bo||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.T(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends l.E{constructor(v,r,d,b){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=r,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new l.d(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new l.d(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Gl(this._implementation.bounds,this.minzoom,this.maxzoom)),r.update=this._update.bind(this),r.clearTiles=this._clearTiles.bind(this),r.coveringTiles=this._coveringTiles.bind(this),l.W(this,l.ah(r,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return l.ah(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this.map=v,this._loaded=!1,this.fire(new l.f("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:r,y:d,z:b}=v.canonical;return this._implementation.hasTile({x:r,y:d,z:b})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,r){const{x:d,y:b,z:M}=v.tileID.canonical,R=new AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:d,y:b,z:M},{signal:R.signal})).then(function(N){return delete v.request,v.aborted?(v.state="unloaded",r(null)):void 0===N?(v.state="errored",r(null)):null===N?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",r(null)):(H=N)instanceof ImageData||H instanceof HTMLCanvasElement||H instanceof ImageBitmap||H instanceof HTMLImageElement?(this.loadTileData(v,N),v.state="loaded",void r(null)):(v.state="errored",r(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var H}.bind(this)).catch(N=>{20!==N.code&&(v.state="errored",r(N))}),v.request.cancel=()=>R.abort()}loadTileData(v,r){v.setTexture(r,this.map.painter)}unloadTile(v,r){if(v.texture&&v.texture instanceof l.T?(v.destroy(!0),v.texture&&v.texture instanceof l.T&&this.map.painter.saveTileTexture(v.texture)):v.destroy(),this._implementation.unloadTile){const{x:d,y:b,z:M}=v.tileID.canonical;this._implementation.unloadTile({x:d,y:b,z:M})}r&&r()}abortTile(v,r){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),r&&r()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z}))}_clearTiles(){const v=l.al(this.id,this.scope);this.map.style.clearSource(v)}_update(){this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))}}},ki=function(v,r,d,b){const M=new Li[r.type](v,r,d,b);if(M.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${M.id}`);return l.bp(["load","abort","unload","serialize","prepare"],M),M};class ao extends l.bv{constructor(r){const d={type:"raster-dem",maxzoom:r.transform.maxZoom},b=new l.bw(l.bx(),null),M=ki("mock-dem",d,b,r.style);super("mock-dem",M,!1),M.setEventedParent(this),this._sourceLoaded=!0}_loadTile(r,d){r.state="loaded",d(null)}}class Ko extends l.bv{constructor(r){const d=ki("proxy",{type:"geojson",maxzoom:r.transform.maxZoom},new l.bw(l.bx(),null),r.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=r,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(r,d,b){if(r.freezeTileCoverage)return;this.transform=r;const M=r.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((R,N)=>{if(R[N.key]="",!this._tiles[N.key]){const H=new l.by(N,this._source.tileSize*N.overscaleFactor(),r.tileZoom);H.state="loaded",this._tiles[N.key]=H}return R},{});for(const R in this._tiles)R in M||(this.freeFBO(R),this._tiles[R].unloadVectorData(),delete this._tiles[R])}freeFBO(r){const d=this.proxyCachedFBO[r];if(void 0!==d){const b=Object.values(d);this.renderCachePool.push(...b),delete this.proxyCachedFBO[r]}}deallocRenderCache(){this.renderCache.forEach(r=>r.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class sr extends l.aL{constructor(r,d,b){super(r.overscaledZ,r.wrap,r.canonical.z,r.canonical.x,r.canonical.y),this.proxyTileKey=d,this.projMatrix=b}}class gr extends l.bq{constructor(r,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},r.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),r.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),r.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=r,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,M,R]=function(ee){const se=new l.bt,he=new l.bu;se.reserve(17161),he.reserve(33800);const Pe=l.a3/128,Fe=l.a3+Pe/2,Qe=Fe+Pe;for(let tt=-Pe;tt<Qe;tt+=Pe)for(let rt=-Pe;rt<Qe;rt+=Pe){const Pt=rt<0||rt>Fe||tt<0||tt>Fe?24575:0,Bt=l.at(Math.round(rt),0,l.a3),Ft=l.at(Math.round(tt),0,l.a3);se.emplaceBack(Bt+Pt,Ft)}const Je=(tt,rt)=>{const Pt=131*rt+tt;he.emplaceBack(Pt+1,Pt,Pt+131),he.emplaceBack(Pt+131,Pt+131+1,Pt+1)};for(let tt=1;tt<129;tt++)for(let rt=1;rt<129;rt++)Je(rt,tt);return[0,129].forEach(tt=>{for(let rt=0;rt<130;rt++)Je(rt,tt),Je(tt,rt)}),[se,he,32768]}(),N=r.context;this.gridBuffer=N.createVertexBuffer(b,l.br.members),this.gridIndexBuffer=N.createIndexBuffer(M),this.gridSegments=l.b.simpleSegment(0,0,b.length,M.length),this.gridNoSkirtSegments=l.b.simpleSegment(0,0,b.length,R),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ko(d.map),this.orthoMatrix=l.ad.create(),l.ad.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,l.a3,0,l.a3,0,1);const H=N.gl;this._overlapStencilMode=new l.ag({func:H.GEQUAL,mask:255},0,255,H.KEEP,H.KEEP,H.REPLACE),this._previousZoom=r.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ao(d.map),this._pendingGroundEffectLayers=[]}set style(r){r.on("data",this._onStyleDataEvent.bind(this)),this._style=r,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(r,d,b){if(r&&r.terrain){this._style!==r&&(this.style=r,this._evaluationZoom=void 0);const M=r.terrain.properties,R=0===r.terrain.drapeRenderMode,N=r.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=l.e.now();const H=r.terrain&&r.terrain.scope,ee=M.get("source"),se=R?this._mockSourceCache:r.getSourceCache(ee,H);if(!se)return void l.w(`Couldn't find terrain source "${ee}".`);if(this.sourceCache=se,this._exaggeration=N?this.calculateExaggeration(d):M.get("exaggeration"),!d.projection.requiresDraping&&N&&0===this._exaggeration)return void this._disable();this.enabled=!0;const he=()=>{this.sourceCache.used&&l.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const ye=this.getScaledDemTileSize();this.sourceCache.update(d,ye,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,he(),this._initializing=!0),he(),d.updateElevation(!0,b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(r){const d=this._previousCameraAltitude,b=r.getFreeCameraOptions().position.z/r.pixelsPerMeter*r.worldSize;this._previousCameraAltitude=b;const M=null!=d?b-d:Number.MAX_VALUE;if(Math.abs(M)<2)return this._exaggeration;const R=r.zoom,N=this._style.terrain;if(!this._previousUpdateTimestamp)return N.getExaggeration(R);let H=R-this._previousZoom;const ee=this._previousUpdateTimestamp;let se=R;null!=this._evaluationZoom&&(se=this._evaluationZoom,Math.abs(R-se)>.5&&(H=.5*(R-se+H)),H*M<0&&(se+=H)),this._evaluationZoom=se;const he=N.getExaggeration(se),ye=he===N.getExaggeration(Math.max(0,se-.1));if(ye&&Math.abs(he-this._exaggeration)<.01)return he;let Pe=Math.min(.1,.00375*(this._updateTimestamp-ee));return(ye||he<.1||Math.abs(H)<1e-4)&&(Pe=Math.min(.2,4*Pe)),l.a2(this._exaggeration,he,Pe)}resetTileLookupCache(r){this._findCoveringTileCache[r]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(r){r.coord&&"source"===r.dataType?this._clearRenderCacheForTile(r.sourceCacheId,r.coord):"style"===r.dataType&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const r in this._style._mergedSourceCaches)this._style._mergedSourceCaches[r].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(r=>r.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const r=2*this.proxySourceCache.getSource().tileSize;return[r,r]}set useVertexMorphing(r){this._useVertexMorphing=r}updateTileBinding(r){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=0===b._centerAltitude&&-1===this.getAtPointOrZero(l.Y.fromLngLat(b.center),-1),this._emptyDEMTextureDirty=!this._initializing);const M=this.proxyCoords=d.getIds().map(ee=>{const se=d.getTileByID(ee).tileID;return se.projMatrix=b.calculateProjMatrix(se.toUnwrapped()),se});!function(ee,se){const he=se.transform.pointCoordinate(se.transform.getCameraPoint()),ye=new l.P(he.x,he.y);ee.sort((Pe,Fe)=>{if(Fe.overscaledZ-Pe.overscaledZ)return Fe.overscaledZ-Pe.overscaledZ;const Qe=new l.P(Pe.canonical.x+(1<<Pe.canonical.z)*Pe.wrap,Pe.canonical.y),Je=new l.P(Fe.canonical.x+(1<<Fe.canonical.z)*Fe.wrap,Fe.canonical.y),tt=ye.mult(1<<Pe.canonical.z);return tt.x-=.5,tt.y-=.5,tt.distSqr(Qe)-tt.distSqr(Je)})}(M,this.painter);const R=this.proxyToSource||{};this.proxyToSource={},M.forEach(ee=>{this.proxyToSource[ee.key]={}}),this.terrainTileForTile={};const N=this._style._mergedSourceCaches;for(const ee in N){const se=N[ee];if(!se.used||(se!==this.sourceCache&&this.resetTileLookupCache(se.id),this._setupProxiedCoordsForOrtho(se,r[ee],R),se.usedForTerrain))continue;const he=r[ee];se.getSource().reparseOverscaled&&this._assignTerrainTiles(he)}this.proxiedCoords[d.id]=M.map(ee=>new sr(ee,ee.key,this.orthoMatrix)),this._assignTerrainTiles(M),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(R),this.renderingToTexture=!1;const H={};this._visibleDemTiles=[];for(const ee of this.proxyCoords){const se=this.terrainTileForTile[ee.key];if(!se)continue;const he=se.tileID.key;he in H||(this._visibleDemTiles.push(se),H[he]=he)}}_assignTerrainTiles(r){this._initializing||r.forEach(d=>{if(this.terrainTileForTile[d.key])return;const b=this._findTileCoveringTileID(d,this.sourceCache);b&&(this.terrainTileForTile[d.key]=b)})}_prepareDEMTextures(){const r=this.painter.context,d=r.gl;for(const b in this.terrainTileForTile){const M=this.terrainTileForTile[b],R=M.dem;!R||M.demTexture&&!M.needsDEMTextureUpload||(r.activeTexture.set(d.TEXTURE1),lc(this.painter,M,R))}}_prepareDemTileUniforms(r,d,b,M){if(!d||null==d.demTexture)return!1;const R=r.tileID.canonical,N=Math.pow(2,d.tileID.canonical.z-R.z),H=M||"";return b[`u_dem_tl${H}`]=[R.x*N%1,R.y*N%1],b[`u_dem_scale${H}`]=N,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const r=this.painter.context,d=r.gl;if(!this._emptyDepthBufferTexture){const b=new l.i({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new l.T(r,b,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let r=0;const d=this._visibleDemTiles.reduce((b,M)=>{if(!M.dem)return b;const R=M.dem.tree.minimums[0];return R>0&&r++,b+R},0);return r?d/r:0}_updateEmptyDEMTexture(){const r=this.painter.context,d=r.gl;r.activeTexture.set(d.TEXTURE2);const b=this._getLoadedAreaMinimum(),[M,R]=(()=>{const H=new l.bz({width:1,height:1},new Float32Array([b]));return[d.R32F,H]})();this._emptyDEMTextureDirty=!1;let N=this._emptyDEMTexture;return N?N.update(R,{premultiply:!1}):N=this._emptyDEMTexture=new l.T(r,R,M,{premultiply:!1}),N}setupElevationDraw(r,d,b){const M=this.painter.context,R=M.gl,N={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[2,0],u_exaggeration:0};N.u_exaggeration=this.exaggeration();let H=null,ee=null,se=1;if(b&&b.morphing&&this._useVertexMorphing){const Qe=b.morphing.srcDemTile,Je=b.morphing.dstDemTile;se=b.morphing.phase,Qe&&Je&&(this._prepareDemTileUniforms(r,Qe,N,"_prev")&&(ee=Qe),this._prepareDemTileUniforms(r,Je,N)&&(H=Je))}const he=Qe=>Qe&&Qe.demTexture&&this.painter.linearFloatFilteringSupported()?R.LINEAR:R.NEAREST;let ye=null;var Pe,Fe;if(this.enabled?ee&&H?(ye=H.demTexture,M.activeTexture.set(R.TEXTURE4),ee.demTexture.bind(he(ee),R.CLAMP_TO_EDGE),N.u_dem_lerp=se):(H=this.terrainTileForTile[r.tileID.key],ye=this._prepareDemTileUniforms(r,H,N)?H.demTexture:this.emptyDEMTexture):ye=this.emptyDEMTexture,M.activeTexture.set(R.TEXTURE2),ye&&(N.u_dem_size=1===(Pe=ye).size[0]?1:Pe.size[0]-2,ye.bind(he(H),R.CLAMP_TO_EDGE)),M.activeTexture.set(R.TEXTURE3),b&&b.useDepthForOcclusion&&this.painter.terrainDepthTexture&&this.painter.terrainDepthFBO?(this.painter.terrainDepthTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE),N.u_depth_size_inv=[1/this.painter.terrainDepthFBO.width,1/this.painter.terrainDepthFBO.height],N.u_depth_range_unpack=[2/((Fe=this.painter.depthRangeFor3D)[1]-Fe[0]),-1-2*Fe[0]/(Fe[1]-Fe[0])]):(this.emptyDepthBufferTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE),N.u_depth_range_unpack=[2,0]),M.activeTexture.set(R.TEXTURE0),b&&b.useMeterToDem&&H){const Qe=(1<<H.tileID.canonical.z)*l.ax(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;N.u_meter_to_dem=Qe}if(b&&b.labelPlaneMatrixInv&&(N.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),d.setTerrainUniformValues(M,N),"globe"===this.painter.transform.projection.name){const Qe=this.globeUniformValues(this.painter.transform,r.tileID.canonical,b&&b.useDenormalizedUpVectorScale);d.setGlobeUniformValues(M,Qe)}}globeUniformValues(r,d,b){const M=r.projection;return{u_tile_tl_up:M.upVector(d,0,0),u_tile_tr_up:M.upVector(d,l.a3,0),u_tile_br_up:M.upVector(d,l.a3,l.a3),u_tile_bl_up:M.upVector(d,0,l.a3),u_tile_up_scale:b?l.bs(1):M.upVectorScale(d,r.center.lat,r.worldSize).metersToTile}}renderToBackBuffer(r){const d=this.painter,b=this.painter.context;0!==r.length&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(M,R,N,H,ee){if("globe"===M.transform.projection.name)!function(se,he,ye,Pe,Fe){const Qe=se.context,Je=Qe.gl;let tt,rt;const Pt=se.transform,Bt=l.ba(se,Qe,Pt),Ft=(mn,_i)=>{if(rt===_i)return;const eo=[qe[_i],"PROJECTION_GLOBE_VIEW"];Bt&&eo.push("CUSTOM_ANTIALIASING");const io=se.isTileAffectedByFog(mn);tt=se.getOrCreateProgram("globeRaster",{defines:eo,overrideFog:io}),rt=_i},tn=se.colorModeForRenderPass(),en=new l.ae(Je.LEQUAL,l.ae.ReadWrite,se.depthRangeFor3D);Le.update(Fe);const _n=l.bb(Pt),at=[l.aj(Pt.center.lng),l.ak(Pt.center.lat)],$t=se.globeSharedBuffers,Tn=[Pt.width*l.e.devicePixelRatio,Pt.height*l.e.devicePixelRatio],ci=Float32Array.from(Pt.globeMatrix),zn={useDenormalizedUpVectorScale:!0};{const mn=se.transform,_i=St(mn.zoom,he.exaggeration(),he.sourceCache._source.tileSize);rt=-1;const eo=Je.TRIANGLES;for(const io of Pe){const ie=ye.getTile(io),L=l.ag.disabled,j=he.prevTerrainTileForTile[io.key],oe=he.terrainTileForTile[io.key];sd(j,oe)&&Le.newMorphing(io.key,j,oe,Fe,250),Qe.activeTexture.set(Je.TEXTURE0),ie.texture&&ie.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE);const Ve=Le.getMorphValuesForProxy(io.key),lt=Ve?1:0;Ve&&l.o(zn,{morphing:{srcDemTile:Ve.from,dstDemTile:Ve.to,phase:l.b9(Ve.phase)}});const cn=l.bc(io.canonical),hn=l.bd(cn.getCenter().lat),Qn=l.be(io.canonical,cn,hn,mn.worldSize/mn._pixelsPerMercatorPixel),Wn=l.bf(l.bg(io.canonical)),Wi=Io(mn.expandedFarZProjMatrix,ci,_n,Wn,l.a1(mn.zoom),at,mn.frustumCorners.TL,mn.frustumCorners.TR,mn.frustumCorners.BR,mn.frustumCorners.BL,mn.globeCenterInViewSpace,mn.globeRadius,Tn,_i,mn._farZ,Qn);if(Ft(io,lt),tt&&(he.setupElevationDraw(ie,tt,zn),se.uploadCommonUniforms(Qe,tt,io.toUnwrapped()),$t)){const[vr,Sr,Mr]=$t.getGridBuffers(hn,0!==_i);tt.draw(se,eo,en,L,tn,l.af.backCCW,Wi,"globe_raster",vr,Sr,Mr)}}}if($t&&(se.renderDefaultNorthPole||se.renderDefaultSouthPole)){const mn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Bt&&mn.push("CUSTOM_ANTIALIASING"),tt=se.getOrCreateProgram("globeRaster",{defines:mn});for(const _i of Pe){const{x:eo,y:io,z:ie}=_i.canonical,L=0===io,j=io===(1<<ie)-1,[oe,Ve,lt,cn]=$t.getPoleBuffers(ie,!1);if(cn&&(L||j)){const hn=ye.getTile(_i);Qe.activeTexture.set(Je.TEXTURE0),hn.texture&&hn.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE);let Qn=l.bh(ie,eo,Pt);const Wn=l.bf(l.bg(_i.canonical)),Wi=(vr,Sr)=>vr.draw(se,Je.TRIANGLES,en,l.ag.disabled,tn,l.af.disabled,Io(Pt.expandedFarZProjMatrix,Qn,Qn,Wn,0,at,Pt.frustumCorners.TL,Pt.frustumCorners.TR,Pt.frustumCorners.BR,Pt.frustumCorners.BL,Pt.globeCenterInViewSpace,Pt.globeRadius,Tn,0,Pt._farZ),"globe_pole_raster",Sr,lt,cn);he.setupElevationDraw(hn,tt,zn),se.uploadCommonUniforms(Qe,tt,_i.toUnwrapped()),L&&se.renderDefaultNorthPole&&Wi(tt,oe),j&&se.renderDefaultSouthPole&&(Qn=l.ad.scale(l.ad.create(),Qn,[1,-1,1]),Wi(tt,Ve))}}}}(M,R,N,H,ee);else{const se=M.context,he=se.gl;let ye,Pe;const Fe=M.shadowRenderer,Qe=Yc(M,M.longestCutoffRange),Je=tn=>{if(Pe===tn)return;const en=[];en.push(qe[tn]),Qe.shouldRenderCutoff&&en.push("RENDER_CUTOFF"),ye=M.getOrCreateProgram("terrainRaster",{defines:en}),Pe=tn},tt=M.colorModeForRenderPass(),rt=new l.ae(he.LEQUAL,l.ae.ReadWrite,M.depthRangeFor3D);Le.update(ee);const Pt=M.transform,Bt=St(Pt.zoom,R.exaggeration(),R.sourceCache._source.tileSize);let Ft=[0,0,0];if(Fe){const tn=M.style.directionalLight,en=M.style.ambientLight;tn&&en&&(Ft=uc(M.style,tn,en))}{Pe=-1;const tn=he.TRIANGLES,[en,_n]=[R.gridIndexBuffer,R.gridSegments];for(const at of H){const $t=N.getTile(at),Tn=l.ag.disabled,ci=R.prevTerrainTileForTile[at.key],zn=R.terrainTileForTile[at.key];sd(ci,zn)&&Le.newMorphing(at.key,ci,zn,ee,250),se.activeTexture.set(he.TEXTURE0),$t.texture&&$t.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);const mn=Le.getMorphValuesForProxy(at.key),_i=mn?1:0;let eo;mn&&(eo={morphing:{srcDemTile:mn.from,dstDemTile:mn.to,phase:l.b9(mn.phase)}});const io=du(at.projMatrix,ln(at.canonical,Pt.renderWorldCopies)?Bt/10:Bt,Ft);if(Je(_i),!ye)continue;R.setupElevationDraw($t,ye,eo);const ie=at.toUnwrapped();Fe&&Fe.setupShadows(ie,ye),M.uploadCommonUniforms(se,ye,ie,null,Qe),ye.draw(M,tn,rt,Tn,tt,l.af.backCCW,io,"terrain_raster",R.gridBuffer,en,_n)}}}}(d,this,this.proxySourceCache,r,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),r.splice(0,r.length))}renderBatch(r){if(0===this._drapedRenderBatches.length)return r+1;this.renderingToTexture=!0;const d=this.painter,b=this.painter.context,M=this.proxySourceCache,R=this.proxiedCoords[M.id],N=this._drapedRenderBatches.shift(),H=d.style.order,ee=[];let se=0;for(const he of R){const ye=M.getTileByID(he.proxyTileKey),Pe=M.proxyCachedFBO[he.key]?M.proxyCachedFBO[he.key][r]:void 0,Fe=void 0!==Pe?M.renderCache[Pe]:this.pool[se++],Qe=void 0!==Pe;if(ye.texture=Fe.tex,Qe&&!Fe.dirty){ee.push(ye.tileID);continue}let Je;b.bindFramebuffer.set(Fe.fb.framebuffer),this.renderedToTile=!1,Fe.dirty&&(b.clear({color:l.C.transparent,stencil:0}),Fe.dirty=!1);for(let tt=N.start;tt<=N.end;++tt){const rt=d.style._mergedLayers[H[tt]];if(rt.isHidden(d.transform.zoom))continue;const Pt=d.style.getLayerSourceCache(rt),Bt=Pt?this.proxyToSource[he.key][Pt.id]:[he];if(!Bt)continue;const Ft=Bt;b.viewport.set([0,0,Fe.fb.width,Fe.fb.height]),Je!==(Pt?Pt.id:null)&&(this._setupStencil(Fe,Bt,rt,Pt),Je=Pt?Pt.id:null),d.renderLayer(d,Pt,rt,Ft)}if(0===this._drapedRenderBatches.length)for(const tt of this._pendingGroundEffectLayers){const rt=d.style._mergedLayers[H[tt]];if(rt.isHidden(d.transform.zoom))continue;const Pt=d.style.getLayerSourceCache(rt),Bt=Pt?this.proxyToSource[he.key][Pt.id]:[he];if(!Bt)continue;const Ft=Bt;b.viewport.set([0,0,Fe.fb.width,Fe.fb.height]),Je!==(Pt?Pt.id:null)&&(this._setupStencil(Fe,Bt,rt,Pt),Je=Pt?Pt.id:null),d.renderLayer(d,Pt,rt,Ft)}this.renderedToTile?(Fe.dirty=!0,ee.push(ye.tileID)):Qe||--se,5===se&&(se=0,this.renderToBackBuffer(ee))}return this.renderToBackBuffer(ee),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,d.width,d.height]),N.end+1}postRender(){}isLayerOrderingCorrect(r){const d=r.order.length;let b=-1,M=d;for(let R=0;R<d;++R)this._style.isLayerDraped(r._mergedLayers[r.order[R]])?b=Math.max(b,R):M=Math.min(M,R);return M>b}getMinElevationBelowMSL(){let r=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{r=Math.min(r,d.dem.tree.minimums[0])}),0===r?r:(r-30)*this._exaggeration}raycast(r,d,b){if(!this._visibleDemTiles)return null;const M=this._visibleDemTiles.filter(R=>R.dem).map(R=>{const N=R.tileID,H=1<<N.overscaledZ,{x:ee,y:se}=N.canonical,he=ee/H,ye=(ee+1)/H,Pe=se/H,Fe=(se+1)/H;return{minx:he,miny:Pe,maxx:ye,maxy:Fe,t:R.dem.tree.raycastRoot(he,Pe,ye,Fe,r,d,b),tile:R}});M.sort((R,N)=>(null!==R.t?R.t:Number.MAX_VALUE)-(null!==N.t?N.t:Number.MAX_VALUE));for(const R of M){if(null==R.t)return null;const N=R.tile.dem.tree.raycast(R.minx,R.miny,R.maxx,R.maxy,r,d,b);if(null!=N)return N}return null}_createFBO(){const r=this.painter.context,d=r.gl,b=this.drapeBufferSize;r.activeTexture.set(d.TEXTURE0);const M=new l.T(r,{width:b[0],height:b[1],data:null},d.RGBA);M.bind(d.LINEAR,d.CLAMP_TO_EDGE);const R=r.createFramebuffer(b[0],b[1],!0,null);return R.colorAttachment.set(M.texture),R.depthAttachment=new So(r,R.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=r.createRenderbuffer(r.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,R.depthAttachment.set(this._sharedDepthStencil),r.clear({stencil:0})):R.depthAttachment.set(this._sharedDepthStencil),r.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax),{fb:R,tex:M,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const r in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[r].hasTransition())return!0;return this._style.order.some(r=>{const d=this._style._mergedLayers[r],b=d.isHidden(this.painter.transform.zoom);return"custom"===d.type?!b&&d.shouldRedrape():!b&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let r=!1;for(const b of this._style.getSources())if(b instanceof vc){r=!0;break}if(!r)return;const d={};for(let b=0;b<this._style.order.length;++b){const M=this._style._mergedLayers[this._style.order[b]],R=this._style.getLayerSourceCache(M);if(R&&!d[R.id]&&!M.isHidden(this.painter.transform.zoom)&&"line"===M.type&&M.widthExpression()instanceof l.Z){d[R.id]=!0;for(const N of this.proxyCoords){const H=this.proxyToSource[N.key][R.id];if(H)for(const ee of H)this._clearRenderCacheForTile(R.id,ee)}}}}_clearRasterLayersFromRenderCache(){let r=!1;for(const b in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[b]._source instanceof uu){r=!0;break}if(!r)return;const d={};for(let b=0;b<this._style.order.length;++b){const M=this._style._mergedLayers[this._style.order[b]],R=this._style.getLayerSourceCache(M);if(!R||d[R.id]||M.isHidden(this.painter.transform.zoom)||"raster"!==M.type)continue;const N=M.paint.get("raster-fade-duration");for(const H of this.proxyCoords){const ee=this.proxyToSource[H.key][R.id];if(ee)for(const se of ee){const he=Gn(R.getTile(se),R.findLoadedParent(se,0),R,this.painter.transform,N);(1!==he.opacity||0!==he.mix)&&this._clearRenderCacheForTile(R.id,se)}}}}_setupDrapedRenderBatches(){const r=this._style.order,d=r.length;if(0===d)return;const b=[];this._pendingGroundEffectLayers=[];let M,R=0,N=this._style._mergedLayers[r[R]];for(;!this._style.isLayerDraped(N)&&N.isHidden(this.painter.transform.zoom)&&++R<d;)N=this._style._mergedLayers[r[R]];for(;R<d;++R){const H=this._style._mergedLayers[r[R]];H.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(H)?void 0===M&&(M=R):("fill-extrusion"===H.type&&this._pendingGroundEffectLayers.push(R),void 0!==M&&(b.push({start:M,end:R-1}),M=void 0)))}if(void 0!==M&&b.push({start:M,end:R-1}),0!==b.length){const H=b[b.length-1];this._pendingGroundEffectLayers.every(ee=>ee>H.end)||l.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=b}_setupRenderCache(r){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const N=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let H=0;H<N.length;++H){const ee=Object.values(N[H]);d.renderCachePool.push(...ee)}}return}this._clearRasterLayersFromRenderCache();const b=this.proxyCoords,M=this._tilesDirty;for(let N=b.length-1;N>=0;N--){const H=b[N];if(d.getTileByID(H.key),void 0!==d.proxyCachedFBO[H.key]){const ee=r[H.key],se=this.proxyToSource[H.key];let he=0;for(const ye in se){const Pe=se[ye],Fe=ee[ye];if(!Fe||Fe.length!==Pe.length||Pe.some((Qe,Je)=>Qe!==Fe[Je]||M[ye]&&M[ye].hasOwnProperty(Qe.key))){he=-1;break}++he}for(const ye in d.proxyCachedFBO[H.key])d.renderCache[d.proxyCachedFBO[H.key][ye]].dirty=he<0||he!==Object.values(ee).length}}const R=[...this._drapedRenderBatches];R.sort((N,H)=>H.end-H.start-(N.end-N.start));for(const N of R)for(const H of b){if(d.proxyCachedFBO[H.key])continue;let ee=d.renderCachePool.pop();void 0===ee&&d.renderCache.length<50&&(ee=d.renderCache.length,d.renderCache.push(this._createFBO())),void 0!==ee&&(d.proxyCachedFBO[H.key]={},d.proxyCachedFBO[H.key][N.start]=ee,d.renderCache[ee].dirty=!0)}this._tilesDirty={}}_setupStencil(r,d,b,M){if(!M||!this._sourceTilesOverlap[M.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const R=this.painter.context,N=R.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let H;if(b.isTileClipped())H=d.length,this._overlapStencilMode.test={func:N.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);H=1,this._overlapStencilMode.test={func:N.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+H>255&&(R.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=H,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(r){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[r.key]),this._overlapStencilMode):l.ag.disabled}_renderTileClippingMasks(r,d){const b=this.painter,M=this.painter.context,R=M.gl;b._tileClippingMaskIDs={},M.setColorMode(l.a.disabled),M.setDepthMode(l.ae.disabled);const N=b.getOrCreateProgram("clippingMask");for(const H of r){const ee=b._tileClippingMaskIDs[H.key]=--d;N.draw(b,R.TRIANGLES,l.ae.disabled,new l.ag({func:R.ALWAYS,mask:0},ee,255,R.KEEP,R.KEEP,R.REPLACE),l.a.disabled,l.af.disabled,Fn(H.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(r){const d=this.painter.transform;if(r.x<0||r.x>d.width||r.y<0||r.y>d.height)return null;const b=[r.x,r.y,1,1];l.aA.transformMat4(b,b,d.pixelMatrixInverse),l.aA.scale(b,b,1/b[3]),b[0]/=d.worldSize,b[1]/=d.worldSize;const M=d._camera.position,R=l.ax(1,d.center.lat),N=[M[0],M[1],M[2]/R,0],H=l._.subtract([],b.slice(0,3),N);l._.normalize(H,H);const ee=this.raycast(N,H,this._exaggeration);return null!==ee&&ee?(l._.scaleAndAdd(N,N,H,ee),N[3]=N[2],N[2]*=R,N):null}_setupProxiedCoordsForOrtho(r,d,b){if(r.getSource()instanceof l.bm)return this._setupProxiedCoordsForImageSource(r,d,b);this._findCoveringTileCache[r.id]=this._findCoveringTileCache[r.id]||{};const M=this.proxiedCoords[r.id]=[],R=this.proxyCoords;for(let ee=0;ee<R.length;ee++){const se=R[ee],he=this._findTileCoveringTileID(se,r);if(he){const ye=this._createProxiedId(se,he,b[se.key]&&b[se.key][r.id]);M.push(ye),this.proxyToSource[se.key][r.id]=[ye]}}let N=!1;const H=new Set;for(let ee=0;ee<d.length;ee++){const se=r.getTile(d[ee]);if(!se||!se.hasData())continue;const he=this._findTileCoveringTileID(se.tileID,this.proxySourceCache);if(he&&he.tileID.canonical.z!==se.tileID.canonical.z){const ye=this.proxyToSource[he.tileID.key][r.id],Pe=this._createProxiedId(he.tileID,se,b[he.tileID.key]&&b[he.tileID.key][r.id]);ye?ye.splice(ye.length-1,0,Pe):this.proxyToSource[he.tileID.key][r.id]=[Pe];const Fe=this.proxyToSource[he.tileID.key][r.id];H.has(Fe)||H.add(Fe),M.push(Pe),N=!0}}if(this._sourceTilesOverlap[r.id]=N,N&&this._debugParams.sortTilesHiZFirst)for(const ee of H)ee.sort((se,he)=>he.overscaledZ-se.overscaledZ)}_setupProxiedCoordsForImageSource(r,d,b){if(!r.getSource().loaded())return;const M=this.proxiedCoords[r.id]=[],R=this.proxyCoords,N=r.getSource(),H=N.tileID;if(!H)return;const ee=new l.P(H.x,H.y)._div(1<<H.z),se=N.coordinates.map(l.Y.fromLngLat).reduce((ye,Pe)=>(ye.min.x=Math.min(ye.min.x,Pe.x-ee.x),ye.min.y=Math.min(ye.min.y,Pe.y-ee.y),ye.max.x=Math.max(ye.max.x,Pe.x-ee.x),ye.max.y=Math.max(ye.max.y,Pe.y-ee.y),ye),{min:new l.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new l.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),he=(ye,Pe)=>{const Fe=ye.wrap+ye.canonical.x/(1<<ye.canonical.z),Qe=ye.canonical.y/(1<<ye.canonical.z),Je=l.a3/(1<<ye.canonical.z),tt=Pe.wrap+Pe.canonical.x/(1<<Pe.canonical.z),rt=Pe.canonical.y/(1<<Pe.canonical.z);return Fe+Je<tt+se.min.x||Fe>tt+se.max.x||Qe+Je<rt+se.min.y||Qe>rt+se.max.y};for(let ye=0;ye<R.length;ye++){const Pe=R[ye];for(let Fe=0;Fe<d.length;Fe++){const Qe=r.getTile(d[Fe]);if(!Qe||!Qe.hasData()||he(Pe,Qe.tileID))continue;const Je=this._createProxiedId(Pe,Qe,b[Pe.key]&&b[Pe.key][r.id]),tt=this.proxyToSource[Pe.key][r.id];tt?tt.push(Je):this.proxyToSource[Pe.key][r.id]=[Je],M.push(Je)}}}_createProxiedId(r,d,b){let M=this.orthoMatrix;if(b){const R=b.find(N=>N.key===d.tileID.key);if(R)return R}if(d.tileID.key!==r.key){const R=r.canonical.z-d.tileID.canonical.z;let N,H,ee;M=l.ad.create();const se=d.tileID.wrap-r.wrap<<r.overscaledZ;R>0?(N=l.a3>>R,H=N*((d.tileID.canonical.x<<R)-r.canonical.x+se),ee=N*((d.tileID.canonical.y<<R)-r.canonical.y)):(N=l.a3<<-R,H=l.a3*(d.tileID.canonical.x-(r.canonical.x+se<<-R)),ee=l.a3*(d.tileID.canonical.y-(r.canonical.y<<-R))),l.ad.ortho(M,0,N,0,N,0,1),l.ad.translate(M,M,[H,ee,0])}return new sr(d.tileID,r.key,M)}_findTileCoveringTileID(r,d){let b=d.getTile(r);if(b&&b.hasData())return b;const M=this._findCoveringTileCache[d.id],R=M[r.key];if(b=R?d.getTileByID(R):null,b&&b.hasData()||null===R)return b;let N=b?b.tileID:r,H=N.overscaledZ;const ee=d.getSource().minzoom,se=[];if(!R){const ye=d.getSource().maxzoom;if(r.canonical.z>=ye){const Pe=r.canonical.z-ye;d.getSource().reparseOverscaled?(H=Math.max(r.canonical.z+2,d.transform.tileZoom),N=new l.aL(H,r.wrap,ye,r.canonical.x>>Pe,r.canonical.y>>Pe)):0!==Pe&&(H=ye,N=new l.aL(H,r.wrap,ye,r.canonical.x>>Pe,r.canonical.y>>Pe))}N.key!==r.key&&(se.push(N.key),b=d.getTile(N))}const he=ye=>{se.forEach(Pe=>{M[Pe]=ye}),se.length=0};for(H-=1;H>=ee&&(!b||!b.hasData());H--){b&&he(b.tileID.key);const ye=N.calculateScaledKey(H);if(b=d.getTileByID(ye),b&&b.hasData())break;const Pe=M[ye];if(null===Pe)break;void 0===Pe?se.push(ye):b=d.getTileByID(Pe)}return he(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(r){return this.enabled?this._findTileCoveringTileID(r,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(r,d){let b=this._tilesDirty[r];b||(b=this._tilesDirty[r]={}),b[d.key]=!0}}function Xr(v,r,d){const b=function(H,ee,se){const he=l._.dot(ee,H),ye=l._.dot(se,[.2126,.7152,.0722]),Pe=(Qe,Je,tt)=>(1-tt)*Qe+tt*Je,Fe=Pe(1-.3*Math.min(ye,1),1,Math.min(he+1,1));return Pe(.92,1,Math.asin(l.at(ee[2],-1,1))/Math.PI+.5)*Fe}(v,[0,0,1],r),M=[0,0,0];l._.scale(M,d.slice(0,3),b);const R=[0,0,0];l._.scale(R,r.slice(0,3),v[2]);const N=[0,0,0];return l._.add(N,M,R),l.b8(N)}const sa=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],xl=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class ms{static cacheKey(r,d,b,M){let R=`${d}${M?M.cacheKey:""}`;for(const N of b)r.usedDefines.includes(N)&&(R+=`/${N}`);return R}constructor(r,d,b,M,R,N){const H=r.gl;this.program=H.createProgram(),this.configuration=M,this.name=d,this.fixedDefines=[...N];const ee=M?M.getBinderAttributes():[],se=(b.staticAttributes||[]).concat(ee);let he=M?M.defines():[];he=he.concat(N.map(tt=>`#define ${tt}`));const ye="#version 300 es\n";let Pe=ye+he.concat("precision mediump float;",$u,Vc.fragmentSource).join("\n");for(const tt of b.fragmentIncludes)Pe+=`\n${Ja[tt]}`;Pe+=`\n${b.fragmentSource}`;let Fe=ye+he.concat("precision highp float;",$u,Vc.vertexSource).join("\n");for(const tt of b.vertexIncludes)Fe+=`\n${Ja[tt]}`;Fe+=`\n${b.vertexSource}`;const Qe=H.createShader(H.FRAGMENT_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);H.shaderSource(Qe,Pe),H.compileShader(Qe),H.attachShader(this.program,Qe);const Je=H.createShader(H.VERTEX_SHADER);if(H.isContextLost())this.failedToCreate=!0;else{H.shaderSource(Je,Fe),H.compileShader(Je),H.attachShader(this.program,Je),this.attributes={},this.numAttributes=se.length;for(let tt=0;tt<this.numAttributes;tt++)if(se[tt]){const rt=se[tt].startsWith("a_")?se[tt]:`a_${se[tt]}`;H.bindAttribLocation(this.program,tt,rt),this.attributes[rt]=tt}H.linkProgram(this.program),H.deleteShader(Je),H.deleteShader(Qe),this.fixedUniforms=R(r),this.binderUniforms=M?M.getUniforms(r):[],N.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new l.a7(tt=r),u_dem_prev:new l.a7(tt),u_dem_tl:new l.a8(tt),u_dem_scale:new l.aa(tt),u_dem_tl_prev:new l.a8(tt),u_dem_scale_prev:new l.aa(tt),u_dem_size:new l.aa(tt),u_dem_lerp:new l.aa(tt),u_exaggeration:new l.aa(tt),u_depth:new l.a7(tt),u_depth_size_inv:new l.a8(tt),u_depth_range_unpack:new l.a8(tt),u_meter_to_dem:new l.aa(tt),u_label_plane_matrix_inv:new l.a6(tt)}),N.includes("GLOBE")&&(this.globeUniforms=(tt=>({u_tile_tl_up:new l.aq(tt),u_tile_tr_up:new l.aq(tt),u_tile_br_up:new l.aq(tt),u_tile_bl_up:new l.aq(tt),u_tile_up_scale:new l.aa(tt)}))(r)),N.includes("FOG")&&(this.fogUniforms=(tt=>({u_fog_matrix:new l.a6(tt),u_fog_range:new l.a8(tt),u_fog_color:new l.as(tt),u_fog_horizon_blend:new l.aa(tt),u_fog_vertical_limit:new l.a8(tt),u_fog_temporal_offset:new l.aa(tt),u_frustum_tl:new l.aq(tt),u_frustum_tr:new l.aq(tt),u_frustum_br:new l.aq(tt),u_frustum_bl:new l.aq(tt),u_globe_pos:new l.aq(tt),u_globe_radius:new l.aa(tt),u_globe_transition:new l.aa(tt),u_is_globe:new l.a7(tt),u_viewport:new l.a8(tt)}))(r)),N.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(tt=>({u_cutoff_params:new l.as(tt)}))(r)),N.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(tt=>({u_lighting_ambient_color:new l.aq(tt),u_lighting_directional_dir:new l.aq(tt),u_lighting_directional_color:new l.aq(tt),u_ground_radiance:new l.aq(tt)}))(r)),N.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(tt=>({u_light_matrix_0:new l.a6(tt),u_light_matrix_1:new l.a6(tt),u_fade_range:new l.a8(tt),u_shadow_normal_offset:new l.aq(tt),u_shadow_intensity:new l.aa(tt),u_shadow_texel_size:new l.aa(tt),u_shadow_map_resolution:new l.aa(tt),u_shadow_direction:new l.aq(tt),u_shadow_bias:new l.aq(tt),u_shadowmap_0:new l.a7(tt),u_shadowmap_1:new l.a7(tt)}))(r))}var tt}setTerrainUniformValues(r,d){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M]&&b[M].set(this.program,M,d[M])}}setGlobeUniformValues(r,d){if(!this.globeUniforms)return;const b=this.globeUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M]&&b[M].set(this.program,M,d[M])}}setFogUniformValues(r,d){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M].set(this.program,M,d[M])}}setCutoffUniformValues(r,d){if(!this.cutoffUniforms)return;const b=this.cutoffUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M].set(this.program,M,d[M])}}setLightsUniformValues(r,d){if(!this.lightsUniforms)return;const b=this.lightsUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M].set(this.program,M,d[M])}}setShadowUniformValues(r,d){if(this.failedToCreate||!this.shadowUniforms)return;const b=this.shadowUniforms;r.program.set(this.program);for(const M in d)b[M].set(this.program,M,d[M])}_drawDebugWireframe(r,d,b,M,R,N,H,ee,se,he){const ye=r.options.wireframe;if(!1===ye.terrain&&!1===ye.layers2D&&!1===ye.layers3D)return;const Pe=r.context;if(!(ye.terrain&&("terrainRaster"===this.name||"globeRaster"===this.name)||!(!ye.layers2D||r._terrain&&r._terrain.renderingToTexture)&&sa.includes(this.name)||ye.layers3D&&xl.includes(this.name)))return;const Fe=Pe.gl,Qe=r.wireframeDebugCache.getLinesFromTrianglesBuffer(r.frameCounter,R,Pe);if(!Qe)return;const Je=[...this.fixedDefines];Je.push("DEBUG_WIREFRAME");const tt=r.getOrCreateProgram(this.name,{config:this.configuration,defines:Je});Pe.program.set(tt.program);const rt=(Ft,tn,en)=>{if(tn[Ft]&&en[Ft])for(const _n in tn[Ft])en[Ft][_n]&&en[Ft][_n].set(en.program,_n,tn[Ft][_n].current)};se&&se.setUniforms(tt.program,Pe,tt.binderUniforms,H,{zoom:ee}),rt("fixedUniforms",this,tt),rt("terrainUniforms",this,tt),rt("globeUniforms",this,tt),rt("fogUniforms",this,tt),rt("lightsUniforms",this,tt),rt("shadowUniforms",this,tt),Qe.bind(),Pe.setColorMode(new l.a([Fe.ONE,Fe.ONE_MINUS_SRC_ALPHA,Fe.ZERO,Fe.ONE],l.C.transparent,[!0,!0,!0,!1])),Pe.setDepthMode(new l.ae(d.func===Fe.LESS?Fe.LEQUAL:d.func,l.ae.ReadOnly,d.range)),Pe.setStencilMode(l.ag.disabled);const Pt=3*N.primitiveLength*2,Bt=3*N.primitiveOffset*2*2;he&&he>1?Fe.drawElementsInstanced(Fe.LINES,Pt,Fe.UNSIGNED_SHORT,Bt,he):Fe.drawElements(Fe.LINES,Pt,Fe.UNSIGNED_SHORT,Bt),R.bind(),Pe.program.set(this.program),Pe.setDepthMode(d),Pe.setStencilMode(b),Pe.setColorMode(M)}draw(r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je,tt){const rt=r.context,Pt=rt.gl;if(this.failedToCreate)return;rt.program.set(this.program),rt.setDepthMode(b),rt.setStencilMode(M),rt.setColorMode(R),rt.setCullFace(N);for(const tn of Object.keys(this.fixedUniforms))this.fixedUniforms[tn].set(this.program,tn,H[tn]);Qe&&Qe.setUniforms(this.program,rt,this.binderUniforms,Pe,{zoom:Fe});const Bt={[Pt.POINTS]:1,[Pt.LINES]:2,[Pt.TRIANGLES]:3,[Pt.LINE_STRIP]:1}[d],Ft=tt&&tt>0?1:void 0;for(const tn of ye.get()){const en=tn.vaos||(tn.vaos={});(en[ee]||(en[ee]=new lu)).bind(rt,this,se,Qe?Qe.getPaintVertexBuffers():[],he,tn.vertexOffset,Je||[],Ft),tt&&tt>1?Pt.drawElementsInstanced(d,tn.primitiveLength*Bt,Pt.UNSIGNED_SHORT,tn.primitiveOffset*Bt*2,tt):he?Pt.drawElements(d,tn.primitiveLength*Bt,Pt.UNSIGNED_SHORT,tn.primitiveOffset*Bt*2):Pt.drawArrays(d,tn.vertexOffset,tn.vertexLength),d===Pt.TRIANGLES&&he&&this._drawDebugWireframe(r,b,M,R,he,tn,Pe,Fe,Qe,tt)}}}function Vo(v,r){const d=Math.pow(2,r.tileID.overscaledZ),b=r.tileSize*Math.pow(2,v.transform.tileZoom)/d,M=b*(r.tileID.canonical.x+r.tileID.wrap*d),R=b*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture?r.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/l.bB(r,1,v.transform.tileZoom),u_pixel_coord_upper:[M>>16,R>>16],u_pixel_coord_lower:[65535&M,65535&R]}}const js=l.ad.create(),Sa=(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je)=>{const tt=r.style.light,rt=tt.properties.get("position"),Pt=[rt.x,rt.y,rt.z],Bt=l.bC.create();"viewport"===tt.properties.get("anchor")&&(l.bC.fromRotation(Bt,-r.transform.angle),l._.transformMat3(Pt,Pt,Bt));const Ft=tt.properties.get("color"),tn=r.transform,en={u_matrix:v,u_lightpos:Pt,u_lightintensity:tt.properties.get("intensity"),u_lightcolor:[Ft.r,Ft.g,Ft.b],u_vertical_gradient:+d,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:js,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:M,u_edge_radius:R,u_flood_light_color:ye,u_vertical_scale:Pe,u_flood_light_intensity:Fe,u_ground_shadow_factor:Qe,u_emissive_strength:Je};return"globe"===tn.projection.name&&(en.u_tile_id=[N.canonical.x,N.canonical.y,1<<N.canonical.z],en.u_zoom_transition=ee,en.u_inv_rot_matrix=he,en.u_merc_center=se,en.u_up_dir=tn.projection.upVector(new l.aO(0,0,0),se[0]*l.a3,se[1]*l.a3),en.u_height_lift=H),en},Tc=(v,r,d)=>({u_matrix:v,u_edge_radius:r,u_vertical_scale:d}),Sl=(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe)=>{const Qe=Sa(v,r,d,b,M,R,N,ee,se,he,ye,Pe,Fe,1,[0,0,0],0),Je={u_height_factor:-Math.pow(2,N.overscaledZ)/H.tileSize/8};return l.W(Qe,Vo(r,H),Je)},Ll=(v,r)=>({u_matrix:v,u_emissive_strength:r}),ya=(v,r,d,b)=>l.W(Ll(v,r),Vo(d,b)),Xe=(v,r,d)=>({u_matrix:v,u_world:d,u_emissive_strength:r}),Se=(v,r,d,b,M)=>l.W(ya(v,r,d,b),{u_world:M}),vt=(v,r,d,b)=>{const M=l.a3/d.tileSize;return{u_matrix:v,u_camera_to_center_distance:r.getCameraToCenterDistance(b),u_extrude_scale:[r.pixelsToGLUnits[0]/M,r.pixelsToGLUnits[1]/M]}},He=(v,r,d=1)=>({u_matrix:v,u_color:r.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),Zt=l.ad.create(),Uo=(v,r,d,b,M,R,N)=>{const H=v.transform,ee="globe"===H.projection.name,se=ee?l.bD(H.zoom,r.canonical)*H._pixelsPerMercatorPixel:l.bB(d,1,R),he={u_matrix:r.projMatrix,u_extrude_scale:se,u_intensity:N,u_inv_rot_matrix:Zt,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(ee){he.u_inv_rot_matrix=b,he.u_merc_center=M,he.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],he.u_zoom_transition=l.a1(H.zoom);const ye=M[0]*l.a3,Pe=M[1]*l.a3;he.u_up_dir=H.projection.upVector(new l.aO(0,0,0),ye,Pe)}return he};function Tr(v,[r,d,b,M],[R,N]){if(R===N)return[0,0,0,0];const H=255*(v-1)/(v*(N-R));return[r*H,d*H,b*H,M*H]}function Wa(v,r,[d,b]){return d===b?0:.5/v+(r-d)*(v-1)/(v*(b-d))}const _l=(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je,tt,rt,Pt,Bt,Ft)=>({u_matrix:v,u_normalize_matrix:r,u_globe_matrix:d,u_merc_matrix:b,u_grid_matrix:M,u_tl_parent:R,u_scale_parent:se,u_fade_t:he.mix,u_opacity:he.opacity*ye.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ye.paint.get("raster-brightness-min"),u_brightness_high:ye.paint.get("raster-brightness-max"),u_saturation_factor:l.bE(ye.paint.get("raster-saturation")),u_contrast_factor:l.bF(ye.paint.get("raster-contrast")),u_spin_weights:Pc(ye.paint.get("raster-hue-rotate")),u_perspective_transform:Pe,u_raster_elevation:Fe,u_zoom_transition:N,u_merc_center:H,u_cutoff_params:ee,u_colorization_mix:Tr(l.bG,Je,rt),u_colorization_offset:Wa(l.bG,tt,rt),u_color_ramp:Qe,u_texture_offset:[Bt/(Pt+2*Bt),Pt/(Pt+2*Bt)],u_texture_res:[Pt+2*Bt,Pt+2*Bt],u_emissive_strength:Ft});function Pc(v){v*=Math.PI/180;const r=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*r-d+1)/3,(Math.sqrt(3)*r-d+1)/3]}const Xa=.05,cs=(v,r,d,b,M,R,N,H,ee,se,he,ye)=>({u_matrix:v,u_normalize_matrix:r,u_globe_matrix:d,u_merc_matrix:b,u_grid_matrix:M,u_tl_parent:R,u_scale_parent:se,u_fade_t:he.mix,u_opacity:he.opacity,u_image0:0,u_image1:1,u_raster_elevation:ye,u_zoom_transition:N,u_merc_center:H,u_cutoff_params:ee}),_c=(v,r,d,b,M,R,N,H,ee,se)=>({u_particle_texture:v,u_particle_texture_side_len:r,u_tile_offset:d,u_velocity:b,u_color_ramp:R,u_velocity_res:M,u_max_speed:N,u_uv_offset:H,u_data_scale:[255*ee[0],255*ee[1]],u_data_offset:se,u_particle_pos_scale:1.1,u_particle_pos_offset:[Xa,Xa]}),ch=(v,r,d,b,M,R,N,H,ee,se)=>({u_particle_texture:v,u_particle_texture_side_len:r,u_velocity:d,u_velocity_res:b,u_max_speed:M,u_speed_factor:R,u_reset_rate:N,u_rand_seed:Math.random(),u_uv_offset:H,u_data_scale:[255*ee[0],255*ee[1]],u_data_offset:se,u_particle_pos_scale:1.1,u_particle_pos_offset:[Xa,Xa]}),Dd=l.ad.create(),us=(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je,tt,rt)=>{const Pt=M.transform,Bt={u_is_size_zoom_constant:+("constant"===v||"source"===v),u_is_size_feature_constant:+("constant"===v||"camera"===v),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Pt.getCameraToCenterDistance(Je),u_rotate_symbol:+d,u_aspect_ratio:Pt.width/Pt.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:R,u_label_plane_matrix:N,u_coord_matrix:H,u_is_text:+ee,u_pitch_with_map:+b,u_texsize:se,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Dd,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Dd,u_up_vector:[0,-1,0],u_color_adj_mat:tt,u_icon_transition:rt||0};return"globe"===Je.name&&(Bt.u_tile_id=[he.canonical.x,he.canonical.y,1<<he.canonical.z],Bt.u_zoom_transition=ye,Bt.u_inv_rot_matrix=Fe,Bt.u_merc_center=Pe,Bt.u_camera_forward=Pt._camera.forward(),Bt.u_ecef_origin=l.bH(Pt.globeMatrix,he.toUnwrapped()),Bt.u_tile_matrix=Float32Array.from(Pt.globeMatrix),Bt.u_up_vector=Qe),Bt},ec=(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je,tt)=>l.W(us(v,r,d,b,M,R,N,H,ee,se,ye,Pe,Fe,Qe,Je,tt),{u_gamma_scale:b?M.transform.getCameraToCenterDistance(tt)*Math.cos(M.terrain?0:M.transform._pitch):1,u_device_pixel_ratio:l.e.devicePixelRatio,u_is_halo:+he,undefined:void 0}),vd=(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je)=>l.W(ec(v,r,d,b,M,R,N,H,!0,ee,!0,he,ye,Pe,Fe,Qe,Je),{u_texsize_icon:se,u_texture_icon:1}),b0=(v,r,d,b)=>({u_matrix:v,u_emissive_strength:r,u_opacity:d,u_color:b}),uh=(v,r,d,b,M,R,N,H)=>l.W(function(ee,se,he,ye,Pe){const{width:Fe,height:Qe}=ye.imageManager.getPixelSize(se),Je=Math.pow(2,Pe.tileID.overscaledZ),tt=Pe.tileSize*Math.pow(2,ye.transform.tileZoom)/Je,rt=tt*(Pe.tileID.canonical.x+Pe.tileID.wrap*Je),Pt=tt*Pe.tileID.canonical.y;return{u_image:0,u_pattern_tl:he.tl,u_pattern_br:he.br,u_texsize:[Fe,Qe],u_pattern_size:he.displaySize,u_tile_units_to_pixels:1/l.bB(Pe,1,ye.transform.tileZoom),u_pixel_coord_upper:[rt>>16,Pt>>16],u_pixel_coord_lower:[65535&rt,65535&Pt]}}(0,R,N,b,H),{u_matrix:v,u_emissive_strength:r,u_opacity:d}),xh=new Float32Array(l.ad.identity([])),Ih=(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe=[0,0,0],Qe)=>{const Je=M.style.light,tt=Je.properties.get("position"),rt=[-tt.x,-tt.y,tt.z],Pt=l.bC.create();"viewport"===Je.properties.get("anchor")&&(l.bC.fromRotation(Pt,-M.transform.angle),l._.transformMat3(rt,rt,Pt));const Bt="MASK"===he.alphaMode,Ft=Je.properties.get("color").toRenderColor(null),tn=Pe.paint.get("model-ambient-occlusion-intensity"),en=Pe.paint.get("model-color").constantOr(l.C.white).toRenderColor(null),_n=Pe.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:v,u_lighting_matrix:r,u_normal_matrix:d,u_node_matrix:b||xh,u_lightpos:rt,u_lightintensity:Je.properties.get("intensity"),u_lightcolor:[Ft.r,Ft.g,Ft.b],u_camera_pos:Fe,u_opacity:R,u_baseTextureIsAlpha:0,u_alphaMask:+Bt,u_alphaCutoff:he.alphaCutoff,u_baseColorFactor:[N.r,N.g,N.b,N.a],u_emissiveFactor:[H[0],H[1],H[2],1],u_metallicFactor:ee,u_roughnessFactor:se,u_baseColorTexture:Os.BaseColor,u_metallicRoughnessTexture:Os.MetallicRoughness,u_normalTexture:Os.Normal,u_occlusionTexture:Os.Occlusion,u_emissionTexture:Os.Emission,u_lutTexture:Os.LUT,u_color_mix:[en.r,en.g,en.b,_n],u_aoIntensity:tn,u_emissive_strength:ye,u_occlusionTextureTransform:Qe||[0,0,0,0]}},Cu=(v,r=xh,d=xh)=>({u_matrix:v,u_instance:r,u_node_matrix:d}),dh=(v,r,d,b,M)=>({u_matrix:Float32Array.from(v),u_anchorPos:r,u_screenSizePx:d,u_occluderSizePx:b,u_color:M}),Eh={fillExtrusion:v=>({u_matrix:new l.a6(v),u_lightpos:new l.aq(v),u_lightintensity:new l.aa(v),u_lightcolor:new l.aq(v),u_vertical_gradient:new l.aa(v),u_opacity:new l.aa(v),u_edge_radius:new l.aa(v),u_ao:new l.a8(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_up_dir:new l.aq(v),u_height_lift:new l.aa(v),u_flood_light_color:new l.aq(v),u_vertical_scale:new l.aa(v),u_flood_light_intensity:new l.aa(v),u_ground_shadow_factor:new l.aq(v),u_emissive_strength:new l.aa(v)}),fillExtrusionDepth:v=>({u_matrix:new l.a6(v),u_edge_radius:new l.aa(v),u_vertical_scale:new l.aa(v)}),fillExtrusionPattern:v=>({u_matrix:new l.a6(v),u_lightpos:new l.aq(v),u_lightintensity:new l.aa(v),u_lightcolor:new l.aq(v),u_vertical_gradient:new l.aa(v),u_height_factor:new l.aa(v),u_edge_radius:new l.aa(v),u_ao:new l.a8(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_up_dir:new l.aq(v),u_height_lift:new l.aa(v),u_image:new l.a7(v),u_texsize:new l.a8(v),u_pixel_coord_upper:new l.a8(v),u_pixel_coord_lower:new l.a8(v),u_tile_units_to_pixels:new l.aa(v),u_opacity:new l.aa(v)}),fillExtrusionGroundEffect:v=>({u_matrix:new l.a6(v),u_opacity:new l.aa(v),u_ao_pass:new l.aa(v),u_meter_to_tile:new l.aa(v),u_ao:new l.a8(v),u_flood_light_intensity:new l.aa(v),u_flood_light_color:new l.aq(v),u_attenuation:new l.aa(v),u_edge_radius:new l.aa(v),u_fb:new l.a7(v),u_fb_size:new l.aa(v)}),fill:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v)}),fillPattern:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_image:new l.a7(v),u_texsize:new l.a8(v),u_pixel_coord_upper:new l.a8(v),u_pixel_coord_lower:new l.a8(v),u_tile_units_to_pixels:new l.aa(v)}),fillOutline:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_world:new l.a8(v)}),fillOutlinePattern:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_world:new l.a8(v),u_image:new l.a7(v),u_texsize:new l.a8(v),u_pixel_coord_upper:new l.a8(v),u_pixel_coord_lower:new l.a8(v),u_tile_units_to_pixels:new l.aa(v)}),circle:l.bI,collisionBox:v=>({u_matrix:new l.a6(v),u_camera_to_center_distance:new l.aa(v),u_extrude_scale:new l.a8(v)}),collisionCircle:v=>({u_matrix:new l.a6(v),u_inv_matrix:new l.a6(v),u_camera_to_center_distance:new l.aa(v),u_viewport_size:new l.a8(v)}),debug:v=>({u_color:new l.a9(v),u_matrix:new l.a6(v),u_overlay:new l.a7(v),u_overlay_scale:new l.aa(v)}),clippingMask:v=>({u_matrix:new l.a6(v)}),heatmap:v=>({u_extrude_scale:new l.aa(v),u_intensity:new l.aa(v),u_matrix:new l.a6(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_up_dir:new l.aq(v)}),heatmapTexture:v=>({u_image:new l.a7(v),u_color_ramp:new l.a7(v),u_opacity:new l.aa(v)}),hillshade:v=>({u_matrix:new l.a6(v),u_image:new l.a7(v),u_latrange:new l.a8(v),u_light:new l.a8(v),u_shadow:new l.a9(v),u_highlight:new l.a9(v),u_emissive_strength:new l.aa(v),u_accent:new l.a9(v)}),hillshadePrepare:v=>({u_matrix:new l.a6(v),u_image:new l.a7(v),u_dimension:new l.a8(v),u_zoom:new l.aa(v)}),line:l.bJ,linePattern:l.bK,raster:v=>({u_matrix:new l.a6(v),u_normalize_matrix:new l.a6(v),u_globe_matrix:new l.a6(v),u_merc_matrix:new l.a6(v),u_grid_matrix:new l.ar(v),u_tl_parent:new l.a8(v),u_scale_parent:new l.aa(v),u_fade_t:new l.aa(v),u_opacity:new l.aa(v),u_image0:new l.a7(v),u_image1:new l.a7(v),u_brightness_low:new l.aa(v),u_brightness_high:new l.aa(v),u_saturation_factor:new l.aa(v),u_contrast_factor:new l.aa(v),u_spin_weights:new l.aq(v),u_perspective_transform:new l.a8(v),u_raster_elevation:new l.aa(v),u_zoom_transition:new l.aa(v),u_merc_center:new l.a8(v),u_cutoff_params:new l.as(v),u_colorization_mix:new l.as(v),u_colorization_offset:new l.aa(v),u_color_ramp:new l.a7(v),u_texture_offset:new l.a8(v),u_texture_res:new l.a8(v),u_emissive_strength:new l.aa(v)}),rasterParticle:v=>({u_matrix:new l.a6(v),u_normalize_matrix:new l.a6(v),u_globe_matrix:new l.a6(v),u_merc_matrix:new l.a6(v),u_grid_matrix:new l.ar(v),u_tl_parent:new l.a8(v),u_scale_parent:new l.aa(v),u_fade_t:new l.aa(v),u_opacity:new l.aa(v),u_image0:new l.a7(v),u_image1:new l.a7(v),u_raster_elevation:new l.aa(v),u_zoom_transition:new l.aa(v),u_merc_center:new l.a8(v),u_cutoff_params:new l.as(v)}),rasterParticleTexture:v=>({u_texture:new l.a7(v),u_opacity:new l.aa(v)}),rasterParticleDraw:v=>({u_particle_texture:new l.a7(v),u_particle_texture_side_len:new l.aa(v),u_tile_offset:new l.a8(v),u_velocity:new l.a7(v),u_color_ramp:new l.a7(v),u_velocity_res:new l.a8(v),u_max_speed:new l.aa(v),u_uv_offset:new l.a8(v),u_data_scale:new l.a8(v),u_data_offset:new l.aa(v),u_particle_pos_scale:new l.aa(v),u_particle_pos_offset:new l.a8(v)}),rasterParticleUpdate:v=>({u_particle_texture:new l.a7(v),u_particle_texture_side_len:new l.aa(v),u_velocity:new l.a7(v),u_velocity_res:new l.a8(v),u_max_speed:new l.aa(v),u_speed_factor:new l.aa(v),u_reset_rate:new l.aa(v),u_rand_seed:new l.aa(v),u_uv_offset:new l.a8(v),u_data_scale:new l.a8(v),u_data_offset:new l.aa(v),u_particle_pos_scale:new l.aa(v),u_particle_pos_offset:new l.a8(v)}),symbolIcon:v=>({u_is_size_zoom_constant:new l.a7(v),u_is_size_feature_constant:new l.a7(v),u_size_t:new l.aa(v),u_size:new l.aa(v),u_camera_to_center_distance:new l.aa(v),u_rotate_symbol:new l.a7(v),u_aspect_ratio:new l.aa(v),u_fade_change:new l.aa(v),u_matrix:new l.a6(v),u_label_plane_matrix:new l.a6(v),u_coord_matrix:new l.a6(v),u_is_text:new l.a7(v),u_pitch_with_map:new l.a7(v),u_texsize:new l.a8(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_camera_forward:new l.aq(v),u_tile_matrix:new l.a6(v),u_up_vector:new l.aq(v),u_ecef_origin:new l.aq(v),u_texture:new l.a7(v),u_icon_transition:new l.aa(v),u_color_adj_mat:new l.a6(v)}),symbolSDF:v=>({u_is_size_zoom_constant:new l.a7(v),u_is_size_feature_constant:new l.a7(v),u_size_t:new l.aa(v),u_size:new l.aa(v),u_camera_to_center_distance:new l.aa(v),u_rotate_symbol:new l.a7(v),u_aspect_ratio:new l.aa(v),u_fade_change:new l.aa(v),u_matrix:new l.a6(v),u_label_plane_matrix:new l.a6(v),u_coord_matrix:new l.a6(v),u_is_text:new l.a7(v),u_pitch_with_map:new l.a7(v),u_texsize:new l.a8(v),u_texture:new l.a7(v),u_gamma_scale:new l.aa(v),u_device_pixel_ratio:new l.aa(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_camera_forward:new l.aq(v),u_tile_matrix:new l.a6(v),u_up_vector:new l.aq(v),u_ecef_origin:new l.aq(v),u_is_halo:new l.a7(v)}),symbolTextAndIcon:v=>({u_is_size_zoom_constant:new l.a7(v),u_is_size_feature_constant:new l.a7(v),u_size_t:new l.aa(v),u_size:new l.aa(v),u_camera_to_center_distance:new l.aa(v),u_rotate_symbol:new l.a7(v),u_aspect_ratio:new l.aa(v),u_fade_change:new l.aa(v),u_matrix:new l.a6(v),u_label_plane_matrix:new l.a6(v),u_coord_matrix:new l.a6(v),u_is_text:new l.a7(v),u_pitch_with_map:new l.a7(v),u_texsize:new l.a8(v),u_texsize_icon:new l.a8(v),u_texture:new l.a7(v),u_texture_icon:new l.a7(v),u_gamma_scale:new l.aa(v),u_device_pixel_ratio:new l.aa(v),u_is_halo:new l.a7(v)}),background:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_opacity:new l.aa(v),u_color:new l.a9(v)}),backgroundPattern:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_opacity:new l.aa(v),u_image:new l.a7(v),u_pattern_tl:new l.a8(v),u_pattern_br:new l.a8(v),u_texsize:new l.a8(v),u_pattern_size:new l.a8(v),u_pixel_coord_upper:new l.a8(v),u_pixel_coord_lower:new l.a8(v),u_tile_units_to_pixels:new l.aa(v)}),terrainRaster:v=>({u_matrix:new l.a6(v),u_image0:new l.a7(v),u_skirt_height:new l.aa(v),u_ground_shadow_factor:new l.aq(v)}),skybox:v=>({u_matrix:new l.a6(v),u_sun_direction:new l.aq(v),u_cubemap:new l.a7(v),u_opacity:new l.aa(v),u_temporal_offset:new l.aa(v)}),skyboxGradient:v=>({u_matrix:new l.a6(v),u_color_ramp:new l.a7(v),u_center_direction:new l.aq(v),u_radius:new l.aa(v),u_opacity:new l.aa(v),u_temporal_offset:new l.aa(v)}),skyboxCapture:v=>({u_matrix_3f:new l.ar(v),u_sun_direction:new l.aq(v),u_sun_intensity:new l.aa(v),u_color_tint_r:new l.as(v),u_color_tint_m:new l.as(v),u_luminance:new l.aa(v)}),globeRaster:v=>({u_proj_matrix:new l.a6(v),u_globe_matrix:new l.a6(v),u_normalize_matrix:new l.a6(v),u_merc_matrix:new l.a6(v),u_zoom_transition:new l.aa(v),u_merc_center:new l.a8(v),u_image0:new l.a7(v),u_grid_matrix:new l.ar(v),u_skirt_height:new l.aa(v),u_far_z_cutoff:new l.aa(v),u_frustum_tl:new l.aq(v),u_frustum_tr:new l.aq(v),u_frustum_br:new l.aq(v),u_frustum_bl:new l.aq(v),u_globe_pos:new l.aq(v),u_globe_radius:new l.aa(v),u_viewport:new l.a8(v)}),globeAtmosphere:v=>({u_frustum_tl:new l.aq(v),u_frustum_tr:new l.aq(v),u_frustum_br:new l.aq(v),u_frustum_bl:new l.aq(v),u_horizon:new l.aa(v),u_transition:new l.aa(v),u_fadeout_range:new l.aa(v),u_color:new l.as(v),u_high_color:new l.as(v),u_space_color:new l.as(v),u_temporal_offset:new l.aa(v),u_horizon_angle:new l.aa(v)}),model:v=>({u_matrix:new l.a6(v),u_lighting_matrix:new l.a6(v),u_normal_matrix:new l.a6(v),u_node_matrix:new l.a6(v),u_lightpos:new l.aq(v),u_lightintensity:new l.aa(v),u_lightcolor:new l.aq(v),u_camera_pos:new l.aq(v),u_opacity:new l.aa(v),u_baseColorFactor:new l.as(v),u_emissiveFactor:new l.as(v),u_metallicFactor:new l.aa(v),u_roughnessFactor:new l.aa(v),u_baseTextureIsAlpha:new l.a7(v),u_alphaMask:new l.a7(v),u_alphaCutoff:new l.aa(v),u_baseColorTexture:new l.a7(v),u_metallicRoughnessTexture:new l.a7(v),u_normalTexture:new l.a7(v),u_occlusionTexture:new l.a7(v),u_emissionTexture:new l.a7(v),u_lutTexture:new l.a7(v),u_color_mix:new l.as(v),u_aoIntensity:new l.aa(v),u_emissive_strength:new l.aa(v),u_occlusionTextureTransform:new l.as(v)}),modelDepth:v=>({u_matrix:new l.a6(v),u_instance:new l.a6(v),u_node_matrix:new l.a6(v)}),groundShadow:v=>({u_matrix:new l.a6(v),u_ground_shadow_factor:new l.aq(v)}),stars:v=>({u_matrix:new l.a6(v),u_up:new l.aq(v),u_right:new l.aq(v),u_intensity_multiplier:new l.aa(v)}),occlusion:v=>({u_matrix:new l.a6(v),u_anchorPos:new l.aq(v),u_screenSizePx:new l.a8(v),u_occluderSizePx:new l.a8(v),u_color:new l.as(v)})};function _d(v,r,d){const b=r.createTileMatrix(v,v.worldSize,d.toUnwrapped());return l.ad.multiply(new Float32Array(16),v.projMatrix,b)}function pu(v,r,d){if(r.projection.name===d.projection.name)return v.projMatrix;const b=d.clone();return b.setProjection(r.projection),_d(b,r.getProjection(),v)}function dc(v,r,d){return r.name===d.projection.name?v.projMatrix:_d(d,r,v)}let Rc;function Wd(v,r,d,b,M,R,N){const H=v.context,ee=H.gl,se=v.transform,he=v.getOrCreateProgram("collisionBox"),ye=[];let Pe=0,Fe=0;for(let Ft=0;Ft<b.length;Ft++){const tn=b[Ft],en=r.getTile(tn),_n=en.getBucket(d);if(!_n)continue;const at=pu(tn,_n,se);let $t=at;0===M[0]&&0===M[1]||($t=v.translatePosMatrix(at,en,M,R));const Tn=N?_n.textCollisionBox:_n.iconCollisionBox,ci=_n.collisionCircleArray;if(ci.length>0){const zn=l.ad.create(),mn=$t;l.ad.mul(zn,_n.placementInvProjMatrix,se.glCoordMatrix),l.ad.mul(zn,zn,_n.placementViewportMatrix),ye.push({circleArray:ci,circleOffset:Fe,transform:mn,invTransform:zn,projection:_n.getProjection()}),Pe+=ci.length/4,Fe=Pe}Tn&&(v.terrain&&v.terrain.setupElevationDraw(en,he),he.draw(v,ee.LINES,l.ae.disabled,l.ag.disabled,v.colorModeForRenderPass(),l.af.disabled,vt($t,se,en,_n.getProjection()),d.id,Tn.layoutVertexBuffer,Tn.indexBuffer,Tn.segments,null,se.zoom,null,[Tn.collisionVertexBuffer,Tn.collisionVertexBufferExt]))}if(!N||!ye.length)return;const Qe=v.getOrCreateProgram("collisionCircle"),Je=new l.bL;Je.resize(4*Pe),Je._trim();let tt=0;for(const Ft of ye)for(let tn=0;tn<Ft.circleArray.length/4;tn++){const en=4*tn,_n=Ft.circleArray[en+0],at=Ft.circleArray[en+1],$t=Ft.circleArray[en+2],Tn=Ft.circleArray[en+3];Je.emplace(tt++,_n,at,$t,Tn,0),Je.emplace(tt++,_n,at,$t,Tn,1),Je.emplace(tt++,_n,at,$t,Tn,2),Je.emplace(tt++,_n,at,$t,Tn,3)}(!Rc||Rc.length<2*Pe)&&(Rc=function(Ft){const tn=2*Ft,en=new l.bu;en.resize(tn),en._trim();for(let _n=0;_n<tn;_n++){const at=6*_n;en.uint16[at+0]=4*_n+0,en.uint16[at+1]=4*_n+1,en.uint16[at+2]=4*_n+2,en.uint16[at+3]=4*_n+2,en.uint16[at+4]=4*_n+3,en.uint16[at+5]=4*_n+0}return en}(Pe));const rt=H.createIndexBuffer(Rc,!0),Pt=H.createVertexBuffer(Je,l.bM.members,!0);for(const Ft of ye){const tn={u_matrix:Ft.transform,u_inv_matrix:Ft.invTransform,u_camera_to_center_distance:(Bt=se).getCameraToCenterDistance(Ft.projection),u_viewport_size:[Bt.width,Bt.height]};Qe.draw(v,ee.TRIANGLES,l.ae.disabled,l.ag.disabled,v.colorModeForRenderPass(),l.af.disabled,tn,d.id,Pt,rt,l.b.simpleSegment(0,2*Ft.circleOffset,Ft.circleArray.length,Ft.circleArray.length/2),null,se.zoom)}var Bt;Pt.destroy(),rt.destroy()}const ks=l.ad.create();function ga(v){const r=v._camera.getWorldToCamera(v.worldSize,1),d=l.ad.multiply([],r,v.globeMatrix);l.ad.invert(d,d);const b=[0,0,0],M=[0,1,0,0];return l.aA.transformMat4(M,M,d),b[0]=M[0],b[1]=M[1],b[2]=M[2],l._.normalize(b,b),b}function a1({width:v,height:r,anchor:d,textOffset:b,textScale:M},R){const{horizontalAlign:N,verticalAlign:H}=l.bQ(d),ee=-(N-.5)*v,se=-(H-.5)*r,he=l.bP(d,b);return new l.P((ee/M+he[0])*R,(se/M+he[1])*R)}function w0(v,r,d,b,M,R,N,H,ee,se,he){const ye=v.text.placedSymbolArray,Pe=v.text.dynamicLayoutVertexArray,Fe=v.icon.dynamicLayoutVertexArray,Qe={},Je=v.getProjection(),tt=dc(H,Je,R),rt=R.elevation,Pt=Je.upVectorScale(H.canonical,R.center.lat,R.worldSize).metersToTile;Pe.clear();for(let Bt=0;Bt<ye.length;Bt++){const Ft=ye.get(Bt),{tileAnchorX:tn,tileAnchorY:en,numGlyphs:_n}=Ft,at=Ft.hidden||!Ft.crossTileID||v.allowVerticalPlacement&&!Ft.placedOrientation?null:b[Ft.crossTileID];if(at){let $t=0,Tn=0,ci=0;if(rt){const oe=rt?rt.getAtTileOffset(H,tn,en):0,[Ve,lt,cn]=Je.upVector(H.canonical,tn,en);$t=oe*Ve*Pt,Tn=oe*lt*Pt,ci=oe*cn*Pt}let[zn,mn,_i,eo]=Eo(Ft.projectedAnchorX+$t,Ft.projectedAnchorY+Tn,Ft.projectedAnchorZ+ci,d?tt:N);const io=so(R.getCameraToCenterDistance(Je),eo);let ie=M.evaluateSizeForFeature(v.textSizeData,se,Ft)*io/l.bN;d&&(ie*=v.tilePixelRatio/ee);const L=a1(at,ie);d?(({x:zn,y:mn,z:_i}=Je.projectTilePoint(tn+L.x,en+L.y,H.canonical)),[zn,mn,_i]=Eo(zn+$t,mn+Tn,_i+ci,N)):(r&&L._rotate(-R.angle),zn+=L.x,mn+=L.y,_i=0);const j=v.allowVerticalPlacement&&Ft.placedOrientation===l.aE.vertical?Math.PI/2:0;for(let oe=0;oe<_n;oe++)l.aH(Pe,zn,mn,_i,j);he&&Ft.associatedIconIndex>=0&&(Qe[Ft.associatedIconIndex]={x:zn,y:mn,z:_i,angle:j})}else Nr(_n,Pe)}if(he){Fe.clear();const Bt=v.icon.placedSymbolArray;for(let Ft=0;Ft<Bt.length;Ft++){const tn=Bt.get(Ft),{numGlyphs:en}=tn,_n=Qe[Ft];if(tn.hidden||!_n)Nr(en,Fe);else{const{x:at,y:$t,z:Tn,angle:ci}=_n;for(let zn=0;zn<en;zn++)l.aH(Fe,at,$t,Tn,ci)}}v.icon.dynamicLayoutVertexBuffer.updateData(Fe)}v.text.dynamicLayoutVertexBuffer.updateData(Pe)}function x0(v,r,d,b,M,R,N={}){const H=d.paint.get("icon-translate"),ee=d.paint.get("text-translate"),se=d.paint.get("icon-translate-anchor"),he=d.paint.get("text-translate-anchor"),ye=d.layout.get("icon-rotation-alignment"),Pe=d.layout.get("text-rotation-alignment"),Fe=d.layout.get("icon-pitch-alignment"),Qe=d.layout.get("text-pitch-alignment"),Je=d.layout.get("icon-keep-upright"),tt=d.layout.get("text-keep-upright"),rt=d.paint.get("icon-color-saturation"),Pt=d.paint.get("icon-color-contrast"),Bt=d.paint.get("icon-color-brightness-min"),Ft=d.paint.get("icon-color-brightness-max"),tn=d.paint.get("icon-occlusion-opacity").constantOr(0),en=d.paint.get("text-occlusion-opacity").constantOr(0),_n=v.context,at=_n.gl,$t=v.transform,Tn="map"===ye,ci="map"===Pe,zn="map"===Fe,mn="map"===Qe,_i=1!==tn,eo=1!==en,io=void 0!==d.layout.get("symbol-sort-key").constantOr(1);let ie=!1;const L=v.depthModeForSublayer(0,l.ae.ReadOnly),j=[l.aj($t.center.lng),l.ak($t.center.lat)],oe=d.layout.get("text-variable-anchor"),Ve="globe"===$t.projection.name,lt=[],cn=[0,-1,0];for(const hn of b){const Qn=r.getTile(hn),Wn=Qn.getBucket(d);if(!Wn||"mercator"===Wn.projection.name&&Ve||Wn.fullyClipped)continue;const Wi="globe"===Wn.projection.name,vr=Wi?l.a1($t.zoom):0,Sr=dc(hn,Wn.getProjection(),$t),Mr=$t.calculatePixelsToTileUnitsMatrix(Qn),Hr=oe&&Wn.hasTextData(),Za=Wn.hasIconTextFit()&&Hr&&Wn.hasIconData(),As=Wn.getProjection().createInversionMatrix($t,hn.canonical),ts=()=>{const za=Tn&&"point"!==d.layout.get("symbol-placement"),qi=[];d.hasInitialOcclusionOpacityProperties&&_i&&v.symbolParams.useOcclusionQueries&&!Wi&&!Ve&&qi.push("OCCLUSION_QUERIES"),d.hasInitialOcclusionOpacityProperties||qi.push("SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH");const er=za||Za,ss=d.paint.get("icon-image-cross-fade").constantOr(0);v.terrainRenderModeElevated()&&zn&&qi.push("PITCH_WITH_MAP_TERRAIN"),Wi&&(qi.push("PROJECTION_GLOBE_VIEW"),er&&qi.push("PROJECTED_POS_ON_VIEWPORT")),ss>0&&qi.push("ICON_TRANSITION"),Wn.icon.zOffsetVertexBuffer&&qi.push("Z_OFFSET"),qi.push("TERRAIN_DEPTH_D24"),0===rt&&0===Pt&&0===Bt&&1===Ft||qi.push("COLOR_ADJUSTMENT");const pa=Wn.icon.programConfigurations.get(d.id),ri=v.getOrCreateProgram(Wn.sdfIcons?"symbolSDF":"symbolIcon",{config:pa,defines:qi});let Du;const fd=Qn.imageAtlasTexture?Qn.imageAtlasTexture.size:[0,0],Uc=Wn.iconSizeData,Nc=l.aD(Uc,$t.zoom),Bh=zn||0!==$t.pitch,Jh=On(Sr,Qn.tileID.canonical,zn,Tn,$t,Wn.getProjection(),Mr),hl=bo(Sr,Qn.tileID.canonical,zn,Tn,$t,Wn.getProjection(),Mr),X0=v.translatePosMatrix(hl,Qn,H,se,!0),K0=v.translatePosMatrix(Sr,Qn,H,se),D1=er?ks:Jh,e0=Tn&&!zn&&!za;let P1=cn;!Ve&&!$t.mercatorFromTransition||Tn||(P1=ga($t));const Po=Wi?P1:cn;if(Wn.sdfIcons&&!Wn.iconsInText)Du=ec(Uc.kind,Nc,e0,zn,v,K0,D1,X0,!1,fd,!0,hn,vr,j,As,Po,Wn.getProjection());else{const Pu=d.getColorAdjustmentMatrix(rt,Pt,Bt,Ft);Du=us(Uc.kind,Nc,e0,zn,v,K0,D1,X0,!1,fd,hn,vr,j,As,Po,Wn.getProjection(),Pu,ss)}const da=Qn.imageAtlasTexture?Qn.imageAtlasTexture:null,xp=1!==d.layout.get("icon-size").constantOr(0)||Wn.iconsNeedLinear,Nh=Wn.sdfIcons||v.options.rotating||v.options.zooming||xp||Bh?at.LINEAR:at.NEAREST,wl=Wn.sdfIcons&&0!==d.paint.get("icon-halo-width").constantOr(1),qu=v.terrain&&zn&&za?l.ad.invert(l.ad.create(),Jh):ks;if(za&&Wn.icon){const Pu=$t.elevation,el=Pu?Pu.getAtTileOffsetFunc(hn,$t.center.lat,$t.worldSize,Wn.getProjection()):null,J1=li(Sr,Qn.tileID.canonical,zn,Tn,$t,Wn.getProjection(),Mr);qo(Wn,Sr,v,!1,J1,hl,zn,Je,el,hn)}return{program:ri,buffers:Wn.icon,uniformValues:Du,atlasTexture:da,atlasTextureIcon:null,atlasInterpolation:Nh,atlasInterpolationIcon:null,isSDF:Wn.sdfIcons,hasHalo:wl,tile:Qn,labelPlaneMatrixInv:qu}},Js=()=>{const za=ci&&"point"!==d.layout.get("symbol-placement"),qi=[],er=za||oe||Za;d.hasInitialOcclusionOpacityProperties&&eo&&v.symbolParams.useOcclusionQueries&&!Wi&&!Ve&&qi.push("OCCLUSION_QUERIES"),d.hasInitialOcclusionOpacityProperties||qi.push("SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH"),v.terrainRenderModeElevated()&&mn&&qi.push("PITCH_WITH_MAP_TERRAIN"),Wi&&(qi.push("PROJECTION_GLOBE_VIEW"),er&&qi.push("PROJECTED_POS_ON_VIEWPORT")),Wn.text.zOffsetVertexBuffer&&qi.push("Z_OFFSET"),qi.push("TERRAIN_DEPTH_D24");const ss=Wn.text.programConfigurations.get(d.id),pa=v.getOrCreateProgram(Wn.iconsInText?"symbolTextAndIcon":"symbolSDF",{config:ss,defines:qi});let ri,Du=[0,0],fd=null;const Uc=Wn.textSizeData;Wn.iconsInText&&(Du=Qn.imageAtlasTexture?Qn.imageAtlasTexture.size:[0,0],fd=Qn.imageAtlasTexture?Qn.imageAtlasTexture:null,ri=mn||0!==$t.pitch||v.options.rotating||v.options.zooming||"composite"===Uc.kind||"camera"===Uc.kind?at.LINEAR:at.NEAREST);const Nc=Qn.glyphAtlasTexture?Qn.glyphAtlasTexture.size:[0,0],Bh=l.aD(Uc,$t.zoom),Jh=On(Sr,Qn.tileID.canonical,mn,ci,$t,Wn.getProjection(),Mr),hl=bo(Sr,Qn.tileID.canonical,mn,ci,$t,Wn.getProjection(),Mr),X0=v.translatePosMatrix(hl,Qn,ee,he,!0),K0=v.translatePosMatrix(Sr,Qn,ee,he),D1=er?ks:Jh,e0=ci&&!mn&&!za;let P1=cn;!Ve&&!$t.mercatorFromTransition||ci||(P1=ga($t));const Po=Wi?P1:cn;let da;da=Wn.iconsInText?vd(Uc.kind,Bh,e0,mn,v,K0,D1,X0,Nc,Du,hn,vr,j,As,Po,Wn.getProjection()):ec(Uc.kind,Bh,e0,mn,v,K0,D1,X0,!0,Nc,!0,hn,vr,j,As,Po,Wn.getProjection());const xp=Qn.glyphAtlasTexture?Qn.glyphAtlasTexture:null,Nh=at.LINEAR,wl=0!==d.paint.get("text-halo-width").constantOr(1),qu=v.terrain&&mn&&za?l.ad.invert(l.ad.create(),Jh):ks;if(za&&Wn.text){const Pu=$t.elevation,el=Pu?Pu.getAtTileOffsetFunc(hn,$t.center.lat,$t.worldSize,Wn.getProjection()):null,J1=li(Sr,Qn.tileID.canonical,mn,ci,$t,Wn.getProjection(),Mr);qo(Wn,Sr,v,!0,J1,hl,mn,tt,el,hn)}return{program:pa,buffers:Wn.text,uniformValues:da,atlasTexture:xp,atlasTextureIcon:fd,atlasInterpolation:Nh,atlasInterpolationIcon:ri,isSDF:!0,hasHalo:wl,tile:Qn,labelPlaneMatrixInv:qu}},ca=Wn.icon.segments.get().length,Hs=Wn.text.segments.get().length,gs=ca&&!N.onlyText?ts():null,Ca=Hs&&!N.onlyIcons?Js():null,bl=d.paint.get("icon-opacity").constantOr(1),ua=d.paint.get("text-opacity").constantOr(1);if(io&&Wn.canOverlap){ie=!0;const za=bl&&!N.onlyText?Wn.icon.segments.get():[],qi=ua&&!N.onlyIcons?Wn.text.segments.get():[];for(const er of za)lt.push({segments:new l.b([er]),sortKey:er.sortKey,state:gs});for(const er of qi)lt.push({segments:new l.b([er]),sortKey:er.sortKey,state:Ca})}else N.onlyText||lt.push({segments:bl?Wn.icon.segments:new l.b([]),sortKey:0,state:gs}),N.onlyIcons||lt.push({segments:ua?Wn.text.segments:new l.b([]),sortKey:0,state:Ca})}ie&&lt.sort((hn,Qn)=>hn.sortKey-Qn.sortKey);for(const hn of lt){const Qn=hn.state;if(Qn)if(v.terrain&&v.terrain.setupElevationDraw(Qn.tile,Qn.program,{useDepthForOcclusion:!d.hasInitialOcclusionOpacityProperties&&$t.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Qn.labelPlaneMatrixInv}),_n.activeTexture.set(at.TEXTURE0),Qn.atlasTexture&&Qn.atlasTexture.bind(Qn.atlasInterpolation,at.CLAMP_TO_EDGE,!0),Qn.atlasTextureIcon&&(_n.activeTexture.set(at.TEXTURE1),Qn.atlasTextureIcon&&Qn.atlasTextureIcon.bind(Qn.atlasInterpolationIcon,at.CLAMP_TO_EDGE,!0)),v.uploadCommonLightUniforms(v.context,Qn.program),Qn.hasHalo){const Wn=Qn.uniformValues;Wn.u_is_halo=1,$0(Qn.buffers,hn.segments,d,v,Qn.program,L,M,R,Wn,2),Wn.u_is_halo=0}else{if(Qn.isSDF){const Wn=Qn.uniformValues;Qn.hasHalo&&(Wn.u_is_halo=1,$0(Qn.buffers,hn.segments,d,v,Qn.program,L,M,R,Wn,1)),Wn.u_is_halo=0}$0(Qn.buffers,hn.segments,d,v,Qn.program,L,M,R,Qn.uniformValues,1)}}}function $0(v,r,d,b,M,R,N,H,ee,se){const he=b.context.gl,ye=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.iconTransitioningVertexBuffer,v.globeExtVertexBuffer,v.zOffsetVertexBuffer];v.occlusionQueryOpacityVertexBuffer.length>0&&ye.push(v.occlusionQueryOpacityVertexBuffer),M.draw(b,he.TRIANGLES,R,N,H,l.af.disabled,ee,d.id,v.layoutVertexBuffer,v.indexBuffer,r,d.paint,b.transform.zoom,v.programConfigurations.get(d.id),ye,se)}function ll(v,r,d,b,M,R,N){const H=v.context.gl,ee=d.paint.get("fill-pattern"),se=ee&&ee.constantOr(1);let he,ye,Pe,Fe,Qe;N?(ye=se&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=H.LINES):(ye=se?"fillPattern":"fill",he=H.TRIANGLES);for(const Je of b){const tt=r.getTile(Je);if(se&&!tt.patternsLoaded())continue;const rt=tt.getBucket(d);if(!rt)continue;v.prepareDrawTile();const Pt=rt.programConfigurations.get(d.id),Bt=v.isTileAffectedByFog(Je),Ft=v.getOrCreateProgram(ye,{config:Pt,overrideFog:Bt});se&&(v.context.activeTexture.set(H.TEXTURE0),tt.imageAtlasTexture&&tt.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Pt.updatePaintBuffers());const tn=ee.constantOr(null);if(tn&&tt.imageAtlas){const at=tt.imageAtlas.patternPositions[tn.toString()];at&&Pt.setConstantPatternPositions(at)}const en=v.translatePosMatrix(Je.projMatrix,tt,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor")),_n=d.paint.get("fill-emissive-strength");if(N){Fe=rt.indexBuffer2,Qe=rt.segments2;const at=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[H.drawingBufferWidth,H.drawingBufferHeight];Pe="fillOutlinePattern"===ye&&se?Se(en,_n,v,tt,at):Xe(en,_n,at)}else Fe=rt.indexBuffer,Qe=rt.segments,Pe=se?ya(en,_n,v,tt):Ll(en,_n);v.uploadCommonUniforms(v.context,Ft,Je.toUnwrapped()),Ft.draw(v,he,M,v.stencilModeForClipping(Je),R,l.af.disabled,Pe,d.id,rt.layoutVertexBuffer,Fe,Qe,d.paint,v.transform.zoom,Pt,void 0)}}function yc(v,r,d,b,M,R,N,H){d.resetLayerRenderingStats(v);const ee=v.context,se=ee.gl,he=v.transform,ye=d.paint.get("fill-extrusion-pattern"),Pe=ye.constantOr(1),Fe=d.paint.get("fill-extrusion-opacity"),Qe=v.style.enable3dLights(),Je=d.paint.get(Qe&&!Pe?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),tt=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Je],rt=d.layout.get("fill-extrusion-edge-radius"),Pt=rt>0&&!d.paint.get("fill-extrusion-rounded-roof"),Bt=Pt?0:rt,Ft="globe"===he.projection.name?l.bY():0,tn="globe"===he.projection.name,en=tn?l.a1(he.zoom):0,_n=[l.aj(he.center.lng),l.ak(he.center.lat)],at=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(d.lut).toArray01().slice(0,3),$t=d.paint.get("fill-extrusion-flood-light-intensity"),Tn=d.paint.get("fill-extrusion-vertical-scale"),ci=Yc(v,d.paint.get("fill-extrusion-cutoff-fade-range")),zn=d.paint.get("fill-extrusion-emissive-strength"),mn=[];let _i;tn&&mn.push("PROJECTION_GLOBE_VIEW"),tt[0]>0&&mn.push("FAUX_AO"),Pt&&mn.push("ZERO_ROOF_RADIUS"),H&&mn.push("HAS_CENTROID"),$t>0&&mn.push("FLOOD_LIGHT"),ci.shouldRenderCutoff&&mn.push("RENDER_CUTOFF");const eo="shadow"===v.renderPass,io=v.shadowRenderer,ie=eo&&!!io;v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!0);let L=[0,0,0];if(io){const Ve=v.style.directionalLight,lt=v.style.ambientLight;Ve&&lt&&(L=uc(v.style,Ve,lt)),_i=mn.concat(["SHADOWS_SINGLE_CASCADE"])}const j=ie?"fillExtrusionDepth":Pe?"fillExtrusionPattern":"fillExtrusion",oe=d.getLayerRenderingStats();for(const Ve of b){const lt=r.getTile(Ve),cn=lt.getBucket(d);if(!cn||cn.projection.name!==he.projection.name)continue;let hn=!1;io&&(hn=0===io.getMaxCascadeForTile(Ve.toUnwrapped()));const Qn=v.isTileAffectedByFog(Ve),Wn=cn.programConfigurations.get(d.id),Wi=v.getOrCreateProgram(j,{config:Wn,defines:hn?_i:mn,overrideFog:Qn});if(v.terrain&&v.terrain.setupElevationDraw(lt,Wi,{useMeterToDem:!0}),!cn.centroidVertexBuffer){const As=Wi.attributes.a_centroid_pos;void 0!==As&&se.vertexAttrib2f(As,0,0)}!eo&&io&&io.setupShadows(lt.tileID.toUnwrapped(),Wi,"vector-tile",lt.tileID.overscaledZ),Pe&&(v.context.activeTexture.set(se.TEXTURE0),lt.imageAtlasTexture&&lt.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),Wn.updatePaintBuffers());const vr=ye.constantOr(null);if(vr&&lt.imageAtlas){const As=lt.imageAtlas.patternPositions[vr.toString()];As&&Wn.setConstantPatternPositions(As)}const Sr=d.paint.get("fill-extrusion-vertical-gradient");let Mr;if(eo&&io){if(Hh(lt.tileID,cn,v))continue;const As=io.calculateShadowPassMatrixFromTile(lt.tileID.toUnwrapped());Mr=Tc(As,Bt,Tn)}else{const As=v.translatePosMatrix(Ve.expandedProjMatrix,lt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ts=he.projection.createInversionMatrix(he,Ve.canonical);Mr=Pe?Sl(As,v,Sr,Fe,tt,Bt,Ve,lt,Ft,en,_n,ts,at,Tn):Sa(As,v,Sr,Fe,tt,Bt,Ve,Ft,en,_n,ts,at,Tn,$t,L,zn)}v.uploadCommonUniforms(ee,Wi,Ve.toUnwrapped(),null,ci);let Hr=cn.segments;if("mercator"===he.projection.name&&!eo&&(Hr=cn.getVisibleSegments(lt.tileID,v.terrain,v.transform.getFrustum(0)),!Hr.get().length))continue;if(oe)if(eo)for(const As of Hr.get())oe.numRenderedVerticesInShadowPass+=As.primitiveLength;else for(const As of Hr.get())oe.numRenderedVerticesInTransparentPass+=As.primitiveLength;const Za=[];(v.terrain||H)&&Za.push(cn.centroidVertexBuffer),tn&&Za.push(cn.layoutVertexExtBuffer),Wi.draw(v,ee.gl.TRIANGLES,M,R,N,l.af.backCCW,Mr,d.id,cn.layoutVertexBuffer,cn.indexBuffer,Hr,d.paint,v.transform.zoom,Wn,Za)}v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!1)}function Ls(v,r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je,tt,rt,Pt){const Bt=v.context,Ft=Bt.gl,tn=v.transform,en=v.transform.zoom,_n=[],at=Yc(v,d.paint.get("fill-extrusion-cutoff-fade-range"));"clear"===se?(_n.push("CLEAR_SUBPASS"),Pt&&(_n.push("CLEAR_FROM_TEXTURE"),Bt.activeTexture.set(Ft.TEXTURE0),Pt.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE))):"sdf"===se&&_n.push("SDF_SUBPASS"),tt&&_n.push("HAS_CENTROID"),at.shouldRenderCutoff&&_n.push("RENDER_CUTOFF");const $t=d.layout.get("fill-extrusion-edge-radius"),Tn=(ci,zn,mn,_i,eo)=>{const io=zn.programConfigurations.get(d.id),ie=v.isTileAffectedByFog(ci),L=v.getOrCreateProgram("fillExtrusionGroundEffect",{config:io,defines:_n,overrideFog:ie}),j=((Ve,lt,cn,hn,Qn,Wn,Wi,vr,Sr,Mr,Hr)=>({u_matrix:lt,u_opacity:cn,u_ao_pass:hn?1:0,u_meter_to_tile:Qn,u_ao:Wn,u_flood_light_intensity:Wi,u_flood_light_color:vr,u_attenuation:Sr,u_edge_radius:Mr,u_fb:0,u_fb_size:Hr}))(0,_i,he,ee,eo,[ye,Pe*eo],Fe,Qe,Je,en>=17?0:$t*eo,Pt?Pt.size[0]:0),oe=[];tt&&oe.push(zn.hiddenByLandmarkVertexBuffer),v.uploadCommonUniforms(Bt,L,ci.toUnwrapped(),null,at),L.draw(v,Bt.gl.TRIANGLES,M,R,N,H,j,d.id,zn.vertexBuffer,zn.indexBuffer,mn,d.paint,en,io,oe)};for(const ci of b){const zn=r.getTile(ci),mn=zn.getBucket(d);if(!mn||mn.projection.name!==tn.projection.name||!mn.groundEffect||mn.groundEffect&&!mn.groundEffect.hasData())continue;const _i=mn.groundEffect,eo=1/mn.tileToMeter;{const io=v.translatePosMatrix(ci.projMatrix,zn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ie=_i.getDefaultSegment();Tn(ci,_i,ie,io,eo)}if(rt)for(let io=0;io<4;io++){const ie=l.bZ[io](ci),L=r.getTile(ie);if(!L)continue;const j=L.getBucket(d);if(!j||j.projection.name!==tn.projection.name||!j.groundEffect||j.groundEffect&&!j.groundEffect.hasData())continue;const oe=j.groundEffect;let Ve,lt;0===io?(Ve=[-l.a3,0,0],lt=1):1===io?(Ve=[l.a3,0,0],lt=0):2===io?(Ve=[0,-l.a3,0],lt=3):(Ve=[0,l.a3,0],lt=2);const cn=oe.regionSegments[lt];if(!cn)continue;const hn=new Float32Array(16);l.ad.translate(hn,ci.projMatrix,Ve),Tn(ci,oe,cn,v.translatePosMatrix(hn,zn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),eo)}}}function j0(v,r,d,b,M,R,N){0===b.centroidVertexArray.length&&b.createCentroidsBuffer();const H=R?R.findDEMTileFor(d):null;if(!(H&&H.dem||N))return;const ee=rt=>new l.P(Math.ceil((rt+l.c0)*l.c1),0),se=rt=>{const Pt=r.getSource().minzoom,Bt=tn=>{const en=r.getTileByID(tn);if(en&&en.hasData())return en.getBucket(M)},Ft=[0,-1,1];for(const tn of Ft){if(rt.overscaledZ+tn<Pt)continue;const en=Bt(rt.calculateScaledKey(rt.overscaledZ+tn));if(en)return en}},he=[0,0,0],ye=(rt,Pt)=>(he[0]=Math.min(rt.min.y,Pt.min.y),he[1]=Math.max(rt.max.y,Pt.max.y),he[2]=l.a3-Pt.min.x>rt.max.x?Pt.min.x-l.a3:rt.max.x,he),Pe=(rt,Pt)=>(he[0]=Math.min(rt.min.x,Pt.min.x),he[1]=Math.max(rt.max.x,Pt.max.x),he[2]=l.a3-Pt.min.y>rt.max.y?Pt.min.y-l.a3:rt.max.y,he),Fe=[(rt,Pt)=>ye(rt,Pt),(rt,Pt)=>ye(Pt,rt),(rt,Pt)=>Pe(rt,Pt),(rt,Pt)=>Pe(Pt,rt)],Qe=(rt,Pt,Bt,Ft,tn,en,_n)=>{if(!R)return 0;const at=[[en?Bt:rt,en?rt:Bt,0],[en?Bt:Pt,en?Pt:Bt,0]],$t=_n<0?l.a3+_n:_n,Tn=[en?$t:(rt+Pt)/2,en?(rt+Pt)/2:$t,0];return 0===Bt&&_n<0||0!==Bt&&_n>0?R.getForTilePoints(tn,[Tn],!0,Ft):at.push(Tn),R.getForTilePoints(d,at,!0,H),Math.max(at[0][2],at[1][2],Tn[2])/R.exaggeration()};for(let rt=0;rt<4;rt++){const Pt=b.borderFeatureIndices[rt];if(0===Pt.length)continue;const Bt=l.bZ[rt](d),Ft=se(Bt);if(!(Ft&&Ft instanceof l.b_)||b.borderDoneWithNeighborZ[rt]===Ft.canonical.z)continue;0===Ft.centroidVertexArray.length&&Ft.createCentroidsBuffer();const tn=R?R.findDEMTileFor(Bt):null;if(!(tn&&tn.dem||N))continue;const en=(rt<2?1:5)-rt,_n=Ft.borderDoneWithNeighborZ[en]!==b.canonical.z,at=Ft.borderFeatureIndices[en];let $t=0;if(b.canonical.z!==Ft.canonical.z){for(const Tn of Pt)b.showCentroid(b.featuresOnBorder[Tn]);if(_n)for(const Tn of at)Ft.showCentroid(Ft.featuresOnBorder[Tn]);b.borderDoneWithNeighborZ[rt]=Ft.canonical.z,Ft.borderDoneWithNeighborZ[en]=b.canonical.z}for(const Tn of Pt){const ci=b.featuresOnBorder[Tn],zn=b.centroidData[ci.centroidDataIndex],mn=ci.borders[rt];let _i;for(;$t<at.length;){_i=Ft.featuresOnBorder[at[$t]];const eo=_i.borders[en];if(eo[1]>mn[0]+3||eo[0]>mn[0]-3)break;Ft.showCentroid(_i),$t++}if(_i&&$t<at.length){const eo=$t;let io=0;for(;!(_i.borders[en][0]>mn[1]-3)&&(io++,++$t!==at.length);)_i=Ft.featuresOnBorder[at[$t]];if(_i=Ft.featuresOnBorder[at[eo]],io>1){const j=_i.borders[en];Math.abs(mn[0]-j[0])<3&&Math.abs(mn[1]-j[1])<3&&(io=1,$t=eo+1)}else if(0===io){b.showCentroid(ci);continue}const ie=Ft.centroidData[_i.centroidDataIndex];N&&1===io&&(((Je=zn).flags|(tt=ie).flags)&l.b$?(Je.flags|=l.b$,tt.flags|=l.b$):(Je.flags&=~l.b$,tt.flags&=~l.b$));const L=ci.intersectsCount()>1||_i.intersectsCount()>1;if(io>1)$t=eo,zn.centroidXY=ie.centroidXY=new l.P(0,0);else if(tn&&tn.dem&&!L){const j=Fe[rt](zn,ie),oe=rt%2?l.a3-1:0,Ve=Qe(j[0],Math.min(l.a3-1,j[1]),oe,tn,Bt,rt<2,j[2]);zn.centroidXY=ie.centroidXY=ee(Ve)}else L?zn.centroidXY=ie.centroidXY=new l.P(0,0):(zn.centroidXY=b.encodeBorderCentroid(ci),ie.centroidXY=Ft.encodeBorderCentroid(_i));b.writeCentroidToBuffer(zn),Ft.writeCentroidToBuffer(ie)}else b.showCentroid(ci)}b.borderDoneWithNeighborZ[rt]=Ft.canonical.z,Ft.borderDoneWithNeighborZ[en]=b.canonical.z}var Je,tt;(b.needsCentroidUpdate||!b.centroidVertexBuffer&&0!==b.centroidVertexArray.length)&&b.uploadCentroid(v)}const I0=[1,0,0],Bl=[0,1,0],ku=[0,0,1];function Hh(v,r,d){const b=d.transform,M=d.shadowRenderer;if(!M)return!0;const R=v.toUnwrapped(),N=b.tileSize*M._cascades[d.currentShadowCascade].scale;let H=r.maxHeight;if(b.elevation){const Je=b.elevation.getMinMaxForTile(v);Je&&(H+=Je.max)}const ee=[...M.shadowDirection];ee[2]=-ee[2];const se=M.computeSimplifiedTileShadowVolume(R,H,N,ee);if(!se)return!1;const he=[I0,Bl,ku,ee,[ee[0],0,ee[2]],[0,ee[1],ee[2]]],ye="globe"===b.projection.name,Pe=b.scaleZoom(N),Fe=l.aM.fromInvProjectionMatrix(b.invProjMatrix,b.worldSize,Pe,!ye),Qe=M.getCurrentCascadeFrustum();return 0===Fe.intersectsPrecise(se.vertices,se.planes,he)||0===Qe.intersectsPrecise(se.vertices,se.planes,he)}function Pd(v){return[v[0]*l.c2,v[1]*l.c2,v[2]*l.c2,0]}function bc(v,r,d,b,M,R,N,H,ee){const se=b.getSource(),he=d.globeSharedBuffers;if(!he)return;let ye,Pe,Fe;if(r&&(ye=b.getTile(r)),se instanceof l.bm?(Pe=se.texture,Fe=l.bh(0,0,d.transform)):ye&&r&&(Pe=ye.texture,Fe=l.bh(r.canonical.z,r.canonical.x,d.transform)),!Pe||!Fe)return;v||(Fe=l.ad.scale(l.ad.create(),Fe,[1,-1,1]));const Qe=d.context,Je=Qe.gl,tt="nearest"===M.paint.get("raster-resampling")?Je.NEAREST:Je.LINEAR,rt=d.colorModeForDrapableLayerRenderPass(R),Pt=N.defines;Pt.push("GLOBE_POLES");const Bt=new l.ae(Je.LEQUAL,l.ae.ReadWrite,d.depthRangeFor3D),Ft=Float32Array.from(d.transform.expandedFarZProjMatrix),tn=Float32Array.from(l.bf(l.bg(new l.aO(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),Qe.activeTexture.set(Je.TEXTURE0),Pe.bind(tt,Je.CLAMP_TO_EDGE),Qe.activeTexture.set(Je.TEXTURE1),Pe.bind(tt,Je.CLAMP_TO_EDGE),Pe.useMipmap&&Qe.extTextureFilterAnisotropic&&d.transform.pitch>20&&Je.texParameterf(Je.TEXTURE_2D,Qe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Qe.extTextureFilterAnisotropicMax);const[en,_n,at,$t]=r?he.getPoleBuffers(r.canonical.z,!1):he.getPoleBuffers(0,!0),Tn=M.paint.get("raster-elevation");let ci;v?(ci=en,d.renderDefaultNorthPole=0!==Tn):(ci=_n,d.renderDefaultSouthPole=0!==Tn);const zn=Pd(N.mix),mn=(eo=Ft,io=tn,ie=Fe,L=l.a1(d.transform.zoom),oe=M,lt=Tn,hn=zn,Qn=N.offset,Wn=N.range,Wi=R,_l(eo,io,ie,new Float32Array(16),new Float32Array(9),[0,0],L,[0,0],[0,0,0,0],1,{opacity:1,mix:0},oe,[0,0],lt,2,hn,Qn,Wn,1,0,Wi)),_i=d.getOrCreateProgram("raster",{defines:Pt});var eo,io,ie,L,oe,lt,hn,Qn,Wn,Wi;d.uploadCommonUniforms(Qe,_i,null),_i.draw(d,Je.TRIANGLES,Bt,ee,rt,H,mn,M.id,ci,at,$t)}function qd(v){const r=v._nearZ,d=v.projection.farthestPixelDistance(v),b=d-r,M=.2*v.height,R=r+M;return[r,d,(R-M-r)/b,(R-r)/b]}function Xs(v,r,d,b){if(v)return r instanceof Mi&&v instanceof l.c3?r.getTextureDescriptor(v,d,!0):{texture:v.texture,mix:Pd(b.mix),offset:b.offset,buffer:0,tileSize:1}}function E0(v,r,d){if(!v)return null;const b=r.getTextureDescriptor(v,d,!0);if(!b)return null;let{texture:M,mix:R,offset:N,tileSize:H,buffer:ee,format:se}=b;if(!M||!se)return null;let he=!1;return"uint32"===se&&(he=!0,R[3]=0,R=Tr(l.c4,R,[0,d.paint.get("raster-particle-max-speed")]),N=Wa(l.c4,N,[0,d.paint.get("raster-particle-max-speed")])),{texture:M,textureOffset:[ee/(H+2*ee),H/(H+2*ee)],tileSize:H,scalarData:he,scale:R,offset:N,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[se]]}}function Rr(v){const r=v._nearZ,d=v.projection.farthestPixelDistance(v),b=d-r,M=.2*v.height,R=r+M;return[r,d,(R-M-r)/b,(R-r)/b]}const yd=new l.C(1,0,0,1),Rd=new l.C(0,1,0,1),cl=new l.C(0,0,1,1),fu=new l.C(1,0,1,1),Su=new l.C(0,1,1,1);function fe(v,r,d,b,M,R,N){const H=v.context,ee=v.transform,se=H.gl,he="globe"===ee.projection.name,ye=he?["PROJECTION_GLOBE_VIEW"]:[];let Pe=l.ad.clone(d.projMatrix);if(he&&l.a1(ee.zoom)>0){const zn=l.c5(d.canonical,ee),mn=l.c6(zn);Pe=l.ad.multiply(new Float32Array(16),ee.globeMatrix,mn),l.ad.multiply(Pe,ee.projMatrix,Pe)}const Fe=l.ad.create();Fe[12]+=2*M/(l.e.devicePixelRatio*ee.width),Fe[13]+=2*R/(l.e.devicePixelRatio*ee.height),l.ad.multiply(Pe,Fe,Pe);const Qe=v.getOrCreateProgram("debug",{defines:ye}),Je=r.getTileByID(d.key);v.terrain&&v.terrain.setupElevationDraw(Je,Qe);const tt=l.ae.disabled,rt=l.ag.disabled,Pt=v.colorModeForRenderPass();H.activeTexture.set(se.TEXTURE0),v.emptyTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),he?Je._makeGlobeTileDebugBuffers(v.context,ee):Je._makeDebugTileBoundsBuffers(v.context,ee.projection);const Ft=Je._tileDebugBuffer||v.debugBuffer,tn=Je._tileDebugIndexBuffer||v.debugIndexBuffer,en=Je._tileDebugSegments||v.debugSegments;if(Qe.draw(v,se.LINE_STRIP,tt,rt,Pt,l.af.disabled,He(Pe,b),"$debug",Ft,tn,en,null,null,null,[Je._globeTileDebugBorderBuffer]),N){const zn=Je.latestRawTileData,mn=Math.floor((zn&&zn.byteLength||0)/1024);let _i=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(_i+=` => ${d.overscaledZ}`),_i+=` ${Je.state}`,_i+=` ${mn}kb`,function(eo,io){eo.initDebugOverlayCanvas();const ie=eo.debugOverlayCanvas,L=eo.context.gl,j=eo.debugOverlayCanvas.getContext("2d");j.clearRect(0,0,ie.width,ie.height),j.shadowColor="white",j.shadowBlur=2,j.lineWidth=1.5,j.strokeStyle="white",j.textBaseline="top",j.font="bold 36px Open Sans, sans-serif",j.fillText(io,5,5),j.strokeText(io,5,5),eo.debugOverlayTexture.update(ie),eo.debugOverlayTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE)}(v,_i)}const _n=r.getTile(d).tileSize,at=512/Math.min(_n,512)*(d.overscaledZ/ee.zoom)*.5,$t=Je._tileDebugTextBuffer||v.debugBuffer,Tn=Je._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,ci=Je._tileDebugTextSegments||v.debugSegments;Qe.draw(v,se.TRIANGLES,tt,rt,l.a.alphaBlended,l.af.disabled,He(Pe,l.C.transparent,at),"$debug",$t,Tn,ci,null,null,null,[Je._globeTileDebugTextBuffer])}function Ce(v,r,d,b){Ie(v,0,r+d/2,v.transform.width,d,b)}function Nt(v,r,d,b){Ie(v,r-d/2,0,d,v.transform.height,b)}function Ie(v,r,d,b,M,R){const N=v.context,H=N.gl;H.enable(H.SCISSOR_TEST),H.scissor(r*l.e.devicePixelRatio,d*l.e.devicePixelRatio,b*l.e.devicePixelRatio,M*l.e.devicePixelRatio),N.clear({color:R}),H.disable(H.SCISSOR_TEST)}const Gt=l.c7([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Dn}=Gt;function pi(v,r,d,b){v.emplaceBack(r,d,b)}class ir{constructor(r){this.vertexArray=new l.c8,this.indices=new l.bu,pi(this.vertexArray,-1,-1,1),pi(this.vertexArray,1,-1,1),pi(this.vertexArray,-1,1,1),pi(this.vertexArray,1,1,1),pi(this.vertexArray,-1,-1,-1),pi(this.vertexArray,1,-1,-1),pi(this.vertexArray,-1,1,-1),pi(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=r.createVertexBuffer(this.vertexArray,Dn),this.indexBuffer=r.createIndexBuffer(this.indices),this.segment=l.b.simpleSegment(0,0,36,12)}}function fs(v,r,d,b,M,R){const N=v.context.gl,H=r.paint.get("sky-atmosphere-color"),ee=r.paint.get("sky-atmosphere-halo-color"),se=r.paint.get("sky-atmosphere-sun-intensity"),he={u_matrix_3f:l.bC.fromMat4(l.bC.create(),b),u_sun_direction:M,u_sun_intensity:se,u_color_tint_r:[(Qe=H).r,Qe.g,Qe.b,Qe.a],u_color_tint_m:[(Je=ee).r,Je.g,Je.b,Je.a],u_luminance:5e-5};var Qe,Je;N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_CUBE_MAP_POSITIVE_X+R,r.skyboxTexture,0),d.draw(v,N.TRIANGLES,l.ae.disabled,l.ag.disabled,l.a.unblended,l.af.frontCW,he,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}const na=l.c7([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ws{constructor(r){const d=new l.c9;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const b=new l.bu;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=r.createVertexBuffer(d,na.members),this.indexBuffer=r.createIndexBuffer(b),this.segments=l.b.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const $r=l.c7([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Fa{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class la{constructor(r){this.colorModeAlphaBlendedWriteRGB=new l.a([l.ca,l.cb,l.ca,l.cb],l.C.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new l.a([l.ca,l.cc,l.ca,l.cc],l.C.transparent,[!1,!1,!1,!0]),this.params=new Fa,this.updateNeeded=!0,r.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),r.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),r.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),r.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(r){const d=r.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Ws(d);const b=this.params.sizeRange,M=this.params.intensityRange,R=function(he){const ye=l.cf(30),Pe=[];for(let Fe=0;Fe<he;++Fe){const Qe=2*Math.PI*ye(),Je=Math.acos(1-2*ye())-.5*Math.PI;Pe.push(l._.fromValues(Math.cos(Je)*Math.cos(Qe),Math.cos(Je)*Math.sin(Qe),Math.sin(Je)))}return Pe}(this.params.starsCount),N=l.cf(300),H=new l.cd,ee=new l.bu;let se=0;for(let he=0;he<R.length;++he){const ye=l._.scale([],R[he],200),Pe=Math.max(0,1+.01*b*(1*N()-.5)),Fe=Math.max(0,1+.01*M*(1*N()-.5));H.emplaceBack(ye[0],ye[1],ye[2],-1,-1,Pe,Fe),H.emplaceBack(ye[0],ye[1],ye[2],1,-1,Pe,Fe),H.emplaceBack(ye[0],ye[1],ye[2],1,1,Pe,Fe),H.emplaceBack(ye[0],ye[1],ye[2],-1,1,Pe,Fe),ee.emplaceBack(se+0,se+1,se+2),ee.emplaceBack(se+0,se+2,se+3),se+=4}this.starsVx=d.createVertexBuffer(H,$r.members),this.starsIdx=d.createIndexBuffer(ee),this.starsSegments=l.b.simpleSegment(0,0,H.length,ee.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(r,d){const b=r.context,M=b.gl,R=r.transform,N=new l.ae(M.LEQUAL,l.ae.ReadOnly,[0,1]),H=l.a1(R.zoom),ee=r.style.getLut(d.scope),se=d.properties.get("color").toRenderColor(ee).toArray01(),he=d.properties.get("high-color").toRenderColor(ee).toArray01(),ye=d.properties.get("space-color").toRenderColor(ee).toArray01PremultipliedAlpha(),Fe=l.ce(d.properties.get("horizon-blend"),0,1,5e-4,.25),Qe=l.ba(r,b,R)&&5e-4===Fe?R.worldSize/(2*Math.PI*1.025)-1:R.globeRadius,Je=r.frameCounter/1e3%1,tt=l._.length(R.globeCenterInViewSpace),rt=Math.sqrt(Math.pow(tt,2)-Math.pow(Qe,2)),Pt=Math.acos(rt/tt),Bt=Ft=>{const tn="globe"===R.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Ft&&tn.push("ALPHA_PASS");const en=r.getOrCreateProgram("globeAtmosphere",{defines:tn}),_n=(($t,Tn,ci,zn,mn,_i,eo,io,ie,L,j,oe)=>({u_frustum_tl:$t,u_frustum_tr:Tn,u_frustum_br:ci,u_frustum_bl:zn,u_horizon:mn,u_transition:_i,u_fadeout_range:eo,u_color:io,u_high_color:ie,u_space_color:L,u_temporal_offset:j,u_horizon_angle:oe}))(R.frustumCorners.TL,R.frustumCorners.TR,R.frustumCorners.BR,R.frustumCorners.BL,R.frustumCorners.horizon,H,Fe,se,he,ye,Je,Pt);r.uploadCommonUniforms(b,en);const at=this.atmosphereBuffer;at&&en.draw(r,M.TRIANGLES,N,l.ag.disabled,Ft?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,l.af.backCW,_n,Ft?"atmosphere_glow_alpha":"atmosphere_glow",at.vertexBuffer,at.indexBuffer,at.segments)};Bt(!1),Bt(!0)}drawStars(r,d){const b=l.at(d.properties.get("star-intensity"),0,1);if(0===b)return;const M=r.context,R=M.gl,N=r.transform,H=r.getOrCreateProgram("stars"),ee=l.av.identity([]);l.av.rotateX(ee,ee,-N._pitch),l.av.rotateZ(ee,ee,-N.angle),l.av.rotateX(ee,ee,l.ab(N._center.lat)),l.av.rotateY(ee,ee,-l.ab(N._center.lng));const se=l.ad.fromQuat(new Float32Array(16),ee),he=l.ad.multiply([],N.starsProjMatrix,se),ye=l.bC.fromMat4([],se),Pe=l.bC.invert([],ye),Fe=[0,1,0];l._.transformMat3(Fe,Fe,Pe),l._.scale(Fe,Fe,this.params.sizeMultiplier);const Qe=[1,0,0];l._.transformMat3(Qe,Qe,Pe),l._.scale(Qe,Qe,this.params.sizeMultiplier);const Je=(tt=Fe,rt=Qe,Pt=b,{u_matrix:Float32Array.from(he),u_up:tt,u_right:rt,u_intensity_multiplier:Pt});var tt,rt,Pt;r.uploadCommonUniforms(M,H),this.starsVx&&this.starsIdx&&H.draw(r,R.TRIANGLES,l.ae.disabled,l.ag.disabled,this.colorModeAlphaBlendedWriteRGB,l.af.disabled,Je,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Wl(v,r){const d=[...v],b=r.cameraWorldSizeForFog/r.worldSize,M=l.ad.identity([]);return l.ad.scale(M,M,[b,b,1]),l.ad.multiply(d,M,d),l.ad.multiply(d,r.worldToFogMatrix,d),d}function Tl(v,r,d,b,M){const R=d.material,N=b.context,{baseColorTexture:H,metallicRoughnessTexture:ee}=R.pbrMetallicRoughness,{normalTexture:se,occlusionTexture:he,emissionTexture:ye}=R;function Pe(Fe,Qe,Je){if(Fe&&(v.push(Qe),N.activeTexture.set(N.gl.TEXTURE0+Je),Fe.gfxTexture)){const{minFilter:tt,magFilter:rt,wrapS:Pt,wrapT:Bt}=Fe.sampler;Fe.gfxTexture.bindExtraParam(tt,rt,Pt,Bt)}}Pe(H,"HAS_TEXTURE_u_baseColorTexture",Os.BaseColor),Pe(ee,"HAS_TEXTURE_u_metallicRoughnessTexture",Os.MetallicRoughness),Pe(se,"HAS_TEXTURE_u_normalTexture",Os.Normal),Pe(he,"HAS_TEXTURE_u_occlusionTexture",Os.Occlusion),Pe(ye,"HAS_TEXTURE_u_emissionTexture",Os.Emission),M&&(M.texture||(M.texture=new l.ch(b.context,M.image,[M.image.height,M.image.height,M.image.height],N.gl.RGBA)),N.activeTexture.set(N.gl.TEXTURE0+Os.LUT),M.texture&&M.texture.bind(N.gl.LINEAR,N.gl.CLAMP_TO_EDGE),v.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(v.push("HAS_ATTRIBUTE_a_uv_2f"),r.push(d.texcoordBuffer)),d.colorBuffer&&(v.push(12===d.colorBuffer.itemSize?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),r.push(d.colorBuffer)),d.normalBuffer&&(v.push("HAS_ATTRIBUTE_a_normal_3f"),r.push(d.normalBuffer)),d.pbrBuffer&&(v.push("HAS_ATTRIBUTE_a_pbr"),v.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),r.push(d.pbrBuffer)),"OPAQUE"!==R.alphaMode&&"MASK"!==R.alphaMode||v.push("UNPREMULT_TEXTURE_IN_SHADER"),R.defined||v.push("DIFFUSE_SHADED"),v.push("USE_STANDARD_DERIVATIVES")}function ul(v,r,d,b,M,R){const N=d.paint.get("model-opacity"),H=r.context,ee=new l.ae(r.context.gl.LEQUAL,l.ae.ReadWrite,r.depthRangeFor3D),se=r.transform,he=v.mesh,ye=he.material,Pe=ye.pbrMetallicRoughness,Fe=r.style.fog;let Qe;Qe="pixels"===r.transform.projection.zAxisUnit?[...v.nodeModelMatrix]:l.ad.multiply([],b.zScaleMatrix,v.nodeModelMatrix),l.ad.multiply(Qe,b.negCameraPosMatrix,Qe);const Je=l.ad.invert([],Qe);l.ad.transpose(Je,Je);const tt=d.paint.get("model-emissive-strength").constantOr(0),rt=Ih(new Float32Array(v.worldViewProjection),new Float32Array(Qe),new Float32Array(Je),null,r,N,Pe.baseColorFactor.toRenderColor(null),ye.emissiveFactor,Pe.metallicFactor,Pe.roughnessFactor,ye,tt,d),Pt={defines:[]},Bt=[];Tl(Pt.defines,Bt,he,r,d.lut);const Ft=r.shadowRenderer;Ft&&(Ft.useNormalOffset=!1);let tn=null;if(Fe){const at=Wl(v.nodeModelMatrix,r.transform);if(tn=new Float32Array(at),"globe"!==se.projection.name){const $t=he.aabb.min,Tn=he.aabb.max,[ci,zn]=Fe.getOpacityForBounds(at,$t[0],$t[1],Tn[0],Tn[1]);Pt.overrideFog=ci>=pr||zn>=pr}}const en=Yc(r,d.paint.get("model-cutoff-fade-range"));en.shouldRenderCutoff&&Pt.defines.push("RENDER_CUTOFF");const _n=r.getOrCreateProgram("model",Pt);r.uploadCommonUniforms(H,_n,null,tn,en),"shadow"!==r.renderPass&&Ft&&Ft.setupShadowsFromMatrix(v.nodeModelMatrix,_n),_n.draw(r,H.gl.TRIANGLES,ee,M,R,he.material.doubleSided?l.af.disabled:l.af.backCCW,rt,d.id,he.vertexBuffer,he.indexBuffer,he.segments,d.paint,r.transform.zoom,void 0,Bt)}function ma(v,r,d,b,M,R,N){let H;H="globe"===v.projection.name?l.ci(d,v):[...d],l.ad.multiply(H,H,r.matrix);const ee=l.ad.multiply([],b,H);if(r.meshes)for(const se of r.meshes){if("BLEND"!==se.material.alphaMode){N.push({mesh:se,depth:0,modelIndex:M,worldViewProjection:ee,nodeModelMatrix:H});continue}const he=l._.transformMat4([],se.centroid,ee);he[2]>0&&R.push({mesh:se,depth:he[2],modelIndex:M,worldViewProjection:ee,nodeModelMatrix:H})}if(r.children)for(const se of r.children)ma(v,se,d,b,M,R,N)}function Ta(v,r,d,b){const M=d.shadowRenderer;if(!M)return;const R=M.getShadowPassDepthMode(),N=M.getShadowPassColorMode(),H=M.calculateShadowPassMatrixFromMatrix(r),ee=Cu(H);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,R,l.ag.disabled,N,l.af.backCCW,ee,b.id,v.vertexBuffer,v.indexBuffer,v.segments,b.paint,d.transform.zoom,void 0,void 0)}function hc(v,r,d){const b=r.updateZoomBasedPaintProperties(),M=function(R,N,H){let ee,se,he,ye=R.terrain?R.terrain.exaggeration():0;if(R.terrain&&ye>0){const Pe=R.terrain,Fe=Pe.findDEMTileFor(H);Fe&&Fe.dem?ee=l.ck.create(Pe,H,Fe):ye=0}if(0===ye&&(N.terrainElevationMin=0,N.terrainElevationMax=0),ye===N.validForExaggeration&&(0===ye||ee&&ee._demTile&&ee._demTile.tileID===N.validForDEMTile.id&&ee._dem._timestamp===N.validForDEMTile.timestamp))return!1;for(const Pe in N.instancesPerModel){const Fe=N.instancesPerModel[Pe];for(let Qe=0;Qe<Fe.instancedDataArray.length;++Qe){const Je=(ee?ye*ee.getElevationAt(0|Fe.instancedDataArray.float32[16*Qe],0|Fe.instancedDataArray.float32[16*Qe+1],!0,!0):0)+Fe.instancesEvaluatedElevation[Qe];Fe.instancedDataArray.float32[16*Qe+6]=Je,se=se?Math.min(N.terrainElevationMin,Je):Je,he=he?Math.max(N.terrainElevationMax,Je):Je}}return N.terrainElevationMin=se||0,N.terrainElevationMax=he||0,N.validForExaggeration=ye,N.validForDEMTile=ee&&ee._demTile?{id:ee._demTile.tileID,timestamp:ee._dem._timestamp}:{id:void 0,timestamp:0},!0}(v,r,d);(b||M)&&(r.uploaded=!1,r.upload(v.context))}const Ka={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new l.b6([0,0,0],[l.a3,l.a3,0])};function wc(v,r){const d=1<<v.canonical.z,b=r.getFreeCameraOptions().position,M=r.elevation,R=v.canonical.x/d,N=(v.canonical.x+1)/d,H=v.canonical.y/d,ee=(v.canonical.y+1)/d;let se=r._centerAltitude;if(M){const Fe=M.getMinMaxForTile(v);Fe&&Fe.max>se&&(se=Fe.max)}const he=l.at(b.x,R,N)-b.x,ye=l.at(b.y,H,ee)-b.y,Pe=l.ax(se,r.center.lat)-b.z;return r._zoomFromMercatorZ(Math.sqrt(he*he+ye*ye+Pe*Pe))}function Ya(v,r,d,b,M,R,N){const H=v.context,ee="shadow"===v.renderPass,se=v.shadowRenderer,he=ee&&se?se.getShadowPassDepthMode():new l.ae(H.gl.LEQUAL,l.ae.ReadWrite,v.depthRangeFor3D),ye=v.isTileAffectedByFog(R);if(d.meshes)for(const Pe of d.meshes){const Fe=["MODEL_POSITION_ON_GPU"],Qe=[];let Je,tt,rt;b.instancedDataArray.length>20&&Fe.push("INSTANCED_ARRAYS");const Pt=Yc(v,r.paint.get("model-cutoff-fade-range"));if(Pt.shouldRenderCutoff&&Fe.push("RENDER_CUTOFF"),ee&&se)Je=v.getOrCreateProgram("modelDepth",{defines:Fe}),tt=Cu(N.shadowTileMatrix,N.shadowTileMatrix,Float32Array.from(d.matrix)),rt=se.getShadowPassColorMode();else{Tl(Fe,Qe,Pe,v,r.lut),Je=v.getOrCreateProgram("model",{defines:Fe,overrideFog:ye});const Ft=Pe.material,tn=Ft.pbrMetallicRoughness,en=r.paint.get("model-opacity"),_n=r.paint.get("model-emissive-strength").constantOr(0);tt=Ih(R.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,v,en,tn.baseColorFactor.toRenderColor(null),Ft.emissiveFactor,tn.metallicFactor,tn.roughnessFactor,Ft,_n,r,M),se&&(N.shadowUniformsInitialized?Je.setShadowUniformValues(H,se.getShadowUniformValues()):(se.setupShadows(R.toUnwrapped(),Je,"model-tile",R.overscaledZ),N.shadowUniformsInitialized=!0)),rt=Pt.shouldRenderCutoff||en<1||"OPAQUE"!==Ft.alphaMode?l.a.alphaBlended:l.a.unblended}v.uploadCommonUniforms(H,Je,R.toUnwrapped(),null,Pt);const Bt=Pe.material.doubleSided?l.af.disabled:l.af.backCCW;if(b.instancedDataArray.length>20)Qe.push(b.instancedDataBuffer),Je.draw(v,H.gl.TRIANGLES,he,l.ag.disabled,rt,Bt,tt,r.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments,r.paint,v.transform.zoom,void 0,Qe,b.instancedDataArray.length);else{const Ft=ee?"u_instance":"u_normal_matrix";for(let tn=0;tn<b.instancedDataArray.length;++tn)tt[Ft]=new Float32Array(b.instancedDataArray.arrayBuffer,64*tn,16),Je.draw(v,H.gl.TRIANGLES,he,l.ag.disabled,rt,Bt,tt,r.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments,r.paint,v.transform.zoom,void 0,Qe)}}if(d.children)for(const Pe of d.children)Ya(v,r,Pe,b,M,R,N)}const ad=[1,-1,1];function Xd(v,r,d,b){if(!d.modelManager)return!0;const M=d.modelManager;if(!d.shadowRenderer)return!0;const R=d.shadowRenderer,N=r.aabb;let H=!0,ee=v.maxHeight;if(0===ee){let he=0;for(const ye in v.instancesPerModel){const Pe=M.getModel(ye,b);Pe?he=Math.max(he,Math.max(Math.max(Pe.aabb.max[0],Pe.aabb.max[1]),Pe.aabb.max[2])):H=!1}ee=v.maxScale*he*1.41+v.maxVerticalOffset,H&&(v.maxHeight=ee)}N.max[2]=ee,N.min[2]+=v.terrainElevationMin,N.max[2]+=v.terrainElevationMax,l._.transformMat4(N.min,N.min,r.tileMatrix),l._.transformMat4(N.max,N.max,r.tileMatrix);const se=N.intersects(R.getCurrentCascadeFrustum());return 0===d.currentShadowCascade&&(v.isInsideFirstShadowMapFrustum=2===se),0===se}function Nl(v,r){const d=v.uniformValues.u_cutoff_params[0],b=v.uniformValues.u_cutoff_params[1],M=v.uniformValues.u_cutoff_params[2],R=v.uniformValues.u_cutoff_params[3];return b===d||R===M?1:l.at(((r-d)/(b-d)-M)/(R-M),0,1)}function tc(v,r,d,b){if(r.pitch<20)return 1;const M=r.getWorldToCameraMatrix(),R=l.ad.multiply([],M,v),N=[...d.min,1];let H=l.aA.transformMat4([],N,R),ee=H,se=H;N[1]=d.max[1],H=l.aA.transformMat4([],N,R),ee=H[1]<ee[1]?H:ee,se=H[1]>se[1]?H:se,N[0]=d.max[0],H=l.aA.transformMat4([],N,R),ee=H[1]<ee[1]?H:ee,se=H[1]>se[1]?H:se,N[1]=d.min[1],H=l.aA.transformMat4([],N,R),ee=H[1]<ee[1]?H:ee,se=H[1]>se[1]?H:se;const he=l.at(b[0],0,1),ye=100*r.pixelsPerMeter*l.at(b[1],0,1),Pe=l.at(b[2],0,1),Fe=l._.lerp([],ee,se,he),Qe=Math.tan(.5*r.fovX),Je=-Fe[2]*Qe;if(0===ye)return Fe[1]<-Math.abs(Je)?Pe:1;const tt=(-Math.abs(Je)-Fe[1])/ye,rt=(Bt,Ft,tn)=>(1-tn)*Bt+tn*Ft,Pt=l.at(rt(1,Pe,tt),Pe,1);return rt(1,Pt,l.at((r.pitch-20)/20,0,1))}class ld{}class bd{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(r,d,b){{const ye=this._storage.get(d.id);if(ye)return ye.lastUsedFrameIdx=r,ye.buf}const M=b.gl,R=M.getBufferParameter(M.ELEMENT_ARRAY_BUFFER,M.BUFFER_SIZE),N=new ArrayBuffer(R),H=new Int16Array(N);M.getBufferSubData(M.ELEMENT_ARRAY_BUFFER,0,new Int16Array(N));const ee=new l.cm;for(let ye=0;ye<R/2;ye+=3){const Pe=H[ye],Fe=H[ye+1],Qe=H[ye+2];ee.emplaceBack(Pe,Fe),ee.emplaceBack(Fe,Qe),ee.emplaceBack(Qe,Pe)}const se=b.bindVertexArrayOES.current,he=new ld;return he.buf=new l.I(b,ee),he.lastUsedFrameIdx=r,this._storage.set(d.id,he),b.bindVertexArrayOES.set(se),he.buf}update(r){for(const[d,b]of this._storage)r-b.lastUsedFrameIdx>30&&(b.buf.destroy(),this._storage.delete(d))}destroy(){for(const[r,d]of this._storage)d.buf.destroy(),this._storage.delete(r)}}const Fl=l.c7([{type:"Float32",name:"a_offset_xy",components:2}]);class cd{constructor(r){const d=new l.cn,b=new l.bu;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1),b.emplaceBack(0,1,2),b.emplaceBack(0,2,3),this.segments=l.b.simpleSegment(0,0,d.length,b.length),this.vx=r.createVertexBuffer(d,Fl.members),this.idx=r.createIndexBuffer(b)}destroy(){this.vx.destroy(),this.idx.destroy()}}const zc={symbol:function(v,r,d,b,M){if("translucent"!==v.renderPass)return;const R=l.ag.disabled,N=v.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(se,he,ye,Pe,Fe,Qe,Je){const tt=he.transform,rt="map"===Fe,Pt="map"===Qe;for(const Bt of se){const Ft=Pe.getTile(Bt),tn=Ft.getBucket(ye);if(!tn||!tn.text||!tn.text.segments.get().length)continue;const en=l.aD(tn.textSizeData,tt.zoom),_n=dc(Bt,tn.getProjection(),tt),at=tt.calculatePixelsToTileUnitsMatrix(Ft),$t=On(_n,Ft.tileID.canonical,Pt,rt,tt,tn.getProjection(),at),Tn=tn.hasIconTextFit()&&tn.hasIconData();if(en){const ci=Math.pow(2,tt.zoom-Ft.tileID.overscaledZ);w0(tn,rt,Pt,Je,l.bO,tt,$t,Bt,ci,en,Tn)}}}(b,v,d,r,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),M);const H=0!==d.paint.get("icon-opacity").constantOr(1),ee=0!==d.paint.get("text-opacity").constantOr(1);void 0!==d.layout.get("symbol-sort-key").constantOr(1)&&(H||ee)?x0(v,r,d,b,R,N):(H&&x0(v,r,d,b,R,N,{onlyIcons:!0}),ee&&x0(v,r,d,b,R,N,{onlyText:!0}),function(se,he,ye,Pe){if(!se.symbolParams.useOcclusionQueries)return;const Fe=se.context.gl,Qe=se.transform,Je=ye.paint,tt=Je.get("icon-occlusion-opacity").constantOr(0),rt=Je.get("text-occlusion-opacity").constantOr(0);if(!ye.hasInitialOcclusionOpacityProperties||1===tt&&1===rt)return;const Pt="globe"===Qe.projection.name;for(const Bt of Pe){const Ft=he.getTile(Bt),tn=Ft.getBucket(ye);if(!tn||"mercator"===tn.projection.name&&Pt||tn.fullyClipped)continue;if("globe"===tn.projection.name){l.w(`Occlusion not supported for globe mode. Layer: ${ye.type}`);continue}const en=dc(Bt,tn.getProjection(),Qe),_n=l.ad.fromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,se.symbolParams.depthOffset,1),at=l.ad.multiply([],_n,en),$t="none"!==se.symbolParams.visualizeOcclusions?1:se.symbolParams.occlusionQueryFrameWindow;for(let Tn=0;Tn<tn.symbolInstances.length;Tn++){const ci=tn.symbolInstances.get(Tn),zn=se.style.placement.opacities[ci.crossTileID];if(zn&&zn.isHidden()||(se.frameCounter+Tn)%$t!=0)continue;const mn=ci.tileAnchorX,_i=ci.tileAnchorY,eo=ci.zOffset;let io;if("none"===se.symbolParams.visualizeOcclusions){const Ve=tn.queries.get(Tn);if(Ve){if(!Ve.isFree()){if(!Ve.isResultAvailable())continue;const lt=Ve.consumeResult();ci.occlusionState=0===lt?0:1;continue}io=Ve}else io=new Ts(se.context),tn.queries.set(Tn,io)}const ie=se.getOrCreateProgram("occlusion"),L=se.symbolParams.occluderSize,j=dh(at,[mn,_i,eo],[Qe.width,Qe.height],[L,L],"zPass"===se.symbolParams.visualizeOcclusions?[1,0,0,.8]:[1,.4,.2,.9]);se.terrain&&se.terrain.setupElevationDraw(Ft,ie,{useDepthForOcclusion:!1,labelPlaneMatrixInv:void 0}),"none"===se.symbolParams.visualizeOcclusions&&io&&io.begin();const oe=new l.ae("zPass"===se.symbolParams.visualizeOcclusions?se.context.gl.ALWAYS:se.context.gl.LEQUAL,l.ae.ReadOnly,se.depthRangeFor3D);ie.draw(se,Fe.TRIANGLES,oe,l.ag.disabled,"none"!==se.symbolParams.visualizeOcclusions?l.a.alphaBlendedNonPremultiplied:l.a.disabled,l.af.disabled,j,"occlusion",se.occlusionBuffers.vx,se.occlusionBuffers.idx,se.occlusionBuffers.segments),"none"===se.symbolParams.visualizeOcclusions&&io&&io.end()}}}(v,r,d,b)),r.map.showCollisionBoxes&&(Wd(v,r,d,b,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Wd(v,r,d,b,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(v,r,d,b){if("translucent"!==v.renderPass)return;const M=d.paint.get("circle-opacity"),R=d.paint.get("circle-stroke-width"),N=d.paint.get("circle-stroke-opacity"),H=void 0!==d.layout.get("circle-sort-key").constantOr(1),ee=d.paint.get("circle-emissive-strength");if(0===M.constantOr(1)&&(0===R.constantOr(1)||0===N.constantOr(1)))return;const se=v.context,he=se.gl,ye=v.transform,Pe=v.depthModeForSublayer(0,l.ae.ReadOnly),Fe=l.ag.disabled,Qe=v.colorModeForDrapableLayerRenderPass(ee),Je="globe"===ye.projection.name,tt=[l.aj(ye.center.lng),l.ak(ye.center.lat)],rt=[];for(let Bt=0;Bt<b.length;Bt++){const Ft=b[Bt],tn=r.getTile(Ft),en=tn.getBucket(d);if(!en||en.projection.name!==ye.projection.name)continue;const _n=en.programConfigurations.get(d.id),at=l.bR(d),$t=v.isTileAffectedByFog(Ft);Je&&at.push("PROJECTION_GLOBE_VIEW"),at.push("TERRAIN_DEPTH_D24");const Tn=v.getOrCreateProgram("circle",{config:_n,defines:at,overrideFog:$t}),ci=en.layoutVertexBuffer,zn=en.globeExtVertexBuffer,mn=en.indexBuffer,_i=ye.projection.createInversionMatrix(ye,Ft.canonical),eo={programConfiguration:_n,program:Tn,layoutVertexBuffer:ci,globeExtVertexBuffer:zn,indexBuffer:mn,uniformValues:l.bS(v,Ft,tn,_i,tt,d),tile:tn};if(H){const io=en.segments.get();for(const ie of io)rt.push({segments:new l.b([ie]),sortKey:ie.sortKey,state:eo})}else rt.push({segments:en.segments,sortKey:0,state:eo})}H&&rt.sort((Bt,Ft)=>Bt.sortKey-Ft.sortKey);const Pt={useDepthForOcclusion:ye.depthOcclusionForSymbolsAndCircles};for(const Bt of rt){const{programConfiguration:Ft,program:tn,layoutVertexBuffer:en,globeExtVertexBuffer:_n,indexBuffer:at,uniformValues:$t,tile:Tn}=Bt.state,ci=Bt.segments;v.terrain&&v.terrain.setupElevationDraw(Tn,tn,Pt),v.uploadCommonUniforms(se,tn,Tn.tileID.toUnwrapped()),tn.draw(v,he.TRIANGLES,Pe,Fe,Qe,l.af.disabled,$t,d.id,en,at,ci,d.paint,ye.zoom,Ft,[_n])}},heatmap:function(v,r,d,b){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===v.renderPass){const M=v.context,R=M.gl,N=l.ag.disabled,H=new l.a([R.ONE,R.ONE,R.ONE,R.ONE],l.C.transparent,[!0,!0,!0,!0]);(function(Fe,Qe,Je,tt){const rt=Fe.gl,Pt=Qe.width*tt,Bt=Qe.height*tt;Fe.activeTexture.set(rt.TEXTURE1),Fe.viewport.set([0,0,Pt,Bt]);let Ft=Je.heatmapFbo;if(!Ft||Ft&&(Ft.width!==Pt||Ft.height!==Bt)){Ft&&Ft.destroy();const tn=rt.createTexture();rt.bindTexture(rt.TEXTURE_2D,tn),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_WRAP_S,rt.CLAMP_TO_EDGE),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_WRAP_T,rt.CLAMP_TO_EDGE),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_MIN_FILTER,rt.LINEAR),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_MAG_FILTER,rt.LINEAR),Ft=Je.heatmapFbo=Fe.createFramebuffer(Pt,Bt,!0,null),function(en,_n,at,$t,Tn,ci){const zn=en.gl;zn.texImage2D(zn.TEXTURE_2D,0,en.extRenderToTextureHalfFloat?zn.RGBA16F:zn.RGBA,Tn,ci,0,zn.RGBA,en.extRenderToTextureHalfFloat?zn.HALF_FLOAT:zn.UNSIGNED_BYTE,null),$t.colorAttachment.set(at)}(Fe,0,tn,Ft,Pt,Bt)}else rt.bindTexture(rt.TEXTURE_2D,Ft.colorAttachment.get()),Fe.bindFramebuffer.set(Ft.framebuffer)})(M,v,d,"globe"===v.transform.projection.name?.5:.25),M.clear({color:l.C.transparent});const ee=v.transform,se="globe"===ee.projection.name,he=se?["PROJECTION_GLOBE_VIEW"]:[],ye=se?l.af.frontCCW:l.af.disabled,Pe=[l.aj(ee.center.lng),l.ak(ee.center.lat)];for(let Fe=0;Fe<b.length;Fe++){const Qe=b[Fe];if(r.hasRenderableParent(Qe))continue;const Je=r.getTile(Qe),tt=Je.getBucket(d);if(!tt||tt.projection.name!==ee.projection.name)continue;const rt=v.isTileAffectedByFog(Qe),Pt=tt.programConfigurations.get(d.id),Bt=v.getOrCreateProgram("heatmap",{config:Pt,defines:he,overrideFog:rt}),{zoom:Ft}=v.transform;v.terrain&&v.terrain.setupElevationDraw(Je,Bt),v.uploadCommonUniforms(M,Bt,Qe.toUnwrapped());const tn=ee.projection.createInversionMatrix(ee,Qe.canonical);Bt.draw(v,R.TRIANGLES,l.ae.disabled,N,H,ye,Uo(v,Qe,Je,tn,Pe,Ft,d.paint.get("heatmap-intensity")),d.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,d.paint,v.transform.zoom,Pt,se?[tt.globeExtVertexBuffer]:null)}M.viewport.set([0,0,v.width,v.height])}else"translucent"===v.renderPass&&(v.context.setColorMode(v.colorModeForRenderPass()),function(M,R){const N=M.context,H=N.gl,ee=R.heatmapFbo;if(!ee)return;N.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,ee.colorAttachment.get()),N.activeTexture.set(H.TEXTURE1);let se=R.colorRampTexture;se||(se=R.colorRampTexture=new l.T(N,R.colorRamp,H.RGBA)),se.bind(H.LINEAR,H.CLAMP_TO_EDGE),M.getOrCreateProgram("heatmapTexture").draw(M,H.TRIANGLES,l.ae.disabled,l.ag.disabled,M.colorModeForRenderPass(),l.af.disabled,{u_image:0,u_color_ramp:1,u_opacity:R.paint.get("heatmap-opacity")},R.id,M.viewportBuffer,M.quadTriangleIndexBuffer,M.viewportSegments,R.paint,M.transform.zoom)}(v,d))},line:function(v,r,d,b){if("translucent"!==v.renderPass)return;const M=d.paint.get("line-opacity"),R=d.paint.get("line-width");if(0===M.constantOr(1)||0===R.constantOr(1))return;const N=d.paint.get("line-emissive-strength"),H=d.paint.get("line-occlusion-opacity"),ee=v.context,se=ee.gl,he=d.layout.get("line-z-offset"),ye=!he.isConstant()||!!he.constantOr(0),Pe=ye?new l.ae(v.depthOcclusion?se.GREATER:se.LEQUAL,l.ae.ReadOnly,v.depthRangeFor3D):v.depthModeForSublayer(0,l.ae.ReadOnly),Fe=v.colorModeForDrapableLayerRenderPass(N),Qe=v.terrain&&v.terrain.renderingToTexture,Je=Qe?1:l.e.devicePixelRatio,tt=d.paint.get("line-dasharray"),rt=tt.constantOr(1),Pt=d.layout.get("line-cap"),Bt=tt.constantOr(null),Ft=Pt.constantOr(null),tn=d.paint.get("line-pattern"),en=tn.constantOr(1),_n=tn.constantOr(null),at=d.paint.get("line-opacity").constantOr(1);let $t=!en&&1!==at||v.depthOcclusion&&H>0&&H<1;const Tn=d.paint.get("line-gradient"),ci=en?"linePattern":"line",zn=l.bT(d);let mn;if(Qe&&v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&($t=!1),0!==H&&v.depthOcclusion){const eo=d.paint._values["line-opacity"];eo&&eo.value&&"constant"===eo.value.kind?mn=eo.value:l.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}if(ye&&(v.forceTerrainMode=!0),!ye&&0!==H&&v.terrain&&!Qe)return void l.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const _i=$t&&ye?v.stencilModeFor3D():l.ag.disabled;for(const eo of b){const io=r.getTile(eo);if(en&&!io.patternsLoaded())continue;const ie=io.getBucket(d);if(!ie)continue;v.prepareDrawTile();const L=ie.programConfigurations.get(d.id),j=v.isTileAffectedByFog(eo),oe=v.getOrCreateProgram(ci,{config:L,defines:ye?[...zn,"ELEVATED"]:zn,overrideFog:j});if(_n&&io.imageAtlas){const Wn=io.imageAtlas.patternPositions[_n.toString()];Wn&&L.setConstantPatternPositions(Wn)}if(!en&&Bt&&Ft&&io.lineAtlas){const Wn=io.lineAtlas.getDash(Bt,Ft);Wn&&L.setConstantPatternPositions(Wn)}let[Ve,lt]=d.paint.get("line-trim-offset");("round"===Ft||"square"===Ft)&&Ve!==lt&&(0===Ve&&(Ve-=1),1===lt&&(lt+=1));const cn=Qe?eo.projMatrix:null,hn=en?l.bU(v,io,d,cn,Je,[Ve,lt]):l.bV(v,io,d,cn,ie.lineClipsArray.length,Je,[Ve,lt]);if(Tn){const Wn=ie.gradients[d.id];let Wi=Wn.texture;if(d.gradientVersion!==Wn.version){let vr=256;if(d.stepInterpolant){const Sr=r.getSource().maxzoom,Mr=eo.canonical.z===Sr?Math.ceil(1<<v.transform.maxZoom-eo.canonical.z):1;vr=l.at(l.bW(ie.maxLineLength/l.a3*1024*Mr),256,ee.maxTextureSize)}Wn.gradient=l.bX({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:vr,image:Wn.gradient||void 0,clips:ie.lineClipsArray}),Wn.texture?Wn.texture.update(Wn.gradient):Wn.texture=new l.T(ee,Wn.gradient,se.RGBA),Wn.version=d.gradientVersion,Wi=Wn.texture}ee.activeTexture.set(se.TEXTURE1),Wi.bind(d.stepInterpolant?se.NEAREST:se.LINEAR,se.CLAMP_TO_EDGE)}rt&&(ee.activeTexture.set(se.TEXTURE0),io.lineAtlasTexture&&io.lineAtlasTexture.bind(se.LINEAR,se.REPEAT),L.updatePaintBuffers()),en&&(ee.activeTexture.set(se.TEXTURE0),io.imageAtlasTexture&&io.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),L.updatePaintBuffers()),ye&&v.terrain.setupElevationDraw(io,oe),v.uploadCommonUniforms(ee,oe,eo.toUnwrapped());const Qn=Wn=>{null!=mn&&(mn.value=at*H),oe.draw(v,se.TRIANGLES,Pe,Wn,Fe,l.af.disabled,hn,d.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,d.paint,v.transform.zoom,L,[ie.layoutVertexBuffer2,ie.patternVertexBuffer,ie.zOffsetVertexBuffer]),null!=mn&&(mn.value=at)};if($t&&!ye){const Wn=v.stencilModeForClipping(eo).ref;0===Wn&&Qe&&ee.clear({stencil:0});const Wi={func:se.EQUAL,mask:255};hn.u_alpha_discard_threshold=.8,Qn(new l.ag(Wi,Wn,255,se.KEEP,se.KEEP,se.INVERT)),hn.u_alpha_discard_threshold=0,Qn(new l.ag(Wi,Wn,255,se.KEEP,se.KEEP,se.KEEP))}else $t&&ye&&(hn.u_alpha_discard_threshold=.001),Qn(ye?_i:v.stencilModeForClipping(eo))}$t&&(v.resetStencilClippingMasks(),Qe&&ee.clear({stencil:0})),0===H||v.depthOcclusion||Qe||v.layersWithOcclusionOpacity.push(v.currentLayer),ye&&(v.forceTerrainMode=!1)},fill:function(v,r,d,b){const M=d.paint.get("fill-color"),R=d.paint.get("fill-opacity");if(0===R.constantOr(1))return;const N=d.paint.get("fill-emissive-strength"),H=v.colorModeForDrapableLayerRenderPass(N),ee=d.paint.get("fill-pattern"),se=v.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&1===M.constantOr(l.C.transparent).a&&1===R.constantOr(0)?"opaque":"translucent";if(v.renderPass===se){const he=v.depthModeForSublayer(1,"opaque"===v.renderPass?l.ae.ReadWrite:l.ae.ReadOnly);ll(v,r,d,b,he,H,!1)}if("translucent"===v.renderPass&&d.paint.get("fill-antialias")){const he=v.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,l.ae.ReadOnly);ll(v,r,d,b,he,H,!0)}},"fill-extrusion":function(v,r,d,b){const M=d.paint.get("fill-extrusion-opacity"),R=v.context,N=R.gl,H=v.terrain,ee=H&&H.renderingToTexture;if(0===M)return;const se=v.conflationActive&&v.style.isLayerClipped(d,r.getSource()),he=v.style.order.indexOf(d.fqid);if(se&&function(ye,Pe,Fe,Qe,Je){for(const tt of Qe){const rt=Pe.getTile(tt).getBucket(Fe);rt&&(rt.updateReplacement(tt,ye.replacementSource,Je),rt.uploadCentroid(ye.context))}}(v,r,d,b,he),H||se)for(const ye of b){const Pe=r.getTile(ye).getBucket(d);Pe&&j0(v.context,r,ye,Pe,d,H,se)}if("shadow"===v.renderPass&&v.shadowRenderer){const ye=v.shadowRenderer;if(H&&M<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof l.Z)return;const Pe=ye.getShadowPassDepthMode(),Fe=ye.getShadowPassColorMode();yc(v,r,d,b,Pe,l.ag.disabled,Fe,se)}else if("translucent"===v.renderPass){const ye=!d.paint.get("fill-extrusion-pattern").constantOr(1),Pe=d.paint.get("fill-extrusion-color").constantOr(l.C.white);if(!ee&&0!==Pe.a){const Fe=new l.ae(v.context.gl.LEQUAL,l.ae.ReadWrite,v.depthRangeFor3D);1===M&&ye?yc(v,r,d,b,Fe,l.ag.disabled,l.a.unblended,se):(yc(v,r,d,b,Fe,l.ag.disabled,l.a.disabled,se),yc(v,r,d,b,Fe,v.stencilModeFor3D(),v.colorModeForRenderPass(),se),v.resetStencilClippingMasks())}if(v.style.enable3dLights()&&ye&&(!H&&"globe"!==v.transform.projection.name||ee)){const Fe=d.paint.get("fill-extrusion-opacity"),Qe=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Je=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),tt=d.paint.get("fill-extrusion-flood-light-intensity"),rt=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(d.lut).toArray01().slice(0,3),Pt=Qe>0&&Je>0,Bt=tt>0,Ft=(en,_n,at)=>(1-at)*en+at*_n,tn=en=>{const _n=v.depthModeForSublayer(1,l.ae.ReadOnly,N.LEQUAL,!0),at=d.paint.get(en?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),$t=Ft(.1,3,at),Tn=v._showOverdrawInspector;if(!Tn){const ci=new l.ag({func:N.ALWAYS,mask:255},255,255,N.KEEP,N.KEEP,N.REPLACE),zn=new l.a([N.ONE,N.ONE,N.ONE,N.ONE],l.C.transparent,[!1,!1,!1,!0],N.MIN);Ls(v,r,d,b,_n,ci,zn,l.af.disabled,en,"sdf",Fe,Qe,Je,tt,rt,$t,se,!1)}{const ci=Tn?l.ag.disabled:new l.ag({func:N.EQUAL,mask:255},255,255,N.KEEP,N.DECR,N.DECR),zn=Tn?v.colorModeForRenderPass():new l.a([N.ONE_MINUS_DST_ALPHA,N.DST_ALPHA,N.ONE,N.ONE],l.C.transparent,[!0,!0,!0,!0]);Ls(v,r,d,b,_n,ci,zn,l.af.disabled,en,"color",Fe,Qe,Je,tt,rt,$t,se,!1)}};if(ee){const en=(_n,at,$t)=>{const Tn=v.depthModeForSublayer(1,l.ae.ReadOnly,N.LEQUAL,!1),ci=d.paint.get(_n?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),zn=Ft(.1,3,ci);{const mn=new l.a([N.ONE,N.ONE,N.ONE,N.ONE],l.C.transparent,[!1,!1,!1,!0]);Ls(v,r,d,b,Tn,l.ag.disabled,mn,l.af.disabled,_n,"clear",Fe,Qe,Je,tt,rt,zn,se,at)}{const mn=new l.ag({func:N.ALWAYS,mask:255},255,255,N.KEEP,N.KEEP,N.REPLACE),_i=new l.a([N.ONE,N.ONE,N.ONE,N.ONE],l.C.transparent,[!1,!1,!1,!0],N.MIN);Ls(v,r,d,b,Tn,mn,_i,l.af.disabled,_n,"sdf",Fe,Qe,Je,tt,rt,zn,se,at)}{const mn=_n?N.ZERO:N.ONE_MINUS_DST_ALPHA,_i=new l.ag({func:N.EQUAL,mask:255},255,255,N.KEEP,N.DECR,N.DECR),eo=new l.a([mn,N.DST_ALPHA,N.ONE_MINUS_DST_ALPHA,N.ZERO],l.C.transparent,[!0,!0,!0,!0]);Ls(v,r,d,b,Tn,_i,eo,l.af.disabled,_n,"color",Fe,Qe,Je,tt,rt,zn,se,at)}{const mn=new l.a([N.ONE,N.ONE,N.ONE,_n?N.ZERO:N.ONE],l.C.transparent,[!1,!1,!1,!0],_n?N.FUNC_ADD:N.MAX);Ls(v,r,d,b,Tn,l.ag.disabled,mn,l.af.disabled,_n,"clear",Fe,Qe,Je,tt,rt,zn,se,at,$t)}};if(Pt||Bt){let _n;if(v.prepareDrawTile(),H){const at=H.drapeBufferSize[0],$t=H.drapeBufferSize[1];_n=H.framebufferCopyTexture,_n&&(!_n||_n.size[0]===at&&_n.size[1]===$t)||(_n&&_n.destroy(),_n=H.framebufferCopyTexture=new l.T(R,new l.i({width:at,height:$t}),N.RGBA)),_n.bind(N.LINEAR,N.CLAMP_TO_EDGE),N.copyTexImage2D(N.TEXTURE_2D,0,N.RGBA,0,0,at,$t,0)}Pt&&en(!0,!1,_n),Bt&&en(!1,!0,_n)}}else Pt&&tn(!0),Bt&&tn(!1)}}},hillshade:function(v,r,d,b){if("offscreen"!==v.renderPass&&"translucent"!==v.renderPass||v.style.disableElevatedTerrain)return;const M=v.context,R=v.terrain&&v.terrain.renderingToTexture,[N,H]="translucent"!==v.renderPass||R?[{},b]:v.stencilConfigForOverlap(b);for(const ee of H){const se=r.getTile(ee);if(se.needsHillshadePrepare&&"offscreen"===v.renderPass)Ia(v,se,d);else if("translucent"===v.renderPass){const he=v.depthModeForSublayer(0,l.ae.ReadOnly),ye=d.paint.get("hillshade-emissive-strength"),Pe=v.colorModeForDrapableLayerRenderPass(ye),Fe=R&&v.terrain?v.terrain.stencilModeForRTTOverlap(ee):N[ee.overscaledZ];cu(v,ee,se,d,he,Fe,Pe)}}M.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,r,d,b,M,R){if("translucent"!==v.renderPass||0===d.paint.get("raster-opacity"))return;const N="globe"===v.transform.projection.name,H=0!==d.paint.get("raster-elevation"),ee=H&&N;if(v.renderElevatedRasterBackface&&!ee)return;const se=v.context,he=se.gl,ye=r.getSource(),Pe=function(en,_n,at,$t){const Tn=_n.paint.get("raster-color"),ci="raster-array"===en.type,zn=[],mn=_n.paint.get("raster-resampling"),_i=_n.paint.get("raster-color-mix");let eo=_n.paint.get("raster-color-range");const io=[_i[0],_i[1],_i[2],0],ie=_i[3];let L="nearest"===mn?$t.NEAREST:$t.LINEAR;if(ci&&(zn.push("RASTER_ARRAY"),Tn||zn.push("RASTER_COLOR"),"linear"===mn&&zn.push("RASTER_ARRAY_LINEAR"),L=$t.NEAREST,!eo&&en.rasterLayers)){const j=en.rasterLayers.find(({id:oe})=>oe===_n.sourceLayer);j&&j.fields&&j.fields.range&&(eo=j.fields.range)}if(eo=eo||[0,1],Tn){zn.push("RASTER_COLOR"),at.activeTexture.set($t.TEXTURE2),_n.updateColorRamp(eo);let j=_n.colorRampTexture;j||(j=_n.colorRampTexture=new l.T(at,_n.colorRamp,$t.RGBA)),j.bind($t.LINEAR,$t.CLAMP_TO_EDGE)}return{mix:io,range:eo,offset:ie,defines:zn,resampling:L}}(ye,d,se,he);if(ye instanceof l.bm&&!b.length&&!N)return;const Fe=d.paint.get("raster-emissive-strength"),Qe=v.colorModeForDrapableLayerRenderPass(Fe),Je=v.terrain&&v.terrain.renderingToTexture,tt=!v.options.moving,rt="nearest"===d.paint.get("raster-resampling")?he.NEAREST:he.LINEAR;if(ye instanceof l.bm&&!b.length&&(ye.onNorthPole||ye.onSouthPole)){const en=H?v.stencilModeFor3D():l.ag.disabled;return void bc(!!ye.onNorthPole,null,v,r,d,Fe,Pe,l.af.disabled,en)}if(!b.length)return;const[Pt,Bt]=ye instanceof l.bm||Je?[{},b]:v.stencilConfigForOverlap(b),Ft=Bt[Bt.length-1].overscaledZ;ee&&Pe.defines.push("PROJECTION_GLOBE_VIEW"),H&&Pe.defines.push("RENDER_CUTOFF");const tn=(en,_n,at)=>{for(const $t of en){const Tn=$t.toUnwrapped(),ci=r.getTile($t);if(Je&&(!ci||!ci.hasData()))continue;se.activeTexture.set(he.TEXTURE0);const zn=Xs(ci,ye,d,Pe);if(!zn||!zn.texture)continue;const{texture:mn,mix:_i,offset:eo,tileSize:io,buffer:ie}=zn;let L,j;Je?(L=l.ae.disabled,j=$t.projMatrix):H?(L=new l.ae(he.LEQUAL,l.ae.ReadWrite,v.depthRangeFor3D),j=N?Float32Array.from(v.transform.expandedFarZProjMatrix):v.transform.calculateProjMatrix(Tn,tt)):(L=v.depthModeForSublayer($t.overscaledZ-Ft,1===d.paint.get("raster-opacity")?l.ae.ReadWrite:l.ae.ReadOnly,he.LESS),j=v.transform.calculateProjMatrix(Tn,tt));const oe=v.terrain&&Je?v.terrain.stencilModeForRTTOverlap($t):Pt[$t.overscaledZ],Ve=R?0:d.paint.get("raster-fade-duration");ci.registerFadeDuration(Ve);const lt=r.findLoadedParent($t,0),cn=Gn(ci,lt,r,v.transform,Ve);let hn,Qn;v.terrain&&v.terrain.prepareDrawTile(),se.activeTexture.set(he.TEXTURE0),mn.bind(rt,he.CLAMP_TO_EDGE),se.activeTexture.set(he.TEXTURE1),lt?(lt.texture&&lt.texture.bind(rt,he.CLAMP_TO_EDGE),hn=Math.pow(2,lt.tileID.overscaledZ-ci.tileID.overscaledZ),Qn=[ci.tileID.canonical.x*hn%1,ci.tileID.canonical.y*hn%1]):mn.bind(rt,he.CLAMP_TO_EDGE),mn.useMipmap&&se.extTextureFilterAnisotropic&&v.transform.pitch>20&&he.texParameterf(he.TEXTURE_2D,se.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,se.extTextureFilterAnisotropicMax);const Wn=v.transform;let Wi;const vr=H?qd(Wn):[0,0,0,0];let Sr,Mr,Hr,Za,As,ts=0;if(ee&&ye instanceof l.bm&&ye.coordinates.length>3)Sr=Float32Array.from(l.bf(l.bg(new l.aO(0,0,0)))),Mr=Float32Array.from(Wn.globeMatrix),Hr=Float32Array.from(l.bb(Wn)),Za=[l.aj(Wn.center.lng),l.ak(Wn.center.lat)],Wi=ye.elevatedGlobePerspectiveTransform,As=ye.elevatedGlobeGridMatrix||new Float32Array(9);else if(ee){const gs=l.bc($t.canonical);ts=l.bd(gs.getCenter().lat),Sr=Float32Array.from(l.bf(l.bg($t.canonical))),Mr=Float32Array.from(Wn.globeMatrix),Hr=Float32Array.from(l.bb(Wn)),Za=[l.aj(Wn.center.lng),l.ak(Wn.center.lat)],Wi=[0,0],As=Float32Array.from(l.be($t.canonical,gs,ts,Wn.worldSize/Wn._pixelsPerMercatorPixel))}else Wi=ye instanceof l.bm?ye.perspectiveTransform:[0,0],Sr=new Float32Array(16),Mr=new Float32Array(9),Hr=new Float32Array(16),Za=[0,0],As=new Float32Array(9);const Js=_l(j,Sr,Mr,Hr,As,Qn||[0,0],l.a1(v.transform.zoom),Za,vr,hn||1,cn,d,Wi,H?d.paint.get("raster-elevation"):0,2,_i,eo,Pe.range,io,ie,Fe),ca=v.isTileAffectedByFog($t),Hs=v.getOrCreateProgram("raster",{defines:Pe.defines,overrideFog:ca});if(v.uploadCommonUniforms(se,Hs,Tn),ye instanceof l.bm){const gs=ye.elevatedGlobeVertexBuffer,Ca=ye.elevatedGlobeIndexBuffer;if(Je||!N)ye.boundsBuffer&&ye.boundsSegments&&Hs.draw(v,he.TRIANGLES,L,l.ag.disabled,Qe,l.af.disabled,Js,d.id,ye.boundsBuffer,v.quadTriangleIndexBuffer,ye.boundsSegments);else if(gs&&Ca){const bl=Wn.zoom<=l.b1?ye.elevatedGlobeSegments:ye.getSegmentsForLongitude(Wn.center.lng);bl&&Hs.draw(v,he.TRIANGLES,L,l.ag.disabled,Qe,_n,Js,d.id,gs,Ca,bl)}}else if(ee){L=new l.ae(he.LEQUAL,l.ae.ReadOnly,v.depthRangeFor3D);const gs=v.globeSharedBuffers;if(gs){const[Ca,bl,ua]=gs.getGridBuffers(ts,!1);Hs.draw(v,he.TRIANGLES,L,at||oe,v.colorModeForRenderPass(),_n,Js,d.id,Ca,bl,ua)}}else{const{tileBoundsBuffer:gs,tileBoundsIndexBuffer:Ca,tileBoundsSegments:bl}=v.getTileBoundsBuffers(ci);Hs.draw(v,he.TRIANGLES,L,oe,Qe,l.af.disabled,Js,d.id,gs,Ca,bl)}}if(!(ye instanceof l.bm)&&ee)for(const $t of en){const Tn=$t.canonical.y===(1<<$t.canonical.z)-1;0===$t.canonical.y&&bc(!0,$t,v,r,d,Fe,Pe,_n,at||l.ag.disabled),Tn&&bc(!1,$t,v,r,d,Fe,Pe,_n===l.af.frontCW?l.af.backCW:l.af.frontCW,at||l.ag.disabled)}};ee?tn(Bt,v.renderElevatedRasterBackface?l.af.backCW:l.af.frontCW,v.stencilModeFor3D()):tn(Bt,l.af.disabled,void 0),v.resetStencilClippingMasks()},"raster-particle":function(v,r,d,b,M,R){"offscreen"===v.renderPass&&function(N,H,ee,se){if(!se.length)return;const he=N.context,ye=he.gl,Pe=H.getSource();if(!(Pe instanceof Mi))return;const Fe=Math.ceil(Math.sqrt(ee.paint.get("raster-particle-count")));let Qe=ee.particlePositionRGBAImage;if(!Qe||Qe.width!==Fe){const Bt=function(Ft){const tn=Ft*Ft,en=new Uint8Array(4*tn),_n=function($t){return $t|=0,$t=Math.imul(2747636419^$t,2654435769),$t=Math.imul($t^$t>>>16,2654435769),(($t=Math.imul($t^$t>>>16,2654435769))>>>0)/4294967296},at=1/1.1;for(let $t=0;$t<tn;$t++){const Tn=at*(_n(2*$t+0)+Xa),ci=at*(_n(2*$t+1)+Xa),zn=255*Tn%1,mn=255*ci%1,_i=zn,eo=ci-mn/255,io=mn;en[4*$t+0]=255*(Tn-zn/255),en[4*$t+1]=255*_i,en[4*$t+2]=255*eo,en[4*$t+3]=255*io}return en}(Fe);Qe=ee.particlePositionRGBAImage=new l.i({width:Fe,height:Fe},Bt)}let Je=ee.particleFramebuffer;Je?Je.width!==Fe&&(Je.destroy(),Je=ee.particleFramebuffer=he.createFramebuffer(Fe,Fe,!0,null)):Je=ee.particleFramebuffer=he.createFramebuffer(Fe,Fe,!0,null);const tt=[];for(const Bt of se){const Ft=H.getTile(Bt);if(!(Ft instanceof l.c3))continue;const tn=E0(Ft,Pe,ee);if(!tn)continue;const en=[Ft.tileSize,Ft.tileSize];let _n=ee.tileFramebuffer;_n||(_n=ee.tileFramebuffer=he.createFramebuffer(en[0],en[1],!0,null));let at=Ft.rasterParticleState;at||(at=Ft.rasterParticleState=new Zr(he,Bt,en,Qe));const $t=at.update(ee.lastInvalidatedAt);at.particleTextureDimension!==Fe&&at.updateParticleTexture(Bt,Qe);const Tn=at.targetColorTexture;at.targetColorTexture=at.backgroundColorTexture,at.backgroundColorTexture=Tn;const ci=at.particleTexture0;at.particleTexture0=at.particleTexture1,at.particleTexture1=ci,tt.push([Bt,tn,at,$t])}if(0===tt.length)return;const rt=l.e.now(),Pt=ee.previousDrawTimestamp?.001*(rt-ee.previousDrawTimestamp):.0167;if(ee.previousDrawTimestamp=rt,ee.hasColorMap()){he.activeTexture.set(ye.TEXTURE0+2);let Bt=ee.colorRampTexture;Bt||(Bt=ee.colorRampTexture=new l.T(he,ee.colorRamp,ye.RGBA)),Bt.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}he.bindFramebuffer.set(ee.tileFramebuffer.framebuffer),function(Bt,Ft,tn){const en=Bt.context,_n=en.gl,at=Ft.tileFramebuffer;en.activeTexture.set(_n.TEXTURE0);const $t={u_texture:0,u_opacity:1.05*(ci=Ft.paint.get("raster-particle-fade-opacity-factor"))/(ci+.05)},Tn=Bt.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var ci;for(const zn of tn){const[,,mn,_i]=zn;at.colorAttachment.set(mn.targetColorTexture.texture),en.viewport.set([0,0,at.width,at.height]),en.clear({color:l.C.transparent}),_i&&(mn.backgroundColorTexture.bind(_n.NEAREST,_n.CLAMP_TO_EDGE),Tn.draw(Bt,_n.TRIANGLES,l.ae.disabled,l.ag.disabled,l.a.alphaBlended,l.af.disabled,$t,Ft.id,Bt.viewportBuffer,Bt.quadTriangleIndexBuffer,Bt.viewportSegments))}}(N,ee,tt),function(Bt,Ft,tn,en){const _n=Bt.context,at=_n.gl,$t=tn.tileFramebuffer,Tn="globe"===Bt.transform.projection.name,ci=tn.paint.get("raster-particle-max-speed");for(const zn of en){const[mn,_i,eo]=zn;_n.activeTexture.set(at.TEXTURE0+0),_i.texture.bind(at.LINEAR,at.CLAMP_TO_EDGE),$t.colorAttachment.set(eo.targetColorTexture.texture);const io=Bt.getOrCreateProgram("rasterParticleDraw",{defines:_i.defines,overrideFog:!1});_n.activeTexture.set(at.TEXTURE0+1);const ie=_i.scalarData?[]:[0,1,2,3].map(oe=>l.bZ[oe](mn));ie.push(mn);const L=mn.canonical.x,j=mn.canonical.y;for(const oe of ie){const Ve=Ft.getTile(Tn?oe.wrapped():oe);if(!Ve)continue;const lt=Ve.rasterParticleState;if(!lt)continue;const cn=oe.canonical.x+(1<<oe.canonical.z)*(oe.wrap-mn.wrap),hn=oe.canonical.y;lt.particleTexture0.bind(at.NEAREST,at.CLAMP_TO_EDGE);const Qn=_c(1,lt.particleTexture0.size[0],[cn-L,hn-j],0,_i.texture.size,2,ci,_i.textureOffset,_i.scale,_i.offset);io.draw(Bt,at.POINTS,l.ae.disabled,l.ag.disabled,l.a.alphaBlended,l.af.disabled,Qn,tn.id,lt.particleIndexBuffer,void 0,lt.particleSegment)}}}(N,H,ee,tt),he.bindFramebuffer.set(ee.particleFramebuffer.framebuffer),function(Bt,Ft,tn,en){const _n=Bt.context,at=_n.gl,$t=Ft.paint.get("raster-particle-max-speed"),Tn=en*Ft.paint.get("raster-particle-speed-factor")*.15,ci=(mn=.01+1*Ft.paint.get("raster-particle-reset-rate-factor"),Math.pow(mn,6)),zn=Ft.particleFramebuffer;var mn;_n.viewport.set([0,0,zn.width,zn.height]);for(const mn of tn){const[,_i,eo]=mn;_n.activeTexture.set(at.TEXTURE0+0),_i.texture.bind(at.LINEAR,at.CLAMP_TO_EDGE),_n.activeTexture.set(at.TEXTURE0+1);const io=eo.particleTexture0;io.bind(at.NEAREST,at.CLAMP_TO_EDGE);const ie=ch(1,io.size[0],0,_i.texture.size,$t,Tn,ci,_i.textureOffset,_i.scale,_i.offset);zn.colorAttachment.set(eo.particleTexture1.texture),_n.clear({color:l.C.transparent}),Bt.getOrCreateProgram("rasterParticleUpdate",{defines:_i.defines}).draw(Bt,at.TRIANGLES,l.ae.disabled,l.ag.disabled,l.a.unblended,l.af.disabled,ie,Ft.id,Bt.viewportBuffer,Bt.quadTriangleIndexBuffer,Bt.viewportSegments)}}(N,ee,tt,Pt)}(v,r,d,b),"translucent"===v.renderPass&&(function(N,H,ee,se,he){const ye=N.context,Pe=ye.gl,Fe=!N.options.moving,Qe="globe"===N.transform.projection.name;if(!se.length)return;const[Je,tt]=N.stencilConfigForOverlap(se),rt=[];Qe&&rt.push("PROJECTION_GLOBE_VIEW");const Pt=N.stencilModeFor3D();for(const Bt of tt){const Ft=Bt.toUnwrapped(),tn=H.getTile(Bt);if(!tn.rasterParticleState)continue;const en=tn.rasterParticleState,_n=100;tn.registerFadeDuration(_n);const at=H.findLoadedParent(Bt,0),$t=Gn(tn,at,H,N.transform,_n);let Tn,ci;N.terrain&&N.terrain.prepareDrawTile(),ye.activeTexture.set(Pe.TEXTURE0),en.targetColorTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),ye.activeTexture.set(Pe.TEXTURE1),at&&at.rasterParticleState?(at.rasterParticleState.targetColorTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),Tn=Math.pow(2,at.tileID.overscaledZ-tn.tileID.overscaledZ),ci=[tn.tileID.canonical.x*Tn%1,tn.tileID.canonical.y*Tn%1]):en.targetColorTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE);const zn=Qe?Float32Array.from(N.transform.expandedFarZProjMatrix):N.transform.calculateProjMatrix(Ft,Fe),mn=N.transform,_i=Rr(mn),eo=l.bc(Bt.canonical),io=l.bd(eo.getCenter().lat);let ie,L,j,oe,Ve;Qe?(ie=Float32Array.from(l.bf(l.bg(Bt.canonical))),L=Float32Array.from(mn.globeMatrix),j=Float32Array.from(l.bb(mn)),oe=[l.aj(mn.center.lng),l.ak(mn.center.lat)],Ve=Float32Array.from(l.be(Bt.canonical,eo,io,mn.worldSize/mn._pixelsPerMercatorPixel))):(ie=new Float32Array(16),L=new Float32Array(9),j=new Float32Array(16),oe=[0,0],Ve=new Float32Array(9));const lt=cs(zn,ie,L,j,Ve,ci||[0,0],l.a1(N.transform.zoom),oe,_i,Tn||1,$t,250),cn=N.isTileAffectedByFog(Bt),hn=N.getOrCreateProgram("rasterParticle",{defines:rt,overrideFog:cn});if(N.uploadCommonUniforms(ye,hn,Ft),Qe){const Qn=new l.ae(Pe.LEQUAL,l.ae.ReadWrite,N.depthRangeFor3D),Wn=0,Wi=N.globeSharedBuffers;if(Wi){const[vr,Sr,Mr]=Wi.getGridBuffers(io,0!==Wn);hn.draw(N,Pe.TRIANGLES,Qn,Pt,l.a.alphaBlended,l.af.backCCW,lt,ee.id,vr,Sr,Mr)}}else{const Qn=N.depthModeForSublayer(0,l.ae.ReadOnly),Wn=Je[Bt.overscaledZ],{tileBoundsBuffer:Wi,tileBoundsIndexBuffer:vr,tileBoundsSegments:Sr}=N.getTileBoundsBuffers(tn);hn.draw(N,Pe.TRIANGLES,Qn,Wn,l.a.alphaBlended,l.af.disabled,lt,ee.id,Wi,vr,Sr)}}N.resetStencilClippingMasks()}(v,r,d,b),v.style.map.triggerRepaint())},background:function(v,r,d,b){const M=d.paint.get("background-color"),R=d.paint.get("background-opacity"),N=d.paint.get("background-emissive-strength");if(0===R)return;const H=v.context,ee=H.gl,se=v.transform,he=se.tileSize,ye=d.paint.get("background-pattern");let Pe;if(void 0!==ye&&(null===ye||(Pe=v.imageManager.getPattern(ye.toString(),d.scope,v.style.getLut(d.scope)),!Pe)))return;const Fe=!ye&&1===M.a&&1===R&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Fe)return;const Qe=l.ag.disabled,Je=v.depthModeForSublayer(0,"opaque"===Fe?l.ae.ReadWrite:l.ae.ReadOnly),tt=v.colorModeForDrapableLayerRenderPass(N),rt=ye?"backgroundPattern":"background";let Pt,Bt=b;Bt||(Pt=v.getBackgroundTiles(),Bt=Object.values(Pt).map(Ft=>Ft.tileID)),ye&&(H.activeTexture.set(ee.TEXTURE0),v.imageManager.bind(v.context,d.scope));for(const Ft of Bt){const tn=v.isTileAffectedByFog(Ft),en=v.getOrCreateProgram(rt,{overrideFog:tn}),_n=Ft.toUnwrapped(),at=b?Ft.projMatrix:v.transform.calculateProjMatrix(_n);v.prepareDrawTile();const $t=r?r.getTile(Ft):Pt?Pt[Ft.key]:new l.by(Ft,he,se.zoom,v),Tn=ye?uh(at,N,R,v,0,d.scope,Pe,{tileID:Ft,tileSize:he}):b0(at,N,R,M.toRenderColor(d.lut));v.uploadCommonUniforms(H,en,_n);const{tileBoundsBuffer:ci,tileBoundsIndexBuffer:zn,tileBoundsSegments:mn}=v.getTileBoundsBuffers($t);en.draw(v,ee.TRIANGLES,Je,Qe,tt,l.af.disabled,Tn,d.id,ci,zn,mn)}},sky:function(v,r,d){const b=v._atmosphere?l.a1(v.transform.zoom):1,M=d.paint.get("sky-opacity")*b;if(0===M)return;const R=v.context,N=d.paint.get("sky-type"),H=new l.ae(R.gl.LEQUAL,l.ae.ReadOnly,[0,1]),ee=v.frameCounter/1e3%1;"atmosphere"===N?"offscreen"===v.renderPass?d.needsSkyboxCapture(v)&&(function(se,he,ye,Pe){const Fe=se.context,Qe=Fe.gl;let Je=he.skyboxFbo;if(!Je){Je=he.skyboxFbo=Fe.createFramebuffer(32,32,!0,null),he.skyboxGeometry=new ir(Fe),he.skyboxTexture=Fe.gl.createTexture(),Qe.bindTexture(Qe.TEXTURE_CUBE_MAP,he.skyboxTexture),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_WRAP_S,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_WRAP_T,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_MIN_FILTER,Qe.LINEAR),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_MAG_FILTER,Qe.LINEAR);for(let Bt=0;Bt<6;++Bt)Qe.texImage2D(Qe.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,0,Qe.RGBA,32,32,0,Qe.RGBA,Qe.UNSIGNED_BYTE,null)}Fe.bindFramebuffer.set(Je.framebuffer),Fe.viewport.set([0,0,32,32]);const tt=he.getCenter(se,!0),rt=se.getOrCreateProgram("skyboxCapture"),Pt=new Float64Array(16);l.ad.identity(Pt),l.ad.rotateY(Pt,Pt,.5*-Math.PI),fs(se,he,rt,Pt,tt,0),l.ad.identity(Pt),l.ad.rotateY(Pt,Pt,.5*Math.PI),fs(se,he,rt,Pt,tt,1),l.ad.identity(Pt),l.ad.rotateX(Pt,Pt,.5*-Math.PI),fs(se,he,rt,Pt,tt,2),l.ad.identity(Pt),l.ad.rotateX(Pt,Pt,.5*Math.PI),fs(se,he,rt,Pt,tt,3),l.ad.identity(Pt),fs(se,he,rt,Pt,tt,4),l.ad.identity(Pt),l.ad.rotateY(Pt,Pt,Math.PI),fs(se,he,rt,Pt,tt,5),Fe.viewport.set([0,0,se.width,se.height])}(v,d),d.markSkyboxValid(v)):"sky"===v.renderPass&&function(se,he,ye,Pe,Fe){const Qe=se.context,Je=Qe.gl,tt=se.transform,rt=se.getOrCreateProgram("skybox");Qe.activeTexture.set(Je.TEXTURE0),Je.bindTexture(Je.TEXTURE_CUBE_MAP,he.skyboxTexture);const Pt=((Bt,Ft,tn,en,_n)=>({u_matrix:Bt,u_sun_direction:Ft,u_cubemap:0,u_opacity:en,u_temporal_offset:_n}))(tt.skyboxMatrix,he.getCenter(se,!1),0,Pe,Fe);se.uploadCommonUniforms(Qe,rt),rt.draw(se,Je.TRIANGLES,ye,l.ag.disabled,se.colorModeForRenderPass(),l.af.backCW,Pt,"skybox",he.skyboxGeometry.vertexBuffer,he.skyboxGeometry.indexBuffer,he.skyboxGeometry.segment)}(v,d,H,M,ee):"gradient"===N&&"sky"===v.renderPass&&function(se,he,ye,Pe,Fe){const Qe=se.context,Je=Qe.gl,tt=se.transform,rt=se.getOrCreateProgram("skyboxGradient");he.skyboxGeometry||(he.skyboxGeometry=new ir(Qe)),Qe.activeTexture.set(Je.TEXTURE0);let Pt=he.colorRampTexture;Pt||(Pt=he.colorRampTexture=new l.T(Qe,he.colorRamp,Je.RGBA)),Pt.bind(Je.LINEAR,Je.CLAMP_TO_EDGE);const Bt=(Ft=tt.skyboxMatrix,tn=he.getCenter(se,!1),en=he.paint.get("sky-gradient-radius"),_n=Pe,at=Fe,{u_matrix:Ft,u_color_ramp:0,u_center_direction:tn,u_radius:l.ab(en),u_opacity:_n,u_temporal_offset:at});var Ft,tn,en,_n,at;se.uploadCommonUniforms(Qe,rt),rt.draw(se,Je.TRIANGLES,ye,l.ag.disabled,se.colorModeForRenderPass(),l.af.backCW,Bt,"skyboxGradient",he.skyboxGeometry.vertexBuffer,he.skyboxGeometry.indexBuffer,he.skyboxGeometry.segment)}(v,d,H,M,ee)},debug:function(v,r,d,b,M,R){for(let N=0;N<d.length;N++)if(M){const se=new l.C(.8*b.r,.8*b.g,.8*b.b,1);fe(v,r,d[N],b,-1,-1,R),fe(v,r,d[N],b,-1,1,R),fe(v,r,d[N],b,1,1,R),fe(v,r,d[N],b,1,-1,R),fe(v,r,d[N],se,0,0,R)}else fe(v,r,d[N],b,0,0,R)},custom:function(v,r,d,b){const M=v.context,R=d.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||"offscreen"===v.renderPass)&&d.isDraped(r)){if("offscreen"===v.renderPass){const N=R.prerender;if(N){if(v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),"globe"===v.transform.projection.name){const H=v.transform.pointMerc;N.call(R,M.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),l.a1(v.transform.zoom),[H.x,H.y],v.transform.pixelsPerMeterRatio)}else N.call(R,M.gl,v.transform.customLayerMatrix());M.setDirty(),v.setBaseState()}}else if("translucent"===v.renderPass){if(v.terrain&&v.terrain.renderingToTexture){const H=R.renderToTile;if(H){const ee=b[0].canonical,se=new l.Y(ee.x+b[0].wrap*(1<<ee.z),ee.y,ee.z);M.setDepthMode(l.ae.disabled),M.setStencilMode(l.ag.disabled),M.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),H.call(R,M.gl,se),M.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),M.setStencilMode(l.ag.disabled);const N="3d"===R.renderingMode?new l.ae(v.context.gl.LEQUAL,l.ae.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,l.ae.ReadOnly);if(M.setDepthMode(N),"globe"===v.transform.projection.name){const H=v.transform.pointMerc;R.render(M.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),l.a1(v.transform.zoom),[H.x,H.y],v.transform.pixelsPerMeterRatio)}else R.render(M.gl,v.transform.customLayerMatrix());M.setDirty(),v.setBaseState(),M.bindFramebuffer.set(null)}}else l.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(v,r,d,b){if("opaque"===v.renderPass)return;const M=d.paint.get("model-opacity");if(0===M)return;const R=d.paint.get("model-cast-shadows");if("shadow"===v.renderPass&&(!R||v.terrain&&M<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof l.Z))return;const N=v.shadowRenderer,H=d.paint.get("model-receive-shadows");N&&(N.useNormalOffset=!0,H||(N.enabled=!1));const ee=()=>{N&&(N.useNormalOffset=!0,H||(N.enabled=!0))},se=r.getSource();if("light-beam"===v.renderPass&&"batched-model"!==se.type)return;if("vector"===se.type||"geojson"===se.type)return function(rt,Pt,Bt,Ft,tn){const en=rt.transform;if("mercator"!==en.projection.name)return void l.w(`Drawing 3D models for ${en.projection.name} projection is not yet implemented`);const _n=en.getFreeCameraOptions().position;if(!rt.modelManager)return;const at=rt.modelManager;Bt.modelManager=at;const $t=rt.shadowRenderer;if(!Bt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Tn=Bt._unevaluatedLayout._values["model-id"],ci={...Bt.layout.get("model-id").parameters},zn=rt.style.order.indexOf(Bt.fqid);for(const mn of Ft){const _i=Pt.getTile(mn).getBucket(Bt);if(!_i||_i.projection.name!==en.projection.name)continue;const eo=_i.getModelUris();eo&&!_i.modelsRequested&&(at.addModelsFromBucket(eo,tn),_i.modelsRequested=!0);const io=wc(mn,en);ci.zoom=io;const ie=Tn.possiblyEvaluate(ci);if(hc(rt,_i,mn),Ka.shadowUniformsInitialized=!1,Ka.useSingleShadowCascade=!!$t&&0===$t.getMaxCascadeForTile(mn.toUnwrapped()),"shadow"===rt.renderPass&&$t){if(1===rt.currentShadowCascade&&_i.isInsideFirstShadowMapFrustum)continue;const oe=en.calculatePosMatrix(mn.toUnwrapped(),en.worldSize);if(Ka.tileMatrix.set(oe),Ka.shadowTileMatrix=Float32Array.from($t.calculateShadowPassMatrixFromMatrix(oe)),Ka.aabb.min.fill(0),Ka.aabb.max[0]=Ka.aabb.max[1]=l.a3,Ka.aabb.max[2]=0,Xd(_i,Ka,rt,Bt.scope))continue}const L=1<<mn.canonical.z,j=[((_n.x-mn.wrap)*L-mn.canonical.x)*l.a3,(_n.y*L-mn.canonical.y)*l.a3,_n.z*L*l.a3];rt.conflationActive&&Object.keys(_i.instancesPerModel).length>0&&rt.style.isLayerClipped(Bt,Pt.getSource())&&_i.updateReplacement(mn,rt.replacementSource,zn)&&(_i.uploaded=!1,_i.upload(rt.context));for(let oe in _i.instancesPerModel){const Ve=_i.instancesPerModel[oe];Ve.features.length>0&&(oe=ie.evaluate(Ve.features[0].feature,{}));const lt=at.getModel(oe,tn);if(lt&&lt.uploaded)for(const cn of lt.nodes)Ya(rt,Bt,cn,Ve,j,mn,Ka)}}}(v,r,d,b,"vector"===se.type?d.scope:""),void ee();if(!se.loaded())return;if("batched-model"===se.type)return function(rt,Pt,Bt,Ft){Bt.resetLayerRenderingStats(rt);const tn=rt.context,en=rt.transform,_n=rt.style.fog,at=rt.shadowRenderer;if("mercator"!==en.projection.name)return void l.w(`Drawing 3D landmark models for ${en.projection.name} projection is not yet implemented`);const $t=rt.transform.getFreeCameraOptions().position,Tn=l._.scale([],[$t.x,$t.y,$t.z],rt.transform.worldSize);l._.negate(Tn,Tn);const ci=l.ad.identity([]),zn=l.cg(en.center.lat,en.zoom),mn=l.ad.fromScaling([],[1,1,1/zn]);l.ad.translate(ci,ci,Tn);const _i=Bt.paint.get("model-opacity"),eo=new l.ae(tn.gl.LEQUAL,l.ae.ReadWrite,rt.depthRangeFor3D),io=new l.ae(tn.gl.LEQUAL,l.ae.ReadOnly,rt.depthRangeFor3D),ie=new l.b6([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),L="shadow"===rt.renderPass,j=L&&at?at.getCurrentCascadeFrustum():en.getFrustum(en.scaleZoom(en.worldSize)),oe=Bt.paint.get("model-front-cutoff"),Ve=oe[2]<1,lt=Yc(rt,Bt.paint.get("model-cutoff-fade-range")),cn=Bt.getLayerRenderingStats();(function(hn,Qn,Wn,Wi){const vr=hn.terrain?hn.terrain.exaggeration():0,Sr=hn.transform.zoom;for(const Mr of Wi){const Hr=Qn.getTile(Mr).getBucket(Wn);Hr&&(hn.conflationActive&&Hr.updateReplacement(Mr,hn.replacementSource),Hr.evaluateScale(hn,Wn),hn.terrain&&vr>0&&Hr.elevationUpdate(hn.terrain,vr,Mr,Wn.source),Hr.needsReEvaluation(hn,Sr,Wn)&&Hr.evaluate(Wn))}})(rt,Pt,Bt,Ft),function(){let hn,Qn,Wn;Ve?(hn=Ft.length-1,Qn=-1,Wn=-1):(hn=0,Qn=Ft.length,Wn=1);for(let Wi=hn;Wi!==Qn;Wi+=Wn){const vr=Ft[Wi],Sr=Pt.getTile(vr).getBucket(Bt);if(!Sr||!Sr.uploaded)continue;let Mr=!1;at&&(Mr=0===at.getMaxCascadeForTile(vr.toUnwrapped()));const Hr=en.calculatePosMatrix(vr.toUnwrapped(),en.worldSize),Za=Sr.modelTraits,As=[];for(const ts of Sr.getNodesInfo()){if(ts.hiddenByReplacement||!ts.node.meshes)continue;const Js=ts.node;let ca=0;rt.terrain&&Js.elevation&&(ca=Js.elevation*rt.terrain.exaggeration());const Hs=ts.evaluatedScale;if(Hs[0]<=1&&Hs[1]<=1&&Hs[2]<=1&&0===(()=>{const pa=ts.aabb;return ie.min=[...pa.min],ie.max=[...pa.max],ie.min[2]+=ca,ie.max[2]+=ca,l._.transformMat4(ie.min,ie.min,Hr),l._.transformMat4(ie.max,ie.max,Hr),ie})().intersects(j))continue;const gs=[...Hr],Ca=Js.anchor?Js.anchor[0]:0,bl=Js.anchor?Js.anchor[1]:0;l.ad.translate(gs,gs,[Ca*(Hs[0]-1),bl*(Hs[1]-1),ca]),l._.exactEquals(Hs,l.cj)||l.ad.scale(gs,gs,Hs);const ua=l.ad.multiply([],gs,Js.matrix),za=l.ad.multiply([],en.expandedFarZProjMatrix,ua),qi=l.ad.multiply([],en.expandedFarZProjMatrix,gs),er=l.aA.transformMat4([],[Ca,bl,ca,1],za)[2];Js.hidden=!1;let ss=_i;L||(Ve&&(ss*=tc(gs,en,ts.aabb,oe)),ss*=Nl(lt,er)),0!==ss?As.push({nodeInfo:ts,depth:er,opacity:ss,wvpForNode:za,wvpForTile:qi,nodeModelMatrix:ua,tileModelMatrix:gs}):Js.hidden=!0}L||As.sort((ts,Js)=>!Ve||1===ts.opacity&&1===Js.opacity?ts.depth<Js.depth?-1:1:1===ts.opacity?-1:1===Js.opacity?1:ts.depth>Js.depth?-1:1);for(const ts of As){const Js=ts.nodeInfo,ca=Js.node;let Hs=l.ad.multiply([],mn,ts.tileModelMatrix);l.ad.multiply(Hs,ci,Hs);const gs=l.ad.invert([],Hs);l.ad.transpose(gs,gs),l.ad.scale(gs,gs,ad),Hs=l.ad.multiply(Hs,Hs,ca.matrix);const Ca="light-beam"===rt.renderPass,bl=Za&l.cl.HasMapboxMeshFeatures,ua=bl?0:Js.evaluatedRMEA[0][2];for(let za=0;za<ca.meshes.length;++za){const qi=ca.meshes[za],er=za===ca.lightMeshIndex;let ss=ts.wvpForNode;if(er){if(!Ca&&!rt.terrain&&rt.shadowRenderer){rt.currentLayer<rt.firstLightBeamLayer&&(rt.firstLightBeamLayer=rt.currentLayer);continue}ss=ts.wvpForTile}else if(Ca)continue;const pa={defines:[]},ri=[];if(Tl(pa.defines,ri,qi,rt,Bt.lut),bl||pa.defines.push("DIFFUSE_SHADED"),Mr&&pa.defines.push("SHADOWS_SINGLE_CASCADE"),cn&&(L?cn.numRenderedVerticesInShadowPass+=qi.vertexArray.length:cn.numRenderedVerticesInTransparentPass+=qi.vertexArray.length),L){Ta(qi,ts.nodeModelMatrix,rt,Bt);continue}let Du=null;if(_n){const hl=Wl(ts.nodeModelMatrix,rt.transform);if(Du=new Float32Array(hl),"globe"!==en.projection.name){const X0=qi.aabb.min,K0=qi.aabb.max,[D1,e0]=_n.getOpacityForBounds(hl,X0[0],X0[1],K0[0],K0[1]);pa.overrideFog=D1>=pr||e0>=pr}}const fd=qi.material;let Uc;fd.occlusionTexture&&fd.occlusionTexture.offsetScale&&(Uc=fd.occlusionTexture.offsetScale,pa.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!L&&at&&(at.useNormalOffset=!!qi.normalBuffer);const Nc=rt.getOrCreateProgram("model",pa);!L&&at&&at.setupShadowsFromMatrix(ts.tileModelMatrix,Nc,at.useNormalOffset),rt.uploadCommonUniforms(tn,Nc,null,Du);const Bh=fd.pbrMetallicRoughness;Bh.metallicFactor=.9,Bh.roughnessFactor=.5;const Jh=Ih(new Float32Array(ss),new Float32Array(Hs),new Float32Array(gs),new Float32Array(ca.matrix),rt,ts.opacity,Bh.baseColorFactor.toRenderColor(null),fd.emissiveFactor,Bh.metallicFactor,Bh.roughnessFactor,fd,ua,Bt,[0,0,0],Uc);!er&&(Js.hasTranslucentParts||ts.opacity<1)&&Nc.draw(rt,tn.gl.TRIANGLES,eo,l.ag.disabled,l.a.disabled,l.af.backCCW,Jh,Bt.id,qi.vertexBuffer,qi.indexBuffer,qi.segments,Bt.paint,rt.transform.zoom,void 0,ri),Nc.draw(rt,tn.gl.TRIANGLES,er?io:eo,l.ag.disabled,er||ts.opacity<1||Js.hasTranslucentParts?l.a.alphaBlended:l.a.unblended,l.af.backCCW,Jh,Bt.id,qi.vertexBuffer,qi.indexBuffer,qi.segments,Bt.paint,rt.transform.zoom,void 0,ri)}}}}()}(v,r,d,b),void ee();if("model"!==se.type)return;const he=se.getModels(),ye=[],Pe=v.transform.getFreeCameraOptions().position,Fe=l._.scale([],[Pe.x,Pe.y,Pe.z],v.transform.worldSize);l._.negate(Fe,Fe);const Qe=[],Je=[];let tt=0;for(const rt of he){const Pt=d.paint.get("model-rotation").constantOr(null),Bt=d.paint.get("model-scale").constantOr(null),Ft=d.paint.get("model-translation").constantOr(null);rt.computeModelMatrix(v,Pt,Bt,Ft,!0,!0,!1);const tn=l.ad.identity([]),en=l.cg(rt.position.lat,v.transform.zoom),_n=l.ad.fromScaling([],[1,1,1/en]);l.ad.translate(tn,tn,Fe),ye.push({zScaleMatrix:_n,negCameraPosMatrix:tn});for(const at of rt.nodes)ma(v.transform,at,rt.matrix,v.transform.expandedFarZProjMatrix,tt,Qe,Je);tt++}if(Qe.sort((rt,Pt)=>Pt.depth-rt.depth),"shadow"!==v.renderPass){if(1===M)for(const rt of Je)ul(rt,v,d,ye[rt.modelIndex],l.ag.disabled,v.colorModeForRenderPass());else{for(const rt of Je)ul(rt,v,d,ye[rt.modelIndex],l.ag.disabled,l.a.disabled);for(const rt of Je)ul(rt,v,d,ye[rt.modelIndex],v.stencilModeFor3D(),v.colorModeForRenderPass());v.resetStencilClippingMasks()}for(const rt of Qe)ul(rt,v,d,ye[rt.modelIndex],l.ag.disabled,v.colorModeForRenderPass());ee()}else{for(const rt of Je)Ta(rt.mesh,rt.nodeModelMatrix,v,d);for(const rt of Qe)Ta(rt.mesh,rt.nodeModelMatrix,v,d);ee()}}},ia={model:function(v,r,d){const b=r.getSource();if(!b.loaded())return;if("vector"===b.type||"geojson"===b.type)return void(d.modelManager&&d.modelManager.upload(d,"vector"===b.type?v.scope:""));if("batched-model"===b.type||"model"!==b.type)return;const M=b.getModels();for(const R of M)R.upload(d.context)},raster:function(v,r,d){const b=r.getSource();if(!(b instanceof Mi&&b.loaded()))return;const M=v.sourceLayer||b.rasterLayerIds&&b.rasterLayerIds[0];if(!M)return;const R=v.paint.get("raster-array-band")||b.getInitialBand(M);if(null==R)return;const N=r.getIds().map(H=>r.getTileByID(H));for(const H of N)H.updateNeeded(M,R)&&b.prepareTile(H,M,R)},"raster-particle":function(v,r,d){const b=r.getSource();if(!(b instanceof Mi&&b.loaded()))return;const M=v.sourceLayer||b.rasterLayerIds&&b.rasterLayerIds[0];if(!M)return;const R=v.paint.get("raster-particle-array-band")||b.getInitialBand(M);if(null==R)return;const N=r.getIds().map(H=>r.getTileByID(H));for(const H of N)H.updateNeeded(M,R)&&b.prepareTile(H,M,R)}};class Zc{constructor(r,d,b,M){this.context=new fo(r,d),this.occlusionBuffers=new cd(this.context),this.transform=b,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=M,this._timeStamp=l.e.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const R=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const N of R)this._debugParams.enabledLayers[N]=!0;M.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),M.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),M.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),M.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),M.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const N of R)M.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],N);this.symbolParams=new zr(M),this.setup(),this.numSublayers=l.bv.maxUnderzooming+l.bv.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new l.co,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Ea(this),this._wireframeDebugCache=new bd,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[]}updateTerrain(r,d){const b=!!r&&!!r.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new gr(this,r));const M=this._terrain;this.transform.elevation=b?M:null,M.update(r,this.transform,d),this.transform.elevation&&!M.enabled&&(this.transform.elevation=null)}_updateFog(r){const d=r.fog;if(!d||"globe"===this.transform.projection.name||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,M]=d.getFovAdjustedRange(this.transform._fov);if(b>M)return void(this.transform.fogCullDistSq=null);const R=b+.78*(M-b);this.transform.fogCullDistSq=R*R}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(r){r&&!this._terrain&&(this._terrain=new gr(this,this.style)),this._forceTerrainMode=r}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(r,d){if(this.width=r*l.e.devicePixelRatio,this.height=d*l.e.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._mergedLayers[b].resize()}setup(){const r=this.context,d=new l.bt;d.emplaceBack(0,0),d.emplaceBack(l.a3,0),d.emplaceBack(0,l.a3),d.emplaceBack(l.a3,l.a3),this.tileExtentBuffer=r.createVertexBuffer(d,l.br.members),this.tileExtentSegments=l.b.simpleSegment(0,0,4,2);const b=new l.bt;b.emplaceBack(0,0),b.emplaceBack(l.a3,0),b.emplaceBack(0,l.a3),b.emplaceBack(l.a3,l.a3),this.debugBuffer=r.createVertexBuffer(b,l.br.members),this.debugSegments=l.b.simpleSegment(0,0,4,5);const M=new l.bt;M.emplaceBack(-1,-1),M.emplaceBack(1,-1),M.emplaceBack(-1,1),M.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(M,l.br.members),this.viewportSegments=l.b.simpleSegment(0,0,4,2);const R=new l.cp;R.emplaceBack(0,0,0,0),R.emplaceBack(l.a3,0,l.a3,0),R.emplaceBack(0,l.a3,0,l.a3),R.emplaceBack(l.a3,l.a3,l.a3,l.a3),this.mercatorBoundsBuffer=r.createVertexBuffer(R,l.cq.members),this.mercatorBoundsSegments=l.b.simpleSegment(0,0,4,2);const N=new l.bu;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(N);const H=new l.cr;for(const se of[0,1,3,2,0])H.emplaceBack(se);this.debugIndexBuffer=r.createIndexBuffer(H),this.emptyTexture=new l.T(r,new l.i({width:1,height:1},Uint8Array.of(0,0,0,0)),r.gl.RGBA),this.identityMat=l.ad.create();const ee=this.context.gl;this.stencilClearMode=new l.ag({func:ee.ALWAYS,mask:0},0,255,ee.ZERO,ee.ZERO,ee.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(r){return r._makeTileBoundsBuffers(this.context,this.transform.projection),r._tileBoundsBuffer?{tileBoundsBuffer:r._tileBoundsBuffer,tileBoundsIndexBuffer:r._tileBoundsIndexBuffer,tileBoundsSegments:r._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const r=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,r.TRIANGLES,l.ae.disabled,this.stencilClearMode,l.a.disabled,l.af.disabled,Fn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(r,d,b){if(!d||this.currentStencilSource===d.id||!r.isTileClipped()||!b||0===b.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let H=!1;for(const ee of b)if(void 0===this._tileClippingMaskIDs[ee.key]){H=!0;break}if(!H)return}this.currentStencilSource=d.id;const M=this.context,R=M.gl;this.nextStencilID+b.length>256&&this.clearStencil(),M.setColorMode(l.a.disabled),M.setDepthMode(l.ae.disabled);const N=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const H of b){const ee=d.getTile(H),se=this._tileClippingMaskIDs[H.key]=this.nextStencilID++,{tileBoundsBuffer:he,tileBoundsIndexBuffer:ye,tileBoundsSegments:Pe}=this.getTileBoundsBuffers(ee);N.draw(this,R.TRIANGLES,l.ae.disabled,new l.ag({func:R.ALWAYS,mask:0},se,255,R.KEEP,R.KEEP,R.REPLACE),l.a.disabled,l.af.disabled,Fn(H.projMatrix),"$clipping",he,ye,Pe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,d=this.context.gl;return new l.ag({func:d.NOTEQUAL,mask:255},r,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(r){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(r);const d=this.context.gl;return new l.ag({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(r){const d=this.context.gl,b=r.sort((N,H)=>H.overscaledZ-N.overscaledZ),M=b[b.length-1].overscaledZ,R=b[0].overscaledZ-M+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const N={};for(let H=0;H<R;H++)N[H+M]=new l.ag({func:d.GEQUAL,mask:255},H+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=R,[N,b]}return[{[M]:l.ag.disabled},b]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new l.a([r.CONSTANT_COLOR,r.ONE,r.CONSTANT_COLOR,r.ONE],new l.C(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?l.a.unblended:l.a.alphaBlended}colorModeForDrapableLayerRenderPass(r){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&"translucent"===this.renderPass?new l.a([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new l.C(0,0,0,void 0===r?0:r),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(r,d,b,M=!1){if(this.depthOcclusion)return new l.ae(this.context.gl.GREATER,l.ae.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!M)return l.ae.disabled;const R=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new l.ae(b||this.context.gl.LEQUAL,d,[R,R])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const r=this.context.gl,d=Math.ceil(this.width),b=Math.ceil(this.height),M=this.context.bindFramebuffer.get(),R=r.getParameter(r.TEXTURE_BINDING_2D);this.terrainDepthFBO&&this.terrainDepthFBO.width===d&&this.terrainDepthFBO.height===b||(this.terrainDepthFBO&&(this.terrainDepthFBO.destroy(),this.terrainDepthFBO=void 0,this.terrainDepthTexture=void 0),0!==d&&0!==b&&(this.terrainDepthFBO=new ro(this.context,d,b,!1,"texture"),this.terrainDepthTexture=new l.T(this.context,{width:d,height:b,data:null},r.DEPTH_STENCIL),this.terrainDepthFBO.depthAttachment.set(this.terrainDepthTexture.texture))),this.context.bindFramebuffer.set(M),r.bindTexture(r.TEXTURE_2D,R),this.terrainDepthFBO&&(r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,this.terrainDepthFBO.framebuffer),r.blitFramebuffer(0,0,d,b,0,0,d,b,r.DEPTH_BUFFER_BIT,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(0===this._dt?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((r,d)=>r+d/this._fpsHistory.length,0))}render(r,d){const b=l.e.now();this._dt=b-this._timeStamp,this._timeStamp=b,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=r.map.repaint,this.style=r,this.options=d;const M=this.style._mergedLayers,R=this.style.order.filter(at=>{const $t=M[at];return!($t.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[$t.type]}),N=R.map(at=>M[at]),H=this.style._mergedSourceCaches;this.imageManager=r.imageManager,this.modelManager=r.modelManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.e.now()),this.imageManager.beginFrame();let ee=0,se=!1;for(const at in H){const $t=H[at];$t.used&&($t.prepare(this.context),$t.getSource().usedInConflation&&++ee)}let he=!1;for(const at of N)at.isHidden(this.transform.zoom)||("clip"===at.type&&(he=!0),this.prepareLayer(at));const ye={},Pe={},Fe={},Qe={},Je={};for(const at in H){const $t=H[at];ye[at]=$t.getVisibleCoordinates(),Pe[at]=ye[at].slice().reverse(),Fe[at]=$t.getVisibleCoordinates(!0).reverse(),Qe[at]=$t.getShadowCasterCoordinates(),Je[at]=$t.sortCoordinatesByDistance(ye[at])}const tt=at=>{const $t=this.style.getLayerSourceCache(at);return $t&&$t.used?$t.getSource():null};if(ee||he){const at=[],$t=[];let Tn=0;for(const ci of N)this.isSourceForClippingOrConflation(ci,tt(ci))&&(at.push(ci),$t.push(Tn)),Tn++;if(at&&(he||at.length>1)){const ci=[];for(let zn=0;zn<at.length;zn++){const mn=at[zn],_i=$t[zn],eo=this.style.getLayerSourceCache(mn);if(!eo||!eo.used||!eo.getSource().usedInConflation&&"clip"!==mn.type)continue;let io=1/0,ie=l.cu.None;if("clip"===mn.type){io=_i;for(const L of mn.layout.get("clip-layer-types"))ie|="model"===L?l.cu.Model:"symbol"===L?l.cu.Symbol:l.cu.FillExtrusion}ci.push({layer:mn.fqid,cache:eo,order:io,clipMask:ie})}this.replacementSource.setSources(ci),se=!0}}se||this.replacementSource.clear(),this.conflationActive=se,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let at=0;at<N.length;at++){const $t=N[at],Tn=$t.cutoffRange();if(this.longestCutoffRange=Math.max(Tn,this.longestCutoffRange),Tn>0){const ci=tt($t);ci&&(this.minCutoffZoom=Math.max(ci.minzoom,this.minCutoffZoom)),$t.minzoom&&(this.minCutoffZoom=Math.max($t.minzoom,this.minCutoffZoom))}$t.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=at),this._lastOcclusionLayer=at)}const rt=this.style&&this.style.fog;rt?(this._fogVisible=0!==rt.getOpacity(this.transform.pitch),this._fogVisible&&"globe"!==this.transform.projection.name&&(this._fogVisible=rt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Fe),this.opaquePassCutoff=0);const Pt=this._shadowRenderer;if(Pt){Pt.updateShadowParameters(this.transform,this.style.directionalLight);for(const at in H)for(const $t of ye[at]){let Tn={min:0,max:0};this.terrain&&(Tn=this.terrain.getMinMaxForTile($t)||Tn),Pt.addShadowReceiver($t.toUnwrapped(),Tn.min,Tn.max)}}if("globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new l.cs(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new la(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!l.ct(this.context.gl))return;this.renderPass="offscreen";for(const at of N){const $t=r.getLayerSourceCache(at);if(!at.hasOffscreenPass()||at.isHidden(this.transform.zoom))continue;const Tn=$t?Pe[$t.id]:void 0;("custom"===at.type||"raster"===at.type||"raster-particle"===at.type||at.isSky()||Tn&&Tn.length)&&this.renderLayer(this,$t,at,Tn)}this.depthRangeFor3D=[0,1-(N.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Qe)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Bt="globe"===this.transform.projection.name||this.transform.isHorizonVisible(),Ft=(()=>{if(d.showOverdrawInspector)return l.C.black;const at=this.style.fog;if(at&&this.transform.projection.supportsFog){const $t=this.style.getLut(at.scope);if(!Bt){const Tn=at.properties.get("color").toRenderColor($t).toArray01();return new l.C(...Tn)}if(Bt){const Tn=at.properties.get("space-color").toRenderColor($t).toArray01();return new l.C(...Tn)}}return l.C.transparent})();if(this.context.clear({color:Ft,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Bt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){const at=N[this.currentLayer],$t=r.getLayerSourceCache(at);if(at.isSky())continue;const Tn=$t?(at.is3D()?Je:Pe)[$t.id]:void 0;this._renderTileClippingMasks(at,$t,Tn),this.renderLayer(this,$t,at,Tn)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Bt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||l.a1(this.transform.zoom)>0)&&("globe"===this.transform.projection.name||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){const at=N[this.currentLayer],$t=r.getLayerSourceCache(at);at.isSky()&&this.renderLayer(this,$t,at,$t?Pe[$t.id]:void 0)}function tn(at,$t){let Tn;return $t&&(Tn=("symbol"===at.type?Fe:at.is3D()?Je:Pe)[$t.id]),Tn}if(this.renderPass="translucent","globe"===this.transform.projection.name){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<R.length;){const at=N[this.currentLayer];if("raster"===at.type){const $t=r.getLayerSourceCache(at);this.renderLayer(this,$t,at,tn(at,$t))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let en=0;Pt&&(en=Pt.getShadowCastingLayerCount());let _n=!1;for(;this.currentLayer<R.length;){const at=N[this.currentLayer],$t=r.getLayerSourceCache(at);if(at.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(at)){if(at.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(_n||!this.terrain||!this.style.hasSymbolLayers()&&!this.style.hasCircleLayers()||this.transform.isOrthographic||(_n=!0,this.blitDepth()),at.is3D()||this.terrain||this._renderTileClippingMasks(at,$t,$t?ye[$t.id]:void 0),this.renderLayer(this,$t,at,tn(at,$t)),!this.terrain&&Pt&&en>0&&at.hasShadowPass()&&0==--en&&(Pt.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Tn=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Tn;this.currentLayer++){const ci=N[this.currentLayer];if(!ci.hasLightBeamPass())continue;const zn=r.getLayerSourceCache(ci);this.renderLayer(this,zn,ci,zn?Pe[zn.id]:void 0)}this.currentLayer=Tn,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Tn=this.currentLayer;this.depthOcclusion=!0;for(const ci of this.layersWithOcclusionOpacity){this.currentLayer=ci;const zn=N[this.currentLayer],mn=r.getLayerSourceCache(zn),_i=mn?Pe[mn.id]:void 0;zn.is3D()||this.terrain||this._renderTileClippingMasks(zn,mn,mn?ye[mn.id]:void 0),this.renderLayer(this,mn,zn,_i)}this.depthOcclusion=!1,this.currentLayer=Tn,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let at=null;N.forEach($t=>{const Tn=r.getLayerSourceCache($t);Tn&&!$t.isHidden(this.transform.zoom)&&Tn.getVisibleCoordinates().length&&(!at||at.getSource().maxzoom<Tn.getSource().maxzoom)&&(at=Tn)}),at&&this.options.showTileBoundaries&&zc.debug(this,at,at.getVisibleCoordinates(),l.C.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&zc.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new l.C(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(at){const $t=at.transform.padding;Ce(at,at.transform.height-($t.top||0),3,yd),Ce(at,$t.bottom||0,3,Rd),Nt(at,$t.left||0,3,cl),Nt(at,at.transform.width-($t.right||0),3,fu);const Tn=at.transform.centerPoint;var ci,zn,mn,_i;Ie(ci=at,(zn=Tn.x)-1,(mn=at.transform.height-Tn.y)-10,2,20,_i=Su),Ie(ci,zn-10,mn-1,20,2,_i)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),se||(this.conflationActive=!1)}prepareLayer(r){this.gpuTimingStart(r);const{unsupportedLayers:d}=this.transform.projection,b=!d||!d.includes(r.type);if(ia[r.type]&&(b||this.terrain&&"custom"===r.type)){const M=this.style.getLayerSourceCache(r);ia[r.type](r,M,this)}this.gpuTimingEnd()}renderLayer(r,d,b,M){b.isHidden(this.transform.zoom)||("background"===b.type||"sky"===b.type||"custom"===b.type||"model"===b.type||"raster"===b.type||"raster-particle"===b.type||M&&M.length)&&(this.id=b.id,this.gpuTimingStart(b),r.transform.projection.unsupportedLayers&&r.transform.projection.unsupportedLayers.includes(b.type)&&(!r.terrain||"custom"!==b.type)||"clip"===b.type||zc[b.type](r,d,b,M,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(r){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,b=this.context.gl;let M=this.gpuTimers[r.id];M||(M=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:b.createQuery()}),M.calls++,b.beginQuery(d.TIME_ELAPSED_EXT,M.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const r=this.context.extTimerQuery,d=this.context.gl,b=d.createQuery();this.deferredRenderGpuTimeQueries.push(b),d.beginQuery(r.TIME_ELAPSED_EXT,b)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const r=this.gpuTimers;return this.gpuTimers={},r}collectDeferredRenderGpuQueries(){const r=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],r}queryGpuTimers(r){const d={};for(const b in r){const M=r[b],R=this.context.extTimerQuery,N=R.getQueryParameter(M.query,this.context.gl.QUERY_RESULT)/1e6;R.deleteQueryEXT(M.query),d[b]=N}return d}queryGpuTimeDeferredRender(r){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery,b=this.context.gl;let M=0;for(const R of r)M+=d.getQueryParameter(R,b.QUERY_RESULT)/1e6,d.deleteQueryEXT(R);return M}translatePosMatrix(r,d,b,M,R){if(!b[0]&&!b[1])return r;const N=R?"map"===M?this.transform.angle:0:"viewport"===M?-this.transform.angle:0;if(N){const se=Math.sin(N),he=Math.cos(N);b=[b[0]*he-b[1]*se,b[0]*se+b[1]*he]}const H=[R?b[0]:l.bB(d,b[0],this.transform.zoom),R?b[1]:l.bB(d,b[1],this.transform.zoom),0],ee=new Float32Array(16);return l.ad.translate(ee,r,H),ee}saveTileTexture(r){const d=r.size[0],b=this._tileTextures[d];b?b.push(r):this._tileTextures[d]=[r]}getTileTexture(r){const d=this._tileTextures[r];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return null!=this.context.extTextureFloatLinear}currentGlobalDefines(r,d,b){const M=void 0===b?this.terrain&&this.terrain.renderingToTexture:b,R=[];return this.style&&this.style.enable3dLights()&&("globeRaster"===r||"terrainRaster"===r?(R.push("LIGHTING_3D_MODE"),R.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):M||R.push("LIGHTING_3D_MODE")),"shadow"===this.renderPass?this._shadowMapDebug||R.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?R.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):R.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(R.push("TERRAIN"),this.linearFloatFilteringSupported()&&R.push("TERRAIN_DEM_FLOAT_FORMAT")),"globe"===this.transform.projection.name&&R.push("GLOBE"),!this._fogVisible||M||void 0!==d&&!d||R.push("FOG","FOG_DITHERING"),M&&R.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&R.push("OVERDRAW_INSPECTOR"),R}getOrCreateProgram(r,d){this.cache=this.cache||{};const b=d&&d.defines||[],M=d&&d.config,R=this.currentGlobalDefines(r,d&&d.overrideFog,d&&d.overrideRtt).concat(b),N=ms.cacheKey(ju[r],r,R,M);return this.cache[N]||(this.cache[N]=new ms(this.context,r,ju[r],M,Eh[r],R)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.terrainDepthFBO&&(this.terrainDepthFBO.destroy(),this.terrainDepthFBO=void 0,this.terrainDepthTexture=void 0)}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(r,d){if(this.style.enable3dLights()){const b=this.style.directionalLight,M=this.style.ambientLight;if(b&&M){const R=((N,H,ee)=>{const se=N.properties.get("direction"),he=N.properties.get("color").toRenderColor(ee.getLut(N.scope)).toArray01(),ye=N.properties.get("intensity"),Pe=H.properties.get("color").toRenderColor(ee.getLut(H.scope)).toArray01(),Fe=H.properties.get("intensity"),Qe=[se.x,se.y,se.z],Je=l.bA(Pe,Fe),tt=l.bA(he,ye);return{u_lighting_ambient_color:Je,u_lighting_directional_dir:Qe,u_lighting_directional_color:tt,u_ground_radiance:Xr(Qe,tt,Je)}})(b,M,this.style);d.setLightsUniformValues(r,R)}}}uploadCommonUniforms(r,d,b,M,R){if(this.uploadCommonLightUniforms(r,d),this.terrain&&this.terrain.renderingToTexture)return;const N=this.style.fog;if(N){const H=N.getOpacity(this.transform.pitch),ee=((se,he,ye,Pe,Fe,Qe,Je,tt,rt,Pt,Bt,Ft)=>{const tn=se.transform,en=he.properties.get("color").toRenderColor(se.style.getLut(he.scope)).toArray01();en[3]=Pe;const _n=se.frameCounter/1e3%1,[at,$t]=he.properties.get("vertical-range");return{u_fog_matrix:ye?tn.calculateFogTileMatrix(ye):Ft||se.identityMat,u_fog_range:he.getFovAdjustedRange(tn._fov),u_fog_color:en,u_fog_horizon_blend:he.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(at,$t),$t],u_fog_temporal_offset:_n,u_frustum_tl:Fe,u_frustum_tr:Qe,u_frustum_br:Je,u_frustum_bl:tt,u_globe_pos:rt,u_globe_radius:Pt,u_viewport:Bt,u_globe_transition:l.a1(tn.zoom),u_is_globe:+("globe"===tn.projection.name)}})(this,N,b,H,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*l.e.devicePixelRatio,this.transform.height*l.e.devicePixelRatio],M);d.setFogUniformValues(r,ee)}R&&d.setCutoffUniformValues(r,R.uniformValues)}setTileLoadedFlag(r){this.tileLoaded=r}saveCanvasCopy(){const r=this.canvasCopy();r&&(this.frameCopies.push(r),this.tileLoaded=!1)}canvasCopy(){const r=this.context.gl,d=r.createTexture();return r.bindTexture(r.TEXTURE_2D,d),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,r.drawingBufferWidth,r.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const r=this.style&&this.style.fog;return!!r&&0!==r.getOpacity(this.transform.pitch)}getBackgroundTiles(){const r=this._backgroundTiles,d=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const M of b)d[M.key]=r[M.key]||new l.by(M,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(r,d){return!(!r.is3D()||r.minzoom&&r.minzoom>this.transform.zoom||(this.style._clipLayerIndices.length||"building"!==r.sourceLayer)&&"clip"!==r.type&&(!d||"batched-model"!==d.type))}isTileAffectedByFog(r){if(!this.style||!this.style.fog)return!1;if("globe"===this.transform.projection.name)return!0;let d=this._cachedTileFogOpacities[r.key];return d||(this._cachedTileFogOpacities[r.key]=d=this.style.fog.getOpacityForTile(r)),d[0]>=pr||d[1]>=pr}}class Vl{constructor(r,d,b,M){this.screenBounds=r,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,M)}static createFromScreenPoints(r,d){let b,M;if(r instanceof l.P||"number"==typeof r[0]){const R=l.P.convert(r);b=[R],M=d.isPointAboveHorizon(R)}else{const R=l.P.convert(r[0]),N=l.P.convert(r[1]);b=[R,N],M=l.cv(R,N).every(H=>d.isPointAboveHorizon(H))}return new Vl(b,d.getCameraPoint(),M,d)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(r){return l.cv(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],r)}bufferedCameraGeometry(r){const d=this.screenBounds[0],b=1===this.screenBounds.length?this.screenBounds[0].add(new l.P(1,1)):this.screenBounds[1],M=l.cv(d,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<b.x?M.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?M[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(M[3]=this.cameraPoint)),l.cw(M,r)}bufferedCameraGeometryGlobe(r){const d=this.screenBounds[0],b=1===this.screenBounds.length?this.screenBounds[0].add(new l.P(1,1)):this.screenBounds[1],M=l.cv(d,b,r),R=this.cameraPoint.clone();switch(3*((R.y>d.y)+(R.y>b.y))+((R.x>d.x)+(R.x>b.x))){case 0:M[0]=R,M[4]=R.clone();break;case 1:M.splice(1,0,R);break;case 2:M[1]=R;break;case 3:M.splice(4,0,R);break;case 5:M.splice(2,0,R);break;case 6:M[3]=R;break;case 7:M.splice(3,0,R);break;case 8:M[2]=R}return M}containsTile(r,d,b,M=0){const R=r.queryPadding/d._pixelsPerMercatorPixel+1,N=b?this._bufferedCameraMercator(R,d):this._bufferedScreenMercator(R,d);let H=r.tileID.wrap+(N.unwrapped?M:0);const ee=N.polygon.map(tt=>l.cx(r.tileTransform,tt,H));if(!l.cy(ee,0,0,l.a3,l.a3))return;H=r.tileID.wrap+(this.screenGeometryMercator.unwrapped?M:0);const se=this.screenGeometryMercator.polygon.map(tt=>l.cz(r.tileTransform,tt,H)),he=se.map(tt=>new l.P(tt[0],tt[1])),ye=d.getFreeCameraOptions().position||new l.Y(0,0,0),Pe=l.cz(r.tileTransform,ye,H),Fe=se.map(tt=>{const rt=l._.sub(tt,tt,Pe);return l._.normalize(rt,rt),new l.aT(Pe,rt)}),Qe=l.bB(r,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:he,tilespaceRays:Fe,bufferedTilespaceGeometry:ee,bufferedTilespaceBounds:(Je=l.cA(ee),Je.min.x=l.at(Je.min.x,0,l.a3),Je.min.y=l.at(Je.min.y,0,l.a3),Je.max.x=l.at(Je.max.x,0,l.a3),Je.max.y=l.at(Je.max.y,0,l.a3),Je),tile:r,tileID:r.tileID,pixelToTileUnitsFactor:Qe};var Je}_bufferedScreenMercator(r,d){const b=Ch(r);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let M;return M="globe"===d.projection.name?this._projectAndResample(this.bufferedScreenGeometry(r),d):{polygon:this.bufferedScreenGeometry(r).map(R=>d.pointCoordinate3D(R)),unwrapped:!0},this._screenRaycastCache[b]=M,M}}_bufferedCameraMercator(r,d){const b=Ch(r);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let M;return M="globe"===d.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(r),d):{polygon:this.bufferedCameraGeometry(r).map(R=>d.pointCoordinate3D(R)),unwrapped:!0},this._cameraRaycastCache[b]=M,M}}_projectAndResample(r,d){const b=function(R,N){const H=l.ad.multiply([],N.pixelMatrix,N.globeMatrix),ee=[0,-l.cD,0,1],se=[0,l.cD,0,1],he=[0,0,0,1];l.aA.transformMat4(ee,ee,H),l.aA.transformMat4(se,se,H),l.aA.transformMat4(he,he,H);const ye=new l.P(ee[0]/ee[3],ee[1]/ee[3]),Pe=new l.P(se[0]/se[3],se[1]/se[3]),Fe=l.cB(R,ye)&&ee[3]<he[3],Qe=l.cB(R,Pe)&&se[3]<he[3];if(!Fe&&!Qe)return null;const Je=function(_n,at,$t){for(let Tn=1;Tn<_n.length;Tn++){const ci=Kd(at.pointCoordinate3D(_n[Tn-1]).x),zn=Kd(at.pointCoordinate3D(_n[Tn]).x);if($t<0){if(ci<zn)return{idx:Tn,t:-ci/(zn-1-ci)}}else if(zn<ci)return{idx:Tn,t:(1-ci)/(zn+1-ci)}}return null}(R,N,Fe?-1:1);if(!Je)return null;const{idx:tt,t:rt}=Je;let Pt=tt>1?Oc(R.slice(0,tt),N):[],Bt=tt<R.length?Oc(R.slice(tt),N):[];Pt=Pt.map(_n=>new l.P(Kd(_n.x),_n.y)),Bt=Bt.map(_n=>new l.P(Kd(_n.x),_n.y));const Ft=[...Pt];0===Ft.length&&Ft.push(Bt[Bt.length-1]);const tn=l.a2(Ft[Ft.length-1].y,(0===Bt.length?Pt[0]:Bt[0]).y,rt);let en;return en=Fe?[new l.P(0,tn),new l.P(0,0),new l.P(1,0),new l.P(1,tn)]:[new l.P(1,tn),new l.P(1,1),new l.P(0,1),new l.P(0,tn)],Ft.push(...en),0===Bt.length?Ft.push(Pt[0]):Ft.push(...Bt),{polygon:Ft.map(_n=>new l.Y(_n.x,_n.y)),unwrapped:!1}}(r,d);if(b)return b;const M=function(R,N){let H=!1,ee=-1/0,se=0;for(let ye=0;ye<R.length-1;ye++)R[ye].x>ee&&(ee=R[ye].x,se=ye);for(let ye=0;ye<R.length-1;ye++){const Pe=(se+ye)%(R.length-1),Fe=R[Pe],Qe=R[Pe+1];Math.abs(Fe.x-Qe.x)>.5&&(Fe.x<Qe.x?(Fe.x+=1,0===Pe&&(R[R.length-1].x+=1)):(Qe.x+=1,Pe+1===R.length-1&&(R[0].x+=1)),H=!0)}const he=l.aj(N.center.lng);return H&&he<Math.abs(he-1)&&R.forEach(ye=>{ye.x-=1}),{polygon:R,unwrapped:H}}(Oc(r,d).map(R=>new l.P(Kd(R.x),R.y)),d);return{polygon:M.polygon.map(R=>new l.Y(R.x,R.y)),unwrapped:M.unwrapped}}}function Oc(v,r){return l.cC(v,d=>{const b=r.pointCoordinate3D(d);d.x=b.x,d.y=b.y},1/256)}function Kd(v){return v<0?1+v%1:v%1}function Ch(v){return 100*v|0}function Gh(v,r){const d=l.ad.identity([]);return l.ad.scale(d,d,[.5*v.width,.5*-v.height,1]),l.ad.translate(d,d,[1,-1,0]),l.ad.multiply(d,d,v.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(d)}function dl(v,r,d,b,M,R,N,H=!1){const ee=v.tilesIn(b,N,H);ee.sort(ql);const se=[];for(const ye of ee)se.push({wrappedTileID:ye.tile.tileID.wrapped().key,queryResults:ye.tile.queryRenderedFeatures(r,d,v._state,ye,M,R,Gh(v.transform,ye.tile.tileID),H)});const he=function(ye){const Pe={},Fe={};for(const Qe of ye){const Je=Qe.queryResults,tt=Qe.wrappedTileID,rt=Fe[tt]=Fe[tt]||{};for(const Pt in Je){const Bt=Je[Pt],Ft=rt[Pt]=rt[Pt]||{},tn=Pe[Pt]=Pe[Pt]||[];for(const en of Bt)Ft[en.featureIndex]||(Ft[en.featureIndex]=!0,tn.push(en))}}return Pe}(se);for(const ye in he)he[ye].forEach(Pe=>{const Fe=Pe.feature,Qe=Fe.layer;Qe&&"background"!==Qe.type&&"sky"!==Qe.type&&"slot"!==Qe.type&&(Fe.source=Qe.source,Qe["source-layer"]&&(Fe.sourceLayer=Qe["source-layer"]),Fe.state=void 0!==Fe.id?v.getFeatureState(Qe["source-layer"],Fe.id):{})});return he}function l1(v,r){const d=v.getRenderableIds().map(R=>v.getTileByID(R)),b=[],M={};for(let R=0;R<d.length;R++){const N=d[R],H=N.tileID.canonical.key;M[H]||(M[H]=!0,N.querySourceFeatures(b,r))}return b}function ql(v,r){const d=v.tileID,b=r.tileID;return d.overscaledZ-b.overscaledZ||d.canonical.y-b.canonical.y||d.wrap-b.wrap||d.canonical.x-b.canonical.x}class wd{constructor(r){this.style=r,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const r=!1,d=!1;for(const b in this.style._mergedLayers){const M=this.style._mergedLayers[b];if("fill-extrusion"===M.type)this.layers.push({layer:M,visible:r,visibilityChanged:d});else if("model"===M.type){const R=this.style.getLayerSource(M);R&&"batched-model"===R.type&&this.layers.push({layer:M,visible:r,visibilityChanged:d})}}}onNewFrame(r){this.layersGotHidden=!1;for(const d of this.layers){const b=d.layer;let M=!1;"fill-extrusion"===b.type?M=!b.isHidden(r)&&b.paint.get("fill-extrusion-opacity")>0:"model"===b.type&&(M=!b.isHidden(r)&&b.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!M&&d.visible,d.visible=M}}updateZOffset(r,d){this.currentBuildingBuckets=[];for(const M of this.layers){const R=M.layer,N=this.style.getLayerSourceCache(R);let H=1;"fill-extrusion"===R.type&&(H=M.visible?R.paint.get("fill-extrusion-vertical-scale"):0);let ee=N?N.getTile(d):null;if(!ee&&N&&d.canonical.z>N.getSource().minzoom){let se=d.scaledTo(Math.min(N.getSource().maxzoom,d.overscaledZ-1));for(;se.overscaledZ>=N.getSource().minzoom&&(ee=N.getTile(se),!ee&&0!==se.overscaledZ);)se=se.scaledTo(se.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:ee?ee.getBucket(R):null,tileID:ee?ee.tileID:d,verticalScale:H})}r.hasAnyZOffset=!1;let b=!1;for(let M=0;M<r.symbolInstances.length;M++){const R=r.symbolInstances.get(M),N=R.zOffset,H=this._getHeightAtTileOffset(d,R.tileAnchorX,R.tileAnchorY);R.zOffset=H!==Number.NEGATIVE_INFINITY?H:N,b||N===R.zOffset||(b=!0),r.hasAnyZOffset||0===R.zOffset||(r.hasAnyZOffset=!0)}b&&(r.zOffsetBuffersNeedUpload=!0,r.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(r,d,b,M){let R=d,N=b;if(r.canonical.z!==M.canonical.z){const H=M.canonical,ee=1/(1<<r.canonical.z-H.z);R=(d+r.canonical.x*l.a3)*ee-H.x*l.a3|0,N=(b+r.canonical.y*l.a3)*ee-H.y*l.a3|0}return{tileX:R,tileY:N}}_getHeightAtTileOffset(r,d,b){let M,R;for(let N=0;N<this.layers.length;++N){if("fill-extrusion"!==this.layers[N].layer.type)continue;const{bucket:H,tileID:ee,verticalScale:se}=this.currentBuildingBuckets[N];if(!H)continue;const{tileX:he,tileY:ye}=this._mapCoordToOverlappingTile(r,d,b,ee),Pe=H.getHeightAtTileCoord(he,ye);Pe&&void 0!==Pe.height&&(Pe.hidden?M=Pe.height:R=Math.max(Pe.height*se,R||0))}if(void 0!==R)return R;for(let N=0;N<this.layers.length;++N){const H=this.layers[N];if("model"!==H.layer.type||!H.visible)continue;const{bucket:ee,tileID:se}=this.currentBuildingBuckets[N];if(!ee)continue;const{tileX:he,tileY:ye}=this._mapCoordToOverlappingTile(r,d,b,se),Pe=ee.getHeightAtTileCoord(he,ye);if(Pe&&!Pe.hidden)return void 0===Pe.height&&void 0!==M?Math.min(Pe.maxHeight,M)*Pe.verticalScale:Pe.height?Pe.height*Pe.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function xd(v,r){const d={};for(const b in v)"ref"!==b&&(d[b]=v[b]);return l.cE.forEach(b=>{b in r&&(d[b]=r[b])}),d}function C0(v){v=v.slice();const r=Object.create(null);for(let d=0;d<v.length;d++)r[v[d].id]=v[d];for(let d=0;d<v.length;d++)"ref"in v[d]&&(v[d]=xd(v[d],r[v[d].ref]));return v}const $s={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Tu(v,r,d){d.push({command:$s.addSource,args:[v,r[v]]})}function hh(v,r,d){r.push({command:$s.removeSource,args:[v]}),d[v]=!0}function zd(v,r,d,b){hh(v,d,b),Tu(v,r,d)}function wp(v,r,d){let b;for(b in v[d])if(v[d].hasOwnProperty(b)&&"data"!==b&&!We(v[d][b],r[d][b]))return!1;for(b in r[d])if(r[d].hasOwnProperty(b)&&"data"!==b&&!We(v[d][b],r[d][b]))return!1;return!0}function Wh(v,r,d,b,M,R){let N;for(N in r=r||{},v=v||{})v.hasOwnProperty(N)&&(We(v[N],r[N])||d.push({command:R,args:[b,N,r[N],M]}));for(N in r)r.hasOwnProperty(N)&&!v.hasOwnProperty(N)&&(We(v[N],r[N])||d.push({command:R,args:[b,N,r[N],M]}))}function mu(v){return v.id}function gu(v,r){return v[r.id]=r,v}class U0{constructor(r,d){this.reset(r,d)}reset(r,d){this.points=r||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(1===this.points.length)return this.points[0];r=l.at(r,0,1);let d=1,b=this._distances[d];const M=r*this.paddedLength+this.padding;for(;b<M&&d<this._distances.length;)b=this._distances[++d];const R=d-1,N=this._distances[R],H=b-N,ee=H>0?(M-N)/H:0;return this.points[R].mult(1-ee).add(this.points[d].mult(ee))}}class k0{constructor(r,d,b){const M=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(r/b),this.yCellCount=Math.ceil(d/b);for(let N=0;N<this.xCellCount*this.yCellCount;N++)M.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=d,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,d,b,M,R){this._forEachCell(d,b,M,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(M),this.bboxes.push(R)}insertCircle(r,d,b,M){this._forEachCell(d-M,b-M,d+M,b+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(d),this.circles.push(b),this.circles.push(M)}_insertBoxCell(r,d,b,M,R,N){this.boxCells[R].push(N)}_insertCircleCell(r,d,b,M,R,N){this.circleCells[R].push(N)}_query(r,d,b,M,R,N){if(b<0||r>this.width||M<0||d>this.height)return!R&&[];const H=[];if(r<=0&&d<=0&&this.width<=b&&this.height<=M){if(R)return!0;for(let ee=0;ee<this.boxKeys.length;ee++)H.push({key:this.boxKeys[ee],x1:this.bboxes[4*ee],y1:this.bboxes[4*ee+1],x2:this.bboxes[4*ee+2],y2:this.bboxes[4*ee+3]});for(let ee=0;ee<this.circleKeys.length;ee++){const se=this.circles[3*ee],he=this.circles[3*ee+1],ye=this.circles[3*ee+2];H.push({key:this.circleKeys[ee],x1:se-ye,y1:he-ye,x2:se+ye,y2:he+ye})}return N?H.filter(N):H}return this._forEachCell(r,d,b,M,this._queryCell,H,{hitTest:R,seenUids:{box:{},circle:{}}},N),R?H.length>0:H}_queryCircle(r,d,b,M,R){const N=r-b,H=r+b,ee=d-b,se=d+b;if(H<0||N>this.width||se<0||ee>this.height)return!M&&[];const he=[];return this._forEachCell(N,ee,H,se,this._queryCellCircle,he,{hitTest:M,circle:{x:r,y:d,radius:b},seenUids:{box:{},circle:{}}},R),M?he.length>0:he}query(r,d,b,M,R){return this._query(r,d,b,M,!1,R)}hitTest(r,d,b,M,R){return this._query(r,d,b,M,!0,R)}hitTestCircle(r,d,b,M){return this._queryCircle(r,d,b,!0,M)}_queryCell(r,d,b,M,R,N,H,ee){const se=H.seenUids,he=this.boxCells[R];if(null!==he){const Pe=this.bboxes;for(const Fe of he)if(!se.box[Fe]){se.box[Fe]=!0;const Qe=4*Fe;if(r<=Pe[Qe+2]&&d<=Pe[Qe+3]&&b>=Pe[Qe+0]&&M>=Pe[Qe+1]&&(!ee||ee(this.boxKeys[Fe]))){if(H.hitTest)return N.push(!0),!0;N.push({key:this.boxKeys[Fe],x1:Pe[Qe],y1:Pe[Qe+1],x2:Pe[Qe+2],y2:Pe[Qe+3]})}}}const ye=this.circleCells[R];if(null!==ye){const Pe=this.circles;for(const Fe of ye)if(!se.circle[Fe]){se.circle[Fe]=!0;const Qe=3*Fe;if(this._circleAndRectCollide(Pe[Qe],Pe[Qe+1],Pe[Qe+2],r,d,b,M)&&(!ee||ee(this.circleKeys[Fe]))){if(H.hitTest)return N.push(!0),!0;{const Je=Pe[Qe],tt=Pe[Qe+1],rt=Pe[Qe+2];N.push({key:this.circleKeys[Fe],x1:Je-rt,y1:tt-rt,x2:Je+rt,y2:tt+rt})}}}}}_queryCellCircle(r,d,b,M,R,N,H,ee){const se=H.circle,he=H.seenUids,ye=this.boxCells[R];if(null!==ye){const Fe=this.bboxes;for(const Qe of ye)if(!he.box[Qe]){he.box[Qe]=!0;const Je=4*Qe;if(this._circleAndRectCollide(se.x,se.y,se.radius,Fe[Je+0],Fe[Je+1],Fe[Je+2],Fe[Je+3])&&(!ee||ee(this.boxKeys[Qe])))return N.push(!0),!0}}const Pe=this.circleCells[R];if(null!==Pe){const Fe=this.circles;for(const Qe of Pe)if(!he.circle[Qe]){he.circle[Qe]=!0;const Je=3*Qe;if(this._circlesCollide(Fe[Je],Fe[Je+1],Fe[Je+2],se.x,se.y,se.radius)&&(!ee||ee(this.circleKeys[Qe])))return N.push(!0),!0}}}_forEachCell(r,d,b,M,R,N,H,ee){const se=this._convertToXCellCoord(r),he=this._convertToYCellCoord(d),ye=this._convertToXCellCoord(b),Pe=this._convertToYCellCoord(M);for(let Fe=se;Fe<=ye;Fe++)for(let Qe=he;Qe<=Pe;Qe++)if(R.call(this,r,d,b,M,this.xCellCount*Qe+Fe,N,H,ee))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,d,b,M,R,N){const H=M-r,ee=R-d,se=b+N;return se*se>H*H+ee*ee}_circleAndRectCollide(r,d,b,M,R,N,H){const ee=(N-M)/2,se=Math.abs(r-(M+ee));if(se>ee+b)return!1;const he=(H-R)/2,ye=Math.abs(d-(R+he));if(ye>he+b)return!1;if(se<=ee||ye<=he)return!0;const Pe=se-ee,Fe=ye-he;return Pe*Pe+Fe*Fe<=b*b}}const nc=100;class qh{constructor(r,d,b=new k0(r.width+200,r.height+200,25),M=new k0(r.width+200,r.height+200,25)){this.transform=r,this.grid=b,this.ignoredGrid=M,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+nc,this.screenBottomBoundary=r.height+nc,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.fogState=d}placeCollisionBox(r,d,b,M,R,N,H,ee){let se=b.projectedAnchorX,he=b.projectedAnchorY,ye=b.projectedAnchorZ;const Pe=b.elevation,Fe=b.tileID,Qe=r.getProjection();if(Pe&&Fe){const[en,_n,at]=Qe.upVector(Fe.canonical,b.tileAnchorX,b.tileAnchorY),$t=Qe.upVectorScale(Fe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;se+=en*Pe*$t,he+=_n*Pe*$t,ye+=at*Pe*$t}const Je=this.projectAndGetPerspectiveRatio(H,se,he,ye,b.tileID,"globe"===Qe.name||!!Pe||this.transform.pitch>0,Qe),tt=N*Je.perspectiveRatio,rt=(b.x1*d+M.x-b.padding)*tt+Je.point.x,Pt=(b.y1*d+M.y-b.padding)*tt+Je.point.y,Bt=(b.x2*d+M.x+b.padding)*tt+Je.point.x,Ft=(b.y2*d+M.y+b.padding)*tt+Je.point.y,tn=Je.perspectiveRatio<=.55||Je.occluded;return!this.isInsideGrid(rt,Pt,Bt,Ft)||!R&&this.grid.hitTest(rt,Pt,Bt,Ft,ee)||tn?{box:[],offscreen:!1,occluded:Je.occluded}:{box:[rt,Pt,Bt,Ft],offscreen:this.isOffscreen(rt,Pt,Bt,Ft),occluded:!1}}placeCollisionCircles(r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je){const tt=[],rt=this.transform.elevation,Pt=r.getProjection(),Bt=rt?rt.getAtTileOffsetFunc(Je,this.transform.center.lat,this.transform.worldSize,Pt):null,Ft=new l.P(b.tileAnchorX,b.tileAnchorY);let{x:tn,y:en,z:_n}=Pt.projectTilePoint(Ft.x,Ft.y,Je.canonical);if(Bt){const[ie,L,j]=Bt(Ft);tn+=ie,en+=L,_n+=j}const at="globe"===Pt.name,$t=this.projectAndGetPerspectiveRatio(H,tn,en,_n,Je,at||!!rt||this.transform.pitch>0,Pt),{perspectiveRatio:Tn}=$t,ci=(ye?N/Tn:N*Tn)/l.bN,zn=Eo(tn,en,_n,ee),mn=$t.signedDistanceFromCamera>0?hr(ci,R,b.lineOffsetX*ci,b.lineOffsetY*ci,!1,zn,Ft,b,M,ee,{},rt&&!ye?Bt:null,ye&&!!rt,Pt,Je,ye):null;let _i=!1,eo=!1,io=!0;if(mn&&!$t.occluded){const ie=.5*Fe*Tn+Qe,L=new l.P(-100,-100),j=new l.P(this.screenRightBoundary,this.screenBottomBoundary),oe=new U0,{first:Ve,last:lt}=mn,cn=Ve.path.length;let hn=[];for(let Wi=cn-1;Wi>=1;Wi--)hn.push(Ve.path[Wi]);for(let Wi=1;Wi<lt.path.length;Wi++)hn.push(lt.path[Wi]);const Qn=2.5*ie;se&&(hn=hn.map(([Wi,vr,Sr],Mr)=>(Bt&&!at&&(Sr=Bt(Mr<cn-1?Ve.tilePath[cn-1-Mr]:lt.tilePath[Mr-cn+2])[2]),Eo(Wi,vr,Sr,se))),hn.some(Wi=>Wi[3]<=0)&&(hn=[]));let Wn=[];if(hn.length>0){let Wi=1/0,vr=-1/0,Sr=1/0,Mr=-1/0;for(const Hr of hn)Wi=Math.min(Wi,Hr[0]),Sr=Math.min(Sr,Hr[1]),vr=Math.max(vr,Hr[0]),Mr=Math.max(Mr,Hr[1]);vr>=L.x&&Wi<=j.x&&Mr>=L.y&&Sr<=j.y&&(Wn=[hn.map(Hr=>new l.P(Hr[0],Hr[1]))],(Wi<L.x||vr>j.x||Sr<L.y||Mr>j.y)&&(Wn=l.cF(Wn,L.x,L.y,j.x,j.y)))}for(const Wi of Wn){oe.reset(Wi,.25*ie);let vr=0;vr=oe.length<=.5*ie?1:Math.ceil(oe.paddedLength/Qn)+1;for(let Sr=0;Sr<vr;Sr++){const Mr=Sr/Math.max(vr-1,1),Hr=oe.lerp(Mr),Za=Hr.x+nc,As=Hr.y+nc;tt.push(Za,As,ie,0);const ts=Za-ie,Js=As-ie,ca=Za+ie,Hs=As+ie;if(io=io&&this.isOffscreen(ts,Js,ca,Hs),eo=eo||this.isInsideGrid(ts,Js,ca,Hs),!d&&this.grid.hitTestCircle(Za,As,ie,Pe)&&(_i=!0,!he))return{circles:[],offscreen:!1,collisionDetected:_i,occluded:!1}}}}return{circles:!he&&_i||!eo?[]:tt,offscreen:io,collisionDetected:_i,occluded:$t.occluded}}queryRenderedSymbols(r){if(0===r.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let b=1/0,M=1/0,R=-1/0,N=-1/0;for(const he of r){const ye=new l.P(he.x+nc,he.y+nc);b=Math.min(b,ye.x),M=Math.min(M,ye.y),R=Math.max(R,ye.x),N=Math.max(N,ye.y),d.push(ye)}const H=this.grid.query(b,M,R,N).concat(this.ignoredGrid.query(b,M,R,N)),ee={},se={};for(const he of H){const ye=he.key;if(void 0===ee[ye.bucketInstanceId]&&(ee[ye.bucketInstanceId]={}),ee[ye.bucketInstanceId][ye.featureIndex])continue;const Pe=[new l.P(he.x1,he.y1),new l.P(he.x2,he.y1),new l.P(he.x2,he.y2),new l.P(he.x1,he.y2)];l.cG(d,Pe)&&(ee[ye.bucketInstanceId][ye.featureIndex]=!0,void 0===se[ye.bucketInstanceId]&&(se[ye.bucketInstanceId]=[]),se[ye.bucketInstanceId].push(ye.featureIndex))}return se}insertCollisionBox(r,d,b,M,R){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:M,collisionGroupID:R},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,d,b,M,R){const N=d?this.ignoredGrid:this.grid,H={bucketInstanceId:b,featureIndex:M,collisionGroupID:R};for(let ee=0;ee<r.length;ee+=4)N.insertCircle(H,r[ee],r[ee+1],r[ee+2])}projectAndGetPerspectiveRatio(r,d,b,M,R,N,H){const ee=[d,b,M,1];let se=!1;M||this.transform.pitch>0?(l.aA.transformMat4(ee,ee,r),this.fogState&&R&&"globe"!==H.name&&(se=function(Pe,Fe,Qe,Je,tt,rt){const Pt=rt.calculateFogTileMatrix(tt),Bt=[Fe,Qe,Je];return l._.transformMat4(Bt,Bt,Pt),es(Pe,l._.length(Bt),rt.pitch,rt._fov)}(this.fogState,d,b,M,R.toUnwrapped(),this.transform)>.9)):Yr(ee,ee,r);const he=ee[3];return{point:new l.P((ee[0]/he+1)/2*this.transform.width+nc,(-ee[1]/he+1)/2*this.transform.height+nc),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(H)/he*.5,1.5),signedDistanceFromCamera:he,occluded:N&&ee[2]>he||se}}isOffscreen(r,d,b,M){return b<nc||r>=this.screenRightBoundary||M<nc||d>this.screenBottomBoundary}isInsideGrid(r,d,b,M){return b>=0&&r<this.gridRightBoundary&&M>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const r=l.ad.identity([]);return l.ad.translate(r,r,[-100,-100,0]),r}}class H0{constructor(r,d,b,M){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?d:-d))):M&&b?1:0,this.placed=b}isHidden(){return 0===this.opacity&&!this.placed}}class S0{constructor(r,d,b,M,R,N=!1){this.text=new H0(r?r.text:null,d,b,R),this.icon=new H0(r?r.icon:null,d,M,R),this.clipped=N}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ud{constructor(r,d,b,M=!1){this.text=r,this.icon=d,this.skipFade=b,this.clipped=M}}class Hu{constructor(){this.invProjMatrix=l.ad.create(),this.viewportMatrix=l.ad.create(),this.circles=[]}}class T0{constructor(r,d,b,M,R){this.bucketInstanceId=r,this.featureIndex=d,this.sourceLayerIndex=b,this.bucketIndex=M,this.tileID=R}}class kh{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const d=++this.maxGroupID;this.collisionGroups[r]={ID:d,predicate:b=>b.collisionGroupID===d}}return this.collisionGroups[r]}}function M0(v,r,d,b,M){const{horizontalAlign:R,verticalAlign:N}=l.bQ(v),H=-(R-.5)*r,ee=-(N-.5)*d,se=l.bP(v,b);return new l.P(H+se[0]*M,ee+se[1]*M)}function Od(v,r,d,b,M){const R=new l.P(v,r);return d&&R._rotate(b?M:-M),R}class ph{constructor(r,d,b,M,R,N){this.transform=r.clone(),this.projection=r.projection.name,this.collisionIndex=new qh(this.transform,R),this.buildingIndex=N,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new kh(b),this.collisionCircleArrays={},this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,d,b,M){const R=b.getBucket(d),N=b.latestFeatureIndex;if(!R||!N||d.fqid!==R.layerIds[0])return;const H=R.layers[0].layout,ee=b.collisionBoxArray,se=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),he=b.tileSize/l.a3,ye=b.tileID.toUnwrapped();this.transform.setProjection(R.projection);const Pe=(Fe=b.tileID,Qe=R.getProjection(),Je=this.transform,Qe.name===this.projection?Je.calculateProjMatrix(Fe.toUnwrapped()):_d(Je,Qe,Fe));var Fe,Qe,Je;const tt="map"===H.get("text-pitch-alignment"),rt="map"===H.get("text-rotation-alignment");d.compileFilter();const Pt=d.dynamicFilter(),Bt=d.dynamicFilterNeedsFeature(),Ft=this.transform.calculatePixelsToTileUnitsMatrix(b),tn=li(Pe,b.tileID.canonical,tt,rt,this.transform,R.getProjection(),Ft);let en=null;if(tt){const $t=bo(Pe,b.tileID.canonical,tt,rt,this.transform,R.getProjection(),Ft);en=l.ad.multiply([],this.transform.labelPlaneMatrix,$t)}let _n=null;Pt&&b.latestFeatureIndex&&(_n={unwrappedTileID:ye,dynamicFilter:Pt,dynamicFilterNeedsFeature:Bt,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[R.bucketInstanceId]=new T0(R.bucketInstanceId,N,R.sourceLayerIndex,R.index,b.tileID);const at={bucket:R,layout:H,posMatrix:Pe,textLabelPlaneMatrix:tn,labelToScreenMatrix:en,clippingData:_n,scale:se,textPixelRatio:he,holdingForFade:b.holdingForFade(),collisionBoxArray:ee,partiallyEvaluatedTextSize:l.aD(R.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:l.aD(R.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(M)for(const $t of R.sortKeyRanges){const{sortKey:Tn,symbolInstanceStart:ci,symbolInstanceEnd:zn}=$t;r.push({sortKey:Tn,symbolInstanceStart:ci,symbolInstanceEnd:zn,parameters:at})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:at})}attemptAnchorPlacement(r,d,b,M,R,N,H,ee,se,he,ye,Pe,Fe,Qe,Je,tt,rt,Pt){const{textOffset0:Bt,textOffset1:Ft,crossTileID:tn}=Pe,en=[Bt,Ft],_n=M0(r,b,M,en,R),at=this.collisionIndex.placeCollisionBox(Qe,R,d,Od(_n.x,_n.y,N,H,this.transform.angle),ye,ee,se,he.predicate);if(tt){const $t=Qe.getSymbolInstanceIconSize(Pt,this.transform.zoom,Pe.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(Qe,$t,tt,Od(_n.x,_n.y,N,H,this.transform.angle),ye,ee,se,he.predicate).box.length)return}if(at.box.length>0){let $t;return this.prevPlacement&&this.prevPlacement.variableOffsets[tn]&&this.prevPlacement.placements[tn]&&this.prevPlacement.placements[tn].text&&($t=this.prevPlacement.variableOffsets[tn].anchor),this.variableOffsets[tn]={textOffset:en,width:b,height:M,anchor:r,textScale:R,prevAnchor:$t},this.markUsedJustification(Qe,r,Pe,Je),Qe.allowVerticalPlacement&&(this.markUsedOrientation(Qe,Je,Pe),this.placedOrientations[tn]=Je),{shift:_n,placedGlyphBoxes:at}}}placeLayerBucketPart(r,d,b,M){const{bucket:R,layout:N,posMatrix:H,textLabelPlaneMatrix:ee,labelToScreenMatrix:se,clippingData:he,textPixelRatio:ye,holdingForFade:Pe,collisionBoxArray:Fe,partiallyEvaluatedTextSize:Qe,partiallyEvaluatedIconSize:Je,collisionGroup:tt}=r.parameters,rt=N.get("text-optional"),Pt=N.get("icon-optional"),Bt=N.get("text-allow-overlap"),Ft=N.get("icon-allow-overlap"),tn="map"===N.get("text-rotation-alignment"),en="map"===N.get("text-pitch-alignment"),_n="viewport-y"===N.get("symbol-z-order"),at=N.get("symbol-z-elevate");this.transform.setProjection(R.projection);let $t=Bt&&(Ft||!R.hasIconData()||Pt),Tn=Ft&&(Bt||!R.hasTextData()||rt);!R.collisionArrays&&Fe&&R.deserializeCollisionBoxes(Fe),b&&M&&R.updateCollisionDebugBuffers(this.transform.zoom,Fe);const ci=(zn,mn,_i)=>{const{crossTileID:eo,numVerticalGlyphVertices:io}=zn;if(he){const ca={zoom:this.transform.zoom,pitch:this.transform.pitch};let Hs=null;if(he.dynamicFilterNeedsFeature){const gs=this.retainedQueryData[R.bucketInstanceId];Hs=he.featureIndex.loadFeature({featureIndex:zn.featureIndex,bucketIndex:gs.bucketIndex,sourceLayerIndex:gs.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,he.dynamicFilter)(ca,Hs,this.retainedQueryData[R.bucketInstanceId].tileID.canonical,new l.P(zn.tileAnchorX,zn.tileAnchorY),this.transform.calculateDistanceTileData(he.unwrappedTileID)))return this.placements[eo]=new ud(!1,!1,!1,!0),void d.add(eo)}if(d.has(eo))return;if(Pe)return void(this.placements[eo]=new ud(!1,!1,!1));let ie=!1,L=!1,j=!0,oe=!1,Ve=!1,lt=null,cn={box:null,offscreen:null,occluded:null},hn={box:null,offscreen:null,occluded:null},Qn=null,Wn=null,Wi=null,vr=0,Sr=0,Mr=0;_i.textFeatureIndex?vr=_i.textFeatureIndex:zn.useRuntimeCollisionCircles&&(vr=zn.featureIndex),_i.verticalTextFeatureIndex&&(Sr=_i.verticalTextFeatureIndex);const Hr=ca=>{ca.tileID=this.retainedQueryData[R.bucketInstanceId].tileID;const Hs=this.transform.elevation;ca.elevation=zn.zOffset+(Hs?Hs.getAtTileOffset(ca.tileID,ca.tileAnchorX,ca.tileAnchorY):0)},Za=_i.textBox;if(Za){Hr(Za);const ca=gs=>{let Ca=l.aE.horizontal;if(R.allowVerticalPlacement&&!gs&&this.prevPlacement){const bl=this.prevPlacement.placedOrientations[eo];bl&&(this.placedOrientations[eo]=bl,Ca=bl,this.markUsedOrientation(R,Ca,zn))}return Ca},Hs=(gs,Ca)=>{if(R.allowVerticalPlacement&&io>0&&_i.verticalTextBox){for(const bl of R.writingModes)if(bl===l.aE.vertical?(cn=Ca(),hn=cn):cn=gs(),cn&&cn.box&&cn.box.length)break}else cn=gs()};if(N.get("text-variable-anchor")){let gs=N.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[eo]){const ua=this.prevPlacement.variableOffsets[eo];gs.indexOf(ua.anchor)>0&&(gs=gs.filter(za=>za!==ua.anchor),gs.unshift(ua.anchor))}const Ca=(ua,za,qi)=>{const er=R.getSymbolInstanceTextSize(Qe,zn,this.transform.zoom,mn),ss=(ua.x2-ua.x1)*er+2*ua.padding,pa=(ua.y2-ua.y1)*er+2*ua.padding,ri=zn.hasIconTextFit&&!Ft?za:null;ri&&Hr(ri);let Du={box:[],offscreen:!1,occluded:!1};const fd=Bt?2*gs.length:gs.length;for(let Uc=0;Uc<fd;++Uc){const Nc=this.attemptAnchorPlacement(gs[Uc%gs.length],ua,ss,pa,er,tn,en,ye,H,tt,Uc>=gs.length,zn,mn,R,qi,ri,Qe,Je);if(Nc&&(Du=Nc.placedGlyphBoxes,Du&&Du.box&&Du.box.length)){ie=!0,lt=Nc.shift;break}}return Du};Hs(()=>Ca(Za,_i.iconBox,l.aE.horizontal),()=>{const ua=_i.verticalTextBox;return ua&&Hr(ua),R.allowVerticalPlacement&&!(cn&&cn.box&&cn.box.length)&&io>0&&ua?Ca(ua,_i.verticalIconBox,l.aE.vertical):{box:null,offscreen:null,occluded:null}}),cn&&(ie=cn.box,j=cn.offscreen,oe=cn.occluded);const bl=ca(!(!cn||!cn.box));if(!ie&&this.prevPlacement){const ua=this.prevPlacement.variableOffsets[eo];ua&&(this.variableOffsets[eo]=ua,this.markUsedJustification(R,ua.anchor,zn,bl))}}else{const gs=(Ca,bl)=>{const ua=R.getSymbolInstanceTextSize(Qe,zn,this.transform.zoom,mn),za=this.collisionIndex.placeCollisionBox(R,ua,Ca,new l.P(0,0),Bt,ye,H,tt.predicate);return za&&za.box&&za.box.length&&(this.markUsedOrientation(R,bl,zn),this.placedOrientations[eo]=bl),za};Hs(()=>gs(Za,l.aE.horizontal),()=>{const Ca=_i.verticalTextBox;return R.allowVerticalPlacement&&io>0&&Ca?(Hr(Ca),gs(Ca,l.aE.vertical)):{box:null,offscreen:null,occluded:null}}),ca(!!(cn&&cn.box&&cn.box.length))}}if(Qn=cn,ie=Qn&&Qn.box&&Qn.box.length>0,j=Qn&&Qn.offscreen,oe=Qn&&Qn.occluded,zn.useRuntimeCollisionCircles){const ca=R.text.placedSymbolArray.get(zn.centerJustifiedTextSymbolIndex>=0?zn.centerJustifiedTextSymbolIndex:zn.verticalPlacedTextSymbolIndex),Hs=l.aF(R.textSizeData,Qe,ca),gs=N.get("text-padding");Wn=this.collisionIndex.placeCollisionCircles(R,Bt,ca,R.lineVertexArray,R.glyphOffsetArray,Hs,H,ee,se,b,en,tt.predicate,zn.collisionCircleDiameter*Hs/l.bN,gs,this.retainedQueryData[R.bucketInstanceId].tileID),ie=Bt||Wn.circles.length>0&&!Wn.collisionDetected,j=j&&Wn.offscreen,oe=Wn.occluded}if(_i.iconFeatureIndex&&(Mr=_i.iconFeatureIndex),_i.iconBox){const ca=Hs=>{Hr(Hs);const gs=zn.hasIconTextFit&&lt?Od(lt.x,lt.y,tn,en,this.transform.angle):new l.P(0,0),Ca=R.getSymbolInstanceIconSize(Je,this.transform.zoom,zn.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(R,Ca,Hs,gs,Ft,ye,H,tt.predicate)};hn&&hn.box&&hn.box.length&&_i.verticalIconBox?(Wi=ca(_i.verticalIconBox),L=Wi.box.length>0):(Wi=ca(_i.iconBox),L=Wi.box.length>0),j=j&&Wi.offscreen,Ve=Wi.occluded}const As=rt||0===zn.numHorizontalGlyphVertices&&0===io,ts=Pt||0===zn.numIconVertices;if(As||ts?ts?As||(L=L&&ie):ie=L&&ie:L=ie=L&&ie,ie&&Qn&&Qn.box&&this.collisionIndex.insertCollisionBox(Qn.box,N.get("text-ignore-placement"),R.bucketInstanceId,hn&&hn.box&&Sr?Sr:vr,tt.ID),L&&Wi&&this.collisionIndex.insertCollisionBox(Wi.box,N.get("icon-ignore-placement"),R.bucketInstanceId,Mr,tt.ID),Wn&&(ie&&this.collisionIndex.insertCollisionCircles(Wn.circles,N.get("text-ignore-placement"),R.bucketInstanceId,vr,tt.ID),b)){const ca=R.bucketInstanceId;let Hs=this.collisionCircleArrays[ca];void 0===Hs&&(Hs=this.collisionCircleArrays[ca]=new Hu);for(let gs=0;gs<Wn.circles.length;gs+=4)Hs.circles.push(Wn.circles[gs+0]),Hs.circles.push(Wn.circles[gs+1]),Hs.circles.push(Wn.circles[gs+2]),Hs.circles.push(Wn.collisionDetected?1:0)}const Js="globe"!==R.projection.name;$t=$t&&(Js||!oe),Tn=Tn&&(Js||!Ve),this.placements[eo]=new ud(ie||$t,L||Tn,j||R.justReloaded),d.add(eo)};if(at&&this.buildingIndex&&(this.buildingIndex.updateZOffset(R,this.retainedQueryData[R.bucketInstanceId].tileID),R.updateZOffset()),_n){const zn=R.getSortedSymbolIndexes(this.transform.angle);for(let mn=zn.length-1;mn>=0;--mn){const _i=zn[mn];ci(R.symbolInstances.get(_i),_i,R.collisionArrays[_i])}R.hasAnyZOffset&&l.w(`${R.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(R.hasAnyZOffset){const zn=R.getSortedIndexesByZOffset();for(let mn=0;mn<zn.length;++mn){const _i=zn[mn];ci(R.symbolInstances.get(_i),_i,R.collisionArrays[_i])}}else for(let zn=r.symbolInstanceStart;zn<r.symbolInstanceEnd;zn++)ci(R.symbolInstances.get(zn),zn,R.collisionArrays[zn]);if(b&&R.bucketInstanceId in this.collisionCircleArrays){const zn=this.collisionCircleArrays[R.bucketInstanceId];l.ad.invert(zn.invProjMatrix,H),zn.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1}markUsedJustification(r,d,b,M){const{leftJustifiedTextSymbolIndex:R,centerJustifiedTextSymbolIndex:N,rightJustifiedTextSymbolIndex:H,verticalPlacedTextSymbolIndex:ee,crossTileID:se}=b,he=l.cJ(d),ye=M===l.aE.vertical?ee:"left"===he?R:"center"===he?N:"right"===he?H:-1;R>=0&&(r.text.placedSymbolArray.get(R).crossTileID=ye>=0&&R!==ye?0:se),N>=0&&(r.text.placedSymbolArray.get(N).crossTileID=ye>=0&&N!==ye?0:se),H>=0&&(r.text.placedSymbolArray.get(H).crossTileID=ye>=0&&H!==ye?0:se),ee>=0&&(r.text.placedSymbolArray.get(ee).crossTileID=ye>=0&&ee!==ye?0:se)}markUsedOrientation(r,d,b){const M=d===l.aE.horizontal||d===l.aE.horizontalOnly?d:0,R=d===l.aE.vertical?d:0,{leftJustifiedTextSymbolIndex:N,centerJustifiedTextSymbolIndex:H,rightJustifiedTextSymbolIndex:ee,verticalPlacedTextSymbolIndex:se}=b,he=r.text.placedSymbolArray;N>=0&&(he.get(N).placedOrientation=M),H>=0&&(he.get(H).placedOrientation=M),ee>=0&&(he.get(ee).placedOrientation=M),se>=0&&(he.get(se).placedOrientation=R)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let b=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const M=d?d.symbolFadeChange(r):1,R=d?d.opacities:{},N=d?d.variableOffsets:{},H=d?d.placedOrientations:{};for(const ee in this.placements){const se=this.placements[ee],he=R[ee];he?(this.opacities[ee]=new S0(he,M,se.text,se.icon,null,se.clipped),b=b||se.text!==he.text.placed||se.icon!==he.icon.placed):(this.opacities[ee]=new S0(null,M,se.text,se.icon,se.skipFade,se.clipped),b=b||se.text||se.icon)}for(const ee in R){const se=R[ee];if(!this.opacities[ee]){const he=new S0(se,M,!1,!1);he.isHidden()||(this.opacities[ee]=he,b=b||se.text.placed||se.icon.placed)}}for(const ee in N)this.variableOffsets[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.variableOffsets[ee]=N[ee]);for(const ee in H)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=H[ee]);b?this.lastPlacementChangeTime=r:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:r)}updateLayerOpacities(r,d,b,M){const R=new Set;for(const N of d){const H=N.getBucket(r);H&&N.latestFeatureIndex&&r.fqid===H.layerIds[0]&&(this.updateBucketOpacities(H,R,N.collisionBoxArray,b,M,N.tileID),H.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(H,N.tileID),H.updateZOffset()))}}updateBucketOpacities(r,d,b,M,R,N){r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const H=r.layers[0].layout,ee=!!r.layers[0].dynamicFilter(),se=new S0(null,0,!1,!1,!0),he=H.get("text-allow-overlap"),ye=H.get("icon-allow-overlap"),Pe=H.get("text-variable-anchor"),Fe="map"===H.get("text-rotation-alignment"),Qe="map"===H.get("text-pitch-alignment"),Je=new S0(null,0,he&&(ye||!r.hasIconData()||H.get("icon-optional")),ye&&(he||!r.hasTextData()||H.get("text-optional")),!0);!r.collisionArrays&&b&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(b);const tt=(Pt,Bt,Ft)=>{for(let tn=0;tn<Bt/4;tn++)Pt.opacityVertexArray.emplaceBack(Ft)};let rt=0;R&&r.updateReplacement(N,R);for(let Pt=0;Pt<r.symbolInstances.length;Pt++){const Bt=r.symbolInstances.get(Pt),{numHorizontalGlyphVertices:Ft,numVerticalGlyphVertices:tn,crossTileID:en,numIconVertices:_n,tileAnchorX:at,tileAnchorY:$t}=Bt,Tn=d.has(en);let ci=this.opacities[en];Tn?ci=se:ci||(ci=Je,this.opacities[en]=ci),d.add(en);const zn=Ft>0||tn>0,mn=_n>0,_i=this.placedOrientations[en],eo=_i===l.aE.vertical,io=_i===l.aE.horizontal||_i===l.aE.horizontalOnly;!zn&&!mn||ci.isHidden()||rt++;let ie=!1;if((zn||mn)&&R)for(const L of r.activeReplacements){if(L.order<M||L.order===1/0||!(L.clipMask&l.cu.Symbol)||L.min.x>at||at>L.max.x||L.min.y>$t||$t>L.max.y)continue;const j=l.cH(at,$t,N.canonical,L.footprintTileId.canonical);if(ie=l.cI(j,L),ie)break}if(zn){const L=ie?Ht:Mt(ci.text);tt(r.text,Ft,eo?Ht:L),tt(r.text,tn,io?Ht:L);const j=ci.text.isHidden(),{leftJustifiedTextSymbolIndex:oe,centerJustifiedTextSymbolIndex:Ve,rightJustifiedTextSymbolIndex:lt,verticalPlacedTextSymbolIndex:cn}=Bt,hn=r.text.placedSymbolArray,Qn=j||eo?1:0;oe>=0&&(hn.get(oe).hidden=Qn),Ve>=0&&(hn.get(Ve).hidden=Qn),lt>=0&&(hn.get(lt).hidden=Qn),cn>=0&&(hn.get(cn).hidden=j||io?1:0);const Wn=this.variableOffsets[en];Wn&&this.markUsedJustification(r,Wn.anchor,Bt,_i);const Wi=this.placedOrientations[en];Wi&&(this.markUsedJustification(r,"left",Bt,Wi),this.markUsedOrientation(r,Wi,Bt))}if(mn){const L=ie?Ht:Mt(ci.icon),{placedIconSymbolIndex:j,verticalPlacedIconSymbolIndex:oe}=Bt,Ve=r.icon.placedSymbolArray,lt=ci.icon.isHidden()?1:0;j>=0&&(tt(r.icon,_n,eo?Ht:L),Ve.get(j).hidden=lt),oe>=0&&(tt(r.icon,Bt.numVerticalIconVertices,io?Ht:L),Ve.get(oe).hidden=lt)}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const L=r.collisionArrays[Pt];if(L){let j=new l.P(0,0),oe=!0;if(L.textBox||L.verticalTextBox){if(Pe){const lt=this.variableOffsets[en];lt?(j=M0(lt.anchor,lt.width,lt.height,lt.textOffset,lt.textScale),Fe&&j._rotate(Qe?this.transform.angle:-this.transform.angle)):oe=!1}ee&&(oe=!ci.clipped),L.textBox&&Id(r.textCollisionBox.collisionVertexArray,ci.text.placed,!oe||eo,j.x,j.y),L.verticalTextBox&&Id(r.textCollisionBox.collisionVertexArray,ci.text.placed,!oe||io,j.x,j.y)}const Ve=oe&&!(io||!L.verticalIconBox);L.iconBox&&Id(r.iconCollisionBox.collisionVertexArray,ci.icon.placed,Ve,Bt.hasIconTextFit?j.x:0,Bt.hasIconTextFit?j.y:0),L.verticalIconBox&&Id(r.iconCollisionBox.collisionVertexArray,ci.icon.placed,!Ve,Bt.hasIconTextFit?j.x:0,Bt.hasIconTextFit?j.y:0)}}}if(r.fullyClipped=0===rt,r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.bucketInstanceId in this.collisionCircleArrays){const Pt=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Pt.invProjMatrix,r.placementViewportMatrix=Pt.viewportMatrix,r.collisionCircleArray=Pt.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return 0===this.fadeDuration?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,d){const b=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*b>r}setStale(){this.stale=!0}}function Id(v,r,d,b,M){v.emplaceBack(r?1:0,d?1:0,b||0,M||0),v.emplaceBack(r?1:0,d?1:0,b||0,M||0),v.emplaceBack(r?1:0,d?1:0,b||0,M||0),v.emplaceBack(r?1:0,d?1:0,b||0,M||0)}const $c=Math.pow(2,25),Xh=Math.pow(2,24),Z=Math.pow(2,17),me=Math.pow(2,16),ke=Math.pow(2,9),ge=Math.pow(2,8),Be=Math.pow(2,1);function Mt(v){if(0===v.opacity&&!v.placed)return 0;if(1===v.opacity&&v.placed)return 4294967295;const r=v.placed?1:0,d=Math.floor(127*v.opacity);return d*$c+r*Xh+d*Z+r*me+d*ke+r*ge+d*Be+r}const Ht=0;class Ci{constructor(r){this._sortAcrossTiles="viewport-y"!==r.layout.get("symbol-z-order")&&void 0!==r.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(r,d,b,M,R){const N=this._bucketParts;for(;this._currentTileIndex<r.length;)if(d.getBucketParts(N,M,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((H,ee)=>H.sortKey-ee.sortKey));this._currentPartIndex<N.length;){const H=N[this._currentPartIndex];if(d.placeLayerBucketPart(H,this._seenCrossTileIDs,b,0===H.symbolInstanceStart),this._currentPartIndex++,R())return!0}return!1}}class _o{constructor(r,d,b,M,R,N,H,ee,se){this.placement=new ph(r,R,N,H,ee,se),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=M,this._done=!1}isDone(){return this._done}continuePlacement(r,d,b,M){const R=l.e.now(),N=()=>{const H=l.e.now()-R;return!this._forceFullPlacement&&H>2};for(;this._currentPlacementIndex>=0;){const H=d[r[this._currentPlacementIndex]],ee=this.placement.collisionIndex.transform.zoom;if("symbol"===H.type&&(!H.minzoom||H.minzoom<=ee)&&(!H.maxzoom||H.maxzoom>ee)){const se=H,he=se.layout.get("symbol-z-elevate"),ye=this._inProgressLayer=this._inProgressLayer||new Ci(se),Pe=l.al(H.source,H.scope);if(ye.continuePlacement(he?M[Pe]:b[Pe],this.placement,this._showCollisionBoxes,H,N))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Ti=512/l.a3/2;class or{constructor(r,d,b){this.tileID=r,this.bucketInstanceId=b,this.index=new l.cK(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const M=r.canonical.x*l.a3,R=r.canonical.y*l.a3;for(let N=0;N<d.length;N++){const{key:H,crossTileID:ee,tileAnchorX:se,tileAnchorY:he}=d.get(N),ye=Math.floor((M+se)*Ti),Pe=Math.floor((R+he)*Ti);this.index.add(ye,Pe),this.keys.push(H),this.crossTileIDs.push(ee)}this.index.finish()}findMatches(r,d,b){const M=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),R=Ti/Math.pow(2,d.canonical.z-this.tileID.canonical.z),N=d.canonical.x*l.a3,H=d.canonical.y*l.a3;for(let ee=0;ee<r.length;ee++){const se=r.get(ee);if(se.crossTileID)continue;const{key:he,tileAnchorX:ye,tileAnchorY:Pe}=se,Fe=Math.floor((N+ye)*R),Qe=Math.floor((H+Pe)*R),Je=this.index.range(Fe-M,Qe-M,Fe+M,Qe+M);for(const tt of Je){const rt=this.crossTileIDs[tt];if(this.keys[tt]===he&&!b.has(rt)){b.add(rt),se.crossTileID=rt;break}}}}}class Us{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Va{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const d=Math.round((r-this.lng)/360);if(0!==d)for(const b in this.indexes){const M=this.indexes[b],R={};for(const N in M){const H=M[N];H.tileID=H.tileID.unwrapTo(H.tileID.wrap+d),R[H.tileID.key]=H}this.indexes[b]=R}this.lng=r}addBucket(r,d,b){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let R=0;R<d.symbolInstances.length;R++)d.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]=new Set);const M=this.usedCrossTileIDs[r.overscaledZ];for(const R in this.indexes){const N=this.indexes[R];if(Number(R)>r.overscaledZ)for(const H in N){const ee=N[H];ee.tileID.isChildOf(r)&&ee.findMatches(d.symbolInstances,r,M)}else{const H=N[r.scaledTo(Number(R)).key];H&&H.findMatches(d.symbolInstances,r,M)}}for(let R=0;R<d.symbolInstances.length;R++){const N=d.symbolInstances.get(R);N.crossTileID||(N.crossTileID=b.generate(),M.add(N.crossTileID))}return void 0===this.indexes[r.overscaledZ]&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new or(r,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(r,d){for(const b of d.crossTileIDs)this.usedCrossTileIDs[r].delete(b)}removeStaleBuckets(r){let d=!1;for(const b in this.indexes){const M=this.indexes[b];for(const R in M)r[M[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,M[R]),delete M[R],d=!0)}return d}}class Qs{constructor(){this.layerIndexes={},this.crossTileIDs=new Us,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,d,b,M){let R=this.layerIndexes[r.fqid];void 0===R&&(R=this.layerIndexes[r.fqid]=new Va);let N=!1;const H={};"globe"!==M.name&&R.handleWrapJump(b);for(const ee of d){const se=ee.getBucket(r);se&&r.fqid===se.layerIds[0]&&(se.bucketInstanceId||(se.bucketInstanceId=++this.maxBucketInstanceId),R.addBucket(ee.tileID,se,this.crossTileIDs)&&(N=!0),H[se.bucketInstanceId]=!0)}return R.removeStaleBuckets(H)&&(N=!0),N}pruneUnusedLayers(r){const d={};r.forEach(b=>{d[b]=!0});for(const b in this.layerIndexes)d[b]||delete this.layerIndexes[b]}}const Ml=new l.N({data:new l.O(l.L.colorTheme.data)}),Qc=(v,r)=>di(v,r&&r.filter(d=>"source.canvas"!==d.identifier)),pc=l.ah($s,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),Ld=l.ah($s,["setCenter","setZoom","setBearing","setPitch"]),$l={version:8,layers:[],sources:{}},A0={duration:300,delay:0};class Jc extends l.E{constructor(r,d={}){super(),this.map=r,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=l.W({},A0),this._buildingIndex=new wd(this),this.crossTileSymbolIndex=new Qs,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerIndices=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new xt,this.dispatcher=d.dispatcher?d.dispatcher:new l.bw(l.bx(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new lr,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new l.cM(r._requestManager,d.localFontFamily?l.cN.all:d.localIdeographFontFamily?l.cN.ideographs:l.cN.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new Qr(r._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",l.cO());const b=this;this._rtlTextPluginCallback=Jc.registerForPluginStateChange(M=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:M.pluginStatus,pluginURL:M.pluginURL},(R,N)=>{if(l.cP(R),N&&N.every(H=>H))for(const H in b._sourceCaches){const ee=b._sourceCaches[H],se=ee.getSource().type;"vector"!==se&&"geojson"!==se||ee.reload()}})}),this.on("data",M=>{if("source"!==M.dataType||"metadata"!==M.sourceDataType)return;const R=this.getOwnSource(M.sourceId);if(R&&R.vectorLayerIds)for(const N in this._layers){const H=this._layers[N];H.source===R.id&&this._validateLayer(H)}})}load(r){return r?("string"==typeof r?this.loadURL(r):this.loadJSON(r),this):this}_getGlobalId(r){if(!r)return null;if("string"==typeof r){if(l.cQ(r))return r;const d=l.cR(r);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${l.cS(JSON.stringify(r))}`}_diffStyle(r,d,b){this.globalId=this._getGlobalId(r);const M=(R,N)=>{try{N(null,this.setState(R,b))}catch(H){N(H,!1)}};if("string"==typeof r){const R=this.map._requestManager.normalizeStyleURL(r),N=this.map._requestManager.transformRequest(R,l.R.Style);l.g(N,(H,ee)=>{H?this.fire(new l.d(H)):ee&&M(ee,d)})}else"object"==typeof r&&M(r,d)}loadURL(r,d={}){this.fire(new l.f("dataloading",{dataType:"style"}));const b="boolean"==typeof d.validate?d.validate:!l.cQ(r);this.globalId=this._getGlobalId(r),r=this.map._requestManager.normalizeStyleURL(r,d.accessToken),this.resolvedImports.add(r);const M=this.importsCache.get(r);if(M)return this._load(M,b);const R=this.map._requestManager.transformRequest(r,l.R.Style);this._request=l.g(R,(N,H)=>{if(this._request=null,N)this.fire(new l.d(N));else if(H)return this.importsCache.set(r,H),this._load(H,b)})}loadJSON(r,d={}){this.fire(new l.f("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(r),this._request=l.e.frame(()=>{this._request=null,this._load(r,!1!==d.validate)})}loadEmpty(){this.fire(new l.f("dataloading",{dataType:"style"})),this._load($l,!1)}_loadImports(r,d,b){if(this.importDepth>=4)return l.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const M=[];for(const R of r){const N=this._createFragmentStyle(R),H=new Promise(he=>{N.once("style.import.load",he),N.once("error",he)}).then(()=>this.mergeAll());if(M.push(H),this.resolvedImports.has(R.url)){N.loadEmpty();continue}const ee=R.data||this.importsCache.get(R.url);ee?(N.loadJSON(ee,{validate:d}),this._isInternalStyle(ee)&&(N.globalId=null)):R.url?N.loadURL(R.url,{validate:d}):N.loadEmpty();const se={style:N,id:R.id,config:R.config};if(b){const he=this.fragments.findIndex(({id:ye})=>ye===b);this.fragments=this.fragments.slice(0,he).concat(se).concat(this.fragments.slice(he))}else this.fragments.push(se)}return Promise.allSettled(M)}getImportGlobalIds(r=this,d=new Set){for(const b of r.fragments)b.style.globalId&&d.add(b.style.globalId),this.getImportGlobalIds(b.style,d);return[...d.values()]}_createFragmentStyle(r){const d=this.scope?l.al(r.id,this.scope):r.id;let b;const M=this._initialConfig&&this._initialConfig[d];(r.config||M)&&(b=l.W({},r.config,M));const R=new Jc(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:b,configOptions:this.options,configDependentLayers:this._configDependentLayers});return R.setEventedParent(this.map,{style:R}),R}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.isRootStyle()}_isInternalStyle(r){return this.isRootStyle()&&(r.fragment||!!r.schema&&!1!==r.fragment)}_load(r,d){const b=r.schema;if(this._isInternalStyle(r)){const N=l.W({},$l,{imports:[{id:"basemap",data:r,url:""}]});return void this._load(N,d)}if(this.updateConfig(this._config,b),d&&Qc(this,Ue(r)))return;this._loaded=!0,this.stylesheet=l.cT(r);const M=()=>{for(const se in r.sources)this.addSource(se,r.sources[se],{validate:!1,isInitialLoad:!0});r.sprite?this._loadSprite(r.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(r.glyphs,this.scope);const N=C0(this.stylesheet.layers);if(this._order=N.map(se=>se.id),this.stylesheet.light&&l.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(1===this.stylesheet.lights.length&&"flat"===this.stylesheet.lights[0].type){const se=this.stylesheet.lights[0];this.light=new Ki(se.properties,se.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Ki(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const se of N){const he=l.cY(se,this.scope,this._styleColorTheme.lut,this.options);he.isConfigDependent&&this._configDependentLayers.add(he.fqid),he.setEventedParent(this,{layer:{id:he.id}}),this._layers[he.id]=he,this._serializedLayers[he.id]=he.serialize();const ye=this.getOwnLayerSourceCache(he),Pe=!!this.directionalLight&&this.directionalLight.shadowsEnabled();ye&&he.canCastShadows()&&Pe&&(ye.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const H=this.stylesheet.terrain;H&&(this.checkCanvasFingerprintNoise(),this.terrainSetForDrapingOnly()||this._createTerrain(H,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new l.f("data",{dataType:"style"}));const ee=this.isRootStyle();r.imports?this._loadImports(r.imports,d).then(()=>{this._reloadImports(),this.fire(new l.f(ee?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new l.f(ee?"style.load":"style.import.load")))},R=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=R,R){const N=this._evaluateColorThemeData(R);this._loadColorTheme(N).then(()=>{M()}).catch(H=>{l.w(`Couldn't load color theme from the stylesheet: ${H}`),M()})}else this._styleColorTheme.lut=null,M()}isRootStyle(){return 0===this.importDepth}mergeAll(){let r,d,b,M,R,N,H,ee;const se={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(he=>{if(he.stylesheet){if(null!=he.light&&(r=he.light),he.stylesheet.lights)for(const ye of he.stylesheet.lights)"ambient"===ye.type&&null!=he.ambientLight&&(d=he.ambientLight),"directional"===ye.type&&null!=he.directionalLight&&(b=he.directionalLight);M=this._prioritizeTerrain(M,he.terrain,he.stylesheet.terrain),he.stylesheet.fog&&null!=he.fog&&(R=he.fog),null!=he.stylesheet.camera&&(ee=he.stylesheet.camera),null!=he.stylesheet.projection&&(N=he.stylesheet.projection),null!=he.stylesheet.transition&&(H=he.stylesheet.transition),se[he.scope]=he._styleColorTheme}}),this.light=r,this.ambientLight=d,this.directionalLight=b,this.fog=R,this._styleColorThemeForScope=se,null===M?delete this.terrain:this.terrain=M,this.camera=ee||{"camera-projection":"perspective"},this.projection=N||{name:"mercator"},this.transition=l.W({},A0,H),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(r){const d=b=>{for(const M of b.fragments)d(M.style);r(b)};d(this)}_prioritizeTerrain(r,d,b){const M=r&&0===r.drapeRenderMode;return null===b?d&&0===d.drapeRenderMode?d:M?r:null:null!=d&&(!r||M||d&&1===d.drapeRenderMode)?d:r}mergeTerrain(){let r;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{r=this._prioritizeTerrain(r,d.terrain,d.stylesheet.terrain)}),null===r?delete this.terrain:this.terrain=r}mergeProjection(){let r;this.forEachFragmentStyle(d=>{null!=d.stylesheet.projection&&(r=d.stylesheet.projection)}),this.projection=r||{name:"mercator"}}mergeSources(){const r={},d={},b={};this.forEachFragmentStyle(M=>{for(const R in M._sourceCaches){const N=l.al(R,M.scope);r[N]=M._sourceCaches[R]}for(const R in M._otherSourceCaches){const N=l.al(R,M.scope);d[N]=M._otherSourceCaches[R]}for(const R in M._symbolSourceCaches){const N=l.al(R,M.scope);b[N]=M._symbolSourceCaches[R]}}),this._mergedSourceCaches=r,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=b}mergeLayers(){const r={},d=[],b={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(N=>{for(const H of N._order){const ee=N._layers[H];if("slot"===ee.type){const se=l.cU(H);if(r[se])continue;r[se]=[]}ee.slot&&r[ee.slot]?r[ee.slot].push(ee):d.push(ee)}}),this._mergedOrder=[],this._clipLayerIndices=[];let M=0;const R=(N=[])=>{for(const H of N)if("slot"===H.type){const ee=l.cU(H.id);r[ee]&&R(r[ee]),this._mergedSlots.push(ee)}else{const ee=l.al(H.id,H.scope);this._mergedOrder.push(ee),b[ee]=H,H.is3D()&&(this._has3DLayers=!0),"circle"===H.type&&(this._hasCircleLayers=!0),"symbol"===H.type&&(this._hasSymbolLayers=!0),"clip"===H.type&&this._clipLayerIndices.push(M),M++}};R(d),this._mergedLayers=b,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}getCamera(){return this.stylesheet.camera}setCamera(r){return this.stylesheet.camera=l.W({},this.stylesheet.camera,r),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(r){return r.data?function(d,b,M){const R=l.W({},b);for(const H of Object.keys(l.L.colorTheme))void 0===R[H]&&(R[H]=l.L.colorTheme[H].default);const N=new l.U(Ml,d,new Map(M));return N.setTransitionOrValue(R,M),N.untransitioned().possiblyEvaluate(new l.X(0))}(this.scope,r,this.options).get("data"):null}_loadColorTheme(r){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((b,M)=>{const R="data:image/png;base64,";if(!r||0===r.length)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void b();let N=r;N.startsWith(R)||(N=R+N);const H="mapbox-reserved-lut",ee=new Image;ee.src=N,ee.onerror=()=>{this._styleColorTheme.lutLoading=!1,M(new Error("Failed to load image data"))},ee.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void b();this._styleColorTheme.lutLoading=!1;const{width:se,height:he,data:ye}=l.e.getImageData(ee);if(he>32)return void M(new Error("The height of the image must be less than or equal to 32 pixels."));if(se!==he*he)return void M(new Error("The width of the image must be equal to the height squared."));this.getImage(H)&&this.removeImage(H),this.addImage(H,{data:new l.i({width:se,height:he},ye),pixelRatio:1,sdf:!1,version:0});const Pe=this.imageManager.getImage(H,this.scope);Pe?(this._styleColorTheme.lut={image:Pe.data,data:r},b()):M(new Error("Missing LUT image."))}})}getLut(r){const d=this._styleColorThemeForScope[r];return d?d.lut:null}setProjection(r){r?this.stylesheet.projection=r:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(r){this._spriteRequest=function(d,b,M){let R,N,H;const ee=l.e.devicePixelRatio>1?"@2x":"";let se=l.g(b.transformRequest(b.normalizeSpriteURL(d,ee,".json"),l.R.SpriteJSON),(Pe,Fe)=>{se=null,H||(H=Pe,R=Fe,ye())}),he=l.h(b.transformRequest(b.normalizeSpriteURL(d,ee,".png"),l.R.SpriteImage),(Pe,Fe)=>{he=null,H||(H=Pe,N=Fe,ye())});function ye(){if(H)M(H);else if(R&&N){const Pe=l.e.getImageData(N),Fe={};for(const Qe in R){const{width:Je,height:tt,x:rt,y:Pt,sdf:Bt,pixelRatio:Ft,stretchX:tn,stretchY:en,content:_n}=R[Qe],at=new l.i({width:Je,height:tt});l.i.copy(Pe,at,{x:rt,y:Pt},{x:0,y:0},{width:Je,height:tt},null),Fe[Qe]={data:at,pixelRatio:Ft,sdf:Bt,stretchX:tn,stretchY:en,content:_n}}M(null,Fe)}}return{cancel(){se&&(se.cancel(),se=null),he&&(he.cancel(),he=null)}}}(r,this.map._requestManager,(d,b)=>{if(this._spriteRequest=null,d)this.fire(new l.d(d));else if(b)for(const M in b)this.imageManager.addImage(M,this.scope,b[M]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new l.f("data",{dataType:"style"}))})}_validateLayer(r){const d=this.getOwnSource(r.source);if(!d)return;const b=r.sourceLayer;b&&("geojson"===d.type||d.vectorLayerIds&&-1===d.vectorLayerIds.indexOf(b))&&this.fire(new l.d(new Error(`Source layer "${b}" does not exist on source "${d.id}" as specified by style layer "${r.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const r in this._sourceCaches)if(!this._sourceCaches[r].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:r}of this.fragments)if(!r.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((r,d)=>{const b=this.fragments[d];return b&&b.style&&(r.data=b.style.serialize()),r})}_serializeSources(){const r={};for(const d in this._sourceCaches){const b=this._sourceCaches[d].getSource();r[b.id]||(r[b.id]=b.serialize())}return r}_serializeLayers(r){const d=[];for(const b of r){const M=this._layers[b];M&&"custom"!==M.type&&d.push(M.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const r in this._sourceCaches)if(this._sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(r){return!!this.terrain&&r.isDraped(this.getLayerSourceCache(r))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(r){const d=this.getOwnLayer(r);if(d)return d;this.fire(new l.d(new Error(`The layer '${r}' does not exist in the map's style.`)))}_checkSource(r){const d=this.getOwnSource(r);if(d)return d;this.fire(new l.d(new Error(`The source '${r}' does not exist in the map's style.`)))}update(r){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(r),this.directionalLight&&this.directionalLight.recalculate(r);const d=this.calculateLightsBrightness();r.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const b=this._changes.isDirty();let M=!1;if(this._changes.isDirty()){const N=this._changes.getLayerUpdatesByScope();for(const H in N){const{updatedIds:ee,removedIds:se}=N[H];(ee||se)&&(this._updateWorkerLayers(H,ee,se),M=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(r),this.light&&this.light.updateTransitions(r),this.ambientLight&&this.ambientLight.updateTransitions(r),this.directionalLight&&this.directionalLight.updateTransitions(r),this.fog&&this.fog.updateTransitions(r),this._changes.reset()}const R={};for(const N in this._mergedSourceCaches){const H=this._mergedSourceCaches[N];R[N]=H.used,H.used=!1,H.tileCoverLift=0}for(const N of this._mergedOrder){const H=this._mergedLayers[N];if(H.recalculate(r,this._availableImages),!H.isHidden(r.zoom)){const ee=this.getLayerSourceCache(H);ee&&(ee.used=!0,ee.tileCoverLift=Math.max(ee.tileCoverLift,H.tileCoverLift()))}if(!this._precompileDone&&this._shouldPrecompile)for(let ee=H.minzoom||0;ee<(H.maxzoom||25.5);ee++){const se=this.map.painter;if(se){const he=H.getProgramIds();if(!he)continue;for(const ye of he){const Pe=H.getDefaultProgramParams(ye,r.zoom,this._styleColorTheme.lut);Pe&&(se.style=this,this.fog&&(se._fogVisible=!0,Pe.overrideFog=!0,se.getOrCreateProgram(ye,Pe)),se._fogVisible=!1,Pe.overrideFog=!1,se.getOrCreateProgram(ye,Pe),(this.stylesheet.terrain||this.stylesheet.projection&&"globe"===this.stylesheet.projection.name)&&(Pe.overrideRtt=!0,se.getOrCreateProgram(ye,Pe)))}}}}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&M&&this.mergeLayers();for(const N in R){const H=this._mergedSourceCaches[N];R[N]!==H.used&&H.getSource().fire(new l.f("data",{sourceDataType:"visibility",dataType:"source",sourceId:H.getSource().id}))}this.light&&this.light.recalculate(r),this.terrain&&this.terrain.recalculate(r),this.fog&&this.fog.recalculate(r),this.z=r.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),b&&this.fire(new l.f("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=this._changes.getUpdatedImages();if(r.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],r);this._changes.resetUpdatedImages()}}_updateWorkerLayers(r,d,b){const M=this.getFragmentStyle(r);M&&this.dispatcher.broadcast("updateLayers",{layers:d?M._serializeLayers(d):[],scope:r,removedIds:b||[],options:M.options})}setState(r,d){if(this._checkLoaded(),Qc(this,Ue(r)))return!1;(r=l.cT(r)).layers=C0(r.layers);const b=function(N,H){if(!N)return[{command:$s.setStyle,args:[H]}];let ee=[];try{if(!We(N.version,H.version))return[{command:$s.setStyle,args:[H]}];if(We(N.center,H.center)||ee.push({command:$s.setCenter,args:[H.center]}),We(N.zoom,H.zoom)||ee.push({command:$s.setZoom,args:[H.zoom]}),We(N.bearing,H.bearing)||ee.push({command:$s.setBearing,args:[H.bearing]}),We(N.pitch,H.pitch)||ee.push({command:$s.setPitch,args:[H.pitch]}),We(N.sprite,H.sprite)||ee.push({command:$s.setSprite,args:[H.sprite]}),We(N.glyphs,H.glyphs)||ee.push({command:$s.setGlyphs,args:[H.glyphs]}),We(N.imports,H.imports)||function(Fe=[],Qe=[],Je){Qe=Qe||[];const tt=(Fe=Fe||[]).map(mu),rt=Qe.map(mu),Pt=Fe.reduce(gu,{}),Bt=Qe.reduce(gu,{}),Ft=tt.slice();let tn,en,_n,at;for(tn=0,en=0;tn<tt.length;tn++)_n=tt[tn],Bt.hasOwnProperty(_n)?en++:(Je.push({command:$s.removeImport,args:[_n]}),Ft.splice(Ft.indexOf(_n,en),1));for(tn=0,en=0;tn<rt.length;tn++)_n=rt[rt.length-1-tn],Ft[Ft.length-1-tn]!==_n&&(Pt.hasOwnProperty(_n)?(Je.push({command:$s.removeImport,args:[_n]}),Ft.splice(Ft.lastIndexOf(_n,Ft.length-en),1)):en++,at=Ft[Ft.length-tn],Je.push({command:$s.addImport,args:[Bt[_n],at]}),Ft.splice(Ft.length-tn,0,_n));for(const $t of Qe){const Tn=Pt[$t.id];Tn&&!We(Tn,$t)&&Je.push({command:$s.updateImport,args:[$t.id,$t]})}}(N.imports,H.imports,ee),We(N.transition,H.transition)||ee.push({command:$s.setTransition,args:[H.transition]}),We(N.light,H.light)||ee.push({command:$s.setLight,args:[H.light]}),We(N.fog,H.fog)||ee.push({command:$s.setFog,args:[H.fog]}),We(N.projection,H.projection)||ee.push({command:$s.setProjection,args:[H.projection]}),We(N.lights,H.lights)||ee.push({command:$s.setLights,args:[H.lights]}),We(N.camera,H.camera)||ee.push({command:$s.setCamera,args:[H.camera]}),!We(N["color-theme"],H["color-theme"]))return[{command:$s.setStyle,args:[H]}];const se={},he=[];!function(Fe,Qe,Je,tt){let rt;for(rt in Qe=Qe||{},Fe=Fe||{})Fe.hasOwnProperty(rt)&&(Qe.hasOwnProperty(rt)||hh(rt,Je,tt));for(rt in Qe){if(!Qe.hasOwnProperty(rt))continue;const Pt=Qe[rt];Fe.hasOwnProperty(rt)?We(Fe[rt],Pt)||("geojson"===Fe[rt].type&&"geojson"===Pt.type&&wp(Fe,Qe,rt)?Je.push({command:$s.setGeoJSONSourceData,args:[rt,Pt.data]}):zd(rt,Qe,Je,tt)):Tu(rt,Qe,Je)}}(N.sources,H.sources,he,se);const ye=[];N.layers&&N.layers.forEach(Fe=>{Fe.source&&se[Fe.source]?ee.push({command:$s.removeLayer,args:[Fe.id]}):ye.push(Fe)});let Pe=N.terrain;Pe&&se[Pe.source]&&(ee.push({command:$s.setTerrain,args:[void 0]}),Pe=void 0),ee=ee.concat(he),We(Pe,H.terrain)||ee.push({command:$s.setTerrain,args:[H.terrain]}),function(Fe,Qe,Je){Qe=Qe||[];const tt=(Fe=Fe||[]).map(mu),rt=Qe.map(mu),Pt=Fe.reduce(gu,{}),Bt=Qe.reduce(gu,{}),Ft=tt.slice(),tn=Object.create(null);let en,_n,at,$t,Tn,ci,zn;for(en=0,_n=0;en<tt.length;en++)at=tt[en],Bt.hasOwnProperty(at)?_n++:(Je.push({command:$s.removeLayer,args:[at]}),Ft.splice(Ft.indexOf(at,_n),1));for(en=0,_n=0;en<rt.length;en++)at=rt[rt.length-1-en],Ft[Ft.length-1-en]!==at&&(Pt.hasOwnProperty(at)?(Je.push({command:$s.removeLayer,args:[at]}),Ft.splice(Ft.lastIndexOf(at,Ft.length-_n),1)):_n++,ci=Ft[Ft.length-en],Je.push({command:$s.addLayer,args:[Bt[at],ci]}),Ft.splice(Ft.length-en,0,at),tn[at]=!0);for(en=0;en<rt.length;en++)if(at=rt[en],$t=Pt[at],Tn=Bt[at],!tn[at]&&!We($t,Tn))if(We($t.source,Tn.source)&&We($t["source-layer"],Tn["source-layer"])&&We($t.type,Tn.type)){for(zn in Wh($t.layout,Tn.layout,Je,at,null,$s.setLayoutProperty),Wh($t.paint,Tn.paint,Je,at,null,$s.setPaintProperty),We($t.slot,Tn.slot)||Je.push({command:$s.setSlot,args:[at,Tn.slot]}),We($t.filter,Tn.filter)||Je.push({command:$s.setFilter,args:[at,Tn.filter]}),We($t.minzoom,Tn.minzoom)&&We($t.maxzoom,Tn.maxzoom)||Je.push({command:$s.setLayerZoomRange,args:[at,Tn.minzoom,Tn.maxzoom]}),$t)$t.hasOwnProperty(zn)&&"layout"!==zn&&"paint"!==zn&&"filter"!==zn&&"metadata"!==zn&&"minzoom"!==zn&&"maxzoom"!==zn&&"slot"!==zn&&(0===zn.indexOf("paint.")?Wh($t[zn],Tn[zn],Je,at,zn.slice(6),$s.setPaintProperty):We($t[zn],Tn[zn])||Je.push({command:$s.setLayerProperty,args:[at,zn,Tn[zn]]}));for(zn in Tn)Tn.hasOwnProperty(zn)&&!$t.hasOwnProperty(zn)&&"layout"!==zn&&"paint"!==zn&&"filter"!==zn&&"metadata"!==zn&&"minzoom"!==zn&&"maxzoom"!==zn&&"slot"!==zn&&(0===zn.indexOf("paint.")?Wh($t[zn],Tn[zn],Je,at,zn.slice(6),$s.setPaintProperty):We($t[zn],Tn[zn])||Je.push({command:$s.setLayerProperty,args:[at,zn,Tn[zn]]}))}else Je.push({command:$s.removeLayer,args:[at]}),ci=Ft[Ft.lastIndexOf(at)+1],Je.push({command:$s.addLayer,args:[Tn,ci]})}(ye,H.layers,ee)}catch(se){console.warn("Unable to compute style diff:",se),ee=[{command:$s.setStyle,args:[H]}]}return ee}(this.serialize(),r).filter(N=>!(N.command in Ld));if(0===b.length)return!1;const M=b.filter(N=>!(N.command in pc));if(M.length>0)throw new Error(`Unimplemented: ${M.map(N=>N.command).join(", ")}.`);const R=[];return b.forEach(N=>{R.push(this[N.command].apply(this,N.args))}),d&&Promise.all(R).then(d),this.stylesheet=r,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(r,d){return this.getImage(r)?this.fire(new l.d(new Error("An image with this name already exists."))):(this.imageManager.addImage(r,this.scope,d),this._afterImageUpdated(r),this)}updateImage(r,d){this.imageManager.updateImage(r,this.scope,d)}getImage(r){return this.imageManager.getImage(r,this.scope)}removeImage(r){return this.getImage(r)?(this.imageManager.removeImage(r,this.scope),this._afterImageUpdated(r),this):this.fire(new l.d(new Error("No image with this name exists.")))}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(r),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new l.f("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(r,d,b={}){return this._checkLoaded(),this._validate(ii,`models.${r}`,d,null,b)||(this.modelManager.addModel(r,d,this.scope),this._changes.setDirty()),this}hasModel(r){return this.modelManager.hasModel(r,this.scope)}removeModel(r){return this.hasModel(r)?(this.modelManager.removeModel(r,this.scope),this):this.fire(new l.d(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(r,d,b={}){if(this._checkLoaded(),void 0!==this.getOwnSource(r))throw new Error(`There is already a source with ID "${r}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(it,`sources.${r}`,d,null,b))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const M=ki(r,d,this.dispatcher,this);M.scope=this.scope,M.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(M.id),source:M.serialize(),sourceId:M.id}));const R=N=>{const H=(N?"symbol:":"other:")+M.id,ee=l.al(H,this.scope),se=this._sourceCaches[H]=new l.bv(ee,M,N);(N?this._symbolSourceCaches:this._otherSourceCaches)[M.id]=se,se.onAdd(this.map)};R(!1),"vector"!==d.type&&"geojson"!==d.type||R(!0),M.onAdd&&M.onAdd(this.map),b.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(r){this._checkLoaded();const d=this.getOwnSource(r);if(!d)throw new Error("There is no source with this ID");for(const M in this._layers)if(this._layers[M].source===r)return this.fire(new l.d(new Error(`Source "${r}" cannot be removed while layer "${M}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===r)return this.fire(new l.d(new Error(`Source "${r}" cannot be removed while terrain is using it.`)));const b=this.getOwnSourceCaches(r);for(const M of b){const R=l.cU(M.id);delete this._sourceCaches[R],this._changes.discardSourceCacheUpdate(M.id),M.fire(new l.f("data",{sourceDataType:"metadata",dataType:"source",sourceId:M.getSource().id})),M.setEventedParent(null),M.clearTiles()}return delete this._otherSourceCaches[r],delete this._symbolSourceCaches[r],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(r,d){this._checkLoaded(),this.getOwnSource(r).setData(d),this._changes.setDirty()}getOwnSource(r){const d=this.getOwnSourceCache(r);return d&&d.getSource()}getOwnSources(){const r=[];for(const d in this._otherSourceCaches){const b=this.getOwnSourceCache(d);b&&r.push(b.getSource())}return r}areTilesLoaded(){const r=this._mergedSourceCaches;for(const d in r){const b=r[d]._tiles;for(const M in b){const R=b[M];if("loaded"!==R.state&&"errored"!==R.state)return!1}}return!0}setLights(r){if(this._checkLoaded(),!r)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const M of r){if(this._validate(Cn,"lights",M))return;switch(M.type){case"ambient":if(this.ambientLight){const R=this.ambientLight;R.set(M),R.updateTransitions(d)}else this.ambientLight=new Cr(M,bi,this.scope,this.options);break;case"directional":if(this.directionalLight){const R=this.directionalLight;R.set(M),R.updateTransitions(d)}else this.directionalLight=new Cr(M,kr,this.scope,this.options)}}const b=new l.X(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(b),this.directionalLight&&this.directionalLight.recalculate(b),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const r=this.directionalLight,d=this.ambientLight;if(!r||!d)return;const b=ye=>.2126*(ye[0]<=.03928?ye[0]/12.92:Math.pow((ye[0]+.055)/1.055,2.4))+.7152*(ye[1]<=.03928?ye[1]/12.92:Math.pow((ye[1]+.055)/1.055,2.4))+.0722*(ye[2]<=.03928?ye[2]/12.92:Math.pow((ye[2]+.055)/1.055,2.4)),M=r.properties.get("color").toRenderColor(null).toArray01(),R=r.properties.get("intensity"),N=r.properties.get("direction"),H=1-l.ac(N.x,N.y,N.z)[2]/90,ee=b(M)*R*H,se=d.properties.get("color").toRenderColor(null).toArray01(),he=d.properties.get("intensity");return(ee+b(se)*he)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const r=[];return this.directionalLight&&r.push(this.directionalLight.get()),this.ambientLight&&r.push(this.ambientLight.get()),r}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(r){if(!r)return this;if(l.cV(r)){const d=l.cW(r),b=this.fragments.find(({id:R})=>R===d);if(!b)throw new Error(`Style import not found: ${r}`);const M=l.cU(r);return b.style.getFragmentStyle(M)}{const d=this.fragments.find(({id:b})=>b===r);if(!d)throw new Error(`Style import not found: ${r}`);return d.style}}getConfigProperty(r,d){const b=this.getFragmentStyle(r);if(!b)return null;const M=l.al(d,b.scope),R=b.options.get(M),N=R?R.value||R.default:null;return N?N.serialize():null}setConfigProperty(r,d,b){const M=this.getFragmentStyle(r);if(!M)return;const R=M.stylesheet.schema;if(!R||!R[d])return;const N=l.y(b);if("success"!==N.result)return void Qc(this,N.value);const H=N.value.expression,ee=l.al(d,M.scope),se=M.options.get(ee);if(!se)return;let he;const{minValue:ye,maxValue:Pe,stepValue:Fe,type:Qe,values:Je}=R[d],tt=l.y(R[d].default);"success"===tt.result&&(he=tt.value.expression),he?(this.options.set(ee,{...se,value:H,default:he,minValue:ye,maxValue:Pe,stepValue:Fe,type:Qe,values:Je}),this.updateConfigDependencies()):this.fire(new l.d(new Error(`No schema defined for the config option "${d}" in the "${r}" fragment.`)))}getConfig(r){const d=this.getFragmentStyle(r);if(!d)return null;const b=d.stylesheet.schema;if(!b)return null;const M={};for(const R in b){const N=l.al(R,d.scope),H=d.options.get(N),ee=H?H.value||H.default:null;M[R]=ee?ee.serialize():null}return M}setConfig(r,d){const b=this.getFragmentStyle(r);b&&(b.updateConfig(d,b.stylesheet.schema),this.updateConfigDependencies())}getSchema(r){const d=this.getFragmentStyle(r);return d?d.stylesheet.schema:null}setSchema(r,d){const b=this.getFragmentStyle(r);b&&(b.stylesheet.schema=d,b.updateConfig(b._config,d),this.updateConfigDependencies())}updateConfig(r,d){if(this._config=r,r||d)if(d)for(const b in d){let M,R;const N=l.y(d[b].default);if("success"===N.result&&(M=N.value.expression),r&&void 0!==r[b]){const Pe=l.y(r[b]);"success"===Pe.result&&(R=Pe.value.expression)}const{minValue:H,maxValue:ee,stepValue:se,type:he,values:ye}=d[b];if(M){const Pe=l.al(b,this.scope);this.options.set(Pe,{default:M,value:R,minValue:H,maxValue:ee,stepValue:se,type:he,values:ye})}else this.fire(new l.d(new Error(`No schema defined for config option "${b}".`)))}else this.fire(new l.d(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(const r of this._configDependentLayers){const d=this.getLayer(r);d&&(d.possiblyEvaluateVisibility(),this._updateLayer(d))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(r=>{if(r._styleColorTheme.colorTheme){const d=r._evaluateColorThemeData(r._styleColorTheme.colorTheme);(!r._styleColorTheme.lut||r._styleColorTheme.lut&&d!==r._styleColorTheme.lut.data)&&r.setColorTheme(r._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(r,d,b={}){this._checkLoaded();const M=r.id;if(this._layers[M])return void this.fire(new l.d(new Error(`Layer with id "${M}" already exists on this map`)));let R;if("custom"===r.type){if(Qc(this,l.cX(r)))return;R=l.cY(r,this.scope,this._styleColorTheme.lut,this.options)}else{if("object"==typeof r.source&&(this.addSource(M,r.source),r=l.cT(r),r=l.W(r,{source:M})),this._validate(Hi,`layers.${M}`,r,{arrayIndex:-1},b))return;R=l.cY(r,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(R),R.setEventedParent(this,{layer:{id:M}}),this._serializedLayers[R.id]=R.serialize()}R.isConfigDependent&&this._configDependentLayers.add(R.fqid);let N=this._order.length;if(d){const he=this._order.indexOf(d);if(-1===he)return void this.fire(new l.d(new Error(`Layer with id "${d}" does not exist on this map.`)));R.slot===this._layers[d].slot?N=he:l.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(N,0,M),this._layerOrderChanged=!0,this._layers[M]=R;const H=this.getOwnLayerSourceCache(R),ee=!!this.directionalLight&&this.directionalLight.shadowsEnabled();H&&R.canCastShadows()&&ee&&(H.castsShadows=!0);const se=this._changes.getRemovedLayer(R);if(se&&R.source&&H&&"custom"!==R.type){this._changes.discardLayerRemoval(R);const he=l.al(R.source,R.scope);se.type!==R.type?this._changes.updateSourceCache(he,"clear"):(this._changes.updateSourceCache(he,"reload"),H.pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map),R.scope=this.scope,this.mergeLayers()}moveLayer(r,d){this._checkLoaded();const b=this._checkLayer(r);if(!b||r===d)return;const M=this._order.indexOf(r);this._order.splice(M,1);let R=this._order.length;if(d){const N=this._order.indexOf(d);if(-1===N)return void this.fire(new l.d(new Error(`Layer with id "${d}" does not exist on this map.`)));b.slot===this._layers[d].slot?R=N:l.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(R,0,r),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(r){this._checkLoaded();const d=this._checkLayer(r);if(!d)return;d.setEventedParent(null);const b=this._order.indexOf(r);this._order.splice(b,1),delete this._layers[r],delete this._serializedLayers[r],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const M=this.getOwnLayerSourceCache(d);if(M&&M.castsShadows){let R=!1;for(const N in this._layers)if(this._layers[N].source===d.source&&this._layers[N].canCastShadows()){R=!0;break}M.castsShadows=R}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(r){return this._layers[r]}hasLayer(r){return r in this._mergedLayers}hasLayerType(r){for(const d in this._layers)if(this._layers[d].type===r)return!0;return!1}setLayerZoomRange(r,d,b){this._checkLoaded();const M=this._checkLayer(r);M&&(M.minzoom===d&&M.maxzoom===b||(null!=d&&(M.minzoom=d),null!=b&&(M.maxzoom=b),this._updateLayer(M)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(r,d){this._checkLoaded();const b=this._checkLayer(r);b&&b.slot!==d&&(b.slot=d,this._updateLayer(b))}setFilter(r,d,b={}){this._checkLoaded();const M=this._checkLayer(r);if(M&&!We(M.filter,d))return null==d?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(Oi,`layers.${M.id}.filter`,d,{layerType:M.type},b)||(M.filter=l.cT(d),this._updateLayer(M)))}getFilter(r){const d=this._checkLayer(r);if(d)return l.cT(d.filter)}setLayoutProperty(r,d,b,M={}){this._checkLoaded();const R=this._checkLayer(r);if(R&&!We(R.getLayoutProperty(d),b)){if(null!=b&&(!M||!1!==M.validate)&&Qc(R,nr.call(Ue,{key:`layers.${r}.layout.${d}`,layerType:R.type,objectKey:d,value:b,styleSpec:l.L,style:{glyphs:!0,sprite:!0}})))return;R.setLayoutProperty(d,b),R.isConfigDependent&&this._configDependentLayers.add(R.fqid),this._updateLayer(R)}}getLayoutProperty(r,d){const b=this._checkLayer(r);if(b)return b.getLayoutProperty(d)}setPaintProperty(r,d,b,M={}){this._checkLoaded();const R=this._checkLayer(r);if(!R||We(R.getPaintProperty(d),b)||null!=b&&(!M||!1!==M.validate)&&Qc(R,Fo.call(Ue,{key:`layers.${r}.paint.${d}`,layerType:R.type,objectKey:d,value:b,styleSpec:l.L})))return;const N=R.setPaintProperty(d,b);R.isConfigDependent&&this._configDependentLayers.add(R.fqid),N&&this._updateLayer(R),this._changes.updatePaintProperties(R)}getPaintProperty(r,d){const b=this._checkLayer(r);if(b)return b.getPaintProperty(d)}setFeatureState(r,d){this._checkLoaded();const b=r.source,M=r.sourceLayer,R=this._checkSource(b);if(!R)return;const N=R.type;if("geojson"===N&&M)return void this.fire(new l.d(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===N&&!M)return void this.fire(new l.d(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===r.id&&this.fire(new l.d(new Error("The feature id parameter must be provided.")));const H=this.getOwnSourceCaches(b);for(const ee of H)ee.setFeatureState(M,r.id,d)}removeFeatureState(r,d){this._checkLoaded();const b=r.source,M=this._checkSource(b);if(!M)return;const R=M.type,N="vector"===R?r.sourceLayer:void 0;if("vector"===R&&!N)return void this.fire(new l.d(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&"string"!=typeof r.id&&"number"!=typeof r.id)return void this.fire(new l.d(new Error("A feature id is required to remove its specific state property.")));const H=this.getOwnSourceCaches(b);for(const ee of H)ee.removeFeatureState(N,r.id,d)}getFeatureState(r){this._checkLoaded();const d=r.source,b=r.sourceLayer,M=this._checkSource(d);if(M){if("vector"!==M.type||b)return void 0===r.id&&this.fire(new l.d(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(b,r.id);this.fire(new l.d(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(r){return this.stylesheet.transition=l.W({},this.stylesheet.transition,r),this.transition=this.stylesheet.transition,this}getTransition(){return l.W({},this.stylesheet.transition)}serialize(){this._checkLoaded();const r=this.getTerrain(),d=r&&this.terrain&&this.terrain.scope===this.scope?r:this.stylesheet.terrain;return l.cZ({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},b=>void 0!==b)}_updateLayer(r){this._changes.updateLayer(r);const d=this.getLayerSourceCache(r),b=l.al(r.source,r.scope),M=this._changes.getUpdatedSourceCaches();r.source&&!M[b]&&d&&"raster"!==d.getSource().type&&(this._changes.updateSourceCache(b,"reload"),d.pause()),r.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(r){const d=H=>"fill-extrusion"===this._mergedLayers[H].type||"model"===this._mergedLayers[H].type,b=this.order,M={},R=[];for(let H=b.length-1;H>=0;H--){const ee=b[H];if(d(ee)){M[ee]=H;for(const se of r){const he=se[ee];if(he)for(const ye of he)R.push(ye)}}}R.sort((H,ee)=>ee.intersectionZ-H.intersectionZ);const N=[];for(let H=b.length-1;H>=0;H--){const ee=b[H];if(d(ee))for(let se=R.length-1;se>=0;se--){const he=R[se].feature;if(he.layer&&M[he.layer.id]<H)break;N.push(he),R.pop()}else for(const se of r){const he=se[ee];if(he)for(const ye of he)N.push(ye.feature)}}return N}queryRenderedFeatures(r,d,b){d&&d.filter&&this._validate(Oi,"queryRenderedFeatures.filter",d.filter,null,d),d.scope=this.scope,d.availableImages=this._availableImages,d.serializedLayers=this._serializedLayers;const M={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.d(new Error("parameters.layers must be an Array."))),[];for(const se of d.layers){const he=this._mergedLayers[se];if(!he)return this.fire(new l.d(new Error(`The layer '${se}' does not exist in the map's style and cannot be queried for features.`))),[];M[he.source]=!0}}const R=[],N=d.serializedLayers||{},H=d&&d.layers?d.layers.some(se=>{const he=this.getLayer(se);return he&&he.is3D()}):this.has3DLayers(),ee=Vl.createFromScreenPoints(r,b);for(const se in this._mergedSourceCaches){const he=this._mergedSourceCaches[se].getSource();if(!he||he.scope!==d.scope)continue;const ye=this._mergedSourceCaches[se].getSource().id;d.layers&&!M[ye]||R.push(dl(this._mergedSourceCaches[se],this._mergedLayers,N,ee,d,b,H,!!this.map._showQueryGeometry))}return this.placement&&R.push(function(se,he,ye,Pe,Fe,Qe,Je){const tt={},rt=Qe.queryRenderedSymbols(Pe),Pt=[];for(const Bt of Object.keys(rt).map(Number))Pt.push(Je[Bt]);Pt.sort(ql);for(const Bt of Pt){const Ft=Bt.featureIndex.lookupSymbolFeatures(rt[Bt.bucketInstanceId],he,Bt.bucketIndex,Bt.sourceLayerIndex,Fe.filter,Fe.layers,Fe.availableImages,se);for(const tn in Ft){const en=tt[tn]=tt[tn]||[],_n=Ft[tn];_n.sort((at,$t)=>{const Tn=Bt.featureSortOrder;if(Tn){const ci=Tn.indexOf(at.featureIndex);return Tn.indexOf($t.featureIndex)-ci}return $t.featureIndex-at.featureIndex});for(const at of _n)en.push(at)}}for(const Bt in tt)tt[Bt].forEach(Ft=>{const tn=Ft.feature,en=ye(se[Bt]);if(!en)return;const _n=en.getFeatureState(tn.layer["source-layer"],tn.id);tn.source=tn.layer.source,tn.layer["source-layer"]&&(tn.sourceLayer=tn.layer["source-layer"]),tn.state=_n});return tt}(this._mergedLayers,N,this.getLayerSourceCache.bind(this),ee.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(r,d){d&&d.filter&&this._validate(Oi,"querySourceFeatures.filter",d.filter,null,d);const b=this.getOwnSourceCaches(r);let M=[];for(const R of b)M=M.concat(l1(R,d));return M}addSourceType(r,d,b){return Jc.getSourceType(r)?b(new Error(`A source type called "${r}" already exists.`)):(Jc.setSourceType(r,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:d.workerSourceURL},b):b(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(r,d,b={}){this._checkLoaded();const M=this.light.getLight();let R=!1;for(const H in r)if(!We(r[H],M[H])){R=!0;break}if(!R)return;const N=this._getTransitionParameters();this.light.setLight(r,d,b),this.light.updateTransitions(N)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){void 0===this.disableElevatedTerrain&&(this.disableElevatedTerrain=l.e.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&l.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(r,d=1){if(this._checkLoaded(),!r)return this.terrainSetForDrapingOnly()&&0!==d||delete this.terrain,null===r?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let b=r;const M=null==r.source;if(1===d){if(this.disableElevatedTerrain)return;if("object"==typeof b.source){const H="terrain-dem-src";this.addSource(H,b.source),b=l.cT(b),b=l.W(b,{source:H})}const R=l.W({},b),N={};if(this.terrain&&M){R.source=this.terrain.get().source;const H=this.terrain?this.getFragmentStyle(this.terrain.scope):null;H&&(N.style=H.serialize())}if(this._validate(dn,"terrain",R,N))return}if(!this.terrain||this.terrain.scope!==this.scope&&!M||this.terrain&&d!==this.terrain.drapeRenderMode){if(!b)return;this._createTerrain(b,d),this.fire(new l.f("data",{dataType:"style"}))}else{const R=this.terrain,N=R.get();for(const H of Object.keys(l.L.terrain))!b.hasOwnProperty(H)&&l.L.terrain[H].default&&(b[H]=l.L.terrain[H].default);for(const H in r)if(!We(r[H],N[H])){R.set(r,this.options),this.stylesheet.terrain=r;const ee=this._getTransitionParameters({duration:0});R.updateTransitions(ee),this.fire(new l.f("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(r){const d=this.fog=new Oa(r,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const b=this._getTransitionParameters({duration:0});d.updateTransitions(b)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const r of this.map._markers)r._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(r){if(this._checkLoaded(),!r)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!We(d.get(),r)){d.set(r,this.options),this.stylesheet.fog=d.get();const b=this._getTransitionParameters({duration:0});d.updateTransitions(b)}}else this._createFog(r);this._markersNeedUpdate=!0}setColorTheme(r){this._checkLoaded();const d=()=>{for(const M in this._layers)this._layers[M].lut=this._styleColorTheme.lut;for(const M in this._sourceCaches)this._sourceCaches[M].clearTiles()};if(this._styleColorTheme.colorTheme=r,!r)return this._styleColorTheme.lut=null,void d();const b=this._evaluateColorThemeData(r);this._loadColorTheme(b).then(()=>{this.fire(new l.f("colorthemeset")),d()}).catch(M=>{l.w(`Couldn't set color theme: ${M}`)})}_getTransitionParameters(r){return{now:l.e.now(),transition:l.W(this.transition,r)}}updateDrapeFirstLayers(){if(!this.terrain)return;const r=[],d=[];for(const b in this._mergedLayers)this.isLayerDraped(this._mergedLayers[b])?r.push(b):d.push(b);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...r),this._drapedFirstOrder.push(...d)}_createTerrain(r,d){const b=this.terrain=new oi(r,d,this.scope,this.options);1===d&&(this.stylesheet.terrain=r),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const M=this._getTransitionParameters({duration:0});b.updateTransitions(M)}_force3DLayerUpdate(){for(const r in this._layers){const d=this._layers[r];"fill-extrusion"===d.type&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const r in this._layers){const d=this._layers[r];"symbol"===d.type&&this._updateLayer(d)}}_validate(r,d,b,M,R={}){if(R&&!1===R.validate)return!1;const N=l.W({},this.serialize());return Qc(this,r.call(Ue,l.W({key:d,style:N,value:b,styleSpec:l.L},M)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.c_.off("pluginStateChange",this._rtlTextPluginCallback);for(const r in this._mergedLayers)this._mergedLayers[r].setEventedParent(null);for(const r in this._mergedSourceCaches)this._mergedSourceCaches[r].clearTiles(),this._mergedSourceCaches[r].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(r){const d=this.getSourceCaches(r);for(const b of d)b.clearTiles()}clearSources(){for(const r in this._mergedSourceCaches)this._mergedSourceCaches[r].clearTiles()}reloadSource(r){const d=this.getSourceCaches(r);for(const b of d)b.resume(),b.reload()}reloadSources(){for(const r of this.getSources())r.reload&&r.reload()}updateSources(r){let d;this.directionalLight&&(d=nl(this.directionalLight));for(const b in this._mergedSourceCaches)this._mergedSourceCaches[b].update(r,void 0,void 0,d)}_generateCollisionBoxes(){for(const r in this._sourceCaches){const d=this._sourceCaches[r];d.resume(),d.reload()}}_updatePlacement(r,d,b,M,R,N,H=!1){let ee=!1,se=!1;const he={},ye={};for(const Fe of this._mergedOrder){const Qe=this._mergedLayers[Fe];if("symbol"!==Qe.type)continue;const Je=l.al(Qe.source,Qe.scope);let tt=he[Je];if(!tt){const Pt=this.getLayerSourceCache(Qe);if(!Pt)continue;const Bt=Pt.getRenderableIds(!0).map(Ft=>Pt.getTileByID(Ft));ye[Je]=Bt.slice(),tt=he[Je]=Bt.sort((Ft,tn)=>tn.tileID.overscaledZ-Ft.tileID.overscaledZ||(Ft.tileID.isLessThan(tn.tileID)?-1:1))}const rt=this.crossTileSymbolIndex.addLayer(Qe,tt,d.center.lng,d.projection);ee=ee||rt}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),H=H||this._layerOrderChanged||0===M,this._layerOrderChanged&&this.fire(new l.f("neworder")),(H||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.e.now(),d.zoom))&&(this.pauseablePlacement=new _o(d,this._mergedOrder,H,b,M,R,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,he,ye),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.e.now()),se=!0),ee&&this.pauseablePlacement.placement.setStale()),se||ee){this._buildingIndex.onNewFrame(d.zoom);for(let Fe=0;Fe<this._mergedOrder.length;Fe++){const Qe=this._mergedLayers[this._mergedOrder[Fe]];if("symbol"!==Qe.type)continue;const Je=this.isLayerClipped(Qe)&&this._clipLayerIndices.some(tt=>Fe<tt);this.placement.updateLayerOpacities(Qe,he[l.al(Qe.source,Qe.scope)],Fe,Je?N:null)}}let Pe=!1;for(const Fe of this._mergedOrder){const Qe=this._mergedLayers[Fe];if("symbol"!==Qe.type)continue;const Je=he[l.al(Qe.source,Qe.scope)];for(const tt of Je){const rt=tt.getBucket(Qe);rt&&tt.latestFeatureIndex&&Qe.fqid===rt.layerIds[0]&&(Pe=rt.updateOcclusionOpacities(r.context,r.symbolParams,r._dt)||Pe)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.e.now())||Pe,occlusionQueryBasedOpacityChanged:Pe}}_releaseSymbolFadeTiles(){for(const r in this._sourceCaches)this._sourceCaches[r].releaseSymbolFadeTiles()}addImport(r,d){this._checkLoaded();const b=this.stylesheet.imports=this.stylesheet.imports||[];if(-1!==b.findIndex(({id:R})=>R===r.id))return void this.fire(new l.d(new Error(`Import with id '${r.id}' already exists in the map's style.`)));if(!d)return b.push(r),this._loadImports([r],!0);const M=b.findIndex(({id:R})=>R===d);return-1===M&&this.fire(new l.d(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=b.slice(0,M).concat(r).concat(b.slice(M)),this._loadImports([r],!0,d)}updateImport(r,d){this._checkLoaded();const b=this.stylesheet.imports||[],M=this.getImportIndex(r);return-1===M?this:"string"==typeof d?(this.setImportUrl(r,d),this):(d.url&&d.url!==b[M].url&&this.setImportUrl(r,d.url),We(d.config,b[M].config)||this.setImportConfig(r,d.config),We(d.data,b[M].data)||this.setImportData(r,d.data),this)}moveImport(r,d){this._checkLoaded();let b=this.stylesheet.imports||[];const M=this.getImportIndex(r);if(-1===M)return this;const R=this.getImportIndex(d);if(-1===R)return this;const N=b[M],H=this.fragments[M];return b=b.filter(({id:ee})=>ee!==r),this.fragments=this.fragments.filter(({id:ee})=>ee!==r),this.stylesheet.imports=b.slice(0,R).concat(N).concat(b.slice(R)),this.fragments=this.fragments.slice(0,R).concat(H).concat(this.fragments.slice(R)),this.mergeLayers(),this}setImportUrl(r,d){this._checkLoaded();const b=this.stylesheet.imports||[],M=this.getImportIndex(r);if(-1===M)return this;b[M].url=d;const R=this.fragments[M];return R.style=this._createFragmentStyle(b[M]),R.style.on("style.import.load",()=>this.mergeAll()),R.style.loadURL(d),this}setImportData(r,d){this._checkLoaded();const b=this.getImportIndex(r),M=this.stylesheet.imports||[];return-1===b?this:d?(this.fragments[b].style.setState(d),this._reloadImports(),this):(delete M[b].data,this.setImportUrl(r,M[b].url))}setImportConfig(r,d){this._checkLoaded();const b=this.getImportIndex(r),M=this.stylesheet.imports||[];if(-1===b)return this;d?M[b].config=d:delete M[b].config;const R=this.fragments[b],N=R.style.stylesheet&&R.style.stylesheet.schema;return R.config=d,R.style.updateConfig(d,N),this.updateConfigDependencies(),this}removeImport(r){this._checkLoaded();const d=this.stylesheet.imports||[],b=this.getImportIndex(r);-1!==b&&(d.splice(b,1),this.fragments[b].style._remove(),this.fragments.splice(b,1),this._reloadImports())}getImportIndex(r){const d=(this.stylesheet.imports||[]).findIndex(b=>b.id===r);return-1===d&&this.fire(new l.d(new Error(`Import '${r}' does not exist in the map's style and cannot be updated.`))),d}getLayer(r){return this._mergedLayers[r]}getSources(){const r=[];for(const d in this._mergedOtherSourceCaches){const b=this._mergedOtherSourceCaches[d];b&&r.push(b.getSource())}return r}getSource(r,d){const b=this.getSourceCache(r,d);return b&&b.getSource()}getLayerSource(r){const d=this.getLayerSourceCache(r);return d&&d.getSource()}getSourceCache(r,d){const b=l.al(r,d);return this._mergedOtherSourceCaches[b]}getLayerSourceCache(r){const d=l.al(r.source,r.scope);return"symbol"===r.type?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(r){if(null==r)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[r]&&d.push(this._mergedOtherSourceCaches[r]),this._mergedSymbolSourceCaches[r]&&d.push(this._mergedSymbolSourceCaches[r]),d}updateSourceCaches(){const r=this._changes.getUpdatedSourceCaches();for(const d in r){const b=r[d];"reload"===b?this.reloadSource(d):"clear"===b&&this.clearSource(d)}}updateLayers(r){const d=this._changes.getUpdatedPaintProperties();for(const b of d){const M=this.getLayer(b);M&&M.updateTransitions(r)}}getImages(r,d,b){this.imageManager.getImages(d.icons,d.scope,b),this._updateTilesForChangedImages();const M=R=>{R&&R.setDependencies(d.tileID.key,d.type,d.icons)};M(this._otherSourceCaches[d.source]),M(this._symbolSourceCaches[d.source])}getGlyphs(r,d,b){this.glyphManager.getGlyphs(d.stacks,d.scope,b)}getResource(r,d,b){return l.c$(d,b)}getOwnSourceCache(r){return this._otherSourceCaches[r]}getOwnLayerSourceCache(r){return"symbol"===r.type?this._symbolSourceCaches[r.source]:this._otherSourceCaches[r.source]}getOwnSourceCaches(r){const d=[];return this._otherSourceCaches[r]&&d.push(this._otherSourceCaches[r]),this._symbolSourceCaches[r]&&d.push(this._symbolSourceCaches[r]),d}_isSourceCacheLoaded(r){const d=this.getOwnSourceCaches(r);return 0===d.length?(this.fire(new l.d(new Error(`There is no source with ID '${r}'`))),!1):d.every(b=>b.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(r,d){if(0===this._clipLayerIndices.length&&"fill-extrusion"!==r.type)return!1;const b="fill-extrusion"===r.type&&"building"===r.sourceLayer;let M=0;if(r.is3D()){if(b||d&&"batched-model"===d.type)return!0;"model"===r.type&&(M=l.cu.Model)}else"symbol"===r.type&&(M=l.cu.Symbol);for(const R of this._clipLayerIndices){const N=this._mergedLayers[this._mergedOrder[R]];if(!N)continue;const H=[];for(const ee of N.layout.get("clip-layer-types"))H.push("model"===ee?l.cu.Model:"symbol"===ee?l.cu.Symbol:l.cu.FillExtrusion);for(const ee of H)if(M&ee)return!0}return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(r=>{r.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}function Mu(v,r){let d=!1,b=null;const M=()=>{b=null,d&&(v(),b=setTimeout(M,r),d=!1)};return()=>(d=!0,b||M(),b)}Jc.getSourceType=function(v){return Li[v]},Jc.setSourceType=function(v,r){Li[v]=r},Jc.registerForPluginStateChange=l.cL;class S1{constructor(r){this._hashName=r&&encodeURIComponent(r),l.bp(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Mu(this._updateHashUnthrottled.bind(this),300)}addTo(r){return this._map=r,window.addEventListener("hashchange",this._onHashChange,!1),r.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const r=this._map;if(!r)return"";const d=Kh(r);if(this._hashName){const b=this._hashName;let M=!1;const R=location.hash.slice(1).split("&").map(N=>{const H=N.split("=")[0];return H===b?(M=!0,`${H}=${d}`):N}).filter(N=>N);return M||R.push(`${b}=${d}`),`#${R.join("&")}`}return`#${d}`}_getCurrentHash(){const r=location.hash.replace("#","");if(this._hashName){let d;return r.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(d=b)}),(d&&d[1]||"").split("/")}return r.split("/")}_onHashChange(){const r=this._map;if(!r)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(b=>isNaN(b))){const b=r.dragRotate.isEnabled()&&r.touchZoomRotate.isEnabled()?+(d[3]||0):r.getBearing();return r.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:b,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Kh(v,r){const d=v.getCenter(),b=Math.round(100*v.getZoom())/100,M=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,M),N=Math.round(d.lng*R)/R,H=Math.round(d.lat*R)/R,ee=v.getBearing(),se=v.getPitch();let he=r?`/${N}/${H}/${b}`:`${b}/${H}/${N}`;return(ee||se)&&(he+="/"+Math.round(10*ee)/10),se&&(he+=`/${Math.round(se)}`),he}const vu={linearity:.3,easing:l.d0(0,0,.3,1)},Nf=l.W({deceleration:2500,maxSpeed:1400},vu),dd=l.W({deceleration:20,maxSpeed:1400},vu),Sh=l.W({deceleration:1e3,maxSpeed:360},vu),Gu=l.W({deceleration:1e3,maxSpeed:90},vu);class Yh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.e.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,d=l.e.now();for(;r.length>0&&d-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)d.zoom+=R.zoomDelta||0,d.bearing+=R.bearingDelta||0,d.pitch+=R.pitchDelta||0,R.panDelta&&d.pan._add(R.panDelta),R.around&&(d.around=R.around),R.pinchAround&&(d.pinchAround=R.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(d.pan.mag()){const R=Th(d.pan.mag(),b,l.W({},Nf,r||{}));M.offset=d.pan.mult(R.amount/d.pan.mag()),M.center=this._map.transform.center,Ed(M,R)}if(d.zoom){const R=Th(d.zoom,b,dd);M.zoom=this._map.transform.zoom+R.amount,Ed(M,R)}if(d.bearing){const R=Th(d.bearing,b,Sh);M.bearing=this._map.transform.bearing+l.at(R.amount,-179,179),Ed(M,R)}if(d.pitch){const R=Th(d.pitch,b,Gu);M.pitch=this._map.transform.pitch+R.amount,Ed(M,R)}if(M.zoom||M.bearing){const R=void 0===d.pinchAround?d.around:d.pinchAround;M.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),M.noMoveStart=!0,M}}function Ed(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function Th(v,r,d){const{maxSpeed:b,linearity:M,deceleration:R}=d,N=l.at(v*M/(r/1e3),-b,b),H=Math.abs(N)/(R*M);return{easing:d.easing,duration:1e3*H,amount:N*(H/2)}}class Au extends l.f{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,b,M={}){const R=ht(d.getCanvasContainer(),b),N=d.unproject(R);super(r,l.W({point:R,lngLat:N,originalEvent:b},M)),this._defaultPrevented=!1,this.target=d}}class D0 extends l.f{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,b){const M="touchend"===r?b.changedTouches:b.touches,R=ei(d.getCanvasContainer(),M),N=R.map(ee=>d.unproject(ee)),H=R.reduce((ee,se,he,ye)=>ee.add(se.div(ye.length)),new l.P(0,0));super(r,{points:R,point:H,lngLats:N,lngLat:d.unproject(H),originalEvent:b}),this._defaultPrevented=!1}}class Mh extends l.f{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class Zh{constructor(r,d){this._map=r,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(r){return this._firePreventable(new Mh(this._map,r))}mousedown(r,d){return this._mousedownPos=d,this._firePreventable(new Au(r.type,this._map,r))}mouseup(r){this._map.fire(new Au(r.type,this._map,r))}preclick(r){const d=l.W({},r);d.type="preclick",this._map.fire(new Au(d.type,this._map,d))}click(r,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(r),this._map.fire(new Au(r.type,this._map,r)))}dblclick(r){return this._firePreventable(new Au(r.type,this._map,r))}mouseover(r){this._map.fire(new Au(r.type,this._map,r))}mouseout(r){this._map.fire(new Au(r.type,this._map,r))}touchstart(r){return this._firePreventable(new D0(r.type,this._map,r))}touchmove(r){this._map.fire(new D0(r.type,this._map,r))}touchend(r){this._map.fire(new D0(r.type,this._map,r))}touchcancel(r){this._map.fire(new D0(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class T1{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(r){this._map.fire(new Au(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Au("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new Au(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fh{constructor(r,d){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,d){this.isEnabled()&&r.shiftKey&&0===r.button&&(yt(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(r,d){if(!this._active)return;const b=d,M=this._startPos,R=this._lastPos;if(!M||!R||R.equals(b)||!this._box&&b.dist(M)<this._clickTolerance)return;this._lastPos=b,this._box||(this._box=jt("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));const N=Math.min(M.x,b.x),H=Math.max(M.x,b.x),ee=Math.min(M.y,b.y),se=Math.max(M.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${N}px,${ee}px)`,this._box.style.width=H-N+"px",this._box.style.height=se-ee+"px")})}mouseupWindow(r,d){if(!this._active)return;const b=this._startPos,M=d;if(b&&0===r.button){if(this.reset(),rn(),b.x!==M.x||b.y!==M.y)return this._map.fire(new l.f("boxzoomend",{originalEvent:r})),{cameraAnimation:R=>R.fitScreenCoordinates(b,M,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",r)}}keydown(r){this._active&&27===r.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",r))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),fn(),delete this._startPos,delete this._lastPos}_fireEvent(r,d){return this._map.fire(new l.f(r,{originalEvent:d}))}}function G0(v,r){const d={};for(let b=0;b<v.length;b++)d[v[b].identifier]=r[b];return d}class c1{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(r,d,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=r.timeStamp),b.length===this.numTouches&&(this.centroid=function(M){const R=new l.P(0,0);for(const N of M)R._add(N);return R.div(M.length)}(d),this.touches=G0(b,d)))}touchmove(r,d,b){if(this.aborted||!this.centroid)return;const M=G0(b,d);for(const R in this.touches){const N=M[R];(!N||N.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(r,d,b){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),0===b.length){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class jc{constructor(r){this.singleTap=new c1(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(r,d,b){this.singleTap.touchstart(r,d,b)}touchmove(r,d,b){this.singleTap.touchmove(r,d,b)}touchend(r,d,b){const M=this.singleTap.touchend(r,d,b);if(M){const R=r.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(M)<30;if(R&&N||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class W0{constructor(){this._zoomIn=new jc({numTouches:1,numTaps:2}),this._zoomOut=new jc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,d,b){this._zoomIn.touchstart(r,d,b),this._zoomOut.touchstart(r,d,b)}touchmove(r,d,b){this._zoomIn.touchmove(r,d,b),this._zoomOut.touchmove(r,d,b)}touchend(r,d,b){const M=this._zoomIn.touchend(r,d,b),R=this._zoomOut.touchend(r,d,b);return M?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:N.getZoom()+1,around:N.unproject(M)},{originalEvent:r})}):R?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:N.getZoom()-1,around:N.unproject(R)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Cd={0:1,2:2};class Ah{constructor(r){this.reset(),this._clickTolerance=r.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(r,d){return!1}_move(r,d){return{}}mousedown(r,d){if(this._lastPoint)return;const b=Mn(r);this._correctButton(r,b)&&(this._lastPoint=d,this._eventButton=b)}mousemoveWindow(r,d){const b=this._lastPoint;if(b)if(r.preventDefault(),null!=this._eventButton&&function(M,R){const N=Cd[R];return void 0===M.buttons||(M.buttons&N)!==N}(r,this._eventButton))this.reset();else if(this._moved||!(d.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(b,d)}mouseupWindow(r){this._lastPoint&&Mn(r)===this._eventButton&&(this._moved&&rn(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ff extends Ah{mousedown(r,d){super.mousedown(r,d),this._lastPoint&&(this._active=!0)}_correctButton(r,d){return 0===d&&!r.ctrlKey}_move(r,d){return{around:d,panDelta:d.sub(r)}}}class yl extends Ah{_correctButton(r,d){return 0===d&&r.ctrlKey||2===d}_move(r,d){const b=.8*(d.x-r.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(r){r.preventDefault()}}class Dh extends Ah{_correctButton(r,d){return 0===d&&r.ctrlKey||2===d}_move(r,d){const b=-.5*(d.y-r.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(r){r.preventDefault()}}class Ph{constructor(r,d){this._map=r,this._el=r.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),l.bp(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}touchstart(r,d,b){return this._calculateTransform(r,d,b)}touchmove(r,d,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===b.length&&!l.d1())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return r.cancelable&&r.preventDefault(),this._calculateTransform(r,d,b)}}touchend(r,d,b){this._calculateTransform(r,d,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,d,b){b.length>0&&(this._active=!0);const M=G0(b,d),R=new l.P(0,0),N=new l.P(0,0);let H=0;for(const se in M){const he=M[se],ye=this._touches[se];ye&&(R._add(he),N._add(he.sub(ye)),H++,M[se]=he)}if(this._touches=M,H<this._minTouches||!N.mag())return;const ee=N.div(H);return this._sum._add(ee),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(H),panDelta:ee}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=jt("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class mh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(r){}_move(r,d,b){return{}}touchstart(r,d,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([d[0],d[1]]))}touchmove(r,d,b){const M=this._firstTwoTouches;if(!M)return;r.preventDefault();const[R,N]=M,H=Z1(b,d,R),ee=Z1(b,d,N);if(!H||!ee)return;const se=this._aroundCenter?null:H.add(ee).div(2);return this._move([H,ee],se,r)}touchend(r,d,b){if(!this._firstTwoTouches)return;const[M,R]=this._firstTwoTouches,N=Z1(b,d,M),H=Z1(b,d,R);N&&H||(this._active&&rn(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Z1(v,r,d){for(let b=0;b<v.length;b++)if(v[b].identifier===d)return r[b]}function u1(v,r){return Math.log(v/r)/Math.LN2}class nf extends mh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,d){const b=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(u1(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:u1(this._distance,b),pinchAround:d}}}function P0(v,r){return 180*v.angleWith(r)/Math.PI}class Q1 extends mh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,d){const b=this._vector;if(this._vector=r[0].sub(r[1]),b&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:P0(this._vector,b),pinchAround:d}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const d=25/(Math.PI*this._minDiameter)*360,b=this._startVector;if(!b)return!1;const M=P0(r,b);return Math.abs(M)<d}}function Yd(v){return Math.abs(v.y)>Math.abs(v.x)}class Rh extends mh{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(r){this._lastPoints=r,Yd(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,d,b){const M=this._lastPoints;if(!M)return;const R=r[0].sub(M[0]),N=r[1].sub(M[1]);return this._map._cooperativeGestures&&!l.d1()&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(R,N,b.timeStamp),!this._valid)?void 0:(this._lastPoints=r,this._active=!0,{pitchDelta:(R.y+N.y)/2*-.5})}gestureBeginsVertically(r,d,b){if(void 0!==this._valid)return this._valid;const M=r.mag()>=2,R=d.mag()>=2;if(!M&&!R)return;if(!M||!R)return null==this._firstMove&&(this._firstMove=b),b-this._firstMove<100&&void 0;const N=r.y>0==d.y>0;return Yd(r)&&Yd(d)&&N}}const M1={panStep:100,bearingStep:15,pitchStep:10};class Il{constructor(){const r=M1;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let d=0,b=0,M=0,R=0,N=0;switch(r.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:r.shiftKey?b=-1:(r.preventDefault(),R=-1);break;case 39:r.shiftKey?b=1:(r.preventDefault(),R=1);break;case 38:r.shiftKey?M=1:(r.preventDefault(),N=-1);break;case 40:r.shiftKey?M=-1:(r.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(b=0,M=0),{cameraAnimation:H=>{const ee=H.getZoom();H.easeTo({duration:300,easeId:"keyboardHandler",easing:_r,zoom:d?Math.round(ee)+d*(r.shiftKey?2:1):ee,bearing:H.getBearing()+b*this._bearingStep,pitch:H.getPitch()+M*this._pitchStep,offset:[-R*this._panStep,-N*this._panStep],center:H.getCenter()},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _r(v){return v*(2-v)}const ds=4.000244140625,Xl=1/450;class gh{constructor(r,d){this._map=r,this._el=r.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Xl,l.bp(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(r.ctrlKey||r.metaKey||this.isZooming()||l.d1()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const b=l.e.now(),M=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,0!==d&&d%ds==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(M*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),r.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=r,this._delta-=d,this._active||this._start(r)),r.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ht(this._el,r);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._map.transform;"wheel"===this._type&&r.projection.wrap&&(r._center.lng>=180||r._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>r._terrainEnabled()&&this._aroundCoord?r.computeZoomRelativeTo(this._aroundCoord):r.zoom;if(0!==this._delta){const se="wheel"===this._type&&Math.abs(this._delta)>ds?this._wheelZoomRate:this._defaultZoomRate;let he=2/(1+Math.exp(-Math.abs(this._delta*se)));this._delta<0&&0!==he&&(he=1/he);const ye=d(),Pe=Math.pow(2,ye),Fe="number"==typeof this._targetZoom?r.zoomScale(this._targetZoom):Pe;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(Fe*he))),"wheel"===this._type&&(this._startZoom=ye,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const b="number"==typeof this._targetZoom?this._targetZoom:d(),M=this._startZoom,R=this._easing;let N,H=!1;if("wheel"===this._type&&M&&R){const se=Math.min((l.e.now()-this._lastWheelEventTime)/200,1),he=R(se);N=l.a2(M,b,he),se<1?this._frameId||(this._frameId=!0):H=!0}else N=b,H=!0;this._active=!0,H&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let ee=N-d();return ee*this._lastDelta<0&&(ee=0),{noInertia:!0,needsRenderFrame:!H,zoomDelta:ee,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let d=l.d2;if(this._prevEase){const b=this._prevEase,M=(l.e.now()-b.start)/b.duration,R=b.easing(M+.01)-b.easing(M),N=.27/Math.sqrt(R*R+1e-4)*.01,H=Math.sqrt(.0729-N*N);d=l.d0(N,H,.25,1)}return this._prevEase={start:l.e.now(),duration:r,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=jt("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class il{constructor(r,d){this._clickZoom=r,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(r,d){return r.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(r.shiftKey?-1:1),around:b.unproject(d)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bd{constructor(){this._tap=new jc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(r,d,b){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=d[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(r,d,b))}touchmove(r,d,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const M=d[0],R=M.y-this._swipePoint.y;return this._swipePoint=M,r.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(r,d,b)}touchend(r,d,b){this._tapTime?this._swipePoint&&0===b.length&&this.reset():this._tap.touchend(r,d,b)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $a{constructor(r,d,b){this._el=r,this._mousePan=d,this._touchPan=b}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ol{constructor(r,d,b){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=d,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class mc{constructor(r,d,b,M){this._el=r,this._touchZoom=d,this._touchRotate=b,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Fs=v=>v.zoom||v.drag||v.pitch||v.rotate;class Zd extends l.f{}class Qh{constructor(){this.constants=[1,1,.01],this.radius=0}setup(r,d){const b=l._.sub([],d,r);this.radius=l._.length(b[2]<0?l._.div([],b,this.constants):[b[0],b[1],0])}projectRay(r){l._.div(r,r,this.constants),l._.normalize(r,r),l._.mul(r,r,this.constants);const d=l._.scale([],r,this.radius);if(d[2]>0){const b=l._.scale([],[0,0,1],l._.dot(d,[0,0,1])),M=l._.scale([],l._.normalize([],[d[0],d[1],0]),this.radius),R=l._.add([],d,l._.scale([],l._.sub([],l._.add([],M,b),d),2));d[0]=R[0],d[1]=R[1]}return d}}function hd(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class ja{constructor(r,d){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yh(r),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Qh,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),l.bp(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,R,N]of this._listeners){const H=M===document?this.handleWindowEvent:this.handleEvent;M.addEventListener(R,H,N)}}destroy(){for(const[r,d,b]of this._listeners){const M=r===document?this.handleWindowEvent:this.handleEvent;r.removeEventListener(d,M,b)}}_addDefaultHandlers(r){const d=this._map,b=d.getCanvasContainer();this._add("mapEvent",new Zh(d,r));const M=d.boxZoom=new fh(d,r);this._add("boxZoom",M);const R=new W0,N=new fc;d.doubleClickZoom=new il(N,R),this._add("tapZoom",R),this._add("clickZoom",N);const H=new Bd;this._add("tapDragZoom",H);const ee=d.touchPitch=new Rh(d);this._add("touchPitch",ee);const se=new yl(r),he=new Dh(r);d.dragRotate=new ol(r,se,he),this._add("mouseRotate",se,["mousePitch"]),this._add("mousePitch",he,["mouseRotate"]);const ye=new Ff(r),Pe=new Ph(d,r);d.dragPan=new $a(b,ye,Pe),this._add("mousePan",ye),this._add("touchPan",Pe,["touchZoom","touchRotate"]);const Fe=new Q1,Qe=new nf;d.touchZoomRotate=new mc(b,Qe,Fe,H),this._add("touchRotate",Fe,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new T1(d));const Je=d.scrollZoom=new gh(d,this);this._add("scrollZoom",Je,["mousePan"]);const tt=d.keyboard=new Il;this._add("keyboard",tt);for(const rt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])r.interactive&&r[rt]&&d[rt].enable(r[rt])}_add(r,d,b){this._handlers.push({handlerName:r,handler:d,allowed:b}),this._handlersById[r]=d}stop(r){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Fs(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(r,d,b){for(const M in r)if(M!==b&&(!d||d.indexOf(M)<0))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){const d=[];for(const b of r)this._el.contains(b.target)&&d.push(b);return d}handleEvent(r,d){this._updatingCamera=!0;const b="renderFrame"===r.type,M=b?void 0:r,R={needsRenderFrame:!1},N={},H={},ee=r.touches?this._getMapTouches(r.touches):void 0,se=ee?ei(this._el,ee):b?void 0:ht(this._el,r);for(const{handlerName:Pe,handler:Fe,allowed:Qe}of this._handlers){if(!Fe.isEnabled())continue;let Je;this._blockedByActive(H,Qe,Pe)?Fe.reset():Fe[d||r.type]&&(Je=Fe[d||r.type](r,se,ee),this.mergeHandlerResult(R,N,Je,Pe,M),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()),(Je||Fe.isActive())&&(H[Pe]=Fe)}const he={};for(const Pe in this._previousActiveHandlers)H[Pe]||(he[Pe]=M);this._previousActiveHandlers=H,(Object.keys(he).length||hd(R))&&(this._changes.push([R,N,he]),this._triggerRenderFrame()),(Object.keys(H).length||hd(R))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=R;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))}mergeHandlerResult(r,d,b,M,R){if(!b)return;l.W(r,b);const N={handlerName:M,originalEvent:b.originalEvent||R};void 0!==b.zoomDelta&&(d.zoom=N),void 0!==b.panDelta&&(d.drag=N),void 0!==b.pitchDelta&&(d.pitch=N),void 0!==b.bearingDelta&&(d.rotate=N)}_applyChanges(){const r={},d={},b={};for(const[M,R,N]of this._changes)M.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(M.panDelta)),M.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+M.pitchDelta),void 0!==M.around&&(r.around=M.around),void 0!==M.aroundCoord&&(r.aroundCoord=M.aroundCoord),void 0!==M.pinchAround&&(r.pinchAround=M.pinchAround),M.noInertia&&(r.noInertia=M.noInertia),l.W(d,R),l.W(b,N);this._updateMapTransform(r,d,b),this._changes=[]}_updateMapTransform(r,d,b){const M=this._map,R=M.transform,N=Pt=>[Pt.x,Pt.y,Pt.z];if((Pt=>{const Bt=this._eventsInProgress.drag;return Bt&&!this._handlersById[Bt.handlerName].isActive()})()&&!hd(r)){const Pt=R.zoom;R.cameraElevationReference="sea",null!=this._originalZoom&&R._orthographicProjectionAtLowPitch&&"globe"!==R.projection.name&&0===R.pitch?(R.cameraElevationReference="ground",R.zoom=this._originalZoom):(R.recenterOnTerrain(),R.cameraElevationReference="ground"),Pt!==R.zoom&&this._map._update(!0)}if(R._isCameraConstrained&&M._stop(!0),!hd(r))return void this._fireEvents(d,b,!0);let{panDelta:H,zoomDelta:ee,bearingDelta:se,pitchDelta:he,around:ye,aroundCoord:Pe,pinchAround:Fe}=r;R._isCameraConstrained&&(ee>0&&(ee=0),R._isCameraConstrained=!1),void 0!==Fe&&(ye=Fe),(ee||(Pt=>d.drag&&!this._eventsInProgress.drag)())&&ye&&(this._dragOrigin=N(R.pointCoordinate3D(ye)),this._originalZoom=R.zoom,this._trackingEllipsoid.setup(R._camera.position,this._dragOrigin)),R.cameraElevationReference="sea",M._stop(!0),ye=ye||M.transform.centerPoint,se&&(R.bearing+=se),he&&(R.pitch+=he),R._updateCameraState();const Qe=[0,0,0];if(H)if("mercator"===R.projection.name){const Pt=this._trackingEllipsoid.projectRay(R.screenPointToMercatorRay(ye).dir),Bt=this._trackingEllipsoid.projectRay(R.screenPointToMercatorRay(ye.sub(H)).dir);Qe[0]=Bt[0]-Pt[0],Qe[1]=Bt[1]-Pt[1]}else{const Pt=R.pointCoordinate(ye);if("globe"===R.projection.name){H=H.rotate(-R.angle);const Bt=R._pixelsPerMercatorPixel/R.worldSize;Qe[0]=-H.x*l.d3(l.ay(Pt.y))*Bt,Qe[1]=-H.y*l.d3(R.center.lat)*Bt}else{const Bt=R.pointCoordinate(ye.sub(H));Pt&&Bt&&(Qe[0]=Bt.x-Pt.x,Qe[1]=Bt.y-Pt.y)}}const Je=R.zoom,tt=[0,0,0];if(ee){const Pt=N(Pe||R.pointCoordinate3D(ye)),Bt={dir:l._.normalize([],l._.sub([],Pt,R._camera.position))};if(Bt.dir[2]<0){const Ft=R.zoomDeltaToMovement(Pt,ee);l._.scale(tt,Bt.dir,Ft)}}const rt=l._.add(Qe,Qe,tt);R._translateCameraConstrained(rt),ee&&Math.abs(R.zoom-Je)>1e-4&&R.recenterOnTerrain(),R.cameraElevationReference="ground",this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(d,b,!0)}_fireEvents(r,d,b){const M=Fs(this._eventsInProgress),R=Fs(r),N={};for(const he in r){const{originalEvent:ye}=r[he];this._eventsInProgress[he]||(N[`${he}start`]=ye),this._eventsInProgress[he]=r[he]}!M&&R&&this._fireEvent("movestart",R.originalEvent);for(const he in N)this._fireEvent(he,N[he]);R&&this._fireEvent("move",R.originalEvent);for(const he in r){const{originalEvent:ye}=r[he];this._fireEvent(he,ye)}const H={};let ee;for(const he in this._eventsInProgress){const{handlerName:ye,originalEvent:Pe}=this._eventsInProgress[he];this._handlersById[ye].isActive()||(delete this._eventsInProgress[he],ee=d[ye]||Pe,H[`${he}end`]=ee)}for(const he in H)this._fireEvent(he,H[he]);const se=Fs(this._eventsInProgress);if(b&&(M||R)&&!se){this._updatingCamera=!0;const he=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=Pe=>0!==Pe&&-this._bearingSnap<Pe&&Pe<this._bearingSnap;he?(ye(he.bearing||this._map.getBearing())&&(he.bearing=0),this._map.easeTo(he,{originalEvent:ee})):(this._map.fire(new l.f("moveend",{originalEvent:ee})),ye(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,d){this._map.fire(new l.f(r,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{this._frameId=void 0,this.handleEvent(new Zd("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Qd="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class jl extends l.E{constructor(r,d){super(),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=!1!==d.respectPrefersReducedMotion,l.bp(["_renderFrameCallback"],this)}getCenter(){return new l.aI(this.transform.center.lng,this.transform.center.lat)}setCenter(r,d){return this.jumpTo({center:r},d)}panBy(r,d,b){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.W({offset:r},d),b)}panTo(r,d,b){return this.easeTo(l.W({center:r},d),b)}getZoom(){return this.transform.zoom}setZoom(r,d){return this.jumpTo({zoom:r},d),this}zoomTo(r,d,b){return this.easeTo(l.W({zoom:r},d),b)}zoomIn(r,d){return this.zoomTo(this.getZoom()+1,r,d),this}zoomOut(r,d){return this.zoomTo(this.getZoom()-1,r,d),this}getBearing(){return this.transform.bearing}setBearing(r,d){return this.jumpTo({bearing:r},d),this}getPadding(){return this.transform.padding}setPadding(r,d){return this.jumpTo({padding:r},d),this}rotateTo(r,d,b){return this.easeTo(l.W({bearing:r},d),b)}resetNorth(r,d){return this.rotateTo(0,l.W({duration:1e3},r),d),this}resetNorthPitch(r,d){return this.easeTo(l.W({bearing:0,pitch:0,duration:1e3},r),d),this}snapToNorth(r,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,d):this}getPitch(){return this.transform.pitch}setPitch(r,d){return this.jumpTo({pitch:r},d),this}cameraForBounds(r,d){r=l.ai.convert(r);const b=d&&d.bearing||0,M=d&&d.pitch||0,R=r.getNorthWest(),N=r.getSouthEast();return this._cameraForBounds(this.transform,R,N,b,M,d)}_extendPadding(r){const d={top:0,right:0,bottom:0,left:0};return null==r?l.W({},d,this.transform.padding):"number"==typeof r?{top:r,bottom:r,right:r,left:r}:l.W({},d,r)}_extendCameraOptions(r){return(r=l.W({offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding=this._extendPadding(r.padding),r}_minimumAABBFrustumDistance(r,d){const b=d.max[0]-d.min[0],M=d.max[1]-d.min[1];return b/M>r.aspect?b/(2*Math.tan(.5*r.fovX)*r.aspect):M/(2*Math.tan(.5*r.fovY)*r.aspect)}_cameraForBoundsOnGlobe(r,d,b,M,R,N){const H=r.clone(),ee=this._extendCameraOptions(N);H.bearing=M,H.pitch=R;const se=l.aI.convert(d),he=l.aI.convert(b),ye=.5*(se.lat+he.lat),Pe=.5*(se.lng+he.lng),Fe=l.d4(ye,Pe),Qe=l._.normalize([],Fe),Je=l._.normalize([],l._.cross([],Qe,[0,1,0])),tt=l._.cross([],Je,Qe),rt=[Je[0],Je[1],Je[2],0,tt[0],tt[1],tt[2],0,Qe[0],Qe[1],Qe[2],0,0,0,0,1],Pt=[Fe,l.d4(se.lat,se.lng),l.d4(he.lat,se.lng),l.d4(he.lat,he.lng),l.d4(se.lat,he.lng),l.d4(ye,se.lng),l.d4(ye,he.lng),l.d4(se.lat,Pe),l.d4(he.lat,Pe)];let Bt=l.b6.fromPoints(Pt.map(oe=>[l._.dot(Je,oe),l._.dot(tt,oe),l._.dot(Qe,oe)]));const Ft=l._.transformMat4([],Bt.center,rt);0===l._.squaredLength(Ft)&&l._.set(Ft,0,0,1),l._.normalize(Ft,Ft),l._.scale(Ft,Ft,l.cD),H.center=l.d5(Ft);const tn=H.getWorldToCameraMatrix(),en=l.ad.invert(new Float64Array(16),tn);Bt=l.b6.applyTransform(Bt,l.ad.multiply([],tn,rt));const _n=this._extendAABB(Bt,H,ee,M);if(!_n)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Bt=_n,l._.transformMat4(Ft,Ft,tn);const at=.5*(Bt.max[2]-Bt.min[2]),$t=this._minimumAABBFrustumDistance(H,Bt),Tn=l._.scale([],[0,0,1],at),ci=l._.add(Tn,Ft,Tn),zn=$t+(0===H.pitch?0:l._.distance(Ft,ci)),mn=H.globeCenterInViewSpace,_i=l._.sub([],Ft,[mn[0],mn[1],mn[2]]);l._.normalize(_i,_i),l._.scale(_i,_i,zn);const eo=l._.add([],Ft,_i);l._.transformMat4(eo,eo,en);const io=l.d7/l.cD,ie=l._.length(eo),L=l.ax(Math.max(ie*io-l.d7,Number.EPSILON),0),j=Math.min(H.zoomFromMercatorZAdjusted(L),ee.maxZoom);return j>.5*(l.b1+l.aU)?(H.setProjection({name:"mercator"}),H.zoom=j,this._cameraForBounds(H,d,b,M,R,N)):{center:H.center,zoom:j,bearing:M,pitch:R}}_extendAABB(r,d,b,M){const R=.5*((b.padding.left||0)+(b.padding.right||0)),N=.5*((b.padding.top||0)+(b.padding.bottom||0)),H=N,ee=R,se=R,he=N,ye=d.width-(ee+se),Pe=d.height-(H+he),Fe=l._.sub([],r.max,r.min),Qe=Math.min(ye/Fe[0],Pe/Fe[1]),Je=Math.min(d.scaleZoom(d.scale*Qe),b.maxZoom);if(isNaN(Je))return null;const tt=d.scale/d.zoomScale(Je),rt=new l.b6([r.min[0]-ee*tt,r.min[1]-he*tt,r.min[2]],[r.max[0]+se*tt,r.max[1]+H*tt,r.max[2]]),Pt=("number"==typeof b.offset.x&&"number"==typeof b.offset.y?new l.P(b.offset.x,b.offset.y):l.P.convert(b.offset)).rotate(-l.ab(M));return rt.center[0]-=Pt.x*tt,rt.center[1]+=Pt.y*tt,rt}queryTerrainElevation(r,d){const b=this.transform.elevation;return b?(d=l.W({},{exaggerated:!0},d),b.getAtPoint(l.Y.fromLngLat(r),null,d.exaggerated)):null}_cameraForBounds(r,d,b,M,R,N){if("globe"===r.projection.name)return this._cameraForBoundsOnGlobe(r,d,b,M,R,N);const H=r.clone(),ee=this._extendCameraOptions(N);H.bearing=M,H.pitch=R;const se=l.aI.convert(d),he=l.aI.convert(b),ye=new l.aI(se.lng,he.lat),Pe=new l.aI(he.lng,se.lat),Fe=H.project(se),Qe=H.project(he),Je=this.queryTerrainElevation(se),tt=this.queryTerrainElevation(he),rt=this.queryTerrainElevation(ye),Pt=this.queryTerrainElevation(Pe),Bt=[[Fe.x,Fe.y,Math.min(Je||0,tt||0,rt||0,Pt||0)],[Qe.x,Qe.y,Math.max(Je||0,tt||0,rt||0,Pt||0)]];let Ft=l.b6.fromPoints(Bt);const tn=H.getWorldToCameraMatrix(),en=l.ad.invert(new Float64Array(16),tn);Ft=l.b6.applyTransform(Ft,tn);const _n=this._extendAABB(Ft,H,ee,M);if(!_n)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ft=_n;const at=.5*l._.sub([],Ft.max,Ft.min)[2],$t=this._minimumAABBFrustumDistance(H,Ft),Tn=[0,0,1,0];l.aA.transformMat4(Tn,Tn,tn),l.aA.normalize(Tn,Tn);const ci=l._.scale([],Tn,$t+at),zn=l._.add([],Ft.center,ci);l._.transformMat4(Ft.center,Ft.center,en),l._.transformMat4(zn,zn,en);const mn=[Ft.center[0],Ft.center[1],zn[2]*H.pixelsPerMeter];l._.scale(mn,mn,1/H.worldSize);const _i=l.d6(mn[0]),eo=l.ay(mn[1]),io=Math.min(H._zoomFromMercatorZ(mn[2]),ee.maxZoom),ie=new l.aI(_i,eo);return H.mercatorFromTransition&&io<.5*(l.b1+l.aU)?(H.setProjection({name:"globe"}),H.zoom=io,this._cameraForBounds(H,d,b,M,R,N)):{center:ie,zoom:io,bearing:M,pitch:R}}fitBounds(r,d,b){const M=this.cameraForBounds(r,d);return this._fitInternal(M,d,b)}fitScreenCoordinates(r,d,b,M,R){const N=l.P.convert(r),H=l.P.convert(d),ee=new l.P(Math.min(N.x,H.x),Math.min(N.y,H.y)),se=new l.P(Math.max(N.x,H.x),Math.max(N.y,H.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(N,H))return this;const he=this.transform.pointLocation3D(ee),ye=this.transform.pointLocation3D(se),Pe=this.transform.pointLocation3D(new l.P(ee.x,se.y)),Fe=this.transform.pointLocation3D(new l.P(se.x,ee.y)),Qe=[Math.min(he.lng,ye.lng,Pe.lng,Fe.lng),Math.min(he.lat,ye.lat,Pe.lat,Fe.lat)],Je=[Math.max(he.lng,ye.lng,Pe.lng,Fe.lng),Math.max(he.lat,ye.lat,Pe.lat,Fe.lat)],tt=M&&M.pitch?M.pitch:this.getPitch(),rt=this._cameraForBounds(this.transform,Qe,Je,b,tt,M);return this._fitInternal(rt,M,R)}_fitInternal(r,d,b){return r?(d=l.W(r,d)).linear?this.easeTo(d,b):this.flyTo(d,b):this}jumpTo(r,d){this.stop();const b=r.preloadOnly?this.transform.clone():this.transform;let M=!1,R=!1,N=!1;if("zoom"in r&&b.zoom!==+r.zoom&&(M=!0,b.zoom=+r.zoom),void 0!==r.center&&(b.center=l.aI.convert(r.center)),"bearing"in r&&b.bearing!==+r.bearing&&(R=!0,b.bearing=+r.bearing),"pitch"in r&&b.pitch!==+r.pitch&&(N=!0,b.pitch=+r.pitch),null!=r.padding){const H="number"==typeof r.padding?this._extendPadding(r.padding):r.padding;b.isPaddingEqual(H)||(b.padding=H)}return r.preloadOnly?(this._preloadTiles(b),this):(this.fire(new l.f("movestart",d)).fire(new l.f("move",d)),M&&this.fire(new l.f("zoomstart",d)).fire(new l.f("zoom",d)).fire(new l.f("zoomend",d)),R&&this.fire(new l.f("rotatestart",d)).fire(new l.f("rotate",d)).fire(new l.f("rotateend",d)),N&&this.fire(new l.f("pitchstart",d)).fire(new l.f("pitch",d)).fire(new l.f("pitchend",d)),this.fire(new l.f("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||l.w(Qd),this.transform.getFreeCameraOptions()}setFreeCameraOptions(r,d){const b=this.transform;if(!b.projection.supportsFreeCamera)return l.w(Qd),this;this.stop();const M=b.zoom,R=b.pitch,N=b.bearing;b.setFreeCameraOptions(r);const H=M!==b.zoom,ee=R!==b.pitch,se=N!==b.bearing;return this.fire(new l.f("movestart",d)).fire(new l.f("move",d)),H&&this.fire(new l.f("zoomstart",d)).fire(new l.f("zoom",d)).fire(new l.f("zoomend",d)),se&&this.fire(new l.f("rotatestart",d)).fire(new l.f("rotate",d)).fire(new l.f("rotateend",d)),ee&&this.fire(new l.f("pitchstart",d)).fire(new l.f("pitch",d)).fire(new l.f("pitchend",d)),this.fire(new l.f("moveend",d)),this}easeTo(r,d){this._stop(!1,r.easeId),(!1===(r=l.W({offset:[0,0],duration:500,easing:l.d2},r)).animate||this._prefersReducedMotion(r))&&(r.duration=0);const b=this.transform,M=this.getZoom(),R=this.getBearing(),N=this.getPitch(),H=this.getPadding(),ee="zoom"in r?+r.zoom:M,se="bearing"in r?this._normalizeBearing(r.bearing,R):R,he="pitch"in r?+r.pitch:N,ye=this._extendPadding(r.padding),Pe=l.P.convert(r.offset);let Fe,Qe,Je;if("globe"===b.projection.name){const $t=l.Y.fromLngLat(b.center),Tn=Pe.rotate(-b.angle);$t.x+=Tn.x/b.worldSize,$t.y+=Tn.y/b.worldSize;const ci=$t.toLngLat(),zn=l.aI.convert(r.center||ci);this._normalizeCenter(zn),Fe=b.centerPoint.add(Tn),Qe=new l.P($t.x,$t.y).mult(b.worldSize),Je=new l.P(l.aj(zn.lng),l.ak(zn.lat)).mult(b.worldSize).sub(Qe)}else{Fe=b.centerPoint.add(Pe);const $t=b.pointLocation(Fe),Tn=l.aI.convert(r.center||$t);this._normalizeCenter(Tn),Qe=b.project($t),Je=b.project(Tn).sub(Qe)}const tt=b.zoomScale(ee-M);let rt,Pt;r.around&&(rt=l.aI.convert(r.around),Pt=b.locationPoint(rt));const Bt=this._zooming||ee!==M,Ft=this._rotating||R!==se,tn=this._pitching||he!==N,en=!b.isPaddingEqual(ye),_n=$t=>Tn=>{if(Bt&&($t.zoom=l.a2(M,ee,Tn)),Ft&&($t.bearing=l.a2(R,se,Tn)),tn&&($t.pitch=l.a2(N,he,Tn)),en&&($t.interpolatePadding(H,ye,Tn),Fe=$t.centerPoint.add(Pe)),rt)$t.setLocationAtPoint(rt,Pt);else{const ci=$t.zoomScale($t.zoom-M),zn=ee>M?Math.min(2,tt):Math.max(.5,tt),mn=Math.pow(zn,1-Tn),_i=$t.unproject(Qe.add(Je.mult(Tn*mn)).mult(ci));$t.setLocationAtPoint($t.renderWorldCopies?_i.wrap():_i,Fe)}return r.preloadOnly||this._fireMoveEvents(d),$t};if(r.preloadOnly){const $t=this._emulate(_n,r.duration,b);return this._preloadTiles($t),this}const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Bt,this._rotating=Ft,this._pitching=tn,this._padding=en,this._easeId=r.easeId,this._prepareEase(d,r.noMoveStart,at),this._ease(_n(b),$t=>{"sea"===b.cameraElevationReference&&b.recenterOnTerrain(),this._afterEase(d,$t)},r),this}_prepareEase(r,d,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&0===this.transform.pitch&&"globe"!==this.transform.projection.name&&(this.transform.cameraElevationReference="ground"),d||b.moving||this.fire(new l.f("movestart",r)),this._zooming&&!b.zooming&&this.fire(new l.f("zoomstart",r)),this._rotating&&!b.rotating&&this.fire(new l.f("rotatestart",r)),this._pitching&&!b.pitching&&this.fire(new l.f("pitchstart",r))}_fireMoveEvents(r){this.fire(new l.f("move",r)),this._zooming&&this.fire(new l.f("zoom",r)),this._rotating&&this.fire(new l.f("rotate",r)),this._pitching&&this.fire(new l.f("pitch",r))}_afterEase(r,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,M=this._rotating,R=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new l.f("zoomend",r)),M&&this.fire(new l.f("rotateend",r)),R&&this.fire(new l.f("pitchend",r)),this.fire(new l.f("moveend",r))}flyTo(r,d){if(this._prefersReducedMotion(r)){const j=l.ah(r,["center","zoom","bearing","pitch","around","padding"]);return this.jumpTo(j,d)}this.stop(),r=l.W({offset:[0,0],speed:1.2,curve:1.42,easing:l.d2},r);const b=this.transform,M=this.getZoom(),R=this.getBearing(),N=this.getPitch(),H=this.getPadding(),ee="zoom"in r?l.at(+r.zoom,b.minZoom,b.maxZoom):M,se="bearing"in r?this._normalizeBearing(r.bearing,R):R,he="pitch"in r?+r.pitch:N,ye=this._extendPadding(r.padding),Pe=b.zoomScale(ee-M),Fe=l.P.convert(r.offset);let Qe=b.centerPoint.add(Fe);const Je=b.pointLocation(Qe),tt=l.aI.convert(r.center||Je);this._normalizeCenter(tt);const rt=b.project(Je),Pt=b.project(tt).sub(rt);let Bt=r.curve;const Ft=Math.max(b.width,b.height),tn=Ft/Pe,en=Pt.mag();if("minZoom"in r){const j=l.at(Math.min(r.minZoom,M,ee),b.minZoom,b.maxZoom),oe=Ft/b.zoomScale(j-M);Bt=Math.sqrt(oe/en*2)}const _n=Bt*Bt;function at(j){const oe=(tn*tn-Ft*Ft+(j?-1:1)*_n*_n*en*en)/(2*(j?tn:Ft)*_n*en);return Math.log(Math.sqrt(oe*oe+1)-oe)}function $t(j){return(Math.exp(j)-Math.exp(-j))/2}function Tn(j){return(Math.exp(j)+Math.exp(-j))/2}const ci=at(0);let zn=function(j){return Tn(ci)/Tn(ci+Bt*j)},mn=function(j){return Ft*((Tn(ci)*($t(oe=ci+Bt*j)/Tn(oe))-$t(ci))/_n)/en;var oe},_i=(at(1)-ci)/Bt;if(Math.abs(en)<1e-6||!isFinite(_i)){if(Math.abs(Ft-tn)<1e-6)return this.easeTo(r,d);const j=tn<Ft?-1:1;_i=Math.abs(Math.log(tn/Ft))/Bt,mn=function(){return 0},zn=function(oe){return Math.exp(j*Bt*oe)}}r.duration="duration"in r?+r.duration:1e3*_i/("screenSpeed"in r?+r.screenSpeed/Bt:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0);const eo=R!==se,io=he!==N,ie=!b.isPaddingEqual(ye),L=j=>oe=>{const Ve=oe*_i,lt=1/zn(Ve);j.zoom=1===oe?ee:M+j.scaleZoom(lt),eo&&(j.bearing=l.a2(R,se,oe)),io&&(j.pitch=l.a2(N,he,oe)),ie&&(j.interpolatePadding(H,ye,oe),Qe=j.centerPoint.add(Fe));const cn=1===oe?tt:j.unproject(rt.add(Pt.mult(mn(Ve))).mult(lt));return j.setLocationAtPoint(j.renderWorldCopies?cn.wrap():cn,Qe),j._updateCameraOnTerrain(),r.preloadOnly||this._fireMoveEvents(d),j};if(r.preloadOnly){const j=this._emulate(L,r.duration,b);return this._preloadTiles(j),this}return this._zooming=!0,this._rotating=eo,this._pitching=io,this._padding=ie,this._prepareEase(d,!1),this._ease(L(b),()=>this._afterEase(d),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(r){}_cancelRenderFrame(r){}_stop(r,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,d)}if(!r){const b=this.handlers;b&&b.stop(!1)}return this}_ease(r,d,b){!1===b.animate||0===b.duration?(r(1),d()):(this._easeStart=l.e.now(),this._easeOptions=b,this._onEaseFrame=r,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const r=Math.min((l.e.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(r,d){r=l.au(r,-180,180);const b=Math.abs(r-d);return Math.abs(r-360-d)<b&&(r-=360),Math.abs(r+360-d)<b&&(r+=360),r}_normalizeCenter(r){const d=this.transform;if(d.maxBounds||"globe"!==d.projection.name&&!d.renderWorldCopies)return;const b=r.lng-d.center.lng;r.lng+=b>180?-360:b<-180?360:0}_prefersReducedMotion(r){return this._respectPrefersReducedMotion&&l.e.prefersReducedMotion&&!(r&&r.essential)}_emulate(r,d,b){const M=Math.ceil(15*d/1e3),R=[],N=r(b.clone());for(let H=0;H<=M;H++){const ee=N(H/M);R.push(ee.clone())}return R}_preloadTiles(r,d){}}class vh{constructor(r={}){this.options=r,l.bp(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){const d=this.options&&this.options.compact;return this._map=r,this._container=jt("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=jt("button","mapboxgl-ctrl-attrib-button",this._container),jt("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=jt("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===d&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(r,d){const b=this._map._getUIString(`AttributionControl.${d}`);r.removeAttribute("title"),r.firstElementChild&&r.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let r=this._editLink;r||(r=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.d8.ACCESS_TOKEN}];if(r){const b=d.reduce((M,R,N)=>(R.value&&(M+=`${R.key}=${R.value}${N<d.length-1?"&":""}`),M),"?");r.href=`${l.d8.FEEDBACK_URL}/${b}#${Kh(this._map,!0)}`,r.rel="noopener nofollow",this._setElementTitle(r,"MapFeedback")}}_updateData(r){!r||"metadata"!==r.sourceDataType&&"visibility"!==r.sourceDataType&&"style"!==r.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let r=[];if(this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const d=this._map.style._mergedSourceCaches;for(const M in d){const R=d[M];if(R.used){const N=R.getSource();N.attribution&&r.indexOf(N.attribution)<0&&r.push(N.attribution)}}r.sort((M,R)=>M.length-R.length),r=r.filter((M,R)=>{for(let N=R+1;N<r.length;N++)if(r[N].indexOf(M)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=[...this.options.customAttribution,...r]:r.unshift(this.options.customAttribution));const b=r.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,r.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class d1{constructor(){l.bp(["_updateLogo","_updateCompact"],this)}onAdd(r){this._map=r,this._container=jt("div","mapboxgl-ctrl");const d=jt("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(r){r&&"metadata"!==r.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const r=this._map.style._sourceCaches;if(0===Object.entries(r).length)return!0;for(const d in r){const b=r[d].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const r=this._container.children;if(r.length){const d=r[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class A1{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const d=++this._id;return this._queue.push({callback:r,id:d,cancelled:!1}),d}remove(r){const d=this._currentlyRunning,b=d?this._queue.concat(d):this._queue;for(const M of b)if(M.id===r)return void(M.cancelled=!0)}run(r=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const b of d)if(!b.cancelled&&(b.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function zh(v,r,d){if(v=new l.aI(v.lng,v.lat),r){const b=new l.aI(v.lng-360,v.lat),M=new l.aI(v.lng+360,v.lat),R=360*Math.ceil(Math.abs(v.lng-d.center.lng)/360),N=d.locationPoint(v).distSqr(r),H=r.x<0||r.y<0||r.x>d.width||r.y>d.height;d.locationPoint(b).distSqr(r)<N&&(H||Math.abs(b.lng-d.center.lng)<R)?v=b:d.locationPoint(M).distSqr(r)<N&&(H||Math.abs(M.lng-d.center.lng)<R)&&(v=M)}for(;Math.abs(v.lng-d.center.lng)>180;){const b=d.locationPoint(v);if(b.x>=0&&b.y>=0&&b.x<=d.width&&b.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v}const Jd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Lc extends l.E{constructor(r,d){if(super(),(r instanceof HTMLElement||d)&&(r=l.W({element:r},d)),l.bp(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=r&&r.occludedOpacity||.2,r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=jt("div");const R=41,N=27,H=wt("svg",{display:"block",height:R*this._scale+"px",width:N*this._scale+"px",viewBox:`0 0 ${N} ${R}`},this._element),ee=wt("radialGradient",{id:"shadowGradient"},wt("defs",{},H));wt("stop",{offset:"10%","stop-opacity":.4},ee),wt("stop",{offset:"100%","stop-opacity":.05},ee),wt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},H),wt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},H),wt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},H),wt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},H),this._offset=l.P.convert(r&&r.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",R=>{R.preventDefault()}),this._element.addEventListener("mousedown",R=>{R.preventDefault()});const b=this._element.classList;for(const R in Jd)b.remove(`mapboxgl-marker-anchor-${R}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`);const M=r&&r.className?r.className.trim().split(/\s+/):[];b.add(...M),this._popup=null}addTo(r){return r===this._map||(this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._updateMoving),r.on("moveend",this._update),r.on("remove",this._clearFadeTimer),r._addMarker(this),this.setDraggable(this._draggable),this._update(),r.on("click",this._onMapClick)),this}remove(){const r=this._map;return r&&(r.off("click",this._onMapClick),r.off("move",this._updateMoving),r.off("moveend",this._update),r.off("mousedown",this._addDragHandler),r.off("touchstart",this._addDragHandler),r.off("mouseup",this._onUp),r.off("touchend",this._onUp),r.off("mousemove",this._onMove),r.off("touchmove",this._onMove),r.off("remove",this._clearFadeTimer),r._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.aI.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const M=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(24.6+M)],"bottom-right":[-M,-1*(24.6+M)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=r,r._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(r){const d=r.code,b=r.charCode||r.keyCode;"Space"!==d&&"Enter"!==d&&32!==b&&13!==b||this.togglePopup()}_onMapClick(r){const d=r.originalEvent.target,b=this._element;this._popup&&(d===b||b.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?(r.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(r.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const r=this._map,d=this._pos;if(!r||!d)return!1;const b=r.unproject(d),M=r.getFreeCameraOptions();if(!M.position)return!1;const R=M.position.toLngLat();return R.distanceTo(b)<.9*R.distanceTo(this._lngLat)}_evaluateOpacity(){const r=this._map;if(!r)return;const d=this._pos;if(!d||d.x<0||d.x>r.transform.width||d.y<0||d.y>r.transform.height)return void this._clearFadeTimer();const b=r.unproject(d);let M;r._showingGlobe()&&l.d9(r.transform,this._lngLat)?M=0:(M=1-r._queryFogOpacity(b),r.transform._terrainEnabled()&&r.getTerrain()&&this._behindTerrain()&&(M*=this._occludedOpacity)),this._element.style.opacity=`${M}`,this._element.style.pointerEvents=M>0?"auto":"none",this._popup&&this._popup._setOpacity(M),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const r=this._pos;if(!r||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${r.x}px,${r.y}px)\n            ${Jd[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${d.x}px,${d.y}px)\n        `}_calculateXYTransform(){const r=this._pos,d=this._map,b=this.getPitchAlignment();if(!d||!r||"map"!==b)return"";if(!d._showingGlobe()){const ee=d.getPitch();return ee?`rotateX(${ee}deg)`:""}const M=l.b0(l.da(d.transform,this._lngLat)),R=r.sub(l.db(d.transform)),N=Math.abs(R.x)+Math.abs(R.y);if(0===N)return"";const H=M/N;return`rotateX(${-R.y*H}deg) rotateY(${R.x*H}deg)`}_calculateZTransform(){const r=this._pos,d=this._map;if(!d||!r)return"";let b=0;const M=this.getRotationAlignment();if("map"===M)if(d._showingGlobe()){const R=d.project(new l.aI(this._lngLat.lng,this._lngLat.lat+.001)),N=d.project(new l.aI(this._lngLat.lng,this._lngLat.lat-.001)).sub(R);b=l.b0(Math.atan2(N.y,N.x))-90}else b=-d.getBearing();else if("horizon"===M){const R=l.$(4,6,d.getZoom()),N=l.db(d.transform);N.y+=R*d.transform.height;const H=r.sub(N),ee=l.b0(Math.atan2(H.y,H.x));b=(ee>90?ee-270:ee+90)*(1-R)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(r){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=zh(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),!0===r?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){return this._element.classList.add(r),this}removeClassName(r){return this._element.classList.remove(r),this}toggleClassName(r){return this._element.classList.toggle(r)}_onMove(r){const d=this._map;if(!d)return;const b=this._pointerdownPos,M=this._positionDelta;if(b&&M){if(!this._isDragging){const R=this._clickTolerance||d._clickTolerance;if(r.point.dist(b)<R)return;this._isDragging=!0}this._pos=r.point.sub(M),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new l.f("dragstart"))),this.fire(new l.f("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const r=this._map;r&&(r.off("mousemove",this._onMove),r.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new l.f("dragend")),this._state="inactive"}_addDragHandler(r){const d=this._map,b=this._pos;d&&b&&this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(b),this._pointerdownPos=r.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(r){this._draggable=!!r;const d=this._map;return d&&(r?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(r){return this._occludedOpacity=r||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ls={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Oh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function q0(v=new l.P(0,0),r="bottom"){if("number"==typeof v){const d=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(r){case"top":return new l.P(0,v);case"top-left":return new l.P(d,d);case"top-right":return new l.P(-d,d);case"bottom":return new l.P(0,-v);case"bottom-left":return new l.P(d,-d);case"bottom-right":return new l.P(-d,-d);case"left":return new l.P(v,0);case"right":return new l.P(-v,0)}return new l.P(0,0)}return v instanceof l.P||Array.isArray(v)?l.P.convert(v):l.P.convert(v[r]||[0,0])}class Wu{constructor(r){this.jumpTo(r)}getValue(r){if(r<=this._startTime)return this._start;if(r>=this._endTime)return this._end;const d=l.b9((r-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(r){return r>=this._startTime&&r<=this._endTime}jumpTo(r){this._startTime=-1/0,this._endTime=-1/0,this._start=r,this._end=r}easeTo(r,d,b){this._start=this.getValue(d),this._end=r,this._startTime=d,this._endTime=d+b}}const R0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class Lh{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}const Kl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1},Nd={showCompass:!0,showZoom:!0,visualizePitch:!1};class rl{constructor(r,d,b=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new yl({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,b&&(this.mousePitch=new Dh({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),l.bp(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(r,d){this.mouseRotate.mousedown(r,d),this.mousePitch&&this.mousePitch.mousedown(r,d),yt()}move(r,d){const b=this.map,M=this.mouseRotate.mousemoveWindow(r,d),R=M&&M.bearingDelta;if(R&&b.setBearing(b.getBearing()+R),this.mousePitch){const N=this.mousePitch.mousemoveWindow(r,d),H=N&&N.pitchDelta;H&&b.setPitch(b.getPitch()+H)}}off(){const r=this.element;r.removeEventListener("mousedown",this.mousedown),r.removeEventListener("touchstart",this.touchstart,{passive:!1}),r.removeEventListener("touchmove",this.touchmove),r.removeEventListener("touchend",this.touchend),r.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){fn(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(r){this.down(l.W({},r,{ctrlKey:!0,preventDefault:()=>r.preventDefault()}),ht(this.element,r)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(r){this.move(r,ht(this.element,r))}mouseup(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()}touchstart(r){1!==r.targetTouches.length?this.reset():(this._startPos=this._lastPos=ei(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>r.preventDefault()},this._startPos))}touchmove(r){1!==r.targetTouches.length?this.reset():(this._lastPos=ei(this.element,r.targetTouches)[0],this.move({preventDefault:()=>r.preventDefault()},this._lastPos))}touchend(r){0===r.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Bc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Fd={maxWidth:100,unit:"metric"},pd={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:l.dt,supported:Y,setRTLTextPlugin:l.dv,getRTLTextPluginStatus:l.dw,Map:class extends jl{constructor(v){l.dc.mark(l.dd.create);const r=v;if(null!=(v=l.W({},Kl,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&l.de(window)&&(v.antialias=!1,l.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new fa(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._repaint=!!v.repaint,this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new A1,this._domRenderTaskQueue=new A1,this._controls=[],this._markers=[],this._popups=[],this._mapId=l.df(),this._locale=l.W({},R0,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._tessellationStep=v.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Wu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._lastDirtyFrameId=0,this._requestManager=new l.dg(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,this._contextCreateOptions=v.contextCreateOptions?{...v.contextCreateOptions}:{},"string"==typeof v.container){const d=document.getElementById(v.container);if(!d)throw new Error(`Container '${v.container.toString()}' not found.`);this._container=d}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&l.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),l.bp(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Lh),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new ja(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,(v.style||!v.testMode)&&this.setStyle(v.style||l.d8.DEFAULT_STYLE,{config:v.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),v.hash&&(this._hash=new S1("string"==typeof v.hash&&v.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){null==r.center&&null==r.zoom||(this.transform._unmodified=!1),this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch});const d=v.bounds;d&&(this.resize(),this.fitBounds(d,l.W({},v.fitBoundsOptions,{duration:0})))}this.resize(),v.attributionControl&&this.addControl(new vh({customAttribution:v.customAttribution})),this._logoControl=new d1,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",d=>{this._update("style"===d.dataType),this.fire(new l.f(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new l.f(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(v,r){if(void 0===r&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.d(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const b=this._controlPositions[r];return-1!==r.indexOf("bottom")?b.insertBefore(d,b.firstChild):b.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.d(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const r=!this._moving;return r&&this.fire(new l.f("movestart",v)).fire(new l.f("move",v)),this.fire(new l.f("resize",v)),r&&this.fire(new l.f("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(l.ai.convert(v)),this._update()}setMinZoom(v){var r;if((v=null!==(r=v)&&void 0!==r?r:-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new l.f("zoomstart")).fire(new l.f("zoom")).fire(new l.f("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){var r;if((v=null!==(r=v)&&void 0!==r?r:22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new l.f("zoomstart")).fire(new l.f("zoom")).fire(new l.f("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){var r;if((v=null!==(r=v)&&void 0!==r?r:0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new l.f("pitchstart")).fire(new l.f("pitch")).fire(new l.f("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){var r;if((v=null!==(r=v)&&void 0!==r?r:85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new l.f("pitchstart")).fire(new l.f("pitch")).fire(new l.f("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return"auto"===v?navigator.language:Array.isArray(v)?0===v.length?void 0:v.map(r=>"auto"===r?navigator.language:r):v}setLanguage(v){const r=this._parseLanguage(v);if(!this.style||r===this._language)return this;this._language=r,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(v){return this._lazyInitEmptyStyle(),v?"string"==typeof v&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.projection)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const v=this.transform,r=v.projection.name;let d;"globe"===r&&v.zoom>=l.aU?(v.setMercatorFromTransition(),d=!0):"mercator"===r&&v.zoom<l.aU&&(v.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,r){return this._updateProjection(v||r||{name:"mercator"})}_updateProjection(v){let r;return r="globe"===v.name&&this.transform.zoom>=l.aU?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),r&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(v){return this.transform.locationPoint3D(l.aI.convert(v))}unproject(v){return this.transform.pointLocation3D(l.P.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,r,d){if("mouseenter"===v||"mouseover"===v){let b=!1;const M=N=>{const H=r.filter(se=>this.getLayer(se)),ee=H.length?this.queryRenderedFeatures(N.point,{layers:H}):[];ee.length?b||(b=!0,d.call(this,new Au(v,this,N.originalEvent,{features:ee}))):b=!1},R=()=>{b=!1};return{layers:new Set(r),listener:d,delegates:{mousemove:M,mouseout:R}}}if("mouseleave"===v||"mouseout"===v){let b=!1;const M=N=>{const H=r.filter(ee=>this.getLayer(ee));(H.length?this.queryRenderedFeatures(N.point,{layers:H}):[]).length?b=!0:b&&(b=!1,d.call(this,new Au(v,this,N.originalEvent)))},R=N=>{b&&(b=!1,d.call(this,new Au(v,this,N.originalEvent)))};return{layers:new Set(r),listener:d,delegates:{mousemove:M,mouseout:R}}}{const b=M=>{const R=r.filter(H=>this.getLayer(H)),N=R.length?this.queryRenderedFeatures(M.point,{layers:R}):[];N.length&&(M.features=N,d.call(this,M),delete M.features)};return{layers:new Set(r),listener:d,delegates:{[v]:b}}}}on(v,r,d){if("function"==typeof r||void 0===d)return super.on(v,r);if(Array.isArray(r)||(r=[r]),r)for(const M of r)if(!this._isValidId(M))return this;const b=this._createDelegatedListener(v,r,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(b);for(const M in b.delegates)this.on(M,b.delegates[M]);return this}once(v,r,d){if("function"==typeof r||void 0===d)return super.once(v,r);if(Array.isArray(r)||(r=[r]),r)for(const M of r)if(!this._isValidId(M))return this;const b=this._createDelegatedListener(v,r,d);for(const M in b.delegates)this.once(M,b.delegates[M]);return this}off(v,r,d){if("function"==typeof r||void 0===d)return super.off(v,r);const b=new Set(Array.isArray(r)?r:[r]);for(const N of b)if(!this._isValidId(N))return this;const M=(N,H)=>{if(N.size!==H.size)return!1;for(const ee of N)if(!H.has(ee))return!1;return!0},R=this._delegatedListeners?this._delegatedListeners[v]:void 0;return R&&(N=>{for(let H=0;H<N.length;H++){const ee=N[H];if(ee.listener===d&&M(ee.layers,b)){for(const se in ee.delegates)this.off(se,ee.delegates[se]);return N.splice(H,1),this}}})(R),this}queryRenderedFeatures(v,r){if(!this.style)return[];if(void 0!==r||void 0===v||v instanceof l.P||Array.isArray(v)||(r=v,v=void 0),v=v||[[0,0],[this.transform.width,this.transform.height]],(r=r||{}).layers&&Array.isArray(r.layers))for(const d of r.layers)if(!this._isValidId(d))return[];return this.style.queryRenderedFeatures(v,r,this.transform)}querySourceFeatures(v,r){return this._isValidId(v)?this.style.querySourceFeatures(v,r):[]}isPointOnSurface(v){const{name:r}=this.transform.projection;return"globe"!==r&&"mercator"!==r&&l.w(`${r} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(l.P.convert(v))}setStyle(v,r){return r=l.W({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r),this.style&&v&&!1!==r.diff&&r.localFontFamily===this._localFontFamily&&r.localIdeographFontFamily===this._localIdeographFontFamily&&!r.config?(this.style._diffStyle(v,(d,b)=>{d?(l.w(`Unable to perform style diff: ${String(d.message||d.error||d)}. Rebuilding the style from scratch.`),this._updateStyle(v,r)):b&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(v,r))}_getUIString(v){const r=this._locale[v];if(null==r)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v){const d=l.W({},r);r&&r.config&&(d.initialConfig=r.config,delete d.config),this.style=new Jc(this,d).load(v),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Jc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(l.w("There is no style added to the map."),!1)}_isValidId(v){return null==v?(this.fire(new l.d(new Error("IDs can't be empty."))),!1):!l.cV(v)||(this.fire(new l.d(new Error(`IDs can't contain special symbols: "${v}".`))),!1)}addSource(v,r){return this._isValidId(v)?(this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)):this}isSourceLoaded(v){return!!this._isValidId(v)&&!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(v,r,d){this._lazyInitEmptyStyle(),this.style.addSourceType(v,r,d)}removeSource(v){return this._isValidId(v)?(this.style.removeSource(v),this._updateTerrain(),this._update(!0)):this}getSource(v){return this._isValidId(v)?this.style.getOwnSource(v):null}addImage(v,r,{pixelRatio:d=1,sdf:b=!1,stretchX:M,stretchY:R,content:N}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap){const{width:H,height:ee,data:se}=l.e.getImageData(r);this.style.addImage(v,{data:new l.i({width:H,height:ee},se),pixelRatio:d,stretchX:M,stretchY:R,content:N,sdf:b,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new l.d(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:H,height:ee}=r,se=r;this.style.addImage(v,{data:new l.i({width:H,height:ee},new Uint8Array(se.data)),pixelRatio:d,stretchX:M,stretchY:R,content:N,sdf:b,version:0,userImage:se}),se.onAdd&&se.onAdd(this,v)}}updateImage(v,r){this._lazyInitEmptyStyle();const d=this.style.getImage(v);if(!d)return void this.fire(new l.d(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap?l.e.getImageData(r):r,{width:M,height:R,data:N}=b;if(void 0===M||void 0===R)return void this.fire(new l.d(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==d.data.width||R!==d.data.height)return void this.fire(new l.d(new Error(`The width and height of the updated image (${M}, ${R})\n                must be that same as the previous version of the image\n                (${d.data.width}, ${d.data.height})`)));const H=!(r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap);d.data.replace(N,H),this.style.updateImage(v,d)}hasImage(v){return v?!!this.style&&!!this.style.getImage(v):(this.fire(new l.d(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,r){l.h(this._requestManager.transformRequest(v,l.R.Image),(d,b)=>{r(d,b instanceof HTMLImageElement?l.e.getImageData(b):b)})}listImages(){return this.style.listImages()}addModel(v,r){this._lazyInitEmptyStyle(),this.style.addModel(v,r)}hasModel(v){return v?this.style.hasModel(v):(this.fire(new l.d(new Error("Missing required model id"))),!1)}removeModel(v){this.style.removeModel(v)}listModels(){return this.style.listModels()}addLayer(v,r){return this._isValidId(v.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)):this}getSlot(v){const r=this.getLayer(v);return r&&r.slot||null}setSlot(v,r){return this.style.setSlot(v,r),this.style.mergeLayers(),this._update(!0)}addImport(v,r){return this.style.addImport(v,r),this}updateImport(v,r){return"string"!=typeof r&&r.id!==v?(this.removeImport(v),this.addImport(r)):(this.style.updateImport(v,r),this._update(!0))}removeImport(v){return this.style.removeImport(v),this}moveImport(v,r){return this.style.moveImport(v,r),this._update(!0)}moveLayer(v,r){return this._isValidId(v)?(this.style.moveLayer(v,r),this._update(!0)):this}removeLayer(v){return this._isValidId(v)?(this.style.removeLayer(v),this._update(!0)):this}getLayer(v){if(!this._isValidId(v))return null;const r=this.style.getOwnLayer(v);return r?r.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(v,r,d){return this._isValidId(v)?(this.style.setLayerZoomRange(v,r,d),this._update(!0)):this}setFilter(v,r,d={}){return this._isValidId(v)?(this.style.setFilter(v,r,d),this._update(!0)):this}getFilter(v){return this._isValidId(v)?this.style.getFilter(v):null}setPaintProperty(v,r,d,b={}){return this._isValidId(v)?(this.style.setPaintProperty(v,r,d,b),this._update(!0)):this}getPaintProperty(v,r){return this._isValidId(v)?this.style.getPaintProperty(v,r):null}setLayoutProperty(v,r,d,b={}){return this._isValidId(v)?(this.style.setLayoutProperty(v,r,d,b),this._update(!0)):this}getLayoutProperty(v,r){return this._isValidId(v)?this.style.getLayoutProperty(v,r):null}getSchema(v){return this.style.getSchema(v)}setSchema(v,r){return this.style.setSchema(v,r),this._update(!0)}getConfig(v){return this.style.getConfig(v)}setConfig(v,r){return this.style.setConfig(v,r),this._update(!0)}getConfigProperty(v,r){return this.style.getConfigProperty(v,r)}setConfigProperty(v,r,d){return this.style.setConfigProperty(v,r,d),this._update(!0)}setLights(v){if(this._lazyInitEmptyStyle(),v&&1===v.length&&"flat"===v[0].type){const r=v[0];r.properties?this.style.setFlatLight(r.properties,r.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(v),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const v=this.style.getLights()||[];return 0===v.length&&v.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),v}setLight(v,r={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:v}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(v){return this._lazyInitEmptyStyle(),this.style.setColorTheme(v),this._update(!0)}setCamera(v){return this.style.setCamera(v),this._triggerCameraUpdate(v)}_triggerCameraUpdate(v){return this._update(this.transform.setOrthographicProjectionAtLowPitch("orthographic"===v["camera-projection"]))}getCamera(){return this.style.camera}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(l.aI.convert(v),this.transform):0}setFeatureState(v,r){return this._isValidId(v.source)?(this.style.setFeatureState(v,r),this._update()):this}removeFeatureState(v,r){return this._isValidId(v.source)?(this.style.removeFeatureState(v,r),this._update()):this}getFeatureState(v){return this._isValidId(v.source)?this.style.getFeatureState(v):null}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,r=this._container.getBoundingClientRect().height||300;let d,b,M,R=this._container;for(;R&&(!b||!M);){const N=window.getComputedStyle(R).transform;N&&"none"!==N&&(d=N.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&"0"!==d[0]&&"1"!==d[0]&&(b=d[0]),d[3]&&"0"!==d[3]&&"1"!==d[3]&&(M=d[3])),R=R.parentElement}this._containerWidth=b?Math.abs(v/b):v,this._containerHeight=M?Math.abs(r/M):r}_detectMissingCSS(){"rgb(250, 128, 114)"!==window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&l.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=jt("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const r=this._canvasContainer=jt("div","mapboxgl-canvas-container",v);this._canvas=jt("canvas","mapboxgl-canvas",r),this._interactive&&(r.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=jt("div","mapboxgl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{b[M]=jt("div",`mapboxgl-ctrl-${M}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r){const d=l.e.devicePixelRatio||1;this._canvas.width=d*Math.ceil(v),this._canvas.height=d*Math.ceil(r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const r=this._markers.indexOf(v);-1!==r&&this._markers.splice(r,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const r=this._popups.indexOf(v);-1!==r&&this._popups.splice(r,1)}_setupPainter(){const v=l.W({},Y.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl2",v);r?(l.dh(r,!0),this.painter=new Zc(r,this._contextCreateOptions,this.transform,this._tp),this.on("data",d=>{"source"===d.dataType&&this.painter.setTileLoadedFlag(!0)}),l.di.testSupport(r)):this.fire(new l.d(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.f("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new l.f("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty&&!this._occlusionOpacityChanged&&this._occlusionCriteriaSatisfied()}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let r;this.fire(new l.f("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,b=l.e.now(),M=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(r=M.createQuery(),M.beginQuery(d.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const R=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const se=this.transform.zoom,he=this.transform.pitch,ye=l.e.now(),Pe=new l.X(se,{now:ye,fadeDuration:R,pitch:he,transition:this.style.transition});this.style.update(Pe)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let N=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),N=this._updateAverageElevation(b),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):N=this._updateAverageElevation(b);const H=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,R,this._crossSourceCollisions,this.painter.replacementSource);if(H&&(this._placementDirty=H.needsRerender,this._occlusionOpacityChanged=H.occlusionQueryBasedOpacityChanged),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:R,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new l.f("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.dc.mark(l.dd.load),this.fire(new l.f("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){const se=l.e.now()-b;M.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const he=M.getQueryParameter(r,M.QUERY_RESULT)/1e6;M.deleteQuery(r),this.fire(new l.f("gpu-timing-frame",{cpuTime:se,gpuTime:he}))},50)}if(this.listens("gpu-timing-layer")){const se=this.painter.collectGpuTimers();setTimeout(()=>{const he=this.painter.queryGpuTimers(se);this.fire(new l.f("gpu-timing-layer",{layerTimes:he}))},50)}if(this.listens("gpu-timing-deferred-render")){const se=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const he=this.painter.queryGpuTimeDeferredRender(se);this.fire(new l.f("gpu-timing-deferred-render",{gpuTime:he}))},50)}const ee=this._sourcesDirty||this._styleDirty||this._placementDirty||this._occlusionOpacityChanged||N;if((this._sourcesDirty||this._styleDirty||N||this._occlusionOpacityChanged)&&(this._lastDirtyFrameId=this._frameId),ee||this._repaint||!this._occlusionCriteriaSatisfied())this.triggerRepaint();else{const se=!this.isMoving()&&this.loaded();if(se&&(N=this._updateAverageElevation(b,!0)),N)this.triggerRepaint();else if(this._triggerFrame(!1),se&&(this.fire(new l.f("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const he=this._calculateSpeedIndex();this.fire(new l.f("speedindexcompleted",{speedIndex:he})),this.speedIndexTiming=!1}}this._loaded&&!this._fullyLoaded&&!ee&&this._occlusionCriteriaSatisfied()&&(this._fullyLoaded=!0,l.dc.mark(l.dd.fullLoad),this._performanceMetricsCollection&&l.dj(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const r of this._markers)v&&!this.getRenderWorldCopies()&&(r._lngLat=r._lngLat.wrap()),r._update();for(const r of this._popups)!v||this.getRenderWorldCopies()||r._trackPointer||(r._lngLat=r._lngLat.wrap()),r._update()}_updateAverageElevation(v,r=!1){const d=M=>(this.transform.averageElevation=M,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&d(0);const b=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(b||(r||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const M=this.transform.averageElevation;let R=this.transform.sampleAverageElevation();null!=this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(R)?R=0:this._averageElevationLastSampledAt=v;const N=Math.abs(M-R);if(N>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(R),d(R);this._averageElevation.easeTo(R,v,300)}else if(N>1e-4)return this._averageElevation.jumpTo(R),d(R)}return!!this._averageElevation.isEasing(v)&&d(this._averageElevation.getValue(v))}_authenticate(){l.dk(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,v=>{if(v&&(v.message===l.dl||401===v.status)){const r=this.painter.context.gl;l.dh(r,!1),this._logoControl instanceof d1&&this._logoControl._updateLogo(),r&&r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new l.d(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),l.dm(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&l.dn(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),r=this.painter.getCanvasCopiesAndTimestamps();r.timeStamps.push(performance.now());const d=this.painter.context.gl,b=d.createFramebuffer();function M(R){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,R,0);const N=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,N),N}return d.bindFramebuffer(d.FRAMEBUFFER,b),this._canvasPixelComparison(M(v),r.canvasCopies.map(M),r.timeStamps)}_canvasPixelComparison(v,r,d){let b=d[1]-d[0];const M=v.length/4;for(let R=0;R<r.length;R++){const N=r[R];let H=0;for(let ee=0;ee<N.length;ee+=4)N[ee]===v[ee]&&N[ee+1]===v[ee+1]&&N[ee+2]===v[ee+2]&&N[ee+3]===v[ee+3]&&(H+=1);b+=(d[R+2]-d[R+1])*(1-H/M)}return b}remove(){this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),l.dp(this.painter.context.gl),l.dq.remove(),l.dr.remove(),this._removed=!0,this.fire(new l.f("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=l.e.frame(r=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(r)}))}_preloadTiles(v){const r=this.style?this.style.getSourceCaches():[];return l.ds(r,(d,b)=>d._preloadTiles(v,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){"hidden"===document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(v){this._showParseStatus!==v&&(this._showParseStatus=v,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(v){this._showLayers2DWireframe!==v&&(this._showLayers2DWireframe=v,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(v){this._showLayers3DWireframe!==v&&(this._showLayers3DWireframe=v,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,this._tp.refreshUI(),v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,this._tp.refreshUI(),v&&this._update())}_setCacheLimits(v,r){l.du(v,r)}_occlusionCriteriaSatisfied(){const v=this.style&&(this.style.has3DLayers()||this.style.terrain&&!this.style.disableElevatedTerrain);return!(this.style&&this.style.hasSymbolLayers()&&v&&this.painter)||this._frameId-this._lastDirtyFrameId>5+2*this.painter.symbolParams.occlusionQueryFrameWindow}get version(){return l.dt}},NavigationControl:class{constructor(v={}){this.options=l.W({},Nd,v),this._container=jt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(l.bp(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",r=>{this._map&&this._map.zoomIn({},{originalEvent:r})}),jt("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",r=>{this._map&&this._map.zoomOut({},{originalEvent:r})}),jt("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bp(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",r=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:r}):d.resetNorth({},{originalEvent:r}))}),this._compassIcon=jt("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const r=v.getZoom(),d=r===v.getMaxZoom(),b=r===v.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=r)})}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new rl(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,r){const d=jt("button",v,this._container);return d.type="button",d.addEventListener("click",r),d}_setButtonTitle(v,r){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${r}`);v.setAttribute("aria-label",d),v.firstElementChild&&v.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends l.E{constructor(v={}){super();const r=navigator.geolocation;this.options=l.W({geolocation:r},Bc,v),l.bp(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Mu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=jt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const r=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,v(d)};void 0!==this._supportsGeolocation?v(this._supportsGeolocation):void 0!==navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(d=>r("denied"!==d.state)).catch(()=>r()):r()}_isOutOfMapMaxBounds(v){const r=this._map.getMaxBounds(),d=v.coords;return!!r&&(d.longitude<r.getWest()||d.longitude>r.getEast()||d.latitude<r.getSouth()||d.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new l.f("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(v),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(v),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new l.f("geolocate",v)),this._finish()}}_updateCamera(v){const r=new l.aI(v.coords.longitude,v.coords.latitude),d=v.coords.accuracy,b=this._map.getBearing(),M=l.W({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(d),M,{geolocateSource:!0})}_updateMarker(v){if(v){const r=new l.aI(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,r=l.ax(1,v._center.lat)*v.worldSize,d=Math.ceil(2*this._accuracy*r);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(1===v.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===v.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new l.f("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=jt("button","mapboxgl-ctrl-geolocate",this._container),jt("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===v){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=jt("div","mapboxgl-user-location"),this._dotElement.appendChild(jt("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(jt("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Lc({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=jt("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Lc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||"ACTIVE_LOCK"!==this._watchState||r.originalEvent&&"resize"===r.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new l.f("trackuserlocationend")))})}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:!0===v.absolute&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.f("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.f("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.f("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(r=>{"granted"===r&&v()}).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:vh,ScaleControl:class{constructor(v={}){this.options=l.W({},Fd,v),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),l.bp(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,r=this._map,d=r._containerHeight/2,b=r._containerWidth/2-v/2,M=r.unproject([b,d]),R=r.unproject([b+v,d]),N=M.distanceTo(R);if("imperial"===this.options.unit){const H=3.2808*N;H>5280?this._setScale(v,H/5280,"mile"):this._setScale(v,H,"foot")}else"nautical"===this.options.unit?this._setScale(v,N/1852,"nautical-mile"):N>=1e3?this._setScale(v,N/1e3,"kilometer"):this._setScale(v,N,"meter")}_setScale(v,r,d){this._map._requestDomTask(()=>{const b=function(R){const N=Math.pow(10,`${Math.floor(R)}`.length-1);let H=R/N;return H=H>=10?10:H>=5?5:H>=3?3:H>=2?2:H>=1?1:function(ee){const se=Math.pow(10,Math.ceil(-Math.log(ee)/Math.LN10));return Math.round(ee*se)/se}(H),N*H}(r),M=b/r;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==d?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(b):`${b}&nbsp;${pd[d]}`,this._container.style.width=v*M+"px"})}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=jt("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v={}){this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.w("Full screen control 'container' must be a DOM element.")),l.bp(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=jt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=jt("button","mapboxgl-ctrl-fullscreen",this._controlContainer);jt("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.E{constructor(v){super(),this.options=l.W(Object.create(ls),v),l.bp(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new l.f("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new l.f("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=l.aI.convert(v),this._pos=null,this._trackPointer=!1,this._update();const r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const r=document.createDocumentFragment(),d=document.createElement("body");let b;for(d.innerHTML=v;b=d.firstChild,b;)r.appendChild(b);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let r=this._content;if(r)for(;r.hasChildNodes();)r.firstChild&&r.removeChild(r.firstChild);else r=this._content=jt("div","mapboxgl-popup-content",this._container||void 0);if(r.appendChild(v),this.options.closeButton){const d=this._closeButton=jt("button","mapboxgl-popup-close-button",r);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let r;return this._classList.delete(v)?r=!1:(this._classList.add(v),r=!0),this._updateClassList(),r}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const r=this._map,d=this._container,b=this._pos;if(!r||!d||!b)return"bottom";const M=d.offsetWidth,R=d.offsetHeight,N=b.x<M/2,H=b.x>r.transform.width-M/2;if(b.y+v<R)return N?"top-left":H?"top-right":"top";if(b.y>r.transform.height-R){if(N)return"bottom-left";if(H)return"bottom-right"}return N?"left":H?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const r=[...this._classList];r.push("mapboxgl-popup"),this._anchor&&r.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&r.push("mapboxgl-popup-track-pointer"),v.className=r.join(" ")}_update(v){const r=this._map,d=this._content;if(!r||!this._lngLat&&!this._trackPointer||!d)return;let b=this._container;if(b||(b=this._container=jt("div","mapboxgl-popup",r.getContainer()),this._tip=jt("div","mapboxgl-popup-tip",b),b.appendChild(d)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=zh(this._lngLat,this._pos,r.transform)),!this._trackPointer||v){const M=this._pos=this._trackPointer&&v instanceof l.P?v:r.project(this._lngLat),R=q0(this.options.offset),N=this._anchor=this._getAnchor(R.y),H=q0(this.options.offset,N),ee=M.add(H).round();r._requestDomTask(()=>{this._container&&N&&(this._container.style.transform=`${Jd[N]} translate(${ee.x}px,${ee.y}px)`)})}if(!this._marker&&r._showingGlobe()){const M=l.d9(r.transform,this._lngLat)?0:1;this._setOpacity(M)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Oh);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:Lc,Style:Jc,LngLat:l.aI,LngLatBounds:l.ai,Point:l.P,MercatorCoordinate:l.Y,FreeCameraOptions:nt,Evented:l.E,config:l.d8,prewarm:l.dx,clearPrewarmedResources:l.dy,get accessToken(){return l.d8.ACCESS_TOKEN},set accessToken(v){l.d8.ACCESS_TOKEN=v},get baseApiUrl(){return l.d8.API_URL},set baseApiUrl(v){l.d8.API_URL=v},get workerCount(){return l.dz.workerCount},set workerCount(v){l.dz.workerCount=v},get maxParallelImageRequests(){return l.d8.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){l.d8.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){l.dA(v)},get workerUrl(){return l.dB.workerUrl},set workerUrl(v){l.dB.workerUrl=v},get workerClass(){return l.dB.workerClass},set workerClass(v){l.dB.workerClass=v},get workerParams(){return l.dB.workerParams},set workerParams(v){l.dB.workerParams=v},get dracoUrl(){return l.dC()},set dracoUrl(v){l.dD(v)},get meshoptUrl(){return l.dE()},set meshoptUrl(v){l.dF(v)},setNow:l.e.setNow,restoreNow:l.e.restoreNow}}),V}()},4412:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{t:()=>re});var V=_e(1413);class re extends V.B{constructor(l){super(),this._value=l}get value(){return this.getValue()}_subscribe(l){const We=super._subscribe(l);return!We.closed&&l.next(this._value),We}getValue(){const{hasError:l,thrownError:We,_value:Y}=this;if(l)throw We;return this._throwIfClosed(),Y}next(l){super.next(this._value=l)}}},1985:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{c:()=>qt});var V=_e(7707),re=_e(8359),ne=_e(3494),l=_e(1203),We=_e(1026),Y=_e(8071),ft=_e(9786);let qt=(()=>{class At{constructor(yt){yt&&(this._subscribe=yt)}lift(yt){const fn=new At;return fn.source=this,fn.operator=yt,fn}subscribe(yt,fn,xn){const rn=function C(At){return At&&At instanceof V.vU||function wt(At){return At&&(0,Y.T)(At.next)&&(0,Y.T)(At.error)&&(0,Y.T)(At.complete)}(At)&&(0,re.Uv)(At)}(yt)?yt:new V.Ms(yt,fn,xn);return(0,ft.Y)(()=>{const{operator:ht,source:ei}=this;rn.add(ht?ht.call(rn,ei):ei?this._subscribe(rn):this._trySubscribe(rn))}),rn}_trySubscribe(yt){try{return this._subscribe(yt)}catch(fn){yt.error(fn)}}forEach(yt,fn){return new(fn=jt(fn))((xn,rn)=>{const ht=new V.Ms({next:ei=>{try{yt(ei)}catch(Mn){rn(Mn),ht.unsubscribe()}},error:rn,complete:xn});this.subscribe(ht)})}_subscribe(yt){var fn;return null===(fn=this.source)||void 0===fn?void 0:fn.subscribe(yt)}[ne.s](){return this}pipe(...yt){return(0,l.m)(yt)(this)}toPromise(yt){return new(yt=jt(yt))((fn,xn)=>{let rn;this.subscribe(ht=>rn=ht,ht=>xn(ht),()=>fn(rn))})}}return At.create=Ut=>new At(Ut),At})();function jt(At){var Ut;return null!==(Ut=null!=At?At:We.$.Promise)&&void 0!==Ut?Ut:Promise}},1413:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{B:()=>ft});var V=_e(1985),re=_e(8359);const l=(0,_e(1853).L)(jt=>function(){jt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=_e(7908),Y=_e(9786);let ft=(()=>{class jt extends V.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(C){const At=new qt(this,this);return At.operator=C,At}_throwIfClosed(){if(this.closed)throw new l}next(C){(0,Y.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const At of this.currentObservers)At.next(C)}})}error(C){(0,Y.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=C;const{observers:At}=this;for(;At.length;)At.shift().error(C)}})}complete(){(0,Y.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:C}=this;for(;C.length;)C.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var C;return(null===(C=this.observers)||void 0===C?void 0:C.length)>0}_trySubscribe(C){return this._throwIfClosed(),super._trySubscribe(C)}_subscribe(C){return this._throwIfClosed(),this._checkFinalizedStatuses(C),this._innerSubscribe(C)}_innerSubscribe(C){const{hasError:At,isStopped:Ut,observers:yt}=this;return At||Ut?re.Kn:(this.currentObservers=null,yt.push(C),new re.yU(()=>{this.currentObservers=null,(0,We.o)(yt,C)}))}_checkFinalizedStatuses(C){const{hasError:At,thrownError:Ut,isStopped:yt}=this;At?C.error(Ut):yt&&C.complete()}asObservable(){const C=new V.c;return C.source=this,C}}return jt.create=(wt,C)=>new qt(wt,C),jt})();class qt extends ft{constructor(wt,C){super(),this.destination=wt,this.source=C}next(wt){var C,At;null===(At=null===(C=this.destination)||void 0===C?void 0:C.next)||void 0===At||At.call(C,wt)}error(wt){var C,At;null===(At=null===(C=this.destination)||void 0===C?void 0:C.error)||void 0===At||At.call(C,wt)}complete(){var wt,C;null===(C=null===(wt=this.destination)||void 0===wt?void 0:wt.complete)||void 0===C||C.call(wt)}_subscribe(wt){var C,At;return null!==(At=null===(C=this.source)||void 0===C?void 0:C.subscribe(wt))&&void 0!==At?At:re.Kn}}},7707:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Ms:()=>xn,vU:()=>At});var V=_e(8071),re=_e(8359),ne=_e(1026),l=_e(5334),We=_e(5343);const Y=jt("C",void 0,void 0);function jt(Zn,xt,Ot){return{kind:Zn,value:xt,error:Ot}}var wt=_e(9270),C=_e(9786);class At extends re.yU{constructor(xt){super(),this.isStopped=!1,xt?(this.destination=xt,(0,re.Uv)(xt)&&xt.add(this)):this.destination=Mn}static create(xt,Ot,wn){return new xn(xt,Ot,wn)}next(xt){this.isStopped?ei(function qt(Zn){return jt("N",Zn,void 0)}(xt),this):this._next(xt)}error(xt){this.isStopped?ei(function ft(Zn){return jt("E",void 0,Zn)}(xt),this):(this.isStopped=!0,this._error(xt))}complete(){this.isStopped?ei(Y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xt){this.destination.next(xt)}_error(xt){try{this.destination.error(xt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ut=Function.prototype.bind;function yt(Zn,xt){return Ut.call(Zn,xt)}class fn{constructor(xt){this.partialObserver=xt}next(xt){const{partialObserver:Ot}=this;if(Ot.next)try{Ot.next(xt)}catch(wn){rn(wn)}}error(xt){const{partialObserver:Ot}=this;if(Ot.error)try{Ot.error(xt)}catch(wn){rn(wn)}else rn(xt)}complete(){const{partialObserver:xt}=this;if(xt.complete)try{xt.complete()}catch(Ot){rn(Ot)}}}class xn extends At{constructor(xt,Ot,wn){let Pn;if(super(),(0,V.T)(xt)||!xt)Pn={next:null!=xt?xt:void 0,error:null!=Ot?Ot:void 0,complete:null!=wn?wn:void 0};else{let Ii;this&&ne.$.useDeprecatedNextContext?(Ii=Object.create(xt),Ii.unsubscribe=()=>this.unsubscribe(),Pn={next:xt.next&&yt(xt.next,Ii),error:xt.error&&yt(xt.error,Ii),complete:xt.complete&&yt(xt.complete,Ii)}):Pn=xt}this.destination=new fn(Pn)}}function rn(Zn){ne.$.useDeprecatedSynchronousErrorHandling?(0,C.l)(Zn):(0,l.m)(Zn)}function ei(Zn,xt){const{onStoppedNotification:Ot}=ne.$;Ot&&wt.f.setTimeout(()=>Ot(Zn,xt))}const Mn={closed:!0,next:We.l,error:function ht(Zn){throw Zn},complete:We.l}},8359:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Kn:()=>Y,yU:()=>We,Uv:()=>ft});var V=_e(8071);const ne=(0,_e(1853).L)(jt=>function(C){jt(this),this.message=C?`${C.length} errors occurred during unsubscription:\n${C.map((At,Ut)=>`${Ut+1}) ${At.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=C});var l=_e(7908);class We{constructor(wt){this.initialTeardown=wt,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let wt;if(!this.closed){this.closed=!0;const{_parentage:C}=this;if(C)if(this._parentage=null,Array.isArray(C))for(const yt of C)yt.remove(this);else C.remove(this);const{initialTeardown:At}=this;if((0,V.T)(At))try{At()}catch(yt){wt=yt instanceof ne?yt.errors:[yt]}const{_finalizers:Ut}=this;if(Ut){this._finalizers=null;for(const yt of Ut)try{qt(yt)}catch(fn){wt=null!=wt?wt:[],fn instanceof ne?wt=[...wt,...fn.errors]:wt.push(fn)}}if(wt)throw new ne(wt)}}add(wt){var C;if(wt&&wt!==this)if(this.closed)qt(wt);else{if(wt instanceof We){if(wt.closed||wt._hasParent(this))return;wt._addParent(this)}(this._finalizers=null!==(C=this._finalizers)&&void 0!==C?C:[]).push(wt)}}_hasParent(wt){const{_parentage:C}=this;return C===wt||Array.isArray(C)&&C.includes(wt)}_addParent(wt){const{_parentage:C}=this;this._parentage=Array.isArray(C)?(C.push(wt),C):C?[C,wt]:wt}_removeParent(wt){const{_parentage:C}=this;C===wt?this._parentage=null:Array.isArray(C)&&(0,l.o)(C,wt)}remove(wt){const{_finalizers:C}=this;C&&(0,l.o)(C,wt),wt instanceof We&&wt._removeParent(this)}}We.EMPTY=(()=>{const jt=new We;return jt.closed=!0,jt})();const Y=We.EMPTY;function ft(jt){return jt instanceof We||jt&&"closed"in jt&&(0,V.T)(jt.remove)&&(0,V.T)(jt.add)&&(0,V.T)(jt.unsubscribe)}function qt(jt){(0,V.T)(jt)?jt():jt.unsubscribe()}},1026:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{$:()=>V});const V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},17:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{G:()=>Y});var V=_e(1985),re=_e(8359),ne=_e(9898),l=_e(4360),We=_e(9974);class Y extends V.c{constructor(qt,jt){super(),this.source=qt,this.subjectFactory=jt,this._subject=null,this._refCount=0,this._connection=null,(0,We.S)(qt)&&(this.lift=qt.lift)}_subscribe(qt){return this.getSubject().subscribe(qt)}getSubject(){const qt=this._subject;return(!qt||qt.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:qt}=this;this._subject=this._connection=null,null==qt||qt.unsubscribe()}connect(){let qt=this._connection;if(!qt){qt=this._connection=new re.yU;const jt=this.getSubject();qt.add(this.source.subscribe((0,l._)(jt,void 0,()=>{this._teardown(),jt.complete()},wt=>{this._teardown(),jt.error(wt)},()=>this._teardown()))),qt.closed&&(this._connection=null,qt=re.yU.EMPTY)}return qt}refCount(){return(0,ne.B)()(this)}}},4572:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{z:()=>wt});var V=_e(1985),re=_e(3073),ne=_e(8455),l=_e(3669),We=_e(6450),Y=_e(9326),ft=_e(8496),qt=_e(4360),jt=_e(5225);function wt(...Ut){const yt=(0,Y.lI)(Ut),fn=(0,Y.ms)(Ut),{args:xn,keys:rn}=(0,re.D)(Ut);if(0===xn.length)return(0,ne.H)([],yt);const ht=new V.c(function C(Ut,yt,fn=l.D){return xn=>{At(yt,()=>{const{length:rn}=Ut,ht=new Array(rn);let ei=rn,Mn=rn;for(let Zn=0;Zn<rn;Zn++)At(yt,()=>{const xt=(0,ne.H)(Ut[Zn],yt);let Ot=!1;xt.subscribe((0,qt._)(xn,wn=>{ht[Zn]=wn,Ot||(Ot=!0,Mn--),Mn||xn.next(fn(ht.slice()))},()=>{--ei||xn.complete()}))},xn)},xn)}}(xn,yt,rn?ei=>(0,ft.e)(rn,ei):l.D));return fn?ht.pipe((0,We.I)(fn)):ht}function At(Ut,yt,fn){Ut?(0,jt.N)(fn,Ut,yt):yt()}},8793:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{x:()=>We});var V=_e(6365),ne=_e(9326),l=_e(8455);function We(...Y){return function re(){return(0,V.U)(1)}()((0,l.H)(Y,(0,ne.lI)(Y)))}},9030:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{v:()=>ne});var V=_e(1985),re=_e(8750);function ne(l){return new V.c(We=>{(0,re.Tg)(l()).subscribe(We)})}},983:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{w:()=>re});const re=new(_e(1985).c)(We=>We.complete())},8455:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{H:()=>xt});var V=_e(8750),re=_e(941),ne=_e(6745),Y=_e(1985),qt=_e(4761),jt=_e(8071),wt=_e(5225);function At(Ot,wn){if(!Ot)throw new Error("Iterable cannot be null");return new Y.c(Pn=>{(0,wt.N)(Pn,wn,()=>{const Ii=Ot[Symbol.asyncIterator]();(0,wt.N)(Pn,wn,()=>{Ii.next().then(Et=>{Et.done?Pn.complete():Pn.next(Et.value)})},0,!0)})})}var Ut=_e(5055),yt=_e(9858),fn=_e(7441),xn=_e(5397),rn=_e(7953),ht=_e(591),ei=_e(5196);function xt(Ot,wn){return wn?function Zn(Ot,wn){if(null!=Ot){if((0,Ut.l)(Ot))return function l(Ot,wn){return(0,V.Tg)(Ot).pipe((0,ne._)(wn),(0,re.Q)(wn))}(Ot,wn);if((0,fn.X)(Ot))return function ft(Ot,wn){return new Y.c(Pn=>{let Ii=0;return wn.schedule(function(){Ii===Ot.length?Pn.complete():(Pn.next(Ot[Ii++]),Pn.closed||this.schedule())})})}(Ot,wn);if((0,yt.y)(Ot))return function We(Ot,wn){return(0,V.Tg)(Ot).pipe((0,ne._)(wn),(0,re.Q)(wn))}(Ot,wn);if((0,rn.T)(Ot))return At(Ot,wn);if((0,xn.x)(Ot))return function C(Ot,wn){return new Y.c(Pn=>{let Ii;return(0,wt.N)(Pn,wn,()=>{Ii=Ot[qt.l](),(0,wt.N)(Pn,wn,()=>{let Et,kn;try{({value:Et,done:kn}=Ii.next())}catch(Te){return void Pn.error(Te)}kn?Pn.complete():Pn.next(Et)},0,!0)}),()=>(0,jt.T)(null==Ii?void 0:Ii.return)&&Ii.return()})}(Ot,wn);if((0,ei.U)(Ot))return function Mn(Ot,wn){return At((0,ei.C)(Ot),wn)}(Ot,wn)}throw(0,ht.L)(Ot)}(Ot,wn):(0,V.Tg)(Ot)}},3726:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{R:()=>wt});var V=_e(8750),re=_e(1985),ne=_e(1397),l=_e(7441),We=_e(8071),Y=_e(6450);const ft=["addListener","removeListener"],qt=["addEventListener","removeEventListener"],jt=["on","off"];function wt(fn,xn,rn,ht){if((0,We.T)(rn)&&(ht=rn,rn=void 0),ht)return wt(fn,xn,rn).pipe((0,Y.I)(ht));const[ei,Mn]=function yt(fn){return(0,We.T)(fn.addEventListener)&&(0,We.T)(fn.removeEventListener)}(fn)?qt.map(Zn=>xt=>fn[Zn](xn,xt,rn)):function At(fn){return(0,We.T)(fn.addListener)&&(0,We.T)(fn.removeListener)}(fn)?ft.map(C(fn,xn)):function Ut(fn){return(0,We.T)(fn.on)&&(0,We.T)(fn.off)}(fn)?jt.map(C(fn,xn)):[];if(!ei&&(0,l.X)(fn))return(0,ne.Z)(Zn=>wt(Zn,xn,rn))((0,V.Tg)(fn));if(!ei)throw new TypeError("Invalid event target");return new re.c(Zn=>{const xt=(...Ot)=>Zn.next(1<Ot.length?Ot:Ot[0]);return ei(xt),()=>Mn(xt)})}function C(fn,xn){return rn=>ht=>fn[rn](xn,ht)}},8750:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Tg:()=>Ut});var V=_e(1635),re=_e(7441),ne=_e(9858),l=_e(1985),We=_e(5055),Y=_e(7953),ft=_e(591),qt=_e(5397),jt=_e(5196),wt=_e(8071),C=_e(5334),At=_e(3494);function Ut(Zn){if(Zn instanceof l.c)return Zn;if(null!=Zn){if((0,We.l)(Zn))return function yt(Zn){return new l.c(xt=>{const Ot=Zn[At.s]();if((0,wt.T)(Ot.subscribe))return Ot.subscribe(xt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Zn);if((0,re.X)(Zn))return function fn(Zn){return new l.c(xt=>{for(let Ot=0;Ot<Zn.length&&!xt.closed;Ot++)xt.next(Zn[Ot]);xt.complete()})}(Zn);if((0,ne.y)(Zn))return function xn(Zn){return new l.c(xt=>{Zn.then(Ot=>{xt.closed||(xt.next(Ot),xt.complete())},Ot=>xt.error(Ot)).then(null,C.m)})}(Zn);if((0,Y.T)(Zn))return ht(Zn);if((0,qt.x)(Zn))return function rn(Zn){return new l.c(xt=>{for(const Ot of Zn)if(xt.next(Ot),xt.closed)return;xt.complete()})}(Zn);if((0,jt.U)(Zn))return function ei(Zn){return ht((0,jt.C)(Zn))}(Zn)}throw(0,ft.L)(Zn)}function ht(Zn){return new l.c(xt=>{(function Mn(Zn,xt){var Ot,wn,Pn,Ii;return(0,V.sH)(this,void 0,void 0,function*(){try{for(Ot=(0,V.xN)(Zn);!(wn=yield Ot.next()).done;)if(xt.next(wn.value),xt.closed)return}catch(Et){Pn={error:Et}}finally{try{wn&&!wn.done&&(Ii=Ot.return)&&(yield Ii.call(Ot))}finally{if(Pn)throw Pn.error}}xt.complete()})})(Zn,xt).catch(Ot=>xt.error(Ot))})}},7673:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{of:()=>ne});var V=_e(9326),re=_e(8455);function ne(...l){const We=(0,V.lI)(l);return(0,re.H)(l,We)}},8810:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{$:()=>ne});var V=_e(1985),re=_e(8071);function ne(l,We){const Y=(0,re.T)(l)?l:()=>l,ft=qt=>qt.error(Y());return new V.c(We?qt=>We.schedule(ft,0,qt):ft)}},4360:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{_:()=>re});var V=_e(7707);function re(l,We,Y,ft,qt){return new ne(l,We,Y,ft,qt)}class ne extends V.vU{constructor(We,Y,ft,qt,jt,wt){super(We),this.onFinalize=jt,this.shouldUnsubscribe=wt,this._next=Y?function(C){try{Y(C)}catch(At){We.error(At)}}:super._next,this._error=qt?function(C){try{qt(C)}catch(At){We.error(At)}finally{this.unsubscribe()}}:super._error,this._complete=ft?function(){try{ft()}catch(C){We.error(C)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var We;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Y}=this;super.unsubscribe(),!Y&&(null===(We=this.onFinalize)||void 0===We||We.call(this))}}}},274:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{H:()=>ne});var V=_e(1397),re=_e(8071);function ne(l,We){return(0,re.T)(We)?(0,V.Z)(l,We,1):(0,V.Z)(l,1)}},5964:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{p:()=>ne});var V=_e(9974),re=_e(4360);function ne(l,We){return(0,V.N)((Y,ft)=>{let qt=0;Y.subscribe((0,re._)(ft,jt=>l.call(We,jt,qt++)&&ft.next(jt)))})}},980:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{j:()=>re});var V=_e(9974);function re(ne){return(0,V.N)((l,We)=>{try{l.subscribe(We)}finally{We.add(ne)}})}},6354:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{T:()=>ne});var V=_e(9974),re=_e(4360);function ne(l,We){return(0,V.N)((Y,ft)=>{let qt=0;Y.subscribe((0,re._)(ft,jt=>{ft.next(l.call(We,jt,qt++))}))})}},3703:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{u:()=>re});var V=_e(6354);function re(ne){return(0,V.T)(()=>ne)}},6365:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{U:()=>ne});var V=_e(1397),re=_e(3669);function ne(l=1/0){return(0,V.Z)(re.D,l)}},1397:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Z:()=>qt});var V=_e(6354),re=_e(8750),ne=_e(9974),l=_e(5225),We=_e(4360),ft=_e(8071);function qt(jt,wt,C=1/0){return(0,ft.T)(wt)?qt((At,Ut)=>(0,V.T)((yt,fn)=>wt(At,yt,Ut,fn))((0,re.Tg)(jt(At,Ut))),C):("number"==typeof wt&&(C=wt),(0,ne.N)((At,Ut)=>function Y(jt,wt,C,At,Ut,yt,fn,xn){const rn=[];let ht=0,ei=0,Mn=!1;const Zn=()=>{Mn&&!rn.length&&!ht&&wt.complete()},xt=wn=>ht<At?Ot(wn):rn.push(wn),Ot=wn=>{yt&&wt.next(wn),ht++;let Pn=!1;(0,re.Tg)(C(wn,ei++)).subscribe((0,We._)(wt,Ii=>{null==Ut||Ut(Ii),yt?xt(Ii):wt.next(Ii)},()=>{Pn=!0},void 0,()=>{if(Pn)try{for(ht--;rn.length&&ht<At;){const Ii=rn.shift();fn?(0,l.N)(wt,fn,()=>Ot(Ii)):Ot(Ii)}Zn()}catch(Ii){wt.error(Ii)}}))};return jt.subscribe((0,We._)(wt,xt,()=>{Mn=!0,Zn()})),()=>{null==xn||xn()}}(At,Ut,jt,C)))}},941:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Q:()=>l});var V=_e(5225),re=_e(9974),ne=_e(4360);function l(We,Y=0){return(0,re.N)((ft,qt)=>{ft.subscribe((0,ne._)(qt,jt=>(0,V.N)(qt,We,()=>qt.next(jt),Y),()=>(0,V.N)(qt,We,()=>qt.complete(),Y),jt=>(0,V.N)(qt,We,()=>qt.error(jt),Y)))})}},9898:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{B:()=>ne});var V=_e(9974),re=_e(4360);function ne(){return(0,V.N)((l,We)=>{let Y=null;l._refCount++;const ft=(0,re._)(We,void 0,void 0,void 0,()=>{if(!l||l._refCount<=0||0<--l._refCount)return void(Y=null);const qt=l._connection,jt=Y;Y=null,qt&&(!jt||qt===jt)&&qt.unsubscribe(),We.unsubscribe()});l.subscribe(ft),ft.closed||(Y=l.connect())})}},6745:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{_:()=>re});var V=_e(9974);function re(ne,l=0){return(0,V.N)((We,Y)=>{Y.add(ne.schedule(()=>We.subscribe(Y),l))})}},5558:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{n:()=>l});var V=_e(8750),re=_e(9974),ne=_e(4360);function l(We,Y){return(0,re.N)((ft,qt)=>{let jt=null,wt=0,C=!1;const At=()=>C&&!jt&&qt.complete();ft.subscribe((0,ne._)(qt,Ut=>{null==jt||jt.unsubscribe();let yt=0;const fn=wt++;(0,V.Tg)(We(Ut,fn)).subscribe(jt=(0,ne._)(qt,xn=>qt.next(Y?Y(Ut,xn,fn,yt++):xn),()=>{jt=null,At()}))},()=>{C=!0,At()}))})}},6697:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{s:()=>l});var V=_e(983),re=_e(9974),ne=_e(4360);function l(We){return We<=0?()=>V.w:(0,re.N)((Y,ft)=>{let qt=0;Y.subscribe((0,ne._)(ft,jt=>{++qt<=We&&(ft.next(jt),We<=qt&&ft.complete())}))})}},6977:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Q:()=>We});var V=_e(9974),re=_e(4360),ne=_e(8750),l=_e(5343);function We(Y){return(0,V.N)((ft,qt)=>{(0,ne.Tg)(Y).subscribe((0,re._)(qt,()=>qt.complete(),l.l)),!qt.closed&&ft.subscribe(qt)})}},8141:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{M:()=>We});var V=_e(8071),re=_e(9974),ne=_e(4360),l=_e(3669);function We(Y,ft,qt){const jt=(0,V.T)(Y)||ft||qt?{next:Y,error:ft,complete:qt}:Y;return jt?(0,re.N)((wt,C)=>{var At;null===(At=jt.subscribe)||void 0===At||At.call(jt);let Ut=!0;wt.subscribe((0,ne._)(C,yt=>{var fn;null===(fn=jt.next)||void 0===fn||fn.call(jt,yt),C.next(yt)},()=>{var yt;Ut=!1,null===(yt=jt.complete)||void 0===yt||yt.call(jt),C.complete()},yt=>{var fn;Ut=!1,null===(fn=jt.error)||void 0===fn||fn.call(jt,yt),C.error(yt)},()=>{var yt,fn;Ut&&(null===(yt=jt.unsubscribe)||void 0===yt||yt.call(jt)),null===(fn=jt.finalize)||void 0===fn||fn.call(jt)}))}):l.D}},6780:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{R:()=>We});var V=_e(8359);class re extends V.yU{constructor(ft,qt){super()}schedule(ft,qt=0){return this}}const ne={setInterval(Y,ft,...qt){const{delegate:jt}=ne;return null!=jt&&jt.setInterval?jt.setInterval(Y,ft,...qt):setInterval(Y,ft,...qt)},clearInterval(Y){const{delegate:ft}=ne;return((null==ft?void 0:ft.clearInterval)||clearInterval)(Y)},delegate:void 0};var l=_e(7908);class We extends re{constructor(ft,qt){super(ft,qt),this.scheduler=ft,this.work=qt,this.pending=!1}schedule(ft,qt=0){var jt;if(this.closed)return this;this.state=ft;const wt=this.id,C=this.scheduler;return null!=wt&&(this.id=this.recycleAsyncId(C,wt,qt)),this.pending=!0,this.delay=qt,this.id=null!==(jt=this.id)&&void 0!==jt?jt:this.requestAsyncId(C,this.id,qt),this}requestAsyncId(ft,qt,jt=0){return ne.setInterval(ft.flush.bind(ft,this),jt)}recycleAsyncId(ft,qt,jt=0){if(null!=jt&&this.delay===jt&&!1===this.pending)return qt;null!=qt&&ne.clearInterval(qt)}execute(ft,qt){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const jt=this._execute(ft,qt);if(jt)return jt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ft,qt){let wt,jt=!1;try{this.work(ft)}catch(C){jt=!0,wt=C||new Error("Scheduled action threw falsy error")}if(jt)return this.unsubscribe(),wt}unsubscribe(){if(!this.closed){const{id:ft,scheduler:qt}=this,{actions:jt}=qt;this.work=this.state=this.scheduler=null,this.pending=!1,(0,l.o)(jt,this),null!=ft&&(this.id=this.recycleAsyncId(qt,ft,null)),this.delay=null,super.unsubscribe()}}}},3604:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{q:()=>ne});const V={now:()=>(V.delegate||Date).now(),delegate:void 0};class re{constructor(We,Y=re.now){this.schedulerActionCtor=We,this.now=Y}schedule(We,Y=0,ft){return new this.schedulerActionCtor(this,We).schedule(ft,Y)}}re.now=V.now;class ne extends re{constructor(We,Y=re.now){super(We,Y),this.actions=[],this._active=!1}flush(We){const{actions:Y}=this;if(this._active)return void Y.push(We);let ft;this._active=!0;do{if(ft=We.execute(We.state,We.delay))break}while(We=Y.shift());if(this._active=!1,ft){for(;We=Y.shift();)We.unsubscribe();throw ft}}}},3236:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{E:()=>ne,b:()=>l});var V=_e(6780);const ne=new(_e(3604).q)(V.R),l=ne},9270:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{f:()=>V});const V={setTimeout(re,ne,...l){const{delegate:We}=V;return null!=We&&We.setTimeout?We.setTimeout(re,ne,...l):setTimeout(re,ne,...l)},clearTimeout(re){const{delegate:ne}=V;return((null==ne?void 0:ne.clearTimeout)||clearTimeout)(re)},delegate:void 0}},4761:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{l:()=>re});const re=function V(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{s:()=>V});const V="function"==typeof Symbol&&Symbol.observable||"@@observable"},9326:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{R0:()=>Y,lI:()=>We,ms:()=>l});var V=_e(8071),re=_e(9470);function ne(ft){return ft[ft.length-1]}function l(ft){return(0,V.T)(ne(ft))?ft.pop():void 0}function We(ft){return(0,re.m)(ne(ft))?ft.pop():void 0}function Y(ft,qt){return"number"==typeof ne(ft)?ft.pop():qt}},3073:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{D:()=>We});const{isArray:V}=Array,{getPrototypeOf:re,prototype:ne,keys:l}=Object;function We(ft){if(1===ft.length){const qt=ft[0];if(V(qt))return{args:qt,keys:null};if(function Y(ft){return ft&&"object"==typeof ft&&re(ft)===ne}(qt)){const jt=l(qt);return{args:jt.map(wt=>qt[wt]),keys:jt}}}return{args:ft,keys:null}}},7908:(Yo,Xn,_e)=>{"use strict";function V(re,ne){if(re){const l=re.indexOf(ne);0<=l&&re.splice(l,1)}}_e.d(Xn,{o:()=>V})},1853:(Yo,Xn,_e)=>{"use strict";function V(re){const l=re(We=>{Error.call(We),We.stack=(new Error).stack});return l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l}_e.d(Xn,{L:()=>V})},8496:(Yo,Xn,_e)=>{"use strict";function V(re,ne){return re.reduce((l,We,Y)=>(l[We]=ne[Y],l),{})}_e.d(Xn,{e:()=>V})},9786:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Y:()=>ne,l:()=>l});var V=_e(1026);let re=null;function ne(We){if(V.$.useDeprecatedSynchronousErrorHandling){const Y=!re;if(Y&&(re={errorThrown:!1,error:null}),We(),Y){const{errorThrown:ft,error:qt}=re;if(re=null,ft)throw qt}}else We()}function l(We){V.$.useDeprecatedSynchronousErrorHandling&&re&&(re.errorThrown=!0,re.error=We)}},5225:(Yo,Xn,_e)=>{"use strict";function V(re,ne,l,We=0,Y=!1){const ft=ne.schedule(function(){l(),Y?re.add(this.schedule(null,We)):this.unsubscribe()},We);if(re.add(ft),!Y)return ft}_e.d(Xn,{N:()=>V})},3669:(Yo,Xn,_e)=>{"use strict";function V(re){return re}_e.d(Xn,{D:()=>V})},7441:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{X:()=>V});const V=re=>re&&"number"==typeof re.length&&"function"!=typeof re},7953:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{T:()=>re});var V=_e(8071);function re(ne){return Symbol.asyncIterator&&(0,V.T)(null==ne?void 0:ne[Symbol.asyncIterator])}},8071:(Yo,Xn,_e)=>{"use strict";function V(re){return"function"==typeof re}_e.d(Xn,{T:()=>V})},5055:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{l:()=>ne});var V=_e(3494),re=_e(8071);function ne(l){return(0,re.T)(l[V.s])}},5397:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{x:()=>ne});var V=_e(4761),re=_e(8071);function ne(l){return(0,re.T)(null==l?void 0:l[V.l])}},9858:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{y:()=>re});var V=_e(8071);function re(ne){return(0,V.T)(null==ne?void 0:ne.then)}},5196:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{C:()=>ne,U:()=>l});var V=_e(1635),re=_e(8071);function ne(We){return(0,V.AQ)(this,arguments,function*(){const ft=We.getReader();try{for(;;){const{value:qt,done:jt}=yield(0,V.N3)(ft.read());if(jt)return yield(0,V.N3)(void 0);yield yield(0,V.N3)(qt)}}finally{ft.releaseLock()}})}function l(We){return(0,re.T)(null==We?void 0:We.getReader)}},9470:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{m:()=>re});var V=_e(8071);function re(ne){return ne&&(0,V.T)(ne.schedule)}},9974:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{N:()=>ne,S:()=>re});var V=_e(8071);function re(l){return(0,V.T)(null==l?void 0:l.lift)}function ne(l){return We=>{if(re(We))return We.lift(function(Y){try{return l(Y,this)}catch(ft){this.error(ft)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{I:()=>l});var V=_e(6354);const{isArray:re}=Array;function l(We){return(0,V.T)(Y=>function ne(We,Y){return re(Y)?We(...Y):We(Y)}(We,Y))}},5343:(Yo,Xn,_e)=>{"use strict";function V(){}_e.d(Xn,{l:()=>V})},1203:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{F:()=>re,m:()=>ne});var V=_e(3669);function re(...l){return ne(l)}function ne(l){return 0===l.length?V.D:1===l.length?l[0]:function(Y){return l.reduce((ft,qt)=>qt(ft),Y)}}},5334:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{m:()=>ne});var V=_e(1026),re=_e(9270);function ne(l){re.f.setTimeout(()=>{const{onUnhandledError:We}=V.$;if(!We)throw l;We(l)})}},591:(Yo,Xn,_e)=>{"use strict";function V(re){return new TypeError(`You provided ${null!==re&&"object"==typeof re?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}_e.d(Xn,{L:()=>V})},8996:(Yo,Xn,_e)=>{var V={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,1293,7428],"./ion-datetime_3.entry.js":[2885,1293,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function re(ne){if(!_e.o(V,ne))return Promise.resolve().then(()=>{var Y=new Error("Cannot find module '"+ne+"'");throw Y.code="MODULE_NOT_FOUND",Y});var l=V[ne],We=l[0];return Promise.all(l.slice(1).map(_e.e)).then(()=>_e(We))}re.keys=()=>Object.keys(V),re.id=8996,Yo.exports=re},5235:(Yo,Xn,_e)=>{var V={"./pwa-action-sheet.entry.js":[6301,6301],"./pwa-camera-modal-instance.entry.js":[5640,5640],"./pwa-camera-modal.entry.js":[2982,2982],"./pwa-camera.entry.js":[6086,6086],"./pwa-toast.entry.js":[3574,3574]};function re(ne){if(!_e.o(V,ne))return Promise.resolve().then(()=>{var Y=new Error("Cannot find module '"+ne+"'");throw Y.code="MODULE_NOT_FOUND",Y});var l=V[ne],We=l[0];return _e.e(l[1]).then(()=>_e(We))}re.keys=()=>Object.keys(V),re.id=5235,Yo.exports=re},4140:Yo=>{function Xn(_e){return Promise.resolve().then(()=>{var V=new Error("Cannot find module '"+_e+"'");throw V.code="MODULE_NOT_FOUND",V})}Xn.keys=()=>[],Xn.resolve=Xn,Xn.id=4140,Yo.exports=Xn},177:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{AJ:()=>li,MD:()=>On,N0:()=>Cs,QT:()=>ne,Sq:()=>Pa,T3:()=>su,UE:()=>Eo,VF:()=>We,Vy:()=>so,ZD:()=>l,_b:()=>Kt,aZ:()=>ht,bT:()=>Oa,hb:()=>yt,qQ:()=>ft,vh:()=>Ia});var V=_e(3953);let re=null;function ne(){return re}function l(fe){var Ce;null!==(Ce=re)&&void 0!==Ce||(re=fe)}class We{}const ft=new V.nKC("");let qt=(()=>{var fe;class Ce{historyGo(Ie){throw new Error("")}}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)},fe.\u0275prov=V.jDH({token:fe,factory:()=>(0,V.WQX)(wt),providedIn:"platform"}),Ce})(),wt=(()=>{var fe;class Ce extends qt{constructor(){super(),this._doc=(0,V.WQX)(ft),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ne().getBaseHref(this._doc)}onPopState(Ie){const Gt=ne().getGlobalEventTarget(this._doc,"window");return Gt.addEventListener("popstate",Ie,!1),()=>Gt.removeEventListener("popstate",Ie)}onHashChange(Ie){const Gt=ne().getGlobalEventTarget(this._doc,"window");return Gt.addEventListener("hashchange",Ie,!1),()=>Gt.removeEventListener("hashchange",Ie)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(Ie){this._location.pathname=Ie}pushState(Ie,Gt,Dn){this._history.pushState(Ie,Gt,Dn)}replaceState(Ie,Gt,Dn){this._history.replaceState(Ie,Gt,Dn)}forward(){this._history.forward()}back(){this._history.back()}historyGo(Ie=0){this._history.go(Ie)}getState(){return this._history.state}}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)},fe.\u0275prov=V.jDH({token:fe,factory:()=>new fe,providedIn:"platform"}),Ce})();function C(fe,Ce){if(0==fe.length)return Ce;if(0==Ce.length)return fe;let Nt=0;return fe.endsWith("/")&&Nt++,Ce.startsWith("/")&&Nt++,2==Nt?fe+Ce.substring(1):1==Nt?fe+Ce:fe+"/"+Ce}function At(fe){const Ce=fe.match(/#|\?|$/),Nt=Ce&&Ce.index||fe.length;return fe.slice(0,Nt-("/"===fe[Nt-1]?1:0))+fe.slice(Nt)}function Ut(fe){return fe&&"?"!==fe[0]?"?"+fe:fe}let yt=(()=>{var fe;class Ce{historyGo(Ie){throw new Error("")}}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)},fe.\u0275prov=V.jDH({token:fe,factory:()=>(0,V.WQX)(xn),providedIn:"root"}),Ce})();const fn=new V.nKC("");let xn=(()=>{var fe;class Ce extends yt{constructor(Ie,Gt){var Dn,pi,ir;super(),this._platformLocation=Ie,this._removeListenerFns=[],this._baseHref=null!==(Dn=null!==(pi=null!=Gt?Gt:this._platformLocation.getBaseHrefFromDOM())&&void 0!==pi?pi:null===(ir=(0,V.WQX)(ft).location)||void 0===ir?void 0:ir.origin)&&void 0!==Dn?Dn:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ie){this._removeListenerFns.push(this._platformLocation.onPopState(Ie),this._platformLocation.onHashChange(Ie))}getBaseHref(){return this._baseHref}prepareExternalUrl(Ie){return C(this._baseHref,Ie)}path(Ie=!1){const Gt=this._platformLocation.pathname+Ut(this._platformLocation.search),Dn=this._platformLocation.hash;return Dn&&Ie?`${Gt}${Dn}`:Gt}pushState(Ie,Gt,Dn,pi){const ir=this.prepareExternalUrl(Dn+Ut(pi));this._platformLocation.pushState(Ie,Gt,ir)}replaceState(Ie,Gt,Dn,pi){const ir=this.prepareExternalUrl(Dn+Ut(pi));this._platformLocation.replaceState(Ie,Gt,ir)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Ie=0){var Gt,Dn;null===(Gt=(Dn=this._platformLocation).historyGo)||void 0===Gt||Gt.call(Dn,Ie)}}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)(V.KVO(qt),V.KVO(fn,8))},fe.\u0275prov=V.jDH({token:fe,factory:fe.\u0275fac,providedIn:"root"}),Ce})(),ht=(()=>{var fe;class Ce{constructor(Ie){this._subject=new V.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=Ie;const Gt=this._locationStrategy.getBaseHref();this._basePath=function xt(fe){if(new RegExp("^(https?:)?//").test(fe)){const[,Nt]=fe.split(/\/\/[^\/]+/);return Nt}return fe}(At(Zn(Gt))),this._locationStrategy.onPopState(Dn=>{this._subject.emit({url:this.path(!0),pop:!0,state:Dn.state,type:Dn.type})})}ngOnDestroy(){var Ie;null===(Ie=this._urlChangeSubscription)||void 0===Ie||Ie.unsubscribe(),this._urlChangeListeners=[]}path(Ie=!1){return this.normalize(this._locationStrategy.path(Ie))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(Ie,Gt=""){return this.path()==this.normalize(Ie+Ut(Gt))}normalize(Ie){return Ce.stripTrailingSlash(function Mn(fe,Ce){if(!fe||!Ce.startsWith(fe))return Ce;const Nt=Ce.substring(fe.length);return""===Nt||["/",";","?","#"].includes(Nt[0])?Nt:Ce}(this._basePath,Zn(Ie)))}prepareExternalUrl(Ie){return Ie&&"/"!==Ie[0]&&(Ie="/"+Ie),this._locationStrategy.prepareExternalUrl(Ie)}go(Ie,Gt="",Dn=null){this._locationStrategy.pushState(Dn,"",Ie,Gt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ie+Ut(Gt)),Dn)}replaceState(Ie,Gt="",Dn=null){this._locationStrategy.replaceState(Dn,"",Ie,Gt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ie+Ut(Gt)),Dn)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(Ie=0){var Gt,Dn;null===(Gt=(Dn=this._locationStrategy).historyGo)||void 0===Gt||Gt.call(Dn,Ie)}onUrlChange(Ie){var Gt;return this._urlChangeListeners.push(Ie),null!==(Gt=this._urlChangeSubscription)&&void 0!==Gt||(this._urlChangeSubscription=this.subscribe(Dn=>{this._notifyUrlChangeListeners(Dn.url,Dn.state)})),()=>{const Dn=this._urlChangeListeners.indexOf(Ie);var pi;this._urlChangeListeners.splice(Dn,1),0===this._urlChangeListeners.length&&(null===(pi=this._urlChangeSubscription)||void 0===pi||pi.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(Ie="",Gt){this._urlChangeListeners.forEach(Dn=>Dn(Ie,Gt))}subscribe(Ie,Gt,Dn){return this._subject.subscribe({next:Ie,error:Gt,complete:Dn})}}return(fe=Ce).normalizeQueryParams=Ut,fe.joinWithSlash=C,fe.stripTrailingSlash=At,fe.\u0275fac=function(Ie){return new(Ie||fe)(V.KVO(yt))},fe.\u0275prov=V.jDH({token:fe,factory:()=>function ei(){return new ht((0,V.KVO)(yt))}(),providedIn:"root"}),Ce})();function Zn(fe){return fe.replace(/\/index.html$/,"")}var Ii=function(fe){return fe[fe.Format=0]="Format",fe[fe.Standalone=1]="Standalone",fe}(Ii||{}),Et=function(fe){return fe[fe.Narrow=0]="Narrow",fe[fe.Abbreviated=1]="Abbreviated",fe[fe.Wide=2]="Wide",fe[fe.Short=3]="Short",fe}(Et||{}),kn=function(fe){return fe[fe.Short=0]="Short",fe[fe.Medium=1]="Medium",fe[fe.Long=2]="Long",fe[fe.Full=3]="Full",fe}(kn||{});const Te={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function et(fe,Ce){return ji((0,V.H5H)(fe)[V.KH2.DateFormat],Ce)}function zt(fe,Ce){return ji((0,V.H5H)(fe)[V.KH2.TimeFormat],Ce)}function qn(fe,Ce){return ji((0,V.H5H)(fe)[V.KH2.DateTimeFormat],Ce)}function un(fe,Ce){const Nt=(0,V.H5H)(fe),Ie=Nt[V.KH2.NumberSymbols][Ce];if(typeof Ie>"u"){if(Ce===Te.CurrencyDecimal)return Nt[V.KH2.NumberSymbols][Te.Decimal];if(Ce===Te.CurrencyGroup)return Nt[V.KH2.NumberSymbols][Te.Group]}return Ie}function Ei(fe){if(!fe[V.KH2.ExtraData])throw new Error(`Missing extra locale data for the locale "${fe[V.KH2.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ji(fe,Ce){for(let Nt=Ce;Nt>-1;Nt--)if(typeof fe[Nt]<"u")return fe[Nt];throw new Error("Locale data API: locale data undefined")}function vi(fe){const[Ce,Nt]=fe.split(":");return{hours:+Ce,minutes:+Nt}}const po=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xi={},bs=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Br=function(fe){return fe[fe.Short=0]="Short",fe[fe.ShortGMT=1]="ShortGMT",fe[fe.Long=2]="Long",fe[fe.Extended=3]="Extended",fe}(Br||{}),So=function(fe){return fe[fe.FullYear=0]="FullYear",fe[fe.Month=1]="Month",fe[fe.Date=2]="Date",fe[fe.Hours=3]="Hours",fe[fe.Minutes=4]="Minutes",fe[fe.Seconds=5]="Seconds",fe[fe.FractionalSeconds=6]="FractionalSeconds",fe[fe.Day=7]="Day",fe}(So||{}),ro=function(fe){return fe[fe.DayPeriods=0]="DayPeriods",fe[fe.Days=1]="Days",fe[fe.Months=2]="Months",fe[fe.Eras=3]="Eras",fe}(ro||{});function fo(fe,Ce,Nt,Ie){let Gt=function mt(fe){if(Tt(fe))return fe;if("number"==typeof fe&&!isNaN(fe))return new Date(fe);if("string"==typeof fe){if(fe=fe.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(fe)){const[Gt,Dn=1,pi=1]=fe.split("-").map(ir=>+ir);return Ts(Gt,Dn-1,pi)}const Nt=parseFloat(fe);if(!isNaN(fe-Nt))return new Date(Nt);let Ie;if(Ie=fe.match(po))return function Ye(fe){const Ce=new Date(0);let Nt=0,Ie=0;const Gt=fe[8]?Ce.setUTCFullYear:Ce.setFullYear,Dn=fe[8]?Ce.setUTCHours:Ce.setHours;fe[9]&&(Nt=Number(fe[9]+fe[10]),Ie=Number(fe[9]+fe[11])),Gt.call(Ce,Number(fe[1]),Number(fe[2])-1,Number(fe[3]));const pi=Number(fe[4]||0)-Nt,ir=Number(fe[5]||0)-Ie,fs=Number(fe[6]||0),na=Math.floor(1e3*parseFloat("0."+(fe[7]||0)));return Dn.call(Ce,pi,ir,fs,na),Ce}(Ie)}const Ce=new Date(fe);if(!Tt(Ce))throw new Error(`Unable to convert "${fe}" into a date`);return Ce}(fe);Ce=zr(Nt,Ce)||Ce;let ir,pi=[];for(;Ce;){if(ir=bs.exec(Ce),!ir){pi.push(Ce);break}{pi=pi.concat(ir.slice(1));const Ws=pi.pop();if(!Ws)break;Ce=Ws}}let fs=Gt.getTimezoneOffset();Ie&&(fs=Ai(Ie,fs),Gt=function kt(fe,Ce,Nt){const Ie=Nt?-1:1,Gt=fe.getTimezoneOffset();return function Kn(fe,Ce){return(fe=new Date(fe.getTime())).setMinutes(fe.getMinutes()+Ce),fe}(fe,Ie*(Ai(Ce,Gt)-Gt))}(Gt,Ie,!0));let na="";return pi.forEach(Ws=>{const $r=function ni(fe){if(Fi[fe])return Fi[fe];let Ce;switch(fe){case"G":case"GG":case"GGG":Ce=xr(ro.Eras,Et.Abbreviated);break;case"GGGG":Ce=xr(ro.Eras,Et.Wide);break;case"GGGGG":Ce=xr(ro.Eras,Et.Narrow);break;case"y":Ce=lr(So.FullYear,1,0,!1,!0);break;case"yy":Ce=lr(So.FullYear,2,0,!0,!0);break;case"yyy":Ce=lr(So.FullYear,3,0,!1,!0);break;case"yyyy":Ce=lr(So.FullYear,4,0,!1,!0);break;case"Y":Ce=Kr(1);break;case"YY":Ce=Kr(2,!0);break;case"YYY":Ce=Kr(3);break;case"YYYY":Ce=Kr(4);break;case"M":case"L":Ce=lr(So.Month,1,1);break;case"MM":case"LL":Ce=lr(So.Month,2,1);break;case"MMM":Ce=xr(ro.Months,Et.Abbreviated);break;case"MMMM":Ce=xr(ro.Months,Et.Wide);break;case"MMMMM":Ce=xr(ro.Months,Et.Narrow);break;case"LLL":Ce=xr(ro.Months,Et.Abbreviated,Ii.Standalone);break;case"LLLL":Ce=xr(ro.Months,Et.Wide,Ii.Standalone);break;case"LLLLL":Ce=xr(ro.Months,Et.Narrow,Ii.Standalone);break;case"w":Ce=ps(1);break;case"ww":Ce=ps(2);break;case"W":Ce=ps(1,!0);break;case"d":Ce=lr(So.Date,1);break;case"dd":Ce=lr(So.Date,2);break;case"c":case"cc":Ce=lr(So.Day,1);break;case"ccc":Ce=xr(ro.Days,Et.Abbreviated,Ii.Standalone);break;case"cccc":Ce=xr(ro.Days,Et.Wide,Ii.Standalone);break;case"ccccc":Ce=xr(ro.Days,Et.Narrow,Ii.Standalone);break;case"cccccc":Ce=xr(ro.Days,Et.Short,Ii.Standalone);break;case"E":case"EE":case"EEE":Ce=xr(ro.Days,Et.Abbreviated);break;case"EEEE":Ce=xr(ro.Days,Et.Wide);break;case"EEEEE":Ce=xr(ro.Days,Et.Narrow);break;case"EEEEEE":Ce=xr(ro.Days,Et.Short);break;case"a":case"aa":case"aaa":Ce=xr(ro.DayPeriods,Et.Abbreviated);break;case"aaaa":Ce=xr(ro.DayPeriods,Et.Wide);break;case"aaaaa":Ce=xr(ro.DayPeriods,Et.Narrow);break;case"b":case"bb":case"bbb":Ce=xr(ro.DayPeriods,Et.Abbreviated,Ii.Standalone,!0);break;case"bbbb":Ce=xr(ro.DayPeriods,Et.Wide,Ii.Standalone,!0);break;case"bbbbb":Ce=xr(ro.DayPeriods,Et.Narrow,Ii.Standalone,!0);break;case"B":case"BB":case"BBB":Ce=xr(ro.DayPeriods,Et.Abbreviated,Ii.Format,!0);break;case"BBBB":Ce=xr(ro.DayPeriods,Et.Wide,Ii.Format,!0);break;case"BBBBB":Ce=xr(ro.DayPeriods,Et.Narrow,Ii.Format,!0);break;case"h":Ce=lr(So.Hours,1,-12);break;case"hh":Ce=lr(So.Hours,2,-12);break;case"H":Ce=lr(So.Hours,1);break;case"HH":Ce=lr(So.Hours,2);break;case"m":Ce=lr(So.Minutes,1);break;case"mm":Ce=lr(So.Minutes,2);break;case"s":Ce=lr(So.Seconds,1);break;case"ss":Ce=lr(So.Seconds,2);break;case"S":Ce=lr(So.FractionalSeconds,1);break;case"SS":Ce=lr(So.FractionalSeconds,2);break;case"SSS":Ce=lr(So.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Ce=aa(Br.Short);break;case"ZZZZZ":Ce=aa(Br.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Ce=aa(Br.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Ce=aa(Br.Long);break;default:return null}return Fi[fe]=Ce,Ce}(Ws);na+=$r?$r(Gt,Nt,fs):"''"===Ws?"'":Ws.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),na}function Ts(fe,Ce,Nt){const Ie=new Date(0);return Ie.setFullYear(fe,Ce,Nt),Ie.setHours(0,0,0),Ie}function zr(fe,Ce){var Nt;const Ie=function Qt(fe){return(0,V.H5H)(fe)[V.KH2.LocaleId]}(fe);if(null!==(Nt=Xi[Ie])&&void 0!==Nt||(Xi[Ie]={}),Xi[Ie][Ce])return Xi[Ie][Ce];let Gt="";switch(Ce){case"shortDate":Gt=et(fe,kn.Short);break;case"mediumDate":Gt=et(fe,kn.Medium);break;case"longDate":Gt=et(fe,kn.Long);break;case"fullDate":Gt=et(fe,kn.Full);break;case"shortTime":Gt=zt(fe,kn.Short);break;case"mediumTime":Gt=zt(fe,kn.Medium);break;case"longTime":Gt=zt(fe,kn.Long);break;case"fullTime":Gt=zt(fe,kn.Full);break;case"short":const Dn=zr(fe,"shortTime"),pi=zr(fe,"shortDate");Gt=Zr(qn(fe,kn.Short),[Dn,pi]);break;case"medium":const ir=zr(fe,"mediumTime"),fs=zr(fe,"mediumDate");Gt=Zr(qn(fe,kn.Medium),[ir,fs]);break;case"long":const na=zr(fe,"longTime"),Ws=zr(fe,"longDate");Gt=Zr(qn(fe,kn.Long),[na,Ws]);break;case"full":const $r=zr(fe,"fullTime"),Fa=zr(fe,"fullDate");Gt=Zr(qn(fe,kn.Full),[$r,Fa])}return Gt&&(Xi[Ie][Ce]=Gt),Gt}function Zr(fe,Ce){return Ce&&(fe=fe.replace(/\{([^}]+)}/g,function(Nt,Ie){return null!=Ce&&Ie in Ce?Ce[Ie]:Nt})),fe}function Qr(fe,Ce,Nt="-",Ie,Gt){let Dn="";(fe<0||Gt&&fe<=0)&&(Gt?fe=1-fe:(fe=-fe,Dn=Nt));let pi=String(fe);for(;pi.length<Ce;)pi="0"+pi;return Ie&&(pi=pi.slice(pi.length-Ce)),Dn+pi}function lr(fe,Ce,Nt=0,Ie=!1,Gt=!1){return function(Dn,pi){let ir=function Pr(fe,Ce){switch(fe){case So.FullYear:return Ce.getFullYear();case So.Month:return Ce.getMonth();case So.Date:return Ce.getDate();case So.Hours:return Ce.getHours();case So.Minutes:return Ce.getMinutes();case So.Seconds:return Ce.getSeconds();case So.FractionalSeconds:return Ce.getMilliseconds();case So.Day:return Ce.getDay();default:throw new Error(`Unknown DateType value "${fe}".`)}}(fe,Dn);if((Nt>0||ir>-Nt)&&(ir+=Nt),fe===So.Hours)0===ir&&-12===Nt&&(ir=12);else if(fe===So.FractionalSeconds)return function Wo(fe,Ce){return Qr(fe,3).substring(0,Ce)}(ir,Ce);const fs=un(pi,Te.MinusSign);return Qr(ir,Ce,fs,Ie,Gt)}}function xr(fe,Ce,Nt=Ii.Format,Ie=!1){return function(Gt,Dn){return function wr(fe,Ce,Nt,Ie,Gt,Dn){switch(Nt){case ro.Months:return function Vn(fe,Ce,Nt){const Ie=(0,V.H5H)(fe),Dn=ji([Ie[V.KH2.MonthsFormat],Ie[V.KH2.MonthsStandalone]],Ce);return ji(Dn,Nt)}(Ce,Gt,Ie)[fe.getMonth()];case ro.Days:return function oo(fe,Ce,Nt){const Ie=(0,V.H5H)(fe),Dn=ji([Ie[V.KH2.DaysFormat],Ie[V.KH2.DaysStandalone]],Ce);return ji(Dn,Nt)}(Ce,Gt,Ie)[fe.getDay()];case ro.DayPeriods:const pi=fe.getHours(),ir=fe.getMinutes();if(Dn){const na=function ko(fe){const Ce=(0,V.H5H)(fe);return Ei(Ce),(Ce[V.KH2.ExtraData][2]||[]).map(Ie=>"string"==typeof Ie?vi(Ie):[vi(Ie[0]),vi(Ie[1])])}(Ce),Ws=function Er(fe,Ce,Nt){const Ie=(0,V.H5H)(fe);Ei(Ie);const Dn=ji([Ie[V.KH2.ExtraData][0],Ie[V.KH2.ExtraData][1]],Ce)||[];return ji(Dn,Nt)||[]}(Ce,Gt,Ie),$r=na.findIndex(Fa=>{if(Array.isArray(Fa)){const[la,Wl]=Fa,Tl=pi>=la.hours&&ir>=la.minutes,ul=pi<Wl.hours||pi===Wl.hours&&ir<Wl.minutes;if(la.hours<Wl.hours){if(Tl&&ul)return!0}else if(Tl||ul)return!0}else if(Fa.hours===pi&&Fa.minutes===ir)return!0;return!1});if(-1!==$r)return Ws[$r]}return function En(fe,Ce,Nt){const Ie=(0,V.H5H)(fe),Dn=ji([Ie[V.KH2.DayPeriodsFormat],Ie[V.KH2.DayPeriodsStandalone]],Ce);return ji(Dn,Nt)}(Ce,Gt,Ie)[pi<12?0:1];case ro.Eras:return function Ke(fe,Ce){return ji((0,V.H5H)(fe)[V.KH2.Eras],Ce)}(Ce,Ie)[fe.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${Nt}`)}}(Gt,Dn,fe,Ce,Nt,Ie)}}function aa(fe){return function(Ce,Nt,Ie){const Gt=-1*Ie,Dn=un(Nt,Te.MinusSign),pi=Gt>0?Math.floor(Gt/60):Math.ceil(Gt/60);switch(fe){case Br.Short:return(Gt>=0?"+":"")+Qr(pi,2,Dn)+Qr(Math.abs(Gt%60),2,Dn);case Br.ShortGMT:return"GMT"+(Gt>=0?"+":"")+Qr(pi,1,Dn);case Br.Long:return"GMT"+(Gt>=0?"+":"")+Qr(pi,2,Dn)+":"+Qr(Math.abs(Gt%60),2,Dn);case Br.Extended:return 0===Ie?"Z":(Gt>=0?"+":"")+Qr(pi,2,Dn)+":"+Qr(Math.abs(Gt%60),2,Dn);default:throw new Error(`Unknown zone width "${fe}"`)}}}const Jn=0,hs=4;function Ns(fe){const Ce=fe.getDay(),Nt=0===Ce?-3:hs-Ce;return Ts(fe.getFullYear(),fe.getMonth(),fe.getDate()+Nt)}function ps(fe,Ce=!1){return function(Nt,Ie){let Gt;if(Ce){const Dn=new Date(Nt.getFullYear(),Nt.getMonth(),1).getDay()-1,pi=Nt.getDate();Gt=1+Math.floor((pi+Dn)/7)}else{const Dn=Ns(Nt),pi=function jr(fe){const Ce=Ts(fe,Jn,1).getDay();return Ts(fe,0,1+(Ce<=hs?hs:hs+7)-Ce)}(Dn.getFullYear()),ir=Dn.getTime()-pi.getTime();Gt=1+Math.round(ir/6048e5)}return Qr(Gt,fe,un(Ie,Te.MinusSign))}}function Kr(fe,Ce=!1){return function(Nt,Ie){return Qr(Ns(Nt).getFullYear(),fe,un(Ie,Te.MinusSign),Ce)}}const Fi={};function Ai(fe,Ce){fe=fe.replace(/:/g,"");const Nt=Date.parse("Jan 01, 1970 00:00:00 "+fe)/6e4;return isNaN(Nt)?Ce:Nt}function Tt(fe){return fe instanceof Date&&!isNaN(fe.valueOf())}function Kt(fe,Ce){Ce=encodeURIComponent(Ce);for(const Nt of fe.split(";")){const Ie=Nt.indexOf("="),[Gt,Dn]=-1==Ie?[Nt,""]:[Nt.slice(0,Ie),Nt.slice(Ie+1)];if(Gt.trim()===Ce)return decodeURIComponent(Dn)}return null}class qr{constructor(Ce,Nt,Ie,Gt){this.$implicit=Ce,this.ngForOf=Nt,this.index=Ie,this.count=Gt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pa=(()=>{var fe;class Ce{set ngForOf(Ie){this._ngForOf=Ie,this._ngForOfDirty=!0}set ngForTrackBy(Ie){this._trackByFn=Ie}get ngForTrackBy(){return this._trackByFn}constructor(Ie,Gt,Dn){this._viewContainer=Ie,this._template=Gt,this._differs=Dn,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(Ie){Ie&&(this._template=Ie)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Ie=this._ngForOf;!this._differ&&Ie&&(this._differ=this._differs.find(Ie).create(this.ngForTrackBy))}if(this._differ){const Ie=this._differ.diff(this._ngForOf);Ie&&this._applyChanges(Ie)}}_applyChanges(Ie){const Gt=this._viewContainer;Ie.forEachOperation((Dn,pi,ir)=>{if(null==Dn.previousIndex)Gt.createEmbeddedView(this._template,new qr(Dn.item,this._ngForOf,-1,-1),null===ir?void 0:ir);else if(null==ir)Gt.remove(null===pi?void 0:pi);else if(null!==pi){const fs=Gt.get(pi);Gt.move(fs,ir),Jl(fs,Dn)}});for(let Dn=0,pi=Gt.length;Dn<pi;Dn++){const fs=Gt.get(Dn).context;fs.index=Dn,fs.count=pi,fs.ngForOf=this._ngForOf}Ie.forEachIdentityChange(Dn=>{Jl(Gt.get(Dn.currentIndex),Dn)})}static ngTemplateContextGuard(Ie,Gt){return!0}}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)(V.rXU(V.c1b),V.rXU(V.C4Q),V.rXU(V._q3))},fe.\u0275dir=V.FsC({type:fe,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),Ce})();function Jl(fe,Ce){fe.context.$implicit=Ce.item}let Oa=(()=>{var fe;class Ce{constructor(Ie,Gt){this._viewContainer=Ie,this._context=new Cr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Gt}set ngIf(Ie){this._context.$implicit=this._context.ngIf=Ie,this._updateView()}set ngIfThen(Ie){bi("ngIfThen",Ie),this._thenTemplateRef=Ie,this._thenViewRef=null,this._updateView()}set ngIfElse(Ie){bi("ngIfElse",Ie),this._elseTemplateRef=Ie,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Ie,Gt){return!0}}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)(V.rXU(V.c1b),V.rXU(V.C4Q))},fe.\u0275dir=V.FsC({type:fe,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),Ce})();class Cr{constructor(){this.$implicit=null,this.ngIf=null}}function bi(fe,Ce){if(Ce&&!Ce.createEmbeddedView)throw new Error(`${fe} must be a TemplateRef, but received '${(0,V.Tbb)(Ce)}'.`)}let su=(()=>{var fe;class Ce{constructor(Ie){this._viewContainerRef=Ie,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(Ie){if(this._shouldRecreateView(Ie)){var Gt;const Dn=this._viewContainerRef;if(this._viewRef&&Dn.remove(Dn.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const pi=this._createContextForwardProxy();this._viewRef=Dn.createEmbeddedView(this.ngTemplateOutlet,pi,{injector:null!==(Gt=this.ngTemplateOutletInjector)&&void 0!==Gt?Gt:void 0})}}_shouldRecreateView(Ie){return!!Ie.ngTemplateOutlet||!!Ie.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(Ie,Gt,Dn)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,Gt,Dn),get:(Ie,Gt,Dn)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,Gt,Dn)}})}}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)(V.rXU(V.c1b))},fe.\u0275dir=V.FsC({type:fe,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[V.OA$]}),Ce})();const cu=new V.nKC(""),lc=new V.nKC("");let Ia=(()=>{var fe;class Ce{constructor(Ie,Gt,Dn){this.locale=Ie,this.defaultTimezone=Gt,this.defaultOptions=Dn}transform(Ie,Gt,Dn,pi){if(null==Ie||""===Ie||Ie!=Ie)return null;try{var ir,fs,na,Ws,$r;const Fa=null!==(ir=null!=Gt?Gt:null===(fs=this.defaultOptions)||void 0===fs?void 0:fs.dateFormat)&&void 0!==ir?ir:"mediumDate",la=null!==(na=null!==(Ws=null!=Dn?Dn:null===($r=this.defaultOptions)||void 0===$r?void 0:$r.timezone)&&void 0!==Ws?Ws:this.defaultTimezone)&&void 0!==na?na:void 0;return fo(Ie,Fa,pi||this.locale,la)}catch(Fa){throw function _a(fe,Ce){return new V.wOt(2100,!1)}()}}}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)(V.rXU(V.xe9,16),V.rXU(cu,24),V.rXU(lc,24))},fe.\u0275pipe=V.EJ8({name:"date",type:fe,pure:!0,standalone:!0}),Ce})(),On=(()=>{var fe;class Ce{}return(fe=Ce).\u0275fac=function(Ie){return new(Ie||fe)},fe.\u0275mod=V.$C({type:fe}),fe.\u0275inj=V.G2t({}),Ce})();const li="browser",bo="server";function Eo(fe){return fe===li}function so(fe){return fe===bo}class Cs{}},3953:(Yo,Xn,_e)=>{"use strict";function V(i,o){return Object.is(i,o)}_e.d(Xn,{iLQ:()=>y8,sZ2:()=>Bp,hnV:()=>nx,o8S:()=>Mg,BIS:()=>U1,gRc:()=>mx,Ql9:()=>YE,Ocv:()=>oC,abz:()=>y1,Z63:()=>Zc,aKT:()=>b1,uvJ:()=>Gu,zcH:()=>s0,bkB:()=>Qu,$GK:()=>Ls,nKC:()=>cs,zZn:()=>Zl,_q3:()=>q_,MKu:()=>X_,xe9:()=>w8,Co$:()=>B8,Vns:()=>fv,SKi:()=>qc,Xx1:()=>$r,Agw:()=>If,PLl:()=>Ad,sFG:()=>Wv,_9s:()=>Gv,czy:()=>Am,C4Q:()=>om,NYb:()=>HE,giA:()=>ex,xvI:()=>_E,RxE:()=>qw,c1b:()=>dv,gXe:()=>Gh,Af3:()=>W0,L39:()=>rk,EWP:()=>ak,a0P:()=>fk,Ol2:()=>Q5,w6W:()=>ey,SmG:()=>uC,Rfq:()=>Le,WQX:()=>Ie,hFB:()=>A2,naY:()=>cC,QuC:()=>ge,EmA:()=>or,CGW:()=>gf,HJs:()=>mk,N4e:()=>c1,vPA:()=>Ao,O8t:()=>lk,H3F:()=>Xw,zAP:()=>$x,H8p:()=>Kh,KH2:()=>a6,TgB:()=>Ks,wOt:()=>mi,WHO:()=>Qw,e01:()=>Jw,H5H:()=>m_,Zy3:()=>qo,mq5:()=>lb,JZv:()=>Zs,TL3:()=>NC,LfX:()=>He,plB:()=>xg,jNT:()=>L_,zjR:()=>tx,TL$:()=>j1,Tbb:()=>nl,Vt3:()=>pv,GFd:()=>L8,OA$:()=>zn,Jv_:()=>yw,aNF:()=>bw,R7$:()=>Lu,BMQ:()=>n_,AVh:()=>l_,vxM:()=>Jy,wni:()=>Gb,VBU:()=>kh,FsC:()=>$c,jDH:()=>ya,G2t:()=>Se,$C:()=>ph,EJ8:()=>Xh,rXU:()=>Ud,nrm:()=>p_,eu8:()=>f_,bVm:()=>u8,qex:()=>c8,k0s:()=>l8,j41:()=>a8,RV6:()=>rb,xGo:()=>F1,KVO:()=>Ce,kS0:()=>k2,bIt:()=>y_,lsd:()=>Xb,XpG:()=>Rb,nI1:()=>Aw,i5U:()=>Dw,SdG:()=>Ob,NAR:()=>zb,Y8G:()=>s_,lJ4:()=>Iw,eq3:()=>Ew,mGM:()=>qb,sdS:()=>Kb,Dyx:()=>nb,Z7z:()=>tb,fX1:()=>eb,Njj:()=>Nh,eBV:()=>xp,B4B:()=>Pl,n$t:()=>Ui,DNE:()=>e8,EFF:()=>rw,JRh:()=>I_,SpI:()=>f8,Lme:()=>E_,GBs:()=>Wb});let re=null,ne=!1,l=1;const We=Symbol("SIGNAL");function Y(i){const o=re;return re=i,o}const wt={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function C(i){if(ne)throw new Error("");if(null===re)return;re.consumerOnSignalRead(i);const o=re.nextProducerIndex++;wn(re),o<re.producerNode.length&&re.producerNode[o]!==i&&Ot(re)&&xt(re.producerNode[o],re.producerIndexOfThis[o]),re.producerNode[o]!==i&&(re.producerNode[o]=i,re.producerIndexOfThis[o]=Ot(re)?Zn(i,re,o):0),re.producerLastReadVersion[o]=i.version}function Ut(i){if((!Ot(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==l)){if(!i.producerMustRecompute(i)&&!ei(i))return i.dirty=!1,void(i.lastCleanEpoch=l);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=l}}function yt(i){if(void 0===i.liveConsumerNode)return;const o=ne;ne=!0;try{for(const c of i.liveConsumerNode)c.dirty||xn(c)}finally{ne=o}}function fn(){var i;return!1!==(null===(i=re)||void 0===i?void 0:i.consumerAllowSignalWrites)}function xn(i){var o;i.dirty=!0,yt(i),null===(o=i.consumerMarkedDirty)||void 0===o||o.call(i,i)}function rn(i){return i&&(i.nextProducerIndex=0),Y(i)}function ht(i,o){if(Y(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Ot(i))for(let c=i.nextProducerIndex;c<i.producerNode.length;c++)xt(i.producerNode[c],i.producerIndexOfThis[c]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function ei(i){wn(i);for(let o=0;o<i.producerNode.length;o++){const c=i.producerNode[o],f=i.producerLastReadVersion[o];if(f!==c.version||(Ut(c),f!==c.version))return!0}return!1}function Mn(i){if(wn(i),Ot(i))for(let o=0;o<i.producerNode.length;o++)xt(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Zn(i,o,c){if(Pn(i),0===i.liveConsumerNode.length&&Ii(i))for(let f=0;f<i.producerNode.length;f++)i.producerIndexOfThis[f]=Zn(i.producerNode[f],i,f);return i.liveConsumerIndexOfThis.push(c),i.liveConsumerNode.push(o)-1}function xt(i,o){if(Pn(i),1===i.liveConsumerNode.length&&Ii(i))for(let f=0;f<i.producerNode.length;f++)xt(i.producerNode[f],i.producerIndexOfThis[f]);const c=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[c],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[c],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const f=i.liveConsumerIndexOfThis[o],x=i.liveConsumerNode[o];wn(x),x.producerIndexOfThis[f]=o}}function Ot(i){var o,c;return i.consumerIsAlwaysLive||(null!==(o=null==i||null===(c=i.liveConsumerNode)||void 0===c?void 0:c.length)&&void 0!==o?o:0)>0}function wn(i){var o,c,f;null!==(o=i.producerNode)&&void 0!==o||(i.producerNode=[]),null!==(c=i.producerIndexOfThis)&&void 0!==c||(i.producerIndexOfThis=[]),null!==(f=i.producerLastReadVersion)&&void 0!==f||(i.producerLastReadVersion=[])}function Pn(i){var o,c;null!==(o=i.liveConsumerNode)&&void 0!==o||(i.liveConsumerNode=[]),null!==(c=i.liveConsumerIndexOfThis)&&void 0!==c||(i.liveConsumerIndexOfThis=[])}function Ii(i){return void 0!==i.producerNode}const kn=Symbol("UNSET"),Te=Symbol("COMPUTING"),on=Symbol("ERRORED"),Qt={...wt,value:kn,dirty:!0,error:null,equal:V,producerMustRecompute:i=>i.value===kn||i.value===Te,producerRecomputeValue(i){if(i.value===Te)throw new Error("Detected cycle in computations.");const o=i.value;i.value=Te;const c=rn(i);let f;try{f=i.computation()}catch(x){f=on,i.error=x}finally{ht(i,c)}o!==kn&&o!==on&&f!==on&&i.equal(o,f)?i.value=o:(i.value=f,i.version++)}};let oo=function En(){throw new Error};function Vn(){oo()}let Ae=null;function qn(i,o){fn()||Vn(),i.equal(i.value,o)||(i.value=o,function dr(i){var o;i.version++,function At(){l++}(),yt(i),null===(o=Ae)||void 0===o||o()}(i))}const Qi={...wt,equal:V,value:void 0};var ko=_e(4412),Er=_e(1413),Wr=_e(8359),ji=_e(6354);var li;typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const so="https://g.co/ng/security#xss";class mi extends Error{constructor(o,c){super(qo(o,c)),this.code=o}}function qo(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}const hr=Symbol("InputSignalNode#UNSET"),Ir={...Qi,transformFn:void 0,applyValueToInputSignal(i,o){qn(i,o)}};function ea(i,o){const c=Object.create(Ir);function f(){if(C(c),c.value===hr)throw new mi(-950,!1);return c.value}return c.value=i,c.transformFn=null==o?void 0:o.transform,f[We]=c,f}function Ps(i){return{toString:i}.toString()}const Yr="__parameters__";function Os(i,o,c){return Ps(()=>{const f=function fa(i){return function(...c){if(i){const f=i(...c);for(const x in f)this[x]=f[x]}}}(o);function x(...O){if(this instanceof x)return f.apply(this,O),this;const G=new x(...O);return te.annotation=G,te;function te(pe,Ne,Ze){const It=pe.hasOwnProperty(Yr)?pe[Yr]:Object.defineProperty(pe,Yr,{value:[]})[Yr];for(;It.length<=Ze;)It.push(null);return(It[Ze]=It[Ze]||[]).push(G),pe}}return c&&(x.prototype=Object.create(c.prototype)),x.prototype.ngMetadataName=i,x.annotationCls=x,x})}const Zs=globalThis;function Ea(i){for(let o in i)if(i[o]===Ea)return o;throw Error("Could not find renamed property on target object.")}function Ga(i,o){for(const c in o)o.hasOwnProperty(c)&&!i.hasOwnProperty(c)&&(i[c]=o[c])}function nl(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(nl).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function uc(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const sd=Ea({__forward_ref__:Ea});function Le(i){return i.__forward_ref__=Le,i.toString=function(){return nl(this())},i}function qe(i){return St(i)?i():i}function St(i){return"function"==typeof i&&i.hasOwnProperty(sd)&&i.__forward_ref__===Le}function ya(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Se(i){return{providers:i.providers||[],imports:i.imports||[]}}function vt(i){return Zt(i,Wa)||Zt(i,Pc)}function He(i){return null!==vt(i)}function Zt(i,o){return i.hasOwnProperty(o)?i[o]:null}function Tr(i){return i&&(i.hasOwnProperty(_l)||i.hasOwnProperty(Xa))?i[_l]:null}const Wa=Ea({\u0275prov:Ea}),_l=Ea({\u0275inj:Ea}),Pc=Ea({ngInjectableDef:Ea}),Xa=Ea({ngInjectorDef:Ea});class cs{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ya({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cu(i){return i&&!!i.\u0275providers}const dh=Ea({\u0275cmp:Ea}),Eh=Ea({\u0275dir:Ea}),_d=Ea({\u0275pipe:Ea}),pu=Ea({\u0275mod:Ea}),dc=Ea({\u0275fac:Ea}),Rc=Ea({__NG_ELEMENT_ID__:Ea}),Wd=Ea({__NG_ENV_ID__:Ea});function ks(i){return"string"==typeof i?i:null==i?"":String(i)}function yc(i,o){throw new mi(-201,!1)}var Ls=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Ls||{});let j0;function I0(){return j0}function Bl(i){const o=j0;return j0=i,o}function ku(i,o,c){const f=vt(i);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&Ls.Optional?null:void 0!==o?o:void yc()}const bc={},qd="__NG_DI_FLAG__",Xs="ngTempTokenPath",Rr=/\n/gm,Rd="__source";let cl;function Su(i){const o=cl;return cl=i,o}function fe(i,o=Ls.Default){if(void 0===cl)throw new mi(-203,!1);return null===cl?ku(i,void 0,o):cl.get(i,o&Ls.Optional?null:void 0,o)}function Ce(i,o=Ls.Default){return(I0()||fe)(qe(i),o)}function Ie(i,o=Ls.Default){return Ce(i,Gt(o))}function Gt(i){return typeof i>"u"||"number"==typeof i?i:(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Dn(i){const o=[];for(let c=0;c<i.length;c++){const f=qe(i[c]);if(Array.isArray(f)){if(0===f.length)throw new mi(900,!1);let x,O=Ls.Default;for(let G=0;G<f.length;G++){const te=f[G],pe=ir(te);"number"==typeof pe?-1===pe?x=te.token:O|=pe:x=te}o.push(Ce(x,O))}else o.push(Ce(f))}return o}function pi(i,o){return i[qd]=o,i.prototype[qd]=o,i}function ir(i){return i[qd]}const $r=pi(Os("Optional"),8),la=pi(Os("SkipSelf"),4);function Tl(i,o){return i.hasOwnProperty(dc)?i[dc]:null}function Ta(i,o){i.forEach(c=>Array.isArray(c)?Ta(c,o):o(c))}function hc(i,o,c){o>=i.length?i.push(c):i.splice(o,0,c)}function Ka(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function tc(i,o,c){let f=bd(i,o);return f>=0?i[1|f]=c:(f=~f,function Xd(i,o,c,f){let x=i.length;if(x==o)i.push(c,f);else if(1===x)i.push(f,i[0]),i[0]=c;else{for(x--,i.push(i[x-1],i[x]);x>o;)i[x]=i[x-2],x--;i[o]=c,i[o+1]=f}}(i,f,o,c)),f}function ld(i,o){const c=bd(i,o);if(c>=0)return i[1|c]}function bd(i,o){return function cd(i,o,c){let f=0,x=i.length>>c;for(;x!==f;){const O=f+(x-f>>1),G=i[O<<c];if(o===G)return O<<c;G>o?x=O:f=O+1}return~(x<<c)}(i,o,1)}const zc={},ia=[],Zc=new cs(""),Vl=new cs("",-1),Oc=new cs("");class Kd{get(o,c=bc){if(c===bc){const f=new Error(`NullInjectorError: No provider for ${nl(o)}!`);throw f.name="NullInjectorError",f}return c}}var Ch=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Ch||{}),Gh=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Gh||{}),dl=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(dl||{});function l1(i,o,c){let f=i.length;for(;;){const x=i.indexOf(o,c);if(-1===x)return x;if(0===x||i.charCodeAt(x-1)<=32){const O=o.length;if(x+O===f||i.charCodeAt(x+O)<=32)return x}c=x+1}}function ql(i,o,c){let f=0;for(;f<c.length;){const x=c[f];if("number"==typeof x){if(0!==x)break;f++;const O=c[f++],G=c[f++],te=c[f++];i.setAttribute(o,G,te,O)}else{const O=x,G=c[++f];xd(O)?i.setProperty(o,O,G):i.setAttribute(o,O,G),f++}}return f}function wd(i){return 3===i||4===i||6===i}function xd(i){return 64===i.charCodeAt(0)}function C0(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let c=-1;for(let f=0;f<o.length;f++){const x=o[f];"number"==typeof x?c=x:0===c||$s(i,c,x,null,-1===c||2===c?o[++f]:null)}}return i}function $s(i,o,c,f,x){let O=0,G=i.length;if(-1===o)G=-1;else for(;O<i.length;){const te=i[O++];if("number"==typeof te){if(te===o){G=-1;break}if(te>o){G=O-1;break}}}for(;O<i.length;){const te=i[O];if("number"==typeof te)break;if(te===c){if(null===f)return void(null!==x&&(i[O+1]=x));if(f===i[O+1])return void(i[O+2]=x)}O++,null!==f&&O++,null!==x&&O++}-1!==G&&(i.splice(G,0,o),O=G+1),i.splice(O++,0,c),null!==f&&i.splice(O++,0,f),null!==x&&i.splice(O++,0,x)}const Tu="ng-template";function hh(i,o,c,f){let x=0;if(f){for(;x<o.length&&"string"==typeof o[x];x+=2)if("class"===o[x]&&-1!==l1(o[x+1].toLowerCase(),c,0))return!0}else if(zd(i))return!1;if(x=o.indexOf(1,x),x>-1){let O;for(;++x<o.length&&"string"==typeof(O=o[x]);)if(O.toLowerCase()===c)return!0}return!1}function zd(i){return 4===i.type&&i.value!==Tu}function wp(i,o,c){return o===(4!==i.type||c?i.value:Tu)}function Wh(i,o,c){let f=4;const x=i.attrs,O=null!==x?function nc(i){for(let o=0;o<i.length;o++)if(wd(i[o]))return o;return i.length}(x):0;let G=!1;for(let te=0;te<o.length;te++){const pe=o[te];if("number"!=typeof pe){if(!G)if(4&f){if(f=2|1&f,""!==pe&&!wp(i,pe,c)||""===pe&&1===o.length){if(mu(f))return!1;G=!0}}else if(8&f){if(null===x||!hh(i,x,pe,c)){if(mu(f))return!1;G=!0}}else{const Ne=o[++te],Ze=gu(pe,x,zd(i),c);if(-1===Ze){if(mu(f))return!1;G=!0;continue}if(""!==Ne){let It;if(It=Ze>O?"":x[Ze+1].toLowerCase(),2&f&&Ne!==It){if(mu(f))return!1;G=!0}}}}else{if(!G&&!mu(f)&&!mu(pe))return!1;if(G&&mu(pe))continue;G=!1,f=pe|1&f}}return mu(f)||G}function mu(i){return!(1&i)}function gu(i,o,c,f){if(null===o)return-1;let x=0;if(f||!c){let O=!1;for(;x<o.length;){const G=o[x];if(G===i)return x;if(3===G||6===G)O=!0;else{if(1===G||2===G){let te=o[++x];for(;"string"==typeof te;)te=o[++x];continue}if(4===G)break;if(0===G){x+=4;continue}}x+=O?1:2}return-1}return function qh(i,o){let c=i.indexOf(4);if(c>-1)for(c++;c<i.length;){const f=i[c];if("number"==typeof f)return-1;if(f===o)return c;c++}return-1}(o,i)}function U0(i,o,c=!1){for(let f=0;f<o.length;f++)if(Wh(i,o[f],c))return!0;return!1}function H0(i,o){e:for(let c=0;c<o.length;c++){const f=o[c];if(i.length===f.length){for(let x=0;x<i.length;x++)if(i[x]!==f[x])continue e;return!0}}return!1}function S0(i,o){return i?":not("+o.trim()+")":o}function ud(i){let o=i[0],c=1,f=2,x="",O=!1;for(;c<i.length;){let G=i[c];if("string"==typeof G)if(2&f){const te=i[++c];x+="["+G+(te.length>0?'="'+te+'"':"")+"]"}else 8&f?x+="."+G:4&f&&(x+=" "+G);else""!==x&&!mu(G)&&(o+=S0(O,x),x=""),f=G,O=O||!mu(f);c++}return""!==x&&(o+=S0(O,x)),o}function kh(i){return Ps(()=>{var o;const c=Mt(i),f={...c,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Ch.OnPush,directiveDefs:null,pipeDefs:null,dependencies:c.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:null!==(o=i.signals)&&void 0!==o&&o,data:i.data||{},encapsulation:i.encapsulation||Gh.Emulated,styles:i.styles||ia,_:null,schemas:i.schemas||null,tView:null,id:""};Ht(f);const x=i.dependencies;return f.directiveDefs=Ci(x,!1),f.pipeDefs=Ci(x,!0),f.id=function Ti(i){let o=0;const c=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const x of c)o=Math.imul(31,o)+x.charCodeAt(0)|0;return o+=2147483648,"c"+o}(f),f})}function M0(i){return Z(i)||me(i)}function Od(i){return null!==i}function ph(i){return Ps(()=>({type:i.type,bootstrap:i.bootstrap||ia,declarations:i.declarations||ia,imports:i.imports||ia,exports:i.exports||ia,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Id(i,o){if(null==i)return zc;const c={};for(const x in i)if(i.hasOwnProperty(x)){const O=i[x];let G,te,pe=dl.None;var f;Array.isArray(O)?(pe=O[0],G=O[1],te=null!==(f=O[2])&&void 0!==f?f:G):(G=O,te=O),o?(c[G]=pe!==dl.None?[x,pe]:x,o[G]=te):c[G]=x}return c}function $c(i){return Ps(()=>{const o=Mt(i);return Ht(o),o})}function Xh(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Z(i){return i[dh]||null}function me(i){return i[Eh]||null}function ke(i){return i[_d]||null}function ge(i){const o=Z(i)||me(i)||ke(i);return null!==o&&o.standalone}function Be(i,o){const c=i[pu]||null;if(!c&&!0===o)throw new Error(`Type ${nl(i)} does not have '\u0275mod' property.`);return c}function Mt(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||zc,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||ia,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Id(i.inputs,o),outputs:Id(i.outputs),debugInfo:null}}function Ht(i){var o;null===(o=i.features)||void 0===o||o.forEach(c=>c(i))}function Ci(i,o){if(!i)return null;const c=o?ke:M0;return()=>("function"==typeof i?i():i).map(f=>c(f)).filter(Od)}function or(i){return{\u0275providers:i}}function Us(...i){return{\u0275providers:Va(0,i),\u0275fromNgModule:!0}}function Va(i,...o){const c=[],f=new Set;let x;const O=G=>{c.push(G)};return Ta(o,G=>{const te=G;Ml(te,O,[],f)&&(x||(x=[]),x.push(te))}),void 0!==x&&Qs(x,O),c}function Qs(i,o){for(let c=0;c<i.length;c++){const{ngModule:f,providers:x}=i[c];pc(x,O=>{o(O,f)})}}function Ml(i,o,c,f){if(!(i=qe(i)))return!1;let x=null,O=Tr(i);const G=!O&&Z(i);if(O||G){if(G&&!G.standalone)return!1;x=i}else{const pe=i.ngModule;if(O=Tr(pe),!O)return!1;x=pe}const te=f.has(x);if(G){if(te)return!1;if(f.add(x),G.dependencies){const pe="function"==typeof G.dependencies?G.dependencies():G.dependencies;for(const Ne of pe)Ml(Ne,o,c,f)}}else{if(!O)return!1;{if(null!=O.imports&&!te){let Ne;f.add(x);try{Ta(O.imports,Ze=>{Ml(Ze,o,c,f)&&(Ne||(Ne=[]),Ne.push(Ze))})}finally{}void 0!==Ne&&Qs(Ne,o)}if(!te){const Ne=Tl(x)||(()=>new x);o({provide:x,useFactory:Ne,deps:ia},x),o({provide:Oc,useValue:x,multi:!0},x),o({provide:Zc,useValue:()=>Ce(x),multi:!0},x)}const pe=O.providers;if(null!=pe&&!te){const Ne=i;pc(pe,Ze=>{o(Ze,Ne)})}}}return x!==i&&void 0!==i.providers}function pc(i,o){for(let c of i)Cu(c)&&(c=c.\u0275providers),Array.isArray(c)?pc(c,o):o(c)}const Ld=Ea({provide:String,useValue:Ea});function $l(i){return null!==i&&"object"==typeof i&&Ld in i}function Mu(i){return"function"==typeof i}const Kh=new cs(""),vu={},Nf={};let dd;function Sh(){return void 0===dd&&(dd=new Kd),dd}class Gu{}class Yh extends Gu{get destroyed(){return this._destroyed}constructor(o,c,f,x){super(),this.parent=c,this.source=f,this.scopes=x,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,G0(o,G=>this.processProvider(G)),this.records.set(Vl,Mh(void 0,this)),x.has("environment")&&this.records.set(Gu,Mh(void 0,this));const O=this.records.get(Kh);null!=O&&"string"==typeof O.value&&this.scopes.add(O.value),this.injectorDefTypes=new Set(this.get(Oc,ia,Ls.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const o=Y(null);try{for(const f of this._ngOnDestroyHooks)f.ngOnDestroy();const c=this._onDestroyHooks;this._onDestroyHooks=[];for(const f of c)f()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(o)}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const c=Su(this),f=Bl(void 0);try{return o()}finally{Su(c),Bl(f)}}get(o,c=bc,f=Ls.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Wd))return o[Wd](this);f=Gt(f);const O=Su(this),G=Bl(void 0);try{if(!(f&Ls.SkipSelf)){let pe=this.records.get(o);if(void 0===pe){const Ne=function fh(i){return"function"==typeof i||"object"==typeof i&&i instanceof cs}(o)&&vt(o);pe=Ne&&this.injectableDefInScope(Ne)?Mh(Ed(o),vu):null,this.records.set(o,pe)}if(null!=pe)return this.hydrate(o,pe)}return(f&Ls.Self?Sh():this.parent).get(o,c=f&Ls.Optional&&c===bc?null:c)}catch(te){if("NullInjectorError"===te.name){if((te[Xs]=te[Xs]||[]).unshift(nl(o)),O)throw te;return function fs(i,o,c,f){const x=i[Xs];throw o[Rd]&&x.unshift(o[Rd]),i.message=function na(i,o,c,f=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let x=nl(o);if(Array.isArray(o))x=o.map(nl).join(" -> ");else if("object"==typeof o){let O=[];for(let G in o)if(o.hasOwnProperty(G)){let te=o[G];O.push(G+":"+("string"==typeof te?JSON.stringify(te):nl(te)))}x=`{${O.join(", ")}}`}return`${c}${f?"("+f+")":""}[${x}]: ${i.replace(Rr,"\n  ")}`}("\n"+i.message,x,c,f),i.ngTokenPath=x,i[Xs]=null,i}(te,o,"R3InjectorError",this.source)}throw te}finally{Bl(G),Su(O)}}resolveInjectorInitializers(){const o=Y(null),c=Su(this),f=Bl(void 0);try{const O=this.get(Zc,ia,Ls.Self);for(const G of O)G()}finally{Su(c),Bl(f),Y(o)}}toString(){const o=[],c=this.records;for(const f of c.keys())o.push(nl(f));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new mi(205,!1)}processProvider(o){let c=Mu(o=qe(o))?o:qe(o&&o.provide);const f=function Au(i){return $l(i)?Mh(void 0,i.useValue):Mh(D0(i),vu)}(o);if(!Mu(o)&&!0===o.multi){let x=this.records.get(c);x||(x=Mh(void 0,vu,!0),x.factory=()=>Dn(x.multi),this.records.set(c,x)),c=o,x.multi.push(o)}this.records.set(c,f)}hydrate(o,c){const f=Y(null);try{return c.value===vu&&(c.value=Nf,c.value=c.factory()),"object"==typeof c.value&&c.value&&function T1(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}finally{Y(f)}}injectableDefInScope(o){if(!o.providedIn)return!1;const c=qe(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(o){const c=this._onDestroyHooks.indexOf(o);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Ed(i){const o=vt(i),c=null!==o?o.factory:Tl(i);if(null!==c)return c;if(i instanceof cs)throw new mi(204,!1);if(i instanceof Function)return function Th(i){if(i.length>0)throw new mi(204,!1);const c=function Uo(i){return i&&(i[Wa]||i[Pc])||null}(i);return null!==c?()=>c.factory(i):()=>new i}(i);throw new mi(204,!1)}function D0(i,o,c){let f;if(Mu(i)){const x=qe(i);return Tl(x)||Ed(x)}if($l(i))f=()=>qe(i.useValue);else if(function Jc(i){return!(!i||!i.useFactory)}(i))f=()=>i.useFactory(...Dn(i.deps||[]));else if(function A0(i){return!(!i||!i.useExisting)}(i))f=()=>Ce(qe(i.useExisting));else{const x=qe(i&&(i.useClass||i.provide));if(!function Zh(i){return!!i.deps}(i))return Tl(x)||Ed(x);f=()=>new x(...Dn(i.deps))}return f}function Mh(i,o,c=!1){return{factory:i,value:o,multi:c?[]:void 0}}function G0(i,o){for(const c of i)Array.isArray(c)?G0(c,o):c&&Cu(c)?G0(c.\u0275providers,o):o(c)}function c1(i,o){i instanceof Yh&&i.assertNotDestroyed();const f=Su(i),x=Bl(void 0);try{return o()}finally{Su(f),Bl(x)}}function jc(){return void 0!==I0()||null!=function fu(){return cl}()}function W0(i){if(!jc())throw new mi(-203,!1)}const Il=0,_r=1,ds=2,Xl=3,gh=4,il=5,fc=6,Bd=7,$a=8,ol=9,mc=10,Fs=11,Zd=12,Qh=13,hd=14,ja=15,Qd=16,jl=17,vh=18,d1=19,A1=20,zh=21,Jd=22,Lc=23,ls=25,Oh=1,Wu=7,Lh=9,Kl=10;var Nd=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(Nd||{});function rl(i){return Array.isArray(i)&&"object"==typeof i[Oh]}function Bc(i){return Array.isArray(i)&&!0===i[Oh]}function Fd(i){return!!(4&i.flags)}function pd(i){return i.componentOffset>-1}function _h(i){return!(1&~i.flags)}function v(i){return!!i.template}function r(i){return!!(512&i[ds])}class Tn{constructor(o,c,f){this.previousValue=o,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function ci(i,o,c,f){null!==o?o.applyValueToInputSignal(o,f):i[c]=f}function zn(){return mn}function mn(i){return i.type.prototype.ngOnChanges&&(i.setInput=eo),_i}function _i(){const i=ie(this),o=null==i?void 0:i.current;if(o){const c=i.previous;if(c===zc)i.previous=o;else for(let f in o)c[f]=o[f];i.current=null,this.ngOnChanges(o)}}function eo(i,o,c,f,x){const O=this.declaredInputs[f],G=ie(i)||function L(i,o){return i[io]=o}(i,{previous:zc,current:null}),te=G.current||(G.current={}),pe=G.previous,Ne=pe[O];te[O]=new Tn(Ne&&Ne.currentValue,c,pe===zc),ci(i,o,x,c)}zn.ngInherit=!0;const io="__ngSimpleChanges__";function ie(i){return i[io]||null}const Ve=function(i,o,c){};function hn(i){for(;Array.isArray(i);)i=i[Il];return i}function Wn(i,o){return hn(o[i])}function Wi(i,o){return hn(o[i.index])}function Sr(i,o){return i.data[o]}function Mr(i,o){return i[o]}function Hr(i,o){const c=o[i];return rl(c)?c:c[Il]}function As(i){return!(128&~i[ds])}function Js(i,o){return null==o?null:i[o]}function ca(i){i[jl]=0}function Hs(i){1024&i[ds]||(i[ds]|=1024,As(i)&&ua(i))}function Ca(i){var o;return!!(9216&i[ds]||null!==(o=i[Lc])&&void 0!==o&&o.dirty)}function bl(i){var o;null===(o=i[mc].changeDetectionScheduler)||void 0===o||o.notify(7),64&i[ds]&&(i[ds]|=1024),Ca(i)&&ua(i)}function ua(i){var o;null===(o=i[mc].changeDetectionScheduler)||void 0===o||o.notify(0);let c=er(i);for(;null!==c&&!(8192&c[ds])&&(c[ds]|=8192,As(c));)c=er(c)}function za(i,o){if(!(256&~i[ds]))throw new mi(911,!1);null===i[zh]&&(i[zh]=[]),i[zh].push(o)}function er(i){const o=i[Xl];return Bc(o)?o[Xl]:o}const ss={lFrame:p1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Du=!1;function Jh(){return ss.bindingsEnabled}function hl(){return null!==ss.skipHydrationRootTNode}function Po(){return ss.lFrame.lView}function da(){return ss.lFrame.tView}function xp(i){return ss.lFrame.contextLView=i,i[$a]}function Nh(i){return ss.lFrame.contextLView=null,i}function wl(){let i=qu();for(;null!==i&&64===i.type;)i=i.parent;return i}function qu(){return ss.lFrame.currentTNode}function el(i,o){const c=ss.lFrame;c.currentTNode=i,c.isParent=o}function J1(){return ss.lFrame.isParent}function ep(){ss.lFrame.isParent=!1}function Ip(){return Du}function Fh(i){Du=i}function _u(){const i=ss.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Ru(){return ss.lFrame.bindingIndex++}function eh(i){const o=ss.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,c}function x2(i,o){const c=ss.lFrame;c.bindingIndex=c.bindingRootIndex=i,af(o)}function af(i){ss.lFrame.currentDirectiveIndex=i}function Vh(){return ss.lFrame.currentQueryIndex}function Hc(i){ss.lFrame.currentQueryIndex=i}function Vf(i){const o=i[_r];return 2===o.type?o.declTNode:1===o.type?i[il]:null}function xc(i,o,c){if(c&Ls.SkipSelf){let x=o,O=i;for(;!(x=x.parent,null!==x||c&Ls.Host||(x=Vf(O),null===x||(O=O[hd],10&x.type))););if(null===x)return!1;o=x,i=O}const f=ss.lFrame=eu();return f.currentTNode=o,f.lView=i,!0}function z0(i){const o=eu(),c=i[_r];ss.lFrame=o,o.currentTNode=c.firstChild,o.lView=i,o.tView=c,o.contextLView=i,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function eu(){const i=ss.lFrame,o=null===i?null:i.child;return null===o?p1(i):o}function p1(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Sd(){const i=ss.lFrame;return ss.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Y0=Sd;function O0(){const i=Sd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Yu(){return ss.lFrame.selectedIndex}function tu(i){ss.lFrame.selectedIndex=i}function Al(){const i=ss.lFrame;return Sr(i.tView,i.selectedIndex)}let tp=!0;function R1(){return tp}function n0(i){tp=i}function Q0(i,o){for(let Ne=o.directiveStart,Ze=o.directiveEnd;Ne<Ze;Ne++){const An=i.data[Ne].type.prototype,{ngAfterContentInit:Un,ngAfterContentChecked:$n,ngAfterViewInit:uo,ngAfterViewChecked:tr,ngOnDestroy:mr}=An;var c,f,x,O,G,te,pe;Un&&(null!==(c=i.contentHooks)&&void 0!==c?c:i.contentHooks=[]).push(-Ne,Un),$n&&((null!==(f=i.contentHooks)&&void 0!==f?f:i.contentHooks=[]).push(Ne,$n),(null!==(x=i.contentCheckHooks)&&void 0!==x?x:i.contentCheckHooks=[]).push(Ne,$n)),uo&&(null!==(O=i.viewHooks)&&void 0!==O?O:i.viewHooks=[]).push(-Ne,uo),tr&&((null!==(G=i.viewHooks)&&void 0!==G?G:i.viewHooks=[]).push(Ne,tr),(null!==(te=i.viewCheckHooks)&&void 0!==te?te:i.viewCheckHooks=[]).push(Ne,tr)),null!=mr&&(null!==(pe=i.destroyHooks)&&void 0!==pe?pe:i.destroyHooks=[]).push(Ne,mr)}}function J0(i,o,c){La(i,o,3,c)}function e1(i,o,c,f){(3&i[ds])===c&&La(i,o,c,f)}function lf(i,o){let c=i[ds];(3&c)===o&&(c&=16383,c+=1,i[ds]=c)}function La(i,o,c,f){const O=null!=f?f:-1,G=o.length-1;let te=0;for(let pe=void 0!==f?65535&i[jl]:0;pe<G;pe++)if("number"==typeof o[pe+1]){if(te=o[pe],null!=f&&te>=f)break}else o[pe]<0&&(i[jl]+=65536),(te<O||-1==O)&&(cf(i,c,o,pe),i[jl]=(4294901760&i[jl])+pe+2),pe++}function z1(i,o){Ve(4,i,o);const c=Y(null);try{o.call(i)}finally{Y(c),Ve(5,i,o)}}function cf(i,o,c,f){const x=c[f]<0,O=c[f+1],te=i[x?-c[f]:c[f]];x?i[ds]>>14<i[jl]>>16&&(3&i[ds])===o&&(i[ds]+=16384,z1(te,O)):z1(te,O)}const al=-1;class np{constructor(o,c,f){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}const ip={};class Gc{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,f){f=Gt(f);const x=this.injector.get(o,ip,f);return x!==ip||c===ip?x:this.parentInjector.get(o,c,f)}}function nh(i){return i!==al}function op(i){return 32767&i}function df(i,o){let c=function Hf(i){return i>>16}(i),f=o;for(;c>0;)f=f[hd],c--;return f}let bh=!0;function hf(i){const o=bh;return bh=i,o}const pf=255,rp=5;let Cp=0;const Zu={};function ih(i,o){const c=g1(i,o);if(-1!==c)return c;const f=o[_r];f.firstCreatePass&&(i.injectorIndex=o.length,B1(f.data,i),B1(o,null),B1(f.blueprint,null));const x=v1(i,o),O=i.injectorIndex;if(nh(x)){const G=op(x),te=df(x,o),pe=te[_r].data;for(let Ne=0;Ne<8;Ne++)o[O+Ne]=te[G+Ne]|pe[G+Ne]}return o[O+8]=x,O}function B1(i,o){i.push(0,0,0,0,0,0,0,0,o)}function g1(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function v1(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let c=0,f=null,x=o;for(;null!==x;){if(f=hm(x),null===f)return al;if(c++,x=x[hd],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return al}function Gf(i,o,c){!function L1(i,o,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(Rc)&&(f=c[Rc]),null==f&&(f=c[Rc]=Cp++);const x=f&pf;o.data[i+(x>>rp)]|=1<<x}(i,o,c)}function C2(i,o,c){if(c&Ls.Optional||void 0!==i)return i;yc()}function Wm(i,o,c,f){if(c&Ls.Optional&&void 0===f&&(f=null),!(c&(Ls.Self|Ls.Host))){const x=i[ol],O=Bl(void 0);try{return x?x.get(o,f,c&Ls.Optional):ku(o,f,c&Ls.Optional)}finally{Bl(O)}}return C2(f,0,c)}function dm(i,o,c,f=Ls.Default,x){if(null!==i){if(2048&o[ds]&&!(f&Ls.Self)){const G=function n1(i,o,c,f,x){let O=i,G=o;for(;null!==O&&null!==G&&2048&G[ds]&&!(512&G[ds]);){const te=Vd(O,G,c,f|Ls.Self,Zu);if(te!==Zu)return te;let pe=O.parent;if(!pe){const Ne=G[A1];if(Ne){const Ze=Ne.get(c,Zu,f);if(Ze!==Zu)return Ze}pe=hm(G),G=G[hd]}O=pe}return x}(i,o,c,f,Zu);if(G!==Zu)return G}const O=Vd(i,o,c,f,Zu);if(O!==Zu)return O}return Wm(o,c,f,x)}function Vd(i,o,c,f,x){const O=function N1(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Rc)?i[Rc]:void 0;return"number"==typeof o?o>=0?o&pf:lp:o}(c);if("function"==typeof O){if(!xc(o,i,f))return f&Ls.Host?C2(x,0,f):Wm(o,c,f,x);try{let G;if(G=O(f),null!=G||f&Ls.Optional)return G;yc()}finally{Y0()}}else if("number"==typeof O){let G=null,te=g1(i,o),pe=al,Ne=f&Ls.Host?o[ja][il]:null;for((-1===te||f&Ls.SkipSelf)&&(pe=-1===te?v1(i,o):o[te+8],pe!==al&&o0(f,!1)?(G=o[_r],te=op(pe),o=df(pe,o)):te=-1);-1!==te;){const Ze=o[_r];if(qf(O,te,Ze.data)){const It=sp(te,o,c,G,f,Ne);if(It!==Zu)return It}pe=o[te+8],pe!==al&&o0(f,o[_r].data[te+8]===Ne)&&qf(O,te,o)?(G=Ze,te=op(pe),o=df(pe,o)):te=-1}}return x}function sp(i,o,c,f,x,O){const G=o[_r],te=G.data[i+8],Ze=Wf(te,G,c,null==f?pd(te)&&bh:f!=G&&!!(3&te.type),x&Ls.Host&&O===te);return null!==Ze?ap(o,G,Ze,te):Zu}function Wf(i,o,c,f,x){const O=i.providerIndexes,G=o.data,te=1048575&O,pe=i.directiveStart,Ze=O>>20,An=x?te+Ze:i.directiveEnd;for(let Un=f?te:te+Ze;Un<An;Un++){const $n=G[Un];if(Un<pe&&c===$n||Un>=pe&&$n.type===c)return Un}if(x){const Un=G[pe];if(Un&&v(Un)&&Un.type===c)return pe}return null}function ap(i,o,c,f){let x=i[c];const O=o.data;if(function jf(i){return i instanceof np}(x)){const G=x;G.resolving&&function x0(i,o){throw o&&o.join(" > "),new mi(-200,i)}(function ga(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ks(i)}(O[c]));const te=hf(G.canSeeViewProviders);G.resolving=!0;const Ne=G.injectImpl?Bl(G.injectImpl):null;xc(i,f,Ls.Default);try{x=i[c]=G.factory(void 0,O,i,f),o.firstCreatePass&&c>=f.directiveStart&&function f1(i,o,c){const{ngOnChanges:f,ngOnInit:x,ngDoCheck:O}=o.type.prototype;if(f){var G,te;const It=mn(o);(null!==(G=c.preOrderHooks)&&void 0!==G?G:c.preOrderHooks=[]).push(i,It),(null!==(te=c.preOrderCheckHooks)&&void 0!==te?te:c.preOrderCheckHooks=[]).push(i,It)}var pe,Ne,Ze;x&&(null!==(pe=c.preOrderHooks)&&void 0!==pe?pe:c.preOrderHooks=[]).push(0-i,x),O&&((null!==(Ne=c.preOrderHooks)&&void 0!==Ne?Ne:c.preOrderHooks=[]).push(i,O),(null!==(Ze=c.preOrderCheckHooks)&&void 0!==Ze?Ze:c.preOrderCheckHooks=[]).push(i,O))}(c,O[c],o)}finally{null!==Ne&&Bl(Ne),hf(te),G.resolving=!1,Y0()}}return x}function qf(i,o,c){return!!(c[o+(i>>rp)]&1<<i)}function o0(i,o){return!(i&Ls.Self||i&Ls.Host&&o)}class Ic{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,f){return dm(this._tNode,this._lView,o,Gt(f),c)}}function lp(){return new Ic(wl(),Po())}function F1(i){return Ps(()=>{const o=i.prototype.constructor,c=o[dc]||oa(o),f=Object.prototype;let x=Object.getPrototypeOf(i.prototype).constructor;for(;x&&x!==f;){const O=x[dc]||oa(x);if(O&&O!==c)return O;x=Object.getPrototypeOf(x)}return O=>new O})}function oa(i){return St(i)?()=>{const o=oa(qe(i));return o&&o()}:Tl(i)}function hm(i){const o=i[_r],c=o.type;return 2===c?o.declTNode:1===c?i[il]:null}function k2(i){return function Gm(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const c=i.attrs;if(c){const f=c.length;let x=0;for(;x<f;){const O=c[x];if(wd(O))break;if(0===O)x+=2;else if("number"==typeof O)for(x++;x<f&&"string"==typeof c[x];)x++;else{if(O===o)return c[x+1];x+=2}}}return null}(wl(),i)}function Yl(i,o=null,c=null,f){const x=ff(i,o,c,f);return x.resolveInjectorInitializers(),x}function ff(i,o=null,c=null,f,x=new Set){const O=[c||ia,Us(i)];return f=f||("object"==typeof i?void 0:nl(i)),new Yh(O,o||Sh(),f||null,x)}class Zl{static create(o,c){if(Array.isArray(o))return Yl({name:""},c,o,"");{var f;const x=null!==(f=o.name)&&void 0!==f?f:"";return Yl({name:x},o.parent,o.providers,x)}}}(li=Zl).THROW_IF_NOT_FOUND=bc,li.NULL=new Kd,li.\u0275prov=ya({token:li,providedIn:"any",factory:()=>Ce(Vl)}),li.__NG_ELEMENT_ID__=-1,new cs("").__NG_ELEMENT_ID__=i=>{const o=wl();if(null===o)throw new mi(204,!1);if(2&o.type)return o.value;if(i&Ls.Optional)return null;throw new mi(204,!1)};function kp(i){return i.ngOriginalError}class s0{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&kp(o);for(;c&&kp(c);)c=kp(c);return c||null}}const Sp=new cs("",{providedIn:"root",factory:()=>Ie(s0).handleError.bind(void 0)});let y1=(()=>{var i;class o{}return(i=o).__NG_ELEMENT_ID__=o1,i.__NG_ENV_ID__=c=>c,o})();class Pg extends y1{constructor(o){super(),this._lView=o}onDestroy(o){return za(this._lView,o),()=>function qi(i,o){if(null===i[zh])return;const c=i[zh].indexOf(o);-1!==c&&i[zh].splice(c,1)}(this._lView,o)}}function o1(){return new Pg(Po())}class L0{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=Ie(s0,{optional:!0}),this.destroyRef=Ie(y1),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(o){var c;if(this.destroyed)throw new mi(953,!1);return(null!==(c=this.listeners)&&void 0!==c?c:this.listeners=[]).push(o),{unsubscribe:()=>{var f;const x=null===(f=this.listeners)||void 0===f?void 0:f.indexOf(o);var O;void 0!==x&&-1!==x&&(null===(O=this.listeners)||void 0===O||O.splice(x,1))}}}emit(o){if(this.destroyed)throw new mi(953,!1);if(null===this.listeners)return;const c=Y(null);try{for(const x of this.listeners)try{x(o)}catch(O){var f;null===(f=this.errorHandler)||void 0===f||f.handleError(O)}}finally{Y(c)}}}function gf(i){return new L0}function Tp(i,o){return ea(i,o)}const A2=(Tp.required=function wu(i){return ea(hr,i)},Tp);function D2(){return Mp(wl(),Po())}function Mp(i,o){return new b1(Wi(i,o))}let b1=(()=>{class o{constructor(f){this.nativeElement=f}}return o.__NG_ELEMENT_ID__=D2,o})();function Yf(i){return i instanceof b1?i.nativeElement:i}let Ks=(()=>{var i;class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ko.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const f=this.taskId++;return this.pendingTasks.add(f),f}remove(f){this.pendingTasks.delete(f),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(i=o).\u0275prov=ya({token:i,providedIn:"root",factory:()=>new i}),o})();const Qu=class mm extends Er.B{constructor(o=!1){var c,f;super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=o,jc()&&(this.destroyRef=null!==(c=Ie(y1,{optional:!0}))&&void 0!==c?c:void 0,this.pendingTasks=null!==(f=Ie(Ks,{optional:!0}))&&void 0!==f?f:void 0)}emit(o){const c=Y(null);try{super.next(o)}finally{Y(c)}}subscribe(o,c,f){let x=o,O=c||(()=>null),G=f;if(o&&"object"==typeof o){var te,pe,Ne;const It=o;x=null===(te=It.next)||void 0===te?void 0:te.bind(It),O=null===(pe=It.error)||void 0===pe?void 0:pe.bind(It),G=null===(Ne=It.complete)||void 0===Ne?void 0:Ne.bind(It)}this.__isAsync&&(O=this.wrapInTimeout(O),x&&(x=this.wrapInTimeout(x)),G&&(G=this.wrapInTimeout(G)));const Ze=super.subscribe({next:x,error:O,complete:G});return o instanceof Wr.yU&&o.add(Ze),Ze}wrapInTimeout(o){return c=>{var f;const x=null===(f=this.pendingTasks)||void 0===f?void 0:f.add();setTimeout(()=>{var O;o(c),void 0!==x&&(null===(O=this.pendingTasks)||void 0===O||O.remove(x))})}}};function Ym(){return this._results[Symbol.iterator]()}class Ou{get changes(){var o;return null!==(o=this._changes)&&void 0!==o?o:this._changes=new Qu}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const c=Ou.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=Ym)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){this.dirty=!1;const f=function ma(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function ul(i,o,c){if(i.length!==o.length)return!1;for(let f=0;f<i.length;f++){let x=i[f],O=o[f];if(c&&(x=c(x),O=c(O)),O!==x)return!1}return!0}(this._results,f,c))&&(this._results=f,this.length=f.length,this.last=f[this.length-1],this.first=f[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(o){this._onDirty=o}setDirty(){var o;this.dirty=!0,null===(o=this._onDirty)||void 0===o||o.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function vf(i){return!(128&~i.flags)}const P2=new Map;let Rg=0;const _m="__ngContext__";function Td(i,o){rl(o)?(i[_m]=o[d1],function R2(i){P2.set(i[d1],i)}(o)):i[_m]=o}function yf(i){return zp(i[Zd])}function L2(i){return zp(i[gh])}function zp(i){for(;null!==i&&!Bc(i);)i=i[gh];return i}let xf;function j1(i){xf=i}const Bp=new cs("",{providedIn:"root",factory:()=>l0}),l0="ng",Ad=new cs(""),If=new cs("",{providedIn:"platform",factory:()=>"unknown"}),U1=new cs("",{providedIn:"root",factory:()=>{var i;return(null===(i=function B0(){if(void 0!==xf)return xf;if(typeof document<"u")return document;throw new mi(210,!1)}().body)||void 0===i||null===(i=i.querySelector("[ngCspNonce]"))||void 0===i?void 0:i.getAttribute("ngCspNonce"))||null}});let i2=()=>null;function G1(i,o,c=!1){return i2(i,o,c)}const gn=new cs("",{providedIn:"root",factory:()=>!1});let To;function Ro(i){var o;return(null===(o=function Jo(){if(void 0===To&&(To=null,Zs.trustedTypes))try{To=Zs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return To}())||void 0===o?void 0:o.createScriptURL(i))||i}class fr{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${so})`}}function wo(i){return i instanceof fr?i.changingThisBreaksApplicationSecurity:i}function Gr(i,o){const c=function vs(i){return i instanceof fr&&i.getTypeName()||null}(i);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see ${so})`)}return c===o}const og=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var zs=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(zs||{});function Pl(i){const o=x1();return o?o.sanitize(zs.URL,i)||"":Gr(i,"URL")?wo(i):function w1(i){return(i=String(i)).match(og)?i:"unsafe:"+i}(ks(i))}function qa(i){const o=x1();if(o)return Ro(o.sanitize(zs.RESOURCE_URL,i)||"");if(Gr(i,"ResourceURL"))return Ro(wo(i));throw new mi(904,!1)}function Ui(i,o,c){return function Bi(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?qa:Pl}(o,c)(i)}function x1(){const i=Po();return i&&i[mc].sanitizer}const sg=/^>|^->|<!--|-->|--!>|<!-$/g,bv=/(<|>)/g,ag="\u200b$1\u200b";function u0(i){return i instanceof Function?i():i}var Am=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Am||{});let Dm;function Pm(i,o){return Dm(i,o)}function X2(i,o,c,f,x){if(null!=f){let O,G=!1;Bc(f)?O=f:rl(f)&&(G=!0,f=f[Il]);const te=hn(f);0===i&&null!==c?null==x?_(o,c,te):B(o,c,te,x||null,!0):1===i&&null!==c?B(o,c,te,x||null,!0):2===i?function yr(i,o,c){const f=ce(i,o);f&&function D(i,o,c,f){i.removeChild(o,c,f)}(i,f,o,c)}(o,te,G):3===i&&o.destroyNode(te),null!=O&&function Vs(i,o,c,f,x){const O=c[Wu];O!==hn(c)&&X2(o,i,f,O,x);for(let te=Kl;te<c.length;te++){const pe=c[te];Ur(pe[_r],pe,i,o,f,O)}}(o,i,O,c,x)}}function dg(i,o){return i.createComment(function km(i){return i.replace(sg,o=>o.replace(bv,ag))}(o))}function Mf(i,o,c){return i.createElement(o,c)}function Xp(i,o){var c;null===(c=o[mc].changeDetectionScheduler)||void 0===c||c.notify(8),Ur(i,o,o[Fs],2,null,null)}function hg(i,o){const c=i[Lh],f=o[Xl];(rl(f)||o[ja]!==f[Xl][ja])&&(i[ds]|=Nd.HasTransplantedViews),null===c?i[Lh]=[o]:c.push(o)}function p2(i,o){const c=i[Lh],f=c.indexOf(o);c.splice(f,1)}function Af(i,o){if(i.length<=Kl)return;const c=Kl+o,f=i[c];if(f){const x=f[Qd];null!==x&&x!==i&&p2(x,f),o>0&&(i[c-1][gh]=f[gh]);const O=Ka(i,Kl+o);!function K2(i,o){Xp(i,o),o[Il]=null,o[il]=null}(f[_r],f);const G=O[vh];null!==G&&G.detachView(O[_r]),f[Xl]=null,f[gh]=null,f[ds]&=-129}return f}function jd(i,o){if(!(256&o[ds])){const c=o[Fs];c.destroyNode&&Ur(i,o,c,3,null,null),function h2(i){let o=i[Zd];if(!o)return pg(i[_r],i);for(;o;){let c=null;if(rl(o))c=o[Zd];else{const f=o[Kl];f&&(c=f)}if(!c){for(;o&&!o[gh]&&o!==i;)rl(o)&&pg(o[_r],o),o=o[Xl];null===o&&(o=i),rl(o)&&pg(o[_r],o),c=o&&o[gh]}o=c}}(o)}}function pg(i,o){if(256&o[ds])return;const c=Y(null);try{o[ds]&=-129,o[ds]|=256,o[Lc]&&Mn(o[Lc]),function d0(i,o){let c;if(null!=i&&null!=(c=i.destroyHooks))for(let f=0;f<c.length;f+=2){const x=o[c[f]];if(!(x instanceof np)){const O=c[f+1];if(Array.isArray(O))for(let G=0;G<O.length;G+=2){const te=x[O[G]],pe=O[G+1];Ve(4,te,pe);try{pe.call(te)}finally{Ve(5,te,pe)}}else{Ve(4,x,O);try{O.call(x)}finally{Ve(5,x,O)}}}}}(i,o),function xu(i,o){const c=i.cleanup,f=o[Bd];if(null!==c)for(let O=0;O<c.length-1;O+=2)if("string"==typeof c[O]){const G=c[O+3];G>=0?f[G]():f[-G].unsubscribe(),O+=2}else c[O].call(f[c[O+1]]);null!==f&&(o[Bd]=null);const x=o[zh];if(null!==x){o[zh]=null;for(let O=0;O<x.length;O++)(0,x[O])()}}(i,o),1===o[_r].type&&o[Fs].destroy();const f=o[Qd];if(null!==f&&Bc(o[Xl])){f!==o[Xl]&&p2(f,o);const x=o[vh];null!==x&&x.detachView(i)}!function ic(i){P2.delete(i[d1])}(o)}finally{Y(c)}}function Om(i,o,c){return function Lm(i,o,c){let f=o;for(;null!==f&&168&f.type;)f=(o=f).parent;if(null===f)return c[Il];{const{componentOffset:x}=f;if(x>-1){const{encapsulation:O}=i.data[f.directiveStart+x];if(O===Gh.None||O===Gh.Emulated)return null}return Wi(f,c)}}(i,o.parent,c)}function B(i,o,c,f,x){i.insertBefore(o,c,f,x)}function _(i,o,c){i.appendChild(o,c)}function k(i,o,c,f,x){null!==f?B(i,o,c,f,x):_(i,o,c)}function ce(i,o){return i.parentNode(o)}function dt(i,o,c){return bn(i,o,c)}let fi,bn=function Vt(i,o,c){return 40&i.type?Wi(i,c):null};function to(i,o,c,f){const x=Om(i,f,o),O=o[Fs],te=dt(f.parent||o[il],f,o);if(null!=x)if(Array.isArray(c))for(let pe=0;pe<c.length;pe++)k(O,x,c[pe],te,!1);else k(O,x,c,te,!1);void 0!==fi&&fi(O,f,o,c,x)}function Vi(i,o){if(null!==o){const c=o.type;if(3&c)return Wi(o,i);if(4&c)return zo(-1,i[o.index]);if(8&c){const f=o.child;if(null!==f)return Vi(i,f);{const x=i[o.index];return Bc(x)?zo(-1,x):hn(x)}}if(32&c)return Pm(o,i)()||hn(i[o.index]);{const f=xo(i,o);return null!==f?Array.isArray(f)?f[0]:Vi(er(i[ja]),f):Vi(i,o.next)}}return null}function xo(i,o){return null!==o?i[ja][il].projection[o.projection]:null}function zo(i,o){const c=Kl+i+1;if(c<o.length){const f=o[c],x=f[_r].firstChild;if(null!==x)return Vi(f,x)}return o[Wu]}function _s(i,o,c,f,x,O,G){for(;null!=c;){if(128===c.type){c=c.next;continue}const te=f[c.index],pe=c.type;if(G&&0===o&&(te&&Td(hn(te),f),c.flags|=2),32&~c.flags)if(8&pe)_s(i,o,c.child,f,x,O,!1),X2(o,i,x,te,O);else if(32&pe){const Ne=Pm(c,f);let Ze;for(;Ze=Ne();)X2(o,i,x,Ze,O);X2(o,i,x,te,O)}else 16&pe?xs(i,o,f,c,x,O):X2(o,i,x,te,O);c=G?c.projectionNext:c.next}}function Ur(i,o,c,f,x,O){_s(c,f,i.firstChild,o,x,O,!1)}function xs(i,o,c,f,x,O){const G=c[ja],pe=G[il].projection[f.projection];if(Array.isArray(pe))for(let Ne=0;Ne<pe.length;Ne++)X2(o,i,x,pe[Ne],O);else{let Ne=pe;const Ze=G[Xl];vf(f)&&(Ne.flags|=128),_s(i,o,Ne,Ze,x,O,!0)}}function Rl(i,o,c){""===c?i.removeAttribute(o,"class"):i.setAttribute(o,"class",c)}function Ql(i,o,c){const{mergedAttrs:f,classes:x,styles:O}=c;null!==f&&ql(i,o,f),null!==x&&Rl(i,o,x),null!==O&&function Cc(i,o,c){i.setAttribute(o,"style",c)}(i,o,O)}const Is={};function Lu(i=1){ed(da(),Po(),Yu()+i,!1)}function ed(i,o,c,f){if(!f)if(3&~o[ds]){const O=i.preOrderHooks;null!==O&&e1(o,O,0,c)}else{const O=i.preOrderCheckHooks;null!==O&&J0(o,O,c)}tu(c)}function Ud(i,o=Ls.Default){const c=Po();return null===c?Ce(i,o):dm(wl(),c,qe(i),o)}function td(i,o,c,f,x,O){const G=Y(null);try{let te=null;x&dl.SignalBased&&(te=o[f][We]),null!==te&&void 0!==te.transformFn&&(O=te.transformFn(O)),x&dl.HasDecoratorInputTransform&&(O=i.inputTransforms[f].call(o,O)),null!==i.setInput?i.setInput(o,te,O,c,f):ci(o,te,f,O)}finally{Y(G)}}function Mc(i,o,c,f,x,O,G,te,pe,Ne,Ze){const It=o.blueprint.slice();return It[Il]=x,It[ds]=204|f,(null!==Ne||i&&2048&i[ds])&&(It[ds]|=2048),ca(It),It[Xl]=It[hd]=i,It[$a]=c,It[mc]=G||i&&i[mc],It[Fs]=te||i&&i[Fs],It[ol]=pe||i&&i[ol]||null,It[il]=O,It[d1]=function Zf(){return Rg++}(),It[fc]=Ze,It[A1]=Ne,It[ja]=2==o.type?i[ja]:It,It}function Nu(i,o,c,f,x){let O=i.data[o];if(null===O)O=function kc(i,o,c,f,x){const O=qu(),G=J1(),pe=i.data[o]=function F4(i,o,c,f,x,O){let G=o?o.injectorIndex:-1,te=0;return hl()&&(te|=128),{type:c,index:f,insertBeforeIndex:null,injectorIndex:G,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:te,providerIndexes:0,value:x,attrs:O,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,G?O:O&&O.parent,c,o,f,x);return null===i.firstChild&&(i.firstChild=pe),null!==O&&(G?null==O.child&&null!==pe.parent&&(O.child=pe):null===O.next&&(O.next=pe,pe.prev=O)),pe}(i,o,c,f,x),function rf(){return ss.lFrame.inI18n}()&&(O.flags|=32);else if(64&O.type){O.type=c,O.value=f,O.attrs=x;const G=function Pu(){const i=ss.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();O.injectorIndex=null===G?-1:G.injectorIndex}return el(O,!0),O}function Fu(i,o,c,f){if(0===c)return-1;const x=o.length;for(let O=0;O<c;O++)o.push(f),i.blueprint.push(f),i.data.push(null);return x}function f2(i,o,c,f,x){const O=Yu(),G=2&f;try{tu(-1),G&&o.length>ls&&ed(i,o,ls,!1),Ve(G?2:0,x),c(f,x)}finally{tu(O),Ve(G?3:1,x)}}function Cl(i,o,c){if(Fd(o)){const f=Y(null);try{const O=o.directiveEnd;for(let G=o.directiveStart;G<O;G++){const te=i.data[G];te.contentQueries&&te.contentQueries(1,c[G],G)}}finally{Y(f)}}}function gp(i,o,c){Jh()&&(function Q2(i,o,c,f){const x=c.directiveStart,O=c.directiveEnd;pd(c)&&function fg(i,o,c){const f=Wi(o,i),x=h0(c);let G=16;c.signals?G=4096:c.onPush&&(G=64);const te=Rf(i,Mc(i,x,null,G,f,o,null,i[mc].rendererFactory.createRenderer(f,c),null,null,null));i[o.index]=te}(o,c,i.data[x+c.componentOffset]),i.firstCreatePass||ih(c,o),Td(f,o);const G=c.initialInputs;for(let te=x;te<O;te++){const pe=i.data[te],Ne=ap(o,i,te,c);Td(Ne,o),null!==G&&K1(0,te-x,Ne,pe,0,G),v(pe)&&(Hr(c.index,o)[$a]=ap(o,i,te,c))}}(i,o,c,Wi(c,o)),!(64&~c.flags)&&m2(i,o,c))}function Df(i,o,c=Wi){const f=o.localNames;if(null!==f){let x=o.index+1;for(let O=0;O<f.length;O+=2){const G=f[O+1],te=-1===G?c(o,i):i[G];i[x++]=te}}}function h0(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Wg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function Wg(i,o,c,f,x,O,G,te,pe,Ne,Ze){const It=ls+f,An=It+x,Un=function Bm(i,o){const c=[];for(let f=0;f<o;f++)c.push(f<i?null:Is);return c}(It,An),$n="function"==typeof Ne?Ne():Ne;return Un[_r]={type:i,blueprint:Un,template:c,queries:null,viewQuery:te,declTNode:o,data:Un.slice().fill(null,It),bindingStartIndex:It,expandoStartIndex:An,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof O?O():O,pipeRegistry:"function"==typeof G?G():G,firstChild:null,schemas:pe,consts:$n,incompleteFirstPass:!1,ssrId:Ze}}let qg=()=>null;function V4(i,o,c,f,x){for(let G in o){var O;if(!o.hasOwnProperty(G))continue;const te=o[G];if(void 0===te)continue;null!==(O=f)&&void 0!==O||(f={});let pe,Ne=dl.None;Array.isArray(te)?(pe=te[0],Ne=te[1]):pe=te;let Ze=G;if(null!==x){if(!x.hasOwnProperty(G))continue;Ze=x[G]}0===i?$4(f,c,Ze,pe,Ne):$4(f,c,Ze,pe)}return f}function $4(i,o,c,f,x){let O;i.hasOwnProperty(c)?(O=i[c]).push(o,f):O=i[c]=[o,f],void 0!==x&&O.push(x)}function Nm(i,o,c,f){if(Jh()){const x=null===f?null:{"":-1},O=function v4(i,o){const c=i.directiveRegistry;let f=null,x=null;if(c)for(let G=0;G<c.length;G++){const te=c[G];if(U0(o,te.selectors,!1))if(f||(f=[]),v(te))if(null!==te.findHostDirectiveDefs){const pe=[];x=x||new Map,te.findHostDirectiveDefs(te,pe,x),f.unshift(...pe,te),Ac(i,o,pe.length)}else f.unshift(te),Ac(i,o,0);else{var O;x=x||new Map,null===(O=te.findHostDirectiveDefs)||void 0===O||O.call(te,te,f,x),f.push(te)}}return null===f?null:[f,x]}(i,c);let G,te;null===O?G=te=null:[G,te]=O,null!==G&&X1(i,o,c,G,x,te),x&&function Sv(i,o,c){if(o){const f=i.localNames=[];for(let x=0;x<o.length;x+=2){const O=c[o[x+1]];if(null==O)throw new mi(-301,!1);f.push(o[x],O)}}}(c,f,x)}c.mergedAttrs=C0(c.mergedAttrs,c.attrs)}function X1(i,o,c,f,x,O){for(let It=0;It<f.length;It++)Gf(ih(c,o),i,f[It].type);!function g2(i,o,c){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+c,i.providerIndexes=o}(c,i.data.length,f.length);for(let It=0;It<f.length;It++){const An=f[It];An.providersResolver&&An.providersResolver(An)}let G=!1,te=!1,pe=Fu(i,o,f.length,null);for(let It=0;It<f.length;It++){const An=f[It];c.mergedAttrs=C0(c.mergedAttrs,An.hostAttrs),Tv(i,c,o,pe,An),s3(pe,An,x),null!==An.contentQueries&&(c.flags|=4),(null!==An.hostBindings||null!==An.hostAttrs||0!==An.hostVars)&&(c.flags|=64);const Un=An.type.prototype;var Ne,Ze;!G&&(Un.ngOnChanges||Un.ngOnInit||Un.ngDoCheck)&&((null!==(Ne=i.preOrderHooks)&&void 0!==Ne?Ne:i.preOrderHooks=[]).push(c.index),G=!0),te||!Un.ngOnChanges&&!Un.ngDoCheck||((null!==(Ze=i.preOrderCheckHooks)&&void 0!==Ze?Ze:i.preOrderCheckHooks=[]).push(c.index),te=!0),pe++}!function Yp(i,o,c){const x=o.directiveEnd,O=i.data,G=o.attrs,te=[];let pe=null,Ne=null;for(let Ze=o.directiveStart;Ze<x;Ze++){const It=O[Ze],An=c?c.get(It):null,$n=An?An.outputs:null;pe=V4(0,It.inputs,Ze,pe,An?An.inputs:null),Ne=V4(1,It.outputs,Ze,Ne,$n);const uo=null===pe||null===G||zd(o)?null:Kg(pe,Ze,G);te.push(uo)}null!==pe&&(pe.hasOwnProperty("class")&&(o.flags|=8),pe.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=te,o.inputs=pe,o.outputs=Ne}(i,c,O)}function m2(i,o,c){const f=c.directiveStart,x=c.directiveEnd,O=c.index,G=function h1(){return ss.lFrame.currentDirectiveIndex}();try{tu(O);for(let te=f;te<x;te++){const pe=i.data[te],Ne=o[te];af(te),(null!==pe.hostBindings||0!==pe.hostVars||null!==pe.hostAttrs)&&kv(pe,Ne)}}finally{tu(-1),af(G)}}function kv(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Ac(i,o,c){var f;o.componentOffset=c,(null!==(f=i.components)&&void 0!==f?f:i.components=[]).push(o.index)}function s3(i,o,c){if(c){if(o.exportAs)for(let f=0;f<o.exportAs.length;f++)c[o.exportAs[f]]=i;v(o)&&(c[""]=i)}}function Tv(i,o,c,f,x){i.data[f]=x;const O=x.factory||(x.factory=Tl(x.type)),G=new np(O,v(x),Ud);i.blueprint[f]=G,c[f]=G,function Xg(i,o,c,f,x){const O=x.hostBindings;if(O){let G=i.hostBindingOpCodes;null===G&&(G=i.hostBindingOpCodes=[]);const te=~o.index;(function U4(i){let o=i.length;for(;o>0;){const c=i[--o];if("number"==typeof c&&c<0)return c}return 0})(G)!=te&&G.push(te),G.push(c,f,O)}}(i,o,f,Fu(i,c,x.hostVars,Is),x)}function p0(i,o,c,f,x,O){const G=Wi(i,o);!function J2(i,o,c,f,x,O,G){if(null==O)i.removeAttribute(o,x,c);else{const te=null==G?ks(O):G(O,f||"",x);i.setAttribute(o,x,te,c)}}(o[Fs],G,O,i.value,c,f,x)}function K1(i,o,c,f,x,O){const G=O[o];if(null!==G)for(let te=0;te<G.length;)td(f,c,G[te++],G[te++],G[te++],G[te++])}function Kg(i,o,c){let f=null,x=0;for(;x<c.length;){const O=c[x];if(0!==O)if(5!==O){if("number"==typeof O)break;if(i.hasOwnProperty(O)){null===f&&(f=[]);const G=i[O];for(let te=0;te<G.length;te+=3)if(G[te]===o){f.push(O,G[te+1],G[te+2],c[x+1]);break}}x+=2}else x+=2;else x+=4}return f}function Mv(i,o,c,f){return[i,!0,0,o,null,f,null,c,null,null]}function mg(i,o){const c=i.contentQueries;if(null!==c){const f=Y(null);try{for(let x=0;x<c.length;x+=2){const G=c[x+1];if(-1!==G){const te=i.data[G];Hc(c[x]),te.contentQueries(2,o[G],G)}}}finally{Y(f)}}}function Rf(i,o){return i[Zd]?i[Qh][gh]=o:i[Zd]=o,i[Qh]=o,o}function em(i,o,c){Hc(0);const f=Y(null);try{o(i,c)}finally{Y(f)}}function _4(i){var o;return null!==(o=i[Bd])&&void 0!==o?o:i[Bd]=[]}function Fm(i){var o;return null!==(o=i.cleanup)&&void 0!==o?o:i.cleanup=[]}function gg(i,o){const c=i[ol],f=c?c.get(s0,null):null;f&&f.handleError(o)}function Vm(i,o,c,f,x){for(let O=0;O<c.length;){const G=c[O++],te=c[O++],pe=c[O++];td(i.data[G],o[G],f,te,pe,x)}}function Zp(i,o,c){const f=Wn(o,i);!function Gg(i,o,c){i.setValue(o,c)}(i[Fs],f,c)}function Dv(i,o){const c=Hr(o,i),f=c[_r];!function y4(i,o){for(let c=o.length;c<i.blueprint.length;c++)o.push(i.blueprint[c])}(f,c);const x=c[Il];null!==x&&null===c[fc]&&(c[fc]=G1(x,c[ol])),Yg(f,c,c[$a])}function Yg(i,o,c){z0(o);try{var f;const x=i.viewQuery;null!==x&&em(1,x,c);const O=i.template;null!==O&&f2(i,o,O,1,c),i.firstCreatePass&&(i.firstCreatePass=!1),null===(f=o[vh])||void 0===f||f.finishViewCreation(i),i.staticContentQueries&&mg(i,o),i.staticViewQueries&&em(2,i.viewQuery,c);const G=i.components;null!==G&&function $m(i,o){for(let c=0;c<o.length;c++)Dv(i,o[c])}(o,G)}catch(x){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),x}finally{o[ds]&=-5,O0()}}function Qp(i,o,c,f){const x=Y(null);try{var O,G,te;const pe=o.tView,It=Mc(i,pe,c,4096&i[ds]?4096:16,null,o,null,null,null!==(O=null==f?void 0:f.injector)&&void 0!==O?O:null,null!==(G=null==f?void 0:f.embeddedViewInjector)&&void 0!==G?G:null,null!==(te=null==f?void 0:f.dehydratedView)&&void 0!==te?te:null);It[Qd]=i[o.index];const Un=i[vh];return null!==Un&&(It[vh]=Un.createEmbeddedView(pe)),Yg(pe,It,c),It}finally{Y(x)}}function Zg(i,o){const c=Kl+o;if(c<i.length)return i[c]}function vp(i,o){return!o||null===o.firstChild||vf(i)}function Vu(i,o,c,f=!0){const x=o[_r];if(function zm(i,o,c,f){const x=Kl+f,O=c.length;f>0&&(c[x-1][gh]=o),f<O-Kl?(o[gh]=c[x],hc(c,Kl+f,o)):(c.push(o),o[gh]=null),o[Xl]=c;const G=o[Qd];null!==G&&c!==G&&hg(G,o);const te=o[vh];null!==te&&te.insertView(i),bl(o),o[ds]|=128}(x,o,i,c),f){const G=zo(c,i),te=o[Fs],pe=ce(te,i[Wu]);null!==pe&&function qp(i,o,c,f,x,O){f[Il]=x,f[il]=o,Ur(i,f,c,1,x,O)}(x,i[il],te,o,pe,G)}const O=o[fc];null!==O&&null!==O.firstChild&&(O.firstChild=null)}function vg(i,o){const c=Af(i,o);return void 0!==c&&jd(c[_r],c),c}function tm(i,o,c,f,x=!1){for(;null!==c;){if(128===c.type){c=x?c.projectionNext:c.next;continue}const O=o[c.index];null!==O&&f.push(hn(O)),Bc(O)&&Y1(O,f);const G=c.type;if(8&G)tm(i,o,c.child,f);else if(32&G){const te=Pm(c,o);let pe;for(;pe=te();)f.push(pe)}else if(16&G){const te=xo(o,c);if(Array.isArray(te))f.push(...te);else{const pe=er(o[ja]);tm(pe[_r],pe,te,f,!0)}}c=x?c.projectionNext:c.next}return f}function Y1(i,o){for(let c=Kl;c<i.length;c++){const f=i[c],x=f[_r].firstChild;null!==x&&tm(f[_r],f,x,o)}i[Wu]!==i[Il]&&o.push(i[Wu])}let G4=[];const Jg={...wt,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{ua(i.lView)},consumerOnSignalRead(){this.lView[Lc]=this}},K={...wt,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{let o=er(i.lView);for(;o&&!Oe(o[_r]);)o=er(o);o&&Hs(o)},consumerOnSignalRead(){this.lView[Lc]=this}};function Oe(i){return 2!==i.type}const ut=100;function an(i,o=!0,c=0){const f=i[mc],x=f.rendererFactory;var G;null===(G=x.begin)||void 0===G||G.call(x);try{!function $i(i,o){const c=Ip();try{Fh(!0),Hd(i,o);let f=0;for(;Ca(i);){if(f===ut)throw new mi(103,!1);f++,Hd(i,1)}}finally{Fh(c)}}(i,c)}catch(Ne){throw o&&gg(i,Ne),Ne}finally{var te,pe;null===(te=x.end)||void 0===te||te.call(x),null===(pe=f.inlineEffectRunner)||void 0===pe||pe.flush()}}function Ar(i,o,c,f){var x;const O=o[ds];if(!(256&~O))return;null===(x=o[mc].inlineEffectRunner)||void 0===x||x.flush(),z0(o);let pe=!0,Ne=null,Ze=null;Oe(i)?(Ze=function b4(i){var o;return null!==(o=i[Lc])&&void 0!==o?o:function V0(i){var o;const c=null!==(o=G4.pop())&&void 0!==o?o:Object.create(Jg);return c.lView=i,c}(i)}(o),Ne=rn(Ze)):null===function ft(){return re}()?(pe=!1,Ze=function v2(i){var o;const c=null!==(o=i[Lc])&&void 0!==o?o:Object.create(K);return c.lView=i,c}(o),Ne=rn(Ze)):o[Lc]&&(Mn(o[Lc]),o[Lc]=null);try{ca(o),function t0(i){return ss.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==c&&f2(i,o,c,2,f);const It=!(3&~O);if(It){const $n=i.preOrderCheckHooks;null!==$n&&J0(o,$n,null)}else{const $n=i.preOrderHooks;null!==$n&&e1(o,$n,0,null),lf(o,0)}if(function nd(i){for(let o=yf(i);null!==o;o=L2(o)){if(!(o[ds]&Nd.HasTransplantedViews))continue;const c=o[Lh];for(let f=0;f<c.length;f++)Hs(c[f])}}(o),kl(o,0),null!==i.contentQueries&&mg(i,o),It){const $n=i.contentCheckHooks;null!==$n&&J0(o,$n)}else{const $n=i.contentHooks;null!==$n&&e1(o,$n,1),lf(o,1)}!function lh(i,o){const c=i.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const x=c[f];if(x<0)tu(~x);else{const O=x,G=c[++f],te=c[++f];x2(G,O),te(2,o[O])}}}finally{tu(-1)}}(i,o);const An=i.components;null!==An&&nm(o,An,0);const Un=i.viewQuery;if(null!==Un&&em(2,Un,f),It){const $n=i.viewCheckHooks;null!==$n&&J0(o,$n)}else{const $n=i.viewHooks;null!==$n&&e1(o,$n,2),lf(o,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Jd]){for(const $n of o[Jd])$n();o[Jd]=null}o[ds]&=-73}catch(It){throw ua(o),It}finally{null!==Ze&&(ht(Ze,Ne),pe&&function Qg(i){i.lView[Lc]!==i&&(i.lView=null,G4.push(i))}(Ze)),O0()}}function kl(i,o){for(let c=yf(i);null!==c;c=L2(c))for(let f=Kl;f<c.length;f++)id(c[f],o)}function tl(i,o,c){id(Hr(o,i),c)}function id(i,o){As(i)&&Hd(i,o)}function Hd(i,o){const f=i[_r],x=i[ds],O=i[Lc];let G=!!(0===o&&16&x);if(G||(G=!!(64&x&&0===o)),G||(G=!!(1024&x)),G||(G=!(null==O||!O.dirty||!ei(O))),G||(G=!1),O&&(O.dirty=!1),i[ds]&=-9217,G)Ar(f,i,f.template,i[$a]);else if(8192&x){kl(i,1);const te=f.components;null!==te&&nm(i,te,1)}}function nm(i,o,c){for(let f=0;f<o.length;f++)tl(i,o[f],c)}function Uh(i,o){var c;const f=Ip()?64:1088;for(null===(c=i[mc].changeDetectionScheduler)||void 0===c||c.notify(o);i;){i[ds]|=f;const x=er(i);if(r(i)&&!x)return i;i=x}return null}class im{get rootNodes(){const o=this._lView,c=o[_r];return tm(c,o,c.firstChild,[])}constructor(o,c,f=!0){this._lView=o,this._cdRefInjectingView=c,this.notifyErrorHandler=f,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$a]}set context(o){this._lView[$a]=o}get destroyed(){return!(256&~this._lView[ds])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Xl];if(Bc(o)){const c=o[8],f=c?c.indexOf(this):-1;f>-1&&(Af(o,f),Ka(c,f))}this._attachedToViewContainer=!1}jd(this._lView[_r],this._lView)}onDestroy(o){za(this._lView,o)}markForCheck(){Uh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ds]&=-129}reattach(){bl(this._lView),this._lView[ds]|=128}detectChanges(){this._lView[ds]|=1024,an(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new mi(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const o=r(this._lView),c=this._lView[Qd];null!==c&&!o&&p2(c,this._lView),Xp(this._lView[_r],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new mi(902,!1);this._appRef=o;const c=r(this._lView),f=this._lView[Qd];null!==f&&!c&&hg(f,this._lView),bl(this._lView)}}let om=(()=>{class o{}return o.__NG_ELEMENT_ID__=v5,o})();const Pv=om,g5=class extends Pv{constructor(o,c,f){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=f}get ssrId(){var o;return(null===(o=this._declarationTContainer.tView)||void 0===o?void 0:o.ssrId)||null}createEmbeddedView(o,c){return this.createEmbeddedViewImpl(o,c)}createEmbeddedViewImpl(o,c,f){const x=Qp(this._declarationLView,this._declarationTContainer,o,{embeddedViewInjector:c,dehydratedView:f});return new im(x)}};function v5(){return Rv(wl(),Po())}function Rv(i,o){return 4&i.type?new g5(o,i,Mp(i,o)):null}let I3=()=>null;function o4(i,o){return I3(i,o)}class S4{}const y2=new cs("",{providedIn:"root",factory:()=>!1}),C3=new cs("");class J4{}class A6{}class F5{resolveComponentFactory(o){throw function k3(i){const o=Error(`No component factory found for ${nl(i)}.`);return o.ngComponent=i,o}(o)}}class tv{}tv.NULL=new F5;class Gv{}let Wv=(()=>{class o{constructor(){this.destroyNode=null}}return o.__NG_ELEMENT_ID__=()=>function nv(){const i=Po(),c=Hr(wl().index,i);return(rl(c)?c:i)[Fs]}(),o})(),D6=(()=>{var i;class o{}return(i=o).\u0275prov=ya({token:i,providedIn:"root",factory:()=>null}),o})();const T4=new Set;function f0(i){var o,c;T4.has(i)||(T4.add(i),null===(o=performance)||void 0===o||null===(c=o.mark)||void 0===c||c.call(o,"mark_feature_usage",{detail:{feature:i}}))}function iv(i){let o=!0;return setTimeout(()=>{o&&(o=!1,i())}),"function"==typeof Zs.requestAnimationFrame&&Zs.requestAnimationFrame(()=>{o&&(o=!1,i())}),()=>{o=!1}}function ov(i){let o=!0;return queueMicrotask(()=>{o&&i()}),()=>{o=!1}}function qv(...i){}class qc{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qu(!1),this.onMicrotaskEmpty=new Qu(!1),this.onStable=new Qu(!1),this.onError=new Qu(!1),typeof Zone>"u")throw new mi(908,!1);Zone.assertZonePatched();const x=this;x._nesting=0,x._outer=x._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(x._inner=x._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(x._inner=x._inner.fork(Zone.longStackTraceZoneSpec)),x.shouldCoalesceEventChangeDetection=!f&&c,x.shouldCoalesceRunChangeDetection=f,x.callbackScheduled=!1,function z6(i){const o=()=>{!function R6(i){i.isCheckStableRunning||i.callbackScheduled||(i.callbackScheduled=!0,Zone.root.run(()=>{iv(()=>{i.callbackScheduled=!1,M4(i),i.isCheckStableRunning=!0,wg(i),i.isCheckStableRunning=!1})}),M4(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,x,O,G,te)=>{if(function M3(i){return rv(i,"__ignore_ng_zone__")}(te))return c.invokeTask(x,O,G,te);try{return O6(i),c.invokeTask(x,O,G,te)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===O.type||i.shouldCoalesceRunChangeDetection)&&o(),A4(i)}},onInvoke:(c,f,x,O,G,te,pe)=>{try{return O6(i),c.invoke(x,O,G,te,pe)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!function V5(i){return rv(i,"__scheduler_tick__")}(te)&&o(),A4(i)}},onHasTask:(c,f,x,O)=>{c.hasTask(x,O),f===x&&("microTask"==O.change?(i._hasPendingMicrotasks=O.microTask,M4(i),wg(i)):"macroTask"==O.change&&(i.hasPendingMacrotasks=O.macroTask))},onHandleError:(c,f,x,O)=>(c.handleError(x,O),i.runOutsideAngular(()=>i.onError.emit(O)),!1)})}(x)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qc.isInAngularZone())throw new mi(909,!1)}static assertNotInAngularZone(){if(qc.isInAngularZone())throw new mi(909,!1)}run(o,c,f){return this._inner.run(o,c,f)}runTask(o,c,f,x){const O=this._inner,G=O.scheduleEventTask("NgZoneEvent: "+x,o,T3,qv,qv);try{return O.runTask(G,c,f)}finally{O.cancelTask(G)}}runGuarded(o,c,f){return this._inner.runGuarded(o,c,f)}runOutsideAngular(o){return this._outer.run(o)}}const T3={};function wg(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function M4(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&!0===i.callbackScheduled)}function O6(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function A4(i){i._nesting--,wg(i)}class Xv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qu,this.onMicrotaskEmpty=new Qu,this.onStable=new Qu,this.onError=new Qu}run(o,c,f){return o.apply(c,f)}runGuarded(o,c,f){return o.apply(c,f)}runOutsideAngular(o){return o()}runTask(o,c,f,x){return o.apply(c,f)}}function rv(i,o){var c;return!(!Array.isArray(i)||1!==i.length)&&!0===(null===(c=i[0])||void 0===c||null===(c=c.data)||void 0===c?void 0:c[o])}let Yv=(()=>{var i;class o{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var f;this.executeInternalCallbacks(),null===(f=this.handler)||void 0===f||f.execute()}executeInternalCallbacks(){const f=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const x of f)x()}ngOnDestroy(){var f;null===(f=this.handler)||void 0===f||f.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(i=o).\u0275prov=ya({token:i,providedIn:"root",factory:()=>new i}),o})();function xg(i){return!!Be(i)}function av(i,o,c){let f=c?i.styles:null,x=c?i.classes:null,O=0;if(null!==o)for(let G=0;G<o.length;G++){const te=o[G];"number"==typeof te?O=te:1==O?x=uc(x,te):2==O&&(f=uc(f,te+": "+o[++G]+";"))}c?i.styles=f:i.stylesWithoutHost=f,c?i.classes=x:i.classesWithoutHost=x}class lv extends tv{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=Z(o);return new cv(c,this.ngModule)}}function R4(i,o){const c=[];for(const f in i){if(!i.hasOwnProperty(f))continue;const x=i[f];if(void 0===x)continue;const O=Array.isArray(x),G=O?x[0]:x;c.push(o?{propName:G,templateName:f,isSignal:!!((O?x[1]:dl.None)&dl.SignalBased)}:{propName:G,templateName:f})}return c}class cv extends A6{get inputs(){const o=this.componentDef,c=o.inputTransforms,f=R4(o.inputs,!0);if(null!==c)for(const x of f)c.hasOwnProperty(x.propName)&&(x.transform=c[x.propName]);return f}get outputs(){return R4(this.componentDef.outputs,!1)}constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function Hu(i){return i.map(ud).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}create(o,c,f,x){const O=Y(null);try{var te;let pe=(x=x||this.ngModule)instanceof Gu?x:null===(te=x)||void 0===te?void 0:te.injector;pe&&null!==this.componentDef.getStandaloneInjector&&(pe=this.componentDef.getStandaloneInjector(pe)||pe);const Ne=pe?new Gc(o,pe):o,Ze=Ne.get(Gv,null);if(null===Ze)throw new mi(407,!1);const It=Ne.get(D6,null),$n={rendererFactory:Ze,sanitizer:It,inlineEffectRunner:null,afterRenderEventManager:Ne.get(Yv,null),changeDetectionScheduler:Ne.get(S4,null)},uo=Ze.createRenderer(null,this.componentDef),tr=this.componentDef.selectors[0][0]||"div",mr=f?function Y2(i,o,c,f){const O=f.get(gn,!1)||c===Gh.ShadowDom,G=i.selectRootElement(o,O);return function Iv(i){qg(i)}(G),G}(uo,f,this.componentDef.encapsulation,Ne):Mf(uo,tr,function q5(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(tr));let Lo=512;this.componentDef.signals?Lo|=4096:this.componentDef.onPush||(Lo|=16);let ka=null;null!==mr&&(ka=G1(mr,Ne,!0));const ml=Wg(0,null,null,1,0,null,null,null,null,null,null),Kc=Mc(null,ml,null,Lo,null,null,$n,uo,Ne,null,ka);let bp,tf;z0(Kc);try{const Ag=this.componentDef;let r3,Q_=null;Ag.findHostDirectiveDefs?(r3=[],Q_=new Map,Ag.findHostDirectiveDefs(Ag,r3,Q_),r3.push(Ag)):r3=[Ag];const gk=function X5(i,o){const c=i[_r],f=ls;return i[f]=o,Nu(c,f,2,"#host",null)}(Kc,mr),vk=function F6(i,o,c,f,x,O,G){const te=x[_r];!function R3(i,o,c,f){for(const x of i)o.mergedAttrs=C0(o.mergedAttrs,x.hostAttrs);null!==o.mergedAttrs&&(av(o,o.mergedAttrs,!0),null!==c&&Ql(f,c,o))}(f,i,o,G);let pe=null;null!==o&&(pe=G1(o,x[ol]));const Ne=O.rendererFactory.createRenderer(o,c);let Ze=16;c.signals?Ze=4096:c.onPush&&(Ze=64);const It=Mc(x,h0(c),null,Ze,x[i.index],i,O,Ne,null,null,pe);return te.firstCreatePass&&Ac(te,i,f.length-1),Rf(x,It),x[i.index]=It}(gk,mr,Ag,r3,Kc,$n,uo);tf=Sr(ml,ls),mr&&function V6(i,o,c,f){if(f)ql(i,c,["ng-version","18.1.1"]);else{const{attrs:x,classes:O}=function T0(i){const o=[],c=[];let f=1,x=2;for(;f<i.length;){let O=i[f];if("string"==typeof O)2===x?""!==O&&o.push(O,i[++f]):8===x&&c.push(O);else{if(!mu(x))break;x=O}f++}return{attrs:o,classes:c}}(o.selectors[0]);x&&ql(i,c,x),O&&O.length>0&&Rl(i,c,O.join(" "))}}(uo,Ag,mr,f),void 0!==c&&function uv(i,o,c){const f=i.projection=[];for(let x=0;x<o.length;x++){const O=c[x];f.push(null!=O?Array.from(O):null)}}(tf,this.ngContentSelectors,c),bp=function z3(i,o,c,f,x,O){const G=wl(),te=x[_r],pe=Wi(G,x);X1(te,x,G,c,null,f);for(let Ze=0;Ze<c.length;Ze++)Td(ap(x,te,G.directiveStart+Ze,G),x);m2(te,x,G),pe&&Td(pe,x);const Ne=ap(x,te,G.directiveStart+G.componentOffset,G);if(i[$a]=x[$a]=Ne,null!==O)for(const Ze of O)Ze(Ne,o);return Cl(te,G,x),Ne}(vk,Ag,r3,Q_,Kc,[O3]),Yg(ml,Kc,null)}finally{O0()}return new N6(this.componentType,bp,Mp(tf,Kc),Kc,tf)}finally{Y(O)}}}class N6 extends J4{constructor(o,c,f,x,O){super(),this.location=f,this._rootLView=x,this._tNode=O,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new im(x,void 0,!1),this.componentType=o}setInput(o,c){const f=this._tNode.inputs;let x;if(null!==f&&(x=f[o])){var O;if(null!==(O=this.previousInputValues)&&void 0!==O||(this.previousInputValues=new Map),this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),c))return;const G=this._rootLView;Vm(G[_r],G,x,o,c),this.previousInputValues.set(o,c),Uh(Hr(this._tNode.index,G),1)}}get injector(){return new Ic(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function O3(){const i=wl();Q0(Po()[_r],i)}let dv=(()=>{class o{}return o.__NG_ELEMENT_ID__=t,o})();function t(){return m(wl(),Po())}const e=dv,n=class extends e{constructor(o,c,f){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=f}get element(){return Mp(this._hostTNode,this._hostLView)}get injector(){return new Ic(this._hostTNode,this._hostLView)}get parentInjector(){const o=v1(this._hostTNode,this._hostLView);if(nh(o)){const c=df(o,this._hostLView),f=op(o);return new Ic(c[_r].data[f+8],c)}return new Ic(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=s(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-Kl}createEmbeddedView(o,c,f){let x,O;"number"==typeof f?x=f:null!=f&&(x=f.index,O=f.injector);const G=o4(this._lContainer,o.ssrId),te=o.createEmbeddedViewImpl(c||{},O,G);return this.insertImpl(te,x,vp(this._hostTNode,G)),te}createComponent(o,c,f,x,O){var G,te,pe;const Ne=o&&!function mh(i){return"function"==typeof i}(o);let Ze;if(Ne)Ze=c;else{const mr=c||{};Ze=mr.index,f=mr.injector,x=mr.projectableNodes,O=mr.environmentInjector||mr.ngModuleRef}const It=Ne?o:new cv(Z(o)),An=f||this.parentInjector;if(!O&&null==It.ngModule){const Lo=(Ne?An:this.parentInjector).get(Gu,null);Lo&&(O=Lo)}const Un=Z(null!==(G=It.componentType)&&void 0!==G?G:{}),$n=o4(this._lContainer,null!==(te=null==Un?void 0:Un.id)&&void 0!==te?te:null),uo=null!==(pe=null==$n?void 0:$n.firstChild)&&void 0!==pe?pe:null,tr=It.create(An,x,uo,O);return this.insertImpl(tr.hostView,Ze,vp(this._hostTNode,$n)),tr}insert(o,c){return this.insertImpl(o,c,!0)}insertImpl(o,c,f){const x=o._lView;if(function ts(i){return Bc(i[Xl])}(x)){const te=this.indexOf(o);if(-1!==te)this.detach(te);else{const pe=x[Xl],Ne=new n(pe,pe[il],pe[Xl]);Ne.detach(Ne.indexOf(o))}}const O=this._adjustIndex(c),G=this._lContainer;return Vu(G,x,O,f),o.attachToViewContainerRef(),hc(u(G),O,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=s(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),f=Af(this._lContainer,c);f&&(Ka(u(this._lContainer),c),jd(f[_r],f))}detach(o){const c=this._adjustIndex(o,-1),f=Af(this._lContainer,c);return f&&null!=Ka(u(this._lContainer),c)?new im(f):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function s(i){return i[8]}function u(i){return i[8]||(i[8]=[])}function m(i,o){let c;const f=o[i.index];return Bc(f)?c=f:(c=Mv(f,o,null,i),o[i.index]=c,Rf(o,c)),E(c,o,i,f),new n(c,i,o)}let E=function $(i,o,c,f){if(i[Wu])return;let x;x=8&c.type?hn(f):function g(i,o){const c=i[Fs],f=c.createComment(""),x=Wi(o,i);return B(c,ce(c,x),f,function De(i,o){return i.nextSibling(o)}(c,x),!1),f}(o,c),i[Wu]=x},T=()=>!1;class de{constructor(o){this.queryList=o,this.matches=null}clone(){return new de(this.queryList)}setDirty(){this.queryList.setDirty()}}class be{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const f=null!==o.contentQueries?o.contentQueries[0]:c.length,x=[];for(let O=0;O<f;O++){const G=c.getByIndex(O);x.push(this.queries[G.indexInDeclarationView].clone())}return new be(x)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}finishViewCreation(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==Ri(o,c).matches&&this.queries[c].setDirty()}}class xe{constructor(o,c,f=null){this.flags=c,this.read=f,this.predicate="string"==typeof o?function Mo(i){return i.split(",").map(o=>o.trim())}(o):o}}class je{constructor(o=[]){this.queries=o}elementStart(o,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let f=0;f<this.length;f++){const x=null!==c?c.length:0,O=this.getByIndex(f).embeddedTView(o,x);O&&(O.indexInDeclarationView=f,null!==c?c.push(O):c=[O])}return null!==c?new je(c):null}template(o,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class gt{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new gt(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1&~this.metadata.flags){const c=this._declarationNodeIndex;let f=o.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let x=0;x<f.length;x++){const O=f[x];this.matchTNodeWithReadOption(o,c,_t(c,O)),this.matchTNodeWithReadOption(o,c,Wf(c,o,O,!1,!1))}else f===om?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Wf(c,o,f,!1,!1))}matchTNodeWithReadOption(o,c,f){if(null!==f){const x=this.metadata.read;if(null!==x)if(x===b1||x===dv||x===om&&4&c.type)this.addMatch(c.index,-2);else{const O=Wf(c,o,x,!1,!1);null!==O&&this.addMatch(c.index,O)}else this.addMatch(c.index,f)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function _t(i,o){const c=i.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===o)return c[f+1];return null}function nn(i,o,c,f){return-1===c?function bt(i,o){return 11&i.type?Mp(i,o):4&i.type?Rv(i,o):null}(o,i):-2===c?function Yt(i,o,c){return c===b1?Mp(o,i):c===om?Rv(o,i):c===dv?m(o,i):void 0}(i,o,f):ap(i,i[_r],c,o)}function Sn(i,o,c,f){const x=o[vh].queries[f];if(null===x.matches){const O=i.data,G=c.matches,te=[];for(let pe=0;null!==G&&pe<G.length;pe+=2){const Ne=G[pe];te.push(Ne<0?null:nn(o,O[Ne],G[pe+1],c.metadata.read))}x.matches=te}return x.matches}function Rn(i,o,c,f){const x=i.queries.getByIndex(c),O=x.matches;if(null!==O){const G=Sn(i,o,x,c);for(let te=0;te<O.length;te+=2){const pe=O[te];if(pe>0)f.push(G[te/2]);else{const Ne=O[te+1],Ze=o[-pe];for(let It=Kl;It<Ze.length;It++){const An=Ze[It];An[Qd]===An[Xl]&&Rn(An[_r],An,Ne,f)}if(null!==Ze[Lh]){const It=Ze[Lh];for(let An=0;An<It.length;An++){const Un=It[An];Rn(Un[_r],Un,Ne,f)}}}}}return f}function Di(i,o,c){var f;const x=new Ou(!(4&~c));return function Kp(i,o,c,f){const x=_4(o);x.push(c),i.firstCreatePass&&Fm(i).push(f,x.length-1)}(i,o,x,x.destroy),(null!==(f=o[vh])&&void 0!==f?f:o[vh]=new be).queries.push(new de(x))-1}function Gi(i,o,c){null===i.queries&&(i.queries=new je),i.queries.track(new gt(o,c))}function Ri(i,o){return i.queries.getByIndex(o)}function vo(i,o){const c=i[_r],f=Ri(c,o);return f.crossesNgTemplate?Rn(c,i,o,[]):Sn(c,i,f,o)}function Ao(i,o){f0("NgSignals");const c=function Ge(i){const o=Object.create(Qi);o.value=i;const c=()=>(C(o),o.value);return c[We]=o,c}(i),f=c[We];return null!=o&&o.equal&&(f.equal=o.equal),c.set=x=>qn(f,x),c.update=x=>function un(i,o){fn()||Vn(),qn(i,o(i.value))}(f,x),c.asReadonly=jo.bind(c),c}function jo(){const i=this[We];if(void 0===i.readonlyFn){const o=()=>this();o[We]=i,i.readonlyFn=o}return i.readonlyFn}function pv(i){let o=function Cg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),c=!0;const f=[i];for(;o;){let x;if(v(i))x=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new mi(903,!1);x=o.\u0275dir}if(x){if(c){f.push(x);const G=i;G.inputs=Lf(i.inputs),G.inputTransforms=Lf(i.inputTransforms),G.declaredInputs=Lf(i.declaredInputs),G.outputs=Lf(i.outputs);const te=x.hostBindings;te&&_p(i,te);const pe=x.viewQuery,Ne=x.contentQueries;if(pe&&V3(i,pe),Ne&&K5(i,Ne),N3(i,x),Ga(i.outputs,x.outputs),v(x)&&x.data.animation){const Ze=i.data;Ze.animation=(Ze.animation||[]).concat(x.data.animation)}}const O=x.features;if(O)for(let G=0;G<O.length;G++){const te=O[G];te&&te.ngInherit&&te(i),te===pv&&(c=!1)}}o=Object.getPrototypeOf(o)}!function F3(i){let o=0,c=null;for(let f=i.length-1;f>=0;f--){const x=i[f];x.hostVars=o+=x.hostVars,x.hostAttrs=C0(x.hostAttrs,c=C0(c,x.hostAttrs))}}(f)}function N3(i,o){for(const f in o.inputs){if(!o.inputs.hasOwnProperty(f)||i.inputs.hasOwnProperty(f))continue;const x=o.inputs[f];if(void 0!==x&&(i.inputs[f]=x,i.declaredInputs[f]=o.declaredInputs[f],null!==o.inputTransforms)){var c;const O=Array.isArray(x)?x[0]:x;if(!o.inputTransforms.hasOwnProperty(O))continue;null!==(c=i.inputTransforms)&&void 0!==c||(i.inputTransforms={}),i.inputTransforms[O]=o.inputTransforms[O]}}}function Lf(i){return i===zc?{}:i===ia?[]:i}function V3(i,o){const c=i.viewQuery;i.viewQuery=c?(f,x)=>{o(f,x),c(f,x)}:o}function K5(i,o){const c=i.contentQueries;i.contentQueries=c?(f,x,O)=>{o(f,x,O),c(f,x,O)}:o}function _p(i,o){const c=i.hostBindings;i.hostBindings=c?(f,x)=>{o(f,x),c(f,x)}:o}function L8(i){const o=i.inputConfig,c={};for(const f in o)if(o.hasOwnProperty(f)){const x=o[f];Array.isArray(x)&&x[3]&&(c[f]=x[3])}i.inputTransforms=c}class fv{}class B8{}function ey(i,o){return new Y5(i,null!=o?o:null,[])}class Y5 extends fv{constructor(o,c,f){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lv(this);const x=Be(o);this._bootstrapComponents=u0(x.bootstrap),this._r3Injector=ff(o,c,[{provide:fv,useValue:this},{provide:tv,useValue:this.componentFactoryResolver},...f],nl(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Z5 extends B8{constructor(o){super(),this.moduleType=o}create(o){return new Y5(this.moduleType,o,[])}}class N8 extends fv{constructor(o){super(),this.componentFactoryResolver=new lv(this),this.instance=null;const c=new Yh([...o.providers,{provide:fv,useValue:this},{provide:tv,useValue:this.componentFactoryResolver}],o.parent||Sh(),o.debugName,new Set(["environment"]));this.injector=c,o.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Q5(i,o,c=null){return new N8({providers:i,parent:o,debugName:c,runEnvironmentInitializers:!0}).injector}function X6(i){return!!J5(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function J5(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function kg(i,o,c){return i[o]=c}function v0(i,o,c){return!Object.is(i[o],c)&&(i[o]=c,!0)}function mv(i,o,c,f){const x=v0(i,o,c);return v0(i,o+1,f)||x}function j3(i,o,c,f,x,O,G,te,pe,Ne){const Ze=c+ls,It=o.firstCreatePass?function sy(i,o,c,f,x,O,G,te,pe){const Ne=o.consts,Ze=Nu(o,i,4,G||null,te||null);Nm(o,c,Ze,Js(Ne,pe)),Q0(o,Ze);const It=Ze.tView=Wg(2,Ze,f,x,O,o.directiveRegistry,o.pipeRegistry,null,o.schemas,Ne,null);return null!==o.queries&&(o.queries.template(o,Ze),It.queries=o.queries.embeddedTView(Ze)),Ze}(Ze,o,i,f,x,O,G,te,pe):o.data[Ze];el(It,!1);const An=F8(o,i,It,c);R1()&&to(o,i,An,It),Td(An,i);const Un=Mv(An,i,An,It);return i[Ze]=Un,Rf(i,Un),function z(i,o,c){return T(i,o,c)}(Un,It,i),_h(It)&&gp(o,i,It),null!=pe&&Df(i,It,Ne),It}function e8(i,o,c,f,x,O,G,te){const pe=Po(),Ne=da();return j3(pe,Ne,i,o,c,f,x,Js(Ne.consts,O),G,te),e8}let F8=function V8(i,o,c,f){return n0(!0),o[Fs].createComment("")};function n_(i,o,c,f){const x=Po();return v0(x,Ru(),o)&&(da(),p0(Al(),x,i,o,c,f)),n_}function Q3(i,o,c,f,x,O){const te=mv(i,function Ku(){return ss.lFrame.bindingIndex}(),c,x);return eh(2),te?o+ks(c)+f+ks(x)+O:Is}function o8(i,o){return i<<17|o<<2}function _v(i){return i>>17&32767}function i_(i){return 2|i}function n3(i){return(131068&i)>>2}function o_(i,o){return-131069&i|o<<2}function r_(i){return 1|i}function Ly(i,o,c,f){const x=i[c+1],O=null===o;let G=f?_v(x):n3(x),te=!1;for(;0!==G&&(!1===te||O);){const Ne=i[G+1];R7(i[G],o)&&(te=!0,i[G+1]=f?r_(Ne):i_(Ne)),G=f?_v(Ne):n3(Ne)}te&&(i[c+1]=f?i_(x):r_(x))}function R7(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&bd(i,o)>=0}function s_(i,o,c){const f=Po();return v0(f,Ru(),o)&&function I1(i,o,c,f,x,O,G,te){const pe=Wi(o,c);let Ze,Ne=o.inputs;!te&&null!=Ne&&(Ze=Ne[f])?(Vm(i,c,Ze,f,x),pd(o)&&function Cv(i,o){const c=Hr(o,i);16&c[ds]||(c[ds]|=64)}(c,o.index)):3&o.type&&(f=function j4(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(f),x=null!=G?G(x,o.value||"",f):x,O.setProperty(pe,f,x))}(da(),Al(),f,i,o,f[Fs],c,!1),s_}function a_(i,o,c,f,x){const G=x?"class":"style";Vm(i,c,o.inputs[G],G,f)}function l_(i,o){return function Sg(i,o,c,f){const x=Po(),O=da(),G=eh(2);O.firstUpdatePass&&function Gy(i,o,c,f){const x=i.data;if(null===x[c+1]){const O=x[Yu()],G=function Hy(i,o){return o>=i.expandoStartIndex}(i,c);(function Ky(i,o){return!!(i.flags&(o?8:16))})(O,f)&&null===o&&!G&&(o=!1),o=function j7(i,o,c,f){const x=function kd(i){const o=ss.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let O=f?o.residualClasses:o.residualStyles;if(null===x)0===(f?o.classBindings:o.styleBindings)&&(c=t5(c=c_(null,i,o,c,f),o.attrs,f),O=null);else{const G=o.directiveStylingLast;if(-1===G||i[G]!==x)if(c=c_(x,i,o,c,f),null===O){let pe=function U7(i,o,c){const f=c?o.classBindings:o.styleBindings;if(0!==n3(f))return i[_v(f)]}(i,o,f);void 0!==pe&&Array.isArray(pe)&&(pe=c_(null,i,o,pe[1],f),pe=t5(pe,o.attrs,f),function H7(i,o,c,f){i[_v(c?o.classBindings:o.styleBindings)]=f}(i,o,f,pe))}else O=function G7(i,o,c){let f;const x=o.directiveEnd;for(let O=1+o.directiveStylingLast;O<x;O++)f=t5(f,i[O].hostAttrs,c);return t5(f,o.attrs,c)}(i,o,f)}return void 0!==O&&(f?o.residualClasses=O:o.residualStyles=O),c}(x,O,o,f),function D7(i,o,c,f,x,O){let G=O?o.classBindings:o.styleBindings,te=_v(G),pe=n3(G);i[f]=c;let Ze,Ne=!1;if(Array.isArray(c)?(Ze=c[1],(null===Ze||bd(c,Ze)>0)&&(Ne=!0)):Ze=c,x)if(0!==pe){const An=_v(i[te+1]);i[f+1]=o8(An,te),0!==An&&(i[An+1]=o_(i[An+1],f)),i[te+1]=function M7(i,o){return 131071&i|o<<17}(i[te+1],f)}else i[f+1]=o8(te,0),0!==te&&(i[te+1]=o_(i[te+1],f)),te=f;else i[f+1]=o8(pe,0),0===te?te=f:i[pe+1]=o_(i[pe+1],f),pe=f;Ne&&(i[f+1]=i_(i[f+1])),Ly(i,Ze,f,!0),Ly(i,Ze,f,!1),function P7(i,o,c,f,x){const O=x?i.residualClasses:i.residualStyles;null!=O&&"string"==typeof o&&bd(O,o)>=0&&(c[f+1]=r_(c[f+1]))}(o,Ze,i,f,O),G=o8(te,pe),O?o.classBindings=G:o.styleBindings=G}(x,O,o,c,G,f)}}(O,i,G,f),o!==Is&&v0(x,G,o)&&function qy(i,o,c,f,x,O,G,te){if(!(3&o.type))return;const pe=i.data,Ne=pe[te+1],Ze=function A7(i){return!(1&~i)}(Ne)?Xy(pe,o,c,x,n3(Ne),G):void 0;r8(Ze)||(r8(O)||function T7(i){return!(2&~i)}(Ne)&&(O=Xy(pe,null,c,x,te,G)),function fl(i,o,c,f,x){if(o)x?i.addClass(c,f):i.removeClass(c,f);else{let O=-1===f.indexOf("-")?void 0:Am.DashCase;null==x?i.removeStyle(c,f,O):("string"==typeof x&&x.endsWith("!important")&&(x=x.slice(0,-10),O|=Am.Important),i.setStyle(c,f,x,O))}}(f,G,Wn(Yu(),c),x,O))}(O,O.data[Yu()],x,x[Fs],i,x[G+1]=function K7(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=nl(wo(i)))),i}(o,c),f,G)}(i,o,null,!0),l_}function c_(i,o,c,f,x){let O=null;const G=c.directiveEnd;let te=c.directiveStylingLast;for(-1===te?te=c.directiveStart:te++;te<G&&(O=o[te],f=t5(f,O.hostAttrs,x),O!==i);)te++;return null!==i&&(c.directiveStylingLast=te),f}function t5(i,o,c){const f=c?1:2;let x=-1;if(null!==o)for(let O=0;O<o.length;O++){const G=o[O];"number"==typeof G?x=G:x===f&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),tc(i,G,!!c||o[++O]))}return void 0===i?null:i}function Xy(i,o,c,f,x,O){const G=null===o;let te;for(;x>0;){const pe=i[x],Ne=Array.isArray(pe),Ze=Ne?pe[1]:pe,It=null===Ze;let An=c[x+1];An===Is&&(An=It?ia:void 0);let Un=It?ld(An,f):Ze===f?An:void 0;if(Ne&&!r8(Un)&&(Un=ld(pe,f)),r8(Un)&&(te=Un,G))return te;const $n=i[x+1];x=G?_v($n):n3($n)}if(null!==o){let pe=O?o.residualClasses:o.residualStyles;null!=pe&&(te=ld(pe,f))}return te}function r8(i){return void 0!==i}class s9{destroy(o){}updateValue(o,c){}swap(o,c){const f=Math.min(o,c),x=Math.max(o,c),O=this.detach(x);if(x-f>1){const G=this.detach(f);this.attach(f,O),this.attach(x,G)}else this.attach(f,O)}move(o,c){this.attach(c,this.detach(o))}}function u_(i,o,c,f,x){return i===c&&Object.is(o,f)?1:Object.is(x(i,o),x(c,f))?-1:0}function d_(i,o,c,f){return!(void 0===o||!o.has(f)||(i.attach(c,o.get(f)),o.delete(f),0))}function Yy(i,o,c,f,x){if(d_(i,o,f,c(f,x)))i.updateValue(f,x);else{const O=i.create(f,x);i.attach(f,O)}}function Zy(i,o,c,f){const x=new Set;for(let O=o;O<=c;O++)x.add(f(O,i.at(O)));return x}class Qy{constructor(){this.kvMap=new Map,this._vMap=void 0}has(o){return this.kvMap.has(o)}delete(o){if(!this.has(o))return!1;const c=this.kvMap.get(o);return void 0!==this._vMap&&this._vMap.has(c)?(this.kvMap.set(o,this._vMap.get(c)),this._vMap.delete(c)):this.kvMap.delete(o),!0}get(o){return this.kvMap.get(o)}set(o,c){if(this.kvMap.has(o)){let f=this.kvMap.get(o);void 0===this._vMap&&(this._vMap=new Map);const x=this._vMap;for(;x.has(f);)f=x.get(f);x.set(f,c)}else this.kvMap.set(o,c)}forEach(o){for(let[c,f]of this.kvMap)if(o(f,c),void 0!==this._vMap){const x=this._vMap;for(;x.has(f);)f=x.get(f),o(f,c)}}}function Jy(i,o){f0("NgControlFlow");const c=Po(),f=Ru(),x=c[f]!==Is?c[f]:-1,O=-1!==x?s8(c,ls+x):void 0;if(v0(c,f,i)){const te=Y(null);try{if(void 0!==O&&vg(O,0),-1!==i){const pe=ls+i,Ne=s8(c,pe),Ze=h_(c[_r],pe),It=o4(Ne,Ze.tView.ssrId);Vu(Ne,Qp(c,Ze,o,{dehydratedView:It}),0,vp(Ze,It))}}finally{Y(te)}}else if(void 0!==O){const te=Zg(O,0);void 0!==te&&(te[$a]=o)}}class l9{constructor(o,c,f){this.lContainer=o,this.$implicit=c,this.$index=f}get $count(){return this.lContainer.length-Kl}}function eb(i,o){return o}class u9{constructor(o,c,f){this.hasEmptyBlock=o,this.trackByFn=c,this.liveCollection=f}}function tb(i,o,c,f,x,O,G,te,pe,Ne,Ze,It,An){f0("NgControlFlow");const Un=Po(),$n=da(),uo=void 0!==pe,tr=Po(),mr=te?G.bind(tr[ja][$a]):G,Lo=new u9(uo,mr);tr[ls+i]=Lo,j3(Un,$n,i+1,o,c,f,x,Js($n.consts,O)),uo&&j3(Un,$n,i+2,pe,Ne,Ze,It,Js($n.consts,An))}class d9 extends s9{constructor(o,c,f){super(),this.lContainer=o,this.hostLView=c,this.templateTNode=f,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Kl}at(o){return this.getLView(o)[$a].$implicit}attach(o,c){const f=c[fc];this.needsIndexUpdate||(this.needsIndexUpdate=o!==this.length),Vu(this.lContainer,c,o,vp(this.templateTNode,f))}detach(o){return this.needsIndexUpdate||(this.needsIndexUpdate=o!==this.length-1),function h9(i,o){return Af(i,o)}(this.lContainer,o)}create(o,c){var f;const x=o4(this.lContainer,this.templateTNode.tView.ssrId),O=Qp(this.hostLView,this.templateTNode,new l9(this.lContainer,c,o),{dehydratedView:x});return null===(f=this.operationsCounter)||void 0===f||f.recordCreate(),O}destroy(o){var c;jd(o[_r],o),null===(c=this.operationsCounter)||void 0===c||c.recordDestroy()}updateValue(o,c){this.getLView(o)[$a].$implicit=c}reset(){var o;this.needsIndexUpdate=!1,null===(o=this.operationsCounter)||void 0===o||o.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let o=0;o<this.length;o++)this.getLView(o)[$a].$index=o}getLView(o){return function p9(i,o){return Zg(i,o)}(this.lContainer,o)}}function nb(i){const o=Y(null),c=Yu();try{const x=Po(),O=x[_r],G=x[c],te=c+1,pe=s8(x,te);if(void 0===G.liveCollection){const Ze=h_(O,te);G.liveCollection=new d9(pe,x,Ze)}else G.liveCollection.reset();const Ne=G.liveCollection;if(function a9(i,o,c){var f;let x,O,G=0,te=i.length-1;if(Array.isArray(o)){let Un=o.length-1;for(;G<=te&&G<=Un;){var Ne,Ze;const $n=i.at(G),uo=o[G],tr=u_(G,$n,G,uo,c);if(0!==tr){tr<0&&i.updateValue(G,uo),G++;continue}const mr=i.at(te),Lo=o[Un],ka=u_(te,mr,Un,Lo,c);if(0!==ka){ka<0&&i.updateValue(te,Lo),te--,Un--;continue}const ml=c(G,$n),Kc=c(te,mr),bp=c(G,uo);if(Object.is(bp,Kc)){const tf=c(Un,Lo);Object.is(tf,ml)?(i.swap(G,te),i.updateValue(te,Lo),Un--,te--):i.move(te,G),i.updateValue(G,uo),G++}else if(null!==(Ne=x)&&void 0!==Ne||(x=new Qy),null!==(Ze=O)&&void 0!==Ze||(O=Zy(i,G,te,c)),d_(i,x,G,bp))i.updateValue(G,uo),G++,te++;else if(O.has(bp))x.set(ml,i.detach(G)),te--;else{const tf=i.create(G,o[G]);i.attach(G,tf),G++,te++}}for(;G<=Un;)Yy(i,x,c,G,o[G]),G++}else if(null!=o){const Un=o[Symbol.iterator]();let $n=Un.next();for(;!$n.done&&G<=te;){const uo=i.at(G),tr=$n.value,mr=u_(G,uo,G,tr,c);if(0!==mr)mr<0&&i.updateValue(G,tr),G++,$n=Un.next();else{var It,An;null!==(It=x)&&void 0!==It||(x=new Qy),null!==(An=O)&&void 0!==An||(O=Zy(i,G,te,c));const Lo=c(G,tr);if(d_(i,x,G,Lo))i.updateValue(G,tr),G++,te++,$n=Un.next();else if(O.has(Lo)){const ka=c(G,uo);x.set(ka,i.detach(G)),te--}else i.attach(G,i.create(G,tr)),G++,te++,$n=Un.next()}}for(;!$n.done;)Yy(i,x,c,i.length,$n.value),$n=Un.next()}for(;G<=te;)i.destroy(i.detach(te--));null===(f=x)||void 0===f||f.forEach(Un=>{i.destroy(Un)})}(Ne,i,G.trackByFn),Ne.updateIndexes(),G.hasEmptyBlock){const Ze=Ru(),It=0===Ne.length;if(v0(x,Ze,It)){const An=c+2,Un=s8(x,An);if(It){const $n=h_(O,An),uo=o4(Un,$n.tView.ssrId);Vu(Un,Qp(x,$n,void 0,{dehydratedView:uo}),0,vp($n,uo))}else vg(Un,0)}}}finally{Y(o)}}function s8(i,o){return i[o]}function h_(i,o){return Sr(i,o)}function a8(i,o,c,f){const x=Po(),O=da(),G=ls+i,te=x[Fs],pe=O.firstCreatePass?function f9(i,o,c,f,x,O){const G=o.consts,pe=Nu(o,i,2,f,Js(G,x));return Nm(o,c,pe,Js(G,O)),null!==pe.attrs&&av(pe,pe.attrs,!1),null!==pe.mergedAttrs&&av(pe,pe.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,pe),pe}(G,O,x,o,c,f):O.data[G],Ne=ib(O,x,pe,te,o,i);x[G]=Ne;const Ze=_h(pe);return el(pe,!0),Ql(te,Ne,pe),!function e3(i){return!(32&~i.flags)}(pe)&&R1()&&to(O,x,Ne,pe),0===function Uc(){return ss.lFrame.elementDepthCount}()&&Td(Ne,x),function Nc(){ss.lFrame.elementDepthCount++}(),Ze&&(gp(O,x,pe),Cl(O,pe,x)),null!==f&&Df(x,pe),a8}function l8(){let i=wl();J1()?ep():(i=i.parent,el(i,!1));const o=i;(function X0(i){return ss.skipHydrationRootTNode===i})(o)&&function P1(){ss.skipHydrationRootTNode=null}(),function Bh(){ss.lFrame.elementDepthCount--}();const c=da();return c.firstCreatePass&&(Q0(c,i),Fd(i)&&c.queries.elementEnd(i)),null!=o.classesWithoutHost&&function I2(i){return!!(8&i.flags)}(o)&&a_(c,o,Po(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function uf(i){return!!(16&i.flags)}(o)&&a_(c,o,Po(),o.stylesWithoutHost,!1),l8}function p_(i,o,c,f){return a8(i,o,c,f),l8(),p_}let ib=(i,o,c,f,x,O)=>(n0(!0),Mf(f,x,function zu(){return ss.lFrame.currentNamespace}()));function c8(i,o,c){const f=Po(),x=da(),O=i+ls,G=x.firstCreatePass?function v9(i,o,c,f,x){const O=o.consts,G=Js(O,f),te=Nu(o,i,8,"ng-container",G);return null!==G&&av(te,G,!0),Nm(o,c,te,Js(O,x)),null!==o.queries&&o.queries.elementStart(o,te),te}(O,x,f,o,c):x.data[O];el(G,!0);const te=ob(x,f,G,i);return f[O]=te,R1()&&to(x,f,te,G),Td(te,f),_h(G)&&(gp(x,f,G),Cl(x,G,f)),null!=c&&Df(f,G),c8}function u8(){let i=wl();const o=da();return J1()?ep():(i=i.parent,el(i,!1)),o.firstCreatePass&&(Q0(o,i),Fd(i)&&o.queries.elementEnd(i)),u8}function f_(i,o,c){return c8(i,o,c),u8(),f_}let ob=(i,o,c,f)=>(n0(!0),dg(o[Fs],""));function rb(){return Po()}const i3=void 0;var w9=["en",[["a","p"],["AM","PM"],i3],[["AM","PM"],i3,i3],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],i3,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],i3,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",i3,"{1} 'at' {0}",i3],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function b9(i){const c=Math.floor(Math.abs(i)),f=i.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===f?1:5}];let s6={};function m_(i){const o=function x9(i){return i.toLowerCase().replace(/_/g,"-")}(i);let c=cb(o);if(c)return c;const f=o.split("-")[0];if(c=cb(f),c)return c;if("en"===f)return w9;throw new mi(701,!1)}function lb(i){return m_(i)[a6.PluralCase]}function cb(i){return i in s6||(s6[i]=Zs.ng&&Zs.ng.common&&Zs.ng.common.locales&&Zs.ng.common.locales[i]),s6[i]}var a6=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(a6||{});const l6="en-US";let ub=l6;let Mb=(i,o,c)=>{};function y_(i,o,c,f){const x=Po(),O=da(),G=wl();return function b_(i,o,c,f,x,O,G){const te=_h(f),Ne=i.firstCreatePass&&Fm(i),Ze=o[$a],It=_4(o);let An=!0;if(3&f.type||G){const uo=Wi(f,o),tr=G?G(uo):uo,mr=It.length,Lo=G?ml=>G(hn(ml[f.index])):f.index;let ka=null;if(!G&&te&&(ka=function cI(i,o,c,f){const x=i.cleanup;if(null!=x)for(let O=0;O<x.length-1;O+=2){const G=x[O];if(G===c&&x[O+1]===f){const te=o[Bd],pe=x[O+2];return te.length>pe?te[pe]:null}"string"==typeof G&&(O+=2)}return null}(i,o,x,f.index)),null!==ka)(ka.__ngLastListenerFn__||ka).__ngNextListenerFn__=O,ka.__ngLastListenerFn__=O,An=!1;else{O=Pb(f,o,Ze,O),Mb(uo,x,O);const ml=c.listen(tr,x,O);It.push(O,ml),Ne&&Ne.push(x,Lo,mr,mr+1)}}else O=Pb(f,o,Ze,O);const Un=f.outputs;let $n;if(An&&null!==Un&&($n=Un[x])){const uo=$n.length;if(uo)for(let tr=0;tr<uo;tr+=2){const Kc=o[$n[tr]][$n[tr+1]].subscribe(O),bp=It.length;It.push(O,Kc),Ne&&Ne.push(x,f.index,bp,-(bp+1))}}}(O,x,x[Fs],G,i,o,f),y_}function Db(i,o,c,f){const x=Y(null);try{return Ve(6,o,c),!1!==c(f)}catch(O){return gg(i,O),!1}finally{Ve(7,o,c),Y(x)}}function Pb(i,o,c,f){return function x(O){if(O===Function)return f;Uh(i.componentOffset>-1?Hr(i.index,o):o,5);let te=Db(o,c,f,O),pe=x.__ngNextListenerFn__;for(;pe;)te=Db(o,c,pe,O)&&te,pe=pe.__ngNextListenerFn__;return te}}function Rb(i=1){return function th(i){return(ss.lFrame.contextLView=function gs(i,o){for(;i>0;)o=o[hd],i--;return o}(i,ss.lFrame.contextLView))[$a]}(i)}function uI(i,o){let c=null;const f=function k0(i){const o=i.attrs;if(null!=o){const c=o.indexOf(5);if(!(1&c))return o[c+1]}return null}(i);for(let x=0;x<o.length;x++){const O=o[x];if("*"!==O){if(null===f?U0(i,O,!0):H0(f,O))return x}else c=x}return c}function zb(i){const o=Po()[ja][il];if(!o.projection){const f=o.projection=function wc(i,o){const c=[];for(let f=0;f<i;f++)c.push(o);return c}(i?i.length:1,null),x=f.slice();let O=o.child;for(;null!==O;){if(128!==O.type){const G=i?uI(O,i):0;null!==G&&(x[G]?x[G].projectionNext=O:f[G]=O,x[G]=O)}O=O.next}}}function Ob(i,o=0,c,f,x,O){const G=Po(),te=da(),pe=f?i+1:null;null!==pe&&j3(G,te,pe,f,x,O,null,c);const Ne=Nu(te,ls+i,16,null,c||null);null===Ne.projection&&(Ne.projection=o),ep();const It=!G[fc]||hl();null===G[ja][il].projection[Ne.projection]&&null!==pe?function dI(i,o,c){const f=ls+c,x=o.data[f],O=i[f],G=o4(O,x.tView.ssrId);Vu(O,Qp(i,x,void 0,{dehydratedView:G}),0,vp(x,G))}(G,te,pe):It&&32&~Ne.flags&&function ws(i,o,c){xs(o[Fs],0,o,c,Om(i,c,o),dt(c.parent||o[il],c,o))}(te,G,Ne)}function Gb(i,o,c,f){!function Zi(i,o,c,f){const x=da();if(x.firstCreatePass){const O=wl();Gi(x,new xe(o,c,f),O.index),function yo(i,o){const c=i.contentQueries||(i.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(i.queries.length-1,o)}(x,i),!(2&~c)&&(x.staticContentQueries=!0)}return Di(x,Po(),c)}(i,o,c,f)}function Wb(i,o,c){!function wi(i,o,c){const f=da();return f.firstCreatePass&&(Gi(f,new xe(i,o,c),-1),!(2&~o)&&(f.staticViewQueries=!0)),Di(f,Po(),o)}(i,o,c)}function qb(i){const o=Po(),c=da(),f=Vh();Hc(f+1);const x=Ri(c,f);if(i.dirty&&function Za(i){return!(4&~i[ds])}(o)===!(2&~x.metadata.flags)){if(null===x.matches)i.reset([]);else{const O=vo(o,f);i.reset(O,Yf),i.notifyOnChanges()}return!0}return!1}function Xb(){return function ai(i,o){return i[vh].queries[o].queryList}(Po(),Vh())}function Kb(i){return Mr(function sl(){return ss.lFrame.contextLView}(),ls+i)}function rw(i,o=""){const c=Po(),f=da(),x=i+ls,O=f.firstCreatePass?Nu(f,x,1,o,null):f.data[x],G=sw(f,c,O,o,i);c[x]=G,R1()&&to(f,c,G,O),el(O,!1)}let sw=(i,o,c,f,x)=>(n0(!0),function Rm(i,o){return i.createText(o)}(o[Fs],f));function I_(i){return f8("",i,""),I_}function f8(i,o,c){const f=Po(),x=function Z3(i,o,c,f){return v0(i,Ru(),c)?o+ks(c)+f:Is}(f,i,o,c);return x!==Is&&Zp(f,Yu(),x),f8}function E_(i,o,c,f,x){const O=Po(),G=Q3(O,i,o,c,f,x);return G!==Is&&Zp(O,Yu(),G),E_}function C_(i,o,c,f,x){if(i=qe(i),Array.isArray(i))for(let O=0;O<i.length;O++)C_(i[O],o,c,f,x);else{const O=da(),G=Po(),te=wl();let pe=Mu(i)?i:qe(i.provide);const Ne=D0(i),Ze=1048575&te.providerIndexes,It=te.directiveStart,An=te.providerIndexes>>20;if(Mu(i)||!i.multi){const Un=new np(Ne,x,Ud),$n=S_(pe,o,x?Ze:Ze+An,It);-1===$n?(Gf(ih(te,G),O,pe),k_(O,i,o.length),o.push(pe),te.directiveStart++,te.directiveEnd++,x&&(te.providerIndexes+=1048576),c.push(Un),G.push(Un)):(c[$n]=Un,G[$n]=Un)}else{const Un=S_(pe,o,Ze+An,It),$n=S_(pe,o,Ze,Ze+An),tr=$n>=0&&c[$n];if(x&&!tr||!x&&!(Un>=0&&c[Un])){Gf(ih(te,G),O,pe);const mr=function PI(i,o,c,f,x){const O=new np(i,c,Ud);return O.multi=[],O.index=o,O.componentProviders=0,_w(O,x,f&&!c),O}(x?DI:AI,c.length,x,f,Ne);!x&&tr&&(c[$n].providerFactory=mr),k_(O,i,o.length,0),o.push(pe),te.directiveStart++,te.directiveEnd++,x&&(te.providerIndexes+=1048576),c.push(mr),G.push(mr)}else k_(O,i,Un>-1?Un:$n,_w(c[x?$n:Un],Ne,!x&&f));!x&&f&&tr&&c[$n].componentProviders++}}}function k_(i,o,c,f){const x=Mu(o),O=function S1(i){return!!i.useClass}(o);if(x||O){const pe=(O?qe(o.useClass):o).prototype.ngOnDestroy;if(pe){const Ne=i.destroyHooks||(i.destroyHooks=[]);if(!x&&o.multi){const Ze=Ne.indexOf(c);-1===Ze?Ne.push(c,[f,pe]):Ne[Ze+1].push(f,pe)}else Ne.push(c,pe)}}}function _w(i,o,c){return c&&i.componentProviders++,i.multi.push(o)-1}function S_(i,o,c,f){for(let x=c;x<f;x++)if(o[x]===i)return x;return-1}function AI(i,o,c,f){return T_(this.multi,[])}function DI(i,o,c,f){const x=this.multi;let O;if(this.providerFactory){const G=this.providerFactory.componentProviders,te=ap(c,c[_r],this.providerFactory.index,f);O=te.slice(0,G),T_(x,O);for(let pe=G;pe<te.length;pe++)O.push(te[pe])}else O=[],T_(x,O);return O}function T_(i,o){for(let c=0;c<i.length;c++)o.push((0,i[c])());return o}function yw(i,o=[]){return c=>{c.providersResolver=(f,x)=>function MI(i,o,c){const f=da();if(f.firstCreatePass){const x=v(i);C_(c,f.data,f.blueprint,x,!0),C_(o,f.data,f.blueprint,x,!1)}}(f,x?x(i):i,o)}}let RI=(()=>{var i;class o{constructor(f){this._injector=f,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(f){if(!f.standalone)return null;if(!this.cachedInjectors.has(f)){const x=Va(0,f.type),O=x.length>0?Q5([x],this._injector,`Standalone[${f.type.name}]`):null;this.cachedInjectors.set(f,O)}return this.cachedInjectors.get(f)}ngOnDestroy(){try{for(const f of this.cachedInjectors.values())null!==f&&f.destroy()}finally{this.cachedInjectors.clear()}}}return(i=o).\u0275prov=ya({token:i,providedIn:"environment",factory:()=>new i(Ce(Gu))}),o})();function bw(i){f0("NgStandalone"),i.getStandaloneInjector=o=>o.get(RI).getOrCreateStandaloneInjector(i)}function Iw(i,o,c){const f=_u()+i,x=Po();return x[f]===Is?kg(x,f,c?o.call(c):o()):function $3(i,o){return i[o]}(x,f)}function Ew(i,o,c,f){return function Cw(i,o,c,f,x,O){const G=o+c;return v0(i,G,x)?kg(i,G+1,O?f.call(O,x):f(x)):a5(i,G+1)}(Po(),_u(),i,o,c,f)}function a5(i,o){const c=i[o];return c===Is?void 0:c}function Aw(i,o){const c=da();let f;const x=i+ls;var O;c.firstCreatePass?(f=function GI(i,o){if(o)for(let c=o.length-1;c>=0;c--){const f=o[c];if(i===f.name)return f}}(o,c.pipeRegistry),c.data[x]=f,f.onDestroy&&(null!==(O=c.destroyHooks)&&void 0!==O?O:c.destroyHooks=[]).push(x,f.onDestroy)):f=c.data[x];const G=f.factory||(f.factory=Tl(f.type)),pe=Bl(Ud);try{const Ne=hf(!1),Ze=G();return hf(Ne),function x_(i,o,c,f){c>=i.data.length&&(i.data[c]=null,i.blueprint[c]=null),o[c]=f}(c,Po(),x,Ze),Ze}finally{Bl(pe)}}function Dw(i,o,c,f){const x=i+ls,O=Po(),G=Mr(O,x);return function l5(i,o){return i[_r].data[o].pure}(O,x)?function kw(i,o,c,f,x,O,G){const te=o+c;return mv(i,te,x,O)?kg(i,te+2,G?f.call(G,x,O):f(x,O)):a5(i,te+2)}(O,_u(),o,G.transform,c,f,G):G.transform(c,f)}class qw{constructor(o){this.full=o;const c=o.split(".");this.major=c[0],this.minor=c[1],this.patch=c.slice(2).join(".")}}const _E=new qw("18.1.1");let Xw=(()=>{var i;class o{log(f){console.log(f)}warn(f){console.warn(f)}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=ya({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();const Qw=new cs(""),Jw=new cs("");let O_,HE=(()=>{var i;class o{constructor(f,x,O){this._ngZone=f,this.registry=x,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,O_||(function GE(i){O_=i}(O),O.addToWindow(x)),this._watchAngularEvents(),f.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qc.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let f=this._callbacks.pop();clearTimeout(f.timeoutId),f.doneCb()}});else{let f=this.getPendingTasks();this._callbacks=this._callbacks.filter(x=>!x.updateCb||!x.updateCb(f)||(clearTimeout(x.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(f=>({source:f.source,creationLocation:f.creationLocation,data:f.data})):[]}addCallback(f,x,O){let G=-1;x&&x>0&&(G=setTimeout(()=>{this._callbacks=this._callbacks.filter(te=>te.timeoutId!==G),f()},x)),this._callbacks.push({doneCb:f,timeoutId:G,updateCb:O})}whenStable(f,x,O){if(O&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(f,x,O),this._runCallbacksIfReady()}registerApplication(f){this.registry.registerApplication(f,this)}unregisterApplication(f){this.registry.unregisterApplication(f)}findProviders(f,x,O){return[]}}return(i=o).\u0275fac=function(f){return new(f||i)(Ce(qc),Ce(ex),Ce(Jw))},i.\u0275prov=ya({token:i,factory:i.\u0275fac}),o})(),ex=(()=>{var i;class o{constructor(){this._applications=new Map}registerApplication(f,x){this._applications.set(f,x)}unregisterApplication(f){this._applications.delete(f)}unregisterAllApplications(){this._applications.clear()}getTestability(f){return this._applications.get(f)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(f,x=!0){var O,G;return null!==(O=null===(G=O_)||void 0===G?void 0:G.findTestabilityInTree(this,f,x))&&void 0!==O?O:null}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=ya({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();function L_(i){return!!i&&"function"==typeof i.then}function tx(i){return!!i&&"function"==typeof i.subscribe}const nx=new cs("");let B_=(()=>{var i;class o{constructor(){var f;this.initialized=!1,this.done=!1,this.donePromise=new Promise((x,O)=>{this.resolve=x,this.reject=O}),this.appInits=null!==(f=Ie(nx,{optional:!0}))&&void 0!==f?f:[]}runInitializers(){if(this.initialized)return;const f=[];for(const O of this.appInits){const G=O();if(L_(G))f.push(G);else if(tx(G)){const te=new Promise((pe,Ne)=>{G.subscribe({complete:pe,error:Ne})});f.push(te)}}const x=()=>{this.done=!0,this.resolve()};Promise.all(f).then(()=>{x()}).catch(O=>{this.reject(O)}),0===f.length&&x(),this.initialized=!0}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=ya({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const y8=new cs("");let Mg=(()=>{var i;class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ie(Sp),this.afterRenderEffectManager=Ie(Yv),this.zonelessEnabled=Ie(y2),this.externalTestViews=new Set,this.beforeRender=new Er.B,this.afterTick=new Er.B,this.componentTypes=[],this.components=[],this.isStable=Ie(Ks).hasPendingTasks.pipe((0,ji.T)(f=>!f)),this._injector=Ie(Gu)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(f,x){const O=f instanceof A6;if(!this._injector.get(B_).done)throw!O&&ge(f),new mi(405,!1);let te;te=O?f:this._injector.get(tv).resolveComponentFactory(f),this.componentTypes.push(te.componentType);const pe=function WE(i){return i.isBoundToModule}(te)?void 0:this._injector.get(fv),Ze=te.create(Zl.NULL,[],x||te.selector,pe),It=Ze.location.nativeElement,An=Ze.injector.get(Qw,null);return null==An||An.registerApplication(It),Ze.onDestroy(()=>{this.detachView(Ze.hostView),b8(this.components,Ze),null==An||An.unregisterApplication(It)}),this._loadComponent(Ze),Ze}tick(){this._tick(!0)}_tick(f){if(this._runningTick)throw new mi(101,!1);const x=Y(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(f)}catch(O){this.internalErrorHandler(O)}finally{this._runningTick=!1,Y(x),this.afterTick.next()}}detectChangesInAttachedViews(f){let x=null;this._injector.destroyed||(x=this._injector.get(Gv,null,{optional:!0}));let O=0;const G=this.afterRenderEffectManager;for(;O<10;){const Un=0===O;if(f||!Un){this.beforeRender.next(Un);for(let{_lView:$n,notifyErrorHandler:uo}of this._views)XE($n,uo,Un,this.zonelessEnabled)}else{var te,pe,Ne,Ze,It,An;null===(te=x)||void 0===te||null===(pe=(Ne=te).begin)||void 0===pe||pe.call(Ne),null===(Ze=x)||void 0===Ze||null===(It=(An=Ze).end)||void 0===It||It.call(An)}if(O++,G.executeInternalCallbacks(),!this.allViews.some(({_lView:$n})=>Ca($n))&&(G.execute(),!this.allViews.some(({_lView:$n})=>Ca($n))))break}}attachView(f){const x=f;this._views.push(x),x.attachToAppRef(this)}detachView(f){const x=f;b8(this._views,x),x.detachFromAppRef()}_loadComponent(f){this.attachView(f.hostView),this.tick(),this.components.push(f);const x=this._injector.get(y8,[]);[...this._bootstrapListeners,...x].forEach(O=>O(f))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(f=>f()),this._views.slice().forEach(f=>f.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(f){return this._destroyListeners.push(f),()=>b8(this._destroyListeners,f)}destroy(){if(this._destroyed)throw new mi(406,!1);const f=this._injector;f.destroy&&!f.destroyed&&f.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=ya({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function b8(i,o){const c=i.indexOf(o);c>-1&&i.splice(c,1)}function XE(i,o,c,f){(c||Ca(i))&&an(i,o,c&&!f?0:1)}class KE{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let YE=(()=>{var i;class o{compileModuleSync(f){return new Z5(f)}compileModuleAsync(f){return Promise.resolve(this.compileModuleSync(f))}compileModuleAndAllComponentsSync(f){const x=this.compileModuleSync(f),G=u0(Be(f).declarations).reduce((te,pe)=>{const Ne=Z(pe);return Ne&&te.push(new cv(Ne)),te},[]);return new KE(x,G)}compileModuleAndAllComponentsAsync(f){return Promise.resolve(this.compileModuleAndAllComponentsSync(f))}clearCache(){}clearCacheFor(f){}getModuleId(f){}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=ya({token:i,factory:i.\u0275fac,providedIn:"root"}),o})(),JE=(()=>{var i;class o{constructor(){this.zone=Ie(qc),this.changeDetectionScheduler=Ie(S4),this.applicationRef=Ie(Mg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var f;null===(f=this._onMicrotaskEmptySubscription)||void 0===f||f.unsubscribe()}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=ya({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function N_({ngZoneFactory:i,ignoreChangesOutsideZone:o}){var c;return null!==(c=i)&&void 0!==c||(i=()=>new qc(function F_(i){var o,c;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(o=null==i?void 0:i.eventCoalescing)&&void 0!==o&&o,shouldCoalesceRunChangeDetection:null!==(c=null==i?void 0:i.runCoalescing)&&void 0!==c&&c}}())),[{provide:qc,useFactory:i},{provide:Zc,multi:!0,useFactory:()=>{const f=Ie(JE,{optional:!0});return()=>f.initialize()}},{provide:Zc,multi:!0,useFactory:()=>{const f=Ie(nC);return()=>{f.initialize()}}},{provide:Sp,useFactory:tC},!0===o?{provide:C3,useValue:!0}:[]]}function tC(){const i=Ie(qc),o=Ie(s0);return c=>i.runOutsideAngular(()=>o.handleError(c))}let nC=(()=>{var i;class o{constructor(){this.subscription=new Wr.yU,this.initialized=!1,this.zone=Ie(qc),this.pendingTasks=Ie(Ks)}initialize(){if(this.initialized)return;this.initialized=!0;let f=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(f=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{qc.assertNotInAngularZone(),queueMicrotask(()=>{null!==f&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(f),f=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var x;qc.assertInAngularZone(),null!==(x=f)&&void 0!==x||(f=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=ya({token:i,factory:i.\u0275fac,providedIn:"root"}),o})(),h5=(()=>{var i;class o{constructor(){var f;this.appRef=Ie(Mg),this.taskService=Ie(Ks),this.ngZone=Ie(qc),this.zonelessEnabled=Ie(y2),this.disableScheduling=null!==(f=Ie(C3,{optional:!0}))&&void 0!==f&&f,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Wr.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||(this.disableScheduling=!this.zonelessEnabled&&(this.ngZone instanceof Xv||!this.zoneIsDefined))}notify(f){if(!this.zonelessEnabled&&5===f)return;switch(f){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const x=this.useMicrotaskScheduler?ov:iv;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=x(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=x(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&qc.isInAngularZone())}tick(f){if(this.runningTick||this.appRef.destroyed)return;const x=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(f)},void 0,this.schedulerTickApplyArgs)}catch(O){throw this.taskService.remove(x),O}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ov(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(x)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){var f;if(this.shouldRefreshViews=!1,this.runningTick=!1,null===(f=this.cancelScheduledCallback)||void 0===f||f.call(this),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const x=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(x)}}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=ya({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const w8=new cs("",{providedIn:"root",factory:()=>Ie(w8,Ls.Optional|Ls.SkipSelf)||function iC(){return typeof $localize<"u"&&$localize.locale||l6}()}),oC=new cs("",{providedIn:"root",factory:()=>"USD"}),$_=new cs("");let yv=null;function cC(){return!1}function uC(){}let mx=(()=>{class o{}return o.__NG_ELEMENT_ID__=dC,o})();function dC(i){return function hC(i,o,c){if(pd(i)&&!c){const f=Hr(i.index,o);return new im(f,f)}return 175&i.type?new im(o[ja],o):null}(wl(),Po(),!(16&~i))}class yx{constructor(){}supports(o){return X6(o)}create(o){return new vC(o)}}const gC=(i,o)=>o;class vC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||gC}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,f=this._removalsHead,x=0,O=null;for(;c||f;){const G=!f||c&&c.currentIndex<wx(f,x,O)?c:f,te=wx(G,x,O),pe=G.currentIndex;if(G===f)x--,f=f._nextRemoved;else if(c=c._next,null==G.previousIndex)x++;else{O||(O=[]);const Ne=te-x,Ze=pe-x;if(Ne!=Ze){for(let An=0;An<Ne;An++){const Un=An<O.length?O[An]:O[An]=0,$n=Un+An;Ze<=$n&&$n<Ne&&(O[An]=Un+1)}O[G.previousIndex]=Ze-Ne}}te!==pe&&o(G,te,pe)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!X6(o))throw new mi(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let x,O,G,c=this._itHead,f=!1;if(Array.isArray(o)){this.length=o.length;for(let te=0;te<this.length;te++)O=o[te],G=this._trackByFn(te,O),null!==c&&Object.is(c.trackById,G)?(f&&(c=this._verifyReinsertion(c,O,G,te)),Object.is(c.item,O)||this._addIdentityChange(c,O)):(c=this._mismatch(c,O,G,te),f=!0),c=c._next}else x=0,function oy(i,o){if(Array.isArray(i))for(let c=0;c<i.length;c++)o(i[c]);else{const c=i[Symbol.iterator]();let f;for(;!(f=c.next()).done;)o(f.value)}}(o,te=>{G=this._trackByFn(x,te),null!==c&&Object.is(c.trackById,G)?(f&&(c=this._verifyReinsertion(c,te,G,x)),Object.is(c.item,te)||this._addIdentityChange(c,te)):(c=this._mismatch(c,te,G,x),f=!0),c=c._next,x++}),this.length=x;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,f,x){let O;return null===o?O=this._itTail:(O=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,O,x)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(f,x))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,O,x)):o=this._addAfter(new _C(c,f),O,x),o}_verifyReinsertion(o,c,f,x){let O=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==O?o=this._reinsertAfter(O,o._prev,x):o.currentIndex!=x&&(o.currentIndex=x,this._addToMoves(o,x)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const x=o._prevRemoved,O=o._nextRemoved;return null===x?this._removalsHead=O:x._nextRemoved=O,null===O?this._removalsTail=x:O._prevRemoved=x,this._insertAfter(o,c,f),this._addToMoves(o,f),o}_moveAfter(o,c,f){return this._unlink(o),this._insertAfter(o,c,f),this._addToMoves(o,f),o}_addAfter(o,c,f){return this._insertAfter(o,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,f){const x=null===c?this._itHead:c._next;return o._next=x,o._prev=c,null===x?this._itTail=o:x._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new bx),this._linkedRecords.put(o),o.currentIndex=f,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,f=o._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bx),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class _C{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yC{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,o))return f;return null}remove(o){const c=o._prevDup,f=o._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class bx{constructor(){this.map=new Map}put(o){const c=o.trackById;let f=this.map.get(c);f||(f=new yC,this.map.set(c,f)),f.add(o)}get(o,c){const x=this.map.get(o);return x?x.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wx(i,o,c){const f=i.previousIndex;if(null===f)return f;let x=0;return c&&f<c.length&&(x=c[f]),f+o+x}class xx{constructor(){}supports(o){return o instanceof Map||J5(o)}create(){return new bC}}class bC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||J5(o)))throw new mi(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(f,x)=>{if(c&&c.key===x)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const O=this._getOrCreateRecordForKey(x,f);c=this._insertBeforeOrAppend(c,O)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const f=o._prev;return c._next=o,c._prev=f,o._prev=c,f&&(f._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const x=this._records.get(o);this._maybeAddToChanges(x,c);const O=x._prev,G=x._next;return O&&(O._next=G),G&&(G._prev=O),x._next=null,x._prev=null,x}const f=new wC(o);return this._records.set(o,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(f=>c(o[f],f))}}class wC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ix(){return new q_([new yx])}let q_=(()=>{var i;class o{constructor(f){this.factories=f}static create(f,x){if(null!=x){const O=x.factories.slice();f=f.concat(O)}return new o(f)}static extend(f){return{provide:o,useFactory:x=>o.create(f,x||Ix()),deps:[[o,new la,new $r]]}}find(f){const x=this.factories.find(O=>O.supports(f));if(null!=x)return x;throw new mi(901,!1)}}return(i=o).\u0275prov=ya({token:i,providedIn:"root",factory:Ix}),o})();function Ex(){return new X_([new xx])}let X_=(()=>{var i;class o{constructor(f){this.factories=f}static create(f,x){if(x){const O=x.factories.slice();f=f.concat(O)}return new o(f)}static extend(f){return{provide:o,useFactory:x=>o.create(f,x||Ex()),deps:[[o,new la,new $r]]}}find(f){const x=this.factories.find(O=>O.supports(f));if(x)return x;throw new mi(901,!1)}}return(i=o).\u0275prov=ya({token:i,providedIn:"root",factory:Ex}),o})();function NC(i){try{const{rootComponent:o,appProviders:c,platformProviders:f}=i,x=function lC(i=[]){if(yv)return yv;const o=function hx(i=[],o){return Zl.create({name:o,providers:[{provide:Kh,useValue:"platform"},{provide:$_,useValue:new Set([()=>yv=null])},...i]})}(i);return yv=o,function ix(){!function Ke(i){oo=i}(()=>{throw new mi(600,!1)})}(),function px(i){const o=i.get(Ad,null);null==o||o.forEach(c=>c())}(o),o}(f),O=[N_({}),{provide:S4,useExisting:h5},...c||[]],te=new N8({providers:O,parent:x,debugName:"",runEnvironmentInitializers:!1}).injector,pe=te.get(qc);return pe.run(()=>{te.resolveInjectorInitializers();const Ne=te.get(s0,null);let Ze;pe.runOutsideAngular(()=>{Ze=pe.onError.subscribe({next:Un=>{Ne.handleError(Un)}})});const It=()=>te.destroy(),An=x.get($_);return An.add(It),te.onDestroy(()=>{Ze.unsubscribe(),An.delete(It)}),function ox(i,o,c){try{const f=c();return L_(f)?f.catch(x=>{throw o.runOutsideAngular(()=>i.handleError(x)),x}):f}catch(f){throw o.runOutsideAngular(()=>i.handleError(f)),f}}(Ne,pe,()=>{const Un=te.get(B_);return Un.runInitializers(),Un.donePromise.then(()=>{!function db(i){"string"==typeof i&&(ub=i.toLowerCase().replace(/_/g,"-"))}(te.get(w8,l6)||l6);const uo=te.get(Mg);return void 0!==o&&uo.bootstrap(o),uo})})})}catch(o){return Promise.reject(o)}}const $x=new cs("");function rk(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function ak(i,o){f0("NgSignals");const c=function Et(i){const o=Object.create(Qt);o.computation=i;const c=()=>{if(Ut(o),C(o),o.value===on)throw o.error;return o.value};return c[We]=o,c}(i);return null!=o&&o.equal&&(c[We].equal=o.equal),c}function lk(i){const o=Y(null);try{return i()}finally{Y(o)}}function fk(i,o){const c=Z(i),f=o.elementInjector||Sh();return new cv(c).create(f,o.projectableNodes,o.hostElement,o.environmentInjector)}function mk(i){const o=Z(i);if(!o)return null;const c=new cv(o);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},7440:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{MW:()=>Ut,Wp:()=>rn,XU:()=>l,gL:()=>We});var V=_e(2214),re=_e(3953),ne=_e(5407);class l{constructor(Ot){return Ot}}class We{constructor(){return(0,V.Dk)()}}const qt=new re.nKC("angularfire2._apps"),jt={provide:l,useFactory:function ft(xt){return xt&&1===xt.length?xt[0]:new l((0,V.Sx)())},deps:[[new re.Xx1,qt]]},wt={provide:We,deps:[[new re.Xx1,qt]]};function C(xt){return(Ot,wn)=>{const Pn=wn.get(re.Agw);(0,V.KO)("angularfire",ne.xv.full,"core"),(0,V.KO)("angularfire",ne.xv.full,"app"),(0,V.KO)("angular",re.xvI.full,Pn.toString());const Ii=Ot.runOutsideAngular(()=>xt(wn));return new l(Ii)}}function Ut(xt,...Ot){return(0,re.EmA)([jt,wt,{provide:qt,useFactory:C(xt),multi:!0,deps:[re.SKi,re.zZn,ne.u0,...Ot]}])}const rn=(0,ne.S3)(V.Wp,!0)},5621:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{DF:()=>qt,J1:()=>ji,Nj:()=>ft,Wm:()=>Et,_q:()=>xn,eJ:()=>Pn,x9:()=>Xi,xI:()=>Te,zK:()=>ui});var V=_e(5407),re=_e(3953),ne=_e(7440),l=_e(2214),We=_e(2802);const Y="auth";class ft{constructor(hs){return hs}}class qt{constructor(){return(0,V.CA)(Y)}}const wt=new re.nKC("angularfire2.auth-instances");function At(Jn){return(hs,jr)=>{const Ns=hs.runOutsideAngular(()=>Jn(jr));return new ft(Ns)}}const Ut={provide:qt,deps:[[new re.Xx1,wt]]},yt={provide:ft,useFactory:function C(Jn,hs){const jr=(0,V.lR)(Y,Jn,hs);return jr&&new ft(jr)},deps:[[new re.Xx1,wt],ne.XU]};function xn(Jn,...hs){return(0,l.KO)("angularfire",V.xv.full,"auth"),(0,re.EmA)([yt,Ut,{provide:wt,useFactory:At(Jn),multi:!0,deps:[re.SKi,re.zZn,V.u0,ne.gL,[new re.Xx1,V.Jv],...hs]}])}const Pn=(0,V.S3)(We.eJ,!0),Et=(0,V.S3)(We.Wm,!0),Te=(0,V.S3)(We.xI,!0),ji=(0,V.S3)(We.J1,!0),ui=(0,V.S3)(We.zK,!0),Xi=(0,V.S3)(We.x9,!0)},9967:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{_7:()=>Qt,rJ:()=>So,xs:()=>Dr,Bg:()=>Er,aU:()=>Ye,hV:()=>un});var V=_e(5407),re=_e(3953),ne=_e(7440),l=_e(5621),We=_e(2214),Y=_e(3273),ft=_e(1985),qt=_e(6354),jt=function(){return jt=Object.assign||function(bi){for(var kr,Vr=1,is=arguments.length;Vr<is;Vr++)for(var Es in kr=arguments[Vr])Object.prototype.hasOwnProperty.call(kr,Es)&&(bi[Es]=kr[Es]);return bi},jt.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var C={includeMetadataChanges:!1};function At(Cr,bi){return void 0===bi&&(bi=C),new ft.c(function(kr){return{unsubscribe:(0,Y.aQ)(Cr,bi,{next:kr.next.bind(kr),error:kr.error.bind(kr),complete:kr.complete.bind(kr)})}})}function yt(Cr,bi){return void 0===bi&&(bi={}),function Ut(Cr){return At(Cr,{includeMetadataChanges:!0})}(Cr).pipe((0,qt.T)(function(kr){return fn(kr,bi)}))}function fn(Cr,bi){var kr;void 0===bi&&(bi={});var Vr=Cr.data(bi);return Cr.exists()&&"object"==typeof Vr&&null!==Vr&&bi.idField?jt(jt({},Vr),((kr={})[bi.idField]=Cr.id,kr)):Vr}function kn(Cr,bi){return void 0===bi&&(bi={}),function Pn(Cr){return At(Cr,{includeMetadataChanges:!0}).pipe((0,qt.T)(function(bi){return bi.docs}))}(Cr).pipe((0,qt.T)(function(kr){return kr.map(function(Vr){return fn(Vr,bi)})}))}class Qt{constructor(bi){return bi}}const En="firestore",Ke=new re.nKC("angularfire2.firestore-instances");function Ge(Cr){return(bi,kr)=>{const Vr=bi.runOutsideAngular(()=>Cr(kr));return new Qt(Vr)}}const et={provide:class oo{constructor(){return(0,V.CA)(En)}},deps:[[new re.Xx1,Ke]]},zt={provide:Qt,useFactory:function Ae(Cr,bi){const kr=(0,V.lR)(En,Cr,bi);return kr&&new Qt(kr)},deps:[[new re.Xx1,Ke],ne.XU]};function un(Cr,...bi){return(0,We.KO)("angularfire",V.xv.full,"fst"),(0,re.EmA)([zt,et,{provide:Ke,useFactory:Ge(Cr),multi:!0,deps:[re.SKi,re.zZn,V.u0,ne.gL,[new re.Xx1,l.DF],[new re.Xx1,V.Jv],...bi]}])}const Dr=(0,V.S3)(kn,!0),Er=(0,V.S3)(yt,!0),So=(0,V.S3)(Y.rJ,!0),Ye=(0,V.S3)(Y.aU,!0)},5407:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{xv:()=>fn,u0:()=>wn,Jv:()=>ei,CA:()=>ht,lR:()=>rn,S3:()=>oo});var V=_e(9842),re=_e(3953),ne=_e(2214),l=_e(6780),Y=_e(3604);const qt=new class ft extends Y.q{}(class We extends l.R{constructor(Ke,Ae){super(Ke,Ae),this.scheduler=Ke,this.work=Ae}schedule(Ke,Ae=0){return Ae>0?super.schedule(Ke,Ae):(this.delay=Ae,this.state=Ke,this.scheduler.flush(this),this)}execute(Ke,Ae){return Ae>0||this.closed?super.execute(Ke,Ae):this._execute(Ke,Ae)}requestAsyncId(Ke,Ae,Ge=0){return null!=Ge&&Ge>0||null==Ge&&this.delay>0?super.requestAsyncId(Ke,Ae,Ge):(Ke.flush(this),0)}});var wt=_e(3236),C=_e(1985),At=_e(8141),Ut=_e(6745),yt=_e(941);const fn=new re.RxE("ANGULARFIRE2_VERSION");function rn(Vn,Ke,Ae){if(Ke){if(1===Ke.length)return Ke[0];const zt=Ke.filter(qn=>qn.app===Ae);if(1===zt.length)return zt[0]}return Ae.container.getProvider(Vn).getImmediate({optional:!0})}const ht=(Vn,Ke)=>{const Ae=Ke?[Ke]:(0,ne.Dk)(),Ge=[];return Ae.forEach(et=>{et.container.getProvider(Vn).instances.forEach(qn=>{Ge.includes(qn)||Ge.push(qn)})}),Ge};class ei{constructor(){return ht(Mn)}}const Mn="app-check";function Zn(){}class xt{constructor(Ke,Ae=qt){(0,V.A)(this,"zone",void 0),(0,V.A)(this,"delegate",void 0),this.zone=Ke,this.delegate=Ae}now(){return this.delegate.now()}schedule(Ke,Ae,Ge){const et=this.zone;return this.delegate.schedule(function(qn){et.runGuarded(()=>{Ke.apply(this,[qn])})},Ae,Ge)}}class Ot{constructor(Ke){(0,V.A)(this,"zone",void 0),(0,V.A)(this,"task",null),this.zone=Ke}call(Ke,Ae){const Ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zn,{},Zn,Zn)),Ae.pipe((0,At.M)({next:Ge,complete:Ge,error:Ge})).subscribe(Ke).add(Ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wn=(()=>{var Vn;class Ke{constructor(Ge){(0,V.A)(this,"ngZone",void 0),(0,V.A)(this,"outsideAngular",void 0),(0,V.A)(this,"insideAngular",void 0),this.ngZone=Ge,this.outsideAngular=Ge.runOutsideAngular(()=>new xt(Zone.current)),this.insideAngular=Ge.run(()=>new xt(Zone.current,wt.E)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Vn=Ke,(0,V.A)(Ke,"\u0275fac",function(Ge){return new(Ge||Vn)(re.KVO(re.SKi))}),(0,V.A)(Ke,"\u0275prov",re.jDH({token:Vn,factory:Vn.\u0275fac,providedIn:"root"})),Ke})();function Pn(){const Vn=globalThis.\u0275AngularFireScheduler;if(!Vn)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Vn}function Et(Vn){return Pn().ngZone.run(()=>Vn())}function on(Vn){return function Qt(Vn){return function(Ae){return(Ae=Ae.lift(new Ot(Vn.ngZone))).pipe((0,Ut._)(Vn.outsideAngular),(0,yt.Q)(Vn.insideAngular))}}(Pn())(Vn)}const En=(Vn,Ke)=>function(){const Ge=arguments;return Ke&&setTimeout(()=>{"scheduled"===Ke.state&&Ke.invoke()},10),Et(()=>Vn.apply(void 0,Ge))},oo=(Vn,Ke)=>function(){let Ae;const Ge=arguments;for(let zt=0;zt<arguments.length;zt++)"function"==typeof Ge[zt]&&(Ke&&(Ae||(Ae=Et(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zn,{},Zn,Zn)))),Ge[zt]=En(Ge[zt],Ae));const et=function Ii(Vn){return Pn().ngZone.runOutsideAngular(()=>Vn())}(()=>Vn.apply(this,Ge));if(!Ke){if(et instanceof C.c){const zt=Pn();return et.pipe((0,Ut._)(zt.outsideAngular),(0,yt.Q)(zt.insideAngular))}return Et(()=>et)}return et instanceof C.c?et.pipe(on):et instanceof Promise?Et(()=>new Promise((zt,qn)=>et.then(un=>Et(()=>zt(un)),un=>Et(()=>qn(un))))):"function"==typeof et&&Ae?function(){return setTimeout(()=>{Ae&&"scheduled"===Ae.state&&Ae.invoke()},10),et.apply(this,arguments)}:Et(()=>et)}},4341:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{me:()=>xt,Yp:()=>sa,MJ:()=>Ra,l_:()=>Yn,JD:()=>Ir,gE:()=>Nn,j4:()=>li,YN:()=>Ll,zX:()=>Ga,VZ:()=>uc,cz:()=>Pn,kq:()=>xn,vO:()=>po,BC:()=>So,cb:()=>ro,X1:()=>ya,k0:()=>kn,qT:()=>uu});var V=_e(3953),re=_e(177),ne=_e(8455),l=_e(1985),We=_e(3073),Y=_e(8750),ft=_e(9326),qt=_e(4360),jt=_e(6450),wt=_e(8496),At=_e(1413),Ut=_e(6354);let yt=(()=>{var Xe;class Se{constructor(He,Zt){this._renderer=He,this._elementRef=Zt,this.onChange=Uo=>{},this.onTouched=()=>{}}setProperty(He,Zt){this._renderer.setProperty(this._elementRef.nativeElement,He,Zt)}registerOnTouched(He){this.onTouched=He}registerOnChange(He){this.onChange=He}setDisabledState(He){this.setProperty("disabled",He)}}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)(V.rXU(V.sFG),V.rXU(V.aKT))},Xe.\u0275dir=V.FsC({type:Xe}),Se})(),fn=(()=>{var Xe;class Se extends yt{}return(Xe=Se).\u0275fac=(()=>{let vt;return function(Zt){return(vt||(vt=V.xGo(Xe)))(Zt||Xe)}})(),Xe.\u0275dir=V.FsC({type:Xe,features:[V.Vt3]}),Se})();const xn=new V.nKC(""),ei={provide:xn,useExisting:(0,V.Rfq)(()=>xt),multi:!0},Zn=new V.nKC("");let xt=(()=>{var Xe;class Se extends yt{constructor(He,Zt,Uo){super(He,Zt),this._compositionMode=Uo,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Mn(){const Xe=(0,re.QT)()?(0,re.QT)().getUserAgent():"";return/android (\d+)/.test(Xe.toLowerCase())}())}writeValue(He){this.setProperty("value",null==He?"":He)}_handleInput(He){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(He)}_compositionStart(){this._composing=!0}_compositionEnd(He){this._composing=!1,this._compositionMode&&this.onChange(He)}}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)(V.rXU(V.sFG),V.rXU(V.aKT),V.rXU(Zn,8))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(He,Zt){1&He&&V.bIt("input",function(Tr){return Zt._handleInput(Tr.target.value)})("blur",function(){return Zt.onTouched()})("compositionstart",function(){return Zt._compositionStart()})("compositionend",function(Tr){return Zt._compositionEnd(Tr.target.value)})},features:[V.Jv_([ei]),V.Vt3]}),Se})();function Ot(Xe){return null==Xe||("string"==typeof Xe||Array.isArray(Xe))&&0===Xe.length}function wn(Xe){return null!=Xe&&"number"==typeof Xe.length}const Pn=new V.nKC(""),Ii=new V.nKC(""),Et=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kn{static min(Se){return Te(Se)}static max(Se){return on(Se)}static required(Se){return function Qt(Xe){return Ot(Xe.value)?{required:!0}:null}(Se)}static requiredTrue(Se){return function En(Xe){return!0===Xe.value?null:{required:!0}}(Se)}static email(Se){return function oo(Xe){return Ot(Xe.value)||Et.test(Xe.value)?null:{email:!0}}(Se)}static minLength(Se){return function Vn(Xe){return Se=>Ot(Se.value)||!wn(Se.value)?null:Se.value.length<Xe?{minlength:{requiredLength:Xe,actualLength:Se.value.length}}:null}(Se)}static maxLength(Se){return function Ke(Xe){return Se=>wn(Se.value)&&Se.value.length>Xe?{maxlength:{requiredLength:Xe,actualLength:Se.value.length}}:null}(Se)}static pattern(Se){return function Ae(Xe){if(!Xe)return Ge;let Se,vt;return"string"==typeof Xe?(vt="","^"!==Xe.charAt(0)&&(vt+="^"),vt+=Xe,"$"!==Xe.charAt(Xe.length-1)&&(vt+="$"),Se=new RegExp(vt)):(vt=Xe.toString(),Se=Xe),He=>{if(Ot(He.value))return null;const Zt=He.value;return Se.test(Zt)?null:{pattern:{requiredPattern:vt,actualValue:Zt}}}}(Se)}static nullValidator(Se){return null}static compose(Se){return dr(Se)}static composeAsync(Se){return Dr(Se)}}function Te(Xe){return Se=>{if(Ot(Se.value)||Ot(Xe))return null;const vt=parseFloat(Se.value);return!isNaN(vt)&&vt<Xe?{min:{min:Xe,actual:Se.value}}:null}}function on(Xe){return Se=>{if(Ot(Se.value)||Ot(Xe))return null;const vt=parseFloat(Se.value);return!isNaN(vt)&&vt>Xe?{max:{max:Xe,actual:Se.value}}:null}}function Ge(Xe){return null}function et(Xe){return null!=Xe}function zt(Xe){return(0,V.jNT)(Xe)?(0,ne.H)(Xe):Xe}function qn(Xe){let Se={};return Xe.forEach(vt=>{Se=null!=vt?{...Se,...vt}:Se}),0===Object.keys(Se).length?null:Se}function un(Xe,Se){return Se.map(vt=>vt(Xe))}function Qi(Xe){return Xe.map(Se=>function go(Xe){return!Xe.validate}(Se)?Se:vt=>Se.validate(vt))}function dr(Xe){if(!Xe)return null;const Se=Xe.filter(et);return 0==Se.length?null:function(vt){return qn(un(vt,Se))}}function Go(Xe){return null!=Xe?dr(Qi(Xe)):null}function Dr(Xe){if(!Xe)return null;const Se=Xe.filter(et);return 0==Se.length?null:function(vt){return function C(...Xe){const Se=(0,ft.ms)(Xe),{args:vt,keys:He}=(0,We.D)(Xe),Zt=new l.c(Uo=>{const{length:Tr}=vt;if(!Tr)return void Uo.complete();const Wa=new Array(Tr);let _l=Tr,Pc=Tr;for(let Xa=0;Xa<Tr;Xa++){let cs=!1;(0,Y.Tg)(vt[Xa]).subscribe((0,qt._)(Uo,_c=>{cs||(cs=!0,Pc--),Wa[Xa]=_c},()=>_l--,void 0,()=>{(!_l||!cs)&&(Pc||Uo.next(He?(0,wt.e)(He,Wa):Wa),Uo.complete())}))}});return Se?Zt.pipe((0,jt.I)(Se)):Zt}(un(vt,Se).map(zt)).pipe((0,Ut.T)(qn))}}function cr(Xe){return null!=Xe?Dr(Qi(Xe)):null}function Ei(Xe,Se){return null===Xe?[Se]:Array.isArray(Xe)?[...Xe,Se]:[Xe,Se]}function ko(Xe){return Xe._rawValidators}function Er(Xe){return Xe._rawAsyncValidators}function Wr(Xe){return Xe?Array.isArray(Xe)?Xe:[Xe]:[]}function ji(Xe,Se){return Array.isArray(Xe)?Xe.includes(Se):Xe===Se}function vi(Xe,Se){const vt=Wr(Se);return Wr(Xe).forEach(Zt=>{ji(vt,Zt)||vt.push(Zt)}),vt}function Yi(Xe,Se){return Wr(Se).filter(vt=>!ji(Xe,vt))}class ui{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Se){this._rawValidators=Se||[],this._composedValidatorFn=Go(this._rawValidators)}_setAsyncValidators(Se){this._rawAsyncValidators=Se||[],this._composedAsyncValidatorFn=cr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Se){this._onDestroyCallbacks.push(Se)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Se=>Se()),this._onDestroyCallbacks=[]}reset(Se=void 0){this.control&&this.control.reset(Se)}hasError(Se,vt){return!!this.control&&this.control.hasError(Se,vt)}getError(Se,vt){return this.control?this.control.getError(Se,vt):null}}class Ni extends ui{get formDirective(){return null}get path(){return null}}class po extends ui{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xi{constructor(Se){this._cd=Se}get isTouched(){var Se,vt,He;return null===(Se=this._cd)||void 0===Se||null===(Se=Se.control)||void 0===Se||null===(vt=Se._touched)||void 0===vt||vt.call(Se),!(null===(He=this._cd)||void 0===He||null===(He=He.control)||void 0===He||!He.touched)}get isUntouched(){var Se;return!(null===(Se=this._cd)||void 0===Se||null===(Se=Se.control)||void 0===Se||!Se.untouched)}get isPristine(){var Se,vt,He;return null===(Se=this._cd)||void 0===Se||null===(Se=Se.control)||void 0===Se||null===(vt=Se._pristine)||void 0===vt||vt.call(Se),!(null===(He=this._cd)||void 0===He||null===(He=He.control)||void 0===He||!He.pristine)}get isDirty(){var Se;return!(null===(Se=this._cd)||void 0===Se||null===(Se=Se.control)||void 0===Se||!Se.dirty)}get isValid(){var Se,vt,He;return null===(Se=this._cd)||void 0===Se||null===(Se=Se.control)||void 0===Se||null===(vt=Se._status)||void 0===vt||vt.call(Se),!(null===(He=this._cd)||void 0===He||null===(He=He.control)||void 0===He||!He.valid)}get isInvalid(){var Se;return!(null===(Se=this._cd)||void 0===Se||null===(Se=Se.control)||void 0===Se||!Se.invalid)}get isPending(){var Se;return!(null===(Se=this._cd)||void 0===Se||null===(Se=Se.control)||void 0===Se||!Se.pending)}get isSubmitted(){var Se,vt,He;return null===(Se=this._cd)||void 0===Se||null===(vt=Se._submitted)||void 0===vt||vt.call(Se),!(null===(He=this._cd)||void 0===He||!He.submitted)}}let So=(()=>{var Xe;class Se extends Xi{constructor(He){super(He)}}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)(V.rXU(po,2))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(He,Zt){2&He&&V.AVh("ng-untouched",Zt.isUntouched)("ng-touched",Zt.isTouched)("ng-pristine",Zt.isPristine)("ng-dirty",Zt.isDirty)("ng-valid",Zt.isValid)("ng-invalid",Zt.isInvalid)("ng-pending",Zt.isPending)},features:[V.Vt3]}),Se})(),ro=(()=>{var Xe;class Se extends Xi{constructor(He){super(He)}}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)(V.rXU(Ni,10))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(He,Zt){2&He&&V.AVh("ng-untouched",Zt.isUntouched)("ng-touched",Zt.isTouched)("ng-pristine",Zt.isPristine)("ng-dirty",Zt.isDirty)("ng-valid",Zt.isValid)("ng-invalid",Zt.isInvalid)("ng-pending",Zt.isPending)("ng-submitted",Zt.isSubmitted)},features:[V.Vt3]}),Se})();const ni="VALID",Ai="INVALID",Kn="PENDING",kt="DISABLED";class mt{}class Ye extends mt{constructor(Se,vt){super(),this.value=Se,this.source=vt}}class Tt extends mt{constructor(Se,vt){super(),this.pristine=Se,this.source=vt}}class Jt extends mt{constructor(Se,vt){super(),this.touched=Se,this.source=vt}}class Ln extends mt{constructor(Se,vt){super(),this.status=Se,this.source=vt}}class Lt extends mt{constructor(Se){super(),this.source=Se}}class Ee extends mt{constructor(Se){super(),this.source=Se}}function ue(Xe){return(it(Xe)?Xe.validators:Xe)||null}function we(Xe,Se){return(it(Se)?Se.asyncValidators:Xe)||null}function it(Xe){return null!=Xe&&!Array.isArray(Xe)&&"object"==typeof Xe}function Xt(Xe,Se,vt){const He=Xe.controls;if(!(Se?Object.keys(He):He).length)throw new V.wOt(1e3,"");if(!He[vt])throw new V.wOt(1001,"")}function Cn(Xe,Se,vt){Xe._forEachChild((He,Zt)=>{if(void 0===vt[Zt])throw new V.wOt(1002,"")})}class dn{constructor(Se,vt){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,V.EWP)(()=>this.statusReactive()),this.statusReactive=(0,V.vPA)(void 0),this._pristine=(0,V.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,V.vPA)(!0),this._touched=(0,V.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,V.vPA)(!1),this._events=new At.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(Se),this._assignAsyncValidators(vt)}get validator(){return this._composedValidatorFn}set validator(Se){this._rawValidators=this._composedValidatorFn=Se}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Se){this._rawAsyncValidators=this._composedAsyncValidatorFn=Se}get parent(){return this._parent}get status(){return(0,V.O8t)(this.statusReactive)}set status(Se){(0,V.O8t)(()=>this.statusReactive.set(Se))}get valid(){return this.status===ni}get invalid(){return this.status===Ai}get pending(){return this.status==Kn}get disabled(){return this.status===kt}get enabled(){return this.status!==kt}get pristine(){return(0,V.O8t)(this.pristineReactive)}set pristine(Se){(0,V.O8t)(()=>this.pristineReactive.set(Se))}get dirty(){return!this.pristine}get touched(){return(0,V.O8t)(this.touchedReactive)}set touched(Se){(0,V.O8t)(()=>this.touchedReactive.set(Se))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Se){this._assignValidators(Se)}setAsyncValidators(Se){this._assignAsyncValidators(Se)}addValidators(Se){this.setValidators(vi(Se,this._rawValidators))}addAsyncValidators(Se){this.setAsyncValidators(vi(Se,this._rawAsyncValidators))}removeValidators(Se){this.setValidators(Yi(Se,this._rawValidators))}removeAsyncValidators(Se){this.setAsyncValidators(Yi(Se,this._rawAsyncValidators))}hasValidator(Se){return ji(this._rawValidators,Se)}hasAsyncValidator(Se){return ji(this._rawAsyncValidators,Se)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Se={}){var vt;const He=!1===this.touched;this.touched=!0;const Zt=null!==(vt=Se.sourceControl)&&void 0!==vt?vt:this;this._parent&&!Se.onlySelf&&this._parent.markAsTouched({...Se,sourceControl:Zt}),He&&!1!==Se.emitEvent&&this._events.next(new Jt(!0,Zt))}markAllAsTouched(Se={}){this.markAsTouched({onlySelf:!0,emitEvent:Se.emitEvent,sourceControl:this}),this._forEachChild(vt=>vt.markAllAsTouched(Se))}markAsUntouched(Se={}){var vt;const He=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const Zt=null!==(vt=Se.sourceControl)&&void 0!==vt?vt:this;this._forEachChild(Uo=>{Uo.markAsUntouched({onlySelf:!0,emitEvent:Se.emitEvent,sourceControl:Zt})}),this._parent&&!Se.onlySelf&&this._parent._updateTouched(Se,Zt),He&&!1!==Se.emitEvent&&this._events.next(new Jt(!1,Zt))}markAsDirty(Se={}){var vt;const He=!0===this.pristine;this.pristine=!1;const Zt=null!==(vt=Se.sourceControl)&&void 0!==vt?vt:this;this._parent&&!Se.onlySelf&&this._parent.markAsDirty({...Se,sourceControl:Zt}),He&&!1!==Se.emitEvent&&this._events.next(new Tt(!1,Zt))}markAsPristine(Se={}){var vt;const He=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const Zt=null!==(vt=Se.sourceControl)&&void 0!==vt?vt:this;this._forEachChild(Uo=>{Uo.markAsPristine({onlySelf:!0,emitEvent:Se.emitEvent})}),this._parent&&!Se.onlySelf&&this._parent._updatePristine(Se,Zt),He&&!1!==Se.emitEvent&&this._events.next(new Tt(!0,Zt))}markAsPending(Se={}){var vt;this.status=Kn;const He=null!==(vt=Se.sourceControl)&&void 0!==vt?vt:this;!1!==Se.emitEvent&&(this._events.next(new Ln(this.status,He)),this.statusChanges.emit(this.status)),this._parent&&!Se.onlySelf&&this._parent.markAsPending({...Se,sourceControl:He})}disable(Se={}){var vt;const He=this._parentMarkedDirty(Se.onlySelf);this.status=kt,this.errors=null,this._forEachChild(Uo=>{Uo.disable({...Se,onlySelf:!0})}),this._updateValue();const Zt=null!==(vt=Se.sourceControl)&&void 0!==vt?vt:this;!1!==Se.emitEvent&&(this._events.next(new Ye(this.value,Zt)),this._events.next(new Ln(this.status,Zt)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Se,skipPristineCheck:He},this),this._onDisabledChange.forEach(Uo=>Uo(!0))}enable(Se={}){const vt=this._parentMarkedDirty(Se.onlySelf);this.status=ni,this._forEachChild(He=>{He.enable({...Se,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Se.emitEvent}),this._updateAncestors({...Se,skipPristineCheck:vt},this),this._onDisabledChange.forEach(He=>He(!1))}_updateAncestors(Se,vt){this._parent&&!Se.onlySelf&&(this._parent.updateValueAndValidity(Se),Se.skipPristineCheck||this._parent._updatePristine({},vt),this._parent._updateTouched({},vt))}setParent(Se){this._parent=Se}getRawValue(){return this.value}updateValueAndValidity(Se={}){var vt;if(this._setInitialStatus(),this._updateValue(),this.enabled){const Zt=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ni||this.status===Kn)&&this._runAsyncValidator(Zt,Se.emitEvent)}const He=null!==(vt=Se.sourceControl)&&void 0!==vt?vt:this;!1!==Se.emitEvent&&(this._events.next(new Ye(this.value,He)),this._events.next(new Ln(this.status,He)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Se.onlySelf&&this._parent.updateValueAndValidity({...Se,sourceControl:He})}_updateTreeValidity(Se={emitEvent:!0}){this._forEachChild(vt=>vt._updateTreeValidity(Se)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Se.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kt:ni}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Se,vt){if(this.asyncValidator){this.status=Kn,this._hasOwnPendingAsyncValidator={emitEvent:!1!==vt};const He=zt(this.asyncValidator(this));this._asyncValidationSubscription=He.subscribe(Zt=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(Zt,{emitEvent:vt,shouldHaveEmitted:Se})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){var Se,vt;this._asyncValidationSubscription.unsubscribe();const He=null!==(Se=null===(vt=this._hasOwnPendingAsyncValidator)||void 0===vt?void 0:vt.emitEvent)&&void 0!==Se&&Se;return this._hasOwnPendingAsyncValidator=null,He}return!1}setErrors(Se,vt={}){this.errors=Se,this._updateControlsErrors(!1!==vt.emitEvent,this,vt.shouldHaveEmitted)}get(Se){let vt=Se;return null==vt||(Array.isArray(vt)||(vt=vt.split(".")),0===vt.length)?null:vt.reduce((He,Zt)=>He&&He._find(Zt),this)}getError(Se,vt){const He=vt?this.get(vt):this;return He&&He.errors?He.errors[Se]:null}hasError(Se,vt){return!!this.getError(Se,vt)}get root(){let Se=this;for(;Se._parent;)Se=Se._parent;return Se}_updateControlsErrors(Se,vt,He){this.status=this._calculateStatus(),Se&&this.statusChanges.emit(this.status),(Se||He)&&this._events.next(new Ln(this.status,vt)),this._parent&&this._parent._updateControlsErrors(Se,vt,He)}_initObservables(){this.valueChanges=new V.bkB,this.statusChanges=new V.bkB}_calculateStatus(){return this._allControlsDisabled()?kt:this.errors?Ai:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Kn)?Kn:this._anyControlsHaveStatus(Ai)?Ai:ni}_anyControlsHaveStatus(Se){return this._anyControls(vt=>vt.status===Se)}_anyControlsDirty(){return this._anyControls(Se=>Se.dirty)}_anyControlsTouched(){return this._anyControls(Se=>Se.touched)}_updatePristine(Se,vt){const He=!this._anyControlsDirty(),Zt=this.pristine!==He;this.pristine=He,this._parent&&!Se.onlySelf&&this._parent._updatePristine(Se,vt),Zt&&this._events.next(new Tt(this.pristine,vt))}_updateTouched(Se={},vt){this.touched=this._anyControlsTouched(),this._events.next(new Jt(this.touched,vt)),this._parent&&!Se.onlySelf&&this._parent._updateTouched(Se,vt)}_registerOnCollectionChange(Se){this._onCollectionChange=Se}_setUpdateStrategy(Se){it(Se)&&null!=Se.updateOn&&(this._updateOn=Se.updateOn)}_parentMarkedDirty(Se){return!Se&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Se){return null}_assignValidators(Se){this._rawValidators=Array.isArray(Se)?Se.slice():Se,this._composedValidatorFn=function ae(Xe){return Array.isArray(Xe)?Go(Xe):Xe||null}(this._rawValidators)}_assignAsyncValidators(Se){this._rawAsyncValidators=Array.isArray(Se)?Se.slice():Se,this._composedAsyncValidatorFn=function Ue(Xe){return Array.isArray(Xe)?cr(Xe):Xe||null}(this._rawAsyncValidators)}}class Nn extends dn{constructor(Se,vt,He){super(ue(vt),we(He,vt)),this.controls=Se,this._initObservables(),this._setUpdateStrategy(vt),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Se,vt){return this.controls[Se]?this.controls[Se]:(this.controls[Se]=vt,vt.setParent(this),vt._registerOnCollectionChange(this._onCollectionChange),vt)}addControl(Se,vt,He={}){this.registerControl(Se,vt),this.updateValueAndValidity({emitEvent:He.emitEvent}),this._onCollectionChange()}removeControl(Se,vt={}){this.controls[Se]&&this.controls[Se]._registerOnCollectionChange(()=>{}),delete this.controls[Se],this.updateValueAndValidity({emitEvent:vt.emitEvent}),this._onCollectionChange()}setControl(Se,vt,He={}){this.controls[Se]&&this.controls[Se]._registerOnCollectionChange(()=>{}),delete this.controls[Se],vt&&this.registerControl(Se,vt),this.updateValueAndValidity({emitEvent:He.emitEvent}),this._onCollectionChange()}contains(Se){return this.controls.hasOwnProperty(Se)&&this.controls[Se].enabled}setValue(Se,vt={}){Cn(this,0,Se),Object.keys(Se).forEach(He=>{Xt(this,!0,He),this.controls[He].setValue(Se[He],{onlySelf:!0,emitEvent:vt.emitEvent})}),this.updateValueAndValidity(vt)}patchValue(Se,vt={}){null!=Se&&(Object.keys(Se).forEach(He=>{const Zt=this.controls[He];Zt&&Zt.patchValue(Se[He],{onlySelf:!0,emitEvent:vt.emitEvent})}),this.updateValueAndValidity(vt))}reset(Se={},vt={}){this._forEachChild((He,Zt)=>{He.reset(Se?Se[Zt]:null,{onlySelf:!0,emitEvent:vt.emitEvent})}),this._updatePristine(vt,this),this._updateTouched(vt,this),this.updateValueAndValidity(vt)}getRawValue(){return this._reduceChildren({},(Se,vt,He)=>(Se[He]=vt.getRawValue(),Se))}_syncPendingControls(){let Se=this._reduceChildren(!1,(vt,He)=>!!He._syncPendingControls()||vt);return Se&&this.updateValueAndValidity({onlySelf:!0}),Se}_forEachChild(Se){Object.keys(this.controls).forEach(vt=>{const He=this.controls[vt];He&&Se(He,vt)})}_setUpControls(){this._forEachChild(Se=>{Se.setParent(this),Se._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Se){for(const[vt,He]of Object.entries(this.controls))if(this.contains(vt)&&Se(He))return!0;return!1}_reduceValue(){return this._reduceChildren({},(vt,He,Zt)=>((He.enabled||this.disabled)&&(vt[Zt]=He.value),vt))}_reduceChildren(Se,vt){let He=Se;return this._forEachChild((Zt,Uo)=>{He=vt(He,Zt,Uo)}),He}_allControlsDisabled(){for(const Se of Object.keys(this.controls))if(this.controls[Se].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Se){return this.controls.hasOwnProperty(Se)?this.controls[Se]:null}}const jn=new V.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>di}),di="always";function Ki(Xe,Se,vt=di){var He,Zt;Xo(Xe,Se),Se.valueAccessor.writeValue(Xe.value),(Xe.disabled||"always"===vt)&&(null===(He=(Zt=Se.valueAccessor).setDisabledState)||void 0===He||He.call(Zt,Xe.disabled)),function es(Xe,Se){Se.valueAccessor.registerOnChange(vt=>{Xe._pendingValue=vt,Xe._pendingChange=!0,Xe._pendingDirty=!0,"change"===Xe.updateOn&&Pa(Xe,Se)})}(Xe,Se),function Jl(Xe,Se){const vt=(He,Zt)=>{Se.valueAccessor.writeValue(He),Zt&&Se.viewToModelUpdate(He)};Xe.registerOnChange(vt),Se._registerOnDestroy(()=>{Xe._unregisterOnChange(vt)})}(Xe,Se),function qr(Xe,Se){Se.valueAccessor.registerOnTouched(()=>{Xe._pendingTouched=!0,"blur"===Xe.updateOn&&Xe._pendingChange&&Pa(Xe,Se),"submit"!==Xe.updateOn&&Xe.markAsTouched()})}(Xe,Se),function Pi(Xe,Se){if(Se.valueAccessor.setDisabledState){const vt=He=>{Se.valueAccessor.setDisabledState(He)};Xe.registerOnDisabledChange(vt),Se._registerOnDestroy(()=>{Xe._unregisterOnDisabledChange(vt)})}}(Xe,Se)}function Kt(Xe,Se,vt=!0){const He=()=>{};Se.valueAccessor&&(Se.valueAccessor.registerOnChange(He),Se.valueAccessor.registerOnTouched(He)),pr(Xe,Se),Xe&&(Se._invokeOnDestroyCallbacks(),Xe._registerOnCollectionChange(()=>{}))}function oi(Xe,Se){Xe.forEach(vt=>{vt.registerOnValidatorChange&&vt.registerOnValidatorChange(Se)})}function Xo(Xe,Se){const vt=ko(Xe);null!==Se.validator?Xe.setValidators(Ei(vt,Se.validator)):"function"==typeof vt&&Xe.setValidators([vt]);const He=Er(Xe);null!==Se.asyncValidator?Xe.setAsyncValidators(Ei(He,Se.asyncValidator)):"function"==typeof He&&Xe.setAsyncValidators([He]);const Zt=()=>Xe.updateValueAndValidity();oi(Se._rawValidators,Zt),oi(Se._rawAsyncValidators,Zt)}function pr(Xe,Se){let vt=!1;if(null!==Xe){if(null!==Se.validator){const Zt=ko(Xe);if(Array.isArray(Zt)&&Zt.length>0){const Uo=Zt.filter(Tr=>Tr!==Se.validator);Uo.length!==Zt.length&&(vt=!0,Xe.setValidators(Uo))}}if(null!==Se.asyncValidator){const Zt=Er(Xe);if(Array.isArray(Zt)&&Zt.length>0){const Uo=Zt.filter(Tr=>Tr!==Se.asyncValidator);Uo.length!==Zt.length&&(vt=!0,Xe.setAsyncValidators(Uo))}}}const He=()=>{};return oi(Se._rawValidators,He),oi(Se._rawAsyncValidators,He),vt}function Pa(Xe,Se){Xe._pendingDirty&&Xe.markAsDirty(),Xe.setValue(Xe._pendingValue,{emitModelToViewChange:!1}),Se.viewToModelUpdate(Xe._pendingValue),Xe._pendingChange=!1}function Es(Xe,Se){if(!Xe.hasOwnProperty("model"))return!1;const vt=Xe.model;return!!vt.isFirstChange()||!Object.is(Se,vt.currentValue)}function xa(Xe,Se){if(!Se)return null;let vt,He,Zt;return Array.isArray(Se),Se.forEach(Uo=>{Uo.constructor===xt?vt=Uo:function wa(Xe){return Object.getPrototypeOf(Xe.constructor)===fn}(Uo)?He=Uo:Zt=Uo}),Zt||He||vt||null}function Eu(Xe,Se){const vt=Xe.indexOf(Se);vt>-1&&Xe.splice(vt,1)}function Ja(Xe){return"object"==typeof Xe&&null!==Xe&&2===Object.keys(Xe).length&&"value"in Xe&&"disabled"in Xe}Promise.resolve();const Ra=class extends dn{constructor(Se=null,vt,He){super(ue(vt),we(He,vt)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Se),this._setUpdateStrategy(vt),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),it(vt)&&(vt.nonNullable||vt.initialValueIsDefault)&&(this.defaultValue=Ja(Se)?Se.value:Se)}setValue(Se,vt={}){this.value=this._pendingValue=Se,this._onChange.length&&!1!==vt.emitModelToViewChange&&this._onChange.forEach(He=>He(this.value,!1!==vt.emitViewToModelChange)),this.updateValueAndValidity(vt)}patchValue(Se,vt={}){this.setValue(Se,vt)}reset(Se=this.defaultValue,vt={}){this._applyFormState(Se),this.markAsPristine(vt),this.markAsUntouched(vt),this.setValue(this.value,vt),this._pendingChange=!1}_updateValue(){}_anyControls(Se){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Se){this._onChange.push(Se)}_unregisterOnChange(Se){Eu(this._onChange,Se)}registerOnDisabledChange(Se){this._onDisabledChange.push(Se)}_unregisterOnDisabledChange(Se){Eu(this._onDisabledChange,Se)}_forEachChild(Se){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Se){Ja(Se)?(this.value=this._pendingValue=Se.value,Se.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Se}};Promise.resolve();let uu=(()=>{var Xe;class Se{}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Se})();const Dt=new V.nKC(""),Hn={provide:po,useExisting:(0,V.Rfq)(()=>Yn)};let Yn=(()=>{var Xe;class Se extends po{set isDisabled(He){}constructor(He,Zt,Uo,Tr,Wa){super(),this._ngModelWarningConfig=Tr,this.callSetDisabledState=Wa,this.update=new V.bkB,this._ngModelWarningSent=!1,this._setValidators(He),this._setAsyncValidators(Zt),this.valueAccessor=xa(0,Uo)}ngOnChanges(He){if(this._isControlChanged(He)){const Zt=He.form.previousValue;Zt&&Kt(Zt,this,!1),Ki(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Es(He,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Kt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(He){this.viewModel=He,this.update.emit(He)}_isControlChanged(He){return He.hasOwnProperty("form")}}return(Xe=Se)._ngModelWarningSentOnce=!1,Xe.\u0275fac=function(He){return new(He||Xe)(V.rXU(Pn,10),V.rXU(Ii,10),V.rXU(xn,10),V.rXU(Dt,8),V.rXU(jn,8))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[V.Jv_([Hn]),V.Vt3,V.OA$]}),Se})();const On={provide:Ni,useExisting:(0,V.Rfq)(()=>li)};let li=(()=>{var Xe;class Se extends Ni{get submitted(){return(0,V.O8t)(this._submittedReactive)}set submitted(He){this._submittedReactive.set(He)}constructor(He,Zt,Uo){super(),this.callSetDisabledState=Uo,this._submitted=(0,V.EWP)(()=>this._submittedReactive()),this._submittedReactive=(0,V.vPA)(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new V.bkB,this._setValidators(He),this._setAsyncValidators(Zt)}ngOnChanges(He){this._checkFormPresent(),He.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(He){const Zt=this.form.get(He.path);return Ki(Zt,He,this.callSetDisabledState),Zt.updateValueAndValidity({emitEvent:!1}),this.directives.push(He),Zt}getControl(He){return this.form.get(He.path)}removeControl(He){Kt(He.control||null,He,!1),function gl(Xe,Se){const vt=Xe.indexOf(Se);vt>-1&&Xe.splice(vt,1)}(this.directives,He)}addFormGroup(He){this._setUpFormContainer(He)}removeFormGroup(He){this._cleanUpFormContainer(He)}getFormGroup(He){return this.form.get(He.path)}addFormArray(He){this._setUpFormContainer(He)}removeFormArray(He){this._cleanUpFormContainer(He)}getFormArray(He){return this.form.get(He.path)}updateModel(He,Zt){this.form.get(He.path).setValue(Zt)}onSubmit(He){var Zt;return this._submittedReactive.set(!0),function Gs(Xe,Se){Xe._syncPendingControls(),Se.forEach(vt=>{const He=vt.control;"submit"===He.updateOn&&He._pendingChange&&(vt.viewToModelUpdate(He._pendingValue),He._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(He),this.form._events.next(new Lt(this.control)),"dialog"===(null==He||null===(Zt=He.target)||void 0===Zt?void 0:Zt.method)}onReset(){this.resetForm()}resetForm(He=void 0){this.form.reset(He),this._submittedReactive.set(!1),this.form._events.next(new Ee(this.form))}_updateDomValue(){this.directives.forEach(He=>{const Zt=He.control,Uo=this.form.get(He.path);Zt!==Uo&&(Kt(Zt||null,He),(Xe=>Xe instanceof Ra)(Uo)&&(Ki(Uo,He,this.callSetDisabledState),He.control=Uo))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(He){const Zt=this.form.get(He.path);(function ru(Xe,Se){Xo(Xe,Se)})(Zt,He),Zt.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(He){if(this.form){const Zt=this.form.get(He.path);Zt&&function Oa(Xe,Se){return pr(Xe,Se)}(Zt,He)&&Zt.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xo(this.form,this),this._oldForm&&pr(this._oldForm,this)}_checkFormPresent(){}}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)(V.rXU(Pn,10),V.rXU(Ii,10),V.rXU(jn,8))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formGroup",""]],hostBindings:function(He,Zt){1&He&&V.bIt("submit",function(Tr){return Zt.onSubmit(Tr)})("reset",function(){return Zt.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[V.Jv_([On]),V.Vt3,V.OA$]}),Se})();const hr={provide:po,useExisting:(0,V.Rfq)(()=>Ir)};let Ir=(()=>{var Xe;class Se extends po{set isDisabled(He){}constructor(He,Zt,Uo,Tr,Wa){super(),this._ngModelWarningConfig=Wa,this._added=!1,this.name=null,this.update=new V.bkB,this._ngModelWarningSent=!1,this._parent=He,this._setValidators(Zt),this._setAsyncValidators(Uo),this.valueAccessor=xa(0,Tr)}ngOnChanges(He){this._added||this._setUpControl(),Es(He,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(He){this.viewModel=He,this.update.emit(He)}get path(){return function co(Xe,Se){return[...Se.path,Xe]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(Xe=Se)._ngModelWarningSentOnce=!1,Xe.\u0275fac=function(He){return new(He||Xe)(V.rXU(Ni,13),V.rXU(Pn,10),V.rXU(Ii,10),V.rXU(xn,10),V.rXU(Dt,8))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[V.Jv_([hr]),V.Vt3,V.OA$]}),Se})();function hu(Xe){return"number"==typeof Xe?Xe:parseFloat(Xe)}let Uu=(()=>{var Xe;class Se{constructor(){this._validator=Ge}ngOnChanges(He){if(this.inputName in He){const Zt=this.normalizeInput(He[this.inputName].currentValue);this._enabled=this.enabled(Zt),this._validator=this._enabled?this.createValidator(Zt):Ge,this._onChange&&this._onChange()}}validate(He){return this._validator(He)}registerOnValidatorChange(He){this._onChange=He}enabled(He){return null!=He}}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275dir=V.FsC({type:Xe,features:[V.OA$]}),Se})();const Ea={provide:Pn,useExisting:(0,V.Rfq)(()=>Ga),multi:!0};let Ga=(()=>{var Xe;class Se extends Uu{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=He=>hu(He),this.createValidator=He=>on(He)}}return(Xe=Se).\u0275fac=(()=>{let vt;return function(Zt){return(vt||(vt=V.xGo(Xe)))(Zt||Xe)}})(),Xe.\u0275dir=V.FsC({type:Xe,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(He,Zt){2&He&&V.BMQ("max",Zt._enabled?Zt.max:null)},inputs:{max:"max"},features:[V.Jv_([Ea]),V.Vt3]}),Se})();const nl={provide:Pn,useExisting:(0,V.Rfq)(()=>uc),multi:!0};let uc=(()=>{var Xe;class Se extends Uu{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=He=>hu(He),this.createValidator=He=>Te(He)}}return(Xe=Se).\u0275fac=(()=>{let vt;return function(Zt){return(vt||(vt=V.xGo(Xe)))(Zt||Xe)}})(),Xe.\u0275dir=V.FsC({type:Xe,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(He,Zt){2&He&&V.BMQ("min",Zt._enabled?Zt.min:null)},inputs:{min:"min"},features:[V.Jv_([nl]),V.Vt3]}),Se})(),Xr=(()=>{var Xe;class Se{}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275mod=V.$C({type:Xe}),Xe.\u0275inj=V.G2t({}),Se})();class sa extends dn{constructor(Se,vt,He){super(ue(vt),we(He,vt)),this.controls=Se,this._initObservables(),this._setUpdateStrategy(vt),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Se){return this.controls[this._adjustIndex(Se)]}push(Se,vt={}){this.controls.push(Se),this._registerControl(Se),this.updateValueAndValidity({emitEvent:vt.emitEvent}),this._onCollectionChange()}insert(Se,vt,He={}){this.controls.splice(Se,0,vt),this._registerControl(vt),this.updateValueAndValidity({emitEvent:He.emitEvent})}removeAt(Se,vt={}){let He=this._adjustIndex(Se);He<0&&(He=0),this.controls[He]&&this.controls[He]._registerOnCollectionChange(()=>{}),this.controls.splice(He,1),this.updateValueAndValidity({emitEvent:vt.emitEvent})}setControl(Se,vt,He={}){let Zt=this._adjustIndex(Se);Zt<0&&(Zt=0),this.controls[Zt]&&this.controls[Zt]._registerOnCollectionChange(()=>{}),this.controls.splice(Zt,1),vt&&(this.controls.splice(Zt,0,vt),this._registerControl(vt)),this.updateValueAndValidity({emitEvent:He.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Se,vt={}){Cn(this,0,Se),Se.forEach((He,Zt)=>{Xt(this,!1,Zt),this.at(Zt).setValue(He,{onlySelf:!0,emitEvent:vt.emitEvent})}),this.updateValueAndValidity(vt)}patchValue(Se,vt={}){null!=Se&&(Se.forEach((He,Zt)=>{this.at(Zt)&&this.at(Zt).patchValue(He,{onlySelf:!0,emitEvent:vt.emitEvent})}),this.updateValueAndValidity(vt))}reset(Se=[],vt={}){this._forEachChild((He,Zt)=>{He.reset(Se[Zt],{onlySelf:!0,emitEvent:vt.emitEvent})}),this._updatePristine(vt,this),this._updateTouched(vt,this),this.updateValueAndValidity(vt)}getRawValue(){return this.controls.map(Se=>Se.getRawValue())}clear(Se={}){this.controls.length<1||(this._forEachChild(vt=>vt._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Se.emitEvent}))}_adjustIndex(Se){return Se<0?Se+this.length:Se}_syncPendingControls(){let Se=this.controls.reduce((vt,He)=>!!He._syncPendingControls()||vt,!1);return Se&&this.updateValueAndValidity({onlySelf:!0}),Se}_forEachChild(Se){this.controls.forEach((vt,He)=>{Se(vt,He)})}_updateValue(){this.value=this.controls.filter(Se=>Se.enabled||this.disabled).map(Se=>Se.value)}_anyControls(Se){return this.controls.some(vt=>vt.enabled&&Se(vt))}_setUpControls(){this._forEachChild(Se=>this._registerControl(Se))}_allControlsDisabled(){for(const Se of this.controls)if(Se.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Se){Se.setParent(this),Se._registerOnCollectionChange(this._onCollectionChange)}_find(Se){var vt;return null!==(vt=this.at(Se))&&void 0!==vt?vt:null}}let Ll=(()=>{var Xe;class Se{static withConfig(He){var Zt;return{ngModule:Se,providers:[{provide:jn,useValue:null!==(Zt=He.callSetDisabledState)&&void 0!==Zt?Zt:di}]}}}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275mod=V.$C({type:Xe}),Xe.\u0275inj=V.G2t({imports:[Xr]}),Se})(),ya=(()=>{var Xe;class Se{static withConfig(He){var Zt,Uo;return{ngModule:Se,providers:[{provide:Dt,useValue:null!==(Zt=He.warnOnNgModelWithFormControl)&&void 0!==Zt?Zt:"always"},{provide:jn,useValue:null!==(Uo=He.callSetDisabledState)&&void 0!==Uo?Uo:di}]}}}return(Xe=Se).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275mod=V.$C({type:Xe}),Xe.\u0275inj=V.G2t({imports:[Xr]}),Se})()},345:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{B8:()=>zt,hE:()=>Yi});var V=_e(177),re=_e(3953);class ne extends V.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class l extends ne{static makeCurrent(){(0,V.ZD)(new l)}onAndCancel(ni,Ai,Kn){return ni.addEventListener(Ai,Kn),()=>{ni.removeEventListener(Ai,Kn)}}dispatchEvent(ni,Ai){ni.dispatchEvent(Ai)}remove(ni){ni.parentNode&&ni.parentNode.removeChild(ni)}createElement(ni,Ai){return(Ai=Ai||this.getDefaultDocument()).createElement(ni)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ni){return ni.nodeType===Node.ELEMENT_NODE}isShadowRoot(ni){return ni instanceof DocumentFragment}getGlobalEventTarget(ni,Ai){return"window"===Ai?window:"document"===Ai?ni:"body"===Ai?ni.body:null}getBaseHref(ni){const Ai=function Y(){return We=We||document.querySelector("base"),We?We.getAttribute("href"):null}();return null==Ai?null:function ft(Fi){return new URL(Fi,document.baseURI).pathname}(Ai)}resetBaseElement(){We=null}getUserAgent(){return window.navigator.userAgent}getCookie(ni){return(0,V._b)(document.cookie,ni)}}let We=null,jt=(()=>{var Fi;class ni{build(){return new XMLHttpRequest}}return(Fi=ni).\u0275fac=function(Kn){return new(Kn||Fi)},Fi.\u0275prov=re.jDH({token:Fi,factory:Fi.\u0275fac}),ni})();const wt=new re.nKC("");let C=(()=>{var Fi;class ni{constructor(Kn,kt){this._zone=kt,this._eventNameToPlugin=new Map,Kn.forEach(mt=>{mt.manager=this}),this._plugins=Kn.slice().reverse()}addEventListener(Kn,kt,mt){return this._findPluginFor(kt).addEventListener(Kn,kt,mt)}getZone(){return this._zone}_findPluginFor(Kn){let kt=this._eventNameToPlugin.get(Kn);if(kt)return kt;if(kt=this._plugins.find(Ye=>Ye.supports(Kn)),!kt)throw new re.wOt(5101,!1);return this._eventNameToPlugin.set(Kn,kt),kt}}return(Fi=ni).\u0275fac=function(Kn){return new(Kn||Fi)(re.KVO(wt),re.KVO(re.SKi))},Fi.\u0275prov=re.jDH({token:Fi,factory:Fi.\u0275fac}),ni})();class At{constructor(ni){this._doc=ni}}const Ut="ng-app-id";let yt=(()=>{var Fi;class ni{constructor(Kn,kt,mt,Ye={}){this.doc=Kn,this.appId=kt,this.nonce=mt,this.platformId=Ye,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,V.Vy)(Ye),this.resetHostNodes()}addStyles(Kn){for(const kt of Kn)1===this.changeUsageCount(kt,1)&&this.onStyleAdded(kt)}removeStyles(Kn){for(const kt of Kn)this.changeUsageCount(kt,-1)<=0&&this.onStyleRemoved(kt)}ngOnDestroy(){const Kn=this.styleNodesInDOM;Kn&&(Kn.forEach(kt=>kt.remove()),Kn.clear());for(const kt of this.getAllStyles())this.onStyleRemoved(kt);this.resetHostNodes()}addHost(Kn){this.hostNodes.add(Kn);for(const kt of this.getAllStyles())this.addStyleToHost(Kn,kt)}removeHost(Kn){this.hostNodes.delete(Kn)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Kn){for(const kt of this.hostNodes)this.addStyleToHost(kt,Kn)}onStyleRemoved(Kn){var kt;const mt=this.styleRef;null===(kt=mt.get(Kn))||void 0===kt||null===(kt=kt.elements)||void 0===kt||kt.forEach(Ye=>Ye.remove()),mt.delete(Kn)}collectServerRenderedStyles(){var Kn;const kt=null===(Kn=this.doc.head)||void 0===Kn?void 0:Kn.querySelectorAll(`style[${Ut}="${this.appId}"]`);if(null!=kt&&kt.length){const mt=new Map;return kt.forEach(Ye=>{null!=Ye.textContent&&mt.set(Ye.textContent,Ye)}),mt}return null}changeUsageCount(Kn,kt){const mt=this.styleRef;if(mt.has(Kn)){const Ye=mt.get(Kn);return Ye.usage+=kt,Ye.usage}return mt.set(Kn,{usage:kt,elements:[]}),kt}getStyleElement(Kn,kt){const mt=this.styleNodesInDOM,Ye=null==mt?void 0:mt.get(kt);if((null==Ye?void 0:Ye.parentNode)===Kn)return mt.delete(kt),Ye.removeAttribute(Ut),Ye;{const Tt=this.doc.createElement("style");return this.nonce&&Tt.setAttribute("nonce",this.nonce),Tt.textContent=kt,this.platformIsServer&&Tt.setAttribute(Ut,this.appId),Kn.appendChild(Tt),Tt}}addStyleToHost(Kn,kt){var mt;const Ye=this.getStyleElement(Kn,kt),Tt=this.styleRef,Jt=null===(mt=Tt.get(kt))||void 0===mt?void 0:mt.elements;Jt?Jt.push(Ye):Tt.set(kt,{elements:[Ye],usage:1})}resetHostNodes(){const Kn=this.hostNodes;Kn.clear(),Kn.add(this.doc.head)}}return(Fi=ni).\u0275fac=function(Kn){return new(Kn||Fi)(re.KVO(V.qQ),re.KVO(re.sZ2),re.KVO(re.BIS,8),re.KVO(re.Agw))},Fi.\u0275prov=re.jDH({token:Fi,factory:Fi.\u0275fac}),ni})();const fn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xn=/%COMP%/g,Zn=new re.nKC("",{providedIn:"root",factory:()=>!0});function wn(Fi,ni){return ni.map(Ai=>Ai.replace(xn,Fi))}let Pn=(()=>{var Fi;class ni{constructor(Kn,kt,mt,Ye,Tt,Jt,Ln,Lt=null){this.eventManager=Kn,this.sharedStylesHost=kt,this.appId=mt,this.removeStylesOnCompDestroy=Ye,this.doc=Tt,this.platformId=Jt,this.ngZone=Ln,this.nonce=Lt,this.rendererByCompId=new Map,this.platformIsServer=(0,V.Vy)(Jt),this.defaultRenderer=new Ii(Kn,Tt,Ln,this.platformIsServer)}createRenderer(Kn,kt){if(!Kn||!kt)return this.defaultRenderer;this.platformIsServer&&kt.encapsulation===re.gXe.ShadowDom&&(kt={...kt,encapsulation:re.gXe.Emulated});const mt=this.getOrCreateRenderer(Kn,kt);return mt instanceof En?mt.applyToHost(Kn):mt instanceof Qt&&mt.applyStyles(),mt}getOrCreateRenderer(Kn,kt){const mt=this.rendererByCompId;let Ye=mt.get(kt.id);if(!Ye){const Tt=this.doc,Jt=this.ngZone,Ln=this.eventManager,Lt=this.sharedStylesHost,Ee=this.removeStylesOnCompDestroy,ue=this.platformIsServer;switch(kt.encapsulation){case re.gXe.Emulated:Ye=new En(Ln,Lt,kt,this.appId,Ee,Tt,Jt,ue);break;case re.gXe.ShadowDom:return new on(Ln,Lt,Kn,kt,Tt,Jt,this.nonce,ue);default:Ye=new Qt(Ln,Lt,kt,Ee,Tt,Jt,ue)}mt.set(kt.id,Ye)}return Ye}ngOnDestroy(){this.rendererByCompId.clear()}}return(Fi=ni).\u0275fac=function(Kn){return new(Kn||Fi)(re.KVO(C),re.KVO(yt),re.KVO(re.sZ2),re.KVO(Zn),re.KVO(V.qQ),re.KVO(re.Agw),re.KVO(re.SKi),re.KVO(re.BIS))},Fi.\u0275prov=re.jDH({token:Fi,factory:Fi.\u0275fac}),ni})();class Ii{constructor(ni,Ai,Kn,kt){this.eventManager=ni,this.doc=Ai,this.ngZone=Kn,this.platformIsServer=kt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(ni,Ai){return Ai?this.doc.createElementNS(fn[Ai]||Ai,ni):this.doc.createElement(ni)}createComment(ni){return this.doc.createComment(ni)}createText(ni){return this.doc.createTextNode(ni)}appendChild(ni,Ai){(Te(ni)?ni.content:ni).appendChild(Ai)}insertBefore(ni,Ai,Kn){ni&&(Te(ni)?ni.content:ni).insertBefore(Ai,Kn)}removeChild(ni,Ai){ni&&ni.removeChild(Ai)}selectRootElement(ni,Ai){let Kn="string"==typeof ni?this.doc.querySelector(ni):ni;if(!Kn)throw new re.wOt(-5104,!1);return Ai||(Kn.textContent=""),Kn}parentNode(ni){return ni.parentNode}nextSibling(ni){return ni.nextSibling}setAttribute(ni,Ai,Kn,kt){if(kt){Ai=kt+":"+Ai;const mt=fn[kt];mt?ni.setAttributeNS(mt,Ai,Kn):ni.setAttribute(Ai,Kn)}else ni.setAttribute(Ai,Kn)}removeAttribute(ni,Ai,Kn){if(Kn){const kt=fn[Kn];kt?ni.removeAttributeNS(kt,Ai):ni.removeAttribute(`${Kn}:${Ai}`)}else ni.removeAttribute(Ai)}addClass(ni,Ai){ni.classList.add(Ai)}removeClass(ni,Ai){ni.classList.remove(Ai)}setStyle(ni,Ai,Kn,kt){kt&(re.czy.DashCase|re.czy.Important)?ni.style.setProperty(Ai,Kn,kt&re.czy.Important?"important":""):ni.style[Ai]=Kn}removeStyle(ni,Ai,Kn){Kn&re.czy.DashCase?ni.style.removeProperty(Ai):ni.style[Ai]=""}setProperty(ni,Ai,Kn){null!=ni&&(ni[Ai]=Kn)}setValue(ni,Ai){ni.nodeValue=Ai}listen(ni,Ai,Kn){if("string"==typeof ni&&!(ni=(0,V.QT)().getGlobalEventTarget(this.doc,ni)))throw new Error(`Unsupported event target ${ni} for event ${Ai}`);return this.eventManager.addEventListener(ni,Ai,this.decoratePreventDefault(Kn))}decoratePreventDefault(ni){return Ai=>{if("__ngUnwrap__"===Ai)return ni;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ni(Ai)):ni(Ai))&&Ai.preventDefault()}}}function Te(Fi){return"TEMPLATE"===Fi.tagName&&void 0!==Fi.content}class on extends Ii{constructor(ni,Ai,Kn,kt,mt,Ye,Tt,Jt){super(ni,mt,Ye,Jt),this.sharedStylesHost=Ai,this.hostEl=Kn,this.shadowRoot=Kn.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ln=wn(kt.id,kt.styles);for(const Lt of Ln){const Ee=document.createElement("style");Tt&&Ee.setAttribute("nonce",Tt),Ee.textContent=Lt,this.shadowRoot.appendChild(Ee)}}nodeOrShadowRoot(ni){return ni===this.hostEl?this.shadowRoot:ni}appendChild(ni,Ai){return super.appendChild(this.nodeOrShadowRoot(ni),Ai)}insertBefore(ni,Ai,Kn){return super.insertBefore(this.nodeOrShadowRoot(ni),Ai,Kn)}removeChild(ni,Ai){return super.removeChild(this.nodeOrShadowRoot(ni),Ai)}parentNode(ni){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ni)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Qt extends Ii{constructor(ni,Ai,Kn,kt,mt,Ye,Tt,Jt){super(ni,mt,Ye,Tt),this.sharedStylesHost=Ai,this.removeStylesOnCompDestroy=kt,this.styles=Jt?wn(Jt,Kn.styles):Kn.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class En extends Qt{constructor(ni,Ai,Kn,kt,mt,Ye,Tt,Jt){const Ln=kt+"-"+Kn.id;super(ni,Ai,Kn,mt,Ye,Tt,Jt,Ln),this.contentAttr=function xt(Fi){return"_ngcontent-%COMP%".replace(xn,Fi)}(Ln),this.hostAttr=function Ot(Fi){return"_nghost-%COMP%".replace(xn,Fi)}(Ln)}applyToHost(ni){this.applyStyles(),this.setAttribute(ni,this.hostAttr,"")}createElement(ni,Ai){const Kn=super.createElement(ni,Ai);return super.setAttribute(Kn,this.contentAttr,""),Kn}}let oo=(()=>{var Fi;class ni extends At{constructor(Kn){super(Kn)}supports(Kn){return!0}addEventListener(Kn,kt,mt){return Kn.addEventListener(kt,mt,!1),()=>this.removeEventListener(Kn,kt,mt)}removeEventListener(Kn,kt,mt){return Kn.removeEventListener(kt,mt)}}return(Fi=ni).\u0275fac=function(Kn){return new(Kn||Fi)(re.KVO(V.qQ))},Fi.\u0275prov=re.jDH({token:Fi,factory:Fi.\u0275fac}),ni})(),Vn=(()=>{var Fi;class ni extends At{constructor(Kn){super(Kn),this.delegate=(0,re.WQX)(re.zAP,{optional:!0})}supports(Kn){return!!this.delegate&&this.delegate.supports(Kn)}addEventListener(Kn,kt,mt){return this.delegate.addEventListener(Kn,kt,mt)}removeEventListener(Kn,kt,mt){return this.delegate.removeEventListener(Kn,kt,mt)}}return(Fi=ni).\u0275fac=function(Kn){return new(Kn||Fi)(re.KVO(V.qQ))},Fi.\u0275prov=re.jDH({token:Fi,factory:Fi.\u0275fac}),ni})();const Ke=["alt","control","meta","shift"],Ae={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ge={alt:Fi=>Fi.altKey,control:Fi=>Fi.ctrlKey,meta:Fi=>Fi.metaKey,shift:Fi=>Fi.shiftKey};let et=(()=>{var Fi;class ni extends At{constructor(Kn){super(Kn)}supports(Kn){return null!=ni.parseEventName(Kn)}addEventListener(Kn,kt,mt){const Ye=ni.parseEventName(kt),Tt=ni.eventCallback(Ye.fullKey,mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,V.QT)().onAndCancel(Kn,Ye.domEventName,Tt))}static parseEventName(Kn){const kt=Kn.toLowerCase().split("."),mt=kt.shift();if(0===kt.length||"keydown"!==mt&&"keyup"!==mt)return null;const Ye=ni._normalizeKey(kt.pop());let Tt="",Jt=kt.indexOf("code");if(Jt>-1&&(kt.splice(Jt,1),Tt="code."),Ke.forEach(Lt=>{const Ee=kt.indexOf(Lt);Ee>-1&&(kt.splice(Ee,1),Tt+=Lt+".")}),Tt+=Ye,0!=kt.length||0===Ye.length)return null;const Ln={};return Ln.domEventName=mt,Ln.fullKey=Tt,Ln}static matchEventFullKeyCode(Kn,kt){let mt=Ae[Kn.key]||Kn.key,Ye="";return kt.indexOf("code.")>-1&&(mt=Kn.code,Ye="code."),!(null==mt||!mt)&&(mt=mt.toLowerCase()," "===mt?mt="space":"."===mt&&(mt="dot"),Ke.forEach(Tt=>{Tt!==mt&&(0,Ge[Tt])(Kn)&&(Ye+=Tt+".")}),Ye+=mt,Ye===kt)}static eventCallback(Kn,kt,mt){return Ye=>{ni.matchEventFullKeyCode(Ye,Kn)&&mt.runGuarded(()=>kt(Ye))}}static _normalizeKey(Kn){return"esc"===Kn?"escape":Kn}}return(Fi=ni).\u0275fac=function(Kn){return new(Kn||Fi)(re.KVO(V.qQ))},Fi.\u0275prov=re.jDH({token:Fi,factory:Fi.\u0275fac}),ni})();function zt(Fi,ni){return(0,re.TL3)({rootComponent:Fi,...un(ni)})}function un(Fi){var ni;return{appProviders:[...Er,...null!==(ni=null==Fi?void 0:Fi.providers)&&void 0!==ni?ni:[]],platformProviders:Dr}}const Dr=[{provide:re.Agw,useValue:V.AJ},{provide:re.PLl,useValue:function Qi(){l.makeCurrent()},multi:!0},{provide:V.qQ,useFactory:function Go(){return(0,re.TL$)(document),document},deps:[]}],Er=[{provide:re.H8p,useValue:"root"},{provide:re.zcH,useFactory:function dr(){return new re.zcH},deps:[]},{provide:wt,useClass:oo,multi:!0,deps:[V.qQ,re.SKi,re.Agw]},{provide:wt,useClass:et,multi:!0,deps:[V.qQ]},{provide:wt,useClass:Vn,multi:!0},Pn,yt,C,{provide:re._9s,useExisting:Pn},{provide:V.N0,useClass:jt,deps:[]},[]];let Yi=(()=>{var Fi;class ni{constructor(Kn){this._doc=Kn}getTitle(){return this._doc.title}setTitle(Kn){this._doc.title=Kn||""}}return(Fi=ni).\u0275fac=function(Kn){return new(Kn||Fi)(re.KVO(V.qQ))},Fi.\u0275prov=re.jDH({token:Fi,factory:Fi.\u0275fac,providedIn:"root"}),ni})()},5113:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{nX:()=>qo,Zp:()=>Dt,Z:()=>Vr,Xk:()=>Ei,Kp:()=>ld,b:()=>Ws,Ix:()=>Ka,Wk:()=>ad,wQ:()=>Xd,n3:()=>ta,Sd:()=>Jn,lh:()=>ia,lG:()=>Wh,Sn:()=>Tu});var V=_e(3953),re=_e(1985),ne=_e(8071),We=_e(8455),Y=_e(7673),ft=_e(4412),qt=_e(4572);const wt=(0,_e(1853).L)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"});var C=_e(8793),At=_e(9030),Ut=_e(1203),yt=_e(8810),fn=_e(983),xn=_e(17),rn=_e(1413),ht=_e(8359),ei=_e(177),Mn=_e(6354),Zn=_e(5558),xt=_e(6697),Ot=_e(9326),wn=_e(9974),Ii=_e(5964),Et=_e(1397),kn=_e(4360);function Te(Z){return(0,wn.N)((me,ke)=>{let ge=!1;me.subscribe((0,kn._)(ke,Be=>{ge=!0,ke.next(Be)},()=>{ge||ke.next(Z),ke.complete()}))})}function on(Z=Qt){return(0,wn.N)((me,ke)=>{let ge=!1;me.subscribe((0,kn._)(ke,Be=>{ge=!0,ke.next(Be)},()=>ge?ke.complete():ke.error(Z())))})}function Qt(){return new wt}var En=_e(3669);function oo(Z,me){const ke=arguments.length>=2;return ge=>ge.pipe(Z?(0,Ii.p)((Be,Mt)=>Z(Be,Mt,ge)):En.D,(0,xt.s)(1),ke?Te(me):on(()=>new wt))}var Vn=_e(274),Ke=_e(8141),Ae=_e(8750);function Ge(Z){return(0,wn.N)((me,ke)=>{let Mt,ge=null,Be=!1;ge=me.subscribe((0,kn._)(ke,void 0,void 0,Ht=>{Mt=(0,Ae.Tg)(Z(Ht,Ge(Z)(me))),ge?(ge.unsubscribe(),ge=null,Mt.subscribe(ke)):Be=!0})),Be&&(ge.unsubscribe(),ge=null,Mt.subscribe(ke))})}function qn(Z){return Z<=0?()=>fn.w:(0,wn.N)((me,ke)=>{let ge=[];me.subscribe((0,kn._)(ke,Be=>{ge.push(Be),Z<ge.length&&ge.shift()},()=>{for(const Be of ge)ke.next(Be);ke.complete()},void 0,()=>{ge=null}))})}var go=_e(3703),Qi=_e(980),dr=_e(9898),Go=_e(6977),Dr=_e(6365),cr=_e(345);const Ei="primary",ko=Symbol("RouteTitle");class Er{constructor(me){this.params=me||{}}has(me){return Object.prototype.hasOwnProperty.call(this.params,me)}get(me){if(this.has(me)){const ke=this.params[me];return Array.isArray(ke)?ke[0]:ke}return null}getAll(me){if(this.has(me)){const ke=this.params[me];return Array.isArray(ke)?ke:[ke]}return[]}get keys(){return Object.keys(this.params)}}function Wr(Z){return new Er(Z)}function ji(Z,me,ke){const ge=ke.path.split("/");if(ge.length>Z.length||"full"===ke.pathMatch&&(me.hasChildren()||ge.length<Z.length))return null;const Be={};for(let Mt=0;Mt<ge.length;Mt++){const Ht=ge[Mt],Ci=Z[Mt];if(":"===Ht[0])Be[Ht.substring(1)]=Ci;else if(Ht!==Ci.path)return null}return{consumed:Z.slice(0,ge.length),posParams:Be}}function Yi(Z,me){const ke=Z?ui(Z):void 0,ge=me?ui(me):void 0;if(!ke||!ge||ke.length!=ge.length)return!1;let Be;for(let Mt=0;Mt<ke.length;Mt++)if(Be=ke[Mt],!Ni(Z[Be],me[Be]))return!1;return!0}function ui(Z){return[...Object.keys(Z),...Object.getOwnPropertySymbols(Z)]}function Ni(Z,me){if(Array.isArray(Z)&&Array.isArray(me)){if(Z.length!==me.length)return!1;const ke=[...Z].sort(),ge=[...me].sort();return ke.every((Be,Mt)=>ge[Mt]===Be)}return Z===me}function po(Z){return Z.length>0?Z[Z.length-1]:null}function Xi(Z){return function l(Z){return!!Z&&(Z instanceof re.c||(0,ne.T)(Z.lift)&&(0,ne.T)(Z.subscribe))}(Z)?Z:(0,V.jNT)(Z)?(0,We.H)(Promise.resolve(Z)):(0,Y.of)(Z)}const bs={exact:function fo(Z,me,ke){if(!wr(Z.segments,me.segments)||!Qr(Z.segments,me.segments,ke)||Z.numberOfChildren!==me.numberOfChildren)return!1;for(const ge in me.children)if(!Z.children[ge]||!fo(Z.children[ge],me.children[ge],ke))return!1;return!0},subset:zr},Br={exact:function ro(Z,me){return Yi(Z,me)},subset:function Ts(Z,me){return Object.keys(me).length<=Object.keys(Z).length&&Object.keys(me).every(ke=>Ni(Z[ke],me[ke]))},ignored:()=>!0};function So(Z,me,ke){return bs[ke.paths](Z.root,me.root,ke.matrixParams)&&Br[ke.queryParams](Z.queryParams,me.queryParams)&&!("exact"===ke.fragment&&Z.fragment!==me.fragment)}function zr(Z,me,ke){return Zr(Z,me,me.segments,ke)}function Zr(Z,me,ke,ge){if(Z.segments.length>ke.length){const Be=Z.segments.slice(0,ke.length);return!(!wr(Be,ke)||me.hasChildren()||!Qr(Be,ke,ge))}if(Z.segments.length===ke.length){if(!wr(Z.segments,ke)||!Qr(Z.segments,ke,ge))return!1;for(const Be in me.children)if(!Z.children[Be]||!zr(Z.children[Be],me.children[Be],ge))return!1;return!0}{const Be=ke.slice(0,Z.segments.length),Mt=ke.slice(Z.segments.length);return!!(wr(Z.segments,Be)&&Qr(Z.segments,Be,ge)&&Z.children[Ei])&&Zr(Z.children[Ei],me,Mt,ge)}}function Qr(Z,me,ke){return me.every((ge,Be)=>Br[ke](Z[Be].parameters,ge.parameters))}class Wo{constructor(me=new lr([],{}),ke={},ge=null){this.root=me,this.queryParams=ke,this.fragment=ge}get queryParamMap(){var me;return null!==(me=this._queryParamMap)&&void 0!==me||(this._queryParamMap=Wr(this.queryParams)),this._queryParamMap}toString(){return jr.serialize(this)}}class lr{constructor(me,ke){this.segments=me,this.children=ke,this.parent=null,Object.values(ke).forEach(ge=>ge.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ns(this)}}class Pr{constructor(me,ke){this.path=me,this.parameters=ke}get parameterMap(){var me;return null!==(me=this._parameterMap)&&void 0!==me||(this._parameterMap=Wr(this.parameters)),this._parameterMap}toString(){return mt(this)}}function wr(Z,me){return Z.length===me.length&&Z.every((ke,ge)=>ke.path===me[ge].path)}let Jn=(()=>{var Z;class me{}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:()=>new hs,providedIn:"root"}),me})();class hs{parse(me){const ke=new it(me);return new Wo(ke.parseRootSegment(),ke.parseQueryParams(),ke.parseFragment())}serialize(me){const ke=`/${ps(me.root,!0)}`,ge=function Tt(Z){const me=Object.entries(Z).map(([ke,ge])=>Array.isArray(ge)?ge.map(Be=>`${Fi(ke)}=${Fi(Be)}`).join("&"):`${Fi(ke)}=${Fi(ge)}`).filter(ke=>ke);return me.length?`?${me.join("&")}`:""}(me.queryParams);return`${ke}${ge}${"string"==typeof me.fragment?`#${function ni(Z){return encodeURI(Z)}(me.fragment)}`:""}`}}const jr=new hs;function Ns(Z){return Z.segments.map(me=>mt(me)).join("/")}function ps(Z,me){if(!Z.hasChildren())return Ns(Z);if(me){const ke=Z.children[Ei]?ps(Z.children[Ei],!1):"",ge=[];return Object.entries(Z.children).forEach(([Be,Mt])=>{Be!==Ei&&ge.push(`${Be}:${ps(Mt,!1)}`)}),ge.length>0?`${ke}(${ge.join("//")})`:ke}{const ke=function aa(Z,me){let ke=[];return Object.entries(Z.children).forEach(([ge,Be])=>{ge===Ei&&(ke=ke.concat(me(Be,ge)))}),Object.entries(Z.children).forEach(([ge,Be])=>{ge!==Ei&&(ke=ke.concat(me(Be,ge)))}),ke}(Z,(ge,Be)=>Be===Ei?[ps(Z.children[Ei],!1)]:[`${Be}:${ps(ge,!1)}`]);return 1===Object.keys(Z.children).length&&null!=Z.children[Ei]?`${Ns(Z)}/${ke[0]}`:`${Ns(Z)}/(${ke.join("//")})`}}function Kr(Z){return encodeURIComponent(Z).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fi(Z){return Kr(Z).replace(/%3B/gi,";")}function Ai(Z){return Kr(Z).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kn(Z){return decodeURIComponent(Z)}function kt(Z){return Kn(Z.replace(/\+/g,"%20"))}function mt(Z){return`${Ai(Z.path)}${function Ye(Z){return Object.entries(Z).map(([me,ke])=>`;${Ai(me)}=${Ai(ke)}`).join("")}(Z.parameters)}`}const Jt=/^[^\/()?;#]+/;function Ln(Z){const me=Z.match(Jt);return me?me[0]:""}const Lt=/^[^\/()?;=#]+/,ue=/^[^=?&#]+/,we=/^[^&#]+/;class it{constructor(me){this.url=me,this.remaining=me}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lr([],{}):new lr([],this.parseChildren())}parseQueryParams(){const me={};if(this.consumeOptional("?"))do{this.parseQueryParam(me)}while(this.consumeOptional("&"));return me}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const me=[];for(this.peekStartsWith("(")||me.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),me.push(this.parseSegment());let ke={};this.peekStartsWith("/(")&&(this.capture("/"),ke=this.parseParens(!0));let ge={};return this.peekStartsWith("(")&&(ge=this.parseParens(!1)),(me.length>0||Object.keys(ke).length>0)&&(ge[Ei]=new lr(me,ke)),ge}parseSegment(){const me=Ln(this.remaining);if(""===me&&this.peekStartsWith(";"))throw new V.wOt(4009,!1);return this.capture(me),new Pr(Kn(me),this.parseMatrixParams())}parseMatrixParams(){const me={};for(;this.consumeOptional(";");)this.parseParam(me);return me}parseParam(me){const ke=function Ee(Z){const me=Z.match(Lt);return me?me[0]:""}(this.remaining);if(!ke)return;this.capture(ke);let ge="";if(this.consumeOptional("=")){const Be=Ln(this.remaining);Be&&(ge=Be,this.capture(ge))}me[Kn(ke)]=Kn(ge)}parseQueryParam(me){const ke=function ae(Z){const me=Z.match(ue);return me?me[0]:""}(this.remaining);if(!ke)return;this.capture(ke);let ge="";if(this.consumeOptional("=")){const Ht=function Ue(Z){const me=Z.match(we);return me?me[0]:""}(this.remaining);Ht&&(ge=Ht,this.capture(ge))}const Be=kt(ke),Mt=kt(ge);if(me.hasOwnProperty(Be)){let Ht=me[Be];Array.isArray(Ht)||(Ht=[Ht],me[Be]=Ht),Ht.push(Mt)}else me[Be]=Mt}parseParens(me){const ke={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const ge=Ln(this.remaining),Be=this.remaining[ge.length];if("/"!==Be&&")"!==Be&&";"!==Be)throw new V.wOt(4010,!1);let Mt;ge.indexOf(":")>-1?(Mt=ge.slice(0,ge.indexOf(":")),this.capture(Mt),this.capture(":")):me&&(Mt=Ei);const Ht=this.parseChildren();ke[Mt]=1===Object.keys(Ht).length?Ht[Ei]:new lr([],Ht),this.consumeOptional("//")}return ke}peekStartsWith(me){return this.remaining.startsWith(me)}consumeOptional(me){return!!this.peekStartsWith(me)&&(this.remaining=this.remaining.substring(me.length),!0)}capture(me){if(!this.consumeOptional(me))throw new V.wOt(4011,!1)}}function Xt(Z){return Z.segments.length>0?new lr([],{[Ei]:Z}):Z}function Cn(Z){const me={};for(const[ge,Be]of Object.entries(Z.children)){const Mt=Cn(Be);if(ge===Ei&&0===Mt.segments.length&&Mt.hasChildren())for(const[Ht,Ci]of Object.entries(Mt.children))me[Ht]=Ci;else(Mt.segments.length>0||Mt.hasChildren())&&(me[ge]=Mt)}return function dn(Z){if(1===Z.numberOfChildren&&Z.children[Ei]){const me=Z.children[Ei];return new lr(Z.segments.concat(me.segments),me.children)}return Z}(new lr(Z.segments,me))}function Nn(Z){return Z instanceof Wo}function Oi(Z){var me;let ke;const Mt=Xt(function ge(Ht){const Ci={};for(const Ti of Ht.children){const or=ge(Ti);Ci[Ti.outlet]=or}const _o=new lr(Ht.url,Ci);return Ht===Z&&(ke=_o),_o}(Z.root));return null!==(me=ke)&&void 0!==me?me:Mt}function Fo(Z,me,ke,ge){let Be=Z;for(;Be.parent;)Be=Be.parent;if(0===me.length)return jn(Be,Be,Be,ke,ge);const Mt=function Ki(Z){if("string"==typeof Z[0]&&1===Z.length&&"/"===Z[0])return new co(!0,0,Z);let me=0,ke=!1;const ge=Z.reduce((Be,Mt,Ht)=>{if("object"==typeof Mt&&null!=Mt){if(Mt.outlets){const Ci={};return Object.entries(Mt.outlets).forEach(([_o,Ti])=>{Ci[_o]="string"==typeof Ti?Ti.split("/"):Ti}),[...Be,{outlets:Ci}]}if(Mt.segmentPath)return[...Be,Mt.segmentPath]}return"string"!=typeof Mt?[...Be,Mt]:0===Ht?(Mt.split("/").forEach((Ci,_o)=>{0==_o&&"."===Ci||(0==_o&&""===Ci?ke=!0:".."===Ci?me++:""!=Ci&&Be.push(Ci))}),Be):[...Be,Mt]},[]);return new co(ke,me,ge)}(me);if(Mt.toRoot())return jn(Be,Be,new lr([],{}),ke,ge);const Ht=function oi(Z,me,ke){if(Z.isAbsolute)return new Kt(me,!0,0);if(!ke)return new Kt(me,!1,NaN);if(null===ke.parent)return new Kt(ke,!0,0);const ge=nr(Z.commands[0])?0:1;return function Pi(Z,me,ke){let ge=Z,Be=me,Mt=ke;for(;Mt>Be;){if(Mt-=Be,ge=ge.parent,!ge)throw new V.wOt(4005,!1);Be=ge.segments.length}return new Kt(ge,!1,Be-Mt)}(ke,ke.segments.length-1+ge,Z.numberOfDoubleDots)}(Mt,Be,Z),Ci=Ht.processChildren?es(Ht.segmentGroup,Ht.index,Mt.commands):pr(Ht.segmentGroup,Ht.index,Mt.commands);return jn(Be,Ht.segmentGroup,Ci,ke,ge)}function nr(Z){return"object"==typeof Z&&null!=Z&&!Z.outlets&&!Z.segmentPath}function ii(Z){return"object"==typeof Z&&null!=Z&&Z.outlets}function jn(Z,me,ke,ge,Be){let Ht,Mt={};ge&&Object.entries(ge).forEach(([_o,Ti])=>{Mt[_o]=Array.isArray(Ti)?Ti.map(or=>`${or}`):`${Ti}`}),Ht=Z===me?ke:di(Z,me,ke);const Ci=Xt(Cn(Ht));return new Wo(Ci,Mt,Be)}function di(Z,me,ke){const ge={};return Object.entries(Z.children).forEach(([Be,Mt])=>{ge[Be]=Mt===me?ke:di(Mt,me,ke)}),new lr(Z.segments,ge)}class co{constructor(me,ke,ge){if(this.isAbsolute=me,this.numberOfDoubleDots=ke,this.commands=ge,me&&ge.length>0&&nr(ge[0]))throw new V.wOt(4003,!1);const Be=ge.find(ii);if(Be&&Be!==po(ge))throw new V.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kt{constructor(me,ke,ge){this.segmentGroup=me,this.processChildren=ke,this.index=ge}}function pr(Z,me,ke){var ge;if(null!==(ge=Z)&&void 0!==ge||(Z=new lr([],{})),0===Z.segments.length&&Z.hasChildren())return es(Z,me,ke);const Be=function qr(Z,me,ke){let ge=0,Be=me;const Mt={match:!1,pathIndex:0,commandIndex:0};for(;Be<Z.segments.length;){if(ge>=ke.length)return Mt;const Ht=Z.segments[Be],Ci=ke[ge];if(ii(Ci))break;const _o=`${Ci}`,Ti=ge<ke.length-1?ke[ge+1]:null;if(Be>0&&void 0===_o)break;if(_o&&Ti&&"object"==typeof Ti&&void 0===Ti.outlets){if(!Oa(_o,Ti,Ht))return Mt;ge+=2}else{if(!Oa(_o,{},Ht))return Mt;ge++}Be++}return{match:!0,pathIndex:Be,commandIndex:ge}}(Z,me,ke),Mt=ke.slice(Be.commandIndex);if(Be.match&&Be.pathIndex<Z.segments.length){const Ht=new lr(Z.segments.slice(0,Be.pathIndex),{});return Ht.children[Ei]=new lr(Z.segments.slice(Be.pathIndex),Z.children),es(Ht,0,Mt)}return Be.match&&0===Mt.length?new lr(Z.segments,{}):Be.match&&!Z.hasChildren()?Pa(Z,me,ke):Be.match?es(Z,0,Mt):Pa(Z,me,ke)}function es(Z,me,ke){if(0===ke.length)return new lr(Z.segments,{});{const ge=function Xo(Z){return ii(Z[0])?Z[0].outlets:{[Ei]:Z}}(ke),Be={};if(Object.keys(ge).some(Mt=>Mt!==Ei)&&Z.children[Ei]&&1===Z.numberOfChildren&&0===Z.children[Ei].segments.length){const Mt=es(Z.children[Ei],me,ke);return new lr(Z.segments,Mt.children)}return Object.entries(ge).forEach(([Mt,Ht])=>{"string"==typeof Ht&&(Ht=[Ht]),null!==Ht&&(Be[Mt]=pr(Z.children[Mt],me,Ht))}),Object.entries(Z.children).forEach(([Mt,Ht])=>{void 0===ge[Mt]&&(Be[Mt]=Ht)}),new lr(Z.segments,Be)}}function Pa(Z,me,ke){const ge=Z.segments.slice(0,me);let Be=0;for(;Be<ke.length;){const Mt=ke[Be];if(ii(Mt)){const _o=Jl(Mt.outlets);return new lr(ge,_o)}if(0===Be&&nr(ke[0])){ge.push(new Pr(Z.segments[me].path,ru(ke[0]))),Be++;continue}const Ht=ii(Mt)?Mt.outlets[Ei]:`${Mt}`,Ci=Be<ke.length-1?ke[Be+1]:null;Ht&&Ci&&nr(Ci)?(ge.push(new Pr(Ht,ru(Ci))),Be+=2):(ge.push(new Pr(Ht,{})),Be++)}return new lr(ge,{})}function Jl(Z){const me={};return Object.entries(Z).forEach(([ke,ge])=>{"string"==typeof ge&&(ge=[ge]),null!==ge&&(me[ke]=Pa(new lr([],{}),0,ge))}),me}function ru(Z){const me={};return Object.entries(Z).forEach(([ke,ge])=>me[ke]=`${ge}`),me}function Oa(Z,me,ke){return Z==ke.path&&Yi(me,ke.parameters)}const Cr="imperative";var bi=function(Z){return Z[Z.NavigationStart=0]="NavigationStart",Z[Z.NavigationEnd=1]="NavigationEnd",Z[Z.NavigationCancel=2]="NavigationCancel",Z[Z.NavigationError=3]="NavigationError",Z[Z.RoutesRecognized=4]="RoutesRecognized",Z[Z.ResolveStart=5]="ResolveStart",Z[Z.ResolveEnd=6]="ResolveEnd",Z[Z.GuardsCheckStart=7]="GuardsCheckStart",Z[Z.GuardsCheckEnd=8]="GuardsCheckEnd",Z[Z.RouteConfigLoadStart=9]="RouteConfigLoadStart",Z[Z.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",Z[Z.ChildActivationStart=11]="ChildActivationStart",Z[Z.ChildActivationEnd=12]="ChildActivationEnd",Z[Z.ActivationStart=13]="ActivationStart",Z[Z.ActivationEnd=14]="ActivationEnd",Z[Z.Scroll=15]="Scroll",Z[Z.NavigationSkipped=16]="NavigationSkipped",Z}(bi||{});class kr{constructor(me,ke){this.id=me,this.url=ke}}class Vr extends kr{constructor(me,ke,ge="imperative",Be=null){super(me,ke),this.type=bi.NavigationStart,this.navigationTrigger=ge,this.restoredState=Be}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class is extends kr{constructor(me,ke,ge){super(me,ke),this.urlAfterRedirects=ge,this.type=bi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Es=function(Z){return Z[Z.Redirect=0]="Redirect",Z[Z.SupersededByNewNavigation=1]="SupersededByNewNavigation",Z[Z.NoDataFromResolver=2]="NoDataFromResolver",Z[Z.GuardRejected=3]="GuardRejected",Z}(Es||{}),wa=function(Z){return Z[Z.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",Z[Z.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",Z}(wa||{});class Gs extends kr{constructor(me,ke,ge,Be){super(me,ke),this.reason=ge,this.code=Be,this.type=bi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xa extends kr{constructor(me,ke,ge,Be){super(me,ke),this.reason=ge,this.code=Be,this.type=bi.NavigationSkipped}}class gl extends kr{constructor(me,ke,ge,Be){super(me,ke),this.error=ge,this.target=Be,this.type=bi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ha extends kr{constructor(me,ke,ge,Be){super(me,ke),this.urlAfterRedirects=ge,this.state=Be,this.type=bi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class su extends kr{constructor(me,ke,ge,Be){super(me,ke),this.urlAfterRedirects=ge,this.state=Be,this.type=bi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class au extends kr{constructor(me,ke,ge,Be,Mt){super(me,ke),this.urlAfterRedirects=ge,this.state=Be,this.shouldActivate=Mt,this.type=bi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _a extends kr{constructor(me,ke,ge,Be){super(me,ke),this.urlAfterRedirects=ge,this.state=Be,this.type=bi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eu extends kr{constructor(me,ke,ge,Be){super(me,ke),this.urlAfterRedirects=ge,this.state=Be,this.type=bi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ja{constructor(me){this.route=me,this.type=bi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ra{constructor(me){this.route=me,this.type=bi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vc{constructor(me){this.snapshot=me,this.type=bi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $u{constructor(me){this.snapshot=me,this.type=bi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ju{constructor(me){this.snapshot=me,this.type=bi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ol{constructor(me){this.snapshot=me,this.type=bi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lu{}class Dc{constructor(me,ke){this.url=me,this.navigationBehaviorOptions=ke}}function vl(Z){return Z.outlet||Ei}function Na(Z){var me;if(!Z)return null;if(null!==(me=Z.routeConfig)&&void 0!==me&&me._injector)return Z.routeConfig._injector;for(let ke=Z.parent;ke;ke=ke.parent){const ge=ke.routeConfig;if(null!=ge&&ge._loadedInjector)return ge._loadedInjector;if(null!=ge&&ge._injector)return ge._injector}return null}class nt{get injector(){var me,ke;return null!==(me=Na(null===(ke=this.route)||void 0===ke?void 0:ke.snapshot))&&void 0!==me?me:this.rootInjector}set injector(me){}constructor(me){this.rootInjector=me,this.outlet=null,this.route=null,this.children=new Dt(this.rootInjector),this.attachRef=null}}let Dt=(()=>{var Z;class me{constructor(ge){this.rootInjector=ge,this.contexts=new Map}onChildOutletCreated(ge,Be){const Mt=this.getOrCreateContext(ge);Mt.outlet=Be,this.contexts.set(ge,Mt)}onChildOutletDestroyed(ge){const Be=this.getContext(ge);Be&&(Be.outlet=null,Be.attachRef=null)}onOutletDeactivated(){const ge=this.contexts;return this.contexts=new Map,ge}onOutletReAttached(ge){this.contexts=ge}getOrCreateContext(ge){let Be=this.getContext(ge);return Be||(Be=new nt(this.rootInjector),this.contexts.set(ge,Be)),Be}getContext(ge){return this.contexts.get(ge)||null}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)(V.KVO(V.uvJ))},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})();class Hn{constructor(me){this._root=me}get root(){return this._root.value}parent(me){const ke=this.pathFromRoot(me);return ke.length>1?ke[ke.length-2]:null}children(me){const ke=Yn(me,this._root);return ke?ke.children.map(ge=>ge.value):[]}firstChild(me){const ke=Yn(me,this._root);return ke&&ke.children.length>0?ke.children[0].value:null}siblings(me){const ke=On(me,this._root);return ke.length<2?[]:ke[ke.length-2].children.map(Be=>Be.value).filter(Be=>Be!==me)}pathFromRoot(me){return On(me,this._root).map(ke=>ke.value)}}function Yn(Z,me){if(Z===me.value)return me;for(const ke of me.children){const ge=Yn(Z,ke);if(ge)return ge}return null}function On(Z,me){if(Z===me.value)return[me];for(const ke of me.children){const ge=On(Z,ke);if(ge.length)return ge.unshift(me),ge}return[]}class li{constructor(me,ke){this.value=me,this.children=ke}toString(){return`TreeNode(${this.value})`}}function bo(Z){const me={};return Z&&Z.children.forEach(ke=>me[ke.value.outlet]=ke),me}class Eo extends Hn{constructor(me,ke){super(me),this.snapshot=ke,Cs(this,me)}toString(){return this.snapshot.toString()}}function so(Z){const me=function mi(Z){const Mt=new Ir([],{},{},"",{},Ei,Z,null,{});return new os("",new li(Mt,[]))}(Z),ke=new ft.t([new Pr("",{})]),ge=new ft.t({}),Be=new ft.t({}),Mt=new ft.t({}),Ht=new ft.t(""),Ci=new qo(ke,ge,Mt,Ht,Be,Ei,Z,me.root);return Ci.snapshot=me.root,new Eo(new li(Ci,[]),me)}class qo{constructor(me,ke,ge,Be,Mt,Ht,Ci,_o){var Ti,or;this.urlSubject=me,this.paramsSubject=ke,this.queryParamsSubject=ge,this.fragmentSubject=Be,this.dataSubject=Mt,this.outlet=Ht,this.component=Ci,this._futureSnapshot=_o,this.title=null!==(Ti=null===(or=this.dataSubject)||void 0===or?void 0:or.pipe((0,Mn.T)(Us=>Us[ko])))&&void 0!==Ti?Ti:(0,Y.of)(void 0),this.url=me,this.params=ke,this.queryParams=ge,this.fragment=Be,this.data=Mt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var me;return null!==(me=this._paramMap)&&void 0!==me||(this._paramMap=this.params.pipe((0,Mn.T)(ke=>Wr(ke)))),this._paramMap}get queryParamMap(){var me;return null!==(me=this._queryParamMap)&&void 0!==me||(this._queryParamMap=this.queryParams.pipe((0,Mn.T)(ke=>Wr(ke)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hr(Z,me,ke="emptyOnly"){var ge;let Be;const{routeConfig:Mt}=Z;var Ht;return Be=null===me||"always"!==ke&&""!==(null==Mt?void 0:Mt.path)&&(me.component||null!==(ge=me.routeConfig)&&void 0!==ge&&ge.loadComponent)?{params:{...Z.params},data:{...Z.data},resolve:{...Z.data,...null!==(Ht=Z._resolvedData)&&void 0!==Ht?Ht:{}}}:{params:{...me.params,...Z.params},data:{...me.data,...Z.data},resolve:{...Z.data,...me.data,...null==Mt?void 0:Mt.data,...Z._resolvedData}},Mt&&Yr(Mt)&&(Be.resolve[ko]=Mt.title),Be}class Ir{get title(){var me;return null===(me=this.data)||void 0===me?void 0:me[ko]}constructor(me,ke,ge,Be,Mt,Ht,Ci,_o,Ti){this.url=me,this.params=ke,this.queryParams=ge,this.fragment=Be,this.data=Mt,this.outlet=Ht,this.component=Ci,this.routeConfig=_o,this._resolve=Ti}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var me;return null!==(me=this._paramMap)&&void 0!==me||(this._paramMap=Wr(this.params)),this._paramMap}get queryParamMap(){var me;return null!==(me=this._queryParamMap)&&void 0!==me||(this._queryParamMap=Wr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(ge=>ge.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class os extends Hn{constructor(me,ke){super(ke),this.url=me,Cs(this,ke)}toString(){return ea(this._root)}}function Cs(Z,me){me.value._routerState=Z,me.children.forEach(ke=>Cs(Z,ke))}function ea(Z){const me=Z.children.length>0?` { ${Z.children.map(ea).join(", ")} } `:"";return`${Z.value}${me}`}function Ps(Z){if(Z.snapshot){const me=Z.snapshot,ke=Z._futureSnapshot;Z.snapshot=ke,Yi(me.queryParams,ke.queryParams)||Z.queryParamsSubject.next(ke.queryParams),me.fragment!==ke.fragment&&Z.fragmentSubject.next(ke.fragment),Yi(me.params,ke.params)||Z.paramsSubject.next(ke.params),function vi(Z,me){if(Z.length!==me.length)return!1;for(let ke=0;ke<Z.length;++ke)if(!Yi(Z[ke],me[ke]))return!1;return!0}(me.url,ke.url)||Z.urlSubject.next(ke.url),Yi(me.data,ke.data)||Z.dataSubject.next(ke.data)}else Z.snapshot=Z._futureSnapshot,Z.dataSubject.next(Z._futureSnapshot.data)}function Nr(Z,me){const ke=Yi(Z.params,me.params)&&function xr(Z,me){return wr(Z,me)&&Z.every((ke,ge)=>Yi(ke.parameters,me[ge].parameters))}(Z.url,me.url);return ke&&!(!Z.parent!=!me.parent)&&(!Z.parent||Nr(Z.parent,me.parent))}function Yr(Z){return"string"==typeof Z.title||null===Z.title}let ta=(()=>{var Z;class me{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ei,this.activateEvents=new V.bkB,this.deactivateEvents=new V.bkB,this.attachEvents=new V.bkB,this.detachEvents=new V.bkB,this.parentContexts=(0,V.WQX)(Dt),this.location=(0,V.WQX)(V.c1b),this.changeDetector=(0,V.WQX)(V.gRc),this.inputBinder=(0,V.WQX)(fa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(ge){if(ge.name){const{firstChange:Be,previousValue:Mt}=ge.name;if(Be)return;this.isTrackedInParentContexts(Mt)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(Mt)),this.initializeOutletWithName()}}ngOnDestroy(){var ge;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(ge=this.inputBinder)||void 0===ge||ge.unsubscribeFromRouteData(this)}isTrackedInParentContexts(ge){var Be;return(null===(Be=this.parentContexts.getContext(ge))||void 0===Be?void 0:Be.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const ge=this.parentContexts.getContext(this.name);null!=ge&&ge.route&&(ge.attachRef?this.attach(ge.attachRef,ge.route):this.activateWith(ge.route,ge.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V.wOt(4012,!1);this.location.detach();const ge=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(ge.instance),ge}attach(ge,Be){var Mt;this.activated=ge,this._activatedRoute=Be,this.location.insert(ge.hostView),null===(Mt=this.inputBinder)||void 0===Mt||Mt.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(ge.instance)}deactivate(){if(this.activated){const ge=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(ge)}}activateWith(ge,Be){var Mt;if(this.isActivated)throw new V.wOt(4013,!1);this._activatedRoute=ge;const Ht=this.location,_o=ge.snapshot.component,Ti=this.parentContexts.getOrCreateContext(this.name).children,or=new cc(ge,Ti,Ht.injector);this.activated=Ht.createComponent(_o,{index:Ht.length,injector:or,environmentInjector:Be}),this.changeDetector.markForCheck(),null===(Mt=this.inputBinder)||void 0===Mt||Mt.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275dir=V.FsC({type:Z,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[V.OA$]}),me})();class cc{__ngOutletInjector(me){return new cc(this.route,this.childContexts,me)}constructor(me,ke,ge){this.route=me,this.childContexts=ke,this.parent=ge}get(me,ke){return me===qo?this.route:me===Dt?this.childContexts:this.parent.get(me,ke)}}const fa=new V.nKC("");let Os=(()=>{var Z;class me{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(ge){this.unsubscribeFromRouteData(ge),this.subscribeToRouteData(ge)}unsubscribeFromRouteData(ge){var Be;null===(Be=this.outletDataSubscriptions.get(ge))||void 0===Be||Be.unsubscribe(),this.outletDataSubscriptions.delete(ge)}subscribeToRouteData(ge){const{activatedRoute:Be}=ge,Mt=(0,qt.z)([Be.queryParams,Be.params,Be.data]).pipe((0,Zn.n)(([Ht,Ci,_o],Ti)=>(_o={...Ht,...Ci,..._o},0===Ti?(0,Y.of)(_o):Promise.resolve(_o)))).subscribe(Ht=>{if(!ge.isActivated||!ge.activatedComponentRef||ge.activatedRoute!==Be||null===Be.component)return void this.unsubscribeFromRouteData(ge);const Ci=(0,V.HJs)(Be.component);if(Ci)for(const{templateName:_o}of Ci.inputs)ge.activatedComponentRef.setInput(_o,Ht[_o]);else this.unsubscribeFromRouteData(ge)});this.outletDataSubscriptions.set(ge,Mt)}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac}),me})();function Zs(Z,me,ke){if(ke&&Z.shouldReuseRoute(me.value,ke.value.snapshot)){const ge=ke.value;ge._futureSnapshot=me.value;const Be=function hu(Z,me,ke){return me.children.map(ge=>{for(const Be of ke.children)if(Z.shouldReuseRoute(ge.value,Be.value.snapshot))return Zs(Z,ge,Be);return Zs(Z,ge)})}(Z,me,ke);return new li(ge,Be)}{if(Z.shouldAttach(me.value)){const Mt=Z.retrieve(me.value);if(null!==Mt){const Ht=Mt.route;return Ht.value._futureSnapshot=me.value,Ht.children=me.children.map(Ci=>Zs(Z,Ci)),Ht}}const ge=function Uu(Z){return new qo(new ft.t(Z.url),new ft.t(Z.params),new ft.t(Z.queryParams),new ft.t(Z.fragment),new ft.t(Z.data),Z.outlet,Z.component,Z)}(me.value),Be=me.children.map(Mt=>Zs(Z,Mt));return new li(ge,Be)}}class Ea{constructor(me,ke){this.redirectTo=me,this.navigationBehaviorOptions=ke}}const Ga="ngNavigationCancelingError";function nl(Z,me){const{redirectTo:ke,navigationBehaviorOptions:ge}=Nn(me)?{redirectTo:me,navigationBehaviorOptions:void 0}:me,Be=uc(!1,Es.Redirect);return Be.url=ke,Be.navigationBehaviorOptions=ge,Be}function uc(Z,me){const ke=new Error(`NavigationCancelingError: ${Z||""}`);return ke[Ga]=!0,ke.cancellationCode=me,ke}function sd(Z){return!!Z&&Z[Ga]}class St{constructor(me,ke,ge,Be,Mt){this.routeReuseStrategy=me,this.futureState=ke,this.currState=ge,this.forwardEvent=Be,this.inputBindingEnabled=Mt}activate(me){const ke=this.futureState._root,ge=this.currState?this.currState._root:null;this.deactivateChildRoutes(ke,ge,me),Ps(this.futureState.root),this.activateChildRoutes(ke,ge,me)}deactivateChildRoutes(me,ke,ge){const Be=bo(ke);me.children.forEach(Mt=>{const Ht=Mt.value.outlet;this.deactivateRoutes(Mt,Be[Ht],ge),delete Be[Ht]}),Object.values(Be).forEach(Mt=>{this.deactivateRouteAndItsChildren(Mt,ge)})}deactivateRoutes(me,ke,ge){const Be=me.value,Mt=ke?ke.value:null;if(Be===Mt)if(Be.component){const Ht=ge.getContext(Be.outlet);Ht&&this.deactivateChildRoutes(me,ke,Ht.children)}else this.deactivateChildRoutes(me,ke,ge);else Mt&&this.deactivateRouteAndItsChildren(ke,ge)}deactivateRouteAndItsChildren(me,ke){me.value.component&&this.routeReuseStrategy.shouldDetach(me.value.snapshot)?this.detachAndStoreRouteSubtree(me,ke):this.deactivateRouteAndOutlet(me,ke)}detachAndStoreRouteSubtree(me,ke){const ge=ke.getContext(me.value.outlet),Be=ge&&me.value.component?ge.children:ke,Mt=bo(me);for(const Ht of Object.values(Mt))this.deactivateRouteAndItsChildren(Ht,Be);if(ge&&ge.outlet){const Ht=ge.outlet.detach(),Ci=ge.children.onOutletDeactivated();this.routeReuseStrategy.store(me.value.snapshot,{componentRef:Ht,route:me,contexts:Ci})}}deactivateRouteAndOutlet(me,ke){const ge=ke.getContext(me.value.outlet),Be=ge&&me.value.component?ge.children:ke,Mt=bo(me);for(const Ht of Object.values(Mt))this.deactivateRouteAndItsChildren(Ht,Be);ge&&(ge.outlet&&(ge.outlet.deactivate(),ge.children.onOutletDeactivated()),ge.attachRef=null,ge.route=null)}activateChildRoutes(me,ke,ge){const Be=bo(ke);me.children.forEach(Mt=>{this.activateRoutes(Mt,Be[Mt.value.outlet],ge),this.forwardEvent(new Ol(Mt.value.snapshot))}),me.children.length&&this.forwardEvent(new $u(me.value.snapshot))}activateRoutes(me,ke,ge){const Be=me.value,Mt=ke?ke.value:null;if(Ps(Be),Be===Mt)if(Be.component){const Ht=ge.getOrCreateContext(Be.outlet);this.activateChildRoutes(me,ke,Ht.children)}else this.activateChildRoutes(me,ke,ge);else if(Be.component){const Ht=ge.getOrCreateContext(Be.outlet);if(this.routeReuseStrategy.shouldAttach(Be.snapshot)){const Ci=this.routeReuseStrategy.retrieve(Be.snapshot);this.routeReuseStrategy.store(Be.snapshot,null),Ht.children.onOutletReAttached(Ci.contexts),Ht.attachRef=Ci.componentRef,Ht.route=Ci.route.value,Ht.outlet&&Ht.outlet.attach(Ci.componentRef,Ci.route.value),Ps(Ci.route.value),this.activateChildRoutes(me,null,Ht.children)}else Ht.attachRef=null,Ht.route=Be,Ht.outlet&&Ht.outlet.activateWith(Be,Ht.injector),this.activateChildRoutes(me,null,Ht.children)}else this.activateChildRoutes(me,null,ge)}}class ln{constructor(me){this.path=me,this.route=this.path[this.path.length-1]}}class Fn{constructor(me,ke){this.component=me,this.route=ke}}function Gn(Z,me,ke){const ge=Z._root;return ki(ge,me?me._root:null,ke,[ge.value])}function Li(Z,me){const ke=Symbol(),ge=me.get(Z,ke);return ge===ke?"function"!=typeof Z||(0,V.LfX)(Z)?me.get(Z):Z:ge}function ki(Z,me,ke,ge,Be={canDeactivateChecks:[],canActivateChecks:[]}){const Mt=bo(me);return Z.children.forEach(Ht=>{(function ao(Z,me,ke,ge,Be={canDeactivateChecks:[],canActivateChecks:[]}){const Mt=Z.value,Ht=me?me.value:null,Ci=ke?ke.getContext(Z.value.outlet):null;if(Ht&&Mt.routeConfig===Ht.routeConfig){const _o=function Ko(Z,me,ke){if("function"==typeof ke)return ke(Z,me);switch(ke){case"pathParamsChange":return!wr(Z.url,me.url);case"pathParamsOrQueryParamsChange":return!wr(Z.url,me.url)||!Yi(Z.queryParams,me.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nr(Z,me)||!Yi(Z.queryParams,me.queryParams);default:return!Nr(Z,me)}}(Ht,Mt,Mt.routeConfig.runGuardsAndResolvers);_o?Be.canActivateChecks.push(new ln(ge)):(Mt.data=Ht.data,Mt._resolvedData=Ht._resolvedData),ki(Z,me,Mt.component?Ci?Ci.children:null:ke,ge,Be),_o&&Ci&&Ci.outlet&&Ci.outlet.isActivated&&Be.canDeactivateChecks.push(new Fn(Ci.outlet.component,Ht))}else Ht&&sr(me,Ci,Be),Be.canActivateChecks.push(new ln(ge)),ki(Z,null,Mt.component?Ci?Ci.children:null:ke,ge,Be)})(Ht,Mt[Ht.value.outlet],ke,ge.concat([Ht.value]),Be),delete Mt[Ht.value.outlet]}),Object.entries(Mt).forEach(([Ht,Ci])=>sr(Ci,ke.getContext(Ht),Be)),Be}function sr(Z,me,ke){const ge=bo(Z),Be=Z.value;Object.entries(ge).forEach(([Mt,Ht])=>{sr(Ht,Be.component?me?me.children.getContext(Mt):null:me,ke)}),ke.canDeactivateChecks.push(new Fn(Be.component&&me&&me.outlet&&me.outlet.isActivated?me.outlet.component:null,Be))}function gr(Z){return"function"==typeof Z}function Sa(Z){return Z instanceof wt||"EmptyError"===(null==Z?void 0:Z.name)}const Tc=Symbol("INITIAL_VALUE");function Sl(){return(0,Zn.n)(Z=>(0,qt.z)(Z.map(me=>me.pipe((0,xt.s)(1),function Pn(...Z){const me=(0,Ot.lI)(Z);return(0,wn.N)((ke,ge)=>{(me?(0,C.x)(Z,ke,me):(0,C.x)(Z,ke)).subscribe(ge)})}(Tc)))).pipe((0,Mn.T)(me=>{for(const ke of me)if(!0!==ke){if(ke===Tc)return Tc;if(!1===ke||Ll(ke))return ke}return!0}),(0,Ii.p)(me=>me!==Tc),(0,xt.s)(1)))}function Ll(Z){return Nn(Z)||Z instanceof Ea}function _l(Z){return(0,Ut.F)((0,Ke.M)(me=>{if("boolean"!=typeof me)throw nl(0,me)}),(0,Mn.T)(me=>!0===me))}class Xa{constructor(me){this.segmentGroup=me||null}}class cs extends Error{constructor(me){super(),this.urlTree=me}}function _c(Z){return(0,yt.$)(new Xa(Z))}class ec{constructor(me,ke){this.urlSerializer=me,this.urlTree=ke}lineralizeSegments(me,ke){let ge=[],Be=ke.root;for(;;){if(ge=ge.concat(Be.segments),0===Be.numberOfChildren)return(0,Y.of)(ge);if(Be.numberOfChildren>1||!Be.children[Ei])return(0,yt.$)(new V.wOt(4e3,!1));Be=Be.children[Ei]}}applyRedirectCommands(me,ke,ge,Be,Mt){if("string"!=typeof ke){const Ci=ke,{queryParams:_o,fragment:Ti,routeConfig:or,url:Us,outlet:Va,params:Qs,data:Ml,title:Qc}=Be,pc=(0,V.N4e)(Mt,()=>Ci({params:Qs,data:Ml,queryParams:_o,fragment:Ti,routeConfig:or,url:Us,outlet:Va,title:Qc}));if(pc instanceof Wo)throw new cs(pc);ke=pc}const Ht=this.applyRedirectCreateUrlTree(ke,this.urlSerializer.parse(ke),me,ge);if("/"===ke[0])throw new cs(Ht);return Ht}applyRedirectCreateUrlTree(me,ke,ge,Be){const Mt=this.createSegmentGroup(me,ke.root,ge,Be);return new Wo(Mt,this.createQueryParams(ke.queryParams,this.urlTree.queryParams),ke.fragment)}createQueryParams(me,ke){const ge={};return Object.entries(me).forEach(([Be,Mt])=>{if("string"==typeof Mt&&":"===Mt[0]){const Ci=Mt.substring(1);ge[Be]=ke[Ci]}else ge[Be]=Mt}),ge}createSegmentGroup(me,ke,ge,Be){const Mt=this.createSegments(me,ke.segments,ge,Be);let Ht={};return Object.entries(ke.children).forEach(([Ci,_o])=>{Ht[Ci]=this.createSegmentGroup(me,_o,ge,Be)}),new lr(Mt,Ht)}createSegments(me,ke,ge,Be){return ke.map(Mt=>":"===Mt.path[0]?this.findPosParam(me,Mt,Be):this.findOrReturn(Mt,ge))}findPosParam(me,ke,ge){const Be=ge[ke.path.substring(1)];if(!Be)throw new V.wOt(4001,!1);return Be}findOrReturn(me,ke){let ge=0;for(const Be of ke){if(Be.path===me.path)return ke.splice(ge),Be;ge++}return me}}const vd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function b0(Z,me,ke,ge,Be){const Mt=uh(Z,me,ke);return Mt.matched?(ge=function lc(Z,me){var ke;return Z.providers&&!Z._injector&&(Z._injector=(0,V.Ol2)(Z.providers,me,`Route: ${Z.path}`)),null!==(ke=Z._injector)&&void 0!==ke?ke:me}(me,ge),function Pc(Z,me,ke,ge){const Be=me.canMatch;if(!Be||0===Be.length)return(0,Y.of)(!0);const Mt=Be.map(Ht=>{const Ci=Li(Ht,Z);return Xi(function js(Z){return Z&&gr(Z.canMatch)}(Ci)?Ci.canMatch(me,ke):(0,V.N4e)(Z,()=>Ci(me,ke)))});return(0,Y.of)(Mt).pipe(Sl(),_l())}(ge,me,ke).pipe((0,Mn.T)(Ht=>!0===Ht?Mt:{...vd}))):(0,Y.of)(Mt)}function uh(Z,me,ke){var ge,Be;if("**"===me.path)return function xh(Z){return{matched:!0,parameters:Z.length>0?po(Z).parameters:{},consumedSegments:Z,remainingSegments:[],positionalParamSegments:{}}}(ke);if(""===me.path)return"full"===me.pathMatch&&(Z.hasChildren()||ke.length>0)?{...vd}:{matched:!0,consumedSegments:[],remainingSegments:ke,parameters:{},positionalParamSegments:{}};const Ht=(me.matcher||ji)(ke,Z,me);if(!Ht)return{...vd};const Ci={};Object.entries(null!==(ge=Ht.posParams)&&void 0!==ge?ge:{}).forEach(([Ti,or])=>{Ci[Ti]=or.path});const _o=Ht.consumed.length>0?{...Ci,...Ht.consumed[Ht.consumed.length-1].parameters}:Ci;return{matched:!0,consumedSegments:Ht.consumed,remainingSegments:ke.slice(Ht.consumed.length),parameters:_o,positionalParamSegments:null!==(Be=Ht.posParams)&&void 0!==Be?Be:{}}}function Ih(Z,me,ke,ge){return ke.length>0&&function Eh(Z,me,ke){return ke.some(ge=>pu(Z,me,ge)&&vl(ge)!==Ei)}(Z,ke,ge)?{segmentGroup:new lr(me,dh(ge,new lr(ke,Z.children))),slicedSegments:[]}:0===ke.length&&function _d(Z,me,ke){return ke.some(ge=>pu(Z,me,ge))}(Z,ke,ge)?{segmentGroup:new lr(Z.segments,Cu(Z,ke,ge,Z.children)),slicedSegments:ke}:{segmentGroup:new lr(Z.segments,Z.children),slicedSegments:ke}}function Cu(Z,me,ke,ge){const Be={};for(const Mt of ke)if(pu(Z,me,Mt)&&!ge[vl(Mt)]){const Ht=new lr([],{});Be[vl(Mt)]=Ht}return{...ge,...Be}}function dh(Z,me){const ke={};ke[Ei]=me;for(const ge of Z)if(""===ge.path&&vl(ge)!==Ei){const Be=new lr([],{});ke[vl(ge)]=Be}return ke}function pu(Z,me,ke){return(!(Z.hasChildren()||me.length>0)||"full"!==ke.pathMatch)&&""===ke.path}class Wd{}class a1{constructor(me,ke,ge,Be,Mt,Ht,Ci){this.injector=me,this.configLoader=ke,this.rootComponentType=ge,this.config=Be,this.urlTree=Mt,this.paramsInheritanceStrategy=Ht,this.urlSerializer=Ci,this.applyRedirects=new ec(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(me){return new V.wOt(4002,`'${me.segmentGroup}'`)}recognize(){const me=Ih(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(me).pipe((0,Mn.T)(({children:ke,rootSnapshot:ge})=>{const Be=new li(ge,ke),Mt=new os("",Be),Ht=function Hi(Z,me,ke=null,ge=null){return Fo(Oi(Z),me,ke,ge)}(ge,[],this.urlTree.queryParams,this.urlTree.fragment);return Ht.queryParams=this.urlTree.queryParams,Mt.url=this.urlSerializer.serialize(Ht),{state:Mt,tree:Ht}}))}match(me){const ke=new Ir([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Ei,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,me,Ei,ke).pipe((0,Mn.T)(ge=>({children:ge,rootSnapshot:ke})),Ge(ge=>{if(ge instanceof cs)return this.urlTree=ge.urlTree,this.match(ge.urlTree.root);throw ge instanceof Xa?this.noMatchError(ge):ge}))}processSegmentGroup(me,ke,ge,Be,Mt){return 0===ge.segments.length&&ge.hasChildren()?this.processChildren(me,ke,ge,Mt):this.processSegment(me,ke,ge,ge.segments,Be,!0,Mt).pipe((0,Mn.T)(Ht=>Ht instanceof li?[Ht]:[]))}processChildren(me,ke,ge,Be){const Mt=[];for(const Ht of Object.keys(ge.children))"primary"===Ht?Mt.unshift(Ht):Mt.push(Ht);return(0,We.H)(Mt).pipe((0,Vn.H)(Ht=>{const Ci=ge.children[Ht],_o=function rs(Z,me){const ke=Z.filter(ge=>vl(ge)===me);return ke.push(...Z.filter(ge=>vl(ge)!==me)),ke}(ke,Ht);return this.processSegmentGroup(me,_o,Ci,Ht,Be)}),function zt(Z,me){return(0,wn.N)(function et(Z,me,ke,ge,Be){return(Mt,Ht)=>{let Ci=ke,_o=me,Ti=0;Mt.subscribe((0,kn._)(Ht,or=>{const Us=Ti++;_o=Ci?Z(_o,or,Us):(Ci=!0,or),ge&&Ht.next(_o)},Be&&(()=>{Ci&&Ht.next(_o),Ht.complete()})))}}(Z,me,arguments.length>=2,!0))}((Ht,Ci)=>(Ht.push(...Ci),Ht)),Te(null),function un(Z,me){const ke=arguments.length>=2;return ge=>ge.pipe(Z?(0,Ii.p)((Be,Mt)=>Z(Be,Mt,ge)):En.D,qn(1),ke?Te(me):on(()=>new wt))}(),(0,Et.Z)(Ht=>{if(null===Ht)return _c(ge);const Ci=$0(Ht);return function w0(Z){Z.sort((me,ke)=>me.value.outlet===Ei?-1:ke.value.outlet===Ei?1:me.value.outlet.localeCompare(ke.value.outlet))}(Ci),(0,Y.of)(Ci)}))}processSegment(me,ke,ge,Be,Mt,Ht,Ci){return(0,We.H)(ke).pipe((0,Vn.H)(_o=>{var Ti;return this.processSegmentAgainstRoute(null!==(Ti=_o._injector)&&void 0!==Ti?Ti:me,ke,_o,ge,Be,Mt,Ht,Ci).pipe(Ge(or=>{if(or instanceof Xa)return(0,Y.of)(null);throw or}))}),oo(_o=>!!_o),Ge(_o=>{if(Sa(_o))return function Rc(Z,me,ke){return 0===me.length&&!Z.children[ke]}(ge,Be,Mt)?(0,Y.of)(new Wd):_c(ge);throw _o}))}processSegmentAgainstRoute(me,ke,ge,Be,Mt,Ht,Ci,_o){return function dc(Z,me,ke,ge){return!!(vl(Z)===ge||ge!==Ei&&pu(me,ke,Z))&&uh(me,Z,ke).matched}(ge,Be,Mt,Ht)?void 0===ge.redirectTo?this.matchSegmentAgainstRoute(me,Be,ge,Mt,Ht,_o):this.allowRedirects&&Ci?this.expandSegmentAgainstRouteUsingRedirect(me,Be,ke,ge,Mt,Ht,_o):_c(Be):_c(Be)}expandSegmentAgainstRouteUsingRedirect(me,ke,ge,Be,Mt,Ht,Ci){var _o,Ti;const{matched:or,parameters:Us,consumedSegments:Va,positionalParamSegments:Qs,remainingSegments:Ml}=uh(ke,Be,Mt);if(!or)return _c(ke);"string"==typeof Be.redirectTo&&"/"===Be.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Qc=new Ir(Mt,Us,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yc(Be),vl(Be),null!==(_o=null!==(Ti=Be.component)&&void 0!==Ti?Ti:Be._loadedComponent)&&void 0!==_o?_o:null,Be,Ls(Be)),pc=hr(Qc,Ci,this.paramsInheritanceStrategy);Qc.params=Object.freeze(pc.params),Qc.data=Object.freeze(pc.data);const Ld=this.applyRedirects.applyRedirectCommands(Va,Be.redirectTo,Qs,Qc,me);return this.applyRedirects.lineralizeSegments(Be,Ld).pipe((0,Et.Z)($l=>this.processSegment(me,ge,ke,$l.concat(Ml),Ht,!1,Ci)))}matchSegmentAgainstRoute(me,ke,ge,Be,Mt,Ht){const Ci=b0(ke,ge,Be,me);return"**"===ge.path&&(ke.children={}),Ci.pipe((0,Zn.n)(_o=>{var Ti;return _o.matched?(me=null!==(Ti=ge._injector)&&void 0!==Ti?Ti:me,this.getChildConfig(me,ge,Be).pipe((0,Zn.n)(({routes:or})=>{var Us,Va,Qs;const Ml=null!==(Us=ge._loadedInjector)&&void 0!==Us?Us:me,{parameters:Qc,consumedSegments:pc,remainingSegments:Ld}=_o,$l=new Ir(pc,Qc,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yc(ge),vl(ge),null!==(Va=null!==(Qs=ge.component)&&void 0!==Qs?Qs:ge._loadedComponent)&&void 0!==Va?Va:null,ge,Ls(ge)),A0=hr($l,Ht,this.paramsInheritanceStrategy);$l.params=Object.freeze(A0.params),$l.data=Object.freeze(A0.data);const{segmentGroup:Jc,slicedSegments:Mu}=Ih(ke,pc,Ld,or);if(0===Mu.length&&Jc.hasChildren())return this.processChildren(Ml,or,Jc,$l).pipe((0,Mn.T)(Kh=>new li($l,Kh)));if(0===or.length&&0===Mu.length)return(0,Y.of)(new li($l,[]));const S1=vl(ge)===Mt;return this.processSegment(Ml,or,Jc,Mu,S1?Ei:Mt,!0,$l).pipe((0,Mn.T)(Kh=>new li($l,Kh instanceof li?[Kh]:[])))}))):_c(ke)}))}getChildConfig(me,ke,ge){return ke.children?(0,Y.of)({routes:ke.children,injector:me}):ke.loadChildren?void 0!==ke._loadedRoutes?(0,Y.of)({routes:ke._loadedRoutes,injector:ke._loadedInjector}):function Wa(Z,me,ke,ge){const Be=me.canLoad;if(void 0===Be||0===Be.length)return(0,Y.of)(!0);const Mt=Be.map(Ht=>{const Ci=Li(Ht,Z);return Xi(function sa(Z){return Z&&gr(Z.canLoad)}(Ci)?Ci.canLoad(me,ke):(0,V.N4e)(Z,()=>Ci(me,ke)))});return(0,Y.of)(Mt).pipe(Sl(),_l())}(me,ke,ge).pipe((0,Et.Z)(Be=>Be?this.configLoader.loadChildren(me,ke).pipe((0,Ke.M)(Mt=>{ke._loadedRoutes=Mt.routes,ke._loadedInjector=Mt.injector})):function us(Z){return(0,yt.$)(uc(!1,Es.GuardRejected))}())):(0,Y.of)({routes:[],injector:me})}}function x0(Z){const me=Z.value.routeConfig;return me&&""===me.path}function $0(Z){const me=[],ke=new Set;for(const ge of Z){if(!x0(ge)){me.push(ge);continue}const Be=me.find(Mt=>ge.value.routeConfig===Mt.value.routeConfig);void 0!==Be?(Be.children.push(...ge.children),ke.add(Be)):me.push(ge)}for(const ge of ke){const Be=$0(ge.children);me.push(new li(ge.value,Be))}return me.filter(ge=>!ke.has(ge))}function yc(Z){return Z.data||{}}function Ls(Z){return Z.resolve||{}}function Bl(Z){const me=Z.children.map(ke=>Bl(ke)).flat();return[Z,...me]}function bc(Z){return(0,Zn.n)(me=>{const ke=Z(me);return ke?(0,We.H)(ke).pipe((0,Mn.T)(()=>me)):(0,Y.of)(me)})}let qd=(()=>{var Z;class me{buildTitle(ge){let Be,Mt=ge.root;for(;void 0!==Mt;){var Ht;Be=null!==(Ht=this.getResolvedTitleForRoute(Mt))&&void 0!==Ht?Ht:Be,Mt=Mt.children.find(Ci=>Ci.outlet===Ei)}return Be}getResolvedTitleForRoute(ge){return ge.data[ko]}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:()=>(0,V.WQX)(Xs),providedIn:"root"}),me})(),Xs=(()=>{var Z;class me extends qd{constructor(ge){super(),this.title=ge}updateTitle(ge){const Be=this.buildTitle(ge);void 0!==Be&&this.title.setTitle(Be)}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)(V.KVO(cr.hE))},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})();const E0=new V.nKC("",{providedIn:"root",factory:()=>({})});let Rr=(()=>{var Z;class me{}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275cmp=V.VBU({type:Z,selectors:[["ng-component"]],standalone:!0,features:[V.aNF],decls:1,vars:0,template:function(ge,Be){1&ge&&V.nrm(0,"router-outlet")},dependencies:[ta],encapsulation:2}),me})();function yd(Z){const me=Z.children&&Z.children.map(yd),ke=me?{...Z,children:me}:{...Z};return!ke.component&&!ke.loadComponent&&(me||ke.loadChildren)&&ke.outlet&&ke.outlet!==Ei&&(ke.component=Rr),ke}const Rd=new V.nKC("");let cl=(()=>{var Z;class me{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,V.WQX)(V.Ql9)}loadComponent(ge){if(this.componentLoaders.get(ge))return this.componentLoaders.get(ge);if(ge._loadedComponent)return(0,Y.of)(ge._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(ge);const Be=Xi(ge.loadComponent()).pipe((0,Mn.T)(fe),(0,Ke.M)(Ht=>{this.onLoadEndListener&&this.onLoadEndListener(ge),ge._loadedComponent=Ht}),(0,Qi.j)(()=>{this.componentLoaders.delete(ge)})),Mt=new xn.G(Be,()=>new rn.B).pipe((0,dr.B)());return this.componentLoaders.set(ge,Mt),Mt}loadChildren(ge,Be){if(this.childrenLoaders.get(Be))return this.childrenLoaders.get(Be);if(Be._loadedRoutes)return(0,Y.of)({routes:Be._loadedRoutes,injector:Be._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(Be);const Ht=function fu(Z,me,ke,ge){return Xi(Z.loadChildren()).pipe((0,Mn.T)(fe),(0,Et.Z)(Be=>Be instanceof V.Co$||Array.isArray(Be)?(0,Y.of)(Be):(0,We.H)(me.compileModuleAsync(Be))),(0,Mn.T)(Be=>{ge&&ge(Z);let Mt,Ht,Ci=!1;return Array.isArray(Be)?(Ht=Be,!0):(Mt=Be.create(ke).injector,Ht=Mt.get(Rd,[],{optional:!0,self:!0}).flat()),{routes:Ht.map(yd),injector:Mt}}))}(Be,this.compiler,ge,this.onLoadEndListener).pipe((0,Qi.j)(()=>{this.childrenLoaders.delete(Be)})),Ci=new xn.G(Ht,()=>new rn.B).pipe((0,dr.B)());return this.childrenLoaders.set(Be,Ci),Ci}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})();function fe(Z){return function Su(Z){return Z&&"object"==typeof Z&&"default"in Z}(Z)?Z.default:Z}let Ce=(()=>{var Z;class me{}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:()=>(0,V.WQX)(Nt),providedIn:"root"}),me})(),Nt=(()=>{var Z;class me{shouldProcessUrl(ge){return!0}extract(ge){return ge}merge(ge,Be){return ge}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})();const Ie=new V.nKC(""),ir=new V.nKC("");let fs=(()=>{var Z;class me{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rn.B,this.transitionAbortSubject=new rn.B,this.configLoader=(0,V.WQX)(cl),this.environmentInjector=(0,V.WQX)(V.uvJ),this.urlSerializer=(0,V.WQX)(Jn),this.rootContexts=(0,V.WQX)(Dt),this.location=(0,V.WQX)(ei.aZ),this.inputBindingEnabled=null!==(0,V.WQX)(fa,{optional:!0}),this.titleStrategy=(0,V.WQX)(qd),this.options=(0,V.WQX)(E0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,V.WQX)(Ce),this.createViewTransition=(0,V.WQX)(Ie,{optional:!0}),this.navigationErrorHandler=(0,V.WQX)(ir,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Y.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=Mt=>this.events.next(new Ra(Mt)),this.configLoader.onLoadStartListener=Mt=>this.events.next(new Ja(Mt))}complete(){var ge;null===(ge=this.transitions)||void 0===ge||ge.complete()}handleNavigationRequest(ge){var Be;const Mt=++this.navigationId;null===(Be=this.transitions)||void 0===Be||Be.next({...this.transitions.value,...ge,id:Mt})}setupNavigations(ge,Be,Mt){return this.transitions=new ft.t({id:0,currentUrlTree:Be,currentRawUrl:Be,extractedUrl:this.urlHandlingStrategy.extract(Be),urlAfterRedirects:this.urlHandlingStrategy.extract(Be),rawUrl:Be,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Cr,restoredState:null,currentSnapshot:Mt.snapshot,targetSnapshot:null,currentRouterState:Mt,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ii.p)(Ht=>0!==Ht.id),(0,Mn.T)(Ht=>({...Ht,extractedUrl:this.urlHandlingStrategy.extract(Ht.rawUrl)})),(0,Zn.n)(Ht=>{let Ci=!1,_o=!1;return(0,Y.of)(Ht).pipe((0,Zn.n)(Ti=>{var or;if(this.navigationId>Ht.id)return this.cancelNavigationTransition(Ht,"",Es.SupersededByNewNavigation),fn.w;this.currentTransition=Ht,this.currentNavigation={id:Ti.id,initialUrl:Ti.rawUrl,extractedUrl:Ti.extractedUrl,targetBrowserUrl:"string"==typeof Ti.extras.browserUrl?this.urlSerializer.parse(Ti.extras.browserUrl):Ti.extras.browserUrl,trigger:Ti.source,extras:Ti.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Us=!ge.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),Va=null!==(or=Ti.extras.onSameUrlNavigation)&&void 0!==or?or:ge.onSameUrlNavigation;if(!Us&&"reload"!==Va){const Qs="";return this.events.next(new xa(Ti.id,this.urlSerializer.serialize(Ti.rawUrl),Qs,wa.IgnoredSameUrlNavigation)),Ti.resolve(!1),fn.w}if(this.urlHandlingStrategy.shouldProcessUrl(Ti.rawUrl))return(0,Y.of)(Ti).pipe((0,Zn.n)(Qs=>{var Ml,Qc;const pc=null===(Ml=this.transitions)||void 0===Ml?void 0:Ml.getValue();return this.events.next(new Vr(Qs.id,this.urlSerializer.serialize(Qs.extractedUrl),Qs.source,Qs.restoredState)),pc!==(null===(Qc=this.transitions)||void 0===Qc?void 0:Qc.getValue())?fn.w:Promise.resolve(Qs)}),function j0(Z,me,ke,ge,Be,Mt){return(0,Et.Z)(Ht=>function ks(Z,me,ke,ge,Be,Mt,Ht="emptyOnly"){return new a1(Z,me,ke,ge,Be,Ht,Mt).recognize()}(Z,me,ke,ge,Ht.extractedUrl,Be,Mt).pipe((0,Mn.T)(({state:Ci,tree:_o})=>({...Ht,targetSnapshot:Ci,urlAfterRedirects:_o}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,ge.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ke.M)(Qs=>{Ht.targetSnapshot=Qs.targetSnapshot,Ht.urlAfterRedirects=Qs.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Qs.urlAfterRedirects};const Ml=new Ha(Qs.id,this.urlSerializer.serialize(Qs.extractedUrl),this.urlSerializer.serialize(Qs.urlAfterRedirects),Qs.targetSnapshot);this.events.next(Ml)}));if(Us&&this.urlHandlingStrategy.shouldProcessUrl(Ti.currentRawUrl)){const{id:Qs,extractedUrl:Ml,source:Qc,restoredState:pc,extras:Ld}=Ti,$l=new Vr(Qs,this.urlSerializer.serialize(Ml),Qc,pc);this.events.next($l);const A0=so(this.rootComponentType).snapshot;return this.currentTransition=Ht={...Ti,targetSnapshot:A0,urlAfterRedirects:Ml,extras:{...Ld,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Ml,(0,Y.of)(Ht)}{const Qs="";return this.events.next(new xa(Ti.id,this.urlSerializer.serialize(Ti.extractedUrl),Qs,wa.IgnoredByUrlHandlingStrategy)),Ti.resolve(!1),fn.w}}),(0,Ke.M)(Ti=>{const or=new su(Ti.id,this.urlSerializer.serialize(Ti.extractedUrl),this.urlSerializer.serialize(Ti.urlAfterRedirects),Ti.targetSnapshot);this.events.next(or)}),(0,Mn.T)(Ti=>(this.currentTransition=Ht={...Ti,guards:Gn(Ti.targetSnapshot,Ti.currentSnapshot,this.rootContexts)},Ht)),function ya(Z,me){return(0,Et.Z)(ke=>{const{targetSnapshot:ge,currentSnapshot:Be,guards:{canActivateChecks:Mt,canDeactivateChecks:Ht}}=ke;return 0===Ht.length&&0===Mt.length?(0,Y.of)({...ke,guardsResult:!0}):function Xe(Z,me,ke,ge){return(0,We.H)(Z).pipe((0,Et.Z)(Be=>function Tr(Z,me,ke,ge,Be){const Mt=me&&me.routeConfig?me.routeConfig.canDeactivate:null;if(!Mt||0===Mt.length)return(0,Y.of)(!0);const Ht=Mt.map(Ci=>{var _o;const Ti=null!==(_o=Na(me))&&void 0!==_o?_o:Be,or=Li(Ci,Ti);return Xi(function Vo(Z){return Z&&gr(Z.canDeactivate)}(or)?or.canDeactivate(Z,me,ke,ge):(0,V.N4e)(Ti,()=>or(Z,me,ke,ge))).pipe(oo())});return(0,Y.of)(Ht).pipe(Sl())}(Be.component,Be.route,ke,me,ge)),oo(Be=>!0!==Be,!0))}(Ht,ge,Be,Z).pipe((0,Et.Z)(Ci=>Ci&&function Xr(Z){return"boolean"==typeof Z}(Ci)?function Se(Z,me,ke,ge){return(0,We.H)(me).pipe((0,Vn.H)(Be=>(0,C.x)(function He(Z,me){return null!==Z&&me&&me(new Vc(Z)),(0,Y.of)(!0)}(Be.route.parent,ge),function vt(Z,me){return null!==Z&&me&&me(new ju(Z)),(0,Y.of)(!0)}(Be.route,ge),function Uo(Z,me,ke){const ge=me[me.length-1],Mt=me.slice(0,me.length-1).reverse().map(Ht=>function Mi(Z){const me=Z.routeConfig?Z.routeConfig.canActivateChild:null;return me&&0!==me.length?{node:Z,guards:me}:null}(Ht)).filter(Ht=>null!==Ht).map(Ht=>(0,At.v)(()=>{const Ci=Ht.guards.map(_o=>{var Ti;const or=null!==(Ti=Na(Ht.node))&&void 0!==Ti?Ti:ke,Us=Li(_o,or);return Xi(function ms(Z){return Z&&gr(Z.canActivateChild)}(Us)?Us.canActivateChild(ge,Z):(0,V.N4e)(or,()=>Us(ge,Z))).pipe(oo())});return(0,Y.of)(Ci).pipe(Sl())}));return(0,Y.of)(Mt).pipe(Sl())}(Z,Be.path,ke),function Zt(Z,me,ke){const ge=me.routeConfig?me.routeConfig.canActivate:null;if(!ge||0===ge.length)return(0,Y.of)(!0);const Be=ge.map(Mt=>(0,At.v)(()=>{var Ht;const Ci=null!==(Ht=Na(me))&&void 0!==Ht?Ht:ke,_o=Li(Mt,Ci);return Xi(function xl(Z){return Z&&gr(Z.canActivate)}(_o)?_o.canActivate(me,Z):(0,V.N4e)(Ci,()=>_o(me,Z))).pipe(oo())}));return(0,Y.of)(Be).pipe(Sl())}(Z,Be.route,ke))),oo(Be=>!0!==Be,!0))}(ge,Mt,Z,me):(0,Y.of)(Ci)),(0,Mn.T)(Ci=>({...ke,guardsResult:Ci})))})}(this.environmentInjector,Ti=>this.events.next(Ti)),(0,Ke.M)(Ti=>{if(Ht.guardsResult=Ti.guardsResult,Ti.guardsResult&&"boolean"!=typeof Ti.guardsResult)throw nl(0,Ti.guardsResult);const or=new au(Ti.id,this.urlSerializer.serialize(Ti.extractedUrl),this.urlSerializer.serialize(Ti.urlAfterRedirects),Ti.targetSnapshot,!!Ti.guardsResult);this.events.next(or)}),(0,Ii.p)(Ti=>!!Ti.guardsResult||(this.cancelNavigationTransition(Ti,"",Es.GuardRejected),!1)),bc(Ti=>{if(Ti.guards.canActivateChecks.length)return(0,Y.of)(Ti).pipe((0,Ke.M)(or=>{const Us=new _a(or.id,this.urlSerializer.serialize(or.extractedUrl),this.urlSerializer.serialize(or.urlAfterRedirects),or.targetSnapshot);this.events.next(Us)}),(0,Zn.n)(or=>{let Us=!1;return(0,Y.of)(or).pipe(function I0(Z,me){return(0,Et.Z)(ke=>{const{targetSnapshot:ge,guards:{canActivateChecks:Be}}=ke;if(!Be.length)return(0,Y.of)(ke);const Mt=new Set(Be.map(_o=>_o.route)),Ht=new Set;for(const _o of Mt)if(!Ht.has(_o))for(const Ti of Bl(_o))Ht.add(Ti);let Ci=0;return(0,We.H)(Ht).pipe((0,Vn.H)(_o=>Mt.has(_o)?function ku(Z,me,ke,ge){const Be=Z.routeConfig,Mt=Z._resolve;return void 0!==(null==Be?void 0:Be.title)&&!Yr(Be)&&(Mt[ko]=Be.title),function Hh(Z,me,ke,ge){const Be=ui(Z);if(0===Be.length)return(0,Y.of)({});const Mt={};return(0,We.H)(Be).pipe((0,Et.Z)(Ht=>function Pd(Z,me,ke,ge){var Be;const Mt=null!==(Be=Na(me))&&void 0!==Be?Be:ge,Ht=Li(Z,Mt);return Xi(Ht.resolve?Ht.resolve(me,ke):(0,V.N4e)(Mt,()=>Ht(me,ke)))}(Z[Ht],me,ke,ge).pipe(oo(),(0,Ke.M)(Ci=>{if(Ci instanceof Ea)throw nl(new hs,Ci);Mt[Ht]=Ci}))),qn(1),(0,go.u)(Mt),Ge(Ht=>Sa(Ht)?fn.w:(0,yt.$)(Ht)))}(Mt,Z,me,ge).pipe((0,Mn.T)(Ht=>(Z._resolvedData=Ht,Z.data=hr(Z,Z.parent,ke).resolve,null)))}(_o,ge,Z,me):(_o.data=hr(_o,_o.parent,Z).resolve,(0,Y.of)(void 0))),(0,Ke.M)(()=>Ci++),qn(1),(0,Et.Z)(_o=>Ci===Ht.size?(0,Y.of)(ke):fn.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ke.M)({next:()=>Us=!0,complete:()=>{Us||this.cancelNavigationTransition(or,"",Es.NoDataFromResolver)}}))}),(0,Ke.M)(or=>{const Us=new Eu(or.id,this.urlSerializer.serialize(or.extractedUrl),this.urlSerializer.serialize(or.urlAfterRedirects),or.targetSnapshot);this.events.next(Us)}))}),bc(Ti=>{const or=Us=>{var Va;const Qs=[];null!==(Va=Us.routeConfig)&&void 0!==Va&&Va.loadComponent&&!Us.routeConfig._loadedComponent&&Qs.push(this.configLoader.loadComponent(Us.routeConfig).pipe((0,Ke.M)(Ml=>{Us.component=Ml}),(0,Mn.T)(()=>{})));for(const Ml of Us.children)Qs.push(...or(Ml));return Qs};return(0,qt.z)(or(Ti.targetSnapshot.root)).pipe(Te(null),(0,xt.s)(1))}),bc(()=>this.afterPreactivation()),(0,Zn.n)(()=>{var Ti;const{currentSnapshot:or,targetSnapshot:Us}=Ht,Va=null===(Ti=this.createViewTransition)||void 0===Ti?void 0:Ti.call(this,this.environmentInjector,or.root,Us.root);return Va?(0,We.H)(Va).pipe((0,Mn.T)(()=>Ht)):(0,Y.of)(Ht)}),(0,Mn.T)(Ti=>{const or=function Yc(Z,me,ke){const ge=Zs(Z,me._root,ke?ke._root:void 0);return new Eo(ge,me)}(ge.routeReuseStrategy,Ti.targetSnapshot,Ti.currentRouterState);return this.currentTransition=Ht={...Ti,targetRouterState:or},this.currentNavigation.targetRouterState=or,Ht}),(0,Ke.M)(()=>{this.events.next(new lu)}),((Z,me,ke,ge)=>(0,Mn.T)(Be=>(new St(me,Be.targetRouterState,Be.currentRouterState,ke,ge).activate(Z),Be)))(this.rootContexts,ge.routeReuseStrategy,Ti=>this.events.next(Ti),this.inputBindingEnabled),(0,xt.s)(1),(0,Ke.M)({next:Ti=>{var or;Ci=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new is(Ti.id,this.urlSerializer.serialize(Ti.extractedUrl),this.urlSerializer.serialize(Ti.urlAfterRedirects))),null===(or=this.titleStrategy)||void 0===or||or.updateTitle(Ti.targetRouterState.snapshot),Ti.resolve(!0)},complete:()=>{Ci=!0}}),(0,Go.Q)(this.transitionAbortSubject.pipe((0,Ke.M)(Ti=>{throw Ti}))),(0,Qi.j)(()=>{var Ti;!Ci&&!_o&&this.cancelNavigationTransition(Ht,"",Es.SupersededByNewNavigation),(null===(Ti=this.currentTransition)||void 0===Ti?void 0:Ti.id)===Ht.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ge(Ti=>{if(_o=!0,sd(Ti))this.events.next(new Gs(Ht.id,this.urlSerializer.serialize(Ht.extractedUrl),Ti.message,Ti.cancellationCode)),function gd(Z){return sd(Z)&&Nn(Z.url)}(Ti)?this.events.next(new Dc(Ti.url,Ti.navigationBehaviorOptions)):Ht.resolve(!1);else{var or;const Us=new gl(Ht.id,this.urlSerializer.serialize(Ht.extractedUrl),Ti,null!==(or=Ht.targetSnapshot)&&void 0!==or?or:void 0);try{const Va=(0,V.N4e)(this.environmentInjector,()=>{var Qs;return null===(Qs=this.navigationErrorHandler)||void 0===Qs?void 0:Qs.call(this,Us)});if(Va instanceof Ea){const{message:Qs,cancellationCode:Ml}=nl(0,Va);this.events.next(new Gs(Ht.id,this.urlSerializer.serialize(Ht.extractedUrl),Qs,Ml)),this.events.next(new Dc(Va.redirectTo,Va.navigationBehaviorOptions))}else{this.events.next(Us);const Qs=ge.errorHandler(Ti);Ht.resolve(!!Qs)}}catch(Va){this.options.resolveNavigationPromiseOnError?Ht.resolve(!1):Ht.reject(Va)}}return fn.w}))}))}cancelNavigationTransition(ge,Be,Mt){const Ht=new Gs(ge.id,this.urlSerializer.serialize(ge.extractedUrl),Be,Mt);this.events.next(Ht),ge.resolve(!1)}isUpdatingInternalState(){var ge,Be;return(null===(ge=this.currentTransition)||void 0===ge?void 0:ge.extractedUrl.toString())!==(null===(Be=this.currentTransition)||void 0===Be?void 0:Be.currentUrlTree.toString())}isUpdatedBrowserUrl(){var ge,Be,Mt,Ht;const Ci=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),_o=null!==(ge=null===(Be=this.currentNavigation)||void 0===Be?void 0:Be.targetBrowserUrl)&&void 0!==ge?ge:null===(Mt=this.currentNavigation)||void 0===Mt?void 0:Mt.extractedUrl;return Ci.toString()!==(null==_o?void 0:_o.toString())&&!(null!==(Ht=this.currentNavigation)&&void 0!==Ht&&Ht.extras.skipLocationChange)}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})();function na(Z){return Z!==Cr}let Ws=(()=>{var Z;class me{}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:()=>(0,V.WQX)(Fa),providedIn:"root"}),me})();class $r{shouldDetach(me){return!1}store(me,ke){}shouldAttach(me){return!1}retrieve(me){return null}shouldReuseRoute(me,ke){return me.routeConfig===ke.routeConfig}}let Fa=(()=>{var Z;class me extends $r{}return(Z=me).\u0275fac=(()=>{let ke;return function(Be){return(ke||(ke=V.xGo(Z)))(Be||Z)}})(),Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})(),la=(()=>{var Z;class me{}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:()=>(0,V.WQX)(Wl),providedIn:"root"}),me})(),Wl=(()=>{var Z;class me extends la{constructor(){super(...arguments),this.location=(0,V.WQX)(ei.aZ),this.urlSerializer=(0,V.WQX)(Jn),this.options=(0,V.WQX)(E0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,V.WQX)(Ce),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Wo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=so(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var ge,Be;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(ge=null===(Be=this.restoredState())||void 0===Be?void 0:Be.\u0275routerPageId)&&void 0!==ge?ge:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(ge){return this.location.subscribe(Be=>{"popstate"===Be.type&&ge(Be.url,Be.state)})}handleRouterEvent(ge,Be){if(ge instanceof Vr)this.stateMemento=this.createStateMemento();else if(ge instanceof xa)this.rawUrlTree=Be.initialUrl;else if(ge instanceof Ha){if("eager"===this.urlUpdateStrategy&&!Be.extras.skipLocationChange){var Mt;const Ci=this.urlHandlingStrategy.merge(Be.finalUrl,Be.initialUrl);this.setBrowserUrl(null!==(Mt=Be.targetBrowserUrl)&&void 0!==Mt?Mt:Ci,Be)}}else if(ge instanceof lu){var Ht;this.currentUrlTree=Be.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(Be.finalUrl,Be.initialUrl),this.routerState=Be.targetRouterState,"deferred"!==this.urlUpdateStrategy||Be.extras.skipLocationChange||this.setBrowserUrl(null!==(Ht=Be.targetBrowserUrl)&&void 0!==Ht?Ht:this.rawUrlTree,Be)}else ge instanceof Gs&&(ge.code===Es.GuardRejected||ge.code===Es.NoDataFromResolver)?this.restoreHistory(Be):ge instanceof gl?this.restoreHistory(Be,!0):ge instanceof is&&(this.lastSuccessfulId=ge.id,this.currentPageId=this.browserPageId)}setBrowserUrl(ge,Be){const Mt=ge instanceof Wo?this.urlSerializer.serialize(ge):ge;if(this.location.isCurrentPathEqualTo(Mt)||Be.extras.replaceUrl){const Ci={...Be.extras.state,...this.generateNgRouterState(Be.id,this.browserPageId)};this.location.replaceState(Mt,"",Ci)}else{const Ht={...Be.extras.state,...this.generateNgRouterState(Be.id,this.browserPageId+1)};this.location.go(Mt,"",Ht)}}restoreHistory(ge,Be=!1){if("computed"===this.canceledNavigationResolution){const Ht=this.currentPageId-this.browserPageId;0!==Ht?this.location.historyGo(Ht):this.currentUrlTree===ge.finalUrl&&0===Ht&&(this.resetState(ge),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(Be&&this.resetState(ge),this.resetUrlToCurrentUrlTree())}resetState(ge){var Be;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(Be=ge.finalUrl)&&void 0!==Be?Be:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(ge,Be){return"computed"===this.canceledNavigationResolution?{navigationId:ge,\u0275routerPageId:Be}:{navigationId:ge}}}return(Z=me).\u0275fac=(()=>{let ke;return function(Be){return(ke||(ke=V.xGo(Z)))(Be||Z)}})(),Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})();var Tl=function(Z){return Z[Z.COMPLETE=0]="COMPLETE",Z[Z.FAILED=1]="FAILED",Z[Z.REDIRECTING=2]="REDIRECTING",Z}(Tl||{});function ma(Z){throw Z}const Ta={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ka=(()=>{var Z;class me{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var ge,Be;this.disposed=!1,this.console=(0,V.WQX)(V.H3F),this.stateManager=(0,V.WQX)(la),this.options=(0,V.WQX)(E0,{optional:!0})||{},this.pendingTasks=(0,V.WQX)(V.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,V.WQX)(fs),this.urlSerializer=(0,V.WQX)(Jn),this.location=(0,V.WQX)(ei.aZ),this.urlHandlingStrategy=(0,V.WQX)(Ce),this._events=new rn.B,this.errorHandler=this.options.errorHandler||ma,this.navigated=!1,this.routeReuseStrategy=(0,V.WQX)(Ws),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(ge=null===(Be=(0,V.WQX)(Rd,{optional:!0}))||void 0===Be?void 0:Be.flat())&&void 0!==ge?ge:[],this.componentInputBindingEnabled=!!(0,V.WQX)(fa,{optional:!0}),this.eventsSubscription=new ht.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:Mt=>{this.console.warn(Mt)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const ge=this.navigationTransitions.events.subscribe(Be=>{try{const Mt=this.navigationTransitions.currentTransition,Ht=this.navigationTransitions.currentNavigation;if(null!==Mt&&null!==Ht)if(this.stateManager.handleRouterEvent(Be,Ht),Be instanceof Gs&&Be.code!==Es.Redirect&&Be.code!==Es.SupersededByNewNavigation)this.navigated=!0;else if(Be instanceof is)this.navigated=!0;else if(Be instanceof Dc){const Ci=Be.navigationBehaviorOptions,_o=this.urlHandlingStrategy.merge(Be.url,Mt.currentRawUrl),Ti={browserUrl:Mt.extras.browserUrl,info:Mt.extras.info,skipLocationChange:Mt.extras.skipLocationChange,replaceUrl:Mt.extras.replaceUrl||"eager"===this.urlUpdateStrategy||na(Mt.source),...Ci};this.scheduleNavigation(_o,Cr,null,Ti,{resolve:Mt.resolve,reject:Mt.reject,promise:Mt.promise})}(function Ya(Z){return!(Z instanceof lu||Z instanceof Dc)})(Be)&&this._events.next(Be)}catch(Mt){this.navigationTransitions.transitionAbortSubject.next(Mt)}});this.eventsSubscription.add(ge)}resetRootComponentType(ge){this.routerState.root.component=ge,this.navigationTransitions.rootComponentType=ge}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cr,this.stateManager.restoredState())}setUpLocationChangeListener(){var ge;null!==(ge=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==ge||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((Be,Mt)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(Be,"popstate",Mt)},0)}))}navigateToSyncWithBrowser(ge,Be,Mt){const Ht={replaceUrl:!0},Ci=null!=Mt&&Mt.navigationId?Mt:null;if(Mt){const Ti={...Mt};delete Ti.navigationId,delete Ti.\u0275routerPageId,0!==Object.keys(Ti).length&&(Ht.state=Ti)}const _o=this.parseUrl(ge);this.scheduleNavigation(_o,Be,Ci,Ht)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(ge){this.config=ge.map(yd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(ge,Be={}){const{relativeTo:Mt,queryParams:Ht,fragment:Ci,queryParamsHandling:_o,preserveFragment:Ti}=Be,or=Ti?this.currentUrlTree.fragment:Ci;let Va,Us=null;switch(_o){case"merge":Us={...this.currentUrlTree.queryParams,...Ht};break;case"preserve":Us=this.currentUrlTree.queryParams;break;default:Us=Ht||null}null!==Us&&(Us=this.removeEmptyProps(Us));try{Va=Oi(Mt?Mt.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof ge[0]||"/"!==ge[0][0])&&(ge=[]),Va=this.currentUrlTree.root}return Fo(Va,ge,Us,null!=or?or:null)}navigateByUrl(ge,Be={skipLocationChange:!1}){const Mt=Nn(ge)?ge:this.parseUrl(ge),Ht=this.urlHandlingStrategy.merge(Mt,this.rawUrlTree);return this.scheduleNavigation(Ht,Cr,null,Be)}navigate(ge,Be={skipLocationChange:!1}){return function wc(Z){for(let me=0;me<Z.length;me++)if(null==Z[me])throw new V.wOt(4008,!1)}(ge),this.navigateByUrl(this.createUrlTree(ge,Be),Be)}serializeUrl(ge){return this.urlSerializer.serialize(ge)}parseUrl(ge){try{return this.urlSerializer.parse(ge)}catch{return this.urlSerializer.parse("/")}}isActive(ge,Be){let Mt;if(Mt=!0===Be?{...Ta}:!1===Be?{...hc}:Be,Nn(ge))return So(this.currentUrlTree,ge,Mt);const Ht=this.parseUrl(ge);return So(this.currentUrlTree,Ht,Mt)}removeEmptyProps(ge){return Object.entries(ge).reduce((Be,[Mt,Ht])=>(null!=Ht&&(Be[Mt]=Ht),Be),{})}scheduleNavigation(ge,Be,Mt,Ht,Ci){if(this.disposed)return Promise.resolve(!1);let _o,Ti,or;Ci?(_o=Ci.resolve,Ti=Ci.reject,or=Ci.promise):or=new Promise((Va,Qs)=>{_o=Va,Ti=Qs});const Us=this.pendingTasks.add();return function ul(Z,me){Z.events.pipe((0,Ii.p)(ke=>ke instanceof is||ke instanceof Gs||ke instanceof gl||ke instanceof xa),(0,Mn.T)(ke=>ke instanceof is||ke instanceof xa?Tl.COMPLETE:ke instanceof Gs&&(ke.code===Es.Redirect||ke.code===Es.SupersededByNewNavigation)?Tl.REDIRECTING:Tl.FAILED),(0,Ii.p)(ke=>ke!==Tl.REDIRECTING),(0,xt.s)(1)).subscribe(()=>{me()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Us))}),this.navigationTransitions.handleNavigationRequest({source:Be,restoredState:Mt,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:ge,extras:Ht,resolve:_o,reject:Ti,promise:or,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),or.catch(Va=>Promise.reject(Va))}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})(),ad=(()=>{var Z;class me{constructor(ge,Be,Mt,Ht,Ci,_o){var Ti;this.router=ge,this.route=Be,this.tabIndexAttribute=Mt,this.renderer=Ht,this.el=Ci,this.locationStrategy=_o,this.href=null,this.onChanges=new rn.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const or=null===(Ti=Ci.nativeElement.tagName)||void 0===Ti?void 0:Ti.toLowerCase();this.isAnchorElement="a"===or||"area"===or,this.isAnchorElement?this.subscription=ge.events.subscribe(Us=>{Us instanceof is&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(ge){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",ge)}ngOnChanges(ge){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(ge){null==ge?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Nn(ge)||Array.isArray(ge)?ge:[ge],this.setTabIndexIfNotOnNativeEl("0"))}onClick(ge,Be,Mt,Ht,Ci){const _o=this.urlTree;return!!(null===_o||this.isAnchorElement&&(0!==ge||Be||Mt||Ht||Ci||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(_o,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var ge;null===(ge=this.subscription)||void 0===ge||ge.unsubscribe()}updateHref(){var ge;const Be=this.urlTree;this.href=null!==Be&&this.locationStrategy?null===(ge=this.locationStrategy)||void 0===ge?void 0:ge.prepareExternalUrl(this.router.serializeUrl(Be)):null;const Mt=null===this.href?null:(0,V.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",Mt)}applyAttributeValue(ge,Be){const Mt=this.renderer,Ht=this.el.nativeElement;null!==Be?Mt.setAttribute(Ht,ge,Be):Mt.removeAttribute(Ht,ge)}get urlTree(){return null===this.routerLinkInput?null:Nn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)(V.rXU(Ka),V.rXU(qo),V.kS0("tabindex"),V.rXU(V.sFG),V.rXU(V.aKT),V.rXU(ei.hb))},Z.\u0275dir=V.FsC({type:Z,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(ge,Be){1&ge&&V.bIt("click",function(Ht){return Be.onClick(Ht.button,Ht.ctrlKey,Ht.shiftKey,Ht.altKey,Ht.metaKey)}),2&ge&&V.BMQ("target",Be.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",V.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",V.L39],replaceUrl:[2,"replaceUrl","replaceUrl",V.L39],routerLink:"routerLink"},standalone:!0,features:[V.GFd,V.OA$]}),me})(),Xd=(()=>{var Z;class me{get isActive(){return this._isActive}constructor(ge,Be,Mt,Ht,Ci){this.router=ge,this.element=Be,this.renderer=Mt,this.cdr=Ht,this.link=Ci,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new V.bkB,this.routerEventsSubscription=ge.events.subscribe(_o=>{_o instanceof is&&this.update()})}ngAfterContentInit(){(0,Y.of)(this.links.changes,(0,Y.of)(null)).pipe((0,Dr.U)()).subscribe(ge=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var ge;null===(ge=this.linkInputChangesSubscription)||void 0===ge||ge.unsubscribe();const Be=[...this.links.toArray(),this.link].filter(Mt=>!!Mt).map(Mt=>Mt.onChanges);this.linkInputChangesSubscription=(0,We.H)(Be).pipe((0,Dr.U)()).subscribe(Mt=>{this._isActive!==this.isLinkActive(this.router)(Mt)&&this.update()})}set routerLinkActive(ge){const Be=Array.isArray(ge)?ge:ge.split(" ");this.classes=Be.filter(Mt=>!!Mt)}ngOnChanges(ge){this.update()}ngOnDestroy(){var ge;this.routerEventsSubscription.unsubscribe(),null===(ge=this.linkInputChangesSubscription)||void 0===ge||ge.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const ge=this.hasActiveLinks();this.classes.forEach(Be=>{ge?this.renderer.addClass(this.element.nativeElement,Be):this.renderer.removeClass(this.element.nativeElement,Be)}),ge&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==ge&&(this._isActive=ge,this.cdr.markForCheck(),this.isActiveChange.emit(ge))})}isLinkActive(ge){const Be=function Nl(Z){return!!Z.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return Mt=>{const Ht=Mt.urlTree;return!!Ht&&ge.isActive(Ht,Be)}}hasActiveLinks(){const ge=this.isLinkActive(this.router);return this.link&&ge(this.link)||this.links.some(ge)}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)(V.rXU(Ka),V.rXU(V.aKT),V.rXU(V.sFG),V.rXU(V.gRc),V.rXU(ad,8))},Z.\u0275dir=V.FsC({type:Z,selectors:[["","routerLinkActive",""]],contentQueries:function(ge,Be,Mt){if(1&ge&&V.wni(Mt,ad,5),2&ge){let Ht;V.mGM(Ht=V.lsd())&&(Be.links=Ht)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[V.OA$]}),me})();class tc{}let ld=(()=>{var Z;class me{preload(ge,Be){return Be().pipe(Ge(()=>(0,Y.of)(null)))}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})(),Fl=(()=>{var Z;class me{constructor(ge,Be,Mt,Ht,Ci){this.router=ge,this.injector=Mt,this.preloadingStrategy=Ht,this.loader=Ci}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ii.p)(ge=>ge instanceof is),(0,Vn.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(ge,Be){const Mt=[];for(const Ti of Be){var Ht,Ci;Ti.providers&&!Ti._injector&&(Ti._injector=(0,V.Ol2)(Ti.providers,ge,`Route: ${Ti.path}`));const or=null!==(Ht=Ti._injector)&&void 0!==Ht?Ht:ge,Us=null!==(Ci=Ti._loadedInjector)&&void 0!==Ci?Ci:or;var _o;(Ti.loadChildren&&!Ti._loadedRoutes&&void 0===Ti.canLoad||Ti.loadComponent&&!Ti._loadedComponent)&&Mt.push(this.preloadConfig(or,Ti)),(Ti.children||Ti._loadedRoutes)&&Mt.push(this.processRoutes(Us,null!==(_o=Ti.children)&&void 0!==_o?_o:Ti._loadedRoutes))}return(0,We.H)(Mt).pipe((0,Dr.U)())}preloadConfig(ge,Be){return this.preloadingStrategy.preload(Be,()=>{let Mt;Mt=Be.loadChildren&&void 0===Be.canLoad?this.loader.loadChildren(ge,Be):(0,Y.of)(null);const Ht=Mt.pipe((0,Et.Z)(Ci=>{var _o;return null===Ci?(0,Y.of)(void 0):(Be._loadedRoutes=Ci.routes,Be._loadedInjector=Ci.injector,this.processRoutes(null!==(_o=Ci.injector)&&void 0!==_o?_o:ge,Ci.routes))}));if(Be.loadComponent&&!Be._loadedComponent){const Ci=this.loader.loadComponent(Be);return(0,We.H)([Ht,Ci]).pipe((0,Dr.U)())}return Ht})}}return(Z=me).\u0275fac=function(ge){return new(ge||Z)(V.KVO(Ka),V.KVO(V.Ql9),V.KVO(V.uvJ),V.KVO(tc),V.KVO(cl))},Z.\u0275prov=V.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),me})();const cd=new V.nKC("");function ia(Z,...me){return(0,V.EmA)([{provide:Rd,multi:!0,useValue:Z},[],{provide:qo,useFactory:Zc,deps:[Ka]},{provide:V.iLQ,multi:!0,useFactory:dl},me.map(ke=>ke.\u0275providers)])}function Zc(Z){return Z.routerState.root}function Vl(Z,me){return{\u0275kind:Z,\u0275providers:me}}function dl(){const Z=(0,V.WQX)(V.zZn);return me=>{var ke,ge;const Be=Z.get(V.o8S);if(me!==Be.components[0])return;const Mt=Z.get(Ka),Ht=Z.get(l1);1===Z.get(ql)&&Mt.initialNavigation(),null===(ke=Z.get($s,null,V.$GK.Optional))||void 0===ke||ke.setUpPreloading(),null===(ge=Z.get(cd,null,V.$GK.Optional))||void 0===ge||ge.init(),Mt.resetRootComponentType(Be.componentTypes[0]),Ht.closed||(Ht.next(),Ht.complete(),Ht.unsubscribe())}}const l1=new V.nKC("",{factory:()=>new rn.B}),ql=new V.nKC("",{providedIn:"root",factory:()=>1}),$s=new V.nKC("");function Tu(Z){return Vl(0,[{provide:$s,useExisting:Fl},{provide:tc,useExisting:Z}])}function Wh(){return Vl(8,[Os,{provide:fa,useExisting:Os}])}},7852:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{MF:()=>Ns,j6:()=>Wo,xZ:()=>xr,om:()=>Qr,Sx:()=>Fi,Dk:()=>ni,Wp:()=>ps,KO:()=>kt});var V=_e(467),re=_e(1362),ne=_e(8041),l=_e(1076);const We=(ii,jn)=>jn.some(di=>ii instanceof di);let Y,ft;const wt=new WeakMap,C=new WeakMap,At=new WeakMap,Ut=new WeakMap,yt=new WeakMap;let rn={get(ii,jn,di){if(ii instanceof IDBTransaction){if("done"===jn)return C.get(ii);if("objectStoreNames"===jn)return ii.objectStoreNames||At.get(ii);if("store"===jn)return di.objectStoreNames[1]?void 0:di.objectStore(di.objectStoreNames[0])}return Zn(ii[jn])},set:(ii,jn,di)=>(ii[jn]=di,!0),has:(ii,jn)=>ii instanceof IDBTransaction&&("done"===jn||"store"===jn)||jn in ii};function Mn(ii){return"function"==typeof ii?function ei(ii){return ii!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function jt(){return ft||(ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ii)?function(...jn){return ii.apply(xt(this),jn),Zn(wt.get(this))}:function(...jn){return Zn(ii.apply(xt(this),jn))}:function(jn,...di){const co=ii.call(xt(this),jn,...di);return At.set(co,jn.sort?jn.sort():[jn]),Zn(co)}}(ii):(ii instanceof IDBTransaction&&function xn(ii){if(C.has(ii))return;const jn=new Promise((di,co)=>{const Ki=()=>{ii.removeEventListener("complete",Kt),ii.removeEventListener("error",oi),ii.removeEventListener("abort",oi)},Kt=()=>{di(),Ki()},oi=()=>{co(ii.error||new DOMException("AbortError","AbortError")),Ki()};ii.addEventListener("complete",Kt),ii.addEventListener("error",oi),ii.addEventListener("abort",oi)});C.set(ii,jn)}(ii),We(ii,function qt(){return Y||(Y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ii,rn):ii)}function Zn(ii){if(ii instanceof IDBRequest)return function fn(ii){const jn=new Promise((di,co)=>{const Ki=()=>{ii.removeEventListener("success",Kt),ii.removeEventListener("error",oi)},Kt=()=>{di(Zn(ii.result)),Ki()},oi=()=>{co(ii.error),Ki()};ii.addEventListener("success",Kt),ii.addEventListener("error",oi)});return jn.then(di=>{di instanceof IDBCursor&&wt.set(di,ii)}).catch(()=>{}),yt.set(jn,ii),jn}(ii);if(Ut.has(ii))return Ut.get(ii);const jn=Mn(ii);return jn!==ii&&(Ut.set(ii,jn),yt.set(jn,ii)),jn}const xt=ii=>yt.get(ii),Pn=["get","getKey","getAll","getAllKeys","count"],Ii=["put","add","delete","clear"],Et=new Map;function kn(ii,jn){if(!(ii instanceof IDBDatabase)||jn in ii||"string"!=typeof jn)return;if(Et.get(jn))return Et.get(jn);const di=jn.replace(/FromIndex$/,""),co=jn!==di,Ki=Ii.includes(di);if(!(di in(co?IDBIndex:IDBObjectStore).prototype)||!Ki&&!Pn.includes(di))return;const Kt=function(){var oi=(0,V.A)(function*(Pi,...Xo){const pr=this.transaction(Pi,Ki?"readwrite":"readonly");let es=pr.store;return co&&(es=es.index(Xo.shift())),(yield Promise.all([es[di](...Xo),Ki&&pr.done]))[0]});return function(Xo){return oi.apply(this,arguments)}}();return Et.set(jn,Kt),Kt}!function ht(ii){rn=ii(rn)}(ii=>({...ii,get:(jn,di,co)=>kn(jn,di)||ii.get(jn,di,co),has:(jn,di)=>!!kn(jn,di)||ii.has(jn,di)}));class Te{constructor(jn){this.container=jn}getPlatformInfoString(){return this.container.getProviders().map(di=>{if(function on(ii){const jn=ii.getComponent();return"VERSION"===(null==jn?void 0:jn.type)}(di)){const co=di.getImmediate();return`${co.library}/${co.version}`}return null}).filter(di=>di).join(" ")}}const Qt="@firebase/app",oo=new ne.Vy("@firebase/app"),Br="[DEFAULT]",So={[Qt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ro=new Map,fo=new Map,Ts=new Map;function zr(ii,jn){try{ii.container.addComponent(jn)}catch(di){oo.debug(`Component ${jn.name} failed to register with FirebaseApp ${ii.name}`,di)}}function Qr(ii){const jn=ii.name;if(Ts.has(jn))return oo.debug(`There were multiple attempts to register component ${jn}.`),!1;Ts.set(jn,ii);for(const di of ro.values())zr(di,ii);for(const di of fo.values())zr(di,ii);return!0}function Wo(ii,jn){const di=ii.container.getProvider("heartbeat").getImmediate({optional:!0});return di&&di.triggerHeartbeat(),ii.container.getProvider(jn)}function xr(ii){return void 0!==ii.settings}const Jn=new l.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class hs{constructor(jn,di,co){this._isDeleted=!1,this._options=Object.assign({},jn),this._config=Object.assign({},di),this._name=di.name,this._automaticDataCollectionEnabled=di.automaticDataCollectionEnabled,this._container=co,this.container.addComponent(new re.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(jn){this.checkDestroyed(),this._automaticDataCollectionEnabled=jn}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(jn){this._isDeleted=jn}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}const Ns="10.12.4";function ps(ii,jn={}){let di=ii;"object"!=typeof jn&&(jn={name:jn});const co=Object.assign({name:Br,automaticDataCollectionEnabled:!1},jn),Ki=co.name;if("string"!=typeof Ki||!Ki)throw Jn.create("bad-app-name",{appName:String(Ki)});if(di||(di=(0,l.T9)()),!di)throw Jn.create("no-options");const Kt=ro.get(Ki);if(Kt){if((0,l.bD)(di,Kt.options)&&(0,l.bD)(co,Kt.config))return Kt;throw Jn.create("duplicate-app",{appName:Ki})}const oi=new re.h1(Ki);for(const Xo of Ts.values())oi.addComponent(Xo);const Pi=new hs(di,co,oi);return ro.set(Ki,Pi),Pi}function Fi(ii=Br){const jn=ro.get(ii);if(!jn&&ii===Br&&(0,l.T9)())return ps();if(!jn)throw Jn.create("no-app",{appName:ii});return jn}function ni(){return Array.from(ro.values())}function kt(ii,jn,di){var co;let Ki=null!==(co=So[ii])&&void 0!==co?co:ii;di&&(Ki+=`-${di}`);const Kt=Ki.match(/\s|\//),oi=jn.match(/\s|\//);if(Kt||oi){const Pi=[`Unable to register library "${Ki}" with version "${jn}":`];return Kt&&Pi.push(`library name "${Ki}" contains illegal characters (whitespace or "/")`),Kt&&oi&&Pi.push("and"),oi&&Pi.push(`version name "${jn}" contains illegal characters (whitespace or "/")`),void oo.warn(Pi.join(" "))}Qr(new re.uA(`${Ki}-version`,()=>({library:Ki,version:jn}),"VERSION"))}const Tt="firebase-heartbeat-database",Jt=1,Ln="firebase-heartbeat-store";let Lt=null;function Ee(){return Lt||(Lt=function Ot(ii,jn,{blocked:di,upgrade:co,blocking:Ki,terminated:Kt}={}){const oi=indexedDB.open(ii,jn),Pi=Zn(oi);return co&&oi.addEventListener("upgradeneeded",Xo=>{co(Zn(oi.result),Xo.oldVersion,Xo.newVersion,Zn(oi.transaction),Xo)}),di&&oi.addEventListener("blocked",Xo=>di(Xo.oldVersion,Xo.newVersion,Xo)),Pi.then(Xo=>{Kt&&Xo.addEventListener("close",()=>Kt()),Ki&&Xo.addEventListener("versionchange",pr=>Ki(pr.oldVersion,pr.newVersion,pr))}).catch(()=>{}),Pi}(Tt,Jt,{upgrade:(ii,jn)=>{if(0===jn)try{ii.createObjectStore(Ln)}catch(di){console.warn(di)}}}).catch(ii=>{throw Jn.create("idb-open",{originalErrorMessage:ii.message})})),Lt}function ae(){return(ae=(0,V.A)(function*(ii){try{const di=(yield Ee()).transaction(Ln),co=yield di.objectStore(Ln).get(it(ii));return yield di.done,co}catch(jn){if(jn instanceof l.g)oo.warn(jn.message);else{const di=Jn.create("idb-get",{originalErrorMessage:null==jn?void 0:jn.message});oo.warn(di.message)}}})).apply(this,arguments)}function we(ii,jn){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,V.A)(function*(ii,jn){try{const co=(yield Ee()).transaction(Ln,"readwrite");yield co.objectStore(Ln).put(jn,it(ii)),yield co.done}catch(di){if(di instanceof l.g)oo.warn(di.message);else{const co=Jn.create("idb-set",{originalErrorMessage:null==di?void 0:di.message});oo.warn(co.message)}}})).apply(this,arguments)}function it(ii){return`${ii.name}!${ii.options.appId}`}class dn{constructor(jn){this.container=jn,this._heartbeatsCache=null;const di=this.container.getProvider("app").getImmediate();this._storage=new Oi(di),this._heartbeatsCachePromise=this._storage.read().then(co=>(this._heartbeatsCache=co,co))}triggerHeartbeat(){var jn=this;return(0,V.A)(function*(){var di,co;const Kt=jn.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),oi=Nn();if((null!=(null===(di=jn._heartbeatsCache)||void 0===di?void 0:di.heartbeats)||(jn._heartbeatsCache=yield jn._heartbeatsCachePromise,null!=(null===(co=jn._heartbeatsCache)||void 0===co?void 0:co.heartbeats)))&&jn._heartbeatsCache.lastSentHeartbeatDate!==oi&&!jn._heartbeatsCache.heartbeats.some(Pi=>Pi.date===oi))return jn._heartbeatsCache.heartbeats.push({date:oi,agent:Kt}),jn._heartbeatsCache.heartbeats=jn._heartbeatsCache.heartbeats.filter(Pi=>{const Xo=new Date(Pi.date).valueOf();return Date.now()-Xo<=2592e6}),jn._storage.overwrite(jn._heartbeatsCache)})()}getHeartbeatsHeader(){var jn=this;return(0,V.A)(function*(){var di;if(null===jn._heartbeatsCache&&(yield jn._heartbeatsCachePromise),null==(null===(di=jn._heartbeatsCache)||void 0===di?void 0:di.heartbeats)||0===jn._heartbeatsCache.heartbeats.length)return"";const co=Nn(),{heartbeatsToSend:Ki,unsentEntries:Kt}=function Hi(ii,jn=1024){const di=[];let co=ii.slice();for(const Ki of ii){const Kt=di.find(oi=>oi.agent===Ki.agent);if(Kt){if(Kt.dates.push(Ki.date),Fo(di)>jn){Kt.dates.pop();break}}else if(di.push({agent:Ki.agent,dates:[Ki.date]}),Fo(di)>jn){di.pop();break}co=co.slice(1)}return{heartbeatsToSend:di,unsentEntries:co}}(jn._heartbeatsCache.heartbeats),oi=(0,l.Uj)(JSON.stringify({version:2,heartbeats:Ki}));return jn._heartbeatsCache.lastSentHeartbeatDate=co,Kt.length>0?(jn._heartbeatsCache.heartbeats=Kt,yield jn._storage.overwrite(jn._heartbeatsCache)):(jn._heartbeatsCache.heartbeats=[],jn._storage.overwrite(jn._heartbeatsCache)),oi})()}}function Nn(){return(new Date).toISOString().substring(0,10)}class Oi{constructor(jn){this.app=jn,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,V.A)(function*(){return!!(0,l.zW)()&&(0,l.eX)().then(()=>!0).catch(()=>!1)})()}read(){var jn=this;return(0,V.A)(function*(){if(yield jn._canUseIndexedDBPromise){const co=yield function ue(ii){return ae.apply(this,arguments)}(jn.app);return null!=co&&co.heartbeats?co:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(jn){var di=this;return(0,V.A)(function*(){var co;if(yield di._canUseIndexedDBPromise){const Kt=yield di.read();return we(di.app,{lastSentHeartbeatDate:null!==(co=jn.lastSentHeartbeatDate)&&void 0!==co?co:Kt.lastSentHeartbeatDate,heartbeats:jn.heartbeats})}})()}add(jn){var di=this;return(0,V.A)(function*(){var co;if(yield di._canUseIndexedDBPromise){const Kt=yield di.read();return we(di.app,{lastSentHeartbeatDate:null!==(co=jn.lastSentHeartbeatDate)&&void 0!==co?co:Kt.lastSentHeartbeatDate,heartbeats:[...Kt.heartbeats,...jn.heartbeats]})}})()}}function Fo(ii){return(0,l.Uj)(JSON.stringify({version:2,heartbeats:ii})).length}!function nr(ii){Qr(new re.uA("platform-logger",jn=>new Te(jn),"PRIVATE")),Qr(new re.uA("heartbeat",jn=>new dn(jn),"PRIVATE")),kt(Qt,"0.10.7",ii),kt(Qt,"0.10.7","esm2017"),kt("fire-js","")}("")},1362:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{h1:()=>qt,uA:()=>ne});var V=_e(467),re=_e(1076);class ne{constructor(wt,C,At){this.name=wt,this.instanceFactory=C,this.type=At,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(wt){return this.instantiationMode=wt,this}setMultipleInstances(wt){return this.multipleInstances=wt,this}setServiceProps(wt){return this.serviceProps=wt,this}setInstanceCreatedCallback(wt){return this.onInstanceCreated=wt,this}}const l="[DEFAULT]";class We{constructor(wt,C){this.name=wt,this.container=C,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(wt){const C=this.normalizeInstanceIdentifier(wt);if(!this.instancesDeferred.has(C)){const At=new re.cY;if(this.instancesDeferred.set(C,At),this.isInitialized(C)||this.shouldAutoInitialize())try{const Ut=this.getOrInitializeService({instanceIdentifier:C});Ut&&At.resolve(Ut)}catch{}}return this.instancesDeferred.get(C).promise}getImmediate(wt){var C;const At=this.normalizeInstanceIdentifier(null==wt?void 0:wt.identifier),Ut=null!==(C=null==wt?void 0:wt.optional)&&void 0!==C&&C;if(!this.isInitialized(At)&&!this.shouldAutoInitialize()){if(Ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:At})}catch(yt){if(Ut)return null;throw yt}}getComponent(){return this.component}setComponent(wt){if(wt.name!==this.name)throw Error(`Mismatching Component ${wt.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=wt,this.shouldAutoInitialize()){if(function ft(jt){return"EAGER"===jt.instantiationMode}(wt))try{this.getOrInitializeService({instanceIdentifier:l})}catch{}for(const[C,At]of this.instancesDeferred.entries()){const Ut=this.normalizeInstanceIdentifier(C);try{const yt=this.getOrInitializeService({instanceIdentifier:Ut});At.resolve(yt)}catch{}}}}clearInstance(wt=l){this.instancesDeferred.delete(wt),this.instancesOptions.delete(wt),this.instances.delete(wt)}delete(){var wt=this;return(0,V.A)(function*(){const C=Array.from(wt.instances.values());yield Promise.all([...C.filter(At=>"INTERNAL"in At).map(At=>At.INTERNAL.delete()),...C.filter(At=>"_delete"in At).map(At=>At._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(wt=l){return this.instances.has(wt)}getOptions(wt=l){return this.instancesOptions.get(wt)||{}}initialize(wt={}){const{options:C={}}=wt,At=this.normalizeInstanceIdentifier(wt.instanceIdentifier);if(this.isInitialized(At))throw Error(`${this.name}(${At}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ut=this.getOrInitializeService({instanceIdentifier:At,options:C});for(const[yt,fn]of this.instancesDeferred.entries())At===this.normalizeInstanceIdentifier(yt)&&fn.resolve(Ut);return Ut}onInit(wt,C){var At;const Ut=this.normalizeInstanceIdentifier(C),yt=null!==(At=this.onInitCallbacks.get(Ut))&&void 0!==At?At:new Set;yt.add(wt),this.onInitCallbacks.set(Ut,yt);const fn=this.instances.get(Ut);return fn&&wt(fn,Ut),()=>{yt.delete(wt)}}invokeOnInitCallbacks(wt,C){const At=this.onInitCallbacks.get(C);if(At)for(const Ut of At)try{Ut(wt,C)}catch{}}getOrInitializeService({instanceIdentifier:wt,options:C={}}){let At=this.instances.get(wt);if(!At&&this.component&&(At=this.component.instanceFactory(this.container,{instanceIdentifier:(jt=wt,jt===l?void 0:jt),options:C}),this.instances.set(wt,At),this.instancesOptions.set(wt,C),this.invokeOnInitCallbacks(At,wt),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,wt,At)}catch{}var jt;return At||null}normalizeInstanceIdentifier(wt=l){return this.component?this.component.multipleInstances?wt:l:wt}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qt{constructor(wt){this.name=wt,this.providers=new Map}addComponent(wt){const C=this.getProvider(wt.name);if(C.isComponentSet())throw new Error(`Component ${wt.name} has already been registered with ${this.name}`);C.setComponent(wt)}addOrOverwriteComponent(wt){this.getProvider(wt.name).isComponentSet()&&this.providers.delete(wt.name),this.addComponent(wt)}getProvider(wt){if(this.providers.has(wt))return this.providers.get(wt);const C=new We(wt,this);return this.providers.set(wt,C),C}getProviders(){return Array.from(this.providers.values())}}},8041:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{$b:()=>re,Vy:()=>ft});const V=[];var re=function(wt){return wt[wt.DEBUG=0]="DEBUG",wt[wt.VERBOSE=1]="VERBOSE",wt[wt.INFO=2]="INFO",wt[wt.WARN=3]="WARN",wt[wt.ERROR=4]="ERROR",wt[wt.SILENT=5]="SILENT",wt}(re||{});const ne={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},l=re.INFO,We={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},Y=(wt,C,...At)=>{if(C<wt.logLevel)return;const Ut=(new Date).toISOString(),yt=We[C];if(!yt)throw new Error(`Attempted to log a message with an invalid logType (value: ${C})`);console[yt](`[${Ut}]  ${wt.name}:`,...At)};class ft{constructor(C){this.name=C,this._logLevel=l,this._logHandler=Y,this._userLogHandler=null,V.push(this)}get logLevel(){return this._logLevel}set logLevel(C){if(!(C in re))throw new TypeError(`Invalid value "${C}" assigned to \`logLevel\``);this._logLevel=C}setLogLevel(C){this._logLevel="string"==typeof C?ne[C]:C}get logHandler(){return this._logHandler}set logHandler(C){if("function"!=typeof C)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=C}get userLogHandler(){return this._userLogHandler}set userLogHandler(C){this._userLogHandler=C}debug(...C){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...C),this._logHandler(this,re.DEBUG,...C)}log(...C){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...C),this._logHandler(this,re.VERBOSE,...C)}info(...C){this._userLogHandler&&this._userLogHandler(this,re.INFO,...C),this._logHandler(this,re.INFO,...C)}warn(...C){this._userLogHandler&&this._userLogHandler(this,re.WARN,...C),this._logHandler(this,re.WARN,...C)}error(...C){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...C),this._logHandler(this,re.ERROR,...C)}}},8880:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Yq:()=>et,TS:()=>Vn,sR:()=>Ke,el:()=>hs,Sb:()=>ui,QE:()=>Fi,CF:()=>ji,Rg:()=>Wo,p4:()=>ni,jM:()=>Jt,q9:()=>on,Kb:()=>Ln,hO:()=>ko,CE:()=>jr,pF:()=>Ns,fL:()=>Kn,YV:()=>wr,z3:()=>kt});var V=_e(467),re=_e(9842),ne=_e(3953),l=_e(5113),We=_e(177),Y=_e(5531),ft=_e(6031),qt=_e(1656),jt=_e(1413),wt=_e(3726),C=_e(4412),At=_e(4572),Ut=_e(7673),yt=_e(1635),fn=_e(5964),xn=_e(5558),rn=_e(3669),ht=_e(9974),ei=_e(4360);function Zn(Lt,Ee){return Lt===Ee}var xt=_e(4341);const Ot=["tabsInner"];let Et=(()=>{var Lt;class Ee{constructor(ae,we){(0,re.A)(this,"doc",void 0),(0,re.A)(this,"_readyPromise",void 0),(0,re.A)(this,"win",void 0),(0,re.A)(this,"backButton",new jt.B),(0,re.A)(this,"keyboardDidShow",new jt.B),(0,re.A)(this,"keyboardDidHide",new jt.B),(0,re.A)(this,"pause",new jt.B),(0,re.A)(this,"resume",new jt.B),(0,re.A)(this,"resize",new jt.B),this.doc=ae,we.run(()=>{var Ue;let it;this.win=ae.defaultView,this.backButton.subscribeWithPriority=function(Xt,Cn){return this.subscribe(dn=>dn.register(Xt,Nn=>we.run(()=>Cn(Nn))))},Te(this.pause,ae,"pause",we),Te(this.resume,ae,"resume",we),Te(this.backButton,ae,"ionBackButton",we),Te(this.resize,this.win,"resize",we),Te(this.keyboardDidShow,this.win,"ionKeyboardDidShow",we),Te(this.keyboardDidHide,this.win,"ionKeyboardDidHide",we),this._readyPromise=new Promise(Xt=>{it=Xt}),null!==(Ue=this.win)&&void 0!==Ue&&Ue.cordova?ae.addEventListener("deviceready",()=>{it("cordova")},{once:!0}):it("dom")})}is(ae){return(0,Y.a)(this.win,ae)}platforms(){return(0,Y.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(ae){return kn(this.win.location.href,ae)}isLandscape(){return!this.isPortrait()}isPortrait(){var ae,we;return null===(ae=(we=this.win).matchMedia)||void 0===ae?void 0:ae.call(we,"(orientation: portrait)").matches}testUserAgent(ae){const we=this.win.navigator;return!!(null!=we&&we.userAgent&&we.userAgent.indexOf(ae)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)(ne.KVO(We.qQ),ne.KVO(ne.SKi))}),(0,re.A)(Ee,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac,providedIn:"root"})),Ee})();const kn=(Lt,Ee)=>{Ee=Ee.replace(/[[\]\\]/g,"\\$&");const ae=new RegExp("[\\?&]"+Ee+"=([^&#]*)").exec(Lt);return ae?decodeURIComponent(ae[1].replace(/\+/g," ")):null},Te=(Lt,Ee,ue,ae)=>{Ee&&Ee.addEventListener(ue,we=>{ae.run(()=>{Lt.next(null!=we?we.detail:void 0)})})};let on=(()=>{var Lt;class Ee{constructor(ae,we,Ue,it){(0,re.A)(this,"location",void 0),(0,re.A)(this,"serializer",void 0),(0,re.A)(this,"router",void 0),(0,re.A)(this,"topOutlet",void 0),(0,re.A)(this,"direction",En),(0,re.A)(this,"animated",oo),(0,re.A)(this,"animationBuilder",void 0),(0,re.A)(this,"guessDirection","forward"),(0,re.A)(this,"guessAnimation",void 0),(0,re.A)(this,"lastNavId",-1),this.location=we,this.serializer=Ue,this.router=it,it&&it.events.subscribe(Xt=>{if(Xt instanceof l.Z){const Cn=Xt.restoredState?Xt.restoredState.navigationId:Xt.id;this.guessDirection=this.guessAnimation=Cn<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?Xt.id:Cn}}),ae.backButton.subscribeWithPriority(0,Xt=>{this.pop(),Xt()})}navigateForward(ae,we={}){return this.setDirection("forward",we.animated,we.animationDirection,we.animation),this.navigate(ae,we)}navigateBack(ae,we={}){return this.setDirection("back",we.animated,we.animationDirection,we.animation),this.navigate(ae,we)}navigateRoot(ae,we={}){return this.setDirection("root",we.animated,we.animationDirection,we.animation),this.navigate(ae,we)}back(ae={animated:!0,animationDirection:"back"}){return this.setDirection("back",ae.animated,ae.animationDirection,ae.animation),this.location.back()}pop(){var ae=this;return(0,V.A)(function*(){let we=ae.topOutlet;for(;we;){if(yield we.pop())return!0;we=we.parentOutlet}return!1})()}setDirection(ae,we,Ue,it){this.direction=ae,this.animated=Qt(ae,we,Ue),this.animationBuilder=it}setTopOutlet(ae){this.topOutlet=ae}consumeTransition(){let we,ae="root";const Ue=this.animationBuilder;return"auto"===this.direction?(ae=this.guessDirection,we=this.guessAnimation):(we=this.animated,ae=this.direction),this.direction=En,this.animated=oo,this.animationBuilder=void 0,{direction:ae,animation:we,animationBuilder:Ue}}navigate(ae,we){if(Array.isArray(ae))return this.router.navigate(ae,we);{const Ue=this.serializer.parse(ae.toString());return void 0!==we.queryParams&&(Ue.queryParams={...we.queryParams}),void 0!==we.fragment&&(Ue.fragment=we.fragment),this.router.navigateByUrl(Ue,we)}}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)(ne.KVO(Et),ne.KVO(We.aZ),ne.KVO(l.Sd),ne.KVO(l.Ix,8))}),(0,re.A)(Ee,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac,providedIn:"root"})),Ee})();const Qt=(Lt,Ee,ue)=>{if(!1!==Ee){if(void 0!==ue)return ue;if("forward"===Lt||"back"===Lt)return Lt;if("root"===Lt&&!0===Ee)return"forward"}},En="auto",oo=void 0;let Vn=(()=>{var Lt;class Ee{get(ae,we){const Ue=Ae();return Ue?Ue.get(ae,we):null}getBoolean(ae,we){const Ue=Ae();return!!Ue&&Ue.getBoolean(ae,we)}getNumber(ae,we){const Ue=Ae();return Ue?Ue.getNumber(ae,we):0}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)}),(0,re.A)(Ee,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac,providedIn:"root"})),Ee})();const Ke=new ne.nKC("USERCONFIG"),Ae=()=>{if(typeof window<"u"){const Lt=window.Ionic;if(null!=Lt&&Lt.config)return Lt.config}return null};class Ge{constructor(Ee={}){(0,re.A)(this,"data",void 0),this.data=Ee,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(Ee){return this.data[Ee]}}let et=(()=>{var Lt;class Ee{constructor(){(0,re.A)(this,"zone",(0,ne.WQX)(ne.SKi)),(0,re.A)(this,"applicationRef",(0,ne.WQX)(ne.o8S)),(0,re.A)(this,"config",(0,ne.WQX)(Ke))}create(ae,we,Ue){var it;return new zt(ae,we,this.applicationRef,this.zone,Ue,null!==(it=this.config.useSetInputAPI)&&void 0!==it&&it)}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)}),(0,re.A)(Ee,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac})),Ee})();class zt{constructor(Ee,ue,ae,we,Ue,it){(0,re.A)(this,"environmentInjector",void 0),(0,re.A)(this,"injector",void 0),(0,re.A)(this,"applicationRef",void 0),(0,re.A)(this,"zone",void 0),(0,re.A)(this,"elementReferenceKey",void 0),(0,re.A)(this,"enableSignalsSupport",void 0),(0,re.A)(this,"elRefMap",new WeakMap),(0,re.A)(this,"elEventsMap",new WeakMap),this.environmentInjector=Ee,this.injector=ue,this.applicationRef=ae,this.zone=we,this.elementReferenceKey=Ue,this.enableSignalsSupport=it}attachViewToDom(Ee,ue,ae,we){return this.zone.run(()=>new Promise(Ue=>{const it={...ae};void 0!==this.elementReferenceKey&&(it[this.elementReferenceKey]=Ee),Ue(qn(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,Ee,ue,it,we,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(Ee,ue){return this.zone.run(()=>new Promise(ae=>{const we=this.elRefMap.get(ue);if(we){we.destroy(),this.elRefMap.delete(ue);const Ue=this.elEventsMap.get(ue);Ue&&(Ue(),this.elEventsMap.delete(ue))}ae()}))}}const qn=(Lt,Ee,ue,ae,we,Ue,it,Xt,Cn,dn,Nn,Hi)=>{const Oi=ne.zZn.create({providers:dr(Cn),parent:ue}),Fo=(0,ne.a0P)(Xt,{environmentInjector:Ee,elementInjector:Oi}),nr=Fo.instance,ii=Fo.location.nativeElement;if(Cn)if(Nn&&void 0!==nr[Nn]&&console.error(`[Ionic Error]: ${Nn} is a reserved property when using ${it.tagName.toLowerCase()}. Rename or remove the "${Nn}" property from ${Xt.name}.`),!0===Hi&&void 0!==Fo.setInput){const{modal:di,popover:co,...Ki}=Cn;for(const Kt in Ki)Fo.setInput(Kt,Ki[Kt]);void 0!==di&&Object.assign(nr,{modal:di}),void 0!==co&&Object.assign(nr,{popover:co})}else Object.assign(nr,Cn);if(dn)for(const di of dn)ii.classList.add(di);const jn=go(Lt,nr,ii);return it.appendChild(ii),ae.attachView(Fo.hostView),we.set(ii,Fo),Ue.set(ii,jn),ii},un=[ft.L,ft.a,ft.b,ft.c,ft.d],go=(Lt,Ee,ue)=>Lt.run(()=>{const ae=un.filter(we=>"function"==typeof Ee[we]).map(we=>{const Ue=it=>Ee[we](it.detail);return ue.addEventListener(we,Ue),()=>ue.removeEventListener(we,Ue)});return()=>ae.forEach(we=>we())}),Qi=new ne.nKC("NavParamsToken"),dr=Lt=>[{provide:Qi,useValue:Lt},{provide:Ge,useFactory:Go,deps:[Qi]}],Go=Lt=>new Ge(Lt),Dr=(Lt,Ee)=>{const ue=Lt.prototype;Ee.forEach(ae=>{Object.defineProperty(ue,ae,{get(){return this.el[ae]},set(we){this.z.runOutsideAngular(()=>this.el[ae]=we)}})})},cr=(Lt,Ee)=>{const ue=Lt.prototype;Ee.forEach(ae=>{ue[ae]=function(){const we=arguments;return this.z.runOutsideAngular(()=>this.el[ae].apply(this.el,we))}})},Ei=(Lt,Ee,ue)=>{ue.forEach(ae=>Lt[ae]=(0,wt.R)(Ee,ae))};function ko(Lt){return function(ue){const{defineCustomElementFn:ae,inputs:we,methods:Ue}=Lt;return void 0!==ae&&ae(),we&&Dr(ue,we),Ue&&cr(ue,Ue),ue}}const Er=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],Wr=["present","dismiss","onDidDismiss","onWillDismiss"];let ji=(()=>{var Lt;let Ee=((0,re.A)(Lt=class{constructor(ae,we,Ue){(0,re.A)(this,"z",void 0),(0,re.A)(this,"template",void 0),(0,re.A)(this,"isCmpOpen",!1),(0,re.A)(this,"el",void 0),this.z=Ue,this.el=we.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,ae.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,ae.detectChanges()}),Ei(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,re.A)(Lt,"\u0275dir",ne.FsC({type:Lt,selectors:[["ion-popover"]],contentQueries:function(ae,we,Ue){if(1&ae&&ne.wni(Ue,ne.C4Q,5),2&ae){let it;ne.mGM(it=ne.lsd())&&(we.template=it.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"}})),Lt);return Ee=(0,yt.Cg)([ko({inputs:Er,methods:Wr})],Ee),Ee})();const vi=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],Yi=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let ui=(()=>{var Lt;let Ee=((0,re.A)(Lt=class{constructor(ae,we,Ue){(0,re.A)(this,"z",void 0),(0,re.A)(this,"template",void 0),(0,re.A)(this,"isCmpOpen",!1),(0,re.A)(this,"el",void 0),this.z=Ue,this.el=we.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,ae.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,ae.detectChanges()}),Ei(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,re.A)(Lt,"\u0275dir",ne.FsC({type:Lt,selectors:[["ion-modal"]],contentQueries:function(ae,we,Ue){if(1&ae&&ne.wni(Ue,ne.C4Q,5),2&ae){let it;ne.mGM(it=ne.lsd())&&(we.template=it.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"}})),Lt);return Ee=(0,yt.Cg)([ko({inputs:vi,methods:Yi})],Ee),Ee})();const po=(Lt,Ee)=>((Lt=Lt.filter(ue=>ue.stackId!==Ee.stackId)).push(Ee),Lt),Br=(Lt,Ee)=>{const ue=Lt.createUrlTree(["."],{relativeTo:Ee});return Lt.serializeUrl(ue)},So=(Lt,Ee)=>!Ee||Lt.stackId!==Ee.stackId,ro=(Lt,Ee)=>{if(!Lt)return;const ue=fo(Ee);for(let ae=0;ae<ue.length;ae++){if(ae>=Lt.length)return ue[ae];if(ue[ae]!==Lt[ae])return}},fo=Lt=>Lt.split("/").map(Ee=>Ee.trim()).filter(Ee=>""!==Ee),Ts=Lt=>{Lt&&(Lt.ref.destroy(),Lt.unlistenEvents())};class zr{constructor(Ee,ue,ae,we,Ue,it){(0,re.A)(this,"containerEl",void 0),(0,re.A)(this,"router",void 0),(0,re.A)(this,"navCtrl",void 0),(0,re.A)(this,"zone",void 0),(0,re.A)(this,"location",void 0),(0,re.A)(this,"views",[]),(0,re.A)(this,"runningTask",void 0),(0,re.A)(this,"skipTransition",!1),(0,re.A)(this,"tabsPrefix",void 0),(0,re.A)(this,"activeView",void 0),(0,re.A)(this,"nextId",0),this.containerEl=ue,this.router=ae,this.navCtrl=we,this.zone=Ue,this.location=it,this.tabsPrefix=void 0!==Ee?fo(Ee):void 0}createView(Ee,ue){var ae;const we=Br(this.router,ue),Ue=null==Ee||null===(ae=Ee.location)||void 0===ae?void 0:ae.nativeElement,it=go(this.zone,Ee.instance,Ue);return{id:this.nextId++,stackId:ro(this.tabsPrefix,we),unlistenEvents:it,element:Ue,ref:Ee,url:we}}getExistingView(Ee){const ue=Br(this.router,Ee),ae=this.views.find(we=>we.url===ue);return ae&&ae.ref.changeDetectorRef.reattach(),ae}setActive(Ee){var ue,ae;const we=this.navCtrl.consumeTransition();let{direction:Ue,animation:it,animationBuilder:Xt}=we;const Cn=this.activeView,dn=So(Ee,Cn);dn&&(Ue="back",it=void 0);const Nn=this.views.slice();let Hi;const Oi=this.router;Oi.getCurrentNavigation?Hi=Oi.getCurrentNavigation():null!==(ue=Oi.navigations)&&void 0!==ue&&ue.value&&(Hi=Oi.navigations.value),null!==(ae=Hi)&&void 0!==ae&&null!==(ae=ae.extras)&&void 0!==ae&&ae.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Fo=this.views.includes(Ee),nr=this.insertView(Ee,Ue);Fo||Ee.ref.changeDetectorRef.detectChanges();const ii=Ee.animationBuilder;return void 0===Xt&&"back"===Ue&&!dn&&void 0!==ii&&(Xt=ii),Cn&&(Cn.animationBuilder=Xt),this.zone.runOutsideAngular(()=>this.wait(()=>(Cn&&Cn.ref.changeDetectorRef.detach(),Ee.ref.changeDetectorRef.reattach(),this.transition(Ee,Cn,it,this.canGoBack(1),!1,Xt).then(()=>Zr(Ee,nr,Nn,this.location,this.zone)).then(()=>({enteringView:Ee,direction:Ue,animation:it,tabSwitch:dn})))))}canGoBack(Ee,ue=this.getActiveStackId()){return this.getStack(ue).length>Ee}pop(Ee,ue=this.getActiveStackId()){return this.zone.run(()=>{const ae=this.getStack(ue);if(ae.length<=Ee)return Promise.resolve(!1);const we=ae[ae.length-Ee-1];let Ue=we.url;const it=we.savedData;if(it){var Xt;const dn=it.get("primary");null!=dn&&null!==(Xt=dn.route)&&void 0!==Xt&&null!==(Xt=Xt._routerState)&&void 0!==Xt&&Xt.snapshot.url&&(Ue=dn.route._routerState.snapshot.url)}const{animationBuilder:Cn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Ue,{...we.savedExtras,animation:Cn}).then(()=>!0)})}startBackTransition(){const Ee=this.activeView;if(Ee){const ue=this.getStack(Ee.stackId),ae=ue[ue.length-2],we=ae.animationBuilder;return this.wait(()=>this.transition(ae,Ee,"back",this.canGoBack(2),!0,we))}return Promise.resolve()}endBackTransition(Ee){Ee?(this.skipTransition=!0,this.pop(1)):this.activeView&&Qr(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(Ee){const ue=this.getStack(Ee);return ue.length>0?ue[ue.length-1]:void 0}getRootUrl(Ee){const ue=this.getStack(Ee);return ue.length>0?ue[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Ts),this.activeView=void 0,this.views=[]}getStack(Ee){return this.views.filter(ue=>ue.stackId===Ee)}insertView(Ee,ue){return this.activeView=Ee,this.views=((Lt,Ee,ue)=>"root"===ue?po(Lt,Ee):"forward"===ue?((Lt,Ee)=>(Lt.indexOf(Ee)>=0?Lt=Lt.filter(ae=>ae.stackId!==Ee.stackId||ae.id<=Ee.id):Lt.push(Ee),Lt))(Lt,Ee):((Lt,Ee)=>Lt.indexOf(Ee)>=0?Lt.filter(ae=>ae.stackId!==Ee.stackId||ae.id<=Ee.id):po(Lt,Ee))(Lt,Ee))(this.views,Ee,ue),this.views.slice()}transition(Ee,ue,ae,we,Ue,it){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(ue===Ee)return Promise.resolve(!1);const Xt=Ee?Ee.element:void 0,Cn=ue?ue.element:void 0,dn=this.containerEl;return Xt&&Xt!==Cn&&(Xt.classList.add("ion-page"),Xt.classList.add("ion-page-invisible"),dn.commit)?dn.commit(Xt,Cn,{duration:void 0===ae?0:void 0,direction:ae,showGoBack:we,progressAnimation:Ue,animationBuilder:it}):Promise.resolve(!1)}wait(Ee){var ue=this;return(0,V.A)(function*(){void 0!==ue.runningTask&&(yield ue.runningTask,ue.runningTask=void 0);const ae=ue.runningTask=Ee();return ae.finally(()=>ue.runningTask=void 0),ae})()}}const Zr=(Lt,Ee,ue,ae,we)=>"function"==typeof requestAnimationFrame?new Promise(Ue=>{requestAnimationFrame(()=>{Qr(Lt,Ee,ue,ae,we),Ue()})}):Promise.resolve(),Qr=(Lt,Ee,ue,ae,we)=>{we.run(()=>ue.filter(Ue=>!Ee.includes(Ue)).forEach(Ts)),Ee.forEach(Ue=>{const Xt=ae.path().split("?")[0].split("#")[0];if(Ue!==Lt&&Ue.url!==Xt){const Cn=Ue.element;Cn.setAttribute("aria-hidden","true"),Cn.classList.add("ion-page-hidden"),Ue.ref.changeDetectorRef.detach()}})};let Wo=(()=>{var Lt;class Ee{get activatedComponentRef(){return this.activated}set animation(ae){this.nativeEl.animation=ae}set animated(ae){this.nativeEl.animated=ae}set swipeGesture(ae){this._swipeGesture=ae,this.nativeEl.swipeHandler=ae?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:we=>this.stackCtrl.endBackTransition(we)}:void 0}constructor(ae,we,Ue,it,Xt,Cn,dn,Nn){(0,re.A)(this,"parentOutlet",void 0),(0,re.A)(this,"nativeEl",void 0),(0,re.A)(this,"activatedView",null),(0,re.A)(this,"tabsPrefix",void 0),(0,re.A)(this,"_swipeGesture",void 0),(0,re.A)(this,"stackCtrl",void 0),(0,re.A)(this,"proxyMap",new WeakMap),(0,re.A)(this,"currentActivatedRoute$",new C.t(null)),(0,re.A)(this,"activated",null),(0,re.A)(this,"_activatedRoute",null),(0,re.A)(this,"name",l.Xk),(0,re.A)(this,"stackWillChange",new ne.bkB),(0,re.A)(this,"stackDidChange",new ne.bkB),(0,re.A)(this,"activateEvents",new ne.bkB),(0,re.A)(this,"deactivateEvents",new ne.bkB),(0,re.A)(this,"parentContexts",(0,ne.WQX)(l.Zp)),(0,re.A)(this,"location",(0,ne.WQX)(ne.c1b)),(0,re.A)(this,"environmentInjector",(0,ne.WQX)(ne.uvJ)),(0,re.A)(this,"inputBinder",(0,ne.WQX)(Pr,{optional:!0})),(0,re.A)(this,"supportsBindingToComponentInputs",!0),(0,re.A)(this,"config",(0,ne.WQX)(Vn)),(0,re.A)(this,"navCtrl",(0,ne.WQX)(on)),this.parentOutlet=Nn,this.nativeEl=it.nativeElement,this.name=ae||l.Xk,this.tabsPrefix="true"===we?Br(Xt,dn):void 0,this.stackCtrl=new zr(this.tabsPrefix,this.nativeEl,Xt,this.navCtrl,Cn,Ue),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){var ae;this.stackCtrl.destroy(),null===(ae=this.inputBinder)||void 0===ae||ae.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const ae=this.getContext();null!=ae&&ae.route&&this.activateWith(ae.route,ae.injector)}new Promise(ae=>(0,qt.c)(this.nativeEl,ae)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(ae,we){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const we=this.getContext();this.activatedView.savedData=new Map(we.children.contexts);const Ue=this.activatedView.savedData.get("primary");if(Ue&&we.route&&(Ue.route={...we.route}),this.activatedView.savedExtras={},we.route){const it=we.route.snapshot;this.activatedView.savedExtras.queryParams=it.queryParams,this.activatedView.savedExtras.fragment=it.fragment}}const ae=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(ae)}}activateWith(ae,we){var Ue;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=ae;let it,Xt=this.stackCtrl.getExistingView(ae);if(Xt){it=this.activated=Xt.ref;const Nn=Xt.savedData;Nn&&(this.getContext().children.contexts=Nn),this.updateActivatedRouteProxy(it.instance,ae)}else{var Cn;const Nn=ae._futureSnapshot,Hi=this.parentContexts.getOrCreateContext(this.name).children,Oi=new C.t(null),Fo=this.createActivatedRouteProxy(Oi,ae),nr=new lr(Fo,Hi,this.location.injector),ii=null!==(Cn=Nn.routeConfig.component)&&void 0!==Cn?Cn:Nn.component;it=this.activated=this.outletContent.createComponent(ii,{index:this.outletContent.length,injector:nr,environmentInjector:null!=we?we:this.environmentInjector}),Oi.next(it.instance),Xt=this.stackCtrl.createView(this.activated,ae),this.proxyMap.set(it.instance,Fo),this.currentActivatedRoute$.next({component:it.instance,activatedRoute:ae})}null===(Ue=this.inputBinder)||void 0===Ue||Ue.bindActivatedRouteToOutletComponent(this),this.activatedView=Xt,this.navCtrl.setTopOutlet(this);const dn=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:Xt,tabSwitch:So(Xt,dn)}),this.stackCtrl.setActive(Xt).then(Nn=>{this.activateEvents.emit(it.instance),this.stackDidChange.emit(Nn)})}canGoBack(ae=1,we){return this.stackCtrl.canGoBack(ae,we)}pop(ae=1,we){return this.stackCtrl.pop(ae,we)}getLastUrl(ae){const we=this.stackCtrl.getLastUrl(ae);return we?we.url:void 0}getLastRouteView(ae){return this.stackCtrl.getLastUrl(ae)}getRootView(ae){return this.stackCtrl.getRootUrl(ae)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(ae,we){const Ue=new l.nX;return Ue._futureSnapshot=we._futureSnapshot,Ue._routerState=we._routerState,Ue.snapshot=we.snapshot,Ue.outlet=we.outlet,Ue.component=we.component,Ue._paramMap=this.proxyObservable(ae,"paramMap"),Ue._queryParamMap=this.proxyObservable(ae,"queryParamMap"),Ue.url=this.proxyObservable(ae,"url"),Ue.params=this.proxyObservable(ae,"params"),Ue.queryParams=this.proxyObservable(ae,"queryParams"),Ue.fragment=this.proxyObservable(ae,"fragment"),Ue.data=this.proxyObservable(ae,"data"),Ue}proxyObservable(ae,we){return ae.pipe((0,fn.p)(Ue=>!!Ue),(0,xn.n)(Ue=>this.currentActivatedRoute$.pipe((0,fn.p)(it=>null!==it&&it.component===Ue),(0,xn.n)(it=>it&&it.activatedRoute[we]),function Mn(Lt,Ee=rn.D){return Lt=null!=Lt?Lt:Zn,(0,ht.N)((ue,ae)=>{let we,Ue=!0;ue.subscribe((0,ei._)(ae,it=>{const Xt=Ee(it);(Ue||!Lt(we,Xt))&&(Ue=!1,we=Xt,ae.next(it))}))})}())))}updateActivatedRouteProxy(ae,we){const Ue=this.proxyMap.get(ae);if(!Ue)throw new Error("Could not find activated route proxy for view");Ue._futureSnapshot=we._futureSnapshot,Ue._routerState=we._routerState,Ue.snapshot=we.snapshot,Ue.outlet=we.outlet,Ue.component=we.component,this.currentActivatedRoute$.next({component:ae,activatedRoute:we})}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)(ne.kS0("name"),ne.kS0("tabs"),ne.rXU(We.aZ),ne.rXU(ne.aKT),ne.rXU(l.Ix),ne.rXU(ne.SKi),ne.rXU(l.nX),ne.rXU(Lt,12))}),(0,re.A)(Ee,"\u0275dir",ne.FsC({type:Lt,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]})),Ee})();class lr{constructor(Ee,ue,ae){(0,re.A)(this,"route",void 0),(0,re.A)(this,"childContexts",void 0),(0,re.A)(this,"parent",void 0),this.route=Ee,this.childContexts=ue,this.parent=ae}get(Ee,ue){return Ee===l.nX?this.route:Ee===l.Zp?this.childContexts:this.parent.get(Ee,ue)}}const Pr=new ne.nKC("");let xr=(()=>{var Lt;class Ee{constructor(){(0,re.A)(this,"outletDataSubscriptions",new Map)}bindActivatedRouteToOutletComponent(ae){this.unsubscribeFromRouteData(ae),this.subscribeToRouteData(ae)}unsubscribeFromRouteData(ae){var we;null===(we=this.outletDataSubscriptions.get(ae))||void 0===we||we.unsubscribe(),this.outletDataSubscriptions.delete(ae)}subscribeToRouteData(ae){const{activatedRoute:we}=ae,Ue=(0,At.z)([we.queryParams,we.params,we.data]).pipe((0,xn.n)(([it,Xt,Cn],dn)=>(Cn={...it,...Xt,...Cn},0===dn?(0,Ut.of)(Cn):Promise.resolve(Cn)))).subscribe(it=>{if(!ae.isActivated||!ae.activatedComponentRef||ae.activatedRoute!==we||null===we.component)return void this.unsubscribeFromRouteData(ae);const Xt=(0,ne.HJs)(we.component);if(Xt)for(const{templateName:Cn}of Xt.inputs)ae.activatedComponentRef.setInput(Cn,it[Cn]);else this.unsubscribeFromRouteData(ae)});this.outletDataSubscriptions.set(ae,Ue)}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)}),(0,re.A)(Ee,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac})),Ee})();const wr=()=>({provide:Pr,useFactory:aa,deps:[l.Ix]});function aa(Lt){return null!=Lt&&Lt.componentInputBindingEnabled?new xr:null}const Jn=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let hs=(()=>{var Lt;let Ee=((0,re.A)(Lt=class{constructor(ae,we,Ue,it,Xt,Cn){(0,re.A)(this,"routerOutlet",void 0),(0,re.A)(this,"navCtrl",void 0),(0,re.A)(this,"config",void 0),(0,re.A)(this,"r",void 0),(0,re.A)(this,"z",void 0),(0,re.A)(this,"el",void 0),this.routerOutlet=ae,this.navCtrl=we,this.config=Ue,this.r=it,this.z=Xt,Cn.detach(),this.el=this.r.nativeElement}onClick(ae){var we;const Ue=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(we=this.routerOutlet)&&void 0!==we&&we.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),ae.preventDefault()):null!=Ue&&(this.navCtrl.navigateBack(Ue,{animation:this.routerAnimation}),ae.preventDefault())}},"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(Wo,8),ne.rXU(on),ne.rXU(Vn),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.gRc))}),(0,re.A)(Lt,"\u0275dir",ne.FsC({type:Lt,hostBindings:function(ae,we){1&ae&&ne.bIt("click",function(it){return we.onClick(it)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"}})),Lt);return Ee=(0,yt.Cg)([ko({inputs:Jn})],Ee),Ee})(),jr=(()=>{var Lt;class Ee{constructor(ae,we,Ue,it,Xt){(0,re.A)(this,"locationStrategy",void 0),(0,re.A)(this,"navCtrl",void 0),(0,re.A)(this,"elementRef",void 0),(0,re.A)(this,"router",void 0),(0,re.A)(this,"routerLink",void 0),(0,re.A)(this,"routerDirection","forward"),(0,re.A)(this,"routerAnimation",void 0),this.locationStrategy=ae,this.navCtrl=we,this.elementRef=Ue,this.router=it,this.routerLink=Xt}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var ae;if(null!==(ae=this.routerLink)&&void 0!==ae&&ae.urlTree){const we=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=we}}onClick(ae){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),ae.preventDefault()}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(We.hb),ne.rXU(on),ne.rXU(ne.aKT),ne.rXU(l.Ix),ne.rXU(l.Wk,8))}),(0,re.A)(Ee,"\u0275dir",ne.FsC({type:Lt,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(ae,we){1&ae&&ne.bIt("click",function(it){return we.onClick(it)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[ne.OA$]})),Ee})(),Ns=(()=>{var Lt;class Ee{constructor(ae,we,Ue,it,Xt){(0,re.A)(this,"locationStrategy",void 0),(0,re.A)(this,"navCtrl",void 0),(0,re.A)(this,"elementRef",void 0),(0,re.A)(this,"router",void 0),(0,re.A)(this,"routerLink",void 0),(0,re.A)(this,"routerDirection","forward"),(0,re.A)(this,"routerAnimation",void 0),this.locationStrategy=ae,this.navCtrl=we,this.elementRef=Ue,this.router=it,this.routerLink=Xt}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var ae;if(null!==(ae=this.routerLink)&&void 0!==ae&&ae.urlTree){const we=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=we}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(We.hb),ne.rXU(on),ne.rXU(ne.aKT),ne.rXU(l.Ix),ne.rXU(l.Wk,8))}),(0,re.A)(Ee,"\u0275dir",ne.FsC({type:Lt,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(ae,we){1&ae&&ne.bIt("click",function(){return we.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[ne.OA$]})),Ee})();const ps=["animated","animation","root","rootParams","swipeGesture"],Kr=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let Fi=(()=>{var Lt;let Ee=((0,re.A)(Lt=class{constructor(ae,we,Ue,it,Xt,Cn){(0,re.A)(this,"z",void 0),(0,re.A)(this,"el",void 0),this.z=Xt,Cn.detach(),this.el=ae.nativeElement,ae.nativeElement.delegate=it.create(we,Ue),Ei(this,this.el,["ionNavDidChange","ionNavWillChange"])}},"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(ne.aKT),ne.rXU(ne.uvJ),ne.rXU(ne.zZn),ne.rXU(et),ne.rXU(ne.SKi),ne.rXU(ne.gRc))}),(0,re.A)(Lt,"\u0275dir",ne.FsC({type:Lt,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"}})),Lt);return Ee=(0,yt.Cg)([ko({inputs:ps,methods:Kr})],Ee),Ee})(),ni=(()=>{var Lt;class Ee{constructor(ae){(0,re.A)(this,"navCtrl",void 0),(0,re.A)(this,"tabsInner",void 0),(0,re.A)(this,"ionTabsWillChange",new ne.bkB),(0,re.A)(this,"ionTabsDidChange",new ne.bkB),(0,re.A)(this,"tabBarSlot","bottom"),this.navCtrl=ae}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:ae,tabSwitch:we}){const Ue=ae.stackId;we&&void 0!==Ue&&this.ionTabsWillChange.emit({tab:Ue})}onStackDidChange({enteringView:ae,tabSwitch:we}){const Ue=ae.stackId;we&&void 0!==Ue&&(this.tabBar&&(this.tabBar.selectedTab=Ue),this.ionTabsDidChange.emit({tab:Ue}))}select(ae){const we="string"==typeof ae,Ue=we?ae:ae.detail.tab,it=this.outlet.getActiveStackId()===Ue,Xt=`${this.outlet.tabsPrefix}/${Ue}`;if(we||ae.stopPropagation(),it){const Cn=this.outlet.getActiveStackId(),dn=this.outlet.getLastRouteView(Cn);if((null==dn?void 0:dn.url)===Xt)return;const Nn=this.outlet.getRootView(Ue);return this.navCtrl.navigateRoot(Xt,{...Nn&&Xt===Nn.url&&Nn.savedExtras,animated:!0,animationDirection:"back"})}{const Cn=this.outlet.getLastRouteView(Ue);return this.navCtrl.navigateRoot((null==Cn?void 0:Cn.url)||Xt,{...null==Cn?void 0:Cn.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(ae=>{const we=ae.el.getAttribute("slot");we!==this.tabBarSlot&&(this.tabBarSlot=we,this.relocateTabBar())})}relocateTabBar(){const ae=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(ae):this.tabsInner.nativeElement.after(ae)}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(on))}),(0,re.A)(Ee,"\u0275dir",ne.FsC({type:Lt,selectors:[["ion-tabs"]],viewQuery:function(ae,we){if(1&ae&&ne.GBs(Ot,7,ne.aKT),2&ae){let Ue;ne.mGM(Ue=ne.lsd())&&(we.tabsInner=Ue.first)}},hostBindings:function(ae,we){1&ae&&ne.bIt("ionTabButtonClick",function(it){return we.select(it)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"}})),Ee})(),Kn=(()=>{var Lt;class Ee{constructor(ae,we){(0,re.A)(this,"injector",void 0),(0,re.A)(this,"elementRef",void 0),(0,re.A)(this,"onChange",()=>{}),(0,re.A)(this,"onTouched",()=>{}),(0,re.A)(this,"lastValue",void 0),(0,re.A)(this,"statusChanges",void 0),this.injector=ae,this.elementRef=we}writeValue(ae){this.elementRef.nativeElement.value=this.lastValue=ae,kt(this.elementRef)}handleValueChange(ae,we){ae===this.elementRef.nativeElement&&(we!==this.lastValue&&(this.lastValue=we,this.onChange(we)),kt(this.elementRef))}_handleBlurEvent(ae){ae===this.elementRef.nativeElement&&(this.onTouched(),kt(this.elementRef))}registerOnChange(ae){this.onChange=ae}registerOnTouched(ae){this.onTouched=ae}setDisabledState(ae){this.elementRef.nativeElement.disabled=ae}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let ae;try{ae=this.injector.get(xt.vO)}catch{}if(!ae)return;ae.statusChanges&&(this.statusChanges=ae.statusChanges.subscribe(()=>kt(this.elementRef)));const we=ae.control;we&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(it=>{if(typeof we[it]<"u"){const Xt=we[it].bind(we);we[it]=(...Cn)=>{Xt(...Cn),kt(this.elementRef)}}})}}return Lt=Ee,(0,re.A)(Ee,"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(ne.zZn),ne.rXU(ne.aKT))}),(0,re.A)(Ee,"\u0275dir",ne.FsC({type:Lt,hostBindings:function(ae,we){1&ae&&ne.bIt("ionBlur",function(it){return we._handleBlurEvent(it.target)})}})),Ee})();const kt=Lt=>{(Lt=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Lt):"function"==typeof requestAnimationFrame?requestAnimationFrame(Lt):setTimeout(Lt)})(()=>{const Ee=Lt.nativeElement,ue=null!=Ee.value&&Ee.value.toString().length>0,ae=mt(Ee);Ye(Ee,ae);const we=Ee.closest("ion-item");we&&Ye(we,ue?[...ae,"item-has-value"]:ae)})},mt=Lt=>{const Ee=Lt.classList,ue=[];for(let ae=0;ae<Ee.length;ae++){const we=Ee.item(ae);null!==we&&Tt(we,"ng-")&&ue.push(`ion-${we.substring(3)}`)}return ue},Ye=(Lt,Ee)=>{const ue=Lt.classList;ue.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),ue.add(...Ee)},Tt=(Lt,Ee)=>Lt.substring(0,Ee.length)===Ee;class Jt{shouldDetach(Ee){return!1}shouldAttach(Ee){return!1}store(Ee,ue){}retrieve(Ee){return null}shouldReuseRoute(Ee,ue){if(Ee.routeConfig!==ue.routeConfig)return!1;const ae=Ee.params,we=ue.params,Ue=Object.keys(ae),it=Object.keys(we);if(Ue.length!==it.length)return!1;for(const Xt of Ue)if(we[Xt]!==ae[Xt])return!1;return!0}}class Ln{constructor(Ee){(0,re.A)(this,"ctrl",void 0),this.ctrl=Ee}create(Ee){return this.ctrl.create(Ee||{})}dismiss(Ee,ue,ae){return this.ctrl.dismiss(Ee,ue,ae)}getTop(){return this.ctrl.getTop()}}},2700:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{hG:()=>$g,U1:()=>oc,Jm:()=>Cm,QW:()=>og,b_:()=>w1,I9:()=>W1,ME:()=>Up,HW:()=>Tf,tN:()=>mp,eY:()=>ah,hU:()=>rg,W9:()=>Bg,Q8:()=>Gp,YW:()=>S,lO:()=>w,eU:()=>P,iq:()=>d2,KW:()=>U,$w:()=>Dm,uz:()=>st,he:()=>br,nf:()=>rr,Sb:()=>ho,FH:()=>lo,Rg:()=>Jo,ln:()=>Ng,S1:()=>qp,Gp:()=>zm,eP:()=>h4,Nm:()=>Af,Ip:()=>L4,Jq:()=>Wp,qW:()=>wv,p4:()=>p4,IO:()=>lg,nc:()=>xu,Zx:()=>cg,BC:()=>xv,ai:()=>Vg,K_:()=>u0,_H:()=>c2});var V=_e(9842),re=_e(1635),ne=_e(3953),l=_e(8880),We=_e(467),Y=_e(1771);const ft=(B,_,k,D,q)=>jt(B[1],_[1],k[1],D[1],q).map(ce=>qt(B[0],_[0],k[0],D[0],ce)),qt=(B,_,k,D,q)=>q*(3*_*Math.pow(q-1,2)+q*(-3*k*q+3*k+D*q))-B*Math.pow(q-1,3),jt=(B,_,k,D,q)=>C((D-=q)-3*(k-=q)+3*(_-=q)-(B-=q),3*k-6*_+3*B,3*_-3*B,B).filter(De=>De>=0&&De<=1),C=(B,_,k,D)=>{if(0===B)return((B,_,k)=>{const D=_*_-4*B*k;return D<0?[]:[(-_+Math.sqrt(D))/(2*B),(-_-Math.sqrt(D))/(2*B)]})(_,k,D);const q=(3*(k/=B)-(_/=B)*_)/3,ce=(2*_*_*_-9*_*k+27*(D/=B))/27;if(0===q)return[Math.pow(-ce,1/3)];if(0===ce)return[Math.sqrt(-q),-Math.sqrt(-q)];const De=Math.pow(ce/2,2)+Math.pow(q/3,3);if(0===De)return[Math.pow(ce/2,.5)-_/3];if(De>0)return[Math.pow(-ce/2+Math.sqrt(De),1/3)-Math.pow(ce/2+Math.sqrt(De),1/3)-_/3];const dt=Math.sqrt(Math.pow(-q/3,3)),Vt=Math.acos(-ce/(2*Math.sqrt(Math.pow(-q/3,3)))),bn=2*Math.pow(dt,1/3);return[bn*Math.cos(Vt/3)-_/3,bn*Math.cos((Vt+2*Math.PI)/3)-_/3,bn*Math.cos((Vt+4*Math.PI)/3)-_/3]};var At=_e(1656);const Ut=function(){var B=(0,We.A)(function*(_,k,D,q,ce,De){var dt;if(_)return _.attachViewToDom(k,D,ce,q);if(!(De||"string"==typeof D||D instanceof HTMLElement))throw new Error("framework delegate is missing");const Vt="string"==typeof D?null===(dt=k.ownerDocument)||void 0===dt?void 0:dt.createElement(D):D;return q&&q.forEach(bn=>Vt.classList.add(bn)),ce&&Object.assign(Vt,ce),k.appendChild(Vt),yield new Promise(bn=>(0,At.c)(Vt,bn)),Vt});return function(k,D,q,ce,De,dt){return B.apply(this,arguments)}}(),yt=(B,_)=>{if(_){if(B)return B.removeViewFromDom(_.parentElement,_);_.remove()}return Promise.resolve()},fn=()=>{let B,_;return{attachViewToDom:function(){var q=(0,We.A)(function*(ce,De,dt={},Vt=[]){var bn,fi;let xi;if(B=ce,De){const Vi="string"==typeof De?null===(bn=B.ownerDocument)||void 0===bn?void 0:bn.createElement(De):De;Vt.forEach(xo=>Vi.classList.add(xo)),Object.assign(Vi,dt),B.appendChild(Vi),xi=Vi,yield new Promise(xo=>(0,At.c)(Vi,xo))}else if(B.children.length>0&&("ION-MODAL"===B.tagName||"ION-POPOVER"===B.tagName)&&!(xi=B.children[0]).classList.contains("ion-delegate-host")){const xo=null===(fi=B.ownerDocument)||void 0===fi?void 0:fi.createElement("div");xo.classList.add("ion-delegate-host"),Vt.forEach(zo=>xo.classList.add(zo)),xo.append(...B.children),B.appendChild(xo),xi=xo}const to=document.querySelector("ion-app")||document.body;return _=document.createComment("ionic teleport"),B.parentNode.insertBefore(_,B),to.appendChild(B),null!=xi?xi:B});return function(De,dt){return q.apply(this,arguments)}}(),removeViewFromDom:()=>(B&&_&&(_.parentNode.insertBefore(B,_),_.remove()),Promise.resolve())}},xn=()=>{let B;return{lock:function(){var k=(0,We.A)(function*(){const D=B;let q;return B=new Promise(ce=>q=ce),void 0!==D&&(yield D),q});return function(){return k.apply(this,arguments)}}()}};var rn=_e(6031),ht=_e(5531);const Zn=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=(0,Y.lh)(this,"ionNavWillLoad",7),this.ionNavWillChange=(0,Y.lh)(this,"ionNavWillChange",3),this.ionNavDidChange=(0,Y.lh)(this,"ionNavDidChange",3),this.lockController=xn(),this.gestureOrAnimationInProgress=!1,this.mode=(0,ht.b)(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(void 0!==this.swipeHandler)}connectedCallback(){var _=this;return(0,We.A)(function*(){_.gesture=(yield _e.e(6499).then(_e.bind(_e,6499))).createSwipeBackGesture(_.el,()=>!_.gestureOrAnimationInProgress&&!!_.swipeHandler&&_.swipeHandler.canStart(),()=>(_.gestureOrAnimationInProgress=!0,void(_.swipeHandler&&_.swipeHandler.onStart())),D=>{var q;return null===(q=_.ani)||void 0===q?void 0:q.progressStep(D)},(D,q,ce)=>{if(_.ani){_.ani.onFinish(()=>{_.gestureOrAnimationInProgress=!1,_.swipeHandler&&_.swipeHandler.onEnd(D)},{oneTimeCallback:!0});let De=D?-.001:.001;D?De+=ft([0,0],[.32,.72],[0,1],[1,1],q)[0]:(_.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),De+=ft([0,0],[1,0],[.68,.28],[1,1],q)[0]),_.ani.progressEnd(D?1:0,De,ce)}else _.gestureOrAnimationInProgress=!1}),_.swipeHandlerChanged()})()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}commit(_,k,D){var q=this;return(0,We.A)(function*(){const ce=yield q.lockController.lock();let De=!1;try{De=yield q.transition(_,k,D)}catch(dt){console.error(dt)}return ce(),De})()}setRouteId(_,k,D,q){var ce=this;return(0,We.A)(function*(){return{changed:yield ce.setRoot(_,k,{duration:"root"===D?0:void 0,direction:"back"===D?"back":"forward",animationBuilder:q}),element:ce.activeEl}})()}getRouteId(){var _=this;return(0,We.A)(function*(){const k=_.activeEl;return k?{id:k.tagName,element:k,params:_.activeParams}:void 0})()}setRoot(_,k,D){var q=this;return(0,We.A)(function*(){if(q.activeComponent===_&&(0,At.s)(k,q.activeParams))return!1;const ce=q.activeEl,De=yield Ut(q.delegate,q.el,_,["ion-page","ion-page-invisible"],k);return q.activeComponent=_,q.activeEl=De,q.activeParams=k,yield q.commit(De,ce,D),yield yt(q.delegate,ce),!0})()}transition(_,k,D={}){var q=this;return(0,We.A)(function*(){if(k===_)return!1;q.ionNavWillChange.emit();const{el:ce,mode:De}=q,dt=q.animated&&ht.c.getBoolean("animated",!0),Vt=D.animationBuilder||q.animation||ht.c.get("navAnimation");return yield(0,rn.t)(Object.assign(Object.assign({mode:De,animated:dt,enteringEl:_,leavingEl:k,baseEl:ce,deepWait:(0,At.j)(ce),progressCallback:D.progressAnimation?bn=>{void 0===bn||q.gestureOrAnimationInProgress?q.ani=bn:(q.gestureOrAnimationInProgress=!0,bn.onFinish(()=>{q.gestureOrAnimationInProgress=!1,q.swipeHandler&&q.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),bn.progressEnd(0,0,0))}:void 0},D),{animationBuilder:Vt})),q.ionNavDidChange.emit(),!0})()}render(){return(0,Y.h)("slot",{key:"8279a453c66a766e6e383ff59842b4ae070c13a9"})}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}"}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]},void 0,{swipeHandler:["swipeHandlerChanged"]}]),wn=function xt(){typeof customElements>"u"||["ion-router-outlet"].forEach(_=>{"ion-router-outlet"===_&&(customElements.get(_)||customElements.define(_,Zn))})};var Pn=_e(177),Ii=_e(5113),Et=_e(7849),kn=_e(1979),Te=_e(6081),on=_e(4878),Qt=_e(5098),En=_e(8875);const oo='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Vn=(B,_)=>{const k=B.querySelector(oo);Ae(k,null!=_?_:B)},Ke=(B,_)=>{const k=Array.from(B.querySelectorAll(oo));Ae(k.length>0?k[k.length-1]:null,null!=_?_:B)},Ae=(B,_)=>{let k=B;const D=null==B?void 0:B.shadowRoot;D&&(k=D.querySelector(oo)||B),k?(0,At.f)(k):_.focus()};let Ge=0,et=0;const zt=new WeakMap,qn=B=>({create:_=>Er(B,_),dismiss:(_,k,D)=>ui(document,_,k,B,D),getTop:()=>(0,We.A)(function*(){return Xi(document,B)})()}),un=qn("ion-alert"),go=qn("ion-action-sheet"),dr=qn("ion-modal"),Dr=qn("ion-popover"),cr=qn("ion-toast"),Ei=B=>{typeof document<"u"&&Yi(document);const _=Ge++;B.overlayIndex=_},ko=B=>(B.hasAttribute("id")||(B.id="ion-overlay-"+ ++et),B.id),Er=(B,_)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(B).then(()=>{const k=document.createElement(B);return k.classList.add("overlay-hidden"),Object.assign(k,Object.assign(Object.assign({},_),{hasController:!0})),fo(document).appendChild(k),new Promise(D=>(0,At.c)(k,D))}):Promise.resolve(),ji=(B,_)=>{let k=B;const D=null==B?void 0:B.shadowRoot;D&&(k=D.querySelector(oo)||B),k?(0,At.f)(k):_.focus()},Yi=B=>{0===Ge&&(Ge=1,B.addEventListener("focus",_=>{((B,_)=>{const k=Xi(_,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),D=B.target;k&&D&&!k.classList.contains(Ns)&&(k.shadowRoot?(()=>{if(k.contains(D))k.lastFocus=D;else if("ION-TOAST"===D.tagName)ji(k.lastFocus,k);else{const De=k.lastFocus;Vn(k),De===_.activeElement&&Ke(k),k.lastFocus=_.activeElement}})():(()=>{if(k===D)k.lastFocus=void 0;else if("ION-TOAST"===D.tagName)ji(k.lastFocus,k);else{const De=(0,At.g)(k);if(!De.contains(D))return;const dt=De.querySelector(".ion-overlay-wrapper");if(!dt)return;if(dt.contains(D)||D===De.querySelector("ion-backdrop"))k.lastFocus=D;else{const Vt=k.lastFocus;Vn(dt,k),Vt===_.activeElement&&Ke(dt,k),k.lastFocus=_.activeElement}}})())})(_,B)},!0),B.addEventListener("ionBackButton",_=>{const k=Xi(B);null!=k&&k.backdropDismiss&&_.detail.register(Qt.OVERLAY_BACK_BUTTON_PRIORITY,()=>{k.dismiss(void 0,Pr)})}),(0,Qt.shouldUseCloseWatcher)()||B.addEventListener("keydown",_=>{if("Escape"===_.key){const k=Xi(B);null!=k&&k.backdropDismiss&&k.dismiss(void 0,Pr)}}))},ui=(B,_,k,D,q)=>{const ce=Xi(B,D,q);return ce?ce.dismiss(_,k):Promise.reject("overlay does not exist")},po=(B,_)=>((B,_)=>(void 0===_&&(_="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(B.querySelectorAll(_)).filter(k=>k.overlayIndex>0)))(B,_).filter(k=>!(B=>B.classList.contains("overlay-hidden"))(k)),Xi=(B,_,k)=>{const D=po(B,_);return void 0===k?D[D.length-1]:D.find(q=>q.id===k)},bs=(B=!1)=>{const k=fo(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");k&&(B?k.setAttribute("aria-hidden","true"):k.removeAttribute("aria-hidden"))},Br=function(){var B=(0,We.A)(function*(_,k,D,q,ce){var De,dt;if(_.presented)return;bs(!0),document.body.classList.add(En.B),hs(_.el),_.presented=!0,_.willPresent.emit(),null===(De=_.willPresentShorthand)||void 0===De||De.emit();const Vt=(0,ht.b)(_),bn=_.enterAnimation?_.enterAnimation:ht.c.get(k,"ios"===Vt?D:q);(yield Ts(_,bn,_.el,ce))&&(_.didPresent.emit(),null===(dt=_.didPresentShorthand)||void 0===dt||dt.emit()),"ION-TOAST"!==_.el.tagName&&So(_.el),_.keyboardClose&&(null===document.activeElement||!_.el.contains(document.activeElement))&&_.el.focus(),_.el.removeAttribute("aria-hidden")});return function(k,D,q,ce,De){return B.apply(this,arguments)}}(),So=function(){var B=(0,We.A)(function*(_){let k=document.activeElement;if(!k)return;const D=null==k?void 0:k.shadowRoot;D&&(k=D.querySelector(oo)||k),yield _.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&k.focus()});return function(k){return B.apply(this,arguments)}}(),ro=function(){var B=(0,We.A)(function*(_,k,D,q,ce,De,dt){var Vt,bn;if(!_.presented)return!1;void 0!==on.d&&1===po(on.d).length&&(bs(!1),document.body.classList.remove(En.B)),_.presented=!1;try{_.el.style.setProperty("pointer-events","none"),_.willDismiss.emit({data:k,role:D}),null===(Vt=_.willDismissShorthand)||void 0===Vt||Vt.emit({data:k,role:D});const xi=(0,ht.b)(_),to=_.leaveAnimation?_.leaveAnimation:ht.c.get(q,"ios"===xi?ce:De);D!==xr&&(yield Ts(_,to,_.el,dt)),_.didDismiss.emit({data:k,role:D}),null===(bn=_.didDismissShorthand)||void 0===bn||bn.emit({data:k,role:D}),(zt.get(_)||[]).forEach(xo=>xo.destroy()),zt.delete(_),_.el.classList.add("overlay-hidden"),_.el.style.removeProperty("pointer-events"),void 0!==_.el.lastFocus&&(_.el.lastFocus=void 0)}catch(xi){console.error(xi)}return _.el.remove(),jr(),!0});return function(k,D,q,ce,De,dt,Vt){return B.apply(this,arguments)}}(),fo=B=>B.querySelector("ion-app")||B.body,Ts=function(){var B=(0,We.A)(function*(_,k,D,q){D.classList.remove("overlay-hidden");const De=k(_.el,q);(!_.animated||!ht.c.getBoolean("animated",!0))&&De.duration(0),_.keyboardClose&&De.beforeAddWrite(()=>{const Vt=D.ownerDocument.activeElement;null!=Vt&&Vt.matches("input,ion-input, ion-textarea")&&Vt.blur()});const dt=zt.get(_)||[];return zt.set(_,[...dt,De]),yield De.play(),!0});return function(k,D,q,ce){return B.apply(this,arguments)}}(),zr=(B,_)=>{let k;const D=new Promise(q=>k=q);return Zr(B,_,q=>{k(q.detail)}),D},Zr=(B,_,k)=>{const D=q=>{(0,At.b)(B,_,D),k(q)};(0,At.a)(B,_,D)},Qr=B=>"cancel"===B||B===Pr,Wo=B=>B(),lr=(B,_)=>{if("function"==typeof B)return ht.c.get("_zoneGate",Wo)(()=>{try{return B(_)}catch(D){throw D}})},Pr="backdrop",xr="gesture",aa=B=>{let k,_=!1;const D=fn(),q=(dt=!1)=>{if(k&&!dt)return{delegate:k,inline:_};const{el:Vt,hasController:bn,delegate:fi}=B;return _=null!==Vt.parentNode&&!bn,k=_?fi||D:fi,{inline:_,delegate:k}};return{attachViewToDom:function(){var dt=(0,We.A)(function*(Vt){const{delegate:bn}=q(!0);if(bn)return yield bn.attachViewToDom(B.el,Vt);const{hasController:fi}=B;if(fi&&void 0!==Vt)throw new Error("framework delegate is missing");return null});return function(bn){return dt.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:dt}=q();dt&&void 0!==B.el&&dt.removeViewFromDom(B.el.parentElement,B.el)}}},Jn=()=>{let B;const _=()=>{B&&(B(),B=void 0)};return{addClickListener:(D,q)=>{_();const ce=void 0!==q?document.getElementById(q):null;ce?B=((dt,Vt)=>{const bn=()=>{Vt.present()};return dt.addEventListener("click",bn),()=>{dt.removeEventListener("click",bn)}})(ce,D):(0,kn.p)(`A trigger element with the ID "${q}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,D)},removeClickListener:_}},hs=B=>{var _;if(void 0===on.d)return;const k=po(on.d);for(let D=k.length-1;D>=0;D--){const q=k[D],ce=null!==(_=k[D+1])&&void 0!==_?_:B;(ce.hasAttribute("aria-hidden")||"ION-TOAST"!==ce.tagName)&&q.setAttribute("aria-hidden","true")}},jr=()=>{if(void 0===on.d)return;const B=po(on.d);for(let _=B.length-1;_>=0;_--){const k=B[_];if(k.removeAttribute("aria-hidden"),"ION-TOAST"!==k.tagName)break}},Ns="ion-disable-focus-trap",ps=(B,_)=>null!==_.closest(B),Kr=(B,_)=>"string"==typeof B&&B.length>0?Object.assign({"ion-color":!0,[`ion-color-${B}`]:!0},_):_,ni=B=>{const _={};return(B=>void 0!==B?(Array.isArray(B)?B:B.split(" ")).filter(k=>null!=k).map(k=>k.trim()).filter(k=>""!==k):[])(B).forEach(k=>_[k]=!0),_},Ai=/^[a-z][a-z0-9+\-.]*:/,Kn=function(){var B=(0,We.A)(function*(_,k,D,q){if(null!=_&&"#"!==_[0]&&!Ai.test(_)){const ce=document.querySelector("ion-router");if(ce)return null!=k&&k.preventDefault(),ce.push(_,D,q)}return!1});return function(k,D,q,ce){return B.apply(this,arguments)}}();var kt=_e(6008),mt=_e(555),Ye=_e(2104);const Ee=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=(0,Y.lh)(this,"ionBackdropTap",7),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}onMouseDown(_){this.emitTap(_)}emitTap(_){this.stopPropagation&&(_.preventDefault(),_.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"c803b4302c8e722064feb03dafe3cb6e190b4f2b",tabindex:"-1","aria-hidden":"true",class:{[_]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",md:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}"}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function ue(){typeof customElements>"u"||["ion-backdrop"].forEach(_=>{"ion-backdrop"===_&&(customElements.get(_)||customElements.define(_,Ee))})}var ae=function(B){return B.Dark="DARK",B.Light="LIGHT",B.Default="DEFAULT",B}(ae||{});const we={getEngine(){const B=(0,Te.g)();if(null!=B&&B.isPluginAvailable("StatusBar"))return B.Plugins.StatusBar},setStyle(B){const _=this.getEngine();_&&_.setStyle(B)},getStyle:(B=(0,We.A)(function*(){const _=this.getEngine();if(!_)return ae.Default;const{style:k}=yield _.getInfo();return k}),function(){return B.apply(this,arguments)})},Ue=(B,_)=>{if(1===_)return 0;const k=1/(1-_);return B*k+-_*k},it=()=>{!on.w||on.w.innerWidth>=768||we.setStyle({style:ae.Dark})},Xt=(B=ae.Default)=>{!on.w||on.w.innerWidth>=768||we.setStyle({style:B})},Cn=function(){var B=(0,We.A)(function*(_,k){"function"!=typeof _.canDismiss||!(yield _.canDismiss(void 0,xr))||(k.isRunning()?k.onFinish(()=>{_.dismiss(void 0,"handler")},{oneTimeCallback:!0}):_.dismiss(void 0,"handler"))});return function(k,D){return B.apply(this,arguments)}}(),dn=B=>.00255275*2.71828**(-14.9619*B)-1.00255*2.71828**(-.0380968*B)+1,Oi=(B,_)=>(0,At.k)(400,B/Math.abs(1.1*_),500),Fo=B=>{const{currentBreakpoint:_,backdropBreakpoint:k}=B,D=void 0===k||k<_,q=D?`calc(var(--backdrop-opacity) * ${_})`:"0",ce=(0,mt.c)("backdropAnimation").fromTo("opacity",0,q);return D&&ce.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:(0,mt.c)("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:`translateY(${100-100*_}%)`}]),backdropAnimation:ce}},nr=B=>{const{currentBreakpoint:_,backdropBreakpoint:k}=B,D=`calc(var(--backdrop-opacity) * ${Ue(_,k)})`,q=[{offset:0,opacity:D},{offset:1,opacity:0}],ce=[{offset:0,opacity:D},{offset:k,opacity:0},{offset:1,opacity:0}],De=(0,mt.c)("backdropAnimation").keyframes(0!==k?ce:q);return{wrapperAnimation:(0,mt.c)("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:`translateY(${100-100*_}%)`},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:De}},jn=(B,_)=>{const{presentingEl:k,currentBreakpoint:D}=_,q=(0,At.g)(B),{wrapperAnimation:ce,backdropAnimation:De}=void 0!==D?Fo(_):{backdropAnimation:(0,mt.c)().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),wrapperAnimation:(0,mt.c)().fromTo("transform","translateY(100vh)","translateY(0vh)")};De.addElement(q.querySelector("ion-backdrop")),ce.addElement(q.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const dt=(0,mt.c)("entering-base").addElement(B).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(ce);if(k){const Vt=window.innerWidth<768,bn="ION-MODAL"===k.tagName&&void 0!==k.presentingElement,fi=(0,At.g)(k),xi=(0,mt.c)().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),to=document.body;if(Vt){const Vi=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",yr=`translateY(${bn?"-10px":Vi}) scale(0.915)`;xi.afterStyles({transform:yr}).beforeAddWrite(()=>to.style.setProperty("background-color","black")).addElement(k).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:yr,borderRadius:"10px 10px 0 0"}]),dt.addAnimation(xi)}else if(dt.addAnimation(De),bn){const xo=`translateY(-10px) scale(${bn?.915:1})`;xi.afterStyles({transform:xo}).addElement(fi.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:xo}]);const zo=(0,mt.c)().afterStyles({transform:xo}).addElement(fi.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:xo}]);dt.addAnimation([xi,zo])}else ce.fromTo("opacity","0","1")}else dt.addAnimation(De);return dt},co=(B,_,k=500)=>{const{presentingEl:D,currentBreakpoint:q}=_,ce=(0,At.g)(B),{wrapperAnimation:De,backdropAnimation:dt}=void 0!==q?nr(_):{backdropAnimation:(0,mt.c)().fromTo("opacity","var(--backdrop-opacity)",0),wrapperAnimation:(0,mt.c)().fromTo("transform","translateY(0vh)","translateY(100vh)")};dt.addElement(ce.querySelector("ion-backdrop")),De.addElement(ce.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const Vt=(0,mt.c)("leaving-base").addElement(B).easing("cubic-bezier(0.32,0.72,0,1)").duration(k).addAnimation(De);if(D){const bn=window.innerWidth<768,fi="ION-MODAL"===D.tagName&&void 0!==D.presentingElement,xi=(0,At.g)(D),to=(0,mt.c)().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(xo=>{1===xo&&(D.style.setProperty("overflow",""),Array.from(Vi.querySelectorAll("ion-modal:not(.overlay-hidden)")).filter(yr=>void 0!==yr.presentingElement).length<=1&&Vi.style.setProperty("background-color",""))}),Vi=document.body;if(bn){const xo=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",as=`translateY(${fi?"-10px":xo}) scale(0.915)`;to.addElement(D).keyframes([{offset:0,filter:"contrast(0.85)",transform:as,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),Vt.addAnimation(to)}else if(Vt.addAnimation(dt),fi){const zo=`translateY(-10px) scale(${fi?.915:1})`;to.addElement(xi.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:zo},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const yr=(0,mt.c)().addElement(xi.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:zo},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);Vt.addAnimation([to,yr])}else De.fromTo("opacity","1","0")}else Vt.addAnimation(dt);return Vt},Kt=(B,_)=>{const{currentBreakpoint:k}=_,D=(0,At.g)(B),{wrapperAnimation:q,backdropAnimation:ce}=void 0!==k?Fo(_):{backdropAnimation:(0,mt.c)().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),wrapperAnimation:(0,mt.c)().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}])};return ce.addElement(D.querySelector("ion-backdrop")),q.addElement(D.querySelector(".modal-wrapper")),(0,mt.c)().addElement(B).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([ce,q])},Pi=(B,_)=>{const{currentBreakpoint:k}=_,D=(0,At.g)(B),{wrapperAnimation:q,backdropAnimation:ce}=void 0!==k?nr(_):{backdropAnimation:(0,mt.c)().fromTo("opacity","var(--backdrop-opacity)",0),wrapperAnimation:(0,mt.c)().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}])};return ce.addElement(D.querySelector("ion-backdrop")),q.addElement(D.querySelector(".modal-wrapper")),(0,mt.c)().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([ce,q])},Jl=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=(0,Y.lh)(this,"ionModalDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionModalWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionModalWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=(0,Y.lh)(this,"ionBreakpointDidChange",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.ionMount=(0,Y.lh)(this,"ionMount",7),this.lockController=xn(),this.triggerController=Jn(),this.coreDelegate=fn(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.onHandleClick=()=>{const{sheetTransition:_,handleBehavior:k}=this;"cycle"!==k||void 0!==_||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:_}=this;void 0===_&&this.dismiss(void 0,Pr)},this.onLifecycle=_=>{const k=this.usersElement,D=ru[_.type];if(k&&D){const q=new CustomEvent(D,{bubbles:!1,cancelable:!1,detail:_.detail});k.dispatchEvent(q)}},this.presented=!1,this.hasController=!1,this.overlayIndex=void 0,this.delegate=void 0,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.breakpoints=void 0,this.initialBreakpoint=void 0,this.backdropBreakpoint=0,this.handle=void 0,this.handleBehavior="none",this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.presentingElement=void 0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0,this.keepContentsMounted=!1,this.focusTrap=!0,this.canDismiss=!0}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}triggerChanged(){const{trigger:_,el:k,triggerController:D}=this;_&&D.addClickListener(k,_)}breakpointsChanged(_){void 0!==_&&(this.sortedBreakpoints=_.sort((k,D)=>k-D))}connectedCallback(){const{el:_}=this;Ei(_),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){const{breakpoints:_,initialBreakpoint:k,el:D,htmlAttributes:q}=this,ce=this.isSheetModal=void 0!==_&&void 0!==k,De=["aria-label","role"];this.inheritedAttributes=(0,At.d)(D,De),void 0!==q&&De.forEach(dt=>{q[dt]&&(this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{[dt]:q[dt]}),delete q[dt])}),ce&&(this.currentBreakpoint=this.initialBreakpoint),void 0!==_&&void 0!==k&&!_.includes(k)&&(0,kn.p)("Your breakpoints array must include the initialBreakpoint value."),ko(D)}componentDidLoad(){!0===this.isOpen&&(0,At.r)(()=>this.present()),this.breakpointsChanged(this.breakpoints),this.triggerChanged()}getDelegate(_=!1){if(this.workingDelegate&&!_)return{delegate:this.workingDelegate,inline:this.inline};const D=this.inline=null!==this.el.parentNode&&!this.hasController;return{inline:D,delegate:this.workingDelegate=D?this.delegate||this.coreDelegate:this.delegate}}checkCanDismiss(_,k){var D=this;return(0,We.A)(function*(){const{canDismiss:q}=D;return"function"==typeof q?q(_,k):q})()}present(){var _=this;return(0,We.A)(function*(){const k=yield _.lockController.lock();if(_.presented)return void k();const{presentingElement:D,el:q}=_;_.currentBreakpoint=_.initialBreakpoint;const{inline:ce,delegate:De}=_.getDelegate(!0);_.ionMount.emit(),_.usersElement=yield Ut(De,q,_.component,["ion-page"],_.componentProps,ce),(0,At.j)(q)?yield(0,rn.e)(_.usersElement):_.keepContentsMounted||(yield(0,rn.w)()),(0,Y.bN)(()=>_.el.classList.add("show-modal"));const dt=void 0!==D;dt&&"ios"===(0,ht.b)(_)&&(_.statusBarStyle=yield we.getStyle(),it()),yield Br(_,"modalEnter",jn,Kt,{presentingEl:D,currentBreakpoint:_.initialBreakpoint,backdropBreakpoint:_.backdropBreakpoint}),typeof window<"u"&&(_.keyboardOpenCallback=()=>{_.gesture&&(_.gesture.enable(!1),(0,At.r)(()=>{_.gesture&&_.gesture.enable(!0)}))},window.addEventListener(kt.KEYBOARD_DID_OPEN,_.keyboardOpenCallback)),_.isSheetModal?_.initSheetGesture():dt&&_.initSwipeToClose(),k()})()}initSwipeToClose(){var k,_=this;if("ios"!==(0,ht.b)(this))return;const{el:D}=this,q=this.leaveAnimation||ht.c.get("modalLeave",co),ce=this.animation=q(D,{presentingEl:this.presentingElement});if(!(0,Et.f)(D))return void(0,Et.p)(D);const dt=null!==(k=this.statusBarStyle)&&void 0!==k?k:ae.Default;this.gesture=((B,_,k,D)=>{const ce=B.offsetHeight;let De=!1,dt=!1,Vt=null,bn=null,xi=!0,to=0;const _s=(0,Ye.createGesture)({el:B,gestureName:"modalSwipeToClose",gesturePriority:39,direction:"y",threshold:10,canStart:Ur=>{const ws=Ur.event.target;return null===ws||!ws.closest||(Vt=(0,Et.a)(ws),Vt?(bn=(0,Et.i)(Vt)?(0,At.g)(Vt).querySelector(".inner-scroll"):Vt,!Vt.querySelector("ion-refresher")&&0===bn.scrollTop):null===ws.closest("ion-footer"))},onStart:Ur=>{const{deltaY:ws}=Ur;xi=!Vt||!(0,Et.i)(Vt)||Vt.scrollY,dt=void 0!==B.canDismiss&&!0!==B.canDismiss,ws>0&&Vt&&(0,Et.d)(Vt),_.progressStart(!0,De?1:0)},onMove:Ur=>{const{deltaY:ws}=Ur;ws>0&&Vt&&(0,Et.d)(Vt);const xs=Ur.deltaY/ce,Vs=xs>=0&&dt,fl=Vs?.2:.9999,Cc=Vs?dn(xs/fl):xs,Rl=(0,At.k)(1e-4,Cc,fl);_.progressStep(Rl),Rl>=.5&&to<.5?Xt(k):Rl<.5&&to>=.5&&it(),to=Rl},onEnd:Ur=>{const ws=Ur.velocityY,xs=Ur.deltaY/ce,Vs=xs>=0&&dt,fl=Vs?.2:.9999,Cc=Vs?dn(xs/fl):xs,Rl=(0,At.k)(1e-4,Cc,fl),Is=!Vs&&(Ur.deltaY+1e3*ws)/ce>=.5;let Lu=Is?-.001:.001;Is?(_.easing("cubic-bezier(0.32, 0.72, 0, 1)"),Lu+=ft([0,0],[.32,.72],[0,1],[1,1],Rl)[0]):(_.easing("cubic-bezier(1, 0, 0.68, 0.28)"),Lu+=ft([0,0],[1,0],[.68,.28],[1,1],Rl)[0]);const ed=Oi(Is?xs*ce:(1-Rl)*ce,ws);De=Is,_s.enable(!1),Vt&&(0,Et.r)(Vt,xi),_.onFinish(()=>{Is||_s.enable(!0)}).progressEnd(Is?1:0,Lu,ed),Vs&&Rl>fl/4?Cn(B,_):Is&&D()}});return _s})(D,ce,dt,()=>{this.gestureAnimationDismissing=!0,Xt(this.statusBarStyle),this.animation.onFinish((0,We.A)(function*(){yield _.dismiss(void 0,xr),_.gestureAnimationDismissing=!1}))}),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:_,initialBreakpoint:k,backdropBreakpoint:D}=this;if(!_||void 0===k)return;const q=this.enterAnimation||ht.c.get("modalEnter",jn),ce=this.animation=q(this.el,{presentingEl:this.presentingElement,currentBreakpoint:k,backdropBreakpoint:D});ce.progressStart(!0,1);const{gesture:De,moveSheetToBreakpoint:dt}=((B,_,k,D,q,ce,De=[],dt,Vt,bn)=>{const to={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:0!==q?[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-q,opacity:0},{offset:1,opacity:0}]:[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}]},Vi=B.querySelector("ion-content"),xo=k.clientHeight;let zo=D,yr=0,as=!1;const Ur=ce.childAnimations.find(Bu=>"wrapperAnimation"===Bu.id),ws=ce.childAnimations.find(Bu=>"backdropAnimation"===Bu.id),xs=De[De.length-1],Vs=De[0],fl=()=>{B.style.setProperty("pointer-events","auto"),_.style.setProperty("pointer-events","auto"),B.classList.remove(Ns)},Cc=()=>{B.style.setProperty("pointer-events","none"),_.style.setProperty("pointer-events","none"),B.classList.add(Ns)};Ur&&ws&&(Ur.keyframes([...to.WRAPPER_KEYFRAMES]),ws.keyframes([...to.BACKDROP_KEYFRAMES]),ce.progressStart(!0,1-zo),zo>q?fl():Cc()),Vi&&zo!==xs&&(Vi.scrollY=!1);const ed=Bu=>{const{breakpoint:td,canDismiss:lh,breakpointOffset:Mc,animated:Nu}=Bu,kc=lh&&0===td,Fu=kc?zo:td,f2=0!==Fu;return zo=0,Ur&&ws&&(Ur.keyframes([{offset:0,transform:`translateY(${100*Mc}%)`},{offset:1,transform:`translateY(${100*(1-Fu)}%)`}]),ws.keyframes([{offset:0,opacity:`calc(var(--backdrop-opacity) * ${Ue(1-Mc,q)})`},{offset:1,opacity:`calc(var(--backdrop-opacity) * ${Ue(Fu,q)})`}]),ce.progressStep(0)),Ud.enable(!1),kc?Cn(B,ce):f2||Vt(),Vi&&Fu===De[De.length-1]&&(Vi.scrollY=!0),new Promise(Cl=>{ce.onFinish(()=>{f2?Ur&&ws?(0,At.r)(()=>{Ur.keyframes([...to.WRAPPER_KEYFRAMES]),ws.keyframes([...to.BACKDROP_KEYFRAMES]),ce.progressStart(!0,1-Fu),zo=Fu,bn(zo),zo>q?fl():Cc(),Ud.enable(!0),Cl()}):(Ud.enable(!0),Cl()):Cl()},{oneTimeCallback:!0}).progressEnd(1,0,Nu?500:0)})},Ud=(0,Ye.createGesture)({el:k,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:Bu=>{const td=(0,Et.a)(Bu.event.target);if(zo=dt(),1===zo&&td){const lh=(0,Et.i)(td)?(0,At.g)(td).querySelector(".inner-scroll"):td;return!td.querySelector("ion-refresher")&&0===lh.scrollTop}return!0},onStart:Bu=>{as=void 0!==B.canDismiss&&!0!==B.canDismiss&&0===Vs,Bu.deltaY>0&&Vi&&(Vi.scrollY=!1),(0,At.r)(()=>{B.focus()}),ce.progressStart(!0,1-zo)},onMove:Bu=>{Bu.deltaY>0&&Vi&&(Vi.scrollY=!1);const lh=De.length>1?1-De[1]:void 0,Mc=1-zo+Bu.deltaY/xo,Nu=void 0!==lh&&Mc>=lh&&as,kc=Nu?.95:.9999,Fu=Nu&&void 0!==lh?lh+dn((Mc-lh)/(kc-lh)):Mc;yr=(0,At.k)(1e-4,Fu,kc),ce.progressStep(yr)},onEnd:Bu=>{const Mc=zo-(Bu.deltaY+350*Bu.velocityY)/xo,Nu=De.reduce((kc,Fu)=>Math.abs(Fu-Mc)<Math.abs(kc-Mc)?Fu:kc);ed({breakpoint:Nu,breakpointOffset:yr,canDismiss:as,animated:!0})}});return{gesture:Ud,moveSheetToBreakpoint:ed}})(this.el,this.backdropEl,_,k,D,ce,this.sortedBreakpoints,()=>{var Vt;return null!==(Vt=this.currentBreakpoint)&&void 0!==Vt?Vt:0},()=>this.sheetOnDismiss(),Vt=>{this.currentBreakpoint!==Vt&&(this.currentBreakpoint=Vt,this.ionBreakpointDidChange.emit({breakpoint:Vt}))});this.gesture=De,this.moveSheetToBreakpoint=dt,this.gesture.enable(!0)}sheetOnDismiss(){var _=this;this.gestureAnimationDismissing=!0,this.animation.onFinish((0,We.A)(function*(){_.currentBreakpoint=0,_.ionBreakpointDidChange.emit({breakpoint:_.currentBreakpoint}),yield _.dismiss(void 0,xr),_.gestureAnimationDismissing=!1}))}dismiss(_,k){var D=this;return(0,We.A)(function*(){var q;if(D.gestureAnimationDismissing&&k!==xr)return!1;const ce=yield D.lockController.lock();if("handler"!==k&&!(yield D.checkCanDismiss(_,k)))return ce(),!1;const{presentingElement:De}=D;void 0!==De&&"ios"===(0,ht.b)(D)&&Xt(D.statusBarStyle),typeof window<"u"&&D.keyboardOpenCallback&&(window.removeEventListener(kt.KEYBOARD_DID_OPEN,D.keyboardOpenCallback),D.keyboardOpenCallback=void 0);const Vt=yield ro(D,_,k,"modalLeave",co,Pi,{presentingEl:De,currentBreakpoint:null!==(q=D.currentBreakpoint)&&void 0!==q?q:D.initialBreakpoint,backdropBreakpoint:D.backdropBreakpoint});if(Vt){const{delegate:bn}=D.getDelegate();yield yt(bn,D.usersElement),(0,Y.bN)(()=>D.el.classList.remove("show-modal")),D.animation&&D.animation.destroy(),D.gesture&&D.gesture.destroy()}return D.currentBreakpoint=void 0,D.animation=void 0,ce(),Vt})()}onDidDismiss(){return zr(this.el,"ionModalDidDismiss")}onWillDismiss(){return zr(this.el,"ionModalWillDismiss")}setCurrentBreakpoint(_){var k=this;return(0,We.A)(function*(){if(!k.isSheetModal)return void(0,kn.p)("setCurrentBreakpoint is only supported on sheet modals.");if(!k.breakpoints.includes(_))return void(0,kn.p)(`Attempted to set invalid breakpoint value ${_}. Please double check that the breakpoint value is part of your defined breakpoints.`);const{currentBreakpoint:D,moveSheetToBreakpoint:q,canDismiss:ce,breakpoints:De,animated:dt}=k;D!==_&&q&&(k.sheetTransition=q({breakpoint:_,breakpointOffset:1-D,canDismiss:void 0!==ce&&!0!==ce&&0===De[0],animated:dt}),yield k.sheetTransition,k.sheetTransition=void 0)})()}getCurrentBreakpoint(){var _=this;return(0,We.A)(function*(){return _.currentBreakpoint})()}moveToNextBreakpoint(){var _=this;return(0,We.A)(function*(){const{breakpoints:k,currentBreakpoint:D}=_;if(!k||null==D)return!1;const q=k.filter(Vt=>0!==Vt),De=(q.indexOf(D)+1)%q.length,dt=q[De];return yield _.setCurrentBreakpoint(dt),!0})()}render(){const{handle:_,isSheetModal:k,presentingElement:D,htmlAttributes:q,handleBehavior:ce,inheritedAttributes:De,focusTrap:dt}=this,Vt=!1!==_&&k,bn=(0,ht.b)(this),fi=void 0!==D&&"ios"===bn,xi="cycle"===ce;return(0,Y.h)(Y.xr,Object.assign({key:"fe6fd17cf857127f89d652b9aa3e9473d28c55db","no-router":!0,tabindex:"-1"},q,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign({[bn]:!0,"modal-default":!fi&&!k,"modal-card":fi,"modal-sheet":k,"overlay-hidden":!0,[Ns]:!1===dt},ni(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),(0,Y.h)("ion-backdrop",{key:"0f3a31363c2717e5483bc0412c25804897d4aff8",ref:to=>this.backdropEl=to,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),"ios"===bn&&(0,Y.h)("div",{key:"0e5ed59162ff08fe0a9f757e06bdacc75f65c0ed",class:"modal-shadow"}),(0,Y.h)("div",Object.assign({key:"35cdbe2238765e5f346ad7be64f7eefa8c78f0c0",role:"dialog"},De,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:to=>this.wrapperEl=to}),Vt&&(0,Y.h)("button",{key:"7a4031eaebf9a098f4c4220a5fe9d1c25cc0ec92",class:"modal-handle",tabIndex:xi?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:xi?this.onHandleClick:void 0,part:"handle"}),(0,Y.h)("slot",{key:"534adc8e5bd850199fe2e9e16f0e7c19217d8486"})))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}',md:':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}'}}},[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],focusTrap:[4,"focus-trap"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]},void 0,{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),ru={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};var B;const bi=function Oa(){typeof customElements>"u"||["ion-modal","ion-backdrop"].forEach(_=>{switch(_){case"ion-modal":customElements.get(_)||customElements.define(_,Jl);break;case"ion-backdrop":customElements.get(_)||ue()}})},Vr=(B,_,k)=>{const D=_.getBoundingClientRect(),q=D.height;let ce=D.width;return"cover"===B&&k&&(ce=k.getBoundingClientRect().width),{contentWidth:ce,contentHeight:q}},Es=(B,_,k)=>{let D=[];switch(_){case"hover":let q;D=[{eventName:"mouseenter",callback:(ce=(0,We.A)(function*(De){De.stopPropagation(),q&&clearTimeout(q),q=setTimeout(()=>{(0,At.r)(()=>{k.presentFromTrigger(De),q=void 0})},100)}),function(dt){return ce.apply(this,arguments)})},{eventName:"mouseleave",callback:ce=>{q&&clearTimeout(q);const De=ce.relatedTarget;De&&De.closest("ion-popover")!==k&&k.dismiss(void 0,void 0,!1)}},{eventName:"click",callback:ce=>ce.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:ce=>k.presentFromTrigger(ce,!0)}];break;case"context-menu":D=[{eventName:"contextmenu",callback:ce=>{ce.preventDefault(),k.presentFromTrigger(ce)}},{eventName:"click",callback:ce=>ce.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:ce=>k.presentFromTrigger(ce,!0)}];break;default:D=[{eventName:"click",callback:ce=>k.presentFromTrigger(ce)},{eventName:"ionPopoverActivateTrigger",callback:ce=>k.presentFromTrigger(ce,!0)}]}var ce;return D.forEach(({eventName:q,callback:ce})=>B.addEventListener(q,ce)),B.setAttribute("data-ion-popover-trigger","true"),()=>{D.forEach(({eventName:q,callback:ce})=>B.removeEventListener(q,ce)),B.removeAttribute("data-ion-popover-trigger")}},wa=(B,_)=>_&&"ION-ITEM"===_.tagName?B.findIndex(k=>k===_):-1,gl=B=>{const k=(0,At.g)(B).querySelector("button");k&&(0,At.r)(()=>k.focus())},su=B=>{const _=function(){var k=(0,We.A)(function*(D){var q;const ce=document.activeElement;let De=[];const dt=null===(q=D.target)||void 0===q?void 0:q.tagName;if("ION-POPOVER"===dt||"ION-ITEM"===dt){try{De=Array.from(B.querySelectorAll("ion-item:not(ion-popover ion-popover *):not([disabled])"))}catch{}switch(D.key){case"ArrowLeft":(yield B.getParentPopover())&&B.dismiss(void 0,void 0,!1);break;case"ArrowDown":D.preventDefault();const bn=((B,_)=>B[wa(B,_)+1])(De,ce);void 0!==bn&&gl(bn);break;case"ArrowUp":D.preventDefault();const fi=((B,_)=>B[wa(B,_)-1])(De,ce);void 0!==fi&&gl(fi);break;case"Home":D.preventDefault();const xi=De[0];void 0!==xi&&gl(xi);break;case"End":D.preventDefault();const to=De[De.length-1];void 0!==to&&gl(to);break;case"ArrowRight":case" ":case"Enter":if(ce&&(B=>B.hasAttribute("data-ion-popover-trigger"))(ce)){const Vi=new CustomEvent("ionPopoverActivateTrigger");ce.dispatchEvent(Vi)}}}});return function(q){return k.apply(this,arguments)}}();return B.addEventListener("keydown",_),()=>B.removeEventListener("keydown",_)},au=(B,_,k,D,q,ce,De,dt,Vt,bn,fi)=>{var xi;let to={top:0,left:0,width:0,height:0};if("event"===ce){if(!fi)return Vt;to={top:fi.clientY,left:fi.clientX,width:1,height:1}}else{const fl=bn||(null===(xi=null==fi?void 0:fi.detail)||void 0===xi?void 0:xi.ionShadowTarget)||(null==fi?void 0:fi.target);if(!fl)return Vt;const Cc=fl.getBoundingClientRect();to={top:Cc.top,left:Cc.left,width:Cc.width,height:Cc.height}}const Vi=Vc(De,to,_,k,D,q,B),xo=$u(dt,De,to,_,k),zo=Vi.top+xo.top,yr=Vi.left+xo.left,{arrowTop:as,arrowLeft:_s}=Ra(De,D,q,zo,yr,_,k,B),{originX:Ur,originY:ws}=_a(De,dt,B);return{top:zo,left:yr,referenceCoordinates:to,arrowTop:as,arrowLeft:_s,originX:Ur,originY:ws}},_a=(B,_,k)=>{switch(B){case"top":return{originX:Eu(_),originY:"bottom"};case"bottom":return{originX:Eu(_),originY:"top"};case"left":return{originX:"right",originY:Ja(_)};case"right":return{originX:"left",originY:Ja(_)};case"start":return{originX:k?"left":"right",originY:Ja(_)};case"end":return{originX:k?"right":"left",originY:Ja(_)}}},Eu=B=>{switch(B){case"start":return"left";case"center":return"center";case"end":return"right"}},Ja=B=>{switch(B){case"start":return"top";case"center":return"center";case"end":return"bottom"}},Ra=(B,_,k,D,q,ce,De,dt)=>{const Vt={arrowTop:D+De/2-_/2,arrowLeft:q+ce-_/2},bn={arrowTop:D+De/2-_/2,arrowLeft:q-1.5*_};switch(B){case"top":return{arrowTop:D+De,arrowLeft:q+ce/2-_/2};case"bottom":return{arrowTop:D-k,arrowLeft:q+ce/2-_/2};case"left":return Vt;case"right":return bn;case"start":return dt?bn:Vt;case"end":return dt?Vt:bn;default:return{arrowTop:0,arrowLeft:0}}},Vc=(B,_,k,D,q,ce,De)=>{const dt={top:_.top,left:_.left-k-q},Vt={top:_.top,left:_.left+_.width+q};switch(B){case"top":return{top:_.top-D-ce,left:_.left};case"right":return Vt;case"bottom":return{top:_.top+_.height+ce,left:_.left};case"left":return dt;case"start":return De?Vt:dt;case"end":return De?dt:Vt}},$u=(B,_,k,D,q)=>{switch(B){case"center":return Ol(_,k,D,q);case"end":return ju(_,k,D,q);default:return{top:0,left:0}}},ju=(B,_,k,D)=>{switch(B){case"start":case"end":case"left":case"right":return{top:-(D-_.height),left:0};default:return{top:0,left:-(k-_.width)}}},Ol=(B,_,k,D)=>{switch(B){case"start":case"end":case"left":case"right":return{top:-(D/2-_.height/2),left:0};default:return{top:0,left:-(k/2-_.width/2)}}},Ms=(B,_,k,D,q,ce,De,dt,Vt,bn,fi,xi,to=0,Vi=0,xo=0)=>{let zo=to;const yr=Vi;let Ur,as=k,_s=_,ws=bn,xs=fi,Vs=!1,fl=!1;const Cc=xi?xi.top+xi.height:ce/2-dt/2,Rl=xi?xi.height:0;let Ql=!1;return as<D+Vt?(as=D,Vs=!0,ws="left"):De+D+as+Vt>q&&(fl=!0,as=q-De-D,ws="right"),Cc+Rl+dt>ce&&("top"===B||"bottom"===B)&&(Cc-dt>0?(_s=Math.max(12,Cc-dt-Rl-(xo-1)),zo=_s+dt,xs="bottom",Ql=!0):Ur=D),{top:_s,left:as,bottom:Ur,originX:ws,originY:xs,checkSafeAreaLeft:Vs,checkSafeAreaRight:fl,arrowTop:zo,arrowLeft:yr,addPopoverBottomClass:Ql}},cu=(B,_)=>{var k;const{event:D,size:q,trigger:ce,reference:De,side:dt,align:Vt}=_,bn=B.ownerDocument,fi="rtl"===bn.dir,xi=bn.defaultView.innerWidth,to=bn.defaultView.innerHeight,Vi=(0,At.g)(B),xo=Vi.querySelector(".popover-content"),zo=Vi.querySelector(".popover-arrow"),yr=ce||(null===(k=null==D?void 0:D.detail)||void 0===k?void 0:k.ionShadowTarget)||(null==D?void 0:D.target),{contentWidth:as,contentHeight:_s}=Vr(q,xo,yr),{arrowWidth:Ur,arrowHeight:ws}=(B=>{if(!B)return{arrowWidth:0,arrowHeight:0};const{width:_,height:k}=B.getBoundingClientRect();return{arrowWidth:_,arrowHeight:k}})(zo),Vs=au(fi,as,_s,Ur,ws,De,dt,Vt,{top:to/2-_s/2,left:xi/2-as/2,originX:fi?"right":"left",originY:"top"},ce,D),fl="cover"===q?0:5,Cc="cover"===q?0:25,{originX:Rl,originY:Ql,top:Is,left:Lu,bottom:ed,checkSafeAreaLeft:Ud,checkSafeAreaRight:Bu,arrowTop:td,arrowLeft:lh,addPopoverBottomClass:Mc}=Ms(dt,Vs.top,Vs.left,fl,xi,to,as,_s,Cc,Vs.originX,Vs.originY,Vs.referenceCoordinates,Vs.arrowTop,Vs.arrowLeft,ws),Nu=(0,mt.c)(),kc=(0,mt.c)(),Fu=(0,mt.c)();return kc.addElement(Vi.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),Fu.addElement(Vi.querySelector(".popover-arrow")).addElement(Vi.querySelector(".popover-content")).fromTo("opacity",.01,1),Nu.easing("ease").duration(100).beforeAddWrite(()=>{"cover"===q&&B.style.setProperty("--width",`${as}px`),Mc&&B.classList.add("popover-bottom"),void 0!==ed&&xo.style.setProperty("bottom",`${ed}px`);let gp=`${Lu}px`;Ud&&(gp=`${Lu}px + var(--ion-safe-area-left, 0)`),Bu&&(gp=`${Lu}px - var(--ion-safe-area-right, 0)`),xo.style.setProperty("top",`calc(${Is}px + var(--offset-y, 0))`),xo.style.setProperty("left",`calc(${gp} + var(--offset-x, 0))`),xo.style.setProperty("transform-origin",`${Ql} ${Rl}`),null!==zo&&(((B,_=!1,k,D)=>!(!k&&!D||"top"!==B&&"bottom"!==B&&_))(dt,Vs.top!==Is||Vs.left!==Lu,D,ce)?(zo.style.setProperty("top",`calc(${td}px + var(--offset-y, 0))`),zo.style.setProperty("left",`calc(${lh}px + var(--offset-x, 0))`)):zo.style.setProperty("display","none"))}).addAnimation([kc,Fu])},lc=B=>{const _=(0,At.g)(B),k=_.querySelector(".popover-content"),D=_.querySelector(".popover-arrow"),q=(0,mt.c)(),ce=(0,mt.c)(),De=(0,mt.c)();return ce.addElement(_.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),De.addElement(_.querySelector(".popover-arrow")).addElement(_.querySelector(".popover-content")).fromTo("opacity",.99,0),q.easing("ease").afterAddWrite(()=>{B.style.removeProperty("--width"),B.classList.remove("popover-bottom"),k.style.removeProperty("top"),k.style.removeProperty("left"),k.style.removeProperty("bottom"),k.style.removeProperty("transform-origin"),D&&(D.style.removeProperty("top"),D.style.removeProperty("left"),D.style.removeProperty("display"))}).duration(300).addAnimation([ce,De])},gc=(B,_)=>{var k;const{event:D,size:q,trigger:ce,reference:De,side:dt,align:Vt}=_,bn=B.ownerDocument,fi="rtl"===bn.dir,xi=bn.defaultView.innerWidth,to=bn.defaultView.innerHeight,Vi=(0,At.g)(B),xo=Vi.querySelector(".popover-content"),zo=ce||(null===(k=null==D?void 0:D.detail)||void 0===k?void 0:k.ionShadowTarget)||(null==D?void 0:D.target),{contentWidth:yr,contentHeight:as}=Vr(q,xo,zo),Ur=au(fi,yr,as,0,0,De,dt,Vt,{top:to/2-as/2,left:xi/2-yr/2,originX:fi?"right":"left",originY:"top"},ce,D),ws="cover"===q?0:12,{originX:xs,originY:Vs,top:fl,left:Cc,bottom:Rl}=Ms(dt,Ur.top,Ur.left,ws,xi,to,yr,as,0,Ur.originX,Ur.originY,Ur.referenceCoordinates),Ql=(0,mt.c)(),Is=(0,mt.c)(),Lu=(0,mt.c)(),ed=(0,mt.c)(),Ud=(0,mt.c)();return Is.addElement(Vi.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),Lu.addElement(Vi.querySelector(".popover-wrapper")).duration(150).fromTo("opacity",.01,1),ed.addElement(xo).beforeStyles({top:`calc(${fl}px + var(--offset-y, 0px))`,left:`calc(${Cc}px + var(--offset-x, 0px))`,"transform-origin":`${Vs} ${xs}`}).beforeAddWrite(()=>{void 0!==Rl&&xo.style.setProperty("bottom",`${Rl}px`)}).fromTo("transform","scale(0.8)","scale(1)"),Ud.addElement(Vi.querySelector(".popover-viewport")).fromTo("opacity",.01,1),Ql.easing("cubic-bezier(0.36,0.66,0.04,1)").duration(300).beforeAddWrite(()=>{"cover"===q&&B.style.setProperty("--width",`${yr}px`),"bottom"===Vs&&B.classList.add("popover-bottom")}).addAnimation([Is,Lu,ed,Ud])},Gl=B=>{const _=(0,At.g)(B),k=_.querySelector(".popover-content"),D=(0,mt.c)(),q=(0,mt.c)(),ce=(0,mt.c)();return q.addElement(_.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),ce.addElement(_.querySelector(".popover-wrapper")).fromTo("opacity",.99,0),D.easing("ease").afterAddWrite(()=>{B.style.removeProperty("--width"),B.classList.remove("popover-bottom"),k.style.removeProperty("top"),k.style.removeProperty("left"),k.style.removeProperty("bottom"),k.style.removeProperty("transform-origin")}).duration(150).addAnimation([q,ce])},Sc=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=(0,Y.lh)(this,"ionPopoverDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionPopoverWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionPopoverWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionPopoverDidDismiss",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.ionMount=(0,Y.lh)(this,"ionMount",7),this.parentPopover=null,this.coreDelegate=fn(),this.lockController=xn(),this.inline=!1,this.focusDescendantOnPresent=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Pr)},this.onLifecycle=_=>{const k=this.usersElement,D=vl[_.type];if(k&&D){const q=new CustomEvent(D,{bubbles:!1,cancelable:!1,detail:_.detail});k.dispatchEvent(q)}},this.configureTriggerInteraction=()=>{const{trigger:_,triggerAction:k,el:D,destroyTriggerInteraction:q}=this;if(q&&q(),void 0===_)return;const ce=this.triggerEl=void 0!==_?document.getElementById(_):null;ce?this.destroyTriggerInteraction=Es(ce,k,D):(0,kn.p)(`A trigger element with the ID "${_}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on ion-popover.`,this.el)},this.configureKeyboardInteraction=()=>{const{destroyKeyboardInteraction:_,el:k}=this;_&&_(),this.destroyKeyboardInteraction=su(k)},this.configureDismissInteraction=()=>{const{destroyDismissInteraction:_,parentPopover:k,triggerAction:D,triggerEl:q,el:ce}=this;!k||!q||(_&&_(),this.destroyDismissInteraction=((B,_,k,D)=>{let q=[];const De=(0,At.g)(D).querySelector(".popover-content");return q="hover"===_?[{eventName:"mouseenter",callback:dt=>{document.elementFromPoint(dt.clientX,dt.clientY)!==B&&k.dismiss(void 0,void 0,!1)}}]:[{eventName:"click",callback:dt=>{dt.target.closest("[data-ion-popover-trigger]")!==B?k.dismiss(void 0,void 0,!1):dt.stopPropagation()}}],q.forEach(({eventName:dt,callback:Vt})=>De.addEventListener(dt,Vt)),()=>{q.forEach(({eventName:dt,callback:Vt})=>De.removeEventListener(dt,Vt))}})(q,D,ce,k))},this.presented=!1,this.hasController=!1,this.delegate=void 0,this.overlayIndex=void 0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.component=void 0,this.componentProps=void 0,this.keyboardClose=!0,this.cssClass=void 0,this.backdropDismiss=!0,this.event=void 0,this.showBackdrop=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.triggerAction="click",this.trigger=void 0,this.size="auto",this.dismissOnSelect=!1,this.reference="trigger",this.side="bottom",this.alignment=void 0,this.arrow=!0,this.isOpen=!1,this.keyboardEvents=!1,this.focusTrap=!0,this.keepContentsMounted=!1}onTriggerChange(){this.configureTriggerInteraction()}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}connectedCallback(){const{configureTriggerInteraction:_,el:k}=this;Ei(k),_()}disconnectedCallback(){const{destroyTriggerInteraction:_}=this;_&&_()}componentWillLoad(){const{el:_}=this,k=ko(_);this.parentPopover=_.closest(`ion-popover:not(#${k})`),void 0===this.alignment&&(this.alignment="ios"===(0,ht.b)(this)?"center":"start")}componentDidLoad(){const{parentPopover:_,isOpen:k}=this;!0===k&&(0,At.r)(()=>this.present()),_&&(0,At.a)(_,"ionPopoverWillDismiss",()=>{this.dismiss(void 0,void 0,!1)}),this.configureTriggerInteraction()}presentFromTrigger(_,k=!1){var D=this;return(0,We.A)(function*(){D.focusDescendantOnPresent=k,yield D.present(_),D.focusDescendantOnPresent=!1})()}getDelegate(_=!1){if(this.workingDelegate&&!_)return{delegate:this.workingDelegate,inline:this.inline};const D=this.inline=null!==this.el.parentNode&&!this.hasController;return{inline:D,delegate:this.workingDelegate=D?this.delegate||this.coreDelegate:this.delegate}}present(_){var k=this;return(0,We.A)(function*(){const D=yield k.lockController.lock();if(k.presented)return void D();const{el:q}=k,{inline:ce,delegate:De}=k.getDelegate(!0);k.ionMount.emit(),k.usersElement=yield Ut(De,q,k.component,["popover-viewport"],k.componentProps,ce),k.keyboardEvents||k.configureKeyboardInteraction(),k.configureDismissInteraction(),(0,At.j)(q)?yield(0,rn.e)(k.usersElement):k.keepContentsMounted||(yield(0,rn.w)()),yield Br(k,"popoverEnter",cu,gc,{event:_||k.event,size:k.size,trigger:k.triggerEl,reference:k.reference,side:k.side,align:k.alignment}),k.focusDescendantOnPresent&&Vn(q),D()})()}dismiss(_,k,D=!0){var q=this;return(0,We.A)(function*(){const ce=yield q.lockController.lock(),{destroyKeyboardInteraction:De,destroyDismissInteraction:dt}=q;D&&q.parentPopover&&q.parentPopover.dismiss(_,k,D);const Vt=yield ro(q,_,k,"popoverLeave",lc,Gl,q.event);if(Vt){De&&(De(),q.destroyKeyboardInteraction=void 0),dt&&(dt(),q.destroyDismissInteraction=void 0);const{delegate:bn}=q.getDelegate();yield yt(bn,q.usersElement)}return ce(),Vt})()}getParentPopover(){var _=this;return(0,We.A)(function*(){return _.parentPopover})()}onDidDismiss(){return zr(this.el,"ionPopoverDidDismiss")}onWillDismiss(){return zr(this.el,"ionPopoverWillDismiss")}render(){const _=(0,ht.b)(this),{onLifecycle:k,parentPopover:D,dismissOnSelect:q,side:ce,arrow:De,htmlAttributes:dt,focusTrap:Vt}=this,bn=(0,ht.a)("desktop"),fi=De&&!D;return(0,Y.h)(Y.xr,Object.assign({key:"17e5e8b3e7ba5e251665fb9d0ade10c781f82f0e","aria-modal":"true","no-router":!0,tabindex:"-1"},dt,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign(Object.assign({},ni(this.cssClass)),{[_]:!0,"popover-translucent":this.translucent,"overlay-hidden":!0,"popover-desktop":bn,[`popover-side-${ce}`]:!0,[Ns]:!1===Vt,"popover-nested":!!D}),onIonPopoverDidPresent:k,onIonPopoverWillPresent:k,onIonPopoverWillDismiss:k,onIonPopoverDidDismiss:k,onIonBackdropTap:this.onBackdropTap}),!D&&(0,Y.h)("ion-backdrop",{key:"c12fb94b375d7e88a0c5d715440c0f66ad7ee817",tappable:this.backdropDismiss,visible:this.showBackdrop,part:"backdrop"}),(0,Y.h)("div",{key:"478b388cc9a5a382003a2863e968e77a174914ab",class:"popover-wrapper ion-overlay-wrapper",onClick:q?()=>this.dismiss():void 0},fi&&(0,Y.h)("div",{key:"f1c63a0079f197a8d4577e7c00a654871fb9d816",class:"popover-arrow",part:"arrow"}),(0,Y.h)("div",{key:"08b62a321c09ad4b0f90460468ecbc1d56320bf1",class:"popover-content",part:"content"},(0,Y.h)("slot",{key:"55645ff597f64d434219caa28015cf2a4ceb0ee5"}))))}get el(){return this}static get watchers(){return{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}}static get style(){return{ios:':host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{z-index:10}.popover-content{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:auto;z-index:10}::slotted(.popover-viewport){--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-start:dir(rtl)){--offset-x:-5px}}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-end:dir(rtl)){--offset-x:5px}}:host{--width:200px;--max-height:90%;--box-shadow:none;--backdrop-opacity:var(--ion-backdrop-opacity, 0.08)}:host(.popover-desktop){--box-shadow:0px 4px 16px 0px rgba(0, 0, 0, 0.12)}.popover-content{border-radius:10px}:host(.popover-desktop) .popover-content{border:0.5px solid var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.popover-arrow{display:block;position:absolute;width:20px;height:10px;overflow:hidden;z-index:11}.popover-arrow::after{top:3px;border-radius:3px;position:absolute;width:14px;height:14px;-webkit-transform:rotate(45deg);transform:rotate(45deg);background:var(--background);content:"";z-index:10}.popover-arrow::after{inset-inline-start:3px}:host(.popover-bottom) .popover-arrow{top:auto;bottom:-10px}:host(.popover-bottom) .popover-arrow::after{top:-6px}:host(.popover-side-left) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host(.popover-side-right) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host(.popover-side-top) .popover-arrow{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host(.popover-side-start) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host-context([dir=rtl]):host(.popover-side-start) .popover-arrow,:host-context([dir=rtl]).popover-side-start .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}@supports selector(:dir(rtl)){:host(.popover-side-start:dir(rtl)) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}}:host(.popover-side-end) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host-context([dir=rtl]):host(.popover-side-end) .popover-arrow,:host-context([dir=rtl]).popover-side-end .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}@supports selector(:dir(rtl)){:host(.popover-side-end:dir(rtl)) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}.popover-arrow,.popover-content{opacity:0}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.popover-translucent) .popover-content,:host(.popover-translucent) .popover-arrow::after{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}',md:":host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{z-index:10}.popover-content{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:auto;z-index:10}::slotted(.popover-viewport){--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-start:dir(rtl)){--offset-x:-5px}}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-end:dir(rtl)){--offset-x:5px}}:host{--width:250px;--max-height:90%;--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}.popover-content{border-radius:4px;-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]) .popover-content{-webkit-transform-origin:right top;transform-origin:right top}[dir=rtl] .popover-content{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.popover-content:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.popover-viewport{-webkit-transition-delay:100ms;transition-delay:100ms}.popover-wrapper{opacity:0}"}}},[33,"ion-popover",{hasController:[4,"has-controller"],delegate:[16],overlayIndex:[2,"overlay-index"],enterAnimation:[16],leaveAnimation:[16],component:[1],componentProps:[16],keyboardClose:[4,"keyboard-close"],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],event:[8],showBackdrop:[4,"show-backdrop"],translucent:[4],animated:[4],htmlAttributes:[16],triggerAction:[1,"trigger-action"],trigger:[1],size:[1],dismissOnSelect:[4,"dismiss-on-select"],reference:[1],side:[1],alignment:[1025],arrow:[4],isOpen:[4,"is-open"],keyboardEvents:[4,"keyboard-events"],focusTrap:[4,"focus-trap"],keepContentsMounted:[4,"keep-contents-mounted"],presented:[32],presentFromTrigger:[64],present:[64],dismiss:[64],getParentPopover:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}]),vl={ionPopoverDidPresent:"ionViewDidEnter",ionPopoverWillPresent:"ionViewWillEnter",ionPopoverWillDismiss:"ionViewWillLeave",ionPopoverDidDismiss:"ionViewDidLeave"};function rs(){typeof customElements>"u"||["ion-popover","ion-backdrop"].forEach(_=>{switch(_){case"ion-popover":customElements.get(_)||customElements.define(_,Sc);break;case"ion-backdrop":customElements.get(_)||ue()}})}const nt=rs;var Dt=_e(3726);const Hn=B=>{try{if(B instanceof so)return B.value;if(!li()||"string"!=typeof B||""===B)return B;if(B.includes("onload="))return"";const _=document.createDocumentFragment(),k=document.createElement("div");_.appendChild(k),k.innerHTML=B,Eo.forEach(De=>{const dt=_.querySelectorAll(De);for(let Vt=dt.length-1;Vt>=0;Vt--){const bn=dt[Vt];bn.parentNode?bn.parentNode.removeChild(bn):_.removeChild(bn);const fi=On(bn);for(let xi=0;xi<fi.length;xi++)Yn(fi[xi])}});const D=On(_);for(let De=0;De<D.length;De++)Yn(D[De]);const q=document.createElement("div");q.appendChild(_);const ce=q.querySelector("div");return null!==ce?ce.innerHTML:q.innerHTML}catch(_){return console.error(_),""}},Yn=B=>{if(B.nodeType&&1!==B.nodeType)return;if(typeof NamedNodeMap<"u"&&!(B.attributes instanceof NamedNodeMap))return void B.remove();for(let k=B.attributes.length-1;k>=0;k--){const D=B.attributes.item(k),q=D.name;if(!bo.includes(q.toLowerCase())){B.removeAttribute(q);continue}const ce=D.value,De=B[q];(null!=ce&&ce.toLowerCase().includes("javascript:")||null!=De&&De.toLowerCase().includes("javascript:"))&&B.removeAttribute(q)}const _=On(B);for(let k=0;k<_.length;k++)Yn(_[k])},On=B=>null!=B.children?B.children:B.childNodes,li=()=>{var B;const _=window,k=null===(B=null==_?void 0:_.Ionic)||void 0===B?void 0:B.config;return!k||(k.get?k.get("sanitizerEnabled",!0):!0===k.sanitizerEnabled||void 0===k.sanitizerEnabled)},bo=["class","id","href","src","name","slot"],Eo=["script","style","iframe","meta","link","object","embed"];class so{constructor(_){this.value=_}}var Ir=function(B){return B.Heavy="HEAVY",B.Medium="MEDIUM",B.Light="LIGHT",B}(Ir||{});const Cs={getEngine(){const B=(0,Te.g)();if(null!=B&&B.isPluginAvailable("Haptics"))return B.Plugins.Haptics},available(){if(!this.getEngine())return!1;const _=(0,Te.g)();return"web"!==(null==_?void 0:_.getPlatform())||typeof navigator<"u"&&void 0!==navigator.vibrate},impact(B){const _=this.getEngine();_&&_.impact({style:B.style})},notification(B){const _=this.getEngine();_&&_.notification({type:B.type})},selection(){this.impact({style:Ir.Light})},selectionStart(){const B=this.getEngine();B&&B.selectionStart()},selectionChanged(){const B=this.getEngine();B&&B.selectionChanged()},selectionEnd(){const B=this.getEngine();B&&B.selectionEnd()}},ea=()=>Cs.available(),Nr=()=>{ea()&&Cs.selectionStart()},Yr=()=>{ea()&&Cs.selectionChanged()},fa=(B,_)=>{let k,D;const q=(dt,Vt,bn)=>{if(typeof document>"u")return;const fi=document.elementFromPoint(dt,Vt);fi&&_(fi)&&!fi.disabled?fi!==k&&(De(),ce(fi,bn)):De()},ce=(dt,Vt)=>{k=dt,D||(D=k);const bn=k;(0,Y.bN)(()=>bn.classList.add("ion-activated")),Vt()},De=(dt=!1)=>{if(!k)return;const Vt=k;(0,Y.bN)(()=>Vt.classList.remove("ion-activated")),dt&&D!==k&&k.click(),k=void 0};return(0,Ye.createGesture)({el:B,gestureName:"buttonActiveDrag",threshold:0,onStart:dt=>q(dt.currentX,dt.currentY,Nr),onMove:dt=>q(dt.currentX,dt.currentY,Yr),onEnd:()=>{De(!0),ea()&&Cs.selectionEnd(),D=void 0}})},Zs=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}addRipple(_,k){var D=this;return(0,We.A)(function*(){return new Promise(q=>{(0,Y.gv)(()=>{const ce=D.el.getBoundingClientRect(),De=ce.width,dt=ce.height,Vt=Math.sqrt(De*De+dt*dt),bn=Math.max(dt,De),fi=D.unbounded?bn:Vt+Uu,xi=Math.floor(bn*Ea),to=fi/xi;let Vi=_-ce.left,xo=k-ce.top;D.unbounded&&(Vi=.5*De,xo=.5*dt);const zo=Vi-.5*xi,yr=xo-.5*xi,as=.5*De-Vi,_s=.5*dt-xo;(0,Y.bN)(()=>{const Ur=document.createElement("div");Ur.classList.add("ripple-effect");const ws=Ur.style;ws.top=yr+"px",ws.left=zo+"px",ws.width=ws.height=xi+"px",ws.setProperty("--final-scale",`${to}`),ws.setProperty("--translate-end",`${as}px, ${_s}px`),(D.el.shadowRoot||D.el).appendChild(Ur),setTimeout(()=>{q(()=>{hu(Ur)})},325)})})})})()}get unbounded(){return"unbounded"===this.type}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"2302f087ab1c6755355736e4ca77309c5fdcf185",role:"presentation",class:{[_]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}"}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),hu=B=>{B.classList.add("fade-out"),setTimeout(()=>{B.remove()},200)},Uu=10,Ea=.5;function Ga(){typeof customElements>"u"||["ion-ripple-effect"].forEach(_=>{"ion-ripple-effect"===_&&(customElements.get(_)||customElements.define(_,Zs))})}const nl=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),D.addElement(B.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),_.addElement(B).easing("ease-in-out").duration(200).addAnimation([k,D])},uc=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),D.addElement(B.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),_.addElement(B).easing("ease-in-out").duration(200).addAnimation([k,D])},gd=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),D.addElement(B.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),_.addElement(B).easing("ease-in-out").duration(150).addAnimation([k,D])},sd=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),D.addElement(B.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),_.addElement(B).easing("ease-in-out").duration(150).addAnimation([k,D])},Fn=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.didPresent=(0,Y.lh)(this,"ionAlertDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionAlertWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionAlertWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionAlertDidDismiss",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.delegateController=aa(this),this.lockController=xn(),this.triggerController=Jn(),this.customHTMLEnabled=ht.c.get("innerHTMLTemplatesEnabled",!1),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Pr)},this.dispatchCancelHandler=_=>{if(Qr(_.detail.role)){const D=this.processedButtons.find(q=>"cancel"===q.role);this.callButtonHandler(D)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.header=void 0,this.subHeader=void 0,this.message=void 0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}triggerChanged(){const{trigger:_,el:k,triggerController:D}=this;_&&D.addClickListener(k,_)}onKeydown(_){const k=new Set(this.processedInputs.map(dt=>dt.type));if(k.has("checkbox")&&"Enter"===_.key)return void _.preventDefault();if(!k.has("radio")||_.target&&!this.el.contains(_.target)||_.target.classList.contains("alert-button"))return;const D=this.el.querySelectorAll(".alert-radio"),q=Array.from(D).filter(dt=>!dt.disabled),ce=q.findIndex(dt=>dt.id===_.target.id);let De;if(["ArrowDown","ArrowRight"].includes(_.key)&&(De=ce===q.length-1?q[0]:q[ce+1]),["ArrowUp","ArrowLeft"].includes(_.key)&&(De=0===ce?q[q.length-1]:q[ce-1]),De&&q.includes(De)){const dt=this.processedInputs.find(Vt=>Vt.id===(null==De?void 0:De.id));dt&&(this.rbClick(dt),De.focus())}}buttonsChanged(){this.processedButtons=this.buttons.map(k=>"string"==typeof k?{text:k,role:"cancel"===k.toLowerCase()?"cancel":void 0}:k)}inputsChanged(){const _=this.inputs,k=_.find(De=>!De.disabled),q=_.find(De=>De.checked&&!De.disabled)||k,ce=new Set(_.map(De=>De.type));ce.has("checkbox")&&ce.has("radio")&&console.warn(`Alert cannot mix input types: ${Array.from(ce.values()).join("/")}. Please see alert docs for more info.`),this.inputType=ce.values().next().value,this.processedInputs=_.map((De,dt)=>{var Vt;return{type:De.type||"text",name:De.name||`${dt}`,placeholder:De.placeholder||"",value:De.value,label:De.label,checked:!!De.checked,disabled:!!De.disabled,id:De.id||`alert-input-${this.overlayIndex}-${dt}`,handler:De.handler,min:De.min,max:De.max,cssClass:null!==(Vt=De.cssClass)&&void 0!==Vt?Vt:"",attributes:De.attributes||{},tabindex:"radio"===De.type&&De!==q?-1:0}})}connectedCallback(){Ei(this.el),this.triggerChanged()}componentWillLoad(){ko(this.el),this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){!this.gesture&&"ios"===(0,ht.b)(this)&&this.wrapperEl&&(this.gesture=fa(this.wrapperEl,_=>_.classList.contains("alert-button")),this.gesture.enable(!0)),!0===this.isOpen&&(0,At.r)(()=>this.present()),this.triggerChanged()}present(){var _=this;return(0,We.A)(function*(){const k=yield _.lockController.lock();yield _.delegateController.attachViewToDom(),yield Br(_,"alertEnter",nl,gd),k()})()}dismiss(_,k){var D=this;return(0,We.A)(function*(){const q=yield D.lockController.lock(),ce=yield ro(D,_,k,"alertLeave",uc,sd);return ce&&D.delegateController.removeViewFromDom(),q(),ce})()}onDidDismiss(){return zr(this.el,"ionAlertDidDismiss")}onWillDismiss(){return zr(this.el,"ionAlertWillDismiss")}rbClick(_){for(const k of this.processedInputs)k.checked=k===_,k.tabindex=k===_?0:-1;this.activeId=_.id,lr(_.handler,_),(0,Y.$x)(this)}cbClick(_){_.checked=!_.checked,lr(_.handler,_),(0,Y.$x)(this)}buttonClick(_){var k=this;return(0,We.A)(function*(){const D=_.role,q=k.getValues();if(Qr(D))return k.dismiss({values:q},D);const ce=yield k.callButtonHandler(_,q);return!1!==ce&&k.dismiss(Object.assign({values:q},ce),_.role)})()}callButtonHandler(_,k){return(0,We.A)(function*(){if(null!=_&&_.handler){const D=yield lr(_.handler,k);if(!1===D)return!1;if("object"==typeof D)return D}return{}})()}getValues(){if(0===this.processedInputs.length)return;if("radio"===this.inputType){const k=this.processedInputs.find(D=>!!D.checked);return k?k.value:void 0}if("checkbox"===this.inputType)return this.processedInputs.filter(k=>k.checked).map(k=>k.value);const _={};return this.processedInputs.forEach(k=>{_[k.name]=k.value||""}),_}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const _=this.processedInputs,k=(0,ht.b)(this);return 0===_.length?null:(0,Y.h)("div",{class:"alert-checkbox-group"},_.map(D=>(0,Y.h)("button",{type:"button",onClick:()=>this.cbClick(D),"aria-checked":`${D.checked}`,id:D.id,disabled:D.disabled,tabIndex:D.tabindex,role:"checkbox",class:Object.assign(Object.assign({},ni(D.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":D.disabled||!1})},(0,Y.h)("div",{class:"alert-button-inner"},(0,Y.h)("div",{class:"alert-checkbox-icon"},(0,Y.h)("div",{class:"alert-checkbox-inner"})),(0,Y.h)("div",{class:"alert-checkbox-label"},D.label)),"md"===k&&(0,Y.h)("ion-ripple-effect",null))))}renderRadio(){const _=this.processedInputs;return 0===_.length?null:(0,Y.h)("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},_.map(k=>(0,Y.h)("button",{type:"button",onClick:()=>this.rbClick(k),"aria-checked":`${k.checked}`,disabled:k.disabled,id:k.id,tabIndex:k.tabindex,class:Object.assign(Object.assign({},ni(k.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":k.disabled||!1}),role:"radio"},(0,Y.h)("div",{class:"alert-button-inner"},(0,Y.h)("div",{class:"alert-radio-icon"},(0,Y.h)("div",{class:"alert-radio-inner"})),(0,Y.h)("div",{class:"alert-radio-label"},k.label)))))}renderInput(){const _=this.processedInputs;return 0===_.length?null:(0,Y.h)("div",{class:"alert-input-group"},_.map(k=>{var D,q,ce,De;return(0,Y.h)("div",{class:"alert-input-wrapper"},"textarea"===k.type?(0,Y.h)("textarea",Object.assign({placeholder:k.placeholder,value:k.value,id:k.id,tabIndex:k.tabindex},k.attributes,{disabled:null!==(q=null===(D=k.attributes)||void 0===D?void 0:D.disabled)&&void 0!==q?q:k.disabled,class:Gn(k),onInput:dt=>{var Vt;k.value=dt.target.value,null!==(Vt=k.attributes)&&void 0!==Vt&&Vt.onInput&&k.attributes.onInput(dt)}})):(0,Y.h)("input",Object.assign({placeholder:k.placeholder,type:k.type,min:k.min,max:k.max,value:k.value,id:k.id,tabIndex:k.tabindex},k.attributes,{disabled:null!==(De=null===(ce=k.attributes)||void 0===ce?void 0:ce.disabled)&&void 0!==De?De:k.disabled,class:Gn(k),onInput:dt=>{var Vt;k.value=dt.target.value,null!==(Vt=k.attributes)&&void 0!==Vt&&Vt.onInput&&k.attributes.onInput(dt)}})))}))}renderAlertButtons(){const _=this.processedButtons,k=(0,ht.b)(this);return(0,Y.h)("div",{class:{"alert-button-group":!0,"alert-button-group-vertical":_.length>2}},_.map(q=>(0,Y.h)("button",Object.assign({},q.htmlAttributes,{type:"button",id:q.id,class:Mi(q),tabIndex:0,onClick:()=>this.buttonClick(q)}),(0,Y.h)("span",{class:"alert-button-inner"},q.text),"md"===k&&(0,Y.h)("ion-ripple-effect",null))))}renderAlertMessage(_){const{customHTMLEnabled:k,message:D}=this;return k?(0,Y.h)("div",{id:_,class:"alert-message",innerHTML:Hn(D)}):(0,Y.h)("div",{id:_,class:"alert-message"},D)}render(){const{overlayIndex:_,header:k,subHeader:D,message:q,htmlAttributes:ce}=this,De=(0,ht.b)(this),dt=`alert-${_}-hdr`,Vt=`alert-${_}-sub-hdr`,bn=`alert-${_}-msg`;return(0,Y.h)(Y.xr,Object.assign({key:"b1875ea565c40a25915e26e61864f8c61d840ccc",role:this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert","aria-modal":"true","aria-labelledby":k?dt:D?Vt:null,"aria-describedby":void 0!==q?bn:null,tabindex:"-1"},ce,{style:{zIndex:`${2e4+_}`},class:Object.assign(Object.assign({},ni(this.cssClass)),{[De]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),(0,Y.h)("ion-backdrop",{key:"37d9d7d1a47bfa23c3bb8d8d9805f52a5bbedf61",tappable:this.backdropDismiss}),(0,Y.h)("div",{key:"0134cc90b7f02dcdd13dfdc39a72f2259182de90",tabindex:"0"}),(0,Y.h)("div",{key:"ed054b063ec2d1847b3234d5bdf3e66054784ed7",class:"alert-wrapper ion-overlay-wrapper",ref:to=>this.wrapperEl=to},(0,Y.h)("div",{key:"fb81befae081424f03c64b434ffdd79bb1b00d0c",class:"alert-head"},k&&(0,Y.h)("h2",{key:"92596dfdd92c4f63c82ed86b4a2473b3110daae3",id:dt,class:"alert-title"},k),D&&(0,Y.h)("h2",{key:"ba7a0734cf818224f453604ec638770ca61bfef6",id:Vt,class:"alert-sub-title"},D)),this.renderAlertMessage(bn),this.renderAlertInputs(),this.renderAlertButtons()),(0,Y.h)("div",{key:"41a2619836a4af5d158216ef14b49985c7941b78",tabindex:"0"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}}static get style(){return{ios:".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-label.sc-ion-alert-ios,.alert-radio-label.sc-ion-alert-ios{overflow-wrap:anywhere}@media (any-pointer: coarse){.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:0.875rem;line-height:1.25rem;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.alert-button-inner.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, var(--ion-background-color-step-100, #f9f9f9)));--max-width:clamp(270px, 16.875rem, 324px);--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:max(14px, 0.875rem)}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;-webkit-box-shadow:none;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:7px;text-align:center}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:max(17px, 1.0625rem);font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));font-size:max(14px, 0.875rem)}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:max(13px, 0.8125rem);text-align:center}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:7px;margin-top:10px;-webkit-padding-start:7px;padding-inline-start:7px;-webkit-padding-end:7px;padding-inline-end:7px;padding-top:7px;padding-bottom:7px;border:0.55px solid var(--ion-color-step-250, var(--ion-background-color-step-250, #bfbfbf));background-color:var(--ion-background-color, #fff);-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:1rem}.alert-input.sc-ion-alert-ios::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-input.sc-ion-alert-ios::-webkit-date-and-time-value{height:18px}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{min-height:44px}.alert-radio-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;color:var(--ion-text-color, #000)}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #0054e9)}.alert-radio-icon.sc-ion-alert-ios{position:relative;-ms-flex-order:1;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{top:-7px;position:absolute;width:6px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{inset-inline-start:7px}.alert-checkbox-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-text-color, #000)}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px;margin-top:10px;margin-bottom:10px;position:relative;width:min(1.375rem, 55.836px);height:min(1.375rem, 55.836px);border-width:0.125rem;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #0054e9);background-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{top:calc(min(1.375rem, 55.836px) / 8);position:absolute;width:calc(min(1.375rem, 55.836px) / 6 + 1px);height:calc(min(1.375rem, 55.836px) * 0.5);-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:0.125rem;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{inset-inline-start:calc(min(1.375rem, 55.836px) / 3)}.alert-button-group.sc-ion-alert-ios{-webkit-margin-end:-0.55px;margin-inline-end:-0.55px;-ms-flex-wrap:wrap;flex-wrap:wrap}.alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios{border-right:none}[dir=rtl].sc-ion-alert-ios-h .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:none}[dir=rtl].sc-ion-alert-ios .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:none}@supports selector(:dir(rtl)){.alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:none}}.alert-button.sc-ion-alert-ios{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;-ms-flex:1 1 auto;flex:1 1 auto;min-width:50%;height:max(44px, 2.75rem);border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #0054e9);font-size:max(17px, 1.0625rem);overflow:hidden}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child{border-right:0}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:first-child:dir(rtl){border-right:0}}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #c5000f)}",md:".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-label.sc-ion-alert-md,.alert-radio-label.sc-ion-alert-md{overflow-wrap:anywhere}@media (any-pointer: coarse){.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:0.875rem;line-height:1.25rem;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.alert-button-inner.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:0.875rem}.alert-wrapper.sc-ion-alert-md{border-radius:4px;-webkit-box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px;padding-top:20px;padding-bottom:15px;text-align:start}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:1.25rem;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:1rem}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.alert-message.sc-ion-alert-md{font-size:1rem}@media screen and (max-width: 767px){.alert-message.sc-ion-alert-md{max-height:266px}}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #0054e9)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;border-top:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));border-bottom:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));overflow:auto}@media screen and (max-width: 767px){.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{max-height:266px}}.alert-tappable.sc-ion-alert-md{position:relative;min-height:48px}.alert-radio-label.sc-ion-alert-md{-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));font-size:1rem}.alert-radio-icon.sc-ion-alert-md{top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, var(--ion-background-color-step-550, #737373))}.alert-radio-icon.sc-ion-alert-md{inset-inline-start:26px}.alert-radio-inner.sc-ion-alert-md{top:3px;border-radius:50%;position:absolute;width:10px;height:10px;-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #0054e9)}.alert-radio-inner.sc-ion-alert-md{inset-inline-start:3px}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626))}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;width:calc(100% - 53px);color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));font-size:1rem}.alert-checkbox-icon.sc-ion-alert-md{top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, var(--ion-background-color-step-550, #737373));contain:strict}.alert-checkbox-icon.sc-ion-alert-md{inset-inline-start:26px}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #0054e9);background-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{top:0;position:absolute;width:6px;height:10px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{inset-inline-start:3px}.alert-button-group.sc-ion-alert-md{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;-ms-flex-pack:end;justify-content:flex-end}.alert-button.sc-ion-alert-md{border-radius:2px;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:0;margin-bottom:0;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #0054e9);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}.alert-button-inner.sc-ion-alert-md{-ms-flex-pack:end;justify-content:flex-end}@media screen and (min-width: 768px){.sc-ion-alert-md-h{--max-width:min(100vw - 96px, 560px);--max-height:min(100vh - 96px, 560px)}}"}}},[34,"ion-alert",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],header:[1],subHeader:[1,"sub-header"],message:[1],buttons:[16],inputs:[1040],backdropDismiss:[4,"backdrop-dismiss"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},[[4,"keydown","onKeydown"]],{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}]),Gn=B=>{var _,k,D;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":(null!==(k=null===(_=B.attributes)||void 0===_?void 0:_.disabled)&&void 0!==k?k:B.disabled)||!1},ni(B.cssClass)),ni(B.attributes?null===(D=B.attributes.class)||void 0===D?void 0:D.toString():""))},Mi=B=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,[`alert-button-role-${B.role}`]:void 0!==B.role},ni(B.cssClass));function Li(){typeof customElements>"u"||["ion-alert","ion-backdrop","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-alert":customElements.get(_)||customElements.define(_,Fn);break;case"ion-backdrop":customElements.get(_)||ue();break;case"ion-ripple-effect":customElements.get(_)||Ga()}})}const ao=Li,gr=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost()}componentDidLoad(){var _=this;Y.L2.isBrowser&&sa((0,We.A)(function*(){const k=(0,ht.a)(window,"hybrid");if(ht.c.getBoolean("_testing")||_e.e(7338).then(_e.bind(_e,7338)).then(ce=>ce.startTapClick(ht.c)),ht.c.getBoolean("statusTap",k)&&_e.e(6631).then(_e.bind(_e,6631)).then(ce=>ce.startStatusTap()),ht.c.getBoolean("inputShims",Xr())){const ce=(0,ht.a)(window,"ios")?"ios":"android";_e.e(7402).then(_e.bind(_e,7402)).then(De=>De.startInputShims(ht.c,ce))}const D=yield Promise.resolve().then(_e.bind(_e,5098)),q=k||(0,Qt.shouldUseCloseWatcher)();ht.c.getBoolean("hardwareBackButton",q)?D.startHardwareBackButton():((0,Qt.shouldUseCloseWatcher)()&&(0,kn.p)("experimentalCloseWatcher was set to `true`, but hardwareBackButton was set to `false`. Both config options must be `true` for the Close Watcher API to be used."),D.blockHardwareBackButton()),typeof window<"u"&&Promise.resolve().then(_e.bind(_e,6008)).then(ce=>ce.startKeyboardAssist(window)),Promise.resolve().then(_e.bind(_e,5498)).then(ce=>_.focusVisible=ce.startFocusVisible())}))}setFocus(_){var k=this;return(0,We.A)(function*(){k.focusVisible&&k.focusVisible.setFocus(_)})()}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"a562850f242d9d45573e35efdd4bd178254677ef",class:{[_]:!0,"ion-page":!0,"force-statusbar-padding":ht.c.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return"html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}"}},[0,"ion-app",{setFocus:[64]}]),Xr=()=>!!((0,ht.a)(window,"ios")&&(0,ht.a)(window,"mobile")||(0,ht.a)(window,"android")&&(0,ht.a)(window,"mobileweb")),sa=B=>{"requestIdleCallback"in window?window.requestIdleCallback(B):setTimeout(B,32)},Vo=function xl(){typeof customElements>"u"||["ion-app"].forEach(_=>{"ion-app"===_&&(customElements.get(_)||customElements.define(_,gr))})},Ll=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=_=>{const{el:k}=this;"button"===this.type?Kn(this.href,_,this.routerDirection,this.routerAnimation):(0,At.h)(k)&&this.submitForm(_)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.slotChanged=()=>{this.isCircle=this.hasIconOnly},this.isCircle=!1,this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:_}=this;this.formButtonEl&&(this.formButtonEl.disabled=_)}renderHiddenButton(){const _=this.formEl=this.findForm();if(_){const{formButtonEl:k}=this;if(null!==k&&_.contains(k))return;const D=this.formButtonEl=document.createElement("button");D.type=this.type,D.style.display="none",D.disabled=this.disabled,_.appendChild(D)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=(0,At.i)(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:_}=this;if(_ instanceof HTMLFormElement)return _;if("string"==typeof _){const k=document.getElementById(_);return k?k instanceof HTMLFormElement?k:((0,kn.p)(`Form with selector: "#${_}" could not be found. Verify that the id is attached to a <form> element.`,this.el),null):((0,kn.p)(`Form with selector: "#${_}" could not be found. Verify that the id is correct and the form is rendered in the DOM.`,this.el),null)}return void 0!==_?((0,kn.p)('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(_){this.formEl&&this.formButtonEl&&(_.preventDefault(),this.formButtonEl.click())}render(){const _=(0,ht.b)(this),{buttonType:k,type:D,disabled:q,rel:ce,target:De,size:dt,href:Vt,color:bn,expand:fi,hasIconOnly:xi,shape:to,strong:Vi,inheritedAttributes:xo}=this,zo=void 0===dt&&this.inItem?"small":dt,yr=void 0===Vt?"button":"a",as="button"===yr?{type:D}:{download:this.download,href:Vt,rel:ce,target:De};let _s=this.fill;return null==_s&&(_s=this.inToolbar||this.inListHeader?"clear":"solid"),"button"!==D&&this.renderHiddenButton(),(0,Y.h)(Y.xr,{key:"8f3a0363d46ef888d22b0b0812c70cb4f79e6efa",onClick:this.handleClick,"aria-disabled":q?"true":null,class:Kr(bn,{[_]:!0,[k]:!0,[`${k}-${fi}`]:void 0!==fi,[`${k}-${zo}`]:void 0!==zo,[`${k}-${to}`]:void 0!==to,[`${k}-${_s}`]:!0,[`${k}-strong`]:Vi,"in-toolbar":ps("ion-toolbar",this.el),"in-toolbar-color":ps("ion-toolbar[color]",this.el),"in-buttons":ps("ion-buttons",this.el),"button-has-icon-only":xi,"button-disabled":q,"ion-activatable":!0,"ion-focusable":!0})},(0,Y.h)(yr,Object.assign({key:"a517c7d06aab15ad4c2a51b8ec224c1aeb4ed565"},as,{class:"button-native",part:"native",disabled:q,onFocus:this.onFocus,onBlur:this.onBlur},xo),(0,Y.h)("span",{key:"127c26dd97c0bf5097433df77df7313d59784899",class:"button-inner"},(0,Y.h)("slot",{key:"39d9a9cad8e1addbe63406062e555e05c2cb541b",name:"icon-only",onSlotchange:this.slotChanged}),(0,Y.h)("slot",{key:"cfdebdd89155c6c21eb80e51e06456a3a6d877e0",name:"start"}),(0,Y.h)("slot",{key:"eac497e0f97ab55baa834ae23155d89b0f7069c6"}),(0,Y.h)("slot",{key:"c99f7900f8856b32a0b4ac11092d461f5e9a1109",name:"end"})),"md"===_&&(0,Y.h)("ion-ripple-effect",{key:"c681edb0480879fbd801575f2233f6e118898638",type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #0054e9);--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:min(1rem, 48px);font-weight:500;letter-spacing:0}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #004acd);--background-focused:var(--ion-color-primary-shade, #004acd);--background-hover:var(--ion-color-primary-tint, #1a65eb);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #0054e9);--background-focused:var(--ion-color-primary, #0054e9);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:transparent;--background-focused-opacity:.1;font-size:min(1.0625rem, 51px);font-weight:normal}:host(.in-buttons){font-size:clamp(17px, 1.0625rem, 21.08px);font-weight:400}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:min(1.25rem, 60px)}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:min(0.8125rem, 39px)}:host(.button-round){--border-radius:999px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:var(--padding-top);--padding-end:var(--padding-top);--padding-start:var(--padding-end);min-width:clamp(30px, 2.125em, 60px);min-height:clamp(30px, 2.125em, 60px)}::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.12px, 1.125em, 43.02px)}:host(.button-small.button-has-icon-only){min-width:clamp(23px, 2.16em, 54px);min-height:clamp(23px, 2.16em, 54px)}:host(.button-small) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(12.1394px, 1.308125em, 40.1856px)}:host(.button-large.button-has-icon-only){min-width:clamp(46px, 2.5em, 78px);min-height:clamp(46px, 2.5em, 78px)}:host(.button-large) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.12px, 0.9em, 43.056px)}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}',md:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #0054e9);--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:0.875rem;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:var(--ion-color-primary, #0054e9);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:var(--ion-color-primary, #0054e9);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:999px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:1.25rem}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:0.8125rem}:host(.button-strong){font-weight:bold}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:var(--padding-top);--padding-end:var(--padding-top);--padding-start:var(--padding-end);min-width:clamp(30px, 2.86em, 60px);min-height:clamp(30px, 2.86em, 60px)}::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.104px, 1.6em, 43.008px)}:host(.button-small.button-has-icon-only){min-width:clamp(23px, 2.16em, 54px);min-height:clamp(23px, 2.16em, 54px)}:host(.button-small) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(13.002px, 1.23125em, 40.385px)}:host(.button-large.button-has-icon-only){min-width:clamp(46px, 2.5em, 78px);min-height:clamp(46px, 2.5em, 78px)}:host(.button-large) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.008px, 1.4em, 43.008px)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-background, var(--color));color:var(--ion-toolbar-color, var(--background), var(--ion-color-primary-contrast, #fff))}'}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1],isCircle:[32]},void 0,{disabled:["disabledChanged"]}]);const Se=function ya(){typeof customElements>"u"||["ion-button","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-button":customElements.get(_)||customElements.define(_,Ll);break;case"ion-ripple-effect":customElements.get(_)||Ga()}})},Tr=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.collapse=!1}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"4e5ce9abb3f56e8c91e3eb58c2819300e61eba24",class:{[_]:!0,"buttons-collapse":this.collapse}},(0,Y.h)("slot",{key:"f2f360ec888b6e946b512fed07431fab47c61482"}))}static get style(){return{ios:".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-ios-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.41em;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.41em;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.65em;line-height:0.67}",md:".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-md-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:3rem;height:3rem}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}"}}},[38,"ion-buttons",{collapse:[4]}]);const Pc=function Wa(){typeof customElements>"u"||["ion-buttons"].forEach(_=>{"ion-buttons"===_&&(customElements.get(_)||customElements.define(_,Tr))})},Dd=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAriaAttributes={},this.color=void 0,this.button=!1,this.type="button",this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0}componentWillLoad(){this.inheritedAriaAttributes=(0,At.d)(this.el,["aria-label"])}isClickable(){return void 0!==this.href||this.button}renderCard(_){const k=this.isClickable();if(!k)return[(0,Y.h)("slot",null)];const{href:D,routerAnimation:q,routerDirection:ce,inheritedAriaAttributes:De}=this,dt=k?void 0===D?"button":"a":"div";return(0,Y.h)(dt,Object.assign({},"button"===dt?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target},De,{class:"card-native",part:"native",disabled:this.disabled,onClick:bn=>Kn(D,bn,ce,q)}),(0,Y.h)("slot",null),k&&"md"===_&&(0,Y.h)("ion-ripple-effect",null))}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"8584300522f382ee8891c039d71da82533dfa36a",class:Kr(this.color,{[_]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(_))}get el(){return this}static get style(){return{ios:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))));-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:0.875rem;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",md:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))));-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:0.875rem;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}"}}},[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]),vd=function us(){typeof customElements>"u"||["ion-card","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-card":customElements.get(_)||customElements.define(_,Dd);break;case"ion-ripple-effect":customElements.get(_)||Ga()}})},Cu=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost()}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"2a2d0b48aad4b83990a1748fce60e772514eb223",class:{[_]:!0,[`card-content-${_}`]:!0}})}static get style(){return{ios:"ion-card-content{display:block;position:relative}.card-content-ios{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:20px;font-size:1rem;line-height:1.4}.card-content-ios h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.card-content-ios h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.card-content-ios h3,.card-content-ios h4,.card-content-ios h5,.card-content-ios h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal}.card-content-ios p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem}ion-card-header+.card-content-ios{padding-top:0}",md:"ion-card-content{display:block;position:relative}.card-content-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:13px;padding-bottom:13px;font-size:0.875rem;line-height:1.5}.card-content-md h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.card-content-md h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.card-content-md h3,.card-content-md h4,.card-content-md h5,.card-content-md h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal}.card-content-md p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;font-weight:normal;line-height:1.5}ion-card-header+.card-content-md{padding-top:0}"}}},[32,"ion-card-content"]),_d=function dh(){typeof customElements>"u"||["ion-card-content"].forEach(_=>{"ion-card-content"===_&&(customElements.get(_)||customElements.define(_,Cu))})},ks=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.translucent=!1}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"18d12507ec6e650a72d721e9d0f4128b5e86df1d",class:Kr(this.color,{"card-header-translucent":this.translucent,"ion-inherit-color":!0,[_]:!0})},(0,Y.h)("slot",{key:"3374c087d8c3f014082787e255432e7a335ef44f"}))}static get style(){return{ios:":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:16px;-ms-flex-direction:column-reverse;flex-direction:column-reverse}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.card-header-translucent){background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(30px);backdrop-filter:saturate(180%) blur(30px)}}",md:":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:16px;padding-bottom:16px}::slotted(ion-card-title:not(:first-child)),::slotted(ion-card-subtitle:not(:first-child)){margin-top:8px}"}}},[33,"ion-card-header",{color:[513],translucent:[4]}]),w0=function ga(){typeof customElements>"u"||["ion-card-header"].forEach(_=>{"ion-card-header"===_&&(customElements.get(_)||customElements.define(_,ks))})},Ls=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"cbcb01bd01cf6de64a0b04fb626e42b07ceb8f53",role:"heading","aria-level":"3",class:Kr(this.color,{"ion-inherit-color":!0,[_]:!0})},(0,Y.h)("slot",{key:"cbcaa73aa5799882c48d6c0aabfb13651bcc91c0"}))}static get style(){return{ios:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));margin-left:0;margin-right:0;margin-top:0;margin-bottom:4px;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:0.75rem;font-weight:700;letter-spacing:0.4px;text-transform:uppercase}",md:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:0.875rem;font-weight:500}"}}},[33,"ion-card-subtitle",{color:[513]}]),Bl=function j0(){typeof customElements>"u"||["ion-card-subtitle"].forEach(_=>{"ion-card-subtitle"===_&&(customElements.get(_)||customElements.define(_,Ls))})},qd=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"f904a0ca6489f147d03c9c5f9f2c5549cdb38d1a",role:"heading","aria-level":"2",class:Kr(this.color,{"ion-inherit-color":!0,[_]:!0})},(0,Y.h)("slot",{key:"effb921de4ad8dfbbe318b3f692f4005812da7b1"}))}static get style(){return{ios:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-text-color, #000);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:1.75rem;font-weight:700;line-height:1.2}",md:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:1.25rem;font-weight:500;line-height:1.2}"}}},[33,"ion-card-title",{color:[513]}]),Rr=function Xs(){typeof customElements>"u"||["ion-card-title"].forEach(_=>{"ion-card-title"===_&&(customElements.get(_)||customElements.define(_,qd))})},yd={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},Rd=B=>void 0===B||""===B||!!window.matchMedia&&window.matchMedia(yd[B]).matches,Su=typeof window<"u"?window:void 0,fe=Su&&!!(Su.CSS&&Su.CSS.supports&&Su.CSS.supports("--a: 0")),Ce=["","xs","sm","md","lg","xl"],Nt=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.offset=void 0,this.offsetXs=void 0,this.offsetSm=void 0,this.offsetMd=void 0,this.offsetLg=void 0,this.offsetXl=void 0,this.pull=void 0,this.pullXs=void 0,this.pullSm=void 0,this.pullMd=void 0,this.pullLg=void 0,this.pullXl=void 0,this.push=void 0,this.pushXs=void 0,this.pushSm=void 0,this.pushMd=void 0,this.pushLg=void 0,this.pushXl=void 0,this.size=void 0,this.sizeXs=void 0,this.sizeSm=void 0,this.sizeMd=void 0,this.sizeLg=void 0,this.sizeXl=void 0}onResize(){(0,Y.$x)(this)}getColumns(_){let k;for(const D of Ce){const q=Rd(D),ce=this[_+D.charAt(0).toUpperCase()+D.slice(1)];q&&void 0!==ce&&(k=ce)}return k}calculateSize(){const _=this.getColumns("size");if(!_||""===_)return;const k="auto"===_?"auto":fe?`calc(calc(${_} / var(--ion-grid-columns, 12)) * 100%)`:_/12*100+"%";return{flex:`0 0 ${k}`,width:`${k}`,"max-width":`${k}`}}calculatePosition(_,k){const D=this.getColumns(_);if(D)return{[k]:fe?`calc(calc(${D} / var(--ion-grid-columns, 12)) * 100%)`:D>0&&D<12?D/12*100+"%":"auto"}}calculateOffset(_){return this.calculatePosition("offset",_?"margin-right":"margin-left")}calculatePull(_){return this.calculatePosition("pull",_?"left":"right")}calculatePush(_){return this.calculatePosition("push",_?"right":"left")}render(){const _="rtl"===document.dir,k=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"c37fa4c4c993385ccbb6f4e89b2f390b140507a0",class:{[k]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(_)),this.calculatePull(_)),this.calculatePush(_)),this.calculateSize())},(0,Y.h)("slot",{key:"6a5296ff0b9dee6600c2dafe7363a065d053bac2"}))}static get style(){return":host{-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}"}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]),Dn=function Ie(){typeof customElements>"u"||["ion-col"].forEach(_=>{"ion-col"===_&&(customElements.get(_)||customElements.define(_,Nt))})};var pi=_e(2782);const na=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=(0,Y.lh)(this,"ionScrollStart",7),this.ionScroll=(0,Y.lh)(this,"ionScroll",7),this.ionScrollEnd=(0,Y.lh)(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.tabsElement=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.fixedSlotPlacement="after",this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){if(this.isMainContent=null===this.el.closest("ion-menu, ion-popover, ion-modal"),(0,At.j)(this.el)){const _=this.tabsElement=this.el.closest("ion-tabs");null!==_&&(this.tabsLoadCallback=()=>this.resize(),_.addEventListener("ionTabBarLoaded",this.tabsLoadCallback))}}disconnectedCallback(){if(this.onScrollEnd(),(0,At.j)(this.el)){const{tabsElement:_,tabsLoadCallback:k}=this;null!==_&&void 0!==k&&_.removeEventListener("ionTabBarLoaded",k),this.tabsElement=null,this.tabsLoadCallback=void 0}}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{null!==this.el.offsetParent&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:_}=this,k=(0,ht.b)(this);return void 0===_?"ios"===k&&(0,ht.a)("ios"):_}resize(){Y.L2.isBrowser&&(this.fullscreen?(0,Y.gv)(()=>this.readDimensions()):(0!==this.cTop||0!==this.cBottom)&&(this.cTop=this.cBottom=0,(0,Y.$x)(this)))}readDimensions(){const _=$r(this.el),k=Math.max(this.el.offsetTop,0),D=Math.max(_.offsetHeight-k-this.el.offsetHeight,0);(k!==this.cTop||D!==this.cBottom)&&(this.cTop=k,this.cBottom=D,(0,Y.$x)(this))}onScroll(_){const k=Date.now(),D=!this.isScrolling;this.lastScroll=k,D&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,(0,Y.gv)(q=>{this.queued=!1,this.detail.event=_,Fa(this.detail,this.scrollEl,q,D),this.ionScroll.emit(this.detail)}))}getScrollElement(){var _=this;return(0,We.A)(function*(){return _.scrollEl||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.scrollEl)})()}getBackgroundElement(){var _=this;return(0,We.A)(function*(){return _.backgroundContentEl||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.backgroundContentEl)})()}scrollToTop(_=0){return this.scrollToPoint(void 0,0,_)}scrollToBottom(_=0){var k=this;return(0,We.A)(function*(){const D=yield k.getScrollElement();return k.scrollToPoint(void 0,D.scrollHeight-D.clientHeight,_)})()}scrollByPoint(_,k,D){var q=this;return(0,We.A)(function*(){const ce=yield q.getScrollElement();return q.scrollToPoint(_+ce.scrollLeft,k+ce.scrollTop,D)})()}scrollToPoint(_,k,D=0){var q=this;return(0,We.A)(function*(){const ce=yield q.getScrollElement();if(D<32)return null!=k&&(ce.scrollTop=k),void(null!=_&&(ce.scrollLeft=_));let De,dt=0;const Vt=new Promise(xo=>De=xo),bn=ce.scrollTop,fi=ce.scrollLeft,xi=null!=k?k-bn:0,to=null!=_?_-fi:0,Vi=xo=>{const zo=Math.min(1,(xo-dt)/D)-1,yr=Math.pow(zo,3)+1;0!==xi&&(ce.scrollTop=Math.floor(yr*xi+bn)),0!==to&&(ce.scrollLeft=Math.floor(yr*to+fi)),yr<1?requestAnimationFrame(Vi):De()};return requestAnimationFrame(xo=>{dt=xo,Vi(xo)}),Vt})()}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{fixedSlotPlacement:_,isMainContent:k,scrollX:D,scrollY:q,el:ce}=this,De=(0,pi.i)(ce)?"rtl":"ltr",dt=(0,ht.b)(this),Vt=this.shouldForceOverscroll(),bn="ios"===dt;return this.resize(),(0,Y.h)(Y.xr,{key:"f599a7da14969df38c20a6f650179d2a319fb58b",role:k?"main":void 0,class:Kr(this.color,{[dt]:!0,"content-sizing":ps("ion-popover",this.el),overscroll:Vt,[`content-${De}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},(0,Y.h)("div",{key:"7c545c3c95ea05abd036d0462936ac153d2a8fc6",ref:fi=>this.backgroundContentEl=fi,id:"background-content",part:"background"}),"before"===_?(0,Y.h)("slot",{name:"fixed"}):null,(0,Y.h)("div",{key:"a67ab7438466c99f74b7ba59964802c3ba86ac5b",class:{"inner-scroll":!0,"scroll-x":D,"scroll-y":q,overscroll:(D||q)&&Vt},ref:fi=>this.scrollEl=fi,onScroll:this.scrollEvents?fi=>this.onScroll(fi):void 0,part:"scroll"},(0,Y.h)("slot",{key:"6d10fcac2e40b4dd6c20d91a8957ac07251d2fa7"})),bn?(0,Y.h)("div",{class:"transition-effect"},(0,Y.h)("div",{class:"transition-cover"}),(0,Y.h)("div",{class:"transition-shadow"})):null,"after"===_?(0,Y.h)("slot",{name:"fixed"}):null)}get el(){return this}static get style(){return':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}'}},[1,"ion-content",{color:[513],fullscreen:[4],fixedSlotPlacement:[1,"fixed-slot-placement"],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[9,"resize","onResize"]]]),$r=B=>{const _=B.closest("ion-tabs");return _||(B.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content")||(B=>{var _;return B.parentElement?B.parentElement:null!==(_=B.parentNode)&&void 0!==_&&_.host?B.parentNode.host:null})(B))},Fa=(B,_,k,D)=>{const q=B.currentX,ce=B.currentY,dt=_.scrollLeft,Vt=_.scrollTop,bn=k-B.currentTime;if(D&&(B.startTime=k,B.startX=dt,B.startY=Vt,B.velocityX=B.velocityY=0),B.currentTime=k,B.currentX=B.scrollLeft=dt,B.currentY=B.scrollTop=Vt,B.deltaX=dt-B.startX,B.deltaY=Vt-B.startY,bn>0&&bn<100){const xi=(Vt-ce)/bn;B.velocityX=(dt-q)/bn*.7+.3*B.velocityX,B.velocityY=.7*xi+.3*B.velocityY}},Tl=function la(){typeof customElements>"u"||["ion-content"].forEach(_=>{"ion-content"===_&&(customElements.get(_)||customElements.define(_,na))})},Ta=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.horizontal=void 0,this.vertical=void 0,this.edge=!1,this.activated=!1}activatedChanged(){const _=this.activated,k=this.getFab();k&&(k.activated=_),Array.from(this.el.querySelectorAll("ion-fab-list")).forEach(D=>{D.activated=_})}componentDidLoad(){this.activated&&this.activatedChanged()}close(){var _=this;return(0,We.A)(function*(){_.activated=!1})()}getFab(){return this.el.querySelector("ion-fab-button")}toggle(){var _=this;return(0,We.A)(function*(){_.el.querySelector("ion-fab-list")&&(_.activated=!_.activated)})()}render(){const{horizontal:_,vertical:k,edge:D}=this,q=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"cb44cf6486b0a6439b99da87c065b0b52e2514f4",class:{[q]:!0,[`fab-horizontal-${_}`]:void 0!==_,[`fab-vertical-${k}`]:void 0!==k,"fab-edge":D}},(0,Y.h)("slot",{key:"1ed484c7ecb10cd81fbca9a4f5c4049bf82f9f8a"}))}get el(){return this}static get watchers(){return{activated:["activatedChanged"]}}static get style(){return":host{position:absolute;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;z-index:999}:host(.fab-horizontal-center){left:0px;right:0px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}:host(.fab-horizontal-start){left:calc(10px + var(--ion-safe-area-left, 0px));}:host-context([dir=rtl]):host(.fab-horizontal-start),:host-context([dir=rtl]).fab-horizontal-start{right:calc(10px + var(--ion-safe-area-right, 0px));left:unset}@supports selector(:dir(rtl)){:host(.fab-horizontal-start:dir(rtl)){right:calc(10px + var(--ion-safe-area-right, 0px));left:unset}}:host(.fab-horizontal-end){right:calc(10px + var(--ion-safe-area-right, 0px));}:host-context([dir=rtl]):host(.fab-horizontal-end),:host-context([dir=rtl]).fab-horizontal-end{left:calc(10px + var(--ion-safe-area-left, 0px));right:unset}@supports selector(:dir(rtl)){:host(.fab-horizontal-end:dir(rtl)){left:calc(10px + var(--ion-safe-area-left, 0px));right:unset}}:host(.fab-vertical-top){top:10px}:host(.fab-vertical-top.fab-edge){top:0}:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-button){margin-top:-50%}:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-button.fab-button-small){margin-top:calc((-100% + 16px) / 2)}:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-list.fab-list-side-start),:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-list.fab-list-side-end){margin-top:-50%}:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-list.fab-list-side-top),:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-list.fab-list-side-bottom){margin-top:calc(50% + 10px)}:host(.fab-vertical-bottom){bottom:10px}:host(.fab-vertical-bottom.fab-edge){bottom:0}:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-button){margin-bottom:-50%}:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-button.fab-button-small){margin-bottom:calc((-100% + 16px) / 2)}:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-list.fab-list-side-start),:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-list.fab-list-side-end){margin-bottom:-50%}:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-list.fab-list-side-top),:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-list.fab-list-side-bottom){margin-bottom:calc(50% + 10px)}:host(.fab-vertical-center){top:0px;bottom:0px;margin-top:auto;margin-bottom:auto}"}},[1,"ion-fab",{horizontal:[1],vertical:[1],edge:[4],activated:[1028],close:[64],toggle:[64]},void 0,{activated:["activatedChanged"]}]),wc=function hc(){typeof customElements>"u"||["ion-fab"].forEach(_=>{"ion-fab"===_&&(customElements.get(_)||customElements.define(_,Ta))})},zc="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",Vl="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",Oc="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>";let hh;const mu=(B,_,k,D,q)=>(k="ios"===(k&&nc(k))?"ios":"md",D&&"ios"===k?B=nc(D):q&&"md"===k?B=nc(q):(!B&&_&&!U0(_)&&(B=_),k0(B)&&(B=nc(B))),k0(B)&&""!==B.trim()&&""===B.replace(/[a-z]|-|\d/gi,"")?B:null),gu=B=>k0(B)&&(B=B.trim(),U0(B))?B:null,U0=B=>B.length>0&&/(\/|\.)/.test(B),k0=B=>"string"==typeof B,nc=B=>B.toLowerCase(),H0=B=>B&&""!==B.dir?"rtl"===B.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase()),ud=B=>{if(1===B.nodeType){if("script"===B.nodeName.toLowerCase())return!1;for(let _=0;_<B.attributes.length;_++){const k=B.attributes[_].name;if(k0(k)&&0===k.toLowerCase().indexOf("on"))return!1}for(let _=0;_<B.childNodes.length;_++)if(!ud(B.childNodes[_]))return!1}return!0},kh=new Map,M0=new Map;let Od;const Xh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=Z(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((B,_=[])=>{const k={};return _.forEach(D=>{B.hasAttribute(D)&&(null!==B.getAttribute(D)&&(k[D]=B.getAttribute(D)),B.removeAttribute(D))}),k})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(_,k,D){if(Y.L2.isBrowser&&this.lazy&&typeof window<"u"&&window.IntersectionObserver){const q=this.io=new window.IntersectionObserver(ce=>{ce[0].isIntersecting&&(q.disconnect(),this.io=void 0,D())},{rootMargin:k});q.observe(_)}else D()}loadIcon(){if(Y.L2.isBrowser&&this.isVisible){const _=(B=>{let _=gu(B.src);return _||(_=mu(B.name,B.icon,B.mode,B.ios,B.md),_?((B,_)=>{const k=(()=>{if(typeof window>"u")return new Map;if(!hh){const B=window;B.Ionicons=B.Ionicons||{},hh=B.Ionicons.map=B.Ionicons.map||new Map}return hh})().get(B);if(k)return k;try{return(0,Y.OX)(`svg/${B}.svg`)}catch{console.warn(`[Ionicons Warning]: Could not load icon with name "${B}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,_)}})(_,B):B.icon&&(_=gu(B.icon),_||(_=gu(B.icon[B.mode]),_))?_:null)})(this);_&&(kh.has(_)?this.svgContent=kh.get(_):((B,_)=>{let k=M0.get(B);if(!k){if(!(typeof fetch<"u"&&typeof document<"u"))return kh.set(B,""),Promise.resolve();if((B=>B.startsWith("data:image/svg+xml"))(B)&&(B=>-1!==B.indexOf(";utf8,"))(B)){Od||(Od=new DOMParser);const q=Od.parseFromString(B,"text/html").querySelector("svg");return q&&kh.set(B,q.outerHTML),Promise.resolve()}k=fetch(B).then(D=>{if(D.ok)return D.text().then(q=>{q&&!1!==_&&(q=(B=>{const _=document.createElement("div");_.innerHTML=B;for(let D=_.childNodes.length-1;D>=0;D--)"svg"!==_.childNodes[D].nodeName.toLowerCase()&&_.removeChild(_.childNodes[D]);const k=_.firstElementChild;if(k&&"svg"===k.nodeName.toLowerCase()){const D=k.getAttribute("class")||"";if(k.setAttribute("class",(D+" s-ion-icon").trim()),ud(k))return _.innerHTML}return""})(q)),kh.set(B,q||"")});kh.set(B,"")}),M0.set(B,k)}return k})(_,this.sanitize).then(()=>this.svgContent=kh.get(_)),this.didLoadIcon=!0)}this.iconName=mu(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:_,iconName:k,inheritedAttributes:D,el:q}=this,ce=this.mode||"md",De=!!k&&(k.includes("arrow")||k.includes("chevron"))&&!1!==_,dt=_||De;return(0,Y.h)(Y.xr,Object.assign({role:"img",class:Object.assign(Object.assign({[ce]:!0},me(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":dt,"icon-rtl":dt&&H0(q)})},D),(0,Y.h)("div",Y.L2.isBrowser&&this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},void 0,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]),Z=()=>Y.L2.isBrowser&&typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",me=B=>B?{"ion-color":!0,[`ion-color-${B}`]:!0}:null;function ke(){typeof customElements>"u"||["ion-icon"].forEach(_=>{"ion-icon"===_&&(customElements.get(_)||customElements.define(_,Xh))})}const Ci=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.fab=null,this.inheritedAttributes={},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.onClick=()=>{const{fab:_}=this;_&&_.toggle()},this.color=void 0,this.activated=!1,this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0,this.show=!1,this.translucent=!1,this.type="button",this.size=void 0,this.closeIcon="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>"}connectedCallback(){this.fab=this.el.closest("ion-fab")}componentWillLoad(){this.inheritedAttributes=(0,At.i)(this.el)}render(){const{el:_,disabled:k,color:D,href:q,activated:ce,show:De,translucent:dt,size:Vt,inheritedAttributes:bn}=this,fi=ps("ion-fab-list",_),xi=(0,ht.b)(this),to=void 0===q?"button":"a",Vi="button"===to?{type:this.type}:{download:this.download,href:q,rel:this.rel,target:this.target};return(0,Y.h)(Y.xr,{key:"eb347f7d6749c40637540d84778eb8d1b667a947",onClick:this.onClick,"aria-disabled":k?"true":null,class:Kr(D,{[xi]:!0,"fab-button-in-list":fi,"fab-button-translucent-in-list":fi&&dt,"fab-button-close-active":ce,"fab-button-show":De,"fab-button-disabled":k,"fab-button-translucent":dt,"ion-activatable":!0,"ion-focusable":!0,[`fab-button-${Vt}`]:void 0!==Vt})},(0,Y.h)(to,Object.assign({key:"83e853c8815f41543c848eb2e05ec2bb1716110a"},Vi,{class:"button-native",part:"native",disabled:k,onFocus:this.onFocus,onBlur:this.onBlur,onClick:xo=>Kn(q,xo,this.routerDirection,this.routerAnimation)},bn),(0,Y.h)("ion-icon",{key:"798deede94de658e4345acf7c2aafe2ab2567b0b","aria-hidden":"true",icon:this.closeIcon,part:"close-icon",class:"close-icon",lazy:!1}),(0,Y.h)("span",{key:"99252fde6de1aca73fc240a6da7e29acac9acb18",class:"button-inner"},(0,Y.h)("slot",{key:"dc73e9b41bf1f0e385e5784f975dfb81e37c8dfb"})),"md"===xi&&(0,Y.h)("ion-ripple-effect",{key:"8413e162f44a0350f54dff06cff7aad101de3549"})))}get el(){return this}static get style(){return{ios:':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}.close-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;top:0;position:absolute;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;font-size:var(--close-icon-font-size);opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #0054e9);--background-activated:var(--ion-color-primary-shade, #004acd);--background-focused:var(--ion-color-primary-shade, #004acd);--background-hover:var(--ion-color-primary-tint, #1a65eb);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transition:0.2s transform cubic-bezier(0.25, 1.11, 0.78, 1.59);--close-icon-font-size:28px}:host(.ion-activated){--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transform:scale(1.1);--transition:0.2s transform ease-out}::slotted(ion-icon){font-size:28px}:host(.fab-button-in-list){--background:var(--ion-color-light, #f4f5f8);--background-activated:var(--ion-color-light-shade, #d7d8da);--background-focused:var(--background-activated);--background-hover:var(--ion-color-light-tint, #f5f6f9);--color:var(--ion-color-light-contrast, #000);--color-activated:var(--ion-color-light-contrast, #000);--color-focused:var(--color-activated);--transition:transform 200ms ease 10ms, opacity 200ms ease 10ms}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}:host(.ion-color.ion-focused) .button-native,:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after,:host(.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent){--background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.9);--background-hover:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.8);--background-focused:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.82);--backdrop-filter:saturate(180%) blur(20px)}:host(.fab-button-translucent-in-list){--background:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.9);--background-hover:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.8);--background-focused:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.82)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){@media (any-hover: hover){:host(.fab-button-translucent.ion-color:hover) .button-native{background:rgba(var(--ion-color-base-rgb), 0.8)}}:host(.ion-color.fab-button-translucent) .button-native{background:rgba(var(--ion-color-base-rgb), 0.9)}:host(.ion-color.ion-focused.fab-button-translucent) .button-native,:host(.ion-color.ion-activated.fab-button-translucent) .button-native{background:var(--ion-color-base)}}',md:':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}.close-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;top:0;position:absolute;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;font-size:var(--close-icon-font-size);opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #0054e9);--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1), background-color 280ms cubic-bezier(0.4, 0, 0.2, 1), color 280ms cubic-bezier(0.4, 0, 0.2, 1), opacity 15ms linear 30ms, transform 270ms cubic-bezier(0, 0, 0.2, 1) 0ms;--close-icon-font-size:24px}:host(.ion-activated){--box-shadow:0 7px 8px -4px rgba(0, 0, 0, 0.2), 0 12px 17px 2px rgba(0, 0, 0, 0.14), 0 5px 22px 4px rgba(0, 0, 0, 0.12)}::slotted(ion-icon){font-size:24px}:host(.fab-button-in-list){--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);--color-activated:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);--color-focused:var(--color-activated);--background:var(--ion-color-light, #f4f5f8);--background-activated:transparent;--background-focused:var(--ion-color-light-shade, #d7d8da);--background-hover:var(--ion-color-light-tint, #f5f6f9)}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activated) .button-native::after{background:transparent}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}}'}}},[33,"ion-fab-button",{color:[513],activated:[4],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1],show:[4],translucent:[4],type:[1],size:[1],closeIcon:[1,"close-icon"]}]),or=function _o(){typeof customElements>"u"||["ion-fab-button","ion-icon","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-fab-button":customElements.get(_)||customElements.define(_,Ci);break;case"ion-icon":customElements.get(_)||ke();break;case"ion-ripple-effect":customElements.get(_)||Ga()}})},Qs=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"930ce78b02f8360fbca08a35d364d2c09128c6c8",class:{[_]:!0,"grid-fixed":this.fixed}},(0,Y.h)("slot",{key:"c47bf7ef2197f5ebc42d3e2c55044276fb0db393"}))}static get style(){return":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}"}},[1,"ion-grid",{fixed:[4]}]),pc=function Ml(){typeof customElements>"u"||["ion-grid"].forEach(_=>{"ion-grid"===_&&(customElements.get(_)||customElements.define(_,Qs))})},$l=B=>{const _=document.querySelector(`${B}.ion-cloned-element`);if(null!==_)return _;const k=document.createElement(B);return k.classList.add("ion-cloned-element"),k.style.setProperty("display","none"),document.body.appendChild(k),k},A0=B=>{if(!B)return;const _=B.querySelectorAll("ion-toolbar");return{el:B,toolbars:Array.from(_).map(k=>{const D=k.querySelector("ion-title");return{el:k,background:k.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:D,innerTitleEl:D?D.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(k.querySelectorAll("ion-buttons"))}})}},Mu=(B,_)=>{"fade"!==B.collapse&&(void 0===_?B.style.removeProperty("--opacity-scale"):B.style.setProperty("--opacity-scale",_.toString()))},vu=(B,_=!0)=>{const k=B.el;_?(k.classList.remove("header-collapse-condense-inactive"),k.removeAttribute("aria-hidden")):(k.classList.add("header-collapse-condense-inactive"),k.setAttribute("aria-hidden","true"))},dd=(B,_,k)=>{(0,Y.gv)(()=>{const D=B.scrollTop,q=_.clientHeight,ce=k?k.clientHeight:0;if(null!==k&&D<ce)return _.style.setProperty("--opacity-scale","0"),void B.style.setProperty("clip-path",`inset(${q}px 0px 0px 0px)`);const Vt=(0,At.k)(0,(D-ce)/10,1);(0,Y.bN)(()=>{B.style.removeProperty("clip-path"),_.style.setProperty("--opacity-scale",Vt.toString())})})},Th=(0,Y.w$)(class extends Y.wt{constructor(){var _;super(),_=this,this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=function(){var k=(0,We.A)(function*(D,q){const ce=_.scrollEl=yield(0,Et.g)(D);_.contentScrollCallback=()=>{dd(_.scrollEl,_.el,q)},ce.addEventListener("scroll",_.contentScrollCallback),dd(_.scrollEl,_.el,q)});return function(D,q){return k.apply(this,arguments)}}(),this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=(0,At.i)(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}checkCollapsibleHeader(){var _=this;return(0,We.A)(function*(){if("ios"!==(0,ht.b)(_))return;const{collapse:D}=_,q="condense"===D,ce="fade"===D;if(_.destroyCollapsibleHeader(),q){const De=_.el.closest("ion-app,ion-page,.ion-page,page-inner"),dt=De?(0,Et.f)(De):null;(0,Y.bN)(()=>{$l("ion-title").size="large",$l("ion-back-button")}),yield _.setupCondenseHeader(dt,De)}else if(ce){const De=_.el.closest("ion-app,ion-page,.ion-page,page-inner"),dt=De?(0,Et.f)(De):null;if(!dt)return void(0,Et.p)(_.el);const Vt=dt.querySelector('ion-header[collapse="condense"]');yield _.setupFadeHeader(dt,Vt)}})()}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}setupCondenseHeader(_,k){var D=this;return(0,We.A)(function*(){if(!_||!k)return void(0,Et.p)(D.el);if(typeof IntersectionObserver>"u")return;D.scrollEl=yield(0,Et.g)(_);const q=k.querySelectorAll("ion-header");if(D.collapsibleMainHeader=Array.from(q).find(Vt=>"condense"!==Vt.collapse),!D.collapsibleMainHeader)return;const ce=A0(D.collapsibleMainHeader),De=A0(D.el);ce&&De&&(vu(ce,!1),Mu(ce.el,0),D.intersectionObserver=new IntersectionObserver(Vt=>{((B,_,k,D)=>{(0,Y.bN)(()=>{const q=D.scrollTop;((B,_,k)=>{if(!B[0].isIntersecting)return;const D=B[0].intersectionRatio>.9||k<=0?0:100*(1-B[0].intersectionRatio)/75;Mu(_.el,1===D?void 0:D)})(B,_,q);const ce=B[0],De=ce.intersectionRect,dt=De.width*De.height,bn=0===dt&&0==ce.rootBounds.width*ce.rootBounds.height,fi=Math.abs(De.left-ce.boundingClientRect.left),xi=Math.abs(De.right-ce.boundingClientRect.right);bn||dt>0&&(fi>=5||xi>=5)||(ce.isIntersecting?(vu(_,!1),vu(k)):(0===De.x&&0===De.y||0!==De.width&&0!==De.height)&&q>0&&(vu(_),vu(k,!1),Mu(_.el)))})})(Vt,ce,De,D.scrollEl)},{root:_,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),D.intersectionObserver.observe(De.toolbars[De.toolbars.length-1].el),D.contentScrollCallback=()=>{((B,_,k)=>{(0,Y.gv)(()=>{const q=(0,At.k)(1,1+-B.scrollTop/500,1.1);null===k.querySelector("ion-refresher.refresher-native")&&(0,Y.bN)(()=>{((B=[],_=1,k=!1)=>{B.forEach(D=>{const q=D.ionTitleEl,ce=D.innerTitleEl;!q||"large"!==q.size||(ce.style.transition=k?"all 0.2s ease-in-out":"",ce.style.transform=`scale3d(${_}, ${_}, 1)`)})})(_.toolbars,q)})})})(D.scrollEl,De,_)},D.scrollEl.addEventListener("scroll",D.contentScrollCallback),(0,Y.bN)(()=>{void 0!==D.collapsibleMainHeader&&D.collapsibleMainHeader.classList.add("header-collapse-main")}))})()}render(){const{translucent:_,inheritedAttributes:k}=this,D=(0,ht.b)(this),q=this.collapse||"none",ce=ps("ion-menu",this.el)?"none":"banner";return(0,Y.h)(Y.xr,Object.assign({key:"c687314ef290793a9d633ad20cfc5eeb47621e31",role:ce,class:{[D]:!0,[`header-${D}`]:!0,"header-translucent":this.translucent,[`header-collapse-${q}`]:!0,[`header-translucent-${D}`]:this.translucent}},k),"ios"===D&&_&&(0,Y.h)("div",{key:"b429996046082405a91e7c23f95516db0b736f12",class:"header-background"}),(0,Y.h)("slot",{key:"e17a8965f8d3a33c1bfcb056c153d8242e5229fa"}))}get el(){return this}static get style(){return{ios:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:0px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}ion-header.header-ios:not(.header-collapse-main):has(~ion-content ion-header.header-ios[collapse=condense],~ion-content ion-header.header-ios.header-collapse-condense){opacity:0}",md:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}"}}},[36,"ion-header",{collapse:[1],translucent:[4]}]),Mh=function Au(){typeof customElements>"u"||["ion-header"].forEach(_=>{"ion-header"===_&&(customElements.get(_)||customElements.define(_,Th))})},fh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionImgWillLoad=(0,Y.lh)(this,"ionImgWillLoad",7),this.ionImgDidLoad=(0,Y.lh)(this,"ionImgDidLoad",7),this.ionError=(0,Y.lh)(this,"ionError",7),this.inheritedAttributes={},this.onLoad=()=>{this.ionImgDidLoad.emit()},this.onError=()=>{this.ionError.emit()},this.loadSrc=void 0,this.loadError=void 0,this.alt=void 0,this.src=void 0}srcChanged(){this.addIO()}componentWillLoad(){this.inheritedAttributes=(0,At.d)(this.el,["draggable"])}componentDidLoad(){this.addIO()}addIO(){void 0!==this.src&&(typeof window<"u"&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype?(this.removeIO(),this.io=new IntersectionObserver(_=>{_[_.length-1].isIntersecting&&(this.load(),this.removeIO())}),this.io.observe(this.el)):setTimeout(()=>this.load(),200))}load(){this.loadError=this.onError,this.loadSrc=this.src,this.ionImgWillLoad.emit()}removeIO(){this.io&&(this.io.disconnect(),this.io=void 0)}render(){const{loadSrc:_,alt:k,onLoad:D,loadError:q,inheritedAttributes:ce}=this,{draggable:De}=ce;return(0,Y.h)(Y.xr,{key:"14d24d65ec8e5522192ca58035264971b1ab883b",class:(0,ht.b)(this)},(0,Y.h)("img",{key:"345ba155a5fdce5e66c397a599b7333d37d9cb1d",decoding:"async",src:_,alt:k,onLoad:D,onError:q,part:"image",draggable:G0(De)}))}get el(){return this}static get watchers(){return{src:["srcChanged"]}}static get style(){return":host{display:block;-o-object-fit:contain;object-fit:contain}img{display:block;width:100%;height:100%;-o-object-fit:inherit;object-fit:inherit;-o-object-position:inherit;object-position:inherit}"}},[1,"ion-img",{alt:[1],src:[1],loadSrc:[32],loadError:[32]},void 0,{src:["srcChanged"]}]),G0=B=>{switch(B){case"true":return!0;case"false":return!1;default:return}},W0=function c1(){typeof customElements>"u"||["ion-img"].forEach(_=>{"ion-img"===_&&(customElements.get(_)||customElements.define(_,fh))})},Dh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.color=void 0,this.button=!1,this.detail=void 0,this.detailIcon=zc,this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.lines=void 0,this.routerAnimation=void 0,this.routerDirection="forward",this.target=void 0,this.type="button"}buttonChanged(){this.focusable=this.isFocusable()}labelColorChanged(_){const{color:k}=this;void 0===k&&(this.labelColorStyles=_.detail)}itemStyle(_){_.stopPropagation();const k=_.target.tagName,D=_.detail,q={},ce=this.itemStyles.get(k)||{};let De=!1;Object.keys(D).forEach(dt=>{if(D[dt]){const Vt=`item-${dt}`;ce[Vt]||(De=!0),q[Vt]=!0}}),!De&&Object.keys(q).length!==Object.keys(ce).length&&(De=!0),De&&(this.itemStyles.set(k,q),(0,Y.$x)(this))}connectedCallback(){this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=(0,At.d)(this.el,["aria-label"])}componentDidLoad(){(0,At.r)(()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()})}setMultipleInputs(){const _=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),k=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),D=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=_.length+k.length>1||_.length+D.length>1||_.length>0&&this.isClickable()}hasCover(){return 1===this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length&&!this.multipleInputs}isClickable(){return void 0!==this.href||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const _=this.el.querySelector(".ion-focusable");return this.canActivate()||null!==_}hasStartEl(){null!==this.el.querySelector('[slot="start"]')&&this.el.classList.add("item-has-start-slot")}getFirstInteractive(){return this.el.querySelectorAll("ion-toggle:not([disabled]), ion-checkbox:not([disabled]), ion-radio:not([disabled]), ion-select:not([disabled]), ion-input:not([disabled]), ion-textarea:not([disabled])")[0]}render(){const{detail:_,detailIcon:k,download:D,labelColorStyles:q,lines:ce,disabled:De,href:dt,rel:Vt,target:bn,routerAnimation:fi,routerDirection:xi,inheritedAriaAttributes:to,multipleInputs:Vi}=this,xo={},zo=(0,ht.b)(this),yr=this.isClickable(),as=this.canActivate(),_s=yr?void 0===dt?"button":"a":"div",Ur="button"===_s?{type:this.type}:{download:D,href:dt,rel:Vt,target:bn};let ws={};const xs=this.getFirstInteractive();(yr||void 0!==xs&&!Vi)&&(ws={onClick:Ql=>{if(yr&&Kn(dt,Ql,xi,fi),void 0!==xs&&!Vi){const Lu=Ql.composedPath()[0];Ql.isTrusted&&this.el.shadowRoot.contains(Lu)&&("ION-INPUT"===xs.tagName||"ION-TEXTAREA"===xs.tagName?xs.setFocus():xs.click())}}});const Vs=void 0!==_?_:"ios"===zo&&yr;this.itemStyles.forEach(Ql=>{Object.assign(xo,Ql)});const fl=De||xo["item-interactive-disabled"]?"true":null,Cc=ps("ion-list",this.el)&&!ps("ion-radio-group",this.el),Rl=void 0!==xs&&!["ION-INPUT","ION-TEXTAREA"].includes(xs.tagName);return(0,Y.h)(Y.xr,{key:"f7986b5b81c4f289460bff2c452ce993b674236b","aria-disabled":fl,class:Object.assign(Object.assign(Object.assign({},xo),q),Kr(this.color,{item:!0,[zo]:!0,"item-lines-default":void 0===ce,[`item-lines-${ce}`]:void 0!==ce,"item-control-needs-pointer-cursor":Rl,"item-disabled":De,"in-list":Cc,"item-multiple-inputs":this.multipleInputs,"ion-activatable":as,"ion-focusable":this.focusable,"item-rtl":"rtl"===document.dir})),role:Cc?"listitem":null},(0,Y.h)(_s,Object.assign({key:"cfafac67cdb532e4bce2dd4989e1936c013396ba"},Ur,to,{class:"item-native",part:"native",disabled:De},ws),(0,Y.h)("slot",{key:"68a5b8e978eed62d7d913ca006bd4bd01497cd32",name:"start"}),(0,Y.h)("div",{key:"5b052cc338b00e8d40ab77cac7a139448f9b6452",class:"item-inner"},(0,Y.h)("div",{key:"7548addbe881a41ee32fd51627db230b56510760",class:"input-wrapper"},(0,Y.h)("slot",{key:"b6f4edd5895b9f91bf060edb35666b0e7ea26ccc"})),(0,Y.h)("slot",{key:"b595e7fb96461ea2e356dbad6529531ca19705db",name:"end"}),Vs&&(0,Y.h)("ion-icon",{key:"091aa449464d530c921bd7de79bdc16fbdc14a70",icon:k,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":k===zc})),as&&"md"===zo&&(0,Y.h)("ion-ripple-effect",{key:"a4454f5ad15a67d5e41173d0227b77cd69776a18"})))}get el(){return this}static get watchers(){return{button:["buttonChanged"]}}static get style(){return{ios:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--detail-icon-color:initial;--detail-icon-font-size:1.25em;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-control-needs-pointer-cursor){cursor:pointer}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-right:var(--padding-end);padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}[dir=rtl] .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}@supports selector(:dir(rtl)){.item-native:dir(rtl){padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-left:var(--inner-padding-start);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}[dir=rtl] .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}@supports selector(:dir(rtl)){.item-inner:dir(rtl){padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:100%}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--color:var(--ion-item-color, var(--ion-text-color, #000));font-size:1rem}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:1px;--padding-bottom:1px;--padding-start:.5em;--padding-end:.5em;min-height:24px;font-size:0.8125rem}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}',md:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--detail-icon-color:initial;--detail-icon-font-size:1.25em;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-control-needs-pointer-cursor){cursor:pointer}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-right:var(--padding-end);padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}[dir=rtl] .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}@supports selector(:dir(rtl)){.item-native:dir(rtl){padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-left:var(--inner-padding-start);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}[dir=rtl] .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}@supports selector(:dir(rtl)){.item-inner:dir(rtl){padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:100%}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;font-size:1rem;font-weight:normal;text-transform:none}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0}:host(.item-lines-full){--border-width:0 0 1px 0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted([slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:1.5em}:host(.ion-color) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:0.6875rem}::slotted(ion-note[slot]){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:2px;--padding-bottom:2px;--padding-start:.6em;--padding-end:.6em;min-height:25px;font-size:0.75rem}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #0054e9)}'}}},[33,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[516],download:[1],href:[1],rel:[1],lines:[1],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],multipleInputs:[32],focusable:[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{button:["buttonChanged"]}]);function Ph(){typeof customElements>"u"||["ion-item","ion-icon","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-item":customElements.get(_)||customElements.define(_,Dh);break;case"ion-icon":customElements.get(_)||ke();break;case"ion-ripple-effect":customElements.get(_)||Ga()}})}const Z1=Ph,Yd=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.ionColor=(0,Y.lh)(this,"ionColor",7),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate="floating"===this.position,this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:_}=this;this.ionColor.emit({"item-label-color":void 0!==_,[`ion-color-${_}`]:void 0!==_})}emitStyle(){const{inRange:_,position:k}=this;_||this.ionStyle.emit({label:!0,[`label-${k}`]:void 0!==k})}render(){const _=this.position,k=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"c2c0f388dab910d294efb9fbb409ee4ef829c1ed",class:Kr(this.color,{[k]:!0,"in-item-color":ps("ion-item.ion-color",this.el),[`label-${_}`]:void 0!==_,"label-no-animate":this.noAnimate,"label-rtl":"rtl"===document.dir})},(0,Y.h)("slot",{key:"4de6b69950f417873a13c851018ec31ea2686f0a"}))}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-nowrap.sc-ion-label-ios-h{overflow:hidden}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.item-skeleton-text.sc-ion-label-ios-h,.item-skeleton-text .sc-ion-label-ios-h{overflow:hidden}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h{font-size:0.875rem;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:0.875rem}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:1.375rem;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.0625rem;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:0.875rem;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:var(--ion-color-step-400, var(--ion-text-color-step-600, #999999))}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",md:".item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-nowrap.sc-ion-label-md-h{overflow:hidden}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.item-skeleton-text.sc-ion-label-md-h,.item-skeleton-text .sc-ion-label-md-h{overflow:hidden}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #0054e9)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;line-height:1.25rem;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}"}}},[38,"ion-label",{color:[513],position:[1],noAnimate:[32]},void 0,{color:["colorChanged"],position:["positionChanged"]}]);function Rh(){typeof customElements>"u"||["ion-label"].forEach(_=>{"ion-label"===_&&(customElements.get(_)||customElements.define(_,Yd))})}const Il=Rh,il=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.lines=void 0,this.inset=!1}closeSlidingItems(){var _=this;return(0,We.A)(function*(){const k=_.el.querySelector("ion-item-sliding");return!(null==k||!k.closeOpened)&&k.closeOpened()})()}render(){const _=(0,ht.b)(this),{lines:k,inset:D}=this;return(0,Y.h)(Y.xr,{key:"8bde220025a7eeca6da075379c6487c4c9bdddc1",role:"list",class:{[_]:!0,[`list-${_}`]:!0,"list-inset":D,[`list-lines-${k}`]:void 0!==k,[`list-${_}-lines-${k}`]:void 0!==k}})}get el(){return this}static get style(){return{ios:"ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}.list-ios.list-inset ion-item:only-child,.list-ios.list-inset ion-item:not(:only-of-type):last-of-type,.list-ios.list-inset ion-item-sliding:last-of-type ion-item{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-ios-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 0.55px 0}.list-ios-lines-inset .item-lines-default{--inner-border-width:0 0 0.55px 0;--border-width:0px}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",md:"ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-md>.input:last-child::after{inset-inline-start:0}.list-md.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}.list-md.list-inset ion-item:not(:only-of-type):last-of-type,.list-md.list-inset ion-item-sliding:last-of-type ion-item{--border-width:0;--inner-border-width:0}.list-md.list-inset ion-item:only-child{--border-width:0;--inner-border-width:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-md-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 1px 0}.list-md-lines-inset .item-lines-default{--inner-border-width:0 0 1px 0;--border-width:0px}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}"}}},[32,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);function fc(){typeof customElements>"u"||["ion-list"].forEach(_=>{"ion-list"===_&&(customElements.get(_)||customElements.define(_,il))})}const $a=fc,Qh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="determinate",this.reversed=!1,this.value=0,this.buffer=1,this.color=void 0}render(){const{color:_,type:k,reversed:D,value:q,buffer:ce}=this,De=ht.c.getBoolean("_testing"),dt=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"b293f4475bcdaa7851b41ebfda659037f0365120",role:"progressbar","aria-valuenow":"determinate"===k?q:null,"aria-valuemin":"0","aria-valuemax":"1",class:Kr(_,{[dt]:!0,[`progress-bar-${k}`]:!0,"progress-paused":De,"progress-bar-reversed":"rtl"===document.dir?!D:D,"progress-bar-solid":1===ce})},"indeterminate"===k?hd():ja(q,ce))}static get style(){return{ios:":host{--background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.3);--progress-background:var(--ion-color-primary, #0054e9);display:block;position:relative;width:100%;contain:strict;direction:ltr;overflow:hidden}.progress,.progress-indeterminate,.indeterminate-bar-primary,.indeterminate-bar-secondary,.progress-buffer-bar{left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%}.buffer-circles-container,.buffer-circles{left:0;right:0;top:0;bottom:0;position:absolute}.buffer-circles{right:-10px;left:-10px;}.progress,.progress-buffer-bar,.buffer-circles-container{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms linear;transition:-webkit-transform 150ms linear;transition:transform 150ms linear;transition:transform 150ms linear, -webkit-transform 150ms linear}.progress,.progress-indeterminate{background:var(--progress-background);z-index:2}.progress-buffer-bar{background:var(--background);z-index:1}.buffer-circles-container{overflow:hidden}.indeterminate-bar-primary{top:0;right:0;bottom:0;left:-145.166611%;-webkit-animation:primary-indeterminate-translate 2s infinite linear;animation:primary-indeterminate-translate 2s infinite linear}.indeterminate-bar-primary .progress-indeterminate{-webkit-animation:primary-indeterminate-scale 2s infinite linear;animation:primary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.indeterminate-bar-secondary{top:0;right:0;bottom:0;left:-54.888891%;-webkit-animation:secondary-indeterminate-translate 2s infinite linear;animation:secondary-indeterminate-translate 2s infinite linear}.indeterminate-bar-secondary .progress-indeterminate{-webkit-animation:secondary-indeterminate-scale 2s infinite linear;animation:secondary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.buffer-circles{background-image:radial-gradient(ellipse at center, var(--background) 0%, var(--background) 30%, transparent 30%);background-repeat:repeat-x;background-position:5px center;background-size:10px 10px;z-index:0;-webkit-animation:buffering 450ms infinite linear;animation:buffering 450ms infinite linear}:host(.progress-bar-reversed){-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.progress-paused) .indeterminate-bar-secondary,:host(.progress-paused) .indeterminate-bar-primary,:host(.progress-paused) .buffer-circles{-webkit-animation-play-state:paused;animation-play-state:paused}:host(.ion-color) .buffer-circles{background-image:radial-gradient(ellipse at center, rgba(var(--ion-color-base-rgb), 0.3) 0%, rgba(var(--ion-color-base-rgb), 0.3) 30%, transparent 30%)}:host(.ion-color) .progress,:host(.ion-color) .progress-indeterminate{background:var(--ion-color-base)}@-webkit-keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@-webkit-keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@-webkit-keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}@keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}:host{border-radius:9999px;height:4px}:host(.progress-bar-solid){--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}",md:":host{--background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.3);--progress-background:var(--ion-color-primary, #0054e9);display:block;position:relative;width:100%;contain:strict;direction:ltr;overflow:hidden}.progress,.progress-indeterminate,.indeterminate-bar-primary,.indeterminate-bar-secondary,.progress-buffer-bar{left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%}.buffer-circles-container,.buffer-circles{left:0;right:0;top:0;bottom:0;position:absolute}.buffer-circles{right:-10px;left:-10px;}.progress,.progress-buffer-bar,.buffer-circles-container{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms linear;transition:-webkit-transform 150ms linear;transition:transform 150ms linear;transition:transform 150ms linear, -webkit-transform 150ms linear}.progress,.progress-indeterminate{background:var(--progress-background);z-index:2}.progress-buffer-bar{background:var(--background);z-index:1}.buffer-circles-container{overflow:hidden}.indeterminate-bar-primary{top:0;right:0;bottom:0;left:-145.166611%;-webkit-animation:primary-indeterminate-translate 2s infinite linear;animation:primary-indeterminate-translate 2s infinite linear}.indeterminate-bar-primary .progress-indeterminate{-webkit-animation:primary-indeterminate-scale 2s infinite linear;animation:primary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.indeterminate-bar-secondary{top:0;right:0;bottom:0;left:-54.888891%;-webkit-animation:secondary-indeterminate-translate 2s infinite linear;animation:secondary-indeterminate-translate 2s infinite linear}.indeterminate-bar-secondary .progress-indeterminate{-webkit-animation:secondary-indeterminate-scale 2s infinite linear;animation:secondary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.buffer-circles{background-image:radial-gradient(ellipse at center, var(--background) 0%, var(--background) 30%, transparent 30%);background-repeat:repeat-x;background-position:5px center;background-size:10px 10px;z-index:0;-webkit-animation:buffering 450ms infinite linear;animation:buffering 450ms infinite linear}:host(.progress-bar-reversed){-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.progress-paused) .indeterminate-bar-secondary,:host(.progress-paused) .indeterminate-bar-primary,:host(.progress-paused) .buffer-circles{-webkit-animation-play-state:paused;animation-play-state:paused}:host(.ion-color) .buffer-circles{background-image:radial-gradient(ellipse at center, rgba(var(--ion-color-base-rgb), 0.3) 0%, rgba(var(--ion-color-base-rgb), 0.3) 30%, transparent 30%)}:host(.ion-color) .progress,:host(.ion-color) .progress-indeterminate{background:var(--ion-color-base)}@-webkit-keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@-webkit-keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@-webkit-keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}@keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}:host{height:4px}:host(.ion-color) .progress-buffer-bar{background:rgba(var(--ion-color-base-rgb), 0.3)}"}}},[33,"ion-progress-bar",{type:[1],reversed:[4],value:[2],buffer:[2],color:[513]}]),hd=()=>(0,Y.h)("div",{part:"track",class:"progress-buffer-bar"},(0,Y.h)("div",{class:"indeterminate-bar-primary"},(0,Y.h)("span",{part:"progress",class:"progress-indeterminate"})),(0,Y.h)("div",{class:"indeterminate-bar-secondary"},(0,Y.h)("span",{part:"progress",class:"progress-indeterminate"}))),ja=(B,_)=>{const k=(0,At.k)(0,B,1),D=(0,At.k)(0,_,1);return[(0,Y.h)("div",{part:"progress",class:"progress",style:{transform:`scaleX(${k})`}}),(0,Y.h)("div",{class:{"buffer-circles-container":!0,"ion-hide":1===D},style:{transform:`translateX(${100*D}%)`}},(0,Y.h)("div",{class:"buffer-circles-container",style:{transform:`translateX(-${100*D}%)`}},(0,Y.h)("div",{part:"stream",class:"buffer-circles"}))),(0,Y.h)("div",{part:"track",class:"progress-buffer-bar",style:{transform:`scaleX(${D})`}})]},vh=function Qd(){typeof customElements>"u"||["ion-progress-bar"].forEach(_=>{"ion-progress-bar"===_&&(customElements.get(_)||customElements.define(_,Qh))})},zh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return(0,Y.h)(Y.xr,{key:"813c9a7f6782d2cf8eb27f30d3ab28e6f3122868",class:(0,ht.b)(this)},(0,Y.h)("slot",{key:"356bec4d4d408ea63d6b431b06465d5b7bcbff71"}))}static get style(){return":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}"}},[1,"ion-row"]),ls=function Jd(){typeof customElements>"u"||["ion-row"].forEach(_=>{"ion-row"===_&&(customElements.get(_)||customElements.define(_,zh))})};let Lh=0;const Kl=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.segmentEl=null,this.inheritedAttributes={},this.updateStyle=()=>{(0,Y.$x)(this)},this.updateState=()=>{const{segmentEl:_}=this;_&&(this.checked=_.value===this.value,_.disabled&&(this.disabled=!0))},this.checked=!1,this.disabled=!1,this.layout="icon-top",this.type="button",this.value="ion-sb-"+Lh++}valueChanged(){this.updateState()}connectedCallback(){const _=this.segmentEl=this.el.closest("ion-segment");_&&(this.updateState(),(0,At.a)(_,"ionSelect",this.updateState),(0,At.a)(_,"ionStyle",this.updateStyle))}disconnectedCallback(){const _=this.segmentEl;_&&((0,At.b)(_,"ionSelect",this.updateState),(0,At.b)(_,"ionStyle",this.updateStyle),this.segmentEl=null)}componentWillLoad(){this.inheritedAttributes=Object.assign({},(0,At.d)(this.el,["aria-label"]))}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}setFocus(){var _=this;return(0,We.A)(function*(){const{nativeEl:k}=_;void 0!==k&&k.focus()})()}render(){const{checked:_,type:k,disabled:D,hasIcon:q,hasLabel:ce,layout:De,segmentEl:dt}=this,Vt=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"70cf5c7a3ae2620222c5250c644faf3cfc3b3e4e",class:{[Vt]:!0,"in-toolbar":ps("ion-toolbar",this.el),"in-toolbar-color":ps("ion-toolbar[color]",this.el),"in-segment":ps("ion-segment",this.el),"in-segment-color":void 0!==(null==dt?void 0:dt.color),"segment-button-has-label":ce,"segment-button-has-icon":q,"segment-button-has-label-only":ce&&!q,"segment-button-has-icon-only":q&&!ce,"segment-button-disabled":D,"segment-button-checked":_,[`segment-button-layout-${De}`]:!0,"ion-activatable":!0,"ion-activatable-instant":!0,"ion-focusable":!0}},(0,Y.h)("button",Object.assign({key:"a53c9f1e360934e8d2e90476642ba4507fc38ebd","aria-selected":_?"true":"false",role:"tab",ref:fi=>this.nativeEl=fi,type:k,class:"button-native",part:"native",disabled:D},this.inheritedAttributes),(0,Y.h)("span",{key:"7d8feda840d389941cc693f500b5eba0b39b41da",class:"button-inner"},(0,Y.h)("slot",{key:"d9ae1eec45db253cbf573d29cd545658dd595d87"})),"md"===Vt&&(0,Y.h)("ion-ripple-effect",{key:"49e6a16968709dc9b3fc77bc9fb99acb42fda88c"})),(0,Y.h)("div",{key:"4e3ea0989ed5205dbb03586e4facb439b05a92de",part:"indicator",class:{"segment-button-indicator":!0,"segment-button-indicator-animated":!0}},(0,Y.h)("div",{key:"65c72a151080998c1e548c87d4d4ebd5c7dda72f",part:"indicator-background",class:"segment-button-indicator-background"})))}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:none;--background-hover-opacity:0;--background-focused:none;--background-focused-opacity:0;--border-radius:7px;--border-width:1px;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.12);--border-style:solid;--indicator-box-shadow:0 0 5px rgba(0, 0, 0, 0.16);--indicator-color:var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff)));--indicator-height:100%;--indicator-transition:transform 260ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--transition:100ms all linear;--padding-top:0;--padding-end:13px;--padding-bottom:0;--padding-start:13px;margin-top:2px;margin-bottom:2px;position:relative;-ms-flex-direction:row;flex-direction:row;min-width:70px;min-height:28px;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);font-size:13px;font-weight:450;line-height:37px}:host::before{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;-webkit-transition:160ms opacity ease-in-out;transition:160ms opacity ease-in-out;-webkit-transition-delay:100ms;transition-delay:100ms;border-left:var(--border-width) var(--border-style) var(--border-color);content:"";opacity:1;will-change:opacity}:host(:first-of-type)::before{border-left-color:transparent}:host(.segment-button-disabled){opacity:0.3}::slotted(ion-icon){font-size:24px}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:2px;margin-inline-end:2px}.segment-button-indicator{-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;left:0;right:0;top:0;bottom:0}.segment-button-indicator-background{border-radius:var(--border-radius);background:var(--indicator-color)}.segment-button-indicator-background{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked)::before,:host(.segment-button-after-checked)::before{opacity:0}:host(.segment-button-checked){z-index:-1}:host(.segment-button-activated){--indicator-transform:scale(0.95)}:host(.ion-focused) .button-native{opacity:0.7}@media (any-hover: hover){:host(:hover) .button-native{opacity:0.5}:host(.segment-button-checked:hover) .button-native{opacity:1}}:host(.in-segment-color){background:none;color:var(--ion-text-color, #000)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff)))}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native,:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-text-color, #000)}}:host(.in-toolbar:not(.in-segment-color)){--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, var(--ion-toolbar-color), initial);--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-toolbar-color), initial);--indicator-color:var(--ion-toolbar-segment-indicator-color, var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff))))}:host(.in-toolbar-color) .segment-button-indicator-background{background:var(--ion-color-contrast)}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color):hover) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color):hover) .button-native{color:var(--ion-color-base)}}',md:':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:var(--color-checked);--background-focused:var(--color-checked);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--color-checked:var(--ion-color-primary, #0054e9);--indicator-box-shadow:none;--indicator-color:var(--color-checked);--indicator-height:2px;--indicator-transition:transform 250ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--padding-top:0;--padding-end:16px;--padding-bottom:0;--padding-start:16px;--transition:color 0.15s linear 0s, opacity 0.15s linear 0s;min-width:90px;min-height:48px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);font-size:14px;font-weight:500;letter-spacing:0.06em;line-height:40px;text-transform:uppercase}:host(.segment-button-disabled){opacity:0.3}:host(.in-segment-color){background:none;color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color) ion-ripple-effect{color:var(--ion-color-base)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked) .button-native{color:var(--ion-color-base)}:host(.in-segment-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color:hover) .button-native::after{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-segment-color)){--background:var(--ion-toolbar-segment-background, none);--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6));--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-color-primary, #0054e9));--indicator-color:var(--ion-toolbar-segment-color-checked, var(--color-checked))}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:rgba(var(--ion-color-contrast-rgb), 0.6)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color)) .button-native::after{background:var(--ion-color-contrast)}}::slotted(ion-icon){margin-top:12px;margin-bottom:12px;font-size:24px}::slotted(ion-label){margin-top:12px;margin-bottom:12px}:host(.segment-button-layout-icon-top) ::slotted(ion-label),:host(.segment-button-layout-icon-bottom) ::slotted(ion-icon){margin-top:0}:host(.segment-button-layout-icon-top) ::slotted(ion-icon),:host(.segment-button-layout-icon-bottom) ::slotted(ion-label){margin-bottom:0}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}:host(.segment-button-has-icon-only) ::slotted(ion-icon){margin-top:12px;margin-bottom:12px}:host(.segment-button-has-label-only) ::slotted(ion-label){margin-top:12px;margin-bottom:12px}.segment-button-indicator{left:0;right:0;bottom:0}.segment-button-indicator-background{background:var(--indicator-color)}:host(.in-toolbar:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-toolbar-segment-indicator-color, var(--indicator-color))}:host(.in-toolbar-color:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-color-contrast)}'}}},[33,"ion-segment-button",{disabled:[1028],layout:[1],type:[1],value:[8],checked:[32],setFocus:[64]},void 0,{value:["valueChanged"]}]),Bc=function Nd(){typeof customElements>"u"||["ion-segment-button","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-segment-button":customElements.get(_)||customElements.define(_,Kl);break;case"ion-ripple-effect":customElements.get(_)||Ga()}})},_h=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inputId="ion-selopt-"+v++,this.disabled=!1,this.value=void 0}render(){return(0,Y.h)(Y.xr,{key:"ba5a9c695c53fe0802af11a49f4305a9b8f71773",role:"option",id:this.inputId,class:(0,ht.b)(this)})}get el(){return this}static get style(){return":host{display:none}"}},[1,"ion-select-option",{disabled:[4],value:[8]}]);let v=0;const b=function r(){typeof customElements>"u"||["ion-select-option"].forEach(_=>{"ion-select-option"===_&&(customElements.get(_)||customElements.define(_,_h))})};var M=_e(5680);const R=B=>{if(void 0===on.d||B===M.a.None||void 0===B)return null;const _=on.d.querySelector("ion-app");return null!=_?_:on.d.body},N=B=>{const _=R(B);return null===_?0:_.clientHeight},H=function(){var B=(0,We.A)(function*(_){let k,D,q,ce;const De=function(){var xi=(0,We.A)(function*(){const to=yield M.K.getResizeMode(),Vi=void 0===to?void 0:to.mode;k=()=>{void 0===ce&&(ce=N(Vi)),q=!0,dt(q,Vi)},D=()=>{q=!1,dt(q,Vi)},null==on.w||on.w.addEventListener("keyboardWillShow",k),null==on.w||on.w.addEventListener("keyboardWillHide",D)});return function(){return xi.apply(this,arguments)}}(),dt=(xi,to)=>{_&&_(xi,Vt(to))},Vt=xi=>{if(0===ce||ce===N(xi))return;const to=R(xi);return null!==to?new Promise(Vi=>{const zo=new ResizeObserver(()=>{to.clientHeight===ce&&(zo.disconnect(),Vi())});zo.observe(to)}):void 0};return yield De(),{init:De,destroy:()=>{null==on.w||on.w.removeEventListener("keyboardWillShow",k),null==on.w||on.w.removeEventListener("keyboardWillHide",D),k=D=void 0},isKeyboardVisible:()=>q}});return function(k){return B.apply(this,arguments)}}(),Pe=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=(0,Y.lh)(this,"ionTabBarChanged",7),this.ionTabBarLoaded=(0,Y.lh)(this,"ionTabBarLoaded",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){void 0!==this.selectedTab&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}connectedCallback(){var _=this;return(0,We.A)(function*(){_.keyboardCtrl=yield H(function(){var k=(0,We.A)(function*(D,q){!1===D&&void 0!==q&&(yield q),_.keyboardVisible=D});return function(D,q){return k.apply(this,arguments)}}())})()}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}componentDidLoad(){this.ionTabBarLoaded.emit()}render(){const{color:_,translucent:k,keyboardVisible:D}=this,q=(0,ht.b)(this),ce=D&&"top"!==this.el.getAttribute("slot");return(0,Y.h)(Y.xr,{key:"3a8595dd83f89e8319471a7a7f9f64b2565b384c",role:"tablist","aria-hidden":ce?"true":null,class:Kr(_,{[q]:!0,"tab-bar-translucent":k,"tab-bar-hidden":ce})},(0,Y.h)("slot",{key:"8b65eceb922f6abfa15f41046261586fb94b981f"}))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, var(--ion-text-color-step-400, #666666)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",md:":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.07)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, var(--ion-text-color-step-350, #595959)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:56px}"}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]},void 0,{selectedTab:["selectedTabChanged"]}]),Je=function Fe(){typeof customElements>"u"||["ion-tab-bar"].forEach(_=>{"ion-tab-bar"===_&&(customElements.get(_)||customElements.define(_,Pe))})},Ft=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=(0,Y.lh)(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=_=>{("Enter"===_.key||" "===_.key)&&this.selectTab(_)},this.onClick=_=>{this.selectTab(_)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(_){const k=_.target,D=this.el.parentElement;(_.composedPath().includes(D)||null!=k&&k.contains(this.el))&&(this.selected=this.tab===_.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},(0,At.d)(this.el,["aria-label"])),void 0===this.layout&&(this.layout=ht.c.get("tabButtonLayout","icon-top"))}selectTab(_){void 0!==this.tab&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),_.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:_,hasIcon:k,hasLabel:D,href:q,rel:ce,target:De,layout:dt,selected:Vt,tab:bn,inheritedAttributes:fi}=this,xi=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"4b528ce31f67e10ad849e0c99bd034bba675c227",onClick:this.onClick,onKeyup:this.onKeyUp,id:void 0!==bn?`tab-button-${bn}`:null,class:{[xi]:!0,"tab-selected":Vt,"tab-disabled":_,"tab-has-label":D,"tab-has-icon":k,"tab-has-label-only":D&&!k,"tab-has-icon-only":k&&!D,[`tab-layout-${dt}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},(0,Y.h)("a",Object.assign({key:"0da8784b1b243ffaaaf04dd7adb55d6881ed0c08"},{download:this.download,href:q,rel:ce,target:De},{class:"button-native",part:"native",role:"tab","aria-selected":Vt?"true":null,"aria-disabled":_?"true":null,tabindex:_?"-1":void 0},fi),(0,Y.h)("span",{key:"2c628e8f1ebc129f84876c01530468cb97d8bf3a",class:"button-inner"},(0,Y.h)("slot",{key:"8052a171d197a7de1a7eb12b091c35f73ae1ee21"})),"md"===xi&&(0,Y.h)("ion-ripple-effect",{key:"4186bdb5ed045ec16f495a14fa30ac864c576227",type:"unbounded"})))}get el(){return this}static get style(){return{ios:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:24px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){font-size:30px}',md:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}'}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]),_n=function tn(){typeof customElements>"u"||["ion-tab-button","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-tab-button":customElements.get(_)||customElements.define(_,Ft);break;case"ion-ripple-effect":customElements.get(_)||Ga()}})},Tn=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"4b76333b1ea5cab134b9dc1f5670c0d5a253fc32",class:Kr(this.color,{[_]:!0})},(0,Y.h)("slot",{key:"3dee5f16bc58b3d92547d910bd4f441a00ce2039"}))}static get style(){return":host(.ion-color){color:var(--ion-color-base)}"}},[1,"ion-text",{color:[513]}]),mn=function ci(){typeof customElements>"u"||["ion-text"].forEach(_=>{"ion-text"===_&&(customElements.get(_)||customElements.define(_,Tn))})},io=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return(0,Y.h)(Y.xr,{key:"ea55000055f941b0c79561e8934be6242ec8e114",class:(0,ht.b)(this)},(0,Y.h)("slot",{key:"a4f934f442797f5c66a77e0ef8920fdd07c204f2"}))}static get style(){return":host{--size:48px;--border-radius:0;border-radius:var(--border-radius);display:block;width:var(--size);height:var(--size)}::slotted(ion-img),::slotted(img){border-radius:var(--border-radius);width:100%;height:100%;-o-object-fit:cover;object-fit:cover;overflow:hidden}"}},[1,"ion-thumbnail"]),j=function ie(){typeof customElements>"u"||["ion-thumbnail"].forEach(_=>{"ion-thumbnail"===_&&(customElements.get(_)||customElements.define(_,io))})},hn=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const _=this.getSize();this.ionStyle.emit({[`title-${_}`]:!0})}getSize(){return void 0!==this.size?this.size:"default"}render(){const _=(0,ht.b)(this),k=this.getSize();return(0,Y.h)(Y.xr,{key:"5a58dc437a6f4257244bbdd7e9a682a17d8c9a6b",class:Kr(this.color,{[_]:!0,[`title-${k}`]:!0,"title-rtl":"rtl"===document.dir})},(0,Y.h)("div",{key:"58682ea7b8f47a08adfad419b5c76b34784c6501",class:"toolbar-title"},(0,Y.h)("slot",{key:"8a9248534e4c3076f5e2dfda38ef86069796851c"})))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:min(1.0625rem, 20.4px);font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host{inset-inline-start:0}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:min(0.8125rem, 23.4px);font-weight:normal}:host(.title-large){-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:2px;padding-bottom:4px;-webkit-transform-origin:left center;transform-origin:left center;position:static;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:min(2.125rem, 61.2px);font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000);font-family:var(--ion-font-family)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit;width:auto}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large:dir(rtl)) .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",md:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:1.25rem;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:0.9375rem;font-weight:normal}"}}},[33,"ion-title",{color:[513],size:[1]},void 0,{size:["sizeChanged"]}]),Wi=function Qn(){typeof customElements>"u"||["ion-title"].forEach(_=>{"ion-title"===_&&(customElements.get(_)||customElements.define(_,hn))})};const Mr=(B,_)=>Math.floor(B/2-_/2),Hr=(B,_)=>{const k=(0,mt.c)(),D=(0,mt.c)(),{position:q,top:ce,bottom:De}=_,Vt=(0,At.g)(B).querySelector(".toast-wrapper");switch(D.addElement(Vt),q){case"top":D.fromTo("transform","translateY(-100%)",`translateY(${ce})`);break;case"middle":const bn=Mr(B.clientHeight,Vt.clientHeight);Vt.style.top=`${bn}px`,D.fromTo("opacity",.01,1);break;default:D.fromTo("transform","translateY(100%)",`translateY(${De})`)}return k.easing("cubic-bezier(.155,1.105,.295,1.12)").duration(400).addAnimation(D)},Za=(B,_)=>{const k=(0,mt.c)(),D=(0,mt.c)(),{position:q,top:ce,bottom:De}=_,Vt=(0,At.g)(B).querySelector(".toast-wrapper");switch(D.addElement(Vt),q){case"top":D.fromTo("transform",`translateY(${ce})`,"translateY(-100%)");break;case"middle":D.fromTo("opacity",.99,0);break;default:D.fromTo("transform",`translateY(${De})`,"translateY(100%)")}return k.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(D)},As=(B,_)=>{const k=(0,mt.c)(),D=(0,mt.c)(),{position:q,top:ce,bottom:De}=_,Vt=(0,At.g)(B).querySelector(".toast-wrapper");switch(D.addElement(Vt),q){case"top":Vt.style.setProperty("transform",`translateY(${ce})`),D.fromTo("opacity",.01,1);break;case"middle":const bn=Mr(B.clientHeight,Vt.clientHeight);Vt.style.top=`${bn}px`,D.fromTo("opacity",.01,1);break;default:Vt.style.setProperty("transform",`translateY(${De})`),D.fromTo("opacity",.01,1)}return k.easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation(D)},ts=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),q=(0,At.g)(B).querySelector(".toast-wrapper");return k.addElement(q).fromTo("opacity",.99,0),_.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(k)},bl=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=(0,Y.lh)(this,"ionToastDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionToastWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionToastWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionToastDidDismiss",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.delegateController=aa(this),this.lockController=xn(),this.triggerController=Jn(),this.customHTMLEnabled=ht.c.get("innerHTMLTemplatesEnabled",!1),this.presented=!1,this.dispatchCancelHandler=_=>{if(Qr(_.detail.role)){const D=this.getButtons().find(q=>"cancel"===q.role);this.callButtonHandler(D)}},this.createSwipeGesture=_=>{(this.gesture=((B,_,k)=>{const D=Y.L2.isTesting?document.createElement("div"):(0,At.g)(B).querySelector(".toast-wrapper"),q=B.clientHeight,ce=D.getBoundingClientRect();let De=0;const Vt="middle"===B.position?.5:0,bn="top"===B.position?-1:1,fi=Mr(q,ce.height),xi=[{offset:0,transform:`translateY(-${fi+ce.height}px)`},{offset:.5,transform:"translateY(0px)"},{offset:1,transform:`translateY(${fi+ce.height}px)`}],to=(0,mt.c)("toast-swipe-to-dismiss-animation").addElement(D).duration(100);switch(B.position){case"middle":De=q+ce.height,to.keyframes(xi),to.progressStart(!0,.5);break;case"top":De=ce.bottom,to.keyframes([{offset:0,transform:`translateY(${_.top})`},{offset:1,transform:"translateY(-100%)"}]),to.progressStart(!0,0);break;default:De=q-ce.top,to.keyframes([{offset:0,transform:`translateY(${_.bottom})`},{offset:1,transform:"translateY(100%)"}]),to.progressStart(!0,0)}const Vi=as=>as*bn/De,yr=(0,Ye.createGesture)({el:D,gestureName:"toast-swipe-to-dismiss",gesturePriority:39,direction:"y",onMove:as=>{const _s=Vt+Vi(as.deltaY);to.progressStep(_s)},onEnd:as=>{const _s=as.velocityY,Ur=(as.deltaY+1e3*_s)/De*bn;yr.enable(!1);let ws=!0,xs=1,Vs=0,fl=0;if("middle"===B.position){ws=Ur>=.25||Ur<=-.25,xs=1,Vs=0;const Rl=D.getBoundingClientRect(),Ql=Rl.top-fi,ed=(fi+Rl.height)*(as.deltaY<=0?-1:1);to.keyframes([{offset:0,transform:`translateY(${Ql}px)`},{offset:1,transform:`translateY(${ws?`${ed}px`:"0px"})`}]),fl=ed-Ql}else ws=Ur>=.5,xs=ws?1:0,Vs=Vi(as.deltaY),fl=(ws?1-Vs:Vs)*De;const Cc=Math.min(Math.abs(fl)/Math.abs(_s),200);to.onFinish(()=>{ws?(k(),to.destroy()):("middle"===B.position?to.keyframes(xi).progressStart(!0,.5):to.progressStart(!0,0),yr.enable(!0))},{oneTimeCallback:!0}).progressEnd(xs,Vs,Cc)}});return yr})(this.el,_,()=>{this.dismiss(void 0,xr)})).enable(!0)},this.destroySwipeGesture=()=>{const{gesture:_}=this;void 0!==_&&(_.destroy(),this.gesture=void 0)},this.prefersSwipeGesture=()=>{const{swipeGesture:_}=this;return"vertical"===_},this.revealContentToScreenReader=!1,this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.color=void 0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.duration=ht.c.getNumber("toastDuration",0),this.header=void 0,this.layout="baseline",this.message=void 0,this.keyboardClose=!1,this.position="bottom",this.positionAnchor=void 0,this.buttons=void 0,this.translucent=!1,this.animated=!0,this.icon=void 0,this.htmlAttributes=void 0,this.swipeGesture=void 0,this.isOpen=!1,this.trigger=void 0}swipeGestureChanged(){this.destroySwipeGesture(),this.presented&&this.prefersSwipeGesture()&&this.createSwipeGesture(this.lastPresentedPosition)}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}triggerChanged(){const{trigger:_,el:k,triggerController:D}=this;_&&D.addClickListener(k,_)}connectedCallback(){Ei(this.el),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){ko(this.el)}componentDidLoad(){!0===this.isOpen&&(0,At.r)(()=>this.present()),this.triggerChanged()}present(){var _=this;return(0,We.A)(function*(){const k=yield _.lockController.lock();yield _.delegateController.attachViewToDom();const{el:D,position:q}=_,De=function vr(B,_,k,D){let q;if(q="md"===k?"top"===B?8:-8:"top"===B?10:-10,_&&on.w){!function Sr(B,_){null===B.offsetParent&&(0,kn.p)("The positionAnchor element for ion-toast was found in the DOM, but appears to be hidden. This may lead to unexpected positioning of the toast.",_)}(_,D);const ce=_.getBoundingClientRect();return"top"===B?q+=ce.bottom:"bottom"===B&&(q-=on.w.innerHeight-ce.top),{top:`${q}px`,bottom:`${q}px`}}return{top:`calc(${q}px + var(--ion-safe-area-top, 0px))`,bottom:`calc(${q}px - var(--ion-safe-area-bottom, 0px))`}}(q,_.getAnchorElement(),(0,ht.b)(_),D);_.lastPresentedPosition=De,yield Br(_,"toastEnter",Hr,As,{position:q,top:De.top,bottom:De.bottom}),_.revealContentToScreenReader=!0,_.duration>0&&(_.durationTimeout=setTimeout(()=>_.dismiss(void 0,"timeout"),_.duration)),_.prefersSwipeGesture()&&_.createSwipeGesture(De),k()})()}dismiss(_,k){var D=this;return(0,We.A)(function*(){var q,ce;const De=yield D.lockController.lock(),{durationTimeout:dt,position:Vt,lastPresentedPosition:bn}=D;dt&&clearTimeout(dt);const fi=yield ro(D,_,k,"toastLeave",Za,ts,{position:Vt,top:null!==(q=null==bn?void 0:bn.top)&&void 0!==q?q:"",bottom:null!==(ce=null==bn?void 0:bn.bottom)&&void 0!==ce?ce:""});return fi&&(D.delegateController.removeViewFromDom(),D.revealContentToScreenReader=!1),D.lastPresentedPosition=void 0,D.destroySwipeGesture(),De(),fi})()}onDidDismiss(){return zr(this.el,"ionToastDidDismiss")}onWillDismiss(){return zr(this.el,"ionToastWillDismiss")}getButtons(){return this.buttons?this.buttons.map(k=>"string"==typeof k?{text:k}:k):[]}getAnchorElement(){const{position:_,positionAnchor:k,el:D}=this;if(void 0!==k){if("middle"===_&&void 0!==k)return void(0,kn.p)('The positionAnchor property is ignored when using position="middle".',this.el);if("string"==typeof k){const q=document.getElementById(k);return null===q?void(0,kn.p)(`An anchor element with an ID of "${k}" was not found in the DOM.`,D):q}if(k instanceof Y.wt)return k;(0,kn.p)("Invalid positionAnchor value:",k,D)}}buttonClick(_){var k=this;return(0,We.A)(function*(){const D=_.role;return Qr(D)||(yield k.callButtonHandler(_))?k.dismiss(void 0,D):Promise.resolve()})()}callButtonHandler(_){return(0,We.A)(function*(){if(null!=_&&_.handler)try{if(!1===(yield lr(_.handler)))return!1}catch(k){console.error(k)}return!0})()}renderButtons(_,k){if(0===_.length)return;const D=(0,ht.b)(this);return(0,Y.h)("div",{class:{"toast-button-group":!0,[`toast-button-group-${k}`]:!0}},_.map(ce=>(0,Y.h)("button",Object.assign({},ce.htmlAttributes,{type:"button",class:ua(ce),tabIndex:0,onClick:()=>this.buttonClick(ce),part:za(ce)}),(0,Y.h)("div",{class:"toast-button-inner"},ce.icon&&(0,Y.h)("ion-icon",{"aria-hidden":"true",icon:ce.icon,slot:void 0===ce.text?"icon-only":void 0,class:"toast-button-icon"}),ce.text),"md"===D&&(0,Y.h)("ion-ripple-effect",{type:void 0!==ce.icon&&void 0===ce.text?"unbounded":"bounded"}))))}renderToastMessage(_,k=null){const{customHTMLEnabled:D,message:q}=this;return D?(0,Y.h)("div",{key:_,"aria-hidden":k,class:"toast-message",part:"message",innerHTML:Hn(q)}):(0,Y.h)("div",{key:_,"aria-hidden":k,class:"toast-message",part:"message"},q)}renderHeader(_,k=null){return(0,Y.h)("div",{key:_,class:"toast-header","aria-hidden":k,part:"header"},this.header)}render(){const{layout:_,el:k,revealContentToScreenReader:D,header:q,message:ce}=this,De=this.getButtons(),dt=De.filter(xi=>"start"===xi.side),Vt=De.filter(xi=>"start"!==xi.side),bn=(0,ht.b)(this),fi={"toast-wrapper":!0,[`toast-${this.position}`]:!0,[`toast-layout-${_}`]:!0};return"stacked"===_&&dt.length>0&&Vt.length>0&&(0,kn.p)("This toast is using start and end buttons with the stacked toast layout. We recommend following the best practice of using either start or end buttons with the stacked toast layout.",k),(0,Y.h)(Y.xr,Object.assign({key:"da148788489146a20b42023fdc6401e53c044767",tabindex:"-1"},this.htmlAttributes,{style:{zIndex:`${6e4+this.overlayIndex}`},class:Kr(this.color,Object.assign(Object.assign({[bn]:!0},ni(this.cssClass)),{"overlay-hidden":!0,"toast-translucent":this.translucent})),onIonToastWillDismiss:this.dispatchCancelHandler}),(0,Y.h)("div",{key:"ab0a4d783aa43ba961492b3eb8beb60a38153057",class:fi},(0,Y.h)("div",{key:"83e49027fd1ca6553d6910ff91befeea43576f3c",class:"toast-container",part:"container"},this.renderButtons(dt,"start"),void 0!==this.icon&&(0,Y.h)("ion-icon",{key:"025cb4b6b170a89548969a25bcce4ab7a3817898",class:"toast-icon",part:"icon",icon:this.icon,lazy:!1,"aria-hidden":"true"}),(0,Y.h)("div",{key:"b811b4e1cbc1528c2cfb57898f5615692120f840",class:"toast-content",role:"status","aria-atomic":"true","aria-live":"polite"},!D&&void 0!==q&&this.renderHeader("oldHeader","true"),!D&&void 0!==ce&&this.renderToastMessage("oldMessage","true"),D&&void 0!==q&&this.renderHeader("header"),D&&void 0!==ce&&this.renderToastMessage("header")),this.renderButtons(Vt,"end"))))}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}:host{inset-inline-start:0}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:auto;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-radius:14px;--button-color:var(--ion-color-primary, #0054e9);--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--max-width:700px;--max-height:478px;--start:10px;--end:10px;font-size:clamp(14px, 0.875rem, 43.4px)}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;z-index:10}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.toast-translucent) .toast-wrapper{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}:host(.ion-color.toast-translucent) .toast-wrapper{background:rgba(var(--ion-color-base-rgb), 0.8)}}.toast-wrapper.toast-middle{opacity:0.01}.toast-content{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:15px;padding-bottom:15px}.toast-header{margin-bottom:2px;font-weight:500}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;min-height:44px;-webkit-transition:background-color, opacity 100ms linear;transition:background-color, opacity 100ms linear;border:0;background-color:transparent;font-family:var(--ion-font-family);font-size:clamp(17px, 1.0625rem, 21.998px);font-weight:500;overflow:hidden}.toast-button.ion-activated{opacity:0.4}@media (any-hover: hover){.toast-button:hover{opacity:0.6}}",md:":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}:host{inset-inline-start:0}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:auto;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-800, var(--ion-background-color-step-800, #333333));--border-radius:4px;--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--button-color:var(--ion-color-primary, #0054e9);--color:var(--ion-color-step-50, var(--ion-text-color-step-950, #f2f2f2));--max-width:700px;--start:8px;--end:8px;font-size:0.875rem}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;opacity:0.01;z-index:10}.toast-content{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:14px;padding-bottom:14px}.toast-header{margin-bottom:2px;font-weight:500;line-height:1.25rem}.toast-message{line-height:1.25rem}.toast-layout-baseline .toast-button-group-start{-webkit-margin-start:8px;margin-inline-start:8px}.toast-layout-stacked .toast-button-group-start{-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px}.toast-layout-baseline .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px}.toast-layout-stacked .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px;margin-bottom:8px}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;font-family:var(--ion-font-family);font-size:0.875rem;font-weight:500;letter-spacing:0.84px;text-transform:uppercase;overflow:hidden}.toast-button-cancel{color:var(--ion-color-step-100, var(--ion-text-color-step-900, #e6e6e6))}.toast-button-icon-only{border-radius:50%;-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:9px;padding-bottom:9px;width:36px;height:36px}@media (any-hover: hover){.toast-button:hover{background-color:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.08)}.toast-button-cancel:hover{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.08)}}"}}},[33,"ion-toast",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],color:[513],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],duration:[2],header:[1],layout:[1],message:[1],keyboardClose:[4,"keyboard-close"],position:[1],positionAnchor:[1,"position-anchor"],buttons:[16],translucent:[4],animated:[4],icon:[1],htmlAttributes:[16],swipeGesture:[1,"swipe-gesture"],isOpen:[4,"is-open"],trigger:[1],revealContentToScreenReader:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),ua=B=>({"toast-button":!0,"toast-button-icon-only":void 0!==B.icon&&void 0===B.text,[`toast-button-${B.role}`]:void 0!==B.role,"ion-focusable":!0,"ion-activatable":!0}),za=B=>Qr(B.role)?"button cancel":"button",Uc=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const _=Array.from(this.el.querySelectorAll("ion-buttons")),k=_.find(ce=>"start"===ce.slot);k&&k.classList.add("buttons-first-slot");const D=_.reverse(),q=D.find(ce=>"end"===ce.slot)||D.find(ce=>"primary"===ce.slot)||D.find(ce=>"secondary"===ce.slot);q&&q.classList.add("buttons-last-slot")}childrenStyle(_){_.stopPropagation();const k=_.target.tagName,D=_.detail,q={},ce=this.childrenStyles.get(k)||{};let De=!1;Object.keys(D).forEach(dt=>{const Vt=`toolbar-${dt}`,bn=D[dt];bn!==ce[Vt]&&(De=!0),bn&&(q[Vt]=!0)}),De&&(this.childrenStyles.set(k,q),(0,Y.$x)(this))}render(){const _=(0,ht.b)(this),k={};return this.childrenStyles.forEach(D=>{Object.assign(k,D)}),(0,Y.h)(Y.xr,{key:"4bb3a55001408a3bdf033af76b9196cb96c07c09",class:Object.assign(Object.assign({},k),Kr(this.color,{[_]:!0,"in-toolbar":ps("ion-toolbar",this.el)}))},(0,Y.h)("div",{key:"0891db157d6e028c6d03696f13fb510ea91b0296",class:"toolbar-background"}),(0,Y.h)("div",{key:"95fbc870d808f74af4bb18cd8f8ec8c7828a9e0b",class:"toolbar-container"},(0,Y.h)("slot",{key:"84d4a9644660fe00ca085055ca8d12f3647531ad",name:"start"}),(0,Y.h)("slot",{key:"fd361dc9c9979f59aed2fedcf94629506fae62b0",name:"secondary"}),(0,Y.h)("div",{key:"54d2b28616a4627c55766f66dc453707752758a6",class:"toolbar-content"},(0,Y.h)("slot",{key:"8f65e0830cce7135640b90eb694e282cb7e5efd2"})),(0,Y.h)("slot",{key:"c78be11a207c8674f222543646398636956087e6",name:"primary"}),(0,Y.h)("slot",{key:"ab25e1601ccaa8cb0d81921b849bcb7402aa7826",name:"end"})))}get el(){return this}static get style(){return{ios:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",md:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, #c1c4cd))));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}"}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]),Jh=function Nc(){typeof customElements>"u"||["ion-toolbar"].forEach(_=>{"ion-toolbar"===_&&(customElements.get(_)||customElements.define(_,Uc))})};var hl=_e(4341);const P1=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.inputId="ion-cb-"+Po++,this.inheritedAttributes={},this.setChecked=_=>{const k=this.checked=_;this.ionChange.emit({checked:k,value:this.value})},this.toggleChecked=_=>{_.preventDefault(),this.setFocus(),this.setChecked(!this.checked),this.indeterminate=!1},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.onClick=_=>{this.disabled||this.toggleChecked(_)},this.color=void 0,this.name=this.inputId,this.checked=!1,this.indeterminate=!1,this.disabled=!1,this.value="on",this.labelPlacement="start",this.justify="space-between",this.alignment="center"}componentWillLoad(){this.inheritedAttributes=Object.assign({},(0,At.i)(this.el))}setFocus(){this.focusEl&&this.focusEl.focus()}render(){const{color:_,checked:k,disabled:D,el:q,getSVGPath:ce,indeterminate:De,inheritedAttributes:dt,inputId:Vt,justify:bn,labelPlacement:fi,name:xi,value:to,alignment:Vi}=this,xo=(0,ht.b)(this),zo=ce(xo,De);return(0,At.e)(!0,q,xi,k?to:"",D),(0,Y.h)(Y.xr,{key:"0ac95890562c7f035704c40959c69f8c8ca4bc9f","aria-checked":De?"mixed":`${k}`,class:Kr(_,{[xo]:!0,"in-item":ps("ion-item",q),"checkbox-checked":k,"checkbox-disabled":D,"checkbox-indeterminate":De,interactive:!0,[`checkbox-justify-${bn}`]:!0,[`checkbox-alignment-${Vi}`]:!0,[`checkbox-label-placement-${fi}`]:!0}),onClick:this.onClick},(0,Y.h)("label",{key:"3f9f7c8383dded8f7997086b25399d052df76b5c",class:"checkbox-wrapper"},(0,Y.h)("input",Object.assign({key:"6fb11d06c424c289357d5d7c1a4d1b967be231d0",type:"checkbox",checked:!!k||void 0,disabled:D,id:Vt,onChange:this.toggleChecked,onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur(),ref:yr=>this.focusEl=yr},dt)),(0,Y.h)("div",{key:"f577a272e5e3f9f1852fc95e40466c80b76309c7",class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":""===q.textContent},part:"label"},(0,Y.h)("slot",{key:"7c9b0b4513e797a1acdf55a5f286563e5f397e9c"})),(0,Y.h)("div",{key:"e47c50a078b8d761ddc5efcb9a9635281b5818f6",class:"native-wrapper"},(0,Y.h)("svg",{key:"4dca47179ae15e9094e01c799ef4ed25fbb0d840",class:"checkbox-icon",viewBox:"0 0 24 24",part:"container"},zo))))}getSVGPath(_,k){let D=(0,Y.h)("path",k?{d:"M6 12L18 12",part:"mark"}:{d:"M5.9,12.5l3.8,3.8l8.8-8.8",part:"mark"});return"md"===_&&(D=(0,Y.h)("path",k?{d:"M2 12H22",part:"mark"}:{d:"M1.73,12.91 8.1,19.28 22.79,4.59",part:"mark"})),D}get el(){return this}static get style(){return{ios:":host{--checkbox-background-checked:var(--ion-color-primary, #0054e9);--border-color-checked:var(--ion-color-primary, #0054e9);--checkmark-color:var(--ion-color-primary-contrast, #fff);--transition:none;display:inline-block;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}:host(.ion-color){--checkbox-background-checked:var(--ion-color-base);--border-color-checked:var(--ion-color-base);--checkmark-color:var(--ion-color-contrast)}.checkbox-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.checkbox-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.checkbox-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.checkbox-icon{border-radius:var(--border-radius);position:relative;width:var(--size);height:var(--size);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--checkbox-background);-webkit-box-sizing:border-box;box-sizing:border-box}.checkbox-icon path{fill:none;stroke:var(--checkmark-color);stroke-width:var(--checkmark-width);opacity:0}:host(.checkbox-justify-space-between) .checkbox-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.checkbox-justify-start) .checkbox-wrapper{-ms-flex-pack:start;justify-content:start}:host(.checkbox-justify-end) .checkbox-wrapper{-ms-flex-pack:end;justify-content:end}:host(.checkbox-alignment-start) .checkbox-wrapper{-ms-flex-align:start;align-items:start}:host(.checkbox-alignment-center) .checkbox-wrapper{-ms-flex-align:center;align-items:center}:host(.checkbox-label-placement-start) .checkbox-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.checkbox-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-end) .checkbox-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.checkbox-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.checkbox-label-placement-stacked) .checkbox-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.checkbox-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host(.checkbox-checked) .checkbox-icon,:host(.checkbox-indeterminate) .checkbox-icon{border-color:var(--border-color-checked);background:var(--checkbox-background-checked)}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{opacity:1}:host(.checkbox-disabled){pointer-events:none}:host{--border-radius:50%;--border-width:0.125rem;--border-style:solid;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.23);--checkbox-background:var(--ion-item-background, var(--ion-background-color, #fff));--size:min(1.375rem, 55.836px);--checkmark-width:1.5px}:host(.checkbox-disabled){opacity:0.3}",md:":host{--checkbox-background-checked:var(--ion-color-primary, #0054e9);--border-color-checked:var(--ion-color-primary, #0054e9);--checkmark-color:var(--ion-color-primary-contrast, #fff);--transition:none;display:inline-block;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}:host(.ion-color){--checkbox-background-checked:var(--ion-color-base);--border-color-checked:var(--ion-color-base);--checkmark-color:var(--ion-color-contrast)}.checkbox-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.checkbox-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.checkbox-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.checkbox-icon{border-radius:var(--border-radius);position:relative;width:var(--size);height:var(--size);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--checkbox-background);-webkit-box-sizing:border-box;box-sizing:border-box}.checkbox-icon path{fill:none;stroke:var(--checkmark-color);stroke-width:var(--checkmark-width);opacity:0}:host(.checkbox-justify-space-between) .checkbox-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.checkbox-justify-start) .checkbox-wrapper{-ms-flex-pack:start;justify-content:start}:host(.checkbox-justify-end) .checkbox-wrapper{-ms-flex-pack:end;justify-content:end}:host(.checkbox-alignment-start) .checkbox-wrapper{-ms-flex-align:start;align-items:start}:host(.checkbox-alignment-center) .checkbox-wrapper{-ms-flex-align:center;align-items:center}:host(.checkbox-label-placement-start) .checkbox-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.checkbox-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-end) .checkbox-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.checkbox-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.checkbox-label-placement-stacked) .checkbox-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.checkbox-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host(.checkbox-checked) .checkbox-icon,:host(.checkbox-indeterminate) .checkbox-icon{border-color:var(--border-color-checked);background:var(--checkbox-background-checked)}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{opacity:1}:host(.checkbox-disabled){pointer-events:none}:host{--border-radius:calc(var(--size) * .125);--border-width:2px;--border-style:solid;--border-color:rgb(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--checkmark-width:3;--checkbox-background:var(--ion-item-background, var(--ion-background-color, #fff));--transition:background 180ms cubic-bezier(0.4, 0, 0.2, 1);--size:18px}.checkbox-icon path{stroke-dasharray:30;stroke-dashoffset:30}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{stroke-dashoffset:0;-webkit-transition:stroke-dashoffset 90ms linear 90ms;transition:stroke-dashoffset 90ms linear 90ms}:host(.checkbox-disabled) .label-text-wrapper{opacity:0.38}:host(.checkbox-disabled) .native-wrapper{opacity:0.63}"}}},[33,"ion-checkbox",{color:[513],name:[1],checked:[1028],indeterminate:[1028],disabled:[4],value:[8],labelPlacement:[1,"label-placement"],justify:[1],alignment:[1]}]);let Po=0;function da(){typeof customElements>"u"||["ion-checkbox"].forEach(_=>{"ion-checkbox"===_&&(customElements.get(_)||customElements.define(_,P1))})}const Nh=da;_e(5498);const Uf=B=>{const _=B.getTimezoneOffset();return B.setMinutes(B.getMinutes()-_),B};let ff;Uf(new Date("2022T01:00")),Uf(new Date("2022T13:00"));const T2=(B,_)=>{const k=(()=>{if(typeof window>"u")return new Map;if(!ff){const B=window;B.Ionicons=B.Ionicons||{},ff=B.Ionicons.map=B.Ionicons.map||new Map}return ff})().get(B);if(k)return k;try{return(0,Y.OX)(`svg/${B}.svg`)}catch{console.warn(`[Ionicons Warning]: Could not load icon with name "${B}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,_)}},fm=(B,_,k,D,q)=>(k="ios"===(k&&y1(k))?"ios":"md",D&&"ios"===k?B=y1(D):q&&"md"===k?B=y1(q):(!B&&_&&!s0(_)&&(B=_),Sp(B)&&(B=y1(B))),Sp(B)&&""!==B.trim()&&""===B.replace(/[a-z]|-|\d/gi,"")?B:null),kp=B=>Sp(B)&&(B=B.trim(),s0(B))?B:null,s0=B=>B.length>0&&/(\/|\.)/.test(B),Sp=B=>"string"==typeof B,y1=B=>B.toLowerCase(),o1=B=>B&&""!==B.dir?"rtl"===B.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase()),M2=B=>{if(1===B.nodeType){if("script"===B.nodeName.toLowerCase())return!1;for(let _=0;_<B.attributes.length;_++){const k=B.attributes[_].name;if(Sp(k)&&0===k.toLowerCase().indexOf("on"))return!1}for(let _=0;_<B.childNodes.length;_++)if(!M2(B.childNodes[_]))return!1}return!0},wu=new Map,A2=new Map;let D2;const Yf=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=Ks(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((B,_=[])=>{const k={};return _.forEach(D=>{B.hasAttribute(D)&&(null!==B.getAttribute(D)&&(k[D]=B.getAttribute(D)),B.removeAttribute(D))}),k})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(_,k,D){if(Y.L2.isBrowser&&this.lazy&&typeof window<"u"&&window.IntersectionObserver){const q=this.io=new window.IntersectionObserver(ce=>{ce[0].isIntersecting&&(q.disconnect(),this.io=void 0,D())},{rootMargin:k});q.observe(_)}else D()}loadIcon(){if(Y.L2.isBrowser&&this.isVisible){const _=(B=>{let _=kp(B.src);return _||(_=fm(B.name,B.icon,B.mode,B.ios,B.md),_?T2(_,B):B.icon&&(_=kp(B.icon),_||(_=kp(B.icon[B.mode]),_))?_:null)})(this);_&&(wu.has(_)?this.svgContent=wu.get(_):((B,_)=>{let k=A2.get(B);if(!k){if(!(typeof fetch<"u"&&typeof document<"u"))return wu.set(B,""),Promise.resolve();if((B=>B.startsWith("data:image/svg+xml"))(B)&&(B=>-1!==B.indexOf(";utf8,"))(B)){D2||(D2=new DOMParser);const q=D2.parseFromString(B,"text/html").querySelector("svg");return q&&wu.set(B,q.outerHTML),Promise.resolve()}k=fetch(B).then(D=>{if(D.ok)return D.text().then(q=>{q&&!1!==_&&(q=(B=>{const _=document.createElement("div");_.innerHTML=B;for(let D=_.childNodes.length-1;D>=0;D--)"svg"!==_.childNodes[D].nodeName.toLowerCase()&&_.removeChild(_.childNodes[D]);const k=_.firstElementChild;if(k&&"svg"===k.nodeName.toLowerCase()){const D=k.getAttribute("class")||"";if(k.setAttribute("class",(D+" s-ion-icon").trim()),M2(k))return _.innerHTML}return""})(q)),wu.set(B,q||"")});wu.set(B,"")}),A2.set(B,k)}return k})(_,this.sanitize).then(()=>this.svgContent=wu.get(_)),this.didLoadIcon=!0)}this.iconName=fm(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:_,iconName:k,inheritedAttributes:D,el:q}=this,ce=this.mode||"md",De=!!k&&(k.includes("arrow")||k.includes("chevron"))&&!1!==_,dt=_||De;return(0,Y.h)(Y.xr,Object.assign({role:"img",class:Object.assign(Object.assign({[ce]:!0},Km(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":dt,"icon-rtl":dt&&o1(q)})},D),(0,Y.h)("div",Y.L2.isBrowser&&this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),Ks=()=>Y.L2.isBrowser&&typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",Km=B=>B?{"ion-color":!0,[`ion-color-${B}`]:!0}:null,Ym=function mm(){typeof customElements>"u"||["ion-icon"].forEach(_=>{"ion-icon"===_&&(customElements.get(_)||customElements.define(_,Yf))})},Ou=(B,_,k)=>{let D;const q=()=>!(void 0===_()||void 0!==B.label||null===k()),De=()=>{const Vt=_();if(void 0===Vt)return;if(!q())return void Vt.style.removeProperty("width");const bn=k().scrollWidth;if(0===bn&&null===Vt.offsetParent&&void 0!==on.w&&"IntersectionObserver"in on.w){if(void 0!==D)return;const fi=D=new IntersectionObserver(xi=>{1===xi[0].intersectionRatio&&(De(),fi.disconnect(),D=void 0)},{threshold:.01,root:B});fi.observe(Vt)}else Vt.style.setProperty("width",.75*bn+"px")};return{calculateNotchWidth:()=>{q()&&(0,At.r)(()=>{De()})},destroy:()=>{D&&(D.disconnect(),D=void 0)}}},Ul=(B,_,k)=>{let D,q;if(void 0!==on.w&&"MutationObserver"in on.w){const Vt=Array.isArray(_)?_:[_];D=new MutationObserver(bn=>{for(const fi of bn)for(const xi of fi.addedNodes)if(xi.nodeType===Node.ELEMENT_NODE&&Vt.includes(xi.slot))return k(),void(0,At.r)(()=>ce(xi))}),D.observe(B,{childList:!0,subtree:!0})}const ce=Vt=>{var bn;q&&(q.disconnect(),q=void 0),q=new MutationObserver(fi=>{k();for(const xi of fi)for(const to of xi.removedNodes)to.nodeType===Node.ELEMENT_NODE&&to.slot===_&&dt()}),q.observe(null!==(bn=Vt.parentElement)&&void 0!==bn?bn:Vt,{subtree:!0,childList:!0})},dt=()=>{q&&(q.disconnect(),q=void 0)};return{destroy:()=>{D&&(D.disconnect(),D=void 0),dt()}}},a0=(B,_,k)=>{const D=null==B?0:B.toString().length,q=Ap(D,_);if(void 0===k)return q;try{return k(D,_)}catch(ce){return(0,kn.a)("Exception in provided `counterFormatter`.",ce),q}},Ap=(B,_)=>`${B} / ${_}`,Rg=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.ionInput=(0,Y.lh)(this,"ionInput",7),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.inputId="ion-input-"+Zf++,this.inheritedAttributes={},this.isComposing=!1,this.didInputClearOnEdit=!1,this.onInput=_=>{const k=_.target;k&&(this.value=k.value||""),this.emitInputChange(_)},this.onChange=_=>{this.emitValueChange(_)},this.onBlur=_=>{this.hasFocus=!1,this.focusedValue!==this.value&&this.emitValueChange(_),this.didInputClearOnEdit=!1,this.ionBlur.emit(_)},this.onFocus=_=>{this.hasFocus=!0,this.focusedValue=this.value,this.ionFocus.emit(_)},this.onKeydown=_=>{this.checkClearOnEdit(_)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=_=>{this.clearInput&&!this.readonly&&!this.disabled&&_&&(_.preventDefault(),_.stopPropagation(),this.setFocus()),this.value="",this.emitInputChange(_)},this.hasFocus=!1,this.color=void 0,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.clearInputIcon=void 0,this.clearOnEdit=void 0,this.counter=!1,this.counterFormatter=void 0,this.debounce=void 0,this.disabled=!1,this.enterkeyhint=void 0,this.errorText=void 0,this.fill=void 0,this.inputmode=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.max=void 0,this.maxlength=void 0,this.min=void 0,this.minlength=void 0,this.multiple=void 0,this.name=this.inputId,this.pattern=void 0,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.shape=void 0,this.spellcheck=!1,this.step=void 0,this.type="text",this.value=""}debounceChanged(){const{ionInput:_,debounce:k,originalIonInput:D}=this;this.ionInput=void 0===k?null!=D?D:_:(0,At.l)(_,k)}onTypeChange(){const _=this.el.querySelector("ion-input-password-toggle");_&&(_.type=this.type)}valueChanged(){const _=this.nativeInput,k=this.getValue();_&&_.value!==k&&!this.isComposing&&(_.value=k)}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},(0,At.i)(this.el)),(0,At.d)(this.el,["tabindex","title","data-form-type"]))}connectedCallback(){const{el:_}=this;this.slotMutationController=Ul(_,["label","start","end"],()=>(0,Y.$x)(this)),this.notchController=Ou(_,()=>this.notchSpacerEl,()=>this.labelSlot),this.debounceChanged(),Y.L2.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){this.originalIonInput=this.ionInput,this.onTypeChange(),this.debounceChanged()}componentDidRender(){var _;null===(_=this.notchController)||void 0===_||_.calculateNotchWidth()}disconnectedCallback(){Y.L2.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}setFocus(){var _=this;return(0,We.A)(function*(){_.nativeInput&&_.nativeInput.focus()})()}getInputElement(){var _=this;return(0,We.A)(function*(){return _.nativeInput||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.nativeInput)})()}emitValueChange(_){const{value:k}=this,D=null==k?k:k.toString();this.focusedValue=D,this.ionChange.emit({value:D,event:_})}emitInputChange(_){const{value:k}=this,D=null==k?k:k.toString();this.ionInput.emit({value:D,event:_})}shouldClearOnEdit(){const{type:_,clearOnEdit:k}=this;return void 0===k?"password"===_:k}getValue(){return"number"==typeof this.value?this.value.toString():(this.value||"").toString()}checkClearOnEdit(_){if(!this.shouldClearOnEdit())return;const D=["Enter","Tab","Shift","Meta","Alt","Control"].includes(_.key);!this.didInputClearOnEdit&&this.hasValue()&&!D&&(this.value="",this.emitInputChange(_)),D||(this.didInputClearOnEdit=!0)}hasValue(){return this.getValue().length>0}renderHintText(){const{helperText:_,errorText:k}=this;return[(0,Y.h)("div",{class:"helper-text"},_),(0,Y.h)("div",{class:"error-text"},k)]}renderCounter(){const{counter:_,maxlength:k,counterFormatter:D,value:q}=this;if(!0===_&&void 0!==k)return(0,Y.h)("div",{class:"counter"},a0(q,k,D))}renderBottomContent(){const{counter:_,helperText:k,errorText:D,maxlength:q}=this;if(k||D||!0===_&&void 0!==q)return(0,Y.h)("div",{class:"input-bottom"},this.renderHintText(),this.renderCounter())}renderLabel(){const{label:_}=this;return(0,Y.h)("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},void 0===_?(0,Y.h)("slot",{name:"label"}):(0,Y.h)("div",{class:"label-text"},_))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return void 0!==this.label||null!==this.labelSlot}renderLabelContainer(){return"md"===(0,ht.b)(this)&&"outline"===this.fill?[(0,Y.h)("div",{class:"input-outline-container"},(0,Y.h)("div",{class:"input-outline-start"}),(0,Y.h)("div",{class:{"input-outline-notch":!0,"input-outline-notch-hidden":!this.hasLabel}},(0,Y.h)("div",{class:"notch-spacer","aria-hidden":"true",ref:D=>this.notchSpacerEl=D},this.label)),(0,Y.h)("div",{class:"input-outline-end"})),this.renderLabel()]:this.renderLabel()}render(){const{disabled:_,fill:k,readonly:D,shape:q,inputId:ce,labelPlacement:De,el:dt,hasFocus:Vt,clearInputIcon:bn}=this,fi=(0,ht.b)(this),xi=this.getValue(),to=ps("ion-item",this.el),Vi="md"===fi&&"outline"!==k&&!to,zo=null!=bn?bn:"ios"===fi?Vl:Oc,yr=this.hasValue(),as=null!==dt.querySelector('[slot="start"], [slot="end"]');return(0,Y.h)(Y.xr,{key:"907ce98a82b5cfae5a08504cd79e00a2330b7444",class:Kr(this.color,{[fi]:!0,"has-value":yr,"has-focus":Vt,"label-floating":"stacked"===De||"floating"===De&&(yr||Vt||as),[`input-fill-${k}`]:void 0!==k,[`input-shape-${q}`]:void 0!==q,[`input-label-placement-${De}`]:!0,"in-item":to,"in-item-color":ps("ion-item.ion-color",this.el),"input-disabled":_})},(0,Y.h)("label",{key:"59d5bb45d2a5b828bba0ed8687a632a551e2f4d8",class:"input-wrapper",htmlFor:ce},this.renderLabelContainer(),(0,Y.h)("div",{key:"f93f129d08246d0e9a601c100d718534d6403853",class:"native-wrapper"},(0,Y.h)("slot",{key:"54eeb1a6bace662b7eb0d7e27180ea3d7e3a3729",name:"start"}),(0,Y.h)("input",Object.assign({key:"b3e0be55bc1a4a539ae3b0fdcf7fc078723cca16",class:"native-input",ref:Ur=>this.nativeInput=Ur,id:ce,disabled:_,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:D,required:this.required,spellcheck:this.spellcheck,step:this.step,type:this.type,value:xi,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown,onCompositionstart:this.onCompositionStart,onCompositionend:this.onCompositionEnd},this.inheritedAttributes)),this.clearInput&&!D&&!_&&(0,Y.h)("button",{key:"5f6373504a6d0d074bfbf875c794d45ea2748175","aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:Ur=>{Ur.preventDefault()},onFocusin:Ur=>{Ur.stopPropagation()},onClick:this.clearTextInput},(0,Y.h)("ion-icon",{key:"230d77973aa83458ceb32bf52e3abe9bc322cfe6","aria-hidden":"true",icon:zo})),(0,Y.h)("slot",{key:"9d69ac6e8a3c4b2b303dba2478f82695d5755ed2",name:"end"})),Vi&&(0,Y.h)("div",{key:"ac61f16237ce731e0745ab72d0fc3f066252464a",class:"input-highlight"})),this.renderBottomContent())}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],type:["onTypeChange"],value:["valueChanged"]}}static get style(){return{ios:".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item[slot=start].sc-ion-input-ios-h,ion-item [slot=start].sc-ion-input-ios-h,ion-item[slot=end].sc-ion-input-ios-h,ion-item [slot=end].sc-ion-input-ios-h{width:auto}.ion-color.sc-ion-input-ios-h{--highlight-color-focused:var(--ion-color-base)}.input-label-placement-floating.sc-ion-input-ios-h,.input-label-placement-stacked.sc-ion-input-ios-h{min-height:56px}.native-input.sc-ion-input-ios{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.cloned-input.sc-ion-input-ios{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-input-ios{inset-inline-start:0}.cloned-input.sc-ion-input-ios:disabled{opacity:1}.input-clear-icon.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{color:inherit}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.input-wrapper.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;width:100%}.ion-touched.ion-invalid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-input-ios-h,.ion-touched.ion-invalid.sc-ion-input-ios-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:block}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:none}.input-bottom.sc-ion-input-ios .counter.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-ios,.sc-ion-input-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-ios,.input-outline-notch-hidden.sc-ion-input-ios{display:none}.input-wrapper.sc-ion-input-ios input.sc-ion-input-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text.sc-ion-input-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-ios-h:dir(rtl) .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h:dir(rtl) .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-ios-h input.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:1}.label-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-ios-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-input-ios-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-input-ios-h[disabled].sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[disabled] .sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[readonly].sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[readonly] .sc-ion-input-ios-s>ion-input-password-toggle{display:none}.sc-ion-input-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--highlight-height:0px;font-size:inherit}.input-clear-icon.sc-ion-input-ios ion-icon.sc-ion-input-ios{width:18px;height:18px}.input-disabled.sc-ion-input-ios-h{opacity:0.3}.sc-ion-input-ios-s>ion-button[slot=start].button-has-icon-only,.sc-ion-input-ios-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}",md:".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item[slot=start].sc-ion-input-md-h,ion-item [slot=start].sc-ion-input-md-h,ion-item[slot=end].sc-ion-input-md-h,ion-item [slot=end].sc-ion-input-md-h{width:auto}.ion-color.sc-ion-input-md-h{--highlight-color-focused:var(--ion-color-base)}.input-label-placement-floating.sc-ion-input-md-h,.input-label-placement-stacked.sc-ion-input-md-h{min-height:56px}.native-input.sc-ion-input-md{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.cloned-input.sc-ion-input-md{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-input-md{inset-inline-start:0}.cloned-input.sc-ion-input-md:disabled{opacity:1}.input-clear-icon.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{color:inherit}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.input-wrapper.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;width:100%}.ion-touched.ion-invalid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:block}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:none}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-md-h input.sc-ion-input-md{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-md,.sc-ion-input-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-md,.input-outline-notch-hidden.sc-ion-input-md{display:none}.input-wrapper.sc-ion-input-md input.sc-ion-input-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text.sc-ion-input-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:1}.label-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-md-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-input-md-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-input-md-h[disabled].sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[disabled] .sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[readonly].sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[readonly] .sc-ion-input-md-s>ion-input-password-toggle{display:none}.input-fill-solid.sc-ion-input-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.input-fill-solid.ion-valid.sc-ion-input-md-h,.input-fill-solid.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-fill-solid.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}@media (any-hover: hover){.input-fill-solid.sc-ion-input-md-h:hover{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.input-fill-solid.has-focus.sc-ion-input-md-h{--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}.label-floating.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{max-width:calc(100% / 0.75)}.input-fill-outline.sc-ion-input-md-h{--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.input-fill-outline.input-shape-round.sc-ion-input-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h,.input-fill-outline.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.input-fill-outline.sc-ion-input-md-h:hover{--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.input-fill-outline.has-focus.sc-ion-input-md-h{--border-width:var(--highlight-height);--border-color:var(--highlight-color)}.input-fill-outline.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}.input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}}.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{position:relative}.label-floating.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}.input-fill-outline.sc-ion-input-md-h .input-outline-container.sc-ion-input-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{pointer-events:none}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.input-fill-outline.sc-ion-input-md-h .notch-spacer.sc-ion-input-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px;-ms-flex-positive:1;flex-grow:1}.label-floating.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{border-top:none}.sc-ion-input-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--highlight-height:2px;font-size:inherit}.input-clear-icon.sc-ion-input-md ion-icon.sc-ion-input-md{width:22px;height:22px}.input-disabled.sc-ion-input-md-h{opacity:0.38}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{letter-spacing:0.0333333333em}.input-label-placement-floating.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.has-focus.input-label-placement-floating.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-stacked.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.input-highlight.sc-ion-input-md{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.input-highlight.sc-ion-input-md{inset-inline-start:0}.has-focus.sc-ion-input-md-h .input-highlight.sc-ion-input-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{bottom:0}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{inset-inline-start:0}.input-shape-round.sc-ion-input-md-h{--border-radius:16px}.sc-ion-input-md-s>ion-button[slot=start].button-has-icon-only,.sc-ion-input-md-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}"}}},[38,"ion-input",{color:[513],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearInputIcon:[1,"clear-input-icon"],clearOnEdit:[4,"clear-on-edit"],counter:[4],counterFormatter:[16],debounce:[2],disabled:[516],enterkeyhint:[1],errorText:[1,"error-text"],fill:[1],inputmode:[1],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[516],required:[4],shape:[1],spellcheck:[4],step:[1],type:[1],value:[1032],hasFocus:[32],setFocus:[64],getInputElement:[64]},void 0,{debounce:["debounceChanged"],type:["onTypeChange"],value:["valueChanged"]}]);let Zf=0;const ic=function R2(){typeof customElements>"u"||["ion-input","ion-icon"].forEach(_=>{switch(_){case"ion-input":customElements.get(_)||customElements.define(_,Rg);break;case"ion-icon":customElements.get(_)||ke()}})},zg=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionValueChange=(0,Y.lh)(this,"ionValueChange",7),this.inputId="ion-rg-"+Ju++,this.labelId=`${this.inputId}-lbl`,this.setRadioTabindex=_=>{const k=this.getRadios(),D=k.find(De=>!De.disabled),q=k.find(De=>De.value===_&&!De.disabled);if(!D&&!q)return;const ce=q||D;for(const De of k)De.setButtonTabindex(De===ce?0:-1)},this.onClick=_=>{_.preventDefault();const k=_.target&&_.target.closest("ion-radio");if(k&&!k.disabled){const q=k.value;q!==this.value?(this.value=q,this.emitValueChange(_)):this.allowEmptySelection&&(this.value=void 0,this.emitValueChange(_))}},this.allowEmptySelection=!1,this.compareWith=void 0,this.name=this.inputId,this.value=void 0}valueChanged(_){this.setRadioTabindex(_),this.ionValueChange.emit({value:_})}componentDidLoad(){this.valueChanged(this.value)}connectedCallback(){var _=this;return(0,We.A)(function*(){const k=_.el.querySelector("ion-list-header")||_.el.querySelector("ion-item-divider");if(k){const D=_.label=k.querySelector("ion-label");D&&(_.labelId=D.id=_.name+"-lbl")}})()}getRadios(){return Array.from(this.el.querySelectorAll("ion-radio"))}emitValueChange(_){const{value:k}=this;this.ionChange.emit({value:k,event:_})}onKeydown(_){const k=!!this.el.closest("ion-select-popover");if(_.target&&!this.el.contains(_.target))return;const D=this.getRadios().filter(q=>!q.disabled);if(_.target&&D.includes(_.target)){const q=D.findIndex(dt=>dt===_.target),ce=D[q];let De;if(["ArrowDown","ArrowRight"].includes(_.key)&&(De=q===D.length-1?D[0]:D[q+1]),["ArrowUp","ArrowLeft"].includes(_.key)&&(De=0===q?D[D.length-1]:D[q-1]),De&&D.includes(De)&&(De.setFocus(_),k||(this.value=De.value,this.emitValueChange(_))),[" "].includes(_.key)){const dt=this.value;this.value=this.allowEmptySelection&&void 0!==this.value?void 0:ce.value,(dt!==this.value||this.allowEmptySelection)&&this.emitValueChange(_),_.preventDefault()}}}render(){const{label:_,labelId:k,el:D,name:q,value:ce}=this,De=(0,ht.b)(this);return(0,At.e)(!0,D,q,ce,!1),(0,Y.h)(Y.xr,{key:"7a8ad7eb6a05c6f96a348dcf30fd0c610a95688c",role:"radiogroup","aria-labelledby":_?k:null,onClick:this.onClick,class:De})}get el(){return this}static get watchers(){return{value:["valueChanged"]}}},[0,"ion-radio-group",{allowEmptySelection:[4,"allow-empty-selection"],compareWith:[1,"compare-with"],name:[1],value:[1032]},[[4,"keydown","onKeydown"]],{value:["valueChanged"]}]);let Ju=0;function El(){typeof customElements>"u"||["ion-radio-group"].forEach(_=>{"ion-radio-group"===_&&(customElements.get(_)||customElements.define(_,zg))})}const zp=(0,Y.w$)(class extends Y.wt{constructor(){var _;super(),_=this,this.__registerHost(),this.ionInput=(0,Y.lh)(this,"ionInput",7),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionCancel=(0,Y.lh)(this,"ionCancel",7),this.ionClear=(0,Y.lh)(this,"ionClear",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.isCancelVisible=!1,this.shouldAlignLeft=!0,this.inputId="ion-searchbar-"+dp++,this.inheritedAttributes={},this.onClearInput=function(){var k=(0,We.A)(function*(D){return _.ionClear.emit(),new Promise(q=>{setTimeout(()=>{const ce=_.getValue();""!==ce&&(_.value="",_.emitInputChange(),D&&!_.focused&&(_.setFocus(),_.focusedValue=ce)),q()},64)})});return function(D){return k.apply(this,arguments)}}(),this.onCancelSearchbar=function(){var k=(0,We.A)(function*(D){D&&(D.preventDefault(),D.stopPropagation()),_.ionCancel.emit();const q=_.getValue(),ce=_.focused;yield _.onClearInput(),q&&!ce&&_.emitValueChange(D),_.nativeInput&&_.nativeInput.blur()});return function(D){return k.apply(this,arguments)}}(),this.onInput=k=>{const D=k.target;D&&(this.value=D.value),this.emitInputChange(k)},this.onChange=k=>{this.emitValueChange(k)},this.onBlur=k=>{this.focused=!1,this.ionBlur.emit(),this.positionElements(),this.focusedValue!==this.value&&this.emitValueChange(k),this.focusedValue=void 0},this.onFocus=()=>{this.focused=!0,this.focusedValue=this.value,this.ionFocus.emit(),this.positionElements()},this.focused=!1,this.noAnimate=!0,this.color=void 0,this.animated=!1,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.cancelButtonIcon=ht.c.get("backButtonIcon","data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>"),this.cancelButtonText="Cancel",this.clearIcon=void 0,this.debounce=void 0,this.disabled=!1,this.inputmode=void 0,this.enterkeyhint=void 0,this.maxlength=void 0,this.minlength=void 0,this.name=this.inputId,this.placeholder="Search",this.searchIcon=void 0,this.showCancelButton="never",this.showClearButton="always",this.spellcheck=!1,this.type="search",this.value=""}onLangChanged(_){this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{lang:_}),(0,Y.$x)(this)}onDirChanged(_){this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{dir:_}),(0,Y.$x)(this)}debounceChanged(){const{ionInput:_,debounce:k,originalIonInput:D}=this;this.ionInput=void 0===k?null!=D?D:_:(0,At.l)(_,k)}valueChanged(){const _=this.nativeInput,k=this.getValue();_&&_.value!==k&&(_.value=k)}showCancelButtonChanged(){requestAnimationFrame(()=>{this.positionElements(),(0,Y.$x)(this)})}connectedCallback(){this.emitStyle()}componentWillLoad(){this.inheritedAttributes=Object.assign({},(0,At.d)(this.el,["lang","dir"]))}componentDidLoad(){this.originalIonInput=this.ionInput,this.positionElements(),this.debounceChanged(),setTimeout(()=>{this.noAnimate=!1},300)}emitStyle(){this.ionStyle.emit({searchbar:!0})}setFocus(){var _=this;return(0,We.A)(function*(){_.nativeInput&&_.nativeInput.focus()})()}getInputElement(){var _=this;return(0,We.A)(function*(){return _.nativeInput||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.nativeInput)})()}emitValueChange(_){const{value:k}=this,D=null==k?k:k.toString();this.focusedValue=D,this.ionChange.emit({value:D,event:_})}emitInputChange(_){const{value:k}=this;this.ionInput.emit({value:k,event:_})}positionElements(){const _=this.getValue(),k=this.shouldAlignLeft,D=(0,ht.b)(this),q=!this.animated||""!==_.trim()||!!this.focused;this.shouldAlignLeft=q,"ios"===D&&(k!==q&&this.positionPlaceholder(),this.animated&&this.positionCancelButton())}positionPlaceholder(){const _=this.nativeInput;if(!_)return;const k=(0,pi.i)(this.el),D=(this.el.shadowRoot||this.el).querySelector(".searchbar-search-icon");if(this.shouldAlignLeft)_.removeAttribute("style"),D.removeAttribute("style");else{const q=document,ce=q.createElement("span");ce.innerText=this.placeholder||"",q.body.appendChild(ce),(0,At.r)(()=>{const De=ce.offsetWidth;ce.remove();const dt="calc(50% - "+De/2+"px)",Vt="calc(50% - "+(De/2+D.clientWidth+8)+"px)";k?(_.style.paddingRight=dt,D.style.marginRight=Vt):(_.style.paddingLeft=dt,D.style.marginLeft=Vt)})}}positionCancelButton(){const _=(0,pi.i)(this.el),k=(this.el.shadowRoot||this.el).querySelector(".searchbar-cancel-button"),D=this.shouldShowCancelButton();if(null!==k&&D!==this.isCancelVisible){const q=k.style;if(this.isCancelVisible=D,D)_?q.marginLeft="0":q.marginRight="0";else{const ce=k.offsetWidth;ce>0&&(_?q.marginLeft=-ce+"px":q.marginRight=-ce+"px")}}}getValue(){return this.value||""}hasValue(){return""!==this.getValue()}shouldShowCancelButton(){return!("never"===this.showCancelButton||"focus"===this.showCancelButton&&!this.focused)}shouldShowClearButton(){return!("never"===this.showClearButton||"focus"===this.showClearButton&&!this.focused)}render(){const{cancelButtonText:_,autocapitalize:k}=this,D=this.animated&&ht.c.getBoolean("animated",!0),q=(0,ht.b)(this),ce=this.clearIcon||("ios"===q?Vl:Oc),De=this.searchIcon||("ios"===q?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>"),dt=this.shouldShowCancelButton(),Vt="never"!==this.showCancelButton&&(0,Y.h)("button",{key:"20b2d0f2e3425eede725dbe3323c7c29cdb66f4e","aria-label":_,"aria-hidden":dt?void 0:"true",type:"button",tabIndex:"ios"!==q||dt?void 0:-1,onMouseDown:this.onCancelSearchbar,onTouchStart:this.onCancelSearchbar,class:"searchbar-cancel-button"},(0,Y.h)("div",{key:"3a516c3fdd35256eb79639fd340afcdd92cfd7aa","aria-hidden":"true"},"md"===q?(0,Y.h)("ion-icon",{"aria-hidden":"true",mode:q,icon:this.cancelButtonIcon,lazy:!1}):_));return(0,Y.h)(Y.xr,{key:"34878db21f63a9bdffca0446d8ad5619ff04cac3",role:"search","aria-disabled":this.disabled?"true":null,class:Kr(this.color,{[q]:!0,"searchbar-animated":D,"searchbar-disabled":this.disabled,"searchbar-no-animate":D&&this.noAnimate,"searchbar-has-value":this.hasValue(),"searchbar-left-aligned":this.shouldAlignLeft,"searchbar-has-focus":this.focused,"searchbar-should-show-clear":this.shouldShowClearButton(),"searchbar-should-show-cancel":this.shouldShowCancelButton()})},(0,Y.h)("div",{key:"faa7b011206a8359b1963368c65988e506b260cb",class:"searchbar-input-container"},(0,Y.h)("input",Object.assign({key:"732d3e5a2b258da6f136a14472ac872816a9853b","aria-label":"search text",disabled:this.disabled,ref:bn=>this.nativeInput=bn,class:"searchbar-input",inputMode:this.inputmode,enterKeyHint:this.enterkeyhint,name:this.name,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,minLength:this.minlength,maxLength:this.maxlength,placeholder:this.placeholder,type:this.type,value:this.getValue(),autoCapitalize:"default"===k?void 0:k,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,spellcheck:this.spellcheck},this.inheritedAttributes)),"md"===q&&Vt,(0,Y.h)("ion-icon",{key:"767dca971849f221dde220deae728b41bf764b98","aria-hidden":"true",mode:q,icon:De,lazy:!1,class:"searchbar-search-icon"}),(0,Y.h)("button",{key:"9941b5de1ed9ebcf3e81de8e0731c09dea5a89d9","aria-label":"reset",type:"button","no-blur":!0,class:"searchbar-clear-button",onPointerDown:bn=>{bn.preventDefault()},onClick:()=>this.onClearInput(!0)},(0,Y.h)("ion-icon",{key:"cb2b543d286373a84e2c6c2a959f92b045bbd7dd","aria-hidden":"true",mode:q,icon:ce,lazy:!1,class:"searchbar-clear-icon"}))),"ios"===q&&Vt)}get el(){return this}static get watchers(){return{lang:["onLangChanged"],dir:["onDirChanged"],debounce:["debounceChanged"],value:["valueChanged"],showCancelButton:["showCancelButtonChanged"]}}static get style(){return{ios:".sc-ion-searchbar-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-searchbar-ios-h{color:var(--ion-color-contrast)}.ion-color.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios{background:var(--ion-color-base)}.ion-color.sc-ion-searchbar-ios-h .searchbar-clear-button.sc-ion-searchbar-ios,.ion-color.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios,.ion-color.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios{color:inherit}.searchbar-search-icon.sc-ion-searchbar-ios{color:var(--icon-color);pointer-events:none}.searchbar-input-container.sc-ion-searchbar-ios{display:block;position:relative;-ms-flex-negative:1;flex-shrink:1;width:100%}.searchbar-input.sc-ion-searchbar-ios{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;border-radius:var(--border-radius);display:block;width:100%;min-height:inherit;border:0;outline:none;background:var(--background);font-family:inherit;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-input.sc-ion-searchbar-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios::-webkit-search-cancel-button,.searchbar-input.sc-ion-searchbar-ios::-ms-clear{display:none}.searchbar-cancel-button.sc-ion-searchbar-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:none;height:100%;border:0;outline:none;color:var(--cancel-button-color);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-cancel-button.sc-ion-searchbar-ios>div.sc-ion-searchbar-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.searchbar-clear-button.sc-ion-searchbar-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:none;min-height:0;outline:none;color:var(--clear-button-color);-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-clear-button.sc-ion-searchbar-ios:focus{opacity:0.5}.searchbar-has-value.searchbar-should-show-clear.sc-ion-searchbar-ios-h .searchbar-clear-button.sc-ion-searchbar-ios{display:block}.searchbar-disabled.sc-ion-searchbar-ios-h{cursor:default;opacity:0.4;pointer-events:none}.sc-ion-searchbar-ios-h{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.07);--border-radius:10px;--box-shadow:none;--cancel-button-color:var(--ion-color-primary, #0054e9);--clear-button-color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));--color:var(--ion-text-color, #000);--icon-color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:12px;padding-bottom:12px;min-height:60px;contain:content}.searchbar-input-container.sc-ion-searchbar-ios{min-height:36px}.searchbar-search-icon.sc-ion-searchbar-ios{-webkit-margin-start:calc(50% - 60px);margin-inline-start:calc(50% - 60px);top:0;position:absolute;width:1.375rem;height:100%;contain:strict}.searchbar-search-icon.sc-ion-searchbar-ios{inset-inline-start:5px}.searchbar-input.sc-ion-searchbar-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:6px;padding-bottom:6px;height:100%;font-size:1.0625rem;font-weight:400;contain:strict}.searchbar-has-value.searchbar-should-show-clear.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios{-webkit-padding-start:1.75rem;padding-inline-start:1.75rem;-webkit-padding-end:1.75rem;padding-inline-end:1.75rem}.searchbar-clear-button.sc-ion-searchbar-ios{top:0;background-position:center;position:absolute;width:1.875rem;height:100%;border:0;background-color:transparent}.searchbar-clear-button.sc-ion-searchbar-ios{inset-inline-end:0}.searchbar-clear-icon.sc-ion-searchbar-ios{width:1.125rem;height:100%}.searchbar-cancel-button.sc-ion-searchbar-ios{-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:0;padding-inline-end:0;padding-top:0;padding-bottom:0;-ms-flex-negative:0;flex-shrink:0;background-color:transparent;font-size:17px}.searchbar-left-aligned.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios{-webkit-margin-start:0;margin-inline-start:0}.searchbar-left-aligned.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios{-webkit-padding-start:1.875rem;padding-inline-start:1.875rem}.searchbar-has-focus.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios,.searchbar-should-show-cancel.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios,.searchbar-animated.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{display:block}.searchbar-animated.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios,.searchbar-animated.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios{-webkit-transition:all 300ms ease;transition:all 300ms ease}.searchbar-animated.searchbar-has-focus.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios,.searchbar-animated.searchbar-should-show-cancel.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{opacity:1;pointer-events:auto}.searchbar-animated.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{-webkit-margin-end:-100%;margin-inline-end:-100%;-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);-webkit-transition:all 300ms ease;transition:all 300ms ease;opacity:0;pointer-events:none}.searchbar-no-animate.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios,.searchbar-no-animate.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios,.searchbar-no-animate.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{-webkit-transition-duration:0ms;transition-duration:0ms}.ion-color.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{color:var(--ion-color-base)}@media (any-hover: hover){.ion-color.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios:hover{color:var(--ion-color-tint)}}ion-toolbar.sc-ion-searchbar-ios-h,ion-toolbar .sc-ion-searchbar-ios-h{padding-top:1px;padding-bottom:15px;min-height:52px}ion-toolbar.ion-color.sc-ion-searchbar-ios-h:not(.ion-color),ion-toolbar.ion-color .sc-ion-searchbar-ios-h:not(.ion-color){color:inherit}ion-toolbar.ion-color.sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-cancel-button.sc-ion-searchbar-ios,ion-toolbar.ion-color .sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-cancel-button.sc-ion-searchbar-ios{color:currentColor}ion-toolbar.ion-color.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios,ion-toolbar.ion-color .sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios{color:currentColor;opacity:0.5}ion-toolbar.ion-color.sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-input.sc-ion-searchbar-ios,ion-toolbar.ion-color .sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-input.sc-ion-searchbar-ios{background:rgba(var(--ion-color-contrast-rgb), 0.07);color:currentColor}ion-toolbar.ion-color.sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-clear-button.sc-ion-searchbar-ios,ion-toolbar.ion-color .sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-clear-button.sc-ion-searchbar-ios{color:currentColor;opacity:0.5}",md:".sc-ion-searchbar-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-searchbar-md-h{color:var(--ion-color-contrast)}.ion-color.sc-ion-searchbar-md-h .searchbar-input.sc-ion-searchbar-md{background:var(--ion-color-base)}.ion-color.sc-ion-searchbar-md-h .searchbar-clear-button.sc-ion-searchbar-md,.ion-color.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md,.ion-color.sc-ion-searchbar-md-h .searchbar-search-icon.sc-ion-searchbar-md{color:inherit}.searchbar-search-icon.sc-ion-searchbar-md{color:var(--icon-color);pointer-events:none}.searchbar-input-container.sc-ion-searchbar-md{display:block;position:relative;-ms-flex-negative:1;flex-shrink:1;width:100%}.searchbar-input.sc-ion-searchbar-md{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;border-radius:var(--border-radius);display:block;width:100%;min-height:inherit;border:0;outline:none;background:var(--background);font-family:inherit;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-input.sc-ion-searchbar-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md::-webkit-search-cancel-button,.searchbar-input.sc-ion-searchbar-md::-ms-clear{display:none}.searchbar-cancel-button.sc-ion-searchbar-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:none;height:100%;border:0;outline:none;color:var(--cancel-button-color);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-cancel-button.sc-ion-searchbar-md>div.sc-ion-searchbar-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.searchbar-clear-button.sc-ion-searchbar-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:none;min-height:0;outline:none;color:var(--clear-button-color);-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-clear-button.sc-ion-searchbar-md:focus{opacity:0.5}.searchbar-has-value.searchbar-should-show-clear.sc-ion-searchbar-md-h .searchbar-clear-button.sc-ion-searchbar-md{display:block}.searchbar-disabled.sc-ion-searchbar-md-h{cursor:default;opacity:0.4;pointer-events:none}.sc-ion-searchbar-md-h{--background:var(--ion-background-color, #fff);--border-radius:2px;--box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);--cancel-button-color:var(--ion-color-step-900, var(--ion-text-color-step-100, #1a1a1a));--clear-button-color:initial;--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--icon-color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;background:inherit}.searchbar-search-icon.sc-ion-searchbar-md{top:11px;width:1.3125rem;height:1.3125rem}.searchbar-search-icon.sc-ion-searchbar-md{inset-inline-start:16px}.searchbar-cancel-button.sc-ion-searchbar-md{top:0;background-color:transparent;font-size:1.5em}.searchbar-cancel-button.sc-ion-searchbar-md{inset-inline-start:9px}.searchbar-search-icon.sc-ion-searchbar-md,.searchbar-cancel-button.sc-ion-searchbar-md{position:absolute}.searchbar-search-icon.ion-activated.sc-ion-searchbar-md,.searchbar-cancel-button.ion-activated.sc-ion-searchbar-md{background-color:transparent}.searchbar-input.sc-ion-searchbar-md{-webkit-padding-start:3.4375rem;padding-inline-start:3.4375rem;-webkit-padding-end:3.4375rem;padding-inline-end:3.4375rem;padding-top:0.375rem;padding-bottom:0.375rem;background-position:left 8px center;height:auto;font-size:1rem;font-weight:400;line-height:30px}[dir=rtl].sc-ion-searchbar-md-h .searchbar-input.sc-ion-searchbar-md,[dir=rtl] .sc-ion-searchbar-md-h .searchbar-input.sc-ion-searchbar-md{background-position:right 8px center}[dir=rtl].sc-ion-searchbar-md .searchbar-input.sc-ion-searchbar-md{background-position:right 8px center}@supports selector(:dir(rtl)){.searchbar-input.sc-ion-searchbar-md:dir(rtl){background-position:right 8px center}}.searchbar-clear-button.sc-ion-searchbar-md{top:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;position:absolute;height:100%;border:0;background-color:transparent}.searchbar-clear-button.sc-ion-searchbar-md{inset-inline-end:13px}.searchbar-clear-button.ion-activated.sc-ion-searchbar-md{background-color:transparent}.searchbar-clear-icon.sc-ion-searchbar-md{width:1.375rem;height:100%}.searchbar-has-focus.sc-ion-searchbar-md-h .searchbar-search-icon.sc-ion-searchbar-md{display:block}.searchbar-has-focus.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md,.searchbar-should-show-cancel.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md{display:block}.searchbar-has-focus.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md+.searchbar-search-icon.sc-ion-searchbar-md,.searchbar-should-show-cancel.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md+.searchbar-search-icon.sc-ion-searchbar-md{display:none}ion-toolbar.sc-ion-searchbar-md-h,ion-toolbar .sc-ion-searchbar-md-h{-webkit-padding-start:7px;padding-inline-start:7px;-webkit-padding-end:7px;padding-inline-end:7px;padding-top:3px;padding-bottom:3px}"}}},[34,"ion-searchbar",{color:[513],animated:[4],autocapitalize:[1],autocomplete:[1],autocorrect:[1],cancelButtonIcon:[1,"cancel-button-icon"],cancelButtonText:[1,"cancel-button-text"],clearIcon:[1,"clear-icon"],debounce:[2],disabled:[4],inputmode:[1],enterkeyhint:[1],maxlength:[2],minlength:[2],name:[1],placeholder:[1],searchIcon:[1,"search-icon"],showCancelButton:[1,"show-cancel-button"],showClearButton:[1,"show-clear-button"],spellcheck:[4],type:[1],value:[1025],focused:[32],noAnimate:[32],setFocus:[64],getInputElement:[64]},void 0,{lang:["onLangChanged"],dir:["onDirChanged"],debounce:["debounceChanged"],value:["valueChanged"],showCancelButton:["showCancelButtonChanged"]}]);let dp=0;const bm=function Qf(){typeof customElements>"u"||["ion-searchbar","ion-icon"].forEach(_=>{switch(_){case"ion-searchbar":customElements.get(_)||customElements.define(_,zp);break;case"ion-icon":customElements.get(_)||ke()}})},wm=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionSelect=(0,Y.lh)(this,"ionSelect",7),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.onClick=_=>{const k=_.target,D=this.checked;"ION-SEGMENT"!==k.tagName&&(this.value=k.value,k!==D&&this.emitValueChange(),(this.scrollable||!this.swipeGesture)&&(D?this.checkButton(D,k):this.setCheckedClasses()))},this.onSlottedItemsChange=()=>{this.valueChanged(this.value)},this.getSegmentButton=_=>{var k,D;const q=this.getButtons().filter(De=>!De.disabled),ce=q.findIndex(De=>De===document.activeElement);switch(_){case"first":return q[0];case"last":return q[q.length-1];case"next":return null!==(k=q[ce+1])&&void 0!==k?k:q[0];case"previous":return null!==(D=q[ce-1])&&void 0!==D?D:q[q.length-1];default:return null}},this.activated=!1,this.color=void 0,this.disabled=!1,this.scrollable=!1,this.swipeGesture=!0,this.value=void 0,this.selectOnFocus=!1}colorChanged(_,k){(void 0===k&&void 0!==_||void 0!==k&&void 0===_)&&this.emitStyle()}swipeGestureChanged(){this.gestureChanged()}valueChanged(_){this.ionSelect.emit({value:_}),this.scrollActiveButtonIntoView()}disabledChanged(){this.gestureChanged();const _=this.getButtons();for(const k of _)k.disabled=this.disabled}gestureChanged(){this.gesture&&this.gesture.enable(!this.scrollable&&!this.disabled&&this.swipeGesture)}connectedCallback(){this.emitStyle()}componentWillLoad(){this.emitStyle()}componentDidLoad(){var _=this;return(0,We.A)(function*(){_.setCheckedClasses(),(0,At.r)(()=>{_.scrollActiveButtonIntoView(!1)}),_.gesture=(yield Promise.resolve().then(_e.bind(_e,2104))).createGesture({el:_.el,gestureName:"segment",gesturePriority:100,threshold:0,passive:!1,onStart:k=>_.onStart(k),onMove:k=>_.onMove(k),onEnd:k=>_.onEnd(k)}),_.gestureChanged(),_.disabled&&_.disabledChanged()})()}onStart(_){this.valueBeforeGesture=this.value,this.activate(_)}onMove(_){this.setNextIndex(_)}onEnd(_){this.setActivated(!1),this.setNextIndex(_,!0),_.event.stopImmediatePropagation();const k=this.value;void 0!==k&&this.valueBeforeGesture!==k&&this.emitValueChange(),this.valueBeforeGesture=void 0}emitValueChange(){const{value:_}=this;this.ionChange.emit({value:_})}getButtons(){return Array.from(this.el.querySelectorAll("ion-segment-button"))}get checked(){return this.getButtons().find(_=>_.value===this.value)}setActivated(_){this.getButtons().forEach(D=>{_?D.classList.add("segment-button-activated"):D.classList.remove("segment-button-activated")}),this.activated=_}activate(_){const k=_.event.target,q=this.getButtons().find(ce=>ce.value===this.value);"ION-SEGMENT-BUTTON"===k.tagName&&(q||(this.value=k.value,this.setCheckedClasses()),this.value===k.value&&this.setActivated(!0))}getIndicator(_){return(_.shadowRoot||_).querySelector(".segment-button-indicator")}checkButton(_,k){const D=this.getIndicator(_),q=this.getIndicator(k);if(null===D||null===q)return;const ce=D.getBoundingClientRect(),De=q.getBoundingClientRect(),bn=`translate3d(${ce.left-De.left}px, 0, 0) scaleX(${ce.width/De.width})`;(0,Y.bN)(()=>{q.classList.remove("segment-button-indicator-animated"),q.style.setProperty("transform",bn),q.getBoundingClientRect(),q.classList.add("segment-button-indicator-animated"),q.style.setProperty("transform","")}),this.value=k.value,this.setCheckedClasses()}setCheckedClasses(){const _=this.getButtons(),D=_.findIndex(q=>q.value===this.value)+1;for(const q of _)q.classList.remove("segment-button-after-checked");D<_.length&&_[D].classList.add("segment-button-after-checked")}scrollActiveButtonIntoView(_=!0){const{scrollable:k,value:D,el:q}=this;if(k){const De=this.getButtons().find(dt=>dt.value===D);if(void 0!==De){const dt=q.getBoundingClientRect(),Vt=De.getBoundingClientRect();q.scrollBy({top:0,left:Vt.x-dt.x-dt.width/2+Vt.width/2,behavior:_?"smooth":"instant"})}}}setNextIndex(_,k=!1){const D=(0,pi.i)(this.el),q=this.activated,ce=this.getButtons(),De=ce.findIndex(Ur=>Ur.value===this.value),dt=ce[De];let Vt,bn;if(-1===De)return;const fi=dt.getBoundingClientRect(),xi=fi.left,to=fi.width,Vi=_.currentX,xo=fi.top+fi.height/2,yr=this.el.getRootNode().elementFromPoint(Vi,xo);if(q&&!k){if(D?Vi>xi+to:Vi<xi){const Ur=De-1;Ur>=0&&(bn=Ur)}else if((D?Vi<xi:Vi>xi+to)&&q&&!k){const Ur=De+1;Ur<ce.length&&(bn=Ur)}void 0!==bn&&!ce[bn].disabled&&(Vt=ce[bn])}if(!q&&k&&(Vt=yr),null!=Vt){if("ION-SEGMENT"===Vt.tagName)return!1;dt!==Vt&&this.checkButton(dt,Vt)}return!0}emitStyle(){this.ionStyle.emit({segment:!0})}onKeyDown(_){const k=(0,pi.i)(this.el);let q,D=this.selectOnFocus;switch(_.key){case"ArrowRight":_.preventDefault(),q=this.getSegmentButton(k?"previous":"next");break;case"ArrowLeft":_.preventDefault(),q=this.getSegmentButton(k?"next":"previous");break;case"Home":_.preventDefault(),q=this.getSegmentButton("first");break;case"End":_.preventDefault(),q=this.getSegmentButton("last");break;case" ":case"Enter":_.preventDefault(),q=document.activeElement,D=!0}if(q){if(D){const ce=this.checked;this.checkButton(ce||q,q),q!==ce&&this.emitValueChange()}q.setFocus()}}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"ad0946134c8d465b760ad792655f1cb9922db520",role:"tablist",onClick:this.onClick,class:Kr(this.color,{[_]:!0,"in-toolbar":ps("ion-toolbar",this.el),"in-toolbar-color":ps("ion-toolbar[color]",this.el),"segment-activated":this.activated,"segment-disabled":this.disabled,"segment-scrollable":this.scrollable})},(0,Y.h)("slot",{key:"dcdb425bcda0d60acb7c317e5e671ed462715b4a",onSlotchange:this.onSlottedItemsChange}))}get el(){return this}static get watchers(){return{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}}static get style(){return{ios:":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.065);border-radius:8px;overflow:hidden;z-index:0}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.065)}:host(.in-toolbar){-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;width:auto}:host(.in-toolbar:not(.ion-color)){background:var(--ion-toolbar-segment-background, var(--background))}:host(.in-toolbar-color:not(.ion-color)){background:rgba(var(--ion-color-contrast-rgb), 0.11)}",md:":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:transparent;grid-auto-columns:minmax(auto, 360px)}:host(.in-toolbar){min-height:var(--min-height)}:host(.segment-scrollable) ::slotted(ion-segment-button){min-width:auto}"}}},[33,"ion-segment",{color:[513],disabled:[4],scrollable:[4],swipeGesture:[4,"swipe-gesture"],value:[1032],selectOnFocus:[4,"select-on-focus"],activated:[32]},[[0,"keydown","onKeyDown"]],{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}]),e2=function N2(){typeof customElements>"u"||["ion-segment"].forEach(_=>{"ion-segment"===_&&(customElements.get(_)||customElements.define(_,wm))})},wf=(B,_,k)=>"function"==typeof k?k(B,_):"string"==typeof k?B[k]===_[k]:Array.isArray(_)?_.includes(B):B===_,Lp=(B,_,k)=>void 0!==B&&(Array.isArray(B)?B.some(D=>wf(D,_,k)):wf(B,_,k)),j1=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.inputId="ion-rb-"+B0++,this.radioGroup=null,this.updateState=()=>{if(this.radioGroup){const{compareWith:_,value:k}=this.radioGroup;this.checked=Lp(k,this.value,_)}},this.onClick=()=>{const{radioGroup:_,checked:k,disabled:D}=this;D||(this.checked=!k||null==_||!_.allowEmptySelection)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.checked=!1,this.buttonTabindex=-1,this.color=void 0,this.name=this.inputId,this.disabled=!1,this.value=void 0,this.labelPlacement="start",this.justify="space-between",this.alignment="center"}valueChanged(){this.updateState()}componentDidLoad(){this.updateState()}setFocus(_){var k=this;return(0,We.A)(function*(){_.stopPropagation(),_.preventDefault(),k.el.focus()})()}setButtonTabindex(_){var k=this;return(0,We.A)(function*(){k.buttonTabindex=_})()}connectedCallback(){void 0===this.value&&(this.value=this.inputId);const _=this.radioGroup=this.el.closest("ion-radio-group");_&&(this.updateState(),(0,At.a)(_,"ionValueChange",this.updateState))}disconnectedCallback(){const _=this.radioGroup;_&&((0,At.b)(_,"ionValueChange",this.updateState),this.radioGroup=null)}get hasLabel(){return""!==this.el.textContent}renderRadioControl(){return(0,Y.h)("div",{class:"radio-icon",part:"container"},(0,Y.h)("div",{class:"radio-inner",part:"mark"}),(0,Y.h)("div",{class:"radio-ripple"}))}render(){const{checked:_,disabled:k,color:D,el:q,justify:ce,labelPlacement:De,hasLabel:dt,buttonTabindex:Vt,alignment:bn}=this,fi=(0,ht.b)(this),xi=ps("ion-item",q);return(0,Y.h)(Y.xr,{key:"43c95effb6acb119733270e8a5e02fe18b47ee4b",onFocus:this.onFocus,onBlur:this.onBlur,onClick:this.onClick,class:Kr(D,{[fi]:!0,"in-item":xi,"radio-checked":_,"radio-disabled":k,[`radio-justify-${ce}`]:!0,[`radio-alignment-${bn}`]:!0,[`radio-label-placement-${De}`]:!0,"ion-activatable":!xi,"ion-focusable":!xi}),role:"radio","aria-checked":_?"true":"false","aria-disabled":k?"true":null,tabindex:Vt},(0,Y.h)("label",{key:"168ea77c08fde9832077d617662b93dc9986b544",class:"radio-wrapper"},(0,Y.h)("div",{key:"ce1e6eee63fbab1e5a66b18f767f4eecc2a227f1",class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!dt},part:"label"},(0,Y.h)("slot",{key:"7d849e43d4356b5c3978c2bba9a6fba5d21ca69d"})),(0,Y.h)("div",{key:"e741f7822364958b050a232bdfccdc413095c244",class:"native-wrapper"},this.renderRadioControl())))}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:':host{--inner-border-radius:50%;display:inline-block;position:relative;max-width:100%;min-height:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.radio-disabled){pointer-events:none}.radio-icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;contain:layout size style}.radio-icon,.radio-inner{-webkit-box-sizing:border-box;box-sizing:border-box}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host(:focus){outline:none}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.radio-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.radio-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.radio-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host(.radio-justify-space-between) .radio-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.radio-justify-start) .radio-wrapper{-ms-flex-pack:start;justify-content:start}:host(.radio-justify-end) .radio-wrapper{-ms-flex-pack:end;justify-content:end}:host(.radio-alignment-start) .radio-wrapper{-ms-flex-align:start;align-items:start}:host(.radio-alignment-center) .radio-wrapper{-ms-flex-align:center;align-items:center}:host(.radio-label-placement-start) .radio-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.radio-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-end) .radio-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.radio-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.radio-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px}:host(.radio-label-placement-stacked) .radio-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.radio-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host{--color-checked:var(--ion-color-primary, #0054e9)}:host(.ion-color.radio-checked) .radio-inner{border-color:var(--ion-color-base)}.item-radio.item-ios ion-label{-webkit-margin-start:0;margin-inline-start:0}.radio-inner{width:33%;height:50%}:host(.radio-checked) .radio-inner{-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:0.125rem;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--color-checked)}:host(.radio-disabled){opacity:0.3}:host(.ion-focused) .radio-icon::after{border-radius:var(--inner-border-radius);top:-8px;display:block;position:absolute;width:36px;height:36px;background:var(--ion-color-primary-tint, #1a65eb);content:"";opacity:0.2}:host(.ion-focused) .radio-icon::after{inset-inline-start:-9px}.native-wrapper .radio-icon{width:0.9375rem;height:1.5rem}',md:':host{--inner-border-radius:50%;display:inline-block;position:relative;max-width:100%;min-height:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.radio-disabled){pointer-events:none}.radio-icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;contain:layout size style}.radio-icon,.radio-inner{-webkit-box-sizing:border-box;box-sizing:border-box}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host(:focus){outline:none}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.radio-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.radio-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.radio-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host(.radio-justify-space-between) .radio-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.radio-justify-start) .radio-wrapper{-ms-flex-pack:start;justify-content:start}:host(.radio-justify-end) .radio-wrapper{-ms-flex-pack:end;justify-content:end}:host(.radio-alignment-start) .radio-wrapper{-ms-flex-align:start;align-items:start}:host(.radio-alignment-center) .radio-wrapper{-ms-flex-align:center;align-items:center}:host(.radio-label-placement-start) .radio-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.radio-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-end) .radio-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.radio-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.radio-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px}:host(.radio-label-placement-stacked) .radio-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.radio-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host{--color:rgb(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--color-checked:var(--ion-color-primary, #0054e9);--border-width:0.125rem;--border-style:solid;--border-radius:50%}:host(.ion-color) .radio-inner{background:var(--ion-color-base)}:host(.ion-color.radio-checked) .radio-icon{border-color:var(--ion-color-base)}.radio-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--color)}.radio-inner{border-radius:var(--inner-border-radius);width:calc(50% + var(--border-width));height:calc(50% + var(--border-width));-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background:var(--color-checked)}:host(.radio-checked) .radio-icon{border-color:var(--color-checked)}:host(.radio-checked) .radio-inner{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}:host(.radio-disabled) .label-text-wrapper{opacity:0.38}:host(.radio-disabled) .native-wrapper{opacity:0.63}:host(.ion-focused) .radio-icon::after{border-radius:var(--inner-border-radius);display:block;position:absolute;width:36px;height:36px;background:var(--ion-color-primary-tint, #1a65eb);content:"";opacity:0.2}.native-wrapper .radio-icon{width:1.25rem;height:1.25rem}'}}},[33,"ion-radio",{color:[513],name:[1],disabled:[4],value:[8],labelPlacement:[1,"label-placement"],justify:[1],alignment:[1],checked:[32],buttonTabindex:[32],setFocus:[64],setButtonTabindex:[64]},void 0,{value:["valueChanged"]}]);let B0=0;function Bp(){typeof customElements>"u"||["ion-radio"].forEach(_=>{"ion-radio"===_&&(customElements.get(_)||customElements.define(_,j1))})}const If=(B,_)=>{if(1!==B.nodeType)return;const k=B;return(k.tagName===_.toUpperCase()?[k]:Array.from(k.querySelectorAll(_))).find(q=>q.value===k.value)},Ef=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),D.addElement(B.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),_.addElement(B).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([k,D])},d4=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),D.addElement(B.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),_.addElement(B).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([k,D])},U1=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),D.addElement(B.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),_.addElement(B).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([k,D])},V2=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),D.addElement(B.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),_.addElement(B).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([k,D])},tg=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.didPresent=(0,Y.lh)(this,"ionActionSheetDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionActionSheetWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionActionSheetWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionActionSheetDidDismiss",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.delegateController=aa(this),this.lockController=xn(),this.triggerController=Jn(),this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Pr)},this.dispatchCancelHandler=_=>{if(Qr(_.detail.role)){const D=this.getButtons().find(q=>"cancel"===q.role);this.callButtonHandler(D)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.buttons=[],this.cssClass=void 0,this.backdropDismiss=!0,this.header=void 0,this.subHeader=void 0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}triggerChanged(){const{trigger:_,el:k,triggerController:D}=this;_&&D.addClickListener(k,_)}present(){var _=this;return(0,We.A)(function*(){const k=yield _.lockController.lock();yield _.delegateController.attachViewToDom(),yield Br(_,"actionSheetEnter",Ef,U1),k()})()}dismiss(_,k){var D=this;return(0,We.A)(function*(){const q=yield D.lockController.lock(),ce=yield ro(D,_,k,"actionSheetLeave",d4,V2);return ce&&D.delegateController.removeViewFromDom(),q(),ce})()}onDidDismiss(){return zr(this.el,"ionActionSheetDidDismiss")}onWillDismiss(){return zr(this.el,"ionActionSheetWillDismiss")}buttonClick(_){var k=this;return(0,We.A)(function*(){const D=_.role;return Qr(D)?k.dismiss(_.data,D):(yield k.callButtonHandler(_))?k.dismiss(_.data,_.role):Promise.resolve()})()}callButtonHandler(_){return(0,We.A)(function*(){return!(_&&!1===(yield lr(_.handler)))})()}getButtons(){return this.buttons.map(_=>"string"==typeof _?{text:_}:_)}connectedCallback(){Ei(this.el),this.triggerChanged()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.triggerController.removeClickListener()}componentWillLoad(){ko(this.el)}componentDidLoad(){const{groupEl:_,wrapperEl:k}=this;!this.gesture&&"ios"===(0,ht.b)(this)&&k&&_&&(0,Y.gv)(()=>{_.scrollHeight>_.clientHeight||(this.gesture=fa(k,q=>q.classList.contains("action-sheet-button")),this.gesture.enable(!0))}),!0===this.isOpen&&(0,At.r)(()=>this.present()),this.triggerChanged()}render(){const{header:_,htmlAttributes:k,overlayIndex:D}=this,q=(0,ht.b)(this),ce=this.getButtons(),De=ce.find(bn=>"cancel"===bn.role),dt=ce.filter(bn=>"cancel"!==bn.role),Vt=`action-sheet-${D}-header`;return(0,Y.h)(Y.xr,Object.assign({key:"b640e9730af4bd9ec569884cf203c63102e0ea59",role:"dialog","aria-modal":"true","aria-labelledby":void 0!==_?Vt:null,tabindex:"-1"},k,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign(Object.assign({[q]:!0},ni(this.cssClass)),{"overlay-hidden":!0,"action-sheet-translucent":this.translucent}),onIonActionSheetWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),(0,Y.h)("ion-backdrop",{key:"bcfa5b7ffb5c265ef54caa114e697ada11f20c12",tappable:this.backdropDismiss}),(0,Y.h)("div",{key:"207ae95b5365ce1d76170a05bdf8c83c3ba5de42",tabindex:"0"}),(0,Y.h)("div",{key:"bf2b4e8d57c822a4ea2bbe6c34b1b2f2067e4c02",class:"action-sheet-wrapper ion-overlay-wrapper",ref:bn=>this.wrapperEl=bn},(0,Y.h)("div",{key:"9c4841eb03ca1378c5abc1e3aafbbcfaaa43c345",class:"action-sheet-container"},(0,Y.h)("div",{key:"fa438b8663f5d30852e5967da0471489efa783b2",class:"action-sheet-group",ref:bn=>this.groupEl=bn},void 0!==_&&(0,Y.h)("div",{key:"2c600f1cd8314d65137fb1bfa180312b4791121a",id:Vt,class:{"action-sheet-title":!0,"action-sheet-has-sub-title":void 0!==this.subHeader}},_,this.subHeader&&(0,Y.h)("div",{key:"a98d6a3f7948733de22a07432e56255f11243b7b",class:"action-sheet-sub-title"},this.subHeader)),dt.map(bn=>(0,Y.h)("button",Object.assign({},bn.htmlAttributes,{type:"button",id:bn.id,class:nu(bn),onClick:()=>this.buttonClick(bn),disabled:bn.disabled}),(0,Y.h)("span",{class:"action-sheet-button-inner"},bn.icon&&(0,Y.h)("ion-icon",{icon:bn.icon,"aria-hidden":"true",lazy:!1,class:"action-sheet-icon"}),bn.text),"md"===q&&(0,Y.h)("ion-ripple-effect",null)))),De&&(0,Y.h)("div",{key:"5c5abd0e0b3d486ba2bfe437e28a23b2c7c4c955",class:"action-sheet-group action-sheet-group-cancel"},(0,Y.h)("button",Object.assign({key:"520a23bbbe6c7436f5bc58bad162d7894b870e54"},De.htmlAttributes,{type:"button",class:nu(De),onClick:()=>this.buttonClick(De)}),(0,Y.h)("span",{key:"28c90f66786ee82316adc6cfd68d322d2038357d",class:"action-sheet-button-inner"},De.icon&&(0,Y.h)("ion-icon",{key:"fd49fcea260c7addc9b07718eeb02d4fa6e4d900",icon:De.icon,"aria-hidden":"true",lazy:!1,class:"action-sheet-icon"}),De.text),"md"===q&&(0,Y.h)("ion-ripple-effect",{key:"c83f636e171fe77635a4fce2b97161447e10546a"}))))),(0,Y.h)("div",{key:"d304920fc7cb006b87542183a3224a7e460abd3d",tabindex:"0"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:'.sc-ion-action-sheet-ios-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:auto;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-ios-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-ios{left:0;right:0;bottom:0;-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios:disabled{color:var(--button-color-disabled);opacity:0.4}.action-sheet-button-inner.sc-ion-action-sheet-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:end;justify-content:flex-end;height:100%;max-height:calc(100vh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)));max-height:calc(100dvh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)))}.action-sheet-group.sc-ion-action-sheet-ios{-ms-flex-negative:2;flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}@media (any-pointer: coarse){.action-sheet-group.sc-ion-action-sheet-ios::-webkit-scrollbar{display:none}}.action-sheet-group-cancel.sc-ion-action-sheet-ios{-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-ios{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-ios:not(:disabled):hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-ios:not(:disabled):hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, var(--ion-background-color-step-100, #f9f9f9)));--backdrop-opacity:var(--ion-backdrop-opacity, 0.4);--button-background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent;--button-background-activated:var(--ion-text-color, #000);--button-background-activated-opacity:.08;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-background-selected:var(--ion-color-step-150, var(--ion-background-color-step-150, var(--ion-background-color, #fff)));--button-background-selected-opacity:1;--button-color:var(--ion-color-primary, #0054e9);--button-color-disabled:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--color:var(--ion-color-step-400, var(--ion-text-color-step-600, #999999));text-align:center}.action-sheet-wrapper.sc-ion-action-sheet-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--ion-safe-area-top, 0);padding-bottom:var(--ion-safe-area-bottom, 0);-webkit-box-sizing:content-box;box-sizing:content-box}.action-sheet-container.sc-ion-action-sheet-ios{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:0;padding-bottom:0}.action-sheet-group.sc-ion-action-sheet-ios{border-radius:13px;margin-bottom:8px}.action-sheet-group.sc-ion-action-sheet-ios:first-child{margin-top:10px}.action-sheet-group.sc-ion-action-sheet-ios:last-child{margin-bottom:10px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-group.sc-ion-action-sheet-ios{background-color:transparent;-webkit-backdrop-filter:saturate(280%) blur(20px);backdrop-filter:saturate(280%) blur(20px)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-title.sc-ion-action-sheet-ios,.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.sc-ion-action-sheet-ios{background-color:transparent;background-image:-webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8)), to(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8))), -webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4)), color-stop(50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4)), color-stop(50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8)));background-image:linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 100%), linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4) 50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 50%);background-repeat:no-repeat;background-position:top, bottom;background-size:100% calc(100% - 1px), 100% 1px;-webkit-backdrop-filter:saturate(120%);backdrop-filter:saturate(120%)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.ion-activated.sc-ion-action-sheet-ios{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.7);background-image:none}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-cancel.sc-ion-action-sheet-ios{background:var(--button-background-selected)}}.action-sheet-title.sc-ion-action-sheet-ios{background:-webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)), color-stop(50%, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)), color-stop(50%, transparent)) bottom/100% 1px no-repeat transparent;background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent}.action-sheet-title.sc-ion-action-sheet-ios{-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:14px;padding-bottom:13px;color:var(--color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-size:max(13px, 0.8125rem);font-weight:400;text-align:center}.action-sheet-title.action-sheet-has-sub-title.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-sub-title.sc-ion-action-sheet-ios{padding-left:0;padding-right:0;padding-top:6px;padding-bottom:0;font-size:max(13px, 0.8125rem);font-weight:400}.action-sheet-button.sc-ion-action-sheet-ios{-webkit-padding-start:14px;padding-inline-start:14px;-webkit-padding-end:14px;padding-inline-end:14px;padding-top:14px;padding-bottom:14px;min-height:56px;font-size:max(20px, 1.25rem);contain:content}.action-sheet-button.sc-ion-action-sheet-ios .action-sheet-icon.sc-ion-action-sheet-ios{-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:max(28px, 1.75rem);pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios:last-child{background-image:none}.action-sheet-selected.sc-ion-action-sheet-ios{font-weight:bold}.action-sheet-cancel.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-cancel.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-destructive.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-activated.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-focused.sc-ion-action-sheet-ios{color:var(--ion-color-danger, #c5000f)}@media (any-hover: hover){.action-sheet-destructive.sc-ion-action-sheet-ios:hover{color:var(--ion-color-danger, #c5000f)}}',md:'.sc-ion-action-sheet-md-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:auto;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-md-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-md{left:0;right:0;bottom:0;-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-md{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md:disabled{color:var(--button-color-disabled);opacity:0.4}.action-sheet-button-inner.sc-ion-action-sheet-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-md{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:end;justify-content:flex-end;height:100%;max-height:calc(100vh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)));max-height:calc(100dvh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)))}.action-sheet-group.sc-ion-action-sheet-md{-ms-flex-negative:2;flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}@media (any-pointer: coarse){.action-sheet-group.sc-ion-action-sheet-md::-webkit-scrollbar{display:none}}.action-sheet-group-cancel.sc-ion-action-sheet-md{-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-md{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-md::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-md:not(:disabled):hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-md:not(:disabled):hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);--button-background:transparent;--button-background-selected:currentColor;--button-background-selected-opacity:0;--button-background-activated:transparent;--button-background-activated-opacity:0;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--button-color-disabled:var(--button-color);--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54)}.action-sheet-wrapper.sc-ion-action-sheet-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--ion-safe-area-top, 0);margin-bottom:0}.action-sheet-title.sc-ion-action-sheet-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:20px;padding-bottom:17px;min-height:60px;color:var(--color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54));font-size:1rem;text-align:start}.action-sheet-sub-title.sc-ion-action-sheet-md{padding-left:0;padding-right:0;padding-top:16px;padding-bottom:0;font-size:0.875rem}.action-sheet-group.sc-ion-action-sheet-md:first-child{padding-top:0}.action-sheet-group.sc-ion-action-sheet-md:last-child{padding-bottom:var(--ion-safe-area-bottom)}.action-sheet-button.sc-ion-action-sheet-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:12px;position:relative;min-height:52px;font-size:1rem;text-align:start;contain:content;overflow:hidden}.action-sheet-icon.sc-ion-action-sheet-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:32px;margin-inline-end:32px;margin-top:0;margin-bottom:0;color:var(--color);font-size:1.5rem}.action-sheet-button-inner.sc-ion-action-sheet-md{-ms-flex-pack:start;justify-content:flex-start}.action-sheet-selected.sc-ion-action-sheet-md{font-weight:bold}'}}},[34,"ion-action-sheet",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],buttons:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],header:[1],subHeader:[1,"sub-header"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),nu=B=>Object.assign({"action-sheet-button":!0,"ion-activatable":!B.disabled,"ion-focusable":!B.disabled,[`action-sheet-${B.role}`]:void 0!==B.role},ni(B.cssClass)),j2=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.lines=void 0}render(){const{lines:_}=this,k=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"7e2e050f13722f2b870a2415d99a9e631e9ca267",class:Kr(this.color,{[k]:!0,[`list-header-lines-${_}`]:void 0!==_})},(0,Y.h)("div",{key:"6117bebc45800d874e9b75355476fbced5cc8398",class:"list-header-inner"},(0,Y.h)("slot",{key:"9165fb274cd2c45a5a65c271d8b1f30e8a00c890"})))}static get style(){return{ios:":host{--border-style:solid;--border-width:0;--inner-border-width:0;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:40px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);color:var(--color);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.list-header-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex:1 1 auto;flex:1 1 auto}:host(.list-header-lines-inset),:host(.list-header-lines-none){--border-width:0}:host(.list-header-lines-full),:host(.list-header-lines-none){--inner-border-width:0}:host{--background:transparent;--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));padding-right:var(--ion-safe-area-right);padding-left:calc(var(--ion-safe-area-left, 0px) + 16px);position:relative;-ms-flex-align:end;align-items:flex-end;font-size:min(1.375rem, 56.1px);font-weight:700;letter-spacing:0}:host-context([dir=rtl]){padding-right:calc(var(--ion-safe-area-right, 0px) + 16px);padding-left:var(--ion-safe-area-left)}@supports selector(:dir(rtl)){:host(:dir(rtl)){padding-right:calc(var(--ion-safe-area-right, 0px) + 16px);padding-left:var(--ion-safe-area-left)}}::slotted(ion-button),::slotted(ion-label){margin-top:29px;margin-bottom:6px}::slotted(ion-button){--padding-top:0;--padding-bottom:0;-webkit-margin-start:3px;margin-inline-start:3px;-webkit-margin-end:3px;margin-inline-end:3px;min-height:1.4em}:host(.list-header-lines-full){--border-width:0 0 0.55px 0}:host(.list-header-lines-inset){--inner-border-width:0 0 0.55px 0}",md:":host{--border-style:solid;--border-width:0;--inner-border-width:0;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:40px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);color:var(--color);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.list-header-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex:1 1 auto;flex:1 1 auto}:host(.list-header-lines-inset),:host(.list-header-lines-none){--border-width:0}:host(.list-header-lines-full),:host(.list-header-lines-none){--inner-border-width:0}:host{--background:transparent;--color:var(--ion-text-color, #000);--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));padding-right:var(--ion-safe-area-right);padding-left:calc(var(--ion-safe-area-left, 0px) + 16px);min-height:45px;font-size:0.875rem}:host-context([dir=rtl]){padding-right:calc(var(--ion-safe-area-right, 0px) + 16px);padding-left:var(--ion-safe-area-left)}@supports selector(:dir(rtl)){:host(:dir(rtl)){padding-right:calc(var(--ion-safe-area-right, 0px) + 16px);padding-left:var(--ion-safe-area-left)}}:host(.list-header-lines-full){--border-width:0 0 1px 0}:host(.list-header-lines-inset){--inner-border-width:0 0 1px 0}"}}},[33,"ion-list-header",{color:[513],lines:[1]}]);function Fp(){typeof customElements>"u"||["ion-list-header"].forEach(_=>{"ion-list-header"===_&&(customElements.get(_)||customElements.define(_,j2))})}const xm=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.header=void 0,this.subHeader=void 0,this.message=void 0,this.multiple=void 0,this.options=[]}findOptionFromEvent(_){const{options:k}=this;return k.find(D=>D.value===_.target.value)}callOptionHandler(_){const k=this.findOptionFromEvent(_),D=this.getValues(_);null!=k&&k.handler&&lr(k.handler,D)}dismissParentPopover(){const _=this.el.closest("ion-popover");_&&_.dismiss()}setChecked(_){const{multiple:k}=this,D=this.findOptionFromEvent(_);k&&D&&(D.checked=_.detail.checked)}getValues(_){const{multiple:k,options:D}=this;if(k)return D.filter(ce=>ce.checked).map(ce=>ce.value);const q=this.findOptionFromEvent(_);return q?q.value:void 0}renderOptions(_){const{multiple:k}=this;return!0===k?this.renderCheckboxOptions(_):this.renderRadioOptions(_)}renderCheckboxOptions(_){return _.map(k=>(0,Y.h)("ion-item",{class:Object.assign({"item-checkbox-checked":k.checked},ni(k.cssClass))},(0,Y.h)("ion-checkbox",{value:k.value,disabled:k.disabled,checked:k.checked,justify:"start",labelPlacement:"end",onIonChange:D=>{this.setChecked(D),this.callOptionHandler(D),(0,Y.$x)(this)}},k.text)))}renderRadioOptions(_){const k=_.filter(D=>D.checked).map(D=>D.value)[0];return(0,Y.h)("ion-radio-group",{value:k,onIonChange:D=>this.callOptionHandler(D)},_.map(D=>(0,Y.h)("ion-item",{class:Object.assign({"item-radio-checked":D.value===k},ni(D.cssClass))},(0,Y.h)("ion-radio",{value:D.value,disabled:D.disabled,onClick:()=>this.dismissParentPopover(),onKeyUp:q=>{" "===q.key&&this.dismissParentPopover()}},D.text))))}render(){const{header:_,message:k,options:D,subHeader:q}=this,ce=void 0!==q||void 0!==k;return(0,Y.h)(Y.xr,{key:"302553a2eec4d1442751b8af28b7c9bd3487fd5d",class:(0,ht.b)(this)},(0,Y.h)("ion-list",{key:"39ae8579e6fe3bae2c7504147268ad5c82fd27e6"},void 0!==_&&(0,Y.h)("ion-list-header",{key:"e0e6686380d188f46c593e1bb25287dcf08c75c2"},_),ce&&(0,Y.h)("ion-item",{key:"8a2d8652db269593c0ba7d767277e12c2b06144d"},(0,Y.h)("ion-label",{key:"a30cc0ecf95d5bdd6421ee1683922c1b853e98ea",class:"ion-text-wrap"},void 0!==q&&(0,Y.h)("h3",{key:"c298459ca450123808a08d65660825b2c26d00e5"},q),void 0!==k&&(0,Y.h)("p",{key:"ed895fbaec020e809021138401341b6fd7675035"},k))),this.renderOptions(D)))}get el(){return this}static get style(){return{ios:".sc-ion-select-popover-ios-h ion-list.sc-ion-select-popover-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list-header.sc-ion-select-popover-ios,ion-label.sc-ion-select-popover-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-select-popover-ios-h{overflow-y:auto}",md:".sc-ion-select-popover-md-h ion-list.sc-ion-select-popover-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list-header.sc-ion-select-popover-md,ion-label.sc-ion-select-popover-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-select-popover-md-h{overflow-y:auto}ion-list.sc-ion-select-popover-md ion-radio.sc-ion-select-popover-md::part(container){display:none}ion-list.sc-ion-select-popover-md ion-radio.sc-ion-select-popover-md::part(label){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-item.sc-ion-select-popover-md{--inner-border-width:0}.item-radio-checked.sc-ion-select-popover-md{--background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.08);--background-focused:var(--ion-color-primary, #0054e9);--background-focused-opacity:0.2;--background-hover:var(--ion-color-primary, #0054e9);--background-hover-opacity:0.12}.item-checkbox-checked.sc-ion-select-popover-md{--background-activated:var(--ion-item-color, var(--ion-text-color, #000));--background-focused:var(--ion-item-color, var(--ion-text-color, #000));--background-hover:var(--ion-item-color, var(--ion-text-color, #000));--color:var(--ion-color-primary, #0054e9)}"}}},[34,"ion-select-popover",{header:[1],subHeader:[1,"sub-header"],message:[1],multiple:[4],options:[16]}]),Sf=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionCancel=(0,Y.lh)(this,"ionCancel",7),this.ionDismiss=(0,Y.lh)(this,"ionDismiss",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.inputId="ion-sel-"+jp++,this.inheritedAttributes={},this.onClick=_=>{const k=_.target,D=k.closest('[slot="start"], [slot="end"]');k===this.el||null===D?(this.setFocus(),this.open(_)):_.preventDefault()},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.isExpanded=!1,this.cancelText="Cancel",this.color=void 0,this.compareWith=void 0,this.disabled=!1,this.fill=void 0,this.interface="alert",this.interfaceOptions={},this.justify="space-between",this.label=void 0,this.labelPlacement="start",this.multiple=!1,this.name=this.inputId,this.okText="OK",this.placeholder=void 0,this.selectedText=void 0,this.toggleIcon=void 0,this.expandedIcon=void 0,this.shape=void 0,this.value=void 0}styleChanged(){this.emitStyle()}setValue(_){this.value=_,this.ionChange.emit({value:_})}connectedCallback(){var _=this;return(0,We.A)(function*(){const{el:k}=_;_.notchController=Ou(k,()=>_.notchSpacerEl,()=>_.labelSlot),_.updateOverlayOptions(),_.emitStyle(),_.mutationO=((B,_,k)=>{if(typeof MutationObserver>"u")return;const D=new MutationObserver(q=>{k(((B,_)=>{let k;return B.forEach(D=>{for(let q=0;q<D.addedNodes.length;q++)k=If(D.addedNodes[q],_)||k}),k})(q,"ion-select-option"))});return D.observe(B,{childList:!0,subtree:!0}),D})(_.el,0,(0,We.A)(function*(){_.updateOverlayOptions(),(0,Y.$x)(_)}))})()}componentWillLoad(){this.inheritedAttributes=(0,At.d)(this.el,["aria-label"])}componentDidLoad(){this.emitStyle()}disconnectedCallback(){this.mutationO&&(this.mutationO.disconnect(),this.mutationO=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}open(_){var k=this;return(0,We.A)(function*(){if(k.disabled||k.isExpanded)return;k.isExpanded=!0;const D=k.overlay=yield k.createOverlay(_);if(D.onDidDismiss().then(()=>{k.overlay=void 0,k.isExpanded=!1,k.ionDismiss.emit(),k.setFocus()}),yield D.present(),"popover"===k.interface){const q=k.childOpts.map(ce=>ce.value).indexOf(k.value);if(q>-1){const ce=D.querySelector(`.select-interface-option:nth-child(${q+1})`);if(ce){(0,At.f)(ce);const De=ce.querySelector("ion-radio, ion-checkbox");De&&De.focus()}}else{const ce=D.querySelector("ion-radio:not(.radio-disabled), ion-checkbox:not(.checkbox-disabled)");ce&&((0,At.f)(ce.closest("ion-item")),ce.focus())}}return D})()}createOverlay(_){let k=this.interface;return"action-sheet"===k&&this.multiple&&(console.warn(`Select interface cannot be "${k}" with a multi-value select. Using the "alert" interface instead.`),k="alert"),"popover"===k&&!_&&(console.warn(`Select interface cannot be a "${k}" without passing an event. Using the "alert" interface instead.`),k="alert"),"action-sheet"===k?this.openActionSheet():"popover"===k?this.openPopover(_):this.openAlert()}updateOverlayOptions(){const _=this.overlay;if(!_)return;const k=this.childOpts,D=this.value;switch(this.interface){case"action-sheet":_.buttons=this.createActionSheetButtons(k,D);break;case"popover":const q=_.querySelector("ion-select-popover");q&&(q.options=this.createPopoverOptions(k,D));break;case"alert":_.inputs=this.createAlertInputs(k,this.multiple?"checkbox":"radio",D)}}createActionSheetButtons(_,k){const D=_.map(q=>{const ce=G1(q),De=Array.from(q.classList).filter(Vt=>"hydrated"!==Vt).join(" "),dt=`${Em} ${De}`;return{role:Lp(k,ce,this.compareWith)?"selected":"",text:q.textContent,cssClass:dt,handler:()=>{this.setValue(ce)}}});return D.push({text:this.cancelText,role:"cancel",handler:()=>{this.ionCancel.emit()}}),D}createAlertInputs(_,k,D){return _.map(ce=>{const De=G1(ce),dt=Array.from(ce.classList).filter(bn=>"hydrated"!==bn).join(" ");return{type:k,cssClass:`${Em} ${dt}`,label:ce.textContent||"",value:De,checked:Lp(D,De,this.compareWith),disabled:ce.disabled}})}createPopoverOptions(_,k){return _.map(q=>{const ce=G1(q),De=Array.from(q.classList).filter(Vt=>"hydrated"!==Vt).join(" ");return{text:q.textContent||"",cssClass:`${Em} ${De}`,value:ce,checked:Lp(k,ce,this.compareWith),disabled:q.disabled,handler:Vt=>{this.setValue(Vt),this.multiple||this.close()}}})}openPopover(_){var k=this;return(0,We.A)(function*(){const{fill:D,labelPlacement:q}=k,ce=k.interfaceOptions,De=(0,ht.b)(k),dt="md"!==De,Vt=k.multiple,bn=k.value;let fi=_,xi="auto";"floating"===q||"stacked"===q||"md"===De&&void 0!==D?xi="cover":fi=Object.assign(Object.assign({},_),{detail:{ionShadowTarget:k.nativeWrapperEl}});const Vi=Object.assign(Object.assign({mode:De,event:fi,alignment:"center",size:xi,showBackdrop:dt},ce),{component:"ion-select-popover",cssClass:["select-popover",ce.cssClass],componentProps:{header:ce.header,subHeader:ce.subHeader,message:ce.message,multiple:Vt,value:bn,options:k.createPopoverOptions(k.childOpts,bn)}});return Dr.create(Vi)})()}openActionSheet(){var _=this;return(0,We.A)(function*(){const k=(0,ht.b)(_),D=_.interfaceOptions,q=Object.assign(Object.assign({mode:k},D),{buttons:_.createActionSheetButtons(_.childOpts,_.value),cssClass:["select-action-sheet",D.cssClass]});return go.create(q)})()}openAlert(){var _=this;return(0,We.A)(function*(){const k=_.interfaceOptions,D=_.multiple?"checkbox":"radio",q=(0,ht.b)(_),ce=Object.assign(Object.assign({mode:q},k),{header:k.header?k.header:_.labelText,inputs:_.createAlertInputs(_.childOpts,D,_.value),buttons:[{text:_.cancelText,role:"cancel",handler:()=>{_.ionCancel.emit()}},{text:_.okText,handler:De=>{_.setValue(De)}}],cssClass:["select-alert",k.cssClass,_.multiple?"multiple-select-alert":"single-select-alert"]});return un.create(ce)})()}close(){return this.overlay?this.overlay.dismiss():Promise.resolve(!1)}hasValue(){return""!==this.getText()}get childOpts(){return Array.from(this.el.querySelectorAll("ion-select-option"))}get labelText(){const{label:_}=this;if(void 0!==_)return _;const{labelSlot:k}=this;return null!==k?k.textContent:void 0}getText(){const _=this.selectedText;return null!=_&&""!==_?_:o2(this.childOpts,this.value,this.compareWith)}setFocus(){this.focusEl&&this.focusEl.focus()}emitStyle(){const{disabled:_}=this;this.ionStyle.emit({"interactive-disabled":_})}renderLabel(){const{label:_}=this;return(0,Y.h)("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel},part:"label"},void 0===_?(0,Y.h)("slot",{name:"label"}):(0,Y.h)("div",{class:"label-text"},_))}componentDidRender(){var _;null===(_=this.notchController)||void 0===_||_.calculateNotchWidth()}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return void 0!==this.label||null!==this.labelSlot}renderLabelContainer(){return"md"===(0,ht.b)(this)&&"outline"===this.fill?[(0,Y.h)("div",{class:"select-outline-container"},(0,Y.h)("div",{class:"select-outline-start"}),(0,Y.h)("div",{class:{"select-outline-notch":!0,"select-outline-notch-hidden":!this.hasLabel}},(0,Y.h)("div",{class:"notch-spacer","aria-hidden":"true",ref:D=>this.notchSpacerEl=D},this.label)),(0,Y.h)("div",{class:"select-outline-end"})),this.renderLabel()]:this.renderLabel()}renderSelectText(){const{placeholder:_}=this;let D=!1,q=this.getText();return""===q&&void 0!==_&&(q=_,D=!0),(0,Y.h)("div",{"aria-hidden":"true",class:{"select-text":!0,"select-placeholder":D},part:D?"placeholder":"text"},q)}renderSelectIcon(){const _=(0,ht.b)(this),{isExpanded:k,toggleIcon:D,expandedIcon:q}=this;let ce;return ce=k&&void 0!==q?q:null!=D?D:"ios"===_?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M136 208l120-104 120 104M136 304l120 104 120-104' stroke-width='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 144l192 224 192-224H64z'/></svg>",(0,Y.h)("ion-icon",{class:"select-icon",part:"icon","aria-hidden":"true",icon:ce})}get ariaLabel(){var _;const{placeholder:k,inheritedAttributes:D}=this,q=this.getText(),ce=null!==(_=D["aria-label"])&&void 0!==_?_:this.labelText;let De=q;return""===De&&void 0!==k&&(De=k),void 0!==ce&&(De=""===De?ce:`${ce}, ${De}`),De}renderListbox(){const{disabled:_,inputId:k,isExpanded:D}=this;return(0,Y.h)("button",{disabled:_,id:k,"aria-label":this.ariaLabel,"aria-haspopup":"dialog","aria-expanded":`${D}`,onFocus:this.onFocus,onBlur:this.onBlur,ref:q=>this.focusEl=q})}render(){const{disabled:_,el:k,isExpanded:D,expandedIcon:q,labelPlacement:ce,justify:De,placeholder:dt,fill:Vt,shape:bn,name:fi,value:xi}=this,to=(0,ht.b)(this),Vi="floating"===ce||"stacked"===ce,xo=!Vi,zo=(0,pi.i)(k)?"rtl":"ltr",yr=ps("ion-item",this.el),as="md"===to&&"outline"!==Vt&&!yr,_s=this.hasValue(),Ur=null!==k.querySelector('[slot="start"], [slot="end"]');(0,At.e)(!0,k,fi,$p(xi),_);const ws="stacked"===ce||"floating"===ce&&(_s||D||Ur);return(0,Y.h)(Y.xr,{key:"e14586e887c0b73457b9f1e8f0585dfc7d590051",onClick:this.onClick,class:Kr(this.color,{[to]:!0,"in-item":yr,"in-item-color":ps("ion-item.ion-color",k),"select-disabled":_,"select-expanded":D,"has-expanded-icon":void 0!==q,"has-value":_s,"label-floating":ws,"has-placeholder":void 0!==dt,"ion-focusable":!0,[`select-${zo}`]:!0,[`select-fill-${Vt}`]:void 0!==Vt,[`select-justify-${De}`]:xo,[`select-shape-${bn}`]:void 0!==bn,[`select-label-placement-${ce}`]:!0})},(0,Y.h)("label",{key:"b44929542c809f2dca25afc588701762a083edd1",class:"select-wrapper",id:"select-label"},this.renderLabelContainer(),(0,Y.h)("div",{key:"195e3fad9cea0363ff00bf257ec2975fe5aa6887",class:"select-wrapper-inner"},(0,Y.h)("slot",{key:"9da7161a69b92d6fd124a478348d3fa420092f26",name:"start"}),(0,Y.h)("div",{key:"49c589c164d167de0ba5741a0c80fba58ea0bec6",class:"native-wrapper",ref:xs=>this.nativeWrapperEl=xs,part:"container"},this.renderSelectText(),this.renderListbox()),(0,Y.h)("slot",{key:"de1536d910fceb8e2dbdda13abcf88ee969888b8",name:"end"}),!Vi&&this.renderSelectIcon()),Vi&&this.renderSelectIcon(),as&&(0,Y.h)("div",{key:"e821b7b32cd1996eaa6d471df9b531ad0d491098",class:"select-highlight"})))}get el(){return this}static get watchers(){return{disabled:["styleChanged"],isExpanded:["styleChanged"],placeholder:["styleChanged"],value:["styleChanged"]}}static get style(){return{ios:":host{--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--placeholder-color:currentColor;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--background:transparent;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;font-family:var(--ion-font-family, inherit);white-space:nowrap;cursor:pointer;z-index:2}:host(.select-label-placement-floating),:host(.select-label-placement-stacked){min-height:56px}:host(.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0}:host(.select-disabled){pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0;position:relative;-ms-flex-negative:0;flex-shrink:0}:host(.in-item-color) .select-icon{color:inherit}:host(.select-label-placement-stacked) .select-icon,:host(.select-label-placement-floating) .select-icon{position:absolute;height:100%}:host(.select-ltr.select-label-placement-stacked) .select-icon,:host(.select-ltr.select-label-placement-floating) .select-icon{right:var(--padding-end, 0)}:host(.select-rtl.select-label-placement-stacked) .select-icon,:host(.select-rtl.select-label-placement-floating) .select-icon{left:var(--padding-start, 0)}.select-text{-ms-flex:1;flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:inherit;overflow:hidden}.select-wrapper{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal;cursor:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.select-wrapper .select-placeholder{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.select-wrapper-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;overflow:hidden}:host(.select-label-placement-stacked) .select-wrapper-inner,:host(.select-label-placement-floating) .select-wrapper-inner{-ms-flex-positive:1;flex-grow:1}:host(.ion-touched.ion-invalid){--highlight-color:var(--highlight-color-invalid)}:host(.ion-valid){--highlight-color:var(--highlight-color-valid)}.label-text-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text,::slotted([slot=label]){text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden,.select-outline-notch-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);overflow:hidden}:host(.select-justify-space-between) .select-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.select-justify-start) .select-wrapper{-ms-flex-pack:start;justify-content:start}:host(.select-justify-end) .select-wrapper{-ms-flex-pack:end;justify-content:end}:host(.select-label-placement-start) .select-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.select-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.select-label-placement-end) .select-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.select-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.select-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.select-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.select-label-placement-stacked) .select-wrapper,:host(.select-label-placement-floating) .select-wrapper{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}:host(.select-label-placement-stacked) .label-text-wrapper,:host(.select-label-placement-floating) .label-text-wrapper{max-width:100%}:host(.select-ltr.select-label-placement-stacked) .label-text-wrapper,:host(.select-ltr.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host(.select-rtl.select-label-placement-stacked) .label-text-wrapper,:host(.select-rtl.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}:host(.select-label-placement-stacked) .native-wrapper,:host(.select-label-placement-floating) .native-wrapper{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0;-ms-flex-positive:1;flex-grow:1;width:100%}:host(.select-label-placement-floating) .label-text-wrapper{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}:host(.select-label-placement-floating:not(.label-floating)) .native-wrapper .select-placeholder{opacity:0}:host(.select-expanded.select-label-placement-floating) .native-wrapper .select-placeholder,:host(.ion-focused.select-label-placement-floating) .native-wrapper .select-placeholder,:host(.has-value.select-label-placement-floating) .native-wrapper .select-placeholder{opacity:1}:host(.label-floating) .label-text-wrapper{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted([slot=start]:last-of-type){-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}::slotted([slot=end]:first-of-type){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host{--highlight-height:0px}.select-icon{width:1.125rem;height:1.125rem;color:var(--ion-color-step-650, var(--ion-text-color-step-350, #595959))}:host(.select-label-placement-stacked) .select-wrapper-inner,:host(.select-label-placement-floating) .select-wrapper-inner{width:calc(100% - 1.125rem - 4px)}:host(.select-disabled){opacity:0.3}::slotted(ion-button[slot=start].button-has-icon-only),::slotted(ion-button[slot=end].button-has-icon-only){--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}",md:":host{--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--placeholder-color:currentColor;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--background:transparent;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;font-family:var(--ion-font-family, inherit);white-space:nowrap;cursor:pointer;z-index:2}:host(.select-label-placement-floating),:host(.select-label-placement-stacked){min-height:56px}:host(.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0}:host(.select-disabled){pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0;position:relative;-ms-flex-negative:0;flex-shrink:0}:host(.in-item-color) .select-icon{color:inherit}:host(.select-label-placement-stacked) .select-icon,:host(.select-label-placement-floating) .select-icon{position:absolute;height:100%}:host(.select-ltr.select-label-placement-stacked) .select-icon,:host(.select-ltr.select-label-placement-floating) .select-icon{right:var(--padding-end, 0)}:host(.select-rtl.select-label-placement-stacked) .select-icon,:host(.select-rtl.select-label-placement-floating) .select-icon{left:var(--padding-start, 0)}.select-text{-ms-flex:1;flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:inherit;overflow:hidden}.select-wrapper{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal;cursor:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.select-wrapper .select-placeholder{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.select-wrapper-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;overflow:hidden}:host(.select-label-placement-stacked) .select-wrapper-inner,:host(.select-label-placement-floating) .select-wrapper-inner{-ms-flex-positive:1;flex-grow:1}:host(.ion-touched.ion-invalid){--highlight-color:var(--highlight-color-invalid)}:host(.ion-valid){--highlight-color:var(--highlight-color-valid)}.label-text-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text,::slotted([slot=label]){text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden,.select-outline-notch-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);overflow:hidden}:host(.select-justify-space-between) .select-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.select-justify-start) .select-wrapper{-ms-flex-pack:start;justify-content:start}:host(.select-justify-end) .select-wrapper{-ms-flex-pack:end;justify-content:end}:host(.select-label-placement-start) .select-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.select-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.select-label-placement-end) .select-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.select-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.select-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.select-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.select-label-placement-stacked) .select-wrapper,:host(.select-label-placement-floating) .select-wrapper{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}:host(.select-label-placement-stacked) .label-text-wrapper,:host(.select-label-placement-floating) .label-text-wrapper{max-width:100%}:host(.select-ltr.select-label-placement-stacked) .label-text-wrapper,:host(.select-ltr.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host(.select-rtl.select-label-placement-stacked) .label-text-wrapper,:host(.select-rtl.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}:host(.select-label-placement-stacked) .native-wrapper,:host(.select-label-placement-floating) .native-wrapper{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0;-ms-flex-positive:1;flex-grow:1;width:100%}:host(.select-label-placement-floating) .label-text-wrapper{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}:host(.select-label-placement-floating:not(.label-floating)) .native-wrapper .select-placeholder{opacity:0}:host(.select-expanded.select-label-placement-floating) .native-wrapper .select-placeholder,:host(.ion-focused.select-label-placement-floating) .native-wrapper .select-placeholder,:host(.has-value.select-label-placement-floating) .native-wrapper .select-placeholder{opacity:1}:host(.label-floating) .label-text-wrapper{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted([slot=start]:last-of-type){-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}::slotted([slot=end]:first-of-type){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.select-fill-solid){--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}:host(.select-fill-solid) .select-wrapper{border-bottom:var(--border-width) var(--border-style) var(--border-color)}:host(.has-focus.select-fill-solid.ion-valid),:host(.select-fill-solid.ion-touched.ion-invalid){--border-color:var(--highlight-color)}:host(.select-fill-solid) .select-bottom{border-top:none}@media (any-hover: hover){:host(.select-fill-solid:hover){--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}:host(.select-fill-solid.select-expanded),:host(.select-fill-solid.ion-focused){--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}:host(.select-fill-solid) .select-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}:host(.label-floating.select-fill-solid) .label-text-wrapper{max-width:calc(100% / 0.75)}:host(.select-fill-outline){--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}:host(.select-fill-outline.select-shape-round){--border-radius:28px;--padding-start:32px;--padding-end:32px}:host(.has-focus.select-fill-outline.ion-valid),:host(.select-fill-outline.ion-touched.ion-invalid){--border-color:var(--highlight-color)}@media (any-hover: hover){:host(.select-fill-outline:hover){--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}:host(.select-fill-outline.select-expanded),:host(.select-fill-outline.ion-focused){--border-width:var(--highlight-height);--border-color:var(--highlight-color)}:host(.select-fill-outline) .select-bottom{border-top:none}:host(.select-fill-outline) .select-wrapper{border-bottom:none}:host(.select-ltr.select-fill-outline.select-label-placement-stacked) .label-text-wrapper,:host(.select-ltr.select-fill-outline.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host(.select-rtl.select-fill-outline.select-label-placement-stacked) .label-text-wrapper,:host(.select-rtl.select-fill-outline.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}:host(.select-fill-outline.select-label-placement-stacked) .label-text-wrapper,:host(.select-fill-outline.select-label-placement-floating) .label-text-wrapper{position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}:host(.select-fill-outline) .label-text-wrapper{position:relative;z-index:1}:host(.label-floating.select-fill-outline) .label-text-wrapper{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}:host(.select-fill-outline.select-label-placement-stacked) select,:host(.select-fill-outline.select-label-placement-floating) select{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}:host(.select-fill-outline) .select-outline-container{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}:host(.select-fill-outline) .select-outline-start,:host(.select-fill-outline) .select-outline-end{pointer-events:none}:host(.select-fill-outline) .select-outline-start,:host(.select-fill-outline) .select-outline-notch,:host(.select-fill-outline) .select-outline-end{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color);-webkit-box-sizing:border-box;box-sizing:border-box}:host(.select-fill-outline) .select-outline-notch{max-width:calc(100% - var(--padding-start) - var(--padding-end))}:host(.select-fill-outline) .notch-spacer{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none}:host(.select-fill-outline) .select-outline-start{-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color)}:host(.select-fill-outline) .select-outline-start{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius)}:host(.select-fill-outline) .select-outline-start{width:calc(var(--padding-start) - 4px)}:host(.select-fill-outline) .select-outline-end{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color)}:host(.select-fill-outline) .select-outline-end{border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px}:host(.select-fill-outline) .select-outline-end{-ms-flex-positive:1;flex-grow:1}:host(.label-floating.select-fill-outline) .select-outline-notch{border-top:none}:host{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--highlight-height:2px}.select-icon{width:0.8125rem;-webkit-transition:-webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);color:var(--ion-color-step-500, var(--ion-text-color-step-500, gray))}:host(.select-label-placement-floating.select-expanded) .label-text-wrapper,:host(.select-label-placement-floating.ion-focused) .label-text-wrapper,:host(.select-label-placement-stacked.select-expanded) .label-text-wrapper,:host(.select-label-placement-stacked.ion-focused) .label-text-wrapper{color:var(--highlight-color)}:host(.has-focus.select-label-placement-floating.ion-valid) .label-text-wrapper,:host(.select-label-placement-floating.ion-touched.ion-invalid) .label-text-wrapper,:host(.has-focus.select-label-placement-stacked.ion-valid) .label-text-wrapper,:host(.select-label-placement-stacked.ion-touched.ion-invalid) .label-text-wrapper{color:var(--highlight-color)}.select-highlight{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.select-highlight{inset-inline-start:0}:host(.select-expanded) .select-highlight,:host(.ion-focused) .select-highlight{-webkit-transform:scale(1);transform:scale(1)}:host(.in-item) .select-highlight{bottom:0}:host(.in-item) .select-highlight{inset-inline-start:0}:host(.select-expanded:not(.has-expanded-icon)) .select-icon{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host(.select-expanded) .select-wrapper .select-icon,:host(.has-focus.ion-valid) .select-wrapper .select-icon,:host(.ion-touched.ion-invalid) .select-wrapper .select-icon,:host(.ion-focused) .select-wrapper .select-icon{color:var(--highlight-color)}:host(.select-shape-round){--border-radius:16px}:host(.select-label-placement-stacked) .select-wrapper-inner,:host(.select-label-placement-floating) .select-wrapper-inner{width:calc(100% - 0.8125rem - 4px)}:host(.select-disabled){opacity:0.38}::slotted(ion-button[slot=start].button-has-icon-only),::slotted(ion-button[slot=end].button-has-icon-only){--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}"}}},[33,"ion-select",{cancelText:[1,"cancel-text"],color:[513],compareWith:[1,"compare-with"],disabled:[4],fill:[1],interface:[1],interfaceOptions:[8,"interface-options"],justify:[1],label:[1],labelPlacement:[1,"label-placement"],multiple:[4],name:[1],okText:[1,"ok-text"],placeholder:[1],selectedText:[1,"selected-text"],toggleIcon:[1,"toggle-icon"],expandedIcon:[1,"expanded-icon"],shape:[1],value:[1032],isExpanded:[32],open:[64]},void 0,{disabled:["styleChanged"],isExpanded:["styleChanged"],placeholder:["styleChanged"],value:["styleChanged"]}]),G1=B=>{const _=B.value;return void 0===_?B.textContent||"":_},$p=B=>{if(null!=B)return Array.isArray(B)?B.join(","):B.toString()},o2=(B,_,k)=>void 0===_?"":Array.isArray(_)?_.map(D=>r2(B,D,k)).filter(D=>null!==D).join(", "):r2(B,_,k)||"",r2=(B,_,k)=>{const D=B.find(q=>wf(_,G1(q),k));return D?D.textContent:null};let jp=0;const Em="select-interface-option",y=function s2(){typeof customElements>"u"||["ion-select","ion-action-sheet","ion-alert","ion-backdrop","ion-checkbox","ion-icon","ion-item","ion-label","ion-list","ion-list-header","ion-popover","ion-radio","ion-radio-group","ion-ripple-effect","ion-select-popover"].forEach(_=>{switch(_){case"ion-select":customElements.get(_)||customElements.define(_,Sf);break;case"ion-action-sheet":customElements.get(_)||function Cf(){typeof customElements>"u"||["ion-action-sheet","ion-backdrop","ion-icon","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-action-sheet":customElements.get(_)||customElements.define(_,tg);break;case"ion-backdrop":customElements.get(_)||ue();break;case"ion-icon":customElements.get(_)||ke();break;case"ion-ripple-effect":customElements.get(_)||Ga()}})}();break;case"ion-alert":customElements.get(_)||Li();break;case"ion-backdrop":customElements.get(_)||ue();break;case"ion-checkbox":customElements.get(_)||da();break;case"ion-icon":customElements.get(_)||ke();break;case"ion-item":customElements.get(_)||Ph();break;case"ion-label":customElements.get(_)||Rh();break;case"ion-list":customElements.get(_)||fc();break;case"ion-list-header":customElements.get(_)||Fp();break;case"ion-popover":customElements.get(_)||rs();break;case"ion-radio":customElements.get(_)||Bp();break;case"ion-radio-group":customElements.get(_)||El();break;case"ion-ripple-effect":customElements.get(_)||Ga();break;case"ion-select-popover":customElements.get(_)||function Wc(){typeof customElements>"u"||["ion-select-popover","ion-checkbox","ion-icon","ion-item","ion-label","ion-list","ion-list-header","ion-radio","ion-radio-group","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-select-popover":customElements.get(_)||customElements.define(_,xm);break;case"ion-checkbox":customElements.get(_)||da();break;case"ion-icon":customElements.get(_)||ke();break;case"ion-item":customElements.get(_)||Ph();break;case"ion-label":customElements.get(_)||Rh();break;case"ion-list":customElements.get(_)||fc();break;case"ion-list-header":customElements.get(_)||Fp();break;case"ion-radio":customElements.get(_)||Bp();break;case"ion-radio-group":customElements.get(_)||El();break;case"ion-ripple-effect":customElements.get(_)||Ga()}})}()}})},X=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionInput=(0,Y.lh)(this,"ionInput",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.inputId="ion-textarea-"+Me++,this.didTextareaClearOnEdit=!1,this.inheritedAttributes={},this.onInput=_=>{const k=_.target;k&&(this.value=k.value||""),this.emitInputChange(_)},this.onChange=_=>{this.emitValueChange(_)},this.onFocus=_=>{this.hasFocus=!0,this.focusedValue=this.value,this.ionFocus.emit(_)},this.onBlur=_=>{this.hasFocus=!1,this.focusedValue!==this.value&&this.emitValueChange(_),this.didTextareaClearOnEdit=!1,this.ionBlur.emit(_)},this.onKeyDown=_=>{this.checkClearOnEdit(_)},this.hasFocus=!1,this.color=void 0,this.autocapitalize="none",this.autofocus=!1,this.clearOnEdit=!1,this.debounce=void 0,this.disabled=!1,this.fill=void 0,this.inputmode=void 0,this.enterkeyhint=void 0,this.maxlength=void 0,this.minlength=void 0,this.name=this.inputId,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.cols=void 0,this.rows=void 0,this.wrap=void 0,this.autoGrow=!1,this.value="",this.counter=!1,this.counterFormatter=void 0,this.errorText=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.shape=void 0}debounceChanged(){const{ionInput:_,debounce:k,originalIonInput:D}=this;this.ionInput=void 0===k?null!=D?D:_:(0,At.l)(_,k)}valueChanged(){const _=this.nativeInput,k=this.getValue();_&&_.value!==k&&(_.value=k),this.runAutoGrow()}connectedCallback(){const{el:_}=this;this.slotMutationController=Ul(_,["label","start","end"],()=>(0,Y.$x)(this)),this.notchController=Ou(_,()=>this.notchSpacerEl,()=>this.labelSlot),this.debounceChanged(),Y.L2.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:_}))}disconnectedCallback(){Y.L2.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},(0,At.i)(this.el)),(0,At.d)(this.el,["data-form-type","title","tabindex"]))}componentDidLoad(){this.originalIonInput=this.ionInput,this.runAutoGrow()}componentDidRender(){var _;null===(_=this.notchController)||void 0===_||_.calculateNotchWidth()}setFocus(){var _=this;return(0,We.A)(function*(){_.nativeInput&&_.nativeInput.focus()})()}getInputElement(){var _=this;return(0,We.A)(function*(){return _.nativeInput||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.nativeInput)})()}emitValueChange(_){const{value:k}=this,D=null==k?k:k.toString();this.focusedValue=D,this.ionChange.emit({value:D,event:_})}emitInputChange(_){const{value:k}=this;this.ionInput.emit({value:k,event:_})}runAutoGrow(){this.nativeInput&&this.autoGrow&&(0,Y.bN)(()=>{var _;this.textareaWrapper&&(this.textareaWrapper.dataset.replicatedValue=null!==(_=this.value)&&void 0!==_?_:"")})}checkClearOnEdit(_){if(!this.clearOnEdit)return;const D=["Tab","Shift","Meta","Alt","Control"].includes(_.key);!this.didTextareaClearOnEdit&&this.hasValue()&&!D&&(this.value="",this.emitInputChange(_)),D||(this.didTextareaClearOnEdit=!0)}hasValue(){return""!==this.getValue()}getValue(){return this.value||""}renderLabel(){const{label:_}=this;return(0,Y.h)("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},void 0===_?(0,Y.h)("slot",{name:"label"}):(0,Y.h)("div",{class:"label-text"},_))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return void 0!==this.label||null!==this.labelSlot}renderLabelContainer(){return"md"===(0,ht.b)(this)&&"outline"===this.fill?[(0,Y.h)("div",{class:"textarea-outline-container"},(0,Y.h)("div",{class:"textarea-outline-start"}),(0,Y.h)("div",{class:{"textarea-outline-notch":!0,"textarea-outline-notch-hidden":!this.hasLabel}},(0,Y.h)("div",{class:"notch-spacer","aria-hidden":"true",ref:D=>this.notchSpacerEl=D},this.label)),(0,Y.h)("div",{class:"textarea-outline-end"})),this.renderLabel()]:this.renderLabel()}renderHintText(){const{helperText:_,errorText:k}=this;return[(0,Y.h)("div",{class:"helper-text"},_),(0,Y.h)("div",{class:"error-text"},k)]}renderCounter(){const{counter:_,maxlength:k,counterFormatter:D,value:q}=this;if(!0===_&&void 0!==k)return(0,Y.h)("div",{class:"counter"},a0(q,k,D))}renderBottomContent(){const{counter:_,helperText:k,errorText:D,maxlength:q}=this;if(k||D||!0===_&&void 0!==q)return(0,Y.h)("div",{class:"textarea-bottom"},this.renderHintText(),this.renderCounter())}render(){const{inputId:_,disabled:k,fill:D,shape:q,labelPlacement:ce,el:De,hasFocus:dt}=this,Vt=(0,ht.b)(this),bn=this.getValue(),fi=ps("ion-item",this.el),xi="md"===Vt&&"outline"!==D&&!fi,to=this.hasValue(),Vi=null!==De.querySelector('[slot="start"], [slot="end"]');return(0,Y.h)(Y.xr,{key:"37595a18d77dea1a337ac1c672e5f08a4128111d",class:Kr(this.color,{[Vt]:!0,"has-value":to,"has-focus":dt,"label-floating":"stacked"===ce||"floating"===ce&&(to||dt||Vi),[`textarea-fill-${D}`]:void 0!==D,[`textarea-shape-${q}`]:void 0!==q,[`textarea-label-placement-${ce}`]:!0,"textarea-disabled":k})},(0,Y.h)("label",{key:"67342758743e5a40448a32ff695876d39778621f",class:"textarea-wrapper",htmlFor:_},this.renderLabelContainer(),(0,Y.h)("div",{key:"a994be8264bf5652811cf816d79a04178954e83f",class:"textarea-wrapper-inner"},(0,Y.h)("div",{key:"e09c93ebcd5b3d227d51e682ca23dfc7fd7027ad",class:"start-slot-wrapper"},(0,Y.h)("slot",{key:"d39758f21f19ae70aea21e9a9a7b7c20991fe593",name:"start"})),(0,Y.h)("div",{key:"6a4e10e53de4bb235ee30def4c9ae5bdee888816",class:"native-wrapper",ref:zo=>this.textareaWrapper=zo},(0,Y.h)("textarea",Object.assign({key:"9e254e551f124d972e9bc6b09ef0f2bb55890be5",class:"native-textarea",ref:zo=>this.nativeInput=zo,id:_,disabled:k,autoCapitalize:this.autocapitalize,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,minLength:this.minlength,maxLength:this.maxlength,name:this.name,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,cols:this.cols,rows:this.rows,wrap:this.wrap,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeyDown},this.inheritedAttributes),bn)),(0,Y.h)("div",{key:"a66aa2d2bc4778a0bec56a8b9ec9052a832eb3b2",class:"end-slot-wrapper"},(0,Y.h)("slot",{key:"8e6a90b4475de32e23afc593da4108610dcca663",name:"end"}))),xi&&(0,Y.h)("div",{key:"6da03205a8daff45581b20f0af3938634a9d5f8c",class:"textarea-highlight"})),this.renderBottomContent())}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],value:["valueChanged"]}}static get style(){return{ios:'.sc-ion-textarea-ios-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0;--padding-end:0;--padding-bottom:8px;--padding-start:0;--border-radius:0;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}.textarea-label-placement-floating.sc-ion-textarea-ios-h,.textarea-label-placement-stacked.sc-ion-textarea-ios-h{--padding-top:0px;min-height:56px}[cols].sc-ion-textarea-ios-h:not([auto-grow]){width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.ion-color.sc-ion-textarea-ios-h{--highlight-color-focused:var(--ion-color-base);background:initial}ion-item.sc-ion-textarea-ios-h,ion-item .sc-ion-textarea-ios-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item[slot=start].sc-ion-textarea-ios-h,ion-item [slot=start].sc-ion-textarea-ios-h,ion-item[slot=end].sc-ion-textarea-ios-h,ion-item [slot=end].sc-ion-textarea-ios-h{width:auto}.native-textarea.sc-ion-textarea-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;white-space:pre-wrap;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-textarea.sc-ion-textarea-ios::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios{color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.cloned-input.sc-ion-textarea-ios{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-textarea-ios{inset-inline-start:0}.cloned-input.sc-ion-textarea-ios:disabled{opacity:1}[auto-grow].sc-ion-textarea-ios-h .cloned-input.sc-ion-textarea-ios{height:100%}[auto-grow].sc-ion-textarea-ios-h .native-textarea.sc-ion-textarea-ios{overflow:hidden}.textarea-wrapper.sc-ion-textarea-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:0px;padding-bottom:0px;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:start;align-items:flex-start;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-textarea-ios{position:relative;width:100%;height:100%}.has-focus.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{caret-color:var(--highlight-color)}.native-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.native-wrapper.sc-ion-textarea-ios{display:grid;min-width:inherit;max-width:inherit;min-height:inherit;max-height:inherit;grid-auto-rows:100%}.native-wrapper.sc-ion-textarea-ios::after{white-space:pre-wrap;content:attr(data-replicated-value) " ";visibility:hidden}.native-wrapper.sc-ion-textarea-ios::after{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.textarea-wrapper-inner.sc-ion-textarea-ios{display:-ms-flexbox;display:flex;width:100%;min-height:inherit}.ion-touched.ion-invalid.sc-ion-textarea-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-textarea-ios-h{--highlight-color:var(--highlight-color-valid)}.textarea-bottom.sc-ion-textarea-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-textarea-ios-h,.ion-touched.ion-invalid.sc-ion-textarea-ios-h{--border-color:var(--highlight-color)}.textarea-bottom.sc-ion-textarea-ios .error-text.sc-ion-textarea-ios{display:none;color:var(--highlight-color-invalid)}.textarea-bottom.sc-ion-textarea-ios .helper-text.sc-ion-textarea-ios{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-textarea-ios-h .textarea-bottom.sc-ion-textarea-ios .error-text.sc-ion-textarea-ios{display:block}.ion-touched.ion-invalid.sc-ion-textarea-ios-h .textarea-bottom.sc-ion-textarea-ios .helper-text.sc-ion-textarea-ios{display:none}.textarea-bottom.sc-ion-textarea-ios .counter.sc-ion-textarea-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.label-text-wrapper.sc-ion-textarea-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-textarea-ios,.sc-ion-textarea-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-textarea-ios,.textarea-outline-notch-hidden.sc-ion-textarea-ios{display:none}.textarea-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.textarea-label-placement-start.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:row;flex-direction:row}.textarea-label-placement-start.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-end.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.textarea-label-placement-end.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-ios-h .label-text.sc-ion-textarea-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.textarea-label-placement-stacked.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:left top;transform-origin:left top;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;max-width:100%;z-index:2}[dir=rtl].sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-label-placement-stacked.sc-ion-textarea-ios-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-label-placement-stacked.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-ios-h .native-wrapper.sc-ion-textarea-ios::after,.textarea-label-placement-floating[auto-grow].sc-ion-textarea-ios-h .native-wrapper.sc-ion-textarea-ios::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:8px;margin-bottom:0px}.sc-ion-textarea-ios-h.textarea-label-placement-stacked.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-stacked .sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-stacked.sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-stacked .sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-floating.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-floating .sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-floating.sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-floating .sc-ion-textarea-ios-s>[slot=end]{margin-top:8px}.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{opacity:0}.has-focus.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.has-value.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{opacity:1}.label-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.start-slot-wrapper.sc-ion-textarea-ios,.end-slot-wrapper.sc-ion-textarea-ios{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:start}.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-s>[slot=end]{margin-top:0}.sc-ion-textarea-ios-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-textarea-ios-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-textarea-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--padding-top:10px;--padding-end:0px;--padding-bottom:8px;--padding-start:0px;--highlight-height:0px;font-size:inherit}.textarea-disabled.sc-ion-textarea-ios-h{opacity:0.3}.sc-ion-textarea-ios-s>ion-button[slot=start].button-has-icon-only,.sc-ion-textarea-ios-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}',md:'.sc-ion-textarea-md-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0;--padding-end:0;--padding-bottom:8px;--padding-start:0;--border-radius:0;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}.textarea-label-placement-floating.sc-ion-textarea-md-h,.textarea-label-placement-stacked.sc-ion-textarea-md-h{--padding-top:0px;min-height:56px}[cols].sc-ion-textarea-md-h:not([auto-grow]){width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.ion-color.sc-ion-textarea-md-h{--highlight-color-focused:var(--ion-color-base);background:initial}ion-item.sc-ion-textarea-md-h,ion-item .sc-ion-textarea-md-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item[slot=start].sc-ion-textarea-md-h,ion-item [slot=start].sc-ion-textarea-md-h,ion-item[slot=end].sc-ion-textarea-md-h,ion-item [slot=end].sc-ion-textarea-md-h{width:auto}.native-textarea.sc-ion-textarea-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;white-space:pre-wrap;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-textarea.sc-ion-textarea-md::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md{color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.cloned-input.sc-ion-textarea-md{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-textarea-md{inset-inline-start:0}.cloned-input.sc-ion-textarea-md:disabled{opacity:1}[auto-grow].sc-ion-textarea-md-h .cloned-input.sc-ion-textarea-md{height:100%}[auto-grow].sc-ion-textarea-md-h .native-textarea.sc-ion-textarea-md{overflow:hidden}.textarea-wrapper.sc-ion-textarea-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:0px;padding-bottom:0px;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:start;align-items:flex-start;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-textarea-md{position:relative;width:100%;height:100%}.has-focus.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{caret-color:var(--highlight-color)}.native-wrapper.sc-ion-textarea-md textarea.sc-ion-textarea-md{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.native-wrapper.sc-ion-textarea-md{display:grid;min-width:inherit;max-width:inherit;min-height:inherit;max-height:inherit;grid-auto-rows:100%}.native-wrapper.sc-ion-textarea-md::after{white-space:pre-wrap;content:attr(data-replicated-value) " ";visibility:hidden}.native-wrapper.sc-ion-textarea-md::after{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.textarea-wrapper-inner.sc-ion-textarea-md{display:-ms-flexbox;display:flex;width:100%;min-height:inherit}.ion-touched.ion-invalid.sc-ion-textarea-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-textarea-md-h{--highlight-color:var(--highlight-color-valid)}.textarea-bottom.sc-ion-textarea-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-textarea-md-h,.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}.textarea-bottom.sc-ion-textarea-md .error-text.sc-ion-textarea-md{display:none;color:var(--highlight-color-invalid)}.textarea-bottom.sc-ion-textarea-md .helper-text.sc-ion-textarea-md{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md .error-text.sc-ion-textarea-md{display:block}.ion-touched.ion-invalid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md .helper-text.sc-ion-textarea-md{display:none}.textarea-bottom.sc-ion-textarea-md .counter.sc-ion-textarea-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.label-text-wrapper.sc-ion-textarea-md{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-textarea-md,.sc-ion-textarea-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-textarea-md,.textarea-outline-notch-hidden.sc-ion-textarea-md{display:none}.textarea-wrapper.sc-ion-textarea-md textarea.sc-ion-textarea-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.textarea-label-placement-start.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:row;flex-direction:row}.textarea-label-placement-start.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-end.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.textarea-label-placement-end.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-md-h .label-text.sc-ion-textarea-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.textarea-label-placement-stacked.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:left top;transform-origin:left top;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;max-width:100%;z-index:2}[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-label-placement-stacked.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-label-placement-stacked.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after,.textarea-label-placement-floating[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:8px;margin-bottom:0px}.sc-ion-textarea-md-h.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=end]{margin-top:8px}.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{opacity:0}.has-focus.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.has-value.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{opacity:1}.label-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.start-slot-wrapper.sc-ion-textarea-md,.end-slot-wrapper.sc-ion-textarea-md{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:start}.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-s>[slot=end]{margin-top:0}.sc-ion-textarea-md-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-textarea-md-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.textarea-fill-solid.sc-ion-textarea-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.textarea-fill-solid.ion-valid.sc-ion-textarea-md-h,.textarea-fill-solid.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md{border-top:none}@media (any-hover: hover){.textarea-fill-solid.sc-ion-textarea-md-h:hover{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.textarea-fill-solid.has-focus.sc-ion-textarea-md-h{--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}.label-floating.textarea-fill-solid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{max-width:calc(100% / 0.75)}.textarea-fill-outline.sc-ion-textarea-md-h{--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.textarea-fill-outline.textarea-shape-round.sc-ion-textarea-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.textarea-fill-outline.ion-valid.sc-ion-textarea-md-h,.textarea-fill-outline.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.textarea-fill-outline.sc-ion-textarea-md-h:hover{--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.textarea-fill-outline.has-focus.sc-ion-textarea-md-h{--border-width:var(--highlight-height);--border-color:var(--highlight-color)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md{border-top:none}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-bottom:none}.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-fill-outline.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{position:relative}.label-floating.textarea-fill-outline.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc(\n    (100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75\n  )}.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after,.textarea-fill-outline.textarea-label-placement-floating[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:12px;margin-bottom:0px}.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=end]{margin-top:12px}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-container.sc-ion-textarea-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{pointer-events:none}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.textarea-fill-outline.sc-ion-textarea-md-h .notch-spacer.sc-ion-textarea-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px;-ms-flex-positive:1;flex-grow:1}.label-floating.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md{border-top:none}.sc-ion-textarea-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--padding-top:18px;--padding-end:0px;--padding-bottom:8px;--padding-start:0px;--highlight-height:2px;font-size:inherit}.textarea-bottom.sc-ion-textarea-md .counter.sc-ion-textarea-md{letter-spacing:0.0333333333em}.textarea-label-placement-floating.has-focus.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-stacked.has-focus.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{color:var(--highlight-color)}.has-focus.textarea-label-placement-floating.ion-valid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.ion-touched.ion-invalid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.has-focus.textarea-label-placement-stacked.ion-valid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-stacked.ion-touched.ion-invalid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{color:var(--highlight-color)}.textarea-disabled.sc-ion-textarea-md-h{opacity:0.38}.textarea-highlight.sc-ion-textarea-md{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.textarea-highlight.sc-ion-textarea-md{inset-inline-start:0}.has-focus.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{bottom:0}.in-item.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{inset-inline-start:0}.textarea-shape-round.sc-ion-textarea-md-h{--border-radius:16px}.sc-ion-textarea-md-s>ion-button[slot=start].button-has-icon-only,.sc-ion-textarea-md-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}'}}},[38,"ion-textarea",{color:[513],autocapitalize:[1],autofocus:[4],clearOnEdit:[4,"clear-on-edit"],debounce:[2],disabled:[4],fill:[1],inputmode:[1],enterkeyhint:[1],maxlength:[2],minlength:[2],name:[1],placeholder:[1],readonly:[4],required:[4],spellcheck:[4],cols:[514],rows:[2],wrap:[1],autoGrow:[516,"auto-grow"],value:[1025],counter:[4],counterFormatter:[16],errorText:[1,"error-text"],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],shape:[1],hasFocus:[32],setFocus:[64],getInputElement:[64]},void 0,{debounce:["debounceChanged"],value:["valueChanged"]}]);let Me=0;const ct=function $e(){typeof customElements>"u"||["ion-textarea"].forEach(_=>{"ion-textarea"===_&&(customElements.get(_)||customElements.define(_,X))})},si=["outletContent"],Si=["*"];function Qo(B,_){if(1&B&&(ne.j41(0,"div",1),ne.eu8(1,2),ne.k0s()),2&B){const k=ne.XpG();ne.R7$(),ne.Y8G("ngTemplateOutlet",k.template)}}const Bo=["outlet"],no=[[["","slot","top"]],"*"],To=["[slot=top]","*"];let Jo=(()=>{var B;let _=((0,V.A)(B=class extends l.Rg{constructor(D,q,ce,De,dt,Vt,bn,fi){super(D,q,ce,De,dt,Vt,bn,fi),(0,V.A)(this,"parentOutlet",void 0),(0,V.A)(this,"outletContent",void 0),this.parentOutlet=fi}},"\u0275fac",function(D){return new(D||B)(ne.kS0("name"),ne.kS0("tabs"),ne.rXU(Pn.aZ),ne.rXU(ne.aKT),ne.rXU(Ii.Ix),ne.rXU(ne.SKi),ne.rXU(Ii.nX),ne.rXU(B,12))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-router-outlet"]],viewQuery:function(D,q){if(1&D&&ne.GBs(si,7,ne.c1b),2&D){let ce;ne.mGM(ce=ne.lsd())&&(q.outletContent=ce.first)}},standalone:!0,features:[ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:3,vars:0,consts:[["outletContent",""]],template:function(D,q){1&D&&(ne.NAR(),ne.qex(0,null,0),ne.SdG(2),ne.bVm())},encapsulation:2})),B);return _=(0,re.Cg)([(0,l.hO)({defineCustomElementFn:wn})],_),_})(),ho=(()=>{var B;let _=((0,V.A)(B=class extends l.Sb{},"\u0275fac",(()=>{let k;return function(q){return(k||(k=ne.xGo(B)))(q||B)}})()),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-modal"]],standalone:!0,features:[ne.Vt3,ne.aNF],decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(D,q){1&D&&ne.DNE(0,Qo,2,1,"div",0),2&D&&ne.Y8G("ngIf",q.isCmpOpen||q.keepContentsMounted)},dependencies:[Pn.MD,Pn.bT,Pn.T3],encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([(0,l.hO)({defineCustomElementFn:bi})],_),_})();const $o=(B,_)=>{const k=B.prototype;_.forEach(D=>{Object.defineProperty(k,D,{get(){return this.el[D]},set(q){this.z.runOutsideAngular(()=>this.el[D]=q)},configurable:!0})})},Ho=(B,_)=>{const k=B.prototype;_.forEach(D=>{k[D]=function(){const q=arguments;return this.z.runOutsideAngular(()=>this.el[D].apply(this.el,q))}})},Or=(B,_,k)=>{k.forEach(D=>B[D]=(0,Dt.R)(_,D))};function wo(B){return function(k){const{defineCustomElementFn:D,inputs:q,methods:ce}=B;return void 0!==D&&D(),q&&$o(k,q),ce&&Ho(k,ce),k}}let oc=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-app"]],standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Vo})],_),_})(),Cm=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Se,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],_),_})(),og=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Pc,inputs:["collapse"]})],_),_})(),w1=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:vd,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],_),_})(),W1=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card-content"]],inputs:{mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:_d,inputs:["mode"]})],_),_})(),Up=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:w0,inputs:["color","mode","translucent"]})],_),_})(),Tf=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Bl,inputs:["color","mode"]})],_),_})(),mp=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Rr,inputs:["color","mode"]})],_),_})(),rg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Dn,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],_),_})(),Bg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-content"]],inputs:{color:"color",fixedSlotPlacement:"fixedSlotPlacement",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Tl,inputs:["color","fixedSlotPlacement","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],_),_})(),Gp=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:wc,inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],_),_})(),S=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:or,inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],_),_})(),w=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:pc,inputs:["fixed"]})],_),_})(),P=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Mh,inputs:["collapse","mode","translucent"]})],_),_})(),U=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:W0,inputs:["alt","src"]})],_),_})(),st=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Z1,inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],_),_})(),br=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Il,inputs:["color","mode","position"]})],_),_})(),rr=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:$a,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],_),_})(),lo=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-progress-bar"]],inputs:{buffer:"buffer",color:"color",mode:"mode",reversed:"reversed",type:"type",value:"value"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:vh,inputs:["buffer","color","mode","reversed","type","value"]})],_),_})(),Ng=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-row"]],standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:ls})],_),_})(),h4=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-segment-button"]],inputs:{disabled:"disabled",layout:"layout",mode:"mode",type:"type",value:"value"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Bc,inputs:["disabled","layout","mode","type","value"]})],_),_})(),L4=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:b,inputs:["disabled","value"]})],_),_})(),Wp=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Je,inputs:["color","mode","selectedTab","translucent"]})],_),_})(),wv=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:_n,inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],_),_})(),lg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:mn,inputs:["color","mode"]})],_),_})(),cg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-thumbnail"]],standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:j})],_),_})(),xv=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Wi,inputs:["color","size"]})],_),_})(),Vg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Jh,inputs:["color","mode"]})],_),_})(),p4=(()=>{var B;class _ extends l.p4{constructor(...D){super(...D),(0,V.A)(this,"outlet",void 0),(0,V.A)(this,"tabBar",void 0),(0,V.A)(this,"tabBars",void 0)}}return B=_,(0,V.A)(_,"\u0275fac",(()=>{let k;return function(q){return(k||(k=ne.xGo(B)))(q||B)}})()),(0,V.A)(_,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-tabs"]],contentQueries:function(D,q,ce){if(1&D&&(ne.wni(ce,Wp,5),ne.wni(ce,Wp,4)),2&D){let De;ne.mGM(De=ne.lsd())&&(q.tabBar=De.first),ne.mGM(De=ne.lsd())&&(q.tabBars=De)}},viewQuery:function(D,q){if(1&D&&ne.GBs(Bo,5,Jo),2&D){let ce;ne.mGM(ce=ne.lsd())&&(q.outlet=ce.first)}},standalone:!0,features:[ne.Vt3,ne.aNF],ngContentSelectors:To,decls:6,vars:0,consts:[["tabsInner",""],["outlet",""],[1,"tabs-inner"],["tabs","true",3,"stackWillChange","stackDidChange"]],template:function(D,q){if(1&D){const ce=ne.RV6();ne.NAR(no),ne.SdG(0),ne.j41(1,"div",2,0)(3,"ion-router-outlet",3,1),ne.bIt("stackWillChange",function(dt){return ne.eBV(ce),ne.Njj(q.onStackWillChange(dt))})("stackDidChange",function(dt){return ne.eBV(ce),ne.Njj(q.onStackDidChange(dt))}),ne.k0s()(),ne.SdG(5,1)}},dependencies:[Jo],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]})),_})(),f4=(()=>{var B;class _ extends l.Kb{constructor(){super(dr),(0,V.A)(this,"angularDelegate",(0,ne.WQX)(l.Yq)),(0,V.A)(this,"injector",(0,ne.WQX)(ne.zZn)),(0,V.A)(this,"environmentInjector",(0,ne.WQX)(ne.uvJ)),bi()}create(D){return super.create({...D,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return B=_,(0,V.A)(_,"\u0275fac",function(D){return new(D||B)}),(0,V.A)(_,"\u0275prov",ne.jDH({token:B,factory:B.\u0275fac})),_})();class W2 extends l.Kb{constructor(){super(Dr),(0,V.A)(this,"angularDelegate",(0,ne.WQX)(l.Yq)),(0,V.A)(this,"injector",(0,ne.WQX)(ne.zZn)),(0,V.A)(this,"environmentInjector",(0,ne.WQX)(ne.uvJ)),nt()}create(_){return super.create({..._,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const c2=(B={})=>(0,ne.EmA)([{provide:l.sR,useValue:B},{provide:ne.hnV,useFactory:Sm,multi:!0,deps:[l.sR,Pn.qQ]},(0,l.YV)(),l.Yq,f4,W2]),Sm=(B,_)=>()=>{_.documentElement.classList.add("ion-ce"),(0,ht.i)(B)};let $g=(()=>{var B;class _ extends l.Kb{constructor(){super(un),ao()}}return B=_,(0,V.A)(_,"\u0275fac",function(D){return new(D||B)}),(0,V.A)(_,"\u0275prov",ne.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})),_})(),u0=(()=>{var B;class _ extends l.Kb{constructor(){super(cr),function qi(){typeof customElements>"u"||["ion-toast","ion-icon","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-toast":customElements.get(_)||customElements.define(_,bl);break;case"ion-icon":customElements.get(_)||ke();break;case"ion-ripple-effect":customElements.get(_)||Ga()}})}()}}return B=_,(0,V.A)(_,"\u0275fac",function(D){return new(D||B)}),(0,V.A)(_,"\u0275prov",ne.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})),_})();const u2=["checked","color","disabled","indeterminate","justify","labelPlacement","mode","name","value"],Da={provide:hl.kq,useExisting:(0,ne.Rfq)(()=>ah),multi:!0};let ah=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionChange","ionFocus","ionBlur"])}writeValue(D){this.elementRef.nativeElement.checked=this.lastValue=D,(0,l.z3)(this.elementRef)}handleIonChange(D){this.handleValueChange(D,D.checked)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-checkbox"]],hostBindings:function(D,q){1&D&&ne.bIt("ionChange",function(De){return q.handleIonChange(De.target)})},inputs:{checked:"checked",color:"color",disabled:"disabled",indeterminate:"indeterminate",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},standalone:!0,features:[ne.Jv_([Da]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Nh,inputs:u2})],_),_})(),d2=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:Ym,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],_),_})();const Mm=["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],Am={provide:hl.kq,useExisting:(0,ne.Rfq)(()=>Dm),multi:!0};let Dm=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}handleIonInput(D){this.handleValueChange(D,D.value)}registerOnChange(D){super.registerOnChange(q=>{D("number"===this.type?""===q?null:parseFloat(q):q)})}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-input"]],hostBindings:function(D,q){1&D&&ne.bIt("ionInput",function(De){return q.handleIonInput(De.target)})},inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},standalone:!0,features:[ne.Jv_([Am]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:ic,inputs:Mm,methods:["setFocus","getInputElement"]})],_),_})();const Mf=["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","name","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],K2={provide:hl.kq,useExisting:(0,ne.Rfq)(()=>qp),multi:!0};let qp=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}handleIonInput(D){this.handleValueChange(D,D.value)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-searchbar"]],hostBindings:function(D,q){1&D&&ne.bIt("ionInput",function(De){return q.handleIonInput(De.target)})},inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",name:"name",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},standalone:!0,features:[ne.Jv_([K2]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:bm,inputs:Mf,methods:["setFocus","getInputElement"]})],_),_})();const Xp=["color","disabled","mode","scrollable","selectOnFocus","swipeGesture","value"],h2={provide:hl.kq,useExisting:(0,ne.Rfq)(()=>zm),multi:!0};let zm=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionChange"])}handleIonChange(D){this.handleValueChange(D,D.value)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-segment"]],hostBindings:function(D,q){1&D&&ne.bIt("ionChange",function(De){return q.handleIonChange(De.target)})},inputs:{color:"color",disabled:"disabled",mode:"mode",scrollable:"scrollable",selectOnFocus:"selectOnFocus",swipeGesture:"swipeGesture",value:"value"},standalone:!0,features:[ne.Jv_([h2]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:e2,inputs:Xp})],_),_})();const hg=["cancelText","color","compareWith","disabled","expandedIcon","fill","interface","interfaceOptions","justify","label","labelPlacement","mode","multiple","name","okText","placeholder","selectedText","shape","toggleIcon","value"],p2={provide:hl.kq,useExisting:(0,ne.Rfq)(()=>Af),multi:!0};let Af=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}handleIonChange(D){this.handleValueChange(D,D.value)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-select"]],hostBindings:function(D,q){1&D&&ne.bIt("ionChange",function(De){return q.handleIonChange(De.target)})},inputs:{cancelText:"cancelText",color:"color",compareWith:"compareWith",disabled:"disabled",expandedIcon:"expandedIcon",fill:"fill",interface:"interface",interfaceOptions:"interfaceOptions",justify:"justify",label:"label",labelPlacement:"labelPlacement",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",shape:"shape",toggleIcon:"toggleIcon",value:"value"},standalone:!0,features:[ne.Jv_([p2]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:y,inputs:hg,methods:["open"]})],_),_})();const jd=["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","maxlength","minlength","mode","name","placeholder","readonly","required","rows","shape","spellcheck","value","wrap"],pg={provide:hl.kq,useExisting:(0,ne.Rfq)(()=>xu),multi:!0};let xu=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Or(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}handleIonInput(D){this.handleValueChange(D,D.value)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-textarea"]],hostBindings:function(D,q){1&D&&ne.bIt("ionInput",function(De){return q.handleIonInput(De.target)})},inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",shape:"shape",spellcheck:"spellcheck",value:"value",wrap:"wrap"},standalone:!0,features:[ne.Jv_([pg]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,re.Cg)([wo({defineCustomElementFn:ct,inputs:jd,methods:["setFocus","getInputElement"]})],_),_})()},1771:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{L2:()=>ft,wt:()=>et,xr:()=>ps,lh:()=>ue,$x:()=>cu,OX:()=>po,Wi:()=>Ln,h:()=>jr,w$:()=>Yr,gv:()=>ui,iY:()=>Jt,zb:()=>qn,bN:()=>Ni});var V=_e(467),re={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},l="app",We=Object.defineProperty,ft={isDev:!!re.isDev,isBrowser:!0,isServer:!1,isTesting:!!re.isTesting},qt=re.hotModuleReplacement?window.__STENCIL_HOSTREFS__||(window.__STENCIL_HOSTREFS__=new WeakMap):new WeakMap,jt=Le=>qt.get(Le),At=(Le,qe)=>qe in Le,yt=(Le,qe)=>(0,console.error)(Le,qe),fn=re.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],xn=(...Le)=>console.error(...fn,...Le),rn=(...Le)=>console.warn(...fn,...Le),Mn=new Map,Ot=new Map,wn=[],Te="s-id",Vn="http://www.w3.org/1999/xlink",Ke=["formAssociatedCallback","formResetCallback","formDisabledCallback","formStateRestoreCallback"],Ae=typeof window<"u"?window:{},Ge=Ae.document||{head:{}},et=Ae.HTMLElement||class{},zt={$flags$:0,$resourcesUrl$:"",jmp:Le=>Le(),raf:Le=>requestAnimationFrame(Le),ael:(Le,qe,St,ln)=>Le.addEventListener(qe,St,ln),rel:(Le,qe,St,ln)=>Le.removeEventListener(qe,St,ln),ce:(Le,qe)=>new CustomEvent(Le,qe)},qn=Le=>{Object.assign(zt,Le)},un=re.shadowDom,go=(()=>{let Le=!1;try{Ge.addEventListener("e",null,Object.defineProperty({},"passive",{get(){Le=!0}}))}catch{}return Le})(),dr=!!re.constructableCSS&&(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Go=0,Dr=!1,cr=[],Ei=[],ko=[],Er=(Le,qe)=>St=>{Le.push(St),Dr||(Dr=!0,qe&&4&zt.$flags$?Yi(vi):zt.raf(vi))},Wr=Le=>{for(let qe=0;qe<Le.length;qe++)try{Le[qe](performance.now())}catch(St){yt(St)}Le.length=0},ji=(Le,qe)=>{let St=0,ln=0;for(;St<Le.length&&(ln=performance.now())<qe;)try{Le[St++](ln)}catch(Fn){yt(Fn)}St===Le.length?Le.length=0:0!==St&&Le.splice(0,St)},vi=()=>{if(re.asyncQueue&&Go++,Wr(cr),re.asyncQueue){const Le=2==(6&zt.$flags$)?performance.now()+14*Math.ceil(.1*Go):1/0;ji(Ei,Le),ji(ko,Le),Ei.length>0&&(ko.push(...Ei),Ei.length=0),(Dr=cr.length+Ei.length+ko.length>0)?zt.raf(vi):Go=0}else Wr(Ei),(Dr=cr.length>0)&&zt.raf(vi)},Yi=Le=>Promise.resolve(void 0).then(Le),ui=Er(cr,!1),Ni=Er(Ei,!0),po=Le=>{const qe=new URL(Le,zt.$resourcesUrl$);return qe.origin!==Ae.location.origin?qe.href:qe.pathname},bs={},fo=Le=>"object"==(Le=typeof Le)||"function"===Le;((Le,qe)=>{for(var St in qe)We(Le,St,{get:qe[St],enumerable:!0})})({},{err:()=>Qr,map:()=>Wo,ok:()=>Zr,unwrap:()=>lr,unwrapErr:()=>Pr});var Zr=Le=>({isOk:!0,isErr:!1,value:Le}),Qr=Le=>({isOk:!1,isErr:!0,value:Le});function Wo(Le,qe){if(Le.isOk){const St=qe(Le.value);return St instanceof Promise?St.then(ln=>Zr(ln)):Zr(St)}if(Le.isErr)return Qr(Le.value);throw"should never get here"}var lr=Le=>{if(Le.isOk)return Le.value;throw Le.value},Pr=Le=>{if(Le.isErr)return Le.value;throw Le.value},xr=0,wr=(Le,qe="")=>{if(re.profile&&performance.mark){const St=`st:${Le}:${qe}:${xr++}`;return performance.mark(St),()=>performance.measure(`[Stencil] ${Le}() <${qe}>`,St)}return()=>{}},jr=(Le,qe,...St)=>{let ln=null,Fn=null,Gn=null,Mi=!1,Li=!1;const ki=[],ao=sr=>{for(let gr=0;gr<sr.length;gr++)ln=sr[gr],Array.isArray(ln)?ao(ln):null!=ln&&"boolean"!=typeof ln&&((Mi="function"!=typeof Le&&!fo(ln))?ln=String(ln):re.isDev&&"function"!=typeof Le&&void 0===ln.$flags$&&xn("vNode passed as children has unexpected type.\nMake sure it's using the correct h() function.\nEmpty objects can also be the cause, look for JSX comments that became objects."),Mi&&Li?ki[ki.length-1].$text$+=ln:ki.push(Mi?Ns(null,ln):ln),Li=Mi)};if(ao(St),qe&&(re.isDev&&"input"===Le&&Kn(qe),re.vdomKey&&qe.key&&(Fn=qe.key),re.slotRelocation&&qe.name&&(Gn=qe.name),re.vdomClass)){const sr=qe.className||qe.class;sr&&(qe.class="object"!=typeof sr?sr:Object.keys(sr).filter(gr=>sr[gr]).join(" "))}if(re.isDev&&ki.some(Kr)&&xn("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),re.vdomFunctional&&"function"==typeof Le)return Le(null===qe?{}:qe,ki,Fi);const Ko=Ns(Le,null);return Ko.$attrs$=qe,ki.length>0&&(Ko.$children$=ki),re.vdomKey&&(Ko.$key$=Fn),re.slotRelocation&&(Ko.$name$=Gn),Ko},Ns=(Le,qe)=>{const St={$flags$:0,$tag$:Le,$text$:qe,$elm$:null,$children$:null};return re.vdomAttribute&&(St.$attrs$=null),re.vdomKey&&(St.$key$=null),re.slotRelocation&&(St.$name$=null),St},ps={},Kr=Le=>Le&&Le.$tag$===ps,Fi={forEach:(Le,qe)=>Le.map(ni).forEach(qe),map:(Le,qe)=>Le.map(ni).map(qe).map(Ai)},ni=Le=>({vattrs:Le.$attrs$,vchildren:Le.$children$,vkey:Le.$key$,vname:Le.$name$,vtag:Le.$tag$,vtext:Le.$text$}),Ai=Le=>{if("function"==typeof Le.vtag){const St={...Le.vattrs};return Le.vkey&&(St.key=Le.vkey),Le.vname&&(St.name=Le.vname),jr(Le.vtag,St,...Le.vchildren||[])}const qe=Ns(Le.vtag,Le.vtext);return qe.$attrs$=Le.vattrs,qe.$children$=Le.vchildren,qe.$key$=Le.vkey,qe.$name$=Le.vname,qe},Kn=Le=>{const qe=Object.keys(Le),St=qe.indexOf("value");if(-1===St)return;const ln=qe.indexOf("type"),Fn=qe.indexOf("min"),Gn=qe.indexOf("max"),Mi=qe.indexOf("step");(St<ln||St<Fn||St<Gn||St<Mi)&&rn('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},mt=(Le,qe,St,ln,Fn,Gn,Mi)=>{let Li,ki,ao,Ko;if(1===Gn.nodeType){for(Li=Gn.getAttribute("c-id"),Li&&(ki=Li.split("."),(ki[0]===Mi||"0"===ki[0])&&(ao={$flags$:0,$hostId$:ki[0],$nodeId$:ki[1],$depth$:ki[2],$index$:ki[3],$tag$:Gn.tagName.toLowerCase(),$elm$:Gn,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},qe.push(ao),Gn.removeAttribute("c-id"),Le.$children$||(Le.$children$=[]),Le.$children$[ao.$index$]=ao,Le=ao,ln&&"0"===ao.$depth$&&(ln[ao.$index$]=ao.$elm$))),Ko=Gn.childNodes.length-1;Ko>=0;Ko--)mt(Le,qe,St,ln,Fn,Gn.childNodes[Ko],Mi);if(Gn.shadowRoot)for(Ko=Gn.shadowRoot.childNodes.length-1;Ko>=0;Ko--)mt(Le,qe,St,ln,Fn,Gn.shadowRoot.childNodes[Ko],Mi)}else if(8===Gn.nodeType)ki=Gn.nodeValue.split("."),(ki[1]===Mi||"0"===ki[1])&&(Li=ki[0],ao={$flags$:0,$hostId$:ki[1],$nodeId$:ki[2],$depth$:ki[3],$index$:ki[4],$elm$:Gn,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Li?(ao.$elm$=Gn.nextSibling,ao.$elm$&&3===ao.$elm$.nodeType&&(ao.$text$=ao.$elm$.textContent,qe.push(ao),Gn.remove(),Le.$children$||(Le.$children$=[]),Le.$children$[ao.$index$]=ao,ln&&"0"===ao.$depth$&&(ln[ao.$index$]=ao.$elm$))):ao.$hostId$===Mi&&("s"===Li?(ao.$tag$="slot",Gn["s-sn"]=ki[5]?ao.$name$=ki[5]:"",Gn["s-sr"]=!0,re.shadowDom&&ln&&(ao.$elm$=Ge.createElement(ao.$tag$),ao.$name$&&ao.$elm$.setAttribute("name",ao.$name$),Gn.parentNode.insertBefore(ao.$elm$,Gn),Gn.remove(),"0"===ao.$depth$&&(ln[ao.$index$]=ao.$elm$)),St.push(ao),Le.$children$||(Le.$children$=[]),Le.$children$[ao.$index$]=ao):"r"===Li&&(re.shadowDom&&ln?Gn.remove():re.slotRelocation&&(Fn["s-cr"]=Gn,Gn["s-cn"]=!0))));else if(Le&&"style"===Le.$tag$){const sr=Ns(null,Gn.textContent);sr.$elm$=Gn,sr.$index$="0",Le.$children$=[sr]}},Ye=(Le,qe)=>{if(1===Le.nodeType){let St=0;for(;St<Le.childNodes.length;St++)Ye(Le.childNodes[St],qe);if(Le.shadowRoot)for(St=0;St<Le.shadowRoot.childNodes.length;St++)Ye(Le.shadowRoot.childNodes[St],qe)}else if(8===Le.nodeType){const St=Le.nodeValue.split(".");"o"===St[0]&&(qe.set(St[1]+"."+St[2],Le),Le.nodeValue="",Le["s-en"]=St[3])}},Jt=Le=>wn.push(Le),Ln=Le=>jt(Le).$modeName$,ue=(Le,qe,St)=>{const ln=(Le=>re.lazyLoad?jt(Le).$hostElement$:Le)(Le);return{emit:Fn=>(re.isDev&&!ln.isConnected&&rn(`The "${qe}" event was emitted, but the dispatcher node is no longer connected to the dom.`),ae(ln,qe,{bubbles:!!(4&St),composed:!!(2&St),cancelable:!!(1&St),detail:Fn}))}},ae=(Le,qe,St)=>{const ln=zt.ce(qe,St);return Le.dispatchEvent(ln),ln},we=new WeakMap,it=(Le,qe,St)=>{var ln;const Fn=Cn(qe,St),Gn=Ot.get(Fn);if(!re.attachStyles)return Fn;if(Le=11===Le.nodeType?Le:Ge,Gn)if("string"==typeof Gn){let Li,Mi=we.get(Le=Le.head||Le);if(Mi||we.set(Le,Mi=new Set),!Mi.has(Fn)){if(re.hydrateClientSide&&Le.host&&(Li=Le.querySelector(`[sty-id="${Fn}"]`)))Li.innerHTML=Gn;else{Li=Ge.createElement("style"),Li.innerHTML=Gn;const ki=null!=(ln=zt.$nonce$)?ln:function Ts(Le){var qe,St,ln;return null!=(ln=null==(St=null==(qe=Le.head)?void 0:qe.querySelector('meta[name="csp-nonce"]'))?void 0:St.getAttribute("content"))?ln:void 0}(Ge);null!=ki&&Li.setAttribute("nonce",ki),(re.hydrateServerSide||re.hotModuleReplacement)&&Li.setAttribute("sty-id",Fn),Le.insertBefore(Li,Le.querySelector("link"))}4&qe.$flags$&&(Li.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),Mi&&Mi.add(Fn)}}else re.constructableCSS&&!Le.adoptedStyleSheets.includes(Gn)&&(Le.adoptedStyleSheets=[...Le.adoptedStyleSheets,Gn]);return Fn},Cn=(Le,qe)=>"sc-"+(re.mode&&qe&&32&Le.$flags$?Le.$tagName$+"-"+qe:Le.$tagName$),Nn=(Le,qe,St,ln,Fn,Gn)=>{if(St!==ln){let Mi=At(Le,qe),Li=qe.toLowerCase();if(re.vdomClass&&"class"===qe){const ki=Le.classList,ao=Oi(St),Ko=Oi(ln);ki.remove(...ao.filter(sr=>sr&&!Ko.includes(sr))),ki.add(...Ko.filter(sr=>sr&&!ao.includes(sr)))}else if(re.vdomStyle&&"style"===qe){if(re.updatable)for(const ki in St)(!ln||null==ln[ki])&&(!re.hydrateServerSide&&ki.includes("-")?Le.style.removeProperty(ki):Le.style[ki]="");for(const ki in ln)(!St||ln[ki]!==St[ki])&&(!re.hydrateServerSide&&ki.includes("-")?Le.style.setProperty(ki,ln[ki]):Le.style[ki]=ln[ki])}else if(!re.vdomKey||"key"!==qe)if(re.vdomRef&&"ref"===qe)ln&&ln(Le);else if(!re.vdomListener||(re.lazyLoad?Mi:Le.__lookupSetter__(qe))||"o"!==qe[0]||"n"!==qe[1]){if(re.vdomPropOrAttr){const ki=fo(ln);if((Mi||ki&&null!==ln)&&!Fn)try{if(Le.tagName.includes("-"))Le[qe]=ln;else{const Ko=null==ln?"":ln;"list"===qe?Mi=!1:(null==St||Le[qe]!=Ko)&&(Le[qe]=Ko)}}catch{}let ao=!1;re.vdomXlink&&Li!==(Li=Li.replace(/^xlink\:?/,""))&&(qe=Li,ao=!0),null==ln||!1===ln?(!1!==ln||""===Le.getAttribute(qe))&&(re.vdomXlink&&ao?Le.removeAttributeNS(Vn,qe):Le.removeAttribute(qe)):(!Mi||4&Gn||Fn)&&!ki&&(ln=!0===ln?"":ln,re.vdomXlink&&ao?Le.setAttributeNS(Vn,qe,ln):Le.setAttribute(qe,ln))}}else if(qe="-"===qe[2]?qe.slice(3):At(Ae,Li)?Li.slice(2):Li[2]+qe.slice(3),St||ln){const ki=qe.endsWith(Fo);qe=qe.replace(nr,""),St&&zt.rel(Le,qe,St,ki),ln&&zt.ael(Le,qe,ln,ki)}}},Hi=/\s/,Oi=Le=>Le?Le.split(Hi):[],Fo="Capture",nr=new RegExp(Fo+"$"),ii=(Le,qe,St)=>{const ln=11===qe.$elm$.nodeType&&qe.$elm$.host?qe.$elm$.host:qe.$elm$,Fn=Le&&Le.$attrs$||bs,Gn=qe.$attrs$||bs;if(re.updatable)for(const Mi of jn(Object.keys(Fn)))Mi in Gn||Nn(ln,Mi,Fn[Mi],void 0,St,qe.$flags$);for(const Mi of jn(Object.keys(Gn)))Nn(ln,Mi,Fn[Mi],Gn[Mi],St,qe.$flags$)};function jn(Le){return Le.includes("ref")?[...Le.filter(qe=>"ref"!==qe),"ref"]:Le}var di,co,Ki,Kt=!1,oi=!1,Pi=!1,Xo=!1,pr=(Le,qe,St,ln)=>{var Fn;const Gn=qe.$children$[St];let Li,ki,ao,Mi=0;if(re.slotRelocation&&!Kt&&(Pi=!0,"slot"===Gn.$tag$&&(di&&ln.classList.add(di+"-s"),Gn.$flags$|=Gn.$children$?2:1)),re.isDev&&Gn.$elm$&&xn(`The JSX ${null!==Gn.$text$?`"${Gn.$text$}" text`:`"${Gn.$tag$}" element`} node should not be shared within the same renderer. The renderer caches element lookups in order to improve performance. However, a side effect from this is that the exact same JSX node should not be reused. For more information please see https://stenciljs.com/docs/templating-jsx#avoid-shared-jsx-nodes`),re.vdomText&&null!==Gn.$text$)Li=Gn.$elm$=Ge.createTextNode(Gn.$text$);else if(re.slotRelocation&&1&Gn.$flags$)Li=Gn.$elm$=re.isDebug||re.hydrateServerSide?au(Gn):Ge.createTextNode("");else{if(re.svg&&!Xo&&(Xo="svg"===Gn.$tag$),Li=Gn.$elm$=re.svg?Ge.createElementNS(Xo?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!Kt&&re.slotRelocation&&2&Gn.$flags$?"slot-fb":Gn.$tag$):Ge.createElement(!Kt&&re.slotRelocation&&2&Gn.$flags$?"slot-fb":Gn.$tag$),re.svg&&Xo&&"foreignObject"===Gn.$tag$&&(Xo=!1),re.vdomAttribute&&ii(null,Gn,Xo),(re.shadowDom||re.scoped)&&(Le=>null!=Le)(di)&&Li["s-si"]!==di&&Li.classList.add(Li["s-si"]=di),re.scoped&&Ha(Li,ln),Gn.$children$)for(Mi=0;Mi<Gn.$children$.length;++Mi)ki=pr(Le,Gn,Mi,Li),ki&&Li.appendChild(ki);re.svg&&("svg"===Gn.$tag$?Xo=!1:"foreignObject"===Li.tagName&&(Xo=!0))}return Li["s-hn"]=Ki,re.slotRelocation&&3&Gn.$flags$&&(Li["s-sr"]=!0,Li["s-cr"]=co,Li["s-sn"]=Gn.$name$||"",Li["s-rf"]=null==(Fn=Gn.$attrs$)?void 0:Fn.ref,ao=Le&&Le.$children$&&Le.$children$[St],ao&&ao.$tag$===Gn.$tag$&&Le.$elm$&&(re.experimentalSlotFixes?es(Le.$elm$):qr(Le.$elm$,!1))),Li},es=Le=>{zt.$flags$|=1;const qe=Le.closest(Ki.toLowerCase());if(null!=qe){const St=Array.from(qe.childNodes).find(Fn=>Fn["s-cr"]),ln=Array.from(Le.childNodes);for(const Fn of St?ln.reverse():ln)null!=Fn["s-sh"]&&(xa(qe,Fn,null!=St?St:null),Fn["s-sh"]=void 0,Pi=!0)}zt.$flags$&=-2},qr=(Le,qe)=>{zt.$flags$|=1;const St=Array.from(Le.childNodes);if(Le["s-sr"]&&re.experimentalSlotFixes){let ln=Le;for(;ln=ln.nextSibling;)ln&&ln["s-sn"]===Le["s-sn"]&&ln["s-sh"]===Ki&&St.push(ln)}for(let ln=St.length-1;ln>=0;ln--){const Fn=St[ln];Fn["s-hn"]!==Ki&&Fn["s-ol"]&&(xa(bi(Fn),Fn,Cr(Fn)),Fn["s-ol"].remove(),Fn["s-ol"]=void 0,Fn["s-sh"]=void 0,Pi=!0),qe&&qr(Fn,qe)}zt.$flags$&=-2},Pa=(Le,qe,St,ln,Fn,Gn)=>{let Li,Mi=re.slotRelocation&&Le["s-cr"]&&Le["s-cr"].parentNode||Le;for(re.shadowDom&&Mi.shadowRoot&&Mi.tagName===Ki&&(Mi=Mi.shadowRoot);Fn<=Gn;++Fn)ln[Fn]&&(Li=pr(null,St,Fn,Le),Li&&(ln[Fn].$elm$=Li,xa(Mi,Li,re.slotRelocation?Cr(qe):qe)))},Jl=(Le,qe,St)=>{for(let ln=qe;ln<=St;++ln){const Fn=Le[ln];if(Fn){const Gn=Fn.$elm$;Gs(Fn),Gn&&(re.slotRelocation&&(oi=!0,Gn["s-ol"]?Gn["s-ol"].remove():qr(Gn,!0)),Gn.remove())}}},Oa=(Le,qe,St=!1)=>Le.$tag$===qe.$tag$&&(re.slotRelocation&&"slot"===Le.$tag$?Le.$name$===qe.$name$:!(re.vdomKey&&!St)||Le.$key$===qe.$key$),Cr=Le=>Le&&Le["s-ol"]||Le,bi=Le=>(Le["s-ol"]?Le["s-ol"]:Le).parentNode,kr=(Le,qe,St=!1)=>{const ln=qe.$elm$=Le.$elm$,Fn=Le.$children$,Gn=qe.$children$,Mi=qe.$tag$,Li=qe.$text$;let ki;re.vdomText&&null!==Li?re.vdomText&&re.slotRelocation&&(ki=ln["s-cr"])?ki.parentNode.textContent=Li:re.vdomText&&Le.$text$!==Li&&(ln.data=Li):(re.svg&&(Xo="svg"===Mi||"foreignObject"!==Mi&&Xo),(re.vdomAttribute||re.reflect)&&(re.slot&&"slot"===Mi&&!Kt?re.experimentalSlotFixes&&Le.$name$!==qe.$name$&&(qe.$elm$["s-sn"]=qe.$name$||"",es(qe.$elm$.parentElement)):ii(Le,qe,Xo)),re.updatable&&null!==Fn&&null!==Gn?((Le,qe,St,ln,Fn=!1)=>{let xl,ms,Gn=0,Mi=0,Li=0,ki=0,ao=qe.length-1,Ko=qe[0],sr=qe[ao],gr=ln.length-1,Xr=ln[0],sa=ln[gr];for(;Gn<=ao&&Mi<=gr;)if(null==Ko)Ko=qe[++Gn];else if(null==sr)sr=qe[--ao];else if(null==Xr)Xr=ln[++Mi];else if(null==sa)sa=ln[--gr];else if(Oa(Ko,Xr,Fn))kr(Ko,Xr,Fn),Ko=qe[++Gn],Xr=ln[++Mi];else if(Oa(sr,sa,Fn))kr(sr,sa,Fn),sr=qe[--ao],sa=ln[--gr];else if(Oa(Ko,sa,Fn))re.slotRelocation&&("slot"===Ko.$tag$||"slot"===sa.$tag$)&&qr(Ko.$elm$.parentNode,!1),kr(Ko,sa,Fn),xa(Le,Ko.$elm$,sr.$elm$.nextSibling),Ko=qe[++Gn],sa=ln[--gr];else if(Oa(sr,Xr,Fn))re.slotRelocation&&("slot"===Ko.$tag$||"slot"===sa.$tag$)&&qr(sr.$elm$.parentNode,!1),kr(sr,Xr,Fn),xa(Le,sr.$elm$,Ko.$elm$),sr=qe[--ao],Xr=ln[++Mi];else{if(Li=-1,re.vdomKey)for(ki=Gn;ki<=ao;++ki)if(qe[ki]&&null!==qe[ki].$key$&&qe[ki].$key$===Xr.$key$){Li=ki;break}re.vdomKey&&Li>=0?(ms=qe[Li],ms.$tag$!==Xr.$tag$?xl=pr(qe&&qe[Mi],St,Li,Le):(kr(ms,Xr,Fn),qe[Li]=void 0,xl=ms.$elm$),Xr=ln[++Mi]):(xl=pr(qe&&qe[Mi],St,Mi,Le),Xr=ln[++Mi]),xl&&(re.slotRelocation?xa(bi(Ko.$elm$),xl,Cr(Ko.$elm$)):xa(Ko.$elm$.parentNode,xl,Ko.$elm$))}Gn>ao?Pa(Le,null==ln[gr+1]?null:ln[gr+1].$elm$,St,ln,Mi,gr):re.updatable&&Mi>gr&&Jl(qe,Gn,ao)})(ln,Fn,qe,Gn,St):null!==Gn?(re.updatable&&re.vdomText&&null!==Le.$text$&&(ln.textContent=""),Pa(ln,null,qe,Gn,0,Gn.length-1)):re.updatable&&null!==Fn&&Jl(Fn,0,Fn.length-1),re.svg&&Xo&&"svg"===Mi&&(Xo=!1))},Vr=Le=>{const qe=Le.childNodes;for(const St of qe)if(1===St.nodeType){if(St["s-sr"]){const ln=St["s-sn"];St.hidden=!1;for(const Fn of qe)if(Fn!==St)if(Fn["s-hn"]!==St["s-hn"]||""!==ln){if(1===Fn.nodeType&&(ln===Fn.getAttribute("slot")||ln===Fn["s-sn"])||3===Fn.nodeType&&ln===Fn["s-sn"]){St.hidden=!0;break}}else if(1===Fn.nodeType||3===Fn.nodeType&&""!==Fn.textContent.trim()){St.hidden=!0;break}}Vr(St)}},is=[],Es=Le=>{let qe,St,ln;for(const Fn of Le.childNodes){if(Fn["s-sr"]&&(qe=Fn["s-cr"])&&qe.parentNode){St=qe.parentNode.childNodes;const Gn=Fn["s-sn"];for(ln=St.length-1;ln>=0;ln--)if(qe=St[ln],!(qe["s-cn"]||qe["s-nr"]||qe["s-hn"]===Fn["s-hn"]||re.experimentalSlotFixes&&qe["s-sh"]&&qe["s-sh"]===Fn["s-hn"]))if(wa(qe,Gn)){let Mi=is.find(Li=>Li.$nodeToRelocate$===qe);oi=!0,qe["s-sn"]=qe["s-sn"]||Gn,Mi?(Mi.$nodeToRelocate$["s-sh"]=Fn["s-hn"],Mi.$slotRefNode$=Fn):(qe["s-sh"]=Fn["s-hn"],is.push({$slotRefNode$:Fn,$nodeToRelocate$:qe})),qe["s-sr"]&&is.map(Li=>{wa(Li.$nodeToRelocate$,qe["s-sn"])&&(Mi=is.find(ki=>ki.$nodeToRelocate$===qe),Mi&&!Li.$slotRefNode$&&(Li.$slotRefNode$=Mi.$slotRefNode$))})}else is.some(Mi=>Mi.$nodeToRelocate$===qe)||is.push({$nodeToRelocate$:qe})}1===Fn.nodeType&&Es(Fn)}},wa=(Le,qe)=>1===Le.nodeType?null===Le.getAttribute("slot")&&""===qe||Le.getAttribute("slot")===qe:Le["s-sn"]===qe||""===qe,Gs=Le=>{re.vdomRef&&(Le.$attrs$&&Le.$attrs$.ref&&Le.$attrs$.ref(null),Le.$children$&&Le.$children$.map(Gs))},xa=(Le,qe,St)=>{const ln=null==Le?void 0:Le.insertBefore(qe,St);return re.scoped&&Ha(qe,Le),ln},gl=Le=>{const qe=[];return Le&&qe.push(...Le["s-scs"]||[],Le["s-si"],Le["s-sc"],...gl(Le.parentElement)),qe},Ha=(Le,qe,St=!1)=>{var ln;if(Le&&qe&&1===Le.nodeType){const Fn=new Set(gl(qe).filter(Boolean));if(Fn.size&&(null==(ln=Le.classList)||ln.add(...Le["s-scs"]=[...Fn]),Le["s-ol"]||St))for(const Gn of Array.from(Le.childNodes))Ha(Gn,Le,!0)}},su=(Le,qe,St=!1)=>{var ln,Fn,Gn,Mi,Li;const ki=Le.$hostElement$,ao=Le.$cmpMeta$,Ko=Le.$vnode$||Ns(null,null),sr=Kr(qe)?qe:jr(null,null,qe);if(Ki=ki.tagName,re.isDev&&Array.isArray(qe)&&qe.some(Kr))throw new Error(`The <Host> must be the single root component.\nLooks like the render() function of "${Ki.toLowerCase()}" is returning an array that contains the <Host>.\n\nThe render() function should look like this instead:\n\nrender() {\n  // Do not return an array\n  return (\n    <Host>{content}</Host>\n  );\n}\n  `);if(re.reflect&&ao.$attrsToReflect$&&(sr.$attrs$=sr.$attrs$||{},ao.$attrsToReflect$.map(([gr,Xr])=>sr.$attrs$[Xr]=ki[gr])),St&&sr.$attrs$)for(const gr of Object.keys(sr.$attrs$))ki.hasAttribute(gr)&&!["key","ref","style","class"].includes(gr)&&(sr.$attrs$[gr]=ki[gr]);if(sr.$tag$=null,sr.$flags$|=4,Le.$vnode$=sr,sr.$elm$=Ko.$elm$=re.shadowDom&&ki.shadowRoot||ki,(re.scoped||re.shadowDom)&&(di=ki["s-sc"]),Kt=un&&!!(1&ao.$flags$),re.slotRelocation&&(co=ki["s-cr"],oi=!1),kr(Ko,sr,St),re.slotRelocation){if(zt.$flags$|=1,Pi){Es(sr.$elm$);for(const gr of is){const Xr=gr.$nodeToRelocate$;if(!Xr["s-ol"]){const sa=re.isDebug||re.hydrateServerSide?_a(Xr):Ge.createTextNode("");sa["s-nr"]=Xr,xa(Xr.parentNode,Xr["s-ol"]=sa,Xr)}}for(const gr of is){const Xr=gr.$nodeToRelocate$,sa=gr.$slotRefNode$;if(sa){const xl=sa.parentNode;let ms=sa.nextSibling;if(!re.experimentalSlotFixes||ms&&1===ms.nodeType){let Vo=null==(ln=Xr["s-ol"])?void 0:ln.previousSibling;for(;Vo;){let js=null!=(Fn=Vo["s-nr"])?Fn:null;if(js&&js["s-sn"]===Xr["s-sn"]&&xl===js.parentNode){for(js=js.nextSibling;js===Xr||null!=js&&js["s-sr"];)js=null==js?void 0:js.nextSibling;if(!js||!js["s-nr"]){ms=js;break}}Vo=Vo.previousSibling}}(!ms&&xl!==Xr.parentNode||Xr.nextSibling!==ms)&&Xr!==ms&&(!re.experimentalSlotFixes&&!Xr["s-hn"]&&Xr["s-ol"]&&(Xr["s-hn"]=Xr["s-ol"].parentNode.nodeName),xa(xl,Xr,ms),1===Xr.nodeType&&(Xr.hidden=null!=(Gn=Xr["s-ih"])&&Gn)),Xr&&"function"==typeof sa["s-rf"]&&sa["s-rf"](Xr)}else 1===Xr.nodeType&&(St&&(Xr["s-ih"]=null!=(Mi=Xr.hidden)&&Mi),Xr.hidden=!0)}}oi&&Vr(sr.$elm$),zt.$flags$&=-2,is.length=0}if(re.experimentalScopedSlotChanges&&2&ao.$flags$)for(const gr of sr.$elm$.childNodes)gr["s-hn"]!==Ki&&!gr["s-sh"]&&(St&&null==gr["s-ih"]&&(gr["s-ih"]=null!=(Li=gr.hidden)&&Li),gr.hidden=!0);co=void 0},au=Le=>Ge.createComment(`<slot${Le.$name$?' name="'+Le.$name$+'"':""}> (host=${Ki.toLowerCase()})`),_a=Le=>Ge.createComment("org-location for "+(Le.localName?`<${Le.localName}> (host=${Le["s-hn"]})`:`[${Le.textContent}]`)),Eu=(Le,qe)=>{re.asyncLoading&&qe&&!Le.$onRenderResolve$&&qe["s-p"]&&qe["s-p"].push(new Promise(St=>Le.$onRenderResolve$=St))},Ja=(Le,qe)=>{if(re.taskQueue&&re.updatable&&(Le.$flags$|=16),re.asyncLoading&&4&Le.$flags$)return void(Le.$flags$|=512);Eu(Le,Le.$ancestorComponent$);const St=()=>Ra(Le,qe);return re.taskQueue?Ni(St):St()},Ra=(Le,qe)=>{const St=Le.$hostElement$,ln=wr("scheduleUpdate",Le.$cmpMeta$.$tagName$),Fn=re.lazyLoad?Le.$lazyInstance$:St;if(!Fn)throw new Error(`Can't render component <${St.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let Gn;return qe?(re.lazyLoad&&re.hostListener&&(Le.$flags$|=256,Le.$queuedListeners$&&(Le.$queuedListeners$.map(([Mi,Li])=>Ia(Fn,Mi,Li)),Le.$queuedListeners$=void 0)),gc(St,"componentWillLoad"),re.cmpWillLoad&&(Gn=Ia(Fn,"componentWillLoad"))):(gc(St,"componentWillUpdate"),re.cmpWillUpdate&&(Gn=Ia(Fn,"componentWillUpdate"))),gc(St,"componentWillRender"),re.cmpWillRender&&(Gn=Vc(Gn,()=>Ia(Fn,"componentWillRender"))),ln(),Vc(Gn,()=>ju(Le,Fn,qe))},Vc=(Le,qe)=>$u(Le)?Le.then(qe).catch(St=>{console.error(St),qe()}):qe(),$u=Le=>Le instanceof Promise||Le&&Le.then&&"function"==typeof Le.then,ju=function(){var Le=(0,V.A)(function*(qe,St,ln){var Fn;const Gn=qe.$hostElement$,Mi=wr("update",qe.$cmpMeta$.$tagName$),Li=Gn["s-rc"];re.style&&ln&&(Le=>{const qe=Le.$cmpMeta$,St=Le.$hostElement$,ln=qe.$flags$,Fn=wr("attachStyles",qe.$tagName$),Gn=it(re.shadowDom&&un&&St.shadowRoot?St.shadowRoot:St.getRootNode(),qe,Le.$modeName$);(re.shadowDom||re.scoped)&&re.cssAnnotations&&10&ln&&(St["s-sc"]=Gn,St.classList.add(Gn+"-h"),re.scoped&&2&ln&&St.classList.add(Gn+"-s")),Fn()})(qe);const ki=wr("render",qe.$cmpMeta$.$tagName$);if(re.isDev&&(qe.$flags$|=1024),re.hydrateServerSide?yield Ms(qe,St,Gn,ln):Ms(qe,St,Gn,ln),re.isDev&&(qe.$renderCount$=void 0===qe.$renderCount$?1:qe.$renderCount$+1,qe.$flags$&=-1025),re.hydrateServerSide)try{uu(Gn),ln&&(1&qe.$cmpMeta$.$flags$?Gn["s-en"]="":2&qe.$cmpMeta$.$flags$&&(Gn["s-en"]="c"))}catch(ao){yt(ao,Gn)}if(re.asyncLoading&&Li&&(Li.map(ao=>ao()),Gn["s-rc"]=void 0),ki(),Mi(),re.asyncLoading){const ao=null!=(Fn=Gn["s-p"])?Fn:[],Ko=()=>Dc(qe);0===ao.length?Ko():(Promise.all(ao).then(Ko),qe.$flags$|=4,ao.length=0)}else Dc(qe)});return function(St,ln,Fn){return Le.apply(this,arguments)}}(),Ms=(Le,qe,St,ln)=>{const Fn=!!re.allRenderFn,Gn=!!re.lazyLoad,Mi=!!re.taskQueue,Li=!!re.updatable;try{if(qe=(Fn||qe.render)&&qe.render(),Li&&Mi&&(Le.$flags$&=-17),(Li||Gn)&&(Le.$flags$|=2),re.hasRenderFn||re.reflect)if(re.vdomRender||re.reflect){if(re.hydrateServerSide)return Promise.resolve(qe).then(ki=>su(Le,ki,ln));su(Le,qe,ln)}else 1&Le.$cmpMeta$.$flags$?St.shadowRoot.textContent=qe:St.textContent=qe}catch(ki){yt(ki,Le.$hostElement$)}return null},Dc=Le=>{const qe=Le.$cmpMeta$.$tagName$,St=Le.$hostElement$,ln=wr("postUpdate",qe),Fn=re.lazyLoad?Le.$lazyInstance$:St,Gn=Le.$ancestorComponent$;re.cmpDidRender&&(re.isDev&&(Le.$flags$|=1024),Ia(Fn,"componentDidRender"),re.isDev&&(Le.$flags$&=-1025)),gc(St,"componentDidRender"),64&Le.$flags$?(re.cmpDidUpdate&&(re.isDev&&(Le.$flags$|=1024),Ia(Fn,"componentDidUpdate"),re.isDev&&(Le.$flags$&=-1025)),gc(St,"componentDidUpdate"),ln()):(Le.$flags$|=64,re.asyncLoading&&re.cssAnnotations&&Gl(St),re.cmpDidLoad&&(re.isDev&&(Le.$flags$|=2048),Ia(Fn,"componentDidLoad"),re.isDev&&(Le.$flags$&=-2049)),gc(St,"componentDidLoad"),ln(),re.asyncLoading&&(Le.$onReadyResolve$(St),Gn||lc(qe))),re.method&&re.lazyLoad&&Le.$onInstanceResolve$(St),re.asyncLoading&&(Le.$onRenderResolve$&&(Le.$onRenderResolve$(),Le.$onRenderResolve$=void 0),512&Le.$flags$&&Yi(()=>Ja(Le,!1)),Le.$flags$&=-517)},cu=Le=>{if(re.updatable&&(ft.isBrowser||ft.isTesting)){const qe=jt(Le),St=qe.$hostElement$.isConnected;return St&&2==(18&qe.$flags$)&&Ja(qe,!1),St}return!1},lc=Le=>{re.cssAnnotations&&Gl(Ge.documentElement),re.asyncQueue&&(zt.$flags$|=2),Yi(()=>ae(Ae,"appload",{detail:{namespace:l}})),re.profile&&performance.measure&&performance.measure(`[Stencil] ${l} initial load (by ${Le})`,"st:app:start")},Ia=(Le,qe,St)=>{if(Le&&Le[qe])try{return Le[qe](St)}catch(ln){yt(ln)}},gc=(Le,qe)=>{re.lifecycleDOMEvents&&ae(Le,"stencil_"+qe,{bubbles:!0,composed:!0,detail:{namespace:l}})},Gl=Le=>{var qe,St;return re.hydratedClass?Le.classList.add(null!=(qe=re.hydratedSelectorName)?qe:"hydrated"):re.hydratedAttribute?Le.setAttribute(null!=(St=re.hydratedSelectorName)?St:"hydrated",""):void 0},uu=Le=>{const qe=Le.children;if(null!=qe)for(let St=0,ln=qe.length;St<ln;St++){const Fn=qe[St];"function"==typeof Fn.connectedCallback&&Fn.connectedCallback(),uu(Fn)}},Io=(Le,qe,St)=>{var ln,Fn;const Gn=Le.prototype;if(re.formAssociated&&64&qe.$flags$&&1&St&&Ke.forEach(Mi=>Object.defineProperty(Gn,Mi,{value(...Li){const ki=jt(this),Ko=re.lazyLoad?ki.$lazyInstance$:re.lazyLoad?ki.$hostElement$:this;if(Ko){const sr=Ko[Mi];"function"==typeof sr&&sr.call(Ko,...Li)}else ki.$onReadyPromise$.then(sr=>{const gr=sr[Mi];"function"==typeof gr&&gr.call(sr,...Li)})}})),re.member&&qe.$members$||re.watchCallback&&(qe.$watchers$||Le.watchers)){re.watchCallback&&Le.watchers&&!qe.$watchers$&&(qe.$watchers$=Le.watchers);const Mi=Object.entries(null!=(ln=qe.$members$)?ln:{});if(Mi.map(([Li,[ki]])=>{(re.prop||re.state)&&(31&ki||(!re.lazyLoad||2&St)&&32&ki)?Object.defineProperty(Gn,Li,{get(){return((Le,qe)=>jt(this).$instanceValues$.get(qe))(0,Li)},set(ao){if(re.isDev){const Ko=jt(this);!(1&St)&&0===(Ko&&8&Ko.$flags$)&&31&ki&&!(1024&ki)&&rn(`@Prop() "${Li}" on <${qe.$tagName$}> is immutable but was modified from within the component.\nMore information: https://stenciljs.com/docs/properties#prop-mutability`)}((Le,qe,St,ln)=>{const Fn=jt(Le);if(re.lazyLoad&&!Fn)throw new Error(`Couldn't find host element for "${ln.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const Gn=re.lazyLoad?Fn.$hostElement$:Le,Mi=Fn.$instanceValues$.get(qe),Li=Fn.$flags$,ki=re.lazyLoad?Fn.$lazyInstance$:Gn;St=((Le,qe)=>null==Le||fo(Le)?Le:re.propBoolean&&4&qe?"false"!==Le&&(""===Le||!!Le):re.propNumber&&2&qe?parseFloat(Le):re.propString&&1&qe?String(Le):Le)(St,ln.$members$[qe][0]);const ao=Number.isNaN(Mi)&&Number.isNaN(St);if((!re.lazyLoad||!(8&Li)||void 0===Mi)&&St!==Mi&&!ao&&(Fn.$instanceValues$.set(qe,St),re.isDev&&(1024&Fn.$flags$?rn(`The state/prop "${qe}" changed during rendering. This can potentially lead to infinite-loops and other bugs.`,"\nElement",Gn,"\nNew value",St,"\nOld value",Mi):2048&Fn.$flags$&&rn(`The state/prop "${qe}" changed during "componentDidLoad()", this triggers extra re-renders, try to setup on "componentWillLoad()"`,"\nElement",Gn,"\nNew value",St,"\nOld value",Mi)),!re.lazyLoad||ki)){if(re.watchCallback&&ln.$watchers$&&128&Li){const sr=ln.$watchers$[qe];sr&&sr.map(gr=>{try{ki[gr](St,Mi,qe)}catch(Xr){yt(Xr,Gn)}})}if(re.updatable&&2==(18&Li)){if(re.cmpShouldUpdate&&ki.componentShouldUpdate&&!1===ki.componentShouldUpdate(St,Mi,qe))return;Ja(Fn,!1)}}})(this,Li,ao,qe)},configurable:!0,enumerable:!0}):re.lazyLoad&&re.method&&1&St&&64&ki&&Object.defineProperty(Gn,Li,{value(...ao){var Ko;const sr=jt(this);return null==(Ko=null==sr?void 0:sr.$onInstancePromise$)?void 0:Ko.then(()=>{var gr;return null==(gr=sr.$lazyInstance$)?void 0:gr[Li](...ao)})}})}),re.observeAttribute&&(!re.lazyLoad||1&St)){const Li=new Map;Gn.attributeChangedCallback=function(ki,ao,Ko){zt.jmp(()=>{var sr;const gr=Li.get(ki);if(this.hasOwnProperty(gr))Ko=this[gr],delete this[gr];else{if(Gn.hasOwnProperty(gr)&&"number"==typeof this[gr]&&this[gr]==Ko)return;if(null==gr){const Xr=jt(this),sa=null==Xr?void 0:Xr.$flags$;if(sa&&!(8&sa)&&128&sa&&Ko!==ao){const ms=re.lazyLoad?Xr.$lazyInstance$:re.lazyLoad?Xr.$hostElement$:this,Vo=null==(sr=qe.$watchers$)?void 0:sr[ki];null==Vo||Vo.forEach(js=>{null!=ms[js]&&ms[js].call(ms,Ko,ao,ki)})}return}}this[gr]=(null!==Ko||"boolean"!=typeof this[gr])&&Ko})},Le.observedAttributes=Array.from(new Set([...Object.keys(null!=(Fn=qe.$watchers$)?Fn:{}),...Mi.filter(([ki,ao])=>15&ao[0]).map(([ki,ao])=>{var Ko;const sr=ao[1]||ki;return Li.set(sr,ki),re.reflect&&512&ao[0]&&(null==(Ko=qe.$attrsToReflect$)||Ko.push([ki,sr])),sr})]))}}return Le},Sc=function(){var Le=(0,V.A)(function*(qe,St,ln,Fn){let Gn;if(!(32&St.$flags$)){if(St.$flags$|=32,(re.lazyLoad||re.hydrateClientSide)&&ln.$lazyBundleId$){const ao=((Le,qe,St)=>{const ln=Le.$tagName$.replace(/-/g,"_"),Fn=Le.$lazyBundleId$;if(re.isDev&&"string"!=typeof Fn)return void xn(`Trying to lazily load component <${Le.$tagName$}> with style mode "${qe.$modeName$}", but it does not exist.`);if(!Fn)return;const Gn=!re.hotModuleReplacement&&Mn.get(Fn);return Gn?Gn[ln]:_e(4140)(`./${Fn}.entry.js${re.hotModuleReplacement&&St?"?s-hmr="+St:""}`).then(Mi=>(re.hotModuleReplacement||Mn.set(Fn,Mi),Mi[ln]),yt)})(ln,St,Fn);if(ao&&"then"in ao){const sr=((Le,qe)=>re.profile&&performance.mark?(0===performance.getEntriesByName(Le,"mark").length&&performance.mark(Le),()=>{0===performance.getEntriesByName(qe,"measure").length&&performance.measure(qe,Le)}):()=>{})(`st:load:${ln.$tagName$}:${St.$modeName$}`,`[Stencil] Load module for <${ln.$tagName$}>`);Gn=yield ao,sr()}else Gn=ao;if(!Gn)throw new Error(`Constructor for "${ln.$tagName$}#${St.$modeName$}" was not found`);re.member&&!Gn.isProxied&&(re.watchCallback&&(ln.$watchers$=Gn.watchers),Io(Gn,ln,2),Gn.isProxied=!0);const Ko=wr("createInstance",ln.$tagName$);re.member&&(St.$flags$|=8);try{new Gn(St)}catch(sr){yt(sr)}re.member&&(St.$flags$&=-9),re.watchCallback&&(St.$flags$|=128),Ko(),vl(St.$lazyInstance$)}else Gn=qe.constructor,customElements.whenDefined(qe.localName).then(()=>St.$flags$|=128);if(re.style&&Gn&&Gn.style){let ao;"string"==typeof Gn.style?ao=Gn.style:re.mode&&"string"!=typeof Gn.style&&(St.$modeName$=(Le=>wn.map(qe=>qe(Le)).find(qe=>!!qe))(qe),St.$modeName$&&(ao=Gn.style[St.$modeName$]),re.hydrateServerSide&&St.$modeName$&&qe.setAttribute("s-mode",St.$modeName$));const Ko=Cn(ln,St.$modeName$);if(!Ot.has(Ko)){const sr=wr("registerStyles",ln.$tagName$);!re.hydrateServerSide&&re.shadowDom&&re.shadowDomShim&&8&ln.$flags$&&(ao=yield _e.e(3687).then(_e.bind(_e,3687)).then(gr=>gr.scopeCss(ao,Ko,!1))),((Le,qe,St)=>{let ln=Ot.get(Le);dr&&St?(ln=ln||new CSSStyleSheet,"string"==typeof ln?ln=qe:ln.replaceSync(qe)):ln=qe,Ot.set(Le,ln)})(Ko,ao,!!(1&ln.$flags$)),sr()}}}const Mi=St.$ancestorComponent$,Li=()=>Ja(St,!0);re.asyncLoading&&Mi&&Mi["s-rc"]?Mi["s-rc"].push(Li):Li()});return function(St,ln,Fn,Gn){return Le.apply(this,arguments)}}(),vl=Le=>{re.lazyLoad&&re.connectedCallback&&Ia(Le,"connectedCallback")},Na=Le=>{const qe=Le["s-cr"]=Ge.createComment(re.isDebug?`content-ref (host=${Le.localName})`:"");qe["s-cn"]=!0,xa(Le,qe,Le.firstChild)},nt=Le=>{re.lazyLoad&&re.disconnectedCallback&&Ia(Le,"disconnectedCallback"),re.cmpDidUnload&&Ia(Le,"componentDidUnload")},Dt=function(){var Le=(0,V.A)(function*(qe){if(!(1&zt.$flags$)){const St=jt(qe);re.hostListener&&St.$rmListeners$&&(St.$rmListeners$.map(ln=>ln()),St.$rmListeners$=void 0),re.lazyLoad?null!=St&&St.$lazyInstance$?nt(St.$lazyInstance$):null!=St&&St.$onReadyPromise$&&St.$onReadyPromise$.then(()=>nt(St.$lazyInstance$)):nt(qe)}});return function(St){return Le.apply(this,arguments)}}(),Yn=Le=>{const qe=Le.cloneNode;Le.cloneNode=function(St){const ln=this,Fn=!!re.shadowDom&&ln.shadowRoot&&un,Gn=qe.call(ln,!!Fn&&St);if(re.slot&&!Fn&&St){let Li,ki,Mi=0;const ao=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"];for(;Mi<ln.childNodes.length;Mi++)Li=ln.childNodes[Mi]["s-nr"],ki=ao.every(Ko=>!ln.childNodes[Mi][Ko]),Li&&(re.appendChildSlotFix&&Gn.__appendChild?Gn.__appendChild(Li.cloneNode(!0)):Gn.appendChild(Li.cloneNode(!0))),ki&&Gn.appendChild(ln.childNodes[Mi].cloneNode(!0))}return Gn}},On=Le=>{Le.__appendChild=Le.appendChild,Le.appendChild=function(qe){const St=qe["s-sn"]=Cs(qe),ln=ea(this.childNodes,St,this.tagName);if(ln){const Fn=Ps(ln,St),Gn=Fn[Fn.length-1],Mi=xa(Gn.parentNode,qe,Gn.nextSibling);return Vr(this),Mi}return this.__appendChild(qe)}},li=Le=>{Le.__removeChild=Le.removeChild,Le.removeChild=function(qe){if(qe&&typeof qe["s-sn"]<"u"){const St=ea(this.childNodes,qe["s-sn"],this.tagName);if(St){const Fn=Ps(St,qe["s-sn"]).find(Gn=>Gn===qe);if(Fn)return Fn.remove(),void Vr(this)}}return this.__removeChild(qe)}},bo=Le=>{const qe=Le.prepend;Le.prepend=function(...St){St.forEach(ln=>{"string"==typeof ln&&(ln=this.ownerDocument.createTextNode(ln));const Fn=ln["s-sn"]=Cs(ln),Gn=ea(this.childNodes,Fn,this.tagName);if(Gn){const Mi=document.createTextNode("");Mi["s-nr"]=ln,Gn["s-cr"].parentNode.__appendChild(Mi),ln["s-ol"]=Mi;const ki=Ps(Gn,Fn)[0];return xa(ki.parentNode,ln,ki.nextSibling)}return 1===ln.nodeType&&ln.getAttribute("slot")&&(ln.hidden=!0),qe.call(this,ln)})}},Eo=Le=>{Le.append=function(...qe){qe.forEach(St=>{"string"==typeof St&&(St=this.ownerDocument.createTextNode(St)),this.appendChild(St)})}},so=Le=>{const qe=Le.insertAdjacentHTML;Le.insertAdjacentHTML=function(St,ln){if("afterbegin"!==St&&"beforeend"!==St)return qe.call(this,St,ln);const Fn=this.ownerDocument.createElement("_");let Gn;if(Fn.innerHTML=ln,"afterbegin"===St)for(;Gn=Fn.firstChild;)this.prepend(Gn);else if("beforeend"===St)for(;Gn=Fn.firstChild;)this.append(Gn)}},mi=Le=>{Le.insertAdjacentText=function(qe,St){this.insertAdjacentHTML(qe,St)}},qo=Le=>{const qe=Le.insertAdjacentElement;Le.insertAdjacentElement=function(St,ln){return"afterbegin"!==St&&"beforeend"!==St?qe.call(this,St,ln):"afterbegin"===St?(this.prepend(ln),ln):("beforeend"===St&&this.append(ln),ln)}},hr=Le=>{const qe=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(Le,"__textContent",qe),Object.defineProperty(Le,"textContent",re.experimentalScopedSlotChanges?{get(){return" "+os(this.childNodes).map(Fn=>{var Gn,Mi;const Li=[];let ki=Fn.nextSibling;for(;ki&&ki["s-sn"]===Fn["s-sn"];)(3===ki.nodeType||1===ki.nodeType)&&Li.push(null!=(Mi=null==(Gn=ki.textContent)?void 0:Gn.trim())?Mi:""),ki=ki.nextSibling;return Li.filter(ao=>""!==ao).join(" ")}).filter(Fn=>""!==Fn).join(" ")+" "},set(St){os(this.childNodes).forEach(Fn=>{let Gn=Fn.nextSibling;for(;Gn&&Gn["s-sn"]===Fn["s-sn"];){const Mi=Gn;Gn=Gn.nextSibling,Mi.remove()}if(""===Fn["s-sn"]){const Mi=this.ownerDocument.createTextNode(St);Mi["s-sn"]="",xa(Fn.parentElement,Mi,Fn.nextSibling)}else Fn.remove()})}}:{get(){var St;const ln=ea(this.childNodes,"",this.tagName);return 3===(null==(St=null==ln?void 0:ln.nextSibling)?void 0:St.nodeType)?ln.nextSibling.textContent:ln?ln.textContent:this.__textContent},set(St){var ln;const Fn=ea(this.childNodes,"",this.tagName);if(3===(null==(ln=null==Fn?void 0:Fn.nextSibling)?void 0:ln.nodeType))Fn.nextSibling.textContent=St;else if(Fn)Fn.textContent=St;else{this.__textContent=St;const Gn=this["s-cr"];Gn&&xa(this,Gn,this.firstChild)}}})},Ir=(Le,qe)=>{class St extends Array{item(Fn){return this[Fn]}}if(8&qe.$flags$){const ln=Le.__lookupGetter__("childNodes");Object.defineProperty(Le,"children",{get(){return this.childNodes.map(Fn=>1===Fn.nodeType)}}),Object.defineProperty(Le,"childElementCount",{get:()=>Le.children.length}),Object.defineProperty(Le,"childNodes",{get(){const Fn=ln.call(this);if(!(1&zt.$flags$)&&2&jt(this).$flags$){const Gn=new St;for(let Mi=0;Mi<Fn.length;Mi++){const Li=Fn[Mi]["s-nr"];Li&&Gn.push(Li)}return Gn}return St.from(Fn)}})}},os=Le=>{const qe=[];for(const St of Array.from(Le))St["s-sr"]&&qe.push(St),qe.push(...os(St.childNodes));return qe},Cs=Le=>Le["s-sn"]||1===Le.nodeType&&Le.getAttribute("slot")||"",ea=(Le,qe,St)=>{let Fn,ln=0;for(;ln<Le.length;ln++)if(Fn=Le[ln],Fn["s-sr"]&&Fn["s-sn"]===qe&&Fn["s-hn"]===St||(Fn=ea(Fn.childNodes,qe,St),Fn))return Fn;return null},Ps=(Le,qe)=>{const St=[Le];for(;(Le=Le.nextSibling)&&Le["s-sn"]===qe;)St.push(Le);return St},Yr=(Le,qe)=>{const St={$flags$:qe[0],$tagName$:qe[1]};re.member&&(St.$members$=qe[2]),re.hostListener&&(St.$listeners$=qe[3]),re.watchCallback&&(St.$watchers$=Le.$watchers$),re.reflect&&(St.$attrsToReflect$=[]),re.shadowDom&&!un&&1&St.$flags$&&(St.$flags$|=8),re.experimentalSlotFixes?re.scoped&&2&St.$flags$&&((Le,qe)=>{Yn(Le),On(Le),Eo(Le),bo(Le),qo(Le),so(Le),mi(Le),hr(Le),Ir(Le,qe),li(Le)})(Le.prototype,St):(re.slotChildNodesFix&&Ir(Le.prototype,St),re.cloneNodeFix&&Yn(Le.prototype),re.appendChildSlotFix&&On(Le.prototype),re.scopedSlotTextContentFix&&2&St.$flags$&&hr(Le.prototype));const ln=Le.prototype.connectedCallback,Fn=Le.prototype.disconnectedCallback;return Object.assign(Le.prototype,{__registerHost(){((Le,qe)=>{const St={$flags$:0,$hostElement$:Le,$cmpMeta$:qe,$instanceValues$:new Map};re.isDev&&(St.$renderCount$=0),re.method&&re.lazyLoad&&(St.$onInstancePromise$=new Promise(ln=>St.$onInstanceResolve$=ln)),re.asyncLoading&&(St.$onReadyPromise$=new Promise(ln=>St.$onReadyResolve$=ln),Le["s-p"]=[],Le["s-rc"]=[]),qt.set(Le,St)})(this,St)},connectedCallback(){const Gn=jt(this);Yc(this,Gn,St.$listeners$,!1),(Le=>{if(!(1&zt.$flags$)){const qe=jt(Le),St=qe.$cmpMeta$,ln=wr("connectedCallback",St.$tagName$);if(re.hostListenerTargetParent&&Yc(Le,qe,St.$listeners$,!0),1&qe.$flags$)Yc(Le,qe,St.$listeners$,!1),null!=qe&&qe.$lazyInstance$?vl(qe.$lazyInstance$):null!=qe&&qe.$onReadyPromise$&&qe.$onReadyPromise$.then(()=>vl(qe.$lazyInstance$));else{let Fn;if(qe.$flags$|=1,re.hydrateClientSide&&(Fn=Le.getAttribute(Te),Fn)){if(re.shadowDom&&un&&1&St.$flags$){const Gn=re.mode?it(Le.shadowRoot,St,Le.getAttribute("s-mode")):it(Le.shadowRoot,St);Le.classList.remove(Gn+"-h",Gn+"-s")}((Le,qe,St,ln)=>{const Fn=wr("hydrateClient",qe),Gn=Le.shadowRoot,Mi=[],ki=re.shadowDom&&Gn?[]:null,ao=ln.$vnode$=Ns(qe,null);zt.$orgLocNodes$||Ye(Ge.body,zt.$orgLocNodes$=new Map),Le[Te]=St,Le.removeAttribute(Te),mt(ao,Mi,[],ki,Le,Le,St),Mi.map(Ko=>{const sr=Ko.$hostId$+"."+Ko.$nodeId$,gr=zt.$orgLocNodes$.get(sr),Xr=Ko.$elm$;gr&&un&&""===gr["s-en"]&&gr.parentNode.insertBefore(Xr,gr.nextSibling),Gn||(Xr["s-hn"]=qe,gr&&(Xr["s-ol"]=gr,Xr["s-ol"]["s-nr"]=Xr)),zt.$orgLocNodes$.delete(sr)}),re.shadowDom&&Gn&&ki.map(Ko=>{Ko&&Gn.appendChild(Ko)}),Fn()})(Le,St.$tagName$,Fn,qe)}if(re.slotRelocation&&!Fn&&(re.hydrateServerSide||(re.slot||re.shadowDom)&&12&St.$flags$)&&Na(Le),re.asyncLoading){let Gn=Le;for(;Gn=Gn.parentNode||Gn.host;)if(re.hydrateClientSide&&1===Gn.nodeType&&Gn.hasAttribute("s-id")&&Gn["s-p"]||Gn["s-p"]){Eu(qe,qe.$ancestorComponent$=Gn);break}}re.prop&&!re.hydrateServerSide&&St.$members$&&Object.entries(St.$members$).map(([Gn,[Mi]])=>{if(31&Mi&&Le.hasOwnProperty(Gn)){const Li=Le[Gn];delete Le[Gn],Le[Gn]=Li}}),re.initializeNextTick?Yi(()=>Sc(Le,qe,St)):Sc(Le,qe,St)}ln()}})(this),re.connectedCallback&&ln&&ln.call(this)},disconnectedCallback(){Dt(this),re.disconnectedCallback&&Fn&&Fn.call(this)},__attachShadow(){if(un)if(this.shadowRoot){if("open"!==this.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${St.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else this.attachShadow(re.shadowDelegatesFocus?{mode:"open",delegatesFocus:!!(16&St.$flags$)}:{mode:"open"});else this.shadowRoot=this}}),Le.is=St.$tagName$,Io(Le,St,3)},Yc=(Le,qe,St,ln)=>{re.hostListener&&St&&(re.hostListenerTargetParent&&(St=St.filter(ln?([Fn])=>32&Fn:([Fn])=>!(32&Fn))),St.map(([Fn,Gn,Mi])=>{const Li=re.hostListenerTarget?hu(Le,Fn):Le,ki=Zs(qe,Mi),ao=Uu(Fn);zt.ael(Li,Gn,ki,ao),(qe.$rmListeners$=qe.$rmListeners$||[]).push(()=>zt.rel(Li,Gn,ki,ao))}))},Zs=(Le,qe)=>St=>{var ln;try{re.lazyLoad?256&Le.$flags$?null==(ln=Le.$lazyInstance$)||ln[qe](St):(Le.$queuedListeners$=Le.$queuedListeners$||[]).push([qe,St]):Le.$hostElement$[qe](St)}catch(Fn){yt(Fn)}},hu=(Le,qe)=>re.hostListenerTargetDocument&&4&qe?Ge:re.hostListenerTargetWindow&&8&qe?Ae:re.hostListenerTargetBody&&16&qe?Ge.body:re.hostListenerTargetParent&&32&qe&&Le.parentElement?Le.parentElement:Le,Uu=Le=>go?{passive:!!(1&Le),capture:!!(2&Le)}:!!(2&Le)},2214:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{Dk:()=>V.Dk,KO:()=>V.KO,Sx:()=>V.Sx,Wp:()=>V.Wp});var V=_e(7852);(0,V.KO)("firebase","10.12.4","app")},2802:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{F0:()=>Vl,eJ:()=>dc,Wm:()=>yc,xI:()=>eo,J1:()=>vd,zK:()=>Ko,x9:()=>Wd,CI:()=>la});var V=_e(467),re=_e(7852),ne=_e(1076),l=_e(8041),We=_e(1635),Y=_e(1362);const fn=function Ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xn=new ne.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new l.Vy("@firebase/auth");function Mn(ie,...L){ht.logLevel<=l.$b.ERROR&&ht.error(`Auth (${re.MF}): ${ie}`,...L)}function Zn(ie,...L){throw Ii(ie,...L)}function xt(ie,...L){return Ii(ie,...L)}function Ot(ie,L,j){const oe=Object.assign(Object.assign({},fn()),{[L]:j});return new ne.FA("auth","Firebase",oe).create(L,{appName:ie.name})}function wn(ie){return Ot(ie,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ii(ie,...L){if("string"!=typeof ie){const j=L[0],oe=[...L.slice(1)];return oe[0]&&(oe[0].appName=ie.name),ie._errorFactory.create(j,...oe)}return xn.create(ie,...L)}function Et(ie,L,...j){if(!ie)throw Ii(L,...j)}function kn(ie){const L="INTERNAL ASSERTION FAILED: "+ie;throw Mn(L),new Error(L)}function Te(ie,L){ie||kn(L)}function on(){var ie;return typeof self<"u"&&(null===(ie=self.location)||void 0===ie?void 0:ie.href)||""}function Qt(){return"http:"===En()||"https:"===En()}function En(){var ie;return typeof self<"u"&&(null===(ie=self.location)||void 0===ie?void 0:ie.protocol)||null}class Ke{constructor(L,j){this.shortDelay=L,this.longDelay=j,Te(j>L,"Short delay should be less than long delay!"),this.isMobile=(0,ne.jZ)()||(0,ne.lV)()}get(){return function oo(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qt()||(0,ne.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(ie,L){Te(ie.emulator,"Emulator should always be set here");const{url:j}=ie.emulator;return L?`${j}${L.startsWith("/")?L.slice(1):L}`:j}class Ge{static initialize(L,j,oe){this.fetchImpl=L,j&&(this.headersImpl=j),oe&&(this.responseImpl=oe)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zt=new Ke(3e4,6e4);function qn(ie,L){return ie.tenantId&&!L.tenantId?Object.assign(Object.assign({},L),{tenantId:ie.tenantId}):L}function un(ie,L,j,oe){return go.apply(this,arguments)}function go(){return(go=(0,V.A)(function*(ie,L,j,oe,Ve={}){return Qi(ie,Ve,(0,V.A)(function*(){let lt={},cn={};oe&&("GET"===L?cn=oe:lt={body:JSON.stringify(oe)});const hn=(0,ne.Am)(Object.assign({key:ie.config.apiKey},cn)).slice(1),Qn=yield ie._getAdditionalHeaders();return Qn["Content-Type"]="application/json",ie.languageCode&&(Qn["X-Firebase-Locale"]=ie.languageCode),Ge.fetch()(cr(ie,ie.config.apiHost,j,hn),Object.assign({method:L,headers:Qn,referrerPolicy:"no-referrer"},lt))}))})).apply(this,arguments)}function Qi(ie,L,j){return dr.apply(this,arguments)}function dr(){return(dr=(0,V.A)(function*(ie,L,j){ie._canInitEmulator=!1;const oe=Object.assign(Object.assign({},et),L);try{const Ve=new ko(ie),lt=yield Promise.race([j(),Ve.promise]);Ve.clearNetworkTimeout();const cn=yield lt.json();if("needConfirmation"in cn)throw Er(ie,"account-exists-with-different-credential",cn);if(lt.ok&&!("errorMessage"in cn))return cn;{const hn=lt.ok?cn.errorMessage:cn.error.message,[Qn,Wn]=hn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Qn)throw Er(ie,"credential-already-in-use",cn);if("EMAIL_EXISTS"===Qn)throw Er(ie,"email-already-in-use",cn);if("USER_DISABLED"===Qn)throw Er(ie,"user-disabled",cn);const Wi=oe[Qn]||Qn.toLowerCase().replace(/[_\s]+/g,"-");if(Wn)throw Ot(ie,Wi,Wn);Zn(ie,Wi)}}catch(Ve){if(Ve instanceof ne.g)throw Ve;Zn(ie,"network-request-failed",{message:String(Ve)})}})).apply(this,arguments)}function Go(ie,L,j,oe){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,V.A)(function*(ie,L,j,oe,Ve={}){const lt=yield un(ie,L,j,oe,Ve);return"mfaPendingCredential"in lt&&Zn(ie,"multi-factor-auth-required",{_serverResponse:lt}),lt})).apply(this,arguments)}function cr(ie,L,j,oe){const Ve=`${L}${j}?${oe}`;return ie.config.emulator?Ae(ie.config,Ve):`${ie.config.apiScheme}://${Ve}`}function Ei(ie){switch(ie){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ko{constructor(L){this.auth=L,this.timer=null,this.promise=new Promise((j,oe)=>{this.timer=setTimeout(()=>oe(xt(this.auth,"network-request-failed")),zt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Er(ie,L,j){const oe={appName:ie.name};j.email&&(oe.email=j.email),j.phoneNumber&&(oe.phoneNumber=j.phoneNumber);const Ve=xt(ie,L,oe);return Ve.customData._tokenResponse=j,Ve}function ji(ie){return void 0!==ie&&void 0!==ie.enterprise}class vi{constructor(L){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===L.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=L.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=L.recaptchaEnforcementState}getProviderEnforcementState(L){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const j of this.recaptchaEnforcementState)if(j.provider&&j.provider===L)return Ei(j.enforcementState);return null}isProviderEnabled(L){return"ENFORCE"===this.getProviderEnforcementState(L)||"AUDIT"===this.getProviderEnforcementState(L)}}function Ni(ie,L){return po.apply(this,arguments)}function po(){return(po=(0,V.A)(function*(ie,L){return un(ie,"GET","/v2/recaptchaConfig",qn(ie,L))})).apply(this,arguments)}function bs(){return(bs=(0,V.A)(function*(ie,L){return un(ie,"POST","/v1/accounts:delete",L)})).apply(this,arguments)}function ro(ie,L){return fo.apply(this,arguments)}function fo(){return(fo=(0,V.A)(function*(ie,L){return un(ie,"POST","/v1/accounts:lookup",L)})).apply(this,arguments)}function Ts(ie){if(ie)try{const L=new Date(Number(ie));if(!isNaN(L.getTime()))return L.toUTCString()}catch{}}function Qr(){return(Qr=(0,V.A)(function*(ie,L=!1){const j=(0,ne.Ku)(ie),oe=yield j.getIdToken(L),Ve=lr(oe);Et(Ve&&Ve.exp&&Ve.auth_time&&Ve.iat,j.auth,"internal-error");const lt="object"==typeof Ve.firebase?Ve.firebase:void 0,cn=null==lt?void 0:lt.sign_in_provider;return{claims:Ve,token:oe,authTime:Ts(Wo(Ve.auth_time)),issuedAtTime:Ts(Wo(Ve.iat)),expirationTime:Ts(Wo(Ve.exp)),signInProvider:cn||null,signInSecondFactor:(null==lt?void 0:lt.sign_in_second_factor)||null}})).apply(this,arguments)}function Wo(ie){return 1e3*Number(ie)}function lr(ie){const[L,j,oe]=ie.split(".");if(void 0===L||void 0===j||void 0===oe)return Mn("JWT malformed, contained fewer than 3 sections"),null;try{const Ve=(0,ne.u)(j);return Ve?JSON.parse(Ve):(Mn("Failed to decode base64 JWT payload"),null)}catch(Ve){return Mn("Caught error parsing JWT payload as JSON",null==Ve?void 0:Ve.toString()),null}}function Pr(ie){const L=lr(ie);return Et(L,"internal-error"),Et(typeof L.exp<"u","internal-error"),Et(typeof L.iat<"u","internal-error"),Number(L.exp)-Number(L.iat)}function xr(ie,L){return wr.apply(this,arguments)}function wr(){return(wr=(0,V.A)(function*(ie,L,j=!1){if(j)return L;try{return yield L}catch(oe){throw oe instanceof ne.g&&function aa({code:ie}){return"auth/user-disabled"===ie||"auth/user-token-expired"===ie}(oe)&&ie.auth.currentUser===ie&&(yield ie.auth.signOut()),oe}})).apply(this,arguments)}class Jn{constructor(L){this.user=L,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(L){var j;if(L){const oe=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),oe}{this.errorBackoff=3e4;const Ve=(null!==(j=this.user.stsTokenManager.expirationTime)&&void 0!==j?j:0)-Date.now()-3e5;return Math.max(0,Ve)}}schedule(L=!1){var j=this;if(!this.isRunning)return;const oe=this.getInterval(L);this.timerId=setTimeout((0,V.A)(function*(){yield j.iteration()}),oe)}iteration(){var L=this;return(0,V.A)(function*(){try{yield L.user.getIdToken(!0)}catch(j){return void("auth/network-request-failed"===(null==j?void 0:j.code)&&L.schedule(!0))}L.schedule()})()}}class hs{constructor(L,j){this.createdAt=L,this.lastLoginAt=j,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ts(this.lastLoginAt),this.creationTime=Ts(this.createdAt)}_copy(L){this.createdAt=L.createdAt,this.lastLoginAt=L.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jr(ie){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,V.A)(function*(ie){var L;const j=ie.auth,oe=yield ie.getIdToken(),Ve=yield xr(ie,ro(j,{idToken:oe}));Et(null==Ve?void 0:Ve.users.length,j,"internal-error");const lt=Ve.users[0];ie._notifyReloadListener(lt);const cn=null!==(L=lt.providerUserInfo)&&void 0!==L&&L.length?ni(lt.providerUserInfo):[],hn=function Fi(ie,L){return[...ie.filter(oe=>!L.some(Ve=>Ve.providerId===oe.providerId)),...L]}(ie.providerData,cn),Wi=!!ie.isAnonymous&&!(ie.email&&lt.passwordHash||null!=hn&&hn.length),vr={uid:lt.localId,displayName:lt.displayName||null,photoURL:lt.photoUrl||null,email:lt.email||null,emailVerified:lt.emailVerified||!1,phoneNumber:lt.phoneNumber||null,tenantId:lt.tenantId||null,providerData:hn,metadata:new hs(lt.createdAt,lt.lastLoginAt),isAnonymous:Wi};Object.assign(ie,vr)})).apply(this,arguments)}function Kr(){return(Kr=(0,V.A)(function*(ie){const L=(0,ne.Ku)(ie);yield jr(L),yield L.auth._persistUserIfCurrent(L),L.auth._notifyListenersIfCurrent(L)})).apply(this,arguments)}function ni(ie){return ie.map(L=>{var{providerId:j}=L,oe=(0,We.Tt)(L,["providerId"]);return{providerId:j,uid:oe.rawId||"",displayName:oe.displayName||null,email:oe.email||null,phoneNumber:oe.phoneNumber||null,photoURL:oe.photoUrl||null}})}function Kn(){return(Kn=(0,V.A)(function*(ie,L){const j=yield Qi(ie,{},(0,V.A)(function*(){const oe=(0,ne.Am)({grant_type:"refresh_token",refresh_token:L}).slice(1),{tokenApiHost:Ve,apiKey:lt}=ie.config,cn=cr(ie,Ve,"/v1/token",`key=${lt}`),hn=yield ie._getAdditionalHeaders();return hn["Content-Type"]="application/x-www-form-urlencoded",Ge.fetch()(cn,{method:"POST",headers:hn,body:oe})}));return{accessToken:j.access_token,expiresIn:j.expires_in,refreshToken:j.refresh_token}})).apply(this,arguments)}function mt(){return(mt=(0,V.A)(function*(ie,L){return un(ie,"POST","/v2/accounts:revokeToken",qn(ie,L))})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(L){Et(L.idToken,"internal-error"),Et(typeof L.idToken<"u","internal-error"),Et(typeof L.refreshToken<"u","internal-error");const j="expiresIn"in L&&typeof L.expiresIn<"u"?Number(L.expiresIn):Pr(L.idToken);this.updateTokensAndExpiration(L.idToken,L.refreshToken,j)}updateFromIdToken(L){Et(0!==L.length,"internal-error");const j=Pr(L);this.updateTokensAndExpiration(L,null,j)}getToken(L,j=!1){var oe=this;return(0,V.A)(function*(){return j||!oe.accessToken||oe.isExpired?(Et(oe.refreshToken,L,"user-token-expired"),oe.refreshToken?(yield oe.refresh(L,oe.refreshToken),oe.accessToken):null):oe.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(L,j){var oe=this;return(0,V.A)(function*(){const{accessToken:Ve,refreshToken:lt,expiresIn:cn}=yield function Ai(ie,L){return Kn.apply(this,arguments)}(L,j);oe.updateTokensAndExpiration(Ve,lt,Number(cn))})()}updateTokensAndExpiration(L,j,oe){this.refreshToken=j||null,this.accessToken=L||null,this.expirationTime=Date.now()+1e3*oe}static fromJSON(L,j){const{refreshToken:oe,accessToken:Ve,expirationTime:lt}=j,cn=new Ye;return oe&&(Et("string"==typeof oe,"internal-error",{appName:L}),cn.refreshToken=oe),Ve&&(Et("string"==typeof Ve,"internal-error",{appName:L}),cn.accessToken=Ve),lt&&(Et("number"==typeof lt,"internal-error",{appName:L}),cn.expirationTime=lt),cn}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(L){this.accessToken=L.accessToken,this.refreshToken=L.refreshToken,this.expirationTime=L.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return kn("not implemented")}}function Tt(ie,L){Et("string"==typeof ie||typeof ie>"u","internal-error",{appName:L})}class Jt{constructor(L){var{uid:j,auth:oe,stsTokenManager:Ve}=L,lt=(0,We.Tt)(L,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=j,this.auth=oe,this.stsTokenManager=Ve,this.accessToken=Ve.accessToken,this.displayName=lt.displayName||null,this.email=lt.email||null,this.emailVerified=lt.emailVerified||!1,this.phoneNumber=lt.phoneNumber||null,this.photoURL=lt.photoURL||null,this.isAnonymous=lt.isAnonymous||!1,this.tenantId=lt.tenantId||null,this.providerData=lt.providerData?[...lt.providerData]:[],this.metadata=new hs(lt.createdAt||void 0,lt.lastLoginAt||void 0)}getIdToken(L){var j=this;return(0,V.A)(function*(){const oe=yield xr(j,j.stsTokenManager.getToken(j.auth,L));return Et(oe,j.auth,"internal-error"),j.accessToken!==oe&&(j.accessToken=oe,yield j.auth._persistUserIfCurrent(j),j.auth._notifyListenersIfCurrent(j)),oe})()}getIdTokenResult(L){return function Zr(ie){return Qr.apply(this,arguments)}(this,L)}reload(){return function ps(ie){return Kr.apply(this,arguments)}(this)}_assign(L){this!==L&&(Et(this.uid===L.uid,this.auth,"internal-error"),this.displayName=L.displayName,this.photoURL=L.photoURL,this.email=L.email,this.emailVerified=L.emailVerified,this.phoneNumber=L.phoneNumber,this.isAnonymous=L.isAnonymous,this.tenantId=L.tenantId,this.providerData=L.providerData.map(j=>Object.assign({},j)),this.metadata._copy(L.metadata),this.stsTokenManager._assign(L.stsTokenManager))}_clone(L){const j=new Jt(Object.assign(Object.assign({},this),{auth:L,stsTokenManager:this.stsTokenManager._clone()}));return j.metadata._copy(this.metadata),j}_onReload(L){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=L,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(L){this.reloadListener?this.reloadListener(L):this.reloadUserInfo=L}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(L,j=!1){var oe=this;return(0,V.A)(function*(){let Ve=!1;L.idToken&&L.idToken!==oe.stsTokenManager.accessToken&&(oe.stsTokenManager.updateFromServerResponse(L),Ve=!0),j&&(yield jr(oe)),yield oe.auth._persistUserIfCurrent(oe),Ve&&oe.auth._notifyListenersIfCurrent(oe)})()}delete(){var L=this;return(0,V.A)(function*(){if((0,re.xZ)(L.auth.app))return Promise.reject(wn(L.auth));const j=yield L.getIdToken();return yield xr(L,function Xi(ie,L){return bs.apply(this,arguments)}(L.auth,{idToken:j})),L.stsTokenManager.clearRefreshToken(),L.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(L=>Object.assign({},L)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(L,j){var oe,Ve,lt,cn,hn,Qn,Wn,Wi;const vr=null!==(oe=j.displayName)&&void 0!==oe?oe:void 0,Sr=null!==(Ve=j.email)&&void 0!==Ve?Ve:void 0,Mr=null!==(lt=j.phoneNumber)&&void 0!==lt?lt:void 0,Hr=null!==(cn=j.photoURL)&&void 0!==cn?cn:void 0,Za=null!==(hn=j.tenantId)&&void 0!==hn?hn:void 0,As=null!==(Qn=j._redirectEventId)&&void 0!==Qn?Qn:void 0,ts=null!==(Wn=j.createdAt)&&void 0!==Wn?Wn:void 0,Js=null!==(Wi=j.lastLoginAt)&&void 0!==Wi?Wi:void 0,{uid:ca,emailVerified:Hs,isAnonymous:gs,providerData:Ca,stsTokenManager:bl}=j;Et(ca&&bl,L,"internal-error");const ua=Ye.fromJSON(this.name,bl);Et("string"==typeof ca,L,"internal-error"),Tt(vr,L.name),Tt(Sr,L.name),Et("boolean"==typeof Hs,L,"internal-error"),Et("boolean"==typeof gs,L,"internal-error"),Tt(Mr,L.name),Tt(Hr,L.name),Tt(Za,L.name),Tt(As,L.name),Tt(ts,L.name),Tt(Js,L.name);const za=new Jt({uid:ca,auth:L,email:Sr,emailVerified:Hs,displayName:vr,isAnonymous:gs,photoURL:Hr,phoneNumber:Mr,tenantId:Za,stsTokenManager:ua,createdAt:ts,lastLoginAt:Js});return Ca&&Array.isArray(Ca)&&(za.providerData=Ca.map(qi=>Object.assign({},qi))),As&&(za._redirectEventId=As),za}static _fromIdTokenResponse(L,j,oe=!1){return(0,V.A)(function*(){const Ve=new Ye;Ve.updateFromServerResponse(j);const lt=new Jt({uid:j.localId,auth:L,stsTokenManager:Ve,isAnonymous:oe});return yield jr(lt),lt})()}static _fromGetAccountInfoResponse(L,j,oe){return(0,V.A)(function*(){const Ve=j.users[0];Et(void 0!==Ve.localId,"internal-error");const lt=void 0!==Ve.providerUserInfo?ni(Ve.providerUserInfo):[],cn=!(Ve.email&&Ve.passwordHash||null!=lt&&lt.length),hn=new Ye;hn.updateFromIdToken(oe);const Qn=new Jt({uid:Ve.localId,auth:L,stsTokenManager:hn,isAnonymous:cn}),Wn={uid:Ve.localId,displayName:Ve.displayName||null,photoURL:Ve.photoUrl||null,email:Ve.email||null,emailVerified:Ve.emailVerified||!1,phoneNumber:Ve.phoneNumber||null,tenantId:Ve.tenantId||null,providerData:lt,metadata:new hs(Ve.createdAt,Ve.lastLoginAt),isAnonymous:!(Ve.email&&Ve.passwordHash||null!=lt&&lt.length)};return Object.assign(Qn,Wn),Qn})()}}const Ln=new Map;function Lt(ie){Te(ie instanceof Function,"Expected a class definition");let L=Ln.get(ie);return L?(Te(L instanceof ie,"Instance stored in cache mismatched with class"),L):(L=new ie,Ln.set(ie,L),L)}const ue=(()=>{class ie{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,V.A)(function*(){return!0})()}_set(j,oe){var Ve=this;return(0,V.A)(function*(){Ve.storage[j]=oe})()}_get(j){var oe=this;return(0,V.A)(function*(){const Ve=oe.storage[j];return void 0===Ve?null:Ve})()}_remove(j){var oe=this;return(0,V.A)(function*(){delete oe.storage[j]})()}_addListener(j,oe){}_removeListener(j,oe){}}return ie.type="NONE",ie})();function ae(ie,L,j){return`firebase:${ie}:${L}:${j}`}class we{constructor(L,j,oe){this.persistence=L,this.auth=j,this.userKey=oe;const{config:Ve,name:lt}=this.auth;this.fullUserKey=ae(this.userKey,Ve.apiKey,lt),this.fullPersistenceKey=ae("persistence",Ve.apiKey,lt),this.boundEventHandler=j._onStorageEvent.bind(j),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(L){return this.persistence._set(this.fullUserKey,L.toJSON())}getCurrentUser(){var L=this;return(0,V.A)(function*(){const j=yield L.persistence._get(L.fullUserKey);return j?Jt._fromJSON(L.auth,j):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(L){var j=this;return(0,V.A)(function*(){if(j.persistence===L)return;const oe=yield j.getCurrentUser();return yield j.removeCurrentUser(),j.persistence=L,oe?j.setCurrentUser(oe):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(L,j,oe="authUser"){return(0,V.A)(function*(){if(!j.length)return new we(Lt(ue),L,oe);const Ve=(yield Promise.all(j.map(function(){var Wn=(0,V.A)(function*(Wi){if(yield Wi._isAvailable())return Wi});return function(Wi){return Wn.apply(this,arguments)}}()))).filter(Wn=>Wn);let lt=Ve[0]||Lt(ue);const cn=ae(oe,L.config.apiKey,L.name);let hn=null;for(const Wn of j)try{const Wi=yield Wn._get(cn);if(Wi){const vr=Jt._fromJSON(L,Wi);Wn!==lt&&(hn=vr),lt=Wn;break}}catch{}const Qn=Ve.filter(Wn=>Wn._shouldAllowMigration);return lt._shouldAllowMigration&&Qn.length?(lt=Qn[0],hn&&(yield lt._set(cn,hn.toJSON())),yield Promise.all(j.map(function(){var Wn=(0,V.A)(function*(Wi){if(Wi!==lt)try{yield Wi._remove(cn)}catch{}});return function(Wi){return Wn.apply(this,arguments)}}())),new we(lt,L,oe)):new we(lt,L,oe)})()}}function Ue(ie){const L=ie.toLowerCase();if(L.includes("opera/")||L.includes("opr/")||L.includes("opios/"))return"Opera";if(dn(L))return"IEMobile";if(L.includes("msie")||L.includes("trident/"))return"IE";if(L.includes("edge/"))return"Edge";if(it(L))return"Firefox";if(L.includes("silk/"))return"Silk";if(Hi(L))return"Blackberry";if(Oi(L))return"Webos";if(Xt(L))return"Safari";if((L.includes("chrome/")||Cn(L))&&!L.includes("edge/"))return"Chrome";if(Nn(L))return"Android";{const oe=ie.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==oe?void 0:oe.length))return oe[1]}return"Other"}function it(ie=(0,ne.ZQ)()){return/firefox\//i.test(ie)}function Xt(ie=(0,ne.ZQ)()){const L=ie.toLowerCase();return L.includes("safari/")&&!L.includes("chrome/")&&!L.includes("crios/")&&!L.includes("android")}function Cn(ie=(0,ne.ZQ)()){return/crios\//i.test(ie)}function dn(ie=(0,ne.ZQ)()){return/iemobile/i.test(ie)}function Nn(ie=(0,ne.ZQ)()){return/android/i.test(ie)}function Hi(ie=(0,ne.ZQ)()){return/blackberry/i.test(ie)}function Oi(ie=(0,ne.ZQ)()){return/webos/i.test(ie)}function Fo(ie=(0,ne.ZQ)()){return/iphone|ipad|ipod/i.test(ie)||/macintosh/i.test(ie)&&/mobile/i.test(ie)}function di(ie=(0,ne.ZQ)()){return Fo(ie)||Nn(ie)||Oi(ie)||Hi(ie)||/windows phone/i.test(ie)||dn(ie)}function Ki(ie,L=[]){let j;switch(ie){case"Browser":j=Ue((0,ne.ZQ)());break;case"Worker":j=`${Ue((0,ne.ZQ)())}-${ie}`;break;default:j=ie}const oe=L.length?L.join(","):"FirebaseCore-web";return`${j}/JsCore/${re.MF}/${oe}`}class Kt{constructor(L){this.auth=L,this.queue=[]}pushCallback(L,j){const oe=lt=>new Promise((cn,hn)=>{try{cn(L(lt))}catch(Qn){hn(Qn)}});oe.onAbort=j,this.queue.push(oe);const Ve=this.queue.length-1;return()=>{this.queue[Ve]=()=>Promise.resolve()}}runMiddleware(L){var j=this;return(0,V.A)(function*(){if(j.auth.currentUser===L)return;const oe=[];try{for(const Ve of j.queue)yield Ve(L),Ve.onAbort&&oe.push(Ve.onAbort)}catch(Ve){oe.reverse();for(const lt of oe)try{lt()}catch{}throw j.auth._errorFactory.create("login-blocked",{originalMessage:null==Ve?void 0:Ve.message})}})()}}function Pi(){return(Pi=(0,V.A)(function*(ie,L={}){return un(ie,"GET","/v2/passwordPolicy",qn(ie,L))})).apply(this,arguments)}class pr{constructor(L){var j,oe,Ve,lt;const cn=L.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(j=cn.minPasswordLength)&&void 0!==j?j:6,cn.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=cn.maxPasswordLength),void 0!==cn.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=cn.containsLowercaseCharacter),void 0!==cn.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=cn.containsUppercaseCharacter),void 0!==cn.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=cn.containsNumericCharacter),void 0!==cn.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=cn.containsNonAlphanumericCharacter),this.enforcementState=L.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(Ve=null===(oe=L.allowedNonAlphanumericCharacters)||void 0===oe?void 0:oe.join(""))&&void 0!==Ve?Ve:"",this.forceUpgradeOnSignin=null!==(lt=L.forceUpgradeOnSignin)&&void 0!==lt&&lt,this.schemaVersion=L.schemaVersion}validatePassword(L){var j,oe,Ve,lt,cn,hn;const Qn={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(L,Qn),this.validatePasswordCharacterOptions(L,Qn),Qn.isValid&&(Qn.isValid=null===(j=Qn.meetsMinPasswordLength)||void 0===j||j),Qn.isValid&&(Qn.isValid=null===(oe=Qn.meetsMaxPasswordLength)||void 0===oe||oe),Qn.isValid&&(Qn.isValid=null===(Ve=Qn.containsLowercaseLetter)||void 0===Ve||Ve),Qn.isValid&&(Qn.isValid=null===(lt=Qn.containsUppercaseLetter)||void 0===lt||lt),Qn.isValid&&(Qn.isValid=null===(cn=Qn.containsNumericCharacter)||void 0===cn||cn),Qn.isValid&&(Qn.isValid=null===(hn=Qn.containsNonAlphanumericCharacter)||void 0===hn||hn),Qn}validatePasswordLengthOptions(L,j){const oe=this.customStrengthOptions.minPasswordLength,Ve=this.customStrengthOptions.maxPasswordLength;oe&&(j.meetsMinPasswordLength=L.length>=oe),Ve&&(j.meetsMaxPasswordLength=L.length<=Ve)}validatePasswordCharacterOptions(L,j){let oe;this.updatePasswordCharacterOptionsStatuses(j,!1,!1,!1,!1);for(let Ve=0;Ve<L.length;Ve++)oe=L.charAt(Ve),this.updatePasswordCharacterOptionsStatuses(j,oe>="a"&&oe<="z",oe>="A"&&oe<="Z",oe>="0"&&oe<="9",this.allowedNonAlphanumericCharacters.includes(oe))}updatePasswordCharacterOptionsStatuses(L,j,oe,Ve,lt){this.customStrengthOptions.containsLowercaseLetter&&(L.containsLowercaseLetter||(L.containsLowercaseLetter=j)),this.customStrengthOptions.containsUppercaseLetter&&(L.containsUppercaseLetter||(L.containsUppercaseLetter=oe)),this.customStrengthOptions.containsNumericCharacter&&(L.containsNumericCharacter||(L.containsNumericCharacter=Ve)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(L.containsNonAlphanumericCharacter||(L.containsNonAlphanumericCharacter=lt))}}class es{constructor(L,j,oe,Ve){this.app=L,this.heartbeatServiceProvider=j,this.appCheckServiceProvider=oe,this.config=Ve,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pa(this),this.idTokenSubscription=new Pa(this),this.beforeStateQueue=new Kt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=L.name,this.clientVersion=Ve.sdkClientVersion}_initializeWithPersistence(L,j){var oe=this;return j&&(this._popupRedirectResolver=Lt(j)),this._initializationPromise=this.queue((0,V.A)(function*(){var Ve,lt;if(!oe._deleted&&(oe.persistenceManager=yield we.create(oe,L),!oe._deleted)){if(null!==(Ve=oe._popupRedirectResolver)&&void 0!==Ve&&Ve._shouldInitProactively)try{yield oe._popupRedirectResolver._initialize(oe)}catch{}yield oe.initializeCurrentUser(j),oe.lastNotifiedUid=(null===(lt=oe.currentUser)||void 0===lt?void 0:lt.uid)||null,!oe._deleted&&(oe._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var L=this;return(0,V.A)(function*(){if(L._deleted)return;const j=yield L.assertedPersistence.getCurrentUser();if(L.currentUser||j){if(L.currentUser&&j&&L.currentUser.uid===j.uid)return L._currentUser._assign(j),void(yield L.currentUser.getIdToken());yield L._updateCurrentUser(j,!0)}})()}initializeCurrentUserFromIdToken(L){var j=this;return(0,V.A)(function*(){try{const oe=yield ro(j,{idToken:L}),Ve=yield Jt._fromGetAccountInfoResponse(j,oe,L);yield j.directlySetCurrentUser(Ve)}catch(oe){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",oe),yield j.directlySetCurrentUser(null)}})()}initializeCurrentUser(L){var j=this;return(0,V.A)(function*(){var oe;if((0,re.xZ)(j.app)){const hn=j.app.settings.authIdToken;return hn?new Promise(Qn=>{setTimeout(()=>j.initializeCurrentUserFromIdToken(hn).then(Qn,Qn))}):j.directlySetCurrentUser(null)}const Ve=yield j.assertedPersistence.getCurrentUser();let lt=Ve,cn=!1;if(L&&j.config.authDomain){yield j.getOrInitRedirectPersistenceManager();const hn=null===(oe=j.redirectUser)||void 0===oe?void 0:oe._redirectEventId,Qn=null==lt?void 0:lt._redirectEventId,Wn=yield j.tryRedirectSignIn(L);(!hn||hn===Qn)&&null!=Wn&&Wn.user&&(lt=Wn.user,cn=!0)}if(!lt)return j.directlySetCurrentUser(null);if(!lt._redirectEventId){if(cn)try{yield j.beforeStateQueue.runMiddleware(lt)}catch(hn){lt=Ve,j._popupRedirectResolver._overrideRedirectResult(j,()=>Promise.reject(hn))}return lt?j.reloadAndSetCurrentUserOrClear(lt):j.directlySetCurrentUser(null)}return Et(j._popupRedirectResolver,j,"argument-error"),yield j.getOrInitRedirectPersistenceManager(),j.redirectUser&&j.redirectUser._redirectEventId===lt._redirectEventId?j.directlySetCurrentUser(lt):j.reloadAndSetCurrentUserOrClear(lt)})()}tryRedirectSignIn(L){var j=this;return(0,V.A)(function*(){let oe=null;try{oe=yield j._popupRedirectResolver._completeRedirectFn(j,L,!0)}catch{yield j._setRedirectUser(null)}return oe})()}reloadAndSetCurrentUserOrClear(L){var j=this;return(0,V.A)(function*(){try{yield jr(L)}catch(oe){if("auth/network-request-failed"!==(null==oe?void 0:oe.code))return j.directlySetCurrentUser(null)}return j.directlySetCurrentUser(L)})()}useDeviceLanguage(){this.languageCode=function Vn(){if(typeof navigator>"u")return null;const ie=navigator;return ie.languages&&ie.languages[0]||ie.language||null}()}_delete(){var L=this;return(0,V.A)(function*(){L._deleted=!0})()}updateCurrentUser(L){var j=this;return(0,V.A)(function*(){if((0,re.xZ)(j.app))return Promise.reject(wn(j));const oe=L?(0,ne.Ku)(L):null;return oe&&Et(oe.auth.config.apiKey===j.config.apiKey,j,"invalid-user-token"),j._updateCurrentUser(oe&&oe._clone(j))})()}_updateCurrentUser(L,j=!1){var oe=this;return(0,V.A)(function*(){if(!oe._deleted)return L&&Et(oe.tenantId===L.tenantId,oe,"tenant-id-mismatch"),j||(yield oe.beforeStateQueue.runMiddleware(L)),oe.queue((0,V.A)(function*(){yield oe.directlySetCurrentUser(L),oe.notifyAuthListeners()}))})()}signOut(){var L=this;return(0,V.A)(function*(){return(0,re.xZ)(L.app)?Promise.reject(wn(L)):(yield L.beforeStateQueue.runMiddleware(null),(L.redirectPersistenceManager||L._popupRedirectResolver)&&(yield L._setRedirectUser(null)),L._updateCurrentUser(null,!0))})()}setPersistence(L){var j=this;return(0,re.xZ)(this.app)?Promise.reject(wn(this)):this.queue((0,V.A)(function*(){yield j.assertedPersistence.setPersistence(Lt(L))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(L){var j=this;return(0,V.A)(function*(){j._getPasswordPolicyInternal()||(yield j._updatePasswordPolicy());const oe=j._getPasswordPolicyInternal();return oe.schemaVersion!==j.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(j._errorFactory.create("unsupported-password-policy-schema-version",{})):oe.validatePassword(L)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var L=this;return(0,V.A)(function*(){const j=yield function oi(ie){return Pi.apply(this,arguments)}(L),oe=new pr(j);null===L.tenantId?L._projectPasswordPolicy=oe:L._tenantPasswordPolicies[L.tenantId]=oe})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(L){this._errorFactory=new ne.FA("auth","Firebase",L())}onAuthStateChanged(L,j,oe){return this.registerStateListener(this.authStateSubscription,L,j,oe)}beforeAuthStateChanged(L,j){return this.beforeStateQueue.pushCallback(L,j)}onIdTokenChanged(L,j,oe){return this.registerStateListener(this.idTokenSubscription,L,j,oe)}authStateReady(){return new Promise((L,j)=>{if(this.currentUser)L();else{const oe=this.onAuthStateChanged(()=>{oe(),L()},j)}})}revokeAccessToken(L){var j=this;return(0,V.A)(function*(){if(j.currentUser){const oe=yield j.currentUser.getIdToken(),Ve={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:L,idToken:oe};null!=j.tenantId&&(Ve.tenantId=j.tenantId),yield function kt(ie,L){return mt.apply(this,arguments)}(j,Ve)}})()}toJSON(){var L;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(L=this._currentUser)||void 0===L?void 0:L.toJSON()}}_setRedirectUser(L,j){var oe=this;return(0,V.A)(function*(){const Ve=yield oe.getOrInitRedirectPersistenceManager(j);return null===L?Ve.removeCurrentUser():Ve.setCurrentUser(L)})()}getOrInitRedirectPersistenceManager(L){var j=this;return(0,V.A)(function*(){if(!j.redirectPersistenceManager){const oe=L&&Lt(L)||j._popupRedirectResolver;Et(oe,j,"argument-error"),j.redirectPersistenceManager=yield we.create(j,[Lt(oe._redirectPersistence)],"redirectUser"),j.redirectUser=yield j.redirectPersistenceManager.getCurrentUser()}return j.redirectPersistenceManager})()}_redirectUserForId(L){var j=this;return(0,V.A)(function*(){var oe,Ve;return j._isInitialized&&(yield j.queue((0,V.A)(function*(){}))),(null===(oe=j._currentUser)||void 0===oe?void 0:oe._redirectEventId)===L?j._currentUser:(null===(Ve=j.redirectUser)||void 0===Ve?void 0:Ve._redirectEventId)===L?j.redirectUser:null})()}_persistUserIfCurrent(L){var j=this;return(0,V.A)(function*(){if(L===j.currentUser)return j.queue((0,V.A)(function*(){return j.directlySetCurrentUser(L)}))})()}_notifyListenersIfCurrent(L){L===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var L,j;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const oe=null!==(j=null===(L=this.currentUser)||void 0===L?void 0:L.uid)&&void 0!==j?j:null;this.lastNotifiedUid!==oe&&(this.lastNotifiedUid=oe,this.authStateSubscription.next(this.currentUser))}registerStateListener(L,j,oe,Ve){if(this._deleted)return()=>{};const lt="function"==typeof j?j:j.next.bind(j);let cn=!1;const hn=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(hn,this,"internal-error"),hn.then(()=>{cn||lt(this.currentUser)}),"function"==typeof j){const Qn=L.addObserver(j,oe,Ve);return()=>{cn=!0,Qn()}}{const Qn=L.addObserver(j);return()=>{cn=!0,Qn()}}}directlySetCurrentUser(L){var j=this;return(0,V.A)(function*(){j.currentUser&&j.currentUser!==L&&j._currentUser._stopProactiveRefresh(),L&&j.isProactiveRefreshEnabled&&L._startProactiveRefresh(),j.currentUser=L,L?yield j.assertedPersistence.setCurrentUser(L):yield j.assertedPersistence.removeCurrentUser()})()}queue(L){return this.operations=this.operations.then(L,L),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(L){!L||this.frameworks.includes(L)||(this.frameworks.push(L),this.frameworks.sort(),this.clientVersion=Ki(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var L=this;return(0,V.A)(function*(){var j;const oe={"X-Client-Version":L.clientVersion};L.app.options.appId&&(oe["X-Firebase-gmpid"]=L.app.options.appId);const Ve=yield null===(j=L.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===j?void 0:j.getHeartbeatsHeader();Ve&&(oe["X-Firebase-Client"]=Ve);const lt=yield L._getAppCheckToken();return lt&&(oe["X-Firebase-AppCheck"]=lt),oe})()}_getAppCheckToken(){var L=this;return(0,V.A)(function*(){var j;const oe=yield null===(j=L.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===j?void 0:j.getToken();return null!=oe&&oe.error&&function ei(ie,...L){ht.logLevel<=l.$b.WARN&&ht.warn(`Auth (${re.MF}): ${ie}`,...L)}(`Error while retrieving App Check token: ${oe.error}`),null==oe?void 0:oe.token})()}}function qr(ie){return(0,ne.Ku)(ie)}class Pa{constructor(L){this.auth=L,this.observer=null,this.addObserver=(0,ne.tD)(j=>this.observer=j)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jl={loadJS:()=>(0,V.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Oa(ie){return Jl.loadJS(ie)}function Vr(ie){return`__${ie}${Math.floor(1e6*Math.random())}`}class wa{constructor(L){this.type="recaptcha-enterprise",this.auth=qr(L)}verify(L="verify",j=!1){var oe=this;return(0,V.A)(function*(){function lt(){return lt=(0,V.A)(function*(hn){if(!j){if(null==hn.tenantId&&null!=hn._agentRecaptchaConfig)return hn._agentRecaptchaConfig.siteKey;if(null!=hn.tenantId&&void 0!==hn._tenantRecaptchaConfigs[hn.tenantId])return hn._tenantRecaptchaConfigs[hn.tenantId].siteKey}return new Promise(function(){var Qn=(0,V.A)(function*(Wn,Wi){Ni(hn,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(vr=>{if(void 0!==vr.recaptchaKey){const Sr=new vi(vr);return null==hn.tenantId?hn._agentRecaptchaConfig=Sr:hn._tenantRecaptchaConfigs[hn.tenantId]=Sr,Wn(Sr.siteKey)}Wi(new Error("recaptcha Enterprise site key undefined"))}).catch(vr=>{Wi(vr)})});return function(Wn,Wi){return Qn.apply(this,arguments)}}())}),lt.apply(this,arguments)}function cn(hn,Qn,Wn){const Wi=window.grecaptcha;ji(Wi)?Wi.enterprise.ready(()=>{Wi.enterprise.execute(hn,{action:L}).then(vr=>{Qn(vr)}).catch(()=>{Qn("NO_RECAPTCHA")})}):Wn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((hn,Qn)=>{(function Ve(hn){return lt.apply(this,arguments)})(oe.auth).then(Wn=>{if(!j&&ji(window.grecaptcha))cn(Wn,hn,Qn);else{if(typeof window>"u")return void Qn(new Error("RecaptchaVerifier is only supported in browser"));let Wi=function bi(){return Jl.recaptchaEnterpriseScript}();0!==Wi.length&&(Wi+=Wn),Oa(Wi).then(()=>{cn(Wn,hn,Qn)}).catch(vr=>{Qn(vr)})}}).catch(Wn=>{Qn(Wn)})})})()}}function Gs(ie,L,j){return xa.apply(this,arguments)}function xa(){return(xa=(0,V.A)(function*(ie,L,j,oe=!1){const Ve=new wa(ie);let lt;try{lt=yield Ve.verify(j)}catch{lt=yield Ve.verify(j,!0)}const cn=Object.assign({},L);return Object.assign(cn,oe?{captchaResp:lt}:{captchaResponse:lt}),Object.assign(cn,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(cn,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),cn})).apply(this,arguments)}function gl(ie,L,j,oe){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,V.A)(function*(ie,L,j,oe){var Ve;if(null!==(Ve=ie._getRecaptchaConfig())&&void 0!==Ve&&Ve.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const lt=yield Gs(ie,L,j,"getOobCode"===j);return oe(ie,lt)}return oe(ie,L).catch(function(){var lt=(0,V.A)(function*(cn){if("auth/missing-recaptcha-token"===cn.code){console.log(`${j} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const hn=yield Gs(ie,L,j,"getOobCode"===j);return oe(ie,hn)}return Promise.reject(cn)});return function(cn){return lt.apply(this,arguments)}}())}),Ha.apply(this,arguments)}function Ra(ie){const L=ie.indexOf(":");return L<0?"":ie.substr(0,L+1)}function $u(ie){if(!ie)return null;const L=Number(ie);return isNaN(L)?null:L}class Ol{constructor(L,j){this.providerId=L,this.signInMethod=j}toJSON(){return kn("not implemented")}_getIdTokenResponse(L){return kn("not implemented")}_linkToIdToken(L,j){return kn("not implemented")}_getReauthenticationResolver(L){return kn("not implemented")}}function lc(ie,L){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,V.A)(function*(ie,L){return un(ie,"POST","/v1/accounts:signUp",L)})).apply(this,arguments)}function uu(ie,L){return vc.apply(this,arguments)}function vc(){return(vc=(0,V.A)(function*(ie,L){return Go(ie,"POST","/v1/accounts:signInWithPassword",qn(ie,L))})).apply(this,arguments)}function Io(){return(Io=(0,V.A)(function*(ie,L){return un(ie,"POST","/v1/accounts:sendOobCode",qn(ie,L))})).apply(this,arguments)}function rs(ie,L){return Na.apply(this,arguments)}function Na(){return(Na=(0,V.A)(function*(ie,L){return function du(ie,L){return Io.apply(this,arguments)}(ie,L)})).apply(this,arguments)}function li(){return(li=(0,V.A)(function*(ie,L){return Go(ie,"POST","/v1/accounts:signInWithEmailLink",qn(ie,L))})).apply(this,arguments)}function Eo(){return(Eo=(0,V.A)(function*(ie,L){return Go(ie,"POST","/v1/accounts:signInWithEmailLink",qn(ie,L))})).apply(this,arguments)}class so extends Ol{constructor(L,j,oe,Ve=null){super("password",oe),this._email=L,this._password=j,this._tenantId=Ve}static _fromEmailAndPassword(L,j){return new so(L,j,"password")}static _fromEmailAndCode(L,j,oe=null){return new so(L,j,"emailLink",oe)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(L){const j="string"==typeof L?JSON.parse(L):L;if(null!=j&&j.email&&null!=j&&j.password){if("password"===j.signInMethod)return this._fromEmailAndPassword(j.email,j.password);if("emailLink"===j.signInMethod)return this._fromEmailAndCode(j.email,j.password,j.tenantId)}return null}_getIdTokenResponse(L){var j=this;return(0,V.A)(function*(){switch(j.signInMethod){case"password":return gl(L,{returnSecureToken:!0,email:j._email,password:j._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",uu);case"emailLink":return function On(ie,L){return li.apply(this,arguments)}(L,{email:j._email,oobCode:j._password});default:Zn(L,"internal-error")}})()}_linkToIdToken(L,j){var oe=this;return(0,V.A)(function*(){switch(oe.signInMethod){case"password":return gl(L,{idToken:j,returnSecureToken:!0,email:oe._email,password:oe._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lc);case"emailLink":return function bo(ie,L){return Eo.apply(this,arguments)}(L,{idToken:j,email:oe._email,oobCode:oe._password});default:Zn(L,"internal-error")}})()}_getReauthenticationResolver(L){return this._getIdTokenResponse(L)}}function mi(ie,L){return qo.apply(this,arguments)}function qo(){return(qo=(0,V.A)(function*(ie,L){return Go(ie,"POST","/v1/accounts:signInWithIdp",qn(ie,L))})).apply(this,arguments)}class hu{constructor(L){var j,oe,Ve,lt,cn,hn;const Qn=(0,ne.I9)((0,ne.hp)(L)),Wn=null!==(j=Qn.apiKey)&&void 0!==j?j:null,Wi=null!==(oe=Qn.oobCode)&&void 0!==oe?oe:null,vr=function Yc(ie){switch(ie){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Ve=Qn.mode)&&void 0!==Ve?Ve:null);Et(Wn&&Wi&&vr,"argument-error"),this.apiKey=Wn,this.operation=vr,this.code=Wi,this.continueUrl=null!==(lt=Qn.continueUrl)&&void 0!==lt?lt:null,this.languageCode=null!==(cn=Qn.languageCode)&&void 0!==cn?cn:null,this.tenantId=null!==(hn=Qn.tenantId)&&void 0!==hn?hn:null}static parseLink(L){const j=function Zs(ie){const L=(0,ne.I9)((0,ne.hp)(ie)).link,j=L?(0,ne.I9)((0,ne.hp)(L)).deep_link_id:null,oe=(0,ne.I9)((0,ne.hp)(ie)).deep_link_id;return(oe?(0,ne.I9)((0,ne.hp)(oe)).link:null)||oe||j||L||ie}(L);try{return new hu(j)}catch{return null}}}let Ea=(()=>{class ie{constructor(){this.providerId=ie.PROVIDER_ID}static credential(j,oe){return so._fromEmailAndPassword(j,oe)}static credentialWithLink(j,oe){const Ve=hu.parseLink(oe);return Et(Ve,"argument-error"),so._fromEmailAndCode(j,Ve.code,Ve.tenantId)}}return ie.PROVIDER_ID="password",ie.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ie.EMAIL_LINK_SIGN_IN_METHOD="emailLink",ie})();class Ga{constructor(L){this.providerId=L,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(L){this.defaultLanguageCode=L}setCustomParameters(L){return this.customParameters=L,this}getCustomParameters(){return this.customParameters}}class nl extends Ga{constructor(){super(...arguments),this.scopes=[]}addScope(L){return this.scopes.includes(L)||this.scopes.push(L),this}getScopes(){return[...this.scopes]}}function Mi(ie,L){return Li.apply(this,arguments)}function Li(){return(Li=(0,V.A)(function*(ie,L){return Go(ie,"POST","/v1/accounts:signUp",qn(ie,L))})).apply(this,arguments)}class ki{constructor(L){this.user=L.user,this.providerId=L.providerId,this._tokenResponse=L._tokenResponse,this.operationType=L.operationType}static _fromIdTokenResponse(L,j,oe,Ve=!1){return(0,V.A)(function*(){const lt=yield Jt._fromIdTokenResponse(L,oe,Ve),cn=ao(oe);return new ki({user:lt,providerId:cn,_tokenResponse:oe,operationType:j})})()}static _forOperation(L,j,oe){return(0,V.A)(function*(){yield L._updateTokensIfNecessary(oe,!0);const Ve=ao(oe);return new ki({user:L,providerId:Ve,_tokenResponse:oe,operationType:j})})()}}function ao(ie){return ie.providerId?ie.providerId:"phoneNumber"in ie?"phone":null}function Ko(ie){return sr.apply(this,arguments)}function sr(){return(sr=(0,V.A)(function*(ie){var L;if((0,re.xZ)(ie.app))return Promise.reject(wn(ie));const j=qr(ie);if(yield j._initializationPromise,null!==(L=j.currentUser)&&void 0!==L&&L.isAnonymous)return new ki({user:j.currentUser,providerId:null,operationType:"signIn"});const oe=yield Mi(j,{returnSecureToken:!0}),Ve=yield ki._fromIdTokenResponse(j,"signIn",oe,!0);return yield j._updateCurrentUser(Ve.user),Ve})).apply(this,arguments)}class gr extends ne.g{constructor(L,j,oe,Ve){var lt;super(j.code,j.message),this.operationType=oe,this.user=Ve,Object.setPrototypeOf(this,gr.prototype),this.customData={appName:L.name,tenantId:null!==(lt=L.tenantId)&&void 0!==lt?lt:void 0,_serverResponse:j.customData._serverResponse,operationType:oe}}static _fromErrorAndOperation(L,j,oe,Ve){return new gr(L,j,oe,Ve)}}function Xr(ie,L,j,oe){return("reauthenticate"===L?j._getReauthenticationResolver(ie):j._getIdTokenResponse(ie)).catch(lt=>{throw"auth/multi-factor-auth-required"===lt.code?gr._fromErrorAndOperation(ie,lt,L,oe):lt})}function js(){return(js=(0,V.A)(function*(ie,L,j=!1){const oe=yield xr(ie,L._linkToIdToken(ie.auth,yield ie.getIdToken()),j);return ki._forOperation(ie,"link",oe)})).apply(this,arguments)}function Ll(){return(Ll=(0,V.A)(function*(ie,L,j=!1){const{auth:oe}=ie;if((0,re.xZ)(oe.app))return Promise.reject(wn(oe));const Ve="reauthenticate";try{const lt=yield xr(ie,Xr(oe,Ve,L,ie),j);Et(lt.idToken,oe,"internal-error");const cn=lr(lt.idToken);Et(cn,oe,"internal-error");const{sub:hn}=cn;return Et(ie.uid===hn,oe,"user-mismatch"),ki._forOperation(ie,Ve,lt)}catch(lt){throw"auth/user-not-found"===(null==lt?void 0:lt.code)&&Zn(oe,"user-mismatch"),lt}})).apply(this,arguments)}function ya(ie,L){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,V.A)(function*(ie,L,j=!1){if((0,re.xZ)(ie.app))return Promise.reject(wn(ie));const Ve=yield Xr(ie,"signIn",L),lt=yield ki._fromIdTokenResponse(ie,"signIn",Ve);return j||(yield ie._updateCurrentUser(lt.user)),lt})).apply(this,arguments)}function vt(){return(vt=(0,V.A)(function*(ie,L){return ya(qr(ie),L)})).apply(this,arguments)}function us(ie){return ec.apply(this,arguments)}function ec(){return(ec=(0,V.A)(function*(ie){const L=qr(ie);L._getPasswordPolicyInternal()&&(yield L._updatePasswordPolicy())})).apply(this,arguments)}function vd(ie,L,j){return b0.apply(this,arguments)}function b0(){return(b0=(0,V.A)(function*(ie,L,j){const oe=qr(ie),Ve={requestType:"PASSWORD_RESET",email:L,clientType:"CLIENT_TYPE_WEB"};j&&function Dd(ie,L,j){var oe;Et((null===(oe=j.url)||void 0===oe?void 0:oe.length)>0,ie,"invalid-continue-uri"),Et(typeof j.dynamicLinkDomain>"u"||j.dynamicLinkDomain.length>0,ie,"invalid-dynamic-link-domain"),L.continueUrl=j.url,L.dynamicLinkDomain=j.dynamicLinkDomain,L.canHandleCodeInApp=j.handleCodeInApp,j.iOS&&(Et(j.iOS.bundleId.length>0,ie,"missing-ios-bundle-id"),L.iOSBundleId=j.iOS.bundleId),j.android&&(Et(j.android.packageName.length>0,ie,"missing-android-pkg-name"),L.androidInstallApp=j.android.installApp,L.androidMinimumVersionCode=j.android.minimumVersion,L.androidPackageName=j.android.packageName)}(oe,Ve,j),yield gl(oe,Ve,"getOobCode",rs)})).apply(this,arguments)}function dc(ie,L,j){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,V.A)(function*(ie,L,j){if((0,re.xZ)(ie.app))return Promise.reject(wn(ie));const oe=qr(ie),cn=yield gl(oe,{returnSecureToken:!0,email:L,password:j,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Mi).catch(Qn=>{throw"auth/password-does-not-meet-requirements"===Qn.code&&us(ie),Qn}),hn=yield ki._fromIdTokenResponse(oe,"signIn",cn);return yield oe._updateCurrentUser(hn.user),hn})).apply(this,arguments)}function Wd(ie,L,j){return(0,re.xZ)(ie.app)?Promise.reject(wn(ie)):function Se(ie,L){return vt.apply(this,arguments)}((0,ne.Ku)(ie),Ea.credential(L,j)).catch(function(){var oe=(0,V.A)(function*(Ve){throw"auth/password-does-not-meet-requirements"===Ve.code&&us(ie),Ve});return function(Ve){return oe.apply(this,arguments)}}())}function ll(){return(ll=(0,V.A)(function*(ie,L){return un(ie,"POST","/v1/accounts:createAuthUri",qn(ie,L))})).apply(this,arguments)}function yc(ie,L){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,V.A)(function*(ie,L){const oe={identifier:L,continueUri:Qt()?on():"http://localhost"},{signinMethods:Ve}=yield function $0(ie,L){return ll.apply(this,arguments)}((0,ne.Ku)(ie),oe);return Ve||[]}),Ls.apply(this,arguments)}function la(ie){return(0,ne.Ku)(ie).signOut()}const bd="__sak";class Fl{constructor(L,j){this.storageRetriever=L,this.type=j}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(L,j){return this.storage.setItem(L,JSON.stringify(j)),Promise.resolve()}_get(L){const j=this.storage.getItem(L);return Promise.resolve(j?JSON.parse(j):null)}_remove(L){return this.storage.removeItem(L),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vl=(()=>{class ie extends Fl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(j,oe)=>this.onStorageEvent(j,oe),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cd(){const ie=(0,ne.ZQ)();return Xt(ie)||Fo(ie)}()&&function co(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=di(),this._shouldAllowMigration=!0}forAllChangedKeys(j){for(const oe of Object.keys(this.listeners)){const Ve=this.storage.getItem(oe),lt=this.localCache[oe];Ve!==lt&&j(oe,lt,Ve)}}onStorageEvent(j,oe=!1){if(!j.key)return void this.forAllChangedKeys((hn,Qn,Wn)=>{this.notifyListeners(hn,Wn)});const Ve=j.key;if(oe?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const hn=this.storage.getItem(Ve);if(j.newValue!==hn)null!==j.newValue?this.storage.setItem(Ve,j.newValue):this.storage.removeItem(Ve);else if(this.localCache[Ve]===j.newValue&&!oe)return}const lt=()=>{const hn=this.storage.getItem(Ve);!oe&&this.localCache[Ve]===hn||this.notifyListeners(Ve,hn)},cn=this.storage.getItem(Ve);!function jn(){return(0,ne.lT)()&&10===document.documentMode}()||cn===j.newValue||j.newValue===j.oldValue?lt():setTimeout(lt,10)}notifyListeners(j,oe){this.localCache[j]=oe;const Ve=this.listeners[j];if(Ve)for(const lt of Array.from(Ve))lt(oe&&JSON.parse(oe))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((j,oe,Ve)=>{this.onStorageEvent(new StorageEvent("storage",{key:j,oldValue:oe,newValue:Ve}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(j,oe){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[j]||(this.listeners[j]=new Set,this.localCache[j]=this.storage.getItem(j)),this.listeners[j].add(oe)}_removeListener(j,oe){this.listeners[j]&&(this.listeners[j].delete(oe),0===this.listeners[j].size&&delete this.listeners[j]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(j,oe){var Ve=()=>super._set,lt=this;return(0,V.A)(function*(){yield Ve().call(lt,j,oe),lt.localCache[j]=JSON.stringify(oe)})()}_get(j){var oe=()=>super._get,Ve=this;return(0,V.A)(function*(){const lt=yield oe().call(Ve,j);return Ve.localCache[j]=JSON.stringify(lt),lt})()}_remove(j){var oe=()=>super._remove,Ve=this;return(0,V.A)(function*(){yield oe().call(Ve,j),delete Ve.localCache[j]})()}}return ie.type="LOCAL",ie})(),Kd=(()=>{class ie extends Fl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(j,oe){}_removeListener(j,oe){}}return ie.type="SESSION",ie})();let Gh=(()=>{class ie{constructor(j){this.eventTarget=j,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(j){const oe=this.receivers.find(lt=>lt.isListeningto(j));if(oe)return oe;const Ve=new ie(j);return this.receivers.push(Ve),Ve}isListeningto(j){return this.eventTarget===j}handleEvent(j){var oe=this;return(0,V.A)(function*(){const Ve=j,{eventId:lt,eventType:cn,data:hn}=Ve.data,Qn=oe.handlersMap[cn];if(null==Qn||!Qn.size)return;Ve.ports[0].postMessage({status:"ack",eventId:lt,eventType:cn});const Wn=Array.from(Qn).map(function(){var vr=(0,V.A)(function*(Sr){return Sr(Ve.origin,hn)});return function(Sr){return vr.apply(this,arguments)}}()),Wi=yield function Ch(ie){return Promise.all(ie.map(function(){var L=(0,V.A)(function*(j){try{return{fulfilled:!0,value:yield j}}catch(oe){return{fulfilled:!1,reason:oe}}});return function(j){return L.apply(this,arguments)}}()))}(Wn);Ve.ports[0].postMessage({status:"done",eventId:lt,eventType:cn,response:Wi})})()}_subscribe(j,oe){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[j]||(this.handlersMap[j]=new Set),this.handlersMap[j].add(oe)}_unsubscribe(j,oe){this.handlersMap[j]&&oe&&this.handlersMap[j].delete(oe),(!oe||0===this.handlersMap[j].size)&&delete this.handlersMap[j],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return ie.receivers=[],ie})();function dl(ie="",L=10){let j="";for(let oe=0;oe<L;oe++)j+=Math.floor(10*Math.random());return ie+j}class l1{constructor(L){this.target=L,this.handlers=new Set}removeMessageHandler(L){L.messageChannel&&(L.messageChannel.port1.removeEventListener("message",L.onMessage),L.messageChannel.port1.close()),this.handlers.delete(L)}_send(L,j,oe=50){var Ve=this;return(0,V.A)(function*(){const lt=typeof MessageChannel<"u"?new MessageChannel:null;if(!lt)throw new Error("connection_unavailable");let cn,hn;return new Promise((Qn,Wn)=>{const Wi=dl("",20);lt.port1.start();const vr=setTimeout(()=>{Wn(new Error("unsupported_event"))},oe);hn={messageChannel:lt,onMessage(Sr){const Mr=Sr;if(Mr.data.eventId===Wi)switch(Mr.data.status){case"ack":clearTimeout(vr),cn=setTimeout(()=>{Wn(new Error("timeout"))},3e3);break;case"done":clearTimeout(cn),Qn(Mr.data.response);break;default:clearTimeout(vr),clearTimeout(cn),Wn(new Error("invalid_response"))}}},Ve.handlers.add(hn),lt.port1.addEventListener("message",hn.onMessage),Ve.target.postMessage({eventType:L,eventId:Wi,data:j},[lt.port2])}).finally(()=>{hn&&Ve.removeMessageHandler(hn)})})()}}function ql(){return window}function xd(){return typeof ql().WorkerGlobalScope<"u"&&"function"==typeof ql().importScripts}function $s(){return($s=(0,V.A)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zd="firebaseLocalStorageDb",Wh="firebaseLocalStorage",mu="fbase_key";class gu{constructor(L){this.request=L}toPromise(){return new Promise((L,j)=>{this.request.addEventListener("success",()=>{L(this.request.result)}),this.request.addEventListener("error",()=>{j(this.request.error)})})}}function U0(ie,L){return ie.transaction([Wh],L?"readwrite":"readonly").objectStore(Wh)}function nc(){const ie=indexedDB.open(zd,1);return new Promise((L,j)=>{ie.addEventListener("error",()=>{j(ie.error)}),ie.addEventListener("upgradeneeded",()=>{const oe=ie.result;try{oe.createObjectStore(Wh,{keyPath:mu})}catch(Ve){j(Ve)}}),ie.addEventListener("success",(0,V.A)(function*(){const oe=ie.result;oe.objectStoreNames.contains(Wh)?L(oe):(oe.close(),yield function k0(){const ie=indexedDB.deleteDatabase(zd);return new gu(ie).toPromise()}(),L(yield nc()))}))})}function qh(ie,L,j){return H0.apply(this,arguments)}function H0(){return(H0=(0,V.A)(function*(ie,L,j){const oe=U0(ie,!0).put({[mu]:L,value:j});return new gu(oe).toPromise()})).apply(this,arguments)}function ud(){return(ud=(0,V.A)(function*(ie,L){const j=U0(ie,!1).get(L),oe=yield new gu(j).toPromise();return void 0===oe?null:oe.value})).apply(this,arguments)}function Hu(ie,L){const j=U0(ie,!0).delete(L);return new gu(j).toPromise()}const Od=(()=>{class ie{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var j=this;return(0,V.A)(function*(){return j.db||(j.db=yield nc()),j.db})()}_withRetries(j){var oe=this;return(0,V.A)(function*(){let Ve=0;for(;;)try{const lt=yield oe._openDb();return yield j(lt)}catch(lt){if(Ve++>3)throw lt;oe.db&&(oe.db.close(),oe.db=void 0)}})()}initializeServiceWorkerMessaging(){var j=this;return(0,V.A)(function*(){return xd()?j.initializeReceiver():j.initializeSender()})()}initializeReceiver(){var j=this;return(0,V.A)(function*(){j.receiver=Gh._getInstance(function hh(){return xd()?self:null}()),j.receiver._subscribe("keyChanged",function(){var oe=(0,V.A)(function*(Ve,lt){return{keyProcessed:(yield j._poll()).includes(lt.key)}});return function(Ve,lt){return oe.apply(this,arguments)}}()),j.receiver._subscribe("ping",function(){var oe=(0,V.A)(function*(Ve,lt){return["keyChanged"]});return function(Ve,lt){return oe.apply(this,arguments)}}())})()}initializeSender(){var j=this;return(0,V.A)(function*(){var oe,Ve;if(j.activeServiceWorker=yield function C0(){return $s.apply(this,arguments)}(),!j.activeServiceWorker)return;j.sender=new l1(j.activeServiceWorker);const lt=yield j.sender._send("ping",{},800);lt&&null!==(oe=lt[0])&&void 0!==oe&&oe.fulfilled&&null!==(Ve=lt[0])&&void 0!==Ve&&Ve.value.includes("keyChanged")&&(j.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(j){var oe=this;return(0,V.A)(function*(){if(oe.sender&&oe.activeServiceWorker&&function Tu(){var ie;return(null===(ie=null==navigator?void 0:navigator.serviceWorker)||void 0===ie?void 0:ie.controller)||null}()===oe.activeServiceWorker)try{yield oe.sender._send("keyChanged",{key:j},oe.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,V.A)(function*(){try{if(!indexedDB)return!1;const j=yield nc();return yield qh(j,bd,"1"),yield Hu(j,bd),!0}catch{}return!1})()}_withPendingWrite(j){var oe=this;return(0,V.A)(function*(){oe.pendingWrites++;try{yield j()}finally{oe.pendingWrites--}})()}_set(j,oe){var Ve=this;return(0,V.A)(function*(){return Ve._withPendingWrite((0,V.A)(function*(){return yield Ve._withRetries(lt=>qh(lt,j,oe)),Ve.localCache[j]=oe,Ve.notifyServiceWorker(j)}))})()}_get(j){var oe=this;return(0,V.A)(function*(){const Ve=yield oe._withRetries(lt=>function S0(ie,L){return ud.apply(this,arguments)}(lt,j));return oe.localCache[j]=Ve,Ve})()}_remove(j){var oe=this;return(0,V.A)(function*(){return oe._withPendingWrite((0,V.A)(function*(){return yield oe._withRetries(Ve=>Hu(Ve,j)),delete oe.localCache[j],oe.notifyServiceWorker(j)}))})()}_poll(){var j=this;return(0,V.A)(function*(){const oe=yield j._withRetries(cn=>{const hn=U0(cn,!1).getAll();return new gu(hn).toPromise()});if(!oe)return[];if(0!==j.pendingWrites)return[];const Ve=[],lt=new Set;if(0!==oe.length)for(const{fbase_key:cn,value:hn}of oe)lt.add(cn),JSON.stringify(j.localCache[cn])!==JSON.stringify(hn)&&(j.notifyListeners(cn,hn),Ve.push(cn));for(const cn of Object.keys(j.localCache))j.localCache[cn]&&!lt.has(cn)&&(j.notifyListeners(cn,null),Ve.push(cn));return Ve})()}notifyListeners(j,oe){this.localCache[j]=oe;const Ve=this.listeners[j];if(Ve)for(const lt of Array.from(Ve))lt(oe)}startPolling(){var j=this;this.stopPolling(),this.pollTimer=setInterval((0,V.A)(function*(){return j._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(j,oe){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[j]||(this.listeners[j]=new Set,this._get(j)),this.listeners[j].add(oe)}_removeListener(j,oe){this.listeners[j]&&(this.listeners[j].delete(oe),0===this.listeners[j].size&&delete this.listeners[j]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return ie.type="LOCAL",ie})();Vr("rcb"),new Ke(3e4,6e4);class Sh extends Ol{constructor(L){super("custom","custom"),this.params=L}_getIdTokenResponse(L){return mi(L,this._buildIdpRequest())}_linkToIdToken(L,j){return mi(L,this._buildIdpRequest(j))}_getReauthenticationResolver(L){return mi(L,this._buildIdpRequest())}_buildIdpRequest(L){const j={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return L&&(j.idToken=L),j}}function Gu(ie){return ya(ie.auth,new Sh(ie),ie.bypassAuthState)}function Yh(ie){const{auth:L,user:j}=ie;return Et(j,L,"internal-error"),function Sl(ie,L){return Ll.apply(this,arguments)}(j,new Sh(ie),ie.bypassAuthState)}function Ed(ie){return Th.apply(this,arguments)}function Th(){return(Th=(0,V.A)(function*(ie){const{auth:L,user:j}=ie;return Et(j,L,"internal-error"),function Vo(ie,L){return js.apply(this,arguments)}(j,new Sh(ie),ie.bypassAuthState)})).apply(this,arguments)}class Au{constructor(L,j,oe,Ve,lt=!1){this.auth=L,this.resolver=oe,this.user=Ve,this.bypassAuthState=lt,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(j)?j:[j]}execute(){var L=this;return new Promise(function(){var j=(0,V.A)(function*(oe,Ve){L.pendingPromise={resolve:oe,reject:Ve};try{L.eventManager=yield L.resolver._initialize(L.auth),yield L.onExecution(),L.eventManager.registerConsumer(L)}catch(lt){L.reject(lt)}});return function(oe,Ve){return j.apply(this,arguments)}}())}onAuthEvent(L){var j=this;return(0,V.A)(function*(){const{urlResponse:oe,sessionId:Ve,postBody:lt,tenantId:cn,error:hn,type:Qn}=L;if(hn)return void j.reject(hn);const Wn={auth:j.auth,requestUri:oe,sessionId:Ve,tenantId:cn||void 0,postBody:lt||void 0,user:j.user,bypassAuthState:j.bypassAuthState};try{j.resolve(yield j.getIdpTask(Qn)(Wn))}catch(Wi){j.reject(Wi)}})()}onError(L){this.reject(L)}getIdpTask(L){switch(L){case"signInViaPopup":case"signInViaRedirect":return Gu;case"linkViaPopup":case"linkViaRedirect":return Ed;case"reauthViaPopup":case"reauthViaRedirect":return Yh;default:Zn(this.auth,"internal-error")}}resolve(L){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(L),this.unregisterAndCleanUp()}reject(L){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(L),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Ke(2e3,1e4);const W0="pendingRedirect",Cd=new Map;class Ah extends Au{constructor(L,j,oe=!1){super(L,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],j,void 0,oe),this.eventId=null}execute(){var L=()=>super.execute,j=this;return(0,V.A)(function*(){let oe=Cd.get(j.auth._key());if(!oe){try{const lt=(yield function Ff(ie,L){return yl.apply(this,arguments)}(j.resolver,j.auth))?yield L().call(j):null;oe=()=>Promise.resolve(lt)}catch(Ve){oe=()=>Promise.reject(Ve)}Cd.set(j.auth._key(),oe)}return j.bypassAuthState||Cd.set(j.auth._key(),()=>Promise.resolve(null)),oe()})()}onAuthEvent(L){var j=()=>super.onAuthEvent,oe=this;return(0,V.A)(function*(){if("signInViaRedirect"===L.type)return j().call(oe,L);if("unknown"!==L.type){if(L.eventId){const Ve=yield oe.auth._redirectUserForId(L.eventId);if(Ve)return oe.user=Ve,j().call(oe,L);oe.resolve(null)}}else oe.resolve(null)})()}onExecution(){return(0,V.A)(function*(){})()}cleanUp(){}}function yl(){return(yl=(0,V.A)(function*(ie,L){const j=function nf(ie){return ae(W0,ie.config.apiKey,ie.name)}(L),oe=function u1(ie){return Lt(ie._redirectPersistence)}(ie);if(!(yield oe._isAvailable()))return!1;const Ve="true"===(yield oe._get(j));return yield oe._remove(j),Ve})).apply(this,arguments)}function Z1(ie,L){Cd.set(ie._key(),L)}function fc(ie,L){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,V.A)(function*(ie,L,j=!1){if((0,re.xZ)(ie.app))return Promise.reject(wn(ie));const oe=qr(ie),Ve=function dd(ie,L){return L?Lt(L):(Et(ie._popupRedirectResolver,ie,"argument-error"),ie._popupRedirectResolver)}(oe,L),cn=yield new Ah(oe,Ve,j).execute();return cn&&!j&&(delete cn.user._redirectEventId,yield oe._persistUserIfCurrent(cn.user),yield oe._setRedirectUser(null,L)),cn})).apply(this,arguments)}class Fs{constructor(L){this.auth=L,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(L){this.consumers.add(L),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,L)&&(this.sendToConsumer(this.queuedRedirectEvent,L),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(L){this.consumers.delete(L)}onEvent(L){if(this.hasEventBeenHandled(L))return!1;let j=!1;return this.consumers.forEach(oe=>{this.isEventForConsumer(L,oe)&&(j=!0,this.sendToConsumer(L,oe),this.saveEventToCache(L))}),this.hasHandledPotentialRedirect||!function hd(ie){switch(ie.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qh(ie);default:return!1}}(L)||(this.hasHandledPotentialRedirect=!0,j||(this.queuedRedirectEvent=L,j=!0)),j}sendToConsumer(L,j){var oe;if(L.error&&!Qh(L)){const Ve=(null===(oe=L.error.code)||void 0===oe?void 0:oe.split("auth/")[1])||"internal-error";j.onError(xt(this.auth,Ve))}else j.onAuthEvent(L)}isEventForConsumer(L,j){const oe=null===j.eventId||!!L.eventId&&L.eventId===j.eventId;return j.filter.includes(L.type)&&oe}hasEventBeenHandled(L){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zd(L))}saveEventToCache(L){this.cachedEventUids.add(Zd(L)),this.lastProcessedEventTime=Date.now()}}function Zd(ie){return[ie.type,ie.eventId,ie.sessionId,ie.tenantId].filter(L=>L).join("-")}function Qh({type:ie,error:L}){return"unknown"===ie&&"auth/no-auth-event"===(null==L?void 0:L.code)}function Qd(){return(Qd=(0,V.A)(function*(ie,L={}){return un(ie,"GET","/v1/projects",L)})).apply(this,arguments)}const jl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vh=/^https?/;function A1(){return A1=(0,V.A)(function*(ie){if(ie.config.emulator)return;const{authorizedDomains:L}=yield function ja(ie){return Qd.apply(this,arguments)}(ie);for(const j of L)try{if(zh(j))return}catch{}Zn(ie,"unauthorized-domain")}),A1.apply(this,arguments)}function zh(ie){const L=on(),{protocol:j,hostname:oe}=new URL(L);if(ie.startsWith("chrome-extension://")){const cn=new URL(ie);return""===cn.hostname&&""===oe?"chrome-extension:"===j&&ie.replace("chrome-extension://","")===L.replace("chrome-extension://",""):"chrome-extension:"===j&&cn.hostname===oe}if(!vh.test(j))return!1;if(jl.test(ie))return oe===ie;const Ve=ie.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Ve+"|"+Ve+")$","i").test(oe)}const Jd=new Ke(3e4,6e4);function Lc(){const ie=ql().___jsl;if(null!=ie&&ie.H)for(const L of Object.keys(ie.H))if(ie.H[L].r=ie.H[L].r||[],ie.H[L].L=ie.H[L].L||[],ie.H[L].r=[...ie.H[L].L],ie.CP)for(let j=0;j<ie.CP.length;j++)ie.CP[j]=null}let Oh=null;const Wu=new Ke(5e3,15e3),R0="__/auth/iframe",Lh="emulator/auth/iframe",Kl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rl(ie){const L=ie.config;Et(L.authDomain,ie,"auth-domain-config-required");const j=L.emulator?Ae(L,Lh):`https://${ie.config.authDomain}/${R0}`,oe={apiKey:L.apiKey,appName:ie.name,v:re.MF},Ve=Nd.get(ie.config.apiHost);Ve&&(oe.eid=Ve);const lt=ie._getFrameworks();return lt.length&&(oe.fw=lt.join(",")),`${j}?${(0,ne.Am)(oe).slice(1)}`}function Fd(){return Fd=(0,V.A)(function*(ie){const L=yield function q0(ie){return Oh=Oh||function ls(ie){return new Promise((L,j)=>{var oe,Ve,lt;function cn(){Lc(),gapi.load("gapi.iframes",{callback:()=>{L(gapi.iframes.getContext())},ontimeout:()=>{Lc(),j(xt(ie,"network-request-failed"))},timeout:Jd.get()})}if(null!==(Ve=null===(oe=ql().gapi)||void 0===oe?void 0:oe.iframes)&&void 0!==Ve&&Ve.Iframe)L(gapi.iframes.getContext());else{if(null===(lt=ql().gapi)||void 0===lt||!lt.load){const hn=Vr("iframefcb");return ql()[hn]=()=>{gapi.load?cn():j(xt(ie,"network-request-failed"))},Oa(`${function kr(){return Jl.gapiScript}()}?onload=${hn}`).catch(Qn=>j(Qn))}cn()}}).catch(L=>{throw Oh=null,L})}(ie),Oh}(ie),j=ql().gapi;return Et(j,ie,"internal-error"),L.open({where:document.body,url:rl(ie),messageHandlersFilter:j.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kl,dontclear:!0},oe=>new Promise(function(){var Ve=(0,V.A)(function*(lt,cn){yield oe.restyle({setHideOnLeave:!1});const hn=xt(ie,"network-request-failed"),Qn=ql().setTimeout(()=>{cn(hn)},Wu.get());function Wn(){ql().clearTimeout(Qn),lt(oe)}oe.ping(Wn).then(Wn,()=>{cn(hn)})});return function(lt,cn){return Ve.apply(this,arguments)}}()))}),Fd.apply(this,arguments)}const pd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class b{constructor(L){this.window=L,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const N="__/auth/handler",H="emulator/auth/handler",ee=encodeURIComponent("fac");function se(ie,L,j,oe,Ve,lt){return he.apply(this,arguments)}function he(){return(he=(0,V.A)(function*(ie,L,j,oe,Ve,lt){Et(ie.config.authDomain,ie,"auth-domain-config-required"),Et(ie.config.apiKey,ie,"invalid-api-key");const cn={apiKey:ie.config.apiKey,appName:ie.name,authType:j,redirectUrl:oe,v:re.MF,eventId:Ve};if(L instanceof Ga){L.setDefaultLanguage(ie.languageCode),cn.providerId=L.providerId||"",(0,ne.Im)(L.getCustomParameters())||(cn.customParameters=JSON.stringify(L.getCustomParameters()));for(const[Wi,vr]of Object.entries(lt||{}))cn[Wi]=vr}if(L instanceof nl){const Wi=L.getScopes().filter(vr=>""!==vr);Wi.length>0&&(cn.scopes=Wi.join(","))}ie.tenantId&&(cn.tid=ie.tenantId);const hn=cn;for(const Wi of Object.keys(hn))void 0===hn[Wi]&&delete hn[Wi];const Qn=yield ie._getAppCheckToken(),Wn=Qn?`#${ee}=${encodeURIComponent(Qn)}`:"";return`${function ye({config:ie}){return ie.emulator?Ae(ie,H):`https://${ie.authDomain}/${N}`}(ie)}?${(0,ne.Am)(hn).slice(1)}${Wn}`})).apply(this,arguments)}const Pe="webStorageSupport",Qe=class Fe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kd,this._completeRedirectFn=fc,this._overrideRedirectResult=Z1}_openPopup(L,j,oe,Ve){var lt=this;return(0,V.A)(function*(){var cn;Te(null===(cn=lt.eventManagers[L._key()])||void 0===cn?void 0:cn.manager,"_initialize() not called before _openPopup()");const hn=yield se(L,j,oe,on(),Ve);return function M(ie,L,j,oe=500,Ve=600){const lt=Math.max((window.screen.availHeight-Ve)/2,0).toString(),cn=Math.max((window.screen.availWidth-oe)/2,0).toString();let hn="";const Qn=Object.assign(Object.assign({},pd),{width:oe.toString(),height:Ve.toString(),top:lt,left:cn}),Wn=(0,ne.ZQ)().toLowerCase();j&&(hn=Cn(Wn)?"_blank":j),it(Wn)&&(L=L||"http://localhost",Qn.scrollbars="yes");const Wi=Object.entries(Qn).reduce((Sr,[Mr,Hr])=>`${Sr}${Mr}=${Hr},`,"");if(function ii(ie=(0,ne.ZQ)()){var L;return Fo(ie)&&!(null===(L=window.navigator)||void 0===L||!L.standalone)}(Wn)&&"_self"!==hn)return function R(ie,L){const j=document.createElement("a");j.href=ie,j.target=L;const oe=document.createEvent("MouseEvent");oe.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),j.dispatchEvent(oe)}(L||"",hn),new b(null);const vr=window.open(L||"",hn,Wi);Et(vr,ie,"popup-blocked");try{vr.focus()}catch{}return new b(vr)}(L,hn,dl())})()}_openRedirect(L,j,oe,Ve){var lt=this;return(0,V.A)(function*(){return yield lt._originValidation(L),function wd(ie){ql().location.href=ie}(yield se(L,j,oe,on(),Ve)),new Promise(()=>{})})()}_initialize(L){const j=L._key();if(this.eventManagers[j]){const{manager:Ve,promise:lt}=this.eventManagers[j];return Ve?Promise.resolve(Ve):(Te(lt,"If manager is not set, promise should be"),lt)}const oe=this.initAndGetManager(L);return this.eventManagers[j]={promise:oe},oe.catch(()=>{delete this.eventManagers[j]}),oe}initAndGetManager(L){var j=this;return(0,V.A)(function*(){const oe=yield function Bc(ie){return Fd.apply(this,arguments)}(L),Ve=new Fs(L);return oe.register("authEvent",lt=>(Et(null==lt?void 0:lt.authEvent,L,"invalid-auth-event"),{status:Ve.onEvent(lt.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),j.eventManagers[L._key()]={manager:Ve},j.iframes[L._key()]=oe,Ve})()}_isIframeWebStorageSupported(L,j){this.iframes[L._key()].send(Pe,{type:Pe},Ve=>{var lt;const cn=null===(lt=null==Ve?void 0:Ve[0])||void 0===lt?void 0:lt[Pe];void 0!==cn&&j(!!cn),Zn(L,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(L){const j=L._key();return this.originValidationPromises[j]||(this.originValidationPromises[j]=function d1(ie){return A1.apply(this,arguments)}(L)),this.originValidationPromises[j]}get _shouldInitProactively(){return di()||Xt()||Fo()}};var en="@firebase/auth";class at{constructor(L){this.auth=L,this.internalListeners=new Map}getUid(){var L;return this.assertAuthConfigured(),(null===(L=this.auth.currentUser)||void 0===L?void 0:L.uid)||null}getToken(L){var j=this;return(0,V.A)(function*(){return j.assertAuthConfigured(),yield j.auth._initializationPromise,j.auth.currentUser?{accessToken:yield j.auth.currentUser.getIdToken(L)}:null})()}addAuthTokenListener(L){if(this.assertAuthConfigured(),this.internalListeners.has(L))return;const j=this.auth.onIdTokenChanged(oe=>{L((null==oe?void 0:oe.stsTokenManager.accessToken)||null)});this.internalListeners.set(L,j),this.updateProactiveRefresh()}removeAuthTokenListener(L){this.assertAuthConfigured();const j=this.internalListeners.get(L);j&&(this.internalListeners.delete(L),j(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const zn=(0,ne.XA)("authIdTokenMaxAge")||300;let mn=null;const _i=ie=>function(){var L=(0,V.A)(function*(j){const oe=j&&(yield j.getIdTokenResult()),Ve=oe&&((new Date).getTime()-Date.parse(oe.issuedAtTime))/1e3;if(Ve&&Ve>zn)return;const lt=null==oe?void 0:oe.token;mn!==lt&&(mn=lt,yield fetch(ie,{method:lt?"POST":"DELETE",headers:lt?{Authorization:`Bearer ${lt}`}:{}}))});return function(j){return L.apply(this,arguments)}}();function eo(ie=(0,re.Sx)()){const L=(0,re.j6)(ie,"auth");if(L.isInitialized())return L.getImmediate();const j=function _a(ie,L){const j=(0,re.j6)(ie,"auth");if(j.isInitialized()){const Ve=j.getImmediate(),lt=j.getOptions();if((0,ne.bD)(lt,null!=L?L:{}))return Ve;Zn(Ve,"already-initialized")}return j.initialize({options:L})}(ie,{popupRedirectResolver:Qe,persistence:[Od,Vl,Kd]}),oe=(0,ne.XA)("authTokenSyncURL");if(oe&&"boolean"==typeof isSecureContext&&isSecureContext){const lt=new URL(oe,location.origin);if(location.origin===lt.origin){const cn=_i(lt.toString());(function na(ie,L,j){(0,ne.Ku)(ie).beforeAuthStateChanged(L,j)})(j,cn,()=>cn(j.currentUser)),function fs(ie,L,j,oe){(0,ne.Ku)(ie).onIdTokenChanged(L,j,oe)}(j,hn=>cn(hn))}}const Ve=(0,ne.Tj)("auth");return Ve&&function Ja(ie,L,j){const oe=qr(ie);Et(oe._canInitEmulator,oe,"emulator-config-failed"),Et(/^https?:\/\//.test(L),oe,"invalid-emulator-scheme");const Ve=!(null==j||!j.disableWarnings),lt=Ra(L),{host:cn,port:hn}=function Vc(ie){const L=Ra(ie),j=/(\/\/)?([^?#/]+)/.exec(ie.substr(L.length));if(!j)return{host:"",port:null};const oe=j[2].split("@").pop()||"",Ve=/^(\[[^\]]+\])(:|$)/.exec(oe);if(Ve){const lt=Ve[1];return{host:lt,port:$u(oe.substr(lt.length+1))}}{const[lt,cn]=oe.split(":");return{host:lt,port:$u(cn)}}}(L);oe.config.emulator={url:`${lt}//${cn}${null===hn?"":`:${hn}`}/`},oe.settings.appVerificationDisabledForTesting=!0,oe.emulatorConfig=Object.freeze({host:cn,port:hn,protocol:lt.replace(":",""),options:Object.freeze({disableWarnings:Ve})}),Ve||function ju(){function ie(){const L=document.createElement("p"),j=L.style;L.innerText="Running in emulator mode. Do not use with production credentials.",j.position="fixed",j.width="100%",j.backgroundColor="#ffffff",j.border=".1em solid #000000",j.color="#b50000",j.bottom="0px",j.left="0px",j.margin="0px",j.zIndex="10000",j.textAlign="center",L.classList.add("firebase-emulator-warning"),document.body.appendChild(L)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",ie):ie())}()}(j,`http://${Ve}`),j}(function ru(ie){Jl=ie})({loadJS:ie=>new Promise((L,j)=>{const oe=document.createElement("script");oe.setAttribute("src",ie),oe.onload=L,oe.onerror=Ve=>{const lt=xt("internal-error");lt.customData=Ve,j(lt)},oe.type="text/javascript",oe.charset="UTF-8",function io(){var ie,L;return null!==(L=null===(ie=document.getElementsByTagName("head"))||void 0===ie?void 0:ie[0])&&void 0!==L?L:document}().appendChild(oe)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Tn(ie){(0,re.om)(new Y.uA("auth",(L,{options:j})=>{const oe=L.getProvider("app").getImmediate(),Ve=L.getProvider("heartbeat"),lt=L.getProvider("app-check-internal"),{apiKey:cn,authDomain:hn}=oe.options;Et(cn&&!cn.includes(":"),"invalid-api-key",{appName:oe.name});const Qn={apiKey:cn,authDomain:hn,clientPlatform:ie,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ki(ie)},Wn=new es(oe,Ve,lt,Qn);return function Eu(ie,L){const j=(null==L?void 0:L.persistence)||[],oe=(Array.isArray(j)?j:[j]).map(Lt);null!=L&&L.errorMap&&ie._updateErrorMap(L.errorMap),ie._initializeWithPersistence(oe,null==L?void 0:L.popupRedirectResolver)}(Wn,j),Wn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((L,j,oe)=>{L.getProvider("auth-internal").initialize()})),(0,re.om)(new Y.uA("auth-internal",L=>{const j=qr(L.getProvider("auth").getImmediate());return new at(j)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.KO)(en,"1.7.5",function $t(ie){switch(ie){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ie)),(0,re.KO)(en,"1.7.5","esm2017")}("Browser")},3273:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{rJ:()=>Ap,kd:()=>gn,H9:()=>vf,x7:()=>Me,aU:()=>Ju,aQ:()=>Rt,P:()=>Lg,BN:()=>sn,_M:()=>tg});var qt,jt,V=_e(467),re=_e(7852),ne=_e(1362),l=_e(8041),We=_e(1076),Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ft={};(function(){var S;function w(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function P(zi,ti,yi){yi||(yi=0);var Bi=Array(16);if("string"==typeof ti)for(var Ui=0;16>Ui;++Ui)Bi[Ui]=ti.charCodeAt(yi++)|ti.charCodeAt(yi++)<<8|ti.charCodeAt(yi++)<<16|ti.charCodeAt(yi++)<<24;else for(Ui=0;16>Ui;++Ui)Bi[Ui]=ti[yi++]|ti[yi++]<<8|ti[yi++]<<16|ti[yi++]<<24;var lo=zi.g[3],gi=(ti=zi.g[0])+(lo^(yi=zi.g[1])&((Ui=zi.g[2])^lo))+Bi[0]+3614090360&4294967295;gi=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=(yi=(Ui=(lo=(ti=yi+(gi<<7&4294967295|gi>>>25))+((gi=lo+(Ui^ti&(yi^Ui))+Bi[1]+3905402710&4294967295)<<12&4294967295|gi>>>20))+((gi=Ui+(yi^lo&(ti^yi))+Bi[2]+606105819&4294967295)<<17&4294967295|gi>>>15))+((gi=yi+(ti^Ui&(lo^ti))+Bi[3]+3250441966&4294967295)<<22&4294967295|gi>>>10))+((gi=ti+(lo^yi&(Ui^lo))+Bi[4]+4118548399&4294967295)<<7&4294967295|gi>>>25))+((gi=lo+(Ui^ti&(yi^Ui))+Bi[5]+1200080426&4294967295)<<12&4294967295|gi>>>20))+((gi=Ui+(yi^lo&(ti^yi))+Bi[6]+2821735955&4294967295)<<17&4294967295|gi>>>15))+((gi=yi+(ti^Ui&(lo^ti))+Bi[7]+4249261313&4294967295)<<22&4294967295|gi>>>10))+((gi=ti+(lo^yi&(Ui^lo))+Bi[8]+1770035416&4294967295)<<7&4294967295|gi>>>25))+((gi=lo+(Ui^ti&(yi^Ui))+Bi[9]+2336552879&4294967295)<<12&4294967295|gi>>>20))+((gi=Ui+(yi^lo&(ti^yi))+Bi[10]+4294925233&4294967295)<<17&4294967295|gi>>>15))+((gi=yi+(ti^Ui&(lo^ti))+Bi[11]+2304563134&4294967295)<<22&4294967295|gi>>>10))+((gi=ti+(lo^yi&(Ui^lo))+Bi[12]+1804603682&4294967295)<<7&4294967295|gi>>>25))+((gi=lo+(Ui^ti&(yi^Ui))+Bi[13]+4254626195&4294967295)<<12&4294967295|gi>>>20))+((gi=Ui+(yi^lo&(ti^yi))+Bi[14]+2792965006&4294967295)<<17&4294967295|gi>>>15))+((gi=yi+(ti^Ui&(lo^ti))+Bi[15]+1236535329&4294967295)<<22&4294967295|gi>>>10))+((gi=ti+(Ui^lo&(yi^Ui))+Bi[1]+4129170786&4294967295)<<5&4294967295|gi>>>27))+((gi=lo+(yi^Ui&(ti^yi))+Bi[6]+3225465664&4294967295)<<9&4294967295|gi>>>23))+((gi=Ui+(ti^yi&(lo^ti))+Bi[11]+643717713&4294967295)<<14&4294967295|gi>>>18))+((gi=yi+(lo^ti&(Ui^lo))+Bi[0]+3921069994&4294967295)<<20&4294967295|gi>>>12))+((gi=ti+(Ui^lo&(yi^Ui))+Bi[5]+3593408605&4294967295)<<5&4294967295|gi>>>27))+((gi=lo+(yi^Ui&(ti^yi))+Bi[10]+38016083&4294967295)<<9&4294967295|gi>>>23))+((gi=Ui+(ti^yi&(lo^ti))+Bi[15]+3634488961&4294967295)<<14&4294967295|gi>>>18))+((gi=yi+(lo^ti&(Ui^lo))+Bi[4]+3889429448&4294967295)<<20&4294967295|gi>>>12))+((gi=ti+(Ui^lo&(yi^Ui))+Bi[9]+568446438&4294967295)<<5&4294967295|gi>>>27))+((gi=lo+(yi^Ui&(ti^yi))+Bi[14]+3275163606&4294967295)<<9&4294967295|gi>>>23))+((gi=Ui+(ti^yi&(lo^ti))+Bi[3]+4107603335&4294967295)<<14&4294967295|gi>>>18))+((gi=yi+(lo^ti&(Ui^lo))+Bi[8]+1163531501&4294967295)<<20&4294967295|gi>>>12))+((gi=ti+(Ui^lo&(yi^Ui))+Bi[13]+2850285829&4294967295)<<5&4294967295|gi>>>27))+((gi=lo+(yi^Ui&(ti^yi))+Bi[2]+4243563512&4294967295)<<9&4294967295|gi>>>23))+((gi=Ui+(ti^yi&(lo^ti))+Bi[7]+1735328473&4294967295)<<14&4294967295|gi>>>18))+((gi=yi+(lo^ti&(Ui^lo))+Bi[12]+2368359562&4294967295)<<20&4294967295|gi>>>12))+((gi=ti+(yi^Ui^lo)+Bi[5]+4294588738&4294967295)<<4&4294967295|gi>>>28))+((gi=lo+(ti^yi^Ui)+Bi[8]+2272392833&4294967295)<<11&4294967295|gi>>>21))+((gi=Ui+(lo^ti^yi)+Bi[11]+1839030562&4294967295)<<16&4294967295|gi>>>16))+((gi=yi+(Ui^lo^ti)+Bi[14]+4259657740&4294967295)<<23&4294967295|gi>>>9))+((gi=ti+(yi^Ui^lo)+Bi[1]+2763975236&4294967295)<<4&4294967295|gi>>>28))+((gi=lo+(ti^yi^Ui)+Bi[4]+1272893353&4294967295)<<11&4294967295|gi>>>21))+((gi=Ui+(lo^ti^yi)+Bi[7]+4139469664&4294967295)<<16&4294967295|gi>>>16))+((gi=yi+(Ui^lo^ti)+Bi[10]+3200236656&4294967295)<<23&4294967295|gi>>>9))+((gi=ti+(yi^Ui^lo)+Bi[13]+681279174&4294967295)<<4&4294967295|gi>>>28))+((gi=lo+(ti^yi^Ui)+Bi[0]+3936430074&4294967295)<<11&4294967295|gi>>>21))+((gi=Ui+(lo^ti^yi)+Bi[3]+3572445317&4294967295)<<16&4294967295|gi>>>16))+((gi=yi+(Ui^lo^ti)+Bi[6]+76029189&4294967295)<<23&4294967295|gi>>>9))+((gi=ti+(yi^Ui^lo)+Bi[9]+3654602809&4294967295)<<4&4294967295|gi>>>28))+((gi=lo+(ti^yi^Ui)+Bi[12]+3873151461&4294967295)<<11&4294967295|gi>>>21))+((gi=Ui+(lo^ti^yi)+Bi[15]+530742520&4294967295)<<16&4294967295|gi>>>16))+((gi=yi+(Ui^lo^ti)+Bi[2]+3299628645&4294967295)<<23&4294967295|gi>>>9))+((gi=ti+(Ui^(yi|~lo))+Bi[0]+4096336452&4294967295)<<6&4294967295|gi>>>26))+((gi=lo+(yi^(ti|~Ui))+Bi[7]+1126891415&4294967295)<<10&4294967295|gi>>>22))+((gi=Ui+(ti^(lo|~yi))+Bi[14]+2878612391&4294967295)<<15&4294967295|gi>>>17))+((gi=yi+(lo^(Ui|~ti))+Bi[5]+4237533241&4294967295)<<21&4294967295|gi>>>11))+((gi=ti+(Ui^(yi|~lo))+Bi[12]+1700485571&4294967295)<<6&4294967295|gi>>>26))+((gi=lo+(yi^(ti|~Ui))+Bi[3]+2399980690&4294967295)<<10&4294967295|gi>>>22))+((gi=Ui+(ti^(lo|~yi))+Bi[10]+4293915773&4294967295)<<15&4294967295|gi>>>17))+((gi=yi+(lo^(Ui|~ti))+Bi[1]+2240044497&4294967295)<<21&4294967295|gi>>>11))+((gi=ti+(Ui^(yi|~lo))+Bi[8]+1873313359&4294967295)<<6&4294967295|gi>>>26))+((gi=lo+(yi^(ti|~Ui))+Bi[15]+4264355552&4294967295)<<10&4294967295|gi>>>22))+((gi=Ui+(ti^(lo|~yi))+Bi[6]+2734768916&4294967295)<<15&4294967295|gi>>>17))+((gi=yi+(lo^(Ui|~ti))+Bi[13]+1309151649&4294967295)<<21&4294967295|gi>>>11))+((lo=(ti=yi+((gi=ti+(Ui^(yi|~lo))+Bi[4]+4149444226&4294967295)<<6&4294967295|gi>>>26))+((gi=lo+(yi^(ti|~Ui))+Bi[11]+3174756917&4294967295)<<10&4294967295|gi>>>22))^((Ui=lo+((gi=Ui+(ti^(lo|~yi))+Bi[2]+718787259&4294967295)<<15&4294967295|gi>>>17))|~ti))+Bi[9]+3951481745&4294967295,zi.g[0]=zi.g[0]+ti&4294967295,zi.g[1]=zi.g[1]+(Ui+(gi<<21&4294967295|gi>>>11))&4294967295,zi.g[2]=zi.g[2]+Ui&4294967295,zi.g[3]=zi.g[3]+lo&4294967295}function J(zi,ti){this.h=ti;for(var yi=[],Bi=!0,Ui=zi.length-1;0<=Ui;Ui--){var lo=0|zi[Ui];Bi&&lo==ti||(yi[Ui]=lo,Bi=!1)}this.g=yi}(function a(zi,ti){function yi(){}yi.prototype=ti.prototype,zi.D=ti.prototype,zi.prototype=new yi,zi.prototype.constructor=zi,zi.C=function(Bi,Ui,lo){for(var gi=Array(arguments.length-2),x1=2;x1<arguments.length;x1++)gi[x1-2]=arguments[x1];return ti.prototype[Ui].apply(Bi,gi)}})(w,function p(){this.blockSize=-1}),w.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},w.prototype.u=function(zi,ti){void 0===ti&&(ti=zi.length);for(var yi=ti-this.blockSize,Bi=this.B,Ui=this.h,lo=0;lo<ti;){if(0==Ui)for(;lo<=yi;)P(this,zi,lo),lo+=this.blockSize;if("string"==typeof zi){for(;lo<ti;)if(Bi[Ui++]=zi.charCodeAt(lo++),Ui==this.blockSize){P(this,Bi),Ui=0;break}}else for(;lo<ti;)if(Bi[Ui++]=zi[lo++],Ui==this.blockSize){P(this,Bi),Ui=0;break}}this.h=Ui,this.o+=ti},w.prototype.v=function(){var zi=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);zi[0]=128;for(var ti=1;ti<zi.length-8;++ti)zi[ti]=0;var yi=8*this.o;for(ti=zi.length-8;ti<zi.length;++ti)zi[ti]=255&yi,yi/=256;for(this.u(zi),zi=Array(16),ti=yi=0;4>ti;++ti)for(var Bi=0;32>Bi;Bi+=8)zi[yi++]=this.g[ti]>>>Bi&255;return zi};var ve={};function Re(zi){return-128<=zi&&128>zi?function U(zi,ti){var yi=ve;return Object.prototype.hasOwnProperty.call(yi,zi)?yi[zi]:yi[zi]=ti(zi)}(zi,function(ti){return new J([0|ti],0>ti?-1:0)}):new J([0|zi],0>zi?-1:0)}function st(zi){if(isNaN(zi)||!isFinite(zi))return In;if(0>zi)return rr(st(-zi));for(var ti=[],yi=1,Bi=0;zi>=yi;Bi++)ti[Bi]=zi/yi|0,yi*=4294967296;return new J(ti,0)}var In=Re(0),hi=Re(1),Ji=Re(16777216);function Zo(zi){if(0!=zi.h)return!1;for(var ti=0;ti<zi.g.length;ti++)if(0!=zi.g[ti])return!1;return!0}function br(zi){return-1==zi.h}function rr(zi){for(var ti=zi.g.length,yi=[],Bi=0;Bi<ti;Bi++)yi[Bi]=~zi.g[Bi];return new J(yi,~zi.h).add(hi)}function Ds(zi,ti){return zi.add(rr(ti))}function zs(zi,ti){for(;(65535&zi[ti])!=zi[ti];)zi[ti+1]+=zi[ti]>>>16,zi[ti]&=65535,ti++}function Bs(zi,ti){this.g=zi,this.h=ti}function Aa(zi,ti){if(Zo(ti))throw Error("division by zero");if(Zo(zi))return new Bs(In,In);if(br(zi))return ti=Aa(rr(zi),ti),new Bs(rr(ti.g),rr(ti.h));if(br(ti))return ti=Aa(zi,rr(ti)),new Bs(rr(ti.g),ti.h);if(30<zi.g.length){if(br(zi)||br(ti))throw Error("slowDivide_ only works with positive integers.");for(var yi=hi,Bi=ti;0>=Bi.l(zi);)yi=Pl(yi),Bi=Pl(Bi);var Ui=qa(yi,1),lo=qa(Bi,1);for(Bi=qa(Bi,2),yi=qa(yi,2);!Zo(Bi);){var gi=lo.add(Bi);0>=gi.l(zi)&&(Ui=Ui.add(yi),lo=gi),Bi=qa(Bi,1),yi=qa(yi,1)}return ti=Ds(zi,Ui.j(ti)),new Bs(Ui,ti)}for(Ui=In;0<=zi.l(ti);){for(yi=Math.max(1,Math.floor(zi.m()/ti.m())),Bi=48>=(Bi=Math.ceil(Math.log(yi)/Math.LN2))?1:Math.pow(2,Bi-48),gi=(lo=st(yi)).j(ti);br(gi)||0<gi.l(zi);)gi=(lo=st(yi-=Bi)).j(ti);Zo(lo)&&(lo=hi),Ui=Ui.add(lo),zi=Ds(zi,gi)}return new Bs(Ui,zi)}function Pl(zi){for(var ti=zi.g.length+1,yi=[],Bi=0;Bi<ti;Bi++)yi[Bi]=zi.i(Bi)<<1|zi.i(Bi-1)>>>31;return new J(yi,zi.h)}function qa(zi,ti){var yi=ti>>5;ti%=32;for(var Bi=zi.g.length-yi,Ui=[],lo=0;lo<Bi;lo++)Ui[lo]=0<ti?zi.i(lo+yi)>>>ti|zi.i(lo+yi+1)<<32-ti:zi.i(lo+yi);return new J(Ui,zi.h)}(S=J.prototype).m=function(){if(br(this))return-rr(this).m();for(var zi=0,ti=1,yi=0;yi<this.g.length;yi++){var Bi=this.i(yi);zi+=(0<=Bi?Bi:4294967296+Bi)*ti,ti*=4294967296}return zi},S.toString=function(zi){if(2>(zi=zi||10)||36<zi)throw Error("radix out of range: "+zi);if(Zo(this))return"0";if(br(this))return"-"+rr(this).toString(zi);for(var ti=st(Math.pow(zi,6)),yi=this,Bi="";;){var Ui=Aa(yi,ti).g,lo=((0<(yi=Ds(yi,Ui.j(ti))).g.length?yi.g[0]:yi.h)>>>0).toString(zi);if(Zo(yi=Ui))return lo+Bi;for(;6>lo.length;)lo="0"+lo;Bi=lo+Bi}},S.i=function(zi){return 0>zi?0:zi<this.g.length?this.g[zi]:this.h},S.l=function(zi){return br(zi=Ds(this,zi))?-1:Zo(zi)?0:1},S.abs=function(){return br(this)?rr(this):this},S.add=function(zi){for(var ti=Math.max(this.g.length,zi.g.length),yi=[],Bi=0,Ui=0;Ui<=ti;Ui++){var lo=Bi+(65535&this.i(Ui))+(65535&zi.i(Ui)),gi=(lo>>>16)+(this.i(Ui)>>>16)+(zi.i(Ui)>>>16);Bi=gi>>>16,yi[Ui]=(gi&=65535)<<16|(lo&=65535)}return new J(yi,-2147483648&yi[yi.length-1]?-1:0)},S.j=function(zi){if(Zo(this)||Zo(zi))return In;if(br(this))return br(zi)?rr(this).j(rr(zi)):rr(rr(this).j(zi));if(br(zi))return rr(this.j(rr(zi)));if(0>this.l(Ji)&&0>zi.l(Ji))return st(this.m()*zi.m());for(var ti=this.g.length+zi.g.length,yi=[],Bi=0;Bi<2*ti;Bi++)yi[Bi]=0;for(Bi=0;Bi<this.g.length;Bi++)for(var Ui=0;Ui<zi.g.length;Ui++){var lo=this.i(Bi)>>>16,gi=65535&this.i(Bi),x1=zi.i(Ui)>>>16,sg=65535&zi.i(Ui);yi[2*Bi+2*Ui]+=gi*sg,zs(yi,2*Bi+2*Ui),yi[2*Bi+2*Ui+1]+=lo*sg,zs(yi,2*Bi+2*Ui+1),yi[2*Bi+2*Ui+1]+=gi*x1,zs(yi,2*Bi+2*Ui+1),yi[2*Bi+2*Ui+2]+=lo*x1,zs(yi,2*Bi+2*Ui+2)}for(Bi=0;Bi<ti;Bi++)yi[Bi]=yi[2*Bi+1]<<16|yi[2*Bi];for(Bi=ti;Bi<2*ti;Bi++)yi[Bi]=0;return new J(yi,0)},S.A=function(zi){return Aa(this,zi).h},S.and=function(zi){for(var ti=Math.max(this.g.length,zi.g.length),yi=[],Bi=0;Bi<ti;Bi++)yi[Bi]=this.i(Bi)&zi.i(Bi);return new J(yi,this.h&zi.h)},S.or=function(zi){for(var ti=Math.max(this.g.length,zi.g.length),yi=[],Bi=0;Bi<ti;Bi++)yi[Bi]=this.i(Bi)|zi.i(Bi);return new J(yi,this.h|zi.h)},S.xor=function(zi){for(var ti=Math.max(this.g.length,zi.g.length),yi=[],Bi=0;Bi<ti;Bi++)yi[Bi]=this.i(Bi)^zi.i(Bi);return new J(yi,this.h^zi.h)},w.prototype.digest=w.prototype.v,w.prototype.reset=w.prototype.s,w.prototype.update=w.prototype.u,jt=ft.Md5=w,J.prototype.add=J.prototype.add,J.prototype.multiply=J.prototype.j,J.prototype.modulo=J.prototype.A,J.prototype.compare=J.prototype.l,J.prototype.toNumber=J.prototype.m,J.prototype.toString=J.prototype.toString,J.prototype.getBits=J.prototype.i,J.fromNumber=st,J.fromString=function Wt(zi,ti){if(0==zi.length)throw Error("number format error: empty string");if(2>(ti=ti||10)||36<ti)throw Error("radix out of range: "+ti);if("-"==zi.charAt(0))return rr(Wt(zi.substring(1),ti));if(0<=zi.indexOf("-"))throw Error('number format error: interior "-" character');for(var yi=st(Math.pow(ti,8)),Bi=In,Ui=0;Ui<zi.length;Ui+=8){var lo=Math.min(8,zi.length-Ui),gi=parseInt(zi.substring(Ui,Ui+lo),ti);8>lo?(lo=st(Math.pow(ti,lo)),Bi=Bi.j(lo).add(st(gi))):Bi=(Bi=Bi.j(yi)).add(st(gi))}return Bi},qt=ft.Integer=J}).apply(typeof Y<"u"?Y:typeof self<"u"?self:typeof window<"u"?window:{});var At,Ut,yt,fn,xn,rn,ht,ei,Mn,wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},C={};(function(){var S,a="function"==typeof Object.defineProperties?Object.defineProperty:function(K,Oe,ut){return K==Array.prototype||K==Object.prototype||(K[Oe]=ut.value),K},w=function p(K){K=["object"==typeof globalThis&&globalThis,K,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof wt&&wt];for(var Oe=0;Oe<K.length;++Oe){var ut=K[Oe];if(ut&&ut.Math==Math)return ut}throw Error("Cannot find global object")}(this);!function P(K,Oe){if(Oe)e:{var ut=w;K=K.split(".");for(var an=0;an<K.length-1;an++){var $i=K[an];if(!($i in ut))break e;ut=ut[$i]}(Oe=Oe(an=ut[K=K[K.length-1]]))!=an&&null!=Oe&&a(ut,K,{configurable:!0,writable:!0,value:Oe})}}("Array.prototype.values",function(K){return K||function(){return function U(K,Oe){K instanceof String&&(K+="");var ut=0,an=!1,$i={next:function(){if(!an&&ut<K.length){var Do=ut++;return{value:Oe(Do,K[Do]),done:!1}}return an=!0,{done:!0,value:void 0}}};return $i[Symbol.iterator]=function(){return $i},$i}(this,function(Oe,ut){return ut})}});var J=J||{},ve=this||self;function Re(K){var Oe=typeof K;return"array"==(Oe="object"!=Oe?Oe:K?Array.isArray(K)?"array":Oe:"null")||"object"==Oe&&"number"==typeof K.length}function st(K){var Oe=typeof K;return"object"==Oe&&null!=K||"function"==Oe}function Wt(K,Oe,ut){return K.call.apply(K.bind,arguments)}function In(K,Oe,ut){if(!K)throw Error();if(2<arguments.length){var an=Array.prototype.slice.call(arguments,2);return function(){var $i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($i,an),K.apply(Oe,$i)}}return function(){return K.apply(Oe,arguments)}}function hi(K,Oe,ut){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wt:In).apply(null,arguments)}function Ji(K,Oe){var ut=Array.prototype.slice.call(arguments,1);return function(){var an=ut.slice();return an.push.apply(an,arguments),K.apply(this,an)}}function Zo(K,Oe){function ut(){}ut.prototype=Oe.prototype,K.aa=Oe.prototype,K.prototype=new ut,K.prototype.constructor=K,K.Qb=function(an,$i,Do){for(var Ar=Array(arguments.length-2),kl=2;kl<arguments.length;kl++)Ar[kl-2]=arguments[kl];return Oe.prototype[$i].apply(an,Ar)}}function br(K){const Oe=K.length;if(0<Oe){const ut=Array(Oe);for(let an=0;an<Oe;an++)ut[an]=K[an];return ut}return[]}function rr(K,Oe){for(let ut=1;ut<arguments.length;ut++){const an=arguments[ut];if(Re(an)){const $i=K.length||0,Do=an.length||0;K.length=$i+Do;for(let Ar=0;Ar<Do;Ar++)K[$i+Ar]=an[Ar]}else K.push(an)}}function zs(K){return/^[\s\xa0]*$/.test(K)}function Bs(){var K=ve.navigator;return K&&(K=K.userAgent)?K:""}function Aa(K){return Aa[" "](K),K}Aa[" "]=function(){};var Pl=!(-1==Bs().indexOf("Gecko")||-1!=Bs().toLowerCase().indexOf("webkit")&&-1==Bs().indexOf("Edge")||-1!=Bs().indexOf("Trident")||-1!=Bs().indexOf("MSIE")||-1!=Bs().indexOf("Edge"));function qa(K,Oe,ut){for(const an in K)Oe.call(ut,K[an],an,K)}function ti(K){const Oe={};for(const ut in K)Oe[ut]=K[ut];return Oe}const yi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bi(K,Oe){let ut,an;for(let $i=1;$i<arguments.length;$i++){for(ut in an=arguments[$i],an)K[ut]=an[ut];for(let Do=0;Do<yi.length;Do++)ut=yi[Do],Object.prototype.hasOwnProperty.call(an,ut)&&(K[ut]=an[ut])}}function Ui(K){var Oe=1;K=K.split(":");const ut=[];for(;0<Oe&&K.length;)ut.push(K.shift()),Oe--;return K.length&&ut.push(K.join(":")),ut}function lo(K){ve.setTimeout(()=>{throw K},0)}function gi(){var K=Ng;let Oe=null;return K.g&&(Oe=K.g,K.g=K.g.next,K.g||(K.h=null),Oe.next=null),Oe}var sg=new class Ds{constructor(Oe,ut){this.i=Oe,this.j=ut,this.h=0,this.g=null}get(){let Oe;return 0<this.h?(this.h--,Oe=this.g,this.g=Oe.next,Oe.next=null):Oe=this.i(),Oe}}(()=>new bv,K=>K.reset());class bv{constructor(){this.next=this.g=this.h=null}set(Oe,ut){this.h=Oe,this.g=ut,this.next=null}reset(){this.next=this.g=this.h=null}}let ag,km=!1,Ng=new class x1{constructor(){this.h=this.g=null}add(Oe,ut){const an=sg.get();an.set(Oe,ut),this.h?this.h.next=an:this.g=an,this.h=an}},h4=()=>{const K=ve.Promise.resolve(void 0);ag=()=>{K.then(L4)}};var L4=()=>{for(var K;K=gi();){try{K.h.call(K.g)}catch(ut){lo(ut)}var Oe=sg;Oe.j(K),100>Oe.h&&(Oe.h++,K.next=Oe.g,Oe.g=K)}km=!1};function l2(){this.s=this.s,this.C=this.C}function sh(K,Oe){this.type=K,this.g=this.target=Oe,this.defaultPrevented=!1}l2.prototype.s=!1,l2.prototype.ma=function(){this.s||(this.s=!0,this.N())},l2.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},sh.prototype.h=function(){this.defaultPrevented=!0};var B4=function(){if(!ve.addEventListener||!Object.defineProperty)return!1;var K=!1,Oe=Object.defineProperty({},"passive",{get:function(){K=!0}});try{const ut=()=>{};ve.addEventListener("test",ut,Oe),ve.removeEventListener("test",ut,Oe)}catch{}return K}();function Wp(K,Oe){if(sh.call(this,K?K.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,K){var ut=this.type=K.type,an=K.changedTouches&&K.changedTouches.length?K.changedTouches[0]:null;if(this.target=K.target||K.srcElement,this.g=Oe,Oe=K.relatedTarget){if(Pl){e:{try{Aa(Oe.nodeName);var $i=!0;break e}catch{}$i=!1}$i||(Oe=null)}}else"mouseover"==ut?Oe=K.fromElement:"mouseout"==ut&&(Oe=K.toElement);this.relatedTarget=Oe,an?(this.clientX=void 0!==an.clientX?an.clientX:an.pageX,this.clientY=void 0!==an.clientY?an.clientY:an.pageY,this.screenX=an.screenX||0,this.screenY=an.screenY||0):(this.clientX=void 0!==K.clientX?K.clientX:K.pageX,this.clientY=void 0!==K.clientY?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0),this.button=K.button,this.key=K.key||"",this.ctrlKey=K.ctrlKey,this.altKey=K.altKey,this.shiftKey=K.shiftKey,this.metaKey=K.metaKey,this.pointerId=K.pointerId||0,this.pointerType="string"==typeof K.pointerType?K.pointerType:wv[K.pointerType]||"",this.state=K.state,this.i=K,K.defaultPrevented&&Wp.aa.h.call(this)}}Zo(Wp,sh);var wv={2:"touch",3:"pen",4:"mouse"};Wp.prototype.h=function(){Wp.aa.h.call(this);var K=this.i;K.preventDefault?K.preventDefault():K.returnValue=!1};var lg="closure_listenable_"+(1e6*Math.random()|0),cg=0;function xv(K,Oe,ut,an,$i){this.listener=K,this.proxy=null,this.src=Oe,this.type=ut,this.capture=!!an,this.ha=$i,this.key=++cg,this.da=this.fa=!1}function Fg(K){K.da=!0,K.listener=null,K.proxy=null,K.src=null,K.ha=null}function Vg(K){this.src=K,this.g={},this.h=0}function p4(K,Oe){var ut=Oe.type;if(ut in K.g){var Do,an=K.g[ut],$i=Array.prototype.indexOf.call(an,Oe,void 0);(Do=0<=$i)&&Array.prototype.splice.call(an,$i,1),Do&&(Fg(Oe),0==K.g[ut].length&&(delete K.g[ut],K.h--))}}function f4(K,Oe,ut,an){for(var $i=0;$i<K.length;++$i){var Do=K[$i];if(!Do.da&&Do.listener==Oe&&Do.capture==!!ut&&Do.ha==an)return $i}return-1}Vg.prototype.add=function(K,Oe,ut,an,$i){var Do=K.toString();(K=this.g[Do])||(K=this.g[Do]=[],this.h++);var Ar=f4(K,Oe,an,$i);return-1<Ar?(Oe=K[Ar],ut||(Oe.fa=!1)):((Oe=new xv(Oe,this.src,Do,!!an,$i)).fa=ut,K.push(Oe)),Oe};var W2="closure_lm_"+(1e6*Math.random()|0),c2={};function Sm(K,Oe,ut,an,$i){if(an&&an.once)return jg(K,Oe,ut,an,$i);if(Array.isArray(Oe)){for(var Do=0;Do<Oe.length;Do++)Sm(K,Oe[Do],ut,an,$i);return null}return ut=u2(ut),K&&K[lg]?K.K(Oe,ut,st(an)?!!an.capture:!!an,$i):Tm(K,Oe,ut,!1,an,$i)}function Tm(K,Oe,ut,an,$i,Do){if(!Oe)throw Error("Invalid event type");var Ar=st($i)?!!$i.capture:!!$i,kl=u0(K);if(kl||(K[W2]=kl=new Vg(K)),(ut=kl.add(Oe,ut,an,Ar,Do)).proxy)return ut;if(an=function $g(){const Oe=q2;return function K(ut){return Oe.call(K.src,K.listener,ut)}}(),ut.proxy=an,an.src=K,an.listener=ut,K.addEventListener)B4||($i=Ar),void 0===$i&&($i=!1),K.addEventListener(Oe.toString(),an,$i);else if(K.attachEvent)K.attachEvent(Hg(Oe.toString()),an);else{if(!K.addListener||!K.removeListener)throw Error("addEventListener and attachEvent are unavailable.");K.addListener(an)}return ut}function jg(K,Oe,ut,an,$i){if(Array.isArray(Oe)){for(var Do=0;Do<Oe.length;Do++)jg(K,Oe[Do],ut,an,$i);return null}return ut=u2(ut),K&&K[lg]?K.L(Oe,ut,st(an)?!!an.capture:!!an,$i):Tm(K,Oe,ut,!0,an,$i)}function m4(K,Oe,ut,an,$i){if(Array.isArray(Oe))for(var Do=0;Do<Oe.length;Do++)m4(K,Oe[Do],ut,an,$i);else an=st(an)?!!an.capture:!!an,ut=u2(ut),K&&K[lg]?(K=K.i,(Oe=String(Oe).toString())in K.g&&-1<(ut=f4(Do=K.g[Oe],ut,an,$i))&&(Fg(Do[ut]),Array.prototype.splice.call(Do,ut,1),0==Do.length&&(delete K.g[Oe],K.h--))):K&&(K=u0(K))&&(Oe=K.g[Oe.toString()],K=-1,Oe&&(K=f4(Oe,ut,an,$i)),(ut=-1<K?Oe[K]:null)&&Ug(ut))}function Ug(K){if("number"!=typeof K&&K&&!K.da){var Oe=K.src;if(Oe&&Oe[lg])p4(Oe.i,K);else{var ut=K.type,an=K.proxy;Oe.removeEventListener?Oe.removeEventListener(ut,an,K.capture):Oe.detachEvent?Oe.detachEvent(Hg(ut),an):Oe.addListener&&Oe.removeListener&&Oe.removeListener(an),(ut=u0(Oe))?(p4(ut,K),0==ut.h&&(ut.src=null,Oe[W2]=null)):Fg(K)}}}function Hg(K){return K in c2?c2[K]:c2[K]="on"+K}function q2(K,Oe){if(K.da)K=!0;else{Oe=new Wp(Oe,this);var ut=K.listener,an=K.ha||K.src;K.fa&&Ug(K),K=ut.call(an,Oe)}return K}function u0(K){return(K=K[W2])instanceof Vg?K:null}var jh="__closure_events_fn_"+(1e9*Math.random()>>>0);function u2(K){return"function"==typeof K?K:(K[jh]||(K[jh]=function(Oe){return K.handleEvent(Oe)}),K[jh])}function Da(){l2.call(this),this.i=new Vg(this),this.M=this,this.F=null}function ah(K,Oe){var ut,an=K.F;if(an)for(ut=[];an;an=an.F)ut.push(an);if(K=K.M,an=Oe.type||Oe,"string"==typeof Oe)Oe=new sh(Oe,K);else if(Oe instanceof sh)Oe.target=Oe.target||K;else{var $i=Oe;Bi(Oe=new sh(an,K),$i)}if($i=!0,ut)for(var Do=ut.length-1;0<=Do;Do--){var Ar=Oe.g=ut[Do];$i=ug(Ar,an,!0,Oe)&&$i}if($i=ug(Ar=Oe.g=K,an,!0,Oe)&&$i,$i=ug(Ar,an,!1,Oe)&&$i,ut)for(Do=0;Do<ut.length;Do++)$i=ug(Ar=Oe.g=ut[Do],an,!1,Oe)&&$i}function ug(K,Oe,ut,an){if(!(Oe=K.i.g[String(Oe)]))return!0;Oe=Oe.concat();for(var $i=!0,Do=0;Do<Oe.length;++Do){var Ar=Oe[Do];if(Ar&&!Ar.da&&Ar.capture==ut){var kl=Ar.listener,nd=Ar.ha||Ar.src;Ar.fa&&p4(K.i,Ar),$i=!1!==kl.call(nd,an)&&$i}}return $i&&!an.defaultPrevented}function g4(K,Oe,ut){if("function"==typeof K)ut&&(K=hi(K,ut));else{if(!K||"function"!=typeof K.handleEvent)throw Error("Invalid listener argument");K=hi(K.handleEvent,K)}return 2147483647<Number(Oe)?-1:ve.setTimeout(K,Oe||0)}function q1(K){K.g=g4(()=>{K.g=null,K.i&&(K.i=!1,q1(K))},K.l);const Oe=K.h;K.h=null,K.m.apply(null,Oe)}Zo(Da,l2),Da.prototype[lg]=!0,Da.prototype.removeEventListener=function(K,Oe,ut,an){m4(this,K,Oe,ut,an)},Da.prototype.N=function(){if(Da.aa.N.call(this),this.i){var Oe,K=this.i;for(Oe in K.g){for(var ut=K.g[Oe],an=0;an<ut.length;an++)Fg(ut[an]);delete K.g[Oe],K.h--}}this.F=null},Da.prototype.K=function(K,Oe,ut,an){return this.i.add(String(K),Oe,!1,ut,an)},Da.prototype.L=function(K,Oe,ut,an){return this.i.add(String(K),Oe,!0,ut,an)};class d2 extends l2{constructor(Oe,ut){super(),this.m=Oe,this.l=ut,this.h=null,this.i=!1,this.g=null}j(Oe){this.h=arguments,this.g?this.i=!0:q1(this)}N(){super.N(),this.g&&(ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mm(K){l2.call(this),this.h=K,this.g={}}Zo(Mm,l2);var Am=[];function Dm(K){qa(K.g,function(Oe,ut){this.g.hasOwnProperty(ut)&&Ug(Oe)},K),K.g={}}Mm.prototype.N=function(){Mm.aa.N.call(this),Dm(this)},Mm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pm=ve.JSON.stringify,N4=ve.JSON.parse,X2=class{stringify(K){return ve.JSON.stringify(K,void 0)}parse(K){return ve.JSON.parse(K,void 0)}};function Rm(){}function dg(){}Rm.prototype.h=null;var Mf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function K2(){sh.call(this,"d")}function qp(){sh.call(this,"c")}Zo(K2,sh),Zo(qp,sh);var Xp={},h2=null;function zm(){return h2=h2||new Da}function hg(K){sh.call(this,Xp.La,K)}function p2(K){const Oe=zm();ah(Oe,new hg(Oe))}function Af(K,Oe){sh.call(this,Xp.STAT_EVENT,K),this.stat=Oe}function jd(K){const Oe=zm();ah(Oe,new Af(Oe,K))}function pg(K,Oe){sh.call(this,Xp.Ma,K),this.size=Oe}function xu(K,Oe){if("function"!=typeof K)throw Error("Fn must not be null and must be a function");return ve.setTimeout(function(){K()},Oe)}function d0(){this.g=!0}function B(K,Oe,ut,an){K.info(function(){return"XMLHTTP TEXT ("+Oe+"): "+function k(K,Oe){if(!K.g)return Oe;if(!Oe)return null;try{var ut=JSON.parse(Oe);if(ut)for(K=0;K<ut.length;K++)if(Array.isArray(ut[K])){var an=ut[K];if(!(2>an.length)){var $i=an[1];if(Array.isArray($i)&&!(1>$i.length)){var Do=$i[0];if("noop"!=Do&&"stop"!=Do&&"close"!=Do)for(var Ar=1;Ar<$i.length;Ar++)$i[Ar]=""}}}return Pm(ut)}catch{return Oe}}(K,ut)+(an?" "+an:"")})}Xp.La="serverreachability",Zo(hg,sh),Xp.STAT_EVENT="statevent",Zo(Af,sh),Xp.Ma="timingevent",Zo(pg,sh),d0.prototype.xa=function(){this.g=!1},d0.prototype.info=function(){};var ce,D={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},q={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function dt(K,Oe,ut,an){this.j=K,this.i=Oe,this.l=ut,this.R=an||1,this.U=new Mm(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vt}function Vt(){this.i=null,this.g="",this.h=!1}Zo(De,Rm),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},ce=new De;var bn={},fi={};function xi(K,Oe,ut){K.L=1,K.v=gp(Nu(Oe)),K.m=ut,K.P=!0,to(K,null)}function to(K,Oe){K.F=Date.now(),zo(K),K.A=Nu(K.v);var ut=K.A,an=K.R;Array.isArray(an)||(an=[String(an)]),$4(ut.i,"t",an),K.C=0,ut=K.j.J,K.h=new Vt,K.g=Y1(K.j,ut?Oe:null,!K.m),0<K.O&&(K.M=new d2(hi(K.Y,K,K.g),K.O)),Oe=K.U,ut=K.g,an=K.ca;var $i="readystatechange";Array.isArray($i)||($i&&(Am[0]=$i.toString()),$i=Am);for(var Do=0;Do<$i.length;Do++){var Ar=Sm(ut,$i[Do],an||Oe.handleEvent,!1,Oe.h||Oe);if(!Ar)break;Oe.g[Ar.key]=Ar}Oe=K.H?ti(K.H):{},K.m?(K.u||(K.u="POST"),Oe["Content-Type"]="application/x-www-form-urlencoded",K.g.ea(K.A,K.u,K.m,Oe)):(K.u="GET",K.g.ea(K.A,K.u,null,Oe)),p2(),function Om(K,Oe,ut,an,$i,Do){K.info(function(){if(K.g)if(Do)for(var Ar="",kl=Do.split("&"),nd=0;nd<kl.length;nd++){var tl=kl[nd].split("=");if(1<tl.length){var id=tl[0];tl=tl[1];var Hd=id.split("_");Ar=2<=Hd.length&&"type"==Hd[1]?Ar+(id+"=")+tl+"&":Ar+(id+"=redacted&")}}else Ar=null;else Ar=Do;return"XMLHTTP REQ ("+an+") [attempt "+$i+"]: "+Oe+"\n"+ut+"\n"+Ar})}(K.i,K.u,K.A,K.l,K.R,K.m)}function Vi(K){return!!K.g&&"GET"==K.u&&2!=K.L&&K.j.Ca}function xo(K,Oe){var ut=K.C,an=Oe.indexOf("\n",ut);return-1==an?fi:(ut=Number(Oe.substring(ut,an)),isNaN(ut)?bn:(an+=1)+ut>Oe.length?fi:(Oe=Oe.slice(an,an+ut),K.C=an+ut,Oe))}function zo(K){K.S=Date.now()+K.I,yr(K,K.I)}function yr(K,Oe){if(null!=K.B)throw Error("WatchDog timer not null");K.B=xu(hi(K.ba,K),Oe)}function as(K){K.B&&(ve.clearTimeout(K.B),K.B=null)}function _s(K){0==K.j.G||K.J||Zg(K.j,K)}function Ur(K){as(K);var Oe=K.M;Oe&&"function"==typeof Oe.ma&&Oe.ma(),K.M=null,Dm(K.U),K.g&&(Oe=K.g,K.g=null,Oe.abort(),Oe.ma())}function ws(K,Oe){try{var ut=K.j;if(0!=ut.G&&(ut.g==K||Rl(ut.h,K)))if(!K.K&&Rl(ut.h,K)&&3==ut.G){try{var an=ut.Da.g.parse(Oe)}catch{an=null}if(Array.isArray(an)&&3==an.length){var $i=an;if(0==$i[0]){e:if(!ut.u){if(ut.g){if(!(ut.g.F+3e3<K.F))break e;Qp(ut),H4(ut)}y4(ut),jd(18)}}else ut.za=$i[1],0<ut.za-ut.T&&37500>$i[2]&&ut.F&&0==ut.v&&!ut.C&&(ut.C=xu(hi(ut.Za,ut),6e3));if(1>=Cc(ut.h)&&ut.ca){try{ut.ca()}catch{}ut.ca=void 0}}else Vu(ut,11)}else if((K.K||ut.g==K)&&Qp(ut),!zs(Oe))for($i=ut.Da.g.parse(Oe),Oe=0;Oe<$i.length;Oe++){let tl=$i[Oe];if(ut.T=tl[0],tl=tl[1],2==ut.G)if("c"==tl[0]){ut.K=tl[1],ut.ia=tl[2];const id=tl[3];null!=id&&(ut.la=id,ut.j.info("VER="+ut.la));const Hd=tl[4];null!=Hd&&(ut.Aa=Hd,ut.j.info("SVER="+ut.Aa));const nm=tl[5];null!=nm&&"number"==typeof nm&&0<nm&&(ut.L=an=1.5*nm,ut.j.info("backChannelRequestTimeoutMs_="+an)),an=ut;const Uh=K.g;if(Uh){const im=Uh.g?Uh.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(im){var Do=an.h;Do.g||-1==im.indexOf("spdy")&&-1==im.indexOf("quic")&&-1==im.indexOf("h2")||(Do.j=Do.l,Do.g=new Set,Do.h&&(Ql(Do,Do.h),Do.h=null))}if(an.D){const om=Uh.g?Uh.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(an.ya=om,Cl(an.I,an.D,om))}}ut.G=3,ut.l&&ut.l.ua(),ut.ba&&(ut.R=Date.now()-K.F,ut.j.info("Handshake RTT: "+ut.R+"ms"));var Ar=K;if((an=ut).qa=tm(an,an.J?an.ia:null,an.W),Ar.K){Is(an.h,Ar);var kl=Ar,nd=an.L;nd&&(kl.I=nd),kl.B&&(as(kl),zo(kl)),an.g=Ar}else Dv(an);0<ut.i.length&&Fm(ut)}else"stop"!=tl[0]&&"close"!=tl[0]||Vu(ut,7);else 3==ut.G&&("stop"==tl[0]||"close"==tl[0]?"stop"==tl[0]?Vu(ut,7):em(ut):"noop"!=tl[0]&&ut.l&&ut.l.ta(tl),ut.v=0)}p2()}catch{}}dt.prototype.ca=function(K){K=K.target;const Oe=this.M;Oe&&3==K1(K)?Oe.j():this.Y(K)},dt.prototype.Y=function(K){try{if(K==this.g)e:{const Hd=K1(this.g);var Oe=this.g.Ba();if(this.g.Z(),!(3>Hd)&&(3!=Hd||this.g&&(this.h.h||this.g.oa()||Kg(this.g)))){this.J||4!=Hd||7==Oe||p2(),as(this);var ut=this.g.Z();this.X=ut;t:if(Vi(this)){var an=Kg(this.g);K="";var $i=an.length,Do=4==K1(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),_s(this);var Ar="";break t}this.h.i=new ve.TextDecoder}for(Oe=0;Oe<$i;Oe++)this.h.h=!0,K+=this.h.i.decode(an[Oe],{stream:!(Do&&Oe==$i-1)});an.length=0,this.h.g+=K,this.C=0,Ar=this.h.g}else Ar=this.g.oa();if(this.o=200==ut,function Lm(K,Oe,ut,an,$i,Do,Ar){K.info(function(){return"XMLHTTP RESP ("+an+") [ attempt "+$i+"]: "+Oe+"\n"+ut+"\n"+Do+" "+Ar})}(this.i,this.u,this.A,this.l,this.R,Hd,ut),this.o){if(this.T&&!this.K){t:{if(this.g){var kl,nd=this.g;if((kl=nd.g?nd.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zs(kl)){var tl=kl;break t}}tl=null}if(!(ut=tl)){this.o=!1,this.s=3,jd(12),Ur(this),_s(this);break e}B(this.i,this.l,ut,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ws(this,ut)}if(this.P){let Uh;for(ut=!0;!this.J&&this.C<Ar.length;){if(Uh=xo(this,Ar),Uh==fi){4==Hd&&(this.s=4,jd(14),ut=!1),B(this.i,this.l,null,"[Incomplete Response]");break}if(Uh==bn){this.s=4,jd(15),B(this.i,this.l,Ar,"[Invalid Chunk]"),ut=!1;break}B(this.i,this.l,Uh,null),ws(this,Uh)}if(Vi(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Hd||0!=Ar.length||this.h.h||(this.s=1,jd(16),ut=!1),this.o=this.o&&ut,ut){if(0<Ar.length&&!this.W){this.W=!0;var id=this.j;id.g==this&&id.ba&&!id.M&&(id.j.info("Great, no buffering proxy detected. Bytes received: "+Ar.length),Yg(id),id.M=!0,jd(11))}}else B(this.i,this.l,Ar,"[Invalid Chunked Response]"),Ur(this),_s(this)}else B(this.i,this.l,Ar,null),ws(this,Ar);4==Hd&&Ur(this),this.o&&!this.J&&(4==Hd?Zg(this.j,this):(this.o=!1,zo(this)))}else(function Mv(K){const Oe={};K=(K.g&&2<=K1(K)&&K.g.getAllResponseHeaders()||"").split("\r\n");for(let an=0;an<K.length;an++){if(zs(K[an]))continue;var ut=Ui(K[an]);const $i=ut[0];if("string"!=typeof(ut=ut[1]))continue;ut=ut.trim();const Do=Oe[$i]||[];Oe[$i]=Do,Do.push(ut)}!function zi(K,Oe){for(const ut in K)Oe.call(void 0,K[ut],ut,K)}(Oe,function(an){return an.join(", ")})})(this.g),400==ut&&0<Ar.indexOf("Unknown SID")?(this.s=3,jd(12)):(this.s=0,jd(13)),Ur(this),_s(this)}}}catch{}},dt.prototype.cancel=function(){this.J=!0,Ur(this)},dt.prototype.ba=function(){this.B=null;const K=Date.now();0<=K-this.S?(function _(K,Oe){K.info(function(){return"TIMEOUT: "+Oe})}(this.i,this.A),2!=this.L&&(p2(),jd(17)),Ur(this),this.s=2,_s(this)):yr(this,this.S-K)};var xs=class{constructor(K,Oe){this.g=K,this.map=Oe}};function Vs(K){this.l=K||10,K=ve.PerformanceNavigationTiming?0<(K=ve.performance.getEntriesByType("navigation")).length&&("hq"==K[0].nextHopProtocol||"h2"==K[0].nextHopProtocol):!!(ve.chrome&&ve.chrome.loadTimes&&ve.chrome.loadTimes()&&ve.chrome.loadTimes().wasFetchedViaSpdy),this.j=K?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fl(K){return!!K.h||!!K.g&&K.g.size>=K.j}function Cc(K){return K.h?1:K.g?K.g.size:0}function Rl(K,Oe){return K.h?K.h==Oe:!!K.g&&K.g.has(Oe)}function Ql(K,Oe){K.g?K.g.add(Oe):K.h=Oe}function Is(K,Oe){K.h&&K.h==Oe?K.h=null:K.g&&K.g.has(Oe)&&K.g.delete(Oe)}function Lu(K){if(null!=K.h)return K.i.concat(K.h.D);if(null!=K.g&&0!==K.g.size){let Oe=K.i;for(const ut of K.g.values())Oe=Oe.concat(ut.D);return Oe}return br(K.i)}function Bu(K,Oe){if(K.forEach&&"function"==typeof K.forEach)K.forEach(Oe,void 0);else if(Re(K)||"string"==typeof K)Array.prototype.forEach.call(K,Oe,void 0);else for(var ut=function Ud(K){if(K.na&&"function"==typeof K.na)return K.na();if(!K.V||"function"!=typeof K.V){if(typeof Map<"u"&&K instanceof Map)return Array.from(K.keys());if(!(typeof Set<"u"&&K instanceof Set)){if(Re(K)||"string"==typeof K){var Oe=[];K=K.length;for(var ut=0;ut<K;ut++)Oe.push(ut);return Oe}Oe=[],ut=0;for(const an in K)Oe[ut++]=an;return Oe}}}(K),an=function ed(K){if(K.V&&"function"==typeof K.V)return K.V();if(typeof Map<"u"&&K instanceof Map||typeof Set<"u"&&K instanceof Set)return Array.from(K.values());if("string"==typeof K)return K.split("");if(Re(K)){for(var Oe=[],ut=K.length,an=0;an<ut;an++)Oe.push(K[an]);return Oe}for(an in Oe=[],ut=0,K)Oe[ut++]=K[an];return Oe}(K),$i=an.length,Do=0;Do<$i;Do++)Oe.call(void 0,an[Do],ut&&ut[Do],K)}Vs.prototype.cancel=function(){if(this.i=Lu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const K of this.g.values())K.cancel();this.g.clear()}};var td=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mc(K){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,K instanceof Mc){this.h=K.h,kc(this,K.j),this.o=K.o,this.g=K.g,Fu(this,K.s),this.l=K.l;var Oe=K.i,ut=new Z2;ut.i=Oe.i,Oe.g&&(ut.g=new Map(Oe.g),ut.h=Oe.h),f2(this,ut),this.m=K.m}else K&&(Oe=String(K).match(td))?(this.h=!1,kc(this,Oe[1]||"",!0),this.o=Df(Oe[2]||""),this.g=Df(Oe[3]||"",!0),Fu(this,Oe[4]),this.l=Df(Oe[5]||"",!0),f2(this,Oe[6]||"",!0),this.m=Df(Oe[7]||"")):(this.h=!1,this.i=new Z2(null,this.h))}function Nu(K){return new Mc(K)}function kc(K,Oe,ut){K.j=ut?Df(Oe,!0):Oe,K.j&&(K.j=K.j.replace(/:$/,""))}function Fu(K,Oe){if(Oe){if(Oe=Number(Oe),isNaN(Oe)||0>Oe)throw Error("Bad port number "+Oe);K.s=Oe}else K.s=null}function f2(K,Oe,ut){Oe instanceof Z2?(K.i=Oe,function j4(K,Oe){Oe&&!K.j&&(Kp(K),K.i=null,K.g.forEach(function(ut,an){var $i=an.toLowerCase();an!=$i&&(F4(this,an),$4(this,$i,ut))},K)),K.j=Oe}(K.i,K.h)):(ut||(Oe=h0(Oe,qg)),K.i=new Z2(Oe,K.h))}function Cl(K,Oe,ut){K.i.set(Oe,ut)}function gp(K){return Cl(K,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),K}function Df(K,Oe){return K?Oe?decodeURI(K.replace(/%25/g,"%2525")):decodeURIComponent(K):""}function h0(K,Oe,ut){return"string"==typeof K?(K=encodeURI(K).replace(Oe,Wg),ut&&(K=K.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K):null}function Wg(K){return"%"+((K=K.charCodeAt(0))>>4&15).toString(16)+(15&K).toString(16)}Mc.prototype.toString=function(){var K=[],Oe=this.j;Oe&&K.push(h0(Oe,Bm,!0),":");var ut=this.g;return(ut||"file"==Oe)&&(K.push("//"),(Oe=this.o)&&K.push(h0(Oe,Bm,!0),"@"),K.push(encodeURIComponent(String(ut)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(ut=this.s)&&K.push(":",String(ut))),(ut=this.l)&&(this.g&&"/"!=ut.charAt(0)&&K.push("/"),K.push(h0(ut,"/"==ut.charAt(0)?Iv:Y2,!0))),(ut=this.i.toString())&&K.push("?",ut),(ut=this.m)&&K.push("#",h0(ut,Ev)),K.join("")};var Bm=/[#\/\?@]/g,Y2=/[#\?:]/g,Iv=/[#\?]/g,qg=/[#\?@]/g,Ev=/#/g;function Z2(K,Oe){this.h=this.g=null,this.i=K||null,this.j=!!Oe}function Kp(K){K.g||(K.g=new Map,K.h=0,K.i&&function lh(K,Oe){if(K){K=K.split("&");for(var ut=0;ut<K.length;ut++){var an=K[ut].indexOf("="),$i=null;if(0<=an){var Do=K[ut].substring(0,an);$i=K[ut].substring(an+1)}else Do=K[ut];Oe(Do,$i?decodeURIComponent($i.replace(/\+/g," ")):"")}}}(K.i,function(Oe,ut){K.add(decodeURIComponent(Oe.replace(/\+/g," ")),ut)}))}function F4(K,Oe){Kp(K),Oe=Yp(K,Oe),K.g.has(Oe)&&(K.i=null,K.h-=K.g.get(Oe).length,K.g.delete(Oe))}function V4(K,Oe){return Kp(K),Oe=Yp(K,Oe),K.g.has(Oe)}function $4(K,Oe,ut){F4(K,Oe),0<ut.length&&(K.i=null,K.g.set(Yp(K,Oe),br(ut)),K.h+=ut.length)}function Yp(K,Oe){return Oe=String(Oe),K.j&&(Oe=Oe.toLowerCase()),Oe}function Pf(K,Oe,ut,an,$i){try{$i&&($i.onload=null,$i.onerror=null,$i.onabort=null,$i.ontimeout=null),an(ut)}catch{}}function d6(){this.g=new X2}function Nm(K,Oe,ut){const an=ut||"";try{Bu(K,function($i,Do){let Ar=$i;st($i)&&(Ar=Pm($i)),Oe.push(an+Do+"="+encodeURIComponent(Ar))})}catch($i){throw Oe.push(an+"type="+encodeURIComponent("_badmap")),$i}}function X1(K){this.l=K.Ub||null,this.j=K.eb||!1}function Xg(K,Oe){Da.call(this),this.D=K,this.o=Oe,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function U4(K){K.j.read().then(K.Pa.bind(K)).catch(K.ga.bind(K))}function Q2(K){K.readyState=4,K.l=null,K.j=null,K.v=null,m2(K)}function m2(K){K.onreadystatechange&&K.onreadystatechange.call(K)}function kv(K){let Oe="";return qa(K,function(ut,an){Oe+=an,Oe+=":",Oe+=ut,Oe+="\r\n"}),Oe}function v4(K,Oe,ut){e:{for(an in ut){var an=!1;break e}an=!0}an||(ut=kv(ut),"string"==typeof K?null!=ut&&encodeURIComponent(String(ut)):Cl(K,Oe,ut))}function Ac(K){Da.call(this),this.headers=new Map,this.o=K||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(S=Z2.prototype).add=function(K,Oe){Kp(this),this.i=null,K=Yp(this,K);var ut=this.g.get(K);return ut||this.g.set(K,ut=[]),ut.push(Oe),this.h+=1,this},S.forEach=function(K,Oe){Kp(this),this.g.forEach(function(ut,an){ut.forEach(function($i){K.call(Oe,$i,an,this)},this)},this)},S.na=function(){Kp(this);const K=Array.from(this.g.values()),Oe=Array.from(this.g.keys()),ut=[];for(let an=0;an<Oe.length;an++){const $i=K[an];for(let Do=0;Do<$i.length;Do++)ut.push(Oe[an])}return ut},S.V=function(K){Kp(this);let Oe=[];if("string"==typeof K)V4(this,K)&&(Oe=Oe.concat(this.g.get(Yp(this,K))));else{K=Array.from(this.g.values());for(let ut=0;ut<K.length;ut++)Oe=Oe.concat(K[ut])}return Oe},S.set=function(K,Oe){return Kp(this),this.i=null,V4(this,K=Yp(this,K))&&(this.h-=this.g.get(K).length),this.g.set(K,[Oe]),this.h+=1,this},S.get=function(K,Oe){return K&&0<(K=this.V(K)).length?String(K[0]):Oe},S.toString=function(){if(this.i)return this.i;if(!this.g)return"";const K=[],Oe=Array.from(this.g.keys());for(var ut=0;ut<Oe.length;ut++){var an=Oe[ut];const Do=encodeURIComponent(String(an)),Ar=this.V(an);for(an=0;an<Ar.length;an++){var $i=Do;""!==Ar[an]&&($i+="="+encodeURIComponent(String(Ar[an]))),K.push($i)}}return this.i=K.join("&")},Zo(X1,Rm),X1.prototype.g=function(){return new Xg(this.l,this.j)},X1.prototype.i=function(K){return function(){return K}}({}),Zo(Xg,Da),(S=Xg.prototype).open=function(K,Oe){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=K,this.A=Oe,this.readyState=1,m2(this)},S.send=function(K){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Oe={headers:this.u,method:this.B,credentials:this.m,cache:void 0};K&&(Oe.body=K),(this.D||ve).fetch(new Request(this.A,Oe)).then(this.Sa.bind(this),this.ga.bind(this))},S.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Q2(this)),this.readyState=0},S.Sa=function(K){if(this.g&&(this.l=K,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=K.headers,this.readyState=2,m2(this)),this.g&&(this.readyState=3,m2(this),this.g)))if("arraybuffer"===this.responseType)K.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof ve.ReadableStream<"u"&&"body"in K){if(this.j=K.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;U4(this)}else K.text().then(this.Ra.bind(this),this.ga.bind(this))},S.Pa=function(K){if(this.g){if(this.o&&K.value)this.response.push(K.value);else if(!this.o){var Oe=K.value?K.value:new Uint8Array(0);(Oe=this.v.decode(Oe,{stream:!K.done}))&&(this.response=this.responseText+=Oe)}K.done?Q2(this):m2(this),3==this.readyState&&U4(this)}},S.Ra=function(K){this.g&&(this.response=this.responseText=K,Q2(this))},S.Qa=function(K){this.g&&(this.response=K,Q2(this))},S.ga=function(){this.g&&Q2(this)},S.setRequestHeader=function(K,Oe){this.u.append(K,Oe)},S.getResponseHeader=function(K){return this.h&&this.h.get(K.toLowerCase())||""},S.getAllResponseHeaders=function(){if(!this.h)return"";const K=[],Oe=this.h.entries();for(var ut=Oe.next();!ut.done;)K.push((ut=ut.value)[0]+": "+ut[1]),ut=Oe.next();return K.join("\r\n")},Object.defineProperty(Xg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(K){this.m=K?"include":"same-origin"}}),Zo(Ac,Da);var Sv=/^https?$/i,s3=["POST","PUT"];function g2(K,Oe){K.h=!1,K.g&&(K.j=!0,K.g.abort(),K.j=!1),K.l=Oe,K.m=5,Tv(K),p0(K)}function Tv(K){K.A||(K.A=!0,ah(K,"complete"),ah(K,"error"))}function fg(K){if(K.h&&typeof J<"u"&&(!K.v[1]||4!=K1(K)||2!=K.Z()))if(K.u&&4==K1(K))g4(K.Ea,0,K);else if(ah(K,"readystatechange"),4==K1(K)){K.h=!1;try{const Ar=K.Z();e:switch(Ar){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Oe=!0;break e;default:Oe=!1}var ut;if(!(ut=Oe)){var an;if(an=0===Ar){var $i=String(K.D).match(td)[1]||null;!$i&&ve.self&&ve.self.location&&($i=ve.self.location.protocol.slice(0,-1)),an=!Sv.test($i?$i.toLowerCase():"")}ut=an}if(ut)ah(K,"complete"),ah(K,"success");else{K.m=6;try{var Do=2<K1(K)?K.g.statusText:""}catch{Do=""}K.l=Do+" ["+K.Z()+"]",Tv(K)}}finally{p0(K)}}}function p0(K,Oe){if(K.g){J2(K);const ut=K.g,an=K.v[0]?()=>{}:null;K.g=null,K.v=null,Oe||ah(K,"ready");try{ut.onreadystatechange=an}catch{}}}function J2(K){K.I&&(ve.clearTimeout(K.I),K.I=null)}function K1(K){return K.g?K.g.readyState:0}function Kg(K){try{if(!K.g)return null;if("response"in K.g)return K.g.response;switch(K.H){case"":case"text":return K.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in K.g)return K.g.mozResponseArrayBuffer}return null}catch{return null}}function mg(K,Oe,ut){return ut&&ut.internalChannelParams&&ut.internalChannelParams[K]||Oe}function Rf(K){this.Aa=0,this.i=[],this.j=new d0,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mg("failFast",!1,K),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mg("baseRetryDelayMs",5e3,K),this.cb=mg("retryDelaySeedMs",1e4,K),this.Wa=mg("forwardChannelMaxRetries",2,K),this.wa=mg("forwardChannelRequestTimeoutMs",2e4,K),this.pa=K&&K.xmlHttpFactory||void 0,this.Xa=K&&K.Tb||void 0,this.Ca=K&&K.useFetchStreams||!1,this.L=void 0,this.J=K&&K.supportsCrossDomainXhr||!1,this.K="",this.h=new Vs(K&&K.concurrentRequestLimit),this.Da=new d6,this.P=K&&K.fastHandshake||!1,this.O=K&&K.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=K&&K.Rb||!1,K&&K.xa&&this.j.xa(),K&&K.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&K&&K.detectBufferingProxy||!1,this.ja=void 0,K&&K.longPollingTimeout&&0<K.longPollingTimeout&&(this.ja=K.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function em(K){if(_4(K),3==K.G){var Oe=K.U++,ut=Nu(K.I);if(Cl(ut,"SID",K.K),Cl(ut,"RID",Oe),Cl(ut,"TYPE","terminate"),Vm(K,ut),(Oe=new dt(K,K.j,Oe)).L=2,Oe.v=gp(Nu(ut)),ut=!1,ve.navigator&&ve.navigator.sendBeacon)try{ut=ve.navigator.sendBeacon(Oe.v.toString(),"")}catch{}!ut&&ve.Image&&((new Image).src=Oe.v,ut=!0),ut||(Oe.g=Y1(Oe.j,null),Oe.g.ea(Oe.v)),Oe.F=Date.now(),zo(Oe)}vg(K)}function H4(K){K.g&&(Yg(K),K.g.cancel(),K.g=null)}function _4(K){H4(K),K.u&&(ve.clearTimeout(K.u),K.u=null),Qp(K),K.h.cancel(),K.s&&("number"==typeof K.s&&ve.clearTimeout(K.s),K.s=null)}function Fm(K){if(!fl(K.h)&&!K.s){K.s=!0;var Oe=K.Ga;ag||h4(),km||(ag(),km=!0),Ng.add(Oe,K),K.B=0}}function gg(K,Oe){var ut;ut=Oe?Oe.l:K.U++;const an=Nu(K.I);Cl(an,"SID",K.K),Cl(an,"RID",ut),Cl(an,"AID",K.T),Vm(K,an),K.m&&K.o&&v4(an,K.m,K.o),ut=new dt(K,K.j,ut,K.B+1),null===K.m&&(ut.H=K.o),Oe&&(K.i=Oe.D.concat(K.i)),Oe=Zp(K,ut,1e3),ut.I=Math.round(.5*K.wa)+Math.round(.5*K.wa*Math.random()),Ql(K.h,ut),xi(ut,an,Oe)}function Vm(K,Oe){K.H&&qa(K.H,function(ut,an){Cl(Oe,an,ut)}),K.l&&Bu({},function(ut,an){Cl(Oe,an,ut)})}function Zp(K,Oe,ut){ut=Math.min(K.i.length,ut);var an=K.l?hi(K.l.Na,K.l,K):null;e:{var $i=K.i;let Do=-1;for(;;){const Ar=["count="+ut];-1==Do?0<ut?(Do=$i[0].g,Ar.push("ofs="+Do)):Do=0:Ar.push("ofs="+Do);let kl=!0;for(let nd=0;nd<ut;nd++){let tl=$i[nd].g;const id=$i[nd].map;if(tl-=Do,0>tl)Do=Math.max(0,$i[nd].g-100),kl=!1;else try{Nm(id,Ar,"req"+tl+"_")}catch{an&&an(id)}}if(kl){an=Ar.join("&");break e}}}return K=K.i.splice(0,ut),Oe.D=K,an}function Dv(K){if(!K.g&&!K.u){K.Y=1;var Oe=K.Fa;ag||h4(),km||(ag(),km=!0),Ng.add(Oe,K),K.v=0}}function y4(K){return!(K.g||K.u||3<=K.v||(K.Y++,K.u=xu(hi(K.Fa,K),vp(K,K.v)),K.v++,0))}function Yg(K){null!=K.A&&(ve.clearTimeout(K.A),K.A=null)}function $m(K){K.g=new dt(K,K.j,"rpc",K.Y),null===K.m&&(K.g.H=K.o),K.g.O=0;var Oe=Nu(K.qa);Cl(Oe,"RID","rpc"),Cl(Oe,"SID",K.K),Cl(Oe,"AID",K.T),Cl(Oe,"CI",K.F?"0":"1"),!K.F&&K.ja&&Cl(Oe,"TO",K.ja),Cl(Oe,"TYPE","xmlhttp"),Vm(K,Oe),K.m&&K.o&&v4(Oe,K.m,K.o),K.L&&(K.g.I=K.L);var ut=K.g;K=K.ia,ut.L=1,ut.v=gp(Nu(Oe)),ut.m=null,ut.P=!0,to(ut,K)}function Qp(K){null!=K.C&&(ve.clearTimeout(K.C),K.C=null)}function Zg(K,Oe){var ut=null;if(K.g==Oe){Qp(K),Yg(K),K.g=null;var an=2}else{if(!Rl(K.h,Oe))return;ut=Oe.D,Is(K.h,Oe),an=1}if(0!=K.G)if(Oe.o)if(1==an){ut=Oe.m?Oe.m.length:0,Oe=Date.now()-Oe.F;var $i=K.B;ah(an=zm(),new pg(an,ut)),Fm(K)}else Dv(K);else if(3==($i=Oe.s)||0==$i&&0<Oe.X||!(1==an&&function Av(K,Oe){return!(Cc(K.h)>=K.h.j-(K.s?1:0)||(K.s?(K.i=Oe.D.concat(K.i),0):1==K.G||2==K.G||K.B>=(K.Va?0:K.Wa)||(K.s=xu(hi(K.Ga,K,Oe),vp(K,K.B)),K.B++,0)))}(K,Oe)||2==an&&y4(K)))switch(ut&&0<ut.length&&(Oe=K.h,Oe.i=Oe.i.concat(ut)),$i){case 1:Vu(K,5);break;case 4:Vu(K,10);break;case 3:Vu(K,6);break;default:Vu(K,2)}}function vp(K,Oe){let ut=K.Ta+Math.floor(Math.random()*K.cb);return K.isActive()||(ut*=2),ut*Oe}function Vu(K,Oe){if(K.j.info("Error code "+Oe),2==Oe){var ut=hi(K.fb,K),an=K.Xa;const $i=!an;an=new Mc(an||"//www.google.com/images/cleardot.gif"),ve.location&&"http"==ve.location.protocol||kc(an,"https"),gp(an),$i?function I1(K,Oe){const ut=new d0;if(ve.Image){const an=new Image;an.onload=Ji(Pf,ut,"TestLoadImage: loaded",!0,Oe,an),an.onerror=Ji(Pf,ut,"TestLoadImage: error",!1,Oe,an),an.onabort=Ji(Pf,ut,"TestLoadImage: abort",!1,Oe,an),an.ontimeout=Ji(Pf,ut,"TestLoadImage: timeout",!1,Oe,an),ve.setTimeout(function(){an.ontimeout&&an.ontimeout()},1e4),an.src=K}else Oe(!1)}(an.toString(),ut):function Cv(K,Oe){new d0;const an=new AbortController,$i=setTimeout(()=>{an.abort(),Pf(0,0,!1,Oe)},1e4);fetch(K,{signal:an.signal}).then(Do=>{clearTimeout($i),Pf(0,0,!!Do.ok,Oe)}).catch(()=>{clearTimeout($i),Pf(0,0,!1,Oe)})}(an.toString(),ut)}else jd(2);K.G=0,K.l&&K.l.sa(Oe),vg(K),_4(K)}function vg(K){if(K.G=0,K.ka=[],K.l){const Oe=Lu(K.h);(0!=Oe.length||0!=K.i.length)&&(rr(K.ka,Oe),rr(K.ka,K.i),K.h.i.length=0,br(K.i),K.i.length=0),K.l.ra()}}function tm(K,Oe,ut){var an=ut instanceof Mc?Nu(ut):new Mc(ut);if(""!=an.g)Oe&&(an.g=Oe+"."+an.g),Fu(an,an.s);else{var $i=ve.location;an=$i.protocol,Oe=Oe?Oe+"."+$i.hostname:$i.hostname,$i=+$i.port;var Do=new Mc(null);an&&kc(Do,an),Oe&&(Do.g=Oe),$i&&Fu(Do,$i),ut&&(Do.l=ut),an=Do}return Oe=K.ya,(ut=K.D)&&Oe&&Cl(an,ut,Oe),Cl(an,"VER",K.la),Vm(K,an),an}function Y1(K,Oe,ut){if(Oe&&!K.J)throw Error("Can't create secondary domain capable XhrIo object.");return(Oe=new Ac(K.Ca&&!K.pa?new X1({eb:ut}):K.pa)).Ha(K.J),Oe}function G4(){}function b4(){}function V0(K,Oe){Da.call(this),this.g=new Rf(Oe),this.l=K,this.h=Oe&&Oe.messageUrlParams||null,K=Oe&&Oe.messageHeaders||null,Oe&&Oe.clientProtocolHeaderRequired&&(K?K["X-Client-Protocol"]="webchannel":K={"X-Client-Protocol":"webchannel"}),this.g.o=K,K=Oe&&Oe.initMessageHeaders||null,Oe&&Oe.messageContentType&&(K?K["X-WebChannel-Content-Type"]=Oe.messageContentType:K={"X-WebChannel-Content-Type":Oe.messageContentType}),Oe&&Oe.va&&(K?K["X-WebChannel-Client-Profile"]=Oe.va:K={"X-WebChannel-Client-Profile":Oe.va}),this.g.S=K,(K=Oe&&Oe.Sb)&&!zs(K)&&(this.g.m=K),this.v=Oe&&Oe.supportsCrossDomainXhr||!1,this.u=Oe&&Oe.sendRawJson||!1,(Oe=Oe&&Oe.httpSessionIdParam)&&!zs(Oe)&&(this.g.D=Oe,null!==(K=this.h)&&Oe in K&&Oe in(K=this.h)&&delete K[Oe]),this.j=new v2(this)}function Qg(K){K2.call(this),K.__headers__&&(this.headers=K.__headers__,this.statusCode=K.__status__,delete K.__headers__,delete K.__status__);var Oe=K.__sm__;if(Oe){e:{for(const ut in Oe){K=ut;break e}K=void 0}(this.i=K)&&(K=this.i,Oe=null!==Oe&&K in Oe?Oe[K]:void 0),this.data=Oe}else this.data=K}function Jg(){qp.call(this),this.status=1}function v2(K){this.g=K}(S=Ac.prototype).Ha=function(K){this.J=K},S.ea=function(K,Oe,ut,an){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+K);Oe=Oe?Oe.toUpperCase():"GET",this.D=K,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ce.g(),this.v=function Gg(K){return K.h||(K.h=K.i())}(this.o?this.o:ce),this.g.onreadystatechange=hi(this.Ea,this);try{this.B=!0,this.g.open(Oe,String(K),!0),this.B=!1}catch(Do){return void g2(this,Do)}if(K=ut||"",ut=new Map(this.headers),an)if(Object.getPrototypeOf(an)===Object.prototype)for(var $i in an)ut.set($i,an[$i]);else{if("function"!=typeof an.keys||"function"!=typeof an.get)throw Error("Unknown input type for opt_headers: "+String(an));for(const Do of an.keys())ut.set(Do,an.get(Do))}an=Array.from(ut.keys()).find(Do=>"content-type"==Do.toLowerCase()),$i=ve.FormData&&K instanceof ve.FormData,!(0<=Array.prototype.indexOf.call(s3,Oe,void 0))||an||$i||ut.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Do,Ar]of ut)this.g.setRequestHeader(Do,Ar);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{J2(this),this.u=!0,this.g.send(K),this.u=!1}catch(Do){g2(this,Do)}},S.abort=function(K){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=K||7,ah(this,"complete"),ah(this,"abort"),p0(this))},S.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),p0(this,!0)),Ac.aa.N.call(this)},S.Ea=function(){this.s||(this.B||this.u||this.j?fg(this):this.bb())},S.bb=function(){fg(this)},S.isActive=function(){return!!this.g},S.Z=function(){try{return 2<K1(this)?this.g.status:-1}catch{return-1}},S.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},S.Oa=function(K){if(this.g){var Oe=this.g.responseText;return K&&0==Oe.indexOf(K)&&(Oe=Oe.substring(K.length)),N4(Oe)}},S.Ba=function(){return this.m},S.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(S=Rf.prototype).la=8,S.G=1,S.connect=function(K,Oe,ut,an){jd(0),this.W=K,this.H=Oe||{},ut&&void 0!==an&&(this.H.OSID=ut,this.H.OAID=an),this.F=this.X,this.I=tm(this,null,this.W),Fm(this)},S.Ga=function(K){if(this.s)if(this.s=null,1==this.G){if(!K){this.U=Math.floor(1e5*Math.random()),K=this.U++;const $i=new dt(this,this.j,K);let Do=this.o;if(this.S&&(Do?(Do=ti(Do),Bi(Do,this.S)):Do=this.S),null!==this.m||this.O||($i.H=Do,Do=null),this.P)e:{for(var Oe=0,ut=0;ut<this.i.length;ut++){var an=this.i[ut];if(void 0===(an="__data__"in an.map&&"string"==typeof(an=an.map.__data__)?an.length:void 0))break;if(4096<(Oe+=an)){Oe=ut;break e}if(4096===Oe||ut===this.i.length-1){Oe=ut+1;break e}}Oe=1e3}else Oe=1e3;Oe=Zp(this,$i,Oe),Cl(ut=Nu(this.I),"RID",K),Cl(ut,"CVER",22),this.D&&Cl(ut,"X-HTTP-Session-Id",this.D),Vm(this,ut),Do&&(this.O?Oe="headers="+encodeURIComponent(String(kv(Do)))+"&"+Oe:this.m&&v4(ut,this.m,Do)),Ql(this.h,$i),this.Ua&&Cl(ut,"TYPE","init"),this.P?(Cl(ut,"$req",Oe),Cl(ut,"SID","null"),$i.T=!0,xi($i,ut,null)):xi($i,ut,Oe),this.G=2}}else 3==this.G&&(K?gg(this,K):0==this.i.length||fl(this.h)||gg(this))},S.Fa=function(){if(this.u=null,$m(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var K=2*this.R;this.j.info("BP detection timer enabled: "+K),this.A=xu(hi(this.ab,this),K)}},S.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jd(10),H4(this),$m(this))},S.Za=function(){null!=this.C&&(this.C=null,H4(this),y4(this),jd(19))},S.fb=function(K){K?(this.j.info("Successfully pinged google.com"),jd(2)):(this.j.info("Failed to ping google.com"),jd(1))},S.isActive=function(){return!!this.l&&this.l.isActive(this)},(S=G4.prototype).ua=function(){},S.ta=function(){},S.sa=function(){},S.ra=function(){},S.isActive=function(){return!0},S.Na=function(){},b4.prototype.g=function(K,Oe){return new V0(K,Oe)},Zo(V0,Da),V0.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},V0.prototype.close=function(){em(this.g)},V0.prototype.o=function(K){var Oe=this.g;if("string"==typeof K){var ut={};ut.__data__=K,K=ut}else this.u&&((ut={}).__data__=Pm(K),K=ut);Oe.i.push(new xs(Oe.Ya++,K)),3==Oe.G&&Fm(Oe)},V0.prototype.N=function(){this.g.l=null,delete this.j,em(this.g),delete this.g,V0.aa.N.call(this)},Zo(Qg,K2),Zo(Jg,qp),Zo(v2,G4),v2.prototype.ua=function(){ah(this.g,"a")},v2.prototype.ta=function(K){ah(this.g,new Qg(K))},v2.prototype.sa=function(K){ah(this.g,new Jg)},v2.prototype.ra=function(){ah(this.g,"b")},b4.prototype.createWebChannel=b4.prototype.g,V0.prototype.send=V0.prototype.o,V0.prototype.open=V0.prototype.m,V0.prototype.close=V0.prototype.close,Mn=C.createWebChannelTransport=function(){return new b4},ei=C.getStatEventTarget=function(){return zm()},ht=C.Event=Xp,rn=C.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},D.NO_ERROR=0,D.TIMEOUT=8,D.HTTP_ERROR=6,xn=C.ErrorCode=D,q.COMPLETE="complete",fn=C.EventType=q,dg.EventType=Mf,Mf.OPEN="a",Mf.CLOSE="b",Mf.ERROR="c",Mf.MESSAGE="d",Da.prototype.listen=Da.prototype.K,yt=C.WebChannel=dg,Ut=C.FetchXmlHttpFactory=X1,Ac.prototype.listenOnce=Ac.prototype.L,Ac.prototype.getLastError=Ac.prototype.Ka,Ac.prototype.getLastErrorCode=Ac.prototype.Ba,Ac.prototype.getStatus=Ac.prototype.Z,Ac.prototype.getResponseJson=Ac.prototype.Oa,Ac.prototype.getResponseText=Ac.prototype.oa,Ac.prototype.send=Ac.prototype.ea,Ac.prototype.setWithCredentials=Ac.prototype.Ha,At=C.XhrIo=Ac}).apply(typeof wt<"u"?wt:typeof self<"u"?self:typeof window<"u"?window:{});const Zn="@firebase/firestore";class xt{constructor(a){this.uid=a}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(a){return a.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let Ot="10.12.3";const wn=new l.Vy("@firebase/firestore");function Pn(){return wn.logLevel}function Et(S,...a){if(wn.logLevel<=l.$b.DEBUG){const p=a.map(on);wn.debug(`Firestore (${Ot}): ${S}`,...p)}}function kn(S,...a){if(wn.logLevel<=l.$b.ERROR){const p=a.map(on);wn.error(`Firestore (${Ot}): ${S}`,...p)}}function Te(S,...a){if(wn.logLevel<=l.$b.WARN){const p=a.map(on);wn.warn(`Firestore (${Ot}): ${S}`,...p)}}function on(S){if("string"==typeof S)return S;try{return JSON.stringify(S)}catch{return S}}function Qt(S="Unexpected state"){const a=`FIRESTORE (${Ot}) INTERNAL ASSERTION FAILED: `+S;throw kn(a),new Error(a)}function En(S,a){S||Qt()}function Vn(S,a){return S}const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends We.g{constructor(a,p){super(a,p),this.code=a,this.message=p,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ge{constructor(){this.promise=new Promise((a,p)=>{this.resolve=a,this.reject=p})}}class et{constructor(a,p){this.user=p,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${a}`)}}class zt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(a,p){a.enqueueRetryable(()=>p(xt.UNAUTHENTICATED))}shutdown(){}}class qn{constructor(a){this.token=a,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(a,p){this.changeListener=p,a.enqueueRetryable(()=>p(this.token.user))}shutdown(){this.changeListener=null}}class un{constructor(a){this.t=a,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(a,p){var w=this;let P=this.i;const U=st=>this.i!==P?(P=this.i,p(st)):Promise.resolve();let J=new Ge;this.o=()=>{this.i++,this.currentUser=this.u(),J.resolve(),J=new Ge,a.enqueueRetryable(()=>U(this.currentUser))};const ve=()=>{const st=J;a.enqueueRetryable((0,V.A)(function*(){yield st.promise,yield U(w.currentUser)}))},Re=st=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=st,this.auth.addAuthTokenListener(this.o),ve()};this.t.onInit(st=>Re(st)),setTimeout(()=>{if(!this.auth){const st=this.t.getImmediate({optional:!0});st?Re(st):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),J.resolve(),J=new Ge)}},0),ve()}getToken(){const a=this.i,p=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(p).then(w=>this.i!==a?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):w?(En("string"==typeof w.accessToken),new et(w.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const a=this.auth&&this.auth.getUid();return En(null===a||"string"==typeof a),new xt(a)}}class go{constructor(a,p,w){this.l=a,this.h=p,this.P=w,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const a=this.T();return a&&this.I.set("Authorization",a),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qi{constructor(a,p,w){this.l=a,this.h=p,this.P=w}getToken(){return Promise.resolve(new go(this.l,this.h,this.P))}start(a,p){a.enqueueRetryable(()=>p(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dr{constructor(a){this.value=a,this.type="AppCheck",this.headers=new Map,a&&a.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Go{constructor(a){this.A=a,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(a,p){const w=U=>{null!=U.error&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${U.error.message}`);const J=U.token!==this.R;return this.R=U.token,Et("FirebaseAppCheckTokenProvider",`Received ${J?"new":"existing"} token.`),J?p(U.token):Promise.resolve()};this.o=U=>{a.enqueueRetryable(()=>w(U))};const P=U=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=U,this.appCheck.addTokenListener(this.o)};this.A.onInit(U=>P(U)),setTimeout(()=>{if(!this.appCheck){const U=this.A.getImmediate({optional:!0});U?P(U):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const a=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(a).then(p=>p?(En("string"==typeof p.token),this.R=p.token,new dr(p.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cr(S){const a=typeof self<"u"&&(self.crypto||self.msCrypto),p=new Uint8Array(S);if(a&&"function"==typeof a.getRandomValues)a.getRandomValues(p);else for(let w=0;w<S;w++)p[w]=Math.floor(256*Math.random());return p}class Ei{static newId(){const p=62*Math.floor(256/62);let w="";for(;w.length<20;){const P=cr(40);for(let U=0;U<P.length;++U)w.length<20&&P[U]<p&&(w+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(P[U]%62))}return w}}function ko(S,a){return S<a?-1:S>a?1:0}function Er(S,a,p){return S.length===a.length&&S.every((w,P)=>p(w,a[P]))}class ji{constructor(a,p){if(this.seconds=a,this.nanoseconds=p,p<0)throw new Ae(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+p);if(p>=1e9)throw new Ae(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+p);if(a<-62135596800)throw new Ae(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+a);if(a>=253402300800)throw new Ae(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+a)}static now(){return ji.fromMillis(Date.now())}static fromDate(a){return ji.fromMillis(a.getTime())}static fromMillis(a){const p=Math.floor(a/1e3),w=Math.floor(1e6*(a-1e3*p));return new ji(p,w)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(a){return this.seconds===a.seconds?ko(this.nanoseconds,a.nanoseconds):ko(this.seconds,a.seconds)}isEqual(a){return a.seconds===this.seconds&&a.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vi{constructor(a){this.timestamp=a}static fromTimestamp(a){return new vi(a)}static min(){return new vi(new ji(0,0))}static max(){return new vi(new ji(253402300799,999999999))}compareTo(a){return this.timestamp._compareTo(a.timestamp)}isEqual(a){return this.timestamp.isEqual(a.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yi{constructor(a,p,w){void 0===p?p=0:p>a.length&&Qt(),void 0===w?w=a.length-p:w>a.length-p&&Qt(),this.segments=a,this.offset=p,this.len=w}get length(){return this.len}isEqual(a){return 0===Yi.comparator(this,a)}child(a){const p=this.segments.slice(this.offset,this.limit());return a instanceof Yi?a.forEach(w=>{p.push(w)}):p.push(a),this.construct(p)}limit(){return this.offset+this.length}popFirst(a){return this.construct(this.segments,this.offset+(a=void 0===a?1:a),this.length-a)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(a){return this.segments[this.offset+a]}isEmpty(){return 0===this.length}isPrefixOf(a){if(a.length<this.length)return!1;for(let p=0;p<this.length;p++)if(this.get(p)!==a.get(p))return!1;return!0}isImmediateParentOf(a){if(this.length+1!==a.length)return!1;for(let p=0;p<this.length;p++)if(this.get(p)!==a.get(p))return!1;return!0}forEach(a){for(let p=this.offset,w=this.limit();p<w;p++)a(this.segments[p])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(a,p){const w=Math.min(a.length,p.length);for(let P=0;P<w;P++){const U=a.get(P),J=p.get(P);if(U<J)return-1;if(U>J)return 1}return a.length<p.length?-1:a.length>p.length?1:0}}class ui extends Yi{construct(a,p,w){return new ui(a,p,w)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...a){const p=[];for(const w of a){if(w.indexOf("//")>=0)throw new Ae(Ke.INVALID_ARGUMENT,`Invalid segment (${w}). Paths must not contain // in them.`);p.push(...w.split("/").filter(P=>P.length>0))}return new ui(p)}static emptyPath(){return new ui([])}}const Ni=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class po extends Yi{construct(a,p,w){return new po(a,p,w)}static isValidIdentifier(a){return Ni.test(a)}canonicalString(){return this.toArray().map(a=>(a=a.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),po.isValidIdentifier(a)||(a="`"+a+"`"),a)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new po(["__name__"])}static fromServerFormat(a){const p=[];let w="",P=0;const U=()=>{if(0===w.length)throw new Ae(Ke.INVALID_ARGUMENT,`Invalid field path (${a}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);p.push(w),w=""};let J=!1;for(;P<a.length;){const ve=a[P];if("\\"===ve){if(P+1===a.length)throw new Ae(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+a);const Re=a[P+1];if("\\"!==Re&&"."!==Re&&"`"!==Re)throw new Ae(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+a);w+=Re,P+=2}else"`"===ve?(J=!J,P++):"."!==ve||J?(w+=ve,P++):(U(),P++)}if(U(),J)throw new Ae(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+a);return new po(p)}static emptyPath(){return new po([])}}class Xi{constructor(a){this.path=a}static fromPath(a){return new Xi(ui.fromString(a))}static fromName(a){return new Xi(ui.fromString(a).popFirst(5))}static empty(){return new Xi(ui.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(a){return this.path.length>=2&&this.path.get(this.path.length-2)===a}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(a){return null!==a&&0===ui.comparator(this.path,a.path)}toString(){return this.path.toString()}static comparator(a,p){return ui.comparator(a.path,p.path)}static isDocumentKey(a){return a.length%2==0}static fromSegments(a){return new Xi(new ui(a.slice()))}}class Wo{constructor(a,p,w){this.readTime=a,this.documentKey=p,this.largestBatchId=w}static min(){return new Wo(vi.min(),Xi.empty(),-1)}static max(){return new Wo(vi.max(),Xi.empty(),-1)}}function lr(S,a){let p=S.readTime.compareTo(a.readTime);return 0!==p?p:(p=Xi.comparator(S.documentKey,a.documentKey),0!==p?p:ko(S.largestBatchId,a.largestBatchId))}const Pr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(a){this.onCommittedListeners.push(a)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(a=>a())}}function wr(S){return aa.apply(this,arguments)}function aa(){return(aa=(0,V.A)(function*(S){if(S.code!==Ke.FAILED_PRECONDITION||S.message!==Pr)throw S;Et("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Jn{constructor(a){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,a(p=>{this.isDone=!0,this.result=p,this.nextCallback&&this.nextCallback(p)},p=>{this.isDone=!0,this.error=p,this.catchCallback&&this.catchCallback(p)})}catch(a){return this.next(void 0,a)}next(a,p){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(p,this.error):this.wrapSuccess(a,this.result):new Jn((w,P)=>{this.nextCallback=U=>{this.wrapSuccess(a,U).next(w,P)},this.catchCallback=U=>{this.wrapFailure(p,U).next(w,P)}})}toPromise(){return new Promise((a,p)=>{this.next(a,p)})}wrapUserFunction(a){try{const p=a();return p instanceof Jn?p:Jn.resolve(p)}catch(p){return Jn.reject(p)}}wrapSuccess(a,p){return a?this.wrapUserFunction(()=>a(p)):Jn.resolve(p)}wrapFailure(a,p){return a?this.wrapUserFunction(()=>a(p)):Jn.reject(p)}static resolve(a){return new Jn((p,w)=>{p(a)})}static reject(a){return new Jn((p,w)=>{w(a)})}static waitFor(a){return new Jn((p,w)=>{let P=0,U=0,J=!1;a.forEach(ve=>{++P,ve.next(()=>{++U,J&&U===P&&p()},Re=>w(Re))}),J=!0,U===P&&p()})}static or(a){let p=Jn.resolve(!1);for(const w of a)p=p.next(P=>P?Jn.resolve(P):w());return p}static forEach(a,p){const w=[];return a.forEach((P,U)=>{w.push(p.call(this,P,U))}),this.waitFor(w)}static mapArray(a,p){return new Jn((w,P)=>{const U=a.length,J=new Array(U);let ve=0;for(let Re=0;Re<U;Re++){const st=Re;p(a[st]).next(Wt=>{J[st]=Wt,++ve,ve===U&&w(J)},Wt=>P(Wt))}})}static doWhile(a,p){return new Jn((w,P)=>{const U=()=>{!0===a()?p().next(()=>{U()},P):w()};U()})}}function Fi(S){return"IndexedDbTransactionError"===S.name}let Tt=(()=>{class S{constructor(p,w){this.previousValue=p,w&&(w.sequenceNumberHandler=P=>this.ie(P),this.se=P=>w.writeSequenceNumber(P))}ie(p){return this.previousValue=Math.max(p,this.previousValue),this.previousValue}next(){const p=++this.previousValue;return this.se&&this.se(p),p}}return S.oe=-1,S})();function Jt(S){return null==S}function Ln(S){return 0===S&&1/S==-1/0}function Cr(S){let a=0;for(const p in S)Object.prototype.hasOwnProperty.call(S,p)&&a++;return a}function bi(S,a){for(const p in S)Object.prototype.hasOwnProperty.call(S,p)&&a(p,S[p])}function Vr(S){for(const a in S)if(Object.prototype.hasOwnProperty.call(S,a))return!1;return!0}class is{constructor(a,p){this.comparator=a,this.root=p||wa.EMPTY}insert(a,p){return new is(this.comparator,this.root.insert(a,p,this.comparator).copy(null,null,wa.BLACK,null,null))}remove(a){return new is(this.comparator,this.root.remove(a,this.comparator).copy(null,null,wa.BLACK,null,null))}get(a){let p=this.root;for(;!p.isEmpty();){const w=this.comparator(a,p.key);if(0===w)return p.value;w<0?p=p.left:w>0&&(p=p.right)}return null}indexOf(a){let p=0,w=this.root;for(;!w.isEmpty();){const P=this.comparator(a,w.key);if(0===P)return p+w.left.size;P<0?w=w.left:(p+=w.left.size+1,w=w.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(a){return this.root.inorderTraversal(a)}forEach(a){this.inorderTraversal((p,w)=>(a(p,w),!1))}toString(){const a=[];return this.inorderTraversal((p,w)=>(a.push(`${p}:${w}`),!1)),`{${a.join(", ")}}`}reverseTraversal(a){return this.root.reverseTraversal(a)}getIterator(){return new Es(this.root,null,this.comparator,!1)}getIteratorFrom(a){return new Es(this.root,a,this.comparator,!1)}getReverseIterator(){return new Es(this.root,null,this.comparator,!0)}getReverseIteratorFrom(a){return new Es(this.root,a,this.comparator,!0)}}class Es{constructor(a,p,w,P){this.isReverse=P,this.nodeStack=[];let U=1;for(;!a.isEmpty();)if(U=p?w(a.key,p):1,p&&P&&(U*=-1),U<0)a=this.isReverse?a.left:a.right;else{if(0===U){this.nodeStack.push(a);break}this.nodeStack.push(a),a=this.isReverse?a.right:a.left}}getNext(){let a=this.nodeStack.pop();const p={key:a.key,value:a.value};if(this.isReverse)for(a=a.left;!a.isEmpty();)this.nodeStack.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack.push(a),a=a.left;return p}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const a=this.nodeStack[this.nodeStack.length-1];return{key:a.key,value:a.value}}}class wa{constructor(a,p,w,P,U){this.key=a,this.value=p,this.color=null!=w?w:wa.RED,this.left=null!=P?P:wa.EMPTY,this.right=null!=U?U:wa.EMPTY,this.size=this.left.size+1+this.right.size}copy(a,p,w,P,U){return new wa(null!=a?a:this.key,null!=p?p:this.value,null!=w?w:this.color,null!=P?P:this.left,null!=U?U:this.right)}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(a,p,w){let P=this;const U=w(a,P.key);return P=U<0?P.copy(null,null,null,P.left.insert(a,p,w),null):0===U?P.copy(null,p,null,null,null):P.copy(null,null,null,null,P.right.insert(a,p,w)),P.fixUp()}removeMin(){if(this.left.isEmpty())return wa.EMPTY;let a=this;return a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.removeMin(),null),a.fixUp()}remove(a,p){let w,P=this;if(p(a,P.key)<0)P.left.isEmpty()||P.left.isRed()||P.left.left.isRed()||(P=P.moveRedLeft()),P=P.copy(null,null,null,P.left.remove(a,p),null);else{if(P.left.isRed()&&(P=P.rotateRight()),P.right.isEmpty()||P.right.isRed()||P.right.left.isRed()||(P=P.moveRedRight()),0===p(a,P.key)){if(P.right.isEmpty())return wa.EMPTY;w=P.right.min(),P=P.copy(w.key,w.value,null,null,P.right.removeMin())}P=P.copy(null,null,null,null,P.right.remove(a,p))}return P.fixUp()}isRed(){return this.color}fixUp(){let a=this;return a.right.isRed()&&!a.left.isRed()&&(a=a.rotateLeft()),a.left.isRed()&&a.left.left.isRed()&&(a=a.rotateRight()),a.left.isRed()&&a.right.isRed()&&(a=a.colorFlip()),a}moveRedLeft(){let a=this.colorFlip();return a.right.left.isRed()&&(a=a.copy(null,null,null,null,a.right.rotateRight()),a=a.rotateLeft(),a=a.colorFlip()),a}moveRedRight(){let a=this.colorFlip();return a.left.left.isRed()&&(a=a.rotateRight(),a=a.colorFlip()),a}rotateLeft(){const a=this.copy(null,null,wa.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight(){const a=this.copy(null,null,wa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip(){const a=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,p)}checkMaxDepth(){const a=this.check();return Math.pow(2,a)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const a=this.left.check();if(a!==this.right.check())throw Qt();return a+(this.isRed()?0:1)}}wa.EMPTY=null,wa.RED=!0,wa.BLACK=!1,wa.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(a,p,w,P,U){return this}insert(a,p,w){return new wa(a,p)}remove(a,p){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gs{constructor(a){this.comparator=a,this.data=new is(this.comparator)}has(a){return null!==this.data.get(a)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(a){return this.data.indexOf(a)}forEach(a){this.data.inorderTraversal((p,w)=>(a(p),!1))}forEachInRange(a,p){const w=this.data.getIteratorFrom(a[0]);for(;w.hasNext();){const P=w.getNext();if(this.comparator(P.key,a[1])>=0)return;p(P.key)}}forEachWhile(a,p){let w;for(w=void 0!==p?this.data.getIteratorFrom(p):this.data.getIterator();w.hasNext();)if(!a(w.getNext().key))return}firstAfterOrEqual(a){const p=this.data.getIteratorFrom(a);return p.hasNext()?p.getNext().key:null}getIterator(){return new xa(this.data.getIterator())}getIteratorFrom(a){return new xa(this.data.getIteratorFrom(a))}add(a){return this.copy(this.data.remove(a).insert(a,!0))}delete(a){return this.has(a)?this.copy(this.data.remove(a)):this}isEmpty(){return this.data.isEmpty()}unionWith(a){let p=this;return p.size<a.size&&(p=a,a=this),a.forEach(w=>{p=p.add(w)}),p}isEqual(a){if(!(a instanceof Gs)||this.size!==a.size)return!1;const p=this.data.getIterator(),w=a.data.getIterator();for(;p.hasNext();){const P=p.getNext().key,U=w.getNext().key;if(0!==this.comparator(P,U))return!1}return!0}toArray(){const a=[];return this.forEach(p=>{a.push(p)}),a}toString(){const a=[];return this.forEach(p=>a.push(p)),"SortedSet("+a.toString()+")"}copy(a){const p=new Gs(this.comparator);return p.data=a,p}}class xa{constructor(a){this.iter=a}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ha{constructor(a){this.fields=a,a.sort(po.comparator)}static empty(){return new Ha([])}unionWith(a){let p=new Gs(po.comparator);for(const w of this.fields)p=p.add(w);for(const w of a)p=p.add(w);return new Ha(p.toArray())}covers(a){for(const p of this.fields)if(p.isPrefixOf(a))return!0;return!1}isEqual(a){return Er(this.fields,a.fields,(p,w)=>p.isEqual(w))}}class su extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _a{constructor(a){this.binaryString=a}static fromBase64String(a){const p=function(P){try{return atob(P)}catch(U){throw typeof DOMException<"u"&&U instanceof DOMException?new su("Invalid base64 string: "+U):U}}(a);return new _a(p)}static fromUint8Array(a){const p=function(P){let U="";for(let J=0;J<P.length;++J)U+=String.fromCharCode(P[J]);return U}(a);return new _a(p)}[Symbol.iterator](){let a=0;return{next:()=>a<this.binaryString.length?{value:this.binaryString.charCodeAt(a++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(p){const w=new Uint8Array(p.length);for(let P=0;P<p.length;P++)w[P]=p.charCodeAt(P);return w}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(a){return ko(this.binaryString,a.binaryString)}isEqual(a){return this.binaryString===a.binaryString}}_a.EMPTY_BYTE_STRING=new _a("");const Eu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(S){if(En(!!S),"string"==typeof S){let a=0;const p=Eu.exec(S);if(En(!!p),p[1]){let P=p[1];P=(P+"000000000").substr(0,9),a=Number(P)}const w=new Date(S);return{seconds:Math.floor(w.getTime()/1e3),nanos:a}}return{seconds:Ra(S.seconds),nanos:Ra(S.nanos)}}function Ra(S){return"number"==typeof S?S:"string"==typeof S?Number(S):0}function Vc(S){return"string"==typeof S?_a.fromBase64String(S):_a.fromUint8Array(S)}function $u(S){var a,p;return"server_timestamp"===(null===(p=((null===(a=null==S?void 0:S.mapValue)||void 0===a?void 0:a.fields)||{}).__type__)||void 0===p?void 0:p.stringValue)}function ju(S){const a=S.mapValue.fields.__previous_value__;return $u(a)?ju(a):a}function Ol(S){const a=Ja(S.mapValue.fields.__local_write_time__.timestampValue);return new ji(a.seconds,a.nanos)}class Ms{constructor(a,p,w,P,U,J,ve,Re,st){this.databaseId=a,this.appId=p,this.persistenceKey=w,this.host=P,this.ssl=U,this.forceLongPolling=J,this.autoDetectLongPolling=ve,this.longPollingOptions=Re,this.useFetchStreams=st}}class lu{constructor(a,p){this.projectId=a,this.database=p||"(default)"}static empty(){return new lu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(a){return a instanceof lu&&a.projectId===this.projectId&&a.database===this.database}}const Dc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function lc(S){return"nullValue"in S?0:"booleanValue"in S?1:"integerValue"in S||"doubleValue"in S?2:"timestampValue"in S?3:"stringValue"in S?5:"bytesValue"in S?6:"referenceValue"in S?7:"geoPointValue"in S?8:"arrayValue"in S?9:"mapValue"in S?$u(S)?4:Yn(S)?9007199254740991:10:Qt()}function Ia(S,a){if(S===a)return!0;const p=lc(S);if(p!==lc(a))return!1;switch(p){case 0:case 9007199254740991:return!0;case 1:return S.booleanValue===a.booleanValue;case 4:return Ol(S).isEqual(Ol(a));case 3:return function(P,U){if("string"==typeof P.timestampValue&&"string"==typeof U.timestampValue&&P.timestampValue.length===U.timestampValue.length)return P.timestampValue===U.timestampValue;const J=Ja(P.timestampValue),ve=Ja(U.timestampValue);return J.seconds===ve.seconds&&J.nanos===ve.nanos}(S,a);case 5:return S.stringValue===a.stringValue;case 6:return U=a,Vc(S.bytesValue).isEqual(Vc(U.bytesValue));case 7:return S.referenceValue===a.referenceValue;case 8:return function(P,U){return Ra(P.geoPointValue.latitude)===Ra(U.geoPointValue.latitude)&&Ra(P.geoPointValue.longitude)===Ra(U.geoPointValue.longitude)}(S,a);case 2:return function(P,U){if("integerValue"in P&&"integerValue"in U)return Ra(P.integerValue)===Ra(U.integerValue);if("doubleValue"in P&&"doubleValue"in U){const J=Ra(P.doubleValue),ve=Ra(U.doubleValue);return J===ve?Ln(J)===Ln(ve):isNaN(J)&&isNaN(ve)}return!1}(S,a);case 9:return Er(S.arrayValue.values||[],a.arrayValue.values||[],Ia);case 10:return function(P,U){const J=P.mapValue.fields||{},ve=U.mapValue.fields||{};if(Cr(J)!==Cr(ve))return!1;for(const Re in J)if(J.hasOwnProperty(Re)&&(void 0===ve[Re]||!Ia(J[Re],ve[Re])))return!1;return!0}(S,a);default:return Qt()}var U}function gc(S,a){return void 0!==(S.values||[]).find(p=>Ia(p,a))}function Gl(S,a){if(S===a)return 0;const p=lc(S),w=lc(a);if(p!==w)return ko(p,w);switch(p){case 0:case 9007199254740991:return 0;case 1:return ko(S.booleanValue,a.booleanValue);case 2:return function(U,J){const ve=Ra(U.integerValue||U.doubleValue),Re=Ra(J.integerValue||J.doubleValue);return ve<Re?-1:ve>Re?1:ve===Re?0:isNaN(ve)?isNaN(Re)?0:-1:1}(S,a);case 3:return uu(S.timestampValue,a.timestampValue);case 4:return uu(Ol(S),Ol(a));case 5:return ko(S.stringValue,a.stringValue);case 6:return function(U,J){const ve=Vc(U),Re=Vc(J);return ve.compareTo(Re)}(S.bytesValue,a.bytesValue);case 7:return function(U,J){const ve=U.split("/"),Re=J.split("/");for(let st=0;st<ve.length&&st<Re.length;st++){const Wt=ko(ve[st],Re[st]);if(0!==Wt)return Wt}return ko(ve.length,Re.length)}(S.referenceValue,a.referenceValue);case 8:return function(U,J){const ve=ko(Ra(U.latitude),Ra(J.latitude));return 0!==ve?ve:ko(Ra(U.longitude),Ra(J.longitude))}(S.geoPointValue,a.geoPointValue);case 9:return function(U,J){const ve=U.values||[],Re=J.values||[];for(let st=0;st<ve.length&&st<Re.length;++st){const Wt=Gl(ve[st],Re[st]);if(Wt)return Wt}return ko(ve.length,Re.length)}(S.arrayValue,a.arrayValue);case 10:return function(U,J){if(U===Dc.mapValue&&J===Dc.mapValue)return 0;if(U===Dc.mapValue)return 1;if(J===Dc.mapValue)return-1;const ve=U.fields||{},Re=Object.keys(ve),st=J.fields||{},Wt=Object.keys(st);Re.sort(),Wt.sort();for(let In=0;In<Re.length&&In<Wt.length;++In){const hi=ko(Re[In],Wt[In]);if(0!==hi)return hi;const Ji=Gl(ve[Re[In]],st[Wt[In]]);if(0!==Ji)return Ji}return ko(Re.length,Wt.length)}(S.mapValue,a.mapValue);default:throw Qt()}}function uu(S,a){if("string"==typeof S&&"string"==typeof a&&S.length===a.length)return ko(S,a);const p=Ja(S),w=Ja(a),P=ko(p.seconds,w.seconds);return 0!==P?P:ko(p.nanos,w.nanos)}function vc(S){return du(S)}function du(S){return"nullValue"in S?"null":"booleanValue"in S?""+S.booleanValue:"integerValue"in S?""+S.integerValue:"doubleValue"in S?""+S.doubleValue:"timestampValue"in S?function(p){const w=Ja(p);return`time(${w.seconds},${w.nanos})`}(S.timestampValue):"stringValue"in S?S.stringValue:"bytesValue"in S?Vc(S.bytesValue).toBase64():"referenceValue"in S?Xi.fromName(S.referenceValue).toString():"geoPointValue"in S?function(p){return`geo(${p.latitude},${p.longitude})`}(S.geoPointValue):"arrayValue"in S?function(p){let w="[",P=!0;for(const U of p.values||[])P?P=!1:w+=",",w+=du(U);return w+"]"}(S.arrayValue):"mapValue"in S?function(p){const w=Object.keys(p.fields||{}).sort();let P="{",U=!0;for(const J of w)U?U=!1:P+=",",P+=`${J}:${du(p.fields[J])}`;return P+"}"}(S.mapValue):Qt()}function Sc(S,a){return{referenceValue:`projects/${S.projectId}/databases/${S.database}/documents/${a.path.canonicalString()}`}}function vl(S){return!!S&&"integerValue"in S}function rs(S){return!!S&&"arrayValue"in S}function Na(S){return!!S&&"nullValue"in S}function nt(S){return!!S&&"doubleValue"in S&&isNaN(Number(S.doubleValue))}function Dt(S){return!!S&&"mapValue"in S}function Hn(S){if(S.geoPointValue)return{geoPointValue:Object.assign({},S.geoPointValue)};if(S.timestampValue&&"object"==typeof S.timestampValue)return{timestampValue:Object.assign({},S.timestampValue)};if(S.mapValue){const a={mapValue:{fields:{}}};return bi(S.mapValue.fields,(p,w)=>a.mapValue.fields[p]=Hn(w)),a}if(S.arrayValue){const a={arrayValue:{values:[]}};for(let p=0;p<(S.arrayValue.values||[]).length;++p)a.arrayValue.values[p]=Hn(S.arrayValue.values[p]);return a}return Object.assign({},S)}function Yn(S){return"__max__"===(((S.mapValue||{}).fields||{}).__type__||{}).stringValue}class so{constructor(a){this.value=a}static empty(){return new so({mapValue:{}})}field(a){if(a.isEmpty())return this.value;{let p=this.value;for(let w=0;w<a.length-1;++w)if(p=(p.mapValue.fields||{})[a.get(w)],!Dt(p))return null;return p=(p.mapValue.fields||{})[a.lastSegment()],p||null}}set(a,p){this.getFieldsMap(a.popLast())[a.lastSegment()]=Hn(p)}setAll(a){let p=po.emptyPath(),w={},P=[];a.forEach((J,ve)=>{if(!p.isImmediateParentOf(ve)){const Re=this.getFieldsMap(p);this.applyChanges(Re,w,P),w={},P=[],p=ve.popLast()}J?w[ve.lastSegment()]=Hn(J):P.push(ve.lastSegment())});const U=this.getFieldsMap(p);this.applyChanges(U,w,P)}delete(a){const p=this.field(a.popLast());Dt(p)&&p.mapValue.fields&&delete p.mapValue.fields[a.lastSegment()]}isEqual(a){return Ia(this.value,a.value)}getFieldsMap(a){let p=this.value;p.mapValue.fields||(p.mapValue={fields:{}});for(let w=0;w<a.length;++w){let P=p.mapValue.fields[a.get(w)];Dt(P)&&P.mapValue.fields||(P={mapValue:{fields:{}}},p.mapValue.fields[a.get(w)]=P),p=P}return p.mapValue.fields}applyChanges(a,p,w){bi(p,(P,U)=>a[P]=U);for(const P of w)delete a[P]}clone(){return new so(Hn(this.value))}}function mi(S){const a=[];return bi(S.fields,(p,w)=>{const P=new po([p]);if(Dt(w)){const U=mi(w.mapValue).fields;if(0===U.length)a.push(P);else for(const J of U)a.push(P.child(J))}else a.push(P)}),new Ha(a)}class qo{constructor(a,p,w,P,U,J,ve){this.key=a,this.documentType=p,this.version=w,this.readTime=P,this.createTime=U,this.data=J,this.documentState=ve}static newInvalidDocument(a){return new qo(a,0,vi.min(),vi.min(),vi.min(),so.empty(),0)}static newFoundDocument(a,p,w,P){return new qo(a,1,p,vi.min(),w,P,0)}static newNoDocument(a,p){return new qo(a,2,p,vi.min(),vi.min(),so.empty(),0)}static newUnknownDocument(a,p){return new qo(a,3,p,vi.min(),vi.min(),so.empty(),2)}convertToFoundDocument(a,p){return!this.createTime.isEqual(vi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=a),this.version=a,this.documentType=1,this.data=p,this.documentState=0,this}convertToNoDocument(a){return this.version=a,this.documentType=2,this.data=so.empty(),this.documentState=0,this}convertToUnknownDocument(a){return this.version=a,this.documentType=3,this.data=so.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vi.min(),this}setReadTime(a){return this.readTime=a,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(a){return a instanceof qo&&this.key.isEqual(a.key)&&this.version.isEqual(a.version)&&this.documentType===a.documentType&&this.documentState===a.documentState&&this.data.isEqual(a.data)}mutableCopy(){return new qo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hr{constructor(a,p){this.position=a,this.inclusive=p}}function Ir(S,a,p){let w=0;for(let P=0;P<S.position.length;P++){const U=a[P],J=S.position[P];if(w=U.field.isKeyField()?Xi.comparator(Xi.fromName(J.referenceValue),p.key):Gl(J,p.data.field(U.field)),"desc"===U.dir&&(w*=-1),0!==w)break}return w}function os(S,a){if(null===S)return null===a;if(null===a||S.inclusive!==a.inclusive||S.position.length!==a.position.length)return!1;for(let p=0;p<S.position.length;p++)if(!Ia(S.position[p],a.position[p]))return!1;return!0}class Cs{constructor(a,p="asc"){this.field=a,this.dir=p}}function ea(S,a){return S.dir===a.dir&&S.field.isEqual(a.field)}class Ps{}class Nr extends Ps{constructor(a,p,w){super(),this.field=a,this.op=p,this.value=w}static create(a,p,w){return a.isKeyField()?"in"===p||"not-in"===p?this.createKeyFieldInFilter(a,p,w):new Ea(a,p,w):"array-contains"===p?new gd(a,w):"in"===p?new sd(a,w):"not-in"===p?new Le(a,w):"array-contains-any"===p?new qe(a,w):new Nr(a,p,w)}static createKeyFieldInFilter(a,p,w){return"in"===p?new Ga(a,w):new nl(a,w)}matches(a){const p=a.data.field(this.field);return"!="===this.op?null!==p&&this.matchesComparison(Gl(p,this.value)):null!==p&&lc(this.value)===lc(p)&&this.matchesComparison(Gl(p,this.value))}matchesComparison(a){switch(this.op){case"<":return a<0;case"<=":return a<=0;case"==":return 0===a;case"!=":return 0!==a;case">":return a>0;case">=":return a>=0;default:return Qt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yr extends Ps{constructor(a,p){super(),this.filters=a,this.op=p,this.ae=null}static create(a,p){return new Yr(a,p)}matches(a){return ta(this)?void 0===this.filters.find(p=>!p.matches(a)):void 0!==this.filters.find(p=>p.matches(a))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((a,p)=>a.concat(p.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ta(S){return"and"===S.op}function fa(S){return function Os(S){for(const a of S.filters)if(a instanceof Yr)return!1;return!0}(S)&&ta(S)}function Yc(S){if(S instanceof Nr)return S.field.canonicalString()+S.op.toString()+vc(S.value);if(fa(S))return S.filters.map(a=>Yc(a)).join(",");{const a=S.filters.map(p=>Yc(p)).join(",");return`${S.op}(${a})`}}function Zs(S,a){return S instanceof Nr?(w=S,(P=a)instanceof Nr&&w.op===P.op&&w.field.isEqual(P.field)&&Ia(w.value,P.value)):S instanceof Yr?function(w,P){return P instanceof Yr&&w.op===P.op&&w.filters.length===P.filters.length&&w.filters.reduce((U,J,ve)=>U&&Zs(J,P.filters[ve]),!0)}(S,a):void Qt();var w,P}function Uu(S){return S instanceof Nr?`${(p=S).field.canonicalString()} ${p.op} ${vc(p.value)}`:S instanceof Yr?function(p){return p.op.toString()+" {"+p.getFilters().map(Uu).join(" ,")+"}"}(S):"Filter";var p}class Ea extends Nr{constructor(a,p,w){super(a,p,w),this.key=Xi.fromName(w.referenceValue)}matches(a){const p=Xi.comparator(a.key,this.key);return this.matchesComparison(p)}}class Ga extends Nr{constructor(a,p){super(a,"in",p),this.keys=uc(0,p)}matches(a){return this.keys.some(p=>p.isEqual(a.key))}}class nl extends Nr{constructor(a,p){super(a,"not-in",p),this.keys=uc(0,p)}matches(a){return!this.keys.some(p=>p.isEqual(a.key))}}function uc(S,a){var p;return((null===(p=a.arrayValue)||void 0===p?void 0:p.values)||[]).map(w=>Xi.fromName(w.referenceValue))}class gd extends Nr{constructor(a,p){super(a,"array-contains",p)}matches(a){const p=a.data.field(this.field);return rs(p)&&gc(p.arrayValue,this.value)}}class sd extends Nr{constructor(a,p){super(a,"in",p)}matches(a){const p=a.data.field(this.field);return null!==p&&gc(this.value.arrayValue,p)}}class Le extends Nr{constructor(a,p){super(a,"not-in",p)}matches(a){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const p=a.data.field(this.field);return null!==p&&!gc(this.value.arrayValue,p)}}class qe extends Nr{constructor(a,p){super(a,"array-contains-any",p)}matches(a){const p=a.data.field(this.field);return!(!rs(p)||!p.arrayValue.values)&&p.arrayValue.values.some(w=>gc(this.value.arrayValue,w))}}class St{constructor(a,p=null,w=[],P=[],U=null,J=null,ve=null){this.path=a,this.collectionGroup=p,this.orderBy=w,this.filters=P,this.limit=U,this.startAt=J,this.endAt=ve,this.ue=null}}function ln(S,a=null,p=[],w=[],P=null,U=null,J=null){return new St(S,a,p,w,P,U,J)}function Fn(S){const a=Vn(S);if(null===a.ue){let p=a.path.canonicalString();null!==a.collectionGroup&&(p+="|cg:"+a.collectionGroup),p+="|f:",p+=a.filters.map(w=>Yc(w)).join(","),p+="|ob:",p+=a.orderBy.map(w=>{return(U=w).field.canonicalString()+U.dir;var U}).join(","),Jt(a.limit)||(p+="|l:",p+=a.limit),a.startAt&&(p+="|lb:",p+=a.startAt.inclusive?"b:":"a:",p+=a.startAt.position.map(w=>vc(w)).join(",")),a.endAt&&(p+="|ub:",p+=a.endAt.inclusive?"a:":"b:",p+=a.endAt.position.map(w=>vc(w)).join(",")),a.ue=p}return a.ue}function Gn(S,a){if(S.limit!==a.limit||S.orderBy.length!==a.orderBy.length)return!1;for(let p=0;p<S.orderBy.length;p++)if(!ea(S.orderBy[p],a.orderBy[p]))return!1;if(S.filters.length!==a.filters.length)return!1;for(let p=0;p<S.filters.length;p++)if(!Zs(S.filters[p],a.filters[p]))return!1;return S.collectionGroup===a.collectionGroup&&!!S.path.isEqual(a.path)&&!!os(S.startAt,a.startAt)&&os(S.endAt,a.endAt)}function Mi(S){return Xi.isDocumentKey(S.path)&&null===S.collectionGroup&&0===S.filters.length}class Ko{constructor(a,p=null,w=[],P=[],U=null,J="F",ve=null,Re=null){this.path=a,this.collectionGroup=p,this.explicitOrderBy=w,this.filters=P,this.limit=U,this.limitType=J,this.startAt=ve,this.endAt=Re,this.ce=null,this.le=null,this.he=null}}function gr(S){return new Ko(S)}function Xr(S){return 0===S.filters.length&&null===S.limit&&null==S.startAt&&null==S.endAt&&(0===S.explicitOrderBy.length||1===S.explicitOrderBy.length&&S.explicitOrderBy[0].field.isKeyField())}function sa(S){return null!==S.collectionGroup}function xl(S){const a=Vn(S);if(null===a.ce){a.ce=[];const p=new Set;for(const U of a.explicitOrderBy)a.ce.push(U),p.add(U.field.canonicalString());const w=a.explicitOrderBy.length>0?a.explicitOrderBy[a.explicitOrderBy.length-1].dir:"asc";(function(J){let ve=new Gs(po.comparator);return J.filters.forEach(Re=>{Re.getFlattenedFilters().forEach(st=>{st.isInequality()&&(ve=ve.add(st.field))})}),ve})(a).forEach(U=>{p.has(U.canonicalString())||U.isKeyField()||a.ce.push(new Cs(U,w))}),p.has(po.keyField().canonicalString())||a.ce.push(new Cs(po.keyField(),w))}return a.ce}function ms(S){const a=Vn(S);return a.le||(a.le=function js(S,a){if("F"===S.limitType)return ln(S.path,S.collectionGroup,a,S.filters,S.limit,S.startAt,S.endAt);{a=a.map(P=>new Cs(P.field,"desc"===P.dir?"asc":"desc"));const p=S.endAt?new hr(S.endAt.position,S.endAt.inclusive):null,w=S.startAt?new hr(S.startAt.position,S.startAt.inclusive):null;return ln(S.path,S.collectionGroup,a,S.filters,S.limit,p,w)}}(a,xl(S))),a.le}function Sa(S,a){const p=S.filters.concat([a]);return new Ko(S.path,S.collectionGroup,S.explicitOrderBy.slice(),p,S.limit,S.limitType,S.startAt,S.endAt)}function Tc(S,a,p){return new Ko(S.path,S.collectionGroup,S.explicitOrderBy.slice(),S.filters.slice(),a,p,S.startAt,S.endAt)}function Sl(S,a){return Gn(ms(S),ms(a))&&S.limitType===a.limitType}function Ll(S){return`${Fn(ms(S))}|lt:${S.limitType}`}function ya(S){return`Query(target=${function(p){let w=p.path.canonicalString();return null!==p.collectionGroup&&(w+=" collectionGroup="+p.collectionGroup),p.filters.length>0&&(w+=`, filters: [${p.filters.map(P=>Uu(P)).join(", ")}]`),Jt(p.limit)||(w+=", limit: "+p.limit),p.orderBy.length>0&&(w+=`, orderBy: [${p.orderBy.map(P=>{return`${(J=P).field.canonicalString()} (${J.dir})`;var J}).join(", ")}]`),p.startAt&&(w+=", startAt: ",w+=p.startAt.inclusive?"b:":"a:",w+=p.startAt.position.map(P=>vc(P)).join(",")),p.endAt&&(w+=", endAt: ",w+=p.endAt.inclusive?"a:":"b:",w+=p.endAt.position.map(P=>vc(P)).join(",")),`Target(${w})`}(ms(S))}; limitType=${S.limitType})`}function Xe(S,a){return a.isFoundDocument()&&function(w,P){const U=P.key.path;return null!==w.collectionGroup?P.key.hasCollectionId(w.collectionGroup)&&w.path.isPrefixOf(U):Xi.isDocumentKey(w.path)?w.path.isEqual(U):w.path.isImmediateParentOf(U)}(S,a)&&function(w,P){for(const U of xl(w))if(!U.field.isKeyField()&&null===P.data.field(U.field))return!1;return!0}(S,a)&&function(w,P){for(const U of w.filters)if(!U.matches(P))return!1;return!0}(S,a)&&(P=a,!((w=S).startAt&&!function(J,ve,Re){const st=Ir(J,ve,Re);return J.inclusive?st<=0:st<0}(w.startAt,xl(w),P)||w.endAt&&!function(J,ve,Re){const st=Ir(J,ve,Re);return J.inclusive?st>=0:st>0}(w.endAt,xl(w),P)));var w,P}function vt(S){return(a,p)=>{let w=!1;for(const P of xl(S)){const U=He(P,a,p);if(0!==U)return U;w=w||P.field.isKeyField()}return 0}}function He(S,a,p){const w=S.field.isKeyField()?Xi.comparator(a.key,p.key):function(U,J,ve){const Re=J.data.field(U),st=ve.data.field(U);return null!==Re&&null!==st?Gl(Re,st):Qt()}(S.field,a,p);switch(S.dir){case"asc":return w;case"desc":return-1*w;default:return Qt()}}class Zt{constructor(a,p){this.mapKeyFn=a,this.equalsFn=p,this.inner={},this.innerSize=0}get(a){const p=this.mapKeyFn(a),w=this.inner[p];if(void 0!==w)for(const[P,U]of w)if(this.equalsFn(P,a))return U}has(a){return void 0!==this.get(a)}set(a,p){const w=this.mapKeyFn(a),P=this.inner[w];if(void 0===P)return this.inner[w]=[[a,p]],void this.innerSize++;for(let U=0;U<P.length;U++)if(this.equalsFn(P[U][0],a))return void(P[U]=[a,p]);P.push([a,p]),this.innerSize++}delete(a){const p=this.mapKeyFn(a),w=this.inner[p];if(void 0===w)return!1;for(let P=0;P<w.length;P++)if(this.equalsFn(w[P][0],a))return 1===w.length?delete this.inner[p]:w.splice(P,1),this.innerSize--,!0;return!1}forEach(a){bi(this.inner,(p,w)=>{for(const[P,U]of w)a(P,U)})}isEmpty(){return Vr(this.inner)}size(){return this.innerSize}}const Uo=new is(Xi.comparator);function Tr(){return Uo}const Wa=new is(Xi.comparator);function _l(...S){let a=Wa;for(const p of S)a=a.insert(p.key,p);return a}function Pc(S){let a=Wa;return S.forEach((p,w)=>a=a.insert(p,w.overlayedDocument)),a}function Xa(){return _c()}function cs(){return _c()}function _c(){return new Zt(S=>S.toString(),(S,a)=>S.isEqual(a))}const ch=new is(Xi.comparator),Dd=new Gs(Xi.comparator);function us(...S){let a=Dd;for(const p of S)a=a.add(p);return a}const ec=new Gs(ko);function b0(S,a){if(S.useProto3Json){if(isNaN(a))return{doubleValue:"NaN"};if(a===1/0)return{doubleValue:"Infinity"};if(a===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ln(a)?"-0":a}}function uh(S){return{integerValue:""+S}}function xh(S,a){return function Lt(S){return"number"==typeof S&&Number.isInteger(S)&&!Ln(S)&&S<=Number.MAX_SAFE_INTEGER&&S>=Number.MIN_SAFE_INTEGER}(a)?uh(a):b0(S,a)}class Ih{constructor(){this._=void 0}}function Cu(S,a,p){return S instanceof _d?function(P,U){const J={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:P.seconds,nanos:P.nanoseconds}}}};return U&&$u(U)&&(U=ju(U)),U&&(J.fields.__previous_value__=U),{mapValue:J}}(p,a):S instanceof pu?dc(S,a):S instanceof Rc?Wd(S,a):function(P,U){const J=Eh(P,U),ve=ga(J)+ga(P.Pe);return vl(J)&&vl(P.Pe)?uh(ve):b0(P.serializer,ve)}(S,a)}function dh(S,a,p){return S instanceof pu?dc(S,a):S instanceof Rc?Wd(S,a):p}function Eh(S,a){return S instanceof ks?vl(w=a)||(U=w)&&"doubleValue"in U?a:{integerValue:0}:null;var w,U}class _d extends Ih{}class pu extends Ih{constructor(a){super(),this.elements=a}}function dc(S,a){const p=a1(a);for(const w of S.elements)p.some(P=>Ia(P,w))||p.push(w);return{arrayValue:{values:p}}}class Rc extends Ih{constructor(a){super(),this.elements=a}}function Wd(S,a){let p=a1(a);for(const w of S.elements)p=p.filter(P=>!Ia(P,w));return{arrayValue:{values:p}}}class ks extends Ih{constructor(a,p){super(),this.serializer=a,this.Pe=p}}function ga(S){return Ra(S.integerValue||S.doubleValue)}function a1(S){return rs(S)&&S.arrayValue.values?S.arrayValue.values.slice():[]}class $0{constructor(a,p){this.version=a,this.transformResults=p}}class ll{constructor(a,p){this.updateTime=a,this.exists=p}static none(){return new ll}static exists(a){return new ll(void 0,a)}static updateTime(a){return new ll(a)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(a){return this.exists===a.exists&&(this.updateTime?!!a.updateTime&&this.updateTime.isEqual(a.updateTime):!a.updateTime)}}function yc(S,a){return void 0!==S.updateTime?a.isFoundDocument()&&a.version.isEqual(S.updateTime):void 0===S.exists||S.exists===a.isFoundDocument()}class Ls{}function j0(S,a){if(!S.hasLocalMutations||a&&0===a.fields.length)return null;if(null===a)return S.isNoDocument()?new Rr(S.key,ll.none()):new Pd(S.key,S.data,ll.none());{const p=S.data,w=so.empty();let P=new Gs(po.comparator);for(let U of a.fields)if(!P.has(U)){let J=p.field(U);null===J&&U.length>1&&(U=U.popLast(),J=p.field(U)),null===J?w.delete(U):w.set(U,J),P=P.add(U)}return new bc(S.key,w,new Ha(P.toArray()),ll.none())}}function I0(S,a,p){S instanceof Pd?function(P,U,J){const ve=P.value.clone(),Re=Xs(P.fieldTransforms,U,J.transformResults);ve.setAll(Re),U.convertToFoundDocument(J.version,ve).setHasCommittedMutations()}(S,a,p):S instanceof bc?function(P,U,J){if(!yc(P.precondition,U))return void U.convertToUnknownDocument(J.version);const ve=Xs(P.fieldTransforms,U,J.transformResults),Re=U.data;Re.setAll(qd(P)),Re.setAll(ve),U.convertToFoundDocument(J.version,Re).setHasCommittedMutations()}(S,a,p):a.convertToNoDocument(p.version).setHasCommittedMutations()}function Bl(S,a,p,w){return S instanceof Pd?function(U,J,ve,Re){if(!yc(U.precondition,J))return ve;const st=U.value.clone(),Wt=E0(U.fieldTransforms,Re,J);return st.setAll(Wt),J.convertToFoundDocument(J.version,st).setHasLocalMutations(),null}(S,a,p,w):S instanceof bc?function(U,J,ve,Re){if(!yc(U.precondition,J))return ve;const st=E0(U.fieldTransforms,Re,J),Wt=J.data;return Wt.setAll(qd(U)),Wt.setAll(st),J.convertToFoundDocument(J.version,Wt).setHasLocalMutations(),null===ve?null:ve.unionWith(U.fieldMask.fields).unionWith(U.fieldTransforms.map(In=>In.field))}(S,a,p,w):(ve=p,yc(S.precondition,J=a)?(J.convertToNoDocument(J.version).setHasLocalMutations(),null):ve);var J,ve}function ku(S,a){let p=null;for(const w of S.fieldTransforms){const P=a.data.field(w.field),U=Eh(w.transform,P||null);null!=U&&(null===p&&(p=so.empty()),p.set(w.field,U))}return p||null}function Hh(S,a){return S.type===a.type&&!!S.key.isEqual(a.key)&&!!S.precondition.isEqual(a.precondition)&&(P=a.fieldTransforms,!!(void 0===(w=S.fieldTransforms)&&void 0===P||w&&P&&Er(w,P,(U,J)=>function x0(S,a){return S.field.isEqual(a.field)&&(P=a.transform,(w=S.transform)instanceof pu&&P instanceof pu||w instanceof Rc&&P instanceof Rc?Er(w.elements,P.elements,Ia):w instanceof ks&&P instanceof ks?Ia(w.Pe,P.Pe):w instanceof _d&&P instanceof _d);var w,P}(U,J))))&&(0===S.type?S.value.isEqual(a.value):1!==S.type||S.data.isEqual(a.data)&&S.fieldMask.isEqual(a.fieldMask));var w,P}class Pd extends Ls{constructor(a,p,w,P=[]){super(),this.key=a,this.value=p,this.precondition=w,this.fieldTransforms=P,this.type=0}getFieldMask(){return null}}class bc extends Ls{constructor(a,p,w,P,U=[]){super(),this.key=a,this.data=p,this.fieldMask=w,this.precondition=P,this.fieldTransforms=U,this.type=1}getFieldMask(){return this.fieldMask}}function qd(S){const a=new Map;return S.fieldMask.fields.forEach(p=>{if(!p.isEmpty()){const w=S.data.field(p);a.set(p,w)}}),a}function Xs(S,a,p){const w=new Map;En(S.length===p.length);for(let P=0;P<p.length;P++){const U=S[P],J=U.transform,ve=a.data.field(U.field);w.set(U.field,dh(J,ve,p[P]))}return w}function E0(S,a,p){const w=new Map;for(const P of S){const U=P.transform,J=p.data.field(P.field);w.set(P.field,Cu(U,J,a))}return w}class Rr extends Ls{constructor(a,p){super(),this.key=a,this.precondition=p,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yd extends Ls{constructor(a,p){super(),this.key=a,this.precondition=p,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rd{constructor(a,p,w,P){this.batchId=a,this.localWriteTime=p,this.baseMutations=w,this.mutations=P}applyToRemoteDocument(a,p){const w=p.mutationResults;for(let P=0;P<this.mutations.length;P++){const U=this.mutations[P];U.key.isEqual(a.key)&&I0(U,a,w[P])}}applyToLocalView(a,p){for(const w of this.baseMutations)w.key.isEqual(a.key)&&(p=Bl(w,a,p,this.localWriteTime));for(const w of this.mutations)w.key.isEqual(a.key)&&(p=Bl(w,a,p,this.localWriteTime));return p}applyToLocalDocumentSet(a,p){const w=cs();return this.mutations.forEach(P=>{const U=a.get(P.key),J=U.overlayedDocument;let ve=this.applyToLocalView(J,U.mutatedFields);ve=p.has(P.key)?null:ve;const Re=j0(J,ve);null!==Re&&w.set(P.key,Re),J.isValidDocument()||J.convertToNoDocument(vi.min())}),w}keys(){return this.mutations.reduce((a,p)=>a.add(p.key),us())}isEqual(a){return this.batchId===a.batchId&&Er(this.mutations,a.mutations,(p,w)=>Hh(p,w))&&Er(this.baseMutations,a.baseMutations,(p,w)=>Hh(p,w))}}class cl{constructor(a,p,w,P){this.batch=a,this.commitVersion=p,this.mutationResults=w,this.docVersions=P}static from(a,p,w){En(a.mutations.length===w.length);let P=function(){return ch}();const U=a.mutations;for(let J=0;J<U.length;J++)P=P.insert(U[J].key,w[J].version);return new cl(a,p,w,P)}}class fu{constructor(a,p){this.largestBatchId=a,this.mutation=p}getKey(){return this.mutation.key}isEqual(a){return null!==a&&this.mutation===a.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fe{constructor(a,p){this.count=a,this.unchangedNames=p}}var Ce,Nt;function Gt(S){if(void 0===S)return kn("GRPC error has no .code"),Ke.UNKNOWN;switch(S){case Ce.OK:return Ke.OK;case Ce.CANCELLED:return Ke.CANCELLED;case Ce.UNKNOWN:return Ke.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return Ke.INTERNAL;case Ce.UNAVAILABLE:return Ke.UNAVAILABLE;case Ce.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case Ce.NOT_FOUND:return Ke.NOT_FOUND;case Ce.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case Ce.ABORTED:return Ke.ABORTED;case Ce.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case Ce.DATA_LOSS:return Ke.DATA_LOSS;default:return Qt()}}(Nt=Ce||(Ce={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";const ir=new qt([4294967295,4294967295],0);function fs(S){const a=function pi(){return new TextEncoder}().encode(S),p=new jt;return p.update(a),new Uint8Array(p.digest())}function na(S){const a=new DataView(S.buffer),p=a.getUint32(0,!0),w=a.getUint32(4,!0),P=a.getUint32(8,!0),U=a.getUint32(12,!0);return[new qt([p,w],0),new qt([P,U],0)]}class Ws{constructor(a,p,w){if(this.bitmap=a,this.padding=p,this.hashCount=w,p<0||p>=8)throw new $r(`Invalid padding: ${p}`);if(w<0)throw new $r(`Invalid hash count: ${w}`);if(a.length>0&&0===this.hashCount)throw new $r(`Invalid hash count: ${w}`);if(0===a.length&&0!==p)throw new $r(`Invalid padding when bitmap length is 0: ${p}`);this.Ie=8*a.length-p,this.Te=qt.fromNumber(this.Ie)}Ee(a,p,w){let P=a.add(p.multiply(qt.fromNumber(w)));return 1===P.compare(ir)&&(P=new qt([P.getBits(0),P.getBits(1)],0)),P.modulo(this.Te).toNumber()}de(a){return!!(this.bitmap[Math.floor(a/8)]&1<<a%8)}mightContain(a){if(0===this.Ie)return!1;const p=fs(a),[w,P]=na(p);for(let U=0;U<this.hashCount;U++){const J=this.Ee(w,P,U);if(!this.de(J))return!1}return!0}static create(a,p,w){const P=a%8==0?0:8-a%8,U=new Uint8Array(Math.ceil(a/8)),J=new Ws(U,P,p);return w.forEach(ve=>J.insert(ve)),J}insert(a){if(0===this.Ie)return;const p=fs(a),[w,P]=na(p);for(let U=0;U<this.hashCount;U++){const J=this.Ee(w,P,U);this.Ae(J)}}Ae(a){const p=Math.floor(a/8);this.bitmap[p]|=1<<a%8}}class $r extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fa{constructor(a,p,w,P,U){this.snapshotVersion=a,this.targetChanges=p,this.targetMismatches=w,this.documentUpdates=P,this.resolvedLimboDocuments=U}static createSynthesizedRemoteEventForCurrentChange(a,p,w){const P=new Map;return P.set(a,la.createSynthesizedTargetChangeForCurrentChange(a,p,w)),new Fa(vi.min(),P,new is(ko),Tr(),us())}}class la{constructor(a,p,w,P,U){this.resumeToken=a,this.current=p,this.addedDocuments=w,this.modifiedDocuments=P,this.removedDocuments=U}static createSynthesizedTargetChangeForCurrentChange(a,p,w){return new la(w,p,us(),us(),us())}}class Wl{constructor(a,p,w,P){this.Re=a,this.removedTargetIds=p,this.key=w,this.Ve=P}}class Tl{constructor(a,p){this.targetId=a,this.me=p}}class ul{constructor(a,p,w=_a.EMPTY_BYTE_STRING,P=null){this.state=a,this.targetIds=p,this.resumeToken=w,this.cause=P}}class ma{constructor(){this.fe=0,this.ge=Ka(),this.pe=_a.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(a){a.approximateByteSize()>0&&(this.we=!0,this.pe=a)}Ce(){let a=us(),p=us(),w=us();return this.ge.forEach((P,U)=>{switch(U){case 0:a=a.add(P);break;case 2:p=p.add(P);break;case 1:w=w.add(P);break;default:Qt()}}),new la(this.pe,this.ye,a,p,w)}ve(){this.we=!1,this.ge=Ka()}Fe(a,p){this.we=!0,this.ge=this.ge.insert(a,p)}Me(a){this.we=!0,this.ge=this.ge.remove(a)}xe(){this.fe+=1}Oe(){this.fe-=1,En(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ta{constructor(a){this.Le=a,this.Be=new Map,this.ke=Tr(),this.qe=hc(),this.Qe=new is(ko)}Ke(a){for(const p of a.Re)a.Ve&&a.Ve.isFoundDocument()?this.$e(p,a.Ve):this.Ue(p,a.key,a.Ve);for(const p of a.removedTargetIds)this.Ue(p,a.key,a.Ve)}We(a){this.forEachTarget(a,p=>{const w=this.Ge(p);switch(a.state){case 0:this.ze(p)&&w.De(a.resumeToken);break;case 1:w.Oe(),w.Se||w.ve(),w.De(a.resumeToken);break;case 2:w.Oe(),w.Se||this.removeTarget(p);break;case 3:this.ze(p)&&(w.Ne(),w.De(a.resumeToken));break;case 4:this.ze(p)&&(this.je(p),w.De(a.resumeToken));break;default:Qt()}})}forEachTarget(a,p){a.targetIds.length>0?a.targetIds.forEach(p):this.Be.forEach((w,P)=>{this.ze(P)&&p(P)})}He(a){const p=a.targetId,w=a.me.count,P=this.Je(p);if(P){const U=P.target;if(Mi(U))if(0===w){const J=new Xi(U.path);this.Ue(p,J,qo.newNoDocument(J,vi.min()))}else En(1===w);else{const J=this.Ye(p);if(J!==w){const ve=this.Ze(a),Re=ve?this.Xe(ve,a,J):1;0!==Re&&(this.je(p),this.Qe=this.Qe.insert(p,2===Re?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(a){const p=a.me.unchangedNames;if(!p||!p.bits)return null;const{bits:{bitmap:w="",padding:P=0},hashCount:U=0}=p;let J,ve;try{J=Vc(w).toUint8Array()}catch(Re){if(Re instanceof su)return Te("Decoding the base64 bloom filter in existence filter failed ("+Re.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw Re}try{ve=new Ws(J,P,U)}catch(Re){return Te(Re instanceof $r?"BloomFilter error: ":"Applying bloom filter failed: ",Re),null}return 0===ve.Ie?null:ve}Xe(a,p,w){return p.me.count===w-this.nt(a,p.targetId)?0:2}nt(a,p){const w=this.Le.getRemoteKeysForTarget(p);let P=0;return w.forEach(U=>{const J=this.Le.tt(),ve=`projects/${J.projectId}/databases/${J.database}/documents/${U.path.canonicalString()}`;a.mightContain(ve)||(this.Ue(p,U,null),P++)}),P}rt(a){const p=new Map;this.Be.forEach((U,J)=>{const ve=this.Je(J);if(ve){if(U.current&&Mi(ve.target)){const Re=new Xi(ve.target.path);null!==this.ke.get(Re)||this.it(J,Re)||this.Ue(J,Re,qo.newNoDocument(Re,a))}U.be&&(p.set(J,U.Ce()),U.ve())}});let w=us();this.qe.forEach((U,J)=>{let ve=!0;J.forEachWhile(Re=>{const st=this.Je(Re);return!st||"TargetPurposeLimboResolution"===st.purpose||(ve=!1,!1)}),ve&&(w=w.add(U))}),this.ke.forEach((U,J)=>J.setReadTime(a));const P=new Fa(a,p,this.Qe,this.ke,w);return this.ke=Tr(),this.qe=hc(),this.Qe=new is(ko),P}$e(a,p){if(!this.ze(a))return;const w=this.it(a,p.key)?2:0;this.Ge(a).Fe(p.key,w),this.ke=this.ke.insert(p.key,p),this.qe=this.qe.insert(p.key,this.st(p.key).add(a))}Ue(a,p,w){if(!this.ze(a))return;const P=this.Ge(a);this.it(a,p)?P.Fe(p,1):P.Me(p),this.qe=this.qe.insert(p,this.st(p).delete(a)),w&&(this.ke=this.ke.insert(p,w))}removeTarget(a){this.Be.delete(a)}Ye(a){const p=this.Ge(a).Ce();return this.Le.getRemoteKeysForTarget(a).size+p.addedDocuments.size-p.removedDocuments.size}xe(a){this.Ge(a).xe()}Ge(a){let p=this.Be.get(a);return p||(p=new ma,this.Be.set(a,p)),p}st(a){let p=this.qe.get(a);return p||(p=new Gs(ko),this.qe=this.qe.insert(a,p)),p}ze(a){const p=null!==this.Je(a);return p||Et("WatchChangeAggregator","Detected inactive target",a),p}Je(a){const p=this.Be.get(a);return p&&p.Se?null:this.Le.ot(a)}je(a){this.Be.set(a,new ma),this.Le.getRemoteKeysForTarget(a).forEach(p=>{this.Ue(a,p,null)})}it(a,p){return this.Le.getRemoteKeysForTarget(a).has(p)}}function hc(){return new is(Xi.comparator)}function Ka(){return new is(Xi.comparator)}const wc={asc:"ASCENDING",desc:"DESCENDING"},Ya={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ad={and:"AND",or:"OR"};class Xd{constructor(a,p){this.databaseId=a,this.useProto3Json=p}}function Nl(S,a){return S.useProto3Json||Jt(a)?a:{value:a}}function tc(S,a){return S.useProto3Json?`${new Date(1e3*a.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+a.nanoseconds).slice(-9)}Z`:{seconds:""+a.seconds,nanos:a.nanoseconds}}function ld(S,a){return S.useProto3Json?a.toBase64():a.toUint8Array()}function bd(S,a){return tc(S,a.toTimestamp())}function Fl(S){return En(!!S),vi.fromTimestamp(function(p){const w=Ja(p);return new ji(w.seconds,w.nanos)}(S))}function cd(S,a){return zc(S,a).canonicalString()}function zc(S,a){const p=(P=S,new ui(["projects",P.projectId,"databases",P.database])).child("documents");var P;return void 0===a?p:p.child(a)}function ia(S){const a=ui.fromString(S);return En(ud(a)),a}function Zc(S,a){return cd(S.databaseId,a.path)}function Vl(S,a){const p=ia(a);if(p.get(1)!==S.databaseId.projectId)throw new Ae(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+p.get(1)+" vs "+S.databaseId.projectId);if(p.get(3)!==S.databaseId.database)throw new Ae(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+p.get(3)+" vs "+S.databaseId.database);return new Xi(Gh(p))}function Oc(S,a){return cd(S.databaseId,a)}function Ch(S){return new ui(["projects",S.databaseId.projectId,"databases",S.databaseId.database]).canonicalString()}function Gh(S){return En(S.length>4&&"documents"===S.get(4)),S.popFirst(5)}function dl(S,a,p){return{name:Zc(S,a),fields:p.value.mapValue.fields}}function Tu(S,a){return{documents:[Oc(S,a.path)]}}function hh(S,a){const p={structuredQuery:{}},w=a.path;let P;null!==a.collectionGroup?(P=w,p.structuredQuery.from=[{collectionId:a.collectionGroup,allDescendants:!0}]):(P=w.popLast(),p.structuredQuery.from=[{collectionId:w.lastSegment()}]),p.parent=Oc(S,P);const U=function(st){if(0!==st.length)return H0(Yr.create(st,"and"))}(a.filters);U&&(p.structuredQuery.where=U);const J=function(st){if(0!==st.length)return st.map(Wt=>{return{field:nc((hi=Wt).field),direction:gu(hi.dir)};var hi})}(a.orderBy);J&&(p.structuredQuery.orderBy=J);const ve=Nl(S,a.limit);return null!==ve&&(p.structuredQuery.limit=ve),a.startAt&&(p.structuredQuery.startAt={before:(st=a.startAt).inclusive,values:st.position}),a.endAt&&(p.structuredQuery.endAt=function(st){return{before:!st.inclusive,values:st.position}}(a.endAt)),{_t:p,parent:P};var st}function wp(S){let a=function Kd(S){const a=ia(S);return 4===a.length?ui.emptyPath():Gh(a)}(S.parent);const p=S.structuredQuery,w=p.from?p.from.length:0;let P=null;if(w>0){En(1===w);const Wt=p.from[0];Wt.allDescendants?P=Wt.collectionId:a=a.child(Wt.collectionId)}let U=[];p.where&&(U=function(In){const hi=mu(In);return hi instanceof Yr&&fa(hi)?hi.getFilters():[hi]}(p.where));let J=[];p.orderBy&&(J=p.orderBy.map(hi=>{return new Cs(qh((Zo=hi).field),function(rr){switch(rr){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Zo.direction));var Zo}));let ve=null;p.limit&&(ve=function(In){let hi;return hi="object"==typeof In?In.value:In,Jt(hi)?null:hi}(p.limit));let Re=null;var In;p.startAt&&(Re=new hr((In=p.startAt).values||[],!!In.before));let st=null;return p.endAt&&(st=function(In){return new hr(In.values||[],!In.before)}(p.endAt)),function sr(S,a,p,w,P,U,J,ve){return new Ko(S,a,p,w,P,U,J,ve)}(a,P,J,U,ve,"F",Re,st)}function mu(S){return void 0!==S.unaryFilter?function(p){switch(p.unaryFilter.op){case"IS_NAN":const w=qh(p.unaryFilter.field);return Nr.create(w,"==",{doubleValue:NaN});case"IS_NULL":const P=qh(p.unaryFilter.field);return Nr.create(P,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const U=qh(p.unaryFilter.field);return Nr.create(U,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const J=qh(p.unaryFilter.field);return Nr.create(J,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}}(S):void 0!==S.fieldFilter?Nr.create(qh((p=S).fieldFilter.field),function(P){switch(P){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}}(p.fieldFilter.op),p.fieldFilter.value):void 0!==S.compositeFilter?function(p){return Yr.create(p.compositeFilter.filters.map(w=>mu(w)),function(P){switch(P){case"AND":return"and";case"OR":return"or";default:return Qt()}}(p.compositeFilter.op))}(S):Qt();var p}function gu(S){return wc[S]}function U0(S){return Ya[S]}function k0(S){return ad[S]}function nc(S){return{fieldPath:S.canonicalString()}}function qh(S){return po.fromServerFormat(S.fieldPath)}function H0(S){return S instanceof Nr?function(p){if("=="===p.op){if(nt(p.value))return{unaryFilter:{field:nc(p.field),op:"IS_NAN"}};if(Na(p.value))return{unaryFilter:{field:nc(p.field),op:"IS_NULL"}}}else if("!="===p.op){if(nt(p.value))return{unaryFilter:{field:nc(p.field),op:"IS_NOT_NAN"}};if(Na(p.value))return{unaryFilter:{field:nc(p.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nc(p.field),op:U0(p.op),value:p.value}}}(S):S instanceof Yr?function(p){const w=p.getFilters().map(P=>H0(P));return 1===w.length?w[0]:{compositeFilter:{op:k0(p.op),filters:w}}}(S):Qt()}function S0(S){const a=[];return S.fields.forEach(p=>a.push(p.canonicalString())),{fieldPaths:a}}function ud(S){return S.length>=4&&"projects"===S.get(0)&&"databases"===S.get(2)}class Hu{constructor(a,p,w,P,U=vi.min(),J=vi.min(),ve=_a.EMPTY_BYTE_STRING,Re=null){this.target=a,this.targetId=p,this.purpose=w,this.sequenceNumber=P,this.snapshotVersion=U,this.lastLimboFreeSnapshotVersion=J,this.resumeToken=ve,this.expectedCount=Re}withSequenceNumber(a){return new Hu(this.target,this.targetId,this.purpose,a,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(a,p){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,p,this.lastLimboFreeSnapshotVersion,a,null)}withExpectedCount(a){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,a)}withLastLimboFreeSnapshotVersion(a){return new Hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,a,this.resumeToken,this.expectedCount)}}class T0{constructor(a){this.ct=a}}function me(S){const a=wp({parent:S.parent,structuredQuery:S.structuredQuery});return"LAST"===S.limitType?Tc(a,a.limit,"L"):a}class or{constructor(){}Pt(a,p){this.It(a,p),p.Tt()}It(a,p){if("nullValue"in a)this.Et(p,5);else if("booleanValue"in a)this.Et(p,10),p.dt(a.booleanValue?1:0);else if("integerValue"in a)this.Et(p,15),p.dt(Ra(a.integerValue));else if("doubleValue"in a){const w=Ra(a.doubleValue);isNaN(w)?this.Et(p,13):(this.Et(p,15),Ln(w)?p.dt(0):p.dt(w))}else if("timestampValue"in a){let w=a.timestampValue;this.Et(p,20),"string"==typeof w&&(w=Ja(w)),p.At(`${w.seconds||""}`),p.dt(w.nanos||0)}else if("stringValue"in a)this.Rt(a.stringValue,p),this.Vt(p);else if("bytesValue"in a)this.Et(p,30),p.ft(Vc(a.bytesValue)),this.Vt(p);else if("referenceValue"in a)this.gt(a.referenceValue,p);else if("geoPointValue"in a){const w=a.geoPointValue;this.Et(p,45),p.dt(w.latitude||0),p.dt(w.longitude||0)}else"mapValue"in a?Yn(a)?this.Et(p,Number.MAX_SAFE_INTEGER):(this.yt(a.mapValue,p),this.Vt(p)):"arrayValue"in a?(this.wt(a.arrayValue,p),this.Vt(p)):Qt()}Rt(a,p){this.Et(p,25),this.St(a,p)}St(a,p){p.At(a)}yt(a,p){const w=a.fields||{};this.Et(p,55);for(const P of Object.keys(w))this.Rt(P,p),this.It(w[P],p)}wt(a,p){const w=a.values||[];this.Et(p,50);for(const P of w)this.It(P,p)}gt(a,p){this.Et(p,37),Xi.fromName(a).path.forEach(w=>{this.Et(p,60),this.St(w,p)})}Et(a,p){a.dt(p)}Vt(a){a.dt(2)}}or.bt=new or;class Ed{constructor(){this._n=new Th}addToCollectionParentIndex(a,p){return this._n.add(p),Jn.resolve()}getCollectionParents(a,p){return Jn.resolve(this._n.getEntries(p))}addFieldIndex(a,p){return Jn.resolve()}deleteFieldIndex(a,p){return Jn.resolve()}deleteAllFieldIndexes(a){return Jn.resolve()}createTargetIndexes(a,p){return Jn.resolve()}getDocumentsMatchingTarget(a,p){return Jn.resolve(null)}getIndexType(a,p){return Jn.resolve(0)}getFieldIndexes(a,p){return Jn.resolve([])}getNextCollectionGroupToUpdate(a){return Jn.resolve(null)}getMinOffset(a,p){return Jn.resolve(Wo.min())}getMinOffsetFromCollectionGroup(a,p){return Jn.resolve(Wo.min())}updateCollectionGroup(a,p,w){return Jn.resolve()}updateIndexEntries(a,p){return Jn.resolve()}}class Th{constructor(){this.index={}}add(a){const p=a.lastSegment(),w=a.popLast(),P=this.index[p]||new Gs(ui.comparator),U=!P.has(w);return this.index[p]=P.add(w),U}has(a){const p=a.lastSegment(),w=a.popLast(),P=this.index[p];return P&&P.has(w)}getEntries(a){return(this.index[a]||new Gs(ui.comparator)).toArray()}}new Uint8Array(0);class jc{constructor(a,p,w){this.cacheSizeCollectionThreshold=a,this.percentileToCollect=p,this.maximumSequenceNumbersToCollect=w}static withCacheSize(a){return new jc(a,jc.DEFAULT_COLLECTION_PERCENTILE,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}jc.DEFAULT_COLLECTION_PERCENTILE=10,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jc.DEFAULT=new jc(41943040,jc.DEFAULT_COLLECTION_PERCENTILE,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jc.DISABLED=new jc(-1,0,0);class mh{constructor(a){this.On=a}next(){return this.On+=2,this.On}static Nn(){return new mh(0)}static Ln(){return new mh(-1)}}class Xl{constructor(){this.changes=new Zt(a=>a.toString(),(a,p)=>a.isEqual(p)),this.changesApplied=!1}addEntry(a){this.assertNotApplied(),this.changes.set(a.key,a)}removeEntry(a,p){this.assertNotApplied(),this.changes.set(a,qo.newInvalidDocument(a).setReadTime(p))}getEntry(a,p){this.assertNotApplied();const w=this.changes.get(p);return void 0!==w?Jn.resolve(w):this.getFromCache(a,p)}getEntries(a,p){return this.getAllFromCache(a,p)}apply(a){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(a)}assertNotApplied(){}}class Zd{constructor(a,p){this.overlayedDocument=a,this.mutatedFields=p}}class Qh{constructor(a,p,w,P){this.remoteDocumentCache=a,this.mutationQueue=p,this.documentOverlayCache=w,this.indexManager=P}getDocument(a,p){let w=null;return this.documentOverlayCache.getOverlay(a,p).next(P=>(w=P,this.remoteDocumentCache.getEntry(a,p))).next(P=>(null!==w&&Bl(w.mutation,P,Ha.empty(),ji.now()),P))}getDocuments(a,p){return this.remoteDocumentCache.getEntries(a,p).next(w=>this.getLocalViewOfDocuments(a,w,us()).next(()=>w))}getLocalViewOfDocuments(a,p,w=us()){const P=Xa();return this.populateOverlays(a,P,p).next(()=>this.computeViews(a,p,P,w).next(U=>{let J=_l();return U.forEach((ve,Re)=>{J=J.insert(ve,Re.overlayedDocument)}),J}))}getOverlayedDocuments(a,p){const w=Xa();return this.populateOverlays(a,w,p).next(()=>this.computeViews(a,p,w,us()))}populateOverlays(a,p,w){const P=[];return w.forEach(U=>{p.has(U)||P.push(U)}),this.documentOverlayCache.getOverlays(a,P).next(U=>{U.forEach((J,ve)=>{p.set(J,ve)})})}computeViews(a,p,w,P){let U=Tr();const J=_c(),ve=_c();return p.forEach((Re,st)=>{const Wt=w.get(st.key);P.has(st.key)&&(void 0===Wt||Wt.mutation instanceof bc)?U=U.insert(st.key,st):void 0!==Wt?(J.set(st.key,Wt.mutation.getFieldMask()),Bl(Wt.mutation,st,Wt.mutation.getFieldMask(),ji.now())):J.set(st.key,Ha.empty())}),this.recalculateAndSaveOverlays(a,U).next(Re=>(Re.forEach((st,Wt)=>J.set(st,Wt)),p.forEach((st,Wt)=>{var In;return ve.set(st,new Zd(Wt,null!==(In=J.get(st))&&void 0!==In?In:null))}),ve))}recalculateAndSaveOverlays(a,p){const w=_c();let P=new is((J,ve)=>J-ve),U=us();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(a,p).next(J=>{for(const ve of J)ve.keys().forEach(Re=>{const st=p.get(Re);if(null===st)return;let Wt=w.get(Re)||Ha.empty();Wt=ve.applyToLocalView(st,Wt),w.set(Re,Wt);const In=(P.get(ve.batchId)||us()).add(Re);P=P.insert(ve.batchId,In)})}).next(()=>{const J=[],ve=P.getReverseIterator();for(;ve.hasNext();){const Re=ve.getNext(),st=Re.key,Wt=Re.value,In=cs();Wt.forEach(hi=>{if(!U.has(hi)){const Ji=j0(p.get(hi),w.get(hi));null!==Ji&&In.set(hi,Ji),U=U.add(hi)}}),J.push(this.documentOverlayCache.saveOverlays(a,st,In))}return Jn.waitFor(J)}).next(()=>w)}recalculateAndSaveOverlaysForDocumentKeys(a,p){return this.remoteDocumentCache.getEntries(a,p).next(w=>this.recalculateAndSaveOverlays(a,w))}getDocumentsMatchingQuery(a,p,w,P){return Xi.isDocumentKey((J=p).path)&&null===J.collectionGroup&&0===J.filters.length?this.getDocumentsMatchingDocumentQuery(a,p.path):sa(p)?this.getDocumentsMatchingCollectionGroupQuery(a,p,w,P):this.getDocumentsMatchingCollectionQuery(a,p,w,P);var J}getNextDocuments(a,p,w,P){return this.remoteDocumentCache.getAllFromCollectionGroup(a,p,w,P).next(U=>{const J=P-U.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(a,p,w.largestBatchId,P-U.size):Jn.resolve(Xa());let ve=-1,Re=U;return J.next(st=>Jn.forEach(st,(Wt,In)=>(ve<In.largestBatchId&&(ve=In.largestBatchId),U.get(Wt)?Jn.resolve():this.remoteDocumentCache.getEntry(a,Wt).next(hi=>{Re=Re.insert(Wt,hi)}))).next(()=>this.populateOverlays(a,st,U)).next(()=>this.computeViews(a,Re,st,us())).next(Wt=>({batchId:ve,changes:Pc(Wt)})))})}getDocumentsMatchingDocumentQuery(a,p){return this.getDocument(a,new Xi(p)).next(w=>{let P=_l();return w.isFoundDocument()&&(P=P.insert(w.key,w)),P})}getDocumentsMatchingCollectionGroupQuery(a,p,w,P){const U=p.collectionGroup;let J=_l();return this.indexManager.getCollectionParents(a,U).next(ve=>Jn.forEach(ve,Re=>{const st=(In=p,hi=Re.child(U),new Ko(hi,null,In.explicitOrderBy.slice(),In.filters.slice(),In.limit,In.limitType,In.startAt,In.endAt));var In,hi;return this.getDocumentsMatchingCollectionQuery(a,st,w,P).next(Wt=>{Wt.forEach((In,hi)=>{J=J.insert(In,hi)})})}).next(()=>J))}getDocumentsMatchingCollectionQuery(a,p,w,P){let U;return this.documentOverlayCache.getOverlaysForCollection(a,p.path,w.largestBatchId).next(J=>(U=J,this.remoteDocumentCache.getDocumentsMatchingQuery(a,p,w,U,P))).next(J=>{U.forEach((Re,st)=>{const Wt=st.getKey();null===J.get(Wt)&&(J=J.insert(Wt,qo.newInvalidDocument(Wt)))});let ve=_l();return J.forEach((Re,st)=>{const Wt=U.get(Re);void 0!==Wt&&Bl(Wt.mutation,st,Ha.empty(),ji.now()),Xe(p,st)&&(ve=ve.insert(Re,st))}),ve})}}class hd{constructor(a){this.serializer=a,this.cr=new Map,this.lr=new Map}getBundleMetadata(a,p){return Jn.resolve(this.cr.get(p))}saveBundleMetadata(a,p){return this.cr.set(p.id,{id:(P=p).id,version:P.version,createTime:Fl(P.createTime)}),Jn.resolve();var P}getNamedQuery(a,p){return Jn.resolve(this.lr.get(p))}saveNamedQuery(a,p){return this.lr.set(p.name,{name:(P=p).name,query:me(P.bundledQuery),readTime:Fl(P.readTime)}),Jn.resolve();var P}}class ja{constructor(){this.overlays=new is(Xi.comparator),this.hr=new Map}getOverlay(a,p){return Jn.resolve(this.overlays.get(p))}getOverlays(a,p){const w=Xa();return Jn.forEach(p,P=>this.getOverlay(a,P).next(U=>{null!==U&&w.set(P,U)})).next(()=>w)}saveOverlays(a,p,w){return w.forEach((P,U)=>{this.ht(a,p,U)}),Jn.resolve()}removeOverlaysForBatchId(a,p,w){const P=this.hr.get(w);return void 0!==P&&(P.forEach(U=>this.overlays=this.overlays.remove(U)),this.hr.delete(w)),Jn.resolve()}getOverlaysForCollection(a,p,w){const P=Xa(),U=p.length+1,J=new Xi(p.child("")),ve=this.overlays.getIteratorFrom(J);for(;ve.hasNext();){const Re=ve.getNext().value,st=Re.getKey();if(!p.isPrefixOf(st.path))break;st.path.length===U&&Re.largestBatchId>w&&P.set(Re.getKey(),Re)}return Jn.resolve(P)}getOverlaysForCollectionGroup(a,p,w,P){let U=new is((st,Wt)=>st-Wt);const J=this.overlays.getIterator();for(;J.hasNext();){const st=J.getNext().value;if(st.getKey().getCollectionGroup()===p&&st.largestBatchId>w){let Wt=U.get(st.largestBatchId);null===Wt&&(Wt=Xa(),U=U.insert(st.largestBatchId,Wt)),Wt.set(st.getKey(),st)}}const ve=Xa(),Re=U.getIterator();for(;Re.hasNext()&&(Re.getNext().value.forEach((st,Wt)=>ve.set(st,Wt)),!(ve.size()>=P)););return Jn.resolve(ve)}ht(a,p,w){const P=this.overlays.get(w.key);if(null!==P){const J=this.hr.get(P.largestBatchId).delete(w.key);this.hr.set(P.largestBatchId,J)}this.overlays=this.overlays.insert(w.key,new fu(p,w));let U=this.hr.get(p);void 0===U&&(U=us(),this.hr.set(p,U)),this.hr.set(p,U.add(w.key))}}class Qd{constructor(){this.Pr=new Gs(jl.Ir),this.Tr=new Gs(jl.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(a,p){const w=new jl(a,p);this.Pr=this.Pr.add(w),this.Tr=this.Tr.add(w)}dr(a,p){a.forEach(w=>this.addReference(w,p))}removeReference(a,p){this.Ar(new jl(a,p))}Rr(a,p){a.forEach(w=>this.removeReference(w,p))}Vr(a){const p=new Xi(new ui([])),w=new jl(p,a),P=new jl(p,a+1),U=[];return this.Tr.forEachInRange([w,P],J=>{this.Ar(J),U.push(J.key)}),U}mr(){this.Pr.forEach(a=>this.Ar(a))}Ar(a){this.Pr=this.Pr.delete(a),this.Tr=this.Tr.delete(a)}gr(a){const p=new Xi(new ui([])),w=new jl(p,a),P=new jl(p,a+1);let U=us();return this.Tr.forEachInRange([w,P],J=>{U=U.add(J.key)}),U}containsKey(a){const p=new jl(a,0),w=this.Pr.firstAfterOrEqual(p);return null!==w&&a.isEqual(w.key)}}class jl{constructor(a,p){this.key=a,this.pr=p}static Ir(a,p){return Xi.comparator(a.key,p.key)||ko(a.pr,p.pr)}static Er(a,p){return ko(a.pr,p.pr)||Xi.comparator(a.key,p.key)}}class vh{constructor(a,p){this.indexManager=a,this.referenceDelegate=p,this.mutationQueue=[],this.yr=1,this.wr=new Gs(jl.Ir)}checkEmpty(a){return Jn.resolve(0===this.mutationQueue.length)}addMutationBatch(a,p,w,P){const U=this.yr;this.yr++;const J=new Rd(U,p,w,P);this.mutationQueue.push(J);for(const ve of P)this.wr=this.wr.add(new jl(ve.key,U)),this.indexManager.addToCollectionParentIndex(a,ve.key.path.popLast());return Jn.resolve(J)}lookupMutationBatch(a,p){return Jn.resolve(this.Sr(p))}getNextMutationBatchAfterBatchId(a,p){const P=this.br(p+1),U=P<0?0:P;return Jn.resolve(this.mutationQueue.length>U?this.mutationQueue[U]:null)}getHighestUnacknowledgedBatchId(){return Jn.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(a){return Jn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(a,p){const w=new jl(p,0),P=new jl(p,Number.POSITIVE_INFINITY),U=[];return this.wr.forEachInRange([w,P],J=>{const ve=this.Sr(J.pr);U.push(ve)}),Jn.resolve(U)}getAllMutationBatchesAffectingDocumentKeys(a,p){let w=new Gs(ko);return p.forEach(P=>{const U=new jl(P,0),J=new jl(P,Number.POSITIVE_INFINITY);this.wr.forEachInRange([U,J],ve=>{w=w.add(ve.pr)})}),Jn.resolve(this.Dr(w))}getAllMutationBatchesAffectingQuery(a,p){const w=p.path,P=w.length+1;let U=w;Xi.isDocumentKey(U)||(U=U.child(""));const J=new jl(new Xi(U),0);let ve=new Gs(ko);return this.wr.forEachWhile(Re=>{const st=Re.key.path;return!!w.isPrefixOf(st)&&(st.length===P&&(ve=ve.add(Re.pr)),!0)},J),Jn.resolve(this.Dr(ve))}Dr(a){const p=[];return a.forEach(w=>{const P=this.Sr(w);null!==P&&p.push(P)}),p}removeMutationBatch(a,p){En(0===this.Cr(p.batchId,"removed")),this.mutationQueue.shift();let w=this.wr;return Jn.forEach(p.mutations,P=>{const U=new jl(P.key,p.batchId);return w=w.delete(U),this.referenceDelegate.markPotentiallyOrphaned(a,P.key)}).next(()=>{this.wr=w})}Mn(a){}containsKey(a,p){const w=new jl(p,0),P=this.wr.firstAfterOrEqual(w);return Jn.resolve(p.isEqual(P&&P.key))}performConsistencyCheck(a){return Jn.resolve()}Cr(a,p){return this.br(a)}br(a){return 0===this.mutationQueue.length?0:a-this.mutationQueue[0].batchId}Sr(a){const p=this.br(a);return p<0||p>=this.mutationQueue.length?null:this.mutationQueue[p]}}class d1{constructor(a){this.vr=a,this.docs=new is(Xi.comparator),this.size=0}setIndexManager(a){this.indexManager=a}addEntry(a,p){const w=p.key,P=this.docs.get(w),U=P?P.size:0,J=this.vr(p);return this.docs=this.docs.insert(w,{document:p.mutableCopy(),size:J}),this.size+=J-U,this.indexManager.addToCollectionParentIndex(a,w.path.popLast())}removeEntry(a){const p=this.docs.get(a);p&&(this.docs=this.docs.remove(a),this.size-=p.size)}getEntry(a,p){const w=this.docs.get(p);return Jn.resolve(w?w.document.mutableCopy():qo.newInvalidDocument(p))}getEntries(a,p){let w=Tr();return p.forEach(P=>{const U=this.docs.get(P);w=w.insert(P,U?U.document.mutableCopy():qo.newInvalidDocument(P))}),Jn.resolve(w)}getDocumentsMatchingQuery(a,p,w,P){let U=Tr();const J=p.path,ve=new Xi(J.child("")),Re=this.docs.getIteratorFrom(ve);for(;Re.hasNext();){const{key:st,value:{document:Wt}}=Re.getNext();if(!J.isPrefixOf(st.path))break;st.path.length>J.length+1||lr(new Wo((S=Wt).readTime,S.key,-1),w)<=0||(P.has(Wt.key)||Xe(p,Wt))&&(U=U.insert(Wt.key,Wt.mutableCopy()))}var S;return Jn.resolve(U)}getAllFromCollectionGroup(a,p,w,P){Qt()}Fr(a,p){return Jn.forEach(this.docs,w=>p(w))}newChangeBuffer(a){return new A1(this)}getSize(a){return Jn.resolve(this.size)}}class A1 extends Xl{constructor(a){super(),this.ar=a}applyChanges(a){const p=[];return this.changes.forEach((w,P)=>{P.isValidDocument()?p.push(this.ar.addEntry(a,P)):this.ar.removeEntry(w)}),Jn.waitFor(p)}getFromCache(a,p){return this.ar.getEntry(a,p)}getAllFromCache(a,p){return this.ar.getEntries(a,p)}}class zh{constructor(a){this.persistence=a,this.Mr=new Zt(p=>Fn(p),Gn),this.lastRemoteSnapshotVersion=vi.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Qd,this.targetCount=0,this.Lr=mh.Nn()}forEachTarget(a,p){return this.Mr.forEach((w,P)=>p(P)),Jn.resolve()}getLastRemoteSnapshotVersion(a){return Jn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(a){return Jn.resolve(this.Or)}allocateTargetId(a){return this.highestTargetId=this.Lr.next(),Jn.resolve(this.highestTargetId)}setTargetsMetadata(a,p,w){return w&&(this.lastRemoteSnapshotVersion=w),p>this.Or&&(this.Or=p),Jn.resolve()}qn(a){this.Mr.set(a.target,a);const p=a.targetId;p>this.highestTargetId&&(this.Lr=new mh(p),this.highestTargetId=p),a.sequenceNumber>this.Or&&(this.Or=a.sequenceNumber)}addTargetData(a,p){return this.qn(p),this.targetCount+=1,Jn.resolve()}updateTargetData(a,p){return this.qn(p),Jn.resolve()}removeTargetData(a,p){return this.Mr.delete(p.target),this.Nr.Vr(p.targetId),this.targetCount-=1,Jn.resolve()}removeTargets(a,p,w){let P=0;const U=[];return this.Mr.forEach((J,ve)=>{ve.sequenceNumber<=p&&null===w.get(ve.targetId)&&(this.Mr.delete(J),U.push(this.removeMatchingKeysForTargetId(a,ve.targetId)),P++)}),Jn.waitFor(U).next(()=>P)}getTargetCount(a){return Jn.resolve(this.targetCount)}getTargetData(a,p){const w=this.Mr.get(p)||null;return Jn.resolve(w)}addMatchingKeys(a,p,w){return this.Nr.dr(p,w),Jn.resolve()}removeMatchingKeys(a,p,w){this.Nr.Rr(p,w);const P=this.persistence.referenceDelegate,U=[];return P&&p.forEach(J=>{U.push(P.markPotentiallyOrphaned(a,J))}),Jn.waitFor(U)}removeMatchingKeysForTargetId(a,p){return this.Nr.Vr(p),Jn.resolve()}getMatchingKeysForTargetId(a,p){const w=this.Nr.gr(p);return Jn.resolve(w)}containsKey(a,p){return Jn.resolve(this.Nr.containsKey(p))}}class Jd{constructor(a,p){this.Br={},this.overlays={},this.kr=new Tt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=a(this),this.Qr=new zh(this),this.indexManager=new Ed,this.remoteDocumentCache=new d1(w=>this.referenceDelegate.Kr(w)),this.serializer=new T0(p),this.$r=new hd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(a){return this.indexManager}getDocumentOverlayCache(a){let p=this.overlays[a.toKey()];return p||(p=new ja,this.overlays[a.toKey()]=p),p}getMutationQueue(a,p){let w=this.Br[a.toKey()];return w||(w=new vh(p,this.referenceDelegate),this.Br[a.toKey()]=w),w}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(a,p,w){Et("MemoryPersistence","Starting transaction:",a);const P=new Lc(this.kr.next());return this.referenceDelegate.Ur(),w(P).next(U=>this.referenceDelegate.Wr(P).next(()=>U)).toPromise().then(U=>(P.raiseOnCommittedEvent(),U))}Gr(a,p){return Jn.or(Object.values(this.Br).map(w=>()=>w.containsKey(a,p)))}}class Lc extends xr{constructor(a){super(),this.currentSequenceNumber=a}}class ls{constructor(a){this.persistence=a,this.zr=new Qd,this.jr=null}static Hr(a){return new ls(a)}get Jr(){if(this.jr)return this.jr;throw Qt()}addReference(a,p,w){return this.zr.addReference(w,p),this.Jr.delete(w.toString()),Jn.resolve()}removeReference(a,p,w){return this.zr.removeReference(w,p),this.Jr.add(w.toString()),Jn.resolve()}markPotentiallyOrphaned(a,p){return this.Jr.add(p.toString()),Jn.resolve()}removeTarget(a,p){this.zr.Vr(p.targetId).forEach(P=>this.Jr.add(P.toString()));const w=this.persistence.getTargetCache();return w.getMatchingKeysForTargetId(a,p.targetId).next(P=>{P.forEach(U=>this.Jr.add(U.toString()))}).next(()=>w.removeTargetData(a,p))}Ur(){this.jr=new Set}Wr(a){const p=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Jn.forEach(this.Jr,w=>{const P=Xi.fromPath(w);return this.Yr(a,P).next(U=>{U||p.removeEntry(P,vi.min())})}).next(()=>(this.jr=null,p.apply(a)))}updateLimboDocument(a,p){return this.Yr(a,p).next(w=>{w?this.Jr.delete(p.toString()):this.Jr.add(p.toString())})}Kr(a){return 0}Yr(a,p){return Jn.or([()=>Jn.resolve(this.zr.containsKey(p)),()=>this.persistence.getTargetCache().containsKey(a,p),()=>this.persistence.Gr(a,p)])}}class Bc{constructor(a,p,w,P){this.targetId=a,this.fromCache=p,this.qi=w,this.Qi=P}static Ki(a,p){let w=us(),P=us();for(const U of p.docChanges)switch(U.type){case 0:w=w.add(U.doc.key);break;case 1:P=P.add(U.doc.key)}return new Bc(a,p.fromCache,w,P)}}class Fd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(a){this._documentReadCount+=a}}class pd{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,We.nr)()?8:function Ns(S){const a=S.match(/Android ([\d.]+)/i),p=a?a[1].split(".").slice(0,2).join("."):"-1";return Number(p)}((0,We.ZQ)())>0?6:4}initialize(a,p){this.zi=a,this.indexManager=p,this.$i=!0}getDocumentsMatchingQuery(a,p,w,P){const U={result:null};return this.ji(a,p).next(J=>{U.result=J}).next(()=>{if(!U.result)return this.Hi(a,p,P,w).next(J=>{U.result=J})}).next(()=>{if(U.result)return;const J=new Fd;return this.Ji(a,p,J).next(ve=>{if(U.result=ve,this.Ui)return this.Yi(a,p,J,ve.size)})}).next(()=>U.result)}Yi(a,p,w,P){return w.documentReadCount<this.Wi?(Pn()<=l.$b.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",ya(p),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Jn.resolve()):(Pn()<=l.$b.DEBUG&&Et("QueryEngine","Query:",ya(p),"scans",w.documentReadCount,"local documents and returns",P,"documents as results."),w.documentReadCount>this.Gi*P?(Pn()<=l.$b.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",ya(p),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(a,ms(p))):Jn.resolve())}ji(a,p){if(Xr(p))return Jn.resolve(null);let w=ms(p);return this.indexManager.getIndexType(a,w).next(P=>0===P?null:(null!==p.limit&&1===P&&(p=Tc(p,null,"F"),w=ms(p)),this.indexManager.getDocumentsMatchingTarget(a,w).next(U=>{const J=us(...U);return this.zi.getDocuments(a,J).next(ve=>this.indexManager.getMinOffset(a,w).next(Re=>{const st=this.Zi(p,ve);return this.Xi(p,st,J,Re.readTime)?this.ji(a,Tc(p,null,"F")):this.es(a,st,p,Re)}))})))}Hi(a,p,w,P){return Xr(p)||P.isEqual(vi.min())?Jn.resolve(null):this.zi.getDocuments(a,w).next(U=>{const J=this.Zi(p,U);return this.Xi(p,J,w,P)?Jn.resolve(null):(Pn()<=l.$b.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",P.toString(),ya(p)),this.es(a,J,p,function Zr(S,a){const p=S.toTimestamp().seconds,w=S.toTimestamp().nanoseconds+1,P=vi.fromTimestamp(1e9===w?new ji(p+1,0):new ji(p,w));return new Wo(P,Xi.empty(),a)}(P,-1)).next(ve=>ve))})}Zi(a,p){let w=new Gs(vt(a));return p.forEach((P,U)=>{Xe(a,U)&&(w=w.add(U))}),w}Xi(a,p,w,P){if(null===a.limit)return!1;if(w.size!==p.size)return!0;const U="F"===a.limitType?p.last():p.first();return!!U&&(U.hasPendingWrites||U.version.compareTo(P)>0)}Ji(a,p,w){return Pn()<=l.$b.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",ya(p)),this.zi.getDocumentsMatchingQuery(a,p,Wo.min(),w)}es(a,p,w,P){return this.zi.getDocumentsMatchingQuery(a,w,P).next(U=>(p.forEach(J=>{U=U.insert(J.key,J)}),U))}}class _h{constructor(a,p,w,P){this.persistence=a,this.ts=p,this.serializer=P,this.ns=new is(ko),this.rs=new Zt(U=>Fn(U),Gn),this.ss=new Map,this.os=a.getRemoteDocumentCache(),this.Qr=a.getTargetCache(),this.$r=a.getBundleCache(),this._s(w)}_s(a){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(a),this.indexManager=this.persistence.getIndexManager(a),this.mutationQueue=this.persistence.getMutationQueue(a,this.indexManager),this.localDocuments=new Qh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(a){return this.persistence.runTransaction("Collect garbage","readwrite-primary",p=>a.collect(p,this.ns))}}function r(S,a){return d.apply(this,arguments)}function d(){return(d=(0,V.A)(function*(S,a){const p=Vn(S);return yield p.persistence.runTransaction("Handle user change","readonly",w=>{let P;return p.mutationQueue.getAllMutationBatches(w).next(U=>(P=U,p._s(a),p.mutationQueue.getAllMutationBatches(w))).next(U=>{const J=[],ve=[];let Re=us();for(const st of P){J.push(st.batchId);for(const Wt of st.mutations)Re=Re.add(Wt.key)}for(const st of U){ve.push(st.batchId);for(const Wt of st.mutations)Re=Re.add(Wt.key)}return p.localDocuments.getDocuments(w,Re).next(st=>({us:st,removedBatchIds:J,addedBatchIds:ve}))})})})).apply(this,arguments)}function M(S){const a=Vn(S);return a.persistence.runTransaction("Get last remote snapshot version","readonly",p=>a.Qr.getLastRemoteSnapshotVersion(p))}function H(S,a){const p=Vn(S);return p.persistence.runTransaction("Get next mutation batch","readonly",w=>(void 0===a&&(a=-1),p.mutationQueue.getNextMutationBatchAfterBatchId(w,a)))}function se(S,a,p){return he.apply(this,arguments)}function he(){return(he=(0,V.A)(function*(S,a,p){const w=Vn(S),P=w.ns.get(a),U=p?"readwrite":"readwrite-primary";try{p||(yield w.persistence.runTransaction("Release target",U,J=>w.persistence.referenceDelegate.removeTarget(J,P)))}catch(J){if(!Fi(J))throw J;Et("LocalStore",`Failed to update sequence numbers for target ${a}: ${J}`)}w.ns=w.ns.remove(a),w.rs.delete(P.target)})).apply(this,arguments)}function ye(S,a,p){const w=Vn(S);let P=vi.min(),U=us();return w.persistence.runTransaction("Execute query","readwrite",J=>function(Re,st,Wt){const In=Vn(Re),hi=In.rs.get(Wt);return void 0!==hi?Jn.resolve(In.ns.get(hi)):In.Qr.getTargetData(st,Wt)}(w,J,ms(a)).next(ve=>{if(ve)return P=ve.lastLimboFreeSnapshotVersion,w.Qr.getMatchingKeysForTargetId(J,ve.targetId).next(Re=>{U=Re})}).next(()=>w.ts.getDocumentsMatchingQuery(J,a,p?P:vi.min(),p?U:us())).next(ve=>(function Qe(S,a,p){let w=S.ss.get(a)||vi.min();p.forEach((P,U)=>{U.readTime.compareTo(w)>0&&(w=U.readTime)}),S.ss.set(a,w)}(w,function Se(S){return S.collectionGroup||(S.path.length%2==1?S.path.lastSegment():S.path.get(S.path.length-2))}(a),ve),{documents:ve,hs:U})))}class Tn{constructor(){this.activeTargetIds=function vd(){return ec}()}As(a){this.activeTargetIds=this.activeTargetIds.add(a)}Rs(a){this.activeTargetIds=this.activeTargetIds.delete(a)}ds(){const a={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(a)}}class zn{constructor(){this.no=new Tn,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(a){}updateMutationState(a,p,w){}addLocalQueryTarget(a){return this.no.As(a),this.ro[a]||"not-current"}updateQueryState(a,p,w){this.ro[a]=p}removeLocalQueryTarget(a){this.no.Rs(a)}isLocalQueryTarget(a){return this.no.activeTargetIds.has(a)}clearQueryState(a){delete this.ro[a]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(a){return this.no.activeTargetIds.has(a)}start(){return this.no=new Tn,Promise.resolve()}handleUserChange(a,p,w){}setOnlineState(a){}shutdown(){}writeSequenceNumber(a){}notifyBundleLoaded(a){}}class mn{io(a){}shutdown(){}}class _i{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(a){this.uo.push(a)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const a of this.uo)a(0)}ao(){Et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const a of this.uo)a(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let eo=null;function io(){return null===eo?eo=268435456+Math.round(2147483648*Math.random()):eo++,"0x"+eo.toString(16)}const ie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L{constructor(a){this.lo=a.lo,this.ho=a.ho}Po(a){this.Io=a}To(a){this.Eo=a}Ao(a){this.Ro=a}onMessage(a){this.Vo=a}close(){this.ho()}send(a){this.lo(a)}mo(){this.Io()}fo(){this.Eo()}po(a){this.Ro(a)}yo(a){this.Vo(a)}}const j="WebChannelConnection";class oe extends class{constructor(p){this.databaseInfo=p,this.databaseId=p.databaseId;const w=p.ssl?"https":"http",P=encodeURIComponent(this.databaseId.projectId),U=encodeURIComponent(this.databaseId.database);this.wo=w+"://"+p.host,this.So=`projects/${P}/databases/${U}`,this.bo="(default)"===this.databaseId.database?`project_id=${P}`:`project_id=${P}&database_id=${U}`}get Do(){return!1}Co(p,w,P,U,J){const ve=io(),Re=this.vo(p,w.toUriEncodedString());Et("RestConnection",`Sending RPC '${p}' ${ve}:`,Re,P);const st={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(st,U,J),this.Mo(p,Re,st,P).then(Wt=>(Et("RestConnection",`Received RPC '${p}' ${ve}: `,Wt),Wt),Wt=>{throw Te("RestConnection",`RPC '${p}' ${ve} failed with error: `,Wt,"url: ",Re,"request:",P),Wt})}xo(p,w,P,U,J,ve){return this.Co(p,w,P,U,J)}Fo(p,w,P){p["X-Goog-Api-Client"]="gl-js/ fire/"+Ot,p["Content-Type"]="text/plain",this.databaseInfo.appId&&(p["X-Firebase-GMPID"]=this.databaseInfo.appId),w&&w.headers.forEach((U,J)=>p[J]=U),P&&P.headers.forEach((U,J)=>p[J]=U)}vo(p,w){return`${this.wo}/v1/${w}:${ie[p]}`}terminate(){}}{constructor(a){super(a),this.forceLongPolling=a.forceLongPolling,this.autoDetectLongPolling=a.autoDetectLongPolling,this.useFetchStreams=a.useFetchStreams,this.longPollingOptions=a.longPollingOptions}Mo(a,p,w,P){const U=io();return new Promise((J,ve)=>{const Re=new At;Re.setWithCredentials(!0),Re.listenOnce(fn.COMPLETE,()=>{try{switch(Re.getLastErrorCode()){case xn.NO_ERROR:const Wt=Re.getResponseJson();Et(j,`XHR for RPC '${a}' ${U} received:`,JSON.stringify(Wt)),J(Wt);break;case xn.TIMEOUT:Et(j,`RPC '${a}' ${U} timed out`),ve(new Ae(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case xn.HTTP_ERROR:const In=Re.getStatus();if(Et(j,`RPC '${a}' ${U} failed with status:`,In,"response text:",Re.getResponseText()),In>0){let hi=Re.getResponseJson();Array.isArray(hi)&&(hi=hi[0]);const Ji=null==hi?void 0:hi.error;if(Ji&&Ji.status&&Ji.message){const Zo=function(rr){const Ds=rr.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(Ds)>=0?Ds:Ke.UNKNOWN}(Ji.status);ve(new Ae(Zo,Ji.message))}else ve(new Ae(Ke.UNKNOWN,"Server responded with status "+Re.getStatus()))}else ve(new Ae(Ke.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{Et(j,`RPC '${a}' ${U} completed.`)}});const st=JSON.stringify(P);Et(j,`RPC '${a}' ${U} sending request:`,P),Re.send(p,"POST",st,w,15)})}Oo(a,p,w){const P=io(),U=[this.wo,"/","google.firestore.v1.Firestore","/",a,"/channel"],J=Mn(),ve=ei(),Re={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},st=this.longPollingOptions.timeoutSeconds;void 0!==st&&(Re.longPollingTimeout=Math.round(1e3*st)),this.useFetchStreams&&(Re.xmlHttpFactory=new Ut({})),this.Fo(Re.initMessageHeaders,p,w),Re.encodeInitMessageHeaders=!0;const Wt=U.join("");Et(j,`Creating RPC '${a}' stream ${P}: ${Wt}`,Re);const In=J.createWebChannel(Wt,Re);let hi=!1,Ji=!1;const Zo=new L({lo:rr=>{Ji?Et(j,`Not sending because RPC '${a}' stream ${P} is closed:`,rr):(hi||(Et(j,`Opening RPC '${a}' stream ${P} transport.`),In.open(),hi=!0),Et(j,`RPC '${a}' stream ${P} sending:`,rr),In.send(rr))},ho:()=>In.close()}),br=(rr,Ds,zs)=>{rr.listen(Ds,Bs=>{try{zs(Bs)}catch(Aa){setTimeout(()=>{throw Aa},0)}})};return br(In,yt.EventType.OPEN,()=>{Ji||(Et(j,`RPC '${a}' stream ${P} transport opened.`),Zo.mo())}),br(In,yt.EventType.CLOSE,()=>{Ji||(Ji=!0,Et(j,`RPC '${a}' stream ${P} transport closed`),Zo.po())}),br(In,yt.EventType.ERROR,rr=>{Ji||(Ji=!0,Te(j,`RPC '${a}' stream ${P} transport errored:`,rr),Zo.po(new Ae(Ke.UNAVAILABLE,"The operation could not be completed")))}),br(In,yt.EventType.MESSAGE,rr=>{var Ds;if(!Ji){const zs=rr.data[0];En(!!zs);const Aa=zs.error||(null===(Ds=zs[0])||void 0===Ds?void 0:Ds.error);if(Aa){Et(j,`RPC '${a}' stream ${P} received error:`,Aa);const Pl=Aa.status;let qa=function(yi){const Bi=Ce[yi];if(void 0!==Bi)return Gt(Bi)}(Pl),zi=Aa.message;void 0===qa&&(qa=Ke.INTERNAL,zi="Unknown error status: "+Pl+" with message "+Aa.message),Ji=!0,Zo.po(new Ae(qa,zi)),In.close()}else Et(j,`RPC '${a}' stream ${P} received:`,zs),Zo.yo(zs)}}),br(ve,ht.STAT_EVENT,rr=>{rr.stat===rn.PROXY?Et(j,`RPC '${a}' stream ${P} detected buffering proxy`):rr.stat===rn.NOPROXY&&Et(j,`RPC '${a}' stream ${P} detected no buffering proxy`)}),setTimeout(()=>{Zo.fo()},0),Zo}}function lt(){return typeof document<"u"?document:null}function cn(S){return new Xd(S,!0)}class hn{constructor(a,p,w=1e3,P=1.5,U=6e4){this.oi=a,this.timerId=p,this.No=w,this.Lo=P,this.Bo=U,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(a){this.cancel();const p=Math.floor(this.ko+this.Uo()),w=Math.max(0,Date.now()-this.Qo),P=Math.max(0,p-w);P>0&&Et("ExponentialBackoff",`Backing off for ${P} ms (base delay: ${this.ko} ms, delay with jitter: ${p} ms, last attempt: ${w} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,P,()=>(this.Qo=Date.now(),a())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Qn{constructor(a,p,w,P,U,J,ve,Re){this.oi=a,this.Go=w,this.zo=P,this.connection=U,this.authCredentialsProvider=J,this.appCheckCredentialsProvider=ve,this.listener=Re,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new hn(a,p)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var a=this;return(0,V.A)(function*(){a.Zo()&&(yield a.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(a){this.s_(),this.stream.send(a)}r_(){var a=this;return(0,V.A)(function*(){if(a.Xo())return a.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(a,p){var w=this;return(0,V.A)(function*(){w.s_(),w.o_(),w.Yo.cancel(),w.jo++,4!==a?w.Yo.reset():p&&p.code===Ke.RESOURCE_EXHAUSTED?(kn(p.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),w.Yo.Ko()):p&&p.code===Ke.UNAUTHENTICATED&&3!==w.state&&(w.authCredentialsProvider.invalidateToken(),w.appCheckCredentialsProvider.invalidateToken()),null!==w.stream&&(w.__(),w.stream.close(),w.stream=null),w.state=a,yield w.listener.Ao(p)})()}__(){}auth(){this.state=1;const a=this.a_(this.jo),p=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([w,P])=>{this.jo===p&&this.u_(w,P)},w=>{a(()=>{const P=new Ae(Ke.UNKNOWN,"Fetching auth token failed: "+w.message);return this.c_(P)})})}u_(a,p){const w=this.a_(this.jo);this.stream=this.l_(a,p),this.stream.Po(()=>{w(()=>this.listener.Po())}),this.stream.To(()=>{w(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(P=>{w(()=>this.c_(P))}),this.stream.onMessage(P=>{w(()=>this.onMessage(P))})}e_(){var a=this;this.state=5,this.Yo.$o((0,V.A)(function*(){a.state=0,a.start()}))}c_(a){return Et("PersistentStream",`close with error: ${a}`),this.stream=null,this.close(4,a)}a_(a){return p=>{this.oi.enqueueAndForget(()=>this.jo===a?p():(Et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wn extends Qn{constructor(a,p,w,P,U,J){super(a,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",p,w,P,J),this.serializer=U}l_(a,p){return this.connection.Oo("Listen",a,p)}onMessage(a){this.Yo.reset();const p=function wd(S,a){let p;if("targetChange"in a){const w="NO_CHANGE"===(st=a.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===st?1:"REMOVE"===st?2:"CURRENT"===st?3:"RESET"===st?4:Qt(),P=a.targetChange.targetIds||[],U=function(st,Wt){return st.useProto3Json?(En(void 0===Wt||"string"==typeof Wt),_a.fromBase64String(Wt||"")):(En(void 0===Wt||Wt instanceof Buffer||Wt instanceof Uint8Array),_a.fromUint8Array(Wt||new Uint8Array))}(S,a.targetChange.resumeToken),J=a.targetChange.cause,ve=J&&function(st){const Wt=void 0===st.code?Ke.UNKNOWN:Gt(st.code);return new Ae(Wt,st.message||"")}(J);p=new ul(w,P,U,ve||null)}else if("documentChange"in a){const w=a.documentChange,P=Vl(S,w.document.name),U=Fl(w.document.updateTime),J=w.document.createTime?Fl(w.document.createTime):vi.min(),ve=new so({mapValue:{fields:w.document.fields}}),Re=qo.newFoundDocument(P,U,J,ve);p=new Wl(w.targetIds||[],w.removedTargetIds||[],Re.key,Re)}else if("documentDelete"in a){const w=a.documentDelete,P=Vl(S,w.document),U=w.readTime?Fl(w.readTime):vi.min(),J=qo.newNoDocument(P,U);p=new Wl([],w.removedTargetIds||[],J.key,J)}else if("documentRemove"in a){const w=a.documentRemove,P=Vl(S,w.document);p=new Wl([],w.removedTargetIds||[],P,null)}else{if(!("filter"in a))return Qt();{const w=a.filter,{count:P=0,unchangedNames:U}=w,J=new fe(P,U);p=new Tl(w.targetId,J)}}var st;return p}(this.serializer,a),w=function(U){if(!("targetChange"in U))return vi.min();const J=U.targetChange;return J.targetIds&&J.targetIds.length?vi.min():J.readTime?Fl(J.readTime):vi.min()}(a);return this.listener.h_(p,w)}P_(a){const p={};p.database=Ch(this.serializer),p.addTarget=function(U,J){let ve;const Re=J.target;if(ve=Mi(Re)?{documents:Tu(U,Re)}:{query:hh(U,Re)._t},ve.targetId=J.targetId,J.resumeToken.approximateByteSize()>0){ve.resumeToken=ld(U,J.resumeToken);const st=Nl(U,J.expectedCount);null!==st&&(ve.expectedCount=st)}else if(J.snapshotVersion.compareTo(vi.min())>0){ve.readTime=tc(U,J.snapshotVersion.toTimestamp());const st=Nl(U,J.expectedCount);null!==st&&(ve.expectedCount=st)}return ve}(this.serializer,a);const w=function Wh(S,a){const p=function(P){switch(P){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qt()}}(a.purpose);return null==p?null:{"goog-listen-tags":p}}(0,a);w&&(p.labels=w),this.i_(p)}I_(a){const p={};p.database=Ch(this.serializer),p.removeTarget=a,this.i_(p)}}class Wi extends Qn{constructor(a,p,w,P,U,J){super(a,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",p,w,P,J),this.serializer=U,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(a,p){return this.connection.Oo("Write",a,p)}onMessage(a){if(En(!!a.streamToken),this.lastStreamToken=a.streamToken,this.T_){this.Yo.reset();const p=function $s(S,a){return S&&S.length>0?(En(void 0!==a),S.map(p=>function(P,U){let J=Fl(P.updateTime?P.updateTime:U);return J.isEqual(vi.min())&&(J=Fl(U)),new $0(J,P.transformResults||[])}(p,a))):[]}(a.writeResults,a.commitTime),w=Fl(a.commitTime);return this.listener.A_(w,p)}return En(!a.writeResults||0===a.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const a={};a.database=Ch(this.serializer),this.i_(a)}d_(a){const p={streamToken:this.lastStreamToken,writes:a.map(w=>function xd(S,a){let p;if(a instanceof Pd)p={update:dl(S,a.key,a.value)};else if(a instanceof Rr)p={delete:Zc(S,a.key)};else if(a instanceof bc)p={update:dl(S,a.key,a.data),updateMask:S0(a.fieldMask)};else{if(!(a instanceof yd))return Qt();p={verify:Zc(S,a.key)}}return a.fieldTransforms.length>0&&(p.updateTransforms=a.fieldTransforms.map(w=>function(U,J){const ve=J.transform;if(ve instanceof _d)return{fieldPath:J.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(ve instanceof pu)return{fieldPath:J.field.canonicalString(),appendMissingElements:{values:ve.elements}};if(ve instanceof Rc)return{fieldPath:J.field.canonicalString(),removeAllFromArray:{values:ve.elements}};if(ve instanceof ks)return{fieldPath:J.field.canonicalString(),increment:ve.Pe};throw Qt()}(0,w))),a.precondition.isNone||(p.currentDocument=void 0!==(U=a.precondition).updateTime?{updateTime:bd(S,U.updateTime)}:void 0!==U.exists?{exists:U.exists}:Qt()),p;var U}(this.serializer,w))};this.i_(p)}}class vr extends class{}{constructor(a,p,w,P){super(),this.authCredentials=a,this.appCheckCredentials=p,this.connection=w,this.serializer=P,this.m_=!1}f_(){if(this.m_)throw new Ae(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}Co(a,p,w,P){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([U,J])=>this.connection.Co(a,zc(p,w),P,U,J)).catch(U=>{throw"FirebaseError"===U.name?(U.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),U):new Ae(Ke.UNKNOWN,U.toString())})}xo(a,p,w,P,U){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([J,ve])=>this.connection.xo(a,zc(p,w),P,J,ve,U)).catch(J=>{throw"FirebaseError"===J.name?(J.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),J):new Ae(Ke.UNKNOWN,J.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Sr{constructor(a,p){this.asyncQueue=a,this.onlineStateHandler=p,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(a){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${a.toString()}`),this.S_("Offline")))}set(a){this.C_(),this.g_=0,"Online"===a&&(this.y_=!1),this.S_(a)}S_(a){a!==this.state&&(this.state=a,this.onlineStateHandler(a))}b_(a){const p=`Could not reach Cloud Firestore backend. ${a}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(kn(p),this.y_=!1):Et("OnlineStateTracker",p)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Mr{constructor(a,p,w,P,U){var J=this;this.localStore=a,this.datastore=p,this.asyncQueue=w,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=U,this.O_.io(ve=>{w.enqueueAndForget((0,V.A)(function*(){var Re;ua(J)&&(Et("RemoteStore","Restarting streams for network reachability change."),yield(Re=(0,V.A)(function*(Wt){const In=Vn(Wt);In.M_.add(4),yield As(In),In.N_.set("Unknown"),In.M_.delete(4),yield Hr(In)}),function st(Wt){return Re.apply(this,arguments)})(J))}))}),this.N_=new Sr(w,P)}}function Hr(S){return Za.apply(this,arguments)}function Za(){return(Za=(0,V.A)(function*(S){if(ua(S))for(const a of S.x_)yield a(!0)})).apply(this,arguments)}function As(S){return ts.apply(this,arguments)}function ts(){return(ts=(0,V.A)(function*(S){for(const a of S.x_)yield a(!1)})).apply(this,arguments)}function Js(S,a){const p=Vn(S);p.F_.has(a.targetId)||(p.F_.set(a.targetId,a),bl(p)?Ca(p):yh(p).Xo()&&Hs(p,a))}function ca(S,a){const p=Vn(S),w=yh(p);p.F_.delete(a),w.Xo()&&gs(p,a),0===p.F_.size&&(w.Xo()?w.n_():ua(p)&&p.N_.set("Unknown"))}function Hs(S,a){if(S.L_.xe(a.targetId),a.resumeToken.approximateByteSize()>0||a.snapshotVersion.compareTo(vi.min())>0){const p=S.remoteSyncer.getRemoteKeysForTarget(a.targetId).size;a=a.withExpectedCount(p)}yh(S).P_(a)}function gs(S,a){S.L_.xe(a),yh(S).I_(a)}function Ca(S){S.L_=new Ta({getRemoteKeysForTarget:a=>S.remoteSyncer.getRemoteKeysForTarget(a),ot:a=>S.F_.get(a)||null,tt:()=>S.datastore.serializer.databaseId}),yh(S).start(),S.N_.w_()}function bl(S){return ua(S)&&!yh(S).Zo()&&S.F_.size>0}function ua(S){return 0===Vn(S).M_.size}function za(S){S.L_=void 0}function qi(S){return er.apply(this,arguments)}function er(){return(er=(0,V.A)(function*(S){S.N_.set("Online")})).apply(this,arguments)}function ss(S){return pa.apply(this,arguments)}function pa(){return(pa=(0,V.A)(function*(S){S.F_.forEach((a,p)=>{Hs(S,a)})})).apply(this,arguments)}function ri(S,a){return Du.apply(this,arguments)}function Du(){return(Du=(0,V.A)(function*(S,a){za(S),bl(S)?(S.N_.D_(a),Ca(S)):S.N_.set("Unknown")})).apply(this,arguments)}function fd(S,a,p){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,V.A)(function*(S,a,p){if(S.N_.set("Online"),a instanceof ul&&2===a.state&&a.cause)try{yield(w=(0,V.A)(function*(U,J){const ve=J.cause;for(const Re of J.targetIds)U.F_.has(Re)&&(yield U.remoteSyncer.rejectListen(Re,ve),U.F_.delete(Re),U.L_.removeTarget(Re))}),function P(U,J){return w.apply(this,arguments)})(S,a)}catch(w){Et("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),w),yield Nc(S,w)}else if(a instanceof Wl?S.L_.Ke(a):a instanceof Tl?S.L_.He(a):S.L_.We(a),!p.isEqual(vi.min()))try{const w=yield M(S.localStore);p.compareTo(w)>=0&&(yield function(U,J){const ve=U.L_.rt(J);return ve.targetChanges.forEach((Re,st)=>{if(Re.resumeToken.approximateByteSize()>0){const Wt=U.F_.get(st);Wt&&U.F_.set(st,Wt.withResumeToken(Re.resumeToken,J))}}),ve.targetMismatches.forEach((Re,st)=>{const Wt=U.F_.get(Re);if(!Wt)return;U.F_.set(Re,Wt.withResumeToken(_a.EMPTY_BYTE_STRING,Wt.snapshotVersion)),gs(U,Re);const In=new Hu(Wt.target,Re,st,Wt.sequenceNumber);Hs(U,In)}),U.remoteSyncer.applyRemoteEvent(ve)}(S,p))}catch(w){Et("RemoteStore","Failed to raise snapshot:",w),yield Nc(S,w)}var w}),Uc.apply(this,arguments)}function Nc(S,a,p){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,V.A)(function*(S,a,p){if(!Fi(a))throw a;S.M_.add(1),yield As(S),S.N_.set("Offline"),p||(p=()=>M(S.localStore)),S.asyncQueue.enqueueRetryable((0,V.A)(function*(){Et("RemoteStore","Retrying IndexedDB access"),yield p(),S.M_.delete(1),yield Hr(S)}))})).apply(this,arguments)}function Jh(S,a){return a().catch(p=>Nc(S,p,a))}function hl(S){return X0.apply(this,arguments)}function X0(){return(X0=(0,V.A)(function*(S){const a=Vn(S),p=Xu(a);let w=a.v_.length>0?a.v_[a.v_.length-1].batchId:-1;for(;K0(a);)try{const P=yield H(a.localStore,w);if(null===P){0===a.v_.length&&p.n_();break}w=P.batchId,D1(a,P)}catch(P){yield Nc(a,P)}e0(a)&&P1(a)})).apply(this,arguments)}function K0(S){return ua(S)&&S.v_.length<10}function D1(S,a){S.v_.push(a);const p=Xu(S);p.Xo()&&p.E_&&p.d_(a.mutations)}function e0(S){return ua(S)&&!Xu(S).Zo()&&S.v_.length>0}function P1(S){Xu(S).start()}function Po(S){return da.apply(this,arguments)}function da(){return(da=(0,V.A)(function*(S){Xu(S).V_()})).apply(this,arguments)}function xp(S){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,V.A)(function*(S){const a=Xu(S);for(const p of S.v_)a.d_(p.mutations)})).apply(this,arguments)}function wl(S,a,p){return qu.apply(this,arguments)}function qu(){return(qu=(0,V.A)(function*(S,a,p){const w=S.v_.shift(),P=cl.from(w,a,p);yield Jh(S,()=>S.remoteSyncer.applySuccessfulWrite(P)),yield hl(S)})).apply(this,arguments)}function Pu(S,a){return el.apply(this,arguments)}function el(){return el=(0,V.A)(function*(S,a){var p;a&&Xu(S).E_&&(yield(p=(0,V.A)(function*(P,U){if(function Ie(S){switch(S){default:return Qt();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}(ve=U.code)&&ve!==Ke.ABORTED){const J=P.v_.shift();Xu(P).t_(),yield Jh(P,()=>P.remoteSyncer.rejectFailedWrite(J.batchId,U)),yield hl(P)}var ve}),function w(P,U){return p.apply(this,arguments)})(S,a)),e0(S)&&P1(S)}),el.apply(this,arguments)}function J1(S,a){return ep.apply(this,arguments)}function ep(){return(ep=(0,V.A)(function*(S,a){const p=Vn(S);p.asyncQueue.verifyOperationInProgress(),Et("RemoteStore","RemoteStore received new credentials");const w=ua(p);p.M_.add(3),yield As(p),w&&p.N_.set("Unknown"),yield p.remoteSyncer.handleCredentialChange(a),p.M_.delete(3),yield Hr(p)})).apply(this,arguments)}function sl(S,a){return va.apply(this,arguments)}function va(){return(va=(0,V.A)(function*(S,a){const p=Vn(S);a?(p.M_.delete(2),yield Hr(p)):a||(p.M_.add(2),yield As(p),p.N_.set("Unknown"))})).apply(this,arguments)}function yh(S){return S.B_||(S.B_=function(p,w,P){const U=Vn(p);return U.f_(),new Wn(w,U.connection,U.authCredentials,U.appCheckCredentials,U.serializer,P)}(S.datastore,S.asyncQueue,{Po:qi.bind(null,S),To:ss.bind(null,S),Ao:ri.bind(null,S),h_:fd.bind(null,S)}),S.x_.push(function(){var a=(0,V.A)(function*(p){p?(S.B_.t_(),bl(S)?Ca(S):S.N_.set("Unknown")):(yield S.B_.stop(),za(S))});return function(p){return a.apply(this,arguments)}}())),S.B_}function Xu(S){return S.k_||(S.k_=function(p,w,P){const U=Vn(p);return U.f_(),new Wi(w,U.connection,U.authCredentials,U.appCheckCredentials,U.serializer,P)}(S.datastore,S.asyncQueue,{Po:()=>Promise.resolve(),To:Po.bind(null,S),Ao:Pu.bind(null,S),R_:xp.bind(null,S),A_:wl.bind(null,S)}),S.x_.push(function(){var a=(0,V.A)(function*(p){p?(S.k_.t_(),yield hl(S)):(yield S.k_.stop(),S.v_.length>0&&(Et("RemoteStore",`Stopping write stream with ${S.v_.length} pending writes`),S.v_=[]))});return function(p){return a.apply(this,arguments)}}())),S.k_}class Ip{constructor(a,p,w,P,U){this.asyncQueue=a,this.timerId=p,this.targetTimeMs=w,this.op=P,this.removalCallback=U,this.deferred=new Ge,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(J=>{})}get promise(){return this.deferred.promise}static createAndSchedule(a,p,w,P,U){const J=Date.now()+w,ve=new Ip(a,p,J,P,U);return ve.start(w),ve}start(a){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),a)}skipDelay(){return this.handleDelayElapsed()}cancel(a){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(Ke.CANCELLED,"Operation cancelled"+(a?": "+a:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(a=>this.deferred.resolve(a))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(S,a){if(kn("AsyncQueue",`${a}: ${S}`),Fi(S))return new Ae(Ke.UNAVAILABLE,`${a}: ${S}`);throw S}class _u{constructor(a){this.comparator=a?(p,w)=>a(p,w)||Xi.comparator(p.key,w.key):(p,w)=>Xi.comparator(p.key,w.key),this.keyedMap=_l(),this.sortedSet=new is(this.comparator)}static emptySet(a){return new _u(a.comparator)}has(a){return null!=this.keyedMap.get(a)}get(a){return this.keyedMap.get(a)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(a){const p=this.keyedMap.get(a);return p?this.sortedSet.indexOf(p):-1}get size(){return this.sortedSet.size}forEach(a){this.sortedSet.inorderTraversal((p,w)=>(a(p),!1))}add(a){const p=this.delete(a.key);return p.copy(p.keyedMap.insert(a.key,a),p.sortedSet.insert(a,null))}delete(a){const p=this.get(a);return p?this.copy(this.keyedMap.remove(a),this.sortedSet.remove(p)):this}isEqual(a){if(!(a instanceof _u)||this.size!==a.size)return!1;const p=this.sortedSet.getIterator(),w=a.sortedSet.getIterator();for(;p.hasNext();){const P=p.getNext().key,U=w.getNext().key;if(!P.isEqual(U))return!1}return!0}toString(){const a=[];return this.forEach(p=>{a.push(p.toString())}),0===a.length?"DocumentSet ()":"DocumentSet (\n  "+a.join("  \n")+"\n)"}copy(a,p){const w=new _u;return w.comparator=this.comparator,w.keyedMap=a,w.sortedSet=p,w}}class Ku{constructor(){this.q_=new is(Xi.comparator)}track(a){const p=a.doc.key,w=this.q_.get(p);w?0!==a.type&&3===w.type?this.q_=this.q_.insert(p,a):3===a.type&&1!==w.type?this.q_=this.q_.insert(p,{type:w.type,doc:a.doc}):2===a.type&&2===w.type?this.q_=this.q_.insert(p,{type:2,doc:a.doc}):2===a.type&&0===w.type?this.q_=this.q_.insert(p,{type:0,doc:a.doc}):1===a.type&&0===w.type?this.q_=this.q_.remove(p):1===a.type&&2===w.type?this.q_=this.q_.insert(p,{type:1,doc:w.doc}):0===a.type&&1===w.type?this.q_=this.q_.insert(p,{type:2,doc:a.doc}):Qt():this.q_=this.q_.insert(p,a)}Q_(){const a=[];return this.q_.inorderTraversal((p,w)=>{a.push(w)}),a}}class t0{constructor(a,p,w,P,U,J,ve,Re,st){this.query=a,this.docs=p,this.oldDocs=w,this.docChanges=P,this.mutatedKeys=U,this.fromCache=J,this.syncStateChanged=ve,this.excludesMetadataChanges=Re,this.hasCachedResults=st}static fromInitialDocuments(a,p,w,P,U){const J=[];return p.forEach(ve=>{J.push({type:0,doc:ve})}),new t0(a,p,_u.emptySet(p),J,w,P,!0,!1,U)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(a){if(!(this.fromCache===a.fromCache&&this.hasCachedResults===a.hasCachedResults&&this.syncStateChanged===a.syncStateChanged&&this.mutatedKeys.isEqual(a.mutatedKeys)&&Sl(this.query,a.query)&&this.docs.isEqual(a.docs)&&this.oldDocs.isEqual(a.oldDocs)))return!1;const p=this.docChanges,w=a.docChanges;if(p.length!==w.length)return!1;for(let P=0;P<p.length;P++)if(p[P].type!==w[P].type||!p[P].doc.isEqual(w[P].doc))return!1;return!0}}class Ru{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(a=>a.G_())}}class eh{constructor(){this.queries=new Zt(a=>Ll(a),Sl),this.onlineState="Unknown",this.z_=new Set}}function rf(S,a){return sf.apply(this,arguments)}function sf(){return(sf=(0,V.A)(function*(S,a){const p=Vn(S);let w=3;const P=a.query;let U=p.queries.get(P);U?!U.W_()&&a.G_()&&(w=2):(U=new Ru,w=a.G_()?0:1);try{switch(w){case 0:U.K_=yield p.onListen(P,!0);break;case 1:U.K_=yield p.onListen(P,!1);break;case 2:yield p.onFirstRemoteStoreListen(P)}}catch(J){const ve=Fh(J,`Initialization of query '${ya(a.query)}' failed`);return void a.onError(ve)}p.queries.set(P,U),U.U_.push(a),a.j_(p.onlineState),U.K_&&a.H_(U.K_)&&Vh(p)})).apply(this,arguments)}function x2(S,a){return h1.apply(this,arguments)}function h1(){return(h1=(0,V.A)(function*(S,a){const p=Vn(S),w=a.query;let P=3;const U=p.queries.get(w);if(U){const J=U.U_.indexOf(a);J>=0&&(U.U_.splice(J,1),0===U.U_.length?P=a.G_()?0:1:!U.W_()&&a.G_()&&(P=2))}switch(P){case 0:return p.queries.delete(w),p.onUnlisten(w,!0);case 1:return p.queries.delete(w),p.onUnlisten(w,!1);case 2:return p.onLastRemoteStoreUnlisten(w);default:return}})).apply(this,arguments)}function af(S,a){const p=Vn(S);let w=!1;for(const P of a){const J=p.queries.get(P.query);if(J){for(const ve of J.U_)ve.H_(P)&&(w=!0);J.K_=P}}w&&Vh(p)}function kd(S,a,p){const w=Vn(S),P=w.queries.get(a);if(P)for(const U of P.U_)U.onError(p);w.queries.delete(a)}function Vh(S){S.z_.forEach(a=>{a.next()})}var Hc,Vf;(Vf=Hc||(Hc={})).J_="default",Vf.Cache="cache";class xc{constructor(a,p,w){this.query=a,this.Y_=p,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=w||{}}H_(a){if(!this.options.includeMetadataChanges){const w=[];for(const P of a.docChanges)3!==P.type&&w.push(P);a=new t0(a.query,a.docs,a.oldDocs,w,a.mutatedKeys,a.fromCache,a.syncStateChanged,!0,a.hasCachedResults)}let p=!1;return this.Z_?this.ea(a)&&(this.Y_.next(a),p=!0):this.ta(a,this.onlineState)&&(this.na(a),p=!0),this.X_=a,p}onError(a){this.Y_.error(a)}j_(a){this.onlineState=a;let p=!1;return this.X_&&!this.Z_&&this.ta(this.X_,a)&&(this.na(this.X_),p=!0),p}ta(a,p){return!a.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==p))&&(!a.docs.isEmpty()||a.hasCachedResults||"Offline"===p)}ea(a){return a.docChanges.length>0||!!(a.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==a.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(a){a=t0.fromInitialDocuments(a.query,a.docs,a.mutatedKeys,a.fromCache,a.hasCachedResults),this.Z_=!0,this.Y_.next(a)}G_(){return this.options.source!==Hc.Cache}}class Y0{constructor(a){this.key=a}}class O0{constructor(a){this.key=a}}class th{constructor(a,p){this.query=a,this.la=p,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=us(),this.mutatedKeys=us(),this.Ia=vt(a),this.Ta=new _u(this.Ia)}get Ea(){return this.la}da(a,p){const w=p?p.Aa:new Ku,P=p?p.Ta:this.Ta;let U=p?p.mutatedKeys:this.mutatedKeys,J=P,ve=!1;const Re="F"===this.query.limitType&&P.size===this.query.limit?P.last():null,st="L"===this.query.limitType&&P.size===this.query.limit?P.first():null;if(a.inorderTraversal((Wt,In)=>{const hi=P.get(Wt),Ji=Xe(this.query,In)?In:null,Zo=!!hi&&this.mutatedKeys.has(hi.key),br=!!Ji&&(Ji.hasLocalMutations||this.mutatedKeys.has(Ji.key)&&Ji.hasCommittedMutations);let rr=!1;hi&&Ji?hi.data.isEqual(Ji.data)?Zo!==br&&(w.track({type:3,doc:Ji}),rr=!0):this.Ra(hi,Ji)||(w.track({type:2,doc:Ji}),rr=!0,(Re&&this.Ia(Ji,Re)>0||st&&this.Ia(Ji,st)<0)&&(ve=!0)):!hi&&Ji?(w.track({type:0,doc:Ji}),rr=!0):hi&&!Ji&&(w.track({type:1,doc:hi}),rr=!0,(Re||st)&&(ve=!0)),rr&&(Ji?(J=J.add(Ji),U=br?U.add(Wt):U.delete(Wt)):(J=J.delete(Wt),U=U.delete(Wt)))}),null!==this.query.limit)for(;J.size>this.query.limit;){const Wt="F"===this.query.limitType?J.last():J.first();J=J.delete(Wt.key),U=U.delete(Wt.key),w.track({type:1,doc:Wt})}return{Ta:J,Aa:w,Xi:ve,mutatedKeys:U}}Ra(a,p){return a.hasLocalMutations&&p.hasCommittedMutations&&!p.hasLocalMutations}applyChanges(a,p,w,P){const U=this.Ta;this.Ta=a.Ta,this.mutatedKeys=a.mutatedKeys;const J=a.Aa.Q_();J.sort((Wt,In)=>function(Ji,Zo){const br=rr=>{switch(rr){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return br(Ji)-br(Zo)}(Wt.type,In.type)||this.Ia(Wt.doc,In.doc)),this.Va(w),P=null!=P&&P;const ve=p&&!P?this.ma():[],Re=0===this.Pa.size&&this.current&&!P?1:0,st=Re!==this.ha;return this.ha=Re,0!==J.length||st?{snapshot:new t0(this.query,a.Ta,U,J,a.mutatedKeys,0===Re,st,!1,!!w&&w.resumeToken.approximateByteSize()>0),fa:ve}:{fa:ve}}j_(a){return this.current&&"Offline"===a?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Ku,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(a){return!this.la.has(a)&&!!this.Ta.has(a)&&!this.Ta.get(a).hasLocalMutations}Va(a){a&&(a.addedDocuments.forEach(p=>this.la=this.la.add(p)),a.modifiedDocuments.forEach(p=>{}),a.removedDocuments.forEach(p=>this.la=this.la.delete(p)),this.current=a.current)}ma(){if(!this.current)return[];const a=this.Pa;this.Pa=us(),this.Ta.forEach(w=>{this.ga(w.key)&&(this.Pa=this.Pa.add(w.key))});const p=[];return a.forEach(w=>{this.Pa.has(w)||p.push(new O0(w))}),this.Pa.forEach(w=>{a.has(w)||p.push(new Y0(w))}),p}pa(a){this.la=a.hs,this.Pa=us();const p=this.da(a.documents);return this.applyChanges(p,!0)}ya(){return t0.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Yu{constructor(a,p,w){this.query=a,this.targetId=p,this.view=w}}class tu{constructor(a){this.key=a,this.wa=!1}}class Al{constructor(a,p,w,P,U,J){this.localStore=a,this.remoteStore=p,this.eventManager=w,this.sharedClientState=P,this.currentUser=U,this.maxConcurrentLimboResolutions=J,this.Sa={},this.ba=new Zt(ve=>Ll(ve),Sl),this.Da=new Map,this.Ca=new Set,this.va=new is(Xi.comparator),this.Fa=new Map,this.Ma=new Qd,this.xa={},this.Oa=new Map,this.Na=mh.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function $f(S,a){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,V.A)(function*(S,a,p=!0){const w=N1(S);let P;const U=w.ba.get(a);return U?(w.sharedClientState.addLocalQueryTarget(U.targetId),P=U.view.ya()):P=yield zu(w,a,p,!0),P})).apply(this,arguments)}function md(S,a){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,V.A)(function*(S,a){const p=N1(S);yield zu(p,a,!0,!1)})).apply(this,arguments)}function zu(S,a,p,w){return tp.apply(this,arguments)}function tp(){return(tp=(0,V.A)(function*(S,a,p,w){const P=yield function ee(S,a){const p=Vn(S);return p.persistence.runTransaction("Allocate target","readwrite",w=>{let P;return p.Qr.getTargetData(w,a).next(U=>U?(P=U,Jn.resolve(P)):p.Qr.allocateTargetId(w).next(J=>(P=new Hu(a,J,"TargetPurposeListen",w.currentSequenceNumber),p.Qr.addTargetData(w,P).next(()=>P))))}).then(w=>{const P=p.ns.get(w.targetId);return(null===P||w.snapshotVersion.compareTo(P.snapshotVersion)>0)&&(p.ns=p.ns.insert(w.targetId,w),p.rs.set(a,w.targetId)),w})}(S.localStore,ms(a)),U=P.targetId,J=p?S.sharedClientState.addLocalQueryTarget(U):"not-current";let ve;return w&&(ve=yield function R1(S,a,p,w,P){return n0.apply(this,arguments)}(S,a,U,"current"===J,P.resumeToken)),S.isPrimaryClient&&p&&Js(S.remoteStore,P),ve})).apply(this,arguments)}function n0(){return n0=(0,V.A)(function*(S,a,p,w,P){S.Ba=(In,hi,Ji)=>{return(Zo=(0,V.A)(function*(rr,Ds,zs,Bs){let Aa=Ds.view.da(zs);Aa.Xi&&(Aa=yield ye(rr.localStore,Ds.query,!1).then(({documents:ti})=>Ds.view.da(ti,Aa)));const Pl=Bs&&Bs.targetChanges.get(Ds.targetId),qa=Bs&&null!=Bs.targetMismatches.get(Ds.targetId),zi=Ds.view.applyChanges(Aa,rr.isPrimaryClient,Pl,qa);return Hf(rr,Ds.targetId,zi.fa),zi.snapshot}),function br(rr,Ds,zs,Bs){return Zo.apply(this,arguments)})(S,In,hi,Ji);var Zo};const U=yield ye(S.localStore,a,!0),J=new th(a,U.hs),ve=J.da(U.documents),Re=la.createSynthesizedTargetChangeForCurrentChange(p,w&&"Offline"!==S.onlineState,P),st=J.applyChanges(ve,S.isPrimaryClient,Re);Hf(S,p,st.fa);const Wt=new Yu(a,p,J);return S.ba.set(a,Wt),S.Da.has(p)?S.Da.get(p).push(a):S.Da.set(p,[a]),st.snapshot}),n0.apply(this,arguments)}function f1(S,a,p){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,V.A)(function*(S,a,p){const w=Vn(S),P=w.ba.get(a),U=w.Da.get(P.targetId);if(U.length>1)return w.Da.set(P.targetId,U.filter(J=>!Sl(J,a))),void w.ba.delete(a);w.isPrimaryClient?(w.sharedClientState.removeLocalQueryTarget(P.targetId),w.sharedClientState.isActiveQueryTarget(P.targetId)||(yield se(w.localStore,P.targetId,!1).then(()=>{w.sharedClientState.clearQueryState(P.targetId),p&&ca(w.remoteStore,P.targetId),nh(w,P.targetId)}).catch(wr))):(nh(w,P.targetId),yield se(w.localStore,P.targetId,!0))})).apply(this,arguments)}function J0(S,a){return e1.apply(this,arguments)}function e1(){return(e1=(0,V.A)(function*(S,a){const p=Vn(S),w=p.ba.get(a),P=p.Da.get(w.targetId);p.isPrimaryClient&&1===P.length&&(p.sharedClientState.removeLocalQueryTarget(w.targetId),ca(p.remoteStore,w.targetId))})).apply(this,arguments)}function La(){return(La=(0,V.A)(function*(S,a,p){const w=function qf(S){const a=Vn(S);return a.remoteStore.remoteSyncer.applySuccessfulWrite=Uf.bind(null,a),a.remoteStore.remoteSyncer.rejectFailedWrite=I2.bind(null,a),a}(S);try{const P=yield function(J,ve){const Re=Vn(J),st=ji.now(),Wt=ve.reduce((Ji,Zo)=>Ji.add(Zo.key),us());let In,hi;return Re.persistence.runTransaction("Locally write mutations","readwrite",Ji=>{let Zo=Tr(),br=us();return Re.os.getEntries(Ji,Wt).next(rr=>{Zo=rr,Zo.forEach((Ds,zs)=>{zs.isValidDocument()||(br=br.add(Ds))})}).next(()=>Re.localDocuments.getOverlayedDocuments(Ji,Zo)).next(rr=>{In=rr;const Ds=[];for(const zs of ve){const Bs=ku(zs,In.get(zs.key).overlayedDocument);null!=Bs&&Ds.push(new bc(zs.key,Bs,mi(Bs.value.mapValue),ll.exists(!0)))}return Re.mutationQueue.addMutationBatch(Ji,st,Ds,ve)}).next(rr=>{hi=rr;const Ds=rr.applyToLocalDocumentSet(In,br);return Re.documentOverlayCache.saveOverlays(Ji,rr.batchId,Ds)})}).then(()=>({batchId:hi.batchId,changes:Pc(In)}))}(w.localStore,a);w.sharedClientState.addPendingMutation(P.batchId),function(J,ve,Re){let st=J.xa[J.currentUser.toKey()];st||(st=new is(ko)),st=st.insert(ve,Re),J.xa[J.currentUser.toKey()]=st}(w,P.batchId,p),yield bh(w,P.changes),yield hl(w.remoteStore)}catch(P){const U=Fh(P,"Failed to persist write");p.reject(U)}})).apply(this,arguments)}function z1(S,a){return cf.apply(this,arguments)}function cf(){return(cf=(0,V.A)(function*(S,a){const p=Vn(S);try{const w=yield function R(S,a){const p=Vn(S),w=a.snapshotVersion;let P=p.ns;return p.persistence.runTransaction("Apply remote event","readwrite-primary",U=>{const J=p.os.newChangeBuffer({trackRemovals:!0});P=p.ns;const ve=[];a.targetChanges.forEach((Wt,In)=>{const hi=P.get(In);if(!hi)return;ve.push(p.Qr.removeMatchingKeys(U,Wt.removedDocuments,In).next(()=>p.Qr.addMatchingKeys(U,Wt.addedDocuments,In)));let Ji=hi.withSequenceNumber(U.currentSequenceNumber);var br,rr,Ds;null!==a.targetMismatches.get(In)?Ji=Ji.withResumeToken(_a.EMPTY_BYTE_STRING,vi.min()).withLastLimboFreeSnapshotVersion(vi.min()):Wt.resumeToken.approximateByteSize()>0&&(Ji=Ji.withResumeToken(Wt.resumeToken,w)),P=P.insert(In,Ji),rr=Ji,Ds=Wt,(0===(br=hi).resumeToken.approximateByteSize()||rr.snapshotVersion.toMicroseconds()-br.snapshotVersion.toMicroseconds()>=3e8||Ds.addedDocuments.size+Ds.modifiedDocuments.size+Ds.removedDocuments.size>0)&&ve.push(p.Qr.updateTargetData(U,Ji))});let Re=Tr(),st=us();if(a.documentUpdates.forEach(Wt=>{a.resolvedLimboDocuments.has(Wt)&&ve.push(p.persistence.referenceDelegate.updateLimboDocument(U,Wt))}),ve.push(function N(S,a,p){let w=us(),P=us();return p.forEach(U=>w=w.add(U)),a.getEntries(S,w).next(U=>{let J=Tr();return p.forEach((ve,Re)=>{const st=U.get(ve);Re.isFoundDocument()!==st.isFoundDocument()&&(P=P.add(ve)),Re.isNoDocument()&&Re.version.isEqual(vi.min())?(a.removeEntry(ve,Re.readTime),J=J.insert(ve,Re)):!st.isValidDocument()||Re.version.compareTo(st.version)>0||0===Re.version.compareTo(st.version)&&st.hasPendingWrites?(a.addEntry(Re),J=J.insert(ve,Re)):Et("LocalStore","Ignoring outdated watch update for ",ve,". Current version:",st.version," Watch version:",Re.version)}),{cs:J,ls:P}})}(U,J,a.documentUpdates).next(Wt=>{Re=Wt.cs,st=Wt.ls})),!w.isEqual(vi.min())){const Wt=p.Qr.getLastRemoteSnapshotVersion(U).next(In=>p.Qr.setTargetsMetadata(U,U.currentSequenceNumber,w));ve.push(Wt)}return Jn.waitFor(ve).next(()=>J.apply(U)).next(()=>p.localDocuments.getLocalViewOfDocuments(U,Re,st)).next(()=>Re)}).then(U=>(p.ns=P,U))}(p.localStore,a);a.targetChanges.forEach((P,U)=>{const J=p.Fa.get(U);J&&(En(P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size<=1),P.addedDocuments.size>0?J.wa=!0:P.modifiedDocuments.size>0?En(J.wa):P.removedDocuments.size>0&&(En(J.wa),J.wa=!1))}),yield bh(p,w,a)}catch(w){yield wr(w)}})).apply(this,arguments)}function al(S,a,p){const w=Vn(S);if(w.isPrimaryClient&&0===p||!w.isPrimaryClient&&1===p){const P=[];w.ba.forEach((U,J)=>{const ve=J.view.j_(a);ve.snapshot&&P.push(ve.snapshot)}),function(J,ve){const Re=Vn(J);Re.onlineState=ve;let st=!1;Re.queries.forEach((Wt,In)=>{for(const hi of In.U_)hi.j_(ve)&&(st=!0)}),st&&Vh(Re)}(w.eventManager,a),P.length&&w.Sa.h_(P),w.onlineState=a,w.isPrimaryClient&&w.sharedClientState.setOnlineState(a)}}function np(S,a,p){return jf.apply(this,arguments)}function jf(){return(jf=(0,V.A)(function*(S,a,p){const w=Vn(S);w.sharedClientState.updateQueryState(a,"rejected",p);const P=w.Fa.get(a),U=P&&P.key;if(U){let J=new is(Xi.comparator);J=J.insert(U,qo.newNoDocument(U,vi.min()));const ve=us().add(U),Re=new Fa(vi.min(),new Map,new is(ko),J,ve);yield z1(w,Re),w.va=w.va.remove(U),w.Fa.delete(a),E2(w)}else yield se(w.localStore,a,!1).then(()=>nh(w,a,p)).catch(wr)})).apply(this,arguments)}function Uf(S,a){return O1.apply(this,arguments)}function O1(){return(O1=(0,V.A)(function*(S,a){const p=Vn(S),w=a.batch.batchId;try{const P=yield function b(S,a){const p=Vn(S);return p.persistence.runTransaction("Acknowledge batch","readwrite-primary",w=>{const P=a.batch.keys(),U=p.os.newChangeBuffer({trackRemovals:!0});return function(ve,Re,st,Wt){const In=st.batch,hi=In.keys();let Ji=Jn.resolve();return hi.forEach(Zo=>{Ji=Ji.next(()=>Wt.getEntry(Re,Zo)).next(br=>{const rr=st.docVersions.get(Zo);En(null!==rr),br.version.compareTo(rr)<0&&(In.applyToRemoteDocument(br,st),br.isValidDocument()&&(br.setReadTime(st.commitVersion),Wt.addEntry(br)))})}),Ji.next(()=>ve.mutationQueue.removeMutationBatch(Re,In))}(p,w,a,U).next(()=>U.apply(w)).next(()=>p.mutationQueue.performConsistencyCheck(w)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(w,P,a.batch.batchId)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,function(ve){let Re=us();for(let st=0;st<ve.mutationResults.length;++st)ve.mutationResults[st].transformResults.length>0&&(Re=Re.add(ve.batch.mutations[st].key));return Re}(a))).next(()=>p.localDocuments.getDocuments(w,P))})}(p.localStore,a);Gc(p,w,null),ip(p,w),p.sharedClientState.updateMutationState(w,"acknowledged"),yield bh(p,P)}catch(P){yield wr(P)}})).apply(this,arguments)}function I2(S,a,p){return uf.apply(this,arguments)}function uf(){return(uf=(0,V.A)(function*(S,a,p){const w=Vn(S);try{const P=yield function(J,ve){const Re=Vn(J);return Re.persistence.runTransaction("Reject batch","readwrite-primary",st=>{let Wt;return Re.mutationQueue.lookupMutationBatch(st,ve).next(In=>(En(null!==In),Wt=In.keys(),Re.mutationQueue.removeMutationBatch(st,In))).next(()=>Re.mutationQueue.performConsistencyCheck(st)).next(()=>Re.documentOverlayCache.removeOverlaysForBatchId(st,Wt,ve)).next(()=>Re.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(st,Wt)).next(()=>Re.localDocuments.getDocuments(st,Wt))})}(w.localStore,a);Gc(w,a,p),ip(w,a),w.sharedClientState.updateMutationState(a,"rejected",p),yield bh(w,P)}catch(P){yield wr(P)}})).apply(this,arguments)}function ip(S,a){(S.Oa.get(a)||[]).forEach(p=>{p.resolve()}),S.Oa.delete(a)}function Gc(S,a,p){const w=Vn(S);let P=w.xa[w.currentUser.toKey()];if(P){const U=P.get(a);U&&(p?U.reject(p):U.resolve(),P=P.remove(a)),w.xa[w.currentUser.toKey()]=P}}function nh(S,a,p=null){S.sharedClientState.removeLocalQueryTarget(a);for(const w of S.Da.get(a))S.ba.delete(w),p&&S.Sa.ka(w,p);S.Da.delete(a),S.isPrimaryClient&&S.Ma.Vr(a).forEach(w=>{S.Ma.containsKey(w)||op(S,w)})}function op(S,a){S.Ca.delete(a.path.canonicalString());const p=S.va.get(a);null!==p&&(ca(S.remoteStore,p),S.va=S.va.remove(a),S.Fa.delete(p),E2(S))}function Hf(S,a,p){for(const w of p)w instanceof Y0?(S.Ma.addReference(w.key,a),df(S,w)):w instanceof O0?(Et("SyncEngine","Document no longer in limbo: "+w.key),S.Ma.removeReference(w.key,a),S.Ma.containsKey(w.key)||op(S,w.key)):Qt()}function df(S,a){const p=a.key,w=p.path.canonicalString();S.va.get(p)||S.Ca.has(w)||(Et("SyncEngine","New document in limbo: "+p),S.Ca.add(w),E2(S))}function E2(S){for(;S.Ca.size>0&&S.va.size<S.maxConcurrentLimboResolutions;){const a=S.Ca.values().next().value;S.Ca.delete(a);const p=new Xi(ui.fromString(a)),w=S.Na.next();S.Fa.set(w,new tu(p)),S.va=S.va.insert(p,w),Js(S.remoteStore,new Hu(ms(gr(p.path)),w,"TargetPurposeLimboResolution",Tt.oe))}}function bh(S,a,p){return hf.apply(this,arguments)}function hf(){return hf=(0,V.A)(function*(S,a,p){const w=Vn(S),P=[],U=[],J=[];var ve;w.ba.isEmpty()||(w.ba.forEach((ve,Re)=>{J.push(w.Ba(Re,a,p).then(st=>{var Wt;if((st||p)&&w.isPrimaryClient){const In=st?!st.fromCache:null===(Wt=null==p?void 0:p.targetChanges.get(Re.targetId))||void 0===Wt?void 0:Wt.current;w.sharedClientState.updateQueryState(Re.targetId,In?"current":"not-current")}if(st){P.push(st);const In=Bc.Ki(Re.targetId,st);U.push(In)}}))}),yield Promise.all(J),w.Sa.h_(P),yield(ve=(0,V.A)(function*(st,Wt){const In=Vn(st);try{yield In.persistence.runTransaction("notifyLocalViewChanges","readwrite",hi=>Jn.forEach(Wt,Ji=>Jn.forEach(Ji.qi,Zo=>In.persistence.referenceDelegate.addReference(hi,Ji.targetId,Zo)).next(()=>Jn.forEach(Ji.Qi,Zo=>In.persistence.referenceDelegate.removeReference(hi,Ji.targetId,Zo)))))}catch(hi){if(!Fi(hi))throw hi;Et("LocalStore","Failed to update sequence numbers: "+hi)}for(const hi of Wt){const Ji=hi.targetId;if(!hi.fromCache){const Zo=In.ns.get(Ji),rr=Zo.withLastLimboFreeSnapshotVersion(Zo.snapshotVersion);In.ns=In.ns.insert(Ji,rr)}}}),function Re(st,Wt){return ve.apply(this,arguments)})(w.localStore,U))}),hf.apply(this,arguments)}function um(S,a){return pf.apply(this,arguments)}function pf(){return(pf=(0,V.A)(function*(S,a){const p=Vn(S);if(!p.currentUser.isEqual(a)){Et("SyncEngine","User change. New user:",a.toKey());const w=yield r(p.localStore,a);p.currentUser=a,(U=p).Oa.forEach(ve=>{ve.forEach(Re=>{Re.reject(new Ae(Ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),U.Oa.clear(),p.sharedClientState.handleUserChange(a,w.removedBatchIds,w.addedBatchIds),yield bh(p,w.us)}var U})).apply(this,arguments)}function rp(S,a){const p=Vn(S),w=p.Fa.get(a);if(w&&w.wa)return us().add(w.key);{let P=us();const U=p.Da.get(a);if(!U)return P;for(const J of U){const ve=p.ba.get(J);P=P.unionWith(ve.view.Ea)}return P}}function N1(S){const a=Vn(S);return a.remoteStore.remoteSyncer.applyRemoteEvent=z1.bind(null,a),a.remoteStore.remoteSyncer.getRemoteKeysForTarget=rp.bind(null,a),a.remoteStore.remoteSyncer.rejectListen=np.bind(null,a),a.Sa.h_=af.bind(null,a.eventManager),a.Sa.ka=kd.bind(null,a.eventManager),a}class yu{constructor(){this.synchronizeTabs=!1}initialize(a){var p=this;return(0,V.A)(function*(){p.serializer=cn(a.databaseInfo.databaseId),p.sharedClientState=p.createSharedClientState(a),p.persistence=p.createPersistence(a),yield p.persistence.start(),p.localStore=p.createLocalStore(a),p.gcScheduler=p.createGarbageCollectionScheduler(a,p.localStore),p.indexBackfillerScheduler=p.createIndexBackfillerScheduler(a,p.localStore)})()}createGarbageCollectionScheduler(a,p){return null}createIndexBackfillerScheduler(a,p){return null}createLocalStore(a){return function v(S,a,p,w){return new _h(S,a,p,w)}(this.persistence,new pd,a.initialUser,this.serializer)}createPersistence(a){return new Jd(ls.Hr,this.serializer)}createSharedClientState(a){return new zn}terminate(){var a=this;return(0,V.A)(function*(){var p,w;null===(p=a.gcScheduler)||void 0===p||p.stop(),null===(w=a.indexBackfillerScheduler)||void 0===w||w.stop(),a.sharedClientState.shutdown(),yield a.persistence.shutdown()})()}}class F1{initialize(a,p){var w=this;return(0,V.A)(function*(){w.localStore||(w.localStore=a.localStore,w.sharedClientState=a.sharedClientState,w.datastore=w.createDatastore(p),w.remoteStore=w.createRemoteStore(p),w.eventManager=w.createEventManager(p),w.syncEngine=w.createSyncEngine(p,!a.synchronizeTabs),w.sharedClientState.onlineStateHandler=P=>al(w.syncEngine,P,1),w.remoteStore.remoteSyncer.handleCredentialChange=um.bind(null,w.syncEngine),yield sl(w.remoteStore,w.syncEngine.isPrimaryClient))})()}createEventManager(a){return new eh}createDatastore(a){const p=cn(a.databaseInfo.databaseId),w=new oe(a.databaseInfo);return new vr(a.authCredentials,a.appCheckCredentials,w,p)}createRemoteStore(a){return w=this.localStore,P=this.datastore,U=a.asyncQueue,J=p=>al(this.syncEngine,p,0),ve=_i.D()?new _i:new mn,new Mr(w,P,U,J,ve);var w,P,U,J,ve}createSyncEngine(a,p){return function(P,U,J,ve,Re,st,Wt){const In=new Al(P,U,J,ve,Re,st);return Wt&&(In.La=!0),In}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,a.initialUser,a.maxConcurrentLimboResolutions,p)}terminate(){var a=this;return(0,V.A)(function*(){var p,w;yield(w=(0,V.A)(function*(U){const J=Vn(U);Et("RemoteStore","RemoteStore shutting down."),J.M_.add(5),yield As(J),J.O_.shutdown(),J.N_.set("Unknown")}),function P(U){return w.apply(this,arguments)})(a.remoteStore),null===(p=a.datastore)||void 0===p||p.terminate()})()}}class n1{constructor(a){this.observer=a,this.muted=!1}next(a){this.observer.next&&this.Ka(this.observer.next,a)}error(a){this.observer.error?this.Ka(this.observer.error,a):kn("Uncaught Error in snapshot listener:",a.toString())}$a(){this.muted=!0}Ka(a,p){this.muted||setTimeout(()=>{this.muted||a(p)},0)}}class Xf{constructor(a,p,w,P){var U=this;this.authCredentials=a,this.appCheckCredentials=p,this.asyncQueue=w,this.databaseInfo=P,this.user=xt.UNAUTHENTICATED,this.clientId=Ei.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(w,function(){var J=(0,V.A)(function*(ve){Et("FirestoreClient","Received user=",ve.uid),yield U.authCredentialListener(ve),U.user=ve});return function(ve){return J.apply(this,arguments)}}()),this.appCheckCredentials.start(w,J=>(Et("FirestoreClient","Received new app check token=",J),this.appCheckCredentialListener(J,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(a){this.authCredentialListener=a}setAppCheckTokenChangeListener(a){this.appCheckCredentialListener=a}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var a=this;this.asyncQueue.enterRestrictedMode();const p=new Ge;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,V.A)(function*(){try{a._onlineComponents&&(yield a._onlineComponents.terminate()),a._offlineComponents&&(yield a._offlineComponents.terminate()),a.authCredentials.shutdown(),a.appCheckCredentials.shutdown(),p.resolve()}catch(w){const P=Fh(w,"Failed to shutdown persistence");p.reject(P)}})),p.promise}}function Ec(S,a){return _1.apply(this,arguments)}function _1(){return _1=(0,V.A)(function*(S,a){S.asyncQueue.verifyOperationInProgress(),Et("FirestoreClient","Initializing OfflineComponentProvider");const p=S.configuration;yield a.initialize(p);let w=p.initialUser;S.setCredentialChangeListener(function(){var P=(0,V.A)(function*(U){w.isEqual(U)||(yield r(a.localStore,U),w=U)});return function(U){return P.apply(this,arguments)}}()),a.persistence.setDatabaseDeletedListener(()=>S.terminate()),S._offlineComponents=a}),_1.apply(this,arguments)}function pm(S,a){return S2.apply(this,arguments)}function S2(){return(S2=(0,V.A)(function*(S,a){S.asyncQueue.verifyOperationInProgress();const p=yield function Kf(S){return r0.apply(this,arguments)}(S);Et("FirestoreClient","Initializing OnlineComponentProvider"),yield a.initialize(p,S.configuration),S.setCredentialChangeListener(w=>J1(a.remoteStore,w)),S.setAppCheckTokenChangeListener((w,P)=>J1(a.remoteStore,P)),S._onlineComponents=a})).apply(this,arguments)}function r0(){return(r0=(0,V.A)(function*(S){if(!S._offlineComponents)if(S._uninitializedComponentsProvider){Et("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ec(S,S._uninitializedComponentsProvider._offline)}catch(a){const p=a;if(!function qm(S){return"FirebaseError"===S.name?S.code===Ke.FAILED_PRECONDITION||S.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&S instanceof DOMException)||22===S.code||20===S.code||11===S.code}(p))throw p;Te("Error using user provided cache. Falling back to memory cache: "+p),yield Ec(S,new yu)}}else Et("FirestoreClient","Using default OfflineComponentProvider"),yield Ec(S,new yu);return S._offlineComponents})).apply(this,arguments)}function $h(S){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,V.A)(function*(S){return S._onlineComponents||(S._uninitializedComponentsProvider?(Et("FirestoreClient","Using user provided OnlineComponentProvider"),yield pm(S,S._uninitializedComponentsProvider._online)):(Et("FirestoreClient","Using default OnlineComponentProvider"),yield pm(S,new F1))),S._onlineComponents})).apply(this,arguments)}function Zl(S){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,V.A)(function*(S){const a=yield $h(S),p=a.eventManager;return p.onListen=$f.bind(null,a.syncEngine),p.onUnlisten=f1.bind(null,a.syncEngine),p.onFirstRemoteStoreListen=md.bind(null,a.syncEngine),p.onLastRemoteStoreUnlisten=J0.bind(null,a.syncEngine),p})).apply(this,arguments)}function Tp(S){const a={};return void 0!==S.timeoutSeconds&&(a.timeoutSeconds=S.timeoutSeconds),a}const wu=new Map;function A2(S,a,p){if(!p)throw new Ae(Ke.INVALID_ARGUMENT,`Function ${S}() cannot be called with an empty ${a}.`)}function Mp(S){if(!Xi.isDocumentKey(S))throw new Ae(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${S} has ${S.length}.`)}function b1(S){if(Xi.isDocumentKey(S))throw new Ae(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${S} has ${S.length}.`)}function Yf(S){if(void 0===S)return"undefined";if(null===S)return"null";if("string"==typeof S)return S.length>20&&(S=`${S.substring(0,20)}...`),JSON.stringify(S);if("number"==typeof S||"boolean"==typeof S)return""+S;if("object"==typeof S){if(S instanceof Array)return"an array";{const a=(w=S).constructor?w.constructor.name:null;return a?`a custom ${a} object`:"an object"}}var w;return"function"==typeof S?"a function":Qt()}function Ks(S,a){if("_delegate"in S&&(S=S._delegate),!(S instanceof a)){if(a.name===S.constructor.name)throw new Ae(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const p=Yf(S);throw new Ae(Ke.INVALID_ARGUMENT,`Expected type '${a.name}', but it was: ${p}`)}}return S}class mm{constructor(a){var p,w;if(void 0===a.host){if(void 0!==a.ssl)throw new Ae(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=a.host,this.ssl=null===(p=a.ssl)||void 0===p||p;if(this.credentials=a.credentials,this.ignoreUndefinedProperties=!!a.ignoreUndefinedProperties,this.localCache=a.localCache,void 0===a.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==a.cacheSizeBytes&&a.cacheSizeBytes<1048576)throw new Ae(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=a.cacheSizeBytes}(function D2(S,a,p,w){if(!0===a&&!0===w)throw new Ae(Ke.INVALID_ARGUMENT,`${S} and ${p} cannot be used together.`)})("experimentalForceLongPolling",a.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",a.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!a.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==a.experimentalAutoDetectLongPolling&&!a.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Tp(null!==(w=a.experimentalLongPollingOptions)&&void 0!==w?w:{}),function(U){if(void 0!==U.timeoutSeconds){if(isNaN(U.timeoutSeconds))throw new Ae(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${U.timeoutSeconds} (must not be NaN)`);if(U.timeoutSeconds<5)throw new Ae(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${U.timeoutSeconds} (minimum allowed value is 5)`);if(U.timeoutSeconds>30)throw new Ae(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${U.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!a.useFetchStreams}isEqual(a){return this.host===a.host&&this.ssl===a.ssl&&this.credentials===a.credentials&&this.cacheSizeBytes===a.cacheSizeBytes&&this.experimentalForceLongPolling===a.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===a.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===a.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===a.ignoreUndefinedProperties&&this.useFetchStreams===a.useFetchStreams}}class Qu{constructor(a,p,w,P){this._authCredentials=a,this._appCheckCredentials=p,this._databaseId=w,this._app=P,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(a){if(this._settingsFrozen)throw new Ae(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(a),void 0!==a.credentials&&(this._authCredentials=function(w){if(!w)return new zt;switch(w.type){case"firstParty":return new Qi(w.sessionIndex||"0",w.iamToken||null,w.authTokenFactory||null);case"provider":return w.client;default:throw new Ae(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(a.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(p){const w=wu.get(p);w&&(Et("ComponentProvider","Removing Datastore"),wu.delete(p),w.terminate())}(this),Promise.resolve()}}class Ou{constructor(a,p,w){this.converter=p,this._query=w,this.type="query",this.firestore=a}withConverter(a){return new Ou(this.firestore,a,this._query)}}class Ul{constructor(a,p,w){this.converter=p,this._key=w,this.type="document",this.firestore=a}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new a0(this.firestore,this.converter,this._key.path.popLast())}withConverter(a){return new Ul(this.firestore,a,this._key)}}class a0 extends Ou{constructor(a,p,w){super(a,p,gr(w)),this._path=w,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const a=this._path.popLast();return a.isEmpty()?null:new Ul(this.firestore,null,new Xi(a))}withConverter(a){return new a0(this.firestore,a,this._path)}}function Ap(S,a,...p){if(S=(0,We.Ku)(S),A2("collection","path",a),S instanceof Qu){const w=ui.fromString(a,...p);return b1(w),new a0(S,null,w)}{if(!(S instanceof Ul||S instanceof a0))throw new Ae(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const w=S._path.child(ui.fromString(a,...p));return b1(w),new a0(S.firestore,null,w)}}function vf(S,a,...p){if(S=(0,We.Ku)(S),1===arguments.length&&(a=Ei.newId()),A2("doc","path",a),S instanceof Qu){const w=ui.fromString(a,...p);return Mp(w),new Ul(S,null,new Xi(w))}{if(!(S instanceof Ul||S instanceof a0))throw new Ae(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const w=S._path.child(ui.fromString(a,...p));return Mp(w),new Ul(S.firestore,S instanceof a0?S.converter:null,new Xi(w))}}class Rg{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new hn(this,"async_queue_retry"),this.hu=()=>{const p=lt();p&&Et("AsyncQueue","Visibility state changed to "+p.visibilityState),this.Yo.Wo()};const a=lt();a&&"function"==typeof a.addEventListener&&a.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(a){this.enqueue(a)}enqueueAndForgetEvenWhileRestricted(a){this.Pu(),this.Iu(a)}enterRestrictedMode(a){if(!this.ou){this.ou=!0,this.cu=a||!1;const p=lt();p&&"function"==typeof p.removeEventListener&&p.removeEventListener("visibilitychange",this.hu)}}enqueue(a){if(this.Pu(),this.ou)return new Promise(()=>{});const p=new Ge;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(a().then(p.resolve,p.reject),p.promise)).then(()=>p.promise)}enqueueRetryable(a){this.enqueueAndForget(()=>(this.su.push(a),this.Tu()))}Tu(){var a=this;return(0,V.A)(function*(){if(0!==a.su.length){try{yield a.su[0](),a.su.shift(),a.Yo.reset()}catch(p){if(!Fi(p))throw p;Et("AsyncQueue","Operation failed with retryable error: "+p)}a.su.length>0&&a.Yo.$o(()=>a.Tu())}})()}Iu(a){const p=this.iu.then(()=>(this.uu=!0,a().catch(w=>{throw this.au=w,this.uu=!1,kn("INTERNAL UNHANDLED ERROR: ",function(J){let ve=J.message||"";return J.stack&&(ve=J.stack.includes(J.message)?J.stack:J.message+"\n"+J.stack),ve}(w)),w}).then(w=>(this.uu=!1,w))));return this.iu=p,p}enqueueAfterDelay(a,p,w){this.Pu(),this.lu.indexOf(a)>-1&&(p=0);const P=Ip.createAndSchedule(this,a,p,w,U=>this.Eu(U));return this._u.push(P),P}Pu(){this.au&&Qt()}verifyOperationInProgress(){}du(){var a=this;return(0,V.A)(function*(){let p;do{p=a.iu,yield p}while(p!==a.iu)})()}Au(a){for(const p of this._u)if(p.timerId===a)return!0;return!1}Ru(a){return this.du().then(()=>{this._u.sort((p,w)=>p.targetTimeMs-w.targetTimeMs);for(const p of this._u)if(p.skipDelay(),"all"!==a&&p.timerId===a)break;return this.du()})}Vu(a){this.lu.push(a)}Eu(a){const p=this._u.indexOf(a);this._u.splice(p,1)}}function Zf(S){return function(p,w){if("object"!=typeof p||null===p)return!1;const P=p;for(const U of["next","error","complete"])if(U in P&&"function"==typeof P[U])return!0;return!1}(S)}class ic extends Qu{constructor(a,p,w,P){super(a,p,w,P),this.type="firestore",this._queue=new Rg,this._persistenceKey=(null==P?void 0:P.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||pl(this),this._firestoreClient.terminate()}}function Ju(S,a){const p="object"==typeof S?S:(0,re.Sx)(),w="string"==typeof S?S:a||"(default)",P=(0,re.j6)(p,"firestore").getImmediate({identifier:w});if(!P._initialized){const U=(0,We.yU)("firestore");U&&function Ym(S,a,p,w={}){var P;const U=(S=Ks(S,Qu))._getSettings(),J=`${a}:${p}`;if("firestore.googleapis.com"!==U.host&&U.host!==J&&Te("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),S._setSettings(Object.assign(Object.assign({},U),{host:J,ssl:!1})),w.mockUserToken){let ve,Re;if("string"==typeof w.mockUserToken)ve=w.mockUserToken,Re=xt.MOCK_USER;else{ve=(0,We.Fy)(w.mockUserToken,null===(P=S._app)||void 0===P?void 0:P.options.projectId);const st=w.mockUserToken.sub||w.mockUserToken.user_id;if(!st)throw new Ae(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Re=new xt(st)}S._authCredentials=new qn(new et(ve,Re))}}(P,...U)}return P}function El(S){return S._firestoreClient||pl(S),S._firestoreClient.verifyNotTerminated(),S._firestoreClient}function pl(S){var a,p,w;const P=S._freezeSettings(),U=(Re=(null===(a=S._app)||void 0===a?void 0:a.options.appId)||"",new Ms(S._databaseId,Re,S._persistenceKey,(Wt=P).host,Wt.ssl,Wt.experimentalForceLongPolling,Wt.experimentalAutoDetectLongPolling,Tp(Wt.experimentalLongPollingOptions),Wt.useFetchStreams));var Re,Wt;S._firestoreClient=new Xf(S._authCredentials,S._appCheckCredentials,S._queue,U),null!==(p=P.localCache)&&void 0!==p&&p._offlineComponentProvider&&null!==(w=P.localCache)&&void 0!==w&&w._onlineComponentProvider&&(S._firestoreClient._uninitializedComponentsProvider={_offlineKind:P.localCache.kind,_offline:P.localCache._offlineComponentProvider,_online:P.localCache._onlineComponentProvider})}class Rp{constructor(a){this._byteString=a}static fromBase64String(a){try{return new Rp(_a.fromBase64String(a))}catch(p){throw new Ae(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+p)}}static fromUint8Array(a){return new Rp(_a.fromUint8Array(a))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(a){return this._byteString.isEqual(a._byteString)}}class V1{constructor(...a){for(let p=0;p<a.length;++p)if(0===a[p].length)throw new Ae(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new po(a)}isEqual(a){return this._internalPath.isEqual(a._internalPath)}}class $1{constructor(a){this._methodName=a}}class yf{constructor(a,p){if(!isFinite(a)||a<-90||a>90)throw new Ae(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+a);if(!isFinite(p)||p<-180||p>180)throw new Ae(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+p);this._lat=a,this._long=p}get latitude(){return this._lat}get longitude(){return this._long}isEqual(a){return this._lat===a._lat&&this._long===a._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(a){return ko(this._lat,a._lat)||ko(this._long,a._long)}}const L2=/^__.*__$/;class zp{constructor(a,p,w){this.data=a,this.fieldMask=p,this.fieldTransforms=w}toMutation(a,p){return null!==this.fieldMask?new bc(a,this.data,this.fieldMask,p,this.fieldTransforms):new Pd(a,this.data,p,this.fieldTransforms)}}function Qf(S){switch(S){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class Jf{constructor(a,p,w,P,U,J){this.settings=a,this.databaseId=p,this.serializer=w,this.ignoreUndefinedProperties=P,void 0===U&&this.mu(),this.fieldTransforms=U||[],this.fieldMask=J||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(a){return new Jf(Object.assign(Object.assign({},this.settings),a),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(a){var p;const w=null===(p=this.path)||void 0===p?void 0:p.child(a),P=this.gu({path:w,yu:!1});return P.wu(a),P}Su(a){var p;const w=null===(p=this.path)||void 0===p?void 0:p.child(a),P=this.gu({path:w,yu:!1});return P.mu(),P}bu(a){return this.gu({path:void 0,yu:!0})}Du(a){return Ad(a,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(a){return void 0!==this.fieldMask.find(p=>a.isPrefixOf(p))||void 0!==this.fieldTransforms.find(p=>a.isPrefixOf(p.field))}mu(){if(this.path)for(let a=0;a<this.path.length;a++)this.wu(this.path.get(a))}wu(a){if(0===a.length)throw this.Du("Document fields must not be empty");if(Qf(this.fu)&&L2.test(a))throw this.Du('Document fields cannot begin and end with "__"')}}class bm{constructor(a,p,w){this.databaseId=a,this.ignoreUndefinedProperties=p,this.serializer=w||cn(a)}Fu(a,p,w,P=!1){return new Jf({fu:a,methodName:p,vu:w,path:po.emptyPath(),yu:!1,Cu:P},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rh(S){const a=S._freezeSettings(),p=cn(S._databaseId);return new bm(S._databaseId,!!a.ignoreUndefinedProperties,p)}function bf(S,a,p,w,P,U={}){const J=S.Fu(U.merge||U.mergeFields?2:0,a,p,P);j1("Data must be an object, but it was:",J,w);const ve=F2(w,J);let Re,st;if(U.merge)Re=new Ha(J.fieldMask),st=J.fieldTransforms;else if(U.mergeFields){const Wt=[];for(const In of U.mergeFields){const hi=B0(a,In,p);if(!J.contains(hi))throw new Ae(Ke.INVALID_ARGUMENT,`Field '${hi}' is specified in your field mask but missing from your input data.`);If(Wt,hi)||Wt.push(hi)}Re=new Ha(Wt),st=J.fieldTransforms.filter(In=>Re.covers(In.field))}else Re=null,st=J.fieldTransforms;return new zp(new so(ve),Re,st)}function hp(S,a){if(xf(S=(0,We.Ku)(S)))return j1("Unsupported field value:",a,S),F2(S,a);if(S instanceof $1)return function(w,P){if(!Qf(P.fu))throw P.Du(`${w._methodName}() can only be used with update() and set()`);if(!P.path)throw P.Du(`${w._methodName}() is not currently supported inside arrays`);const U=w._toFieldTransform(P);U&&P.fieldTransforms.push(U)}(S,a),null;if(void 0===S&&a.ignoreUndefinedProperties)return null;if(a.path&&a.fieldMask.push(a.path),S instanceof Array){if(a.settings.yu&&4!==a.fu)throw a.Du("Nested arrays are not supported");return function(w,P){const U=[];let J=0;for(const ve of w){let Re=hp(ve,P.bu(J));null==Re&&(Re={nullValue:"NULL_VALUE"}),U.push(Re),J++}return{arrayValue:{values:U}}}(S,a)}return function(w,P){if(null===(w=(0,We.Ku)(w)))return{nullValue:"NULL_VALUE"};if("number"==typeof w)return xh(P.serializer,w);if("boolean"==typeof w)return{booleanValue:w};if("string"==typeof w)return{stringValue:w};if(w instanceof Date){const U=ji.fromDate(w);return{timestampValue:tc(P.serializer,U)}}if(w instanceof ji){const U=new ji(w.seconds,1e3*Math.floor(w.nanoseconds/1e3));return{timestampValue:tc(P.serializer,U)}}if(w instanceof yf)return{geoPointValue:{latitude:w.latitude,longitude:w.longitude}};if(w instanceof Rp)return{bytesValue:ld(P.serializer,w._byteString)};if(w instanceof Ul){const U=P.databaseId,J=w.firestore._databaseId;if(!J.isEqual(U))throw P.Du(`Document reference is for database ${J.projectId}/${J.database} but should be for database ${U.projectId}/${U.database}`);return{referenceValue:cd(w.firestore._databaseId||P.databaseId,w._key.path)}}throw P.Du(`Unsupported field value: ${Yf(w)}`)}(S,a)}function F2(S,a){const p={};return Vr(S)?a.path&&a.path.length>0&&a.fieldMask.push(a.path):bi(S,(w,P)=>{const U=hp(P,a.pu(w));null!=U&&(p[w]=U)}),{mapValue:{fields:p}}}function xf(S){return!("object"!=typeof S||null===S||S instanceof Array||S instanceof Date||S instanceof ji||S instanceof yf||S instanceof Rp||S instanceof Ul||S instanceof $1)}function j1(S,a,p){if(!xf(p)||"object"!=typeof(P=p)||null===P||Object.getPrototypeOf(P)!==Object.prototype&&null!==Object.getPrototypeOf(P)){const w=Yf(p);throw a.Du("an object"===w?S+" a custom object":S+" "+w)}var P}function B0(S,a,p){if((a=(0,We.Ku)(a))instanceof V1)return a._internalPath;if("string"==typeof a)return l0(S,a);throw Ad("Field path arguments must be of type string or ",S,!1,void 0,p)}const Bp=new RegExp("[~\\*/\\[\\]]");function l0(S,a,p){if(a.search(Bp)>=0)throw Ad(`Invalid field path (${a}). Paths must not contain '~', '*', '/', '[', or ']'`,S,!1,void 0,p);try{return new V1(...a.split("."))._internalPath}catch{throw Ad(`Invalid field path (${a}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,S,!1,void 0,p)}}function Ad(S,a,p,w,P){const U=w&&!w.isEmpty(),J=void 0!==P;let ve=`Function ${a}() called with invalid data`;p&&(ve+=" (via `toFirestore()`)"),ve+=". ";let Re="";return(U||J)&&(Re+=" (found",U&&(Re+=` in field ${w}`),J&&(Re+=` in document ${P}`),Re+=")"),new Ae(Ke.INVALID_ARGUMENT,ve+S+Re)}function If(S,a){return S.some(p=>p.isEqual(a))}class Ef{constructor(a,p,w,P,U){this._firestore=a,this._userDataWriter=p,this._key=w,this._document=P,this._converter=U}get id(){return this._key.path.lastSegment()}get ref(){return new Ul(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const a=new d4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(a)}return this._userDataWriter.convertValue(this._document.data.value)}}get(a){if(this._document){const p=this._document.data.field(U1("DocumentSnapshot.get",a));if(null!==p)return this._userDataWriter.convertValue(p)}}}class d4 extends Ef{data(){return super.data()}}function U1(S,a){return"string"==typeof a?l0(S,a):a instanceof V1?a._internalPath:a._delegate._internalPath}class eg{}class $2 extends eg{}function Lg(S,a,...p){let w=[];a instanceof eg&&w.push(a),w=w.concat(p),function(U){const J=U.filter(Re=>Re instanceof nu).length,ve=U.filter(Re=>Re instanceof N0).length;if(J>1||J>0&&ve>0)throw new Ae(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(w);for(const P of w)S=P._apply(S);return S}class N0 extends $2{constructor(a,p,w){super(),this._field=a,this._op=p,this._value=w,this.type="where"}static _create(a,p,w){return new N0(a,p,w)}_apply(a){const p=this._parse(a);return kf(a._query,p),new Ou(a.firestore,a.converter,Sa(a._query,p))}_parse(a){const p=rh(a.firestore);return function(U,J,ve,Re,st,Wt,In){let hi;if(st.isKeyField()){if("array-contains"===Wt||"array-contains-any"===Wt)throw new Ae(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Wt}' queries on documentId().`);if("in"===Wt||"not-in"===Wt){i2(In,Wt);const Ji=[];for(const Zo of In)Ji.push(Im(Re,U,Zo));hi={arrayValue:{values:Ji}}}else hi=Im(Re,U,In)}else"in"!==Wt&&"not-in"!==Wt&&"array-contains-any"!==Wt||i2(In,Wt),hi=function Jm(S,a,p,w=!1){return hp(p,S.Fu(w?4:3,a))}(ve,"where",In,"in"===Wt||"not-in"===Wt);return Nr.create(st,Wt,hi)}(a._query,0,p,a.firestore._databaseId,this._field,this._op,this._value)}}function tg(S,a,p){const w=a,P=U1("where",S);return N0._create(P,w,p)}class nu extends eg{constructor(a,p){super(),this.type=a,this._queryConstraints=p}static _create(a,p){return new nu(a,p)}_parse(a){const p=this._queryConstraints.map(w=>w._parse(a)).filter(w=>w.getFilters().length>0);return 1===p.length?p[0]:Yr.create(p,this._getOperator())}_apply(a){const p=this._parse(a);return 0===p.getFilters().length?a:(function(P,U){let J=P;const ve=U.getFlattenedFilters();for(const Re of ve)kf(J,Re),J=Sa(J,Re)}(a._query,p),new Ou(a.firestore,a.converter,Sa(a._query,p)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Im(S,a,p){if("string"==typeof(p=(0,We.Ku)(p))){if(""===p)throw new Ae(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sa(a)&&-1!==p.indexOf("/"))throw new Ae(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${p}' contains a '/' character.`);const w=a.path.child(ui.fromString(p));if(!Xi.isDocumentKey(w))throw new Ae(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${w}' is not because it has an odd number of segments (${w.length}).`);return Sc(S,new Xi(w))}if(p instanceof Ul)return Sc(S,p._key);throw new Ae(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yf(p)}.`)}function i2(S,a){if(!Array.isArray(S)||0===S.length)throw new Ae(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${a.toString()}' filters.`)}function kf(S,a){const p=function(P,U){for(const J of P)for(const ve of J.getFlattenedFilters())if(U.indexOf(ve.op)>=0)return ve.op;return null}(S.filters,function(P){switch(P){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(a.op));if(null!==p)throw new Ae(Ke.INVALID_ARGUMENT,p===a.op?`Invalid query. You cannot use more than one '${a.op.toString()}' filter.`:`Invalid query. You cannot use '${a.op.toString()}' filters with '${p.toString()}' filters.`)}class G1{convertValue(a,p="none"){switch(lc(a)){case 0:return null;case 1:return a.booleanValue;case 2:return Ra(a.integerValue||a.doubleValue);case 3:return this.convertTimestamp(a.timestampValue);case 4:return this.convertServerTimestamp(a,p);case 5:return a.stringValue;case 6:return this.convertBytes(Vc(a.bytesValue));case 7:return this.convertReference(a.referenceValue);case 8:return this.convertGeoPoint(a.geoPointValue);case 9:return this.convertArray(a.arrayValue,p);case 10:return this.convertObject(a.mapValue,p);default:throw Qt()}}convertObject(a,p){return this.convertObjectMap(a.fields,p)}convertObjectMap(a,p="none"){const w={};return bi(a,(P,U)=>{w[P]=this.convertValue(U,p)}),w}convertGeoPoint(a){return new yf(Ra(a.latitude),Ra(a.longitude))}convertArray(a,p){return(a.values||[]).map(w=>this.convertValue(w,p))}convertServerTimestamp(a,p){switch(p){case"previous":const w=ju(a);return null==w?null:this.convertValue(w,p);case"estimate":return this.convertTimestamp(Ol(a));default:return null}}convertTimestamp(a){const p=Ja(a);return new ji(p.seconds,p.nanos)}convertDocumentKey(a,p){const w=ui.fromString(a);En(ud(w));const P=new lu(w.get(1),w.get(3)),U=new Xi(w.popFirst(5));return P.isEqual(p)||kn(`Document ${U} contains a document reference within a different database (${P.projectId}/${P.database}) which is not supported. It will be treated as a reference in the current database (${p.projectId}/${p.database}) instead.`),U}}class y{constructor(a,p){this.hasPendingWrites=a,this.fromCache=p}isEqual(a){return this.hasPendingWrites===a.hasPendingWrites&&this.fromCache===a.fromCache}}class h extends Ef{constructor(a,p,w,P,U,J){super(a,p,w,P,J),this._firestore=a,this._firestoreImpl=a,this.metadata=U}exists(){return super.exists()}data(a={}){if(this._document){if(this._converter){const p=new A(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(p,a)}return this._userDataWriter.convertValue(this._document.data.value,a.serverTimestamps)}}get(a,p={}){if(this._document){const w=this._document.data.field(U1("DocumentSnapshot.get",a));if(null!==w)return this._userDataWriter.convertValue(w,p.serverTimestamps)}}}class A extends h{data(a={}){return super.data(a)}}class I{constructor(a,p,w,P){this._firestore=a,this._userDataWriter=p,this._snapshot=P,this.metadata=new y(P.hasPendingWrites,P.fromCache),this.query=w}get docs(){const a=[];return this.forEach(p=>a.push(p)),a}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(a,p){this._snapshot.docs.forEach(w=>{a.call(p,new A(this._firestore,this._userDataWriter,w.key,w,new y(this._snapshot.mutatedKeys.has(w.key),this._snapshot.fromCache),this.query.converter))})}docChanges(a={}){const p=!!a.includeMetadataChanges;if(p&&this._snapshot.excludesMetadataChanges)throw new Ae(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===p||(this._cachedChanges=function(P,U){if(P._snapshot.oldDocs.isEmpty()){let J=0;return P._snapshot.docChanges.map(ve=>({type:"added",doc:new A(P._firestore,P._userDataWriter,ve.doc.key,ve.doc,new y(P._snapshot.mutatedKeys.has(ve.doc.key),P._snapshot.fromCache),P.query.converter),oldIndex:-1,newIndex:J++}))}{let J=P._snapshot.oldDocs;return P._snapshot.docChanges.filter(ve=>U||3!==ve.type).map(ve=>{const Re=new A(P._firestore,P._userDataWriter,ve.doc.key,ve.doc,new y(P._snapshot.mutatedKeys.has(ve.doc.key),P._snapshot.fromCache),P.query.converter);let st=-1,Wt=-1;return 0!==ve.type&&(st=J.indexOf(ve.doc.key),J=J.delete(ve.doc.key)),1!==ve.type&&(J=J.add(ve.doc),Wt=J.indexOf(ve.doc.key)),{type:F(ve.type),doc:Re,oldIndex:st,newIndex:Wt}})}}(this,p),this._cachedChangesIncludeMetadataChanges=p),this._cachedChanges}}function F(S){switch(S){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}function Me(S){S=Ks(S,Ul);const a=Ks(S.firestore,ic);return function fm(S,a,p={}){const w=new Ge;return S.asyncQueue.enqueueAndForget((0,V.A)(function*(){return function(U,J,ve,Re,st){const Wt=new n1({next:hi=>{J.enqueueAndForget(()=>x2(U,In));const Ji=hi.docs.has(ve);!Ji&&hi.fromCache?st.reject(new Ae(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):Ji&&hi.fromCache&&Re&&"server"===Re.source?st.reject(new Ae(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):st.resolve(hi)},error:hi=>st.reject(hi)}),In=new xc(gr(ve.path),Wt,{includeMetadataChanges:!0,ra:!0});return rf(U,In)}(yield Zl(S),S.asyncQueue,a,p,w)})),w.promise}(El(a),S._key).then(p=>si(a,S,p))}class $e extends G1{constructor(a){super(),this.firestore=a}convertBytes(a){return new Rp(a)}convertReference(a){const p=this.convertDocumentKey(a,this.firestore._databaseId);return new Ul(this.firestore,null,p)}}function sn(S,a,p){S=Ks(S,Ul);const w=Ks(S.firestore,ic),P=function $p(S,a,p){let w;return w=S?p&&(p.merge||p.mergeFields)?S.toFirestore(a,p):S.toFirestore(a):a,w}(S.converter,a,p);return vn(w,[bf(rh(w),"setDoc",S._key,P,null!==S.converter,p).toMutation(S._key,ll.none())])}function gn(S){return vn(Ks(S.firestore,ic),[new Rr(S._key,ll.none())])}function Rt(S,...a){var p,w,P;S=(0,We.Ku)(S);let U={includeMetadataChanges:!1,source:"default"},J=0;"object"!=typeof a[J]||Zf(a[J])||(U=a[J],J++);const ve={includeMetadataChanges:U.includeMetadataChanges,source:U.source};if(Zf(a[J])){const In=a[J];a[J]=null===(p=In.next)||void 0===p?void 0:p.bind(In),a[J+1]=null===(w=In.error)||void 0===w?void 0:w.bind(In),a[J+2]=null===(P=In.complete)||void 0===P?void 0:P.bind(In)}let Re,st,Wt;if(S instanceof Ul)st=Ks(S.firestore,ic),Wt=gr(S._key.path),Re={next:In=>{a[J]&&a[J](si(st,S,In))},error:a[J+1],complete:a[J+2]};else{const In=Ks(S,Ou);st=Ks(In.firestore,ic),Wt=In._query;const hi=new $e(st);Re={next:Ji=>{a[J]&&a[J](new I(st,hi,In,Ji))},error:a[J+1],complete:a[J+2]},function V2(S){if("L"===S.limitType&&0===S.explicitOrderBy.length)throw new Ae(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(S._query)}return function(hi,Ji,Zo,br){const rr=new n1(br),Ds=new xc(Ji,rr,Zo);return hi.asyncQueue.enqueueAndForget((0,V.A)(function*(){return rf(yield Zl(hi),Ds)})),()=>{rr.$a(),hi.asyncQueue.enqueueAndForget((0,V.A)(function*(){return x2(yield Zl(hi),Ds)}))}}(El(st),Wt,ve,Re)}function vn(S,a){return function(w,P){const U=new Ge;return w.asyncQueue.enqueueAndForget((0,V.A)(function*(){return function lf(S,a,p){return La.apply(this,arguments)}(yield function Yl(S){return $h(S).then(a=>a.syncEngine)}(w),P,U)})),U.promise}(El(S),a)}function si(S,a,p){const w=p.docs.get(a._key),P=new $e(S);return new h(S,P,a._key,w,new y(p.hasPendingWrites,p.fromCache),a.converter)}!function(a,p=!0){Ot=re.MF,(0,re.om)(new ne.uA("firestore",(w,{instanceIdentifier:P,options:U})=>{const J=w.getProvider("app").getImmediate(),ve=new ic(new un(w.getProvider("auth-internal")),new Go(w.getProvider("app-check-internal")),function(st,Wt){if(!Object.prototype.hasOwnProperty.apply(st.options,["projectId"]))throw new Ae(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(st.options.projectId,Wt)}(J,P),J);return U=Object.assign({useFetchStreams:p},U),ve._setSettings(U),ve},"PUBLIC").setMultipleInstances(!0)),(0,re.KO)(Zn,"4.6.4",a),(0,re.KO)(Zn,"4.6.4","esm2017")}()},5873:(Yo,Xn,_e)=>{"use strict";_e.d(Xn,{$P:()=>S3,AUS:()=>ia,EKF:()=>qt,Jns:()=>Fm,O0q:()=>R2,Ow_:()=>x5,P0k:()=>_o,P1A:()=>Lf,PFj:()=>Ef,UIk:()=>xh,UN$:()=>Lg,WQq:()=>l,XjR:()=>Ad,Yvo:()=>Jm,dG8:()=>sh,eso:()=>nu,fZ:()=>T0,jBE:()=>Wv,jew:()=>V2,rqk:()=>De,tN8:()=>D6,u8Q:()=>dl,wAZ:()=>F4,y_k:()=>m2,z_V:()=>Vp});const l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",qt="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",xh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",ia="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm108.25 138.29l-134.4 160a16 16 0 01-12 5.71h-.27a16 16 0 01-11.89-5.3l-57.6-64a16 16 0 1123.78-21.4l45.29 50.32 122.59-145.91a16 16 0 0124.5 20.58z'/></svg>",dl="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M464 128L240 384l-96-96M144 384l-96-96M368 128L232 284' class='ionicon-fill-none ionicon-stroke-width'/></svg>",T0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",_o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",R2="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><rect x='96' y='32' width='320' height='448' rx='48' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M208 80h96' class='ionicon-fill-none ionicon-stroke-width'/><path d='M333.48 284.51A39.65 39.65 0 00304 272c-11.6 0-22.09 4.41-29.54 12.43s-11.2 19.12-10.34 31C265.83 338.91 283.72 358 304 358s38.14-19.09 39.87-42.55c.88-11.78-2.82-22.77-10.39-30.94zM371.69 448H236.31a12.05 12.05 0 01-9.31-4.17 13 13 0 01-2.76-10.92c3.25-17.56 13.38-32.31 29.3-42.66C267.68 381.06 285.6 376 304 376s36.32 5.06 50.46 14.25c15.92 10.35 26.05 25.1 29.3 42.66a13 13 0 01-2.76 10.92 12.05 12.05 0 01-9.31 4.17z'/></svg>",Jm="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 480H48a32 32 0 01-32-32V112a32 32 0 0132-32h16a32 32 0 0132 32v336a32 32 0 01-32 32zM240 176a32 32 0 00-32-32h-64a32 32 0 00-32 32v28a4 4 0 004 4h120a4 4 0 004-4zM112 448a32 32 0 0032 32h64a32 32 0 0032-32v-30a2 2 0 00-2-2H114a2 2 0 00-2 2z'/><rect x='112' y='240' width='128' height='144' rx='2' ry='2'/><path d='M320 480h-32a32 32 0 01-32-32V64a32 32 0 0132-32h32a32 32 0 0132 32v384a32 32 0 01-32 32zM495.89 445.45l-32.23-340c-1.48-15.65-16.94-27-34.53-25.31l-31.85 3c-17.59 1.67-30.65 15.71-29.17 31.36l32.23 340c1.48 15.65 16.94 27 34.53 25.31l31.85-3c17.59-1.67 30.65-15.71 29.17-31.36z'/></svg>",Ad="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M224 184h128M224 256h128M224 327h128' class='ionicon-fill-none ionicon-stroke-width'/><path d='M448 258c0-106-86-192-192-192S64 152 64 258s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='168' cy='184' r='8' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='168' cy='257' r='8' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='168' cy='328' r='8' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Ef="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M160 144h288M160 256h288M160 368h288' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='144' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='256' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='368' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",V2="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M256 96V56M256 456v-40' class='ionicon-fill-none'/><path d='M256 112a144 144 0 10144 144 144 144 0 00-144-144z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M416 256h40M56 256h40' class='ionicon-fill-none'/></svg>",Lg="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48c-79.5 0-144 61.39-144 137 0 87 96 224.87 131.25 272.49a15.77 15.77 0 0025.5 0C304 409.89 400 272.07 400 185c0-75.61-64.5-137-144-137z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='192' r='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",nu="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 208v-95a80 80 0 00-160 0v95' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='208' width='320' height='272' rx='48' ry='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Vp="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M304 336v40a40 40 0 01-40 40H104a40 40 0 01-40-40V136a40 40 0 0140-40h152c22.09 0 48 17.91 48 40v40M368 336l80-80-80-80M176 256h256' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",sh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M313.27 124.64L198.73 51.36a32 32 0 00-29.28.35L56.51 127.49A16 16 0 0048 141.63v295.8a16 16 0 0023.49 14.14l97.82-63.79a32 32 0 0129.5-.24l111.86 73a32 32 0 0029.27-.11l115.43-75.94a16 16 0 008.63-14.2V74.57a16 16 0 00-23.49-14.14l-98 63.86a32 32 0 01-29.24.35zM328 128v336M184 48v336' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",De="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M427.68 351.43C402 320 383.87 304 383.87 217.35 383.87 138 343.35 109.73 310 96c-4.43-1.82-8.6-6-9.95-10.55C294.2 65.54 277.8 48 256 48s-38.21 17.55-44 37.47c-1.35 4.6-5.52 8.71-9.95 10.53-33.39 13.75-73.87 41.92-73.87 121.35C128.13 304 110 320 84.32 351.43 73.68 364.45 83 384 101.61 384h308.88c18.51 0 27.77-19.61 17.19-32.57zM320 384v16a64 64 0 01-128 0v-16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",F4="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",m2="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 96a80 80 0 10-96 78.39v283.17a32.09 32.09 0 002.49 12.38l10.07 24a3.92 3.92 0 006.88 0l10.07-24a32.09 32.09 0 002.49-12.38V174.39A80.13 80.13 0 00336 96zm-56 0a24 24 0 1124-24 24 24 0 01-24 24z'/></svg>",Fm="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm74.77 217.3l-114.45 69.14a10.78 10.78 0 01-16.32-9.31V186.87a10.78 10.78 0 0116.32-9.31l114.45 69.14a10.89 10.89 0 010 18.6z'/></svg>",x5="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='36'/><path d='M190.24 341.77a22 22 0 01-16.46-7.38 118 118 0 010-156.76 22 22 0 1132.87 29.24 74 74 0 000 98.29 22 22 0 01-16.43 36.61zM321.76 341.77a22 22 0 01-16.43-36.61 74 74 0 000-98.29 22 22 0 1132.87-29.24 118 118 0 010 156.76 22 22 0 01-16.44 7.38z'/><path d='M139.29 392.72a21.92 21.92 0 01-16.08-7 190 190 0 010-259.49 22 22 0 1132.13 30.06 146 146 0 000 199.38 22 22 0 01-16.06 37zM372.71 392.72a22 22 0 01-16.06-37 146 146 0 000-199.38 22 22 0 1132.13-30.06 190 190 0 010 259.49 21.92 21.92 0 01-16.07 6.95z'/><path d='M429 438a22 22 0 01-16.39-36.67 218.34 218.34 0 000-290.66 22 22 0 0132.78-29.34 262.34 262.34 0 010 349.34A22 22 0 01429 438zM83 438a21.94 21.94 0 01-16.41-7.33 262.34 262.34 0 010-349.34 22 22 0 0132.78 29.34 218.34 218.34 0 000 290.66A22 22 0 0183 438z'/></svg>",S3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z'/></svg>",Wv="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",D6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z'/></svg>",Lf="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M80 112h352' class='ionicon-stroke-width'/><path d='M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>"},467:(Yo,Xn,_e)=>{"use strict";function V(ne,l,We,Y,ft,qt,jt){try{var wt=ne[qt](jt),C=wt.value}catch(At){return void We(At)}wt.done?l(C):Promise.resolve(C).then(Y,ft)}function re(ne){return function(){var l=this,We=arguments;return new Promise(function(Y,ft){var qt=ne.apply(l,We);function jt(C){V(qt,Y,ft,jt,wt,"next",C)}function wt(C){V(qt,Y,ft,jt,wt,"throw",C)}jt(void 0)})}}_e.d(Xn,{A:()=>re})},9842:(Yo,Xn,_e)=>{"use strict";function V(We){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Y){return typeof Y}:function(Y){return Y&&"function"==typeof Symbol&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(We)}function l(We,Y,ft){return(Y=function ne(We){var Y=function re(We,Y){if("object"!=V(We)||!We)return We;var ft=We[Symbol.toPrimitive];if(void 0!==ft){var qt=ft.call(We,Y||"default");if("object"!=V(qt))return qt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Y?String:Number)(We)}(We,"string");return"symbol"==V(Y)?Y:Y+""}(Y))in We?Object.defineProperty(We,Y,{value:ft,enumerable:!0,configurable:!0,writable:!0}):We[Y]=ft,We}_e.d(Xn,{A:()=>l})},1635:(Yo,Xn,_e)=>{"use strict";function l(Ae,Ge){var et={};for(var zt in Ae)Object.prototype.hasOwnProperty.call(Ae,zt)&&Ge.indexOf(zt)<0&&(et[zt]=Ae[zt]);if(null!=Ae&&"function"==typeof Object.getOwnPropertySymbols){var qn=0;for(zt=Object.getOwnPropertySymbols(Ae);qn<zt.length;qn++)Ge.indexOf(zt[qn])<0&&Object.prototype.propertyIsEnumerable.call(Ae,zt[qn])&&(et[zt[qn]]=Ae[zt[qn]])}return et}function We(Ae,Ge,et,zt){var go,qn=arguments.length,un=qn<3?Ge:null===zt?zt=Object.getOwnPropertyDescriptor(Ge,et):zt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)un=Reflect.decorate(Ae,Ge,et,zt);else for(var Qi=Ae.length-1;Qi>=0;Qi--)(go=Ae[Qi])&&(un=(qn<3?go(un):qn>3?go(Ge,et,un):go(Ge,et))||un);return qn>3&&un&&Object.defineProperty(Ge,et,un),un}function At(Ae,Ge,et,zt){return new(et||(et=Promise))(function(un,go){function Qi(Dr){try{Go(zt.next(Dr))}catch(cr){go(cr)}}function dr(Dr){try{Go(zt.throw(Dr))}catch(cr){go(cr)}}function Go(Dr){Dr.done?un(Dr.value):function qn(un){return un instanceof et?un:new et(function(go){go(un)})}(Dr.value).then(Qi,dr)}Go((zt=zt.apply(Ae,Ge||[])).next())})}function Zn(Ae){return this instanceof Zn?(this.v=Ae,this):new Zn(Ae)}function xt(Ae,Ge,et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qn,zt=et.apply(Ae,Ge||[]),un=[];return qn={},Qi("next"),Qi("throw"),Qi("return",function go(ko){return function(Er){return Promise.resolve(Er).then(ko,cr)}}),qn[Symbol.asyncIterator]=function(){return this},qn;function Qi(ko,Er){zt[ko]&&(qn[ko]=function(Wr){return new Promise(function(ji,vi){un.push([ko,Wr,ji,vi])>1||dr(ko,Wr)})},Er&&(qn[ko]=Er(qn[ko])))}function dr(ko,Er){try{!function Go(ko){ko.value instanceof Zn?Promise.resolve(ko.value.v).then(Dr,cr):Ei(un[0][2],ko)}(zt[ko](Er))}catch(Wr){Ei(un[0][3],Wr)}}function Dr(ko){dr("next",ko)}function cr(ko){dr("throw",ko)}function Ei(ko,Er){ko(Er),un.shift(),un.length&&dr(un[0][0],un[0][1])}}function wn(Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,Ge=Ae[Symbol.asyncIterator];return Ge?Ge.call(Ae):(Ae=function xn(Ae){var Ge="function"==typeof Symbol&&Symbol.iterator,et=Ge&&Ae[Ge],zt=0;if(et)return et.call(Ae);if(Ae&&"number"==typeof Ae.length)return{next:function(){return Ae&&zt>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[zt++],done:!Ae}}};throw new TypeError(Ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ae),et={},zt("next"),zt("throw"),zt("return"),et[Symbol.asyncIterator]=function(){return this},et);function zt(un){et[un]=Ae[un]&&function(go){return new Promise(function(Qi,dr){!function qn(un,go,Qi,dr){Promise.resolve(dr).then(function(Go){un({value:Go,done:Qi})},go)}(Qi,dr,(go=Ae[un](go)).done,go.value)})}}}_e.d(Xn,{AQ:()=>xt,Cg:()=>We,N3:()=>Zn,Tt:()=>l,sH:()=>At,xN:()=>wn}),"function"==typeof SuppressedError&&SuppressedError}},Yo=>{Yo(Yo.s=2926)}]);