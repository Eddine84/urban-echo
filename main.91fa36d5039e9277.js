(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{5083:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{E_:()=>on,F3:()=>vt,I9:()=>Ut});var V=_e(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var Xt=function(pn){return pn.Unimplemented="UNIMPLEMENTED",pn.Unavailable="UNAVAILABLE",pn}(Xt||{});class Ut extends Error{constructor(Rt,On,Cn){super(Rt),this.message=Rt,this.code=On,this.data=Cn}}const C=pn=>{var Rt,On,Cn,so,Fn;const Ke=pn.CapacitorCustomPlatform||null,Ae=pn.Capacitor||{},Ge=Ae.Plugins=Ae.Plugins||{},tt=pn.CapacitorPlatforms,Yn=(null===(Rt=null==tt?void 0:tt.currentPlatform)||void 0===Rt?void 0:Rt.getPlatform)||(()=>null!==Ke?Ke.name:(pn=>{var Rt,On;return null!=pn&&pn.androidBridge?"android":null!==(On=null===(Rt=null==pn?void 0:pn.webkit)||void 0===Rt?void 0:Rt.messageHandlers)&&void 0!==On&&On.bridge?"ios":"web"})(pn)),_o=(null===(On=null==tt?void 0:tt.currentPlatform)||void 0===On?void 0:On.isNativePlatform)||(()=>"web"!==Yn()),pr=(null===(Cn=null==tt?void 0:tt.currentPlatform)||void 0===Cn?void 0:Cn.isPluginAvailable)||(Li=>{const yi=$i.get(Li);return!!(null!=yi&&yi.platforms.has(Yn())||zr(Li))}),zr=(null===(so=null==tt?void 0:tt.currentPlatform)||void 0===so?void 0:so.getPluginHeader)||(Li=>{var yi;return null===(yi=Ae.PluginHeaders)||void 0===yi?void 0:yi.find(ao=>ao.name===Li)}),$i=new Map,Jr=(null===(Fn=null==tt?void 0:tt.currentPlatform)||void 0===Fn?void 0:Fn.registerPlugin)||((Li,yi={})=>{const ao=$i.get(Li);if(ao)return console.warn(`Capacitor plugin "${Li}" already registered. Cannot register plugins twice.`),ao.proxy;const si=Yn(),Fi=zr(Li);let mo;const eo=function(){var Or=(0,V.A)(function*(){return!mo&&si in yi?mo=mo="function"==typeof yi[si]?yield yi[si]():yi[si]:null!==Ke&&!mo&&"web"in yi&&(mo=mo="function"==typeof yi.web?yield yi.web():yi.web),mo});return function(){return Or.apply(this,arguments)}}(),Jo=Or=>{let Kr;const Qr=(...Ho)=>{const Nr=eo().then(ir=>{const _r=((Or,Kr)=>{var Qr,Ho;if(!Fi){if(Or)return null===(Ho=Or[Kr])||void 0===Ho?void 0:Ho.bind(Or);throw new Ut(`"${Li}" plugin is not implemented on ${si}`,Xt.Unimplemented)}{const Nr=null==Fi?void 0:Fi.methods.find(ir=>Kr===ir.name);if(Nr)return"promise"===Nr.rtype?ir=>Ae.nativePromise(Li,Kr.toString(),ir):(ir,_r)=>Ae.nativeCallback(Li,Kr.toString(),ir,_r);if(Or)return null===(Qr=Or[Kr])||void 0===Qr?void 0:Qr.bind(Or)}})(ir,Or);if(_r){const Dr=_r(...Ho);return Kr=null==Dr?void 0:Dr.remove,Dr}throw new Ut(`"${Li}.${Or}()" is not implemented on ${si}`,Xt.Unimplemented)});return"addListener"===Or&&(Nr.remove=(0,V.A)(function*(){return Kr()})),Nr};return Qr.toString=()=>`${Or.toString()}() { [capacitor code] }`,Object.defineProperty(Qr,"name",{value:Or,writable:!1,configurable:!1}),Qr},or=Jo("addListener"),ti=Jo("removeListener"),cs=(Or,Kr)=>{const Qr=or({eventName:Or},Kr),Ho=function(){var ir=(0,V.A)(function*(){const _r=yield Qr;ti({eventName:Or,callbackId:_r},Kr)});return function(){return ir.apply(this,arguments)}}(),Nr=new Promise(ir=>Qr.then(()=>ir({remove:Ho})));return Nr.remove=(0,V.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Ho()}),Nr},Cs=new Proxy({},{get(Or,Kr){switch(Kr){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Fi?cs:or;case"removeListener":return ti;default:return Jo(Kr)}}});return Ge[Li]=Cs,$i.set(Li,{name:Li,proxy:Cs,platforms:new Set([...Object.keys(yi),...Fi?[si]:[]])}),Cs});return Ae.convertFileSrc||(Ae.convertFileSrc=Li=>Li),Ae.getPlatform=Yn,Ae.handleError=Li=>pn.console.error(Li),Ae.isNativePlatform=_o,Ae.isPluginAvailable=pr,Ae.pluginMethodNoop=(Li,yi,ao)=>Promise.reject(`${ao} does not have an implementation of "${yi}".`),Ae.registerPlugin=Jr,Ae.Exception=Ut,Ae.DEBUG=!!Ae.DEBUG,Ae.isLoggingEnabled=!!Ae.isLoggingEnabled,Ae.platform=Ae.getPlatform(),Ae.isNative=Ae.isNativePlatform(),Ae},Ht=(pn=>pn.Capacitor=C(pn))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vt=Ht.registerPlugin;class on{constructor(Rt){this.listeners={},this.retainedEventArguments={},this.windowListeners={},Rt&&(console.warn(`Capacitor WebPlugin "${Rt.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=Rt)}addListener(Rt,On){var Cn=this;let so=!1;this.listeners[Rt]||(this.listeners[Rt]=[],so=!0),this.listeners[Rt].push(On);const Ke=this.windowListeners[Rt];Ke&&!Ke.registered&&this.addWindowListener(Ke),so&&this.sendRetainedArgumentsForEvent(Rt);const Ae=function(){var tt=(0,V.A)(function*(){return Cn.removeListener(Rt,On)});return function(){return tt.apply(this,arguments)}}();return Promise.resolve({remove:Ae})}removeAllListeners(){var Rt=this;return(0,V.A)(function*(){Rt.listeners={};for(const On in Rt.windowListeners)Rt.removeWindowListener(Rt.windowListeners[On]);Rt.windowListeners={}})()}notifyListeners(Rt,On,Cn){const so=this.listeners[Rt];if(so)so.forEach(Fn=>Fn(On));else if(Cn){let Fn=this.retainedEventArguments[Rt];Fn||(Fn=[]),Fn.push(On),this.retainedEventArguments[Rt]=Fn}}hasListeners(Rt){return!!this.listeners[Rt].length}registerWindowListener(Rt,On){this.windowListeners[On]={registered:!1,windowEventName:Rt,pluginEventName:On,handler:Cn=>{this.notifyListeners(On,Cn)}}}unimplemented(Rt="not implemented"){return new Ht.Exception(Rt,Xt.Unimplemented)}unavailable(Rt="not available"){return new Ht.Exception(Rt,Xt.Unavailable)}removeListener(Rt,On){var Cn=this;return(0,V.A)(function*(){const so=Cn.listeners[Rt];if(!so)return;const Fn=so.indexOf(On);Cn.listeners[Rt].splice(Fn,1),Cn.listeners[Rt].length||Cn.removeWindowListener(Cn.windowListeners[Rt])})()}addWindowListener(Rt){window.addEventListener(Rt.windowEventName,Rt.handler),Rt.registered=!0}removeWindowListener(Rt){Rt&&(window.removeEventListener(Rt.windowEventName,Rt.handler),Rt.registered=!1)}sendRetainedArgumentsForEvent(Rt){const On=this.retainedEventArguments[Rt];On&&(delete this.retainedEventArguments[Rt],On.forEach(Cn=>{this.notifyListeners(Rt,Cn)}))}}const Jn=pn=>encodeURIComponent(pn).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),An=pn=>pn.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class qn extends on{getCookies(){return(0,V.A)(function*(){const Rt=document.cookie,On={};return Rt.split(";").forEach(Cn=>{if(Cn.length<=0)return;let[so,Fn]=Cn.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");so=An(so).trim(),Fn=An(Fn).trim(),On[so]=Fn}),On})()}setCookie(Rt){return(0,V.A)(function*(){try{const On=Jn(Rt.key),Cn=Jn(Rt.value),so=`; expires=${(Rt.expires||"").replace("expires=","")}`,Fn=(Rt.path||"/").replace("path=",""),Ke=null!=Rt.url&&Rt.url.length>0?`domain=${Rt.url}`:"";document.cookie=`${On}=${Cn||""}${so}; path=${Fn}; ${Ke};`}catch(On){return Promise.reject(On)}})()}deleteCookie(Rt){return(0,V.A)(function*(){try{document.cookie=`${Rt.key}=; Max-Age=0`}catch(On){return Promise.reject(On)}})()}clearCookies(){return(0,V.A)(function*(){try{const Rt=document.cookie.split(";")||[];for(const On of Rt)document.cookie=On.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(Rt){return Promise.reject(Rt)}})()}clearAllCookies(){var Rt=this;return(0,V.A)(function*(){try{yield Rt.clearCookies()}catch(On){return Promise.reject(On)}})()}}vt("CapacitorCookies",{web:()=>new qn});const Ot=function(){var pn=(0,V.A)(function*(Rt){return new Promise((On,Cn)=>{const so=new FileReader;so.onload=()=>{const Fn=so.result;On(Fn.indexOf(",")>=0?Fn.split(",")[1]:Fn)},so.onerror=Fn=>Cn(Fn),so.readAsDataURL(Rt)})});return function(On){return pn.apply(this,arguments)}}();class Ct extends on{request(Rt){return(0,V.A)(function*(){const On=((pn,Rt={})=>{const On=Object.assign({method:pn.method||"GET",headers:pn.headers},Rt),so=((pn={})=>{const Rt=Object.keys(pn);return Object.keys(pn).map(so=>so.toLocaleLowerCase()).reduce((so,Fn,Ke)=>(so[Fn]=pn[Rt[Ke]],so),{})})(pn.headers)["content-type"]||"";if("string"==typeof pn.data)On.body=pn.data;else if(so.includes("application/x-www-form-urlencoded")){const Fn=new URLSearchParams;for(const[Ke,Ae]of Object.entries(pn.data||{}))Fn.set(Ke,Ae);On.body=Fn.toString()}else if(so.includes("multipart/form-data")||pn.data instanceof FormData){const Fn=new FormData;if(pn.data instanceof FormData)pn.data.forEach((Ae,Ge)=>{Fn.append(Ge,Ae)});else for(const Ae of Object.keys(pn.data))Fn.append(Ae,pn.data[Ae]);On.body=Fn;const Ke=new Headers(On.headers);Ke.delete("content-type"),On.headers=Ke}else(so.includes("application/json")||"object"==typeof pn.data)&&(On.body=JSON.stringify(pn.data));return On})(Rt,Rt.webFetchExtra),Cn=((pn,Rt=!0)=>pn?Object.entries(pn).reduce((Cn,so)=>{const[Fn,Ke]=so;let Ae,Ge;return Array.isArray(Ke)?(Ge="",Ke.forEach(tt=>{Ae=Rt?encodeURIComponent(tt):tt,Ge+=`${Fn}=${Ae}&`}),Ge.slice(0,-1)):(Ae=Rt?encodeURIComponent(Ke):Ke,Ge=`${Fn}=${Ae}`),`${Cn}&${Ge}`},"").substr(1):null)(Rt.params,Rt.shouldEncodeUrlParams),so=Cn?`${Rt.url}?${Cn}`:Rt.url,Fn=yield fetch(so,On),Ke=Fn.headers.get("content-type")||"";let Ge,tt,{responseType:Ae="text"}=Fn.ok?Rt:{};switch(Ke.includes("application/json")&&(Ae="json"),Ae){case"arraybuffer":case"blob":tt=yield Fn.blob(),Ge=yield Ot(tt);break;case"json":Ge=yield Fn.json();break;default:Ge=yield Fn.text()}const zt={};return Fn.headers.forEach((Yn,cn)=>{zt[cn]=Yn}),{data:Ge,headers:zt,status:Fn.status,url:Fn.url}})()}get(Rt){var On=this;return(0,V.A)(function*(){return On.request(Object.assign(Object.assign({},Rt),{method:"GET"}))})()}post(Rt){var On=this;return(0,V.A)(function*(){return On.request(Object.assign(Object.assign({},Rt),{method:"POST"}))})()}put(Rt){var On=this;return(0,V.A)(function*(){return On.request(Object.assign(Object.assign({},Rt),{method:"PUT"}))})()}patch(Rt){var On=this;return(0,V.A)(function*(){return On.request(Object.assign(Object.assign({},Rt),{method:"PATCH"}))})()}delete(Rt){var On=this;return(0,V.A)(function*(){return On.request(Object.assign(Object.assign({},Rt),{method:"DELETE"}))})()}}vt("CapacitorHttp",{web:()=>new Ct})},1076:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Am:()=>es,FA:()=>_o,Fy:()=>vn,I9:()=>Jo,Im:()=>ao,Ku:()=>Xn,T9:()=>qn,Tj:()=>Jn,Uj:()=>Ut,XA:()=>xt,ZQ:()=>Pn,bD:()=>Fi,cY:()=>Ot,eX:()=>tt,g:()=>cn,hp:()=>or,jZ:()=>ki,lT:()=>so,lV:()=>On,nr:()=>Ae,sr:()=>Rt,tD:()=>cs,u:()=>It,yU:()=>An,zW:()=>Ge});const l=function(kt){const mt=[];let Ye=0;for(let Mt=0;Mt<kt.length;Mt++){let Jt=kt.charCodeAt(Mt);Jt<128?mt[Ye++]=Jt:Jt<2048?(mt[Ye++]=Jt>>6|192,mt[Ye++]=63&Jt|128):55296==(64512&Jt)&&Mt+1<kt.length&&56320==(64512&kt.charCodeAt(Mt+1))?(Jt=65536+((1023&Jt)<<10)+(1023&kt.charCodeAt(++Mt)),mt[Ye++]=Jt>>18|240,mt[Ye++]=Jt>>12&63|128,mt[Ye++]=Jt>>6&63|128,mt[Ye++]=63&Jt|128):(mt[Ye++]=Jt>>12|224,mt[Ye++]=Jt>>6&63|128,mt[Ye++]=63&Jt|128)}return mt},Y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(kt,mt){if(!Array.isArray(kt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ye=mt?this.byteToCharMapWebSafe_:this.byteToCharMap_,Mt=[];for(let Jt=0;Jt<kt.length;Jt+=3){const Bn=kt[Jt],Lt=Jt+1<kt.length,Ie=Lt?kt[Jt+1]:0,ue=Jt+2<kt.length,ae=ue?kt[Jt+2]:0;let it=(15&Ie)<<2|ae>>6,qt=63&ae;ue||(qt=64,Lt||(it=64)),Mt.push(Ye[Bn>>2],Ye[(3&Bn)<<4|Ie>>4],Ye[it],Ye[qt])}return Mt.join("")},encodeString(kt,mt){return this.HAS_NATIVE_SUPPORT&&!mt?btoa(kt):this.encodeByteArray(l(kt),mt)},decodeString(kt,mt){return this.HAS_NATIVE_SUPPORT&&!mt?atob(kt):function(kt){const mt=[];let Ye=0,Mt=0;for(;Ye<kt.length;){const Jt=kt[Ye++];if(Jt<128)mt[Mt++]=String.fromCharCode(Jt);else if(Jt>191&&Jt<224){const Bn=kt[Ye++];mt[Mt++]=String.fromCharCode((31&Jt)<<6|63&Bn)}else if(Jt>239&&Jt<365){const ue=((7&Jt)<<18|(63&kt[Ye++])<<12|(63&kt[Ye++])<<6|63&kt[Ye++])-65536;mt[Mt++]=String.fromCharCode(55296+(ue>>10)),mt[Mt++]=String.fromCharCode(56320+(1023&ue))}else{const Bn=kt[Ye++],Lt=kt[Ye++];mt[Mt++]=String.fromCharCode((15&Jt)<<12|(63&Bn)<<6|63&Lt)}}return mt.join("")}(this.decodeStringToByteArray(kt,mt))},decodeStringToByteArray(kt,mt){this.init_();const Ye=mt?this.charToByteMapWebSafe_:this.charToByteMap_,Mt=[];for(let Jt=0;Jt<kt.length;){const Bn=Ye[kt.charAt(Jt++)],Ie=Jt<kt.length?Ye[kt.charAt(Jt)]:0;++Jt;const ae=Jt<kt.length?Ye[kt.charAt(Jt)]:64;++Jt;const Ue=Jt<kt.length?Ye[kt.charAt(Jt)]:64;if(++Jt,null==Bn||null==Ie||null==ae||null==Ue)throw new ft;Mt.push(Bn<<2|Ie>>4),64!==ae&&(Mt.push(Ie<<4&240|ae>>2),64!==Ue&&Mt.push(ae<<6&192|Ue))}return Mt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let kt=0;kt<this.ENCODED_VALS.length;kt++)this.byteToCharMap_[kt]=this.ENCODED_VALS.charAt(kt),this.charToByteMap_[this.byteToCharMap_[kt]]=kt,this.byteToCharMapWebSafe_[kt]=this.ENCODED_VALS_WEBSAFE.charAt(kt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[kt]]=kt,kt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(kt)]=kt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(kt)]=kt)}}};class ft extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ut=function(kt){return function(kt){const mt=l(kt);return Y.encodeByteArray(mt,!0)}(kt).replace(/\./g,"")},It=function(kt){try{return Y.decodeString(kt,!0)}catch(mt){console.error("base64Decode failed: ",mt)}return null},ht=()=>{try{return function vt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const kt=process.env.__FIREBASE_DEFAULTS__;return kt?JSON.parse(kt):void 0})()||(()=>{if(typeof document>"u")return;let kt;try{kt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const mt=kt&&It(kt[1]);return mt&&JSON.parse(mt)})()}catch(kt){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${kt}`)}},Jn=kt=>{var mt,Ye;return null===(Ye=null===(mt=ht())||void 0===mt?void 0:mt.emulatorHosts)||void 0===Ye?void 0:Ye[kt]},An=kt=>{const mt=Jn(kt);if(!mt)return;const Ye=mt.lastIndexOf(":");if(Ye<=0||Ye+1===mt.length)throw new Error(`Invalid host ${mt} with no separate hostname and port!`);const Mt=parseInt(mt.substring(Ye+1),10);return"["===mt[0]?[mt.substring(1,Ye-1),Mt]:[mt.substring(0,Ye),Mt]},qn=()=>{var kt;return null===(kt=ht())||void 0===kt?void 0:kt.config},xt=kt=>{var mt;return null===(mt=ht())||void 0===mt?void 0:mt[`_${kt}`]};class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((mt,Ye)=>{this.resolve=mt,this.reject=Ye})}wrapCallback(mt){return(Ye,Mt)=>{Ye?this.reject(Ye):this.resolve(Mt),"function"==typeof mt&&(this.promise.catch(()=>{}),1===mt.length?mt(Ye):mt(Ye,Mt))}}}function vn(kt,mt){if(kt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Mt=mt||"demo-project",Jt=kt.iat||0,Bn=kt.sub||kt.user_id;if(!Bn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Lt=Object.assign({iss:`https://securetoken.google.com/${Mt}`,aud:Mt,iat:Jt,exp:Jt+3600,auth_time:Jt,sub:Bn,user_id:Bn,firebase:{sign_in_provider:"custom",identities:{}}},kt);return[Ut(JSON.stringify({alg:"none",type:"JWT"})),Ut(JSON.stringify(Lt)),""].join(".")}function Pn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ki(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function Rt(){const kt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof kt&&void 0!==kt.id}function On(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function so(){const kt=Pn();return kt.indexOf("MSIE ")>=0||kt.indexOf("Trident/")>=0}function Ae(){return!function Ct(){var kt;const mt=null===(kt=ht())||void 0===kt?void 0:kt.forceEnvironment;if("node"===mt)return!0;if("browser"===mt)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){try{return"object"==typeof indexedDB}catch{return!1}}function tt(){return new Promise((kt,mt)=>{try{let Ye=!0;const Mt="validate-browser-context-for-indexeddb-analytics-module",Jt=self.indexedDB.open(Mt);Jt.onsuccess=()=>{Jt.result.close(),Ye||self.indexedDB.deleteDatabase(Mt),kt(!0)},Jt.onupgradeneeded=()=>{Ye=!1},Jt.onerror=()=>{var Bn;mt((null===(Bn=Jt.error)||void 0===Bn?void 0:Bn.message)||"")}}catch(Ye){mt(Ye)}})}class cn extends Error{constructor(mt,Ye,Mt){super(Ye),this.code=mt,this.customData=Mt,this.name="FirebaseError",Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}}class _o{constructor(mt,Ye,Mt){this.service=mt,this.serviceName=Ye,this.errors=Mt}create(mt,...Ye){const Mt=Ye[0]||{},Jt=`${this.service}/${mt}`,Bn=this.errors[mt],Lt=Bn?function to(kt,mt){return kt.replace(pr,(Ye,Mt)=>{const Jt=mt[Mt];return null!=Jt?String(Jt):`<${Mt}?>`})}(Bn,Mt):"Error";return new cn(Jt,`${this.serviceName}: ${Lt} (${Jt}).`,Mt)}}const pr=/\{\$([^}]+)}/g;function ao(kt){for(const mt in kt)if(Object.prototype.hasOwnProperty.call(kt,mt))return!1;return!0}function Fi(kt,mt){if(kt===mt)return!0;const Ye=Object.keys(kt),Mt=Object.keys(mt);for(const Jt of Ye){if(!Mt.includes(Jt))return!1;const Bn=kt[Jt],Lt=mt[Jt];if(mo(Bn)&&mo(Lt)){if(!Fi(Bn,Lt))return!1}else if(Bn!==Lt)return!1}for(const Jt of Mt)if(!Ye.includes(Jt))return!1;return!0}function mo(kt){return null!==kt&&"object"==typeof kt}function es(kt){const mt=[];for(const[Ye,Mt]of Object.entries(kt))Array.isArray(Mt)?Mt.forEach(Jt=>{mt.push(encodeURIComponent(Ye)+"="+encodeURIComponent(Jt))}):mt.push(encodeURIComponent(Ye)+"="+encodeURIComponent(Mt));return mt.length?"&"+mt.join("&"):""}function Jo(kt){const mt={};return kt.replace(/^\?/,"").split("&").forEach(Mt=>{if(Mt){const[Jt,Bn]=Mt.split("=");mt[decodeURIComponent(Jt)]=decodeURIComponent(Bn)}}),mt}function or(kt){const mt=kt.indexOf("?");if(!mt)return"";const Ye=kt.indexOf("#",mt);return kt.substring(mt,Ye>0?Ye:void 0)}function cs(kt,mt){const Ye=new Cs(kt,mt);return Ye.subscribe.bind(Ye)}class Cs{constructor(mt,Ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ye,this.task.then(()=>{mt(this)}).catch(Mt=>{this.error(Mt)})}next(mt){this.forEachObserver(Ye=>{Ye.next(mt)})}error(mt){this.forEachObserver(Ye=>{Ye.error(mt)}),this.close(mt)}complete(){this.forEachObserver(mt=>{mt.complete()}),this.close()}subscribe(mt,Ye,Mt){let Jt;if(void 0===mt&&void 0===Ye&&void 0===Mt)throw new Error("Missing Observer.");Jt=function Kr(kt,mt){if("object"!=typeof kt||null===kt)return!1;for(const Ye of mt)if(Ye in kt&&"function"==typeof kt[Ye])return!0;return!1}(mt,["next","error","complete"])?mt:{next:mt,error:Ye,complete:Mt},void 0===Jt.next&&(Jt.next=Qr),void 0===Jt.error&&(Jt.error=Qr),void 0===Jt.complete&&(Jt.complete=Qr);const Bn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Jt.error(this.finalError):Jt.complete()}catch{}}),this.observers.push(Jt),Bn}unsubscribeOne(mt){void 0===this.observers||void 0===this.observers[mt]||(delete this.observers[mt],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(mt){if(!this.finalized)for(let Ye=0;Ye<this.observers.length;Ye++)this.sendOne(Ye,mt)}sendOne(mt,Ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[mt])try{Ye(this.observers[mt])}catch(Mt){typeof console<"u"&&console.error&&console.error(Mt)}})}close(mt){this.finalized||(this.finalized=!0,void 0!==mt&&(this.finalError=mt),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}function Xn(kt){return kt&&kt._delegate?kt._delegate:kt}},555:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{c:()=>Y});var V=_e(4878);let se;const l=(ft,Xt,Ut)=>{const It=Xt.startsWith("animation")?(ft=>(void 0===se&&(se=void 0===ft.style.animationName&&void 0!==ft.style.webkitAnimationName?"-webkit-":""),se))(ft):"";ft.style.setProperty(It+Xt,Ut)},qe=(ft=[],Xt)=>{if(void 0!==Xt){const Ut=Array.isArray(Xt)?Xt:[Xt];return[...ft,...Ut]}return ft},Y=ft=>{let Xt,Ut,It,C,At,Ht,ht,ki,Ct,Me,Cn,vt=[],un=[],xn=[],on=!1,Jn={},An=[],qn=[],xt={},Ot=0,vn=!1,Pn=!1,pn=!0,Rt=!1,On=!0,so=!1;const Fn=ft,Ke=[],Ae=[],Ge=[],tt=[],zt=[],Yn=[],cn=[],_o=[],to=[],pr=[],jo=[],zr="function"==typeof AnimationEffect||void 0!==V.w&&"function"==typeof V.w.AnimationEffect,Mi="function"==typeof Element&&"function"==typeof Element.prototype.animate&&zr,rs=()=>jo,yi=(Yt,ri)=>{const Ri=ri.findIndex(Uo=>Uo.c===Yt);Ri>-1&&ri.splice(Ri,1)},si=(Yt,ri)=>((null!=ri&&ri.oneTimeCallback?Ae:Ke).push({c:Yt,o:ri}),Cn),mo=()=>{Mi&&(jo.forEach(Yt=>{Yt.cancel()}),jo.length=0)},eo=()=>{Yn.forEach(Yt=>{null!=Yt&&Yt.parentNode&&Yt.parentNode.removeChild(Yt)}),Yn.length=0},_r=()=>void 0!==At?At:ht?ht.getFill():"both",Dr=()=>void 0!==ki?ki:void 0!==Ht?Ht:ht?ht.getDirection():"normal",Gs=()=>vn?"linear":void 0!==It?It:ht?ht.getEasing():"linear",ni=()=>Pn?0:void 0!==Ct?Ct:void 0!==Ut?Ut:ht?ht.getDuration():0,as=()=>void 0!==C?C:ht?ht.getIterations():1,Lr=()=>void 0!==Me?Me:void 0!==Xt?Xt:ht?ht.getDelay():0,Ie=()=>{0!==Ot&&(Ot--,0===Ot&&((()=>{to.forEach(mr=>mr()),pr.forEach(mr=>mr());const Yt=pn?1:0,ri=An,Ri=qn,Uo=xt;tt.forEach(mr=>{const ss=mr.classList;ri.forEach(Vr=>ss.add(Vr)),Ri.forEach(Vr=>ss.remove(Vr));for(const Vr in Uo)Uo.hasOwnProperty(Vr)&&l(mr,Vr,Uo[Vr])}),Ct=void 0,ki=void 0,Me=void 0,Ke.forEach(mr=>mr.c(Yt,Cn)),Ae.forEach(mr=>mr.c(Yt,Cn)),Ae.length=0,On=!0,pn&&(Rt=!0),pn=!0})(),ht&&ht.animationFinish()))},ae=()=>{(()=>{cn.forEach(Uo=>Uo()),_o.forEach(Uo=>Uo());const Yt=un,ri=xn,Ri=Jn;tt.forEach(Uo=>{const mr=Uo.classList;Yt.forEach(ss=>mr.add(ss)),ri.forEach(ss=>mr.remove(ss));for(const ss in Ri)Ri.hasOwnProperty(ss)&&l(Uo,ss,Ri[ss])})})(),vt.length>0&&Mi&&(tt.forEach(Yt=>{const ri=Yt.animate(vt,{id:Fn,delay:Lr(),duration:ni(),easing:Gs(),iterations:as(),fill:_r(),direction:Dr()});ri.pause(),jo.push(ri)}),jo.length>0&&(jo[0].onfinish=()=>{Ie()})),on=!0},we=Yt=>{Yt=Math.min(Math.max(Yt,0),.9999),Mi&&jo.forEach(ri=>{ri.currentTime=ri.effect.getComputedTiming().delay+ni()*Yt,ri.pause()})},Ue=Yt=>{jo.forEach(ri=>{ri.effect.updateTiming({delay:Lr(),duration:ni(),easing:Gs(),iterations:as(),fill:_r(),direction:Dr()})}),void 0!==Yt&&we(Yt)},it=(Yt=!1,ri=!0,Ri)=>(Yt&&zt.forEach(Uo=>{Uo.update(Yt,ri,Ri)}),Mi&&Ue(Ri),Cn),Gn=()=>{on&&(Mi?jo.forEach(Yt=>{Yt.pause()}):tt.forEach(Yt=>{l(Yt,"animation-play-state","paused")}),so=!0)},oi=Yt=>new Promise(ri=>{null!=Yt&&Yt.sync&&(Pn=!0,si(()=>Pn=!1,{oneTimeCallback:!0})),on||ae(),Rt&&(Mi&&(we(0),Ue()),Rt=!1),On&&(Ot=zt.length+1,On=!1);const Ri=()=>{yi(Uo,Ae),ri()},Uo=()=>{yi(Ri,Ge),ri()};si(Uo,{oneTimeCallback:!0}),((Yt,ri)=>{Ge.push({c:Yt,o:{oneTimeCallback:!0}})})(Ri),zt.forEach(mr=>{mr.play()}),Mi?(jo.forEach(Yt=>{Yt.play()}),(0===vt.length||0===tt.length)&&Ie()):Ie(),so=!1}),hi=(Yt,ri)=>{const Ri=vt[0];return void 0===Ri||void 0!==Ri.offset&&0!==Ri.offset?vt=[{offset:0,[Yt]:ri},...vt]:Ri[Yt]=ri,Cn};return Cn={parentAnimation:ht,elements:tt,childAnimations:zt,id:Fn,animationFinish:Ie,from:hi,to:(Yt,ri)=>{const Ri=vt[vt.length-1];return void 0===Ri||void 0!==Ri.offset&&1!==Ri.offset?vt=[...vt,{offset:1,[Yt]:ri}]:Ri[Yt]=ri,Cn},fromTo:(Yt,ri,Ri)=>hi(Yt,ri).to(Yt,Ri),parent:Yt=>(ht=Yt,Cn),play:oi,pause:()=>(zt.forEach(Yt=>{Yt.pause()}),Gn(),Cn),stop:()=>{zt.forEach(Yt=>{Yt.stop()}),on&&(mo(),on=!1),vn=!1,Pn=!1,On=!0,ki=void 0,Ct=void 0,Me=void 0,Ot=0,Rt=!1,pn=!0,so=!1,Ge.forEach(Yt=>Yt.c(0,Cn)),Ge.length=0},destroy:Yt=>(zt.forEach(ri=>{ri.destroy(Yt)}),(Yt=>{mo(),Yt&&eo()})(Yt),tt.length=0,zt.length=0,vt.length=0,Ke.length=0,Ae.length=0,on=!1,On=!0,Cn),keyframes:Yt=>{const ri=vt!==Yt;return vt=Yt,ri&&(Yt=>{Mi&&rs().forEach(ri=>{const Ri=ri.effect;if(Ri.setKeyframes)Ri.setKeyframes(Yt);else{const Uo=new KeyframeEffect(Ri.target,Yt,Ri.getTiming());ri.effect=Uo}})})(vt),Cn},addAnimation:Yt=>{if(null!=Yt)if(Array.isArray(Yt))for(const ri of Yt)ri.parent(Cn),zt.push(ri);else Yt.parent(Cn),zt.push(Yt);return Cn},addElement:Yt=>{if(null!=Yt)if(1===Yt.nodeType)tt.push(Yt);else if(Yt.length>=0)for(let ri=0;ri<Yt.length;ri++)tt.push(Yt[ri]);else console.error("Invalid addElement value");return Cn},update:it,fill:Yt=>(At=Yt,it(!0),Cn),direction:Yt=>(Ht=Yt,it(!0),Cn),iterations:Yt=>(C=Yt,it(!0),Cn),duration:Yt=>(!Mi&&0===Yt&&(Yt=1),Ut=Yt,it(!0),Cn),easing:Yt=>(It=Yt,it(!0),Cn),delay:Yt=>(Xt=Yt,it(!0),Cn),getWebAnimations:rs,getKeyframes:()=>vt,getFill:_r,getDirection:Dr,getDelay:Lr,getIterations:as,getEasing:Gs,getDuration:ni,afterAddRead:Yt=>(to.push(Yt),Cn),afterAddWrite:Yt=>(pr.push(Yt),Cn),afterClearStyles:(Yt=[])=>{for(const ri of Yt)xt[ri]="";return Cn},afterStyles:(Yt={})=>(xt=Yt,Cn),afterRemoveClass:Yt=>(qn=qe(qn,Yt),Cn),afterAddClass:Yt=>(An=qe(An,Yt),Cn),beforeAddRead:Yt=>(cn.push(Yt),Cn),beforeAddWrite:Yt=>(_o.push(Yt),Cn),beforeClearStyles:(Yt=[])=>{for(const ri of Yt)Jn[ri]="";return Cn},beforeStyles:(Yt={})=>(Jn=Yt,Cn),beforeRemoveClass:Yt=>(xn=qe(xn,Yt),Cn),beforeAddClass:Yt=>(un=qe(un,Yt),Cn),onFinish:si,isRunning:()=>0!==Ot&&!so,progressStart:(Yt=!1,ri)=>(zt.forEach(Ri=>{Ri.progressStart(Yt,ri)}),Gn(),vn=Yt,on||ae(),it(!1,!0,ri),Cn),progressStep:Yt=>(zt.forEach(ri=>{ri.progressStep(Yt)}),we(Yt),Cn),progressEnd:(Yt,ri,Ri)=>(vn=!1,zt.forEach(Uo=>{Uo.progressEnd(Yt,ri,Ri)}),void 0!==Ri&&(Ct=Ri),Rt=!1,pn=!0,0===Yt?(ki="reverse"===Dr()?"normal":"reverse","reverse"===ki&&(pn=!1),Mi?(it(),we(1-ri)):(Me=(1-ri)*ni()*-1,it(!1,!1))):1===Yt&&(Mi?(it(),we(ri)):(Me=ri*ni()*-1,it(!1,!1))),void 0!==Yt&&!ht&&oi(),Cn)}}},6081:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{g:()=>se});var V=_e(4878);const se=()=>{if(void 0!==V.w)return V.w.Capacitor}},2782:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{i:()=>V});const V=se=>se&&""!==se.dir?"rtl"===se.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase())},5498:(Go,Kn,_e)=>{"use strict";_e.r(Kn),_e.d(Kn,{startFocusVisible:()=>l});const V="ion-focused",ne=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],l=qe=>{let Y=[],ft=!0;const Xt=qe?qe.shadowRoot:document,Ut=qe||document.body,It=xn=>{Y.forEach(on=>on.classList.remove(V)),xn.forEach(on=>on.classList.add(V)),Y=xn},C=()=>{ft=!1,It([])},At=xn=>{ft=ne.includes(xn.key),ft||It([])},Ht=xn=>{if(ft&&void 0!==xn.composedPath){const on=xn.composedPath().filter(ht=>!!ht.classList&&ht.classList.contains("ion-focusable"));It(on)}},vt=()=>{Xt.activeElement===Ut&&It([])};return Xt.addEventListener("keydown",At),Xt.addEventListener("focusin",Ht),Xt.addEventListener("focusout",vt),Xt.addEventListener("touchstart",C,{passive:!0}),Xt.addEventListener("mousedown",C),{destroy:()=>{Xt.removeEventListener("keydown",At),Xt.removeEventListener("focusin",Ht),Xt.removeEventListener("focusout",vt),Xt.removeEventListener("touchstart",C),Xt.removeEventListener("mousedown",C)},setFocus:It}}},8875:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{B:()=>l,G:()=>qe});class se{constructor(ft,Xt,Ut,It,C){this.id=Xt,this.name=Ut,this.disableScroll=C,this.priority=1e6*It+Xt,this.ctrl=ft}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ft=this.ctrl.capture(this.name,this.id,this.priority);return ft&&this.disableScroll&&this.ctrl.disableScroll(this.id),ft}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ne{constructor(ft,Xt,Ut,It){this.id=Xt,this.disable=Ut,this.disableScroll=It,this.ctrl=ft}block(){if(this.ctrl){if(this.disable)for(const ft of this.disable)this.ctrl.disableGesture(ft,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ft of this.disable)this.ctrl.enableGesture(ft,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const l="backdrop-no-scroll",qe=new class V{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ft){var Xt;return new se(this,this.newID(),ft.name,null!==(Xt=ft.priority)&&void 0!==Xt?Xt:0,!!ft.disableScroll)}createBlocker(ft={}){return new ne(this,this.newID(),ft.disable,!!ft.disableScroll)}start(ft,Xt,Ut){return this.canStart(ft)?(this.requestedStart.set(Xt,Ut),!0):(this.requestedStart.delete(Xt),!1)}capture(ft,Xt,Ut){if(!this.start(ft,Xt,Ut))return!1;const It=this.requestedStart;let C=-1e4;if(It.forEach(At=>{C=Math.max(C,At)}),C===Ut){this.capturedId=Xt,It.clear();const At=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ft}});return document.dispatchEvent(At),!0}return It.delete(Xt),!1}release(ft){this.requestedStart.delete(ft),this.capturedId===ft&&(this.capturedId=void 0)}disableGesture(ft,Xt){let Ut=this.disabledGestures.get(ft);void 0===Ut&&(Ut=new Set,this.disabledGestures.set(ft,Ut)),Ut.add(Xt)}enableGesture(ft,Xt){const Ut=this.disabledGestures.get(ft);void 0!==Ut&&Ut.delete(Xt)}disableScroll(ft){this.disabledScroll.add(ft),1===this.disabledScroll.size&&document.body.classList.add(l)}enableScroll(ft){this.disabledScroll.delete(ft),0===this.disabledScroll.size&&document.body.classList.remove(l)}canStart(ft){return!(void 0!==this.capturedId||this.isDisabled(ft))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ft){const Xt=this.disabledGestures.get(ft);return!!(Xt&&Xt.size>0)}newID(){return this.gestureId++,this.gestureId}}},5098:(Go,Kn,_e)=>{"use strict";_e.r(Kn),_e.d(Kn,{MENU_BACK_BUTTON_PRIORITY:()=>Xt,OVERLAY_BACK_BUTTON_PRIORITY:()=>ft,blockHardwareBackButton:()=>qe,shouldUseCloseWatcher:()=>l,startHardwareBackButton:()=>Y});var V=_e(467),se=_e(4878),ne=_e(5531);const l=()=>ne.c.get("experimentalCloseWatcher",!1)&&void 0!==se.w&&"CloseWatcher"in se.w,qe=()=>{document.addEventListener("backbutton",()=>{})},Y=()=>{const Ut=document;let It=!1;const C=()=>{if(It)return;let At=0,Ht=[];const vt=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(on,ht){Ht.push({priority:on,handler:ht,id:At++})}}});Ut.dispatchEvent(vt);const un=function(){var on=(0,V.A)(function*(ht){try{if(null!=ht&&ht.handler){const Jn=ht.handler(xn);null!=Jn&&(yield Jn)}}catch(Jn){console.error(Jn)}});return function(Jn){return on.apply(this,arguments)}}(),xn=()=>{if(Ht.length>0){let on={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ht.forEach(ht=>{ht.priority>=on.priority&&(on=ht)}),It=!0,Ht=Ht.filter(ht=>ht.id!==on.id),un(on).then(()=>It=!1)}};xn()};if(l()){let At;const Ht=()=>{null==At||At.destroy(),At=new se.w.CloseWatcher,At.onclose=()=>{C(),Ht()}};Ht()}else Ut.addEventListener("backbutton",C)},ft=100,Xt=99},1656:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{a:()=>Xt,b:()=>Ut,c:()=>ne,d:()=>qe,e:()=>vt,f:()=>Ht,g:()=>It,h:()=>At,i:()=>ft,j:()=>l,k:()=>un,l:()=>Jn,p:()=>on,r:()=>C,s:()=>qn});const ne=(xt,Ot)=>{xt.componentOnReady?xt.componentOnReady().then(vn=>Ot(vn)):C(()=>Ot(xt))},l=xt=>void 0!==xt.componentOnReady,qe=(xt,Ot=[])=>{const vn={};return Ot.forEach(Pn=>{xt.hasAttribute(Pn)&&(null!==xt.getAttribute(Pn)&&(vn[Pn]=xt.getAttribute(Pn)),xt.removeAttribute(Pn))}),vn},Y=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ft=(xt,Ot)=>{let vn=Y;return Ot&&Ot.length>0&&(vn=vn.filter(Pn=>!Ot.includes(Pn))),qe(xt,vn)},Xt=(xt,Ot,vn,Pn)=>{var ki;if(typeof window<"u"){const Ct=window,Me=null===(ki=null==Ct?void 0:Ct.Ionic)||void 0===ki?void 0:ki.config;if(Me){const pn=Me.get("_ael");if(pn)return pn(xt,Ot,vn,Pn);if(Me._ael)return Me._ael(xt,Ot,vn,Pn)}}return xt.addEventListener(Ot,vn,Pn)},Ut=(xt,Ot,vn,Pn)=>{var ki;if(typeof window<"u"){const Ct=window,Me=null===(ki=null==Ct?void 0:Ct.Ionic)||void 0===ki?void 0:ki.config;if(Me){const pn=Me.get("_rel");if(pn)return pn(xt,Ot,vn,Pn);if(Me._rel)return Me._rel(xt,Ot,vn,Pn)}}return xt.removeEventListener(Ot,vn,Pn)},It=(xt,Ot=xt)=>xt.shadowRoot||Ot,C=xt=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(xt):"function"==typeof requestAnimationFrame?requestAnimationFrame(xt):setTimeout(xt),At=xt=>!!xt.shadowRoot&&!!xt.attachShadow,Ht=xt=>{if(xt.focus(),xt.classList.contains("ion-focusable")){const Ot=xt.closest("ion-app");Ot&&Ot.setFocus([xt])}},vt=(xt,Ot,vn,Pn,ki)=>{if(xt||At(Ot)){let Ct=Ot.querySelector("input.aux-input");Ct||(Ct=Ot.ownerDocument.createElement("input"),Ct.type="hidden",Ct.classList.add("aux-input"),Ot.appendChild(Ct)),Ct.disabled=ki,Ct.name=vn,Ct.value=Pn||""}},un=(xt,Ot,vn)=>Math.max(xt,Math.min(Ot,vn)),on=xt=>{if(xt){const Ot=xt.changedTouches;if(Ot&&Ot.length>0){const vn=Ot[0];return{x:vn.clientX,y:vn.clientY}}if(void 0!==xt.pageX)return{x:xt.pageX,y:xt.pageY}}return{x:0,y:0}},Jn=(xt,Ot)=>{const vn=xt._original||xt;return{_original:xt,emit:An(vn.emit.bind(vn),Ot)}},An=(xt,Ot=0)=>{let vn;return(...Pn)=>{clearTimeout(vn),vn=setTimeout(xt,Ot,...Pn)}},qn=(xt,Ot)=>{if(null!=xt||(xt={}),null!=Ot||(Ot={}),xt===Ot)return!0;const vn=Object.keys(xt);if(vn.length!==Object.keys(Ot).length)return!1;for(const Pn of vn)if(!(Pn in Ot)||xt[Pn]!==Ot[Pn])return!1;return!0}},6031:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{L:()=>Y,a:()=>ft,b:()=>Xt,c:()=>Ut,d:()=>It,e:()=>Cn,g:()=>Ke,t:()=>ht,w:()=>On});var V=_e(467),se=_e(5531),ne=_e(1771),l=_e(1979),qe=_e(1656);const Y="ionViewWillEnter",ft="ionViewDidEnter",Xt="ionViewWillLeave",Ut="ionViewDidLeave",It="ionViewWillUnload",C=Ae=>{Ae.tabIndex=-1,Ae.focus()},At=Ae=>null!==Ae.offsetParent,vt="ion-last-focus",on_saveViewFocus=tt=>{if(se.c.get("focusManagerPriority",!1)){const Yn=document.activeElement;null!==Yn&&null!=tt&&tt.contains(Yn)&&Yn.setAttribute(vt,"true")}},on_setViewFocus=tt=>{const zt=se.c.get("focusManagerPriority",!1);if(Array.isArray(zt)&&!tt.contains(document.activeElement)){const Yn=tt.querySelector(`[${vt}]`);if(Yn&&At(Yn))return void C(Yn);for(const cn of zt)switch(cn){case"content":const _o=tt.querySelector('main, [role="main"]');if(_o&&At(_o))return void C(_o);break;case"heading":const to=tt.querySelector('h1, [role="heading"][aria-level="1"]');if(to&&At(to))return void C(to);break;case"banner":const pr=tt.querySelector('header, [role="banner"]');if(pr&&At(pr))return void C(pr);break;default:(0,l.p)(`Unrecognized focus manager priority value ${cn}`)}C(tt)}},ht=Ae=>new Promise((Ge,tt)=>{(0,ne.bN)(()=>{Jn(Ae),An(Ae).then(zt=>{zt.animation&&zt.animation.destroy(),qn(Ae),Ge(zt)},zt=>{qn(Ae),tt(zt)})})}),Jn=Ae=>{const Ge=Ae.enteringEl,tt=Ae.leavingEl;on_saveViewFocus(tt),Fn(Ge,tt,Ae.direction),Ae.showGoBack?Ge.classList.add("can-go-back"):Ge.classList.remove("can-go-back"),so(Ge,!1),Ge.style.setProperty("pointer-events","none"),tt&&(so(tt,!1),tt.style.setProperty("pointer-events","none"))},An=function(){var Ae=(0,V.A)(function*(Ge){const tt=yield xt(Ge);return tt&&ne.L2.isBrowser?Ot(tt,Ge):vn(Ge)});return function(tt){return Ae.apply(this,arguments)}}(),qn=Ae=>{const Ge=Ae.enteringEl,tt=Ae.leavingEl;Ge.classList.remove("ion-page-invisible"),Ge.style.removeProperty("pointer-events"),void 0!==tt&&(tt.classList.remove("ion-page-invisible"),tt.style.removeProperty("pointer-events")),on_setViewFocus(Ge)},xt=function(){var Ae=(0,V.A)(function*(Ge){return Ge.leavingEl&&Ge.animated&&0!==Ge.duration?Ge.animationBuilder?Ge.animationBuilder:"ios"===Ge.mode?(yield _e.e(4699).then(_e.bind(_e,4699))).iosTransitionAnimation:(yield _e.e(7179).then(_e.bind(_e,7179))).mdTransitionAnimation:void 0});return function(tt){return Ae.apply(this,arguments)}}(),Ot=function(){var Ae=(0,V.A)(function*(Ge,tt){yield Pn(tt,!0);const zt=Ge(tt.baseEl,tt);Me(tt.enteringEl,tt.leavingEl);const Yn=yield Ct(zt,tt);return tt.progressCallback&&tt.progressCallback(void 0),Yn&&pn(tt.enteringEl,tt.leavingEl),{hasCompleted:Yn,animation:zt}});return function(tt,zt){return Ae.apply(this,arguments)}}(),vn=function(){var Ae=(0,V.A)(function*(Ge){const tt=Ge.enteringEl,zt=Ge.leavingEl,Yn=se.c.get("focusManagerPriority",!1);return yield Pn(Ge,Yn),Me(tt,zt),pn(tt,zt),{hasCompleted:!0}});return function(tt){return Ae.apply(this,arguments)}}(),Pn=function(){var Ae=(0,V.A)(function*(Ge,tt){(void 0!==Ge.deepWait?Ge.deepWait:tt)&&(yield Promise.all([Cn(Ge.enteringEl),Cn(Ge.leavingEl)])),yield ki(Ge.viewIsReady,Ge.enteringEl)});return function(tt,zt){return Ae.apply(this,arguments)}}(),ki=function(){var Ae=(0,V.A)(function*(Ge,tt){Ge&&(yield Ge(tt))});return function(tt,zt){return Ae.apply(this,arguments)}}(),Ct=(Ae,Ge)=>{const tt=Ge.progressCallback,zt=new Promise(Yn=>{Ae.onFinish(cn=>Yn(1===cn))});return tt?(Ae.progressStart(!0),tt(Ae)):Ae.play(),zt},Me=(Ae,Ge)=>{Rt(Ge,Xt),Rt(Ae,Y)},pn=(Ae,Ge)=>{Rt(Ae,ft),Rt(Ge,Ut)},Rt=(Ae,Ge)=>{if(Ae){const tt=new CustomEvent(Ge,{bubbles:!1,cancelable:!1});Ae.dispatchEvent(tt)}},On=()=>new Promise(Ae=>(0,qe.r)(()=>(0,qe.r)(()=>Ae()))),Cn=function(){var Ae=(0,V.A)(function*(Ge){const tt=Ge;if(tt){if(null!=tt.componentOnReady){if(null!=(yield tt.componentOnReady()))return}else if(null!=tt.__registerHost)return void(yield new Promise(Yn=>(0,qe.r)(Yn)));yield Promise.all(Array.from(tt.children).map(Cn))}});return function(tt){return Ae.apply(this,arguments)}}(),so=(Ae,Ge)=>{Ge?(Ae.setAttribute("aria-hidden","true"),Ae.classList.add("ion-page-hidden")):(Ae.hidden=!1,Ae.removeAttribute("aria-hidden"),Ae.classList.remove("ion-page-hidden"))},Fn=(Ae,Ge,tt)=>{void 0!==Ae&&(Ae.style.zIndex="back"===tt?"99":"101"),void 0!==Ge&&(Ge.style.zIndex="100")},Ke=Ae=>Ae.classList.contains("ion-page")?Ae:Ae.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ae},2104:(Go,Kn,_e)=>{"use strict";_e.r(Kn),_e.d(Kn,{GESTURE_CONTROLLER:()=>V.G,createGesture:()=>Ut});var V=_e(8875);const se=(Ht,vt,un,xn)=>{const on=ne(Ht)?{capture:!!xn.capture,passive:!!xn.passive}:!!xn.capture;let ht,Jn;return Ht.__zone_symbol__addEventListener?(ht="__zone_symbol__addEventListener",Jn="__zone_symbol__removeEventListener"):(ht="addEventListener",Jn="removeEventListener"),Ht[ht](vt,un,on),()=>{Ht[Jn](vt,un,on)}},ne=Ht=>{if(void 0===l)try{const vt=Object.defineProperty({},"passive",{get:()=>{l=!0}});Ht.addEventListener("optsTest",()=>{},vt)}catch{l=!1}return!!l};let l;const ft=Ht=>Ht instanceof Document?Ht:Ht.ownerDocument,Ut=Ht=>{let vt=!1,un=!1,xn=!0,on=!1;const ht=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ht),Jn=ht.canStart,An=ht.onWillStart,qn=ht.onStart,xt=ht.onEnd,Ot=ht.notCaptured,vn=ht.onMove,Pn=ht.threshold,ki=ht.passive,Ct=ht.blurOnStart,Me={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},pn=((Ht,vt,un)=>{const xn=un*(Math.PI/180),on="x"===Ht,ht=Math.cos(xn),Jn=vt*vt;let An=0,qn=0,xt=!1,Ot=0;return{start(vn,Pn){An=vn,qn=Pn,Ot=0,xt=!0},detect(vn,Pn){if(!xt)return!1;const ki=vn-An,Ct=Pn-qn,Me=ki*ki+Ct*Ct;if(Me<Jn)return!1;const pn=Math.sqrt(Me),Rt=(on?ki:Ct)/pn;return Ot=Rt>ht?1:Rt<-ht?-1:0,xt=!1,!0},isGesture:()=>0!==Ot,getDirection:()=>Ot}})(ht.direction,ht.threshold,ht.maxAngle),Rt=V.G.createGesture({name:Ht.gestureName,priority:Ht.gesturePriority,disableScroll:Ht.disableScroll}),so=()=>{vt&&(on=!1,vn&&vn(Me))},Fn=()=>!!Rt.capture()&&(vt=!0,xn=!1,Me.startX=Me.currentX,Me.startY=Me.currentY,Me.startTime=Me.currentTime,An?An(Me).then(Ae):Ae(),!0),Ae=()=>{Ct&&(()=>{if(typeof document<"u"){const cn=document.activeElement;null!=cn&&cn.blur&&cn.blur()}})(),qn&&qn(Me),xn=!0},Ge=()=>{vt=!1,un=!1,on=!1,xn=!0,Rt.release()},tt=cn=>{const _o=vt,to=xn;if(Ge(),to){if(It(Me,cn),_o)return void(xt&&xt(Me));Ot&&Ot(Me)}},zt=((Ht,vt,un,xn,on)=>{let ht,Jn,An,qn,xt,Ot,vn,Pn=0;const ki=Ke=>{Pn=Date.now()+2e3,vt(Ke)&&(!Jn&&un&&(Jn=se(Ht,"touchmove",un,on)),An||(An=se(Ke.target,"touchend",Me,on)),qn||(qn=se(Ke.target,"touchcancel",Me,on)))},Ct=Ke=>{Pn>Date.now()||vt(Ke)&&(!Ot&&un&&(Ot=se(ft(Ht),"mousemove",un,on)),vn||(vn=se(ft(Ht),"mouseup",pn,on)))},Me=Ke=>{Rt(),xn&&xn(Ke)},pn=Ke=>{On(),xn&&xn(Ke)},Rt=()=>{Jn&&Jn(),An&&An(),qn&&qn(),Jn=An=qn=void 0},On=()=>{Ot&&Ot(),vn&&vn(),Ot=vn=void 0},Cn=()=>{Rt(),On()},so=(Ke=!0)=>{Ke?(ht||(ht=se(Ht,"touchstart",ki,on)),xt||(xt=se(Ht,"mousedown",Ct,on))):(ht&&ht(),xt&&xt(),ht=xt=void 0,Cn())};return{enable:so,stop:Cn,destroy:()=>{so(!1),xn=un=vt=void 0}}})(ht.el,cn=>{const _o=At(cn);return!(un||!xn||(C(cn,Me),Me.startX=Me.currentX,Me.startY=Me.currentY,Me.startTime=Me.currentTime=_o,Me.velocityX=Me.velocityY=Me.deltaX=Me.deltaY=0,Me.event=cn,Jn&&!1===Jn(Me))||(Rt.release(),!Rt.start()))&&(un=!0,0===Pn?Fn():(pn.start(Me.startX,Me.startY),!0))},cn=>{vt?!on&&xn&&(on=!0,It(Me,cn),requestAnimationFrame(so)):(It(Me,cn),pn.detect(Me.currentX,Me.currentY)&&(!pn.isGesture()||!Fn())&&Yn())},tt,{capture:!1,passive:ki}),Yn=()=>{Ge(),zt.stop(),Ot&&Ot(Me)};return{enable(cn=!0){cn||(vt&&tt(void 0),Ge()),zt.enable(cn)},destroy(){Rt.destroy(),zt.destroy()}}},It=(Ht,vt)=>{if(!vt)return;const un=Ht.currentX,xn=Ht.currentY,on=Ht.currentTime;C(vt,Ht);const ht=Ht.currentX,Jn=Ht.currentY,qn=(Ht.currentTime=At(vt))-on;if(qn>0&&qn<100){const Ot=(Jn-xn)/qn;Ht.velocityX=(ht-un)/qn*.7+.3*Ht.velocityX,Ht.velocityY=.7*Ot+.3*Ht.velocityY}Ht.deltaX=ht-Ht.startX,Ht.deltaY=Jn-Ht.startY,Ht.event=vt},C=(Ht,vt)=>{let un=0,xn=0;if(Ht){const on=Ht.changedTouches;if(on&&on.length>0){const ht=on[0];un=ht.clientX,xn=ht.clientY}else void 0!==Ht.pageX&&(un=Ht.pageX,xn=Ht.pageY)}vt.currentX=un,vt.currentY=xn},At=Ht=>Ht.timeStamp||Date.now()},4878:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{d:()=>se,w:()=>V});const V=typeof window<"u"?window:void 0,se=typeof document<"u"?document:void 0},1979:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{a:()=>se,b:()=>ne,p:()=>V});const V=(l,...qe)=>console.warn(`[Ionic Warning]: ${l}`,...qe),se=(l,...qe)=>console.error(`[Ionic Error]: ${l}`,...qe),ne=(l,...qe)=>console.error(`<${l.tagName.toLowerCase()}> must be used inside ${qe.join(" or ")}.`)},7849:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{a:()=>C,c:()=>Ht,d:()=>un,f:()=>It,g:()=>Ut,i:()=>Xt,p:()=>vt,r:()=>xn,s:()=>At});var V=_e(467),se=_e(1656),ne=_e(1979);const qe="ion-content",Y=".ion-content-scroll-host",ft=`${qe}, ${Y}`,Xt=on=>"ION-CONTENT"===on.tagName,Ut=function(){var on=(0,V.A)(function*(ht){return Xt(ht)?(yield new Promise(Jn=>(0,se.c)(ht,Jn)),ht.getScrollElement()):ht});return function(Jn){return on.apply(this,arguments)}}(),It=on=>on.querySelector(Y)||on.querySelector(ft),C=on=>on.closest(ft),At=(on,ht)=>Xt(on)?on.scrollToTop(ht):Promise.resolve(on.scrollTo({top:0,left:0,behavior:ht>0?"smooth":"auto"})),Ht=(on,ht,Jn,An)=>Xt(on)?on.scrollByPoint(ht,Jn,An):Promise.resolve(on.scrollBy({top:Jn,left:ht,behavior:An>0?"smooth":"auto"})),vt=on=>(0,ne.b)(on,qe),un=on=>{if(Xt(on)){const Jn=on.scrollY;return on.scrollY=!1,Jn}return on.style.setProperty("overflow","hidden"),!0},xn=(on,ht)=>{Xt(on)?on.scrollY=ht:on.style.removeProperty("overflow")}},5531:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{a:()=>C,b:()=>so,c:()=>ne,g:()=>It,i:()=>Fn});var V=_e(1771);class se{constructor(){this.m=new Map}reset(Ae){this.m=new Map(Object.entries(Ae))}get(Ae,Ge){const tt=this.m.get(Ae);return void 0!==tt?tt:Ge}getBoolean(Ae,Ge=!1){const tt=this.m.get(Ae);return void 0===tt?Ge:"string"==typeof tt?"true"===tt:!!tt}getNumber(Ae,Ge){const tt=parseFloat(this.m.get(Ae));return isNaN(tt)?void 0!==Ge?Ge:NaN:tt}set(Ae,Ge){this.m.set(Ae,Ge)}}const ne=new se,Ut="ionic-persist-config",It=Ke=>At(Ke),C=(Ke,Ae)=>("string"==typeof Ke&&(Ae=Ke,Ke=void 0),It(Ke).includes(Ae)),At=(Ke=window)=>{if(typeof Ke>"u")return[];Ke.Ionic=Ke.Ionic||{};let Ae=Ke.Ionic.platforms;return null==Ae&&(Ae=Ke.Ionic.platforms=Ht(Ke),Ae.forEach(Ge=>Ke.document.documentElement.classList.add(`plt-${Ge}`))),Ae},Ht=Ke=>{const Ae=ne.get("platform");return Object.keys(On).filter(Ge=>{const tt=null==Ae?void 0:Ae[Ge];return"function"==typeof tt?tt(Ke):On[Ge](Ke)})},un=Ke=>!!(pn(Ke,/iPad/i)||pn(Ke,/Macintosh/i)&&xt(Ke)),ht=Ke=>pn(Ke,/android|sink/i),xt=Ke=>Rt(Ke,"(any-pointer:coarse)"),vn=Ke=>Pn(Ke)||ki(Ke),Pn=Ke=>!!(Ke.cordova||Ke.phonegap||Ke.PhoneGap),ki=Ke=>{const Ae=Ke.Capacitor;return!(null==Ae||!Ae.isNative)},pn=(Ke,Ae)=>Ae.test(Ke.navigator.userAgent),Rt=(Ke,Ae)=>{var Ge;return null===(Ge=Ke.matchMedia)||void 0===Ge?void 0:Ge.call(Ke,Ae).matches},On={ipad:un,iphone:Ke=>pn(Ke,/iPhone/i),ios:Ke=>pn(Ke,/iPhone|iPod/i)||un(Ke),android:ht,phablet:Ke=>{const Ae=Ke.innerWidth,Ge=Ke.innerHeight,tt=Math.min(Ae,Ge),zt=Math.max(Ae,Ge);return tt>390&&tt<520&&zt>620&&zt<800},tablet:Ke=>{const Ae=Ke.innerWidth,Ge=Ke.innerHeight,tt=Math.min(Ae,Ge),zt=Math.max(Ae,Ge);return un(Ke)||(Ke=>ht(Ke)&&!pn(Ke,/mobile/i))(Ke)||tt>460&&tt<820&&zt>780&&zt<1400},cordova:Pn,capacitor:ki,electron:Ke=>pn(Ke,/electron/i),pwa:Ke=>{var Ae;return!!(null!==(Ae=Ke.matchMedia)&&void 0!==Ae&&Ae.call(Ke,"(display-mode: standalone)").matches||Ke.navigator.standalone)},mobile:xt,mobileweb:Ke=>xt(Ke)&&!vn(Ke),desktop:Ke=>!xt(Ke),hybrid:vn};let Cn;const so=Ke=>Ke&&(0,V.Wi)(Ke)||Cn,Fn=(Ke={})=>{if(typeof window>"u")return;const Ae=window.document,Ge=window,tt=Ge.Ionic=Ge.Ionic||{},zt={};Ke._ael&&(zt.ael=Ke._ael),Ke._rel&&(zt.rel=Ke._rel),Ke._ce&&(zt.ce=Ke._ce),(0,V.zb)(zt);const Yn=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ke=>{try{const Ae=Ke.sessionStorage.getItem(Ut);return null!==Ae?JSON.parse(Ae):{}}catch{return{}}})(Ge)),{persistConfig:!1}),tt.config),(Ke=>{const Ae={};return Ke.location.search.slice(1).split("&").map(Ge=>Ge.split("=")).map(([Ge,tt])=>{try{return[decodeURIComponent(Ge),decodeURIComponent(tt)]}catch{return["",""]}}).filter(([Ge])=>((Ke,Ae)=>Ke.substr(0,Ae.length)===Ae)(Ge,"ionic:")).map(([Ge,tt])=>[Ge.slice(6),tt]).forEach(([Ge,tt])=>{Ae[Ge]=tt}),Ae})(Ge)),Ke);ne.reset(Yn),ne.getBoolean("persistConfig")&&((Ke,Ae)=>{try{Ke.sessionStorage.setItem(Ut,JSON.stringify(Ae))}catch{return}})(Ge,Yn),At(Ge),tt.config=ne,tt.mode=Cn=ne.get("mode",Ae.documentElement.getAttribute("mode")||(C(Ge,"ios")?"ios":"md")),ne.set("mode",Cn),Ae.documentElement.setAttribute("mode",Cn),Ae.documentElement.classList.add(Cn),ne.getBoolean("_testing")&&ne.set("animated",!1);const cn=to=>{var pr;return null===(pr=to.tagName)||void 0===pr?void 0:pr.startsWith("ION-")},_o=to=>["ios","md"].includes(to);(0,V.iY)(to=>{for(;to;){const pr=to.mode||to.getAttribute("mode");if(pr){if(_o(pr))return pr;cn(to)&&console.warn('Invalid ionic mode: "'+pr+'", expected: "ios" or "md"')}to=to.parentElement}return Cn})}},5680:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{K:()=>l,a:()=>ne});var V=_e(6081),se=function(qe){return qe.Unimplemented="UNIMPLEMENTED",qe.Unavailable="UNAVAILABLE",qe}(se||{}),ne=function(qe){return qe.Body="body",qe.Ionic="ionic",qe.Native="native",qe.None="none",qe}(ne||{});const l={getEngine(){const qe=(0,V.g)();if(null!=qe&&qe.isPluginAvailable("Keyboard"))return qe.Plugins.Keyboard},getResizeMode(){const qe=this.getEngine();return null!=qe&&qe.getResizeMode?qe.getResizeMode().catch(Y=>{if(Y.code!==se.Unimplemented)throw Y}):Promise.resolve(void 0)}}},6008:(Go,Kn,_e)=>{"use strict";_e.r(Kn),_e.d(Kn,{KEYBOARD_DID_CLOSE:()=>ne,KEYBOARD_DID_OPEN:()=>se,copyVisualViewport:()=>Jn,keyboardDidClose:()=>un,keyboardDidOpen:()=>Ht,keyboardDidResize:()=>vt,resetKeyboardAssist:()=>Xt,setKeyboardClose:()=>At,setKeyboardOpen:()=>C,startKeyboardAssist:()=>Ut,trackViewportChanges:()=>ht});var V=_e(5680);const se="ionKeyboardDidShow",ne="ionKeyboardDidHide";let qe={},Y={},ft=!1;const Xt=()=>{qe={},Y={},ft=!1},Ut=An=>{if(V.K.getEngine())It(An);else{if(!An.visualViewport)return;Y=Jn(An.visualViewport),An.visualViewport.onresize=()=>{ht(An),Ht()||vt(An)?C(An):un(An)&&At(An)}}},It=An=>{An.addEventListener("keyboardDidShow",qn=>C(An,qn)),An.addEventListener("keyboardDidHide",()=>At(An))},C=(An,qn)=>{xn(An,qn),ft=!0},At=An=>{on(An),ft=!1},Ht=()=>!ft&&qe.width===Y.width&&(qe.height-Y.height)*Y.scale>150,vt=An=>ft&&!un(An),un=An=>ft&&Y.height===An.innerHeight,xn=(An,qn)=>{const Ot=new CustomEvent(se,{detail:{keyboardHeight:qn?qn.keyboardHeight:An.innerHeight-Y.height}});An.dispatchEvent(Ot)},on=An=>{const qn=new CustomEvent(ne);An.dispatchEvent(qn)},ht=An=>{qe=Object.assign({},Y),Y=Jn(An.visualViewport)},Jn=An=>({width:Math.round(An.width),height:Math.round(An.height),offsetTop:An.offsetTop,offsetLeft:An.offsetLeft,pageTop:An.pageTop,pageLeft:An.pageLeft,scale:An.scale})},9986:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{c:()=>Y});var V=_e(8476);let se;const l=(ft,Xt,Ut)=>{const It=Xt.startsWith("animation")?(ft=>(void 0===se&&(se=void 0===ft.style.animationName&&void 0!==ft.style.webkitAnimationName?"-webkit-":""),se))(ft):"";ft.style.setProperty(It+Xt,Ut)},qe=(ft=[],Xt)=>{if(void 0!==Xt){const Ut=Array.isArray(Xt)?Xt:[Xt];return[...ft,...Ut]}return ft},Y=ft=>{let Xt,Ut,It,C,At,Ht,ht,ki,Ct,Me,Cn,vt=[],un=[],xn=[],on=!1,Jn={},An=[],qn=[],xt={},Ot=0,vn=!1,Pn=!1,pn=!0,Rt=!1,On=!0,so=!1;const Fn=ft,Ke=[],Ae=[],Ge=[],tt=[],zt=[],Yn=[],cn=[],_o=[],to=[],pr=[],jo=[],zr="function"==typeof AnimationEffect||void 0!==V.w&&"function"==typeof V.w.AnimationEffect,Mi="function"==typeof Element&&"function"==typeof Element.prototype.animate&&zr,rs=()=>jo,yi=(Yt,ri)=>{const Ri=ri.findIndex(Uo=>Uo.c===Yt);Ri>-1&&ri.splice(Ri,1)},si=(Yt,ri)=>((null!=ri&&ri.oneTimeCallback?Ae:Ke).push({c:Yt,o:ri}),Cn),mo=()=>{Mi&&(jo.forEach(Yt=>{Yt.cancel()}),jo.length=0)},eo=()=>{Yn.forEach(Yt=>{null!=Yt&&Yt.parentNode&&Yt.parentNode.removeChild(Yt)}),Yn.length=0},_r=()=>void 0!==At?At:ht?ht.getFill():"both",Dr=()=>void 0!==ki?ki:void 0!==Ht?Ht:ht?ht.getDirection():"normal",Gs=()=>vn?"linear":void 0!==It?It:ht?ht.getEasing():"linear",ni=()=>Pn?0:void 0!==Ct?Ct:void 0!==Ut?Ut:ht?ht.getDuration():0,as=()=>void 0!==C?C:ht?ht.getIterations():1,Lr=()=>void 0!==Me?Me:void 0!==Xt?Xt:ht?ht.getDelay():0,Ie=()=>{0!==Ot&&(Ot--,0===Ot&&((()=>{to.forEach(mr=>mr()),pr.forEach(mr=>mr());const Yt=pn?1:0,ri=An,Ri=qn,Uo=xt;tt.forEach(mr=>{const ss=mr.classList;ri.forEach(Vr=>ss.add(Vr)),Ri.forEach(Vr=>ss.remove(Vr));for(const Vr in Uo)Uo.hasOwnProperty(Vr)&&l(mr,Vr,Uo[Vr])}),Ct=void 0,ki=void 0,Me=void 0,Ke.forEach(mr=>mr.c(Yt,Cn)),Ae.forEach(mr=>mr.c(Yt,Cn)),Ae.length=0,On=!0,pn&&(Rt=!0),pn=!0})(),ht&&ht.animationFinish()))},ae=()=>{(()=>{cn.forEach(Uo=>Uo()),_o.forEach(Uo=>Uo());const Yt=un,ri=xn,Ri=Jn;tt.forEach(Uo=>{const mr=Uo.classList;Yt.forEach(ss=>mr.add(ss)),ri.forEach(ss=>mr.remove(ss));for(const ss in Ri)Ri.hasOwnProperty(ss)&&l(Uo,ss,Ri[ss])})})(),vt.length>0&&Mi&&(tt.forEach(Yt=>{const ri=Yt.animate(vt,{id:Fn,delay:Lr(),duration:ni(),easing:Gs(),iterations:as(),fill:_r(),direction:Dr()});ri.pause(),jo.push(ri)}),jo.length>0&&(jo[0].onfinish=()=>{Ie()})),on=!0},we=Yt=>{Yt=Math.min(Math.max(Yt,0),.9999),Mi&&jo.forEach(ri=>{ri.currentTime=ri.effect.getComputedTiming().delay+ni()*Yt,ri.pause()})},Ue=Yt=>{jo.forEach(ri=>{ri.effect.updateTiming({delay:Lr(),duration:ni(),easing:Gs(),iterations:as(),fill:_r(),direction:Dr()})}),void 0!==Yt&&we(Yt)},it=(Yt=!1,ri=!0,Ri)=>(Yt&&zt.forEach(Uo=>{Uo.update(Yt,ri,Ri)}),Mi&&Ue(Ri),Cn),Gn=()=>{on&&(Mi?jo.forEach(Yt=>{Yt.pause()}):tt.forEach(Yt=>{l(Yt,"animation-play-state","paused")}),so=!0)},oi=Yt=>new Promise(ri=>{null!=Yt&&Yt.sync&&(Pn=!0,si(()=>Pn=!1,{oneTimeCallback:!0})),on||ae(),Rt&&(Mi&&(we(0),Ue()),Rt=!1),On&&(Ot=zt.length+1,On=!1);const Ri=()=>{yi(Uo,Ae),ri()},Uo=()=>{yi(Ri,Ge),ri()};si(Uo,{oneTimeCallback:!0}),((Yt,ri)=>{Ge.push({c:Yt,o:{oneTimeCallback:!0}})})(Ri),zt.forEach(mr=>{mr.play()}),Mi?(jo.forEach(Yt=>{Yt.play()}),(0===vt.length||0===tt.length)&&Ie()):Ie(),so=!1}),hi=(Yt,ri)=>{const Ri=vt[0];return void 0===Ri||void 0!==Ri.offset&&0!==Ri.offset?vt=[{offset:0,[Yt]:ri},...vt]:Ri[Yt]=ri,Cn};return Cn={parentAnimation:ht,elements:tt,childAnimations:zt,id:Fn,animationFinish:Ie,from:hi,to:(Yt,ri)=>{const Ri=vt[vt.length-1];return void 0===Ri||void 0!==Ri.offset&&1!==Ri.offset?vt=[...vt,{offset:1,[Yt]:ri}]:Ri[Yt]=ri,Cn},fromTo:(Yt,ri,Ri)=>hi(Yt,ri).to(Yt,Ri),parent:Yt=>(ht=Yt,Cn),play:oi,pause:()=>(zt.forEach(Yt=>{Yt.pause()}),Gn(),Cn),stop:()=>{zt.forEach(Yt=>{Yt.stop()}),on&&(mo(),on=!1),vn=!1,Pn=!1,On=!0,ki=void 0,Ct=void 0,Me=void 0,Ot=0,Rt=!1,pn=!0,so=!1,Ge.forEach(Yt=>Yt.c(0,Cn)),Ge.length=0},destroy:Yt=>(zt.forEach(ri=>{ri.destroy(Yt)}),(Yt=>{mo(),Yt&&eo()})(Yt),tt.length=0,zt.length=0,vt.length=0,Ke.length=0,Ae.length=0,on=!1,On=!0,Cn),keyframes:Yt=>{const ri=vt!==Yt;return vt=Yt,ri&&(Yt=>{Mi&&rs().forEach(ri=>{const Ri=ri.effect;if(Ri.setKeyframes)Ri.setKeyframes(Yt);else{const Uo=new KeyframeEffect(Ri.target,Yt,Ri.getTiming());ri.effect=Uo}})})(vt),Cn},addAnimation:Yt=>{if(null!=Yt)if(Array.isArray(Yt))for(const ri of Yt)ri.parent(Cn),zt.push(ri);else Yt.parent(Cn),zt.push(Yt);return Cn},addElement:Yt=>{if(null!=Yt)if(1===Yt.nodeType)tt.push(Yt);else if(Yt.length>=0)for(let ri=0;ri<Yt.length;ri++)tt.push(Yt[ri]);else console.error("Invalid addElement value");return Cn},update:it,fill:Yt=>(At=Yt,it(!0),Cn),direction:Yt=>(Ht=Yt,it(!0),Cn),iterations:Yt=>(C=Yt,it(!0),Cn),duration:Yt=>(!Mi&&0===Yt&&(Yt=1),Ut=Yt,it(!0),Cn),easing:Yt=>(It=Yt,it(!0),Cn),delay:Yt=>(Xt=Yt,it(!0),Cn),getWebAnimations:rs,getKeyframes:()=>vt,getFill:_r,getDirection:Dr,getDelay:Lr,getIterations:as,getEasing:Gs,getDuration:ni,afterAddRead:Yt=>(to.push(Yt),Cn),afterAddWrite:Yt=>(pr.push(Yt),Cn),afterClearStyles:(Yt=[])=>{for(const ri of Yt)xt[ri]="";return Cn},afterStyles:(Yt={})=>(xt=Yt,Cn),afterRemoveClass:Yt=>(qn=qe(qn,Yt),Cn),afterAddClass:Yt=>(An=qe(An,Yt),Cn),beforeAddRead:Yt=>(cn.push(Yt),Cn),beforeAddWrite:Yt=>(_o.push(Yt),Cn),beforeClearStyles:(Yt=[])=>{for(const ri of Yt)Jn[ri]="";return Cn},beforeStyles:(Yt={})=>(Jn=Yt,Cn),beforeRemoveClass:Yt=>(xn=qe(xn,Yt),Cn),beforeAddClass:Yt=>(un=qe(un,Yt),Cn),onFinish:si,isRunning:()=>0!==Ot&&!so,progressStart:(Yt=!1,ri)=>(zt.forEach(Ri=>{Ri.progressStart(Yt,ri)}),Gn(),vn=Yt,on||ae(),it(!1,!0,ri),Cn),progressStep:Yt=>(zt.forEach(ri=>{ri.progressStep(Yt)}),we(Yt),Cn),progressEnd:(Yt,ri,Ri)=>(vn=!1,zt.forEach(Uo=>{Uo.progressEnd(Yt,ri,Ri)}),void 0!==Ri&&(Ct=Ri),Rt=!1,pn=!0,0===Yt?(ki="reverse"===Dr()?"normal":"reverse","reverse"===ki&&(pn=!1),Mi?(it(),we(1-ri)):(Me=(1-ri)*ni()*-1,it(!1,!1))):1===Yt&&(Mi?(it(),we(ri)):(Me=ri*ni()*-1,it(!1,!1))),void 0!==Yt&&!ht&&oi(),Cn)}}},8621:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{C:()=>qe,a:()=>ne,d:()=>l});var V=_e(467),se=_e(4920);const ne=function(){var Y=(0,V.A)(function*(ft,Xt,Ut,It,C,At){var Ht;if(ft)return ft.attachViewToDom(Xt,Ut,C,It);if(!(At||"string"==typeof Ut||Ut instanceof HTMLElement))throw new Error("framework delegate is missing");const vt="string"==typeof Ut?null===(Ht=Xt.ownerDocument)||void 0===Ht?void 0:Ht.createElement(Ut):Ut;return It&&It.forEach(un=>vt.classList.add(un)),C&&Object.assign(vt,C),Xt.appendChild(vt),yield new Promise(un=>(0,se.c)(vt,un)),vt});return function(Xt,Ut,It,C,At,Ht){return Y.apply(this,arguments)}}(),l=(Y,ft)=>{if(ft){if(Y)return Y.removeViewFromDom(ft.parentElement,ft);ft.remove()}return Promise.resolve()},qe=()=>{let Y,ft;return{attachViewToDom:function(){var It=(0,V.A)(function*(C,At,Ht={},vt=[]){var un,xn;let on;if(Y=C,At){const Jn="string"==typeof At?null===(un=Y.ownerDocument)||void 0===un?void 0:un.createElement(At):At;vt.forEach(An=>Jn.classList.add(An)),Object.assign(Jn,Ht),Y.appendChild(Jn),on=Jn,yield new Promise(An=>(0,se.c)(Jn,An))}else if(Y.children.length>0&&("ION-MODAL"===Y.tagName||"ION-POPOVER"===Y.tagName)&&!(on=Y.children[0]).classList.contains("ion-delegate-host")){const An=null===(xn=Y.ownerDocument)||void 0===xn?void 0:xn.createElement("div");An.classList.add("ion-delegate-host"),vt.forEach(qn=>An.classList.add(qn)),An.append(...Y.children),Y.appendChild(An),on=An}const ht=document.querySelector("ion-app")||document.body;return ft=document.createComment("ionic teleport"),Y.parentNode.insertBefore(ft,Y),ht.appendChild(Y),null!=on?on:Y});return function(At,Ht){return It.apply(this,arguments)}}(),removeViewFromDom:()=>(Y&&ft&&(ft.parentNode.insertBefore(Y,ft),ft.remove()),Promise.resolve())}}},1970:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{B:()=>l,G:()=>qe});class se{constructor(ft,Xt,Ut,It,C){this.id=Xt,this.name=Ut,this.disableScroll=C,this.priority=1e6*It+Xt,this.ctrl=ft}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ft=this.ctrl.capture(this.name,this.id,this.priority);return ft&&this.disableScroll&&this.ctrl.disableScroll(this.id),ft}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ne{constructor(ft,Xt,Ut,It){this.id=Xt,this.disable=Ut,this.disableScroll=It,this.ctrl=ft}block(){if(this.ctrl){if(this.disable)for(const ft of this.disable)this.ctrl.disableGesture(ft,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ft of this.disable)this.ctrl.enableGesture(ft,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const l="backdrop-no-scroll",qe=new class V{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ft){var Xt;return new se(this,this.newID(),ft.name,null!==(Xt=ft.priority)&&void 0!==Xt?Xt:0,!!ft.disableScroll)}createBlocker(ft={}){return new ne(this,this.newID(),ft.disable,!!ft.disableScroll)}start(ft,Xt,Ut){return this.canStart(ft)?(this.requestedStart.set(Xt,Ut),!0):(this.requestedStart.delete(Xt),!1)}capture(ft,Xt,Ut){if(!this.start(ft,Xt,Ut))return!1;const It=this.requestedStart;let C=-1e4;if(It.forEach(At=>{C=Math.max(C,At)}),C===Ut){this.capturedId=Xt,It.clear();const At=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ft}});return document.dispatchEvent(At),!0}return It.delete(Xt),!1}release(ft){this.requestedStart.delete(ft),this.capturedId===ft&&(this.capturedId=void 0)}disableGesture(ft,Xt){let Ut=this.disabledGestures.get(ft);void 0===Ut&&(Ut=new Set,this.disabledGestures.set(ft,Ut)),Ut.add(Xt)}enableGesture(ft,Xt){const Ut=this.disabledGestures.get(ft);void 0!==Ut&&Ut.delete(Xt)}disableScroll(ft){this.disabledScroll.add(ft),1===this.disabledScroll.size&&document.body.classList.add(l)}enableScroll(ft){this.disabledScroll.delete(ft),0===this.disabledScroll.size&&document.body.classList.remove(l)}canStart(ft){return!(void 0!==this.capturedId||this.isDisabled(ft))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ft){const Xt=this.disabledGestures.get(ft);return!!(Xt&&Xt.size>0)}newID(){return this.gestureId++,this.gestureId}}},8669:(Go,Kn,_e)=>{"use strict";_e.r(Kn),_e.d(Kn,{MENU_BACK_BUTTON_PRIORITY:()=>Ut,OVERLAY_BACK_BUTTON_PRIORITY:()=>Xt,blockHardwareBackButton:()=>Y,shouldUseCloseWatcher:()=>qe,startHardwareBackButton:()=>ft});var V=_e(467),se=_e(8476),ne=_e(4921);_e(8393);const qe=()=>ne.c.get("experimentalCloseWatcher",!1)&&void 0!==se.w&&"CloseWatcher"in se.w,Y=()=>{document.addEventListener("backbutton",()=>{})},ft=()=>{const It=document;let C=!1;const At=()=>{if(C)return;let Ht=0,vt=[];const un=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ht,Jn){vt.push({priority:ht,handler:Jn,id:Ht++})}}});It.dispatchEvent(un);const xn=function(){var ht=(0,V.A)(function*(Jn){try{if(null!=Jn&&Jn.handler){const An=Jn.handler(on);null!=An&&(yield An)}}catch(An){console.error(An)}});return function(An){return ht.apply(this,arguments)}}(),on=()=>{if(vt.length>0){let ht={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};vt.forEach(Jn=>{Jn.priority>=ht.priority&&(ht=Jn)}),C=!0,vt=vt.filter(Jn=>Jn.id!==ht.id),xn(ht).then(()=>C=!1)}};on()};if(qe()){let Ht;const vt=()=>{null==Ht||Ht.destroy(),Ht=new se.w.CloseWatcher,Ht.onclose=()=>{At(),vt()}};vt()}else It.addEventListener("backbutton",At)},Xt=100,Ut=99},4920:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{a:()=>Xt,b:()=>Ut,c:()=>ne,d:()=>vt,e:()=>Jn,f:()=>Ht,g:()=>It,h:()=>qe,i:()=>ft,j:()=>un,k:()=>l,l:()=>At,m:()=>xn,n:()=>ht,o:()=>An,p:()=>on,r:()=>C,s:()=>qn,t:()=>V});const V=(xt,Ot=0)=>new Promise(vn=>{se(xt,Ot,vn)}),se=(xt,Ot=0,vn)=>{let Pn,ki;const Ct={passive:!0},pn=()=>{Pn&&Pn()},Rt=On=>{(void 0===On||xt===On.target)&&(pn(),vn(On))};return xt&&(xt.addEventListener("webkitTransitionEnd",Rt,Ct),xt.addEventListener("transitionend",Rt,Ct),ki=setTimeout(Rt,Ot+500),Pn=()=>{void 0!==ki&&(clearTimeout(ki),ki=void 0),xt.removeEventListener("webkitTransitionEnd",Rt,Ct),xt.removeEventListener("transitionend",Rt,Ct)}),pn},ne=(xt,Ot)=>{xt.componentOnReady?xt.componentOnReady().then(vn=>Ot(vn)):C(()=>Ot(xt))},l=xt=>void 0!==xt.componentOnReady,qe=(xt,Ot=[])=>{const vn={};return Ot.forEach(Pn=>{xt.hasAttribute(Pn)&&(null!==xt.getAttribute(Pn)&&(vn[Pn]=xt.getAttribute(Pn)),xt.removeAttribute(Pn))}),vn},Y=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ft=(xt,Ot)=>{let vn=Y;return Ot&&Ot.length>0&&(vn=vn.filter(Pn=>!Ot.includes(Pn))),qe(xt,vn)},Xt=(xt,Ot,vn,Pn)=>{var ki;if(typeof window<"u"){const Ct=window,Me=null===(ki=null==Ct?void 0:Ct.Ionic)||void 0===ki?void 0:ki.config;if(Me){const pn=Me.get("_ael");if(pn)return pn(xt,Ot,vn,Pn);if(Me._ael)return Me._ael(xt,Ot,vn,Pn)}}return xt.addEventListener(Ot,vn,Pn)},Ut=(xt,Ot,vn,Pn)=>{var ki;if(typeof window<"u"){const Ct=window,Me=null===(ki=null==Ct?void 0:Ct.Ionic)||void 0===ki?void 0:ki.config;if(Me){const pn=Me.get("_rel");if(pn)return pn(xt,Ot,vn,Pn);if(Me._rel)return Me._rel(xt,Ot,vn,Pn)}}return xt.removeEventListener(Ot,vn,Pn)},It=(xt,Ot=xt)=>xt.shadowRoot||Ot,C=xt=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(xt):"function"==typeof requestAnimationFrame?requestAnimationFrame(xt):setTimeout(xt),At=xt=>!!xt.shadowRoot&&!!xt.attachShadow,Ht=xt=>{if(xt.focus(),xt.classList.contains("ion-focusable")){const Ot=xt.closest("ion-app");Ot&&Ot.setFocus([xt])}},vt=(xt,Ot,vn,Pn,ki)=>{if(xt||At(Ot)){let Ct=Ot.querySelector("input.aux-input");Ct||(Ct=Ot.ownerDocument.createElement("input"),Ct.type="hidden",Ct.classList.add("aux-input"),Ot.appendChild(Ct)),Ct.disabled=ki,Ct.name=vn,Ct.value=Pn||""}},un=(xt,Ot,vn)=>Math.max(xt,Math.min(Ot,vn)),xn=(xt,Ot)=>{if(!xt){const vn="ASSERT: "+Ot;throw console.error(vn),new Error(vn)}},on=xt=>{if(xt){const Ot=xt.changedTouches;if(Ot&&Ot.length>0){const vn=Ot[0];return{x:vn.clientX,y:vn.clientY}}if(void 0!==xt.pageX)return{x:xt.pageX,y:xt.pageY}}return{x:0,y:0}},ht=xt=>{const Ot="rtl"===document.dir;switch(xt){case"start":return Ot;case"end":return!Ot;default:throw new Error(`"${xt}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Jn=(xt,Ot)=>{const vn=xt._original||xt;return{_original:xt,emit:An(vn.emit.bind(vn),Ot)}},An=(xt,Ot=0)=>{let vn;return(...Pn)=>{clearTimeout(vn),vn=setTimeout(xt,Ot,...Pn)}},qn=(xt,Ot)=>{if(null!=xt||(xt={}),null!=Ot||(Ot={}),xt===Ot)return!0;const vn=Object.keys(xt);if(vn.length!==Object.keys(Ot).length)return!1;for(const Pn of vn)if(!(Pn in Ot)||xt[Pn]!==Ot[Pn])return!1;return!0}},8607:(Go,Kn,_e)=>{"use strict";_e.r(Kn),_e.d(Kn,{GESTURE_CONTROLLER:()=>V.G,createGesture:()=>Ut});var V=_e(1970);const se=(Ht,vt,un,xn)=>{const on=ne(Ht)?{capture:!!xn.capture,passive:!!xn.passive}:!!xn.capture;let ht,Jn;return Ht.__zone_symbol__addEventListener?(ht="__zone_symbol__addEventListener",Jn="__zone_symbol__removeEventListener"):(ht="addEventListener",Jn="removeEventListener"),Ht[ht](vt,un,on),()=>{Ht[Jn](vt,un,on)}},ne=Ht=>{if(void 0===l)try{const vt=Object.defineProperty({},"passive",{get:()=>{l=!0}});Ht.addEventListener("optsTest",()=>{},vt)}catch{l=!1}return!!l};let l;const ft=Ht=>Ht instanceof Document?Ht:Ht.ownerDocument,Ut=Ht=>{let vt=!1,un=!1,xn=!0,on=!1;const ht=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ht),Jn=ht.canStart,An=ht.onWillStart,qn=ht.onStart,xt=ht.onEnd,Ot=ht.notCaptured,vn=ht.onMove,Pn=ht.threshold,ki=ht.passive,Ct=ht.blurOnStart,Me={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},pn=((Ht,vt,un)=>{const xn=un*(Math.PI/180),on="x"===Ht,ht=Math.cos(xn),Jn=vt*vt;let An=0,qn=0,xt=!1,Ot=0;return{start(vn,Pn){An=vn,qn=Pn,Ot=0,xt=!0},detect(vn,Pn){if(!xt)return!1;const ki=vn-An,Ct=Pn-qn,Me=ki*ki+Ct*Ct;if(Me<Jn)return!1;const pn=Math.sqrt(Me),Rt=(on?ki:Ct)/pn;return Ot=Rt>ht?1:Rt<-ht?-1:0,xt=!1,!0},isGesture:()=>0!==Ot,getDirection:()=>Ot}})(ht.direction,ht.threshold,ht.maxAngle),Rt=V.G.createGesture({name:Ht.gestureName,priority:Ht.gesturePriority,disableScroll:Ht.disableScroll}),so=()=>{vt&&(on=!1,vn&&vn(Me))},Fn=()=>!!Rt.capture()&&(vt=!0,xn=!1,Me.startX=Me.currentX,Me.startY=Me.currentY,Me.startTime=Me.currentTime,An?An(Me).then(Ae):Ae(),!0),Ae=()=>{Ct&&(()=>{if(typeof document<"u"){const cn=document.activeElement;null!=cn&&cn.blur&&cn.blur()}})(),qn&&qn(Me),xn=!0},Ge=()=>{vt=!1,un=!1,on=!1,xn=!0,Rt.release()},tt=cn=>{const _o=vt,to=xn;if(Ge(),to){if(It(Me,cn),_o)return void(xt&&xt(Me));Ot&&Ot(Me)}},zt=((Ht,vt,un,xn,on)=>{let ht,Jn,An,qn,xt,Ot,vn,Pn=0;const ki=Ke=>{Pn=Date.now()+2e3,vt(Ke)&&(!Jn&&un&&(Jn=se(Ht,"touchmove",un,on)),An||(An=se(Ke.target,"touchend",Me,on)),qn||(qn=se(Ke.target,"touchcancel",Me,on)))},Ct=Ke=>{Pn>Date.now()||vt(Ke)&&(!Ot&&un&&(Ot=se(ft(Ht),"mousemove",un,on)),vn||(vn=se(ft(Ht),"mouseup",pn,on)))},Me=Ke=>{Rt(),xn&&xn(Ke)},pn=Ke=>{On(),xn&&xn(Ke)},Rt=()=>{Jn&&Jn(),An&&An(),qn&&qn(),Jn=An=qn=void 0},On=()=>{Ot&&Ot(),vn&&vn(),Ot=vn=void 0},Cn=()=>{Rt(),On()},so=(Ke=!0)=>{Ke?(ht||(ht=se(Ht,"touchstart",ki,on)),xt||(xt=se(Ht,"mousedown",Ct,on))):(ht&&ht(),xt&&xt(),ht=xt=void 0,Cn())};return{enable:so,stop:Cn,destroy:()=>{so(!1),xn=un=vt=void 0}}})(ht.el,cn=>{const _o=At(cn);return!(un||!xn||(C(cn,Me),Me.startX=Me.currentX,Me.startY=Me.currentY,Me.startTime=Me.currentTime=_o,Me.velocityX=Me.velocityY=Me.deltaX=Me.deltaY=0,Me.event=cn,Jn&&!1===Jn(Me))||(Rt.release(),!Rt.start()))&&(un=!0,0===Pn?Fn():(pn.start(Me.startX,Me.startY),!0))},cn=>{vt?!on&&xn&&(on=!0,It(Me,cn),requestAnimationFrame(so)):(It(Me,cn),pn.detect(Me.currentX,Me.currentY)&&(!pn.isGesture()||!Fn())&&Yn())},tt,{capture:!1,passive:ki}),Yn=()=>{Ge(),zt.stop(),Ot&&Ot(Me)};return{enable(cn=!0){cn||(vt&&tt(void 0),Ge()),zt.enable(cn)},destroy(){Rt.destroy(),zt.destroy()}}},It=(Ht,vt)=>{if(!vt)return;const un=Ht.currentX,xn=Ht.currentY,on=Ht.currentTime;C(vt,Ht);const ht=Ht.currentX,Jn=Ht.currentY,qn=(Ht.currentTime=At(vt))-on;if(qn>0&&qn<100){const Ot=(Jn-xn)/qn;Ht.velocityX=(ht-un)/qn*.7+.3*Ht.velocityX,Ht.velocityY=.7*Ot+.3*Ht.velocityY}Ht.deltaX=ht-Ht.startX,Ht.deltaY=Jn-Ht.startY,Ht.event=vt},C=(Ht,vt)=>{let un=0,xn=0;if(Ht){const on=Ht.changedTouches;if(on&&on.length>0){const ht=on[0];un=ht.clientX,xn=ht.clientY}else void 0!==Ht.pageX&&(un=Ht.pageX,xn=Ht.pageY)}vt.currentX=un,vt.currentY=xn},At=Ht=>Ht.timeStamp||Date.now()},6073:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{m:()=>Ht});var V=_e(467),se=_e(8476),ne=_e(8669),l=_e(4929),qe=_e(4920),Y=_e(4921),ft=_e(9986);const Xt=vt=>(0,ft.c)().duration(vt?400:300),Ut=vt=>{let un,xn;const on=vt.width+8,ht=(0,ft.c)(),Jn=(0,ft.c)();vt.isEndSide?(un=on+"px",xn="0px"):(un=-on+"px",xn="0px"),ht.addElement(vt.menuInnerEl).fromTo("transform",`translateX(${un})`,`translateX(${xn})`);const qn="ios"===(0,Y.b)(vt),xt=qn?.2:.25;return Jn.addElement(vt.backdropEl).fromTo("opacity",.01,xt),Xt(qn).addAnimation([ht,Jn])},It=vt=>{let un,xn;const on=(0,Y.b)(vt),ht=vt.width;vt.isEndSide?(un=-ht+"px",xn=ht+"px"):(un=ht+"px",xn=-ht+"px");const Jn=(0,ft.c)().addElement(vt.menuInnerEl).fromTo("transform",`translateX(${xn})`,"translateX(0px)"),An=(0,ft.c)().addElement(vt.contentEl).fromTo("transform","translateX(0px)",`translateX(${un})`),qn=(0,ft.c)().addElement(vt.backdropEl).fromTo("opacity",.01,.32);return Xt("ios"===on).addAnimation([Jn,An,qn])},C=vt=>{const un=(0,Y.b)(vt),xn=vt.width*(vt.isEndSide?-1:1)+"px",on=(0,ft.c)().addElement(vt.contentEl).fromTo("transform","translateX(0px)",`translateX(${xn})`);return Xt("ios"===un).addAnimation(on)},Ht=(()=>{const vt=new Map,un=[],xn=function(){var Ge=(0,V.A)(function*(tt){const zt=yield Ot(tt,!0);return!!zt&&zt.open()});return function(zt){return Ge.apply(this,arguments)}}(),on=function(){var Ge=(0,V.A)(function*(tt){const zt=yield void 0!==tt?Ot(tt,!0):vn();return void 0!==zt&&zt.close()});return function(zt){return Ge.apply(this,arguments)}}(),ht=function(){var Ge=(0,V.A)(function*(tt){const zt=yield Ot(tt,!0);return!!zt&&zt.toggle()});return function(zt){return Ge.apply(this,arguments)}}(),Jn=function(){var Ge=(0,V.A)(function*(tt,zt){const Yn=yield Ot(zt);return Yn&&(Yn.disabled=!tt),Yn});return function(zt,Yn){return Ge.apply(this,arguments)}}(),An=function(){var Ge=(0,V.A)(function*(tt,zt){const Yn=yield Ot(zt);return Yn&&(Yn.swipeGesture=tt),Yn});return function(zt,Yn){return Ge.apply(this,arguments)}}(),qn=function(){var Ge=(0,V.A)(function*(tt){if(null!=tt){const zt=yield Ot(tt);return void 0!==zt&&zt.isOpen()}return void 0!==(yield vn())});return function(zt){return Ge.apply(this,arguments)}}(),xt=function(){var Ge=(0,V.A)(function*(tt){const zt=yield Ot(tt);return!!zt&&!zt.disabled});return function(zt){return Ge.apply(this,arguments)}}(),Ot=function(){var Ge=(0,V.A)(function*(tt,zt=!1){if(yield Ae(),"start"===tt||"end"===tt){const cn=un.filter(to=>to.side===tt&&!to.disabled);if(cn.length>=1)return cn.length>1&&zt&&(0,l.p)(`menuController queried for a menu on the "${tt}" side, but ${cn.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,cn.map(to=>to.el)),cn[0].el;const _o=un.filter(to=>to.side===tt);if(_o.length>=1)return _o.length>1&&zt&&(0,l.p)(`menuController queried for a menu on the "${tt}" side, but ${_o.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,_o.map(to=>to.el)),_o[0].el}else if(null!=tt)return Ke(cn=>cn.menuId===tt);return Ke(cn=>!cn.disabled)||(un.length>0?un[0].el:void 0)});return function(zt){return Ge.apply(this,arguments)}}(),vn=function(){var Ge=(0,V.A)(function*(){return yield Ae(),Cn()});return function(){return Ge.apply(this,arguments)}}(),Pn=function(){var Ge=(0,V.A)(function*(){return yield Ae(),so()});return function(){return Ge.apply(this,arguments)}}(),ki=function(){var Ge=(0,V.A)(function*(){return yield Ae(),Fn()});return function(){return Ge.apply(this,arguments)}}(),Ct=(Ge,tt)=>{vt.set(Ge,tt)},Rt=function(){var Ge=(0,V.A)(function*(tt,zt,Yn){if(Fn())return!1;if(zt){const cn=yield vn();cn&&tt.el!==cn&&(yield cn.setOpen(!1,!1))}return tt._setOpen(zt,Yn)});return function(zt,Yn,cn){return Ge.apply(this,arguments)}}(),Cn=()=>Ke(Ge=>Ge._isOpen),so=()=>un.map(Ge=>Ge.el),Fn=()=>un.some(Ge=>Ge.isAnimating),Ke=Ge=>{const tt=un.find(Ge);if(void 0!==tt)return tt.el},Ae=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ge=>new Promise(tt=>(0,qe.c)(Ge,tt))));return Ct("reveal",C),Ct("push",It),Ct("overlay",Ut),null==se.d||se.d.addEventListener("ionBackButton",Ge=>{const tt=Cn();tt&&Ge.detail.register(ne.MENU_BACK_BUTTON_PRIORITY,()=>tt.close())}),{registerAnimation:Ct,get:Ot,getMenus:Pn,getOpen:vn,isEnabled:xt,swipeGesture:An,isAnimating:ki,isOpen:qn,enable:Jn,toggle:ht,close:on,open:xn,_getOpenSync:Cn,_createAnimation:(Ge,tt)=>{const zt=vt.get(Ge);if(!zt)throw new Error("animation not registered");return zt(tt)},_register:Ge=>{un.indexOf(Ge)<0&&un.push(Ge)},_unregister:Ge=>{const tt=un.indexOf(Ge);tt>-1&&un.splice(tt,1)},_setOpen:Rt}})()},8393:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{B:()=>Y,d:()=>as,e:()=>to,f:()=>ti,g:()=>Dr,h:()=>Jo,i:()=>ni,j:()=>Tr,k:()=>jo,r:()=>Ut,w:()=>pr});var V=_e(467);var l=Object.defineProperty,Y={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ft=new WeakMap,Xt=et=>ft.get(et),Ut=(et,Dt)=>ft.set(Dt.$lazyInstance$=et,Dt),C=(et,Dt)=>Dt in et,At=(et,Dt)=>(0,console.error)(et,Dt),un=new Map,ki="http://www.w3.org/1999/xlink",Ct=typeof window<"u"?window:{},Me=Ct.document||{head:{}},Rt={$flags$:0,$resourcesUrl$:"",jmp:et=>et(),raf:et=>requestAnimationFrame(et),ael:(et,Dt,Nn,Zn)=>et.addEventListener(Dt,Nn,Zn),rel:(et,Dt,Nn,Zn)=>et.removeEventListener(Dt,Nn,Zn),ce:(et,Dt)=>new CustomEvent(et,Dt)},Ae=!1,Ge=[],tt=[],zt=(et,Dt)=>Nn=>{et.push(Nn),Ae||(Ae=!0,Dt&&4&Rt.$flags$?_o(cn):Rt.raf(cn))},Yn=et=>{for(let Dt=0;Dt<et.length;Dt++)try{et[Dt](performance.now())}catch(Nn){At(Nn)}et.length=0},cn=()=>{Yn(Ge),Yn(tt),(Ae=Ge.length>0)&&Rt.raf(cn)},_o=et=>Promise.resolve(void 0).then(et),to=zt(Ge,!1),pr=zt(tt,!0),jo=et=>{const Dt=new URL(et,Rt.$resourcesUrl$);return Dt.origin!==Ct.location.origin?Dt.href:Dt.pathname},zr={},br=et=>"object"==(et=typeof et)||"function"===et;((et,Dt)=>{for(var Nn in Dt)l(et,Nn,{get:Dt[Nn],enumerable:!0})})({},{err:()=>ao,map:()=>si,ok:()=>yi,unwrap:()=>Fi,unwrapErr:()=>mo});var yi=et=>({isOk:!0,isErr:!1,value:et}),ao=et=>({isOk:!1,isErr:!0,value:et});function si(et,Dt){if(et.isOk){const Nn=Dt(et.value);return Nn instanceof Promise?Nn.then(Zn=>yi(Zn)):yi(Nn)}if(et.isErr)return ao(et.value);throw"should never get here"}var Fi=et=>{if(et.isOk)return et.value;throw et.value},mo=et=>{if(et.isErr)return et.value;throw et.value},Jo=(et,Dt,...Nn)=>{let Zn=null,zn=null,vi=null,go=!1,yo=!1;const co=[],gi=cr=>{for(let Er=0;Er<cr.length;Er++)Zn=cr[Er],Array.isArray(Zn)?gi(Zn):null!=Zn&&"boolean"!=typeof Zn&&((go="function"!=typeof et&&!br(Zn))&&(Zn=String(Zn)),go&&yo?co[co.length-1].$text$+=Zn:co.push(go?or(null,Zn):Zn),yo=go)};if(gi(Nn),Dt){Dt.key&&(zn=Dt.key),Dt.name&&(vi=Dt.name);{const cr=Dt.className||Dt.class;cr&&(Dt.class="object"!=typeof cr?cr:Object.keys(cr).filter(Er=>cr[Er]).join(" "))}}if("function"==typeof et)return et(null===Dt?{}:Dt,co,Cs);const qo=or(et,null);return qo.$attrs$=Dt,co.length>0&&(qo.$children$=co),qo.$key$=zn,qo.$name$=vi,qo},or=(et,Dt)=>({$flags$:0,$tag$:et,$text$:Dt,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ti={},Cs={forEach:(et,Dt)=>et.map(Or).forEach(Dt),map:(et,Dt)=>et.map(Or).map(Dt).map(Kr)},Or=et=>({vattrs:et.$attrs$,vchildren:et.$children$,vkey:et.$key$,vname:et.$name$,vtag:et.$tag$,vtext:et.$text$}),Kr=et=>{if("function"==typeof et.vtag){const Nn={...et.vattrs};return et.vkey&&(Nn.key=et.vkey),et.vname&&(Nn.name=et.vname),Jo(et.vtag,Nn,...et.vchildren||[])}const Dt=or(et.vtag,et.vtext);return Dt.$attrs$=et.vattrs,Dt.$children$=et.vchildren,Dt.$key$=et.vkey,Dt.$name$=et.vname,Dt},Dr=et=>Xt(et).$modeName$,ni=et=>Xt(et).$hostElement$,as=(et,Dt,Nn)=>{const Zn=ni(et);return{emit:zn=>Lr(Zn,Dt,{bubbles:!!(4&Nn),composed:!!(2&Nn),cancelable:!!(1&Nn),detail:zn})}},Lr=(et,Dt,Nn)=>{const Zn=Rt.ce(Dt,Nn);return et.dispatchEvent(Zn),Zn},Xs=new WeakMap,ei=(et,Dt)=>"sc-"+(Dt&&32&et.$flags$?et.$tagName$+"-"+Dt:et.$tagName$),Xn=(et,Dt,Nn,Zn,zn,vi)=>{if(Nn!==Zn){let go=C(et,Dt),yo=Dt.toLowerCase();if("class"===Dt){const co=et.classList,gi=mt(Nn),qo=mt(Zn);co.remove(...gi.filter(cr=>cr&&!qo.includes(cr))),co.add(...qo.filter(cr=>cr&&!gi.includes(cr)))}else if("style"===Dt){for(const co in Nn)(!Zn||null==Zn[co])&&(co.includes("-")?et.style.removeProperty(co):et.style[co]="");for(const co in Zn)(!Nn||Zn[co]!==Nn[co])&&(co.includes("-")?et.style.setProperty(co,Zn[co]):et.style[co]=Zn[co])}else if("key"!==Dt)if("ref"===Dt)Zn&&Zn(et);else if(go||"o"!==Dt[0]||"n"!==Dt[1]){const co=br(Zn);if((go||co&&null!==Zn)&&!zn)try{if(et.tagName.includes("-"))et[Dt]=Zn;else{const qo=null==Zn?"":Zn;"list"===Dt?go=!1:(null==Nn||et[Dt]!=qo)&&(et[Dt]=qo)}}catch{}let gi=!1;yo!==(yo=yo.replace(/^xlink\:?/,""))&&(Dt=yo,gi=!0),null==Zn||!1===Zn?(!1!==Zn||""===et.getAttribute(Dt))&&(gi?et.removeAttributeNS(ki,Dt):et.removeAttribute(Dt)):(!go||4&vi||zn)&&!co&&(Zn=!0===Zn?"":Zn,gi?et.setAttributeNS(ki,Dt,Zn):et.setAttribute(Dt,Zn))}else if(Dt="-"===Dt[2]?Dt.slice(3):C(Ct,yo)?yo.slice(2):yo[2]+Dt.slice(3),Nn||Zn){const co=Dt.endsWith(Ye);Dt=Dt.replace(Mt,""),Nn&&Rt.rel(et,Dt,Nn,co),Zn&&Rt.ael(et,Dt,Zn,co)}}},kt=/\s/,mt=et=>et?et.split(kt):[],Ye="Capture",Mt=new RegExp(Ye+"$"),Jt=(et,Dt,Nn)=>{const Zn=11===Dt.$elm$.nodeType&&Dt.$elm$.host?Dt.$elm$.host:Dt.$elm$,zn=et&&et.$attrs$||zr,vi=Dt.$attrs$||zr;for(const go of Bn(Object.keys(zn)))go in vi||Xn(Zn,go,zn[go],void 0,Nn,Dt.$flags$);for(const go of Bn(Object.keys(vi)))Xn(Zn,go,zn[go],vi[go],Nn,Dt.$flags$)};function Bn(et){return et.includes("ref")?[...et.filter(Dt=>"ref"!==Dt),"ref"]:et}var Lt,Ie,ue,ae=!1,we=!1,Ue=!1,it=!1,qt=(et,Dt,Nn,Zn)=>{var zn;const vi=Dt.$children$[Nn];let yo,co,gi,go=0;if(ae||(Ue=!0,"slot"===vi.$tag$&&(Lt&&Zn.classList.add(Lt+"-s"),vi.$flags$|=vi.$children$?2:1)),null!==vi.$text$)yo=vi.$elm$=Me.createTextNode(vi.$text$);else if(1&vi.$flags$)yo=vi.$elm$=Me.createTextNode("");else{if(it||(it="svg"===vi.$tag$),yo=vi.$elm$=Me.createElementNS(it?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!ae&&2&vi.$flags$?"slot-fb":vi.$tag$),it&&"foreignObject"===vi.$tag$&&(it=!1),Jt(null,vi,it),(et=>null!=et)(Lt)&&yo["s-si"]!==Lt&&yo.classList.add(yo["s-si"]=Lt),mr(yo,Zn),vi.$children$)for(go=0;go<vi.$children$.length;++go)co=qt(et,vi,go,yo),co&&yo.appendChild(co);"svg"===vi.$tag$?it=!1:"foreignObject"===yo.tagName&&(it=!0)}return yo["s-hn"]=ue,3&vi.$flags$&&(yo["s-sr"]=!0,yo["s-cr"]=Ie,yo["s-sn"]=vi.$name$||"",yo["s-rf"]=null==(zn=vi.$attrs$)?void 0:zn.ref,gi=et&&et.$children$&&et.$children$[Nn],gi&&gi.$tag$===vi.$tag$&&et.$elm$&&En(et.$elm$)),yo},En=et=>{Rt.$flags$|=1;const Dt=et.closest(ue.toLowerCase());if(null!=Dt){const Nn=Array.from(Dt.childNodes).find(zn=>zn["s-cr"]),Zn=Array.from(et.childNodes);for(const zn of Nn?Zn.reverse():Zn)null!=zn["s-sh"]&&(Ri(Dt,zn,null!=Nn?Nn:null),zn["s-sh"]=void 0,Ue=!0)}Rt.$flags$&=-2},dn=(et,Dt)=>{Rt.$flags$|=1;const Nn=Array.from(et.childNodes);if(et["s-sr"]){let Zn=et;for(;Zn=Zn.nextSibling;)Zn&&Zn["s-sn"]===et["s-sn"]&&Zn["s-sh"]===ue&&Nn.push(Zn)}for(let Zn=Nn.length-1;Zn>=0;Zn--){const zn=Nn[Zn];zn["s-hn"]!==ue&&zn["s-ol"]&&(Ri(oi(zn),zn,rr(zn)),zn["s-ol"].remove(),zn["s-ol"]=void 0,zn["s-sh"]=void 0,Ue=!0),Dt&&dn(zn,Dt)}Rt.$flags$&=-2},Gn=(et,Dt,Nn,Zn,zn,vi)=>{let yo,go=et["s-cr"]&&et["s-cr"].parentNode||et;for(go.shadowRoot&&go.tagName===ue&&(go=go.shadowRoot);zn<=vi;++zn)Zn[zn]&&(yo=qt(null,Nn,zn,et),yo&&(Zn[zn].$elm$=yo,Ri(go,yo,rr(Dt))))},Bi=(et,Dt,Nn)=>{for(let Zn=Dt;Zn<=Nn;++Zn){const zn=et[Zn];if(zn){const vi=zn.$elm$;ri(zn),vi&&(we=!0,vi["s-ol"]?vi["s-ol"].remove():dn(vi,!0),vi.remove())}}},Bo=(et,Dt,Nn=!1)=>et.$tag$===Dt.$tag$&&("slot"===et.$tag$?et.$name$===Dt.$name$:!!Nn||et.$key$===Dt.$key$),rr=et=>et&&et["s-ol"]||et,oi=et=>(et["s-ol"]?et["s-ol"]:et).parentNode,Vn=(et,Dt,Nn=!1)=>{const Zn=Dt.$elm$=et.$elm$,zn=et.$children$,vi=Dt.$children$,go=Dt.$tag$,yo=Dt.$text$;let co;null===yo?(it="svg"===go||"foreignObject"!==go&&it,"slot"!==go||ae?Jt(et,Dt,it):et.$name$!==Dt.$name$&&(Dt.$elm$["s-sn"]=Dt.$name$||"",En(Dt.$elm$.parentElement)),null!==zn&&null!==vi?((et,Dt,Nn,Zn,zn=!1)=>{let ca,zs,vi=0,go=0,yo=0,co=0,gi=Dt.length-1,qo=Dt[0],cr=Dt[gi],Er=Zn.length-1,Wr=Zn[0],Ts=Zn[Er];for(;vi<=gi&&go<=Er;)if(null==qo)qo=Dt[++vi];else if(null==cr)cr=Dt[--gi];else if(null==Wr)Wr=Zn[++go];else if(null==Ts)Ts=Zn[--Er];else if(Bo(qo,Wr,zn))Vn(qo,Wr,zn),qo=Dt[++vi],Wr=Zn[++go];else if(Bo(cr,Ts,zn))Vn(cr,Ts,zn),cr=Dt[--gi],Ts=Zn[--Er];else if(Bo(qo,Ts,zn))("slot"===qo.$tag$||"slot"===Ts.$tag$)&&dn(qo.$elm$.parentNode,!1),Vn(qo,Ts,zn),Ri(et,qo.$elm$,cr.$elm$.nextSibling),qo=Dt[++vi],Ts=Zn[--Er];else if(Bo(cr,Wr,zn))("slot"===qo.$tag$||"slot"===Ts.$tag$)&&dn(cr.$elm$.parentNode,!1),Vn(cr,Wr,zn),Ri(et,cr.$elm$,qo.$elm$),cr=Dt[--gi],Wr=Zn[++go];else{for(yo=-1,co=vi;co<=gi;++co)if(Dt[co]&&null!==Dt[co].$key$&&Dt[co].$key$===Wr.$key$){yo=co;break}yo>=0?(zs=Dt[yo],zs.$tag$!==Wr.$tag$?ca=qt(Dt&&Dt[go],Nn,yo,et):(Vn(zs,Wr,zn),Dt[yo]=void 0,ca=zs.$elm$),Wr=Zn[++go]):(ca=qt(Dt&&Dt[go],Nn,go,et),Wr=Zn[++go]),ca&&Ri(oi(qo.$elm$),ca,rr(qo.$elm$))}vi>gi?Gn(et,null==Zn[Er+1]?null:Zn[Er+1].$elm$,Nn,Zn,go,Er):go>Er&&Bi(Dt,vi,gi)})(Zn,zn,Dt,vi,Nn):null!==vi?(null!==et.$text$&&(Zn.textContent=""),Gn(Zn,null,Dt,vi,0,vi.length-1)):null!==zn&&Bi(zn,0,zn.length-1),it&&"svg"===go&&(it=!1)):(co=Zn["s-cr"])?co.parentNode.textContent=yo:et.$text$!==yo&&(Zn.data=yo)},hi=et=>{const Dt=et.childNodes;for(const Nn of Dt)if(1===Nn.nodeType){if(Nn["s-sr"]){const Zn=Nn["s-sn"];Nn.hidden=!1;for(const zn of Dt)if(zn!==Nn)if(zn["s-hn"]!==Nn["s-hn"]||""!==Zn){if(1===zn.nodeType&&(Zn===zn.getAttribute("slot")||Zn===zn["s-sn"])||3===zn.nodeType&&Zn===zn["s-sn"]){Nn.hidden=!0;break}}else if(1===zn.nodeType||3===zn.nodeType&&""!==zn.textContent.trim()){Nn.hidden=!0;break}}hi(Nn)}},po=[],Zi=et=>{let Dt,Nn,Zn;for(const zn of et.childNodes){if(zn["s-sr"]&&(Dt=zn["s-cr"])&&Dt.parentNode){Nn=Dt.parentNode.childNodes;const vi=zn["s-sn"];for(Zn=Nn.length-1;Zn>=0;Zn--)if(Dt=Nn[Zn],!(Dt["s-cn"]||Dt["s-nr"]||Dt["s-hn"]===zn["s-hn"]||Dt["s-sh"]&&Dt["s-sh"]===zn["s-hn"]))if(Yt(Dt,vi)){let go=po.find(yo=>yo.$nodeToRelocate$===Dt);we=!0,Dt["s-sn"]=Dt["s-sn"]||vi,go?(go.$nodeToRelocate$["s-sh"]=zn["s-hn"],go.$slotRefNode$=zn):(Dt["s-sh"]=zn["s-hn"],po.push({$slotRefNode$:zn,$nodeToRelocate$:Dt})),Dt["s-sr"]&&po.map(yo=>{Yt(yo.$nodeToRelocate$,Dt["s-sn"])&&(go=po.find(co=>co.$nodeToRelocate$===Dt),go&&!yo.$slotRefNode$&&(yo.$slotRefNode$=go.$slotRefNode$))})}else po.some(go=>go.$nodeToRelocate$===Dt)||po.push({$nodeToRelocate$:Dt})}1===zn.nodeType&&Zi(zn)}},Yt=(et,Dt)=>1===et.nodeType?null===et.getAttribute("slot")&&""===Dt||et.getAttribute("slot")===Dt:et["s-sn"]===Dt||""===Dt,ri=et=>{et.$attrs$&&et.$attrs$.ref&&et.$attrs$.ref(null),et.$children$&&et.$children$.map(ri)},Ri=(et,Dt,Nn)=>{const Zn=null==et?void 0:et.insertBefore(Dt,Nn);return mr(Dt,et),Zn},Uo=et=>{const Dt=[];return et&&Dt.push(...et["s-scs"]||[],et["s-si"],et["s-sc"],...Uo(et.parentElement)),Dt},mr=(et,Dt,Nn=!1)=>{var Zn;if(et&&Dt&&1===et.nodeType){const zn=new Set(Uo(Dt).filter(Boolean));if(zn.size&&(null==(Zn=et.classList)||Zn.add(...et["s-scs"]=[...zn]),et["s-ol"]||Nn))for(const vi of Array.from(et.childNodes))mr(vi,et,!0)}},Na=(et,Dt)=>{if(et.$flags$|=16,!(4&et.$flags$))return((et,Dt)=>{Dt&&!et.$onRenderResolve$&&Dt["s-p"]&&Dt["s-p"].push(new Promise(Nn=>et.$onRenderResolve$=Nn))})(et,et.$ancestorComponent$),pr(()=>Rl(et,Dt));et.$flags$|=512},Rl=(et,Dt)=>{const zn=et.$lazyInstance$;if(!zn)throw new Error(`Can't render component <${et.$hostElement$.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let vi;return Dt&&(et.$flags$|=256,et.$queuedListeners$&&(et.$queuedListeners$.map(([go,yo])=>Vs(zn,go,yo)),et.$queuedListeners$=void 0),vi=Vs(zn,"componentWillLoad")),vi=Du(vi,()=>Vs(zn,"componentWillRender")),Du(vi,()=>Ar(et,zn,Dt))},Du=(et,Dt)=>Ra(et)?et.then(Dt).catch(Nn=>{console.error(Nn),Dt()}):Dt(),Ra=et=>et instanceof Promise||et&&et.then&&"function"==typeof et.then,Ar=function(){var et=(0,V.A)(function*(Dt,Nn,Zn){var zn;const vi=Dt.$hostElement$,yo=vi["s-rc"];Zn&&(et=>{const Dt=et.$cmpMeta$,Nn=et.$hostElement$,Zn=Dt.$flags$,vi=((et,Dt,Nn)=>{var Zn;const zn=ei(Dt,Nn),vi=un.get(zn);if(et=11===et.nodeType?et:Me,vi)if("string"==typeof vi){let yo,go=Xs.get(et=et.head||et);if(go||Xs.set(et,go=new Set),!go.has(zn)){if(et.host&&(yo=et.querySelector(`[sty-id="${zn}"]`)))yo.innerHTML=vi;else{yo=Me.createElement("style"),yo.innerHTML=vi;const co=null!=(Zn=Rt.$nonce$)?Zn:function Jr(et){var Dt,Nn,Zn;return null!=(Zn=null==(Nn=null==(Dt=et.head)?void 0:Dt.querySelector('meta[name="csp-nonce"]'))?void 0:Nn.getAttribute("content"))?Zn:void 0}(Me);null!=co&&yo.setAttribute("nonce",co),et.insertBefore(yo,et.querySelector("link"))}4&Dt.$flags$&&(yo.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),go&&go.add(zn)}}else et.adoptedStyleSheets.includes(vi)||(et.adoptedStyleSheets=[...et.adoptedStyleSheets,vi]);return zn})(Nn.shadowRoot?Nn.shadowRoot:Nn.getRootNode(),Dt,et.$modeName$);10&Zn&&(Nn["s-sc"]=vi,Nn.classList.add(vi+"-h"),2&Zn&&Nn.classList.add(vi+"-s"))})(Dt);Hi(Dt,Nn,vi,Zn),yo&&(yo.map(gi=>gi()),vi["s-rc"]=void 0);{const gi=null!=(zn=vi["s-p"])?zn:[],qo=()=>Zo(Dt);0===gi.length?qo():(Promise.all(gi).then(qo),Dt.$flags$|=4,gi.length=0)}});return function(Nn,Zn,zn){return et.apply(this,arguments)}}(),Hi=(et,Dt,Nn,Zn)=>{try{Dt=Dt.render&&Dt.render(),et.$flags$&=-17,et.$flags$|=2,((et,Dt,Nn=!1)=>{var Zn,zn,vi,go,yo;const co=et.$hostElement$,gi=et.$cmpMeta$,qo=et.$vnode$||or(null,null),cr=(et=>et&&et.$tag$===ti)(Dt)?Dt:Jo(null,null,Dt);if(ue=co.tagName,gi.$attrsToReflect$&&(cr.$attrs$=cr.$attrs$||{},gi.$attrsToReflect$.map(([Er,Wr])=>cr.$attrs$[Wr]=co[Er])),Nn&&cr.$attrs$)for(const Er of Object.keys(cr.$attrs$))co.hasAttribute(Er)&&!["key","ref","style","class"].includes(Er)&&(cr.$attrs$[Er]=co[Er]);if(cr.$tag$=null,cr.$flags$|=4,et.$vnode$=cr,cr.$elm$=qo.$elm$=co.shadowRoot||co,Lt=co["s-sc"],ae=!!(1&gi.$flags$),Ie=co["s-cr"],we=!1,Vn(qo,cr,Nn),Rt.$flags$|=1,Ue){Zi(cr.$elm$);for(const Er of po){const Wr=Er.$nodeToRelocate$;if(!Wr["s-ol"]){const Ts=Me.createTextNode("");Ts["s-nr"]=Wr,Ri(Wr.parentNode,Wr["s-ol"]=Ts,Wr)}}for(const Er of po){const Wr=Er.$nodeToRelocate$,Ts=Er.$slotRefNode$;if(Ts){const ca=Ts.parentNode;let zs=Ts.nextSibling;if(zs&&1===zs.nodeType){let Fr=null==(Zn=Wr["s-ol"])?void 0:Zn.previousSibling;for(;Fr;){let ts=null!=(zn=Fr["s-nr"])?zn:null;if(ts&&ts["s-sn"]===Wr["s-sn"]&&ca===ts.parentNode){for(ts=ts.nextSibling;ts===Wr||null!=ts&&ts["s-sr"];)ts=null==ts?void 0:ts.nextSibling;if(!ts||!ts["s-nr"]){zs=ts;break}}Fr=Fr.previousSibling}}(!zs&&ca!==Wr.parentNode||Wr.nextSibling!==zs)&&Wr!==zs&&(Ri(ca,Wr,zs),1===Wr.nodeType&&(Wr.hidden=null!=(vi=Wr["s-ih"])&&vi)),Wr&&"function"==typeof Ts["s-rf"]&&Ts["s-rf"](Wr)}else 1===Wr.nodeType&&(Nn&&(Wr["s-ih"]=null!=(go=Wr.hidden)&&go),Wr.hidden=!0)}}if(we&&hi(cr.$elm$),Rt.$flags$&=-2,po.length=0,2&gi.$flags$)for(const Er of cr.$elm$.childNodes)Er["s-hn"]!==ue&&!Er["s-sh"]&&(Nn&&null==Er["s-ih"]&&(Er["s-ih"]=null!=(yo=Er.hidden)&&yo),Er.hidden=!0);Ie=void 0})(et,Dt,Zn)}catch(zn){At(zn,et.$hostElement$)}return null},Zo=et=>{const Nn=et.$hostElement$,zn=et.$lazyInstance$,vi=et.$ancestorComponent$;Vs(zn,"componentDidRender"),64&et.$flags$?Vs(zn,"componentDidUpdate"):(et.$flags$|=64,Ys(Nn),Vs(zn,"componentDidLoad"),et.$onReadyResolve$(Nn),vi||ds()),et.$onInstanceResolve$(Nn),et.$onRenderResolve$&&(et.$onRenderResolve$(),et.$onRenderResolve$=void 0),512&et.$flags$&&_o(()=>Na(et,!1)),et.$flags$&=-517},Tr=et=>{{const Dt=Xt(et),Nn=Dt.$hostElement$.isConnected;return Nn&&2==(18&Dt.$flags$)&&Na(Dt,!1),Nn}},ds=et=>{Ys(Me.documentElement),_o(()=>Lr(Ct,"appload",{detail:{namespace:"ionic"}}))},Vs=(et,Dt,Nn)=>{if(et&&et[Dt])try{return et[Dt](Nn)}catch(Zn){At(Zn)}},Ys=et=>et.classList.add(("hydrated","hydrated"))},1331:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{b:()=>Xt,c:()=>Ut,d:()=>It,e:()=>Cn,g:()=>Ke,l:()=>Rt,s:()=>so,t:()=>ht,w:()=>On});var V=_e(467),se=_e(4921),ne=_e(8393),l=_e(4929),qe=_e(4920);const Xt="ionViewWillLeave",Ut="ionViewDidLeave",It="ionViewWillUnload",C=Ae=>{Ae.tabIndex=-1,Ae.focus()},At=Ae=>null!==Ae.offsetParent,vt="ion-last-focus",on_saveViewFocus=tt=>{if(se.c.get("focusManagerPriority",!1)){const Yn=document.activeElement;null!==Yn&&null!=tt&&tt.contains(Yn)&&Yn.setAttribute(vt,"true")}},on_setViewFocus=tt=>{const zt=se.c.get("focusManagerPriority",!1);if(Array.isArray(zt)&&!tt.contains(document.activeElement)){const Yn=tt.querySelector(`[${vt}]`);if(Yn&&At(Yn))return void C(Yn);for(const cn of zt)switch(cn){case"content":const _o=tt.querySelector('main, [role="main"]');if(_o&&At(_o))return void C(_o);break;case"heading":const to=tt.querySelector('h1, [role="heading"][aria-level="1"]');if(to&&At(to))return void C(to);break;case"banner":const pr=tt.querySelector('header, [role="banner"]');if(pr&&At(pr))return void C(pr);break;default:(0,l.p)(`Unrecognized focus manager priority value ${cn}`)}C(tt)}},ht=Ae=>new Promise((Ge,tt)=>{(0,ne.w)(()=>{Jn(Ae),An(Ae).then(zt=>{zt.animation&&zt.animation.destroy(),qn(Ae),Ge(zt)},zt=>{qn(Ae),tt(zt)})})}),Jn=Ae=>{const Ge=Ae.enteringEl,tt=Ae.leavingEl;on_saveViewFocus(tt),Fn(Ge,tt,Ae.direction),Ae.showGoBack?Ge.classList.add("can-go-back"):Ge.classList.remove("can-go-back"),so(Ge,!1),Ge.style.setProperty("pointer-events","none"),tt&&(so(tt,!1),tt.style.setProperty("pointer-events","none"))},An=function(){var Ae=(0,V.A)(function*(Ge){const tt=yield xt(Ge);return tt&&ne.B.isBrowser?Ot(tt,Ge):vn(Ge)});return function(tt){return Ae.apply(this,arguments)}}(),qn=Ae=>{const Ge=Ae.enteringEl,tt=Ae.leavingEl;Ge.classList.remove("ion-page-invisible"),Ge.style.removeProperty("pointer-events"),void 0!==tt&&(tt.classList.remove("ion-page-invisible"),tt.style.removeProperty("pointer-events")),on_setViewFocus(Ge)},xt=function(){var Ae=(0,V.A)(function*(Ge){return Ge.leavingEl&&Ge.animated&&0!==Ge.duration?Ge.animationBuilder?Ge.animationBuilder:"ios"===Ge.mode?(yield Promise.resolve().then(_e.bind(_e,9856))).iosTransitionAnimation:(yield Promise.resolve().then(_e.bind(_e,361))).mdTransitionAnimation:void 0});return function(tt){return Ae.apply(this,arguments)}}(),Ot=function(){var Ae=(0,V.A)(function*(Ge,tt){yield Pn(tt,!0);const zt=Ge(tt.baseEl,tt);Me(tt.enteringEl,tt.leavingEl);const Yn=yield Ct(zt,tt);return tt.progressCallback&&tt.progressCallback(void 0),Yn&&pn(tt.enteringEl,tt.leavingEl),{hasCompleted:Yn,animation:zt}});return function(tt,zt){return Ae.apply(this,arguments)}}(),vn=function(){var Ae=(0,V.A)(function*(Ge){const tt=Ge.enteringEl,zt=Ge.leavingEl,Yn=se.c.get("focusManagerPriority",!1);return yield Pn(Ge,Yn),Me(tt,zt),pn(tt,zt),{hasCompleted:!0}});return function(tt){return Ae.apply(this,arguments)}}(),Pn=function(){var Ae=(0,V.A)(function*(Ge,tt){(void 0!==Ge.deepWait?Ge.deepWait:tt)&&(yield Promise.all([Cn(Ge.enteringEl),Cn(Ge.leavingEl)])),yield ki(Ge.viewIsReady,Ge.enteringEl)});return function(tt,zt){return Ae.apply(this,arguments)}}(),ki=function(){var Ae=(0,V.A)(function*(Ge,tt){Ge&&(yield Ge(tt))});return function(tt,zt){return Ae.apply(this,arguments)}}(),Ct=(Ae,Ge)=>{const tt=Ge.progressCallback,zt=new Promise(Yn=>{Ae.onFinish(cn=>Yn(1===cn))});return tt?(Ae.progressStart(!0),tt(Ae)):Ae.play(),zt},Me=(Ae,Ge)=>{Rt(Ge,Xt),Rt(Ae,"ionViewWillEnter")},pn=(Ae,Ge)=>{Rt(Ae,"ionViewDidEnter"),Rt(Ge,Ut)},Rt=(Ae,Ge)=>{if(Ae){const tt=new CustomEvent(Ge,{bubbles:!1,cancelable:!1});Ae.dispatchEvent(tt)}},On=()=>new Promise(Ae=>(0,qe.r)(()=>(0,qe.r)(()=>Ae()))),Cn=function(){var Ae=(0,V.A)(function*(Ge){const tt=Ge;if(tt){if(null!=tt.componentOnReady){if(null!=(yield tt.componentOnReady()))return}else if(null!=tt.__registerHost)return void(yield new Promise(Yn=>(0,qe.r)(Yn)));yield Promise.all(Array.from(tt.children).map(Cn))}});return function(tt){return Ae.apply(this,arguments)}}(),so=(Ae,Ge)=>{Ge?(Ae.setAttribute("aria-hidden","true"),Ae.classList.add("ion-page-hidden")):(Ae.hidden=!1,Ae.removeAttribute("aria-hidden"),Ae.classList.remove("ion-page-hidden"))},Fn=(Ae,Ge,tt)=>{void 0!==Ae&&(Ae.style.zIndex="back"===tt?"99":"101"),void 0!==Ge&&(Ge.style.zIndex="100")},Ke=Ae=>Ae.classList.contains("ion-page")?Ae:Ae.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ae},4929:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{a:()=>se,b:()=>ne,p:()=>V});const V=(l,...qe)=>console.warn(`[Ionic Warning]: ${l}`,...qe),se=(l,...qe)=>console.error(`[Ionic Error]: ${l}`,...qe),ne=(l,...qe)=>console.error(`<${l.tagName.toLowerCase()}> must be used inside ${qe.join(" or ")}.`)},8476:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{d:()=>se,w:()=>V});const V=typeof window<"u"?window:void 0,se=typeof document<"u"?document:void 0},4921:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{a:()=>C,b:()=>so,c:()=>ne});var V=_e(8393);class se{constructor(){this.m=new Map}reset(Ae){this.m=new Map(Object.entries(Ae))}get(Ae,Ge){const tt=this.m.get(Ae);return void 0!==tt?tt:Ge}getBoolean(Ae,Ge=!1){const tt=this.m.get(Ae);return void 0===tt?Ge:"string"==typeof tt?"true"===tt:!!tt}getNumber(Ae,Ge){const tt=parseFloat(this.m.get(Ae));return isNaN(tt)?void 0!==Ge?Ge:NaN:tt}set(Ae,Ge){this.m.set(Ae,Ge)}}const ne=new se,C=(Ke,Ae)=>("string"==typeof Ke&&(Ae=Ke,Ke=void 0),(Ke=>At(Ke))(Ke).includes(Ae)),At=(Ke=window)=>{if(typeof Ke>"u")return[];Ke.Ionic=Ke.Ionic||{};let Ae=Ke.Ionic.platforms;return null==Ae&&(Ae=Ke.Ionic.platforms=Ht(Ke),Ae.forEach(Ge=>Ke.document.documentElement.classList.add(`plt-${Ge}`))),Ae},Ht=Ke=>{const Ae=ne.get("platform");return Object.keys(On).filter(Ge=>{const tt=null==Ae?void 0:Ae[Ge];return"function"==typeof tt?tt(Ke):On[Ge](Ke)})},un=Ke=>!!(pn(Ke,/iPad/i)||pn(Ke,/Macintosh/i)&&xt(Ke)),ht=Ke=>pn(Ke,/android|sink/i),xt=Ke=>Rt(Ke,"(any-pointer:coarse)"),vn=Ke=>Pn(Ke)||ki(Ke),Pn=Ke=>!!(Ke.cordova||Ke.phonegap||Ke.PhoneGap),ki=Ke=>{const Ae=Ke.Capacitor;return!(null==Ae||!Ae.isNative)},pn=(Ke,Ae)=>Ae.test(Ke.navigator.userAgent),Rt=(Ke,Ae)=>{var Ge;return null===(Ge=Ke.matchMedia)||void 0===Ge?void 0:Ge.call(Ke,Ae).matches},On={ipad:un,iphone:Ke=>pn(Ke,/iPhone/i),ios:Ke=>pn(Ke,/iPhone|iPod/i)||un(Ke),android:ht,phablet:Ke=>{const Ae=Ke.innerWidth,Ge=Ke.innerHeight,tt=Math.min(Ae,Ge),zt=Math.max(Ae,Ge);return tt>390&&tt<520&&zt>620&&zt<800},tablet:Ke=>{const Ae=Ke.innerWidth,Ge=Ke.innerHeight,tt=Math.min(Ae,Ge),zt=Math.max(Ae,Ge);return un(Ke)||(Ke=>ht(Ke)&&!pn(Ke,/mobile/i))(Ke)||tt>460&&tt<820&&zt>780&&zt<1400},cordova:Pn,capacitor:ki,electron:Ke=>pn(Ke,/electron/i),pwa:Ke=>{var Ae;return!!(null!==(Ae=Ke.matchMedia)&&void 0!==Ae&&Ae.call(Ke,"(display-mode: standalone)").matches||Ke.navigator.standalone)},mobile:xt,mobileweb:Ke=>xt(Ke)&&!vn(Ke),desktop:Ke=>!xt(Ke),hybrid:vn};const so=Ke=>Ke&&(0,V.g)(Ke)||undefined},9856:(Go,Kn,_e)=>{"use strict";_e.r(Kn),_e.d(Kn,{iosTransitionAnimation:()=>vt,shadow:()=>Xt});var V=_e(9986),se=_e(1331);_e(8476),_e(4921),_e(8393);const ft=xn=>document.querySelector(`${xn}.ion-cloned-element`),Xt=xn=>xn.shadowRoot||xn,Ut=xn=>{const on="ION-TABS"===xn.tagName?xn:xn.querySelector("ion-tabs"),ht="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=on){const Jn=on.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Jn?Jn.querySelector(ht):null}return xn.querySelector(ht)},It=(xn,on)=>{const ht="ION-TABS"===xn.tagName?xn:xn.querySelector("ion-tabs");let Jn=[];if(null!=ht){const An=ht.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=An&&(Jn=An.querySelectorAll("ion-buttons"))}else Jn=xn.querySelectorAll("ion-buttons");for(const An of Jn){const qn=An.closest("ion-header"),xt=qn&&!qn.classList.contains("header-collapse-condense-inactive"),Ot=An.querySelector("ion-back-button"),vn=An.classList.contains("buttons-collapse");if(null!==Ot&&("start"===An.slot||""===An.slot)&&(vn&&xt&&on||!vn))return Ot}return null},At=(xn,on,ht,Jn,An,qn,xt,Ot,vn)=>{var Pn,ki;const Ct=on?`calc(100% - ${An.right+4}px)`:An.left-4+"px",Me=on?"right":"left",pn=on?"left":"right",Rt=on?"right":"left";let On=1,Cn=1,so=`scale(${Cn})`;const Fn="scale(1)";if(qn&&xt){const Fi=(null===(Pn=qn.textContent)||void 0===Pn?void 0:Pn.trim())===(null===(ki=Ot.textContent)||void 0===ki?void 0:ki.trim());On=vn.width/xt.width,Cn=(vn.height-un)/xt.height,so=Fi?`scale(${On}, ${Cn})`:`scale(${Cn})`}const Ae=Xt(Jn).querySelector("ion-icon").getBoundingClientRect(),Ge=on?Ae.width/2-(Ae.right-An.right)+"px":An.left-Ae.width/2+"px",tt=on?`-${window.innerWidth-An.right}px`:`${An.left}px`,zt=`${vn.top}px`,Yn=`${An.top}px`,to=ht?[{offset:0,transform:`translate3d(${tt}, ${Yn}, 0)`},{offset:1,transform:`translate3d(${Ge}, ${zt}, 0)`}]:[{offset:0,transform:`translate3d(${Ge}, ${zt}, 0)`},{offset:1,transform:`translate3d(${tt}, ${Yn}, 0)`}],zr=ht?[{offset:0,opacity:1,transform:Fn},{offset:1,opacity:0,transform:so}]:[{offset:0,opacity:0,transform:so},{offset:1,opacity:1,transform:Fn}],$i=ht?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],br=(0,V.c)(),Jr=(0,V.c)(),Li=(0,V.c)(),yi=ft("ion-back-button"),ao=Xt(yi).querySelector(".button-text"),si=Xt(yi).querySelector("ion-icon");yi.text=Jn.text,yi.mode=Jn.mode,yi.icon=Jn.icon,yi.color=Jn.color,yi.disabled=Jn.disabled,yi.style.setProperty("display","block"),yi.style.setProperty("position","fixed"),Jr.addElement(si),br.addElement(ao),Li.addElement(yi),Li.beforeStyles({position:"absolute",top:"0px",[Rt]:"0px"}).beforeAddWrite(()=>{Jn.style.setProperty("display","none"),yi.style.setProperty(Me,Ct)}).afterAddWrite(()=>{Jn.style.setProperty("display",""),yi.style.setProperty("display","none"),yi.style.removeProperty(Me)}).keyframes(to),br.beforeStyles({"transform-origin":`${Me} top`}).keyframes(zr),Jr.beforeStyles({"transform-origin":`${pn} center`}).keyframes($i),xn.addAnimation([br,Jr,Li])},Ht=(xn,on,ht,Jn,An,qn,xt,Ot,vn)=>{var Pn,ki;const Ct=on?"right":"left",Me=on?`calc(100% - ${An.right}px)`:`${An.left}px`,Rt=`${An.top}px`;let Cn=on?`-${window.innerWidth-xt.right-8}px`:`${xt.x+8}px`,so=.5;const Fn="scale(1)";let Ke=`scale(${so})`;if(Ot&&vn){Cn=on?`-${window.innerWidth-vn.right-8}px`:vn.x-8+"px";const pr=(null===(Pn=Ot.textContent)||void 0===Pn?void 0:Pn.trim())===(null===(ki=Jn.textContent)||void 0===ki?void 0:ki.trim());so=vn.height/(qn.height-un),Ke=pr?`scale(${vn.width/qn.width}, ${so})`:`scale(${so})`}const tt=xt.top+xt.height/2-An.height*so/2+"px",cn=ht?[{offset:0,opacity:0,transform:`translate3d(${Cn}, ${tt}, 0) ${Ke}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${Rt}, 0) ${Fn}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${Rt}, 0) ${Fn}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Cn}, ${tt}, 0) ${Ke}`}],_o=ft("ion-title"),to=(0,V.c)();_o.innerText=Jn.innerText,_o.size=Jn.size,_o.color=Jn.color,to.addElement(_o),to.beforeStyles({"transform-origin":`${Ct} top`,height:`${An.height}px`,display:"",position:"relative",[Ct]:Me}).beforeAddWrite(()=>{Jn.style.setProperty("opacity","0")}).afterAddWrite(()=>{Jn.style.setProperty("opacity",""),_o.style.setProperty("display","none")}).keyframes(cn),xn.addAnimation(to)},vt=(xn,on)=>{var ht;try{const Jn="cubic-bezier(0.32,0.72,0,1)",An="opacity",qn="transform",xt="0%",vn="rtl"===xn.ownerDocument.dir,Pn=vn?"-99.5%":"99.5%",ki=vn?"33%":"-33%",Ct=on.enteringEl,Me=on.leavingEl,pn="back"===on.direction,Rt=Ct.querySelector(":scope > ion-content"),On=Ct.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Cn=Ct.querySelectorAll(":scope > ion-header > ion-toolbar"),so=(0,V.c)(),Fn=(0,V.c)();if(so.addElement(Ct).duration((null!==(ht=on.duration)&&void 0!==ht?ht:0)||540).easing(on.easing||Jn).fill("both").beforeRemoveClass("ion-page-invisible"),Me&&null!=xn){const tt=(0,V.c)();tt.addElement(xn),so.addAnimation(tt)}if(Rt||0!==Cn.length||0!==On.length?(Fn.addElement(Rt),Fn.addElement(On)):Fn.addElement(Ct.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),so.addAnimation(Fn),pn?Fn.beforeClearStyles([An]).fromTo("transform",`translateX(${ki})`,`translateX(${xt})`).fromTo(An,.8,1):Fn.beforeClearStyles([An]).fromTo("transform",`translateX(${Pn})`,`translateX(${xt})`),Rt){const tt=Xt(Rt).querySelector(".transition-effect");if(tt){const zt=tt.querySelector(".transition-cover"),Yn=tt.querySelector(".transition-shadow"),cn=(0,V.c)(),_o=(0,V.c)(),to=(0,V.c)();cn.addElement(tt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),_o.addElement(zt).beforeClearStyles([An]).fromTo(An,0,.1),to.addElement(Yn).beforeClearStyles([An]).fromTo(An,.03,.7),cn.addAnimation([_o,to]),Fn.addAnimation([cn])}}const Ke=Ct.querySelector("ion-header.header-collapse-condense"),{forward:Ae,backward:Ge}=((xn,on,ht,Jn,An)=>{const qn=It(Jn,ht),xt=Ut(An),Ot=Ut(Jn),vn=It(An,ht),Pn=null!==qn&&null!==xt&&!ht,ki=null!==Ot&&null!==vn&&ht;if(Pn){const Ct=xt.getBoundingClientRect(),Me=qn.getBoundingClientRect(),pn=Xt(qn).querySelector(".button-text"),Rt=null==pn?void 0:pn.getBoundingClientRect(),Cn=Xt(xt).querySelector(".toolbar-title").getBoundingClientRect();Ht(xn,on,ht,xt,Ct,Cn,Me,pn,Rt),At(xn,on,ht,qn,Me,pn,Rt,xt,Cn)}else if(ki){const Ct=Ot.getBoundingClientRect(),Me=vn.getBoundingClientRect(),pn=Xt(vn).querySelector(".button-text"),Rt=null==pn?void 0:pn.getBoundingClientRect(),Cn=Xt(Ot).querySelector(".toolbar-title").getBoundingClientRect();Ht(xn,on,ht,Ot,Ct,Cn,Me,pn,Rt),At(xn,on,ht,vn,Me,pn,Rt,Ot,Cn)}return{forward:Pn,backward:ki}})(so,vn,pn,Ct,Me);if(Cn.forEach(tt=>{const zt=(0,V.c)();zt.addElement(tt),so.addAnimation(zt);const Yn=(0,V.c)();Yn.addElement(tt.querySelector("ion-title"));const cn=(0,V.c)(),_o=Array.from(tt.querySelectorAll("ion-buttons,[menuToggle]")),to=tt.closest("ion-header"),pr=null==to?void 0:to.classList.contains("header-collapse-condense-inactive");let jo;jo=_o.filter(pn?br=>{const Jr=br.classList.contains("buttons-collapse");return Jr&&!pr||!Jr}:br=>!br.classList.contains("buttons-collapse")),cn.addElement(jo);const zr=(0,V.c)();zr.addElement(tt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Mi=(0,V.c)();Mi.addElement(Xt(tt).querySelector(".toolbar-background"));const rs=(0,V.c)(),$i=tt.querySelector("ion-back-button");if($i&&rs.addElement($i),zt.addAnimation([Yn,cn,zr,Mi,rs]),cn.fromTo(An,.01,1),zr.fromTo(An,.01,1),pn)pr||Yn.fromTo("transform",`translateX(${ki})`,`translateX(${xt})`).fromTo(An,.01,1),zr.fromTo("transform",`translateX(${ki})`,`translateX(${xt})`),rs.fromTo(An,.01,1);else if(Ke||Yn.fromTo("transform",`translateX(${Pn})`,`translateX(${xt})`).fromTo(An,.01,1),zr.fromTo("transform",`translateX(${Pn})`,`translateX(${xt})`),Mi.beforeClearStyles([An,"transform"]),(null==to?void 0:to.translucent)?Mi.fromTo("transform",vn?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Mi.fromTo(An,.01,"var(--opacity)"),Ae||rs.fromTo(An,.01,1),$i&&!Ae){const Jr=(0,V.c)();Jr.addElement(Xt($i).querySelector(".button-text")).fromTo("transform",vn?"translateX(-100px)":"translateX(100px)","translateX(0px)"),zt.addAnimation(Jr)}}),Me){const tt=(0,V.c)(),zt=Me.querySelector(":scope > ion-content"),Yn=Me.querySelectorAll(":scope > ion-header > ion-toolbar"),cn=Me.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(zt||0!==Yn.length||0!==cn.length?(tt.addElement(zt),tt.addElement(cn)):tt.addElement(Me.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),so.addAnimation(tt),pn){tt.beforeClearStyles([An]).fromTo("transform",`translateX(${xt})`,vn?"translateX(-100%)":"translateX(100%)");const _o=(0,se.g)(Me);so.afterAddWrite(()=>{"normal"===so.getDirection()&&_o.style.setProperty("display","none")})}else tt.fromTo("transform",`translateX(${xt})`,`translateX(${ki})`).fromTo(An,1,.8);if(zt){const _o=Xt(zt).querySelector(".transition-effect");if(_o){const to=_o.querySelector(".transition-cover"),pr=_o.querySelector(".transition-shadow"),jo=(0,V.c)(),zr=(0,V.c)(),Mi=(0,V.c)();jo.addElement(_o).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),zr.addElement(to).beforeClearStyles([An]).fromTo(An,.1,0),Mi.addElement(pr).beforeClearStyles([An]).fromTo(An,.7,.03),jo.addAnimation([zr,Mi]),tt.addAnimation([jo])}}Yn.forEach(_o=>{const to=(0,V.c)();to.addElement(_o);const pr=(0,V.c)();pr.addElement(_o.querySelector("ion-title"));const jo=(0,V.c)(),zr=_o.querySelectorAll("ion-buttons,[menuToggle]"),Mi=_o.closest("ion-header"),rs=null==Mi?void 0:Mi.classList.contains("header-collapse-condense-inactive"),$i=Array.from(zr).filter(si=>{const Fi=si.classList.contains("buttons-collapse");return Fi&&!rs||!Fi});jo.addElement($i);const br=(0,V.c)(),Jr=_o.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Jr.length>0&&br.addElement(Jr);const Li=(0,V.c)();Li.addElement(Xt(_o).querySelector(".toolbar-background"));const yi=(0,V.c)(),ao=_o.querySelector("ion-back-button");if(ao&&yi.addElement(ao),to.addAnimation([pr,jo,br,yi,Li]),so.addAnimation(to),yi.fromTo(An,.99,0),jo.fromTo(An,.99,0),br.fromTo(An,.99,0),pn){if(rs||pr.fromTo("transform",`translateX(${xt})`,vn?"translateX(-100%)":"translateX(100%)").fromTo(An,.99,0),br.fromTo("transform",`translateX(${xt})`,vn?"translateX(-100%)":"translateX(100%)"),Li.beforeClearStyles([An,"transform"]),(null==Mi?void 0:Mi.translucent)?Li.fromTo("transform","translateX(0px)",vn?"translateX(-100%)":"translateX(100%)"):Li.fromTo(An,"var(--opacity)",0),ao&&!Ge){const Fi=(0,V.c)();Fi.addElement(Xt(ao).querySelector(".button-text")).fromTo("transform",`translateX(${xt})`,`translateX(${(vn?-124:124)+"px"})`),to.addAnimation(Fi)}}else rs||pr.fromTo("transform",`translateX(${xt})`,`translateX(${ki})`).fromTo(An,.99,0).afterClearStyles([qn,An]),br.fromTo("transform",`translateX(${xt})`,`translateX(${ki})`).afterClearStyles([qn,An]),yi.afterClearStyles([An]),pr.afterClearStyles([An]),jo.afterClearStyles([An])})}return so}catch(Jn){throw Jn}},un=10},361:(Go,Kn,_e)=>{"use strict";_e.r(Kn),_e.d(Kn,{mdTransitionAnimation:()=>Y});var V=_e(9986),se=_e(1331);_e(8476),_e(4921),_e(8393);const Y=(ft,Xt)=>{var Ut,It,C;const vt="back"===Xt.direction,xn=Xt.leavingEl,on=(0,se.g)(Xt.enteringEl),ht=on.querySelector("ion-toolbar"),Jn=(0,V.c)();if(Jn.addElement(on).fill("both").beforeRemoveClass("ion-page-invisible"),vt?Jn.duration((null!==(Ut=Xt.duration)&&void 0!==Ut?Ut:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Jn.duration((null!==(It=Xt.duration)&&void 0!==It?It:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),ht){const An=(0,V.c)();An.addElement(ht),Jn.addAnimation(An)}if(xn&&vt){Jn.duration((null!==(C=Xt.duration)&&void 0!==C?C:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const An=(0,V.c)();An.addElement((0,se.g)(xn)).onFinish(qn=>{1===qn&&An.elements.length>0&&An.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Jn.addAnimation(An)}return Jn}},1070:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{B:()=>zr,F:()=>yi,G:()=>Mi,O:()=>rs,a:()=>on,b:()=>ht,c:()=>xt,d:()=>$i,e:()=>br,f:()=>Ae,g:()=>tt,h:()=>cn,i:()=>to,j:()=>vn,k:()=>Pn,l:()=>Jn,m:()=>An,n:()=>It,o:()=>Fn,q:()=>C,s:()=>jo,t:()=>Ot});var V=_e(467),se=_e(8476),ne=_e(4920),l=_e(8669),qe=_e(4921),Y=_e(8621),ft=_e(1970),Xt=_e(4929);const Ut='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',It=(ao,si)=>{const Fi=ao.querySelector(Ut);At(Fi,null!=si?si:ao)},C=(ao,si)=>{const Fi=Array.from(ao.querySelectorAll(Ut));At(Fi.length>0?Fi[Fi.length-1]:null,null!=si?si:ao)},At=(ao,si)=>{let Fi=ao;const mo=null==ao?void 0:ao.shadowRoot;mo&&(Fi=mo.querySelector(Ut)||ao),Fi?(0,ne.f)(Fi):si.focus()};let Ht=0,vt=0;const un=new WeakMap,xn=ao=>({create:si=>ki(ao,si),dismiss:(si,Fi,mo)=>On(document,si,Fi,ao,mo),getTop:()=>(0,V.A)(function*(){return Fn(document,ao)})()}),on=xn("ion-alert"),ht=xn("ion-action-sheet"),Jn=xn("ion-loading"),An=xn("ion-modal"),xt=xn("ion-popover"),Ot=xn("ion-toast"),vn=ao=>{typeof document<"u"&&Rt(document);const si=Ht++;ao.overlayIndex=si},Pn=ao=>(ao.hasAttribute("id")||(ao.id="ion-overlay-"+ ++vt),ao.id),ki=(ao,si)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(ao).then(()=>{const Fi=document.createElement(ao);return Fi.classList.add("overlay-hidden"),Object.assign(Fi,Object.assign(Object.assign({},si),{hasController:!0})),zt(document).appendChild(Fi),new Promise(mo=>(0,ne.c)(Fi,mo))}):Promise.resolve(),Me=(ao,si)=>{let Fi=ao;const mo=null==ao?void 0:ao.shadowRoot;mo&&(Fi=mo.querySelector(Ut)||ao),Fi?(0,ne.f)(Fi):si.focus()},Rt=ao=>{0===Ht&&(Ht=1,ao.addEventListener("focus",si=>{((ao,si)=>{const Fi=Fn(si,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),mo=ao.target;Fi&&mo&&!Fi.classList.contains(yi)&&(Fi.shadowRoot?(()=>{if(Fi.contains(mo))Fi.lastFocus=mo;else if("ION-TOAST"===mo.tagName)Me(Fi.lastFocus,Fi);else{const Jo=Fi.lastFocus;It(Fi),Jo===si.activeElement&&C(Fi),Fi.lastFocus=si.activeElement}})():(()=>{if(Fi===mo)Fi.lastFocus=void 0;else if("ION-TOAST"===mo.tagName)Me(Fi.lastFocus,Fi);else{const Jo=(0,ne.g)(Fi);if(!Jo.contains(mo))return;const or=Jo.querySelector(".ion-overlay-wrapper");if(!or)return;if(or.contains(mo)||mo===Jo.querySelector("ion-backdrop"))Fi.lastFocus=mo;else{const ti=Fi.lastFocus;It(or,Fi),ti===si.activeElement&&C(or,Fi),Fi.lastFocus=si.activeElement}}})())})(si,ao)},!0),ao.addEventListener("ionBackButton",si=>{const Fi=Fn(ao);null!=Fi&&Fi.backdropDismiss&&si.detail.register(l.OVERLAY_BACK_BUTTON_PRIORITY,()=>{Fi.dismiss(void 0,zr)})}),(0,l.shouldUseCloseWatcher)()||ao.addEventListener("keydown",si=>{if("Escape"===si.key){const Fi=Fn(ao);null!=Fi&&Fi.backdropDismiss&&Fi.dismiss(void 0,zr)}}))},On=(ao,si,Fi,mo,eo)=>{const es=Fn(ao,mo,eo);return es?es.dismiss(si,Fi):Promise.reject("overlay does not exist")},so=(ao,si)=>((ao,si)=>(void 0===si&&(si="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(ao.querySelectorAll(si)).filter(Fi=>Fi.overlayIndex>0)))(ao,si).filter(Fi=>!(ao=>ao.classList.contains("overlay-hidden"))(Fi)),Fn=(ao,si,Fi)=>{const mo=so(ao,si);return void 0===Fi?mo[mo.length-1]:mo.find(eo=>eo.id===Fi)},Ke=(ao=!1)=>{const Fi=zt(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Fi&&(ao?Fi.setAttribute("aria-hidden","true"):Fi.removeAttribute("aria-hidden"))},Ae=function(){var ao=(0,V.A)(function*(si,Fi,mo,eo,es){var Jo,or;if(si.presented)return;Ke(!0),document.body.classList.add(ft.B),Jr(si.el),si.presented=!0,si.willPresent.emit(),null===(Jo=si.willPresentShorthand)||void 0===Jo||Jo.emit();const ti=(0,qe.b)(si),cs=si.enterAnimation?si.enterAnimation:qe.c.get(Fi,"ios"===ti?mo:eo);(yield Yn(si,cs,si.el,es))&&(si.didPresent.emit(),null===(or=si.didPresentShorthand)||void 0===or||or.emit()),"ION-TOAST"!==si.el.tagName&&Ge(si.el),si.keyboardClose&&(null===document.activeElement||!si.el.contains(document.activeElement))&&si.el.focus(),si.el.removeAttribute("aria-hidden")});return function(Fi,mo,eo,es,Jo){return ao.apply(this,arguments)}}(),Ge=function(){var ao=(0,V.A)(function*(si){let Fi=document.activeElement;if(!Fi)return;const mo=null==Fi?void 0:Fi.shadowRoot;mo&&(Fi=mo.querySelector(Ut)||Fi),yield si.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&Fi.focus()});return function(Fi){return ao.apply(this,arguments)}}(),tt=function(){var ao=(0,V.A)(function*(si,Fi,mo,eo,es,Jo,or){var ti,cs;if(!si.presented)return!1;void 0!==se.d&&1===so(se.d).length&&(Ke(!1),document.body.classList.remove(ft.B)),si.presented=!1;try{si.el.style.setProperty("pointer-events","none"),si.willDismiss.emit({data:Fi,role:mo}),null===(ti=si.willDismissShorthand)||void 0===ti||ti.emit({data:Fi,role:mo});const Or=(0,qe.b)(si),Kr=si.leaveAnimation?si.leaveAnimation:qe.c.get(eo,"ios"===Or?es:Jo);mo!==Mi&&(yield Yn(si,Kr,si.el,or)),si.didDismiss.emit({data:Fi,role:mo}),null===(cs=si.didDismissShorthand)||void 0===cs||cs.emit({data:Fi,role:mo}),(un.get(si)||[]).forEach(Ho=>Ho.destroy()),un.delete(si),si.el.classList.add("overlay-hidden"),si.el.style.removeProperty("pointer-events"),void 0!==si.el.lastFocus&&(si.el.lastFocus=void 0)}catch(Or){console.error(Or)}return si.el.remove(),Li(),!0});return function(Fi,mo,eo,es,Jo,or,ti){return ao.apply(this,arguments)}}(),zt=ao=>ao.querySelector("ion-app")||ao.body,Yn=function(){var ao=(0,V.A)(function*(si,Fi,mo,eo){mo.classList.remove("overlay-hidden");const Jo=Fi(si.el,eo);(!si.animated||!qe.c.getBoolean("animated",!0))&&Jo.duration(0),si.keyboardClose&&Jo.beforeAddWrite(()=>{const ti=mo.ownerDocument.activeElement;null!=ti&&ti.matches("input,ion-input, ion-textarea")&&ti.blur()});const or=un.get(si)||[];return un.set(si,[...or,Jo]),yield Jo.play(),!0});return function(Fi,mo,eo,es){return ao.apply(this,arguments)}}(),cn=(ao,si)=>{let Fi;const mo=new Promise(eo=>Fi=eo);return _o(ao,si,eo=>{Fi(eo.detail)}),mo},_o=(ao,si,Fi)=>{const mo=eo=>{(0,ne.b)(ao,si,mo),Fi(eo)};(0,ne.a)(ao,si,mo)},to=ao=>"cancel"===ao||ao===zr,pr=ao=>ao(),jo=(ao,si)=>{if("function"==typeof ao)return qe.c.get("_zoneGate",pr)(()=>{try{return ao(si)}catch(mo){throw mo}})},zr="backdrop",Mi="gesture",rs=39,$i=ao=>{let Fi,si=!1;const mo=(0,Y.C)(),eo=(or=!1)=>{if(Fi&&!or)return{delegate:Fi,inline:si};const{el:ti,hasController:cs,delegate:Cs}=ao;return si=null!==ti.parentNode&&!cs,Fi=si?Cs||mo:Cs,{inline:si,delegate:Fi}};return{attachViewToDom:function(){var or=(0,V.A)(function*(ti){const{delegate:cs}=eo(!0);if(cs)return yield cs.attachViewToDom(ao.el,ti);const{hasController:Cs}=ao;if(Cs&&void 0!==ti)throw new Error("framework delegate is missing");return null});return function(cs){return or.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:or}=eo();or&&void 0!==ao.el&&or.removeViewFromDom(ao.el.parentElement,ao.el)}}},br=()=>{let ao;const si=()=>{ao&&(ao(),ao=void 0)};return{addClickListener:(mo,eo)=>{si();const es=void 0!==eo?document.getElementById(eo):null;es?ao=((or,ti)=>{const cs=()=>{ti.present()};return or.addEventListener("click",cs),()=>{or.removeEventListener("click",cs)}})(es,mo):(0,Xt.p)(`A trigger element with the ID "${eo}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,mo)},removeClickListener:si}},Jr=ao=>{var si;if(void 0===se.d)return;const Fi=so(se.d);for(let mo=Fi.length-1;mo>=0;mo--){const eo=Fi[mo],es=null!==(si=Fi[mo+1])&&void 0!==si?si:ao;(es.hasAttribute("aria-hidden")||"ION-TOAST"!==es.tagName)&&eo.setAttribute("aria-hidden","true")}},Li=()=>{if(void 0===se.d)return;const ao=so(se.d);for(let si=ao.length-1;si>=0;si--){const Fi=ao[si];if(Fi.removeAttribute("aria-hidden"),"ION-TOAST"!==Fi.tagName)break}},yi="ion-disable-focus-trap"},1288:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{H:()=>ht,b:()=>es,c:()=>xt,f:()=>$i,g:()=>qn,h:()=>xn,p:()=>Xs,r:()=>Qr});var V=_e(467);let ne,l,qe=!1,Y=!1;const It={},vt=Ye=>"object"==(Ye=typeof Ye)||"function"===Ye;function un(Ye){var Mt,Jt,Bn;return null!==(Bn=null===(Jt=null===(Mt=Ye.head)||void 0===Mt?void 0:Mt.querySelector('meta[name="csp-nonce"]'))||void 0===Jt?void 0:Jt.getAttribute("content"))&&void 0!==Bn?Bn:void 0}const xn=(Ye,Mt,...Jt)=>{let Bn=null,Lt=!1,Ie=!1;const ue=[],ae=Ue=>{for(let it=0;it<Ue.length;it++)Bn=Ue[it],Array.isArray(Bn)?ae(Bn):null!=Bn&&"boolean"!=typeof Bn&&((Lt="function"!=typeof Ye&&!vt(Bn))&&(Bn=String(Bn)),Lt&&Ie?ue[ue.length-1].$text$+=Bn:ue.push(Lt?on(null,Bn):Bn),Ie=Lt)};if(ae(Jt),Mt){const Ue=Mt.className||Mt.class;Ue&&(Mt.class="object"!=typeof Ue?Ue:Object.keys(Ue).filter(it=>Ue[it]).join(" "))}const we=on(Ye,null);return we.$attrs$=Mt,ue.length>0&&(we.$children$=ue),we},on=(Ye,Mt)=>({$flags$:0,$tag$:Ye,$text$:Mt,$elm$:null,$children$:null,$attrs$:null}),ht={},qn=Ye=>Kr(Ye).$hostElement$,xt=(Ye,Mt,Jt)=>{const Bn=qn(Ye);return{emit:Lt=>Ot(Bn,Mt,{bubbles:!!(4&Jt),composed:!!(2&Jt),cancelable:!!(1&Jt),detail:Lt})}},Ot=(Ye,Mt,Jt)=>{const Bn=Lr.ce(Mt,Jt);return Ye.dispatchEvent(Bn),Bn},vn=new WeakMap,Me=(Ye,Mt)=>"sc-"+Ye.$tagName$,pn=(Ye,Mt,Jt,Bn,Lt,Ie)=>{if(Jt!==Bn){let ue=Nr(Ye,Mt),ae=Mt.toLowerCase();if("class"===Mt){const we=Ye.classList,Ue=On(Jt),it=On(Bn);we.remove(...Ue.filter(qt=>qt&&!it.includes(qt))),we.add(...it.filter(qt=>qt&&!Ue.includes(qt)))}else if("style"===Mt){for(const we in Jt)(!Bn||null==Bn[we])&&(we.includes("-")?Ye.style.removeProperty(we):Ye.style[we]="");for(const we in Bn)(!Jt||Bn[we]!==Jt[we])&&(we.includes("-")?Ye.style.setProperty(we,Bn[we]):Ye.style[we]=Bn[we])}else if("ref"===Mt)Bn&&Bn(Ye);else if(ue||"o"!==Mt[0]||"n"!==Mt[1]){const we=vt(Bn);if((ue||we&&null!==Bn)&&!Lt)try{if(Ye.tagName.includes("-"))Ye[Mt]=Bn;else{const Ue=null==Bn?"":Bn;"list"===Mt?ue=!1:(null==Jt||Ye[Mt]!=Ue)&&(Ye[Mt]=Ue)}}catch{}null==Bn||!1===Bn?(!1!==Bn||""===Ye.getAttribute(Mt))&&Ye.removeAttribute(Mt):(!ue||4&Ie||Lt)&&!we&&Ye.setAttribute(Mt,Bn=!0===Bn?"":Bn)}else Mt="-"===Mt[2]?Mt.slice(3):Nr(ni,ae)?ae.slice(2):ae[2]+Mt.slice(3),Jt&&Lr.rel(Ye,Mt,Jt,!1),Bn&&Lr.ael(Ye,Mt,Bn,!1)}},Rt=/\s/,On=Ye=>Ye?Ye.split(Rt):[],Cn=(Ye,Mt,Jt,Bn)=>{const Lt=11===Mt.$elm$.nodeType&&Mt.$elm$.host?Mt.$elm$.host:Mt.$elm$,Ie=Ye&&Ye.$attrs$||It,ue=Mt.$attrs$||It;for(Bn in Ie)Bn in ue||pn(Lt,Bn,Ie[Bn],void 0,Jt,Mt.$flags$);for(Bn in ue)pn(Lt,Bn,Ie[Bn],ue[Bn],Jt,Mt.$flags$)},so=(Ye,Mt,Jt,Bn)=>{const Lt=Mt.$children$[Jt];let ue,ae,Ie=0;if(null!==Lt.$text$)ue=Lt.$elm$=as.createTextNode(Lt.$text$);else{if(qe||(qe="svg"===Lt.$tag$),ue=Lt.$elm$=as.createElementNS(qe?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Lt.$tag$),qe&&"foreignObject"===Lt.$tag$&&(qe=!1),Cn(null,Lt,qe),(Ye=>null!=Ye)(ne)&&ue["s-si"]!==ne&&ue.classList.add(ue["s-si"]=ne),Lt.$children$)for(Ie=0;Ie<Lt.$children$.length;++Ie)ae=so(Ye,Lt,Ie),ae&&ue.appendChild(ae);"svg"===Lt.$tag$?qe=!1:"foreignObject"===ue.tagName&&(qe=!0)}return ue},Fn=(Ye,Mt,Jt,Bn,Lt,Ie)=>{let ae,ue=Ye;for(ue.shadowRoot&&ue.tagName===l&&(ue=ue.shadowRoot);Lt<=Ie;++Lt)Bn[Lt]&&(ae=so(null,Jt,Lt),ae&&(Bn[Lt].$elm$=ae,ue.insertBefore(ae,Mt)))},Ke=(Ye,Mt,Jt)=>{for(let Bn=Mt;Bn<=Jt;++Bn){const Lt=Ye[Bn];if(Lt){const Ie=Lt.$elm$;zt(Lt),Ie&&Ie.remove()}}},Ge=(Ye,Mt)=>Ye.$tag$===Mt.$tag$,tt=(Ye,Mt)=>{const Jt=Mt.$elm$=Ye.$elm$,Bn=Ye.$children$,Lt=Mt.$children$,Ie=Mt.$tag$,ue=Mt.$text$;null===ue?(qe="svg"===Ie||"foreignObject"!==Ie&&qe,Cn(Ye,Mt,qe),null!==Bn&&null!==Lt?((Ye,Mt,Jt,Bn)=>{let En,Lt=0,Ie=0,ue=Mt.length-1,ae=Mt[0],we=Mt[ue],Ue=Bn.length-1,it=Bn[0],qt=Bn[Ue];for(;Lt<=ue&&Ie<=Ue;)null==ae?ae=Mt[++Lt]:null==we?we=Mt[--ue]:null==it?it=Bn[++Ie]:null==qt?qt=Bn[--Ue]:Ge(ae,it)?(tt(ae,it),ae=Mt[++Lt],it=Bn[++Ie]):Ge(we,qt)?(tt(we,qt),we=Mt[--ue],qt=Bn[--Ue]):Ge(ae,qt)?(tt(ae,qt),Ye.insertBefore(ae.$elm$,we.$elm$.nextSibling),ae=Mt[++Lt],qt=Bn[--Ue]):Ge(we,it)?(tt(we,it),Ye.insertBefore(we.$elm$,ae.$elm$),we=Mt[--ue],it=Bn[++Ie]):(En=so(Mt&&Mt[Ie],Jt,Ie),it=Bn[++Ie],En&&ae.$elm$.parentNode.insertBefore(En,ae.$elm$));Lt>ue?Fn(Ye,null==Bn[Ue+1]?null:Bn[Ue+1].$elm$,Jt,Bn,Ie,Ue):Ie>Ue&&Ke(Mt,Lt,ue)})(Jt,Bn,Mt,Lt):null!==Lt?(null!==Ye.$text$&&(Jt.textContent=""),Fn(Jt,null,Mt,Lt,0,Lt.length-1)):null!==Bn&&Ke(Bn,0,Bn.length-1),qe&&"svg"===Ie&&(qe=!1)):Ye.$text$!==ue&&(Jt.data=ue)},zt=Ye=>{Ye.$attrs$&&Ye.$attrs$.ref&&Ye.$attrs$.ref(null),Ye.$children$&&Ye.$children$.map(zt)},cn=(Ye,Mt)=>{Mt&&!Ye.$onRenderResolve$&&Mt["s-p"]&&Mt["s-p"].push(new Promise(Jt=>Ye.$onRenderResolve$=Jt))},_o=(Ye,Mt)=>{if(Ye.$flags$|=16,!(4&Ye.$flags$))return cn(Ye,Ye.$ancestorComponent$),mt(()=>to(Ye,Mt));Ye.$flags$|=512},to=(Ye,Mt)=>{const Bn=Ye.$lazyInstance$;return Mt&&(Ye.$flags$|=256,Ye.$queuedListeners$&&(Ye.$queuedListeners$.map(([Ie,ue])=>Jr(Bn,Ie,ue)),Ye.$queuedListeners$=void 0)),pr(void 0,()=>zr(Ye,Bn,Mt))},pr=(Ye,Mt)=>jo(Ye)?Ye.then(Mt):Mt(),jo=Ye=>Ye instanceof Promise||Ye&&Ye.then&&"function"==typeof Ye.then,zr=function(){var Ye=(0,V.A)(function*(Mt,Jt,Bn){var Lt;const Ie=Mt.$hostElement$,ae=Ie["s-rc"];Bn&&(Ye=>{const Mt=Ye.$cmpMeta$,Jt=Ye.$hostElement$,Bn=Mt.$flags$,Ie=((Ye,Mt,Jt,Bn)=>{var Lt;let Ie=Me(Mt);const ue=Gs.get(Ie);if(Ye=11===Ye.nodeType?Ye:as,ue)if("string"==typeof ue){let we,ae=vn.get(Ye=Ye.head||Ye);if(ae||vn.set(Ye,ae=new Set),!ae.has(Ie)){{we=as.createElement("style"),we.innerHTML=ue;const Ue=null!==(Lt=Lr.$nonce$)&&void 0!==Lt?Lt:un(as);null!=Ue&&we.setAttribute("nonce",Ue),Ye.insertBefore(we,Ye.querySelector("link"))}ae&&ae.add(Ie)}}else Ye.adoptedStyleSheets.includes(ue)||(Ye.adoptedStyleSheets=[...Ye.adoptedStyleSheets,ue]);return Ie})(Jt.shadowRoot?Jt.shadowRoot:Jt.getRootNode(),Mt);10&Bn&&(Jt["s-sc"]=Ie,Jt.classList.add(Ie+"-h"))})(Mt);Mi(Mt,Jt),ae&&(ae.map(Ue=>Ue()),Ie["s-rc"]=void 0);{const Ue=null!==(Lt=Ie["s-p"])&&void 0!==Lt?Lt:[],it=()=>rs(Mt);0===Ue.length?it():(Promise.all(Ue).then(it),Mt.$flags$|=4,Ue.length=0)}});return function(Jt,Bn,Lt){return Ye.apply(this,arguments)}}(),Mi=(Ye,Mt,Jt)=>{try{Mt=Mt.render(),Ye.$flags$&=-17,Ye.$flags$|=2,((Ye,Mt)=>{const Jt=Ye.$hostElement$,Bn=Ye.$vnode$||on(null,null),Lt=(Ye=>Ye&&Ye.$tag$===ht)(Mt)?Mt:xn(null,null,Mt);l=Jt.tagName,Lt.$tag$=null,Lt.$flags$|=4,Ye.$vnode$=Lt,Lt.$elm$=Bn.$elm$=Jt.shadowRoot||Jt,ne=Jt["s-sc"],tt(Bn,Lt)})(Ye,Mt)}catch(Bn){ir(Bn,Ye.$hostElement$)}return null},rs=Ye=>{const Jt=Ye.$hostElement$,Lt=Ye.$lazyInstance$,Ie=Ye.$ancestorComponent$;64&Ye.$flags$||(Ye.$flags$|=64,Li(Jt),Jr(Lt,"componentDidLoad"),Ye.$onReadyResolve$(Jt),Ie||br()),Ye.$onInstanceResolve$(Jt),Ye.$onRenderResolve$&&(Ye.$onRenderResolve$(),Ye.$onRenderResolve$=void 0),512&Ye.$flags$&&kt(()=>_o(Ye,!1)),Ye.$flags$&=-517},$i=Ye=>{{const Mt=Kr(Ye),Jt=Mt.$hostElement$.isConnected;return Jt&&2==(18&Mt.$flags$)&&_o(Mt,!1),Jt}},br=Ye=>{Li(as.documentElement),kt(()=>Ot(ni,"appload",{detail:{namespace:"ionicpwaelements"}}))},Jr=(Ye,Mt,Jt)=>{if(Ye&&Ye[Mt])try{return Ye[Mt](Jt)}catch(Bn){ir(Bn)}},Li=Ye=>Ye.classList.add("hydrated"),si=(Ye,Mt,Jt)=>{if(Mt.$members$){const Bn=Object.entries(Mt.$members$),Lt=Ye.prototype;if(Bn.map(([Ie,[ue]])=>{31&ue||2&Jt&&32&ue?Object.defineProperty(Lt,Ie,{get(){return((Ye,Mt)=>Kr(this).$instanceValues$.get(Mt))(0,Ie)},set(ae){((Ye,Mt,Jt,Bn)=>{const Lt=Kr(Ye),Ie=Lt.$instanceValues$.get(Mt),ue=Lt.$flags$,ae=Lt.$lazyInstance$;Jt=((Ye,Mt)=>null==Ye||vt(Ye)?Ye:4&Mt?"false"!==Ye&&(""===Ye||!!Ye):2&Mt?parseFloat(Ye):1&Mt?String(Ye):Ye)(Jt,Bn.$members$[Mt][0]);const we=Number.isNaN(Ie)&&Number.isNaN(Jt);(!(8&ue)||void 0===Ie)&&Jt!==Ie&&!we&&(Lt.$instanceValues$.set(Mt,Jt),ae&&2==(18&ue)&&_o(Lt,!1))})(this,Ie,ae,Mt)},configurable:!0,enumerable:!0}):1&Jt&&64&ue&&Object.defineProperty(Lt,Ie,{value(...ae){const we=Kr(this);return we.$onInstancePromise$.then(()=>we.$lazyInstance$[Ie](...ae))}})}),1&Jt){const Ie=new Map;Lt.attributeChangedCallback=function(ue,ae,we){Lr.jmp(()=>{const Ue=Ie.get(ue);if(this.hasOwnProperty(Ue))we=this[Ue],delete this[Ue];else if(Lt.hasOwnProperty(Ue)&&"number"==typeof this[Ue]&&this[Ue]==we)return;this[Ue]=(null!==we||"boolean"!=typeof this[Ue])&&we})},Ye.observedAttributes=Bn.filter(([ue,ae])=>15&ae[0]).map(([ue,ae])=>{const we=ae[1]||ue;return Ie.set(we,ue),we})}}return Ye},Fi=function(){var Ye=(0,V.A)(function*(Mt,Jt,Bn,Lt,Ie){if(!(32&Jt.$flags$)){Jt.$flags$|=32;{if((Ie=Dr(Bn)).then){const Ue=()=>{};Ie=yield Ie,Ue()}Ie.isProxied||(si(Ie,Bn,2),Ie.isProxied=!0);const we=()=>{};Jt.$flags$|=8;try{new Ie(Jt)}catch(Ue){ir(Ue)}Jt.$flags$&=-9,we()}if(Ie.style){let we=Ie.style;const Ue=Me(Bn);if(!Gs.has(Ue)){const it=()=>{};((Ye,Mt,Jt)=>{let Bn=Gs.get(Ye);vs&&Jt?(Bn=Bn||new CSSStyleSheet,"string"==typeof Bn?Bn=Mt:Bn.replaceSync(Mt)):Bn=Mt,Gs.set(Ye,Bn)})(Ue,we,!!(1&Bn.$flags$)),it()}}}const ue=Jt.$ancestorComponent$,ae=()=>_o(Jt,!0);ue&&ue["s-rc"]?ue["s-rc"].push(ae):ae()});return function(Jt,Bn,Lt,Ie,ue){return Ye.apply(this,arguments)}}(),es=(Ye,Mt={})=>{var Jt;const Lt=[],Ie=Mt.exclude||[],ue=ni.customElements,ae=as.head,we=ae.querySelector("meta[charset]"),Ue=as.createElement("style"),it=[];let qt,En=!0;Object.assign(Lr,Mt),Lr.$resourcesUrl$=new URL(Mt.resourcesUrl||"./",as.baseURI).href,Ye.map(dn=>{dn[1].map(Gn=>{const Bi={$flags$:Gn[0],$tagName$:Gn[1],$members$:Gn[2],$listeners$:Gn[3]};Bi.$members$=Gn[2],Bi.$listeners$=Gn[3];const Vi=Bi.$tagName$,Bo=class extends HTMLElement{constructor(rr){super(rr),Ho(rr=this,Bi),1&Bi.$flags$&&rr.attachShadow({mode:"open"})}connectedCallback(){qt&&(clearTimeout(qt),qt=null),En?it.push(this):Lr.jmp(()=>(Ye=>{if(!(1&Lr.$flags$)){const Mt=Kr(Ye),Jt=Mt.$cmpMeta$,Bn=()=>{};if(1&Mt.$flags$)Jo(Ye,Mt,Jt.$listeners$);else{Mt.$flags$|=1;{let Lt=Ye;for(;Lt=Lt.parentNode||Lt.host;)if(Lt["s-p"]){cn(Mt,Mt.$ancestorComponent$=Lt);break}}Jt.$members$&&Object.entries(Jt.$members$).map(([Lt,[Ie]])=>{if(31&Ie&&Ye.hasOwnProperty(Lt)){const ue=Ye[Lt];delete Ye[Lt],Ye[Lt]=ue}}),Fi(Ye,Mt,Jt)}Bn()}})(this))}disconnectedCallback(){Lr.jmp(()=>(Ye=>{if(!(1&Lr.$flags$)){const Mt=Kr(this),Jt=Mt.$lazyInstance$;Mt.$rmListeners$&&(Mt.$rmListeners$.map(Bn=>Bn()),Mt.$rmListeners$=void 0),Jr(Jt,"disconnectedCallback")}})())}componentOnReady(){return Kr(this).$onReadyPromise$}};Bi.$lazyBundleId$=dn[0],!Ie.includes(Vi)&&!ue.get(Vi)&&(Lt.push(Vi),ue.define(Vi,si(Bo,Bi,1)))})});{Ue.innerHTML=Lt+"{visibility:hidden}.hydrated{visibility:inherit}",Ue.setAttribute("data-styles","");const dn=null!==(Jt=Lr.$nonce$)&&void 0!==Jt?Jt:un(as);null!=dn&&Ue.setAttribute("nonce",dn),ae.insertBefore(Ue,we?we.nextSibling:ae.firstChild)}En=!1,it.length?it.map(dn=>dn.connectedCallback()):Lr.jmp(()=>qt=setTimeout(br,30))},Jo=(Ye,Mt,Jt,Bn)=>{Jt&&Jt.map(([Lt,Ie,ue])=>{const ae=ti(Ye,Lt),we=or(Mt,ue),Ue=cs(Lt);Lr.ael(ae,Ie,we,Ue),(Mt.$rmListeners$=Mt.$rmListeners$||[]).push(()=>Lr.rel(ae,Ie,we,Ue))})},or=(Ye,Mt)=>Jt=>{try{256&Ye.$flags$?Ye.$lazyInstance$[Mt](Jt):(Ye.$queuedListeners$=Ye.$queuedListeners$||[]).push([Mt,Jt])}catch(Bn){ir(Bn)}},ti=(Ye,Mt)=>16&Mt?as.body:Ye,cs=Ye=>!!(2&Ye),Or=new WeakMap,Kr=Ye=>Or.get(Ye),Qr=(Ye,Mt)=>Or.set(Mt.$lazyInstance$=Ye,Mt),Ho=(Ye,Mt)=>{const Jt={$flags$:0,$hostElement$:Ye,$cmpMeta$:Mt,$instanceValues$:new Map};return Jt.$onInstancePromise$=new Promise(Bn=>Jt.$onInstanceResolve$=Bn),Jt.$onReadyPromise$=new Promise(Bn=>Jt.$onReadyResolve$=Bn),Ye["s-p"]=[],Ye["s-rc"]=[],Jo(Ye,Jt,Mt.$listeners$),Or.set(Ye,Jt)},Nr=(Ye,Mt)=>Mt in Ye,ir=(Ye,Mt)=>(0,console.error)(Ye,Mt),_r=new Map,Dr=(Ye,Mt,Jt)=>{const Bn=Ye.$tagName$.replace(/-/g,"_"),Lt=Ye.$lazyBundleId$,Ie=_r.get(Lt);if(Ie)return Ie[Bn];if(!Jt||!BUILD.hotModuleReplacement){const ue=ae=>(_r.set(Lt,ae),ae[Bn]);switch(Lt){case"pwa-action-sheet":return _e.e(6301).then(_e.bind(_e,6301)).then(ue,ir);case"pwa-camera-modal":return _e.e(2982).then(_e.bind(_e,2982)).then(ue,ir);case"pwa-toast":return _e.e(3574).then(_e.bind(_e,3574)).then(ue,ir);case"pwa-camera-modal-instance":return _e.e(5640).then(_e.bind(_e,5640)).then(ue,ir);case"pwa-camera":return _e.e(6086).then(_e.bind(_e,6086)).then(ue,ir)}}return _e(5235)(`./${Lt}.entry.js`).then(ue=>(_r.set(Lt,ue),ue[Bn]),ir)},Gs=new Map,ni=typeof window<"u"?window:{},as=ni.document||{head:{}},Lr={$flags$:0,$resourcesUrl$:"",jmp:Ye=>Ye(),raf:Ye=>requestAnimationFrame(Ye),ael:(Ye,Mt,Jt,Bn)=>Ye.addEventListener(Mt,Jt,Bn),rel:(Ye,Mt,Jt,Bn)=>Ye.removeEventListener(Mt,Jt,Bn),ce:(Ye,Mt)=>new CustomEvent(Ye,Mt)},Xs=Ye=>Promise.resolve(Ye),vs=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Hr=[],Wi=[],ei=(Ye,Mt)=>Jt=>{Ye.push(Jt),Y||(Y=!0,Mt&&4&Lr.$flags$?kt(Xn):Lr.raf(Xn))},Pi=Ye=>{for(let Mt=0;Mt<Ye.length;Mt++)try{Ye[Mt](performance.now())}catch(Jt){ir(Jt)}Ye.length=0},Xn=()=>{Pi(Hr),Pi(Wi),(Y=Hr.length>0)&&Lr.raf(Xn)},kt=Ye=>Xs().then(Ye),mt=ei(Wi,!0)},1832:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{L:()=>V});const V=[{id:1,text:"Service des routes et mobilit\xe9",value:"service_des_routes_et_mobilite",description:"Responsable de l'entretien des routes et de la gestion des transports.",contactEmail:"routes.mobilite@city.ch",phoneNumber:"+41 22 123 45 67",uniqueCode:"CH-SRM-001"},{id:2,text:"Service de l'\xe9clairage public",value:"service_de_leclairage_public",description:"G\xe8re l'\xe9clairage public et assure que les rues sont bien \xe9clair\xe9es.",contactEmail:"eclairage.public@city.ch",phoneNumber:"+41 22 234 56 78",uniqueCode:"CH-SEP-002"},{id:3,text:"Service des eaux",value:"service_des_eaux",description:"Assure l'approvisionnement en eau potable et maintient les infrastructures d'eau.",contactEmail:"eaux@city.ch",phoneNumber:"+41 22 345 67 89",uniqueCode:"CH-SDE-003",created:!1},{id:4,text:"Service de la propret\xe9",value:"service_de_la_proprete",description:"Maintient la propret\xe9 des espaces publics.",contactEmail:"proprete@city.ch",phoneNumber:"+41 22 456 78 90",uniqueCode:"CH-SDP-004",created:!1},{id:5,text:"Service des espaces verts",value:"service_des_espaces_verts",description:"Responsable de l'entretien des parcs et des espaces verts.",contactEmail:"espaces.verts@city.ch",phoneNumber:"+41 22 567 89 01",uniqueCode:"CH-SEV-005",created:!1},{id:6,text:"Police municipale",value:"police_municipale",description:"D\xe9partement de police local assurant la s\xe9curit\xe9 et l'ordre public.",contactEmail:"police.municipale@city.ch",phoneNumber:"+41 22 678 90 12",uniqueCode:"CH-PM-006",created:!1},{id:7,text:"Service de la mobilit\xe9",value:"service_de_la_mobilite",description:"G\xe8re la mobilit\xe9 urbaine et les transports publics.",contactEmail:"mobilite@city.ch",phoneNumber:"+41 22 789 01 23",uniqueCode:"CH-SDM-007",created:!1},{id:8,text:"Police cantonale",value:"police_cantonale",description:"Police responsable de la s\xe9curit\xe9 au niveau cantonal.",contactEmail:"police.cantonale@city.ch",phoneNumber:"+41 22 890 12 34",uniqueCode:"CH-PC-008",created:!1},{id:9,text:"Service client\xe8le Migros",value:"service_clientele_migros",description:"Service de soutien et d'assistance aux clients de Migros.",contactEmail:"clientele.migros@migros.ch",phoneNumber:"+41 22 901 23 45",uniqueCode:"CH-SCM-009",created:!1},{id:10,text:"Services de secours (144)",value:"services_de_secours_144",description:"Services d'urgence pour les secours m\xe9dicaux.",contactEmail:"secours.144@city.ch",phoneNumber:"+41 22 012 34 56",uniqueCode:"CH-SDS-010",created:!1},{id:11,text:"Service d'incendie et de secours (SIS)",value:"service_d_incendie_et_de_secours_sis",description:"Interventions en cas d'incendie et autres situations d'urgence.",contactEmail:"incendie.secours@city.ch",phoneNumber:"+41 22 123 45 67",uniqueCode:"CH-SIS-011",created:!1},{id:12,text:"Service v\xe9t\xe9rinaire cantonal",value:"service_veterinaire_cantonal",description:"Supervise la sant\xe9 et le bien-\xeatre des animaux au niveau cantonal.",contactEmail:"veterinaire.cantonal@city.ch",phoneNumber:"+41 22 234 56 78",uniqueCode:"CH-SVC-012",created:!1},{id:13,text:"Service social",value:"service_social",description:"Fournit des services de soutien et d'assistance sociale.",contactEmail:"social@city.ch",phoneNumber:"+41 22 345 67 89",uniqueCode:"CH-SS-013",created:!1},{id:14,text:"Service des travaux publics",value:"service_des_travaux_publics",description:"G\xe8re les infrastructures et les travaux publics.",contactEmail:"travaux.publics@city.ch",phoneNumber:"+41 22 456 78 90",uniqueCode:"CH-STP-014",created:!1},{id:15,text:"Transport public de Gen\xe8ve",value:"transport_public_de_geneve",description:"G\xe8re les transports publics de Gen\xe8ve.",contactEmail:"transport.geneve@city.ch",phoneNumber:"+41 22 567 89 01",uniqueCode:"CH-TPG-015",created:!1},{id:16,text:"Coop",value:"coop",description:"Service client\xe8le de Coop.",contactEmail:"clientele@coop.ch",phoneNumber:"+41 22 678 90 12",uniqueCode:"CH-COOP-016",created:!1},{id:17,text:"Poste Suisse",value:"poste_suisse",description:"Service postal suisse.",contactEmail:"contact@poste.ch",phoneNumber:"+41 22 789 01 23",uniqueCode:"CH-PS-017",created:!1},{id:18,text:"H\xf4pitaux Universitaires de Gen\xe8ve (HUG)",value:"hopitaux_universitaires_de_geneve",description:"H\xf4pitaux universitaires offrant des soins m\xe9dicaux avanc\xe9s.",contactEmail:"contact@hug.ch",phoneNumber:"+41 22 890 12 34",uniqueCode:"CH-HUG-018",created:!1},{id:19,text:"Protection Civile",value:"protection_civile",description:"Services de protection civile pour les situations d'urgence.",contactEmail:"protection.civile@city.ch",phoneNumber:"+41 22 901 23 45",uniqueCode:"CH-PC-019",created:!1},{id:20,text:"Ambulances Priv\xe9es de Gen\xe8ve",value:"ambulances_privees_de_geneve",description:"Services d'ambulance priv\xe9e \xe0 Gen\xe8ve.",contactEmail:"ambulances.privees@city.ch",phoneNumber:"+41 22 012 34 56",uniqueCode:"CH-APG-020",created:!1},{id:21,text:"Service des pompiers",value:"service_des_pompiers",description:"Service de lutte contre les incendies et interventions d'urgence.",contactEmail:"pompiers@city.ch",phoneNumber:"+41 22 123 45 67",uniqueCode:"CH-SDP-021",created:!1},{id:22,text:"Pro Infirmis",value:"pro_infirmis",description:"Organisation offrant des services aux personnes handicap\xe9es.",contactEmail:"info@proinfirmis.ch",phoneNumber:"+41 22 234 56 78",uniqueCode:"CH-PI-022",created:!1},{id:23,text:"Secours d'hiver",value:"secours_d_hiver",description:"Organisation d'aide sociale pour les p\xe9riodes hivernales.",contactEmail:"contact@secoursdhiver.ch",phoneNumber:"+41 22 345 67 89",uniqueCode:"CH-SDH-023",created:!1},{id:24,text:"Soci\xe9t\xe9 de secours mutuels",value:"societe_de_secours_mutuels",description:"Organisation d'entraide et de soutien mutuel.",contactEmail:"secours.mutuel@city.ch",phoneNumber:"+41 22 456 78 90",uniqueCode:"CH-SSM-024",created:!1},{id:25,text:"Fondation Partage",value:"fondation_partage",description:"Fondation offrant des services de distribution alimentaire et de soutien social.",contactEmail:"info@fondationpartage.ch",phoneNumber:"+41 22 567 89 01",uniqueCode:"CH-FP-025",created:!1},{id:26,text:"signaleur benevole",value:"signaleur_privee",description:"signaleurs benevoles engag\xe9e autours de chez sois",contactEmail:"",phoneNumber:"",uniqueCode:"CH-00-000",created:!1}]},4796:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{u:()=>qe});var V=_e(467),se=_e(3953),ne=_e(2802),l=_e(5621);let qe=(()=>{var Y;class ft{constructor(Ut){this.auth=Ut,this.userSignal=(0,se.vPA)(null),this.auth.setPersistence(ne.F0).then(()=>{console.log("Persistance de l'authentification configur\xe9e sur le stockage local.")}).catch(It=>{console.error("Erreur lors de la configuration de la persistance de l'authentification:",It)})}get user(){return this.userSignal.asReadonly()}signInAnonymously(){var Ut=this;return(0,V.A)(function*(){try{const C=(yield(0,l.zK)(Ut.auth)).user;return Ut.userSignal.set(C),C}catch(It){return console.error("Erreur lors de la connexion anonyme:",It),null}})()}getCurrentUser(){return this.auth.currentUser}register(Ut,It){var C=this;return(0,V.A)(function*(){try{const Ht=(yield(0,l.eJ)(C.auth,Ut,It)).user;return C.userSignal.set(Ht),Ht}catch(At){throw At}})()}login(Ut,It){var C=this;return(0,V.A)(function*(){try{const Ht=(yield(0,l.x9)(C.auth,Ut,It)).user;return C.userSignal.set(Ht),Ht}catch(At){return"auth/wrong-password"===At.code?console.error("Mot de passe incorrect"):"auth/user-not-found"===At.code?console.error("Utilisateur non trouv\xe9"):console.error("Erreur lors de la connexion:",At.message),null}})()}logout(){var Ut=this;return(0,V.A)(function*(){yield(0,ne.CI)(Ut.auth),Ut.userSignal.set(null),yield Ut.signInAnonymously()})()}resetPassword(Ut){var It=this;return(0,V.A)(function*(){try{yield(0,l.J1)(It.auth,Ut),console.log("Email de r\xe9initialisation de mot de passe envoy\xe9.")}catch(C){throw console.error("Erreur lors de l'envoi de l'email de r\xe9initialisation de mot de passe:",C),C}})()}getUserFromLocalStorage(){const It=Object.keys(localStorage).find(C=>C.startsWith("firebase:authUser:"));if(It){const C=localStorage.getItem(It);if(C){const At=JSON.parse(C);return this.userSignal.set(At),At}}return null}checkIfUserExists(Ut){var It=this;return(0,V.A)(function*(){try{return(yield(0,l.Wm)(It.auth,Ut)).length>0}catch(C){return console.error("Erreur lors de la v\xe9rification de l'utilisateur:",C),!1}})()}}return(Y=ft).\u0275fac=function(Ut){return new(Ut||Y)(se.KVO(l.Nj))},Y.\u0275prov=se.jDH({token:Y,factory:Y.\u0275fac,providedIn:"root"}),ft})()},1730:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{W:()=>Ut});var V=_e(467),se=_e(3953),ne=_e(8455),l=_e(5558),qe=_e(7673),Y=_e(9967),ft=_e(3273),Xt=_e(4796);let Ut=(()=>{var It;class C{constructor(){this.firestore=(0,se.WQX)(Y._7),this.destroRef=(0,se.WQX)(se.abz),this.authService=(0,se.WQX)(Xt.u),this.db=(0,ft.aU)(),this.userId=(0,se.vPA)(""),this.signalementsSignal=(0,se.vPA)([])}detectChanges(){throw new Error("Method not implemented.")}get signalements(){return this.signalementsSignal.asReadonly()}addSignalement(Ht){var vt=this;return(0,V.A)(function*(){const un=(0,Y.rJ)(vt.firestore,"signalements"),xn=(0,ft.H9)(un);return Ht.id=xn.id,(0,ft.BN)(xn,Ht)})()}addConfirmation(Ht,vt){var un=this;return(0,V.A)(function*(){const xn=(0,ft.H9)(un.firestore,`signalements/${Ht}`),on=yield(0,ft.x7)(xn);if(!on.exists())throw console.error("Signalement does not exist."),new Error("Signalement does not exist.");{const ht=on.data();ht.confirmedByUsers.includes(vt)||(ht.confirmedByUsers.push(vt),yield(0,ft.BN)(xn,ht))}})()}deleteSignalement(Ht,vt){var un=this;return(0,V.A)(function*(){const xn=(0,ft.H9)(un.firestore,`signalements/${Ht}`),on=yield(0,ft.x7)(xn);if(!on.exists())throw console.error("No such document!"),new Error("No such document!");{var ht;const Jn=on.data();if(Jn.id!==Ht||!Jn.recipient.some(An=>vt.includes(An))||null!==(ht=un.authService.userSignal())&&void 0!==ht&&ht.isAnonymous)throw new Error("User not authorized to delete this document.");yield(0,ft.kd)(xn),console.log("Document successfully deleted!")}})()}updateSignalementStatus(Ht,vt){var un=this;return(0,V.A)(function*(){const xn=(0,ft.H9)(un.firestore,`signalements/${Ht}`),on=yield(0,ft.x7)(xn);if(!on.exists())throw new Error("No such document!");{var ht;const Jn=on.data();if(console.log("attention this is sginalement :",Jn.id),console.log("attention this is selected!! :",Ht),console.log("attention ce ci est destinataire :",vt),Jn.id!==Ht||!Jn.recipient.some(An=>vt.includes(An))||null!==(ht=un.authService.userSignal())&&void 0!==ht&&ht.isAnonymous)throw new Error("seulement les diestinarie sont autoris\xe9 a changer le statut  cette annonce");Jn.status="R\xe9solu",yield(0,ft.BN)(xn,Jn),console.log('Signalement status updated to "R\xe9solu".')}})()}fetchSignalements(){var Ht;const vt=this.authService.userSignal,un=null===(Ht=vt())||void 0===Ht?void 0:Ht.isAnonymous,xn=(0,Y.rJ)(this.firestore,"signalements");if(un)return(0,Y.xs)(xn,{idField:"id"});{var on;const ht=(0,ft.H9)(this.firestore,"users",null===(on=vt())||void 0===on?void 0:on.uid);return(0,ne.H)((0,ft.x7)(ht)).pipe((0,l.n)(Jn=>{if(Jn.exists()){const An=Jn.data(),qn=An.categorie;console.log("userData",An),console.log("userCategory",qn);const xt=(0,ft.P)(xn,(0,ft._M)("recipient","array-contains",qn));return(0,Y.xs)(xt,{idField:"id"})}return console.error("Utilisateur non trouv\xe9 dans la collection users."),(0,qe.of)([])}))}}loadSignalements(){return new Promise((Ht,vt)=>{const un=this.authService.userSignal(),xn=null==un?void 0:un.isAnonymous,on=(0,Y.rJ)(this.firestore,"signalements");if(xn){const ht=(0,Y.xs)(on,{idField:"id"}).subscribe({next:Jn=>{this.signalementsSignal.set(Jn),Ht(Jn),ht.unsubscribe()},error:Jn=>vt(Jn)})}else{const ht=(0,ft.H9)(this.firestore,"users",null==un?void 0:un.uid);(0,ft.x7)(ht).then(Jn=>{if(Jn.exists()){const qn=Jn.data().categorie,xt=(0,ft.P)(on,(0,ft._M)("recipient","array-contains",qn)),Ot=(0,Y.xs)(xt,{idField:"id"}).subscribe({next:vn=>{this.signalementsSignal.set(vn),Ht(vn),Ot.unsubscribe()},error:vn=>vt(vn)})}else vt(new Error("User data not found"))})}})}getSignalementById(Ht){const vt=(0,ft.H9)(this.firestore,`signalements/${Ht}`);return(0,Y.Bg)(vt,{idField:"id"})}}return(It=C).\u0275fac=function(Ht){return new(Ht||It)},It.\u0275prov=se.jDH({token:It,factory:It.\u0275fac,providedIn:"root"}),C})()},1016:(Go,Kn,_e)=>{"use strict";var V=_e(345),se=_e(8573),ne=_e(8880),l=_e(2700),qe=_e(1288),Xt=_e(7440),Ut=_e(5079),It=_e(5873),C=_e(3953);let At=(()=>{var y;class h{ngOnInit(){}constructor(){(0,Ut.a)({mapOutline:It.dG8,listCircleOutline:It.XjR})}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signalements"]],standalone:!0,features:[C.aNF],decls:12,vars:0,consts:[["value","all"],["value","favorites","routerLink","/signalements/carte"],["name","map-outline"],["value","all","routerLink","/signalements/liste"],["name","list-circle-outline"]],template:function(I,F){1&I&&(C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-segment",0)(3,"ion-segment-button",1)(4,"ion-label"),C.EFF(5,"carte"),C.k0s(),C.nrm(6,"ion-icon",2),C.k0s(),C.j41(7,"ion-segment-button",3)(8,"ion-label"),C.EFF(9,"liste "),C.k0s(),C.nrm(10,"ion-icon",4),C.k0s()()()(),C.nrm(11,"ion-router-outlet"))},dependencies:[l.iq,l.Rg,l.he,l.ai,l.eP,l.Gp,l.eU,se.Wk]}),h})();var Ht=_e(467),vt=_e(177);const un=y=>["../",y];function xn(y,h){if(1&y&&(C.j41(0,"swiper-slide",2),C.nrm(1,"img",3),C.k0s()),2&y){const A=h.$implicit,I=C.XpG();C.R7$(),C.Y8G("alt",I.signalementFenetre().title)("src",A,C.B4B)}}let on=(()=>{var y;class h{constructor(){this.signalementFenetre=C.hFB.required(),(0,Ut.a)({locationOutline:It.UN$})}ngOnInit(){}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signalement-large"]],inputs:{signalementFenetre:[1,"signalementFenetre"]},standalone:!0,features:[C.aNF],decls:10,vars:10,consts:[[3,"routerLink"],[3,"loop","pagination"],[2,"overflow","hidden","height","200px"],[2,"height","100%","width","100%","object-fit","cover",3,"alt","src"]],template:function(I,F){1&I&&(C.j41(0,"ion-card",0)(1,"swiper-container",1),C.Z7z(2,xn,2,2,"swiper-slide",2,C.fX1),C.k0s(),C.j41(4,"ion-card-header")(5,"ion-card-title"),C.EFF(6),C.k0s(),C.j41(7,"ion-card-subtitle"),C.EFF(8),C.nI1(9,"date"),C.k0s()()()),2&I&&(C.Y8G("routerLink",C.eq3(8,un,F.signalementFenetre().id)),C.R7$(),C.Y8G("loop",!0)("pagination",!0),C.R7$(),C.Dyx(F.signalementFenetre().images),C.R7$(4),C.JRh(F.signalementFenetre().title),C.R7$(2),C.JRh(C.i5U(9,5,F.signalementFenetre().date,"full")))},dependencies:[l.HW,l.ME,l.tN,l.b_,se.Wk,vt.vh],styles:["swiper-container[_ngcontent-%COMP%]{width:100%;height:100%}swiper-slide[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.location-icon[_ngcontent-%COMP%]{color:green;font-size:1rem}ion-card[_ngcontent-%COMP%]{cursor:pointer}"]}),h})(),ht=(()=>{var y;class h{constructor(){this.signalement=C.hFB.required(),this.selected=C.hFB.required(),this.select=(0,C.CGW)()}onSelectSignalement(){this.select.emit(this.signalement().id)}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signalement-small"]],inputs:{signalement:[1,"signalement"],selected:[1,"selected"]},outputs:{select:"select"},standalone:!0,features:[C.aNF],decls:11,vars:11,consts:[[3,"click"],["slot","start"],[3,"src","alt"]],template:function(I,F){1&I&&(C.j41(0,"ion-item",0),C.bIt("click",function(){return F.onSelectSignalement()}),C.j41(1,"ion-thumbnail",1),C.nrm(2,"img",2),C.k0s(),C.j41(3,"ion-label")(4,"h3"),C.EFF(5),C.k0s(),C.j41(6,"p"),C.EFF(7),C.k0s(),C.j41(8,"p"),C.EFF(9),C.nI1(10,"date"),C.k0s()()()),2&I&&(C.AVh("active",F.selected()),C.R7$(2),C.Y8G("src",F.signalement().images[0],C.B4B)("alt",F.signalement().title),C.R7$(3),C.JRh(F.signalement().title),C.R7$(2),C.JRh(F.signalement().location),C.R7$(2),C.Lme("",C.i5U(10,8,F.signalement().date,"full")," |",F.signalement().status,""))},dependencies:[l.he,l.uz,l.Zx,vt.vh],styles:["ion-item[_ngcontent-%COMP%]{cursor:pointer;border:solid 2px transparent;transition:border .3s ease-in-out}.active[_ngcontent-%COMP%]{border:solid 2px grey}"]}),h})();var Jn=_e(1730);const An=(y,h)=>h.id;function qn(y,h){1&y&&(C.j41(0,"ion-card")(1,"div",2)(2,"h1",3),C.EFF(3,"Chargement des signalements en cours..."),C.k0s()()())}function xt(y,h){if(1&y&&(C.j41(0,"ion-card")(1,"div",2)(2,"h1",3),C.EFF(3),C.k0s()()()),2&y){const A=C.XpG();C.R7$(3),C.SpI(" Une erreur s'est produite, veuillez r\xe9essayer plus tard... ",A.error()," ")}}function Ot(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-card",1)(1,"ion-item",4)(2,"ion-select",5,0),C.bIt("ionChange",function(){C.eBV(A);const F=C.sdS(3),K=C.XpG();return C.Njj(K.onChangeSignalementsFilter(F.value))}),C.j41(4,"ion-select-option",6),C.EFF(5,"Tous"),C.k0s(),C.j41(6,"ion-select-option",7),C.EFF(7,"Statut: En cours"),C.k0s(),C.j41(8,"ion-select-option",8),C.EFF(9,"Statut: R\xe9solus"),C.k0s(),C.j41(10,"ion-select-option",9),C.EFF(11,"Le plus confirm\xe9s"),C.k0s(),C.j41(12,"ion-select-option",10),C.EFF(13,"Les plus r\xe9centes"),C.k0s(),C.j41(14,"ion-select-option",11),C.EFF(15,"Les plus anciennes"),C.k0s()()(),C.j41(16,"div",2)(17,"h1",3),C.EFF(18,"Aucun signalement \xe0 afficher"),C.k0s()()()}}function vn(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-list")(1,"app-signalement-small",14),C.bIt("select",function(F){C.eBV(A);const K=C.XpG(2);return C.Njj(K.onSelect(F))}),C.k0s()()}if(2&y){const A=h.$implicit,I=C.XpG(2);C.R7$(),C.Y8G("signalement",A)("selected",I.selectedSignalement().id===A.id)}}function Pn(y,h){1&y&&(C.j41(0,"p"),C.EFF(1,"Aucun signalement pour le moment..."),C.k0s())}function ki(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-card",12),C.nrm(1,"app-signalement-large",13),C.k0s(),C.j41(2,"ion-item")(3,"ion-select",5,0),C.bIt("ionChange",function(){C.eBV(A);const F=C.sdS(4),K=C.XpG();return C.Njj(K.onChangeSignalementsFilter(F.value))}),C.j41(5,"ion-select-option",6),C.EFF(6,"Tous"),C.k0s(),C.j41(7,"ion-select-option",7),C.EFF(8,"Statut: En cours"),C.k0s(),C.j41(9,"ion-select-option",8),C.EFF(10,"Statut: R\xe9solus"),C.k0s(),C.j41(11,"ion-select-option",9),C.EFF(12,"Le plus confirm\xe9s"),C.k0s(),C.j41(13,"ion-select-option",10),C.EFF(14,"Les plus r\xe9centes"),C.k0s(),C.j41(15,"ion-select-option",11),C.EFF(16,"Les plus anciennes"),C.k0s()()(),C.j41(17,"ion-content"),C.Z7z(18,vn,2,2,"ion-list",null,An,!1,Pn,2,0,"p"),C.k0s()}if(2&y){const A=C.XpG();C.R7$(),C.Y8G("signalementFenetre",A.selectedSignalement()),C.R7$(17),C.Dyx(A.signalements())}}let Ct=(()=>{var y;class h{onSelect(I){var F;this.selectedSignalement.set(null===(F=this.allSignalements())||void 0===F?void 0:F.find(K=>K.id===I))}onChangeSignalementsFilter(I){this.selectedFilter.set(I)}ngOnInit(){var I=this;return(0,Ht.A)(function*(){console.log("ngOnInit called"),I.isFetching.set(!0);try{const F=yield I.signalementsService.loadSignalements();I.signalementsService.signalementsSignal.set(F),I.isFetching.set(!1),I.selectedSignalement.set(F[0])}catch(F){console.log("Error loading data",F),I.error.set("erreur lors du chargement des signalement"),I.isFetching.set(!1)}})()}constructor(){this.destroyRef=(0,C.WQX)(C.abz),this.signalementsService=(0,C.WQX)(Jn.W),this.selectedFilter=(0,C.vPA)("all"),this.allSignalements=this.signalementsService.signalementsSignal,this.isFetching=(0,C.vPA)(!1),this.error=(0,C.vPA)(""),this.selectedSignalement=(0,C.vPA)({}),this.signalements=(0,C.EWP)(()=>{switch(console.log("Calculating filtered signalements"),this.selectedFilter()){case"inProgress":return this.allSignalements().filter(I=>"En cours"===I.status);case"resolved":return this.allSignalements().filter(I=>"R\xe9solu"===I.status);case"mostConfirmed":return this.allSignalements().sort((I,F)=>F.confirmedByUsers.length-I.confirmedByUsers.length);case"mostRecent":return this.allSignalements().sort((I,F)=>new Date(F.date).getTime()-new Date(I.date).getTime());case"oldest":return this.allSignalements().sort((I,F)=>new Date(I.date).getTime()-new Date(F.date).getTime());default:return this.allSignalements()}}),console.log("constructor called")}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-liste"]],standalone:!0,features:[C.aNF],decls:4,vars:1,consts:[["filter",""],[2,"position","relative"],[2,"height","100vh","width","100%","display","flex","justify-content","center","align-items","center"],[2,"text-align","center"],[2,"position","absolute","top","4rem","width","100%"],["aria-label","Recherches","interface","action-sheet","placeholder","Filtrer les signalements",3,"ionChange"],["value","all"],["value","inProgress"],["value","resolved"],["value","mostConfirmed"],["value","mostRecent"],["value","oldest"],[2,"margin-top","5rem"],[3,"signalementFenetre"],[3,"select","signalement","selected"]],template:function(I,F){1&I&&C.DNE(0,qn,4,0,"ion-card")(1,xt,4,1,"ion-card")(2,Ot,19,0,"ion-card",1)(3,ki,21,2),2&I&&C.vxM(F.isFetching()?0:F.error()?1:0===F.signalements().length?2:3)},dependencies:[l.b_,l.nf,l.uz,l.W9,on,ht,l.Nm,l.Ip]}),h})();var Me=_e(9842),pn=_e(4341),On=(_e(1635),_e(3726)),Ge=(_e(9986),_e(1331),_e(9856),_e(361),_e(8607),_e(4921)),zt=(_e(6073),_e(1070));_e(8476),_e(8393),_e(1970),_e(8669);const lu={provide:pn.cz,useExisting:(0,C.Rfq)(()=>Eo),multi:!0};let Eo=(()=>{var y;class h extends pn.zX{}return y=h,(0,Me.A)(h,"\u0275fac",(()=>{let A;return function(F){return(A||(A=C.xGo(y)))(F||y)}})()),(0,Me.A)(h,"\u0275dir",C.FsC({type:y,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(I,F){2&I&&C.BMQ("max",F._enabled?F.max:null)},features:[C.Jv_([lu]),C.Vt3]})),h})();const Oc={provide:pn.cz,useExisting:(0,C.Rfq)(()=>Lc),multi:!0};let Lc=(()=>{var y;class h extends pn.VZ{}return y=h,(0,Me.A)(h,"\u0275fac",(()=>{let A;return function(F){return(A||(A=C.xGo(y)))(F||y)}})()),(0,Me.A)(h,"\u0275dir",C.FsC({type:y,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(I,F){2&I&&C.BMQ("min",F._enabled?F.min:null)},features:[C.Jv_([Oc]),C.Vt3]})),h})(),Nn=(()=>{var y;class h extends ne.Kb{constructor(){super(zt.l)}}return y=h,(0,Me.A)(h,"\u0275fac",function(I){return new(I||y)}),(0,Me.A)(h,"\u0275prov",C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})),h})(),zn=(()=>{var y;class h extends ne.Kb{constructor(){super(zt.m),(0,Me.A)(this,"angularDelegate",(0,C.WQX)(ne.Yq)),(0,Me.A)(this,"injector",(0,C.WQX)(C.zZn)),(0,Me.A)(this,"environmentInjector",(0,C.WQX)(C.uvJ))}create(I){return super.create({...I,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return y=h,(0,Me.A)(h,"\u0275fac",function(I){return new(I||y)}),(0,Me.A)(h,"\u0275prov",C.jDH({token:y,factory:y.\u0275fac})),h})(),yo=(()=>{var y;class h extends ne.Kb{constructor(){super(zt.t)}}return y=h,(0,Me.A)(h,"\u0275fac",function(I){return new(I||y)}),(0,Me.A)(h,"\u0275prov",C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})),h})();var Er=_e(1247),Wr=_e.n(Er),Ts=_e(5083);const ca=(0,Ts.F3)("Geolocation",{web:()=>_e.e(2920).then(_e.bind(_e,2920)).then(y=>new y.GeolocationWeb)});let zs=(()=>{var y;class h{getCurrentPosition(){var I=this;return(0,Ht.A)(function*(){try{if((0,Ge.a)("hybrid")){let F=yield ca.checkPermissions();if("granted"!==F.location&&(F=yield ca.requestPermissions()),"granted"===F.location){const K=yield ca.getCurrentPosition();return{latitude:K.coords.latitude,longitude:K.coords.longitude}}return console.log("Location permission not granted"),null}return I.getCurrentPositionWeb()}catch(F){return console.error("Error getting location",F),null}})()}getCurrentPositionWeb(){return new Promise((I,F)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(K=>{I({latitude:K.coords.latitude,longitude:K.coords.longitude})},K=>{console.error("Error getting location",K),F(null)}):(console.error("Geolocation is not supported by this browser."),F(null))})}calculateDistance(I,F,K,Te){const ze=this.deg2rad(K-I),ut=this.deg2rad(Te-F),nt=Math.sin(ze/2)*Math.sin(ze/2)+Math.cos(this.deg2rad(I))*Math.cos(this.deg2rad(K))*Math.sin(ut/2)*Math.sin(ut/2);return 2*Math.atan2(Math.sqrt(nt),Math.sqrt(1-nt))*6371}deg2rad(I){return I*(Math.PI/180)}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})();const Fr=()=>[0,.6];function ts(y,h){if(1&y&&(C.j41(0,"swiper-slide",11),C.nrm(1,"img",12),C.k0s()),2&y){let A;const I=h.$implicit,F=C.XpG(2);C.R7$(),C.Y8G("alt",null==(A=F.selectedSignalement())?null:A.title)("src",I,C.B4B)}}function aa(y,h){if(1&y&&(C.j41(0,"ion-card",1)(1,"swiper-container",10),C.Z7z(2,ts,2,2,"swiper-slide",11,C.fX1),C.k0s(),C.j41(4,"ion-card-header")(5,"ion-card-title"),C.EFF(6),C.k0s(),C.j41(7,"ion-card-subtitle"),C.EFF(8),C.nI1(9,"date"),C.k0s()(),C.j41(10,"ion-card-content"),C.EFF(11),C.k0s()()),2&y){let A,I,F,K;const Te=C.XpG();C.R7$(),C.Y8G("loop",!0)("pagination",!0),C.R7$(),C.Dyx(null==(A=Te.selectedSignalement())?null:A.images),C.R7$(4),C.JRh(null==(I=Te.selectedSignalement())?null:I.title),C.R7$(2),C.JRh(C.i5U(9,5,null==(F=Te.selectedSignalement())?null:F.date,"full")),C.R7$(3),C.SpI(" ",null==(K=Te.selectedSignalement())?null:K.content," ")}}let Hc=(()=>{var y;class h{constructor(){this.locationService=(0,C.WQX)(zs),this.signalementsService=(0,C.WQX)(Jn.W),this.selectedFilter=(0,C.vPA)("all"),this.selectedSignalement=(0,C.vPA)(null),this.modalController=(0,C.WQX)(zn),this.router=(0,C.WQX)(se.Ix),this.allSignalements=this.signalementsService.signalementsSignal,this.markers=[],this.filteredSignalements=(0,C.EWP)(()=>{var I;const F=this.selectedFilter(),K=this.allSignalements()||[],Te=null===(I=this.map)||void 0===I?void 0:I.getCenter();return Te?K.filter(ze=>"inProgress"===F?"En cours"===ze.status:"resolved"!==F||"R\xe9solu"===ze.status).filter(ze=>!!ze.coordinates&&this.locationService.calculateDistance(Te.lat,Te.lng,ze.coordinates.lat,ze.coordinates.lng)<=30):[]})}ngAfterViewInit(){var I=this;return(0,Ht.A)(function*(){Wr().accessToken="pk.eyJ1IjoiZHpmdWxsc3RhY2tkZXYiLCJhIjoiY2x2eWJkejkzMjVodTJrbnlvaGs2c2Y0ZyJ9.IVAMRDDapDnAT7KWCYk4mA";const F=yield I.locationService.getCurrentPosition();F?(I.map=new(Wr().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[F.longitude,F.latitude],zoom:10}),I.map.on("load",(0,Ht.A)(function*(){I.map.addSource("user-location",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[F.longitude,F.latitude]},properties:{}}}),I.map.addLayer({id:"user-location-circle",type:"circle",source:"user-location",paint:{"circle-radius":10,"circle-color":"#ff0000","circle-stroke-color":"#ffffff","circle-stroke-width":2}}),I.map.flyTo({center:[F.longitude,F.latitude],zoom:14,speed:1.5,curve:1,easing:K=>K});try{const K=yield I.signalementsService.loadSignalements();K?(I.signalementsService.signalementsSignal.set(K),I.displaySignalements()):console.log("No signalements available")}catch(K){console.error("Error loading signalements:",K)}}))):I.map=new(Wr().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[-74.5,40],zoom:10})})()}onChangeSignalementsFilter(I){this.selectedFilter.set(I),this.displaySignalements()}displaySignalements(){this.clearMarkers(),this.filteredSignalements().forEach(F=>{if(F.coordinates){const K=document.createElement("div");K.className="custom-marker";const Te=document.createElement("div");Te.style.display="flex",Te.style.flexDirection="column",Te.style.alignItems="center",Te.style.marginTop="10px";const je=document.createElement("img");je.src=F.images[0],je.style.width="40px",je.style.height="40px",je.style.borderRadius="50%",je.style.objectFit="cover",Te.appendChild(je);const ze=document.createElement("div");ze.innerText=F.title.slice(0,10)||"Signalement",ze.style.textAlign="center",ze.style.marginTop="8px",ze.style.padding="5px 10px",ze.style.backgroundColor="#007BFF",ze.style.color="#FFFFFF",ze.style.borderRadius="8px",ze.style.boxShadow="0px 4px 6px rgba(0, 0, 0, 0.1)",ze.style.fontSize="14px",ze.style.fontWeight="bold",ze.style.display="inline-block",Te.appendChild(ze),K.appendChild(Te);const ut=new(Wr().Marker)({element:K}).setLngLat([F.coordinates.lng,F.coordinates.lat]).addTo(this.map);ut.getElement().addEventListener("click",()=>{this.selectedSignalement.set(F);const nt=document.getElementById("open-modal");nt&&nt.click()}),this.markers.push(ut)}})}clearMarkers(){this.markers.forEach(I=>I.remove()),this.markers=[]}closeAndRedirect(){var I=this;return(0,Ht.A)(function*(){var F;yield I.modalController.dismiss();const K=null===(F=I.selectedSignalement())||void 0===F?void 0:F.id;K&&I.router.navigate(["/signalements/",K])})()}ngOnInit(){}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-carte"]],standalone:!0,features:[C.Jv_([zn]),C.aNF],decls:14,vars:3,consts:[["filter",""],[2,"padding-top","4rem"],["aria-label","Recherches","interface","action-sheet","placeholder","Filtrer les signalements",3,"ionChange"],["value","all"],["value","inProgress"],["value","resolved"],["id","map"],[1,"ion-padding"],["id","open-modal",2,"display","none"],["trigger","open-modal",3,"click","initialBreakpoint","breakpoints"],[3,"loop","pagination"],[2,"overflow","hidden","height","200px"],[2,"height","100%","width","100%","object-fit","cover",3,"alt","src"]],template:function(I,F){if(1&I){const K=C.RV6();C.j41(0,"ion-item",1)(1,"ion-select",2,0),C.bIt("ionChange",function(){C.eBV(K);const je=C.sdS(2);return C.Njj(F.onChangeSignalementsFilter(je.value))}),C.j41(3,"ion-select-option",3),C.EFF(4,"Tous"),C.k0s(),C.j41(5,"ion-select-option",4),C.EFF(6,"Statut: En cours"),C.k0s(),C.j41(7,"ion-select-option",5),C.EFF(8,"Statut: R\xe9solus"),C.k0s()()(),C.nrm(9,"div",6),C.j41(10,"ion-content",7),C.nrm(11,"ion-button",8),C.j41(12,"ion-modal",9),C.bIt("click",function(){return C.eBV(K),C.Njj(F.closeAndRedirect())}),C.DNE(13,aa,12,8,"ng-template"),C.k0s()()}2&I&&(C.R7$(12),C.Y8G("initialBreakpoint",.6)("breakpoints",C.lJ4(2,Fr)))},dependencies:[l.ME,l.I9,l.tN,l.HW,l.b_,l.Sb,l.Jm,l.W9,l.uz,l.Ip,l.Nm,vt.vh],styles:["#map[_ngcontent-%COMP%]{height:100%;width:100%}.mapboxgl-canvas[_ngcontent-%COMP%]{height:100%!important;width:100%!important}"]}),h})(),fa=(()=>{var y;class h{constructor(){this.toastController=(0,C.WQX)(yo)}presentToast(I,F){var K=this;return(0,Ht.A)(function*(){yield(yield K.toastController.create({message:F,duration:1500,position:I})).present()})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})();function Ms(y,h){if(1&y&&(C.j41(0,"swiper-slide"),C.nrm(1,"img",18),C.k0s()),2&y){let A;const I=h.$implicit,F=C.XpG(2);C.R7$(),C.Y8G("alt",null==(A=F.singleSignalement())?null:A.title)("src",I,C.B4B)}}function Bc(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-fab-button",19),C.bIt("click",function(){C.eBV(A);const F=C.XpG(2);return C.Njj(F.confirmSignalement())}),C.nrm(1,"ion-icon",20),C.k0s()}}function ha(y,h){if(1&y&&(C.j41(0,"p",12)(1,"strong"),C.EFF(2,"Commentaire de r\xe9solution :"),C.k0s(),C.EFF(3),C.k0s()),2&y){let A;const I=C.XpG(2);C.R7$(3),C.SpI(" ",null==(A=I.singleSignalement())?null:A.resolutionComment," ")}}function Sc(y,h){if(1&y&&(C.j41(0,"ion-button",21),C.EFF(1," Mettre \xe0 jour le statut du signalement "),C.k0s(),C.nrm(2,"ion-action-sheet",22)),2&y){const A=C.XpG(2);C.R7$(2),C.Y8G("buttons",A.actionSheetButtonsUpdate)}}function Wu(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-content")(1,"ion-card",0)(2,"ion-button",1),C.bIt("click",function(){C.eBV(A);const F=C.XpG();return C.Njj(F.goBack())}),C.EFF(3," Retour "),C.k0s(),C.j41(4,"swiper-container",2),C.Z7z(5,Ms,2,2,"swiper-slide",null,C.fX1),C.k0s(),C.j41(7,"ion-card-header",3)(8,"ion-card-title",4),C.EFF(9),C.k0s(),C.j41(10,"ion-card-subtitle",5),C.EFF(11),C.nI1(12,"date"),C.k0s()(),C.j41(13,"ion-card-content",6)(14,"p",7),C.EFF(15),C.k0s(),C.j41(16,"p",8)(17,"strong"),C.EFF(18,"Lieu :"),C.k0s(),C.EFF(19),C.k0s(),C.j41(20,"p",8)(21,"strong"),C.EFF(22,"Cat\xe9gorie :"),C.k0s(),C.EFF(23),C.k0s(),C.j41(24,"p",9)(25,"strong"),C.EFF(26,"Confirm\xe9 par :"),C.k0s(),C.EFF(27),C.nrm(28,"ion-icon",10),C.k0s(),C.j41(29,"p",8)(30,"strong"),C.EFF(31,"Statut :"),C.k0s(),C.EFF(32),C.k0s(),C.DNE(33,Bc,2,0,"ion-fab-button",11)(34,ha,4,1,"p",12),C.j41(35,"ion-label"),C.nrm(36,"div",13),C.k0s()(),C.j41(37,"div",14),C.DNE(38,Sc,3,1),C.j41(39,"ion-button",15),C.nrm(40,"ion-icon",16),C.k0s(),C.nrm(41,"ion-action-sheet",17),C.k0s()()()}if(2&y){let A,I,F,K,Te,je,ze,ut,nt,pt;const bt=C.XpG();C.R7$(4),C.Y8G("loop",!0)("pagination",!0),C.R7$(),C.Dyx(null==(A=bt.singleSignalement())?null:A.images),C.R7$(4),C.SpI(" ",null==(I=bt.singleSignalement())?null:I.title," "),C.R7$(2),C.SpI(" ",C.i5U(12,13,null==(F=bt.singleSignalement())?null:F.date,"full")," "),C.R7$(4),C.SpI(" ",null==(K=bt.singleSignalement())?null:K.content," "),C.R7$(4),C.SpI(" ",null==(Te=bt.singleSignalement())?null:Te.location," "),C.R7$(4),C.SpI(" ",null==(je=bt.singleSignalement())?null:je.category," "),C.R7$(4),C.SpI(" ",null==(ze=bt.singleSignalement())||null==ze.confirmedByUsers?null:ze.confirmedByUsers.length," utilisateur(s) "),C.R7$(5),C.SpI(" ",null==(ut=bt.singleSignalement())?null:ut.status," "),C.R7$(),C.vxM(bt.showConfimBtn()?33:-1),C.R7$(),C.vxM(null!=(nt=bt.singleSignalement())&&nt.resolutionComment?34:-1),C.R7$(4),C.vxM("En cours"===(null==(pt=bt.singleSignalement())?null:pt.status)?38:-1),C.R7$(3),C.Y8G("buttons",bt.actionSheetButtonsRemove)}}const Va=[{path:"",redirectTo:"liste",pathMatch:"full"},{path:"liste",component:Ct},{path:"carte",component:Hc},{path:":selectedSignalementId",component:(()=>{var y;class h{constructor(){this.router=(0,C.WQX)(se.Ix),this.locationService=(0,C.WQX)(zs),this.toastService=(0,C.WQX)(fa),this.destroyRef=(0,C.WQX)(C.abz),this.signalementsService=(0,C.WQX)(Jn.W),this.selectedSignalementId=(0,C.hFB)(),this.singleSignalement=(0,C.vPA)(void 0),this.isFetching=(0,C.vPA)(!1),this.error=(0,C.vPA)(""),this.showConfimBtn=(0,C.vPA)(!0),this.userId=this.signalementsService.userId(),this.location=(0,C.WQX)(vt.aZ),this.markers=[],this.signalement=(0,C.EWP)(()=>this.singleSignalement()),this.actionSheetButtonsUpdate=[{text:"Update",handler:()=>{this.updateSignalementStatus()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}],this.actionSheetButtonsRemove=[{text:"Remove",handler:()=>{this.removeSignalement()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}],(0,Ut.a)({closeCircle:It.P0k,camera:It.UIk,send:It.tN8,locateOutline:It.jew,pin:It.y_k,checkmarkCircle:It.AUS,add:It.WQq,trashOutline:It.P1A,checkmarkDoneOutline:It.u8Q})}confirmSignalement(){var I=this;return(0,Ht.A)(function*(){try{yield I.signalementsService.addConfirmation(I.selectedSignalementId(),I.userId),console.log("Confirmation added successfully")}catch(F){console.error("Error adding confirmation:",F)}})()}removeSignalement(){var I=this;return(0,Ht.A)(function*(){try{var F;yield I.signalementsService.deleteSignalement(I.selectedSignalementId(),null===(F=I.signalement())||void 0===F?void 0:F.recipient),yield I.signalementsService.loadSignalements(),I.router.navigate(["/signalements/liste"])}catch(K){I.toastService.presentToast("top","seulement les diestinarie sont autoris\xe9 a cloturer cette annonce"),console.error("Erreur lors de la suppression du signalement:",K)}})()}updateSignalementStatus(){var I=this;return(0,Ht.A)(function*(){try{var F;yield I.signalementsService.updateSignalementStatus(I.selectedSignalementId(),null===(F=I.signalement())||void 0===F?void 0:F.recipient),I.toastService.presentToast("top","le signalement a \xe9t\xe9 marqu\xe9 comme resolut")}catch(K){console.log(K),I.toastService.presentToast("top","seulement les diestinarie sont autoris\xe9 a changer le statut  cette annonce")}})()}ngOnInit(){this.isFetching.set(!0);const I=this.signalementsService.getSignalementById(this.selectedSignalementId()).subscribe({next:F=>{this.singleSignalement.set(F),this.isFetching.set(!1),null!=F&&F.confirmedByUsers.includes(this.userId)&&this.showConfimBtn.set(!1)},error:F=>{console.log(F),this.error.set("chargement du signalement en cours...")}});this.destroyRef.onDestroy(()=>{I.unsubscribe()})}goBack(){document.referrer.includes("signalements/carte")?window.location.href="http://localhost:4200/signalements/carte":this.location.back()}ngAfterViewInit(){var I=this;return(0,Ht.A)(function*(){Wr().accessToken="pk.eyJ1IjoiZHpmdWxsc3RhY2tkZXYiLCJhIjoiY2x2eWJkejkzMjVodTJrbnlvaGs2c2Y0ZyJ9.IVAMRDDapDnAT7KWCYk4mA",yield I.locationService.getCurrentPosition();const K=I.signalementsService.getSignalementById(I.selectedSignalementId()).subscribe({next:Te=>{I.map=new(Wr().Map)({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[null==Te?void 0:Te.coordinates.lng,null==Te?void 0:Te.coordinates.lat],zoom:10}),I.map.on("load",(0,Ht.A)(function*(){I.map.addSource("user-location",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[null==Te?void 0:Te.coordinates.lng,null==Te?void 0:Te.coordinates.lat]},properties:{}}}),I.map.addLayer({id:"user-location-circle",type:"circle",source:"user-location",paint:{"circle-radius":10,"circle-color":"#ff0000","circle-stroke-color":"#ffffff","circle-stroke-width":2}}),I.map.flyTo({center:[null==Te?void 0:Te.coordinates.lng,null==Te?void 0:Te.coordinates.lat],zoom:14,speed:1.5,curve:1,easing:je=>je})}))},error:Te=>{console.log(Te),I.error.set("Erreur lors du chargement du signalement.")}});I.destroyRef.onDestroy(()=>{K.unsubscribe()})})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signalement"]],inputs:{selectedSignalementId:[1,"selectedSignalementId"]},standalone:!0,features:[C.aNF],decls:1,vars:1,consts:[[2,"padding-top","4.5rem","position","relative","box-shadow","0px 4px 10px rgba(0, 0, 0, 0.1)","border-radius","15px","padding-bottom","3rem"],["routerLinkActive","router-link-active",2,"width","70px","height","40px","position","absolute","top","4rem","left","0rem","z-index","10000","background-color","#007bff","color","#fff","border-radius","8px","box-shadow","0px 2px 6px rgba(0, 0, 0, 0.2)",3,"click"],[3,"loop","pagination"],[2,"text-align","center"],[2,"font-size","1.5rem","font-weight","bold","margin-top","10px"],[2,"color","#666"],[2,"padding","1.5rem"],[2,"margin-bottom","1rem","font-size","1rem","color","#333"],[2,"margin-bottom","1rem","font-size","1rem","color","#666"],[2,"margin-bottom","1rem","font-size","1rem","color","#666","display","flex","align-items","center"],["name","checkmark-done-outline",2,"margin-left","0.5rem","color","#28a745"],[2,"color","#fff","box-shadow","0px 2px 6px rgba(0, 0, 0, 0.2)"],[2,"margin-top","1rem","color","#007bff"],["id","map",2,"height","100%","width","100%","min-height","300px","border-radius","15px"],[2,"position","fixed","bottom","0","left","0","width","100%","display","flex","z-index","999999"],["id","open-action-sheet-remove",2,"width","auto","background-color","#dc3545","color","#fff","border-radius","0"],["name","trash-outline"],["trigger","open-action-sheet-remove","header","Actions",3,"buttons"],[2,"height","100%","width","100%","object-fit","cover","border-radius","15px 15px 0 0",3,"alt","src"],[2,"color","#fff","box-shadow","0px 2px 6px rgba(0, 0, 0, 0.2)",3,"click"],["name","add"],["id","open-action-sheet",2,"flex","1","background-color","#ffc107","color","#fefefe","border-radius","0"],["trigger","open-action-sheet","header","Actions",3,"buttons"]],template:function(I,F){1&I&&C.DNE(0,Wu,42,16,"ion-content"),2&I&&C.vxM(F.singleSignalement()?0:-1)},dependencies:[l.HW,l.b_,l.I9,l.tN,l.ME,l.he,vt.vh,vt.MD],styles:["#map[_ngcontent-%COMP%]{width:100%;height:300px;min-height:300px;border-radius:15px}.mapboxgl-canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important;min-height:300px;border-radius:15px}"]}),h})()}];var gl=_e(1832),hl=_e(5407),cu=(_e(2214),_e(7852)),Re=_e(1076),We=_e(1362);const Tt="firebasestorage.googleapis.com",an="storageBucket";class Ti extends Re.g{constructor(h,A,I=0){super(lo(h),`Firebase Storage: ${A} (${lo(h)})`),this.status_=I,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ti.prototype)}get status(){return this.status_}set status(h){this.status_=h}_codeEquals(h){return lo(h)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(h){this.customData.serverResponse=h,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var mi=function(y){return y.UNKNOWN="unknown",y.OBJECT_NOT_FOUND="object-not-found",y.BUCKET_NOT_FOUND="bucket-not-found",y.PROJECT_NOT_FOUND="project-not-found",y.QUOTA_EXCEEDED="quota-exceeded",y.UNAUTHENTICATED="unauthenticated",y.UNAUTHORIZED="unauthorized",y.UNAUTHORIZED_APP="unauthorized-app",y.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",y.INVALID_CHECKSUM="invalid-checksum",y.CANCELED="canceled",y.INVALID_EVENT_NAME="invalid-event-name",y.INVALID_URL="invalid-url",y.INVALID_DEFAULT_BUCKET="invalid-default-bucket",y.NO_DEFAULT_BUCKET="no-default-bucket",y.CANNOT_SLICE_BLOB="cannot-slice-blob",y.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",y.NO_DOWNLOAD_URL="no-download-url",y.INVALID_ARGUMENT="invalid-argument",y.INVALID_ARGUMENT_COUNT="invalid-argument-count",y.APP_DELETED="app-deleted",y.INVALID_ROOT_OPERATION="invalid-root-operation",y.INVALID_FORMAT="invalid-format",y.INTERNAL_ERROR="internal-error",y.UNSUPPORTED_ENVIRONMENT="unsupported-environment",y}(mi||{});function lo(y){return"storage/"+y}function Xo(){return new Ti(mi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ke(y){return new Ti(mi.INVALID_ARGUMENT,y)}function _t(){return new Ti(mi.APP_DELETED,"The Firebase app was deleted.")}function Zt(y,h){return new Ti(mi.INVALID_FORMAT,"String does not match format '"+y+"': "+h)}function Vo(y){throw new Ti(mi.INTERNAL_ERROR,"Internal error: "+y)}class dr{constructor(h,A){this.bucket=h,this.path_=A}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const h=encodeURIComponent;return"/b/"+h(this.bucket)+"/o/"+h(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(h,A){let I;try{I=dr.makeFromUrl(h,A)}catch{return new dr(h,"")}if(""===I.path)return I;throw function $a(y){return new Ti(mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+y+"'.")}(h)}static makeFromUrl(h,A){let I=null;const F="([A-Za-z0-9.\\-_]+)",je=new RegExp("^gs://"+F+"(/(.*))?$","i");function ut(di){di.path_=decodeURIComponent(di.path)}const pt=A.replace(/[.]/g,"\\."),_n=[{regex:je,indices:{bucket:1,path:3},postModify:function K(di){"/"===di.path.charAt(di.path.length-1)&&(di.path_=di.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${pt}/v[A-Za-z0-9_]+/b/${F}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ut},{regex:new RegExp(`^https?://${A===Tt?"(?:storage.googleapis.com|storage.cloud.google.com)":A}/${F}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ut}];for(let di=0;di<_n.length;di++){const uo=_n[di],Qo=uo.regex.exec(h);if(Qo){let zo=Qo[uo.indices.path];zo||(zo=""),I=new dr(Qo[uo.indices.bucket],zo),uo.postModify(I);break}}if(null==I)throw function wl(y){return new Ti(mi.INVALID_URL,"Invalid URL '"+y+"'.")}(h);return I}}class Xa{constructor(h){this.promise_=Promise.reject(h)}getPromise(){return this.promise_}cancel(h=!1){}}function Wc(y){return"string"==typeof y||y instanceof String}function Fh(y){return _s()&&y instanceof Blob}function _s(){return typeof Blob<"u"}function Sd(y,h,A,I){if(I<h)throw ke(`Invalid value for '${y}'. Expected ${h} or greater.`);if(I>A)throw ke(`Invalid value for '${y}'. Expected ${A} or less.`)}function qc(y,h,A){let I=h;return null==A&&(I=`https://${h}`),`${A}://${I}/v0${y}`}function dh(y){const h=encodeURIComponent;let A="?";for(const I in y)y.hasOwnProperty(I)&&(A=A+(h(I)+"=")+h(y[I])+"&");return A=A.slice(0,-1),A}var pd=function(y){return y[y.NO_ERROR=0]="NO_ERROR",y[y.NETWORK_ERROR=1]="NETWORK_ERROR",y[y.ABORT=2]="ABORT",y}(pd||{});class Vh{constructor(h,A,I,F,K,Te,je,ze,ut,nt,pt,bt=!0){this.url_=h,this.method_=A,this.headers_=I,this.body_=F,this.successCodes_=K,this.additionalRetryCodes_=Te,this.callback_=je,this.errorCallback_=ze,this.timeout_=ut,this.progressCallback_=nt,this.connectionFactory_=pt,this.retry=bt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((rn,fn)=>{this.resolve_=rn,this.reject_=fn,this.start_()})}start_(){const A=(I,F)=>{const K=this.resolve_,Te=this.reject_,je=F.connection;if(F.wasSuccessCode)try{const ze=this.callback_(je,je.getResponse());!function al(y){return void 0!==y}(ze)?K():K(ze)}catch(ze){Te(ze)}else if(null!==je){const ze=Xo();ze.serverResponse=je.getErrorText(),Te(this.errorCallback_?this.errorCallback_(je,ze):ze)}else Te(F.canceled?this.appDelete_?_t():function nr(){return new Ti(mi.CANCELED,"User canceled the upload/download.")}():function gs(){return new Ti(mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?A(0,new Nc(!1,null,!0)):this.backoffId_=function xl(y,h,A){let I=1,F=null,K=null,Te=!1,je=0;function ze(){return 2===je}let ut=!1;function nt(...wn){ut||(ut=!0,h.apply(null,wn))}function pt(wn){F=setTimeout(()=>{F=null,y(rn,ze())},wn)}function bt(){K&&clearTimeout(K)}function rn(wn,...Nt){if(ut)return void bt();if(wn)return bt(),void nt.call(null,wn,...Nt);if(ze()||Te)return bt(),void nt.call(null,wn,...Nt);let _n;I<64&&(I*=2),1===je?(je=2,_n=0):_n=1e3*(I+Math.random()),pt(_n)}let fn=!1;function mn(wn){fn||(fn=!0,bt(),!ut&&(null!==F?(wn||(je=2),clearTimeout(F),pt(0)):wn||(je=1)))}return pt(0),K=setTimeout(()=>{Te=!0,mn(!0)},A),mn}((I,F)=>{if(F)return void I(!1,new Nc(!1,null,!0));const K=this.connectionFactory_();this.pendingConnection_=K;const Te=je=>{null!==this.progressCallback_&&this.progressCallback_(je.loaded,je.lengthComputable?je.total:-1)};null!==this.progressCallback_&&K.addUploadProgressListener(Te),K.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&K.removeUploadProgressListener(Te),this.pendingConnection_=null;const je=K.getErrorCode()===pd.NO_ERROR,ze=K.getStatus();if(!je||function Td(y,h){const A=y>=500&&y<600,F=-1!==[408,429].indexOf(y),K=-1!==h.indexOf(y);return A||F||K}(ze,this.additionalRetryCodes_)&&this.retry){const nt=K.getErrorCode()===pd.ABORT;return void I(!1,new Nc(!1,null,nt))}const ut=-1!==this.successCodes_.indexOf(ze);I(!0,new Nc(ut,K))})},A,this.timeout_)}getPromise(){return this.promise_}cancel(h){this.canceled_=!0,this.appDelete_=h||!1,null!==this.backoffId_&&function Tc(y){y(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Nc{constructor(h,A,I){this.wasSuccessCode=h,this.connection=A,this.canceled=!!I}}function H0(...y){const h=function Xc(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==h){const A=new h;for(let I=0;I<y.length;I++)A.append(y[I]);return A.getBlob()}if(_s())return new Blob(y);throw new Ti(mi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ad={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ch{constructor(h,A){this.data=h,this.contentType=A||null}}function jh(y,h){switch(y){case Ad.RAW:return new Ch(G0(h));case Ad.BASE64:case Ad.BASE64URL:return new Ch(Mc(y,h));case Ad.DATA_URL:return new Ch(function x0(y){const h=new Os(y);return h.base64?Mc(Ad.BASE64,h.rest):function Za(y){let h;try{h=decodeURIComponent(y)}catch{throw Zt(Ad.DATA_URL,"Malformed data URL.")}return G0(h)}(h.rest)}(h),function I0(y){return new Os(y).contentType}(h))}throw Xo()}function G0(y){const h=[];for(let A=0;A<y.length;A++){let I=y.charCodeAt(A);I<=127?h.push(I):I<=2047?h.push(192|I>>6,128|63&I):55296==(64512&I)?A<y.length-1&&56320==(64512&y.charCodeAt(A+1))?(I=65536|(1023&I)<<10|1023&y.charCodeAt(++A),h.push(240|I>>18,128|I>>12&63,128|I>>6&63,128|63&I)):h.push(239,191,189):56320==(64512&I)?h.push(239,191,189):h.push(224|I>>12,128|I>>6&63,128|63&I)}return new Uint8Array(h)}function Mc(y,h){switch(y){case Ad.BASE64:{const F=-1!==h.indexOf("-"),K=-1!==h.indexOf("_");if(F||K)throw Zt(y,"Invalid character '"+(F?"-":"_")+"' found: is it base64url encoded?");break}case Ad.BASE64URL:{const F=-1!==h.indexOf("+"),K=-1!==h.indexOf("/");if(F||K)throw Zt(y,"Invalid character '"+(F?"+":"/")+"' found: is it base64 encoded?");h=h.replace(/-/g,"+").replace(/_/g,"/");break}}let A;try{A=function _a(y){if(typeof atob>"u")throw function Xe(y){return new Ti(mi.UNSUPPORTED_ENVIRONMENT,`${y} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(y)}(h)}catch(F){throw F.message.includes("polyfill")?F:Zt(y,"Invalid character found")}const I=new Uint8Array(A.length);for(let F=0;F<A.length;F++)I[F]=A.charCodeAt(F);return I}class Os{constructor(h){this.base64=!1,this.contentType=null;const A=h.match(/^data:([^,]+)?,/);if(null===A)throw Zt(Ad.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const I=A[1]||null;null!=I&&(this.base64=function Hl(y,h){return y.length>=h.length&&y.substring(y.length-h.length)===h}(I,";base64"),this.contentType=this.base64?I.substring(0,I.length-7):I),this.rest=h.substring(h.indexOf(",")+1)}}class qu{constructor(h,A){let I=0,F="";Fh(h)?(this.data_=h,I=h.size,F=h.type):h instanceof ArrayBuffer?(A?this.data_=new Uint8Array(h):(this.data_=new Uint8Array(h.byteLength),this.data_.set(new Uint8Array(h))),I=this.data_.length):h instanceof Uint8Array&&(A?this.data_=h:(this.data_=new Uint8Array(h.length),this.data_.set(h)),I=h.length),this.size_=I,this.type_=F}size(){return this.size_}type(){return this.type_}slice(h,A){if(Fh(this.data_)){const F=function As(y,h,A){return y.webkitSlice?y.webkitSlice(h,A):y.mozSlice?y.mozSlice(h,A):y.slice?y.slice(h,A):null}(this.data_,h,A);return null===F?null:new qu(F)}{const I=new Uint8Array(this.data_.buffer,h,A-h);return new qu(I,!0)}}static getBlob(...h){if(_s()){const A=h.map(I=>I instanceof qu?I.data_:I);return new qu(H0.apply(null,A))}{const A=h.map(Te=>Wc(Te)?jh(Ad.RAW,Te).data:Te.data_);let I=0;A.forEach(Te=>{I+=Te.byteLength});const F=new Uint8Array(I);let K=0;return A.forEach(Te=>{for(let je=0;je<Te.length;je++)F[K++]=Te[je]}),new qu(F,!0)}}uploadData(){return this.data_}}function Uh(y){let h;try{h=JSON.parse(y)}catch{return null}return function Gc(y){return"object"==typeof y&&!Array.isArray(y)}(h)?h:null}function fd(y){const h=y.lastIndexOf("/",y.length-2);return-1===h?y:y.slice(h+1)}function Zs(y,h){return h}class Pu{constructor(h,A,I,F){this.server=h,this.local=A||h,this.writable=!!I,this.xform=F||Zs}}let Cr=null;function Xu(){if(Cr)return Cr;const y=[];y.push(new Pu("bucket")),y.push(new Pu("generation")),y.push(new Pu("metageneration")),y.push(new Pu("name","fullPath",!0));const A=new Pu("name");A.xform=function h(K,Te){return function Dd(y){return!Wc(y)||y.length<2?y:fd(y)}(Te)},y.push(A);const F=new Pu("size");return F.xform=function I(K,Te){return void 0!==Te?Number(Te):Te},y.push(F),y.push(new Pu("timeCreated")),y.push(new Pu("updated")),y.push(new Pu("md5Hash",null,!0)),y.push(new Pu("cacheControl",null,!0)),y.push(new Pu("contentDisposition",null,!0)),y.push(new Pu("contentEncoding",null,!0)),y.push(new Pu("contentLanguage",null,!0)),y.push(new Pu("contentType",null,!0)),y.push(new Pu("metadata","customMetadata",!0)),Cr=y,Cr}function xu(y,h,A){const I=Uh(h);return null===I?null:function wu(y,h,A){const I={type:"file"},F=A.length;for(let K=0;K<F;K++){const Te=A[K];I[Te.local]=Te.xform(I,h[Te.server])}return function lc(y,h){Object.defineProperty(y,"ref",{get:function A(){const K=new dr(y.bucket,y.fullPath);return h._makeStorageReference(K)}})}(I,y),I}(y,I,A)}class ui{constructor(h,A,I,F){this.url=h,this.method=A,this.handler=I,this.timeout=F,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ko(y){if(!y)throw Xo()}function Pr(y){return function h(A,I){let F;return F=401===A.getStatus()?A.getErrorText().includes("Firebase App Check token is invalid")?function la(){return new Ti(mi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function jr(){return new Ti(mi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===A.getStatus()?function gr(y){return new Ti(mi.QUOTA_EXCEEDED,"Quota for bucket '"+y+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(y.bucket):403===A.getStatus()?function bl(y){return new Ti(mi.UNAUTHORIZED,"User does not have permission to access '"+y+"'.")}(y.path):I,F.status=A.getStatus(),F.serverResponse=I.serverResponse,F}}function Sl(y,h,A,I,F){const K=h.bucketOnlyServerUrl(),Te={"X-Goog-Upload-Protocol":"multipart"},ze=function je(){let _n="";for(let di=0;di<2;di++)_n+=Math.random().toString().slice(2);return _n}();Te["Content-Type"]="multipart/related; boundary="+ze;const ut=function Gl(y,h,A){const I=Object.assign({},A);return I.fullPath=y.path,I.size=h.size(),I.contentType||(I.contentType=function cc(y,h){return y&&y.contentType||h&&h.type()||"application/octet-stream"}(null,h)),I}(h,I,F),nt=function Ee(y,h){const A={},I=h.length;for(let F=0;F<I;F++){const K=h[F];K.writable&&(A[K.server]=y[K.local])}return JSON.stringify(A)}(ut,A),rn=qu.getBlob("--"+ze+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+nt+"\r\n--"+ze+"\r\nContent-Type: "+ut.contentType+"\r\n\r\n",I,"\r\n--"+ze+"--");if(null===rn)throw function Ol(){return new Ti(mi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}();const fn={name:ut.fullPath},mn=qc(K,y.host,y._protocol),Nt=y.maxUploadRetryTime,Ln=new ui(mn,"POST",function hs(y,h){return function A(I,F){const K=xu(y,F,h);return Ko(null!==K),K}}(y,A),Nt);return Ln.urlParams=fn,Ln.headers=Te,Ln.body=rn.uploadData(),Ln.errorHandler=Pr(h),Ln}let Ru=null;class du{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pd.NO_ERROR,this.sendPromise_=new Promise(h=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pd.ABORT,h()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pd.NETWORK_ERROR,h()}),this.xhr_.addEventListener("load",()=>{h()})})}send(h,A,I,F){if(this.sent_)throw Vo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(A,h,!0),void 0!==F)for(const K in F)F.hasOwnProperty(K)&&this.xhr_.setRequestHeader(K,F[K].toString());return void 0!==I?this.xhr_.send(I):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(h){return this.xhr_.getResponseHeader(h)}addUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",h)}removeUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",h)}}class vl extends du{initXhr(){this.xhr_.responseType="text"}}function Ac(){return Ru?Ru():new vl}class zu{constructor(h,A){this._service=h,this._location=A instanceof dr?A:dr.makeFromUrl(A,h.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(h,A){return new zu(h,A)}get root(){const h=new dr(this._location.bucket,"");return this._newRef(this._service,h)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fd(this._location.path)}get storage(){return this._service}get parent(){const h=function Kd(y){if(0===y.length)return null;const h=y.lastIndexOf("/");return-1===h?"":y.slice(0,h)}(this._location.path);if(null===h)return null;const A=new dr(this._location.bucket,h);return new zu(this._service,A)}_throwIfRoot(h){if(""===this._location.path)throw function He(y){return new Ti(mi.INVALID_ROOT_OPERATION,"The operation '"+y+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(h)}}function C0(y){y._throwIfRoot("getDownloadURL");const h=function Jl(y,h,A){const F=qc(h.fullServerUrl(),y.host,y._protocol),Te=y.maxOperationRetryTime,je=new ui(F,"GET",function Js(y,h){return function A(I,F){const K=xu(y,F,h);return Ko(null!==K),function fe(y,h,A,I){const F=Uh(h);if(null===F||!Wc(F.downloadTokens))return null;const K=F.downloadTokens;if(0===K.length)return null;const Te=encodeURIComponent;return K.split(",").map(ut=>{const pt=y.fullPath;return qc("/b/"+Te(y.bucket)+"/o/"+Te(pt),A,I)+dh({alt:"media",token:ut})})[0]}(K,F,y.host,y._protocol)}}(y,A),Te);return je.errorHandler=function Ta(y){const h=Pr(y);return function A(I,F){let K=h(I,F);return 404===I.getStatus()&&(K=function hr(y){return new Ti(mi.OBJECT_NOT_FOUND,"Object '"+y+"' does not exist.")}(y.path)),K.serverResponse=F.serverResponse,K}}(h),je}(y.storage,y._location,Xu());return y.storage.makeRequestWithTokens(h,Ac).then(A=>{if(null===A)throw function Ca(){return new Ti(mi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return A})}function cd(y,h){if(y instanceof Ah){const A=y;if(null==A._bucket)throw function bu(){return new Ti(mi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+an+"' property when initializing the app?")}();const I=new zu(A,A._bucket);return null!=h?cd(I,h):I}return void 0!==h?function Mh(y,h){const A=function Kc(y,h){const A=h.split("/").filter(I=>I.length>0).join("/");return 0===y.length?A:y+"/"+A}(y._location.path,h),I=new dr(y._location.bucket,A);return new zu(y.storage,I)}(y,h):y}function m1(y,h){const A=null==h?void 0:h[an];return null==A?null:dr.makeFromBucketSpec(A,y)}class Ah{constructor(h,A,I,F,K){this.app=h,this._authProvider=A,this._appCheckProvider=I,this._url=F,this._firebaseVersion=K,this._bucket=null,this._host=Tt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=F?dr.makeFromBucketSpec(F,this._host):m1(this._host,this.app.options)}get host(){return this._host}set host(h){this._host=h,this._bucket=null!=this._url?dr.makeFromBucketSpec(this._url,h):m1(h,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(h){Sd("time",0,Number.POSITIVE_INFINITY,h),this._maxUploadRetryTime=h}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(h){Sd("time",0,Number.POSITIVE_INFINITY,h),this._maxOperationRetryTime=h}_getAuthToken(){var h=this;return(0,Ht.A)(function*(){if(h._overrideAuthToken)return h._overrideAuthToken;const A=h._authProvider.getImmediate({optional:!0});if(A){const I=yield A.getToken();if(null!==I)return I.accessToken}return null})()}_getAppCheckToken(){var h=this;return(0,Ht.A)(function*(){const A=h._appCheckProvider.getImmediate({optional:!0});return A?(yield A.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(h=>h.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(h){return new zu(this,h)}_makeRequest(h,A,I,F,K=!0){if(this._deleted)return new Xa(_t());{const Te=function uu(y,h,A,I,F,K,Te=!0){const je=dh(y.urlParams),ze=y.url+je,ut=Object.assign({},y.headers);return function Xd(y,h){h&&(y["X-Firebase-GMPID"]=h)}(ut,h),function w0(y,h){null!==h&&h.length>0&&(y.Authorization="Firebase "+h)}(ut,A),function $h(y,h){y["X-Firebase-Storage-Version"]="webjs/"+(null!=h?h:"AppManager")}(ut,K),function Md(y,h){null!==h&&(y["X-Firebase-AppCheck"]=h)}(ut,I),new Vh(ze,y.method,ut,y.body,y.successCodes,y.additionalRetryCodes,y.handler,y.errorHandler,y.timeout,y.progressCallback,F,Te)}(h,this._appId,I,F,A,this._firebaseVersion,K);return this._requests.add(Te),Te.getPromise().then(()=>this._requests.delete(Te),()=>this._requests.delete(Te)),Te}}makeRequestWithTokens(h,A){var I=this;return(0,Ht.A)(function*(){const[F,K]=yield Promise.all([I._getAuthToken(),I._getAppCheckToken()]);return I._makeRequest(h,A,F,K).getPromise()})()}}const yd="@firebase/storage",bd="storage";function Xi(y,h,A,I){return function Yd(y,h,A=Ad.RAW,I){y._throwIfRoot("uploadString");const F=jh(A,h),K=Object.assign({},I);return null==K.contentType&&null!=F.contentType&&(K.contentType=F.contentType),function Ws(y,h,A){y._throwIfRoot("uploadBytes");const I=Sl(y.storage,y._location,Xu(),new qu(h,!0),A);return y.storage.makeRequestWithTokens(I,Ac).then(F=>({metadata:F,ref:y}))}(y,F.data,K)}(y=(0,Re.Ku)(y),h,A,I)}function St(y){return C0(y=(0,Re.Ku)(y))}function Ci(y,h){return function _d(y,h){if(h&&function q0(y){return/^[A-Za-z]+:\/\//.test(y)}(h)){if(y instanceof Ah)return function k0(y,h){return new zu(y,h)}(y,h);throw ke("To use ref(service, url), the first argument must be a Storage instance.")}return cd(y,h)}(y=(0,Re.Ku)(y),h)}function Ei(y=(0,cu.Sx)(),h){y=(0,Re.Ku)(y);const I=(0,cu.j6)(y,bd).getImmediate({identifier:h}),F=(0,Re.yU)("storage");return F&&function kr(y,h,A,I={}){!function Qd(y,h,A,I={}){y.host=`${h}:${A}`,y._protocol="http";const{mockUserToken:F}=I;F&&(y._overrideAuthToken="string"==typeof F?F:(0,Re.Fy)(F,y.app.options.projectId))}(y,h,A,I)}(I,...F),I}function qs(y,{instanceIdentifier:h}){const A=y.getProvider("app").getImmediate(),I=y.getProvider("auth-internal"),F=y.getProvider("app-check-internal");return new Ah(A,I,F,h,cu.MF)}!function Tl(){(0,cu.om)(new We.uA(bd,qs,"PUBLIC").setMultipleInstances(!0)),(0,cu.KO)(yd,"0.12.6",""),(0,cu.KO)(yd,"0.12.6","esm2017")}();const A0=(0,hl.S3)(St,!0),Dh=(0,hl.S3)(Ei,!0),Y0=(0,hl.S3)(Ci,!0),Ph=(0,hl.S3)(Xi,!0);var Z0=function(y){return y.Prompt="PROMPT",y.Camera="CAMERA",y.Photos="PHOTOS",y}(Z0||{}),Ja=function(y){return y.Rear="REAR",y.Front="FRONT",y}(Ja||{}),th=function(y){return y.Uri="uri",y.Base64="base64",y.DataUrl="dataUrl",y}(th||{});class nh extends Ts.E_{getPhoto(h){var A=this;return(0,Ht.A)(function*(){return new Promise(function(){var I=(0,Ht.A)(function*(F,K){if(h.webUseInput||h.source===Z0.Photos)A.fileInputExperience(h,F,K);else if(h.source===Z0.Prompt){let Te=document.querySelector("pwa-action-sheet");Te||(Te=document.createElement("pwa-action-sheet"),document.body.appendChild(Te)),Te.header=h.promptLabelHeader||"Photo",Te.cancelable=!1,Te.options=[{title:h.promptLabelPhoto||"From Photos"},{title:h.promptLabelPicture||"Take Picture"}],Te.addEventListener("onSelection",function(){var je=(0,Ht.A)(function*(ze){0===ze.detail?A.fileInputExperience(h,F,K):A.cameraExperience(h,F,K)});return function(ze){return je.apply(this,arguments)}}())}else A.cameraExperience(h,F,K)});return function(F,K){return I.apply(this,arguments)}}())})()}pickImages(h){var A=this;return(0,Ht.A)(function*(){return new Promise(function(){var I=(0,Ht.A)(function*(F,K){A.multipleFileInputExperience(F,K)});return function(F,K){return I.apply(this,arguments)}}())})()}cameraExperience(h,A,I){var F=this;return(0,Ht.A)(function*(){if(customElements.get("pwa-camera-modal")){const K=document.createElement("pwa-camera-modal");K.facingMode=h.direction===Ja.Front?"user":"environment",document.body.appendChild(K);try{yield K.componentOnReady(),K.addEventListener("onPhoto",function(){var Te=(0,Ht.A)(function*(je){const ze=je.detail;null===ze?I(new Ts.I9("User cancelled photos app")):ze instanceof Error?I(ze):A(yield F._getCameraPhoto(ze,h)),K.dismiss(),document.body.removeChild(K)});return function(je){return Te.apply(this,arguments)}}()),K.present()}catch{F.fileInputExperience(h,A,I)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),F.fileInputExperience(h,A,I)})()}fileInputExperience(h,A,I){let F=document.querySelector("#_capacitor-camera-input");const K=()=>{var Te;null===(Te=F.parentNode)||void 0===Te||Te.removeChild(F)};F||(F=document.createElement("input"),F.id="_capacitor-camera-input",F.type="file",F.hidden=!0,document.body.appendChild(F),F.addEventListener("change",Te=>{const je=F.files[0];let ze="jpeg";if("image/png"===je.type?ze="png":"image/gif"===je.type&&(ze="gif"),"dataUrl"===h.resultType||"base64"===h.resultType){const ut=new FileReader;ut.addEventListener("load",()=>{if("dataUrl"===h.resultType)A({dataUrl:ut.result,format:ze});else if("base64"===h.resultType){const nt=ut.result.split(",")[1];A({base64String:nt,format:ze})}K()}),ut.readAsDataURL(je)}else A({webPath:URL.createObjectURL(je),format:ze}),K()}),F.addEventListener("cancel",Te=>{I(new Ts.I9("User cancelled photos app")),K()})),F.accept="image/*",F.capture=!0,h.source===Z0.Photos||h.source===Z0.Prompt?F.removeAttribute("capture"):h.direction===Ja.Front?F.capture="user":h.direction===Ja.Rear&&(F.capture="environment"),F.click()}multipleFileInputExperience(h,A){let I=document.querySelector("#_capacitor-camera-input-multiple");const F=()=>{var K;null===(K=I.parentNode)||void 0===K||K.removeChild(I)};I||(I=document.createElement("input"),I.id="_capacitor-camera-input-multiple",I.type="file",I.hidden=!0,I.multiple=!0,document.body.appendChild(I),I.addEventListener("change",K=>{const Te=[];for(let je=0;je<I.files.length;je++){const ze=I.files[je];let ut="jpeg";"image/png"===ze.type?ut="png":"image/gif"===ze.type&&(ut="gif"),Te.push({webPath:URL.createObjectURL(ze),format:ut})}h({photos:Te}),F()}),I.addEventListener("cancel",K=>{A(new Ts.I9("User cancelled photos app")),F()})),I.accept="image/*",I.click()}_getCameraPhoto(h,A){return new Promise((I,F)=>{const K=new FileReader,Te=h.type.split("/")[1];"uri"===A.resultType?I({webPath:URL.createObjectURL(h),format:Te,saved:!1}):(K.readAsDataURL(h),K.onloadend=()=>{const je=K.result;I("dataUrl"===A.resultType?{dataUrl:je,format:Te,saved:!1}:{base64String:je.split(",")[1],format:Te,saved:!1})},K.onerror=je=>{F(je)})})}checkPermissions(){var h=this;return(0,Ht.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw h.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw h.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var h=this;return(0,Ht.A)(function*(){throw h.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var h=this;return(0,Ht.A)(function*(){throw h.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var h=this;return(0,Ht.A)(function*(){throw h.unavailable("Not implemented on web.")})()}}new nh;const J1=(0,Ts.F3)("Camera",{web:()=>new nh});let Q0=(()=>{var y;class h{constructor(){this.photos=[],this.convertBlobToBase64=I=>new Promise((F,K)=>{const Te=new FileReader;Te.onerror=K,Te.onload=()=>{F(Te.result)},Te.readAsDataURL(I)})}addNewToGallery(){var I=this;return(0,Ht.A)(function*(){const F=yield J1.getPhoto({resultType:th.Uri,source:Z0.Camera,quality:100}),K=yield I.savePicture(F);return I.photos.unshift(K),K})()}savePicture(I){var F=this;return(0,Ht.A)(function*(){const K=yield F.readAsBase64(I),Te=Dh(),je=`${(new Date).getTime()}.jpeg`,ze=Y0(Te,`photos/${je}`),ut=yield Ph(ze,K,"data_url"),nt=yield A0(ut.ref);return{filepath:ze.fullPath,webviewPath:nt}})()}readAsBase64(I){var F=this;return(0,Ht.A)(function*(){const Te=yield(yield fetch(I.webPath)).blob();return yield F.convertBlobToBase64(Te)})()}removePhoto(I){I>-1&&this.photos.splice(I,1)}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})();function Cp(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-item")(1,"ion-checkbox",6),C.bIt("ionChange",function(F){C.eBV(A);const K=C.XpG();return C.Njj(K.checkboxChange(F))}),C.EFF(2),C.k0s()()}if(2&y){const A=h.$implicit,I=C.XpG();C.R7$(),C.Y8G("value",A.value)("checked",I.isChecked(A.value)),C.R7$(),C.JRh(A.text)}}let Xh=(()=>{var y;class h{constructor(){this.items=[],this.selectedItems=[],this.title="Select Items",this.selectionCancel=new C.bkB,this.selectionChange=new C.bkB,this.filteredItems=[],this.workingSelectedValues=[]}ngOnInit(){this.filteredItems=[...this.items],this.workingSelectedValues=[...this.selectedItems]}trackItems(I,F){return F.value}cancelChanges(){this.selectionCancel.emit()}confirmChanges(){this.selectionChange.emit(this.workingSelectedValues)}searchbarInput(I){this.filterList(I.target.value)}filterList(I){if(void 0===I)this.filteredItems=[...this.items];else{const F=I.toLowerCase();this.filteredItems=this.items.filter(K=>K.text.toLowerCase().includes(F))}}isChecked(I){return this.workingSelectedValues.find(F=>F===I)}checkboxChange(I){const{checked:F,value:K}=I.detail;this.workingSelectedValues=F?[...this.workingSelectedValues,K]:this.workingSelectedValues.filter(Te=>Te!==K)}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-typehead"]],inputs:{items:"items",selectedItems:"selectedItems",title:"title"},outputs:{selectionCancel:"selectionCancel",selectionChange:"selectionChange"},standalone:!0,features:[C.aNF],decls:16,vars:2,consts:[["slot","start"],[3,"click"],["slot","end"],[3,"ionInput"],["color","light",1,"ion-padding"],["id","modal-list",3,"inset"],[3,"ionChange","value","checked"]],template:function(I,F){1&I&&(C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),C.bIt("click",function(){return F.cancelChanges()}),C.EFF(4,"Cancel"),C.k0s()(),C.j41(5,"ion-title"),C.EFF(6),C.k0s(),C.j41(7,"ion-buttons",2)(8,"ion-button",1),C.bIt("click",function(){return F.confirmChanges()}),C.EFF(9,"Done"),C.k0s()()(),C.j41(10,"ion-toolbar")(11,"ion-searchbar",3),C.bIt("ionInput",function(Te){return F.searchbarInput(Te)}),C.k0s()()(),C.j41(12,"ion-content",4)(13,"ion-list",5),C.Z7z(14,Cp,3,3,"ion-item",null,C.fX1),C.k0s()()),2&I&&(C.R7$(6),C.JRh(F.title),C.R7$(7),C.Y8G("inset",!0),C.R7$(),C.Dyx(F.filteredItems))},dependencies:[l.BC,l.S1,l.nf,l.uz,l.eY,l.W9,l.ai,l.Jm,l.QW,l.eU,vt.MD]}),h})();var D0=_e(7673),mh=_e(1985),P0=_e(8455),ep=_e(274),el=_e(5964),sr=_e(6354),ps=_e(980),_l=_e(5558);class xd{}class Wa{}class pl{constructor(h){this.normalizedNames=new Map,this.lazyUpdate=null,h?"string"==typeof h?this.lazyInit=()=>{this.headers=new Map,h.split("\n").forEach(A=>{const I=A.indexOf(":");if(I>0){const F=A.slice(0,I),K=F.toLowerCase(),Te=A.slice(I+1).trim();this.maybeSetNormalizedName(F,K),this.headers.has(K)?this.headers.get(K).push(Te):this.headers.set(K,[Te])}})}:typeof Headers<"u"&&h instanceof Headers?(this.headers=new Map,h.forEach((A,I)=>{this.setHeaderEntries(I,A)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(h).forEach(([A,I])=>{this.setHeaderEntries(A,I)})}:this.headers=new Map}has(h){return this.init(),this.headers.has(h.toLowerCase())}get(h){this.init();const A=this.headers.get(h.toLowerCase());return A&&A.length>0?A[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(h){return this.init(),this.headers.get(h.toLowerCase())||null}append(h,A){return this.clone({name:h,value:A,op:"a"})}set(h,A){return this.clone({name:h,value:A,op:"s"})}delete(h,A){return this.clone({name:h,value:A,op:"d"})}maybeSetNormalizedName(h,A){this.normalizedNames.has(A)||this.normalizedNames.set(A,h)}init(){this.lazyInit&&(this.lazyInit instanceof pl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(h=>this.applyUpdate(h)),this.lazyUpdate=null))}copyFrom(h){h.init(),Array.from(h.headers.keys()).forEach(A=>{this.headers.set(A,h.headers.get(A)),this.normalizedNames.set(A,h.normalizedNames.get(A))})}clone(h){const A=new pl;return A.lazyInit=this.lazyInit&&this.lazyInit instanceof pl?this.lazyInit:this,A.lazyUpdate=(this.lazyUpdate||[]).concat([h]),A}applyUpdate(h){const A=h.name.toLowerCase();switch(h.op){case"a":case"s":let I=h.value;if("string"==typeof I&&(I=[I]),0===I.length)return;this.maybeSetNormalizedName(h.name,A);const F=("a"===h.op?this.headers.get(A):void 0)||[];F.push(...I),this.headers.set(A,F);break;case"d":const K=h.value;if(K){let Te=this.headers.get(A);if(!Te)return;Te=Te.filter(je=>-1===K.indexOf(je)),0===Te.length?(this.headers.delete(A),this.normalizedNames.delete(A)):this.headers.set(A,Te)}else this.headers.delete(A),this.normalizedNames.delete(A)}}setHeaderEntries(h,A){const I=(Array.isArray(A)?A:[A]).map(K=>K.toString()),F=h.toLowerCase();this.headers.set(F,I),this.maybeSetNormalizedName(h,F)}forEach(h){this.init(),Array.from(this.normalizedNames.keys()).forEach(A=>h(this.normalizedNames.get(A),this.headers.get(A)))}}class Ua{encodeKey(h){return Kh(h)}encodeValue(h){return Kh(h)}decodeKey(h){return decodeURIComponent(h)}decodeValue(h){return decodeURIComponent(h)}}const Od=/%(\d[a-f0-9])/gi,$s={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Kh(y){return encodeURIComponent(y).replace(Od,(h,A)=>{var I;return null!==(I=$s[A])&&void 0!==I?I:h})}function Yh(y){return`${y}`}class pu{constructor(h={}){if(this.updates=null,this.cloneFrom=null,this.encoder=h.encoder||new Ua,h.fromString){if(h.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Fl(y,h){const A=new Map;return y.length>0&&y.replace(/^\?/,"").split("&").forEach(F=>{const K=F.indexOf("="),[Te,je]=-1==K?[h.decodeKey(F),""]:[h.decodeKey(F.slice(0,K)),h.decodeValue(F.slice(K+1))],ze=A.get(Te)||[];ze.push(je),A.set(Te,ze)}),A}(h.fromString,this.encoder)}else h.fromObject?(this.map=new Map,Object.keys(h.fromObject).forEach(A=>{const I=h.fromObject[A],F=Array.isArray(I)?I.map(Yh):[Yh(I)];this.map.set(A,F)})):this.map=null}has(h){return this.init(),this.map.has(h)}get(h){this.init();const A=this.map.get(h);return A?A[0]:null}getAll(h){return this.init(),this.map.get(h)||null}keys(){return this.init(),Array.from(this.map.keys())}append(h,A){return this.clone({param:h,value:A,op:"a"})}appendAll(h){const A=[];return Object.keys(h).forEach(I=>{const F=h[I];Array.isArray(F)?F.forEach(K=>{A.push({param:I,value:K,op:"a"})}):A.push({param:I,value:F,op:"a"})}),this.clone(A)}set(h,A){return this.clone({param:h,value:A,op:"s"})}delete(h,A){return this.clone({param:h,value:A,op:"d"})}toString(){return this.init(),this.keys().map(h=>{const A=this.encoder.encodeKey(h);return this.map.get(h).map(I=>A+"="+this.encoder.encodeValue(I)).join("&")}).filter(h=>""!==h).join("&")}clone(h){const A=new pu({encoder:this.encoder});return A.cloneFrom=this.cloneFrom||this,A.updates=(this.updates||[]).concat(h),A}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(h=>this.map.set(h,this.cloneFrom.map.get(h))),this.updates.forEach(h=>{switch(h.op){case"a":case"s":const A=("a"===h.op?this.map.get(h.param):void 0)||[];A.push(Yh(h.value)),this.map.set(h.param,A);break;case"d":if(void 0===h.value){this.map.delete(h.param);break}{let I=this.map.get(h.param)||[];const F=I.indexOf(Yh(h.value));-1!==F&&I.splice(F,1),I.length>0?this.map.set(h.param,I):this.map.delete(h.param)}}}),this.cloneFrom=this.updates=null)}}class Ld{constructor(){this.map=new Map}set(h,A){return this.map.set(h,A),this}get(h){return this.map.has(h)||this.map.set(h,h.defaultValue()),this.map.get(h)}delete(h){return this.map.delete(h),this}has(h){return this.map.has(h)}keys(){return this.map.keys()}}function ih(y){return typeof ArrayBuffer<"u"&&y instanceof ArrayBuffer}function J0(y){return typeof Blob<"u"&&y instanceof Blob}function v1(y){return typeof FormData<"u"&&y instanceof FormData}class Bd{constructor(h,A,I,F){var K,Te;let je;if(this.url=A,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=h.toUpperCase(),function Vl(y){switch(y){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||F?(this.body=void 0!==I?I:null,je=F):je=I,je&&(this.reportProgress=!!je.reportProgress,this.withCredentials=!!je.withCredentials,je.responseType&&(this.responseType=je.responseType),je.headers&&(this.headers=je.headers),je.context&&(this.context=je.context),je.params&&(this.params=je.params),this.transferCache=je.transferCache),null!==(K=this.headers)&&void 0!==K||(this.headers=new pl),null!==(Te=this.context)&&void 0!==Te||(this.context=new Ld),this.params){const ze=this.params.toString();if(0===ze.length)this.urlWithParams=A;else{const ut=A.indexOf("?");this.urlWithParams=A+(-1===ut?"?":ut<A.length-1?"&":"")+ze}}else this.params=new pu,this.urlWithParams=A}serializeBody(){return null===this.body?null:"string"==typeof this.body||ih(this.body)||J0(this.body)||v1(this.body)||function Zh(y){return typeof URLSearchParams<"u"&&y instanceof URLSearchParams}(this.body)?this.body:this.body instanceof pu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||v1(this.body)?null:J0(this.body)?this.body.type||null:ih(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(h={}){var A,I,F,K;const Te=h.method||this.method,je=h.url||this.url,ze=h.responseType||this.responseType,ut=null!==(A=h.transferCache)&&void 0!==A?A:this.transferCache,nt=void 0!==h.body?h.body:this.body,pt=null!==(I=h.withCredentials)&&void 0!==I?I:this.withCredentials,bt=null!==(F=h.reportProgress)&&void 0!==F?F:this.reportProgress;let rn=h.headers||this.headers,fn=h.params||this.params;const mn=null!==(K=h.context)&&void 0!==K?K:this.context;return void 0!==h.setHeaders&&(rn=Object.keys(h.setHeaders).reduce((wn,Nt)=>wn.set(Nt,h.setHeaders[Nt]),rn)),h.setParams&&(fn=Object.keys(h.setParams).reduce((wn,Nt)=>wn.set(Nt,h.setParams[Nt]),fn)),new Bd(Te,je,nt,{params:fn,headers:rn,context:mn,reportProgress:bt,responseType:ze,withCredentials:pt,transferCache:ut})}}var Vc=function(y){return y[y.Sent=0]="Sent",y[y.UploadProgress=1]="UploadProgress",y[y.ResponseHeader=2]="ResponseHeader",y[y.DownloadProgress=3]="DownloadProgress",y[y.Response=4]="Response",y[y.User=5]="User",y}(Vc||{});class ns{constructor(h,A=200,I="OK"){this.headers=h.headers||new pl,this.status=void 0!==h.status?h.status:A,this.statusText=h.statusText||I,this.url=h.url||null,this.ok=this.status>=200&&this.status<300}}class Nd extends ns{constructor(h={}){super(h),this.type=Vc.ResponseHeader}clone(h={}){return new Nd({headers:h.headers||this.headers,status:void 0!==h.status?h.status:this.status,statusText:h.statusText||this.statusText,url:h.url||this.url||void 0})}}class Fd extends ns{constructor(h={}){super(h),this.type=Vc.Response,this.body=void 0!==h.body?h.body:null}clone(h={}){return new Fd({body:void 0!==h.body?h.body:this.body,headers:h.headers||this.headers,status:void 0!==h.status?h.status:this.status,statusText:h.statusText||this.statusText,url:h.url||this.url||void 0})}}class Jc extends ns{constructor(h){super(h,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${h.url||"(unknown url)"}`:`Http failure response for ${h.url||"(unknown url)"}: ${h.status} ${h.statusText}`,this.error=h.error||null}}function vh(y,h){return{body:h,headers:y.headers,context:y.context,observe:y.observe,params:y.params,reportProgress:y.reportProgress,responseType:y.responseType,withCredentials:y.withCredentials,transferCache:y.transferCache}}let ql=(()=>{var y;class h{constructor(I){this.handler=I}request(I,F,K={}){let Te;if(I instanceof Bd)Te=I;else{let ut,nt;ut=K.headers instanceof pl?K.headers:new pl(K.headers),K.params&&(nt=K.params instanceof pu?K.params:new pu({fromObject:K.params})),Te=new Bd(I,F,void 0!==K.body?K.body:null,{headers:ut,context:K.context,params:nt,reportProgress:K.reportProgress,responseType:K.responseType||"json",withCredentials:K.withCredentials,transferCache:K.transferCache})}const je=(0,D0.of)(Te).pipe((0,ep.H)(ut=>this.handler.handle(ut)));if(I instanceof Bd||"events"===K.observe)return je;const ze=je.pipe((0,el.p)(ut=>ut instanceof Fd));switch(K.observe||"body"){case"body":switch(Te.responseType){case"arraybuffer":return ze.pipe((0,sr.T)(ut=>{if(null!==ut.body&&!(ut.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ut.body}));case"blob":return ze.pipe((0,sr.T)(ut=>{if(null!==ut.body&&!(ut.body instanceof Blob))throw new Error("Response is not a Blob.");return ut.body}));case"text":return ze.pipe((0,sr.T)(ut=>{if(null!==ut.body&&"string"!=typeof ut.body)throw new Error("Response is not a string.");return ut.body}));default:return ze.pipe((0,sr.T)(ut=>ut.body))}case"response":return ze;default:throw new Error(`Unreachable: unhandled observe type ${K.observe}}`)}}delete(I,F={}){return this.request("DELETE",I,F)}get(I,F={}){return this.request("GET",I,F)}head(I,F={}){return this.request("HEAD",I,F)}jsonp(I,F){return this.request("JSONP",I,{params:(new pu).append(F,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(I,F={}){return this.request("OPTIONS",I,F)}patch(I,F,K={}){return this.request("PATCH",I,vh(K,F))}post(I,F,K={}){return this.request("POST",I,vh(K,F))}put(I,F,K={}){return this.request("PUT",I,vh(K,F))}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(xd))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();const fu=/^\)\]\}',?\n/;function zh(y){if(y.url)return y.url;const h="X-Request-URL".toLocaleLowerCase();return y.headers.get(h)}let z0=(()=>{var y;class h{constructor(){var I,F;this.fetchImpl=null!==(I=null===(F=(0,C.WQX)(v,{optional:!0}))||void 0===F?void 0:F.fetch)&&void 0!==I?I:fetch.bind(globalThis),this.ngZone=(0,C.WQX)(C.SKi)}handle(I){return new mh.c(F=>{const K=new AbortController;return this.doRequest(I,K.signal,F).then(r,Te=>F.error(new Jc({error:Te}))),()=>K.abort()})}doRequest(I,F,K){var Te=this;return(0,Ht.A)(function*(){var je;const ze=Te.createRequestInit(I);let ut;try{const _n=Te.ngZone.runOutsideAngular(()=>Te.fetchImpl(I.urlWithParams,{signal:F,...ze}));(function d(y){y.then(r,r)})(_n),K.next({type:Vc.Sent}),ut=yield _n}catch(_n){var nt;return void K.error(new Jc({error:_n,status:null!==(nt=_n.status)&&void 0!==nt?nt:0,statusText:_n.statusText,url:I.urlWithParams,headers:_n.headers}))}const pt=new pl(ut.headers),bt=ut.statusText,rn=null!==(je=zh(ut))&&void 0!==je?je:I.urlWithParams;let fn=ut.status,mn=null;if(I.reportProgress&&K.next(new Nd({headers:pt,status:fn,statusText:bt,url:rn})),ut.body){const _n=ut.headers.get("content-length"),di=[],uo=ut.body.getReader();let ur,zo,Qo=0;const Qi=typeof Zone<"u"&&Zone.current;yield Te.ngZone.runOutsideAngular((0,Ht.A)(function*(){for(;;){const{done:Si,value:ko}=yield uo.read();if(Si)break;if(di.push(ko),Qo+=ko.length,I.reportProgress){var Yo,vo;zo="text"===I.responseType?(null!==(Yo=zo)&&void 0!==Yo?Yo:"")+(null!==(vo=ur)&&void 0!==vo?vo:ur=new TextDecoder).decode(ko,{stream:!0}):void 0;const vr=()=>K.next({type:Vc.DownloadProgress,total:_n?+_n:void 0,loaded:Qo,partialText:zo});Qi?Qi.run(vr):vr()}}}));const Po=Te.concatChunks(di,Qo);try{var wn;const Yo=null!==(wn=ut.headers.get("Content-Type"))&&void 0!==wn?wn:"";mn=Te.parseBody(I,Po,Yo)}catch(Yo){var Nt;return void K.error(new Jc({error:Yo,headers:new pl(ut.headers),status:ut.status,statusText:ut.statusText,url:null!==(Nt=zh(ut))&&void 0!==Nt?Nt:I.urlWithParams}))}}0===fn&&(fn=mn?200:0),fn>=200&&fn<300?(K.next(new Fd({body:mn,headers:pt,status:fn,statusText:bt,url:rn})),K.complete()):K.error(new Jc({error:mn,headers:pt,status:fn,statusText:bt,url:rn}))})()}parseBody(I,F,K){switch(I.responseType){case"json":const Te=(new TextDecoder).decode(F).replace(fu,"");return""===Te?null:JSON.parse(Te);case"text":return(new TextDecoder).decode(F);case"blob":return new Blob([F],{type:K});case"arraybuffer":return F.buffer}}createRequestInit(I){const F={},K=I.withCredentials?"include":void 0;if(I.headers.forEach((Te,je)=>F[Te]=je.join(",")),I.headers.has("Accept")||(F.Accept="application/json, text/plain, */*"),!I.headers.has("Content-Type")){const Te=I.detectContentTypeHeader();null!==Te&&(F["Content-Type"]=Te)}return{body:I.serializeBody(),method:I.method,headers:F,credentials:K}}concatChunks(I,F){const K=new Uint8Array(F);let Te=0;for(const je of I)K.set(je,Te),Te+=je.length;return K}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();class v{}function r(){}function b(y,h){return h(y)}const H=new C.nKC(""),J=new C.nKC(""),re=new C.nKC("",{providedIn:"root",factory:()=>!0});let Fe=(()=>{var y;class h extends xd{constructor(I,F){super(),this.backend=I,this.injector=F,this.chain=null,this.pendingTasks=(0,C.WQX)(C.TgB),this.contributeToStability=(0,C.WQX)(re)}handle(I){if(null===this.chain){const F=Array.from(new Set([...this.injector.get(H),...this.injector.get(J,[])]));this.chain=F.reduceRight((K,Te)=>function R(y,h,A){return(I,F)=>(0,C.N4e)(A,()=>h(I,K=>y(K,F)))}(K,Te,this.injector),b)}if(this.contributeToStability){const F=this.pendingTasks.add();return this.chain(I,K=>this.backend.handle(K)).pipe((0,ps.j)(()=>this.pendingTasks.remove(F)))}return this.chain(I,F=>this.backend.handle(F))}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(Wa),C.KVO(C.uvJ))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();const $t=/^\)\]\}',?\n/;let ci=(()=>{var y;class h{constructor(I){this.xhrFactory=I}handle(I){if("JSONP"===I.method)throw new C.wOt(-2800,!1);const F=this.xhrFactory;return(F.\u0275loadImpl?(0,P0.H)(F.\u0275loadImpl()):(0,D0.of)(null)).pipe((0,_l.n)(()=>new mh.c(Te=>{const je=F.build();if(je.open(I.method,I.urlWithParams),I.withCredentials&&(je.withCredentials=!0),I.headers.forEach((wn,Nt)=>je.setRequestHeader(wn,Nt.join(","))),I.headers.has("Accept")||je.setRequestHeader("Accept","application/json, text/plain, */*"),!I.headers.has("Content-Type")){const wn=I.detectContentTypeHeader();null!==wn&&je.setRequestHeader("Content-Type",wn)}if(I.responseType){const wn=I.responseType.toLowerCase();je.responseType="json"!==wn?wn:"text"}const ze=I.serializeBody();let ut=null;const nt=()=>{if(null!==ut)return ut;const wn=je.statusText||"OK",Nt=new pl(je.getAllResponseHeaders()),Ln=function Sn(y){return"responseURL"in y&&y.responseURL?y.responseURL:/^X-Request-URL:/m.test(y.getAllResponseHeaders())?y.getResponseHeader("X-Request-URL"):null}(je)||I.url;return ut=new Nd({headers:Nt,status:je.status,statusText:wn,url:Ln}),ut},pt=()=>{let{headers:wn,status:Nt,statusText:Ln,url:_n}=nt(),di=null;204!==Nt&&(di=typeof je.response>"u"?je.responseText:je.response),0===Nt&&(Nt=di?200:0);let uo=Nt>=200&&Nt<300;if("json"===I.responseType&&"string"==typeof di){const Qo=di;di=di.replace($t,"");try{di=""!==di?JSON.parse(di):null}catch(ur){di=Qo,uo&&(uo=!1,di={error:ur,text:di})}}uo?(Te.next(new Fd({body:di,headers:wn,status:Nt,statusText:Ln,url:_n||void 0})),Te.complete()):Te.error(new Jc({error:di,headers:wn,status:Nt,statusText:Ln,url:_n||void 0}))},bt=wn=>{const{url:Nt}=nt(),Ln=new Jc({error:wn,status:je.status||0,statusText:je.statusText||"Unknown Error",url:Nt||void 0});Te.error(Ln)};let rn=!1;const fn=wn=>{rn||(Te.next(nt()),rn=!0);let Nt={type:Vc.DownloadProgress,loaded:wn.loaded};wn.lengthComputable&&(Nt.total=wn.total),"text"===I.responseType&&je.responseText&&(Nt.partialText=je.responseText),Te.next(Nt)},mn=wn=>{let Nt={type:Vc.UploadProgress,loaded:wn.loaded};wn.lengthComputable&&(Nt.total=wn.total),Te.next(Nt)};return je.addEventListener("load",pt),je.addEventListener("error",bt),je.addEventListener("timeout",bt),je.addEventListener("abort",bt),I.reportProgress&&(je.addEventListener("progress",fn),null!==ze&&je.upload&&je.upload.addEventListener("progress",mn)),je.send(ze),Te.next({type:Vc.Sent}),()=>{je.removeEventListener("error",bt),je.removeEventListener("abort",bt),je.removeEventListener("load",pt),je.removeEventListener("timeout",bt),I.reportProgress&&(je.removeEventListener("progress",fn),null!==ze&&je.upload&&je.upload.removeEventListener("progress",mn)),je.readyState!==je.DONE&&je.abort()}})))}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(vt.N0))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();const Dn=new C.nKC(""),bi=new C.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ro=new C.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class te{}let L=(()=>{var y;class h{constructor(I,F,K){this.doc=I,this.platform=F,this.cookieName=K,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const I=this.doc.cookie||"";return I!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,vt._b)(I,this.cookieName),this.lastCookieString=I),this.lastToken}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(vt.qQ),C.KVO(C.Agw),C.KVO(bi))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();function j(y,h){const A=y.url.toLowerCase();if(!(0,C.WQX)(Dn)||"GET"===y.method||"HEAD"===y.method||A.startsWith("http://")||A.startsWith("https://"))return h(y);const I=(0,C.WQX)(te).getToken(),F=(0,C.WQX)(ro);return null!=I&&!y.headers.has(F)&&(y=y.clone({headers:y.headers.set(F,I)})),h(y)}const Ka_mapbox_accessToken="pk.eyJ1IjoiZHpmdWxsc3RhY2tkZXYiLCJhIjoiY2x2eWJkejkzMjVodTJrbnlvaGs2c2Y0ZyJ9.IVAMRDDapDnAT7KWCYk4mA",Ka_firebaseConfig={apiKey:"AIzaSyCV-vExmckUfc3t0mAOrtOOIUpnvkDUw2Y",authDomain:"urbanecho-dcb01.firebaseapp.com",projectId:"urbanecho-dcb01",storageBucket:"urbanecho-dcb01.appspot.com",messagingSenderId:"681789095193",appId:"1:681789095193:web:d2dd5f9add0fb9b5be5988"};let e1=(()=>{var y;class h{constructor(){this.address=[],this.mapboxToken="pk.eyJ1IjoiZHpmdWxsc3RhY2tkZXYiLCJhIjoiY2x6b21oYmtxMHlpbjJrcXdxZzQ3ZW9meSJ9.tLI1_4tHGZbLMdLtyopXdw",this.http=(0,C.WQX)(ql)}search_word(I){return this.http.get("https://api.mapbox.com/geocoding/v5/mapbox.places/"+I+".json?types=address&access_token="+Ka_mapbox_accessToken).pipe((0,sr.T)(K=>K.features))}getAdresseFromCoords(I,F){return this.http.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${F},${I}.json?types=address&access_token=${Ka_mapbox_accessToken}`).pipe((0,sr.T)(Te=>Te))}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})();const _1=["modal"],O1=["form"];function Jh(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2," Veuillez fournir le titre de votre signalement."),C.k0s()())}function y1(y,h){if(1&y){const A=C.RV6();C.j41(0,"ion-item",30),C.bIt("click",function(){const F=C.eBV(A).$implicit,K=C.XpG(2);return C.Njj(K.onSelect(F))}),C.nrm(1,"ion-icon",31),C.j41(2,"p"),C.EFF(3),C.k0s()()}if(2&y){const A=h.$implicit;C.R7$(3),C.JRh(A)}}function Mo(y,h){if(1&y&&(C.j41(0,"ion-list",28),C.DNE(1,y1,4,1,"ion-item",29),C.k0s()),2&y){const A=C.XpG();C.R7$(),C.Y8G("ngForOf",A.Alladresses)}}function ua(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2," Veuillez fournir l'adresse du lieu de signalement."),C.k0s()())}function tp(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2,"Veuillez choisir le type de signalement."),C.k0s()())}function t1(y,h){if(1&y){const A=C.RV6();C.j41(0,"app-typehead",32),C.bIt("selectionChange",function(F){C.eBV(A);const K=C.XpG();return C.Njj(K.DestinatairesSelectionChanged(F))})("selectionCancel",function(){C.eBV(A),C.XpG();const F=C.sdS(34);return C.Njj(F.dismiss())}),C.k0s()}if(2&y){const A=C.XpG();C.Y8G("items",A.categories)("selectedItems",A.selectedDestinataires())}}function yl(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2," Veuillez choisir le destinataire du signalement."),C.k0s()())}function ed(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2," Veuillez fournir la description de votre signalement (maximum 1000 caract\xe8res)."),C.k0s()())}function Bu(y,h){if(1&y){const A=C.RV6();C.qex(0),C.j41(1,"ion-col",33),C.nrm(2,"ion-img",34),C.j41(3,"ion-button",22),C.bIt("click",function(){const F=C.eBV(A).index,K=C.XpG();return C.Njj(K.removePhoto(F))}),C.nrm(4,"ion-icon",35),C.k0s()(),C.bVm()}if(2&y){const A=h.$implicit;C.R7$(2),C.Y8G("src",A.webviewPath)}}function nl(y,h){1&y&&(C.j41(0,"div",5)(1,"label",27),C.EFF(2,"Veuillez fournir au moins une photo."),C.k0s()())}let np=(()=>{var y;class h{get Alladresses(){return this.mapboxService.address}get titlesInvalid(){return this.formSubmitted&&this.signalementForm.controls.title.invalid}get contentIsInvalid(){return this.formSubmitted&&this.signalementForm.controls.content.invalid}get addressIsInvalid(){return this.formSubmitted&&this.signalementForm.controls.address.invalid}get selectedTypeIsInvalid(){return this.formSubmitted&&this.signalementForm.controls.selectedType.invalid}get recipientTypeIsInvalid(){return this.formSubmitted&&this.selectedDestinataires().length<1}constructor(){this.signalementsService=(0,C.WQX)(Jn.W),this.router=(0,C.WQX)(se.Ix),this.photoService=(0,C.WQX)(Q0),this.locationService=(0,C.WQX)(zs),this.mapboxService=(0,C.WQX)(e1),this.destroyRef=(0,C.WQX)(C.abz),this.loadingController=(0,C.WQX)(Nn),this.toasService=(0,C.WQX)(fa),this.formSubmitted=!1,this.categories=gl.L,this.destinatairesSelections="aucun",this.selectedDestinataires=(0,C.vPA)([]),this.signalementPosition=(0,C.vPA)({lat:0,lng:0}),this.signalementForm=new pn.gE({title:new pn.MJ("",[pn.k0.required]),content:new pn.MJ("",[pn.k0.required,pn.k0.maxLength(1e3)]),address:new pn.MJ("",[pn.k0.required]),selectedType:new pn.MJ("",[pn.k0.required]),photos:new pn.Yp([],[pn.k0.required])}),(0,Ut.a)({closeCircle:It.P0k,camera:It.UIk,send:It.tN8,locateOutline:It.jew,pin:It.y_k})}get photos(){return this.signalementForm.get("photos")}formatData(I){if(1===I.length){const F=this.categories.find(K=>K.value===I[0]);return null==F?void 0:F.text}return`${I.length} destinataires`}DestinatairesSelectionChanged(I){this.selectedDestinataires.set(I),this.destinatairesSelections=this.formatData(this.selectedDestinataires()),console.log("categorie choisi par moi",this.selectedDestinataires()),this.modal.dismiss()}addPhoto(){var I=this;return(0,Ht.A)(function*(){const F=yield I.presentLoading();yield I.photoService.addNewToGallery(),yield F.dismiss();const K=new pn.MJ(I.photoService.photos[I.photoService.photos.length-1].webviewPath,pn.k0.required);I.photos.push(K)})()}removePhoto(I){this.photoService.removePhoto(I)}getCurrentLocation(){var I=this;return(0,Ht.A)(function*(){I.signalementForm.controls.address.setValue("");const F=yield I.locationService.getCurrentPosition();if(F){console.log("this is my position : ",F),I.signalementPosition.set({lat:F.latitude,lng:F.longitude});const K=I.mapboxService.getAdresseFromCoords(F.latitude,F.longitude).subscribe({next:Te=>{var je;const ze=null===(je=Te.features[0])||void 0===je?void 0:je.place_name;console.log(ze,"as place name"),I.signalementForm.controls.address.setValue(ze)},error:Te=>{console.error("Erreur lors de la r\xe9cup\xe9ration de l'adresse:",Te)}});I.destroyRef.onDestroy(()=>{K.unsubscribe()})}})()}search(I){var F=this;return(0,Ht.A)(function*(){const K=I.target.value.toLowerCase();if(K&&K.length>0){const Te=F.mapboxService.search_word(K).subscribe({next:je=>{F.mapboxService.address=je.map(ze=>ze.place_name)}});F.destroyRef.onDestroy(()=>{Te.unsubscribe()})}else F.mapboxService.address=[]})()}onSelect(I){var F=this;return(0,Ht.A)(function*(){F.signalementForm.controls.address.setValue(I),F.mapboxService.address=[];const K=yield F.locationService.getCurrentPosition();K&&(console.log("this is my position : ",K),F.signalementPosition.set({lat:K.latitude,lng:K.longitude}))})()}onFormSubmit(){var I=this;return(0,Ht.A)(function*(){if(I.formSubmitted=!0,I.signalementForm.invalid)return;const F={id:"",title:I.signalementForm.value.title,location:I.signalementForm.value.address,date:(new Date).toISOString(),images:I.signalementForm.value.photos,content:I.signalementForm.value.content,coordinates:I.signalementPosition(),category:I.signalementForm.value.selectedType,recipient:I.selectedDestinataires(),status:"En cours",resolutionComment:"",confirmedByUsers:[],userId:I.signalementsService.userId()};console.log("this is my signalement location",F);try{yield I.signalementsService.addSignalement(F),yield I.signalementsService.loadSignalements(),I.toasService.presentToast("top","Signalement ajout\xe9 avec succ\xe8s"),console.log("Signalement ajout\xe9 avec succ\xe8s"),I.router.navigate(["/signalements/liste"])}catch(K){console.error("Erreur lors de l'ajout du signalement:",K),I.toasService.presentToast("top","Erreur lors de l'ajout du signalement")}I.signalementForm.reset(),I.selectedDestinataires.set([]),I.destinatairesSelections="aucun",I.photoService.photos=[]})()}get photosAreInvalid(){return this.formSubmitted&&0===this.photos.controls.length}presentLoading(){var I=this;return(0,Ht.A)(function*(){const F=yield I.loadingController.create({message:"Chargement..."});return yield F.present(),F})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-signaler"]],viewQuery:function(I,F){if(1&I&&(C.GBs(_1,7),C.GBs(O1,5)),2&I){let K;C.mGM(K=C.lsd())&&(F.modal=K.first),C.mGM(K=C.lsd())&&(F.form=K.first)}},standalone:!0,features:[C.aNF],decls:54,vars:12,consts:[["modal",""],[1,"formulaire"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","title","placeholder","Comportement raciste d'un vendeur"],[1,"error-message"],[2,"position","relative","display","flex","align-items","center"],["debounce","500","formControlName","address",2,"width","95%","position","relative",3,"ionInput","value"],["color","primary-contrast",1,"location-btn",3,"click"],["color","primary","slot","icon-only","name","locate-outline"],[2,"position","absolute","top","100%","width","100%","z-index","999"],["lines","none",4,"ngIf"],["placeholder","Choisir le Type de Signalement","formControlName","selectedType","name","typeSignalement","interface","action-sheet"],["value","comportement","name","comportement"],["value","incident","name","incident"],["button","true","detail","false","id","select-destinataires"],["slot","end","id","Destinataires","name","recipient"],["trigger","select-destinataires"],["placeholder","Veuillez fournir la description de votre signalement (maximum 100 caract\xe8res).","formControlName","content","autoGrow","true",3,"clearOnEdit"],[4,"ngFor","ngForOf"],[1,"fixed-bottom-buttons"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","camera"],["vertical","bottom","horizontal","end","slot","fixed"],["type","submit"],["name","send"],[1,"show"],["lines","none"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["name","pin"],["title","Destinataires",1,"ion-page",3,"selectionChange","selectionCancel","items","selectedItems"],["size","6"],[3,"src"],["slot","icon-only","name","close-circle","shape","circle"]],template:function(I,F){if(1&I){const K=C.RV6();C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),C.EFF(3,"Ajouter un Signalement"),C.k0s()()(),C.j41(4,"ion-content",1)(5,"form",2),C.bIt("ngSubmit",function(){return C.eBV(K),C.Njj(F.onFormSubmit())}),C.j41(6,"ion-item")(7,"ion-label",3),C.EFF(8,"Titre"),C.k0s(),C.nrm(9,"ion-input",4),C.k0s(),C.DNE(10,Jh,3,0,"div",5),C.j41(11,"ion-grid")(12,"ion-row")(13,"ion-col")(14,"div",6)(15,"ion-searchbar",7),C.bIt("ionInput",function(je){return C.eBV(K),C.Njj(F.search(je))}),C.k0s(),C.j41(16,"ion-button",8),C.bIt("click",function(){return C.eBV(K),C.Njj(F.getCurrentLocation())}),C.nrm(17,"ion-icon",9),C.k0s(),C.j41(18,"div",10),C.DNE(19,Mo,2,1,"ion-list",11),C.k0s()(),C.DNE(20,ua,3,0,"div",5),C.k0s()()(),C.j41(21,"ion-item")(22,"ion-select",12)(23,"ion-select-option",13),C.EFF(24," Comportement "),C.k0s(),C.j41(25,"ion-select-option",14),C.EFF(26," Incident "),C.k0s()()(),C.DNE(27,tp,3,0,"div",5),C.j41(28,"ion-item",15)(29,"ion-label"),C.EFF(30,"Destinataires"),C.k0s(),C.j41(31,"div",16),C.EFF(32),C.k0s()(),C.j41(33,"ion-modal",17,0),C.DNE(35,t1,1,2,"ng-template"),C.k0s(),C.DNE(36,yl,3,0,"div",5),C.j41(37,"ion-item")(38,"ion-label",3),C.EFF(39,"Contenu"),C.k0s(),C.nrm(40,"ion-textarea",18),C.k0s(),C.DNE(41,ed,3,0,"div",5),C.j41(42,"ion-item")(43,"ion-grid")(44,"ion-row"),C.DNE(45,Bu,5,1,"ng-container",19),C.k0s(),C.DNE(46,nl,3,0,"div",5),C.k0s()(),C.j41(47,"div",20)(48,"ion-fab",21)(49,"ion-fab-button",22),C.bIt("click",function(){return C.eBV(K),C.Njj(F.addPhoto())}),C.nrm(50,"ion-icon",23),C.k0s()(),C.j41(51,"ion-fab",24)(52,"ion-button",25),C.nrm(53,"ion-icon",26),C.k0s()()()()()}2&I&&(C.R7$(5),C.Y8G("formGroup",F.signalementForm),C.R7$(5),C.vxM(F.titlesInvalid?10:-1),C.R7$(5),C.Y8G("value",F.signalementForm.controls.address.value),C.R7$(4),C.Y8G("ngIf",F.Alladresses.length>0),C.R7$(),C.vxM(F.addressIsInvalid?20:-1),C.R7$(7),C.vxM(F.selectedTypeIsInvalid?27:-1),C.R7$(5),C.SpI(" ",F.destinatairesSelections," "),C.R7$(4),C.vxM(F.recipientTypeIsInvalid?36:-1),C.R7$(4),C.Y8G("clearOnEdit",!0),C.R7$(),C.vxM(F.contentIsInvalid?41:-1),C.R7$(4),C.Y8G("ngForOf",F.photoService.photos),C.R7$(),C.vxM(F.photosAreInvalid?46:-1))},dependencies:[l.lO,l.hU,l.ln,l.YW,l.Q8,l.iq,l.S1,l.KW,l.Jm,l.nc,l.nf,l.ai,l.uz,l.W9,l.he,l.BC,l.eU,l.$w,pn.YN,pn.qT,pn.BC,pn.cb,l.Nm,l.Ip,l.Sb,Xh,vt.MD,vt.Sq,vt.bT,pn.X1,pn.j4,pn.JD],styles:['@charset "UTF-8";ion-thumbnail[_ngcontent-%COMP%]{margin-right:10px}ion-img[_ngcontent-%COMP%]{object-fit:cover;width:50px;height:50px}.fixed-bottom-buttons[_ngcontent-%COMP%]{position:fixed;bottom:1rem;width:100%;display:flex;justify-content:space-between;padding:0 1rem;box-sizing:border-box;z-index:10}.location-btn[_ngcontent-%COMP%]{cursor:pointer;height:30px}.error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;margin-top:10px;text-align:center;opacity:0;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out forwards}.error-message[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}']}),h})(),cl=(()=>{var y;class h{constructor(){this.authPageTitle=C.hFB.required()}ngOnInit(){}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-authentification"]],inputs:{authPageTitle:[1,"authPageTitle"]},standalone:!0,features:[C.aNF],decls:6,vars:0,consts:[["onMounte",""]],template:function(I,F){1&I&&(C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),C.EFF(3," Authentification"),C.k0s()()(),C.j41(4,"ion-content"),C.nrm(5,"router-outlet"),C.k0s())},dependencies:[l.eU,l.ai,l.W9,l.BC,se.n3]}),h})();const wa=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>Promise.all([_e.e(2076),_e.e(5508)]).then(_e.bind(_e,5508)).then(y=>y.LoginPage)},{path:"signup",loadComponent:()=>Promise.all([_e.e(2076),_e.e(3453)]).then(_e.bind(_e,3453)).then(y=>y.SignupPage)},{path:"password-reset",loadComponent:()=>_e.e(7867).then(_e.bind(_e,7867)).then(y=>y.PasswordResetPage)}];let _h=(()=>{var y;class h{constructor(){}ngOnInit(){}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-not-found"]],standalone:!0,features:[C.aNF],decls:9,vars:0,consts:[[1,"full-page"],["src","assets/not-found.svg","alt","not found"],["routerLink","/"]],template:function(I,F){1&I&&(C.j41(0,"div",0)(1,"div"),C.nrm(2,"img",1),C.j41(3,"h1"),C.EFF(4,"Page Not Found"),C.k0s(),C.j41(5,"p"),C.EFF(6,"we can't seem to find the page you're looking for"),C.k0s(),C.j41(7,"a",2),C.EFF(8,"Back Home"),C.k0s()()())},dependencies:[se.Wk],styles:[".full-page[_ngcontent-%COMP%]{min-height:100vh;text-align:center;display:flex;justify-content:center;align-items:center}img[_ngcontent-%COMP%]{max-width:600px;display:block;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin-bottom:.5rem}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem;color:#5b5d60}a[_ngcontent-%COMP%]{color:#e86060;text-decoration:underline;text-transform:capitalize}"]}),h})();var Eu=_e(4796);const Cu=[{path:"",redirectTo:"signalements/liste",pathMatch:"full"},{path:"signalements",component:At,children:Va},{path:"signaler",component:np},{path:"auth",component:cl,children:wa},{path:"profile",component:(()=>{var y;class h{constructor(){this.authService=(0,C.WQX)(Eu.u),this.signalementsService=(0,C.WQX)(Jn.W),this.router=(0,C.WQX)(se.Ix),this.userName="",this.userEmail="",this.userCategory="",(0,Ut.a)({addOutline:It.EKF,searchOutline:It.jBE,playCircle:It.Jns,radio:It.Ow_,library:It.Yvo,search:It.$P,personOutline:It.wAZ,listOutline:It.PFj,idCardOutline:It.O0q,logOutOutline:It.z_V,notificationsOutline:It.rqk})}ngOnInit(){const I=this.authService.getCurrentUser();I&&(this.userName=I.displayName||"Utilisateur",this.userEmail=I.email||"Email non disponible")}goToNotifications(){this.router.navigate(["/notifications"])}logout(){var I=this;return(0,Ht.A)(function*(){yield I.authService.logout(),yield I.signalementsService.loadSignalements(),I.router.navigate(["/"])})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-profile"]],standalone:!0,features:[C.aNF],decls:26,vars:3,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","notifications-outline"],["slot","icon-only","name","log-out-outline"]],template:function(I,F){1&I&&(C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),C.EFF(3,"Profil"),C.k0s(),C.j41(4,"ion-buttons",0)(5,"ion-button",1),C.bIt("click",function(){return F.goToNotifications()}),C.nrm(6,"ion-icon",2),C.k0s(),C.j41(7,"ion-button",1),C.bIt("click",function(){return F.logout()}),C.nrm(8,"ion-icon",3),C.k0s()()()(),C.j41(9,"ion-content")(10,"ion-card")(11,"ion-card-header")(12,"ion-card-title"),C.EFF(13),C.k0s()(),C.j41(14,"ion-card-content")(15,"ion-list")(16,"ion-item")(17,"ion-label"),C.EFF(18,"Email"),C.k0s(),C.j41(19,"ion-text"),C.EFF(20),C.k0s()(),C.j41(21,"ion-item")(22,"ion-label"),C.EFF(23,"Cat\xe9gorie"),C.k0s(),C.j41(24,"ion-text"),C.EFF(25),C.k0s()()()()()()),2&I&&(C.R7$(13),C.SpI("Bonjour, ",F.userName,""),C.R7$(7),C.JRh(F.userEmail),C.R7$(5),C.JRh(F.userCategory))},dependencies:[l.iq,l.Jm,l.QW,l.BC,l.ai,l.he,l.tN,l.b_,l.IO,l.uz,l.nf,l.I9,l.ME,l.W9,l.eU]}),h})(),canActivate:[(()=>{var y;class h{constructor(I,F){this.authService=I,this.router=F}canActivate(){const I=this.authService.userSignal();return!(!I||I.isAnonymous)||(this.router.navigate(["/auth/login"]),!1)}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(Eu.u),C.KVO(se.Ix))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})()]},{path:"**",component:_h}];function ku(y){return null!==y&&"object"==typeof y&&"constructor"in y&&y.constructor===Object}function oh(y,h){void 0===y&&(y={}),void 0===h&&(h={}),Object.keys(h).forEach(A=>{typeof y[A]>"u"?y[A]=h[A]:ku(h[A])&&ku(y[A])&&Object.keys(h[A]).length>0&&oh(y[A],h[A])})}const mu={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Il(){const y=typeof document<"u"?document:{};return oh(y,mu),y}const Sp={document:mu,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:y=>typeof setTimeout>"u"?(y(),null):setTimeout(y,0),cancelAnimationFrame(y){typeof setTimeout>"u"||clearTimeout(y)}};function hc(){const y=typeof window<"u"?window:{};return oh(y,Sp),y}function L0(y){return void 0===y&&(y=""),y.trim().split(" ").filter(h=>!!h.trim())}function n1(y,h){return void 0===h&&(h=0),setTimeout(y,h)}function yc(){return Date.now()}function w1(y,h){void 0===h&&(h="x");const A=hc();let I,F,K;const Te=function t0(y){const h=hc();let A;return h.getComputedStyle&&(A=h.getComputedStyle(y,null)),!A&&y.currentStyle&&(A=y.currentStyle),A||(A=y.style),A}(y);return A.WebKitCSSMatrix?(F=Te.transform||Te.webkitTransform,F.split(",").length>6&&(F=F.split(", ").map(je=>je.replace(",",".")).join(", ")),K=new A.WebKitCSSMatrix("none"===F?"":F)):(K=Te.MozTransform||Te.OTransform||Te.MsTransform||Te.msTransform||Te.transform||Te.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),I=K.toString().split(",")),"x"===h&&(F=A.WebKitCSSMatrix?K.m41:16===I.length?parseFloat(I[12]):parseFloat(I[4])),"y"===h&&(F=A.WebKitCSSMatrix?K.m42:16===I.length?parseFloat(I[13]):parseFloat(I[5])),F||0}function L1(y){return"object"==typeof y&&null!==y&&y.constructor&&"Object"===Object.prototype.toString.call(y).slice(8,-1)}function af(y){return typeof window<"u"&&typeof window.HTMLElement<"u"?y instanceof HTMLElement:y&&(1===y.nodeType||11===y.nodeType)}function Vd(){const y=Object(arguments.length<=0?void 0:arguments[0]),h=["__proto__","constructor","prototype"];for(let A=1;A<arguments.length;A+=1){const I=A<0||arguments.length<=A?void 0:arguments[A];if(null!=I&&!af(I)){const F=Object.keys(Object(I)).filter(K=>h.indexOf(K)<0);for(let K=0,Te=F.length;K<Te;K+=1){const je=F[K],ze=Object.getOwnPropertyDescriptor(I,je);void 0!==ze&&ze.enumerable&&(L1(y[je])&&L1(I[je])?I[je].__swiper__?y[je]=I[je]:Vd(y[je],I[je]):!L1(y[je])&&L1(I[je])?(y[je]={},I[je].__swiper__?y[je]=I[je]:Vd(y[je],I[je])):y[je]=I[je])}}}return y}function bc(y,h,A){y.style.setProperty(h,A)}function Of(y){let{swiper:h,targetPosition:A,side:I}=y;const F=hc(),K=-h.translate;let je,Te=null;const ze=h.params.speed;h.wrapperEl.style.scrollSnapType="none",F.cancelAnimationFrame(h.cssModeFrameID);const ut=A>K?"next":"prev",nt=(bt,rn)=>"next"===ut&&bt>=rn||"prev"===ut&&bt<=rn,pt=()=>{je=(new Date).getTime(),null===Te&&(Te=je);const bt=Math.max(Math.min((je-Te)/ze,1),0),rn=.5-Math.cos(bt*Math.PI)/2;let fn=K+rn*(A-K);if(nt(fn,A)&&(fn=A),h.wrapperEl.scrollTo({[I]:fn}),nt(fn,A))return h.wrapperEl.style.overflow="hidden",h.wrapperEl.style.scrollSnapType="",setTimeout(()=>{h.wrapperEl.style.overflow="",h.wrapperEl.scrollTo({[I]:fn})}),void F.cancelAnimationFrame(h.cssModeFrameID);h.cssModeFrameID=F.requestAnimationFrame(pt)};pt()}function n0(y){return y.querySelector(".swiper-slide-transform")||y.shadowRoot&&y.shadowRoot.querySelector(".swiper-slide-transform")||y}function wc(y,h){return void 0===h&&(h=""),[...y.children].filter(A=>A.matches(h))}function o0(y){try{return void console.warn(y)}catch{}}function eu(y,h){void 0===h&&(h=[]);const A=document.createElement(y);return A.classList.add(...Array.isArray(h)?h:L0(h)),A}function gu(y){const h=hc(),A=Il(),I=y.getBoundingClientRect(),F=A.body;return{top:I.top+(y===h?h.scrollY:y.scrollTop)-(y.clientTop||F.clientTop||0),left:I.left+(y===h?h.scrollX:y.scrollLeft)-(y.clientLeft||F.clientLeft||0)}}function r1(y,h){return hc().getComputedStyle(y,null).getPropertyValue(h)}function B1(y){let A,h=y;if(h){for(A=0;null!==(h=h.previousSibling);)1===h.nodeType&&(A+=1);return A}}function N1(y,h){const A=[];let I=y.parentElement;for(;I;)h?I.matches(h)&&A.push(I):A.push(I),I=I.parentElement;return A}function ip(y,h){h&&y.addEventListener("transitionend",function A(I){I.target===y&&(h.call(y,I),y.removeEventListener("transitionend",A))})}function s1(y,h,A){const I=hc();return A?y["width"===h?"offsetWidth":"offsetHeight"]+parseFloat(I.getComputedStyle(y,null).getPropertyValue("width"===h?"margin-right":"margin-top"))+parseFloat(I.getComputedStyle(y,null).getPropertyValue("width"===h?"margin-left":"margin-bottom")):y.offsetWidth}function La(y){return(Array.isArray(y)?y:[y]).filter(h=>!!h)}function B0(y){return h=>Math.abs(h)>0&&y.browser&&y.browser.need3dFix&&Math.abs(h)%90==0?h+.001:h}let yh,Tp,Ap;function op(){return yh||(yh=function rm(){const y=hc(),h=Il();return{smoothScroll:h.documentElement&&h.documentElement.style&&"scrollBehavior"in h.documentElement.style,touch:!!("ontouchstart"in y||y.DocumentTouch&&h instanceof y.DocumentTouch)}}()),yh}function Lf(y){return void 0===y&&(y={}),Tp||(Tp=function Mp(y){let{userAgent:h}=void 0===y?{}:y;const A=op(),I=hc(),F=I.navigator.platform,K=h||I.navigator.userAgent,Te={ios:!1,android:!1},je=I.screen.width,ze=I.screen.height,ut=K.match(/(Android);?[\s\/]+([\d.]+)?/);let nt=K.match(/(iPad).*OS\s([\d_]+)/);const pt=K.match(/(iPod)(.*OS\s([\d_]+))?/),bt=!nt&&K.match(/(iPhone\sOS|iOS)\s([\d_]+)/),rn="Win32"===F;let fn="MacIntel"===F;return!nt&&fn&&A.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${je}x${ze}`)>=0&&(nt=K.match(/(Version)\/([\d.]+)/),nt||(nt=[0,1,"13_0_0"]),fn=!1),ut&&!rn&&(Te.os="android",Te.android=!0),(nt||bt||pt)&&(Te.os="ios",Te.ios=!0),Te}(y)),Tp}var sm={on(y,h,A){const I=this;if(!I.eventsListeners||I.destroyed||"function"!=typeof h)return I;const F=A?"unshift":"push";return y.split(" ").forEach(K=>{I.eventsListeners[K]||(I.eventsListeners[K]=[]),I.eventsListeners[K][F](h)}),I},once(y,h,A){const I=this;if(!I.eventsListeners||I.destroyed||"function"!=typeof h)return I;function F(){I.off(y,F),F.__emitterProxy&&delete F.__emitterProxy;for(var K=arguments.length,Te=new Array(K),je=0;je<K;je++)Te[je]=arguments[je];h.apply(I,Te)}return F.__emitterProxy=h,I.on(y,F,A)},onAny(y,h){const A=this;if(!A.eventsListeners||A.destroyed||"function"!=typeof y)return A;const I=h?"unshift":"push";return A.eventsAnyListeners.indexOf(y)<0&&A.eventsAnyListeners[I](y),A},offAny(y){const h=this;if(!h.eventsListeners||h.destroyed||!h.eventsAnyListeners)return h;const A=h.eventsAnyListeners.indexOf(y);return A>=0&&h.eventsAnyListeners.splice(A,1),h},off(y,h){const A=this;return!A.eventsListeners||A.destroyed||!A.eventsListeners||y.split(" ").forEach(I=>{typeof h>"u"?A.eventsListeners[I]=[]:A.eventsListeners[I]&&A.eventsListeners[I].forEach((F,K)=>{(F===h||F.__emitterProxy&&F.__emitterProxy===h)&&A.eventsListeners[I].splice(K,1)})}),A},emit(){const y=this;if(!y.eventsListeners||y.destroyed||!y.eventsListeners)return y;let h,A,I;for(var F=arguments.length,K=new Array(F),Te=0;Te<F;Te++)K[Te]=arguments[Te];return"string"==typeof K[0]||Array.isArray(K[0])?(h=K[0],A=K.slice(1,K.length),I=y):(h=K[0].events,A=K[0].data,I=K[0].context||y),A.unshift(I),(Array.isArray(h)?h:h.split(" ")).forEach(ze=>{y.eventsAnyListeners&&y.eventsAnyListeners.length&&y.eventsAnyListeners.forEach(ut=>{ut.apply(I,[ze,...A])}),y.eventsListeners&&y.eventsListeners[ze]&&y.eventsListeners[ze].forEach(ut=>{ut.apply(I,A)})}),y}};const y2=(y,h,A)=>{h&&!y.classList.contains(A)?y.classList.add(A):!h&&y.classList.contains(A)&&y.classList.remove(A)},Pc=(y,h,A)=>{h&&!y.classList.contains(A)?y.classList.add(A):!h&&y.classList.contains(A)&&y.classList.remove(A)},a1=(y,h)=>{if(!y||y.destroyed||!y.params)return;const I=h.closest(y.isElement?"swiper-slide":`.${y.params.slideClass}`);if(I){let F=I.querySelector(`.${y.params.lazyPreloaderClass}`);!F&&y.isElement&&(I.shadowRoot?F=I.shadowRoot.querySelector(`.${y.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{I.shadowRoot&&(F=I.shadowRoot.querySelector(`.${y.params.lazyPreloaderClass}`),F&&F.remove())})),F&&F.remove()}},Pp=(y,h)=>{if(!y.slides[h])return;const A=y.slides[h].querySelector('[loading="lazy"]');A&&A.removeAttribute("loading")},ap=y=>{if(!y||y.destroyed||!y.params)return;let h=y.params.lazyPreloadPrevNext;const A=y.slides.length;if(!A||!h||h<0)return;h=Math.min(h,A);const I="auto"===y.params.slidesPerView?y.slidesPerViewDynamic():Math.ceil(y.params.slidesPerView),F=y.activeIndex;if(y.params.grid&&y.params.grid.rows>1){const Te=F,je=[Te-h];return je.push(...Array.from({length:h}).map((ze,ut)=>Te+I+ut)),void y.slides.forEach((ze,ut)=>{je.includes(ze.column)&&Pp(y,ut)})}const K=F+I-1;if(y.params.rewind||y.params.loop)for(let Te=F-h;Te<=K+h;Te+=1){const je=(Te%A+A)%A;(je<F||je>K)&&Pp(y,je)}else for(let Te=Math.max(F-h,0);Te<=Math.min(K+h,A-1);Te+=1)Te!==F&&(Te>K||Te<F)&&Pp(y,Te)};var Eg={updateSize:function Bf(){const y=this;let h,A;const I=y.el;h=typeof y.params.width<"u"&&null!==y.params.width?y.params.width:I.clientWidth,A=typeof y.params.height<"u"&&null!==y.params.height?y.params.height:I.clientHeight,!(0===h&&y.isHorizontal()||0===A&&y.isVertical())&&(h=h-parseInt(r1(I,"padding-left")||0,10)-parseInt(r1(I,"padding-right")||0,10),A=A-parseInt(r1(I,"padding-top")||0,10)-parseInt(r1(I,"padding-bottom")||0,10),Number.isNaN(h)&&(h=0),Number.isNaN(A)&&(A=0),Object.assign(y,{width:h,height:A,size:y.isHorizontal()?h:A}))},updateSlides:function rp(){const y=this;function h(Po,Yo){return parseFloat(Po.getPropertyValue(y.getDirectionLabel(Yo))||0)}const A=y.params,{wrapperEl:I,slidesEl:F,size:K,rtlTranslate:Te,wrongRTL:je}=y,ze=y.virtual&&A.virtual.enabled,ut=ze?y.virtual.slides.length:y.slides.length,nt=wc(F,`.${y.params.slideClass}, swiper-slide`),pt=ze?y.virtual.slides.length:nt.length;let bt=[];const rn=[],fn=[];let mn=A.slidesOffsetBefore;"function"==typeof mn&&(mn=A.slidesOffsetBefore.call(y));let wn=A.slidesOffsetAfter;"function"==typeof wn&&(wn=A.slidesOffsetAfter.call(y));const Nt=y.snapGrid.length,Ln=y.slidesGrid.length;let _n=A.spaceBetween,di=-mn,uo=0,Qo=0;if(typeof K>"u")return;"string"==typeof _n&&_n.indexOf("%")>=0?_n=parseFloat(_n.replace("%",""))/100*K:"string"==typeof _n&&(_n=parseFloat(_n)),y.virtualSize=-_n,nt.forEach(Po=>{Te?Po.style.marginLeft="":Po.style.marginRight="",Po.style.marginBottom="",Po.style.marginTop=""}),A.centeredSlides&&A.cssMode&&(bc(I,"--swiper-centered-offset-before",""),bc(I,"--swiper-centered-offset-after",""));const ur=A.grid&&A.grid.rows>1&&y.grid;let zo;ur?y.grid.initSlides(nt):y.grid&&y.grid.unsetSlides();const Qi="auto"===A.slidesPerView&&A.breakpoints&&Object.keys(A.breakpoints).filter(Po=>typeof A.breakpoints[Po].slidesPerView<"u").length>0;for(let Po=0;Po<pt;Po+=1){let Yo;if(zo=0,nt[Po]&&(Yo=nt[Po]),ur&&y.grid.updateSlide(Po,Yo,nt),!nt[Po]||"none"!==r1(Yo,"display")){if("auto"===A.slidesPerView){Qi&&(nt[Po].style[y.getDirectionLabel("width")]="");const vo=getComputedStyle(Yo),Si=Yo.style.transform,ko=Yo.style.webkitTransform;if(Si&&(Yo.style.transform="none"),ko&&(Yo.style.webkitTransform="none"),A.roundLengths)zo=y.isHorizontal()?s1(Yo,"width",!0):s1(Yo,"height",!0);else{const vr=h(vo,"width"),Rs=h(vo,"padding-left"),$o=h(vo,"padding-right"),No=h(vo,"margin-left"),Xr=h(vo,"margin-right"),ga=vo.getPropertyValue("box-sizing");if(ga&&"border-box"===ga)zo=vr+No+Xr;else{const{clientWidth:xr,offsetWidth:qr}=Yo;zo=vr+Rs+$o+No+Xr+(qr-xr)}}Si&&(Yo.style.transform=Si),ko&&(Yo.style.webkitTransform=ko),A.roundLengths&&(zo=Math.floor(zo))}else zo=(K-(A.slidesPerView-1)*_n)/A.slidesPerView,A.roundLengths&&(zo=Math.floor(zo)),nt[Po]&&(nt[Po].style[y.getDirectionLabel("width")]=`${zo}px`);nt[Po]&&(nt[Po].swiperSlideSize=zo),fn.push(zo),A.centeredSlides?(di=di+zo/2+uo/2+_n,0===uo&&0!==Po&&(di=di-K/2-_n),0===Po&&(di=di-K/2-_n),Math.abs(di)<.001&&(di=0),A.roundLengths&&(di=Math.floor(di)),Qo%A.slidesPerGroup==0&&bt.push(di),rn.push(di)):(A.roundLengths&&(di=Math.floor(di)),(Qo-Math.min(y.params.slidesPerGroupSkip,Qo))%y.params.slidesPerGroup==0&&bt.push(di),rn.push(di),di=di+zo+_n),y.virtualSize+=zo+_n,uo=zo,Qo+=1}}if(y.virtualSize=Math.max(y.virtualSize,K)+wn,Te&&je&&("slide"===A.effect||"coverflow"===A.effect)&&(I.style.width=`${y.virtualSize+_n}px`),A.setWrapperSize&&(I.style[y.getDirectionLabel("width")]=`${y.virtualSize+_n}px`),ur&&y.grid.updateWrapperSize(zo,bt),!A.centeredSlides){const Po=[];for(let Yo=0;Yo<bt.length;Yo+=1){let vo=bt[Yo];A.roundLengths&&(vo=Math.floor(vo)),bt[Yo]<=y.virtualSize-K&&Po.push(vo)}bt=Po,Math.floor(y.virtualSize-K)-Math.floor(bt[bt.length-1])>1&&bt.push(y.virtualSize-K)}if(ze&&A.loop){const Po=fn[0]+_n;if(A.slidesPerGroup>1){const Yo=Math.ceil((y.virtual.slidesBefore+y.virtual.slidesAfter)/A.slidesPerGroup),vo=Po*A.slidesPerGroup;for(let Si=0;Si<Yo;Si+=1)bt.push(bt[bt.length-1]+vo)}for(let Yo=0;Yo<y.virtual.slidesBefore+y.virtual.slidesAfter;Yo+=1)1===A.slidesPerGroup&&bt.push(bt[bt.length-1]+Po),rn.push(rn[rn.length-1]+Po),y.virtualSize+=Po}if(0===bt.length&&(bt=[0]),0!==_n){const Po=y.isHorizontal()&&Te?"marginLeft":y.getDirectionLabel("marginRight");nt.filter((Yo,vo)=>!(A.cssMode&&!A.loop)||vo!==nt.length-1).forEach(Yo=>{Yo.style[Po]=`${_n}px`})}if(A.centeredSlides&&A.centeredSlidesBounds){let Po=0;fn.forEach(vo=>{Po+=vo+(_n||0)}),Po-=_n;const Yo=Po-K;bt=bt.map(vo=>vo<=0?-mn:vo>Yo?Yo+wn:vo)}if(A.centerInsufficientSlides){let Po=0;fn.forEach(vo=>{Po+=vo+(_n||0)}),Po-=_n;const Yo=(A.slidesOffsetBefore||0)+(A.slidesOffsetAfter||0);if(Po+Yo<K){const vo=(K-Po-Yo)/2;bt.forEach((Si,ko)=>{bt[ko]=Si-vo}),rn.forEach((Si,ko)=>{rn[ko]=Si+vo})}}if(Object.assign(y,{slides:nt,snapGrid:bt,slidesGrid:rn,slidesSizesGrid:fn}),A.centeredSlides&&A.cssMode&&!A.centeredSlidesBounds){bc(I,"--swiper-centered-offset-before",-bt[0]+"px"),bc(I,"--swiper-centered-offset-after",y.size/2-fn[fn.length-1]/2+"px");const Po=-y.snapGrid[0],Yo=-y.slidesGrid[0];y.snapGrid=y.snapGrid.map(vo=>vo+Po),y.slidesGrid=y.slidesGrid.map(vo=>vo+Yo)}if(pt!==ut&&y.emit("slidesLengthChange"),bt.length!==Nt&&(y.params.watchOverflow&&y.checkOverflow(),y.emit("snapGridLengthChange")),rn.length!==Ln&&y.emit("slidesGridLengthChange"),A.watchSlidesProgress&&y.updateSlidesOffset(),y.emit("slidesUpdated"),!(ze||A.cssMode||"slide"!==A.effect&&"fade"!==A.effect)){const Po=`${A.containerModifierClass}backface-hidden`,Yo=y.el.classList.contains(Po);pt<=A.maxBackfaceHiddenSlides?Yo||y.el.classList.add(Po):Yo&&y.el.classList.remove(Po)}},updateAutoHeight:function Um(y){const h=this,A=[],I=h.virtual&&h.params.virtual.enabled;let K,F=0;"number"==typeof y?h.setTransition(y):!0===y&&h.setTransition(h.params.speed);const Te=je=>I?h.slides[h.getSlideIndexByData(je)]:h.slides[je];if("auto"!==h.params.slidesPerView&&h.params.slidesPerView>1)if(h.params.centeredSlides)(h.visibleSlides||[]).forEach(je=>{A.push(je)});else for(K=0;K<Math.ceil(h.params.slidesPerView);K+=1){const je=h.activeIndex+K;if(je>h.slides.length&&!I)break;A.push(Te(je))}else A.push(Te(h.activeIndex));for(K=0;K<A.length;K+=1)if(typeof A[K]<"u"){const je=A[K].offsetHeight;F=je>F?je:F}(F||0===F)&&(h.wrapperEl.style.height=`${F}px`)},updateSlidesOffset:function cf(){const y=this,h=y.slides,A=y.isElement?y.isHorizontal()?y.wrapperEl.offsetLeft:y.wrapperEl.offsetTop:0;for(let I=0;I<h.length;I+=1)h[I].swiperSlideOffset=(y.isHorizontal()?h[I].offsetLeft:h[I].offsetTop)-A-y.cssOverflowAdjustment()},updateSlidesProgress:function x1(y){void 0===y&&(y=this&&this.translate||0);const h=this,A=h.params,{slides:I,rtlTranslate:F,snapGrid:K}=h;if(0===I.length)return;typeof I[0].swiperSlideOffset>"u"&&h.updateSlidesOffset();let Te=-y;F&&(Te=y),h.visibleSlidesIndexes=[],h.visibleSlides=[];let je=A.spaceBetween;"string"==typeof je&&je.indexOf("%")>=0?je=parseFloat(je.replace("%",""))/100*h.size:"string"==typeof je&&(je=parseFloat(je));for(let ze=0;ze<I.length;ze+=1){const ut=I[ze];let nt=ut.swiperSlideOffset;A.cssMode&&A.centeredSlides&&(nt-=I[0].swiperSlideOffset);const pt=(Te+(A.centeredSlides?h.minTranslate():0)-nt)/(ut.swiperSlideSize+je),bt=(Te-K[0]+(A.centeredSlides?h.minTranslate():0)-nt)/(ut.swiperSlideSize+je),rn=-(Te-nt),fn=rn+h.slidesSizesGrid[ze],mn=rn>=0&&rn<=h.size-h.slidesSizesGrid[ze],wn=rn>=0&&rn<h.size-1||fn>1&&fn<=h.size||rn<=0&&fn>=h.size;wn&&(h.visibleSlides.push(ut),h.visibleSlidesIndexes.push(ze)),y2(ut,wn,A.slideVisibleClass),y2(ut,mn,A.slideFullyVisibleClass),ut.progress=F?-pt:pt,ut.originalProgress=F?-bt:bt}},updateProgress:function sp(y){const h=this;typeof y>"u"&&(y=h&&h.translate&&h.translate*(h.rtlTranslate?-1:1)||0);const A=h.params,I=h.maxTranslate()-h.minTranslate();let{progress:F,isBeginning:K,isEnd:Te,progressLoop:je}=h;const ze=K,ut=Te;if(0===I)F=0,K=!0,Te=!0;else{F=(y-h.minTranslate())/I;const nt=Math.abs(y-h.minTranslate())<1,pt=Math.abs(y-h.maxTranslate())<1;K=nt||F<=0,Te=pt||F>=1,nt&&(F=0),pt&&(F=1)}if(A.loop){const nt=h.getSlideIndexByData(0),pt=h.getSlideIndexByData(h.slides.length-1),bt=h.slidesGrid[nt],rn=h.slidesGrid[pt],fn=h.slidesGrid[h.slidesGrid.length-1],mn=Math.abs(y);je=mn>=bt?(mn-bt)/fn:(mn+fn-rn)/fn,je>1&&(je-=1)}Object.assign(h,{progress:F,progressLoop:je,isBeginning:K,isEnd:Te}),(A.watchSlidesProgress||A.centeredSlides&&A.autoHeight)&&h.updateSlidesProgress(y),K&&!ze&&h.emit("reachBeginning toEdge"),Te&&!ut&&h.emit("reachEnd toEdge"),(ze&&!K||ut&&!Te)&&h.emit("fromEdge"),h.emit("progress",F)},updateSlidesClasses:function rh(){const y=this,{slides:h,params:A,slidesEl:I,activeIndex:F}=y,Te=y.grid&&A.grid&&A.grid.rows>1,je=pt=>wc(I,`.${A.slideClass}${pt}, swiper-slide${pt}`)[0];let ze,ut,nt;if(y.virtual&&A.virtual.enabled)if(A.loop){let pt=F-y.virtual.slidesBefore;pt<0&&(pt=y.virtual.slides.length+pt),pt>=y.virtual.slides.length&&(pt-=y.virtual.slides.length),ze=je(`[data-swiper-slide-index="${pt}"]`)}else ze=je(`[data-swiper-slide-index="${F}"]`);else Te?(ze=h.filter(pt=>pt.column===F)[0],nt=h.filter(pt=>pt.column===F+1)[0],ut=h.filter(pt=>pt.column===F-1)[0]):ze=h[F];ze&&(Te||(nt=function pc(y,h){const A=[];for(;y.nextElementSibling;){const I=y.nextElementSibling;h?I.matches(h)&&A.push(I):A.push(I),y=I}return A}(ze,`.${A.slideClass}, swiper-slide`)[0],A.loop&&!nt&&(nt=h[0]),ut=function o1(y,h){const A=[];for(;y.previousElementSibling;){const I=y.previousElementSibling;h?I.matches(h)&&A.push(I):A.push(I),y=I}return A}(ze,`.${A.slideClass}, swiper-slide`)[0],A.loop&&0===!ut&&(ut=h[h.length-1]))),h.forEach(pt=>{Pc(pt,pt===ze,A.slideActiveClass),Pc(pt,pt===nt,A.slideNextClass),Pc(pt,pt===ut,A.slidePrevClass)}),y.emitSlidesClasses()},updateActiveIndex:function bh(y){const h=this,A=h.rtlTranslate?h.translate:-h.translate,{snapGrid:I,params:F,activeIndex:K,realIndex:Te,snapIndex:je}=h;let ut,ze=y;const nt=rn=>{let fn=rn-h.virtual.slidesBefore;return fn<0&&(fn=h.virtual.slides.length+fn),fn>=h.virtual.slides.length&&(fn-=h.virtual.slides.length),fn};if(typeof ze>"u"&&(ze=function am(y){const{slidesGrid:h,params:A}=y,I=y.rtlTranslate?y.translate:-y.translate;let F;for(let K=0;K<h.length;K+=1)typeof h[K+1]<"u"?I>=h[K]&&I<h[K+1]-(h[K+1]-h[K])/2?F=K:I>=h[K]&&I<h[K+1]&&(F=K+1):I>=h[K]&&(F=K);return A.normalizeSlideIndex&&(F<0||typeof F>"u")&&(F=0),F}(h)),I.indexOf(A)>=0)ut=I.indexOf(A);else{const rn=Math.min(F.slidesPerGroupSkip,ze);ut=rn+Math.floor((ze-rn)/F.slidesPerGroup)}if(ut>=I.length&&(ut=I.length-1),ze===K&&!h.params.loop)return void(ut!==je&&(h.snapIndex=ut,h.emit("snapIndexChange")));if(ze===K&&h.params.loop&&h.virtual&&h.params.virtual.enabled)return void(h.realIndex=nt(ze));const pt=h.grid&&F.grid&&F.grid.rows>1;let bt;if(h.virtual&&F.virtual.enabled&&F.loop)bt=nt(ze);else if(pt){const rn=h.slides.filter(mn=>mn.column===ze)[0];let fn=parseInt(rn.getAttribute("data-swiper-slide-index"),10);Number.isNaN(fn)&&(fn=Math.max(h.slides.indexOf(rn),0)),bt=Math.floor(fn/F.grid.rows)}else if(h.slides[ze]){const rn=h.slides[ze].getAttribute("data-swiper-slide-index");bt=rn?parseInt(rn,10):ze}else bt=ze;Object.assign(h,{previousSnapIndex:je,snapIndex:ut,previousRealIndex:Te,realIndex:bt,previousIndex:K,activeIndex:ze}),h.initialized&&ap(h),h.emit("activeIndexChange"),h.emit("snapIndexChange"),(h.initialized||h.params.runCallbacksOnInit)&&(Te!==bt&&h.emit("realIndexChange"),h.emit("slideChange"))},updateClickedSlide:function uf(y,h){const A=this,I=A.params;let F=y.closest(`.${I.slideClass}, swiper-slide`);!F&&A.isElement&&h&&h.length>1&&h.includes(y)&&[...h.slice(h.indexOf(y)+1,h.length)].forEach(je=>{!F&&je.matches&&je.matches(`.${I.slideClass}, swiper-slide`)&&(F=je)});let Te,K=!1;if(F)for(let je=0;je<A.slides.length;je+=1)if(A.slides[je]===F){K=!0,Te=je;break}if(!F||!K)return A.clickedSlide=void 0,void(A.clickedIndex=void 0);A.clickedSlide=F,A.clickedIndex=A.virtual&&A.params.virtual.enabled?parseInt(F.getAttribute("data-swiper-slide-index"),10):Te,I.slideToClickedSlide&&void 0!==A.clickedIndex&&A.clickedIndex!==A.activeIndex&&A.slideToClickedSlide()}},sh={getTranslate:function df(y){void 0===y&&(y=this.isHorizontal()?"x":"y");const{params:A,rtlTranslate:I,translate:F,wrapperEl:K}=this;if(A.virtualTranslate)return I?-F:F;if(A.cssMode)return F;let Te=w1(K,y);return Te+=this.cssOverflowAdjustment(),I&&(Te=-Te),Te||0},setTranslate:function Nf(y,h){const A=this,{rtlTranslate:I,params:F,wrapperEl:K,progress:Te}=A;let nt,je=0,ze=0;A.isHorizontal()?je=I?-y:y:ze=y,F.roundLengths&&(je=Math.floor(je),ze=Math.floor(ze)),A.previousTranslate=A.translate,A.translate=A.isHorizontal()?je:ze,F.cssMode?K[A.isHorizontal()?"scrollLeft":"scrollTop"]=A.isHorizontal()?-je:-ze:F.virtualTranslate||(A.isHorizontal()?je-=A.cssOverflowAdjustment():ze-=A.cssOverflowAdjustment(),K.style.transform=`translate3d(${je}px, ${ze}px, 0px)`);const pt=A.maxTranslate()-A.minTranslate();nt=0===pt?0:(y-A.minTranslate())/pt,nt!==Te&&A.updateProgress(y),A.emit("setTranslate",A.translate,h)},minTranslate:function Ff(){return-this.snapGrid[0]},maxTranslate:function Ed(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function F1(y,h,A,I,F){void 0===y&&(y=0),void 0===h&&(h=this.params.speed),void 0===A&&(A=!0),void 0===I&&(I=!0);const K=this,{params:Te,wrapperEl:je}=K;if(K.animating&&Te.preventInteractionOnTransition)return!1;const ze=K.minTranslate(),ut=K.maxTranslate();let nt;if(nt=I&&y>ze?ze:I&&y<ut?ut:y,K.updateProgress(nt),Te.cssMode){const pt=K.isHorizontal();if(0===h)je[pt?"scrollLeft":"scrollTop"]=-nt;else{if(!K.support.smoothScroll)return Of({swiper:K,targetPosition:-nt,side:pt?"left":"top"}),!0;je.scrollTo({[pt?"left":"top"]:-nt,behavior:"smooth"})}return!0}return 0===h?(K.setTransition(0),K.setTranslate(nt),A&&(K.emit("beforeTransitionStart",h,F),K.emit("transitionEnd"))):(K.setTransition(h),K.setTranslate(nt),A&&(K.emit("beforeTransitionStart",h,F),K.emit("transitionStart")),K.animating||(K.animating=!0,K.onTranslateToWrapperTransitionEnd||(K.onTranslateToWrapperTransitionEnd=function(bt){!K||K.destroyed||bt.target===this&&(K.wrapperEl.removeEventListener("transitionend",K.onTranslateToWrapperTransitionEnd),K.onTranslateToWrapperTransitionEnd=null,delete K.onTranslateToWrapperTransitionEnd,K.animating=!1,A&&K.emit("transitionEnd"))}),K.wrapperEl.addEventListener("transitionend",K.onTranslateToWrapperTransitionEnd))),!0}};function l1(y){let{swiper:h,runCallbacks:A,direction:I,step:F}=y;const{activeIndex:K,previousIndex:Te}=h;let je=I;if(je||(je=K>Te?"next":K<Te?"prev":"reset"),h.emit(`transition${F}`),A&&K!==Te){if("reset"===je)return void h.emit(`slideResetTransition${F}`);h.emit(`slideChangeTransition${F}`),h.emit("next"===je?`slideNextTransition${F}`:`slidePrevTransition${F}`)}}var Hm={setTransition:function V1(y,h){const A=this;A.params.cssMode||(A.wrapperEl.style.transitionDuration=`${y}ms`,A.wrapperEl.style.transitionDelay=0===y?"0ms":""),A.emit("setTransition",y,h)},transitionStart:function I1(y,h){void 0===y&&(y=!0);const A=this,{params:I}=A;I.cssMode||(I.autoHeight&&A.updateAutoHeight(),l1({swiper:A,runCallbacks:y,direction:h,step:"Start"}))},transitionEnd:function Vf(y,h){void 0===y&&(y=!0);const A=this,{params:I}=A;A.animating=!1,!I.cssMode&&(A.setTransition(0),l1({swiper:A,runCallbacks:y,direction:h,step:"End"}))}},$1={slideTo:function b2(y,h,A,I,F){void 0===y&&(y=0),void 0===A&&(A=!0),"string"==typeof y&&(y=parseInt(y,10));const K=this;let Te=y;Te<0&&(Te=0);const{params:je,snapGrid:ze,slidesGrid:ut,previousIndex:nt,activeIndex:pt,rtlTranslate:bt,wrapperEl:rn,enabled:fn}=K;if(!fn&&!I&&!F||K.destroyed||K.animating&&je.preventInteractionOnTransition)return!1;typeof h>"u"&&(h=K.params.speed);const mn=Math.min(K.params.slidesPerGroupSkip,Te);let wn=mn+Math.floor((Te-mn)/K.params.slidesPerGroup);wn>=ze.length&&(wn=ze.length-1);const Nt=-ze[wn];if(je.normalizeSlideIndex)for(let _n=0;_n<ut.length;_n+=1){const di=-Math.floor(100*Nt),uo=Math.floor(100*ut[_n]),Qo=Math.floor(100*ut[_n+1]);typeof ut[_n+1]<"u"?di>=uo&&di<Qo-(Qo-uo)/2?Te=_n:di>=uo&&di<Qo&&(Te=_n+1):di>=uo&&(Te=_n)}if(K.initialized&&Te!==pt&&(!K.allowSlideNext&&(bt?Nt>K.translate&&Nt>K.minTranslate():Nt<K.translate&&Nt<K.minTranslate())||!K.allowSlidePrev&&Nt>K.translate&&Nt>K.maxTranslate()&&(pt||0)!==Te))return!1;let Ln;if(Te!==(nt||0)&&A&&K.emit("beforeSlideChangeStart"),K.updateProgress(Nt),Ln=Te>pt?"next":Te<pt?"prev":"reset",bt&&-Nt===K.translate||!bt&&Nt===K.translate)return K.updateActiveIndex(Te),je.autoHeight&&K.updateAutoHeight(),K.updateSlidesClasses(),"slide"!==je.effect&&K.setTranslate(Nt),"reset"!==Ln&&(K.transitionStart(A,Ln),K.transitionEnd(A,Ln)),!1;if(je.cssMode){const _n=K.isHorizontal(),di=bt?Nt:-Nt;if(0===h){const uo=K.virtual&&K.params.virtual.enabled;uo&&(K.wrapperEl.style.scrollSnapType="none",K._immediateVirtual=!0),uo&&!K._cssModeVirtualInitialSet&&K.params.initialSlide>0?(K._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{rn[_n?"scrollLeft":"scrollTop"]=di})):rn[_n?"scrollLeft":"scrollTop"]=di,uo&&requestAnimationFrame(()=>{K.wrapperEl.style.scrollSnapType="",K._immediateVirtual=!1})}else{if(!K.support.smoothScroll)return Of({swiper:K,targetPosition:di,side:_n?"left":"top"}),!0;rn.scrollTo({[_n?"left":"top"]:di,behavior:"smooth"})}return!0}return K.setTransition(h),K.setTranslate(Nt),K.updateActiveIndex(Te),K.updateSlidesClasses(),K.emit("beforeTransitionStart",h,I),K.transitionStart(A,Ln),0===h?K.transitionEnd(A,Ln):K.animating||(K.animating=!0,K.onSlideToWrapperTransitionEnd||(K.onSlideToWrapperTransitionEnd=function(di){!K||K.destroyed||di.target===this&&(K.wrapperEl.removeEventListener("transitionend",K.onSlideToWrapperTransitionEnd),K.onSlideToWrapperTransitionEnd=null,delete K.onSlideToWrapperTransitionEnd,K.transitionEnd(A,Ln))}),K.wrapperEl.addEventListener("transitionend",K.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function Gm(y,h,A,I){void 0===y&&(y=0),void 0===A&&(A=!0),"string"==typeof y&&(y=parseInt(y,10));const F=this;if(F.destroyed)return;typeof h>"u"&&(h=F.params.speed);const K=F.grid&&F.params.grid&&F.params.grid.rows>1;let Te=y;if(F.params.loop)if(F.virtual&&F.params.virtual.enabled)Te+=F.virtual.slidesBefore;else{let je;if(K){const bt=Te*F.params.grid.rows;je=F.slides.filter(rn=>1*rn.getAttribute("data-swiper-slide-index")===bt)[0].column}else je=F.getSlideIndexByData(Te);const ze=K?Math.ceil(F.slides.length/F.params.grid.rows):F.slides.length,{centeredSlides:ut}=F.params;let nt=F.params.slidesPerView;"auto"===nt?nt=F.slidesPerViewDynamic():(nt=Math.ceil(parseFloat(F.params.slidesPerView,10)),ut&&nt%2==0&&(nt+=1));let pt=ze-je<nt;if(ut&&(pt=pt||je<Math.ceil(nt/2)),I&&ut&&"auto"!==F.params.slidesPerView&&!K&&(pt=!1),pt){const bt=ut?je<F.activeIndex?"prev":"next":je-F.activeIndex-1<F.params.slidesPerView?"next":"prev";F.loopFix({direction:bt,slideTo:!0,activeSlideIndex:"next"===bt?je+1:je-ze+1,slideRealIndex:"next"===bt?F.realIndex:void 0})}if(K){const bt=Te*F.params.grid.rows;Te=F.slides.filter(rn=>1*rn.getAttribute("data-swiper-slide-index")===bt)[0].column}else Te=F.getSlideIndexByData(Te)}return requestAnimationFrame(()=>{F.slideTo(Te,h,A,I)}),F},slideNext:function lm(y,h,A){void 0===h&&(h=!0);const I=this,{enabled:F,params:K,animating:Te}=I;if(!F||I.destroyed)return I;typeof y>"u"&&(y=I.params.speed);let je=K.slidesPerGroup;"auto"===K.slidesPerView&&1===K.slidesPerGroup&&K.slidesPerGroupAuto&&(je=Math.max(I.slidesPerViewDynamic("current",!0),1));const ze=I.activeIndex<K.slidesPerGroupSkip?1:je;if(K.loop){if(Te&&(!I.virtual||!K.virtual.enabled)&&K.loopPreventsSliding)return!1;if(I.loopFix({direction:"next"}),I._clientLeft=I.wrapperEl.clientLeft,I.activeIndex===I.slides.length-1&&K.cssMode)return requestAnimationFrame(()=>{I.slideTo(I.activeIndex+ze,y,h,A)}),!0}return I.slideTo(K.rewind&&I.isEnd?0:I.activeIndex+ze,y,h,A)},slidePrev:function $d(y,h,A){void 0===h&&(h=!0);const I=this,{params:F,snapGrid:K,slidesGrid:Te,rtlTranslate:je,enabled:ze,animating:ut}=I;if(!ze||I.destroyed)return I;if(typeof y>"u"&&(y=I.params.speed),F.loop){if(ut&&(!I.virtual||!F.virtual.enabled)&&F.loopPreventsSliding)return!1;I.loopFix({direction:"prev"}),I._clientLeft=I.wrapperEl.clientLeft}function bt(Nt){return Nt<0?-Math.floor(Math.abs(Nt)):Math.floor(Nt)}const rn=bt(je?I.translate:-I.translate),fn=K.map(Nt=>bt(Nt));let mn=K[fn.indexOf(rn)-1];if(typeof mn>"u"&&F.cssMode){let Nt;K.forEach((Ln,_n)=>{rn>=Ln&&(Nt=_n)}),typeof Nt<"u"&&(mn=K[Nt>0?Nt-1:Nt])}let wn=0;return typeof mn<"u"&&(wn=Te.indexOf(mn),wn<0&&(wn=I.activeIndex-1),"auto"===F.slidesPerView&&1===F.slidesPerGroup&&F.slidesPerGroupAuto&&(wn=wn-I.slidesPerViewDynamic("previous",!0)+1,wn=Math.max(wn,0))),F.rewind&&I.isBeginning?I.slideTo(I.params.virtual&&I.params.virtual.enabled&&I.virtual?I.virtual.slides.length-1:I.slides.length-1,y,h,A):F.loop&&0===I.activeIndex&&F.cssMode?(requestAnimationFrame(()=>{I.slideTo(wn,y,h,A)}),!0):I.slideTo(wn,y,h,A)},slideReset:function Rp(y,h,A){void 0===h&&(h=!0);const I=this;if(!I.destroyed)return typeof y>"u"&&(y=I.params.speed),I.slideTo(I.activeIndex,y,h,A)},slideToClosest:function $f(y,h,A,I){void 0===h&&(h=!0),void 0===I&&(I=.5);const F=this;if(F.destroyed)return;typeof y>"u"&&(y=F.params.speed);let K=F.activeIndex;const Te=Math.min(F.params.slidesPerGroupSkip,K),je=Te+Math.floor((K-Te)/F.params.slidesPerGroup),ze=F.rtlTranslate?F.translate:-F.translate;if(ze>=F.snapGrid[je]){const ut=F.snapGrid[je];ze-ut>(F.snapGrid[je+1]-ut)*I&&(K+=F.params.slidesPerGroup)}else{const ut=F.snapGrid[je-1];ze-ut<=(F.snapGrid[je]-ut)*I&&(K-=F.params.slidesPerGroup)}return K=Math.max(K,0),K=Math.min(K,F.slidesGrid.length-1),F.slideTo(K,y,h,A)},slideToClickedSlide:function lp(){const y=this;if(y.destroyed)return;const{params:h,slidesEl:A}=y,I="auto"===h.slidesPerView?y.slidesPerViewDynamic():h.slidesPerView;let K,F=y.clickedIndex;const Te=y.isElement?"swiper-slide":`.${h.slideClass}`;if(h.loop){if(y.animating)return;K=parseInt(y.clickedSlide.getAttribute("data-swiper-slide-index"),10),h.centeredSlides?F<y.loopedSlides-I/2||F>y.slides.length-y.loopedSlides+I/2?(y.loopFix(),F=y.getSlideIndex(wc(A,`${Te}[data-swiper-slide-index="${K}"]`)[0]),n1(()=>{y.slideTo(F)})):y.slideTo(F):F>y.slides.length-I?(y.loopFix(),F=y.getSlideIndex(wc(A,`${Te}[data-swiper-slide-index="${K}"]`)[0]),n1(()=>{y.slideTo(F)})):y.slideTo(F)}else y.slideTo(F)}},c1={loopCreate:function jf(y){const h=this,{params:A,slidesEl:I}=h;if(!A.loop||h.virtual&&h.params.virtual.enabled)return;const F=()=>{wc(I,`.${A.slideClass}, swiper-slide`).forEach((pt,bt)=>{pt.setAttribute("data-swiper-slide-index",bt)})},K=h.grid&&A.grid&&A.grid.rows>1,Te=A.slidesPerGroup*(K?A.grid.rows:1),ze=K&&h.slides.length%A.grid.rows!=0,ut=nt=>{for(let pt=0;pt<nt;pt+=1){const bt=h.isElement?eu("swiper-slide",[A.slideBlankClass]):eu("div",[A.slideClass,A.slideBlankClass]);h.slidesEl.append(bt)}};h.slides.length%Te!=0?(A.loopAddBlankSlides?(ut(Te-h.slides.length%Te),h.recalcSlides(),h.updateSlides()):o0("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),F()):ze?(A.loopAddBlankSlides?(ut(A.grid.rows-h.slides.length%A.grid.rows),h.recalcSlides(),h.updateSlides()):o0("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),F()):F(),h.loopFix({slideRealIndex:y,direction:A.centeredSlides?void 0:"next"})},loopFix:function r0(y){let{slideRealIndex:h,slideTo:A=!0,direction:I,setTranslate:F,activeSlideIndex:K,byController:Te,byMousewheel:je}=void 0===y?{}:y;const ze=this;if(!ze.params.loop)return;ze.emit("beforeLoopFix");const{slides:ut,allowSlidePrev:nt,allowSlideNext:pt,slidesEl:bt,params:rn}=ze,{centeredSlides:fn}=rn;if(ze.allowSlidePrev=!0,ze.allowSlideNext=!0,ze.virtual&&rn.virtual.enabled)return A&&(rn.centeredSlides||0!==ze.snapIndex?rn.centeredSlides&&ze.snapIndex<rn.slidesPerView?ze.slideTo(ze.virtual.slides.length+ze.snapIndex,0,!1,!0):ze.snapIndex===ze.snapGrid.length-1&&ze.slideTo(ze.virtual.slidesBefore,0,!1,!0):ze.slideTo(ze.virtual.slides.length,0,!1,!0)),ze.allowSlidePrev=nt,ze.allowSlideNext=pt,void ze.emit("loopFix");let mn=rn.slidesPerView;"auto"===mn?mn=ze.slidesPerViewDynamic():(mn=Math.ceil(parseFloat(rn.slidesPerView,10)),fn&&mn%2==0&&(mn+=1));const wn=rn.slidesPerGroupAuto?mn:rn.slidesPerGroup;let Nt=wn;Nt%wn!=0&&(Nt+=wn-Nt%wn),Nt+=rn.loopAdditionalSlides,ze.loopedSlides=Nt;const Ln=ze.grid&&rn.grid&&rn.grid.rows>1;ut.length<mn+Nt?o0("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):Ln&&"row"===rn.grid.fill&&o0("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const _n=[],di=[];let uo=ze.activeIndex;typeof K>"u"?K=ze.getSlideIndex(ut.filter(Si=>Si.classList.contains(rn.slideActiveClass))[0]):uo=K;const Qo="next"===I||!I,ur="prev"===I||!I;let zo=0,Qi=0;const Po=Ln?Math.ceil(ut.length/rn.grid.rows):ut.length,vo=(Ln?ut[K].column:K)+(fn&&typeof F>"u"?-mn/2+.5:0);if(vo<Nt){zo=Math.max(Nt-vo,wn);for(let Si=0;Si<Nt-vo;Si+=1){const ko=Si-Math.floor(Si/Po)*Po;if(Ln){const vr=Po-ko-1;for(let Rs=ut.length-1;Rs>=0;Rs-=1)ut[Rs].column===vr&&_n.push(Rs)}else _n.push(Po-ko-1)}}else if(vo+mn>Po-Nt){Qi=Math.max(vo-(Po-2*Nt),wn);for(let Si=0;Si<Qi;Si+=1){const ko=Si-Math.floor(Si/Po)*Po;Ln?ut.forEach((vr,Rs)=>{vr.column===ko&&di.push(Rs)}):di.push(ko)}}if(ze.__preventObserver__=!0,requestAnimationFrame(()=>{ze.__preventObserver__=!1}),ur&&_n.forEach(Si=>{ut[Si].swiperLoopMoveDOM=!0,bt.prepend(ut[Si]),ut[Si].swiperLoopMoveDOM=!1}),Qo&&di.forEach(Si=>{ut[Si].swiperLoopMoveDOM=!0,bt.append(ut[Si]),ut[Si].swiperLoopMoveDOM=!1}),ze.recalcSlides(),"auto"===rn.slidesPerView?ze.updateSlides():Ln&&(_n.length>0&&ur||di.length>0&&Qo)&&ze.slides.forEach((Si,ko)=>{ze.grid.updateSlide(ko,Si,ze.slides)}),rn.watchSlidesProgress&&ze.updateSlidesOffset(),A)if(_n.length>0&&ur)if(typeof h>"u"){const vr=ze.slidesGrid[uo+zo]-ze.slidesGrid[uo];je?ze.setTranslate(ze.translate-vr):(ze.slideTo(uo+Math.ceil(zo),0,!1,!0),F&&(ze.touchEventsData.startTranslate=ze.touchEventsData.startTranslate-vr,ze.touchEventsData.currentTranslate=ze.touchEventsData.currentTranslate-vr))}else F&&(ze.slideTo(ze.activeIndex+(Ln?_n.length/rn.grid.rows:_n.length),0,!1,!0),ze.touchEventsData.currentTranslate=ze.translate);else if(di.length>0&&Qo)if(typeof h>"u"){const vr=ze.slidesGrid[uo-Qi]-ze.slidesGrid[uo];je?ze.setTranslate(ze.translate-vr):(ze.slideTo(uo-Qi,0,!1,!0),F&&(ze.touchEventsData.startTranslate=ze.touchEventsData.startTranslate-vr,ze.touchEventsData.currentTranslate=ze.touchEventsData.currentTranslate-vr))}else ze.slideTo(ze.activeIndex-(Ln?di.length/rn.grid.rows:di.length),0,!1,!0);if(ze.allowSlidePrev=nt,ze.allowSlideNext=pt,ze.controller&&ze.controller.control&&!Te){const Si={slideRealIndex:h,direction:I,setTranslate:F,activeSlideIndex:K,byController:!0};Array.isArray(ze.controller.control)?ze.controller.control.forEach(ko=>{!ko.destroyed&&ko.params.loop&&ko.loopFix({...Si,slideTo:ko.params.slidesPerView===rn.slidesPerView&&A})}):ze.controller.control instanceof ze.constructor&&ze.controller.control.params.loop&&ze.controller.control.loopFix({...Si,slideTo:ze.controller.control.params.slidesPerView===rn.slidesPerView&&A})}ze.emit("loopFix")},loopDestroy:function Su(){const y=this,{params:h,slidesEl:A}=y;if(!h.loop||y.virtual&&y.params.virtual.enabled)return;y.recalcSlides();const I=[];y.slides.forEach(F=>{const K=typeof F.swiperSlideIndex>"u"?1*F.getAttribute("data-swiper-slide-index"):F.swiperSlideIndex;I[K]=F}),y.slides.forEach(F=>{F.removeAttribute("data-swiper-slide-index")}),I.forEach(F=>{A.append(F)}),y.recalcSlides(),y.slideTo(y.realIndex,0)}},j1={setGrabCursor:function xc(y){const h=this;if(!h.params.simulateTouch||h.params.watchOverflow&&h.isLocked||h.params.cssMode)return;const A="container"===h.params.touchEventsTarget?h.el:h.wrapperEl;h.isElement&&(h.__preventObserver__=!0),A.style.cursor="move",A.style.cursor=y?"grabbing":"grab",h.isElement&&requestAnimationFrame(()=>{h.__preventObserver__=!1})},unsetGrabCursor:function cp(){const y=this;y.params.watchOverflow&&y.isLocked||y.params.cssMode||(y.isElement&&(y.__preventObserver__=!0),y["container"===y.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",y.isElement&&requestAnimationFrame(()=>{y.__preventObserver__=!1}))}};function N0(y,h,A){const I=hc(),{params:F}=y,K=F.edgeSwipeDetection,Te=F.edgeSwipeThreshold;return!K||!(A<=Te||A>=I.innerWidth-Te)||"prevent"===K&&(h.preventDefault(),!0)}function cm(y){const h=this,A=Il();let I=y;I.originalEvent&&(I=I.originalEvent);const F=h.touchEventsData;if("pointerdown"===I.type){if(null!==F.pointerId&&F.pointerId!==I.pointerId)return;F.pointerId=I.pointerId}else"touchstart"===I.type&&1===I.targetTouches.length&&(F.touchId=I.targetTouches[0].identifier);if("touchstart"===I.type)return void N0(h,I,I.targetTouches[0].pageX);const{params:K,touches:Te,enabled:je}=h;if(!je||!K.simulateTouch&&"mouse"===I.pointerType||h.animating&&K.preventInteractionOnTransition)return;!h.animating&&K.cssMode&&K.loop&&h.loopFix();let ze=I.target;if("wrapper"===K.touchEventsTarget&&!h.wrapperEl.contains(ze)||"which"in I&&3===I.which||"button"in I&&I.button>0||F.isTouched&&F.isMoved)return;const ut=!!K.noSwipingClass&&""!==K.noSwipingClass,nt=I.composedPath?I.composedPath():I.path;ut&&I.target&&I.target.shadowRoot&&nt&&(ze=nt[0]);const pt=K.noSwipingSelector?K.noSwipingSelector:`.${K.noSwipingClass}`;if(K.noSwiping&&(I.target&&I.target.shadowRoot?function oa(y,h){return void 0===h&&(h=this),function A(I){if(!I||I===Il()||I===hc())return null;I.assignedSlot&&(I=I.assignedSlot);const F=I.closest(y);return F||I.getRootNode?F||A(I.getRootNode().host):null}(h)}(pt,ze):ze.closest(pt)))return void(h.allowClick=!0);if(K.swipeHandler&&!ze.closest(K.swipeHandler))return;Te.currentX=I.pageX,Te.currentY=I.pageY;const rn=Te.currentX,fn=Te.currentY;if(!N0(h,I,rn))return;Object.assign(F,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),Te.startX=rn,Te.startY=fn,F.touchStartTime=yc(),h.allowClick=!0,h.updateSize(),h.swipeDirection=void 0,K.threshold>0&&(F.allowThresholdMove=!1);let mn=!0;ze.matches(F.focusableElements)&&(mn=!1,"SELECT"===ze.nodeName&&(F.isTouched=!1)),A.activeElement&&A.activeElement.matches(F.focusableElements)&&A.activeElement!==ze&&A.activeElement.blur(),(K.touchStartForcePreventDefault||mn&&h.allowTouchMove&&K.touchStartPreventDefault)&&!ze.isContentEditable&&I.preventDefault(),K.freeMode&&K.freeMode.enabled&&h.freeMode&&h.animating&&!K.cssMode&&h.freeMode.onTouchStart(),h.emit("touchStart",I)}function w2(y){const h=Il(),A=this,I=A.touchEventsData,{params:F,touches:K,rtlTranslate:Te,enabled:je}=A;if(!je||!F.simulateTouch&&"mouse"===y.pointerType)return;let ut,ze=y;if(ze.originalEvent&&(ze=ze.originalEvent),"pointermove"===ze.type&&(null!==I.touchId||ze.pointerId!==I.pointerId))return;if("touchmove"===ze.type){if(ut=[...ze.changedTouches].filter(Qo=>Qo.identifier===I.touchId)[0],!ut||ut.identifier!==I.touchId)return}else ut=ze;if(!I.isTouched)return void(I.startMoving&&I.isScrolling&&A.emit("touchMoveOpposite",ze));const nt=ut.pageX,pt=ut.pageY;if(ze.preventedByNestedSwiper)return K.startX=nt,void(K.startY=pt);if(!A.allowTouchMove)return ze.target.matches(I.focusableElements)||(A.allowClick=!1),void(I.isTouched&&(Object.assign(K,{startX:nt,startY:pt,currentX:nt,currentY:pt}),I.touchStartTime=yc()));if(F.touchReleaseOnEdges&&!F.loop)if(A.isVertical()){if(pt<K.startY&&A.translate<=A.maxTranslate()||pt>K.startY&&A.translate>=A.minTranslate())return I.isTouched=!1,void(I.isMoved=!1)}else if(nt<K.startX&&A.translate<=A.maxTranslate()||nt>K.startX&&A.translate>=A.minTranslate())return;if(h.activeElement&&ze.target===h.activeElement&&ze.target.matches(I.focusableElements))return I.isMoved=!0,void(A.allowClick=!1);I.allowTouchCallbacks&&A.emit("touchMove",ze),K.previousX=K.currentX,K.previousY=K.currentY,K.currentX=nt,K.currentY=pt;const bt=K.currentX-K.startX,rn=K.currentY-K.startY;if(A.params.threshold&&Math.sqrt(bt**2+rn**2)<A.params.threshold)return;if(typeof I.isScrolling>"u"){let Qo;A.isHorizontal()&&K.currentY===K.startY||A.isVertical()&&K.currentX===K.startX?I.isScrolling=!1:bt*bt+rn*rn>=25&&(Qo=180*Math.atan2(Math.abs(rn),Math.abs(bt))/Math.PI,I.isScrolling=A.isHorizontal()?Qo>F.touchAngle:90-Qo>F.touchAngle)}if(I.isScrolling&&A.emit("touchMoveOpposite",ze),typeof I.startMoving>"u"&&(K.currentX!==K.startX||K.currentY!==K.startY)&&(I.startMoving=!0),I.isScrolling||"touchmove"===ze.type&&I.preventTouchMoveFromPointerMove)return void(I.isTouched=!1);if(!I.startMoving)return;A.allowClick=!1,!F.cssMode&&ze.cancelable&&ze.preventDefault(),F.touchMoveStopPropagation&&!F.nested&&ze.stopPropagation();let fn=A.isHorizontal()?bt:rn,mn=A.isHorizontal()?K.currentX-K.previousX:K.currentY-K.previousY;F.oneWayMovement&&(fn=Math.abs(fn)*(Te?1:-1),mn=Math.abs(mn)*(Te?1:-1)),K.diff=fn,fn*=F.touchRatio,Te&&(fn=-fn,mn=-mn);const wn=A.touchesDirection;A.swipeDirection=fn>0?"prev":"next",A.touchesDirection=mn>0?"prev":"next";const Nt=A.params.loop&&!F.cssMode,Ln="next"===A.touchesDirection&&A.allowSlideNext||"prev"===A.touchesDirection&&A.allowSlidePrev;if(!I.isMoved){if(Nt&&Ln&&A.loopFix({direction:A.swipeDirection}),I.startTranslate=A.getTranslate(),A.setTransition(0),A.animating){const Qo=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});A.wrapperEl.dispatchEvent(Qo)}I.allowMomentumBounce=!1,F.grabCursor&&(!0===A.allowSlideNext||!0===A.allowSlidePrev)&&A.setGrabCursor(!0),A.emit("sliderFirstMove",ze)}if((new Date).getTime(),I.isMoved&&I.allowThresholdMove&&wn!==A.touchesDirection&&Nt&&Ln&&Math.abs(fn)>=1)return Object.assign(K,{startX:nt,startY:pt,currentX:nt,currentY:pt,startTranslate:I.currentTranslate}),I.loopSwapReset=!0,void(I.startTranslate=I.currentTranslate);A.emit("sliderMove",ze),I.isMoved=!0,I.currentTranslate=fn+I.startTranslate;let di=!0,uo=F.resistanceRatio;if(F.touchReleaseOnEdges&&(uo=0),fn>0?(Nt&&Ln&&I.allowThresholdMove&&I.currentTranslate>(F.centeredSlides?A.minTranslate()-A.slidesSizesGrid[A.activeIndex+1]:A.minTranslate())&&A.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),I.currentTranslate>A.minTranslate()&&(di=!1,F.resistance&&(I.currentTranslate=A.minTranslate()-1+(-A.minTranslate()+I.startTranslate+fn)**uo))):fn<0&&(Nt&&Ln&&I.allowThresholdMove&&I.currentTranslate<(F.centeredSlides?A.maxTranslate()+A.slidesSizesGrid[A.slidesSizesGrid.length-1]:A.maxTranslate())&&A.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:A.slides.length-("auto"===F.slidesPerView?A.slidesPerViewDynamic():Math.ceil(parseFloat(F.slidesPerView,10)))}),I.currentTranslate<A.maxTranslate()&&(di=!1,F.resistance&&(I.currentTranslate=A.maxTranslate()+1-(A.maxTranslate()-I.startTranslate-fn)**uo))),di&&(ze.preventedByNestedSwiper=!0),!A.allowSlideNext&&"next"===A.swipeDirection&&I.currentTranslate<I.startTranslate&&(I.currentTranslate=I.startTranslate),!A.allowSlidePrev&&"prev"===A.swipeDirection&&I.currentTranslate>I.startTranslate&&(I.currentTranslate=I.startTranslate),!A.allowSlidePrev&&!A.allowSlideNext&&(I.currentTranslate=I.startTranslate),F.threshold>0){if(!(Math.abs(fn)>F.threshold||I.allowThresholdMove))return void(I.currentTranslate=I.startTranslate);if(!I.allowThresholdMove)return I.allowThresholdMove=!0,K.startX=K.currentX,K.startY=K.currentY,I.currentTranslate=I.startTranslate,void(K.diff=A.isHorizontal()?K.currentX-K.startX:K.currentY-K.startY)}!F.followFinger||F.cssMode||((F.freeMode&&F.freeMode.enabled&&A.freeMode||F.watchSlidesProgress)&&(A.updateActiveIndex(),A.updateSlidesClasses()),F.freeMode&&F.freeMode.enabled&&A.freeMode&&A.freeMode.onTouchMove(),A.updateProgress(I.currentTranslate),A.setTranslate(I.currentTranslate))}function up(y){const h=this,A=h.touchEventsData;let F,I=y;if(I.originalEvent&&(I=I.originalEvent),"touchend"===I.type||"touchcancel"===I.type){if(F=[...I.changedTouches].filter(uo=>uo.identifier===A.touchId)[0],!F||F.identifier!==A.touchId)return}else{if(null!==A.touchId||I.pointerId!==A.pointerId)return;F=I}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(I.type)&&(!["pointercancel","contextmenu"].includes(I.type)||!h.browser.isSafari&&!h.browser.isWebView))return;A.pointerId=null,A.touchId=null;const{params:Te,touches:je,rtlTranslate:ze,slidesGrid:ut,enabled:nt}=h;if(!nt||!Te.simulateTouch&&"mouse"===I.pointerType)return;if(A.allowTouchCallbacks&&h.emit("touchEnd",I),A.allowTouchCallbacks=!1,!A.isTouched)return A.isMoved&&Te.grabCursor&&h.setGrabCursor(!1),A.isMoved=!1,void(A.startMoving=!1);Te.grabCursor&&A.isMoved&&A.isTouched&&(!0===h.allowSlideNext||!0===h.allowSlidePrev)&&h.setGrabCursor(!1);const pt=yc(),bt=pt-A.touchStartTime;if(h.allowClick){const uo=I.path||I.composedPath&&I.composedPath();h.updateClickedSlide(uo&&uo[0]||I.target,uo),h.emit("tap click",I),bt<300&&pt-A.lastClickTime<300&&h.emit("doubleTap doubleClick",I)}if(A.lastClickTime=yc(),n1(()=>{h.destroyed||(h.allowClick=!0)}),!A.isTouched||!A.isMoved||!h.swipeDirection||0===je.diff&&!A.loopSwapReset||A.currentTranslate===A.startTranslate&&!A.loopSwapReset)return A.isTouched=!1,A.isMoved=!1,void(A.startMoving=!1);let rn;if(A.isTouched=!1,A.isMoved=!1,A.startMoving=!1,rn=Te.followFinger?ze?h.translate:-h.translate:-A.currentTranslate,Te.cssMode)return;if(Te.freeMode&&Te.freeMode.enabled)return void h.freeMode.onTouchEnd({currentPos:rn});const fn=rn>=-h.maxTranslate()&&!h.params.loop;let mn=0,wn=h.slidesSizesGrid[0];for(let uo=0;uo<ut.length;uo+=uo<Te.slidesPerGroupSkip?1:Te.slidesPerGroup){const Qo=uo<Te.slidesPerGroupSkip-1?1:Te.slidesPerGroup;typeof ut[uo+Qo]<"u"?(fn||rn>=ut[uo]&&rn<ut[uo+Qo])&&(mn=uo,wn=ut[uo+Qo]-ut[uo]):(fn||rn>=ut[uo])&&(mn=uo,wn=ut[ut.length-1]-ut[ut.length-2])}let Nt=null,Ln=null;Te.rewind&&(h.isBeginning?Ln=Te.virtual&&Te.virtual.enabled&&h.virtual?h.virtual.slides.length-1:h.slides.length-1:h.isEnd&&(Nt=0));const _n=(rn-ut[mn])/wn,di=mn<Te.slidesPerGroupSkip-1?1:Te.slidesPerGroup;if(bt>Te.longSwipesMs){if(!Te.longSwipes)return void h.slideTo(h.activeIndex);"next"===h.swipeDirection&&h.slideTo(_n>=Te.longSwipesRatio?Te.rewind&&h.isEnd?Nt:mn+di:mn),"prev"===h.swipeDirection&&(_n>1-Te.longSwipesRatio?h.slideTo(mn+di):null!==Ln&&_n<0&&Math.abs(_n)>Te.longSwipesRatio?h.slideTo(Ln):h.slideTo(mn))}else{if(!Te.shortSwipes)return void h.slideTo(h.activeIndex);!h.navigation||I.target!==h.navigation.nextEl&&I.target!==h.navigation.prevEl?("next"===h.swipeDirection&&h.slideTo(null!==Nt?Nt:mn+di),"prev"===h.swipeDirection&&h.slideTo(null!==Ln?Ln:mn)):h.slideTo(I.target===h.navigation.nextEl?mn+di:mn)}}function hf(){const y=this,{params:h,el:A}=y;if(A&&0===A.offsetWidth)return;h.breakpoints&&y.setBreakpoint();const{allowSlideNext:I,allowSlidePrev:F,snapGrid:K}=y,Te=y.virtual&&y.params.virtual.enabled;y.allowSlideNext=!0,y.allowSlidePrev=!0,y.updateSize(),y.updateSlides(),y.updateSlidesClasses(),!("auto"===h.slidesPerView||h.slidesPerView>1)||!y.isEnd||y.isBeginning||y.params.centeredSlides||Te&&h.loop?y.params.loop&&!Te?y.slideToLoop(y.realIndex,0,!1,!0):y.slideTo(y.activeIndex,0,!1,!0):y.slideTo(y.slides.length-1,0,!1,!0),y.autoplay&&y.autoplay.running&&y.autoplay.paused&&(clearTimeout(y.autoplay.resizeTimeout),y.autoplay.resizeTimeout=setTimeout(()=>{y.autoplay&&y.autoplay.running&&y.autoplay.paused&&y.autoplay.resume()},500)),y.allowSlidePrev=F,y.allowSlideNext=I,y.params.watchOverflow&&K!==y.snapGrid&&y.checkOverflow()}function Ic(y){const h=this;h.enabled&&(h.allowClick||(h.params.preventClicks&&y.preventDefault(),h.params.preventClicksPropagation&&h.animating&&(y.stopPropagation(),y.stopImmediatePropagation())))}function E1(){const y=this,{wrapperEl:h,rtlTranslate:A,enabled:I}=y;if(!I)return;let F;y.previousTranslate=y.translate,y.translate=y.isHorizontal()?-h.scrollLeft:-h.scrollTop,0===y.translate&&(y.translate=0),y.updateActiveIndex(),y.updateSlidesClasses();const K=y.maxTranslate()-y.minTranslate();F=0===K?0:(y.translate-y.minTranslate())/K,F!==y.progress&&y.updateProgress(A?-y.translate:y.translate),y.emit("setTranslate",y.translate,!1)}function um(y){const h=this;a1(h,y.target),!h.params.cssMode&&("auto"===h.params.slidesPerView||h.params.autoHeight)&&h.update()}function dm(){const y=this;y.documentTouchHandlerProceeded||(y.documentTouchHandlerProceeded=!0,y.params.touchReleaseOnEdges&&(y.el.style.touchAction="auto"))}const hm=(y,h)=>{const A=Il(),{params:I,el:F,wrapperEl:K,device:Te}=y,je=!!I.nested,ze="on"===h?"addEventListener":"removeEventListener",ut=h;!F||"string"==typeof F||(A[ze]("touchstart",y.onDocumentTouchStart,{passive:!1,capture:je}),F[ze]("touchstart",y.onTouchStart,{passive:!1}),F[ze]("pointerdown",y.onTouchStart,{passive:!1}),A[ze]("touchmove",y.onTouchMove,{passive:!1,capture:je}),A[ze]("pointermove",y.onTouchMove,{passive:!1,capture:je}),A[ze]("touchend",y.onTouchEnd,{passive:!0}),A[ze]("pointerup",y.onTouchEnd,{passive:!0}),A[ze]("pointercancel",y.onTouchEnd,{passive:!0}),A[ze]("touchcancel",y.onTouchEnd,{passive:!0}),A[ze]("pointerout",y.onTouchEnd,{passive:!0}),A[ze]("pointerleave",y.onTouchEnd,{passive:!0}),A[ze]("contextmenu",y.onTouchEnd,{passive:!0}),(I.preventClicks||I.preventClicksPropagation)&&F[ze]("click",y.onClick,!0),I.cssMode&&K[ze]("scroll",y.onScroll),y[ut](I.updateOnWindowResize?Te.ios||Te.android?"resize orientationchange observerUpdate":"resize observerUpdate":"observerUpdate",hf,!0),F[ze]("load",y.onLoad,{capture:!0}))};var a0={attachEvents:function Uf(){const y=this,{params:h}=y;y.onTouchStart=cm.bind(y),y.onTouchMove=w2.bind(y),y.onTouchEnd=up.bind(y),y.onDocumentTouchStart=dm.bind(y),h.cssMode&&(y.onScroll=E1.bind(y)),y.onClick=Ic.bind(y),y.onLoad=um.bind(y),hm(y,"on")},detachEvents:function s0(){hm(this,"off")}};const El=(y,h)=>y.grid&&h.grid&&h.grid.rows>1;var Cg={setBreakpoint:function Tu(){const y=this,{realIndex:h,initialized:A,params:I,el:F}=y,K=I.breakpoints;if(!K||K&&0===Object.keys(K).length)return;const Te=y.getBreakpoint(K,y.params.breakpointsBase,y.el);if(!Te||y.currentBreakpoint===Te)return;const ze=(Te in K?K[Te]:void 0)||y.originalParams,ut=El(y,I),nt=El(y,ze),pt=y.params.grabCursor,bt=ze.grabCursor,rn=I.enabled;ut&&!nt?(F.classList.remove(`${I.containerModifierClass}grid`,`${I.containerModifierClass}grid-column`),y.emitContainerClasses()):!ut&&nt&&(F.classList.add(`${I.containerModifierClass}grid`),(ze.grid.fill&&"column"===ze.grid.fill||!ze.grid.fill&&"column"===I.grid.fill)&&F.classList.add(`${I.containerModifierClass}grid-column`),y.emitContainerClasses()),pt&&!bt?y.unsetGrabCursor():!pt&&bt&&y.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(_n=>{if(typeof ze[_n]>"u")return;const di=I[_n]&&I[_n].enabled,uo=ze[_n]&&ze[_n].enabled;di&&!uo&&y[_n].disable(),!di&&uo&&y[_n].enable()});const fn=ze.direction&&ze.direction!==I.direction,mn=I.loop&&(ze.slidesPerView!==I.slidesPerView||fn),wn=I.loop;fn&&A&&y.changeDirection(),Vd(y.params,ze);const Nt=y.params.enabled,Ln=y.params.loop;Object.assign(y,{allowTouchMove:y.params.allowTouchMove,allowSlideNext:y.params.allowSlideNext,allowSlidePrev:y.params.allowSlidePrev}),rn&&!Nt?y.disable():!rn&&Nt&&y.enable(),y.currentBreakpoint=Te,y.emit("_beforeBreakpoint",ze),A&&(mn?(y.loopDestroy(),y.loopCreate(h),y.updateSlides()):!wn&&Ln?(y.loopCreate(h),y.updateSlides()):wn&&!Ln&&y.loopDestroy()),y.emit("breakpoint",ze)},getBreakpoint:function $c(y,h,A){if(void 0===h&&(h="window"),!y||"container"===h&&!A)return;let I=!1;const F=hc(),K="window"===h?F.innerHeight:A.clientHeight,Te=Object.keys(y).map(je=>{if("string"==typeof je&&0===je.indexOf("@")){const ze=parseFloat(je.substr(1));return{value:K*ze,point:je}}return{value:je,point:je}});Te.sort((je,ze)=>parseInt(je.value,10)-parseInt(ze.value,10));for(let je=0;je<Te.length;je+=1){const{point:ze,value:ut}=Te[je];"window"===h?F.matchMedia(`(min-width: ${ut}px)`).matches&&(I=ze):ut<=A.clientWidth&&(I=ze)}return I||"max"}},Wm={addClasses:function pf(){const y=this,{classNames:h,params:A,rtl:I,el:F,device:K}=y,Te=function nc(y,h){const A=[];return y.forEach(I=>{"object"==typeof I?Object.keys(I).forEach(F=>{I[F]&&A.push(h+F)}):"string"==typeof I&&A.push(h+I)}),A}(["initialized",A.direction,{"free-mode":y.params.freeMode&&A.freeMode.enabled},{autoheight:A.autoHeight},{rtl:I},{grid:A.grid&&A.grid.rows>1},{"grid-column":A.grid&&A.grid.rows>1&&"column"===A.grid.fill},{android:K.android},{ios:K.ios},{"css-mode":A.cssMode},{centered:A.cssMode&&A.centeredSlides},{"watch-progress":A.watchSlidesProgress}],A.containerModifierClass);h.push(...Te),F.classList.add(...h),y.emitContainerClasses()},removeClasses:function Xl(){const{el:h,classNames:A}=this;!h||"string"==typeof h||(h.classList.remove(...A),this.emitContainerClasses())}},ff={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function pm(y,h){return function(I){void 0===I&&(I={});const F=Object.keys(I)[0],K=I[F];"object"==typeof K&&null!==K?(!0===y[F]&&(y[F]={enabled:!0}),"navigation"===F&&y[F]&&y[F].enabled&&!y[F].prevEl&&!y[F].nextEl&&(y[F].auto=!0),["pagination","scrollbar"].indexOf(F)>=0&&y[F]&&y[F].enabled&&!y[F].el&&(y[F].auto=!0),F in y&&"enabled"in K?("object"==typeof y[F]&&!("enabled"in y[F])&&(y[F].enabled=!0),y[F]||(y[F]={enabled:!1}),Vd(h,I)):Vd(h,I)):Vd(h,I)}}const U1={eventsEmitter:sm,update:Eg,translate:sh,transition:Hm,slide:$1,loop:c1,grabCursor:j1,events:a0,breakpoints:Cg,checkOverflow:{checkOverflow:function Hf(){const y=this,{isLocked:h,params:A}=y,{slidesOffsetBefore:I}=A;if(I){const F=y.slides.length-1;y.isLocked=y.size>y.slidesGrid[F]+y.slidesSizesGrid[F]+2*I}else y.isLocked=1===y.snapGrid.length;!0===A.allowSlideNext&&(y.allowSlideNext=!y.isLocked),!0===A.allowSlidePrev&&(y.allowSlidePrev=!y.isLocked),h&&h!==y.isLocked&&(y.isEnd=!1),h!==y.isLocked&&y.emit(y.isLocked?"lock":"unlock")}},classes:Wm},wh={};class dd{constructor(){let h,A;for(var I=arguments.length,F=new Array(I),K=0;K<I;K++)F[K]=arguments[K];1===F.length&&F[0].constructor&&"Object"===Object.prototype.toString.call(F[0]).slice(8,-1)?A=F[0]:[h,A]=F,A||(A={}),A=Vd({},A),h&&!A.el&&(A.el=h);const Te=Il();if(A.el&&"string"==typeof A.el&&Te.querySelectorAll(A.el).length>1){const nt=[];return Te.querySelectorAll(A.el).forEach(pt=>{const bt=Vd({},A,{el:pt});nt.push(new dd(bt))}),nt}const je=this;je.__swiper__=!0,je.support=op(),je.device=Lf({userAgent:A.userAgent}),je.browser=function _2(){return Ap||(Ap=function lf(){const y=hc(),h=Lf();let A=!1;function I(){const je=y.navigator.userAgent.toLowerCase();return je.indexOf("safari")>=0&&je.indexOf("chrome")<0&&je.indexOf("android")<0}if(I()){const je=String(y.navigator.userAgent);if(je.includes("Version/")){const[ze,ut]=je.split("Version/")[1].split(" ")[0].split(".").map(nt=>Number(nt));A=ze<16||16===ze&&ut<2}}const F=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(y.navigator.userAgent),K=I();return{isSafari:A||K,needPerspectiveFix:A,need3dFix:K||F&&h.ios,isWebView:F}}()),Ap}(),je.eventsListeners={},je.eventsAnyListeners=[],je.modules=[...je.__modules__],A.modules&&Array.isArray(A.modules)&&je.modules.push(...A.modules);const ze={};je.modules.forEach(nt=>{nt({params:A,swiper:je,extendParams:pm(A,ze),on:je.on.bind(je),once:je.once.bind(je),off:je.off.bind(je),emit:je.emit.bind(je)})});const ut=Vd({},ff,ze);return je.params=Vd({},ut,wh,A),je.originalParams=Vd({},je.params),je.passedParams=Vd({},A),je.params&&je.params.on&&Object.keys(je.params.on).forEach(nt=>{je.on(nt,je.params.on[nt])}),je.params&&je.params.onAny&&je.onAny(je.params.onAny),Object.assign(je,{enabled:je.params.enabled,el:h,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===je.params.direction,isVertical:()=>"vertical"===je.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:je.params.allowSlideNext,allowSlidePrev:je.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:je.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:je.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),je.emit("_swiper"),je.params.init&&je.init(),je}getDirectionLabel(h){return this.isHorizontal()?h:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[h]}getSlideIndex(h){const{slidesEl:A,params:I}=this,K=B1(wc(A,`.${I.slideClass}, swiper-slide`)[0]);return B1(h)-K}getSlideIndexByData(h){return this.getSlideIndex(this.slides.filter(A=>1*A.getAttribute("data-swiper-slide-index")===h)[0])}recalcSlides(){const{slidesEl:A,params:I}=this;this.slides=wc(A,`.${I.slideClass}, swiper-slide`)}enable(){const h=this;h.enabled||(h.enabled=!0,h.params.grabCursor&&h.setGrabCursor(),h.emit("enable"))}disable(){const h=this;h.enabled&&(h.enabled=!1,h.params.grabCursor&&h.unsetGrabCursor(),h.emit("disable"))}setProgress(h,A){const I=this;h=Math.min(Math.max(h,0),1);const F=I.minTranslate(),Te=(I.maxTranslate()-F)*h+F;I.translateTo(Te,typeof A>"u"?0:A),I.updateActiveIndex(),I.updateSlidesClasses()}emitContainerClasses(){const h=this;if(!h.params._emitClasses||!h.el)return;const A=h.el.className.split(" ").filter(I=>0===I.indexOf("swiper")||0===I.indexOf(h.params.containerModifierClass));h.emit("_containerClasses",A.join(" "))}getSlideClasses(h){const A=this;return A.destroyed?"":h.className.split(" ").filter(I=>0===I.indexOf("swiper-slide")||0===I.indexOf(A.params.slideClass)).join(" ")}emitSlidesClasses(){const h=this;if(!h.params._emitClasses||!h.el)return;const A=[];h.slides.forEach(I=>{const F=h.getSlideClasses(I);A.push({slideEl:I,classNames:F}),h.emit("_slideClass",I,F)}),h.emit("_slideClasses",A)}slidesPerViewDynamic(h,A){void 0===h&&(h="current"),void 0===A&&(A=!1);const{params:F,slides:K,slidesGrid:Te,slidesSizesGrid:je,size:ze,activeIndex:ut}=this;let nt=1;if("number"==typeof F.slidesPerView)return F.slidesPerView;if(F.centeredSlides){let bt,pt=K[ut]?Math.ceil(K[ut].swiperSlideSize):0;for(let rn=ut+1;rn<K.length;rn+=1)K[rn]&&!bt&&(pt+=Math.ceil(K[rn].swiperSlideSize),nt+=1,pt>ze&&(bt=!0));for(let rn=ut-1;rn>=0;rn-=1)K[rn]&&!bt&&(pt+=K[rn].swiperSlideSize,nt+=1,pt>ze&&(bt=!0))}else if("current"===h)for(let pt=ut+1;pt<K.length;pt+=1)(A?Te[pt]+je[pt]-Te[ut]<ze:Te[pt]-Te[ut]<ze)&&(nt+=1);else for(let pt=ut-1;pt>=0;pt-=1)Te[ut]-Te[pt]<ze&&(nt+=1);return nt}update(){const h=this;if(!h||h.destroyed)return;const{snapGrid:A,params:I}=h;function F(){const je=Math.min(Math.max(h.rtlTranslate?-1*h.translate:h.translate,h.maxTranslate()),h.minTranslate());h.setTranslate(je),h.updateActiveIndex(),h.updateSlidesClasses()}let K;I.breakpoints&&h.setBreakpoint(),[...h.el.querySelectorAll('[loading="lazy"]')].forEach(Te=>{Te.complete&&a1(h,Te)}),h.updateSize(),h.updateSlides(),h.updateProgress(),h.updateSlidesClasses(),I.freeMode&&I.freeMode.enabled&&!I.cssMode?(F(),I.autoHeight&&h.updateAutoHeight()):(K=h.slideTo(("auto"===I.slidesPerView||I.slidesPerView>1)&&h.isEnd&&!I.centeredSlides?(h.virtual&&I.virtual.enabled?h.virtual.slides:h.slides).length-1:h.activeIndex,0,!1,!0),K||F()),I.watchOverflow&&A!==h.snapGrid&&h.checkOverflow(),h.emit("update")}changeDirection(h,A){void 0===A&&(A=!0);const I=this,F=I.params.direction;return h||(h="horizontal"===F?"vertical":"horizontal"),h===F||"horizontal"!==h&&"vertical"!==h||(I.el.classList.remove(`${I.params.containerModifierClass}${F}`),I.el.classList.add(`${I.params.containerModifierClass}${h}`),I.emitContainerClasses(),I.params.direction=h,I.slides.forEach(K=>{"vertical"===h?K.style.width="":K.style.height=""}),I.emit("changeDirection"),A&&I.update()),I}changeLanguageDirection(h){const A=this;A.rtl&&"rtl"===h||!A.rtl&&"ltr"===h||(A.rtl="rtl"===h,A.rtlTranslate="horizontal"===A.params.direction&&A.rtl,A.rtl?(A.el.classList.add(`${A.params.containerModifierClass}rtl`),A.el.dir="rtl"):(A.el.classList.remove(`${A.params.containerModifierClass}rtl`),A.el.dir="ltr"),A.update())}mount(h){const A=this;if(A.mounted)return!0;let I=h||A.params.el;if("string"==typeof I&&(I=document.querySelector(I)),!I)return!1;I.swiper=A,I.parentNode&&I.parentNode.host&&I.parentNode.host.nodeName===A.params.swiperElementNodeName.toUpperCase()&&(A.isElement=!0);const F=()=>`.${(A.params.wrapperClass||"").trim().split(" ").join(".")}`;let Te=I&&I.shadowRoot&&I.shadowRoot.querySelector?I.shadowRoot.querySelector(F()):wc(I,F())[0];return!Te&&A.params.createElements&&(Te=eu("div",A.params.wrapperClass),I.append(Te),wc(I,`.${A.params.slideClass}`).forEach(je=>{Te.append(je)})),Object.assign(A,{el:I,wrapperEl:Te,slidesEl:A.isElement&&!I.parentNode.host.slideSlots?I.parentNode.host:Te,hostEl:A.isElement?I.parentNode.host:I,mounted:!0,rtl:"rtl"===I.dir.toLowerCase()||"rtl"===r1(I,"direction"),rtlTranslate:"horizontal"===A.params.direction&&("rtl"===I.dir.toLowerCase()||"rtl"===r1(I,"direction")),wrongRTL:"-webkit-box"===r1(Te,"display")}),!0}init(h){const A=this;if(A.initialized||!1===A.mount(h))return A;A.emit("beforeInit"),A.params.breakpoints&&A.setBreakpoint(),A.addClasses(),A.updateSize(),A.updateSlides(),A.params.watchOverflow&&A.checkOverflow(),A.params.grabCursor&&A.enabled&&A.setGrabCursor(),A.slideTo(A.params.loop&&A.virtual&&A.params.virtual.enabled?A.params.initialSlide+A.virtual.slidesBefore:A.params.initialSlide,0,A.params.runCallbacksOnInit,!1,!0),A.params.loop&&A.loopCreate(),A.attachEvents();const F=[...A.el.querySelectorAll('[loading="lazy"]')];return A.isElement&&F.push(...A.hostEl.querySelectorAll('[loading="lazy"]')),F.forEach(K=>{K.complete?a1(A,K):K.addEventListener("load",Te=>{a1(A,Te.target)})}),ap(A),A.initialized=!0,ap(A),A.emit("init"),A.emit("afterInit"),A}destroy(h,A){void 0===h&&(h=!0),void 0===A&&(A=!0);const I=this,{params:F,el:K,wrapperEl:Te,slides:je}=I;return typeof I.params>"u"||I.destroyed||(I.emit("beforeDestroy"),I.initialized=!1,I.detachEvents(),F.loop&&I.loopDestroy(),A&&(I.removeClasses(),K&&"string"!=typeof K&&K.removeAttribute("style"),Te&&Te.removeAttribute("style"),je&&je.length&&je.forEach(ze=>{ze.classList.remove(F.slideVisibleClass,F.slideFullyVisibleClass,F.slideActiveClass,F.slideNextClass,F.slidePrevClass),ze.removeAttribute("style"),ze.removeAttribute("data-swiper-slide-index")})),I.emit("destroy"),Object.keys(I.eventsListeners).forEach(ze=>{I.off(ze)}),!1!==h&&(I.el&&"string"!=typeof I.el&&(I.el.swiper=null),function b1(y){const h=y;Object.keys(h).forEach(A=>{try{h[A]=null}catch{}try{delete h[A]}catch{}})}(I)),I.destroyed=!0),null}static extendDefaults(h){Vd(wh,h)}static get extendedDefaults(){return wh}static get defaults(){return ff}static installModule(h){dd.prototype.__modules__||(dd.prototype.__modules__=[]);const A=dd.prototype.__modules__;"function"==typeof h&&A.indexOf(h)<0&&A.push(h)}static use(h){return Array.isArray(h)?(h.forEach(A=>dd.installModule(A)),dd):(dd.installModule(h),dd)}}function F0(y,h,A,I){return y.params.createElements&&Object.keys(I).forEach(F=>{if(!A[F]&&!0===A.auto){let K=wc(y.el,`.${I[F]}`)[0];K||(K=eu("div",I[F]),K.className=I[F],y.el.append(K)),A[F]=K,h[F]=K}}),A}function V0(y){return void 0===y&&(y=""),`.${y.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Nu(y){const h=this,{params:A,slidesEl:I}=h;A.loop&&h.loopDestroy();const F=K=>{if("string"==typeof K){const Te=document.createElement("div");Te.innerHTML=K,I.append(Te.children[0]),Te.innerHTML=""}else I.append(K)};if("object"==typeof y&&"length"in y)for(let K=0;K<y.length;K+=1)y[K]&&F(y[K]);else F(y);h.recalcSlides(),A.loop&&h.loopCreate(),(!A.observer||h.isElement)&&h.update()}function $l(y){const h=this,{params:A,activeIndex:I,slidesEl:F}=h;A.loop&&h.loopDestroy();let K=I+1;const Te=je=>{if("string"==typeof je){const ze=document.createElement("div");ze.innerHTML=je,F.prepend(ze.children[0]),ze.innerHTML=""}else F.prepend(je)};if("object"==typeof y&&"length"in y){for(let je=0;je<y.length;je+=1)y[je]&&Te(y[je]);K=I+y.length}else Te(y);h.recalcSlides(),A.loop&&h.loopCreate(),(!A.observer||h.isElement)&&h.update(),h.slideTo(K,0,!1)}function l0(y,h){const A=this,{params:I,activeIndex:F,slidesEl:K}=A;let Te=F;I.loop&&(Te-=A.loopedSlides,A.loopDestroy(),A.recalcSlides());const je=A.slides.length;if(y<=0)return void A.prependSlide(h);if(y>=je)return void A.appendSlide(h);let ze=Te>y?Te+1:Te;const ut=[];for(let nt=je-1;nt>=y;nt-=1){const pt=A.slides[nt];pt.remove(),ut.unshift(pt)}if("object"==typeof h&&"length"in h){for(let nt=0;nt<h.length;nt+=1)h[nt]&&K.append(h[nt]);ze=Te>y?Te+h.length:Te}else K.append(h);for(let nt=0;nt<ut.length;nt+=1)K.append(ut[nt]);A.recalcSlides(),I.loop&&A.loopCreate(),(!I.observer||A.isElement)&&A.update(),A.slideTo(I.loop?ze+A.loopedSlides:ze,0,!1)}function Op(y){const h=this,{params:A,activeIndex:I}=h;let F=I;A.loop&&(F-=h.loopedSlides,h.loopDestroy());let Te,K=F;if("object"==typeof y&&"length"in y){for(let je=0;je<y.length;je+=1)Te=y[je],h.slides[Te]&&h.slides[Te].remove(),Te<K&&(K-=1);K=Math.max(K,0)}else Te=y,h.slides[Te]&&h.slides[Te].remove(),Te<K&&(K-=1),K=Math.max(K,0);h.recalcSlides(),A.loop&&h.loopCreate(),(!A.observer||h.isElement)&&h.update(),h.slideTo(A.loop?K+h.loopedSlides:K,0,!1)}function mm(){const y=this,h=[];for(let A=0;A<y.slides.length;A+=1)h.push(A);y.removeSlide(h)}function hp(y){const{effect:h,swiper:A,on:I,setTranslate:F,setTransition:K,overwriteParams:Te,perspective:je,recreateShadows:ze,getEffectParams:ut}=y;let nt;I("beforeInit",()=>{if(A.params.effect!==h)return;A.classNames.push(`${A.params.containerModifierClass}${h}`),je&&je()&&A.classNames.push(`${A.params.containerModifierClass}3d`);const pt=Te?Te():{};Object.assign(A.params,pt),Object.assign(A.originalParams,pt)}),I("setTranslate",()=>{A.params.effect===h&&F()}),I("setTransition",(pt,bt)=>{A.params.effect===h&&K(bt)}),I("transitionEnd",()=>{if(A.params.effect===h&&ze){if(!ut||!ut().slideShadows)return;A.slides.forEach(pt=>{pt.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(bt=>bt.remove())}),ze()}}),I("virtualUpdate",()=>{A.params.effect===h&&(A.slides.length||(nt=!0),requestAnimationFrame(()=>{nt&&A.slides&&A.slides.length&&(F(),nt=!1)}))})}function pp(y,h){const A=n0(h);return A!==h&&(A.style.backfaceVisibility="hidden",A.style["-webkit-backface-visibility"]="hidden"),A}function C2(y){let{swiper:h,duration:A,transformElements:I,allSlides:F}=y;const{activeIndex:K}=h;if(h.params.virtualTranslate&&0!==A){let ze,je=!1;ze=F?I:I.filter(ut=>{const nt=ut.classList.contains("swiper-slide-transform")?(je=>je.parentElement?je.parentElement:h.slides.filter(ut=>ut.shadowRoot&&ut.shadowRoot===je.parentNode)[0])(ut):ut;return h.getSlideIndex(nt)===K}),ze.forEach(ut=>{ip(ut,()=>{if(je||!h||h.destroyed)return;je=!0,h.animating=!1;const nt=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});h.wrapperEl.dispatchEvent(nt)})})}}function H1(y,h,A){const I=`swiper-slide-shadow${A?`-${A}`:""}${y?` swiper-slide-shadow-${y}`:""}`,F=n0(h);let K=F.querySelector(`.${I.split(" ").join(".")}`);return K||(K=eu("div",I.split(" ")),F.append(K)),K}Object.keys(U1).forEach(y=>{Object.keys(U1[y]).forEach(h=>{dd.prototype[h]=U1[y][h]})}),dd.use([function ul(y){let{swiper:h,on:A,emit:I}=y;const F=hc();let K=null,Te=null;const je=()=>{!h||h.destroyed||!h.initialized||(I("beforeResize"),I("resize"))},nt=()=>{!h||h.destroyed||!h.initialized||I("orientationchange")};A("init",()=>{h.params.resizeObserver&&typeof F.ResizeObserver<"u"?!h||h.destroyed||!h.initialized||(K=new ResizeObserver(pt=>{Te=F.requestAnimationFrame(()=>{const{width:bt,height:rn}=h;let fn=bt,mn=rn;pt.forEach(wn=>{let{contentBoxSize:Nt,contentRect:Ln,target:_n}=wn;_n&&_n!==h.el||(fn=Ln?Ln.width:(Nt[0]||Nt).inlineSize,mn=Ln?Ln.height:(Nt[0]||Nt).blockSize)}),(fn!==bt||mn!==rn)&&je()})}),K.observe(h.el)):(F.addEventListener("resize",je),F.addEventListener("orientationchange",nt))}),A("destroy",()=>{Te&&F.cancelAnimationFrame(Te),K&&K.unobserve&&h.el&&(K.unobserve(h.el),K=null),F.removeEventListener("resize",je),F.removeEventListener("orientationchange",nt)})},function Dp(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const K=[],Te=hc(),je=function(nt,pt){void 0===pt&&(pt={});const rn=new(Te.MutationObserver||Te.WebkitMutationObserver)(fn=>{if(h.__preventObserver__)return;if(1===fn.length)return void F("observerUpdate",fn[0]);const mn=function(){F("observerUpdate",fn[0])};Te.requestAnimationFrame?Te.requestAnimationFrame(mn):Te.setTimeout(mn,0)});rn.observe(nt,{attributes:typeof pt.attributes>"u"||pt.attributes,childList:h.isElement||(typeof pt.childList>"u"||pt).childList,characterData:typeof pt.characterData>"u"||pt.characterData}),K.push(rn)};A({observer:!1,observeParents:!1,observeSlideChildren:!1}),I("init",()=>{if(h.params.observer){if(h.params.observeParents){const nt=N1(h.hostEl);for(let pt=0;pt<nt.length;pt+=1)je(nt[pt])}je(h.hostEl,{childList:h.params.observeSlideChildren}),je(h.wrapperEl,{attributes:!1})}}),I("destroy",()=>{K.forEach(nt=>{nt.disconnect()}),K.splice(0,K.length)})}]);const Ml=[function C1(y){let K,{swiper:h,extendParams:A,on:I,emit:F}=y;A({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});const Te=Il();h.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const je=Te.createElement("div");function ze(fn,mn){const wn=h.params.virtual;if(wn.cache&&h.virtual.cache[mn])return h.virtual.cache[mn];let Nt;return wn.renderSlide?(Nt=wn.renderSlide.call(h,fn,mn),"string"==typeof Nt&&(je.innerHTML=Nt,Nt=je.children[0])):Nt=h.isElement?eu("swiper-slide"):eu("div",h.params.slideClass),Nt.setAttribute("data-swiper-slide-index",mn),wn.renderSlide||(Nt.innerHTML=fn),wn.cache&&(h.virtual.cache[mn]=Nt),Nt}function ut(fn,mn){const{slidesPerView:wn,slidesPerGroup:Nt,centeredSlides:Ln,loop:_n,initialSlide:di}=h.params;if(mn&&!_n&&di>0)return;const{addSlidesBefore:uo,addSlidesAfter:Qo}=h.params.virtual,{from:ur,to:zo,slides:Qi,slidesGrid:Po,offset:Yo}=h.virtual;h.params.cssMode||h.updateActiveIndex();const vo=h.activeIndex||0;let Si,ko,vr;Si=h.rtlTranslate?"right":h.isHorizontal()?"left":"top",Ln?(ko=Math.floor(wn/2)+Nt+Qo,vr=Math.floor(wn/2)+Nt+uo):(ko=wn+(Nt-1)+Qo,vr=(_n?wn:Nt)+uo);let Rs=vo-vr,$o=vo+ko;_n||(Rs=Math.max(Rs,0),$o=Math.min($o,Qi.length-1));let No=(h.slidesGrid[Rs]||0)-(h.slidesGrid[0]||0);function Xr(){h.updateSlides(),h.updateProgress(),h.updateSlidesClasses(),F("virtualUpdate")}if(_n&&vo>=vr?(Rs-=vr,Ln||(No+=h.slidesGrid[0])):_n&&vo<vr&&(Rs=-vr,Ln&&(No+=h.slidesGrid[0])),Object.assign(h.virtual,{from:Rs,to:$o,offset:No,slidesGrid:h.slidesGrid,slidesBefore:vr,slidesAfter:ko}),ur===Rs&&zo===$o&&!fn)return h.slidesGrid!==Po&&No!==Yo&&h.slides.forEach(Ls=>{Ls.style[Si]=No-Math.abs(h.cssOverflowAdjustment())+"px"}),h.updateProgress(),void F("virtualUpdate");if(h.params.virtual.renderExternal)return h.params.virtual.renderExternal.call(h,{offset:No,from:Rs,to:$o,slides:function(){const Kl=[];for(let Yl=Rs;Yl<=$o;Yl+=1)Kl.push(Qi[Yl]);return Kl}()}),void(h.params.virtual.renderExternalUpdate?Xr():F("virtualUpdate"));const ga=[],xr=[],qr=Ls=>{let Kl=Ls;return Ls<0?Kl=Qi.length+Ls:Kl>=Qi.length&&(Kl-=Qi.length),Kl};if(fn)h.slides.filter(Ls=>Ls.matches(`.${h.params.slideClass}, swiper-slide`)).forEach(Ls=>{Ls.remove()});else for(let Ls=ur;Ls<=zo;Ls+=1)if(Ls<Rs||Ls>$o){const Kl=qr(Ls);h.slides.filter(Yl=>Yl.matches(`.${h.params.slideClass}[data-swiper-slide-index="${Kl}"], swiper-slide[data-swiper-slide-index="${Kl}"]`)).forEach(Yl=>{Yl.remove()})}const jc=_n?2*Qi.length:Qi.length;for(let Ls=_n?-Qi.length:0;Ls<jc;Ls+=1)if(Ls>=Rs&&Ls<=$o){const Kl=qr(Ls);typeof zo>"u"||fn?xr.push(Kl):(Ls>zo&&xr.push(Kl),Ls<ur&&ga.push(Kl))}if(xr.forEach(Ls=>{h.slidesEl.append(ze(Qi[Ls],Ls))}),_n)for(let Ls=ga.length-1;Ls>=0;Ls-=1){const Kl=ga[Ls];h.slidesEl.prepend(ze(Qi[Kl],Kl))}else ga.sort((Ls,Kl)=>Kl-Ls),ga.forEach(Ls=>{h.slidesEl.prepend(ze(Qi[Ls],Ls))});wc(h.slidesEl,".swiper-slide, swiper-slide").forEach(Ls=>{Ls.style[Si]=No-Math.abs(h.cssOverflowAdjustment())+"px"}),Xr()}I("beforeInit",()=>{if(!h.params.virtual.enabled)return;let fn;if(typeof h.passedParams.virtual.slides>"u"){const mn=[...h.slidesEl.children].filter(wn=>wn.matches(`.${h.params.slideClass}, swiper-slide`));mn&&mn.length&&(h.virtual.slides=[...mn],fn=!0,mn.forEach((wn,Nt)=>{wn.setAttribute("data-swiper-slide-index",Nt),h.virtual.cache[Nt]=wn,wn.remove()}))}fn||(h.virtual.slides=h.params.virtual.slides),h.classNames.push(`${h.params.containerModifierClass}virtual`),h.params.watchSlidesProgress=!0,h.originalParams.watchSlidesProgress=!0,ut(!1,!0)}),I("setTranslate",()=>{h.params.virtual.enabled&&(h.params.cssMode&&!h._immediateVirtual?(clearTimeout(K),K=setTimeout(()=>{ut()},100)):ut())}),I("init update resize",()=>{h.params.virtual.enabled&&h.params.cssMode&&bc(h.wrapperEl,"--swiper-virtual-size",`${h.virtualSize}px`)}),Object.assign(h.virtual,{appendSlide:function nt(fn){if("object"==typeof fn&&"length"in fn)for(let mn=0;mn<fn.length;mn+=1)fn[mn]&&h.virtual.slides.push(fn[mn]);else h.virtual.slides.push(fn);ut(!0)},prependSlide:function pt(fn){const mn=h.activeIndex;let wn=mn+1,Nt=1;if(Array.isArray(fn)){for(let Ln=0;Ln<fn.length;Ln+=1)fn[Ln]&&h.virtual.slides.unshift(fn[Ln]);wn=mn+fn.length,Nt=fn.length}else h.virtual.slides.unshift(fn);if(h.params.virtual.cache){const Ln=h.virtual.cache,_n={};Object.keys(Ln).forEach(di=>{const uo=Ln[di],Qo=uo.getAttribute("data-swiper-slide-index");Qo&&uo.setAttribute("data-swiper-slide-index",parseInt(Qo,10)+Nt),_n[parseInt(di,10)+Nt]=uo}),h.virtual.cache=_n}ut(!0),h.slideTo(wn,0)},removeSlide:function bt(fn){if(typeof fn>"u"||null===fn)return;let mn=h.activeIndex;if(Array.isArray(fn))for(let wn=fn.length-1;wn>=0;wn-=1)h.params.virtual.cache&&(delete h.virtual.cache[fn[wn]],Object.keys(h.virtual.cache).forEach(Nt=>{Nt>fn&&(h.virtual.cache[Nt-1]=h.virtual.cache[Nt],h.virtual.cache[Nt-1].setAttribute("data-swiper-slide-index",Nt-1),delete h.virtual.cache[Nt])})),h.virtual.slides.splice(fn[wn],1),fn[wn]<mn&&(mn-=1),mn=Math.max(mn,0);else h.params.virtual.cache&&(delete h.virtual.cache[fn],Object.keys(h.virtual.cache).forEach(wn=>{wn>fn&&(h.virtual.cache[wn-1]=h.virtual.cache[wn],h.virtual.cache[wn-1].setAttribute("data-swiper-slide-index",wn-1),delete h.virtual.cache[wn])})),h.virtual.slides.splice(fn,1),fn<mn&&(mn-=1),mn=Math.max(mn,0);ut(!0),h.slideTo(mn,0)},removeAllSlides:function rn(){h.virtual.slides=[],h.params.virtual.cache&&(h.virtual.cache={}),ut(!0),h.slideTo(0,0)},update:ut})},function kg(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const K=Il(),Te=hc();function je(nt){if(!h.enabled)return;const{rtlTranslate:pt}=h;let bt=nt;bt.originalEvent&&(bt=bt.originalEvent);const rn=bt.keyCode||bt.charCode,fn=h.params.keyboard.pageUpDown,mn=fn&&33===rn,wn=fn&&34===rn,Nt=37===rn,Ln=39===rn,_n=38===rn,di=40===rn;if(!h.allowSlideNext&&(h.isHorizontal()&&Ln||h.isVertical()&&di||wn)||!h.allowSlidePrev&&(h.isHorizontal()&&Nt||h.isVertical()&&_n||mn))return!1;if(!(bt.shiftKey||bt.altKey||bt.ctrlKey||bt.metaKey||K.activeElement&&K.activeElement.nodeName&&("input"===K.activeElement.nodeName.toLowerCase()||"textarea"===K.activeElement.nodeName.toLowerCase()))){if(h.params.keyboard.onlyInViewport&&(mn||wn||Nt||Ln||_n||di)){let uo=!1;if(N1(h.el,`.${h.params.slideClass}, swiper-slide`).length>0&&0===N1(h.el,`.${h.params.slideActiveClass}`).length)return;const Qo=h.el,ur=Qo.clientWidth,zo=Qo.clientHeight,Qi=Te.innerWidth,Po=Te.innerHeight,Yo=gu(Qo);pt&&(Yo.left-=Qo.scrollLeft);const vo=[[Yo.left,Yo.top],[Yo.left+ur,Yo.top],[Yo.left,Yo.top+zo],[Yo.left+ur,Yo.top+zo]];for(let Si=0;Si<vo.length;Si+=1){const ko=vo[Si];if(ko[0]>=0&&ko[0]<=Qi&&ko[1]>=0&&ko[1]<=Po){if(0===ko[0]&&0===ko[1])continue;uo=!0}}if(!uo)return}h.isHorizontal()?((mn||wn||Nt||Ln)&&(bt.preventDefault?bt.preventDefault():bt.returnValue=!1),((wn||Ln)&&!pt||(mn||Nt)&&pt)&&h.slideNext(),((mn||Nt)&&!pt||(wn||Ln)&&pt)&&h.slidePrev()):((mn||wn||_n||di)&&(bt.preventDefault?bt.preventDefault():bt.returnValue=!1),(wn||di)&&h.slideNext(),(mn||_n)&&h.slidePrev()),F("keyPress",rn)}}function ze(){h.keyboard.enabled||(K.addEventListener("keydown",je),h.keyboard.enabled=!0)}function ut(){h.keyboard.enabled&&(K.removeEventListener("keydown",je),h.keyboard.enabled=!1)}h.keyboard={enabled:!1},A({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),I("init",()=>{h.params.keyboard.enabled&&ze()}),I("destroy",()=>{h.keyboard.enabled&&ut()}),Object.assign(h.keyboard,{enable:ze,disable:ut})},function u1(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const K=hc();A({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),h.mousewheel={enabled:!1};let Te,ze,je=yc();const ut=[];function pt(){h.enabled&&(h.mouseEntered=!0)}function bt(){h.enabled&&(h.mouseEntered=!1)}function rn(_n){return!(h.params.mousewheel.thresholdDelta&&_n.delta<h.params.mousewheel.thresholdDelta||h.params.mousewheel.thresholdTime&&yc()-je<h.params.mousewheel.thresholdTime)&&(_n.delta>=6&&yc()-je<60||(_n.direction<0?(!h.isEnd||h.params.loop)&&!h.animating&&(h.slideNext(),F("scroll",_n.raw)):(!h.isBeginning||h.params.loop)&&!h.animating&&(h.slidePrev(),F("scroll",_n.raw)),je=(new K.Date).getTime(),!1))}function mn(_n){let di=_n,uo=!0;if(!h.enabled||_n.target.closest(`.${h.params.mousewheel.noMousewheelClass}`))return;const Qo=h.params.mousewheel;h.params.cssMode&&di.preventDefault();let ur=h.el;"container"!==h.params.mousewheel.eventsTarget&&(ur=document.querySelector(h.params.mousewheel.eventsTarget));const zo=ur&&ur.contains(di.target);if(!h.mouseEntered&&!zo&&!Qo.releaseOnEdges)return!0;di.originalEvent&&(di=di.originalEvent);let Qi=0;const Po=h.rtlTranslate?-1:1,Yo=function nt(_n){let ur=0,zo=0,Qi=0,Po=0;return"detail"in _n&&(zo=_n.detail),"wheelDelta"in _n&&(zo=-_n.wheelDelta/120),"wheelDeltaY"in _n&&(zo=-_n.wheelDeltaY/120),"wheelDeltaX"in _n&&(ur=-_n.wheelDeltaX/120),"axis"in _n&&_n.axis===_n.HORIZONTAL_AXIS&&(ur=zo,zo=0),Qi=10*ur,Po=10*zo,"deltaY"in _n&&(Po=_n.deltaY),"deltaX"in _n&&(Qi=_n.deltaX),_n.shiftKey&&!Qi&&(Qi=Po,Po=0),(Qi||Po)&&_n.deltaMode&&(1===_n.deltaMode?(Qi*=40,Po*=40):(Qi*=800,Po*=800)),Qi&&!ur&&(ur=Qi<1?-1:1),Po&&!zo&&(zo=Po<1?-1:1),{spinX:ur,spinY:zo,pixelX:Qi,pixelY:Po}}(di);if(Qo.forceToAxis)if(h.isHorizontal()){if(!(Math.abs(Yo.pixelX)>Math.abs(Yo.pixelY)))return!0;Qi=-Yo.pixelX*Po}else{if(!(Math.abs(Yo.pixelY)>Math.abs(Yo.pixelX)))return!0;Qi=-Yo.pixelY}else Qi=Math.abs(Yo.pixelX)>Math.abs(Yo.pixelY)?-Yo.pixelX*Po:-Yo.pixelY;if(0===Qi)return!0;Qo.invert&&(Qi=-Qi);let vo=h.getTranslate()+Qi*Qo.sensitivity;if(vo>=h.minTranslate()&&(vo=h.minTranslate()),vo<=h.maxTranslate()&&(vo=h.maxTranslate()),uo=!!h.params.loop||!(vo===h.minTranslate()||vo===h.maxTranslate()),uo&&h.params.nested&&di.stopPropagation(),h.params.freeMode&&h.params.freeMode.enabled){const Si={time:yc(),delta:Math.abs(Qi),direction:Math.sign(Qi)},ko=ze&&Si.time<ze.time+500&&Si.delta<=ze.delta&&Si.direction===ze.direction;if(!ko){ze=void 0;let vr=h.getTranslate()+Qi*Qo.sensitivity;const Rs=h.isBeginning,$o=h.isEnd;if(vr>=h.minTranslate()&&(vr=h.minTranslate()),vr<=h.maxTranslate()&&(vr=h.maxTranslate()),h.setTransition(0),h.setTranslate(vr),h.updateProgress(),h.updateActiveIndex(),h.updateSlidesClasses(),(!Rs&&h.isBeginning||!$o&&h.isEnd)&&h.updateSlidesClasses(),h.params.loop&&h.loopFix({direction:Si.direction<0?"next":"prev",byMousewheel:!0}),h.params.freeMode.sticky){clearTimeout(Te),Te=void 0,ut.length>=15&&ut.shift();const No=ut.length?ut[ut.length-1]:void 0,Xr=ut[0];if(ut.push(Si),No&&(Si.delta>No.delta||Si.direction!==No.direction))ut.splice(0);else if(ut.length>=15&&Si.time-Xr.time<500&&Xr.delta-Si.delta>=1&&Si.delta<=6){const ga=Qi>0?.8:.2;ze=Si,ut.splice(0),Te=n1(()=>{h.slideToClosest(h.params.speed,!0,void 0,ga)},0)}Te||(Te=n1(()=>{ze=Si,ut.splice(0),h.slideToClosest(h.params.speed,!0,void 0,.5)},500))}if(ko||F("scroll",di),h.params.autoplay&&h.params.autoplayDisableOnInteraction&&h.autoplay.stop(),Qo.releaseOnEdges&&(vr===h.minTranslate()||vr===h.maxTranslate()))return!0}}else{const Si={time:yc(),delta:Math.abs(Qi),direction:Math.sign(Qi),raw:_n};ut.length>=2&&ut.shift();const ko=ut.length?ut[ut.length-1]:void 0;if(ut.push(Si),ko?(Si.direction!==ko.direction||Si.delta>ko.delta||Si.time>ko.time+150)&&rn(Si):rn(Si),function fn(_n){const di=h.params.mousewheel;if(_n.direction<0){if(h.isEnd&&!h.params.loop&&di.releaseOnEdges)return!0}else if(h.isBeginning&&!h.params.loop&&di.releaseOnEdges)return!0;return!1}(Si))return!0}return di.preventDefault?di.preventDefault():di.returnValue=!1,!1}function wn(_n){let di=h.el;"container"!==h.params.mousewheel.eventsTarget&&(di=document.querySelector(h.params.mousewheel.eventsTarget)),di[_n]("mouseenter",pt),di[_n]("mouseleave",bt),di[_n]("wheel",mn)}function Nt(){return h.params.cssMode?(h.wrapperEl.removeEventListener("wheel",mn),!0):!h.mousewheel.enabled&&(wn("addEventListener"),h.mousewheel.enabled=!0,!0)}function Ln(){return h.params.cssMode?(h.wrapperEl.addEventListener(event,mn),!0):!!h.mousewheel.enabled&&(wn("removeEventListener"),h.mousewheel.enabled=!1,!0)}I("init",()=>{!h.params.mousewheel.enabled&&h.params.cssMode&&Ln(),h.params.mousewheel.enabled&&Nt()}),I("destroy",()=>{h.params.cssMode&&Nt(),h.mousewheel.enabled&&Ln()}),Object.assign(h.mousewheel,{enable:Nt,disable:Ln})},function x2(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;function K(fn){let mn;return fn&&"string"==typeof fn&&h.isElement&&(mn=h.el.querySelector(fn),mn)?mn:(fn&&("string"==typeof fn&&(mn=[...document.querySelectorAll(fn)]),h.params.uniqueNavElements&&"string"==typeof fn&&mn&&mn.length>1&&1===h.el.querySelectorAll(fn).length?mn=h.el.querySelector(fn):mn&&1===mn.length&&(mn=mn[0])),fn&&!mn?fn:mn)}function Te(fn,mn){const wn=h.params.navigation;(fn=La(fn)).forEach(Nt=>{Nt&&(Nt.classList[mn?"add":"remove"](...wn.disabledClass.split(" ")),"BUTTON"===Nt.tagName&&(Nt.disabled=mn),h.params.watchOverflow&&h.enabled&&Nt.classList[h.isLocked?"add":"remove"](wn.lockClass))})}function je(){const{nextEl:fn,prevEl:mn}=h.navigation;if(h.params.loop)return Te(mn,!1),void Te(fn,!1);Te(mn,h.isBeginning&&!h.params.rewind),Te(fn,h.isEnd&&!h.params.rewind)}function ze(fn){fn.preventDefault(),(!h.isBeginning||h.params.loop||h.params.rewind)&&(h.slidePrev(),F("navigationPrev"))}function ut(fn){fn.preventDefault(),(!h.isEnd||h.params.loop||h.params.rewind)&&(h.slideNext(),F("navigationNext"))}function nt(){const fn=h.params.navigation;if(h.params.navigation=F0(h,h.originalParams.navigation,h.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!fn.nextEl&&!fn.prevEl)return;let mn=K(fn.nextEl),wn=K(fn.prevEl);Object.assign(h.navigation,{nextEl:mn,prevEl:wn}),mn=La(mn),wn=La(wn);const Nt=(Ln,_n)=>{Ln&&Ln.addEventListener("click","next"===_n?ut:ze),!h.enabled&&Ln&&Ln.classList.add(...fn.lockClass.split(" "))};mn.forEach(Ln=>Nt(Ln,"next")),wn.forEach(Ln=>Nt(Ln,"prev"))}function pt(){let{nextEl:fn,prevEl:mn}=h.navigation;fn=La(fn),mn=La(mn);const wn=(Nt,Ln)=>{Nt.removeEventListener("click","next"===Ln?ut:ze),Nt.classList.remove(...h.params.navigation.disabledClass.split(" "))};fn.forEach(Nt=>wn(Nt,"next")),mn.forEach(Nt=>wn(Nt,"prev"))}A({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),h.navigation={nextEl:null,prevEl:null},I("init",()=>{!1===h.params.navigation.enabled?rn():(nt(),je())}),I("toEdge fromEdge lock unlock",()=>{je()}),I("destroy",()=>{pt()}),I("enable disable",()=>{let{nextEl:fn,prevEl:mn}=h.navigation;fn=La(fn),mn=La(mn),h.enabled?je():[...fn,...mn].filter(wn=>!!wn).forEach(wn=>wn.classList.add(h.params.navigation.lockClass))}),I("click",(fn,mn)=>{let{nextEl:wn,prevEl:Nt}=h.navigation;wn=La(wn),Nt=La(Nt);const Ln=mn.target;let _n=Nt.includes(Ln)||wn.includes(Ln);if(h.isElement&&!_n){const di=mn.path||mn.composedPath&&mn.composedPath();di&&(_n=di.find(uo=>wn.includes(uo)||Nt.includes(uo)))}if(h.params.navigation.hideOnClick&&!_n){if(h.pagination&&h.params.pagination&&h.params.pagination.clickable&&(h.pagination.el===Ln||h.pagination.el.contains(Ln)))return;let di;wn.length?di=wn[0].classList.contains(h.params.navigation.hiddenClass):Nt.length&&(di=Nt[0].classList.contains(h.params.navigation.hiddenClass)),F(!0===di?"navigationShow":"navigationHide"),[...wn,...Nt].filter(uo=>!!uo).forEach(uo=>uo.classList.toggle(h.params.navigation.hiddenClass))}});const rn=()=>{h.el.classList.add(...h.params.navigation.navigationDisabledClass.split(" ")),pt()};Object.assign(h.navigation,{enable:()=>{h.el.classList.remove(...h.params.navigation.navigationDisabledClass.split(" ")),nt(),je()},disable:rn,update:je,init:nt,destroy:pt})},function Gf(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const K="swiper-pagination";A({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:Nt=>Nt,formatFractionTotal:Nt=>Nt,bulletClass:`${K}-bullet`,bulletActiveClass:`${K}-bullet-active`,modifierClass:`${K}-`,currentClass:`${K}-current`,totalClass:`${K}-total`,hiddenClass:`${K}-hidden`,progressbarFillClass:`${K}-progressbar-fill`,progressbarOppositeClass:`${K}-progressbar-opposite`,clickableClass:`${K}-clickable`,lockClass:`${K}-lock`,horizontalClass:`${K}-horizontal`,verticalClass:`${K}-vertical`,paginationDisabledClass:`${K}-disabled`}}),h.pagination={el:null,bullets:[]};let Te,je=0;function ze(){return!h.params.pagination.el||!h.pagination.el||Array.isArray(h.pagination.el)&&0===h.pagination.el.length}function ut(Nt,Ln){const{bulletActiveClass:_n}=h.params.pagination;Nt&&(Nt=Nt[("prev"===Ln?"previous":"next")+"ElementSibling"])&&(Nt.classList.add(`${_n}-${Ln}`),(Nt=Nt[("prev"===Ln?"previous":"next")+"ElementSibling"])&&Nt.classList.add(`${_n}-${Ln}-${Ln}`))}function nt(Nt){const Ln=Nt.target.closest(V0(h.params.pagination.bulletClass));if(!Ln)return;Nt.preventDefault();const _n=B1(Ln)*h.params.slidesPerGroup;if(h.params.loop){if(h.realIndex===_n)return;h.slideToLoop(_n)}else h.slideTo(_n)}function pt(){const Nt=h.rtl,Ln=h.params.pagination;if(ze())return;let di,uo,_n=h.pagination.el;_n=La(_n);const ur=h.params.loop?Math.ceil((h.virtual&&h.params.virtual.enabled?h.virtual.slides.length:h.slides.length)/h.params.slidesPerGroup):h.snapGrid.length;if(h.params.loop?(uo=h.previousRealIndex||0,di=h.params.slidesPerGroup>1?Math.floor(h.realIndex/h.params.slidesPerGroup):h.realIndex):typeof h.snapIndex<"u"?(di=h.snapIndex,uo=h.previousSnapIndex):(uo=h.previousIndex||0,di=h.activeIndex||0),"bullets"===Ln.type&&h.pagination.bullets&&h.pagination.bullets.length>0){const zo=h.pagination.bullets;let Qi,Po,Yo;if(Ln.dynamicBullets&&(Te=s1(zo[0],h.isHorizontal()?"width":"height",!0),_n.forEach(vo=>{vo.style[h.isHorizontal()?"width":"height"]=Te*(Ln.dynamicMainBullets+4)+"px"}),Ln.dynamicMainBullets>1&&void 0!==uo&&(je+=di-(uo||0),je>Ln.dynamicMainBullets-1?je=Ln.dynamicMainBullets-1:je<0&&(je=0)),Qi=Math.max(di-je,0),Po=Qi+(Math.min(zo.length,Ln.dynamicMainBullets)-1),Yo=(Po+Qi)/2),zo.forEach(vo=>{const Si=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(ko=>`${Ln.bulletActiveClass}${ko}`)].map(ko=>"string"==typeof ko&&ko.includes(" ")?ko.split(" "):ko).flat();vo.classList.remove(...Si)}),_n.length>1)zo.forEach(vo=>{const Si=B1(vo);Si===di?vo.classList.add(...Ln.bulletActiveClass.split(" ")):h.isElement&&vo.setAttribute("part","bullet"),Ln.dynamicBullets&&(Si>=Qi&&Si<=Po&&vo.classList.add(...`${Ln.bulletActiveClass}-main`.split(" ")),Si===Qi&&ut(vo,"prev"),Si===Po&&ut(vo,"next"))});else{const vo=zo[di];if(vo&&vo.classList.add(...Ln.bulletActiveClass.split(" ")),h.isElement&&zo.forEach((Si,ko)=>{Si.setAttribute("part",ko===di?"bullet-active":"bullet")}),Ln.dynamicBullets){const Si=zo[Qi],ko=zo[Po];for(let vr=Qi;vr<=Po;vr+=1)zo[vr]&&zo[vr].classList.add(...`${Ln.bulletActiveClass}-main`.split(" "));ut(Si,"prev"),ut(ko,"next")}}if(Ln.dynamicBullets){const vo=Math.min(zo.length,Ln.dynamicMainBullets+4),Si=(Te*vo-Te)/2-Yo*Te,ko=Nt?"right":"left";zo.forEach(vr=>{vr.style[h.isHorizontal()?ko:"top"]=`${Si}px`})}}_n.forEach((zo,Qi)=>{if("fraction"===Ln.type&&(zo.querySelectorAll(V0(Ln.currentClass)).forEach(Po=>{Po.textContent=Ln.formatFractionCurrent(di+1)}),zo.querySelectorAll(V0(Ln.totalClass)).forEach(Po=>{Po.textContent=Ln.formatFractionTotal(ur)})),"progressbar"===Ln.type){let Po;Po=Ln.progressbarOpposite?h.isHorizontal()?"vertical":"horizontal":h.isHorizontal()?"horizontal":"vertical";const Yo=(di+1)/ur;let vo=1,Si=1;"horizontal"===Po?vo=Yo:Si=Yo,zo.querySelectorAll(V0(Ln.progressbarFillClass)).forEach(ko=>{ko.style.transform=`translate3d(0,0,0) scaleX(${vo}) scaleY(${Si})`,ko.style.transitionDuration=`${h.params.speed}ms`})}"custom"===Ln.type&&Ln.renderCustom?(zo.innerHTML=Ln.renderCustom(h,di+1,ur),0===Qi&&F("paginationRender",zo)):(0===Qi&&F("paginationRender",zo),F("paginationUpdate",zo)),h.params.watchOverflow&&h.enabled&&zo.classList[h.isLocked?"add":"remove"](Ln.lockClass)})}function bt(){const Nt=h.params.pagination;if(ze())return;const Ln=h.virtual&&h.params.virtual.enabled?h.virtual.slides.length:h.grid&&h.params.grid.rows>1?h.slides.length/Math.ceil(h.params.grid.rows):h.slides.length;let _n=h.pagination.el;_n=La(_n);let di="";if("bullets"===Nt.type){let uo=h.params.loop?Math.ceil(Ln/h.params.slidesPerGroup):h.snapGrid.length;h.params.freeMode&&h.params.freeMode.enabled&&uo>Ln&&(uo=Ln);for(let Qo=0;Qo<uo;Qo+=1)di+=Nt.renderBullet?Nt.renderBullet.call(h,Qo,Nt.bulletClass):`<${Nt.bulletElement} ${h.isElement?'part="bullet"':""} class="${Nt.bulletClass}"></${Nt.bulletElement}>`}"fraction"===Nt.type&&(di=Nt.renderFraction?Nt.renderFraction.call(h,Nt.currentClass,Nt.totalClass):`<span class="${Nt.currentClass}"></span> / <span class="${Nt.totalClass}"></span>`),"progressbar"===Nt.type&&(di=Nt.renderProgressbar?Nt.renderProgressbar.call(h,Nt.progressbarFillClass):`<span class="${Nt.progressbarFillClass}"></span>`),h.pagination.bullets=[],_n.forEach(uo=>{"custom"!==Nt.type&&(uo.innerHTML=di||""),"bullets"===Nt.type&&h.pagination.bullets.push(...uo.querySelectorAll(V0(Nt.bulletClass)))}),"custom"!==Nt.type&&F("paginationRender",_n[0])}function rn(){h.params.pagination=F0(h,h.originalParams.pagination,h.params.pagination,{el:"swiper-pagination"});const Nt=h.params.pagination;if(!Nt.el)return;let Ln;"string"==typeof Nt.el&&h.isElement&&(Ln=h.el.querySelector(Nt.el)),!Ln&&"string"==typeof Nt.el&&(Ln=[...document.querySelectorAll(Nt.el)]),Ln||(Ln=Nt.el),Ln&&0!==Ln.length&&(h.params.uniqueNavElements&&"string"==typeof Nt.el&&Array.isArray(Ln)&&Ln.length>1&&(Ln=[...h.el.querySelectorAll(Nt.el)],Ln.length>1&&(Ln=Ln.filter(_n=>N1(_n,".swiper")[0]===h.el)[0])),Array.isArray(Ln)&&1===Ln.length&&(Ln=Ln[0]),Object.assign(h.pagination,{el:Ln}),Ln=La(Ln),Ln.forEach(_n=>{"bullets"===Nt.type&&Nt.clickable&&_n.classList.add(...(Nt.clickableClass||"").split(" ")),_n.classList.add(Nt.modifierClass+Nt.type),_n.classList.add(h.isHorizontal()?Nt.horizontalClass:Nt.verticalClass),"bullets"===Nt.type&&Nt.dynamicBullets&&(_n.classList.add(`${Nt.modifierClass}${Nt.type}-dynamic`),je=0,Nt.dynamicMainBullets<1&&(Nt.dynamicMainBullets=1)),"progressbar"===Nt.type&&Nt.progressbarOpposite&&_n.classList.add(Nt.progressbarOppositeClass),Nt.clickable&&_n.addEventListener("click",nt),h.enabled||_n.classList.add(Nt.lockClass)}))}function fn(){const Nt=h.params.pagination;if(ze())return;let Ln=h.pagination.el;Ln&&(Ln=La(Ln),Ln.forEach(_n=>{_n.classList.remove(Nt.hiddenClass),_n.classList.remove(Nt.modifierClass+Nt.type),_n.classList.remove(h.isHorizontal()?Nt.horizontalClass:Nt.verticalClass),Nt.clickable&&(_n.classList.remove(...(Nt.clickableClass||"").split(" ")),_n.removeEventListener("click",nt))})),h.pagination.bullets&&h.pagination.bullets.forEach(_n=>_n.classList.remove(...Nt.bulletActiveClass.split(" ")))}I("changeDirection",()=>{if(!h.pagination||!h.pagination.el)return;const Nt=h.params.pagination;let{el:Ln}=h.pagination;Ln=La(Ln),Ln.forEach(_n=>{_n.classList.remove(Nt.horizontalClass,Nt.verticalClass),_n.classList.add(h.isHorizontal()?Nt.horizontalClass:Nt.verticalClass)})}),I("init",()=>{!1===h.params.pagination.enabled?wn():(rn(),bt(),pt())}),I("activeIndexChange",()=>{typeof h.snapIndex>"u"&&pt()}),I("snapIndexChange",()=>{pt()}),I("snapGridLengthChange",()=>{bt(),pt()}),I("destroy",()=>{fn()}),I("enable disable",()=>{let{el:Nt}=h.pagination;Nt&&(Nt=La(Nt),Nt.forEach(Ln=>Ln.classList[h.enabled?"remove":"add"](h.params.pagination.lockClass)))}),I("lock unlock",()=>{pt()}),I("click",(Nt,Ln)=>{const _n=Ln.target,di=La(h.pagination.el);if(h.params.pagination.el&&h.params.pagination.hideOnClick&&di&&di.length>0&&!_n.classList.contains(h.params.pagination.bulletClass)){if(h.navigation&&(h.navigation.nextEl&&_n===h.navigation.nextEl||h.navigation.prevEl&&_n===h.navigation.prevEl))return;const uo=di[0].classList.contains(h.params.pagination.hiddenClass);F(!0===uo?"paginationShow":"paginationHide"),di.forEach(Qo=>Qo.classList.toggle(h.params.pagination.hiddenClass))}});const wn=()=>{h.el.classList.add(h.params.pagination.paginationDisabledClass);let{el:Nt}=h.pagination;Nt&&(Nt=La(Nt),Nt.forEach(Ln=>Ln.classList.add(h.params.pagination.paginationDisabledClass))),fn()};Object.assign(h.pagination,{enable:()=>{h.el.classList.remove(h.params.pagination.paginationDisabledClass);let{el:Nt}=h.pagination;Nt&&(Nt=La(Nt),Nt.forEach(Ln=>Ln.classList.remove(h.params.pagination.paginationDisabledClass))),rn(),bt(),pt()},disable:wn,render:bt,update:pt,init:rn,destroy:fn})},function k1(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const K=Il();let ut,nt,pt,bt,Te=!1,je=null,ze=null;function rn(){if(!h.params.scrollbar.el||!h.scrollbar.el)return;const{scrollbar:vo,rtlTranslate:Si}=h,{dragEl:ko,el:vr}=vo,Rs=h.params.scrollbar;let No=nt,Xr=(pt-nt)*(h.params.loop?h.progressLoop:h.progress);Si?(Xr=-Xr,Xr>0?(No=nt-Xr,Xr=0):-Xr+nt>pt&&(No=pt+Xr)):Xr<0?(No=nt+Xr,Xr=0):Xr+nt>pt&&(No=pt-Xr),h.isHorizontal()?(ko.style.transform=`translate3d(${Xr}px, 0, 0)`,ko.style.width=`${No}px`):(ko.style.transform=`translate3d(0px, ${Xr}px, 0)`,ko.style.height=`${No}px`),Rs.hide&&(clearTimeout(je),vr.style.opacity=1,je=setTimeout(()=>{vr.style.opacity=0,vr.style.transitionDuration="400ms"},1e3))}function mn(){if(!h.params.scrollbar.el||!h.scrollbar.el)return;const{scrollbar:vo}=h,{dragEl:Si,el:ko}=vo;Si.style.width="",Si.style.height="",pt=h.isHorizontal()?ko.offsetWidth:ko.offsetHeight,bt=h.size/(h.virtualSize+h.params.slidesOffsetBefore-(h.params.centeredSlides?h.snapGrid[0]:0)),nt="auto"===h.params.scrollbar.dragSize?pt*bt:parseInt(h.params.scrollbar.dragSize,10),h.isHorizontal()?Si.style.width=`${nt}px`:Si.style.height=`${nt}px`,ko.style.display=bt>=1?"none":"",h.params.scrollbar.hide&&(ko.style.opacity=0),h.params.watchOverflow&&h.enabled&&vo.el.classList[h.isLocked?"add":"remove"](h.params.scrollbar.lockClass)}function wn(vo){return h.isHorizontal()?vo.clientX:vo.clientY}function Nt(vo){const{scrollbar:Si,rtlTranslate:ko}=h,{el:vr}=Si;let Rs;Rs=(wn(vo)-gu(vr)[h.isHorizontal()?"left":"top"]-(null!==ut?ut:nt/2))/(pt-nt),Rs=Math.max(Math.min(Rs,1),0),ko&&(Rs=1-Rs);const $o=h.minTranslate()+(h.maxTranslate()-h.minTranslate())*Rs;h.updateProgress($o),h.setTranslate($o),h.updateActiveIndex(),h.updateSlidesClasses()}function Ln(vo){const Si=h.params.scrollbar,{scrollbar:ko,wrapperEl:vr}=h,{el:Rs,dragEl:$o}=ko;Te=!0,ut=vo.target===$o?wn(vo)-vo.target.getBoundingClientRect()[h.isHorizontal()?"left":"top"]:null,vo.preventDefault(),vo.stopPropagation(),vr.style.transitionDuration="100ms",$o.style.transitionDuration="100ms",Nt(vo),clearTimeout(ze),Rs.style.transitionDuration="0ms",Si.hide&&(Rs.style.opacity=1),h.params.cssMode&&(h.wrapperEl.style["scroll-snap-type"]="none"),F("scrollbarDragStart",vo)}function _n(vo){const{scrollbar:Si,wrapperEl:ko}=h,{el:vr,dragEl:Rs}=Si;Te&&(vo.preventDefault&&vo.cancelable?vo.preventDefault():vo.returnValue=!1,Nt(vo),ko.style.transitionDuration="0ms",vr.style.transitionDuration="0ms",Rs.style.transitionDuration="0ms",F("scrollbarDragMove",vo))}function di(vo){const Si=h.params.scrollbar,{scrollbar:ko,wrapperEl:vr}=h,{el:Rs}=ko;Te&&(Te=!1,h.params.cssMode&&(h.wrapperEl.style["scroll-snap-type"]="",vr.style.transitionDuration=""),Si.hide&&(clearTimeout(ze),ze=n1(()=>{Rs.style.opacity=0,Rs.style.transitionDuration="400ms"},1e3)),F("scrollbarDragEnd",vo),Si.snapOnRelease&&h.slideToClosest())}function uo(vo){const{scrollbar:Si,params:ko}=h,vr=Si.el;if(!vr)return;const $o=!!ko.passiveListeners&&{passive:!1,capture:!1},No=!!ko.passiveListeners&&{passive:!0,capture:!1};if(!vr)return;const Xr="on"===vo?"addEventListener":"removeEventListener";vr[Xr]("pointerdown",Ln,$o),K[Xr]("pointermove",_n,$o),K[Xr]("pointerup",di,No)}function zo(){const{scrollbar:vo,el:Si}=h;h.params.scrollbar=F0(h,h.originalParams.scrollbar,h.params.scrollbar,{el:"swiper-scrollbar"});const ko=h.params.scrollbar;if(!ko.el)return;let vr,Rs;if("string"==typeof ko.el&&h.isElement&&(vr=h.el.querySelector(ko.el)),vr||"string"!=typeof ko.el)vr||(vr=ko.el);else if(vr=K.querySelectorAll(ko.el),!vr.length)return;h.params.uniqueNavElements&&"string"==typeof ko.el&&vr.length>1&&1===Si.querySelectorAll(ko.el).length&&(vr=Si.querySelector(ko.el)),vr.length>0&&(vr=vr[0]),vr.classList.add(h.isHorizontal()?ko.horizontalClass:ko.verticalClass),vr&&(Rs=vr.querySelector(V0(h.params.scrollbar.dragClass)),Rs||(Rs=eu("div",h.params.scrollbar.dragClass),vr.append(Rs))),Object.assign(vo,{el:vr,dragEl:Rs}),ko.draggable&&function Qo(){!h.params.scrollbar.el||!h.scrollbar.el||uo("on")}(),vr&&vr.classList[h.enabled?"remove":"add"](...L0(h.params.scrollbar.lockClass))}function Qi(){const vo=h.params.scrollbar,Si=h.scrollbar.el;Si&&Si.classList.remove(...L0(h.isHorizontal()?vo.horizontalClass:vo.verticalClass)),function ur(){!h.params.scrollbar.el||!h.scrollbar.el||uo("off")}()}A({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),h.scrollbar={el:null,dragEl:null},I("changeDirection",()=>{if(!h.scrollbar||!h.scrollbar.el)return;const vo=h.params.scrollbar;let{el:Si}=h.scrollbar;Si=La(Si),Si.forEach(ko=>{ko.classList.remove(vo.horizontalClass,vo.verticalClass),ko.classList.add(h.isHorizontal()?vo.horizontalClass:vo.verticalClass)})}),I("init",()=>{!1===h.params.scrollbar.enabled?Yo():(zo(),mn(),rn())}),I("update resize observerUpdate lock unlock changeDirection",()=>{mn()}),I("setTranslate",()=>{rn()}),I("setTransition",(vo,Si)=>{!function fn(vo){!h.params.scrollbar.el||!h.scrollbar.el||(h.scrollbar.dragEl.style.transitionDuration=`${vo}ms`)}(Si)}),I("enable disable",()=>{const{el:vo}=h.scrollbar;vo&&vo.classList[h.enabled?"remove":"add"](...L0(h.params.scrollbar.lockClass))}),I("destroy",()=>{Qi()});const Yo=()=>{h.el.classList.add(...L0(h.params.scrollbar.scrollbarDisabledClass)),h.scrollbar.el&&h.scrollbar.el.classList.add(...L0(h.params.scrollbar.scrollbarDisabledClass)),Qi()};Object.assign(h.scrollbar,{enable:()=>{h.el.classList.remove(...L0(h.params.scrollbar.scrollbarDisabledClass)),h.scrollbar.el&&h.scrollbar.el.classList.remove(...L0(h.params.scrollbar.scrollbarDisabledClass)),zo(),mn(),rn()},disable:Yo,updateSize:mn,setTranslate:rn,init:zo,destroy:Qi})},function I2(y){let{swiper:h,extendParams:A,on:I}=y;A({parallax:{enabled:!1}});const F="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",K=(ze,ut)=>{const{rtl:nt}=h,pt=nt?-1:1,bt=ze.getAttribute("data-swiper-parallax")||"0";let rn=ze.getAttribute("data-swiper-parallax-x"),fn=ze.getAttribute("data-swiper-parallax-y");const mn=ze.getAttribute("data-swiper-parallax-scale"),wn=ze.getAttribute("data-swiper-parallax-opacity"),Nt=ze.getAttribute("data-swiper-parallax-rotate");if(rn||fn?(rn=rn||"0",fn=fn||"0"):h.isHorizontal()?(rn=bt,fn="0"):(fn=bt,rn="0"),rn=rn.indexOf("%")>=0?parseInt(rn,10)*ut*pt+"%":rn*ut*pt+"px",fn=fn.indexOf("%")>=0?parseInt(fn,10)*ut+"%":fn*ut+"px",typeof wn<"u"&&null!==wn){const _n=wn-(wn-1)*(1-Math.abs(ut));ze.style.opacity=_n}let Ln=`translate3d(${rn}, ${fn}, 0px)`;typeof mn<"u"&&null!==mn&&(Ln+=` scale(${mn-(mn-1)*(1-Math.abs(ut))})`),Nt&&typeof Nt<"u"&&null!==Nt&&(Ln+=` rotate(${Nt*ut*-1}deg)`),ze.style.transform=Ln},Te=()=>{const{el:ze,slides:ut,progress:nt,snapGrid:pt}=h,rn=wc(ze,F);h.isElement&&rn.push(...wc(h.hostEl,F)),rn.forEach(fn=>{K(fn,nt)}),ut.forEach((fn,mn)=>{let wn=fn.progress;h.params.slidesPerGroup>1&&"auto"!==h.params.slidesPerView&&(wn+=Math.ceil(mn/2)-nt*(pt.length-1)),wn=Math.min(Math.max(wn,-1),1),fn.querySelectorAll(`${F}, [data-swiper-parallax-rotate]`).forEach(Nt=>{K(Nt,wn)})})};I("beforeInit",()=>{h.params.parallax.enabled&&(h.params.watchSlidesProgress=!0,h.originalParams.watchSlidesProgress=!0)}),I("init",()=>{h.params.parallax.enabled&&Te()}),I("setTranslate",()=>{h.params.parallax.enabled&&Te()}),I("setTransition",(ze,ut)=>{h.params.parallax.enabled&&function(ze){void 0===ze&&(ze=h.params.speed);const{el:ut,hostEl:nt}=h,pt=[...ut.querySelectorAll(F)];h.isElement&&pt.push(...nt.querySelectorAll(F)),pt.forEach(bt=>{let rn=parseInt(bt.getAttribute("data-swiper-parallax-duration"),10)||ze;0===ze&&(rn=0),bt.style.transitionDuration=`${rn}ms`})}(ut)})},function E2(y){let{swiper:h,extendParams:A,on:I,emit:F}=y;const K=hc();A({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),h.zoom={enabled:!1};let ze,ut,Te=1,je=!1;const nt=[],pt={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},bt={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},rn={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let zo,fn=1;function mn(){return nt.length<2?1:Math.sqrt((nt[1].pageX-nt[0].pageX)**2+(nt[1].pageY-nt[0].pageY)**2)}function wn(){const xr=h.params.zoom,qr=pt.imageWrapEl.getAttribute("data-swiper-zoom")||xr.maxRatio;return xr.limitToOriginalSize&&pt.imageEl&&pt.imageEl.naturalWidth?Math.min(pt.imageEl.naturalWidth/pt.imageEl.offsetWidth,qr):qr}function _n(xr){const qr=function Ln(){return h.isElement?"swiper-slide":`.${h.params.slideClass}`}();return!!(xr.target.matches(qr)||h.slides.filter(ms=>ms.contains(xr.target)).length>0)}function uo(xr){if("mouse"===xr.pointerType&&nt.splice(0,nt.length),!_n(xr))return;const qr=h.params.zoom;if(ze=!1,ut=!1,nt.push(xr),!(nt.length<2)){if(ze=!0,pt.scaleStart=mn(),!pt.slideEl){pt.slideEl=xr.target.closest(`.${h.params.slideClass}, swiper-slide`),pt.slideEl||(pt.slideEl=h.slides[h.activeIndex]);let ms=pt.slideEl.querySelector(`.${qr.containerClass}`);if(ms&&(ms=ms.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),pt.imageEl=ms,pt.imageWrapEl=ms?N1(pt.imageEl,`.${qr.containerClass}`)[0]:void 0,!pt.imageWrapEl)return void(pt.imageEl=void 0);pt.maxRatio=wn()}if(pt.imageEl){const[ms,jc]=function Nt(){if(nt.length<2)return{x:null,y:null};const xr=pt.imageEl.getBoundingClientRect();return[(nt[0].pageX+(nt[1].pageX-nt[0].pageX)/2-xr.x-K.scrollX)/Te,(nt[0].pageY+(nt[1].pageY-nt[0].pageY)/2-xr.y-K.scrollY)/Te]}();pt.originX=ms,pt.originY=jc,pt.imageEl.style.transitionDuration="0ms"}je=!0}}function Qo(xr){if(!_n(xr))return;const qr=h.params.zoom,ms=h.zoom,jc=nt.findIndex(Ls=>Ls.pointerId===xr.pointerId);jc>=0&&(nt[jc]=xr),!(nt.length<2)&&(ut=!0,pt.scaleMove=mn(),pt.imageEl&&(ms.scale=pt.scaleMove/pt.scaleStart*Te,ms.scale>pt.maxRatio&&(ms.scale=pt.maxRatio-1+(ms.scale-pt.maxRatio+1)**.5),ms.scale<qr.minRatio&&(ms.scale=qr.minRatio+1-(qr.minRatio-ms.scale+1)**.5),pt.imageEl.style.transform=`translate3d(0,0,0) scale(${ms.scale})`))}function ur(xr){if(!_n(xr)||"mouse"===xr.pointerType&&"pointerout"===xr.type)return;const qr=h.params.zoom,ms=h.zoom,jc=nt.findIndex(Ls=>Ls.pointerId===xr.pointerId);jc>=0&&nt.splice(jc,1),ze&&ut&&(ze=!1,ut=!1,pt.imageEl&&(ms.scale=Math.max(Math.min(ms.scale,pt.maxRatio),qr.minRatio),pt.imageEl.style.transitionDuration=`${h.params.speed}ms`,pt.imageEl.style.transform=`translate3d(0,0,0) scale(${ms.scale})`,Te=ms.scale,je=!1,ms.scale>1&&pt.slideEl?pt.slideEl.classList.add(`${qr.zoomedSlideClass}`):ms.scale<=1&&pt.slideEl&&pt.slideEl.classList.remove(`${qr.zoomedSlideClass}`),1===ms.scale&&(pt.originX=0,pt.originY=0,pt.slideEl=void 0)))}function Qi(){h.touchEventsData.preventTouchMoveFromPointerMove=!1}function vo(xr){if(!_n(xr)||!function di(xr){const qr=`.${h.params.zoom.containerClass}`;return!!(xr.target.matches(qr)||[...h.hostEl.querySelectorAll(qr)].filter(ms=>ms.contains(xr.target)).length>0)}(xr))return;const qr=h.zoom;if(!pt.imageEl||!bt.isTouched||!pt.slideEl)return;bt.isMoved||(bt.width=pt.imageEl.offsetWidth||pt.imageEl.clientWidth,bt.height=pt.imageEl.offsetHeight||pt.imageEl.clientHeight,bt.startX=w1(pt.imageWrapEl,"x")||0,bt.startY=w1(pt.imageWrapEl,"y")||0,pt.slideWidth=pt.slideEl.offsetWidth,pt.slideHeight=pt.slideEl.offsetHeight,pt.imageWrapEl.style.transitionDuration="0ms");const jc=bt.height*qr.scale;if(bt.minX=Math.min(pt.slideWidth/2-bt.width*qr.scale/2,0),bt.maxX=-bt.minX,bt.minY=Math.min(pt.slideHeight/2-jc/2,0),bt.maxY=-bt.minY,bt.touchesCurrent.x=nt.length>0?nt[0].pageX:xr.pageX,bt.touchesCurrent.y=nt.length>0?nt[0].pageY:xr.pageY,Math.max(Math.abs(bt.touchesCurrent.x-bt.touchesStart.x),Math.abs(bt.touchesCurrent.y-bt.touchesStart.y))>5&&(h.allowClick=!1),!bt.isMoved&&!je){if(h.isHorizontal()&&(Math.floor(bt.minX)===Math.floor(bt.startX)&&bt.touchesCurrent.x<bt.touchesStart.x||Math.floor(bt.maxX)===Math.floor(bt.startX)&&bt.touchesCurrent.x>bt.touchesStart.x))return bt.isTouched=!1,void Qi();if(!h.isHorizontal()&&(Math.floor(bt.minY)===Math.floor(bt.startY)&&bt.touchesCurrent.y<bt.touchesStart.y||Math.floor(bt.maxY)===Math.floor(bt.startY)&&bt.touchesCurrent.y>bt.touchesStart.y))return bt.isTouched=!1,void Qi()}xr.cancelable&&xr.preventDefault(),xr.stopPropagation(),function Po(){clearTimeout(zo),h.touchEventsData.preventTouchMoveFromPointerMove=!0,zo=setTimeout(()=>{Qi()})}(),bt.isMoved=!0;const Kl=(qr.scale-Te)/(pt.maxRatio-h.params.zoom.minRatio),{originX:Yl,originY:qp}=pt;bt.currentX=bt.touchesCurrent.x-bt.touchesStart.x+bt.startX+Kl*(bt.width-2*Yl),bt.currentY=bt.touchesCurrent.y-bt.touchesStart.y+bt.startY+Kl*(bt.height-2*qp),bt.currentX<bt.minX&&(bt.currentX=bt.minX+1-(bt.minX-bt.currentX+1)**.8),bt.currentX>bt.maxX&&(bt.currentX=bt.maxX-1+(bt.currentX-bt.maxX+1)**.8),bt.currentY<bt.minY&&(bt.currentY=bt.minY+1-(bt.minY-bt.currentY+1)**.8),bt.currentY>bt.maxY&&(bt.currentY=bt.maxY-1+(bt.currentY-bt.maxY+1)**.8),rn.prevPositionX||(rn.prevPositionX=bt.touchesCurrent.x),rn.prevPositionY||(rn.prevPositionY=bt.touchesCurrent.y),rn.prevTime||(rn.prevTime=Date.now()),rn.x=(bt.touchesCurrent.x-rn.prevPositionX)/(Date.now()-rn.prevTime)/2,rn.y=(bt.touchesCurrent.y-rn.prevPositionY)/(Date.now()-rn.prevTime)/2,Math.abs(bt.touchesCurrent.x-rn.prevPositionX)<2&&(rn.x=0),Math.abs(bt.touchesCurrent.y-rn.prevPositionY)<2&&(rn.y=0),rn.prevPositionX=bt.touchesCurrent.x,rn.prevPositionY=bt.touchesCurrent.y,rn.prevTime=Date.now(),pt.imageWrapEl.style.transform=`translate3d(${bt.currentX}px, ${bt.currentY}px,0)`}function ko(){const xr=h.zoom;pt.slideEl&&h.activeIndex!==h.slides.indexOf(pt.slideEl)&&(pt.imageEl&&(pt.imageEl.style.transform="translate3d(0,0,0) scale(1)"),pt.imageWrapEl&&(pt.imageWrapEl.style.transform="translate3d(0,0,0)"),pt.slideEl.classList.remove(`${h.params.zoom.zoomedSlideClass}`),xr.scale=1,Te=1,pt.slideEl=void 0,pt.imageEl=void 0,pt.imageWrapEl=void 0,pt.originX=0,pt.originY=0)}function vr(xr){const qr=h.zoom,ms=h.params.zoom;if(!pt.slideEl){xr&&xr.target&&(pt.slideEl=xr.target.closest(`.${h.params.slideClass}, swiper-slide`)),pt.slideEl||(pt.slideEl=h.params.virtual&&h.params.virtual.enabled&&h.virtual?wc(h.slidesEl,`.${h.params.slideActiveClass}`)[0]:h.slides[h.activeIndex]);let yp=pt.slideEl.querySelector(`.${ms.containerClass}`);yp&&(yp=yp.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),pt.imageEl=yp,pt.imageWrapEl=yp?N1(pt.imageEl,`.${ms.containerClass}`)[0]:void 0}if(!pt.imageEl||!pt.imageWrapEl)return;let jc,Ls,Kl,Yl,qp,Hs,j0,Cf,s4,a4,Ag,l4,Zm,B2,Qm,N2,F2,xm;h.params.cssMode&&(h.wrapperEl.style.overflow="hidden",h.wrapperEl.style.touchAction="none"),pt.slideEl.classList.add(`${ms.zoomedSlideClass}`),typeof bt.touchesStart.x>"u"&&xr?(jc=xr.pageX,Ls=xr.pageY):(jc=bt.touchesStart.x,Ls=bt.touchesStart.y);const u0="number"==typeof xr?xr:null;1===Te&&u0&&(jc=void 0,Ls=void 0);const W1=wn();qr.scale=u0||W1,Te=u0||W1,!xr||1===Te&&u0?(j0=0,Cf=0):(F2=pt.slideEl.offsetWidth,xm=pt.slideEl.offsetHeight,Kl=gu(pt.slideEl).left+K.scrollX,Yl=gu(pt.slideEl).top+K.scrollY,qp=Kl+F2/2-jc,Hs=Yl+xm/2-Ls,s4=pt.imageEl.offsetWidth||pt.imageEl.clientWidth,a4=pt.imageEl.offsetHeight||pt.imageEl.clientHeight,Ag=s4*qr.scale,l4=a4*qr.scale,Zm=Math.min(F2/2-Ag/2,0),B2=Math.min(xm/2-l4/2,0),Qm=-Zm,N2=-B2,j0=qp*qr.scale,Cf=Hs*qr.scale,j0<Zm&&(j0=Zm),j0>Qm&&(j0=Qm),Cf<B2&&(Cf=B2),Cf>N2&&(Cf=N2)),u0&&1===qr.scale&&(pt.originX=0,pt.originY=0),pt.imageWrapEl.style.transitionDuration="300ms",pt.imageWrapEl.style.transform=`translate3d(${j0}px, ${Cf}px,0)`,pt.imageEl.style.transitionDuration="300ms",pt.imageEl.style.transform=`translate3d(0,0,0) scale(${qr.scale})`}function Rs(){const xr=h.zoom,qr=h.params.zoom;if(!pt.slideEl){pt.slideEl=h.params.virtual&&h.params.virtual.enabled&&h.virtual?wc(h.slidesEl,`.${h.params.slideActiveClass}`)[0]:h.slides[h.activeIndex];let ms=pt.slideEl.querySelector(`.${qr.containerClass}`);ms&&(ms=ms.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),pt.imageEl=ms,pt.imageWrapEl=ms?N1(pt.imageEl,`.${qr.containerClass}`)[0]:void 0}!pt.imageEl||!pt.imageWrapEl||(h.params.cssMode&&(h.wrapperEl.style.overflow="",h.wrapperEl.style.touchAction=""),xr.scale=1,Te=1,pt.imageWrapEl.style.transitionDuration="300ms",pt.imageWrapEl.style.transform="translate3d(0,0,0)",pt.imageEl.style.transitionDuration="300ms",pt.imageEl.style.transform="translate3d(0,0,0) scale(1)",pt.slideEl.classList.remove(`${qr.zoomedSlideClass}`),pt.slideEl=void 0,pt.originX=0,pt.originY=0)}function $o(xr){const qr=h.zoom;qr.scale&&1!==qr.scale?Rs():vr(xr)}function No(){return{passiveListener:!!h.params.passiveListeners&&{passive:!0,capture:!1},activeListenerWithCapture:!h.params.passiveListeners||{passive:!1,capture:!0}}}function Xr(){const xr=h.zoom;if(xr.enabled)return;xr.enabled=!0;const{passiveListener:qr,activeListenerWithCapture:ms}=No();h.wrapperEl.addEventListener("pointerdown",uo,qr),h.wrapperEl.addEventListener("pointermove",Qo,ms),["pointerup","pointercancel","pointerout"].forEach(jc=>{h.wrapperEl.addEventListener(jc,ur,qr)}),h.wrapperEl.addEventListener("pointermove",vo,ms)}function ga(){const xr=h.zoom;if(!xr.enabled)return;xr.enabled=!1;const{passiveListener:qr,activeListenerWithCapture:ms}=No();h.wrapperEl.removeEventListener("pointerdown",uo,qr),h.wrapperEl.removeEventListener("pointermove",Qo,ms),["pointerup","pointercancel","pointerout"].forEach(jc=>{h.wrapperEl.removeEventListener(jc,ur,qr)}),h.wrapperEl.removeEventListener("pointermove",vo,ms)}Object.defineProperty(h.zoom,"scale",{get:()=>fn,set(xr){fn!==xr&&F("zoomChange",xr,pt.imageEl,pt.slideEl),fn=xr}}),I("init",()=>{h.params.zoom.enabled&&Xr()}),I("destroy",()=>{ga()}),I("touchStart",(xr,qr)=>{h.zoom.enabled&&function Yo(xr){if(!pt.imageEl||bt.isTouched)return;h.device.android&&xr.cancelable&&xr.preventDefault(),bt.isTouched=!0;const ms=nt.length>0?nt[0]:xr;bt.touchesStart.x=ms.pageX,bt.touchesStart.y=ms.pageY}(qr)}),I("touchEnd",(xr,qr)=>{h.zoom.enabled&&function Si(){const xr=h.zoom;if(!pt.imageEl)return;if(!bt.isTouched||!bt.isMoved)return bt.isTouched=!1,void(bt.isMoved=!1);bt.isTouched=!1,bt.isMoved=!1;let qr=300,ms=300;const Ls=bt.currentX+rn.x*qr,Yl=bt.currentY+rn.y*ms;0!==rn.x&&(qr=Math.abs((Ls-bt.currentX)/rn.x)),0!==rn.y&&(ms=Math.abs((Yl-bt.currentY)/rn.y));const qp=Math.max(qr,ms);bt.currentX=Ls,bt.currentY=Yl;const j0=bt.height*xr.scale;bt.minX=Math.min(pt.slideWidth/2-bt.width*xr.scale/2,0),bt.maxX=-bt.minX,bt.minY=Math.min(pt.slideHeight/2-j0/2,0),bt.maxY=-bt.minY,bt.currentX=Math.max(Math.min(bt.currentX,bt.maxX),bt.minX),bt.currentY=Math.max(Math.min(bt.currentY,bt.maxY),bt.minY),pt.imageWrapEl.style.transitionDuration=`${qp}ms`,pt.imageWrapEl.style.transform=`translate3d(${bt.currentX}px, ${bt.currentY}px,0)`}()}),I("doubleTap",(xr,qr)=>{!h.animating&&h.params.zoom.enabled&&h.zoom.enabled&&h.params.zoom.toggle&&$o(qr)}),I("transitionEnd",()=>{h.zoom.enabled&&h.params.zoom.enabled&&ko()}),I("slideChange",()=>{h.zoom.enabled&&h.params.zoom.enabled&&h.params.cssMode&&ko()}),Object.assign(h.zoom,{enable:Xr,disable:ga,in:vr,out:Rs,toggle:$o})},function zp(y){let{swiper:h,extendParams:A,on:I}=y;function F(ut,nt){const pt=function(){let mn,wn,Nt;return(Ln,_n)=>{for(wn=-1,mn=Ln.length;mn-wn>1;)Nt=mn+wn>>1,Ln[Nt]<=_n?wn=Nt:mn=Nt;return mn}}();let bt,rn;return this.x=ut,this.y=nt,this.lastIndex=ut.length-1,this.interpolate=function(mn){return mn?(rn=pt(this.x,mn),bt=rn-1,(mn-this.x[bt])*(this.y[rn]-this.y[bt])/(this.x[rn]-this.x[bt])+this.y[bt]):0},this}function ze(){h.controller.control&&h.controller.spline&&(h.controller.spline=void 0,delete h.controller.spline)}A({controller:{control:void 0,inverse:!1,by:"slide"}}),h.controller={control:void 0},I("beforeInit",()=>{if(typeof window<"u"&&("string"==typeof h.params.controller.control||h.params.controller.control instanceof HTMLElement)){const ut=document.querySelector(h.params.controller.control);if(ut&&ut.swiper)h.controller.control=ut.swiper;else if(ut){const nt=pt=>{h.controller.control=pt.detail[0],h.update(),ut.removeEventListener("init",nt)};ut.addEventListener("init",nt)}}else h.controller.control=h.params.controller.control}),I("update",()=>{ze()}),I("resize",()=>{ze()}),I("observerUpdate",()=>{ze()}),I("setTranslate",(ut,nt,pt)=>{!h.controller.control||h.controller.control.destroyed||h.controller.setTranslate(nt,pt)}),I("setTransition",(ut,nt,pt)=>{!h.controller.control||h.controller.control.destroyed||h.controller.setTransition(nt,pt)}),Object.assign(h.controller,{setTranslate:function Te(ut,nt){const pt=h.controller.control;let bt,rn;const fn=h.constructor;function mn(wn){if(wn.destroyed)return;const Nt=h.rtlTranslate?-h.translate:h.translate;"slide"===h.params.controller.by&&(function K(ut){h.controller.spline=h.params.loop?new F(h.slidesGrid,ut.slidesGrid):new F(h.snapGrid,ut.snapGrid)}(wn),rn=-h.controller.spline.interpolate(-Nt)),(!rn||"container"===h.params.controller.by)&&(bt=(wn.maxTranslate()-wn.minTranslate())/(h.maxTranslate()-h.minTranslate()),(Number.isNaN(bt)||!Number.isFinite(bt))&&(bt=1),rn=(Nt-h.minTranslate())*bt+wn.minTranslate()),h.params.controller.inverse&&(rn=wn.maxTranslate()-rn),wn.updateProgress(rn),wn.setTranslate(rn,h),wn.updateActiveIndex(),wn.updateSlidesClasses()}if(Array.isArray(pt))for(let wn=0;wn<pt.length;wn+=1)pt[wn]!==nt&&pt[wn]instanceof fn&&mn(pt[wn]);else pt instanceof fn&&nt!==pt&&mn(pt)},setTransition:function je(ut,nt){const pt=h.constructor,bt=h.controller.control;let rn;function fn(mn){mn.destroyed||(mn.setTransition(ut,h),0!==ut&&(mn.transitionStart(),mn.params.autoHeight&&n1(()=>{mn.updateAutoHeight()}),ip(mn.wrapperEl,()=>{bt&&mn.transitionEnd()})))}if(Array.isArray(bt))for(rn=0;rn<bt.length;rn+=1)bt[rn]!==nt&&bt[rn]instanceof pt&&fn(bt[rn]);else bt instanceof pt&&nt!==bt&&fn(bt)}})},function dp(y){let{swiper:h,extendParams:A,on:I}=y;A({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),h.a11y={clicked:!1};let K,Te,F=null,je=(new Date).getTime();function ze($o){const No=F;0!==No.length&&(No.innerHTML="",No.innerHTML=$o)}function nt($o){($o=La($o)).forEach(No=>{No.setAttribute("tabIndex","0")})}function pt($o){($o=La($o)).forEach(No=>{No.setAttribute("tabIndex","-1")})}function bt($o,No){($o=La($o)).forEach(Xr=>{Xr.setAttribute("role",No)})}function rn($o,No){($o=La($o)).forEach(Xr=>{Xr.setAttribute("aria-roledescription",No)})}function mn($o,No){($o=La($o)).forEach(Xr=>{Xr.setAttribute("aria-label",No)})}function Ln($o){($o=La($o)).forEach(No=>{No.setAttribute("aria-disabled",!0)})}function _n($o){($o=La($o)).forEach(No=>{No.setAttribute("aria-disabled",!1)})}function di($o){if(13!==$o.keyCode&&32!==$o.keyCode)return;const No=h.params.a11y,Xr=$o.target;if(!h.pagination||!h.pagination.el||Xr!==h.pagination.el&&!h.pagination.el.contains($o.target)||$o.target.matches(V0(h.params.pagination.bulletClass))){if(h.navigation&&h.navigation.prevEl&&h.navigation.nextEl){const ga=La(h.navigation.prevEl);La(h.navigation.nextEl).includes(Xr)&&(h.isEnd&&!h.params.loop||h.slideNext(),ze(h.isEnd?No.lastSlideMessage:No.nextSlideMessage)),ga.includes(Xr)&&(h.isBeginning&&!h.params.loop||h.slidePrev(),ze(h.isBeginning?No.firstSlideMessage:No.prevSlideMessage))}h.pagination&&Xr.matches(V0(h.params.pagination.bulletClass))&&Xr.click()}}function Qo(){return h.pagination&&h.pagination.bullets&&h.pagination.bullets.length}function ur(){return Qo()&&h.params.pagination.clickable}const Qi=($o,No,Xr)=>{nt($o),"BUTTON"!==$o.tagName&&(bt($o,"button"),$o.addEventListener("keydown",di)),mn($o,Xr),function fn($o,No){($o=La($o)).forEach(Xr=>{Xr.setAttribute("aria-controls",No)})}($o,No)},Po=$o=>{Te&&Te!==$o.target&&!Te.contains($o.target)&&(K=!0),h.a11y.clicked=!0},Yo=()=>{K=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{h.destroyed||(h.a11y.clicked=!1)})})},vo=$o=>{je=(new Date).getTime()},Si=$o=>{if(h.a11y.clicked||(new Date).getTime()-je<100)return;const No=$o.target.closest(`.${h.params.slideClass}, swiper-slide`);if(!No||!h.slides.includes(No))return;Te=No;const Xr=h.slides.indexOf(No)===h.activeIndex,ga=h.params.watchSlidesProgress&&h.visibleSlides&&h.visibleSlides.includes(No);Xr||ga||$o.sourceCapabilities&&$o.sourceCapabilities.firesTouchEvents||(h.isHorizontal()?h.el.scrollLeft=0:h.el.scrollTop=0,requestAnimationFrame(()=>{K||(h.params.loop?h.slideToLoop(parseInt(No.getAttribute("data-swiper-slide-index")),0):h.slideTo(h.slides.indexOf(No),0),K=!1)}))},ko=()=>{const $o=h.params.a11y;$o.itemRoleDescriptionMessage&&rn(h.slides,$o.itemRoleDescriptionMessage),$o.slideRole&&bt(h.slides,$o.slideRole);const No=h.slides.length;$o.slideLabelMessage&&h.slides.forEach((Xr,ga)=>{const xr=h.params.loop?parseInt(Xr.getAttribute("data-swiper-slide-index"),10):ga;mn(Xr,$o.slideLabelMessage.replace(/\{\{index\}\}/,xr+1).replace(/\{\{slidesLength\}\}/,No))})};I("beforeInit",()=>{F=eu("span",h.params.a11y.notificationClass),F.setAttribute("aria-live","assertive"),F.setAttribute("aria-atomic","true")}),I("afterInit",()=>{h.params.a11y.enabled&&(()=>{const $o=h.params.a11y;h.el.append(F);const No=h.el;$o.containerRoleDescriptionMessage&&rn(No,$o.containerRoleDescriptionMessage),$o.containerMessage&&mn(No,$o.containerMessage);const Xr=h.wrapperEl,ga=$o.id||Xr.getAttribute("id")||`swiper-wrapper-${function ut($o){return void 0===$o&&($o=16),"x".repeat($o).replace(/x/g,()=>Math.round(16*Math.random()).toString(16))}(16)}`,xr=h.params.autoplay&&h.params.autoplay.enabled?"off":"polite";(function wn($o,No){($o=La($o)).forEach(Xr=>{Xr.setAttribute("id",No)})})(Xr,ga),function Nt($o,No){($o=La($o)).forEach(Xr=>{Xr.setAttribute("aria-live",No)})}(Xr,xr),ko();let{nextEl:qr,prevEl:ms}=h.navigation?h.navigation:{};qr=La(qr),ms=La(ms),qr&&qr.forEach(Ls=>Qi(Ls,ga,$o.nextSlideMessage)),ms&&ms.forEach(Ls=>Qi(Ls,ga,$o.prevSlideMessage)),ur()&&La(h.pagination.el).forEach(Kl=>{Kl.addEventListener("keydown",di)}),Il().addEventListener("visibilitychange",vo),h.el.addEventListener("focus",Si,!0),h.el.addEventListener("focus",Si,!0),h.el.addEventListener("pointerdown",Po,!0),h.el.addEventListener("pointerup",Yo,!0)})()}),I("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{h.params.a11y.enabled&&ko()}),I("fromEdge toEdge afterInit lock unlock",()=>{h.params.a11y.enabled&&function uo(){if(h.params.loop||h.params.rewind||!h.navigation)return;const{nextEl:$o,prevEl:No}=h.navigation;No&&(h.isBeginning?(Ln(No),pt(No)):(_n(No),nt(No))),$o&&(h.isEnd?(Ln($o),pt($o)):(_n($o),nt($o)))}()}),I("paginationUpdate",()=>{h.params.a11y.enabled&&function zo(){const $o=h.params.a11y;Qo()&&h.pagination.bullets.forEach(No=>{h.params.pagination.clickable&&(nt(No),h.params.pagination.renderBullet||(bt(No,"button"),mn(No,$o.paginationBulletMessage.replace(/\{\{index\}\}/,B1(No)+1)))),No.matches(V0(h.params.pagination.bulletActiveClass))?No.setAttribute("aria-current","true"):No.removeAttribute("aria-current")})}()}),I("destroy",()=>{h.params.a11y.enabled&&function Rs(){F&&F.remove();let{nextEl:$o,prevEl:No}=h.navigation?h.navigation:{};$o=La($o),No=La(No),$o&&$o.forEach(ga=>ga.removeEventListener("keydown",di)),No&&No.forEach(ga=>ga.removeEventListener("keydown",di)),ur()&&La(h.pagination.el).forEach(xr=>{xr.removeEventListener("keydown",di)}),Il().removeEventListener("visibilitychange",vo),h.el&&"string"!=typeof h.el&&(h.el.removeEventListener("focus",Si,!0),h.el.removeEventListener("pointerdown",Po,!0),h.el.removeEventListener("pointerup",Yo,!0))}()})},function Wf(y){let{swiper:h,extendParams:A,on:I}=y;A({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let F=!1,K={};const Te=rn=>rn.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),je=rn=>{const fn=hc();let mn;mn=rn?new URL(rn):fn.location;const wn=mn.pathname.slice(1).split("/").filter(di=>""!==di),Nt=wn.length;return{key:wn[Nt-2],value:wn[Nt-1]}},ze=(rn,fn)=>{const mn=hc();if(!F||!h.params.history.enabled)return;let wn;wn=h.params.url?new URL(h.params.url):mn.location;const Nt=h.virtual&&h.params.virtual.enabled?h.slidesEl.querySelector(`[data-swiper-slide-index="${fn}"]`):h.slides[fn];let Ln=Te(Nt.getAttribute("data-history"));if(h.params.history.root.length>0){let di=h.params.history.root;"/"===di[di.length-1]&&(di=di.slice(0,di.length-1)),Ln=`${di}/${rn?`${rn}/`:""}${Ln}`}else wn.pathname.includes(rn)||(Ln=`${rn?`${rn}/`:""}${Ln}`);h.params.history.keepQuery&&(Ln+=wn.search);const _n=mn.history.state;_n&&_n.value===Ln||(h.params.history.replaceState?mn.history.replaceState({value:Ln},null,Ln):mn.history.pushState({value:Ln},null,Ln))},ut=(rn,fn,mn)=>{if(fn)for(let wn=0,Nt=h.slides.length;wn<Nt;wn+=1){const Ln=h.slides[wn];if(Te(Ln.getAttribute("data-history"))===fn){const di=h.getSlideIndex(Ln);h.slideTo(di,rn,mn)}}else h.slideTo(0,rn,mn)},nt=()=>{K=je(h.params.url),ut(h.params.speed,K.value,!1)};I("init",()=>{h.params.history.enabled&&(()=>{const rn=hc();if(h.params.history){if(!rn.history||!rn.history.pushState)return h.params.history.enabled=!1,void(h.params.hashNavigation.enabled=!0);if(F=!0,K=je(h.params.url),!K.key&&!K.value)return void(h.params.history.replaceState||rn.addEventListener("popstate",nt));ut(0,K.value,h.params.runCallbacksOnInit),h.params.history.replaceState||rn.addEventListener("popstate",nt)}})()}),I("destroy",()=>{h.params.history.enabled&&(()=>{const rn=hc();h.params.history.replaceState||rn.removeEventListener("popstate",nt)})()}),I("transitionEnd _freeModeNoMomentumRelease",()=>{F&&ze(h.params.history.key,h.activeIndex)}),I("slideChange",()=>{F&&h.params.cssMode&&ze(h.params.history.key,h.activeIndex)})},function xa(y){let{swiper:h,extendParams:A,emit:I,on:F}=y,K=!1;const Te=Il(),je=hc();A({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(bt,rn){if(h.virtual&&h.params.virtual.enabled){const fn=h.slides.filter(wn=>wn.getAttribute("data-hash")===rn)[0];return fn?parseInt(fn.getAttribute("data-swiper-slide-index"),10):0}return h.getSlideIndex(wc(h.slidesEl,`.${h.params.slideClass}[data-hash="${rn}"], swiper-slide[data-hash="${rn}"]`)[0])}}});const ze=()=>{I("hashChange");const bt=Te.location.hash.replace("#",""),rn=h.virtual&&h.params.virtual.enabled?h.slidesEl.querySelector(`[data-swiper-slide-index="${h.activeIndex}"]`):h.slides[h.activeIndex];if(bt!==(rn?rn.getAttribute("data-hash"):"")){const mn=h.params.hashNavigation.getSlideIndex(h,bt);if(typeof mn>"u"||Number.isNaN(mn))return;h.slideTo(mn)}},ut=()=>{if(!K||!h.params.hashNavigation.enabled)return;const bt=h.virtual&&h.params.virtual.enabled?h.slidesEl.querySelector(`[data-swiper-slide-index="${h.activeIndex}"]`):h.slides[h.activeIndex],rn=bt?bt.getAttribute("data-hash")||bt.getAttribute("data-history"):"";h.params.hashNavigation.replaceState&&je.history&&je.history.replaceState?(je.history.replaceState(null,null,`#${rn}`||""),I("hashSet")):(Te.location.hash=rn||"",I("hashSet"))};F("init",()=>{h.params.hashNavigation.enabled&&(()=>{if(!h.params.hashNavigation.enabled||h.params.history&&h.params.history.enabled)return;K=!0;const bt=Te.location.hash.replace("#","");if(bt){const fn=h.params.hashNavigation.getSlideIndex(h,bt);h.slideTo(fn||0,0,h.params.runCallbacksOnInit,!0)}h.params.hashNavigation.watchState&&je.addEventListener("hashchange",ze)})()}),F("destroy",()=>{h.params.hashNavigation.enabled&&h.params.hashNavigation.watchState&&je.removeEventListener("hashchange",ze)}),F("transitionEnd _freeModeNoMomentumRelease",()=>{K&&ut()}),F("slideChange",()=>{K&&h.params.cssMode&&ut()})},function qm(y){let{swiper:h,extendParams:A,on:I,emit:F,params:K}=y;h.autoplay={running:!1,paused:!1,timeLeft:0},A({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let Te,je,nt,bt,rn,fn,mn,wn,Nt,Ln,ze=K&&K.autoplay?K.autoplay.delay:3e3,ut=K&&K.autoplay?K.autoplay.delay:3e3,pt=(new Date).getTime();function _n(No){!h||h.destroyed||!h.wrapperEl||No.target===h.wrapperEl&&(h.wrapperEl.removeEventListener("transitionend",_n),!(Ln||No.detail&&No.detail.bySwiperTouchMove)&&Po())}const di=()=>{if(h.destroyed||!h.autoplay.running)return;h.autoplay.paused?bt=!0:bt&&(ut=nt,bt=!1);const No=h.autoplay.paused?nt:pt+ut-(new Date).getTime();h.autoplay.timeLeft=No,F("autoplayTimeLeft",No,No/ze),je=requestAnimationFrame(()=>{di()})},Qo=No=>{if(h.destroyed||!h.autoplay.running)return;cancelAnimationFrame(je),di();let Xr=typeof No>"u"?h.params.autoplay.delay:No;ze=h.params.autoplay.delay,ut=h.params.autoplay.delay;const ga=(()=>{let No;return No=h.virtual&&h.params.virtual.enabled?h.slides.filter(ga=>ga.classList.contains("swiper-slide-active"))[0]:h.slides[h.activeIndex],No?parseInt(No.getAttribute("data-swiper-autoplay"),10):void 0})();!Number.isNaN(ga)&&ga>0&&typeof No>"u"&&(Xr=ga,ze=ga,ut=ga),nt=Xr;const xr=h.params.speed,qr=()=>{!h||h.destroyed||(h.params.autoplay.reverseDirection?!h.isBeginning||h.params.loop||h.params.rewind?(h.slidePrev(xr,!0,!0),F("autoplay")):h.params.autoplay.stopOnLastSlide||(h.slideTo(h.slides.length-1,xr,!0,!0),F("autoplay")):!h.isEnd||h.params.loop||h.params.rewind?(h.slideNext(xr,!0,!0),F("autoplay")):h.params.autoplay.stopOnLastSlide||(h.slideTo(0,xr,!0,!0),F("autoplay")),h.params.cssMode&&(pt=(new Date).getTime(),requestAnimationFrame(()=>{Qo()})))};return Xr>0?(clearTimeout(Te),Te=setTimeout(()=>{qr()},Xr)):requestAnimationFrame(()=>{qr()}),Xr},ur=()=>{pt=(new Date).getTime(),h.autoplay.running=!0,Qo(),F("autoplayStart")},zo=()=>{h.autoplay.running=!1,clearTimeout(Te),cancelAnimationFrame(je),F("autoplayStop")},Qi=(No,Xr)=>{if(h.destroyed||!h.autoplay.running)return;clearTimeout(Te),No||(Nt=!0);const ga=()=>{F("autoplayPause"),h.params.autoplay.waitForTransition?h.wrapperEl.addEventListener("transitionend",_n):Po()};if(h.autoplay.paused=!0,Xr)return wn&&(nt=h.params.autoplay.delay),wn=!1,void ga();nt=(nt||h.params.autoplay.delay)-((new Date).getTime()-pt),(!(h.isEnd&&nt<0)||h.params.loop)&&(nt<0&&(nt=0),ga())},Po=()=>{h.isEnd&&nt<0&&!h.params.loop||h.destroyed||!h.autoplay.running||(pt=(new Date).getTime(),Nt?(Nt=!1,Qo(nt)):Qo(),h.autoplay.paused=!1,F("autoplayResume"))},Yo=()=>{if(h.destroyed||!h.autoplay.running)return;const No=Il();"hidden"===No.visibilityState&&(Nt=!0,Qi(!0)),"visible"===No.visibilityState&&Po()},vo=No=>{"mouse"===No.pointerType&&(Nt=!0,Ln=!0,!h.animating&&!h.autoplay.paused&&Qi(!0))},Si=No=>{"mouse"===No.pointerType&&(Ln=!1,h.autoplay.paused&&Po())};I("init",()=>{h.params.autoplay.enabled&&(h.params.autoplay.pauseOnMouseEnter&&(h.el.addEventListener("pointerenter",vo),h.el.addEventListener("pointerleave",Si)),Il().addEventListener("visibilitychange",Yo),ur())}),I("destroy",()=>{h.el&&"string"!=typeof h.el&&(h.el.removeEventListener("pointerenter",vo),h.el.removeEventListener("pointerleave",Si)),Il().removeEventListener("visibilitychange",Yo),h.autoplay.running&&zo()}),I("_freeModeStaticRelease",()=>{(fn||Nt)&&Po()}),I("_freeModeNoMomentumRelease",()=>{h.params.autoplay.disableOnInteraction?zo():Qi(!0,!0)}),I("beforeTransitionStart",(No,Xr,ga)=>{h.destroyed||!h.autoplay.running||(ga||!h.params.autoplay.disableOnInteraction?Qi(!0,!0):zo())}),I("sliderFirstMove",()=>{if(!h.destroyed&&h.autoplay.running){if(h.params.autoplay.disableOnInteraction)return void zo();rn=!0,fn=!1,Nt=!1,mn=setTimeout(()=>{Nt=!0,fn=!0,Qi(!0)},200)}}),I("touchEnd",()=>{if(!h.destroyed&&h.autoplay.running&&rn){if(clearTimeout(mn),clearTimeout(Te),h.params.autoplay.disableOnInteraction)return fn=!1,void(rn=!1);fn&&h.params.cssMode&&Po(),fn=!1,rn=!1}}),I("slideChange",()=>{h.destroyed||!h.autoplay.running||(wn=!0)}),Object.assign(h.autoplay,{start:ur,stop:zo,pause:Qi,resume:Po})},function fm(y){let{swiper:h,extendParams:A,on:I}=y;A({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let F=!1,K=!1;function Te(){const ut=h.thumbs.swiper;if(!ut||ut.destroyed)return;const nt=ut.clickedIndex,pt=ut.clickedSlide;if(pt&&pt.classList.contains(h.params.thumbs.slideThumbActiveClass)||typeof nt>"u"||null===nt)return;let bt;bt=ut.params.loop?parseInt(ut.clickedSlide.getAttribute("data-swiper-slide-index"),10):nt,h.params.loop?h.slideToLoop(bt):h.slideTo(bt)}function je(){const{thumbs:ut}=h.params;if(F)return!1;F=!0;const nt=h.constructor;if(ut.swiper instanceof nt)h.thumbs.swiper=ut.swiper,Object.assign(h.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(h.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),h.thumbs.swiper.update();else if(L1(ut.swiper)){const pt=Object.assign({},ut.swiper);Object.assign(pt,{watchSlidesProgress:!0,slideToClickedSlide:!1}),h.thumbs.swiper=new nt(pt),K=!0}return h.thumbs.swiper.el.classList.add(h.params.thumbs.thumbsContainerClass),h.thumbs.swiper.on("tap",Te),!0}function ze(ut){const nt=h.thumbs.swiper;if(!nt||nt.destroyed)return;const pt="auto"===nt.params.slidesPerView?nt.slidesPerViewDynamic():nt.params.slidesPerView;let bt=1;const rn=h.params.thumbs.slideThumbActiveClass;if(h.params.slidesPerView>1&&!h.params.centeredSlides&&(bt=h.params.slidesPerView),h.params.thumbs.multipleActiveThumbs||(bt=1),bt=Math.floor(bt),nt.slides.forEach(wn=>wn.classList.remove(rn)),nt.params.loop||nt.params.virtual&&nt.params.virtual.enabled)for(let wn=0;wn<bt;wn+=1)wc(nt.slidesEl,`[data-swiper-slide-index="${h.realIndex+wn}"]`).forEach(Nt=>{Nt.classList.add(rn)});else for(let wn=0;wn<bt;wn+=1)nt.slides[h.realIndex+wn]&&nt.slides[h.realIndex+wn].classList.add(rn);const fn=h.params.thumbs.autoScrollOffset,mn=fn&&!nt.params.loop;if(h.realIndex!==nt.realIndex||mn){const wn=nt.activeIndex;let Nt,Ln;if(nt.params.loop){const _n=nt.slides.filter(di=>di.getAttribute("data-swiper-slide-index")===`${h.realIndex}`)[0];Nt=nt.slides.indexOf(_n),Ln=h.activeIndex>h.previousIndex?"next":"prev"}else Nt=h.realIndex,Ln=Nt>h.previousIndex?"next":"prev";mn&&(Nt+="next"===Ln?fn:-1*fn),nt.visibleSlidesIndexes&&nt.visibleSlidesIndexes.indexOf(Nt)<0&&(nt.params.centeredSlides&&(Nt=Nt>wn?Nt-Math.floor(pt/2)+1:Nt+Math.floor(pt/2)-1),nt.slideTo(Nt,ut?0:void 0))}}h.thumbs={swiper:null},I("beforeInit",()=>{const{thumbs:ut}=h.params;if(ut&&ut.swiper)if("string"==typeof ut.swiper||ut.swiper instanceof HTMLElement){const nt=Il(),pt=()=>{const rn="string"==typeof ut.swiper?nt.querySelector(ut.swiper):ut.swiper;if(rn&&rn.swiper)ut.swiper=rn.swiper,je(),ze(!0);else if(rn){const fn=mn=>{ut.swiper=mn.detail[0],rn.removeEventListener("init",fn),je(),ze(!0),ut.swiper.update(),h.update()};rn.addEventListener("init",fn)}return rn},bt=()=>{h.destroyed||pt()||requestAnimationFrame(bt)};requestAnimationFrame(bt)}else je(),ze(!0)}),I("slideChange update resize observerUpdate",()=>{ze()}),I("setTransition",(ut,nt)=>{const pt=h.thumbs.swiper;!pt||pt.destroyed||pt.setTransition(nt)}),I("beforeDestroy",()=>{const ut=h.thumbs.swiper;!ut||ut.destroyed||K&&ut.destroy()}),Object.assign(h.thumbs,{init:je,update:ze})},function td(y){let{swiper:h,extendParams:A,emit:I,once:F}=y;A({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(h,{freeMode:{onTouchStart:function K(){if(h.params.cssMode)return;const ze=h.getTranslate();h.setTranslate(ze),h.setTransition(0),h.touchEventsData.velocities.length=0,h.freeMode.onTouchEnd({currentPos:h.rtl?h.translate:-h.translate})},onTouchMove:function Te(){if(h.params.cssMode)return;const{touchEventsData:ze,touches:ut}=h;0===ze.velocities.length&&ze.velocities.push({position:ut[h.isHorizontal()?"startX":"startY"],time:ze.touchStartTime}),ze.velocities.push({position:ut[h.isHorizontal()?"currentX":"currentY"],time:yc()})},onTouchEnd:function je(ze){let{currentPos:ut}=ze;if(h.params.cssMode)return;const{params:nt,wrapperEl:pt,rtlTranslate:bt,snapGrid:rn,touchEventsData:fn}=h,wn=yc()-fn.touchStartTime;if(ut<-h.minTranslate())h.slideTo(h.activeIndex);else if(ut>-h.maxTranslate())h.slideTo(h.slides.length<rn.length?rn.length-1:h.slides.length-1);else{if(nt.freeMode.momentum){if(fn.velocities.length>1){const zo=fn.velocities.pop(),Qi=fn.velocities.pop(),Yo=zo.time-Qi.time;h.velocity=(zo.position-Qi.position)/Yo,h.velocity/=2,Math.abs(h.velocity)<nt.freeMode.minimumVelocity&&(h.velocity=0),(Yo>150||yc()-zo.time>300)&&(h.velocity=0)}else h.velocity=0;h.velocity*=nt.freeMode.momentumVelocityRatio,fn.velocities.length=0;let Nt=1e3*nt.freeMode.momentumRatio,_n=h.translate+h.velocity*Nt;bt&&(_n=-_n);let uo,di=!1;const Qo=20*Math.abs(h.velocity)*nt.freeMode.momentumBounceRatio;let ur;if(_n<h.maxTranslate())nt.freeMode.momentumBounce?(_n+h.maxTranslate()<-Qo&&(_n=h.maxTranslate()-Qo),uo=h.maxTranslate(),di=!0,fn.allowMomentumBounce=!0):_n=h.maxTranslate(),nt.loop&&nt.centeredSlides&&(ur=!0);else if(_n>h.minTranslate())nt.freeMode.momentumBounce?(_n-h.minTranslate()>Qo&&(_n=h.minTranslate()+Qo),uo=h.minTranslate(),di=!0,fn.allowMomentumBounce=!0):_n=h.minTranslate(),nt.loop&&nt.centeredSlides&&(ur=!0);else if(nt.freeMode.sticky){let zo;for(let Qi=0;Qi<rn.length;Qi+=1)if(rn[Qi]>-_n){zo=Qi;break}_n=Math.abs(rn[zo]-_n)<Math.abs(rn[zo-1]-_n)||"next"===h.swipeDirection?rn[zo]:rn[zo-1],_n=-_n}if(ur&&F("transitionEnd",()=>{h.loopFix()}),0!==h.velocity){if(Nt=bt?Math.abs((-_n-h.translate)/h.velocity):Math.abs((_n-h.translate)/h.velocity),nt.freeMode.sticky){const zo=Math.abs((bt?-_n:_n)-h.translate),Qi=h.slidesSizesGrid[h.activeIndex];Nt=zo<Qi?nt.speed:zo<2*Qi?1.5*nt.speed:2.5*nt.speed}}else if(nt.freeMode.sticky)return void h.slideToClosest();nt.freeMode.momentumBounce&&di?(h.updateProgress(uo),h.setTransition(Nt),h.setTranslate(_n),h.transitionStart(!0,h.swipeDirection),h.animating=!0,ip(pt,()=>{!h||h.destroyed||!fn.allowMomentumBounce||(I("momentumBounce"),h.setTransition(nt.speed),setTimeout(()=>{h.setTranslate(uo),ip(pt,()=>{!h||h.destroyed||h.transitionEnd()})},0))})):h.velocity?(I("_freeModeNoMomentumRelease"),h.updateProgress(_n),h.setTransition(Nt),h.setTranslate(_n),h.transitionStart(!0,h.swipeDirection),h.animating||(h.animating=!0,ip(pt,()=>{!h||h.destroyed||h.transitionEnd()}))):h.updateProgress(_n),h.updateActiveIndex(),h.updateSlidesClasses()}else{if(nt.freeMode.sticky)return void h.slideToClosest();nt.freeMode&&I("_freeModeNoMomentumRelease")}(!nt.freeMode.momentum||wn>=nt.longSwipesMs)&&(I("_freeModeStaticRelease"),h.updateProgress(),h.updateActiveIndex(),h.updateSlidesClasses())}}}})},function Xm(y){let F,K,Te,je,{swiper:h,extendParams:A,on:I}=y;A({grid:{rows:1,fill:"column"}});const ze=()=>{let mn=h.params.spaceBetween;return"string"==typeof mn&&mn.indexOf("%")>=0?mn=parseFloat(mn.replace("%",""))/100*h.size:"string"==typeof mn&&(mn=parseFloat(mn)),mn};I("init",()=>{je=h.params.grid&&h.params.grid.rows>1}),I("update",()=>{const{params:mn,el:wn}=h,Nt=mn.grid&&mn.grid.rows>1;je&&!Nt?(wn.classList.remove(`${mn.containerModifierClass}grid`,`${mn.containerModifierClass}grid-column`),Te=1,h.emitContainerClasses()):!je&&Nt&&(wn.classList.add(`${mn.containerModifierClass}grid`),"column"===mn.grid.fill&&wn.classList.add(`${mn.containerModifierClass}grid-column`),h.emitContainerClasses()),je=Nt}),h.grid={initSlides:mn=>{const{slidesPerView:wn}=h.params,{rows:Nt,fill:Ln}=h.params.grid,_n=h.virtual&&h.params.virtual.enabled?h.virtual.slides.length:mn.length;Te=Math.floor(_n/Nt),F=Math.floor(_n/Nt)===_n/Nt?_n:Math.ceil(_n/Nt)*Nt,"auto"!==wn&&"row"===Ln&&(F=Math.max(F,wn*Nt)),K=F/Nt},unsetSlides:()=>{h.slides&&h.slides.forEach(mn=>{mn.swiperSlideGridSet&&(mn.style.height="",mn.style[h.getDirectionLabel("margin-top")]="")})},updateSlide:(mn,wn,Nt)=>{const{slidesPerGroup:Ln}=h.params,_n=ze(),{rows:di,fill:uo}=h.params.grid,Qo=h.virtual&&h.params.virtual.enabled?h.virtual.slides.length:Nt.length;let ur,zo,Qi;if("row"===uo&&Ln>1){const Po=Math.floor(mn/(Ln*di)),Yo=mn-di*Ln*Po,vo=0===Po?Ln:Math.min(Math.ceil((Qo-Po*di*Ln)/di),Ln);Qi=Math.floor(Yo/vo),zo=Yo-Qi*vo+Po*Ln,ur=zo+Qi*F/di,wn.style.order=ur}else"column"===uo?(zo=Math.floor(mn/di),Qi=mn-zo*di,(zo>Te||zo===Te&&Qi===di-1)&&(Qi+=1,Qi>=di&&(Qi=0,zo+=1))):(Qi=Math.floor(mn/K),zo=mn-Qi*K);wn.row=Qi,wn.column=zo,wn.style.height=`calc((100% - ${(di-1)*_n}px) / ${di})`,wn.style[h.getDirectionLabel("margin-top")]=0!==Qi?_n&&`${_n}px`:"",wn.swiperSlideGridSet=!0},updateWrapperSize:(mn,wn)=>{const{centeredSlides:Nt,roundLengths:Ln}=h.params,_n=ze(),{rows:di}=h.params.grid;if(h.virtualSize=(mn+_n)*F,h.virtualSize=Math.ceil(h.virtualSize/di)-_n,h.params.cssMode||(h.wrapperEl.style[h.getDirectionLabel("width")]=`${h.virtualSize+_n}px`),Nt){const uo=[];for(let Qo=0;Qo<wn.length;Qo+=1){let ur=wn[Qo];Ln&&(ur=Math.floor(ur)),wn[Qo]<h.virtualSize+wn[0]&&uo.push(ur)}wn.splice(0,wn.length),wn.push(...uo)}}}},function mf(y){let{swiper:h}=y;Object.assign(h,{appendSlide:Nu.bind(h),prependSlide:$l.bind(h),addSlide:l0.bind(h),removeSlide:Op.bind(h),removeAllSlides:mm.bind(h)})},function qf(y){let{swiper:h,extendParams:A,on:I}=y;A({fadeEffect:{crossFade:!1}}),hp({effect:"fade",swiper:h,on:I,setTranslate:()=>{const{slides:Te}=h;for(let ze=0;ze<Te.length;ze+=1){const ut=h.slides[ze];let pt=-ut.swiperSlideOffset;h.params.virtualTranslate||(pt-=h.translate);let bt=0;h.isHorizontal()||(bt=pt,pt=0);const rn=h.params.fadeEffect.crossFade?Math.max(1-Math.abs(ut.progress),0):1+Math.min(Math.max(ut.progress,-1),0),fn=pp(0,ut);fn.style.opacity=rn,fn.style.transform=`translate3d(${pt}px, ${bt}px, 0px)`}},setTransition:Te=>{const je=h.slides.map(ze=>n0(ze));je.forEach(ze=>{ze.style.transitionDuration=`${Te}ms`}),C2({swiper:h,duration:Te,transformElements:je,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!h.params.cssMode})})},function k2(y){let{swiper:h,extendParams:A,on:I}=y;A({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const F=(ze,ut,nt)=>{let pt=ze.querySelector(nt?".swiper-slide-shadow-left":".swiper-slide-shadow-top"),bt=ze.querySelector(nt?".swiper-slide-shadow-right":".swiper-slide-shadow-bottom");pt||(pt=eu("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(nt?"left":"top")).split(" ")),ze.append(pt)),bt||(bt=eu("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(nt?"right":"bottom")).split(" ")),ze.append(bt)),pt&&(pt.style.opacity=Math.max(-ut,0)),bt&&(bt.style.opacity=Math.max(ut,0))};hp({effect:"cube",swiper:h,on:I,setTranslate:()=>{const{el:ze,wrapperEl:ut,slides:nt,width:pt,height:bt,rtlTranslate:rn,size:fn,browser:mn}=h,wn=B0(h),Nt=h.params.cubeEffect,Ln=h.isHorizontal(),_n=h.virtual&&h.params.virtual.enabled;let uo,di=0;Nt.shadow&&(Ln?(uo=h.wrapperEl.querySelector(".swiper-cube-shadow"),uo||(uo=eu("div","swiper-cube-shadow"),h.wrapperEl.append(uo)),uo.style.height=`${pt}px`):(uo=ze.querySelector(".swiper-cube-shadow"),uo||(uo=eu("div","swiper-cube-shadow"),ze.append(uo))));for(let ur=0;ur<nt.length;ur+=1){const zo=nt[ur];let Qi=ur;_n&&(Qi=parseInt(zo.getAttribute("data-swiper-slide-index"),10));let Po=90*Qi,Yo=Math.floor(Po/360);rn&&(Po=-Po,Yo=Math.floor(-Po/360));const vo=Math.max(Math.min(zo.progress,1),-1);let Si=0,ko=0,vr=0;Qi%4==0?(Si=4*-Yo*fn,vr=0):(Qi-1)%4==0?(Si=0,vr=4*-Yo*fn):(Qi-2)%4==0?(Si=fn+4*Yo*fn,vr=fn):(Qi-3)%4==0&&(Si=-fn,vr=3*fn+4*fn*Yo),rn&&(Si=-Si),Ln||(ko=Si,Si=0);const Rs=`rotateX(${wn(Ln?0:-Po)}deg) rotateY(${wn(Ln?Po:0)}deg) translate3d(${Si}px, ${ko}px, ${vr}px)`;vo<=1&&vo>-1&&(di=90*Qi+90*vo,rn&&(di=90*-Qi-90*vo)),zo.style.transform=Rs,Nt.slideShadows&&F(zo,vo,Ln)}if(ut.style.transformOrigin=`50% 50% -${fn/2}px`,ut.style["-webkit-transform-origin"]=`50% 50% -${fn/2}px`,Nt.shadow)if(Ln)uo.style.transform=`translate3d(0px, ${pt/2+Nt.shadowOffset}px, ${-pt/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${Nt.shadowScale})`;else{const ur=Math.abs(di)-90*Math.floor(Math.abs(di)/90),zo=1.5-(Math.sin(2*ur*Math.PI/360)/2+Math.cos(2*ur*Math.PI/360)/2),Po=Nt.shadowScale/zo;uo.style.transform=`scale3d(${Nt.shadowScale}, 1, ${Po}) translate3d(0px, ${bt/2+Nt.shadowOffset}px, ${-bt/2/Po}px) rotateX(-89.99deg)`}const Qo=(mn.isSafari||mn.isWebView)&&mn.needPerspectiveFix?-fn/2:0;ut.style.transform=`translate3d(0px,0,${Qo}px) rotateX(${wn(h.isHorizontal()?0:di)}deg) rotateY(${wn(h.isHorizontal()?-di:0)}deg)`,ut.style.setProperty("--swiper-cube-translate-z",`${Qo}px`)},setTransition:ze=>{const{el:ut,slides:nt}=h;if(nt.forEach(pt=>{pt.style.transitionDuration=`${ze}ms`,pt.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(bt=>{bt.style.transitionDuration=`${ze}ms`})}),h.params.cubeEffect.shadow&&!h.isHorizontal()){const pt=ut.querySelector(".swiper-cube-shadow");pt&&(pt.style.transitionDuration=`${ze}ms`)}},recreateShadows:()=>{const ze=h.isHorizontal();h.slides.forEach(ut=>{const nt=Math.max(Math.min(ut.progress,1),-1);F(ut,nt,ze)})},getEffectParams:()=>h.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})},function ic(y){let{swiper:h,extendParams:A,on:I}=y;A({flipEffect:{slideShadows:!0,limitRotation:!0}});const F=(ze,ut)=>{let nt=h.isHorizontal()?ze.querySelector(".swiper-slide-shadow-left"):ze.querySelector(".swiper-slide-shadow-top"),pt=h.isHorizontal()?ze.querySelector(".swiper-slide-shadow-right"):ze.querySelector(".swiper-slide-shadow-bottom");nt||(nt=H1("flip",ze,h.isHorizontal()?"left":"top")),pt||(pt=H1("flip",ze,h.isHorizontal()?"right":"bottom")),nt&&(nt.style.opacity=Math.max(-ut,0)),pt&&(pt.style.opacity=Math.max(ut,0))};hp({effect:"flip",swiper:h,on:I,setTranslate:()=>{const{slides:ze,rtlTranslate:ut}=h,nt=h.params.flipEffect,pt=B0(h);for(let bt=0;bt<ze.length;bt+=1){const rn=ze[bt];let fn=rn.progress;h.params.flipEffect.limitRotation&&(fn=Math.max(Math.min(rn.progress,1),-1));const mn=rn.swiperSlideOffset;let Nt=-180*fn,Ln=0,_n=h.params.cssMode?-mn-h.translate:-mn,di=0;h.isHorizontal()?ut&&(Nt=-Nt):(di=_n,_n=0,Ln=-Nt,Nt=0),rn.style.zIndex=-Math.abs(Math.round(fn))+ze.length,nt.slideShadows&&F(rn,fn);const uo=`translate3d(${_n}px, ${di}px, 0px) rotateX(${pt(Ln)}deg) rotateY(${pt(Nt)}deg)`;pp(0,rn).style.transform=uo}},setTransition:ze=>{const ut=h.slides.map(nt=>n0(nt));ut.forEach(nt=>{nt.style.transitionDuration=`${ze}ms`,nt.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(pt=>{pt.style.transitionDuration=`${ze}ms`})}),C2({swiper:h,duration:ze,transformElements:ut})},recreateShadows:()=>{h.slides.forEach(ze=>{let ut=ze.progress;h.params.flipEffect.limitRotation&&(ut=Math.max(Math.min(ze.progress,1),-1)),F(ze,ut)})},getEffectParams:()=>h.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!h.params.cssMode})})},function Sg(y){let{swiper:h,extendParams:A,on:I}=y;A({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),hp({effect:"coverflow",swiper:h,on:I,setTranslate:()=>{const{width:Te,height:je,slides:ze,slidesSizesGrid:ut}=h,nt=h.params.coverflowEffect,pt=h.isHorizontal(),bt=h.translate,rn=pt?Te/2-bt:je/2-bt,fn=pt?nt.rotate:-nt.rotate,mn=nt.depth,wn=B0(h);for(let Nt=0,Ln=ze.length;Nt<Ln;Nt+=1){const _n=ze[Nt],di=ut[Nt],Qo=(rn-_n.swiperSlideOffset-di/2)/di,ur="function"==typeof nt.modifier?nt.modifier(Qo):Qo*nt.modifier;let zo=pt?fn*ur:0,Qi=pt?0:fn*ur,Po=-mn*Math.abs(ur),Yo=nt.stretch;"string"==typeof Yo&&-1!==Yo.indexOf("%")&&(Yo=parseFloat(nt.stretch)/100*di);let vo=pt?0:Yo*ur,Si=pt?Yo*ur:0,ko=1-(1-nt.scale)*Math.abs(ur);Math.abs(Si)<.001&&(Si=0),Math.abs(vo)<.001&&(vo=0),Math.abs(Po)<.001&&(Po=0),Math.abs(zo)<.001&&(zo=0),Math.abs(Qi)<.001&&(Qi=0),Math.abs(ko)<.001&&(ko=0);const vr=`translate3d(${Si}px,${vo}px,${Po}px)  rotateX(${wn(Qi)}deg) rotateY(${wn(zo)}deg) scale(${ko})`;if(pp(0,_n).style.transform=vr,_n.style.zIndex=1-Math.abs(Math.round(ur)),nt.slideShadows){let $o=_n.querySelector(pt?".swiper-slide-shadow-left":".swiper-slide-shadow-top"),No=_n.querySelector(pt?".swiper-slide-shadow-right":".swiper-slide-shadow-bottom");$o||($o=H1("coverflow",_n,pt?"left":"top")),No||(No=H1("coverflow",_n,pt?"right":"bottom")),$o&&($o.style.opacity=ur>0?ur:0),No&&(No.style.opacity=-ur>0?-ur:0)}}},setTransition:Te=>{h.slides.map(ze=>n0(ze)).forEach(ze=>{ze.style.transitionDuration=`${Te}ms`,ze.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(ut=>{ut.style.transitionDuration=`${Te}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})},function xh(y){let{swiper:h,extendParams:A,on:I}=y;A({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const F=je=>"string"==typeof je?je:`${je}px`;hp({effect:"creative",swiper:h,on:I,setTranslate:()=>{const{slides:je,wrapperEl:ze,slidesSizesGrid:ut}=h,nt=h.params.creativeEffect,{progressMultiplier:pt}=nt,bt=h.params.centeredSlides,rn=B0(h);bt&&(ze.style.transform=`translateX(calc(50% - ${ut[0]/2-h.params.slidesOffsetBefore||0}px))`);for(let fn=0;fn<je.length;fn+=1){const mn=je[fn],wn=mn.progress,Nt=Math.min(Math.max(mn.progress,-nt.limitProgress),nt.limitProgress);let Ln=Nt;bt||(Ln=Math.min(Math.max(mn.originalProgress,-nt.limitProgress),nt.limitProgress));const _n=mn.swiperSlideOffset,di=[h.params.cssMode?-_n-h.translate:-_n,0,0],uo=[0,0,0];let Qo=!1;h.isHorizontal()||(di[1]=di[0],di[0]=0);let ur={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};Nt<0?(ur=nt.next,Qo=!0):Nt>0&&(ur=nt.prev,Qo=!0),di.forEach((ko,vr)=>{di[vr]=`calc(${ko}px + (${F(ur.translate[vr])} * ${Math.abs(Nt*pt)}))`}),uo.forEach((ko,vr)=>{let Rs=ur.rotate[vr]*Math.abs(Nt*pt);uo[vr]=Rs}),mn.style.zIndex=-Math.abs(Math.round(wn))+je.length;const zo=di.join(", "),Qi=`rotateX(${rn(uo[0])}deg) rotateY(${rn(uo[1])}deg) rotateZ(${rn(uo[2])}deg)`,Yo=Ln<0?1+(1-ur.opacity)*Ln*pt:1-(1-ur.opacity)*Ln*pt,vo=`translate3d(${zo}) ${Qi} ${Ln<0?`scale(${1+(1-ur.scale)*Ln*pt})`:`scale(${1-(1-ur.scale)*Ln*pt})`}`;if(Qo&&ur.shadow||!Qo){let ko=mn.querySelector(".swiper-slide-shadow");!ko&&ur.shadow&&(ko=H1("creative",mn)),ko&&(ko.style.opacity=Math.min(Math.max(Math.abs(nt.shadowPerProgress?Nt*(1/nt.limitProgress):Nt),0),1))}const Si=pp(0,mn);Si.style.transform=vo,Si.style.opacity=Yo,ur.origin&&(Si.style.transformOrigin=ur.origin)}},setTransition:je=>{const ze=h.slides.map(ut=>n0(ut));ze.forEach(ut=>{ut.style.transitionDuration=`${je}ms`,ut.querySelectorAll(".swiper-slide-shadow").forEach(nt=>{nt.style.transitionDuration=`${je}ms`})}),C2({swiper:h,duration:je,transformElements:ze,allSlides:!0})},perspective:()=>h.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!h.params.cssMode})})},function oc(y){let{swiper:h,extendParams:A,on:I}=y;A({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),hp({effect:"cards",swiper:h,on:I,setTranslate:()=>{const{slides:Te,activeIndex:je,rtlTranslate:ze}=h,ut=h.params.cardsEffect,{startTranslate:nt,isTouched:pt}=h.touchEventsData,bt=ze?-h.translate:h.translate;for(let rn=0;rn<Te.length;rn+=1){const fn=Te[rn],mn=fn.progress,wn=Math.min(Math.max(mn,-4),4);let Nt=fn.swiperSlideOffset;h.params.centeredSlides&&!h.params.cssMode&&(h.wrapperEl.style.transform=`translateX(${h.minTranslate()}px)`),h.params.centeredSlides&&h.params.cssMode&&(Nt-=Te[0].swiperSlideOffset);let Ln=h.params.cssMode?-Nt-h.translate:-Nt,_n=0;const di=-100*Math.abs(wn);let uo=1,Qo=-ut.perSlideRotate*wn,ur=ut.perSlideOffset-.75*Math.abs(wn);const zo=h.virtual&&h.params.virtual.enabled?h.virtual.from+rn:rn;if((zo===je||zo===je-1)&&wn>0&&wn<1&&(pt||h.params.cssMode)&&bt<nt||(zo===je||zo===je+1)&&wn<0&&wn>-1&&(pt||h.params.cssMode)&&bt>nt){const ko=(1-Math.abs((Math.abs(wn)-.5)/.5))**.5;Qo+=-28*wn*ko,uo+=-.5*ko,ur+=96*ko,_n=-25*ko*Math.abs(wn)+"%"}if(Ln=wn<0?`calc(${Ln}px ${ze?"-":"+"} (${ur*Math.abs(wn)}%))`:wn>0?`calc(${Ln}px ${ze?"-":"+"} (-${ur*Math.abs(wn)}%))`:`${Ln}px`,!h.isHorizontal()){const ko=_n;_n=Ln,Ln=ko}const vo=`\n        translate3d(${Ln}, ${_n}, ${di}px)\n        rotateZ(${ut.rotate?ze?-Qo:Qo:0}deg)\n        scale(${wn<0?""+(1+(1-uo)*wn):""+(1-(1-uo)*wn)})\n      `;if(ut.slideShadows){let ko=fn.querySelector(".swiper-slide-shadow");ko||(ko=H1("cards",fn)),ko&&(ko.style.opacity=Math.min(Math.max((Math.abs(wn)-.5)/.5,0),1))}fn.style.zIndex=-Math.abs(Math.round(mn))+Te.length,pp(0,fn).style.transform=vo}},setTransition:Te=>{const je=h.slides.map(ze=>n0(ze));je.forEach(ze=>{ze.style.transitionDuration=`${Te}ms`,ze.querySelectorAll(".swiper-slide-shadow").forEach(ut=>{ut.style.transitionDuration=`${Te}ms`})}),C2({swiper:h,duration:Te,transformElements:je})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!h.params.cssMode})})}];dd.use(Ml);const gf=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Lp(y){return"object"==typeof y&&null!==y&&y.constructor&&"Object"===Object.prototype.toString.call(y).slice(8,-1)&&!y.__swiper__}function S2(y,h){const A=["__proto__","constructor","prototype"];Object.keys(h).filter(I=>A.indexOf(I)<0).forEach(I=>{typeof y[I]>"u"?y[I]=h[I]:Lp(h[I])&&Lp(y[I])&&Object.keys(h[I]).length>0?h[I].__swiper__?y[I]=h[I]:S2(y[I],h[I]):y[I]=h[I]})}function gm(y){return void 0===y&&(y=""),y.replace(/-[a-z]/g,h=>h.toUpperCase().replace("-",""))}const Ud=y=>{if(parseFloat(y)===Number(y))return Number(y);if("true"===y||""===y)return!0;if("false"===y)return!1;if("null"===y)return null;if("undefined"!==y){if("string"==typeof y&&y.includes("{")&&y.includes("}")&&y.includes('"')){let h;try{h=JSON.parse(y)}catch{h=y}return h}return y}},Bp=["a11y","autoplay","controller","cards-effect","coverflow-effect","creative-effect","cube-effect","fade-effect","flip-effect","free-mode","grid","hash-navigation","history","keyboard","mousewheel","navigation","pagination","parallax","scrollbar","thumbs","virtual","zoom"];function T2(y,h,A){const I={},F={};S2(I,ff);const K=[...gf,"on"],Te=K.map(ze=>ze.replace(/_/,""));K.forEach(ze=>{ze=ze.replace("_",""),typeof y[ze]<"u"&&(F[ze]=y[ze])});const je=[...y.attributes];return"string"==typeof h&&typeof A<"u"&&je.push({name:h,value:Lp(A)?{...A}:A}),je.forEach(ze=>{const ut=Bp.filter(nt=>0===ze.name.indexOf(`${nt}-`))[0];if(ut){const nt=gm(ut),pt=gm(ze.name.split(`${ut}-`)[1]);typeof F[nt]>"u"&&(F[nt]={}),!0===F[nt]&&(F[nt]={enabled:!0}),F[nt][pt]=Ud(ze.value)}else{const nt=gm(ze.name);if(!Te.includes(nt))return;const pt=Ud(ze.value);F[nt]&&Bp.includes(ze.name)&&!Lp(pt)?(F[nt].constructor!==Object&&(F[nt]={}),F[nt].enabled=!!pt):F[nt]=pt}}),S2(I,F),I.navigation?I.navigation={prevEl:".swiper-button-prev",nextEl:".swiper-button-next",...!0!==I.navigation?I.navigation:{}}:!1===I.navigation&&delete I.navigation,I.scrollbar?I.scrollbar={el:".swiper-scrollbar",...!0!==I.scrollbar?I.scrollbar:{}}:!1===I.scrollbar&&delete I.scrollbar,I.pagination?I.pagination={el:".swiper-pagination",...!0!==I.pagination?I.pagination:{}}:!1===I.pagination&&delete I.pagination,{params:I,passedParams:F}}const Np=":host{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{width:100%;height:100%;margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android ::slotted(swiper-slide),.swiper-ios ::slotted(swiper-slide),.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}::slotted(swiper-slide){flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}::slotted(.swiper-slide-invisible-blank){visibility:hidden}.swiper-autoheight,.swiper-autoheight ::slotted(swiper-slide){height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden ::slotted(swiper-slide){transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d ::slotted(swiper-slide){transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode ::slotted(swiper-slide){scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode ::slotted(swiper-slide){scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered ::slotted(swiper-slide){scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal ::slotted(swiper-slide):first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical ::slotted(swiper-slide):first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-virtual ::slotted(swiper-slide){-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:host{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}::slotted(.swiper-slide-zoomed){cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode ::slotted(swiper-slide){transition-timing-function:ease-out}.swiper-fade ::slotted(swiper-slide){pointer-events:none;transition-property:opacity}.swiper-fade ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-fade ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-fade ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube{overflow:visible}.swiper-cube ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-cube.swiper-rtl ::slotted(swiper-slide){transform-origin:100% 0}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-next),.swiper-cube ::slotted(.swiper-slide-prev){pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube ::slotted(.swiper-slide-next)+::slotted(swiper-slide){pointer-events:auto;visibility:visible}.swiper-flip{overflow:visible}.swiper-flip ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-flip ::slotted(.swiper-slide-active),.swiper-flip ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-creative ::slotted(swiper-slide){-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper-cards{overflow:visible}.swiper-cards ::slotted(swiper-slide){transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}",h1=typeof window>"u"||typeof HTMLElement>"u"?class Mg{}:HTMLElement,Fp='<svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.38296 20.0762C0.111788 19.805 0.111788 19.3654 0.38296 19.0942L9.19758 10.2796L0.38296 1.46497C0.111788 1.19379 0.111788 0.754138 0.38296 0.482966C0.654131 0.211794 1.09379 0.211794 1.36496 0.482966L10.4341 9.55214C10.8359 9.9539 10.8359 10.6053 10.4341 11.007L1.36496 20.0762C1.09379 20.3474 0.654131 20.3474 0.38296 20.0762Z" fill="currentColor"/></svg>\n    ',M2=(y,h)=>{if(typeof CSSStyleSheet<"u"&&y.adoptedStyleSheets){const A=new CSSStyleSheet;A.replaceSync(h),y.adoptedStyleSheets=[A]}else{const A=document.createElement("style");A.rel="stylesheet",A.textContent=h,y.appendChild(A)}};class Vp extends h1{constructor(){super(),this.attachShadow({mode:"open"})}static get nextButtonSvg(){return Fp}static get prevButtonSvg(){return Fp.replace("/></svg>",' transform-origin="center" transform="rotate(180)"/></svg>')}cssStyles(){return[Np,...this.injectStyles&&Array.isArray(this.injectStyles)?this.injectStyles:[]].join("\n")}cssLinks(){return this.injectStylesUrls||[]}calcSlideSlots(){const h=this.slideSlots||0,A=[...this.querySelectorAll("[slot^=slide-]")].map(I=>parseInt(I.getAttribute("slot").split("slide-")[1],10));if(this.slideSlots=A.length?Math.max(...A)+1:0,this.rendered)if(this.slideSlots>h)for(let I=h;I<this.slideSlots;I+=1){const F=document.createElement("swiper-slide");F.setAttribute("part",`slide slide-${I+1}`);const K=document.createElement("slot");K.setAttribute("name",`slide-${I+1}`),F.appendChild(K),this.shadowRoot.querySelector(".swiper-wrapper").appendChild(F)}else if(this.slideSlots<h){const I=this.swiper.slides;for(let F=I.length-1;F>=0;F-=1)F>this.slideSlots&&I[F].remove()}}render(){if(this.rendered)return;this.calcSlideSlots();let h=this.cssStyles();this.slideSlots>0&&(h=h.replace(/::slotted\(([a-z-0-9.]*)\)/g,"$1")),h.length&&M2(this.shadowRoot,h),this.cssLinks().forEach(I=>{if(this.shadowRoot.querySelector(`link[href="${I}"]`))return;const K=document.createElement("link");K.rel="stylesheet",K.href=I,this.shadowRoot.appendChild(K)});const A=document.createElement("div");A.classList.add("swiper"),A.part="container",A.innerHTML=`\n      <slot name="container-start"></slot>\n      <div class="swiper-wrapper" part="wrapper">\n        <slot></slot>\n        ${Array.from({length:this.slideSlots}).map((I,F)=>`\n        <swiper-slide part="slide slide-${F}">\n          <slot name="slide-${F}"></slot>\n        </swiper-slide>\n        `).join("")}\n      </div>\n      <slot name="container-end"></slot>\n      ${function Cd(y){return void 0===y&&(y={}),y.navigation&&typeof y.navigation.nextEl>"u"&&typeof y.navigation.prevEl>"u"}(this.passedParams)?`\n        <div part="button-prev" class="swiper-button-prev">${this.constructor.prevButtonSvg}</div>\n        <div part="button-next" class="swiper-button-next">${this.constructor.nextButtonSvg}</div>\n      `:""}\n      ${function fp(y){return void 0===y&&(y={}),y.pagination&&typeof y.pagination.el>"u"}(this.passedParams)?'\n        <div part="pagination" class="swiper-pagination"></div>\n      ':""}\n      ${function i4(y){return void 0===y&&(y={}),y.scrollbar&&typeof y.scrollbar.el>"u"}(this.passedParams)?'\n        <div part="scrollbar" class="swiper-scrollbar"></div>\n      ':""}\n    `,this.shadowRoot.appendChild(A),this.rendered=!0}initialize(){var h=this;if(this.initialized)return;this.initialized=!0;const{params:A,passedParams:I}=T2(this);this.swiperParams=A,this.passedParams=I,delete this.swiperParams.init,this.render(),this.swiper=new dd(this.shadowRoot.querySelector(".swiper"),{...A.virtual?{}:{observer:!0},...A,touchEventsTarget:"container",onAny:function(F){"observerUpdate"===F&&h.calcSlideSlots();const K=A.eventsPrefix?`${A.eventsPrefix}${F.toLowerCase()}`:F.toLowerCase();for(var Te=arguments.length,je=new Array(Te>1?Te-1:0),ze=1;ze<Te;ze++)je[ze-1]=arguments[ze];const ut=new CustomEvent(K,{detail:je,bubbles:"hashChange"!==F,cancelable:!0});h.dispatchEvent(ut)}})}connectedCallback(){this.initialized&&this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||!1===this.init||"false"===this.getAttribute("init")||this.initialize()}disconnectedCallback(){this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||(this.swiper&&this.swiper.destroy&&this.swiper.destroy(),this.initialized=!1)}updateSwiperOnPropChange(h,A){const{params:I,passedParams:F}=T2(this,h,A);this.passedParams=F,this.swiperParams=I,(!this.swiper||this.swiper.params[h]!==A)&&function d1(y){let{swiper:h,slides:A,passedParams:I,changedParams:F,nextEl:K,prevEl:Te,scrollbarEl:je,paginationEl:ze}=y;const ut=F.filter(Qi=>"children"!==Qi&&"direction"!==Qi&&"wrapperClass"!==Qi),{params:nt,pagination:pt,navigation:bt,scrollbar:rn,virtual:fn,thumbs:mn}=h;let wn,Nt,Ln,_n,di,uo,Qo,ur;F.includes("thumbs")&&I.thumbs&&I.thumbs.swiper&&nt.thumbs&&!nt.thumbs.swiper&&(wn=!0),F.includes("controller")&&I.controller&&I.controller.control&&nt.controller&&!nt.controller.control&&(Nt=!0),F.includes("pagination")&&I.pagination&&(I.pagination.el||ze)&&(nt.pagination||!1===nt.pagination)&&pt&&!pt.el&&(Ln=!0),F.includes("scrollbar")&&I.scrollbar&&(I.scrollbar.el||je)&&(nt.scrollbar||!1===nt.scrollbar)&&rn&&!rn.el&&(_n=!0),F.includes("navigation")&&I.navigation&&(I.navigation.prevEl||Te)&&(I.navigation.nextEl||K)&&(nt.navigation||!1===nt.navigation)&&bt&&!bt.prevEl&&!bt.nextEl&&(di=!0);const zo=Qi=>{h[Qi]&&(h[Qi].destroy(),"navigation"===Qi?(h.isElement&&(h[Qi].prevEl.remove(),h[Qi].nextEl.remove()),nt[Qi].prevEl=void 0,nt[Qi].nextEl=void 0,h[Qi].prevEl=void 0,h[Qi].nextEl=void 0):(h.isElement&&h[Qi].el.remove(),nt[Qi].el=void 0,h[Qi].el=void 0))};F.includes("loop")&&h.isElement&&(nt.loop&&!I.loop?uo=!0:!nt.loop&&I.loop?Qo=!0:ur=!0),ut.forEach(Qi=>{if(Lp(nt[Qi])&&Lp(I[Qi]))Object.assign(nt[Qi],I[Qi]),("navigation"===Qi||"pagination"===Qi||"scrollbar"===Qi)&&"enabled"in I[Qi]&&!I[Qi].enabled&&zo(Qi);else{const Po=I[Qi];!0!==Po&&!1!==Po||"navigation"!==Qi&&"pagination"!==Qi&&"scrollbar"!==Qi?nt[Qi]=I[Qi]:!1===Po&&zo(Qi)}}),ut.includes("controller")&&!Nt&&h.controller&&h.controller.control&&nt.controller&&nt.controller.control&&(h.controller.control=nt.controller.control),F.includes("children")&&A&&fn&&nt.virtual.enabled?(fn.slides=A,fn.update(!0)):F.includes("virtual")&&fn&&nt.virtual.enabled&&(A&&(fn.slides=A),fn.update(!0)),F.includes("children")&&A&&nt.loop&&(ur=!0),wn&&mn.init()&&mn.update(!0),Nt&&(h.controller.control=nt.controller.control),Ln&&(h.isElement&&(!ze||"string"==typeof ze)&&(ze=document.createElement("div"),ze.classList.add("swiper-pagination"),ze.part.add("pagination"),h.el.appendChild(ze)),ze&&(nt.pagination.el=ze),pt.init(),pt.render(),pt.update()),_n&&(h.isElement&&(!je||"string"==typeof je)&&(je=document.createElement("div"),je.classList.add("swiper-scrollbar"),je.part.add("scrollbar"),h.el.appendChild(je)),je&&(nt.scrollbar.el=je),rn.init(),rn.updateSize(),rn.setTranslate()),di&&(h.isElement&&((!K||"string"==typeof K)&&(K=document.createElement("div"),K.classList.add("swiper-button-next"),K.innerHTML=h.hostEl.constructor.nextButtonSvg,K.part.add("button-next"),h.el.appendChild(K)),(!Te||"string"==typeof Te)&&(Te=document.createElement("div"),Te.classList.add("swiper-button-prev"),Te.innerHTML=h.hostEl.constructor.prevButtonSvg,Te.part.add("button-prev"),h.el.appendChild(Te))),K&&(nt.navigation.nextEl=K),Te&&(nt.navigation.prevEl=Te),bt.init(),bt.update()),F.includes("allowSlideNext")&&(h.allowSlideNext=I.allowSlideNext),F.includes("allowSlidePrev")&&(h.allowSlidePrev=I.allowSlidePrev),F.includes("direction")&&h.changeDirection(I.direction,!1),(uo||ur)&&h.loopDestroy(),(Qo||ur)&&h.loopCreate(),h.update()}({swiper:this.swiper,passedParams:this.passedParams,changedParams:[gm(h)],..."navigation"===h&&F[h]?{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}:{},..."pagination"===h&&F[h]?{paginationEl:".swiper-pagination"}:{},..."scrollbar"===h&&F[h]?{scrollbarEl:".swiper-scrollbar"}:{}})}attributeChangedCallback(h,A,I){this.initialized&&("true"===A&&null===I&&(I=!1),this.updateSwiperOnPropChange(h,I))}static get observedAttributes(){return gf.filter(A=>A.includes("_")).map(A=>A.replace(/[A-Z]/g,I=>`-${I}`).replace("_","").toLowerCase())}}gf.forEach(y=>{"init"!==y&&(y=y.replace("_",""),Object.defineProperty(Vp.prototype,y,{configurable:!0,get(){return(this.passedParams||{})[y]},set(h){this.passedParams||(this.passedParams={}),this.passedParams[y]=h,this.initialized&&this.updateSwiperOnPropChange(y,h)}}))});function Kf(y,h){1&y&&(C.j41(0,"ion-tab-button",5),C.nrm(1,"ion-icon",6),C.EFF(2," Signaler "),C.k0s(),C.j41(3,"ion-tab-button",7),C.nrm(4,"ion-icon",8),C.EFF(5," Login "),C.k0s())}function _m(y,h){1&y&&(C.j41(0,"ion-tab-button",2),C.nrm(1,"ion-icon",9),C.EFF(2," Mon Espace "),C.k0s())}typeof window<"u"&&(window.SwiperElementRegisterParams=y=>{gf.push(...y)}),typeof window>"u"||(window.customElements.get("swiper-container")||window.customElements.define("swiper-container",Vp),window.customElements.get("swiper-slide")||window.customElements.define("swiper-slide",class $p extends h1{constructor(){super(),this.attachShadow({mode:"open"})}render(){const h=this.lazy||""===this.getAttribute("lazy")||"true"===this.getAttribute("lazy");if(M2(this.shadowRoot,"::slotted(.swiper-slide-shadow),::slotted(.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-top){position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}::slotted(.swiper-slide-shadow){background:rgba(0,0,0,.15)}::slotted(.swiper-slide-shadow-left){background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-right){background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-top){background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-bottom){background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear;width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-zoom-container){width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}::slotted(.swiper-zoom-container)>canvas,::slotted(.swiper-zoom-container)>img,::slotted(.swiper-zoom-container)>svg{max-width:100%;max-height:100%;object-fit:contain}"),this.shadowRoot.appendChild(document.createElement("slot")),h){const A=document.createElement("div");A.classList.add("swiper-lazy-preloader"),A.part.add("preloader"),this.shadowRoot.appendChild(A)}}initialize(){this.render()}connectedCallback(){this.initialize()}}));let Ih=(()=>{var y;class h{constructor(){this.authService=(0,C.WQX)(Eu.u),this.signalementsService=(0,C.WQX)(Jn.W),this.user=this.authService.userSignal,(0,Ut.a)({addOutline:It.EKF,searchOutline:It.jBE,playCircle:It.Jns,radio:It.Ow_,library:It.Yvo,search:It.$P,personOutline:It.wAZ,listOutline:It.PFj,idCardOutline:It.O0q})}ngOnInit(){this.authService.getUserFromLocalStorage()||this.fetchUser()}fetchUser(){var I=this;return(0,Ht.A)(function*(){try{const F=yield I.authService.signInAnonymously();F&&(console.log("je suis la"),I.authService.userSignal.set(F))}catch(F){console.log(F)}})()}}return(y=h).\u0275fac=function(I){return new(I||y)},y.\u0275cmp=C.VBU({type:y,selectors:[["app-root"]],standalone:!0,features:[C.aNF],decls:10,vars:2,consts:[[3,"fullscreen"],["slot","bottom"],["routerLink","/profile","routerLinkActive","active-tab"],["routerLink","/signalements","routerLinkActive","active-tab"],["name","list-outline"],["routerLink","/signaler","routerLinkActive","active-tab"],["name","add-outline"],["routerLink","/auth","routerLinkActive","active-tab"],["name","person-outline"],["name","id-card-outline"]],template:function(I,F){if(1&I&&(C.j41(0,"ion-app")(1,"ion-content",0),C.nrm(2,"ion-router-outlet"),C.j41(3,"ion-tabs")(4,"ion-tab-bar",1),C.DNE(5,Kf,6,0)(6,_m,3,0,"ion-tab-button",2),C.j41(7,"ion-tab-button",3),C.nrm(8,"ion-icon",4),C.EFF(9," Signalements "),C.k0s()()()()()),2&I){let K;C.R7$(),C.Y8G("fullscreen",!0),C.R7$(4),C.vxM(null!=(K=F.user())&&K.isAnonymous?5:6)}},dependencies:[l.Jq,l.iq,l.W9,l.p4,l.qW,l.U1,se.Wk,l.Rg,se.wQ,vt.MD],styles:[".active-tab[_ngcontent-%COMP%]{color:green}"]}),h})();var vf=_e(9030),_f=_e(8810),A2=_e(8793),Yf=_e(1413),Zf=_e(5343);const yf=new mh.c(Zf.l);var bf=_e(6365),mp=_e(8750),Km=_e(983),gp=_e(9326);function ym(...y){const h=(0,gp.lI)(y),A=(0,gp.R0)(y,1/0),I=y;return I.length?1===I.length?(0,mp.Tg)(I[0]):(0,bf.U)(A)((0,P0.H)(I,h)):Km.w}var Qf=_e(17),Jf=_e(8071),Lh=_e(9974);const p1={connector:()=>new Yf.B};function hd(y,h=p1){const{connector:A}=h;return(0,Lh.N)((I,F)=>{const K=A();(0,mp.Tg)(y(function jp(y){return new mh.c(h=>y.subscribe(h))}(K))).subscribe(F),F.add(I.subscribe(K))})}var Up=_e(6697),vp=_e(8141),P2=_e(3236),Ym=_e(4360),o4=_e(3703),$0=_e(1397);function bm(y,h){return h?A=>(0,A2.x)(h.pipe((0,Up.s)(1),function R2(){return(0,Lh.N)((y,h)=>{y.subscribe((0,Ym._)(h,Zf.l))})}()),A.pipe(bm(y))):(0,$0.Z)((A,I)=>(0,mp.Tg)(y(A,I)).pipe((0,Up.s)(1),(0,o4.u)(A)))}var ah=_e(9470);const xf="Service workers are disabled or not supported by this browser";class Gp{constructor(h){if(this.serviceWorker=h,h){const I=(0,On.R)(h,"controllerchange").pipe((0,sr.T)(()=>h.controller)),F=(0,vf.v)(()=>(0,D0.of)(h.controller)),K=(0,A2.x)(F,I);this.worker=K.pipe((0,el.p)(nt=>!!nt)),this.registration=this.worker.pipe((0,_l.n)(()=>h.getRegistration()));const ut=(0,On.R)(h,"message").pipe((0,sr.T)(nt=>nt.data)).pipe((0,el.p)(nt=>nt&&nt.type)).pipe(function t2(y){return y?h=>hd(y)(h):h=>function e2(y,h){const A=(0,Jf.T)(y)?y:()=>y;return(0,Jf.T)(h)?hd(h,{connector:A}):I=>new Qf.G(I,A)}(new Yf.B)(h)}());ut.connect(),this.events=ut}else this.worker=this.events=this.registration=function G1(y){return(0,vf.v)(()=>(0,_f.$)(new Error(y)))}(xf)}postMessage(h,A){return this.worker.pipe((0,Up.s)(1),(0,vp.M)(I=>{I.postMessage({action:h,...A})})).toPromise().then(()=>{})}postMessageWithOperation(h,A,I){const F=this.waitForOperationCompleted(I),K=this.postMessage(h,A);return Promise.all([K,F]).then(([,Te])=>Te)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(h){let A;return A="string"==typeof h?I=>I.type===h:I=>h.includes(I.type),this.events.pipe((0,el.p)(A))}nextEventOfType(h){return this.eventsOfType(h).pipe((0,Up.s)(1))}waitForOperationCompleted(h){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,el.p)(A=>A.nonce===h),(0,Up.s)(1),(0,sr.T)(A=>{if(void 0!==A.result)return A.result;throw new Error(A.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let If=(()=>{var y;class h{get isEnabled(){return this.sw.isEnabled}constructor(I){if(this.sw=I,this.pushManager=null,this.subscriptionChanges=new Yf.B,!I.isEnabled)return this.messages=yf,this.notificationClicks=yf,void(this.subscription=yf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,sr.T)(K=>K.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,sr.T)(K=>K.data)),this.pushManager=this.sw.registration.pipe((0,sr.T)(K=>K.pushManager));const F=this.pushManager.pipe((0,_l.n)(K=>K.getSubscription()));this.subscription=ym(F,this.subscriptionChanges)}requestSubscription(I){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(xf));const F={userVisibleOnly:!0};let K=this.decodeBase64(I.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),Te=new Uint8Array(new ArrayBuffer(K.length));for(let je=0;je<K.length;je++)Te[je]=K.charCodeAt(je);return F.applicationServerKey=Te,this.pushManager.pipe((0,_l.n)(je=>je.subscribe(F)),(0,Up.s)(1)).toPromise().then(je=>(this.subscriptionChanges.next(je),je))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Up.s)(1),(0,_l.n)(F=>{if(null===F)throw new Error("Not subscribed to push notifications.");return F.unsubscribe().then(K=>{if(!K)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(xf))}decodeBase64(I){return atob(I)}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(Gp))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})(),n2=(()=>{var y;class h{get isEnabled(){return this.sw.isEnabled}constructor(I){if(this.sw=I,!I.isEnabled)return this.versionUpdates=yf,void(this.unrecoverable=yf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(xf));const I=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:I},I)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(xf));const I=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:I},I)}}return(y=h).\u0275fac=function(I){return new(I||y)(C.KVO(Gp))},y.\u0275prov=C.jDH({token:y,factory:y.\u0275fac}),h})();const _p=new C.nKC("");function O2(y,h,A,I){return()=>{if(!(0,vt.UE)(I)||!("serviceWorker"in navigator)||!1===A.enabled)return;const F=y.get(C.SKi),K=y.get(C.o8S);let Te;if(F.runOutsideAngular(()=>{const je=navigator.serviceWorker,ze=()=>{var ut;return null===(ut=je.controller)||void 0===ut?void 0:ut.postMessage({action:"INITIALIZE"})};je.addEventListener("controllerchange",ze),K.onDestroy(()=>{je.removeEventListener("controllerchange",ze)})}),"function"==typeof A.registrationStrategy)Te=A.registrationStrategy();else{const[je,...ze]=(A.registrationStrategy||"registerWhenStable:30000").split(":");switch(je){case"registerImmediately":Te=(0,D0.of)(null);break;case"registerWithDelay":Te=c0(+ze[0]||0);break;case"registerWhenStable":Te=ze[0]?ym(r4(y),c0(+ze[0])):r4(y);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${A.registrationStrategy}`)}}F.runOutsideAngular(()=>Te.pipe((0,Up.s)(1)).subscribe(()=>navigator.serviceWorker.register(h,{scope:A.scope}).catch(je=>console.error("Service worker registration failed with:",je))))}}function c0(y){return(0,D0.of)(null).pipe(function Hp(y,h=P2.E){const A=function z2(y=0,h,A=P2.b){let I=-1;return null!=h&&((0,ah.m)(h)?A=h:I=h),new mh.c(F=>{let K=function wf(y){return y instanceof Date&&!isNaN(y)}(y)?+y-A.now():y;K<0&&(K=0);let Te=0;return A.schedule(function(){F.closed||(F.next(Te++),0<=I?this.schedule(void 0,I):F.complete())},K)})}(y,h);return bm(()=>A)}(y))}function r4(y){return y.get(C.o8S).isStable.pipe((0,el.p)(A=>A))}function tu(y,h){return new Gp((0,vt.UE)(h)&&!1!==y.enabled?navigator.serviceWorker:void 0)}class T1{}var Ef=_e(5621),Wp=_e(9967);(0,V.B8)(Ih,{providers:[{provide:se.b,useClass:ne.jM},(0,l._H)(),(0,se.lh)(Cu,(0,se.lG)(),(0,se.Sn)(se.Kp)),(0,Xt.MW)(()=>(0,Xt.Wp)(Ka_firebaseConfig)),(0,Wp.hV)(()=>(0,Wp.aU)()),(0,Ef._q)(()=>(0,Ef.xI)()),function ln(...y){const h=[ql,ci,Fe,{provide:xd,useExisting:Fe},{provide:Wa,useFactory:()=>{var A;return null!==(A=(0,C.WQX)(z0,{optional:!0}))&&void 0!==A?A:(0,C.WQX)(ci)}},{provide:H,useValue:j,multi:!0},{provide:Dn,useValue:!0},{provide:te,useClass:L}];for(const A of y)h.push(...A.\u0275providers);return(0,C.EmA)(h)}(),function wm(y,h={}){return(0,C.EmA)([If,n2,{provide:_p,useValue:y},{provide:T1,useValue:h},{provide:Gp,useFactory:tu,deps:[T1,C.Agw]},{provide:C.hnV,useFactory:O2,deps:[C.zZn,_p,T1,C.Agw],multi:!0}])}("ngsw-worker.js",{enabled:!(0,C.naY)(),registrationStrategy:"registerWhenStable:30000"})]}),window,typeof window>"u"?Promise.resolve():(0,qe.p)().then(()=>(0,qe.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],undefined)),(0,C.SmG)()},5079:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{a:()=>ne});var V,ne=function(vt){Object.keys(vt).forEach(function(un){l(un,vt[un]);var xn=un.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();un!==xn&&l(xn,vt[un])})},l=function(vt,un){var xn=function(){if(typeof window>"u")return new Map;if(!V){var vt=window;vt.Ionicons=vt.Ionicons||{},V=vt.Ionicons.map=vt.Ionicons.map||new Map}return V}(),on=xn.get(vt);void 0===on?xn.set(vt,un):on!==un&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(vt,'". Ensure that multiple icons are not mapped to the same icon name.'))}},1247:function(Go){Go.exports=function(){"use strict";var Kn,_e,V;function se(l,qe){if(Kn)if(_e){var Y="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Kn+")(sharedChunk); ("+_e+")(sharedChunk); self.onerror = null;",ft={};Kn(ft),V=qe(ft),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(V.workerUrl=window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"})))}else _e=qe;else Kn=qe}return se(0,function(l){var qe="3.5.2";let Y;const ft={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Y){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Y=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):t}catch{Y=t}}return Y},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!ft.API_URL)return null;try{const t=new URL(ft.API_URL);return"api.mapbox.cn"===t.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===t.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Xt(t){return ft.API_URL_REGEX.test(t)}function Ut(t){return 0===t.indexOf("mapbox:")}function It(t){return ft.API_CDN_URL_REGEX.test(t)}function C(t){return ft.API_SPRITE_REGEX.test(t)}function At(t){return ft.API_STYLE_REGEX.test(t)&&!C(t)}const Ht={create:"create",load:"load",fullLoad:"fullLoad"},vt={mark(t){performance.mark(t)},measure(t,e,n){performance.measure(t,e,n)}};function un(t){const e=t.name.split("?")[0];return It(e)&&e.includes("mapbox-gl.js")?"javascript":It(e)&&e.includes("mapbox-gl.css")?"css":ft.API_FONTS_REGEX.test(e)?"fontRange":C(e)?"sprite":At(e)?"style":ft.API_TILEJSON_REGEX.test(e)?"tilejson":"other"}function xn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var on={},ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.setMatrixArrayType=function(t){ht.ARRAY_TYPE=An=t},ht.toRadian=function(t){return t*xt},ht.equals=function(t,e){return Math.abs(t-e)<=Jn*Math.max(1,Math.abs(t),Math.abs(e))},ht.RANDOM=ht.ARRAY_TYPE=ht.EPSILON=void 0;var Jn=1e-6;ht.EPSILON=Jn;var An=typeof Float32Array<"u"?Float32Array:Array;ht.ARRAY_TYPE=An;var qn=Math.random;ht.RANDOM=qn;var xt=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ot={};function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.create=function(){var t=new Pn.ARRAY_TYPE(4);return Pn.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},Ot.clone=function(t){var e=new Pn.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Ot.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Ot.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ot.fromValues=function(t,e,n,s){var u=new Pn.ARRAY_TYPE(4);return u[0]=t,u[1]=e,u[2]=n,u[3]=s,u},Ot.set=function(t,e,n,s,u){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t},Ot.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},Ot.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n*m-u*s;return g?(t[0]=m*(g=1/g),t[1]=-s*g,t[2]=-u*g,t[3]=n*g,t):null},Ot.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},Ot.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},Ot.multiply=Ct,Ot.rotate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=Math.sin(n),T=Math.cos(n);return t[0]=s*T+m*E,t[1]=u*T+g*E,t[2]=s*-E+m*T,t[3]=u*-E+g*T,t},Ot.scale=function(t,e,n){var s=e[1],u=e[2],m=e[3],g=n[0],E=n[1];return t[0]=e[0]*g,t[1]=s*g,t[2]=u*E,t[3]=m*E,t},Ot.fromRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=-n,t[3]=s,t},Ot.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},Ot.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ot.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},Ot.LDU=function(t,e,n,s){return t[2]=s[2]/s[0],n[0]=s[0],n[1]=s[1],n[3]=s[3]-t[2]*n[1],[t,e,n]},Ot.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Ot.subtract=Me,Ot.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},Ot.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=e[0],E=e[1],T=e[2],z=e[3];return Math.abs(n-g)<=Pn.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(s-E)<=Pn.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-T)<=Pn.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(m-z)<=Pn.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))},Ot.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Ot.multiplyScalarAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t},Ot.sub=Ot.mul=void 0;var Pn=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==vn(t)&&"function"!=typeof t)return{default:t};var n=ki(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function ki(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(ki=function(s){return s?n:e})(t)}function Ct(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=n[0],T=n[1],z=n[2],$=n[3];return t[0]=s*E+m*T,t[1]=u*E+g*T,t[2]=s*z+m*$,t[3]=u*z+g*$,t}function Me(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Ot.mul=Ct,Ot.sub=Me;var pn={};function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(pn,"__esModule",{value:!0}),pn.create=function(){var t=new On.ARRAY_TYPE(6);return On.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},pn.clone=function(t){var e=new On.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},pn.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},pn.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},pn.fromValues=function(t,e,n,s,u,m){var g=new On.ARRAY_TYPE(6);return g[0]=t,g[1]=e,g[2]=n,g[3]=s,g[4]=u,g[5]=m,g},pn.set=function(t,e,n,s,u,m,g){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t[4]=m,t[5]=g,t},pn.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=n*m-s*u;return T?(t[0]=m*(T=1/T),t[1]=-s*T,t[2]=-u*T,t[3]=n*T,t[4]=(u*E-m*g)*T,t[5]=(s*g-n*E)*T,t):null},pn.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},pn.multiply=so,pn.rotate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=Math.sin(n),$=Math.cos(n);return t[0]=s*$+m*z,t[1]=u*$+g*z,t[2]=s*-z+m*$,t[3]=u*-z+g*$,t[4]=E,t[5]=T,t},pn.scale=function(t,e,n){var s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=n[0],z=n[1];return t[0]=e[0]*T,t[1]=s*T,t[2]=u*z,t[3]=m*z,t[4]=g,t[5]=E,t},pn.translate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=n[0],$=n[1];return t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=s*z+m*$+E,t[5]=u*z+g*$+T,t},pn.fromRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=-n,t[3]=s,t[4]=0,t[5]=0,t},pn.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},pn.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},pn.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},pn.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},pn.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},pn.subtract=Fn,pn.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},pn.multiplyScalarAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t[4]=e[4]+n[4]*s,t[5]=e[5]+n[5]*s,t},pn.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},pn.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=t[4],E=t[5],T=e[0],z=e[1],$=e[2],W=e[3],Z=e[4],le=e[5];return Math.abs(n-T)<=On.EPSILON*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(s-z)<=On.EPSILON*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(u-$)<=On.EPSILON*Math.max(1,Math.abs(u),Math.abs($))&&Math.abs(m-W)<=On.EPSILON*Math.max(1,Math.abs(m),Math.abs(W))&&Math.abs(g-Z)<=On.EPSILON*Math.max(1,Math.abs(g),Math.abs(Z))&&Math.abs(E-le)<=On.EPSILON*Math.max(1,Math.abs(E),Math.abs(le))},pn.sub=pn.mul=void 0;var On=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Rt(t)&&"function"!=typeof t)return{default:t};var n=Cn(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function Cn(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(Cn=function(s){return s?n:e})(t)}function so(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=n[0],$=n[1],W=n[2],Z=n[3],le=n[4],de=n[5];return t[0]=s*z+m*$,t[1]=u*z+g*$,t[2]=s*W+m*Z,t[3]=u*W+g*Z,t[4]=s*le+m*de+E,t[5]=u*le+g*de+T,t}function Fn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}pn.mul=so,pn.sub=Fn;var Ke={};function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.create=function(){var t=new Ge.ARRAY_TYPE(9);return Ge.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ke.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},Ke.clone=function(t){var e=new Ge.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},Ke.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},Ke.fromValues=function(t,e,n,s,u,m,g,E,T){var z=new Ge.ARRAY_TYPE(9);return z[0]=t,z[1]=e,z[2]=n,z[3]=s,z[4]=u,z[5]=m,z[6]=g,z[7]=E,z[8]=T,z},Ke.set=function(t,e,n,s,u,m,g,E,T,z){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t[4]=m,t[5]=g,t[6]=E,t[7]=T,t[8]=z,t},Ke.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ke.transpose=function(t,e){if(t===e){var n=e[1],s=e[2],u=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=s,t[7]=u}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},Ke.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8],W=$*g-E*z,Z=-$*m+E*T,le=z*m-g*T,de=n*W+s*Z+u*le;return de?(t[0]=W*(de=1/de),t[1]=(-$*s+u*z)*de,t[2]=(E*s-u*g)*de,t[3]=Z*de,t[4]=($*n-u*T)*de,t[5]=(-E*n+u*m)*de,t[6]=le*de,t[7]=(-z*n+s*T)*de,t[8]=(g*n-s*m)*de,t):null},Ke.adjoint=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8];return t[0]=g*$-E*z,t[1]=u*z-s*$,t[2]=s*E-u*g,t[3]=E*T-m*$,t[4]=n*$-u*T,t[5]=u*m-n*E,t[6]=m*z-g*T,t[7]=s*T-n*z,t[8]=n*g-s*m,t},Ke.determinant=function(t){var e=t[3],n=t[4],s=t[5],u=t[6],m=t[7],g=t[8];return t[0]*(g*n-s*m)+t[1]*(-g*e+s*u)+t[2]*(m*e-n*u)},Ke.multiply=zt,Ke.translate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Z=n[0],le=n[1];return t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=E,t[5]=T,t[6]=Z*s+le*g+z,t[7]=Z*u+le*E+$,t[8]=Z*m+le*T+W,t},Ke.rotate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Z=Math.sin(n),le=Math.cos(n);return t[0]=le*s+Z*g,t[1]=le*u+Z*E,t[2]=le*m+Z*T,t[3]=le*g-Z*s,t[4]=le*E-Z*u,t[5]=le*T-Z*m,t[6]=z,t[7]=$,t[8]=W,t},Ke.scale=function(t,e,n){var s=n[0],u=n[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=u*e[3],t[4]=u*e[4],t[5]=u*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},Ke.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},Ke.fromRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=0,t[3]=-n,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ke.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ke.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},Ke.fromQuat=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n+n,E=s+s,T=u+u,z=n*g,$=s*g,W=s*E,Z=u*g,le=u*E,de=u*T,be=m*g,xe=m*E,$e=m*T;return t[0]=1-W-de,t[3]=$-$e,t[6]=Z+xe,t[1]=$+$e,t[4]=1-z-de,t[7]=le-be,t[2]=Z-xe,t[5]=le+be,t[8]=1-z-W,t},Ke.normalFromMat4=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8],W=e[9],Z=e[10],le=e[11],de=e[12],be=e[13],xe=e[14],$e=e[15],gt=n*E-s*g,yt=n*T-u*g,wt=n*z-m*g,nn=s*T-u*E,Qt=s*z-m*E,kn=u*z-m*T,Rn=$*be-W*de,li=$*xe-Z*de,Di=$*$e-le*de,xi=W*xe-Z*be,Ji=W*$e-le*be,So=Z*$e-le*xe,qi=gt*So-yt*Ji+wt*xi+nn*Di-Qt*li+kn*Rn;return qi?(t[0]=(E*So-T*Ji+z*xi)*(qi=1/qi),t[1]=(T*Di-g*So-z*li)*qi,t[2]=(g*Ji-E*Di+z*Rn)*qi,t[3]=(u*Ji-s*So-m*xi)*qi,t[4]=(n*So-u*Di+m*li)*qi,t[5]=(s*Di-n*Ji-m*Rn)*qi,t[6]=(be*kn-xe*Qt+$e*nn)*qi,t[7]=(xe*wt-de*kn-$e*yt)*qi,t[8]=(de*Qt-be*wt+$e*gt)*qi,t):null},Ke.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ke.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Ke.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Ke.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},Ke.subtract=Yn,Ke.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},Ke.multiplyScalarAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t[4]=e[4]+n[4]*s,t[5]=e[5]+n[5]*s,t[6]=e[6]+n[6]*s,t[7]=e[7]+n[7]*s,t[8]=e[8]+n[8]*s,t},Ke.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},Ke.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=t[4],E=t[5],T=t[6],z=t[7],$=t[8],W=e[0],Z=e[1],le=e[2],de=e[3],be=e[4],xe=e[5],$e=e[6],gt=e[7],yt=e[8];return Math.abs(n-W)<=Ge.EPSILON*Math.max(1,Math.abs(n),Math.abs(W))&&Math.abs(s-Z)<=Ge.EPSILON*Math.max(1,Math.abs(s),Math.abs(Z))&&Math.abs(u-le)<=Ge.EPSILON*Math.max(1,Math.abs(u),Math.abs(le))&&Math.abs(m-de)<=Ge.EPSILON*Math.max(1,Math.abs(m),Math.abs(de))&&Math.abs(g-be)<=Ge.EPSILON*Math.max(1,Math.abs(g),Math.abs(be))&&Math.abs(E-xe)<=Ge.EPSILON*Math.max(1,Math.abs(E),Math.abs(xe))&&Math.abs(T-$e)<=Ge.EPSILON*Math.max(1,Math.abs(T),Math.abs($e))&&Math.abs(z-gt)<=Ge.EPSILON*Math.max(1,Math.abs(z),Math.abs(gt))&&Math.abs($-yt)<=Ge.EPSILON*Math.max(1,Math.abs($),Math.abs(yt))},Ke.sub=Ke.mul=void 0;var Ge=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Ae(t)&&"function"!=typeof t)return{default:t};var n=tt(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function tt(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(tt=function(s){return s?n:e})(t)}function zt(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Z=n[0],le=n[1],de=n[2],be=n[3],xe=n[4],$e=n[5],gt=n[6],yt=n[7],wt=n[8];return t[0]=Z*s+le*g+de*z,t[1]=Z*u+le*E+de*$,t[2]=Z*m+le*T+de*W,t[3]=be*s+xe*g+$e*z,t[4]=be*u+xe*E+$e*$,t[5]=be*m+xe*T+$e*W,t[6]=gt*s+yt*g+wt*z,t[7]=gt*u+yt*E+wt*$,t[8]=gt*m+yt*T+wt*W,t}function Yn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Ke.mul=zt,Ke.sub=Yn;var cn={};function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(cn,"__esModule",{value:!0}),cn.create=function(){var t=new to.ARRAY_TYPE(16);return to.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},cn.clone=function(t){var e=new to.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},cn.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},cn.fromValues=function(t,e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be){var xe=new to.ARRAY_TYPE(16);return xe[0]=t,xe[1]=e,xe[2]=n,xe[3]=s,xe[4]=u,xe[5]=m,xe[6]=g,xe[7]=E,xe[8]=T,xe[9]=z,xe[10]=$,xe[11]=W,xe[12]=Z,xe[13]=le,xe[14]=de,xe[15]=be,xe},cn.set=function(t,e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t[4]=m,t[5]=g,t[6]=E,t[7]=T,t[8]=z,t[9]=$,t[10]=W,t[11]=Z,t[12]=le,t[13]=de,t[14]=be,t[15]=xe,t},cn.identity=jo,cn.transpose=function(t,e){if(t===e){var n=e[1],s=e[2],u=e[3],m=e[6],g=e[7],E=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=m,t[11]=e[14],t[12]=u,t[13]=g,t[14]=E}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},cn.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8],W=e[9],Z=e[10],le=e[11],de=e[12],be=e[13],xe=e[14],$e=e[15],gt=n*E-s*g,yt=n*T-u*g,wt=n*z-m*g,nn=s*T-u*E,Qt=s*z-m*E,kn=u*z-m*T,Rn=$*be-W*de,li=$*xe-Z*de,Di=$*$e-le*de,xi=W*xe-Z*be,Ji=W*$e-le*be,So=Z*$e-le*xe,qi=gt*So-yt*Ji+wt*xi+nn*Di-Qt*li+kn*Rn;return qi?(t[0]=(E*So-T*Ji+z*xi)*(qi=1/qi),t[1]=(u*Ji-s*So-m*xi)*qi,t[2]=(be*kn-xe*Qt+$e*nn)*qi,t[3]=(Z*Qt-W*kn-le*nn)*qi,t[4]=(T*Di-g*So-z*li)*qi,t[5]=(n*So-u*Di+m*li)*qi,t[6]=(xe*wt-de*kn-$e*yt)*qi,t[7]=($*kn-Z*wt+le*yt)*qi,t[8]=(g*Ji-E*Di+z*Rn)*qi,t[9]=(s*Di-n*Ji-m*Rn)*qi,t[10]=(de*Qt-be*wt+$e*gt)*qi,t[11]=(W*wt-$*Qt-le*gt)*qi,t[12]=(E*li-g*xi-T*Rn)*qi,t[13]=(n*xi-s*li+u*Rn)*qi,t[14]=(be*yt-de*nn-xe*gt)*qi,t[15]=($*nn-W*yt+Z*gt)*qi,t):null},cn.adjoint=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=e[4],E=e[5],T=e[6],z=e[7],$=e[8],W=e[9],Z=e[10],le=e[11],de=e[12],be=e[13],xe=e[14],$e=e[15];return t[0]=E*(Z*$e-le*xe)-W*(T*$e-z*xe)+be*(T*le-z*Z),t[1]=-(s*(Z*$e-le*xe)-W*(u*$e-m*xe)+be*(u*le-m*Z)),t[2]=s*(T*$e-z*xe)-E*(u*$e-m*xe)+be*(u*z-m*T),t[3]=-(s*(T*le-z*Z)-E*(u*le-m*Z)+W*(u*z-m*T)),t[4]=-(g*(Z*$e-le*xe)-$*(T*$e-z*xe)+de*(T*le-z*Z)),t[5]=n*(Z*$e-le*xe)-$*(u*$e-m*xe)+de*(u*le-m*Z),t[6]=-(n*(T*$e-z*xe)-g*(u*$e-m*xe)+de*(u*z-m*T)),t[7]=n*(T*le-z*Z)-g*(u*le-m*Z)+$*(u*z-m*T),t[8]=g*(W*$e-le*be)-$*(E*$e-z*be)+de*(E*le-z*W),t[9]=-(n*(W*$e-le*be)-$*(s*$e-m*be)+de*(s*le-m*W)),t[10]=n*(E*$e-z*be)-g*(s*$e-m*be)+de*(s*z-m*E),t[11]=-(n*(E*le-z*W)-g*(s*le-m*W)+$*(s*z-m*E)),t[12]=-(g*(W*xe-Z*be)-$*(E*xe-T*be)+de*(E*Z-T*W)),t[13]=n*(W*xe-Z*be)-$*(s*xe-u*be)+de*(s*Z-u*W),t[14]=-(n*(E*xe-T*be)-g*(s*xe-u*be)+de*(s*T-u*E)),t[15]=n*(E*Z-T*W)-g*(s*Z-u*W)+$*(s*T-u*E),t},cn.determinant=function(t){var e=t[0],n=t[1],s=t[2],u=t[3],m=t[4],g=t[5],E=t[6],T=t[7],z=t[8],$=t[9],W=t[10],Z=t[11],le=t[12],de=t[13],be=t[14],xe=t[15];return(e*g-n*m)*(W*xe-Z*be)-(e*E-s*m)*($*xe-Z*de)+(e*T-u*m)*($*be-W*de)+(n*E-s*g)*(z*xe-Z*le)-(n*T-u*g)*(z*be-W*le)+(s*T-u*E)*(z*de-$*le)},cn.multiply=zr,cn.translate=function(t,e,n){var s,u,m,g,E,T,z,$,W,Z,le,de,be=n[0],xe=n[1],$e=n[2];return e===t?(t[12]=e[0]*be+e[4]*xe+e[8]*$e+e[12],t[13]=e[1]*be+e[5]*xe+e[9]*$e+e[13],t[14]=e[2]*be+e[6]*xe+e[10]*$e+e[14],t[15]=e[3]*be+e[7]*xe+e[11]*$e+e[15]):(u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Z=e[9],le=e[10],de=e[11],t[0]=s=e[0],t[1]=u,t[2]=m,t[3]=g,t[4]=E,t[5]=T,t[6]=z,t[7]=$,t[8]=W,t[9]=Z,t[10]=le,t[11]=de,t[12]=s*be+E*xe+W*$e+e[12],t[13]=u*be+T*xe+Z*$e+e[13],t[14]=m*be+z*xe+le*$e+e[14],t[15]=g*be+$*xe+de*$e+e[15]),t},cn.scale=function(t,e,n){var s=n[0],u=n[1],m=n[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*u,t[5]=e[5]*u,t[6]=e[6]*u,t[7]=e[7]*u,t[8]=e[8]*m,t[9]=e[9]*m,t[10]=e[10]*m,t[11]=e[11]*m,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},cn.rotate=function(t,e,n,s){var u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e,gt,yt,wt,nn,Qt,kn,Rn,li,Di,xi,Ji=s[0],So=s[1],qi=s[2],wo=Math.hypot(Ji,So,qi);return wo<to.EPSILON?null:(Ji*=wo=1/wo,So*=wo,qi*=wo,u=Math.sin(n),m=Math.cos(n),T=e[1],z=e[2],$=e[3],Z=e[5],le=e[6],de=e[7],xe=e[9],$e=e[10],gt=e[11],yt=Ji*Ji*(g=1-m)+m,Qt=Ji*So*g-qi*u,kn=So*So*g+m,Rn=qi*So*g+Ji*u,li=Ji*qi*g+So*u,Di=So*qi*g-Ji*u,xi=qi*qi*g+m,t[0]=(E=e[0])*yt+(W=e[4])*(wt=So*Ji*g+qi*u)+(be=e[8])*(nn=qi*Ji*g-So*u),t[1]=T*yt+Z*wt+xe*nn,t[2]=z*yt+le*wt+$e*nn,t[3]=$*yt+de*wt+gt*nn,t[4]=E*Qt+W*kn+be*Rn,t[5]=T*Qt+Z*kn+xe*Rn,t[6]=z*Qt+le*kn+$e*Rn,t[7]=$*Qt+de*kn+gt*Rn,t[8]=E*li+W*Di+be*xi,t[9]=T*li+Z*Di+xe*xi,t[10]=z*li+le*Di+$e*xi,t[11]=$*li+de*Di+gt*xi,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},cn.rotateX=function(t,e,n){var s=Math.sin(n),u=Math.cos(n),m=e[4],g=e[5],E=e[6],T=e[7],z=e[8],$=e[9],W=e[10],Z=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=m*u+z*s,t[5]=g*u+$*s,t[6]=E*u+W*s,t[7]=T*u+Z*s,t[8]=z*u-m*s,t[9]=$*u-g*s,t[10]=W*u-E*s,t[11]=Z*u-T*s,t},cn.rotateY=function(t,e,n){var s=Math.sin(n),u=Math.cos(n),m=e[0],g=e[1],E=e[2],T=e[3],z=e[8],$=e[9],W=e[10],Z=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=m*u-z*s,t[1]=g*u-$*s,t[2]=E*u-W*s,t[3]=T*u-Z*s,t[8]=m*s+z*u,t[9]=g*s+$*u,t[10]=E*s+W*u,t[11]=T*s+Z*u,t},cn.rotateZ=function(t,e,n){var s=Math.sin(n),u=Math.cos(n),m=e[0],g=e[1],E=e[2],T=e[3],z=e[4],$=e[5],W=e[6],Z=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=m*u+z*s,t[1]=g*u+$*s,t[2]=E*u+W*s,t[3]=T*u+Z*s,t[4]=z*u-m*s,t[5]=$*u-g*s,t[6]=W*u-E*s,t[7]=Z*u-T*s,t},cn.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},cn.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},cn.fromRotation=function(t,e,n){var s,u,m,g=n[0],E=n[1],T=n[2],z=Math.hypot(g,E,T);return z<to.EPSILON?null:(g*=z=1/z,E*=z,T*=z,s=Math.sin(e),u=Math.cos(e),t[0]=g*g*(m=1-u)+u,t[1]=E*g*m+T*s,t[2]=T*g*m-E*s,t[3]=0,t[4]=g*E*m-T*s,t[5]=E*E*m+u,t[6]=T*E*m+g*s,t[7]=0,t[8]=g*T*m+E*s,t[9]=E*T*m-g*s,t[10]=T*T*m+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},cn.fromXRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},cn.fromYRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},cn.fromZRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},cn.fromRotationTranslation=Mi,cn.fromQuat2=function(t,e){var n=new to.ARRAY_TYPE(3),s=-e[0],u=-e[1],m=-e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=s*s+u*u+m*m+g*g;return W>0?(n[0]=2*(E*g+$*s+T*m-z*u)/W,n[1]=2*(T*g+$*u+z*s-E*m)/W,n[2]=2*(z*g+$*m+E*u-T*s)/W):(n[0]=2*(E*g+$*s+T*m-z*u),n[1]=2*(T*g+$*u+z*s-E*m),n[2]=2*(z*g+$*m+E*u-T*s)),Mi(t,e,n),t},cn.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},cn.getScaling=rs,cn.getRotation=function(t,e){var n=new to.ARRAY_TYPE(3);rs(n,e);var s=1/n[0],u=1/n[1],m=1/n[2],g=e[0]*s,E=e[1]*u,T=e[2]*m,z=e[4]*s,$=e[5]*u,W=e[6]*m,Z=e[8]*s,le=e[9]*u,de=e[10]*m,be=g+$+de,xe=0;return be>0?(xe=2*Math.sqrt(be+1),t[3]=.25*xe,t[0]=(W-le)/xe,t[1]=(Z-T)/xe,t[2]=(E-z)/xe):g>$&&g>de?(xe=2*Math.sqrt(1+g-$-de),t[3]=(W-le)/xe,t[0]=.25*xe,t[1]=(E+z)/xe,t[2]=(Z+T)/xe):$>de?(xe=2*Math.sqrt(1+$-g-de),t[3]=(Z-T)/xe,t[0]=(E+z)/xe,t[1]=.25*xe,t[2]=(W+le)/xe):(xe=2*Math.sqrt(1+de-g-$),t[3]=(E-z)/xe,t[0]=(Z+T)/xe,t[1]=(W+le)/xe,t[2]=.25*xe),t},cn.fromRotationTranslationScale=function(t,e,n,s){var u=e[0],m=e[1],g=e[2],E=e[3],T=u+u,z=m+m,$=g+g,W=u*T,Z=u*z,le=u*$,de=m*z,be=m*$,xe=g*$,$e=E*T,gt=E*z,yt=E*$,wt=s[0],nn=s[1],Qt=s[2];return t[0]=(1-(de+xe))*wt,t[1]=(Z+yt)*wt,t[2]=(le-gt)*wt,t[3]=0,t[4]=(Z-yt)*nn,t[5]=(1-(W+xe))*nn,t[6]=(be+$e)*nn,t[7]=0,t[8]=(le+gt)*Qt,t[9]=(be-$e)*Qt,t[10]=(1-(W+de))*Qt,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},cn.fromRotationTranslationScaleOrigin=function(t,e,n,s,u){var m=e[0],g=e[1],E=e[2],T=e[3],z=m+m,$=g+g,W=E+E,Z=m*z,le=m*$,de=m*W,be=g*$,xe=g*W,$e=E*W,gt=T*z,yt=T*$,wt=T*W,nn=s[0],Qt=s[1],kn=s[2],Rn=u[0],li=u[1],Di=u[2],xi=(1-(be+$e))*nn,Ji=(le+wt)*nn,So=(de-yt)*nn,qi=(le-wt)*Qt,wo=(1-(Z+$e))*Qt,zi=(xe+gt)*Qt,bo=(de+yt)*kn,Ro=(xe-gt)*kn,Co=(1-(Z+be))*kn;return t[0]=xi,t[1]=Ji,t[2]=So,t[3]=0,t[4]=qi,t[5]=wo,t[6]=zi,t[7]=0,t[8]=bo,t[9]=Ro,t[10]=Co,t[11]=0,t[12]=n[0]+Rn-(xi*Rn+qi*li+bo*Di),t[13]=n[1]+li-(Ji*Rn+wo*li+Ro*Di),t[14]=n[2]+Di-(So*Rn+zi*li+Co*Di),t[15]=1,t},cn.fromQuat=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n+n,E=s+s,T=u+u,z=n*g,$=s*g,W=s*E,Z=u*g,le=u*E,de=u*T,be=m*g,xe=m*E,$e=m*T;return t[0]=1-W-de,t[1]=$+$e,t[2]=Z-xe,t[3]=0,t[4]=$-$e,t[5]=1-z-de,t[6]=le+be,t[7]=0,t[8]=Z+xe,t[9]=le-be,t[10]=1-z-W,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},cn.frustum=function(t,e,n,s,u,m,g){var E=1/(n-e),T=1/(u-s),z=1/(m-g);return t[0]=2*m*E,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*m*T,t[6]=0,t[7]=0,t[8]=(n+e)*E,t[9]=(u+s)*T,t[10]=(g+m)*z,t[11]=-1,t[12]=0,t[13]=0,t[14]=g*m*2*z,t[15]=0,t},cn.perspectiveNO=$i,cn.perspectiveZO=function(t,e,n,s,u){var m,g=1/Math.tan(e/2);return t[0]=g/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=u&&u!==1/0?(t[10]=u*(m=1/(s-u)),t[14]=u*s*m):(t[10]=-1,t[14]=-s),t},cn.perspectiveFromFieldOfView=function(t,e,n,s){var u=Math.tan(e.upDegrees*Math.PI/180),m=Math.tan(e.downDegrees*Math.PI/180),g=Math.tan(e.leftDegrees*Math.PI/180),E=Math.tan(e.rightDegrees*Math.PI/180),T=2/(g+E),z=2/(u+m);return t[0]=T,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=z,t[6]=0,t[7]=0,t[8]=-(g-E)*T*.5,t[9]=(u-m)*z*.5,t[10]=s/(n-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*n/(n-s),t[15]=0,t},cn.orthoNO=br,cn.orthoZO=function(t,e,n,s,u,m,g){var E=1/(e-n),T=1/(s-u),z=1/(m-g);return t[0]=-2*E,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*T,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=z,t[11]=0,t[12]=(e+n)*E,t[13]=(u+s)*T,t[14]=m*z,t[15]=1,t},cn.lookAt=function(t,e,n,s){var u,m,g,E,T,z,$,W,Z,le,de=e[0],be=e[1],xe=e[2],$e=s[0],gt=s[1],yt=s[2],wt=n[0],nn=n[1],Qt=n[2];return Math.abs(de-wt)<to.EPSILON&&Math.abs(be-nn)<to.EPSILON&&Math.abs(xe-Qt)<to.EPSILON?jo(t):($=de-wt,W=be-nn,Z=xe-Qt,u=gt*(Z*=le=1/Math.hypot($,W,Z))-yt*(W*=le),m=yt*($*=le)-$e*Z,g=$e*W-gt*$,(le=Math.hypot(u,m,g))?(u*=le=1/le,m*=le,g*=le):(u=0,m=0,g=0),E=W*g-Z*m,T=Z*u-$*g,z=$*m-W*u,(le=Math.hypot(E,T,z))?(E*=le=1/le,T*=le,z*=le):(E=0,T=0,z=0),t[0]=u,t[1]=E,t[2]=$,t[3]=0,t[4]=m,t[5]=T,t[6]=W,t[7]=0,t[8]=g,t[9]=z,t[10]=Z,t[11]=0,t[12]=-(u*de+m*be+g*xe),t[13]=-(E*de+T*be+z*xe),t[14]=-($*de+W*be+Z*xe),t[15]=1,t)},cn.targetTo=function(t,e,n,s){var u=e[0],m=e[1],g=e[2],E=s[0],T=s[1],z=s[2],$=u-n[0],W=m-n[1],Z=g-n[2],le=$*$+W*W+Z*Z;le>0&&($*=le=1/Math.sqrt(le),W*=le,Z*=le);var de=T*Z-z*W,be=z*$-E*Z,xe=E*W-T*$;return(le=de*de+be*be+xe*xe)>0&&(de*=le=1/Math.sqrt(le),be*=le,xe*=le),t[0]=de,t[1]=be,t[2]=xe,t[3]=0,t[4]=W*xe-Z*be,t[5]=Z*de-$*xe,t[6]=$*be-W*de,t[7]=0,t[8]=$,t[9]=W,t[10]=Z,t[11]=0,t[12]=u,t[13]=m,t[14]=g,t[15]=1,t},cn.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},cn.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},cn.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},cn.subtract=Jr,cn.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},cn.multiplyScalarAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t[4]=e[4]+n[4]*s,t[5]=e[5]+n[5]*s,t[6]=e[6]+n[6]*s,t[7]=e[7]+n[7]*s,t[8]=e[8]+n[8]*s,t[9]=e[9]+n[9]*s,t[10]=e[10]+n[10]*s,t[11]=e[11]+n[11]*s,t[12]=e[12]+n[12]*s,t[13]=e[13]+n[13]*s,t[14]=e[14]+n[14]*s,t[15]=e[15]+n[15]*s,t},cn.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},cn.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=t[4],E=t[5],T=t[6],z=t[7],$=t[8],W=t[9],Z=t[10],le=t[11],de=t[12],be=t[13],xe=t[14],$e=t[15],gt=e[0],yt=e[1],wt=e[2],nn=e[3],Qt=e[4],kn=e[5],Rn=e[6],li=e[7],Di=e[8],xi=e[9],Ji=e[10],So=e[11],qi=e[12],wo=e[13],zi=e[14],bo=e[15];return Math.abs(n-gt)<=to.EPSILON*Math.max(1,Math.abs(n),Math.abs(gt))&&Math.abs(s-yt)<=to.EPSILON*Math.max(1,Math.abs(s),Math.abs(yt))&&Math.abs(u-wt)<=to.EPSILON*Math.max(1,Math.abs(u),Math.abs(wt))&&Math.abs(m-nn)<=to.EPSILON*Math.max(1,Math.abs(m),Math.abs(nn))&&Math.abs(g-Qt)<=to.EPSILON*Math.max(1,Math.abs(g),Math.abs(Qt))&&Math.abs(E-kn)<=to.EPSILON*Math.max(1,Math.abs(E),Math.abs(kn))&&Math.abs(T-Rn)<=to.EPSILON*Math.max(1,Math.abs(T),Math.abs(Rn))&&Math.abs(z-li)<=to.EPSILON*Math.max(1,Math.abs(z),Math.abs(li))&&Math.abs($-Di)<=to.EPSILON*Math.max(1,Math.abs($),Math.abs(Di))&&Math.abs(W-xi)<=to.EPSILON*Math.max(1,Math.abs(W),Math.abs(xi))&&Math.abs(Z-Ji)<=to.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Ji))&&Math.abs(le-So)<=to.EPSILON*Math.max(1,Math.abs(le),Math.abs(So))&&Math.abs(de-qi)<=to.EPSILON*Math.max(1,Math.abs(de),Math.abs(qi))&&Math.abs(be-wo)<=to.EPSILON*Math.max(1,Math.abs(be),Math.abs(wo))&&Math.abs(xe-zi)<=to.EPSILON*Math.max(1,Math.abs(xe),Math.abs(zi))&&Math.abs($e-bo)<=to.EPSILON*Math.max(1,Math.abs($e),Math.abs(bo))},cn.sub=cn.mul=cn.ortho=cn.perspective=void 0;var to=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==_o(t)&&"function"!=typeof t)return{default:t};var n=pr(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function pr(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(pr=function(s){return s?n:e})(t)}function jo(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zr(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=e[8],Z=e[9],le=e[10],de=e[11],be=e[12],xe=e[13],$e=e[14],gt=e[15],yt=n[0],wt=n[1],nn=n[2],Qt=n[3];return t[0]=yt*s+wt*E+nn*W+Qt*be,t[1]=yt*u+wt*T+nn*Z+Qt*xe,t[2]=yt*m+wt*z+nn*le+Qt*$e,t[3]=yt*g+wt*$+nn*de+Qt*gt,t[4]=(yt=n[4])*s+(wt=n[5])*E+(nn=n[6])*W+(Qt=n[7])*be,t[5]=yt*u+wt*T+nn*Z+Qt*xe,t[6]=yt*m+wt*z+nn*le+Qt*$e,t[7]=yt*g+wt*$+nn*de+Qt*gt,t[8]=(yt=n[8])*s+(wt=n[9])*E+(nn=n[10])*W+(Qt=n[11])*be,t[9]=yt*u+wt*T+nn*Z+Qt*xe,t[10]=yt*m+wt*z+nn*le+Qt*$e,t[11]=yt*g+wt*$+nn*de+Qt*gt,t[12]=(yt=n[12])*s+(wt=n[13])*E+(nn=n[14])*W+(Qt=n[15])*be,t[13]=yt*u+wt*T+nn*Z+Qt*xe,t[14]=yt*m+wt*z+nn*le+Qt*$e,t[15]=yt*g+wt*$+nn*de+Qt*gt,t}function Mi(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=s+s,T=u+u,z=m+m,$=s*E,W=s*T,Z=s*z,le=u*T,de=u*z,be=m*z,xe=g*E,$e=g*T,gt=g*z;return t[0]=1-(le+be),t[1]=W+gt,t[2]=Z-$e,t[3]=0,t[4]=W-gt,t[5]=1-($+be),t[6]=de+xe,t[7]=0,t[8]=Z+$e,t[9]=de-xe,t[10]=1-($+le),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function rs(t,e){var n=e[4],s=e[5],u=e[6],m=e[8],g=e[9],E=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(n,s,u),t[2]=Math.hypot(m,g,E),t}function $i(t,e,n,s,u){var m,g=1/Math.tan(e/2);return t[0]=g/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=u&&u!==1/0?(t[10]=(u+s)*(m=1/(s-u)),t[14]=2*u*s*m):(t[10]=-1,t[14]=-2*s),t}function br(t,e,n,s,u,m,g){var E=1/(e-n),T=1/(s-u),z=1/(m-g);return t[0]=-2*E,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*T,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*z,t[11]=0,t[12]=(e+n)*E,t[13]=(u+s)*T,t[14]=(g+m)*z,t[15]=1,t}function Jr(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}cn.perspective=$i,cn.ortho=br,cn.mul=zr,cn.sub=Jr;var Li={},yi={};function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(yi,"__esModule",{value:!0}),yi.create=mo,yi.clone=function(t){var e=new si.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},yi.length=eo,yi.fromValues=function(t,e,n){var s=new si.ARRAY_TYPE(3);return s[0]=t,s[1]=e,s[2]=n,s},yi.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},yi.set=function(t,e,n,s){return t[0]=e,t[1]=n,t[2]=s,t},yi.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},yi.subtract=es,yi.multiply=Jo,yi.divide=or,yi.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},yi.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},yi.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},yi.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},yi.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},yi.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},yi.scaleAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t},yi.distance=ti,yi.squaredDistance=cs,yi.squaredLength=Cs,yi.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},yi.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},yi.normalize=function(t,e){var n=e[0],s=e[1],u=e[2],m=n*n+s*s+u*u;return m>0&&(m=1/Math.sqrt(m)),t[0]=e[0]*m,t[1]=e[1]*m,t[2]=e[2]*m,t},yi.dot=Or,yi.cross=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=n[0],E=n[1],T=n[2];return t[0]=u*T-m*E,t[1]=m*g-s*T,t[2]=s*E-u*g,t},yi.lerp=function(t,e,n,s){var u=e[0],m=e[1],g=e[2];return t[0]=u+s*(n[0]-u),t[1]=m+s*(n[1]-m),t[2]=g+s*(n[2]-g),t},yi.hermite=function(t,e,n,s,u,m){var g=m*m,E=g*(2*m-3)+1,T=g*(m-2)+m,z=g*(m-1),$=g*(3-2*m);return t[0]=e[0]*E+n[0]*T+s[0]*z+u[0]*$,t[1]=e[1]*E+n[1]*T+s[1]*z+u[1]*$,t[2]=e[2]*E+n[2]*T+s[2]*z+u[2]*$,t},yi.bezier=function(t,e,n,s,u,m){var g=1-m,E=g*g,T=m*m,z=E*g,$=3*m*E,W=3*T*g,Z=T*m;return t[0]=e[0]*z+n[0]*$+s[0]*W+u[0]*Z,t[1]=e[1]*z+n[1]*$+s[1]*W+u[1]*Z,t[2]=e[2]*z+n[2]*$+s[2]*W+u[2]*Z,t},yi.random=function(t,e){e=e||1;var n=2*si.RANDOM()*Math.PI,s=2*si.RANDOM()-1,u=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(n)*u,t[1]=Math.sin(n)*u,t[2]=s*e,t},yi.transformMat4=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=n[3]*s+n[7]*u+n[11]*m+n[15];return t[0]=(n[0]*s+n[4]*u+n[8]*m+n[12])/(g=g||1),t[1]=(n[1]*s+n[5]*u+n[9]*m+n[13])/g,t[2]=(n[2]*s+n[6]*u+n[10]*m+n[14])/g,t},yi.transformMat3=function(t,e,n){var s=e[0],u=e[1],m=e[2];return t[0]=s*n[0]+u*n[3]+m*n[6],t[1]=s*n[1]+u*n[4]+m*n[7],t[2]=s*n[2]+u*n[5]+m*n[8],t},yi.transformQuat=function(t,e,n){var s=n[0],u=n[1],m=n[2],g=e[0],E=e[1],T=e[2],z=u*T-m*E,$=m*g-s*T,W=s*E-u*g,Z=u*W-m*$,le=m*z-s*W,de=s*$-u*z,be=2*n[3];return $*=be,W*=be,le*=2,de*=2,t[0]=g+(z*=be)+(Z*=2),t[1]=E+$+le,t[2]=T+W+de,t},yi.rotateX=function(t,e,n,s){var u=[],m=[];return u[0]=e[0]-n[0],u[1]=e[1]-n[1],u[2]=e[2]-n[2],m[0]=u[0],m[1]=u[1]*Math.cos(s)-u[2]*Math.sin(s),m[2]=u[1]*Math.sin(s)+u[2]*Math.cos(s),t[0]=m[0]+n[0],t[1]=m[1]+n[1],t[2]=m[2]+n[2],t},yi.rotateY=function(t,e,n,s){var u=[],m=[];return u[0]=e[0]-n[0],u[1]=e[1]-n[1],u[2]=e[2]-n[2],m[0]=u[2]*Math.sin(s)+u[0]*Math.cos(s),m[1]=u[1],m[2]=u[2]*Math.cos(s)-u[0]*Math.sin(s),t[0]=m[0]+n[0],t[1]=m[1]+n[1],t[2]=m[2]+n[2],t},yi.rotateZ=function(t,e,n,s){var u=[],m=[];return u[0]=e[0]-n[0],u[1]=e[1]-n[1],u[2]=e[2]-n[2],m[0]=u[0]*Math.cos(s)-u[1]*Math.sin(s),m[1]=u[0]*Math.sin(s)+u[1]*Math.cos(s),m[2]=u[2],t[0]=m[0]+n[0],t[1]=m[1]+n[1],t[2]=m[2]+n[2],t},yi.angle=function(t,e){var n=t[0],s=t[1],u=t[2],m=e[0],g=e[1],E=e[2],T=Math.sqrt(n*n+s*s+u*u)*Math.sqrt(m*m+g*g+E*E),z=T&&Or(t,e)/T;return Math.acos(Math.min(Math.max(z,-1),1))},yi.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},yi.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},yi.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},yi.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=e[0],g=e[1],E=e[2];return Math.abs(n-m)<=si.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-g)<=si.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-E)<=si.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))},yi.forEach=yi.sqrLen=yi.len=yi.sqrDist=yi.dist=yi.div=yi.mul=yi.sub=void 0;var si=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==ao(t)&&"function"!=typeof t)return{default:t};var n=Fi(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function Fi(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(Fi=function(s){return s?n:e})(t)}function mo(){var t=new si.ARRAY_TYPE(3);return si.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function eo(t){return Math.hypot(t[0],t[1],t[2])}function es(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Jo(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function or(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function ti(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])}function cs(t,e){var n=e[0]-t[0],s=e[1]-t[1],u=e[2]-t[2];return n*n+s*s+u*u}function Cs(t){var e=t[0],n=t[1],s=t[2];return e*e+n*n+s*s}function Or(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}yi.sub=es,yi.mul=Jo,yi.div=or,yi.dist=ti,yi.sqrDist=cs,yi.len=eo,yi.sqrLen=Cs;var Kr,Qr=(Kr=mo(),function(t,e,n,s,u,m){var g,E;for(e||(e=3),n||(n=0),E=s?Math.min(s*e+n,t.length):t.length,g=n;g<E;g+=e)Kr[0]=t[g],Kr[1]=t[g+1],Kr[2]=t[g+2],u(Kr,Kr,m),t[g]=Kr[0],t[g+1]=Kr[1],t[g+2]=Kr[2];return t});yi.forEach=Qr;var Ho={};function Nr(t){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.create=Dr,Ho.clone=function(t){var e=new ir.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Ho.fromValues=function(t,e,n,s){var u=new ir.ARRAY_TYPE(4);return u[0]=t,u[1]=e,u[2]=n,u[3]=s,u},Ho.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Ho.set=function(t,e,n,s,u){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t},Ho.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Ho.subtract=Gs,Ho.multiply=ni,Ho.divide=as,Ho.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},Ho.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},Ho.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},Ho.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},Ho.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},Ho.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Ho.scaleAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t},Ho.distance=Lr,Ho.squaredDistance=Xs,Ho.length=vs,Ho.squaredLength=Hr,Ho.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},Ho.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},Ho.normalize=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n*n+s*s+u*u+m*m;return g>0&&(g=1/Math.sqrt(g)),t[0]=n*g,t[1]=s*g,t[2]=u*g,t[3]=m*g,t},Ho.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},Ho.cross=function(t,e,n,s){var u=n[0]*s[1]-n[1]*s[0],m=n[0]*s[2]-n[2]*s[0],g=n[0]*s[3]-n[3]*s[0],E=n[1]*s[2]-n[2]*s[1],T=n[1]*s[3]-n[3]*s[1],z=n[2]*s[3]-n[3]*s[2],$=e[0],W=e[1],Z=e[2],le=e[3];return t[0]=W*z-Z*T+le*E,t[1]=-$*z+Z*g-le*m,t[2]=$*T-W*g+le*u,t[3]=-$*E+W*m-Z*u,t},Ho.lerp=function(t,e,n,s){var u=e[0],m=e[1],g=e[2],E=e[3];return t[0]=u+s*(n[0]-u),t[1]=m+s*(n[1]-m),t[2]=g+s*(n[2]-g),t[3]=E+s*(n[3]-E),t},Ho.random=function(t,e){var n,s,u,m,g,E;e=e||1;do{g=(n=2*ir.RANDOM()-1)*n+(s=2*ir.RANDOM()-1)*s}while(g>=1);do{E=(u=2*ir.RANDOM()-1)*u+(m=2*ir.RANDOM()-1)*m}while(E>=1);var T=Math.sqrt((1-g)/E);return t[0]=e*n,t[1]=e*s,t[2]=e*u*T,t[3]=e*m*T,t},Ho.transformMat4=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3];return t[0]=n[0]*s+n[4]*u+n[8]*m+n[12]*g,t[1]=n[1]*s+n[5]*u+n[9]*m+n[13]*g,t[2]=n[2]*s+n[6]*u+n[10]*m+n[14]*g,t[3]=n[3]*s+n[7]*u+n[11]*m+n[15]*g,t},Ho.transformQuat=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=n[0],E=n[1],T=n[2],z=n[3],$=z*s+E*m-T*u,W=z*u+T*s-g*m,Z=z*m+g*u-E*s,le=-g*s-E*u-T*m;return t[0]=$*z+le*-g+W*-T-Z*-E,t[1]=W*z+le*-E+Z*-g-$*-T,t[2]=Z*z+le*-T+$*-E-W*-g,t[3]=e[3],t},Ho.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Ho.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ho.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},Ho.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=e[0],E=e[1],T=e[2],z=e[3];return Math.abs(n-g)<=ir.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(s-E)<=ir.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-T)<=ir.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(m-z)<=ir.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))},Ho.forEach=Ho.sqrLen=Ho.len=Ho.sqrDist=Ho.dist=Ho.div=Ho.mul=Ho.sub=void 0;var ir=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Nr(t)&&"function"!=typeof t)return{default:t};var n=_r(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function _r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(_r=function(s){return s?n:e})(t)}function Dr(){var t=new ir.ARRAY_TYPE(4);return ir.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Gs(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function ni(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function as(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Lr(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])}function Xs(t,e){var n=e[0]-t[0],s=e[1]-t[1],u=e[2]-t[2],m=e[3]-t[3];return n*n+s*s+u*u+m*m}function vs(t){return Math.hypot(t[0],t[1],t[2],t[3])}function Hr(t){var e=t[0],n=t[1],s=t[2],u=t[3];return e*e+n*n+s*s+u*u}Ho.sub=Gs,Ho.mul=ni,Ho.div=as,Ho.dist=Lr,Ho.sqrDist=Xs,Ho.len=vs,Ho.sqrLen=Hr;var t,Wi=(t=Dr(),function(e,n,s,u,m,g){var E,T;for(n||(n=4),s||(s=0),T=u?Math.min(u*n+s,e.length):e.length,E=s;E<T;E+=n)t[0]=e[E],t[1]=e[E+1],t[2]=e[E+2],t[3]=e[E+3],m(t,t,g),e[E]=t[0],e[E+1]=t[1],e[E+2]=t[2],e[E+3]=t[3];return e});function ei(t){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Ho.forEach=Wi,Object.defineProperty(Li,"__esModule",{value:!0}),Li.create=Jt,Li.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Li.setAxisAngle=Bn,Li.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),s=Math.sin(n/2);return s>Pi.EPSILON?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),n},Li.getAngle=function(t,e){var n=it(t,e);return Math.acos(2*n*n-1)},Li.multiply=Lt,Li.rotateX=function(t,e,n){n*=.5;var s=e[0],u=e[1],m=e[2],g=e[3],E=Math.sin(n),T=Math.cos(n);return t[0]=s*T+g*E,t[1]=u*T+m*E,t[2]=m*T-u*E,t[3]=g*T-s*E,t},Li.rotateY=function(t,e,n){n*=.5;var s=e[0],u=e[1],m=e[2],g=e[3],E=Math.sin(n),T=Math.cos(n);return t[0]=s*T-m*E,t[1]=u*T+g*E,t[2]=m*T+s*E,t[3]=g*T-u*E,t},Li.rotateZ=function(t,e,n){n*=.5;var s=e[0],u=e[1],m=e[2],g=e[3],E=Math.sin(n),T=Math.cos(n);return t[0]=s*T+u*E,t[1]=u*T-s*E,t[2]=m*T+g*E,t[3]=g*T-m*E,t},Li.calculateW=function(t,e){var n=e[0],s=e[1],u=e[2];return t[0]=n,t[1]=s,t[2]=u,t[3]=Math.sqrt(Math.abs(1-n*n-s*s-u*u)),t},Li.exp=Ie,Li.ln=ue,Li.pow=function(t,e,n){return ue(t,e),Ue(t,t,n),Ie(t,t),t},Li.slerp=ae,Li.random=function(t){var e=Pi.RANDOM(),n=Pi.RANDOM(),s=Pi.RANDOM(),u=Math.sqrt(1-e),m=Math.sqrt(e);return t[0]=u*Math.sin(2*Math.PI*n),t[1]=u*Math.cos(2*Math.PI*n),t[2]=m*Math.sin(2*Math.PI*s),t[3]=m*Math.cos(2*Math.PI*s),t},Li.invert=function(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=n*n+s*s+u*u+m*m,E=g?1/g:0;return t[0]=-n*E,t[1]=-s*E,t[2]=-u*E,t[3]=m*E,t},Li.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},Li.fromMat3=we,Li.fromEuler=function(t,e,n,s){var u=.5*Math.PI/180;e*=u,n*=u,s*=u;var m=Math.sin(e),g=Math.cos(e),E=Math.sin(n),T=Math.cos(n),z=Math.sin(s),$=Math.cos(s);return t[0]=m*T*$-g*E*z,t[1]=g*E*$+m*T*z,t[2]=g*T*z-m*E*$,t[3]=g*T*$+m*E*z,t},Li.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Li.setAxes=Li.sqlerp=Li.rotationTo=Li.equals=Li.exactEquals=Li.normalize=Li.sqrLen=Li.squaredLength=Li.len=Li.length=Li.lerp=Li.dot=Li.scale=Li.mul=Li.add=Li.set=Li.copy=Li.fromValues=Li.clone=void 0;var Pi=Mt(ht),Xn=Mt(Ke),kt=Mt(yi),mt=Mt(Ho);function Ye(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(Ye=function(s){return s?n:e})(t)}function Mt(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==ei(t)&&"function"!=typeof t)return{default:t};var n=Ye(e);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}function Jt(){var t=new Pi.ARRAY_TYPE(4);return Pi.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Bn(t,e,n){n*=.5;var s=Math.sin(n);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(n),t}function Lt(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=n[0],T=n[1],z=n[2],$=n[3];return t[0]=s*$+g*E+u*z-m*T,t[1]=u*$+g*T+m*E-s*z,t[2]=m*$+g*z+s*T-u*E,t[3]=g*$-s*E-u*T-m*z,t}function Ie(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=Math.sqrt(n*n+s*s+u*u),E=Math.exp(m),T=g>0?E*Math.sin(g)/g:0;return t[0]=n*T,t[1]=s*T,t[2]=u*T,t[3]=E*Math.cos(g),t}function ue(t,e){var n=e[0],s=e[1],u=e[2],m=e[3],g=Math.sqrt(n*n+s*s+u*u),E=g>0?Math.atan2(g,m)/g:0;return t[0]=n*E,t[1]=s*E,t[2]=u*E,t[3]=.5*Math.log(n*n+s*s+u*u+m*m),t}function ae(t,e,n,s){var u,m,g,E,T,z=e[0],$=e[1],W=e[2],Z=e[3],le=n[0],de=n[1],be=n[2],xe=n[3];return(m=z*le+$*de+W*be+Z*xe)<0&&(m=-m,le=-le,de=-de,be=-be,xe=-xe),1-m>Pi.EPSILON?(u=Math.acos(m),g=Math.sin(u),E=Math.sin((1-s)*u)/g,T=Math.sin(s*u)/g):(E=1-s,T=s),t[0]=E*z+T*le,t[1]=E*$+T*de,t[2]=E*W+T*be,t[3]=E*Z+T*xe,t}function we(t,e){var n,s=e[0]+e[4]+e[8];if(s>0)n=Math.sqrt(s+1),t[3]=.5*n,t[0]=(e[5]-e[7])*(n=.5/n),t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var u=0;e[4]>e[0]&&(u=1),e[8]>e[3*u+u]&&(u=2);var m=(u+1)%3,g=(u+2)%3;n=Math.sqrt(e[3*u+u]-e[3*m+m]-e[3*g+g]+1),t[u]=.5*n,t[3]=(e[3*m+g]-e[3*g+m])*(n=.5/n),t[m]=(e[3*m+u]+e[3*u+m])*n,t[g]=(e[3*g+u]+e[3*u+g])*n}return t}Li.clone=mt.clone,Li.fromValues=mt.fromValues,Li.copy=mt.copy,Li.set=mt.set,Li.add=mt.add,Li.mul=Lt;var Ue=mt.scale;Li.scale=Ue;var it=mt.dot;Li.dot=it,Li.lerp=mt.lerp;var qt=mt.length;Li.length=qt,Li.len=qt;var En=mt.squaredLength;Li.squaredLength=En,Li.sqrLen=En;var dn=mt.normalize;Li.normalize=dn,Li.exactEquals=mt.exactEquals,Li.equals=mt.equals;var Gn,Bi,Vi,Bo=(Gn=kt.create(),Bi=kt.fromValues(1,0,0),Vi=kt.fromValues(0,1,0),function(t,e,n){var s=kt.dot(e,n);return s<-.999999?(kt.cross(Gn,Bi,e),kt.len(Gn)<1e-6&&kt.cross(Gn,Vi,e),kt.normalize(Gn,Gn),Bn(t,Gn,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(kt.cross(Gn,e,n),t[0]=Gn[0],t[1]=Gn[1],t[2]=Gn[2],t[3]=1+s,dn(t,t))});Li.rotationTo=Bo;var rr,oi,Vn=(rr=Jt(),oi=Jt(),function(t,e,n,s,u,m){return ae(rr,e,u,m),ae(oi,n,s,m),ae(t,rr,oi,2*m*(1-m)),t});Li.sqlerp=Vn;var hi,po=(hi=Xn.create(),function(t,e,n,s){return hi[0]=n[0],hi[3]=n[1],hi[6]=n[2],hi[1]=s[0],hi[4]=s[1],hi[7]=s[2],hi[2]=-e[0],hi[5]=-e[1],hi[8]=-e[2],dn(t,we(t,hi))});Li.setAxes=po;var Zi={};function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.create=function(){var t=new ri.ARRAY_TYPE(8);return ri.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Zi.clone=function(t){var e=new ri.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},Zi.fromValues=function(t,e,n,s,u,m,g,E){var T=new ri.ARRAY_TYPE(8);return T[0]=t,T[1]=e,T[2]=n,T[3]=s,T[4]=u,T[5]=m,T[6]=g,T[7]=E,T},Zi.fromRotationTranslationValues=function(t,e,n,s,u,m,g){var E=new ri.ARRAY_TYPE(8);E[0]=t,E[1]=e,E[2]=n,E[3]=s;var T=.5*u,z=.5*m,$=.5*g;return E[4]=T*s+z*n-$*e,E[5]=z*s+$*t-T*n,E[6]=$*s+T*e-z*t,E[7]=-T*t-z*e-$*n,E},Zi.fromRotationTranslation=Vr,Zi.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},Zi.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Zi.fromMat4=function(t,e){var n=Ri.create();Uo.getRotation(n,e);var s=new ri.ARRAY_TYPE(3);return Uo.getTranslation(s,e),Vr(t,n,s),t},Zi.copy=Na,Zi.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Zi.set=function(t,e,n,s,u,m,g,E,T){return t[0]=e,t[1]=n,t[2]=s,t[3]=u,t[4]=m,t[5]=g,t[6]=E,t[7]=T,t},Zi.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},Zi.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},Zi.getTranslation=function(t,e){var n=e[4],s=e[5],u=e[6],m=e[7],g=-e[0],E=-e[1],T=-e[2],z=e[3];return t[0]=2*(n*z+m*g+s*T-u*E),t[1]=2*(s*z+m*E+u*g-n*T),t[2]=2*(u*z+m*T+n*E-s*g),t},Zi.translate=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=.5*n[0],T=.5*n[1],z=.5*n[2],$=e[4],W=e[5],Z=e[6],le=e[7];return t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=g*E+u*z-m*T+$,t[5]=g*T+m*E-s*z+W,t[6]=g*z+s*T-u*E+Z,t[7]=-s*E-u*T-m*z+le,t},Zi.rotateX=function(t,e,n){var s=-e[0],u=-e[1],m=-e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=E*g+$*s+T*m-z*u,Z=T*g+$*u+z*s-E*m,le=z*g+$*m+E*u-T*s,de=$*g-E*s-T*u-z*m;return Ri.rotateX(t,e,n),t[4]=W*(g=t[3])+de*(s=t[0])+Z*(m=t[2])-le*(u=t[1]),t[5]=Z*g+de*u+le*s-W*m,t[6]=le*g+de*m+W*u-Z*s,t[7]=de*g-W*s-Z*u-le*m,t},Zi.rotateY=function(t,e,n){var s=-e[0],u=-e[1],m=-e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=E*g+$*s+T*m-z*u,Z=T*g+$*u+z*s-E*m,le=z*g+$*m+E*u-T*s,de=$*g-E*s-T*u-z*m;return Ri.rotateY(t,e,n),t[4]=W*(g=t[3])+de*(s=t[0])+Z*(m=t[2])-le*(u=t[1]),t[5]=Z*g+de*u+le*s-W*m,t[6]=le*g+de*m+W*u-Z*s,t[7]=de*g-W*s-Z*u-le*m,t},Zi.rotateZ=function(t,e,n){var s=-e[0],u=-e[1],m=-e[2],g=e[3],E=e[4],T=e[5],z=e[6],$=e[7],W=E*g+$*s+T*m-z*u,Z=T*g+$*u+z*s-E*m,le=z*g+$*m+E*u-T*s,de=$*g-E*s-T*u-z*m;return Ri.rotateZ(t,e,n),t[4]=W*(g=t[3])+de*(s=t[0])+Z*(m=t[2])-le*(u=t[1]),t[5]=Z*g+de*u+le*s-W*m,t[6]=le*g+de*m+W*u-Z*s,t[7]=de*g-W*s-Z*u-le*m,t},Zi.rotateByQuatAppend=function(t,e,n){var s=n[0],u=n[1],m=n[2],g=n[3],E=e[0],T=e[1],z=e[2],$=e[3];return t[0]=E*g+$*s+T*m-z*u,t[1]=T*g+$*u+z*s-E*m,t[2]=z*g+$*m+E*u-T*s,t[3]=$*g-E*s-T*u-z*m,t[4]=(E=e[4])*g+($=e[7])*s+(T=e[5])*m-(z=e[6])*u,t[5]=T*g+$*u+z*s-E*m,t[6]=z*g+$*m+E*u-T*s,t[7]=$*g-E*s-T*u-z*m,t},Zi.rotateByQuatPrepend=function(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=n[0],T=n[1],z=n[2],$=n[3];return t[0]=s*$+g*E+u*z-m*T,t[1]=u*$+g*T+m*E-s*z,t[2]=m*$+g*z+s*T-u*E,t[3]=g*$-s*E-u*T-m*z,t[4]=s*($=n[7])+g*(E=n[4])+u*(z=n[6])-m*(T=n[5]),t[5]=u*$+g*T+m*E-s*z,t[6]=m*$+g*z+s*T-u*E,t[7]=g*$-s*E-u*T-m*z,t},Zi.rotateAroundAxis=function(t,e,n,s){if(Math.abs(s)<ri.EPSILON)return Na(t,e);var u=Math.hypot(n[0],n[1],n[2]);s*=.5;var m=Math.sin(s),g=m*n[0]/u,E=m*n[1]/u,T=m*n[2]/u,z=Math.cos(s),$=e[0],W=e[1],Z=e[2],le=e[3];t[0]=$*z+le*g+W*T-Z*E,t[1]=W*z+le*E+Z*g-$*T,t[2]=Z*z+le*T+$*E-W*g,t[3]=le*z-$*g-W*E-Z*T;var de=e[4],be=e[5],xe=e[6],$e=e[7];return t[4]=de*z+$e*g+be*T-xe*E,t[5]=be*z+$e*E+xe*g-de*T,t[6]=xe*z+$e*T+de*E-be*g,t[7]=$e*z-de*g-be*E-xe*T,t},Zi.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},Zi.multiply=Rl,Zi.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},Zi.lerp=function(t,e,n,s){var u=1-s;return Du(e,n)<0&&(s=-s),t[0]=e[0]*u+n[0]*s,t[1]=e[1]*u+n[1]*s,t[2]=e[2]*u+n[2]*s,t[3]=e[3]*u+n[3]*s,t[4]=e[4]*u+n[4]*s,t[5]=e[5]*u+n[5]*s,t[6]=e[6]*u+n[6]*s,t[7]=e[7]*u+n[7]*s,t},Zi.invert=function(t,e){var n=Ar(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},Zi.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},Zi.normalize=function(t,e){var n=Ar(e);if(n>0){n=Math.sqrt(n);var s=e[0]/n,u=e[1]/n,m=e[2]/n,g=e[3]/n,E=e[4],T=e[5],z=e[6],$=e[7],W=s*E+u*T+m*z+g*$;t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=(E-s*W)/n,t[5]=(T-u*W)/n,t[6]=(z-m*W)/n,t[7]=($-g*W)/n}return t},Zi.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Zi.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},Zi.equals=function(t,e){var n=t[0],s=t[1],u=t[2],m=t[3],g=t[4],E=t[5],T=t[6],z=t[7],$=e[0],W=e[1],Z=e[2],le=e[3],de=e[4],be=e[5],xe=e[6],$e=e[7];return Math.abs(n-$)<=ri.EPSILON*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(s-W)<=ri.EPSILON*Math.max(1,Math.abs(s),Math.abs(W))&&Math.abs(u-Z)<=ri.EPSILON*Math.max(1,Math.abs(u),Math.abs(Z))&&Math.abs(m-le)<=ri.EPSILON*Math.max(1,Math.abs(m),Math.abs(le))&&Math.abs(g-de)<=ri.EPSILON*Math.max(1,Math.abs(g),Math.abs(de))&&Math.abs(E-be)<=ri.EPSILON*Math.max(1,Math.abs(E),Math.abs(be))&&Math.abs(T-xe)<=ri.EPSILON*Math.max(1,Math.abs(T),Math.abs(xe))&&Math.abs(z-$e)<=ri.EPSILON*Math.max(1,Math.abs(z),Math.abs($e))},Zi.sqrLen=Zi.squaredLength=Zi.len=Zi.length=Zi.dot=Zi.mul=Zi.setReal=Zi.getReal=void 0;var ri=ss(ht),Ri=ss(Li),Uo=ss(cn);function mr(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(mr=function(s){return s?n:e})(t)}function ss(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Yt(t)&&"function"!=typeof t)return{default:t};var n=mr(e);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}function Vr(t,e,n){var s=.5*n[0],u=.5*n[1],m=.5*n[2],g=e[0],E=e[1],T=e[2],z=e[3];return t[0]=g,t[1]=E,t[2]=T,t[3]=z,t[4]=s*z+u*T-m*E,t[5]=u*z+m*g-s*T,t[6]=m*z+s*E-u*g,t[7]=-s*g-u*E-m*T,t}function Na(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Rl(t,e,n){var s=e[0],u=e[1],m=e[2],g=e[3],E=n[4],T=n[5],z=n[6],$=n[7],W=e[4],Z=e[5],le=e[6],de=e[7],be=n[0],xe=n[1],$e=n[2],gt=n[3];return t[0]=s*gt+g*be+u*$e-m*xe,t[1]=u*gt+g*xe+m*be-s*$e,t[2]=m*gt+g*$e+s*xe-u*be,t[3]=g*gt-s*be-u*xe-m*$e,t[4]=s*$+g*E+u*z-m*T+W*gt+de*be+Z*$e-le*xe,t[5]=u*$+g*T+m*E-s*z+Z*gt+de*xe+le*be-W*$e,t[6]=m*$+g*z+s*T-u*E+le*gt+de*$e+W*xe-Z*be,t[7]=g*$-s*E-u*T-m*z+de*gt-W*be-Z*xe-le*$e,t}Zi.getReal=Ri.copy,Zi.setReal=Ri.copy,Zi.mul=Rl;var Du=Ri.dot;Zi.dot=Du;var Ra=Ri.length;Zi.length=Ra,Zi.len=Ra;var Ar=Ri.squaredLength;Zi.squaredLength=Ar,Zi.sqrLen=Ar;var Hi={};function Zo(t){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.create=Vs,Hi.clone=function(t){var e=new Tr.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},Hi.fromValues=function(t,e){var n=new Tr.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},Hi.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},Hi.set=function(t,e,n){return t[0]=e,t[1]=n,t},Hi.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},Hi.subtract=Ys,Hi.multiply=sa,Hi.divide=va,Hi.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},Hi.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},Hi.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},Hi.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},Hi.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},Hi.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},Hi.scaleAndAdd=function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t},Hi.distance=ol,Hi.squaredDistance=Fa,Hi.length=ru,Hi.squaredLength=_u,Hi.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},Hi.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},Hi.normalize=function(t,e){var n=e[0],s=e[1],u=n*n+s*s;return u>0&&(u=1/Math.sqrt(u)),t[0]=e[0]*u,t[1]=e[1]*u,t},Hi.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},Hi.cross=function(t,e,n){var s=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=s,t},Hi.lerp=function(t,e,n,s){var u=e[0],m=e[1];return t[0]=u+s*(n[0]-u),t[1]=m+s*(n[1]-m),t},Hi.random=function(t,e){e=e||1;var n=2*Tr.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},Hi.transformMat2=function(t,e,n){var s=e[0],u=e[1];return t[0]=n[0]*s+n[2]*u,t[1]=n[1]*s+n[3]*u,t},Hi.transformMat2d=function(t,e,n){var s=e[0],u=e[1];return t[0]=n[0]*s+n[2]*u+n[4],t[1]=n[1]*s+n[3]*u+n[5],t},Hi.transformMat3=function(t,e,n){var s=e[0],u=e[1];return t[0]=n[0]*s+n[3]*u+n[6],t[1]=n[1]*s+n[4]*u+n[7],t},Hi.transformMat4=function(t,e,n){var s=e[0],u=e[1];return t[0]=n[0]*s+n[4]*u+n[12],t[1]=n[1]*s+n[5]*u+n[13],t},Hi.rotate=function(t,e,n,s){var u=e[0]-n[0],m=e[1]-n[1],g=Math.sin(s),E=Math.cos(s);return t[0]=u*E-m*g+n[0],t[1]=u*g+m*E+n[1],t},Hi.angle=function(t,e){var n=t[0],s=t[1],u=e[0],m=e[1],g=Math.sqrt(n*n+s*s)*Math.sqrt(u*u+m*m);return Math.acos(Math.min(Math.max(g&&(n*u+s*m)/g,-1),1))},Hi.zero=function(t){return t[0]=0,t[1]=0,t},Hi.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},Hi.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Hi.equals=function(t,e){var n=t[0],s=t[1],u=e[0],m=e[1];return Math.abs(n-u)<=Tr.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(s-m)<=Tr.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))},Hi.forEach=Hi.sqrLen=Hi.sqrDist=Hi.dist=Hi.div=Hi.mul=Hi.sub=Hi.len=void 0;var Tr=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Zo(t)&&"function"!=typeof t)return{default:t};var n=ds(void 0);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}(ht);function ds(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(ds=function(s){return s?n:e})(t)}function Vs(){var t=new Tr.ARRAY_TYPE(2);return Tr.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function Ys(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function sa(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function va(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function ol(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}function Fa(t,e){var n=e[0]-t[0],s=e[1]-t[1];return n*n+s*s}function ru(t){return Math.hypot(t[0],t[1])}function _u(t){var e=t[0],n=t[1];return e*e+n*n}Hi.len=ru,Hi.sub=Ys,Hi.mul=sa,Hi.div=va,Hi.dist=ol,Hi.sqrDist=Fa,Hi.sqrLen=_u;var Ia=function(){var t=Vs();return function(e,n,s,u,m,g){var E,T;for(n||(n=2),s||(s=0),T=u?Math.min(u*n+s,e.length):e.length,E=s;E<T;E+=n)t[0]=e[E],t[1]=e[E+1],m(t,t,g),e[E]=t[0],e[E+1]=t[1];return e}}();function su(t){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Hi.forEach=Ia,Object.defineProperty(on,"__esModule",{value:!0}),l.aA=on.vec4=l._=on.vec3=on.vec2=on.quat2=l.av=on.quat=l.ad=on.mat4=l.bC=on.mat3=on.mat2d=l.aC=on.mat2=on.glMatrix=void 0;var dl=Ea(ht);on.glMatrix=dl;var Pa=Ea(Ot);l.aC=on.mat2=Pa;var Uc=Ea(pn);on.mat2d=Uc;var Hu=Ea(Ke);l.bC=on.mat3=Hu;var Gu=Ea(cn);l.ad=on.mat4=Gu;var zl=Ea(Li);l.av=on.quat=zl;var ks=Ea(Zi);on.quat2=ks;var ld=Ea(Hi);on.vec2=ld;var fc=Ea(yi);l._=on.vec3=fc;var au=Ea(Ho);function mc(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(mc=function(s){return s?n:e})(t)}function Ea(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==su(t)&&"function"!=typeof t)return{default:t};var n=mc(e);if(n&&n.has(t))return n.get(t);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in t)if("default"!==m&&Object.prototype.hasOwnProperty.call(t,m)){var g=u?Object.getOwnPropertyDescriptor(t,m):null;g&&(g.get||g.set)?Object.defineProperty(s,m,g):s[m]=t[m]}return s.default=t,n&&n.set(t,s),s}l.aA=on.vec4=au;var gc=Ul;function Ul(t,e,n,s){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(s-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=s}Ul.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,s=0;s<8;s++){var u=this.sampleCurveX(n)-t;if(Math.abs(u)<e)return n;var m=this.sampleCurveDerivativeX(n);if(Math.abs(m)<1e-6)break;n-=u/m}var g=0,E=1;for(n=t,s=0;s<20&&(u=this.sampleCurveX(n),!(Math.abs(u-t)<e));s++)t>u?g=n:E=n,n=.5*(E-g)+g;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var yu=xn(gc),kc=lu;function lu(t,e){this.x=t,this.y=e}lu.prototype={clone:function(){return new lu(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),s=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=s,this},_rotateAround:function(t,e){var n=Math.cos(t),s=Math.sin(t),u=e.y+s*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-s*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},lu.convert=function(t){return t instanceof lu?t:Array.isArray(t)?new lu(t[0],t[1]):t};var Eo=xn(kc);const Oc=Math.PI/180,Lc=180/Math.PI;function Gr(t){return t*Oc}function rl(t){return t*Lc}const et=[[0,0],[1,0],[1,1],[0,1]];function Dt(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Nn(t,e,n,s){const u=new yu(t,e,n,s);return function(m){return u.solve(m)}}const Zn=Nn(.25,.1,.25,1);function zn(t,e,n){return Math.min(n,Math.max(e,t))}function vi(t,e,n){return(n=zn((n-t)/(e-t),0,1))*n*(3-2*n)}function go(t,e,n){const s=n-e,u=((t-e)%s+s)%s+e;return u===e?n:u}function yo(t,e,n){if(!t.length)return n(null,[]);let s=t.length;const u=new Array(t.length);let m=null;t.forEach((g,E)=>{e(g,(T,z)=>{T&&(m=T),u[E]=z,0==--s&&n(m,u)})})}function co(t){const e=[];for(const n in t)e.push(t[n]);return e}function gi(t,...e){for(const n of e)for(const s in n)t[s]=n[s];return t}let qo=1;function cr(){return qo++}function Er(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function Wr(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Ts(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function ca(t,e){t.forEach(n=>{e[n]&&(e[n]=e[n].bind(e))})}function zs(t,e){return-1!==t.indexOf(e,t.length-e.length)}function Fr(t,e,n){const s={};for(const u in t)s[u]=e.call(this,t[u],u,t);return s}function ts(t,e,n){const s={};for(const u in t)e.call(this,t[u],u,t)&&(s[u]=t[u]);return s}function aa(t){return Array.isArray(t)?t.map(aa):"object"==typeof t&&t?Fr(t,aa):t}const Hc={};function fa(t){Hc[t]||(typeof console<"u"&&console.warn(t),Hc[t]=!0)}function Ms(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function Bc(t){let e=0;for(let n,s,u=0,m=t.length,g=m-1;u<m;g=u++)n=t[u],s=t[g],e+=(s.x-n.x)*(n.y+s.y);return e}function ha([t,e,n]){const s=Gr(e+90),u=Gr(n);return{x:t*Math.cos(s)*Math.sin(u),y:t*Math.sin(s)*Math.sin(u),z:t*Math.cos(u),azimuthal:e,polar:n}}function Sc(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Wu(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,s,u,m)=>{const g=u||m;return e[s]=!g||g.toLowerCase(),""}),e["max-age"]){const n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}let za,Va,gl,hl,kd,cu,Re=null;function We(t){try{const e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function Tt(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function an(t,e,n,s){for(;e<n;){const u=e+n>>1;t[u]<s?e=u+1:n=u}return e}function $n(t,e,n,s){for(;e<n;){const u=e+n>>1;t[u]<=s?e=u+1:n=u}return e}function Un(t){return t>0?1/(1.001-t):1+t}function Ai(t){return t>0?1-1/(1.001-t):-t}function Ti(){return null==za&&(za=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),za}const mi={now:()=>void 0!==hl?hl:performance.now(),setNow(t){hl=t},restoreNow(){hl=void 0},frame(t){const e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t,e=0){const{width:n,height:s}=t;kd||(kd=document.createElement("canvas"));const u=kd.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return(n>kd.width||s>kd.height)&&(kd.width=n,kd.height=s),u.clearRect(-e,-e,n+2*e,s+2*e),u.drawImage(t,0,0,n,s),u.getImageData(-e,-e,n+2*e,s+2*e)},resolveURL:t=>(Va||(Va=document.createElement("a")),Va.href=t,Va.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(null==gl&&(gl=window.matchMedia("(prefers-reduced-motion: reduce)")),gl.matches)},hasCanvasFingerprintNoise(){if(void 0!==cu)return cu;if(!Ti())return cu=!1,!1;const t=new OffscreenCanvas(85,1),e=t.getContext("2d",{willReadFrequently:!0});let n=0;for(let u=0;u<t.width;++u)e.fillStyle=`rgba(${n++},${n++},${n++}, 255)`,e.fillRect(u,0,1,1);const s=e.getImageData(0,0,t.width,t.height);n=0;for(let u=0;u<s.data.length;++u)if(u%4!=3&&n++!==s.data[u])return cu=!0,!0;return cu=!1,!1}};function lo(t,e){const n=t.indexOf("?");if(n<0)return`${t}?${new URLSearchParams(e).toString()}`;const s=new URLSearchParams(t.slice(n));for(const u in e)s.set(u,e[u]);return`${t.slice(0,n)}?${s.toString()}`}function Xo(t,e={persistentParams:[]}){const n=t.indexOf("?");if(n<0)return t;const s=new URLSearchParams,u=new URLSearchParams(t.slice(n));for(const g of e.persistentParams){const E=u.get(g);E&&s.set(g,E)}const m=s.toString();return`${t.slice(0,n)}${m.length>0?`?${m}`:""}`}const hr="mapbox-tiles";let la,bl,gr=500,jr=50;function gs(){try{return caches}catch{}}function nr(){const t=gs();t&&!la&&(la=t.open(hr))}let wl=1/0;const $a={supported:!1,testSupport:function(t){!sl&&Ol&&(Ca?ke(t):bu=t)}};let bu,Ol,sl=!1,Ca=!1;const Xe=typeof self<"u"?self:{};function ke(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,Ol),t.isContextLost())return;$a.supported=!0}catch{}t.deleteTexture(e),sl=!0}Xe.document&&(Ol=Xe.document.createElement("img"),Ol.onload=function(){bu&&ke(bu),bu=null,Ca=!0},Ol.onerror=function(){sl=!0,bu=null},Ol.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const _t={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};"function"==typeof Object.freeze&&Object.freeze(_t);class He extends Error{constructor(e,n,s){401===n&&Xt(s)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=n,this.url=s}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Zt=Sc()?()=>self.worker&&self.worker.referrer:()=>("blob:"===location.protocol?parent:self).location.href,Vo=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(Zt())&&!/^\w+:/.test(n))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(s,u){const m=new AbortController,g=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,referrer:Zt(),referrerPolicy:s.referrerPolicy,signal:m.signal});let E=!1,T=!1;const z=($=g.url).indexOf("sku=")>0&&Xt($);var $;"json"===s.type&&g.headers.set("Accept","application/json");const W=(le,de,be)=>{if(T)return;if(le&&"SecurityError"!==le.message&&fa(le.toString()),de&&be)return Z(de);const xe=Date.now();fetch(g).then($e=>{if($e.ok){const gt=z?$e.clone():null;return Z($e,gt,xe)}return u(new He($e.statusText,$e.status,s.url))}).catch($e=>{"AbortError"!==$e.name&&u(new Error(`${$e.message} ${s.url}`))})},Z=(le,de,be)=>{("arrayBuffer"===s.type?le.arrayBuffer():"json"===s.type?le.json():le.text()).then(xe=>{T||(de&&be&&function($e,gt,yt){if(nr(),!la)return;const wt=Wu(gt.headers.get("Cache-Control")||"");if(wt["no-store"])return;const nn={status:gt.status,statusText:gt.statusText,headers:new Headers};gt.headers.forEach((Rn,li)=>nn.headers.set(li,Rn)),wt["max-age"]&&nn.headers.set("Expires",new Date(yt+1e3*wt["max-age"]).toUTCString());const Qt=nn.headers.get("Expires");if(!Qt||new Date(Qt).getTime()-yt<42e4)return;let kn=Xo($e.url,{persistentParams:["language","worldview"]});if(206===gt.status){const Rn=$e.headers.get("Range");if(!Rn)return;nn.status=200,kn=lo(kn,{range:Rn})}!function(Rn,li){if(void 0===bl)try{new Response(new ReadableStream),bl=!0}catch{bl=!1}bl?li(Rn.body):Rn.blob().then(li)}(gt,Rn=>{const li=new Response(200!==(Di=gt.status)&&404!==Di&&[101,103,204,205,304].includes(Di)?null:Rn,nn);var Di;nr(),la&&la.then(xi=>xi.put(kn,li)).catch(xi=>fa(xi.message))})}(g,de,be),E=!0,u(null,xe,le.headers.get("Cache-Control"),le.headers.get("Expires")))}).catch(xe=>{T||u(new Error(xe.message))})};return z?function(le,de){if(nr(),!la)return de(null);la.then(be=>{let xe=Xo(le.url,{persistentParams:["language","worldview"]});const $e=le.headers.get("Range");$e&&(xe=lo(xe,{range:$e})),be.match(xe).then(gt=>{const yt=function(wt){if(!wt)return!1;const nn=new Date(wt.headers.get("Expires")||0),Qt=Wu(wt.headers.get("Cache-Control")||"");return nn>Date.now()&&!Qt["no-cache"]}(gt);be.delete(xe),yt&&be.put(xe,gt.clone()),de(null,gt,yt)}).catch(de)}).catch(de)}(g,W):W(null,null),{cancel:()=>{T=!0,E||m.abort()}}}(t,e);if(Sc()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(s,u){const m=new XMLHttpRequest;m.open(s.method||"GET",s.url,!0),"arrayBuffer"===s.type&&(m.responseType="arraybuffer");for(const g in s.headers)m.setRequestHeader(g,s.headers[g]);return"json"===s.type&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials="include"===s.credentials,m.onerror=()=>{u(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||0===m.status)&&null!==m.response){let g=m.response;if("json"===s.type)try{g=JSON.parse(m.response)}catch(E){return u(E)}u(null,g,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else u(new He(m.statusText,m.status,s.url))},m.send(s.body),{cancel:()=>m.abort()}}(t,e)},dr=function(t,e){return Vo(gi(t,{type:"arrayBuffer"}),e)};function Xa(t){const e=document.createElement("a");return e.href=t,e.protocol===location.protocol&&e.host===location.host}const xl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Tc,al;Tc=[],al=0;const ws=function(t,e){if($a.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),al>=ft.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Tc.push(m),m}al++;let n=!1;const s=()=>{if(!n)for(n=!0,al--;Tc.length&&al<ft.MAX_PARALLEL_IMAGE_REQUESTS;){const m=Tc.shift(),{requestParameters:g,callback:E,cancelled:T}=m;T||(m.cancel=ws(g,E).cancel)}},u=dr(t,(m,g,E,T)=>{s(),m?e(m):g&&(self.createImageBitmap?function(z,$){const W=new Blob([new Uint8Array(z)],{type:"image/png"});createImageBitmap(W).then(Z=>{$(null,Z)}).catch(Z=>{$(new Error(`Could not load image because of ${Z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(g,(z,$)=>e(z,$,E,T)):function(z,$){const W=new Image;W.onload=()=>{$(null,W),URL.revokeObjectURL(W.src),W.onload=null,requestAnimationFrame(()=>{W.src=xl})},W.onerror=()=>$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Z=new Blob([new Uint8Array(z)],{type:"image/png"});W.src=z.byteLength?URL.createObjectURL(Z):xl}(g,(z,$)=>e(z,$,E,T)))});return{cancel:()=>{u.cancel(),s()}}},Gc="01",Wc="NO_ACCESS_TOKEN",Fh=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _s(t){const e=t.match(Fh);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Sd(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}const qc="mapbox.eventData";function dh(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(atob(e[1]).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class pd{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const n=dh(ft.ACCESS_TOKEN);let s="";return s=n&&n.u?btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(u,m)=>String.fromCharCode(+("0x"+m)))):ft.ACCESS_TOKEN||"",e?`${qc}.${e}:${s}`:`${qc}:${s}`}fetchEventData(){const e=We("localStorage"),n=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{const u=localStorage.getItem(n);u&&(this.eventData=JSON.parse(u));const m=localStorage.getItem(s);m&&(this.anonId=m)}catch{fa("Unable to read from LocalStorage")}}saveEventData(){const e=We("localStorage"),n=this.getStorageKey(),s=this.getStorageKey("uuid"),u=this.anonId;if(e&&u)try{localStorage.setItem(s,u),Object.keys(this.eventData).length>=1&&localStorage.setItem(n,JSON.stringify(this.eventData))}catch{fa("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,n,s,u){if(!ft.EVENTS_URL)return;const m=_s(ft.EVENTS_URL);m.params.push(`access_token=${u||ft.ACCESS_TOKEN||""}`);const g={event:this.type,created:new Date(e).toISOString()},E=n?gi(g,n):g,T={url:Sd(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};var $;this.pendingRequest=($=z=>{this.pendingRequest=null,s(z),this.saveEventData(),this.processRequests(u)},Vo(gi(T,{method:"POST"}),$))}queueRequest(e,n){this.queue.push(e),this.processRequests(n)}}const Td=new class extends pd{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){ft.EVENTS_URL&&ft.ACCESS_TOKEN&&Array.isArray(t)&&t.some(n=>Ut(n)||Xt(n))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=dh(ft.ACCESS_TOKEN),n=e?e.u:ft.ACCESS_TOKEN;let s=n!==this.eventData.tokenU;Ts(this.anonId)||(this.anonId=Er(),s=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),g=new Date(u),E=(u-this.eventData.lastSuccess)/864e5;s=s||E>=1||E<-1||m.getDate()!==g.getDate()}else s=!0;s?this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:qe,skuId:Gc,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=u,this.eventData.tokenU=n)},t):this.processRequests()}},Vh=Td.postTurnstileEvent.bind(Td),Nc=new class extends pd{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,s){this.skuToken=e,this.errorCb=s,ft.EVENTS_URL&&(n||ft.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(Wc)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),Ts(this.anonId)||(this.anonId=Er()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:qe,skuId:Gc,skuToken:this.skuToken,userId:this.anonId},s=>{s?this.errorCb(s):e&&(this.success[e]=!0)},t))}remove(){this.errorCb=null}},w0=Nc.postMapLoadEvent.bind(Nc),$h=new class extends pd{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(t){let e=this.mapInstanceIdMap.get(t);return e||(e=Er(),this.mapInstanceIdMap.set(t,e)),e}getEventId(t){const e=this.eventIdPerMapInstanceMap.get(t)||0;return this.eventIdPerMapInstanceMap.set(t,e+1),e}postStyleLoadEvent(t,e){const{map:n,style:s,importedStyles:u}=e;if(!ft.EVENTS_URL||!t&&!ft.ACCESS_TOKEN)return;const m=this.getMapInstanceId(n),g={mapInstanceId:m,eventId:this.getEventId(m),style:s};u.length&&(g.importedStyles=u),this.queueRequest({timestamp:Date.now(),payload:g},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:e,payload:n}=this.queue.shift();this.postEvent(e,n,()=>{},t)}},Xd=$h.postStyleLoadEvent.bind($h),Md=new class extends pd{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){ft.EVENTS_URL&&(t||ft.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:e,performanceData:n}=this.queue.shift(),s=function(u){const m=performance.getEntriesByType("resource"),g=performance.getEntriesByType("mark"),E=function(le){const de={};if(le)for(const be in le)if("other"!==be)for(const xe of le[be]){const $e=`${be}ResolveRangeMin`,gt=`${be}ResolveRangeMax`,yt=`${be}RequestCount`,wt=`${be}RequestCachedCount`;de[$e]=Math.min(de[$e]||1/0,xe.startTime),de[gt]=Math.max(de[gt]||-1/0,xe.responseEnd);const nn=Qt=>{void 0===de[Qt]&&(de[Qt]=0),++de[Qt]};void 0!==xe.transferSize&&0===xe.transferSize&&nn(wt),nn(yt)}return de}(function(le,de){const be={};if(le)for(const xe of le){const $e=de(xe);void 0===be[$e]&&(be[$e]=[]),be[$e].push(xe)}return be}(m,un)),T=window.devicePixelRatio,z=navigator.connection||navigator.mozConnection||navigator.webkitConnection,$=z?z.effectiveType:void 0,W={counters:[],metadata:[],attributes:[]},Z=(le,de,be)=>{null!=be&&le.push({name:de,value:be.toString()})};for(const le in E)Z(W.counters,le,E[le]);if(u.interactionRange[0]!==1/0&&u.interactionRange[1]!==-1/0&&(Z(W.counters,"interactionRangeMin",u.interactionRange[0]),Z(W.counters,"interactionRangeMax",u.interactionRange[1])),g)for(const le of Object.keys(Ht)){const de=Ht[le],be=g.find(xe=>xe.name===de);be&&Z(W.counters,de,be.startTime)}return Z(W.counters,"visibilityHidden",u.visibilityHidden),Z(W.attributes,"style",function(le){if(le)for(const de of le){const be=de.name.split("?")[0];if(At(be)){const xe=be.split("/").slice(-2);if(2===xe.length)return`mapbox://styles/${xe[0]}/${xe[1]}`}}}(m)),Z(W.attributes,"terrainEnabled",u.terrainEnabled?"true":"false"),Z(W.attributes,"fogEnabled",u.fogEnabled?"true":"false"),Z(W.attributes,"projection",u.projection),Z(W.attributes,"zoom",u.zoom),Z(W.metadata,"devicePixelRatio",T),Z(W.metadata,"connectionEffectiveType",$),Z(W.metadata,"navigatorUserAgent",navigator.userAgent),Z(W.metadata,"screenWidth",window.screen.width),Z(W.metadata,"screenHeight",window.screen.height),Z(W.metadata,"windowWidth",window.innerWidth),Z(W.metadata,"windowHeight",window.innerHeight),Z(W.metadata,"mapWidth",u.width/T),Z(W.metadata,"mapHeight",u.height/T),Z(W.metadata,"webglRenderer",u.renderer),Z(W.metadata,"webglVendor",u.vendor),Z(W.metadata,"sdkVersion",qe),Z(W.metadata,"sdkIdentifier","mapbox-gl-js"),W}(n);for(const u of s.metadata);for(const u of s.counters);for(const u of s.attributes);this.postEvent(e,s,()=>{},t)}},uu=Md.postPerformanceEvent.bind(Md),Xc=new class extends pd{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,s){if(!ft.API_URL||!ft.SESSION_PATH)return;const u=_s(ft.API_URL+ft.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${s||ft.ACCESS_TOKEN||""}`);const m={url:Sd(u),headers:{"Content-Type":"text/plain"}};var E;this.pendingRequest=(E=g=>{this.pendingRequest=null,n(g),this.saveEventData(),this.processRequests(s)},Vo(gi(m,{method:"GET"}),E))}getSessionAPI(t,e,n,s){this.skuToken=e,this.errorCb=s,ft.SESSION_PATH&&ft.API_URL&&(n||ft.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(Wc)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,s=>{s?this.errorCb(s):e&&(this.success[e]=!0)},t)}remove(){this.errorCb=null}},H0=Xc.getSessionAPI.bind(Xc),As=new Set;var _a={exports:{}},jh=function(t,e){var n,s,u,m,g,E,T,z;for(s=t.length-(n=3&t.length),u=e,g=3432918353,E=461845907,z=0;z<s;)T=255&t.charCodeAt(z)|(255&t.charCodeAt(++z))<<8|(255&t.charCodeAt(++z))<<16|(255&t.charCodeAt(++z))<<24,++z,u=27492+(65535&(m=5*(65535&(u=(u^=T=(65535&(T=(T=(65535&T)*g+(((T>>>16)*g&65535)<<16)&4294967295)<<15|T>>>17))*E+(((T>>>16)*E&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(T=0,n){case 3:T^=(255&t.charCodeAt(z+2))<<16;case 2:T^=(255&t.charCodeAt(z+1))<<8;case 1:u^=T=(65535&(T=(T=(65535&(T^=255&t.charCodeAt(z)))*g+(((T>>>16)*g&65535)<<16)&4294967295)<<15|T>>>17))*E+(((T>>>16)*E&65535)<<16)&4294967295}return u^=t.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0},G0=function(t,e){for(var n,s=t.length,u=e^s,m=0;s>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(m)|(255&t.charCodeAt(++m))<<8|(255&t.charCodeAt(++m))<<16|(255&t.charCodeAt(++m))<<24))+((1540483477*(n>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),s-=4,++m;switch(s){case 3:u^=(255&t.charCodeAt(m+2))<<16;case 2:u^=(255&t.charCodeAt(m+1))<<8;case 1:u=1540483477*(65535&(u^=255&t.charCodeAt(m)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0};_a.exports=jh,_a.exports.murmur3=jh,_a.exports.murmur2=G0;var Za=xn(_a.exports);class Mc{constructor(e,...n){gi(this,n[0]||{}),this.type=e}}class Os extends Mc{constructor(e,n={}){super("error",gi({error:e},n))}}function x0(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function I0(t,e,n){if(n&&n[t]){const s=n[t].indexOf(e);-1!==s&&n[t].splice(s,1)}}class Hl{on(e,n){return this._listeners=this._listeners||{},x0(e,n,this._listeners),this}off(e,n){return I0(e,n,this._listeners),I0(e,n,this._oneTimeListeners),this}once(e,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},x0(e,n,this._oneTimeListeners),this):new Promise(s=>this.once(e,s))}fire(e,n){const s="string"==typeof e?new Mc(e,n):e,u=s.type;if(this.listens(u)){s.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const T of m)T.call(this,s);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const T of g)I0(u,T,this._oneTimeListeners),T.call(this,s);const E=this._eventedParent;E&&(gi(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),E.fire(s))}else s instanceof Os&&console.error(s.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,n){return this._eventedParent=e,this._eventedParentData=n,this}}l.F=void 0;var qu={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Uh(t){return(t=Math.round(t))<0?0:t>255?255:t}function Kd(t){return Uh("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Kc(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function fd(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{l.F={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in qu)return qu[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var s=n.indexOf("("),u=n.indexOf(")");if(-1!==s&&u+1===n.length){var m=n.substr(0,s),g=n.substr(s+1,u-(s+1)).split(","),E=1;switch(m){case"rgba":if(4!==g.length)return null;E=Kc(g.pop());case"rgb":return 3!==g.length?null:[Kd(g[0]),Kd(g[1]),Kd(g[2]),E];case"hsla":if(4!==g.length)return null;E=Kc(g.pop());case"hsl":if(3!==g.length)return null;var T=(parseFloat(g[0])%360+360)%360/360,z=Kc(g[1]),$=Kc(g[2]),W=$<=.5?$*(z+1):$+z-$*z,Z=2*$-W;return[Uh(255*fd(Z,W,T+1/3)),Uh(255*fd(Z,W,T)),Uh(255*fd(Z,W,T-1/3)),E];default:return null}}return null}}catch{}class Zs{constructor(e,n,s,u=1){this.r=e,this.g=n,this.b=s,this.a=u}static parse(e){if(!e)return;if(e instanceof Zs)return e;if("string"!=typeof e)return;const n=l.F(e);return n?new Zs(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}toString(){const[e,n,s,u]=0===this.a?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(s)},${u})`}toRenderColor(e){const{r:n,g:s,b:u,a:m}=this;return new Pu(e,n,s,u,m)}}class Pu{constructor(e,n,s,u,m){if(e){const g=e.image.height,E=g*g;n=0===m?0:n/m*(g-1),s=0===m?0:s/m*(g-1),u=0===m?0:u/m*(g-1);const T=Math.floor(n),z=Math.floor(s),$=Math.floor(u),W=Math.ceil(n),Z=Math.ceil(s),le=Math.ceil(u),de=n-T,be=s-z,xe=u-$,$e=e.image.data,gt=4*(T+z*E+$*g),yt=4*(T+z*E+le*g),wt=4*(T+Z*E+$*g),nn=4*(T+Z*E+le*g),Qt=4*(W+z*E+$*g),kn=4*(W+z*E+le*g),Rn=4*(W+Z*E+$*g),li=4*(W+Z*E+le*g);if(gt<0||li>=$e.length)throw new Error("out of range");this.r=Cr(Cr(Cr($e[gt],$e[yt],xe),Cr($e[wt],$e[nn],xe),be),Cr(Cr($e[Qt],$e[kn],xe),Cr($e[Rn],$e[li],xe),be),de)/255*m,this.g=Cr(Cr(Cr($e[gt+1],$e[yt+1],xe),Cr($e[wt+1],$e[nn+1],xe),be),Cr(Cr($e[Qt+1],$e[kn+1],xe),Cr($e[Rn+1],$e[li+1],xe),be),de)/255*m,this.b=Cr(Cr(Cr($e[gt+2],$e[yt+2],xe),Cr($e[wt+2],$e[nn+2],xe),be),Cr(Cr($e[Qt+2],$e[kn+2],xe),Cr($e[Rn+2],$e[li+2],xe),be),de)/255*m,this.a=m}else this.r=n,this.g=s,this.b=u,this.a=m}toArray(){const{r:e,g:n,b:s,a:u}=this;return 0===u?[0,0,0,0]:[255*e/u,255*n/u,255*s/u,u]}toArray01(){const{r:e,g:n,b:s,a:u}=this;return 0===u?[0,0,0,0]:[e/u,n/u,s/u,u]}toArray01Scaled(e){const{r:n,g:s,b:u,a:m}=this;return 0===m?[0,0,0]:[n/m*e,s/m*e,u/m*e]}toArray01PremultipliedAlpha(){const{r:e,g:n,b:s,a:u}=this;return[e,n,s,u]}toArray01Linear(){const{r:e,g:n,b:s,a:u}=this;return 0===u?[0,0,0,0]:[Math.pow(e/u,2.2),Math.pow(n/u,2.2),Math.pow(s/u,2.2),u]}}function Cr(t,e,n){return t*(1-n)+e*n}function Dd(t,e,n){return t.map((s,u)=>Cr(s,e[u],n))}Zs.black=new Zs(0,0,0,1),Zs.white=new Zs(1,1,1,1),Zs.transparent=new Zs(0,0,0,0),Zs.red=new Zs(1,0,0,1),Zs.blue=new Zs(0,0,1,1);var Xu=Object.freeze({__proto__:null,array:Dd,color:function(t,e,n){return new Zs(Cr(t.r,e.r,n),Cr(t.g,e.g,n),Cr(t.b,e.b,n),Cr(t.a,e.a,n))},number:Cr});function lc(t,...e){for(const n of e)for(const s in n)t[s]=n[s];return t}class wu extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class xu{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[s,u]of n)this.bindings[s]=u}concat(e){return new xu(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const fe={kind:"null"},Ee={kind:"number"},Bt={kind:"string"},Ce={kind:"boolean"},Gt={kind:"color"},Tn={kind:"object"},ui={kind:"value"},Ko={kind:"collator"},hs={kind:"formatted"},Qs={kind:"resolvedImage"};function Js(t,e){return{kind:"array",itemType:t,N:e}}function Pr(t){if("array"===t.kind){const e=Pr(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const Ta=[fe,Ee,Bt,Ce,Gt,hs,Tn,Js(ui),Qs];function pa(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!pa(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const n of Ta)if(!pa(n,e))return null}return`Expected ${Pr(t)} but found ${Pr(e)} instead.`}function Ll(t,e){return e.some(n=>n.kind===t.kind)}function Ql(t,e){return e.some(n=>"null"===n?null===t:"array"===n?Array.isArray(t):"object"===n?t&&!Array.isArray(t)&&"object"==typeof t:n===typeof t)}class Jl{constructor(e,n,s){this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ga{constructor(e,n,s,u,m){this.text=e.normalize?e.normalize():e,this.image=n,this.scale=s,this.fontStack=u,this.textColor=m}}class ja{constructor(e){this.sections=e}static fromString(e){return new ja([new Ga(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.namePrimary.length)}static factory(e){return e instanceof ja?e:ja.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const n of this.sections){if(n.image){e.push(["image",n.image.namePrimary]);continue}e.push(n.text);const s={};n.fontStack&&(s["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(s["font-scale"]=n.scale),n.textColor&&(s["text-color"]=["rgba"].concat(n.textColor.toRenderColor(null).toArray())),e.push(s)}return e}}class cc{constructor(e){this.namePrimary=e.namePrimary,e.nameSecondary&&(this.nameSecondary=e.nameSecondary),this.available=e.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(e,n){return e?new cc({namePrimary:e,nameSecondary:n,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function Gl(t,e,n,s){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===s||"number"==typeof s&&s>=0&&s<=1?null:`Invalid rgba value [${[t,e,n,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof s?[t,e,n,s]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Sl(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof Zs||t instanceof Jl||t instanceof ja||t instanceof cc)return!0;if(Array.isArray(t)){for(const e of t)if(!Sl(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Sl(t[e]))return!1;return!0}return!1}function Qa(t){if(null===t)return fe;if("string"==typeof t)return Bt;if("boolean"==typeof t)return Ce;if("number"==typeof t)return Ee;if(t instanceof Zs)return Gt;if(t instanceof Jl)return Ko;if(t instanceof ja)return hs;if(t instanceof cc)return Qs;if(Array.isArray(t)){const e=t.length;let n;for(const s of t){const u=Qa(s);if(n){if(n===u)continue;n=ui;break}n=u}return Js(n||ui,e)}return Tn}function Pd(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Zs||t instanceof ja||t instanceof cc?t.toString():JSON.stringify(t)}class md{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(2!==e.length)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Sl(e[1]))return n.error("invalid value");const s=e[1];let u=Qa(s);const m=n.expectedType;return"array"!==u.kind||0!==u.N||!m||"array"!==m.kind||"number"==typeof m.N&&0!==m.N||(u=m),new md(u,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Zs?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof ja?this.value.serialize():this.value}}class Bl{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const ec={string:Bt,number:Ee,boolean:Ce,object:Tn};class Ku{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let s,u=1;const m=e[0];if("array"===m){let E,T;if(e.length>2){const z=e[1];if("string"!=typeof z||!(z in ec)||"object"===z)return n.error('The item type argument of "array" must be one of string, number, boolean',1);E=ec[z],u++}else E=ui;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);T=e[2],u++}s=Js(E,T)}else s=ec[m];const g=[];for(;u<e.length;u++){const E=n.parse(e[u],u,ui);if(!E)return null;g.push(E)}return new Ku(s,g)}evaluate(e){for(let n=0;n<this.args.length;n++){const s=this.args[n].evaluate(e);if(!pa(this.type,Qa(s)))return s;if(n===this.args.length-1)throw new Bl(`Expected value to be of type ${Pr(this.type)}, but found ${Pr(Qa(s))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,n=[e.kind];if("array"===e.kind){const s=e.itemType;if("string"===s.kind||"number"===s.kind||"boolean"===s.kind){n.push(s.kind);const u=e.N;("number"==typeof u||this.args.length>1)&&n.push(u)}}return n.concat(this.args.map(s=>s.serialize()))}}class gd{constructor(e){this.type=hs,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const s=e[1];if(!Array.isArray(s)&&"object"==typeof s)return n.error("First argument must be an image or text section.");const u=[];let m=!1;for(let g=1;g<=e.length-1;++g){const E=e[g];if(m&&"object"==typeof E&&!Array.isArray(E)){m=!1;let T=null;if(E["font-scale"]&&(T=n.parse(E["font-scale"],1,Ee),!T))return null;let z=null;if(E["text-font"]&&(z=n.parse(E["text-font"],1,Js(Bt)),!z))return null;let $=null;if(E["text-color"]&&($=n.parse(E["text-color"],1,Gt),!$))return null;const W=u[u.length-1];W.scale=T,W.font=z,W.textColor=$}else{const T=n.parse(e[g],1,ui);if(!T)return null;const z=T.type.kind;if("string"!==z&&"value"!==z&&"null"!==z&&"resolvedImage"!==z)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,u.push({content:T,scale:null,font:null,textColor:null})}}return new gd(u)}evaluate(e){return new ja(this.sections.map(n=>{const s=n.content.evaluate(e);return Qa(s)===Qs?new Ga("",s,null,null,null):new Ga(Pd(s),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)}))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const n of this.sections){e.push(n.content.serialize());const s={};n.scale&&(s["font-scale"]=n.scale.serialize()),n.font&&(s["text-font"]=n.font.serialize()),n.textColor&&(s["text-color"]=n.textColor.serialize()),e.push(s)}return e}}class Ma{constructor(e,n){this.type=Qs,this.inputPrimary=e,this.inputSecondary=n}static parse(e,n){if(e.length<2)return n.error("Expected two or more arguments.");const s=n.parse(e[1],1,Bt);if(!s)return n.error("No image name provided.");if(2===e.length)return new Ma(s);const u=n.parse(e[2],1,Bt);return u?new Ma(s,u):n.error("Secondary image variant is not a string.")}evaluate(e){const n=cc.fromString(this.inputPrimary.evaluate(e),this.inputSecondary?this.inputSecondary.evaluate(e):void 0);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(n.namePrimary)>-1,n.nameSecondary&&n.available&&e.availableImages&&(n.available=e.availableImages.indexOf(n.nameSecondary)>-1)),n}eachChild(e){e(this.inputPrimary),this.inputSecondary&&e(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function vd(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}const Fc={"to-boolean":Ce,"to-color":Gt,"to-number":Ee,"to-string":Bt};class Ks{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const s=e[0],u=[];let m=fe;if("to-array"===s){if(!Array.isArray(e[1]))return null;const g=e[1].length;if(n.expectedType){if("array"!==n.expectedType.kind)return n.error(`Expected ${n.expectedType.kind} but found array.`);m=Js(n.expectedType.itemType,g)}else{if(!(g>0&&Sl(e[1][0])))return null;m=Js(Qa(e[1][0]),g)}for(let E=0;E<g;E++){const T=e[1][E];let z;if("array"===vd(T))z=n.parse(T,void 0,m.itemType);else{const $=vd(T);if($!==m.itemType.kind)return n.error(`Expected ${m.itemType.kind} but found ${$}.`);z=n.registry.literal.parse(["literal",void 0===T?null:T],n)}if(!z)return null;u.push(z)}}else{if(("to-boolean"===s||"to-string"===s)&&2!==e.length)return n.error("Expected one argument.");m=Fc[s];for(let g=1;g<e.length;g++){const E=n.parse(e[g],g,ui);if(!E)return null;u.push(E)}}return new Ks(m,u)}evaluate(e){if("boolean"===this.type.kind)return!!this.args[0].evaluate(e);if("color"===this.type.kind){let n,s;for(const u of this.args){if(n=u.evaluate(e),s=null,n instanceof Zs)return n;if("string"==typeof n){const m=e.parseColor(n);if(m)return m}else if(Array.isArray(n)&&(s=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:Gl(n[0],n[1],n[2],n[3]),!s))return new Zs(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Bl(s||`Could not parse color from value '${"string"==typeof n?n:String(JSON.stringify(n))}'`)}if("number"===this.type.kind){let n=null;for(const s of this.args){if(n=s.evaluate(e),null===n)return 0;const u=Number(n);if(!isNaN(u))return u}throw new Bl(`Could not convert ${JSON.stringify(n)} to number.`)}return"formatted"===this.type.kind?ja.fromString(Pd(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?cc.fromString(Pd(this.args[0].evaluate(e))):"array"===this.type.kind?this.args.map(n=>n.evaluate(e)):Pd(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new gd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ma(this.args[0]).serialize();const e="array"===this.type.kind?[]:[`to-${this.type.kind}`];return this.eachChild(n=>{e.push(n.serialize())}),e}}const Ru=["Unknown","Point","LineString","Polygon"];class du{constructor(e,n){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=e,this.options=n}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ru[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(e){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:s,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*n-e[0])+this.featureDistanceData.bearing[1]*(u*n-e[1])}return 0}parseColor(e){let n=this._parseColorCache[e];return n||(n=this._parseColorCache[e]=Zs.parse(e)),n}getConfig(e){return this.options?this.options.get(e):null}}class vl{constructor(e,n,s,u,m){this.name=e,this.type=n,this._evaluate=s,this.args=u,this._overloadIndex=m}evaluate(e){if(!this._evaluate){const n=vl.definitions[this.name];this._evaluate=Array.isArray(n)?n[2]:n.overloads[this._overloadIndex][1]}return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,n){const s=e[0],u=vl.definitions[s];if(!u)return n.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(u)?u[0]:u.type,g=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,E=[];let T=null,z=-1;for(const[$,W]of g){if(Array.isArray($)&&$.length!==e.length-1)continue;E.push($),z++,T=new Qc(n.registry,n.path,null,n.scope,void 0,n._scope,n.options);const Z=[];let le=!1;for(let de=1;de<e.length;de++){const be=e[de],xe=Array.isArray($)?$[de-1]:$.type,$e=T.parse(be,1+Z.length,xe);if(!$e){le=!0;break}Z.push($e)}if(!le)if(Array.isArray($)&&$.length!==Z.length)T.error(`Expected ${$.length} arguments, but found ${Z.length} instead.`);else{for(let de=0;de<Z.length;de++){const be=Array.isArray($)?$[de]:$.type,xe=Z[de];T.concat(de+1).checkSubtype(be,xe.type)}if(0===T.errors.length)return new vl(s,m,W,Z,z)}}if(1===E.length)n.errors.push(...T.errors);else{const $=(E.length?E:g.map(([Z])=>Z)).map(Ac).join(" | "),W=[];for(let Z=1;Z<e.length;Z++){const le=n.parse(e[Z],1+W.length);if(!le)return null;W.push(Pr(le.type))}n.error(`Expected arguments of type ${$}, but found (${W.join(", ")}) instead.`)}return null}static register(e,n){vl.definitions=n;for(const s in n)e[s]=vl}}function Ac(t){return Array.isArray(t)?`(${t.map(Pr).join(", ")})`:`(${Pr(t.type)}...)`}class kh{constructor(e,n,s){this.type=Ko,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(2!==e.length)return n.error("Expected one argument.");const s=e[1];if("object"!=typeof s||Array.isArray(s))return n.error("Collator options argument must be an object.");const u=n.parse(void 0!==s["case-sensitive"]&&s["case-sensitive"],1,Ce);if(!u)return null;const m=n.parse(void 0!==s["diacritic-sensitive"]&&s["diacritic-sensitive"],1,Ce);if(!m)return null;let g=null;return s.locale&&(g=n.parse(s.locale,1,Bt),!g)?null:new kh(u,m,g)}evaluate(e){return new Jl(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}function Sh(t,e,n=0,s=t.length-1,u=Z1){for(;s>n;){if(s-n>600){const T=s-n+1,z=e-n+1,$=Math.log(T),W=.5*Math.exp(2*$/3),Z=.5*Math.sqrt($*W*(T-W)/T)*(z-T/2<0?-1:1);Sh(t,e,Math.max(n,Math.floor(e-z*W/T+Z)),Math.min(s,Math.floor(e+(T-z)*W/T+Z)),u)}const m=t[e];let g=n,E=s;for(Yu(t,n,e),u(t[s],m)>0&&Yu(t,n,s);g<E;){for(Yu(t,g,E),g++,E--;u(t[g],m)<0;)g++;for(;u(t[E],m)>0;)E--}0===u(t[n],m)?Yu(t,n,E):(E++,Yu(t,E,s)),E<=e&&(n=E+1),e<=E&&(s=E-1)}}function Yu(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}function Z1(t,e){return t<e?-1:t>e?1:0}function tc(t){let e=0;for(let n,s,u=0,m=t.length,g=m-1;u<m;g=u++)n=t[u],s=t[g],e+=(s.x-n.x)*(n.y+s.y);return e}function zu(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Rd(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Hh(t,e,n){const s=t[0]-e[0],u=t[1]-e[1],m=t[0]-n[0],g=t[1]-n[1];return s*g-m*u==0&&s*m<=0&&u*g<=0}function Ws(t,e,n=!1){let s=!1;for(let E=0,T=e.length;E<T;E++){const z=e[E];for(let $=0,W=z.length,Z=W-1;$<W;Z=$++){const le=z[Z],de=z[$];if(Hh(t,le,de))return n;(m=le)[1]>(u=t)[1]!=(g=de)[1]>u[1]&&u[0]<(g[0]-m[0])*(u[1]-m[1])/(g[1]-m[1])+m[0]&&(s=!s)}}var u,m,g;return s}function E0(t,e,n,s){const u=s[0]-n[0],m=s[1]-n[1],g=(t[0]-n[0])*m-u*(t[1]-n[1]),E=(e[0]-n[0])*m-u*(e[1]-n[1]);return g>0&&E<0||g<0&&E>0}function Yd(t,e,n,s){return(u=[s[0]-n[0],s[1]-n[1]])[0]*(m=[e[0]-t[0],e[1]-t[1]])[1]-u[1]*m[0]!=0&&!(!E0(t,e,n,s)||!E0(n,s,t,e));var u,m}const zd=8192;function Q1(t,e){const n=(180+t[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(n*u*zd),Math.round(s*u*zd)]}function Th(t,e){for(let n=0;n<e.length;n++)if(Ws(t,e[n]))return!0;return!1}function Yc(t,e,n){for(const s of n)for(let u=0,m=s.length,g=m-1;u<m;g=u++)if(Yd(t,e,s[g],s[u]))return!0;return!1}function Zd(t,e){for(let n=0;n<t.length;++n)if(!Ws(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(Yc(t[n],t[n+1],e))return!1;return!0}function W0(t,e){for(let n=0;n<e.length;n++)if(Zd(t,e[n]))return!0;return!1}function C0(t,e,n){const s=[];for(let u=0;u<t.length;u++){const m=[];for(let g=0;g<t[u].length;g++){const E=Q1(t[u][g],n);zu(e,E),m.push(E)}s.push(m)}return s}function uc(t,e,n){const s=[];for(let u=0;u<t.length;u++){const m=C0(t[u],e,n);s.push(m)}return s}function Mh(t,e,n,s){if(t[0]<n[0]||t[0]>n[2]){const u=.5*s;let m=t[0]-n[0]>u?-s:n[0]-t[0]>u?s:0;0===m&&(m=t[0]-n[2]>u?-s:n[2]-t[0]>u?s:0),t[0]+=m}zu(e,t)}function q0(t,e,n,s){const u=Math.pow(2,s.z)*zd,m=[s.x*zd,s.y*zd],g=[];if(!t)return g;for(const E of t)for(const T of E){const z=[T.x+m[0],T.y+m[1]];Mh(z,e,n,u),g.push(z)}return g}function k0(t,e,n,s){const u=Math.pow(2,s.z)*zd,m=[s.x*zd,s.y*zd],g=[];if(!t)return g;for(const T of t){const z=[];for(const $ of T){const W=[$.x+m[0],$.y+m[1]];zu(e,W),z.push(W)}g.push(z)}if(e[2]-e[0]<=u/2){(E=e)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const T of g)for(const z of T)Mh(z,e,n,u)}var E;return g}class cd{constructor(e,n){this.type=Ce,this.geojson=e,this.geometries=n}static parse(e,n){if(2!==e.length)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Sl(e[1])){const s=e[1];if("FeatureCollection"===s.type)for(let u=0;u<s.features.length;++u){const m=s.features[u].geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new cd(s,s.features[u].geometry)}else if("Feature"===s.type){const u=s.geometry.type;if("Polygon"===u||"MultiPolygon"===u)return new cd(s,s.geometry)}else if("Polygon"===s.type||"MultiPolygon"===s.type)return new cd(s,s)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(n,s){const u=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],g=n.canonicalID();if(!g)return!1;if("Polygon"===s.type){const E=C0(s.coordinates,m,g),T=q0(n.geometry(),u,m,g);if(!Rd(u,m))return!1;for(const z of T)if(!Ws(z,E))return!1}if("MultiPolygon"===s.type){const E=uc(s.coordinates,m,g),T=q0(n.geometry(),u,m,g);if(!Rd(u,m))return!1;for(const z of T)if(!Th(z,E))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(n,s){const u=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],g=n.canonicalID();if(!g)return!1;if("Polygon"===s.type){const E=C0(s.coordinates,m,g),T=k0(n.geometry(),u,m,g);if(!Rd(u,m))return!1;for(const z of T)if(!Zd(z,E))return!1}if("MultiPolygon"===s.type){const E=uc(s.coordinates,m,g),T=k0(n.geometry(),u,m,g);if(!Rd(u,m))return!1;for(const z of T)if(!W0(z,E))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const _d={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},m1=1/298.257223563,Qd=m1*(2-m1),Ah=Math.PI/180;class yd{static fromTile(e,n,s){const u=Math.PI*(1-2*(e+.5)/Math.pow(2,n)),m=Math.atan(.5*(Math.exp(u)-Math.exp(-u)))/Ah;return new yd(m,s)}static get units(){return _d}constructor(e,n){if(void 0===e)throw new Error("No latitude given.");if(n&&!_d[n])throw new Error(`Unknown unit ${n}. Use one of: ${Object.keys(_d).join(", ")}`);const s=6378.137*Ah*(n?_d[n]:1),u=Math.cos(e*Ah),m=1/(1-Qd*(1-u*u)),g=Math.sqrt(m);this.kx=s*g*u,this.ky=s*g*m*(1-Qd)}distance(e,n){const s=hu(e[0]-n[0])*this.kx,u=(e[1]-n[1])*this.ky;return Math.sqrt(s*s+u*u)}bearing(e,n){const s=hu(n[0]-e[0])*this.kx;return Math.atan2(s,(n[1]-e[1])*this.ky)/Ah}destination(e,n,s){const u=s*Ah;return this.offset(e,Math.sin(u)*n,Math.cos(u)*n)}offset(e,n,s){return[e[0]+n/this.kx,e[1]+s/this.ky]}lineDistance(e){let n=0;for(let s=0;s<e.length-1;s++)n+=this.distance(e[s],e[s+1]);return n}area(e){let n=0;for(let s=0;s<e.length;s++){const u=e[s];for(let m=0,g=u.length,E=g-1;m<g;E=m++)n+=hu(u[m][0]-u[E][0])*(u[m][1]+u[E][1])*(s?-1:1)}return Math.abs(n)/2*this.kx*this.ky}along(e,n){let s=0;if(n<=0)return e[0];for(let u=0;u<e.length-1;u++){const m=e[u],g=e[u+1],E=this.distance(m,g);if(s+=E,s>n)return bd(m,g,(n-(s-E))/E)}return e[e.length-1]}pointToSegmentDistance(e,n,s){let[u,m]=n,g=hu(s[0]-u)*this.kx,E=(s[1]-m)*this.ky;if(0!==g||0!==E){const T=(hu(e[0]-u)*this.kx*g+(e[1]-m)*this.ky*E)/(g*g+E*E);T>1?(u=s[0],m=s[1]):T>0&&(u+=g/this.kx*T,m+=E/this.ky*T)}return g=hu(e[0]-u)*this.kx,E=(e[1]-m)*this.ky,Math.sqrt(g*g+E*E)}pointOnLine(e,n){let s=1/0,u=e[0][0],m=e[0][1],g=0,E=0;for(let T=0;T<e.length-1;T++){let z=e[T][0],$=e[T][1],W=hu(e[T+1][0]-z)*this.kx,Z=(e[T+1][1]-$)*this.ky,le=0;0===W&&0===Z||(le=(hu(n[0]-z)*this.kx*W+(n[1]-$)*this.ky*Z)/(W*W+Z*Z),le>1?(z=e[T+1][0],$=e[T+1][1]):le>0&&(z+=W/this.kx*le,$+=Z/this.ky*le)),W=hu(n[0]-z)*this.kx,Z=(n[1]-$)*this.ky;const de=W*W+Z*Z;de<s&&(s=de,u=z,m=$,g=T,E=le)}return{point:[u,m],index:g,t:Math.max(0,Math.min(1,E))}}lineSlice(e,n,s){let u=this.pointOnLine(s,e),m=this.pointOnLine(s,n);if(u.index>m.index||u.index===m.index&&u.t>m.t){const z=u;u=m,m=z}const g=[u.point],E=u.index+1,T=m.index;!Jd(s[E],g[0])&&E<=T&&g.push(s[E]);for(let z=E+1;z<=T;z++)g.push(s[z]);return Jd(s[T],m.point)||g.push(m.point),g}lineSliceAlong(e,n,s){let u=0;const m=[];for(let g=0;g<s.length-1;g++){const E=s[g],T=s[g+1],z=this.distance(E,T);if(u+=z,u>e&&0===m.length&&m.push(bd(E,T,(e-(u-z))/z)),u>=n)return m.push(bd(E,T,(n-(u-z))/z)),m;u>e&&m.push(T)}return m}bufferPoint(e,n){const s=n/this.ky,u=n/this.kx;return[e[0]-u,e[1]-s,e[0]+u,e[1]+s]}bufferBBox(e,n){const s=n/this.ky,u=n/this.kx;return[e[0]-u,e[1]-s,e[2]+u,e[3]+s]}insideBBox(e,n){return hu(e[0]-n[0])>=0&&hu(e[0]-n[2])<=0&&e[1]>=n[1]&&e[1]<=n[3]}}function Jd(t,e){return t[0]===e[0]&&t[1]===e[1]}function bd(t,e,n){const s=hu(e[0]-t[0]);return[t[0]+s*n,t[1]+(e[1]-t[1])*n]}function hu(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}class S0{constructor(e=[],n=((s,u)=>s<u?-1:s>u?1:0)){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:s}=this,u=n[e];for(;e>0;){const m=e-1>>1,g=n[m];if(s(u,g)>=0)break;n[e]=g,e=m}n[e]=u}_down(e){const{data:n,compare:s}=this,u=this.length>>1,m=n[e];for(;e<u;){let g=1+(e<<1);const E=g+1;if(E<this.length&&s(n[E],n[g])<0&&(g=E),s(n[g],m)>=0)break;n[e]=n[g],e=g}n[e]=m}}var Xi=8192;function oe(t,e){return e.dist-t.dist}const me=100,Se=50;function ge(t){const e=[1/0,1/0,-1/0,-1/0];if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ve(t){return t[1]-t[0]+1}function St(t,e){const n=t[1]>=t[0]&&t[1]<e;return n||console.warn("Distance Expression: Index is out of range"),n}function Kt(t,e){if(t[0]>t[1])return[null,null];const n=Ve(t);if(e){if(2===n)return[t,null];const s=Math.floor(n/2);return[[t[0],t[0]+s],[t[0]+s,t[1]]]}{if(1===n)return[t,null];const s=Math.floor(n/2)-1;return[[t[0],t[0]+s],[t[0]+s+1,t[1]]]}}function Ci(t,e){const n=[1/0,1/0,-1/0,-1/0];if(!St(e,t.length))return n;for(let s=e[0];s<=e[1];++s)zu(n,t[s]);return n}function xo(t){const e=[1/0,1/0,-1/0,-1/0];for(let n=0;n<t.length;++n)for(let s=0;s<t[n].length;++s)zu(e,t[n][s]);return e}function Ei(t,e,n){if(ge(t)||ge(e))return NaN;let s=0,u=0;return t[2]<e[0]&&(s=e[0]-t[2]),t[0]>e[2]&&(s=t[0]-e[2]),t[1]>e[3]&&(u=t[1]-e[3]),t[3]<e[1]&&(u=e[1]-t[3]),n.distance([0,0],[s,u])}function kr(t){return 360*t-180}function Ns(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Oa(t,e){const n=Math.pow(2,e.z),s=(t.y/Xi+e.y)/n;return[kr((t.x/Xi+e.x)/n),Ns(s)]}function qs(t,e){const n=[];for(let s=0;s<t.length;++s)n.push(Oa(t[s],e));return n}function Tl(t,e,n){const s=n.pointOnLine(e,t).point;return n.distance(t,s)}function Nl(t,e,n,s,u){const m=n.slice(s[0],s[1]+1);let g=1/0;for(let E=e[0];E<=e[1];++E)if(0===(g=Math.min(g,Tl(t[E],m,u))))return 0;return g}function vc(t,e,n,s,u){const m=Math.min(u.pointToSegmentDistance(t,n,s),u.pointToSegmentDistance(e,n,s)),g=Math.min(u.pointToSegmentDistance(n,t,e),u.pointToSegmentDistance(s,t,e));return Math.min(m,g)}function Zc(t,e,n,s,u){if(!St(e,t.length)||!St(s,n.length))return NaN;let m=1/0;for(let g=e[0];g<e[1];++g)for(let E=s[0];E<s[1];++E){if(Yd(t[g],t[g+1],n[E],n[E+1]))return 0;m=Math.min(m,vc(t[g],t[g+1],n[E],n[E+1],u))}return m}function Zu(t,e,n,s,u){if(!St(e,t.length)||!St(s,n.length))return NaN;let m=1/0;for(let g=e[0];g<=e[1];++g)for(let E=s[0];E<=s[1];++E)if(0===(m=Math.min(m,u.distance(t[g],n[E]))))return m;return m}function Dc(t,e,n){if(Ws(t,e,!0))return 0;let s=1/0;for(const u of e){const m=u.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(u[0]!==u[m-1]&&0===(s=Math.min(s,n.pointToSegmentDistance(t,u[m-1],u[0])))||0===(s=Math.min(s,Tl(t,u,n))))return s}return s}function Ou(t,e,n,s){if(!St(e,t.length))return NaN;for(let m=e[0];m<=e[1];++m)if(Ws(t[m],n,!0))return 0;let u=1/0;for(let m=e[0];m<e[1];++m)for(const g of n)for(let E=0,T=g.length,z=T-1;E<T;z=E++){if(Yd(t[m],t[m+1],g[z],g[E]))return 0;u=Math.min(u,vc(t[m],t[m+1],g[z],g[E],s))}return u}function T0(t,e){for(const n of t)for(let s=0;s<=n.length-1;++s)if(Ws(n[s],e,!0))return!0;return!1}function X0(t,e,n,s=1/0){const u=xo(t),m=xo(e);if(s!==1/0&&Ei(u,m,n)>=s)return s;if(Rd(u,m)){if(T0(t,e))return 0}else if(T0(e,t))return 0;let g=s;for(const E of t)for(let T=0,z=E.length,$=z-1;T<z;$=T++)for(const W of e)for(let Z=0,le=W.length,de=le-1;Z<le;de=Z++){if(Yd(E[$],E[T],W[de],W[Z]))return 0;g=Math.min(g,vc(E[$],E[T],W[de],W[Z],n))}return g}function _c(t,e,n,s,u,m,g){if(null===m||null===g)return;const E=Ei(Ci(s,m),Ci(u,g),n);E<e&&t.push({dist:E,range1:m,range2:g})}function v2(t,e,n,s,u=1/0){let m=Math.min(s.distance(t[0],n[0][0]),u);if(0===m)return m;const g=new S0([{dist:0,range1:[0,t.length-1],range2:[0,0]}],oe),E=e?Se:me,T=xo(n);for(;g.length;){const z=g.pop();if(z.dist>=m)continue;const $=z.range1;if(Ve($)<=E){if(!St($,t.length))return NaN;if(e){const W=Ou(t,$,n,s);if(0===(m=Math.min(m,W)))return m}else for(let W=$[0];W<=$[1];++W){const Z=Dc(t[W],n,s);if(0===(m=Math.min(m,Z)))return m}}else{const W=Kt($,e);if(null!==W[0]){const Z=Ei(Ci(t,W[0]),T,s);Z<m&&g.push({dist:Z,range1:W[0],range2:[0,0]})}if(null!==W[1]){const Z=Ei(Ci(t,W[1]),T,s);Z<m&&g.push({dist:Z,range1:W[1],range2:[0,0]})}}}return m}function eh(t,e,n,s,u,m=1/0){let g=Math.min(m,u.distance(t[0],n[0]));if(0===g)return g;const E=new S0([{dist:0,range1:[0,t.length-1],range2:[0,n.length-1]}],oe),T=e?Se:me,z=s?Se:me;for(;E.length;){const $=E.pop();if($.dist>=g)continue;const W=$.range1,Z=$.range2;if(Ve(W)<=T&&Ve(Z)<=z){if(!St(W,t.length)||!St(Z,n.length))return NaN;if(e&&s?g=Math.min(g,Zc(t,W,n,Z,u)):e||s?e&&!s?g=Math.min(g,Nl(n,Z,t,W,u)):!e&&s&&(g=Math.min(g,Nl(t,W,n,Z,u))):g=Math.min(g,Zu(t,W,n,Z,u)),0===g)return g}else{const le=Kt(W,e),de=Kt(Z,s);_c(E,g,u,t,n,le[0],de[0]),_c(E,g,u,t,n,le[0],de[1]),_c(E,g,u,t,n,le[1],de[0]),_c(E,g,u,t,n,le[1],de[1])}}return g}function M0(t,e,n,s,u=1/0){let m=u;const g=Ci(t,[0,t.length-1]);for(const E of n)if(!(m!==1/0&&Ei(g,Ci(E,[0,E.length-1]),s)>=m)&&(m=Math.min(m,eh(t,e,E,!0,s,m)),0===m))return m;return m}function ud(t,e,n,s,u=1/0){let m=u;const g=Ci(t,[0,t.length-1]);for(const E of n){if(m!==1/0&&Ei(g,xo(E),s)>=m)continue;const T=v2(t,e,E,s,m);if(isNaN(T))return T;if(0===(m=Math.min(m,T)))return m}return m}function Gh(t){return"Point"===t||"MultiPoint"===t||"LineString"===t||"MultiLineString"===t||"Polygon"===t||"MultiPolygon"===t}class hh{constructor(e,n){this.type=Ee,this.geojson=e,this.geometries=n}static parse(e,n){if(2!==e.length)return n.error(`'distance' expression requires either one argument, but found ' ${e.length-1} instead.`);if(Sl(e[1])){const s=e[1];if("FeatureCollection"===s.type){for(let u=0;u<s.features.length;++u)if(Gh(s.features[u].geometry.type))return new hh(s,s.features[u].geometry)}else if("Feature"===s.type){if(Gh(s.geometry.type))return new hh(s,s.geometry)}else if(Gh(s.type))return new hh(s,s)}return n.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(e){const n=e.geometry(),s=e.canonicalID();if(null!=n&&null!=s){if("Point"===e.geometryType())return function(u,m,g){const E=[];for(const z of u)for(const $ of z)E.push(Oa($,m));const T=new yd(E[0][1],"meters");return"Point"===g.type||"MultiPoint"===g.type||"LineString"===g.type?eh(E,!1,"Point"===g.type?[g.coordinates]:g.coordinates,"LineString"===g.type,T):"MultiLineString"===g.type?M0(E,!1,g.coordinates,T):"Polygon"===g.type||"MultiPolygon"===g.type?ud(E,!1,"Polygon"===g.type?[g.coordinates]:g.coordinates,T):null}(n,s,this.geometries);if("LineString"===e.geometryType())return function(u,m,g){const E=[];for(const z of u){const $=[];for(const W of z)$.push(Oa(W,m));E.push($)}const T=new yd(E[0][0][1],"meters");if("Point"===g.type||"MultiPoint"===g.type||"LineString"===g.type)return M0("Point"===g.type?[g.coordinates]:g.coordinates,"LineString"===g.type,E,T);if("MultiLineString"===g.type){let z=1/0;for(let $=0;$<g.coordinates.length;$++){const W=M0(g.coordinates[$],!0,E,T,z);if(isNaN(W))return W;if(0===(z=Math.min(z,W)))return z}return z}if("Polygon"===g.type||"MultiPolygon"===g.type){let z=1/0;for(let $=0;$<E.length;$++){const W=ud(E[$],!0,"Polygon"===g.type?[g.coordinates]:g.coordinates,T,z);if(isNaN(W))return W;if(0===(z=Math.min(z,W)))return z}return z}return null}(n,s,this.geometries);if("Polygon"===e.geometryType())return function(u,m,g){const E=[];for(const z of function($,W){const Z=$.length;if(Z<=1)return[$];const le=[];let de,be;for(let xe=0;xe<Z;xe++){const $e=tc($[xe]);0!==$e&&($[xe].area=Math.abs($e),void 0===be&&(be=$e<0),be===$e<0?(de&&le.push(de),de=[$[xe]]):de.push($[xe]))}return de&&le.push(de),le}(u)){const $=[];for(let W=0;W<z.length;++W)$.push(qs(z[W],m));E.push($)}const T=new yd(E[0][0][0][1],"meters");if("Point"===g.type||"MultiPoint"===g.type||"LineString"===g.type)return ud("Point"===g.type?[g.coordinates]:g.coordinates,"LineString"===g.type,E,T);if("MultiLineString"===g.type){let z=1/0;for(let $=0;$<g.coordinates.length;$++){const W=ud(g.coordinates[$],!0,E,T,z);if(isNaN(W))return W;if(0===(z=Math.min(z,W)))return z}return z}return"Polygon"===g.type||"MultiPolygon"===g.type?function(z,$,W){let Z=1/0;for(const le of z)for(const de of $){const be=X0(le,de,W,Z);if(isNaN(be))return be;if(0===(Z=Math.min(Z,be)))return Z}return Z}("Polygon"===g.type?[g.coordinates]:g.coordinates,E,T):null}(n,s,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Wh(t,e){switch(t){case"string":return Pd(e);case"number":return+e;case"boolean":return!!e;case"color":return Zs.parse(e);case"formatted":return ja.fromString(Pd(e));case"resolvedImage":return cc.fromString(Pd(e))}return e}function Qu(t,e,n,s){return void 0!==s&&(t=s*Math.round(t/s)),void 0!==e&&t<e&&(t=e),void 0!==n&&t>n&&(t=n),t}class A0{constructor(e,n,s){this.type=e,this.key=n,this.scope=s}static parse(e,n){let s=n.expectedType;if(null==s&&(s=ui),e.length<2||e.length>3)return n.error("Invalid number of arguments for 'config' expression.");const u=n.parse(e[1],1);if(!(u instanceof md))return n.error("Key name of 'config' expression must be a string literal.");if(e.length>=3){const m=n.parse(e[2],2);return m instanceof md?new A0(s,Pd(u.value),Pd(m.value)):n.error("Scope of 'config' expression must be a string literal.")}return new A0(s,Pd(u.value))}evaluate(e){const n=[this.key,this.scope,e.scope].filter(Boolean).join("\x1f"),s=e.getConfig(n);if(!s)return null;const{type:u,value:m,values:g,minValue:E,maxValue:T,stepValue:z}=s,$=s.default.evaluate(e);let W=$;if(m){const Z=e.scope;e.scope=(Z||"").split("\x1f").slice(1).join("\x1f"),W=m.evaluate(e),e.scope=Z}return u&&(W=Wh(u,W)),void 0===W||void 0===E&&void 0===T&&void 0===z||("number"==typeof W?W=Qu(W,E,T,z):Array.isArray(W)&&(W=W.map(Z=>"number"==typeof Z?Qu(Z,E,T,z):Z))),void 0!==m&&void 0!==W&&g&&!g.includes(W)&&(W=$,u&&(W=Wh(u,W))),(u&&u!==this.type||void 0!==W&&Qa(W)!==this.type)&&(W=Wh(this.type.kind,W)),W}eachChild(){}outputDefined(){return!1}serialize(){const e=["config",this.key];return this.scope&&e.concat(this.key),e}}function qh(t){if(t instanceof vl&&("get"===t.name&&1===t.args.length||"feature-state"===t.name||"has"===t.name&&1===t.args.length||"properties"===t.name||"geometry-type"===t.name||"id"===t.name||/^filter-/.test(t.name))||t instanceof cd||t instanceof hh)return!1;let e=!0;return t.eachChild(n=>{e&&!qh(n)&&(e=!1)}),e}function Dh(t){if(t instanceof vl&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(n=>{e&&!Dh(n)&&(e=!1)}),e}function z1(t){if(t instanceof A0)return!1;let e=!0;return t.eachChild(n=>{e&&!z1(n)&&(e=!1)}),e}function ph(t,e){if(t instanceof vl&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild(s=>{n&&!ph(s,e)&&(n=!1)}),n}class K0{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(2!==e.length||"string"!=typeof e[1])return n.error("'var' expression requires exactly one string literal argument.");const s=e[1];return n.scope.has(s)?new K0(s,n.scope.get(s)):n.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Y0{constructor(e,n=[],s,u=new xu,m=[],g,E){this.registry=e,this.path=n,this.key=n.map(T=>`[${T}]`).join(""),this.scope=u,this.errors=m,this.expectedType=s,this._scope=g,this.options=E}parse(e,n,s,u,m={}){return n||s?this.concat(n,s,u)._parse(e,m):this._parse(e,m)}_parse(e,n){function s(u,m,g){return"assert"===g?new Ku(m,[u]):"coerce"===g?new Ks(m,[u]):u}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u="string"==typeof e[0]?this.registry[e[0]]:void 0;if(u){let m=u.parse(e,this);if(!m)return null;if(this.expectedType){const g=this.expectedType,E=m.type;if("string"!==g.kind&&"number"!==g.kind&&"boolean"!==g.kind&&"object"!==g.kind&&"array"!==g.kind||"value"!==E.kind)if("color"!==g.kind&&"formatted"!==g.kind&&"resolvedImage"!==g.kind||"value"!==E.kind&&"string"!==E.kind){if(this.checkSubtype(g,E))return null}else m=s(m,g,n.typeAnnotation||"coerce");else m=s(m,g,n.typeAnnotation||"assert")}if(!(m instanceof md)&&"resolvedImage"!==m.type.kind&&g1(m)){const g=new du(this._scope,this.options);try{m=new md(m.type,m.evaluate(g))}catch(E){return this.error(E.message),null}}return m}return Ks.parse(["to-array",e],this)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,n,s){const u="number"==typeof e?this.path.concat(e):this.path,m=s?this.scope.concat(s):this.scope;return new Y0(this.registry,u,n||null,m,this.errors,this._scope,this.options)}error(e,...n){const s=`${this.key}${n.map(u=>`[${u}]`).join("")}`;this.errors.push(new wu(s,e))}checkSubtype(e,n){const s=pa(e,n);return s&&this.error(s),s}}var Qc=Y0;function g1(t){if(t instanceof K0)return g1(t.boundExpression);if(t instanceof vl&&"error"===t.name||t instanceof kh||t instanceof cd||t instanceof hh||t instanceof A0)return!1;const e=t instanceof Ks||t instanceof Ku;let n=!0;return t.eachChild(s=>{n=e?n&&g1(s):n&&s instanceof md}),!!n&&qh(t)&&ph(t,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function wd(t,e){const n=t.length-1;let s,u,m=0,g=n,E=0;for(;m<=g;)if(E=Math.floor((m+g)/2),s=t[E],u=t[E+1],s<=e){if(E===n||e<u)return E;m=E+1}else{if(!(s>e))throw new Bl("Input is not a number.");g=E-1}return 0}class Ph{constructor(e,n,s){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[u,m]of s)this.labels.push(u),this.outputs.push(m)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");const s=n.parse(e[1],1,Ee);if(!s)return null;const u=[];let m=null;n.expectedType&&"value"!==n.expectedType.kind&&(m=n.expectedType);for(let g=1;g<e.length;g+=2){const E=1===g?-1/0:e[g],T=e[g+1],z=g,$=g+1;if("number"!=typeof E)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(u.length&&u[u.length-1][0]>=E)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const W=n.parse(T,$,m);if(!W)return null;m=m||W.type,u.push([E,W])}return new Ph(m,s,u)}evaluate(e){const n=this.labels,s=this.outputs;if(1===n.length)return s[0].evaluate(e);const u=this.input.evaluate(e);if(u<=n[0])return s[0].evaluate(e);const m=n.length;return u>=n[m-1]?s[m-1].evaluate(e):s[wd(n,u)].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&e.push(this.labels[n]),e.push(this.outputs[n].serialize());return e}}const th=4/29,nh=6/29,fh=3*nh*nh,J1=nh*nh*nh,Q0=Math.PI/180,Cp=180/Math.PI;function Xh(t){return t>J1?Math.pow(t,1/3):t/fh+th}function D0(t){return t>nh?t*t*t:fh*(t-th)}function mh(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function P0(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ep(t){const e=P0(t.r),n=P0(t.g),s=P0(t.b),u=Xh((.4124564*e+.3575761*n+.1804375*s)/.95047),m=Xh((.2126729*e+.7151522*n+.072175*s)/1);return{l:116*m-16,a:500*(u-m),b:200*(m-Xh((.0193339*e+.119192*n+.9503041*s)/1.08883)),alpha:t.a}}function el(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,s=isNaN(t.b)?e:e-t.b/200;return e=1*D0(e),n=.95047*D0(n),s=1.08883*D0(s),new Zs(mh(3.2404542*n-1.5371385*e-.4985314*s),mh(-.969266*n+1.8760108*e+.041556*s),mh(.0556434*n-.2040259*e+1.0572252*s),t.alpha)}function sr(t,e,n){const s=e-t;return t+n*(s>180||s<-180?s-360*Math.round(s/360):s)}const ps={forward:ep,reverse:el,interpolate:function(t,e,n){return{l:Cr(t.l,e.l,n),a:Cr(t.a,e.a,n),b:Cr(t.b,e.b,n),alpha:Cr(t.alpha,e.alpha,n)}}},_l={forward:function(t){const{l:e,a:n,b:s}=ep(t),u=Math.atan2(s,n)*Cp;return{h:u<0?u+360:u,c:Math.sqrt(n*n+s*s),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Q0,n=t.c;return el({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:sr(t.h,e.h,n),c:Cr(t.c,e.c,n),l:Cr(t.l,e.l,n),alpha:Cr(t.alpha,e.alpha,n)}}};var xd=Object.freeze({__proto__:null,hcl:_l,lab:ps});class Wa{constructor(e,n,s,u,m){this.type=e,this.operator=n,this.interpolation=s,this.input=u,this.labels=[],this.outputs=[];for(const[g,E]of m)this.labels.push(g),this.outputs.push(E)}static interpolationFactor(e,n,s,u){let m=0;if("exponential"===e.name)m=pl(n,e.base,s,u);else if("linear"===e.name)m=pl(n,1,s,u);else if("cubic-bezier"===e.name){const g=e.controlPoints;m=new yu(g[0],g[1],g[2],g[3]).solve(pl(n,1,s,u))}return m}static parse(e,n){let[s,u,m,...g]=e;if(!Array.isArray(u)||0===u.length)return n.error("Expected an interpolation type expression.",1);if("linear"===u[0])u={name:"linear"};else if("exponential"===u[0]){const z=u[1];if("number"!=typeof z)return n.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:z}}else{if("cubic-bezier"!==u[0])return n.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const z=u.slice(1);if(4!==z.length||z.some($=>"number"!=typeof $||$<0||$>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:z}}}if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(m=n.parse(m,2,Ee),!m)return null;const E=[];let T=null;"interpolate-hcl"===s||"interpolate-lab"===s?T=Gt:n.expectedType&&"value"!==n.expectedType.kind&&(T=n.expectedType);for(let z=0;z<g.length;z+=2){const $=g[z],W=g[z+1],Z=z+3,le=z+4;if("number"!=typeof $)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(E.length&&E[E.length-1][0]>=$)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const de=n.parse(W,le,T);if(!de)return null;T=T||de.type,E.push([$,de])}return"number"===T.kind||"color"===T.kind||"array"===T.kind&&"number"===T.itemType.kind&&"number"==typeof T.N?new Wa(T,s,u,m,E):n.error(`Type ${Pr(T)} is not interpolatable.`)}evaluate(e){const n=this.labels,s=this.outputs;if(1===n.length)return s[0].evaluate(e);const u=this.input.evaluate(e);if(u<=n[0])return s[0].evaluate(e);const m=n.length;if(u>=n[m-1])return s[m-1].evaluate(e);const g=wd(n,u),E=Wa.interpolationFactor(this.interpolation,u,n[g],n[g+1]),T=s[g].evaluate(e),z=s[g+1].evaluate(e);return"interpolate"===this.operator?Xu[this.type.kind.toLowerCase()](T,z,E):"interpolate-hcl"===this.operator?_l.reverse(_l.interpolate(_l.forward(T),_l.forward(z),E)):ps.reverse(ps.interpolate(ps.forward(T),ps.forward(z),E))}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const n=[this.operator,e,this.input.serialize()];for(let s=0;s<this.labels.length;s++)n.push(this.labels[s],this.outputs[s].serialize());return n}}function pl(t,e,n,s){const u=s-n,m=t-n;return 0===u?0:1===e?m/u:(Math.pow(e,m)-1)/(Math.pow(e,u)-1)}class gh{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let s=null;const u=n.expectedType;u&&"value"!==u.kind&&(s=u);const m=[];for(const E of e.slice(1)){const T=n.parse(E,1+m.length,s,void 0,{typeAnnotation:"omit"});if(!T)return null;s=s||T.type,m.push(T)}const g=u&&m.some(E=>pa(u,E.type));return new gh(g?ui:s,m)}evaluate(e){let n,s=null,u=0;for(const m of this.args){if(u++,s=m.evaluate(e),s&&s instanceof cc&&!s.available&&(n||(n=s),s=null,u===this.args.length))return n;if(null!==s)break}return s}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class Ua{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const s=[];for(let m=1;m<e.length-1;m+=2){const g=e[m];if("string"!=typeof g)return n.error(`Expected string, but found ${typeof g} instead.`,m);if(/[^a-zA-Z0-9_]/.test(g))return n.error("Variable names must contain only alphanumeric characters or '_'.",m);const E=n.parse(e[m+1],m+1);if(!E)return null;s.push([g,E])}const u=n.parse(e[e.length-1],e.length-1,n.expectedType,s);return u?new Ua(s,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[n,s]of this.bindings)e.push(n,s.serialize());return e.push(this.result.serialize()),e}}class Fl{constructor(e,n,s){this.type=e,this.index=n,this.input=s}static parse(e,n){if(3!==e.length)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,Ee),u=n.parse(e[2],2,Js(n.expectedType||ui));return s&&u?new Fl(u.type.itemType,s,u):null}evaluate(e){const n=this.index.evaluate(e),s=this.input.evaluate(e);if(n<0)throw new Bl(`Array index out of bounds: ${n} < 0.`);if(n>=s.length)throw new Bl(`Array index out of bounds: ${n} > ${s.length-1}.`);if(n!==Math.floor(n))throw new Bl(`Array index must be an integer, but found ${n} instead.`);return s[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Od{constructor(e,n){this.type=Ce,this.needle=e,this.haystack=n}static parse(e,n){if(3!==e.length)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,ui),u=n.parse(e[2],2,ui);return s&&u?Ll(s.type,[Ce,Bt,Ee,fe,ui])?new Od(s,u):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(s.type)} instead`):null}evaluate(e){const n=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(null==s)return!1;if(!Ql(n,["boolean","string","number","null"]))throw new Bl(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(Qa(n))} instead.`);if(!Ql(s,["string","array"]))throw new Bl(`Expected second argument to be of type array or string, but found ${Pr(Qa(s))} instead.`);return s.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class $s{constructor(e,n,s){this.type=Ee,this.needle=e,this.haystack=n,this.fromIndex=s}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,ui),u=n.parse(e[2],2,ui);if(!s||!u)return null;if(!Ll(s.type,[Ce,Bt,Ee,fe,ui]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(s.type)} instead`);if(4===e.length){const m=n.parse(e[3],3,Ee);return m?new $s(s,u,m):null}return new $s(s,u)}evaluate(e){const n=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!Ql(n,["boolean","string","number","null"]))throw new Bl(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(Qa(n))} instead.`);if(!Ql(s,["string","array"]))throw new Bl(`Expected second argument to be of type array or string, but found ${Pr(Qa(s))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return s.indexOf(n,u)}return s.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Kh{constructor(e,n,s,u,m,g){this.inputType=e,this.type=n,this.input=s,this.cases=u,this.outputs=m,this.otherwise=g}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return n.error("Expected an even number of arguments.");let s,u;n.expectedType&&"value"!==n.expectedType.kind&&(u=n.expectedType);const m={},g=[];for(let z=2;z<e.length-1;z+=2){let $=e[z];const W=e[z+1];Array.isArray($)||($=[$]);const Z=n.concat(z);if(0===$.length)return Z.error("Expected at least one branch label.");for(const de of $){if("number"!=typeof de&&"string"!=typeof de)return Z.error("Branch labels must be numbers or strings.");if("number"==typeof de&&Math.abs(de)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof de&&Math.floor(de)!==de)return Z.error("Numeric branch labels must be integer values.");if(s){if(Z.checkSubtype(s,Qa(de)))return null}else s=Qa(de);if(void 0!==m[String(de)])return Z.error("Branch labels must be unique.");m[String(de)]=g.length}const le=n.parse(W,z,u);if(!le)return null;u=u||le.type,g.push(le)}const E=n.parse(e[1],1,ui);if(!E)return null;const T=n.parse(e[e.length-1],e.length-1,u);return T?"value"!==E.type.kind&&n.concat(1).checkSubtype(s,E.type)?null:new Kh(s,u,E,m,g,T):null}evaluate(e){const n=this.input.evaluate(e);return(Qa(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),s=[],u={};for(const g of n){const E=u[this.cases[g]];void 0===E?(u[this.cases[g]]=s.length,s.push([this.cases[g],[g]])):s[E][1].push(g)}const m=g=>"number"===this.inputType.kind?Number(g):g;for(const[g,E]of s)e.push(1===E.length?m(E[0]):E.map(m)),e.push(this.outputs[g].serialize());return e.push(this.otherwise.serialize()),e}}class Yh{constructor(e,n,s){this.type=e,this.branches=n,this.otherwise=s}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return n.error("Expected an odd number of arguments.");let s;n.expectedType&&"value"!==n.expectedType.kind&&(s=n.expectedType);const u=[];for(let g=1;g<e.length-1;g+=2){const E=n.parse(e[g],g,Ce);if(!E)return null;const T=n.parse(e[g+1],g+1,s);if(!T)return null;u.push([E,T]),s=s||T.type}const m=n.parse(e[e.length-1],e.length-1,s);return m?new Yh(s,u,m):null}evaluate(e){for(const[n,s]of this.branches)if(n.evaluate(e))return s.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,s]of this.branches)e(n),e(s);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class pu{constructor(e,n,s,u){this.type=e,this.input=n,this.beginIndex=s,this.endIndex=u}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,ui),u=n.parse(e[2],2,Ee);if(!s||!u)return null;if(!Ll(s.type,[Js(ui),Bt,ui]))return n.error(`Expected first argument to be of type array or string, but found ${Pr(s.type)} instead`);if(4===e.length){const m=n.parse(e[3],3,Ee);return m?new pu(s.type,s,u,m):null}return new pu(s.type,s,u)}evaluate(e){const n=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!Ql(n,["string","array"]))throw new Bl(`Expected first argument to be of type array or string, but found ${Pr(Qa(n))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return n.slice(s,u)}return n.slice(s)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function dc(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Ld(t,e,n,s){return 0===s.compare(e,n)}function Vl(t,e,n){const s="=="!==t&&"!="!==t;return class Zx{constructor(m,g,E){this.type=Ce,this.lhs=m,this.rhs=g,this.collator=E,this.hasUntypedArgument="value"===m.type.kind||"value"===g.type.kind}static parse(m,g){if(3!==m.length&&4!==m.length)return g.error("Expected two or three arguments.");const E=m[0];let T=g.parse(m[1],1,ui);if(!T)return null;if(!dc(E,T.type))return g.concat(1).error(`"${E}" comparisons are not supported for type '${Pr(T.type)}'.`);let z=g.parse(m[2],2,ui);if(!z)return null;if(!dc(E,z.type))return g.concat(2).error(`"${E}" comparisons are not supported for type '${Pr(z.type)}'.`);if(T.type.kind!==z.type.kind&&"value"!==T.type.kind&&"value"!==z.type.kind)return g.error(`Cannot compare types '${Pr(T.type)}' and '${Pr(z.type)}'.`);s&&("value"===T.type.kind&&"value"!==z.type.kind?T=new Ku(z.type,[T]):"value"!==T.type.kind&&"value"===z.type.kind&&(z=new Ku(T.type,[z])));let $=null;if(4===m.length){if("string"!==T.type.kind&&"string"!==z.type.kind&&"value"!==T.type.kind&&"value"!==z.type.kind)return g.error("Cannot use collator to compare non-string types.");if($=g.parse(m[3],3,Ko),!$)return null}return new Zx(T,z,$)}evaluate(m){const g=this.lhs.evaluate(m),E=this.rhs.evaluate(m);if(s&&this.hasUntypedArgument){const T=Qa(g),z=Qa(E);if(T.kind!==z.kind||"string"!==T.kind&&"number"!==T.kind)throw new Bl(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${T.kind}, ${z.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const T=Qa(g),z=Qa(E);if("string"!==T.kind||"string"!==z.kind)return e(m,g,E)}return this.collator?n(m,g,E,this.collator.evaluate(m)):e(m,g,E)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[t];return this.eachChild(g=>{m.push(g.serialize())}),m}}}const ih=Vl("==",function(t,e,n){return e===n},Ld),J0=Vl("!=",function(t,e,n){return e!==n},function(t,e,n,s){return!Ld(0,e,n,s)}),v1=Vl("<",function(t,e,n){return e<n},function(t,e,n,s){return s.compare(e,n)<0}),Zh=Vl(">",function(t,e,n){return e>n},function(t,e,n,s){return s.compare(e,n)>0}),Bd=Vl("<=",function(t,e,n){return e<=n},function(t,e,n,s){return s.compare(e,n)<=0}),Vc=Vl(">=",function(t,e,n){return e>=n},function(t,e,n,s){return s.compare(e,n)>=0});class ns{constructor(e,n,s,u,m,g){this.type=Bt,this.number=e,this.locale=n,this.currency=s,this.unit=u,this.minFractionDigits=m,this.maxFractionDigits=g}static parse(e,n){if(3!==e.length)return n.error("Expected two arguments.");const s=n.parse(e[1],1,Ee);if(!s)return null;const u=e[2];if("object"!=typeof u||Array.isArray(u))return n.error("NumberFormat options argument must be an object.");let m=null;if(u.locale&&(m=n.parse(u.locale,1,Bt),!m))return null;let g=null;if(u.currency&&(g=n.parse(u.currency,1,Bt),!g))return null;let E=null;if(u.unit&&(E=n.parse(u.unit,1,Bt),!E))return null;let T=null;if(u["min-fraction-digits"]&&(T=n.parse(u["min-fraction-digits"],1,Ee),!T))return null;let z=null;return u["max-fraction-digits"]&&(z=n.parse(u["max-fraction-digits"],1,Ee),!z)?null:new ns(s,m,g,E,T,z)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Nd{constructor(e){this.type=Ee,this.input=e}static parse(e,n){if(2!==e.length)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const s=n.parse(e[1],1);return s?"array"!==s.type.kind&&"string"!==s.type.kind&&"value"!==s.type.kind?n.error(`Expected argument of type string or array, but found ${Pr(s.type)} instead.`):new Nd(s):null}evaluate(e){const n=this.input.evaluate(e);if("string"==typeof n||Array.isArray(n))return n.length;throw new Bl(`Expected value to be of type string or array, but found ${Pr(Qa(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(n=>{e.push(n.serialize())}),e}}function Fd(t){return function(){t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}const Jc={"==":ih,"!=":J0,">":Zh,"<":v1,">=":Vc,"<=":Bd,array:Ku,at:Fl,boolean:Ku,case:Yh,coalesce:gh,collator:kh,format:gd,image:Ma,in:Od,"index-of":$s,interpolate:Wa,"interpolate-hcl":Wa,"interpolate-lab":Wa,length:Nd,let:Ua,literal:md,match:Kh,number:Ku,"number-format":ns,object:Ku,slice:pu,step:Ph,string:Ku,"to-boolean":Ks,"to-color":Ks,"to-number":Ks,"to-string":Ks,var:K0,within:cd,distance:hh,config:A0};function R0(t,[e,n,s,u]){e=e.evaluate(t),n=n.evaluate(t),s=s.evaluate(t);const m=u?u.evaluate(t):1,g=Gl(e,n,s,m);if(g)throw new Bl(g);return new Zs(e/255*m,n/255*m,s/255*m,m)}function Qh(t,[e,n,s,u]){e=e.evaluate(t),n=n.evaluate(t),s=s.evaluate(t);const m=u?u.evaluate(t):1,g=($=n,W=s,Z=m,"number"==typeof(z=e)&&z>=0&&z<=360?"number"==typeof $&&$>=0&&$<=100&&"number"==typeof W&&W>=0&&W<=100?void 0===Z||"number"==typeof Z&&Z>=0&&Z<=1?null:`Invalid hsla value [${[z,$,W,Z].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${("number"==typeof Z?[z,$,W,Z]:[z,$,W]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${("number"==typeof Z?[z,$,W,Z]:[z,$,W]).join(", ")}]: 'h' must be between 0 and 360.`);var z,$,W,Z;if(g)throw new Bl(g);const E=`hsla(${e}, ${n}%, ${s}%, ${m})`,T=Zs.parse(E);if(!T)throw new Bl(`Failed to parse HSLA color: ${E}`);return T}function Wl(t,e){return t in e}function vh(t,e){const n=e[t];return void 0===n?null:n}function ql(t){return{type:t}}function fu(t){return{result:"success",value:t}}function Rh(t){return{result:"error",value:t}}function zh(t,e){return!!t&&!!t.parameters&&t.parameters.indexOf(e)>-1}function z0(t){return"data-driven"===t["property-type"]}function v(t){return zh(t.expression,"measure-light")}function r(t){return zh(t.expression,"zoom")}function d(t){return!!t.expression&&t.expression.interpolated}function b(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function M(t){return t}function R(t,e){const n="color"===e.type,s=t.stops&&"object"==typeof t.stops[0][0],u=s||!(s||void 0!==t.property),m=t.type||(d(e)?"exponential":"interval");if(n&&((t=lc({},t)).stops&&(t.stops=t.stops.map(z=>[z[0],Zs.parse(z[1])])),t.default=Zs.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!xd[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let g,E,T;if("exponential"===m)g=re;else if("interval"===m)g=J;else if("categorical"===m){g=H,E=Object.create(null);for(const z of t.stops)E[z[0]]=z[1];T=typeof t.stops[0][0]}else{if("identity"!==m)throw new Error(`Unknown function type "${m}"`);g=he}if(s){const z={},$=[];for(let le=0;le<t.stops.length;le++){const de=t.stops[le],be=de[0].zoom;void 0===z[be]&&(z[be]={zoom:be,type:t.type,property:t.property,default:t.default,stops:[]},$.push(be)),z[be].stops.push([de[0].value,de[1]])}const W=[];for(const le of $)W.push([z[le].zoom,R(z[le],e)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:Wa.interpolationFactor.bind(void 0,Z),zoomStops:W.map(le=>le[0]),evaluate:({zoom:le},de)=>re({stops:W,base:t.base},e,le).evaluate(le,de)}}if(u){const z="exponential"===m?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Wa.interpolationFactor.bind(void 0,z),zoomStops:t.stops.map($=>$[0]),evaluate:({zoom:$})=>g(t,e,$,E,T)}}return{kind:"source",evaluate(z,$){const W=$&&$.properties?$.properties[t.property]:void 0;return void 0===W?N(t.default,e.default):g(t,e,W,E,T)}}}function N(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function H(t,e,n,s,u){return N(typeof n===u?s[n]:void 0,t.default,e.default)}function J(t,e,n){if("number"!==vd(n))return N(t.default,e.default);const s=t.stops.length;if(1===s||n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[s-1][0])return t.stops[s-1][1];const u=wd(t.stops.map(m=>m[0]),n);return t.stops[u][1]}function re(t,e,n){const s=void 0!==t.base?t.base:1;if("number"!==vd(n))return N(t.default,e.default);const u=t.stops.length;if(1===u||n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[u-1][0])return t.stops[u-1][1];const m=wd(t.stops.map($=>$[0]),n),g=function($,W,Z,le){const de=le-Z,be=$-Z;return 0===de?0:1===W?be/de:(Math.pow(W,be)-1)/(Math.pow(W,de)-1)}(n,s,t.stops[m][0],t.stops[m+1][0]),E=t.stops[m][1],T=t.stops[m+1][1];let z=Xu[e.type]||M;if(t.colorSpace&&"rgb"!==t.colorSpace){const $=xd[t.colorSpace];z=(W,Z)=>$.reverse($.interpolate($.forward(W),$.forward(Z),g))}return"function"==typeof E.evaluate?{evaluate(...$){const W=E.evaluate.apply(void 0,$),Z=T.evaluate.apply(void 0,$);if(void 0!==W&&void 0!==Z)return z(W,Z,g)}}:z(E,T,g)}function he(t,e,n){return"color"===e.type?n=Zs.parse(n):"formatted"===e.type?n=ja.fromString(n.toString()):"resolvedImage"===e.type?n=cc.fromString(n.toString()):vd(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),N(n,t.default,e.default)}vl.register(Jc,{error:[{kind:"error"},[Bt],(t,[e])=>{throw new Bl(e.evaluate(t))}],typeof:[Bt,[ui],(t,[e])=>Pr(Qa(e.evaluate(t)))],"to-rgba":[Js(Ee,4),[Gt],(t,[e])=>e.evaluate(t).toRenderColor(null).toArray()],rgb:[Gt,[Ee,Ee,Ee],R0],rgba:[Gt,[Ee,Ee,Ee,Ee],R0],hsl:[Gt,[Ee,Ee,Ee],Qh],hsla:[Gt,[Ee,Ee,Ee,Ee],Qh],has:{type:Ce,overloads:[[[Bt],(t,[e])=>Wl(e.evaluate(t),t.properties())],[[Bt,Tn],(t,[e,n])=>Wl(e.evaluate(t),n.evaluate(t))]]},get:{type:ui,overloads:[[[Bt],(t,[e])=>vh(e.evaluate(t),t.properties())],[[Bt,Tn],(t,[e,n])=>vh(e.evaluate(t),n.evaluate(t))]]},"feature-state":[ui,[Bt],(t,[e])=>vh(e.evaluate(t),t.featureState||{})],properties:[Tn,[],t=>t.properties()],"geometry-type":[Bt,[],t=>t.geometryType()],id:[ui,[],t=>t.id()],zoom:[Ee,[],t=>t.globals.zoom],pitch:[Ee,[],t=>t.globals.pitch||0],"distance-from-center":[Ee,[],t=>t.distanceFromCenter()],"measure-light":[Ee,[Bt],(t,[e])=>t.measureLight(e.evaluate(t))],"heatmap-density":[Ee,[],t=>t.globals.heatmapDensity||0],"line-progress":[Ee,[],t=>t.globals.lineProgress||0],"raster-value":[Ee,[],t=>t.globals.rasterValue||0],"raster-particle-speed":[Ee,[],t=>t.globals.rasterParticleSpeed||0],"sky-radial-progress":[Ee,[],t=>t.globals.skyRadialProgress||0],accumulated:[ui,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[Ee,ql(Ee),(t,e)=>{let n=0;for(const s of e)n+=s.evaluate(t);return n}],"*":[Ee,ql(Ee),(t,e)=>{let n=1;for(const s of e)n*=s.evaluate(t);return n}],"-":{type:Ee,overloads:[[[Ee,Ee],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[Ee],(t,[e])=>-e.evaluate(t)]]},"/":[Ee,[Ee,Ee],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[Ee,[Ee,Ee],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[Ee,[],()=>Math.LN2],pi:[Ee,[],()=>Math.PI],e:[Ee,[],()=>Math.E],"^":[Ee,[Ee,Ee],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[Ee,[Ee],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ee,[Ee],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ee,[Ee],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ee,[Ee],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ee,[Ee],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ee,[Ee],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ee,[Ee],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ee,[Ee],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ee,ql(Ee),(t,e)=>Math.min(...e.map(n=>n.evaluate(t)))],max:[Ee,ql(Ee),(t,e)=>Math.max(...e.map(n=>n.evaluate(t)))],abs:[Ee,[Ee],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ee,[Ee],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ee,[Ee],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ee,[Ee],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Ce,[Bt,ui],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[Ce,[ui],(t,[e])=>t.id()===e.value],"filter-type-==":[Ce,[Bt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Ce,[Bt,ui],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s<u}],"filter-id-<":[Ce,[ui],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n<s}],"filter->":[Ce,[Bt,ui],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s>u}],"filter-id->":[Ce,[ui],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n>s}],"filter-<=":[Ce,[Bt,ui],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s<=u}],"filter-id-<=":[Ce,[ui],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n<=s}],"filter->=":[Ce,[Bt,ui],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s>=u}],"filter-id->=":[Ce,[ui],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n>=s}],"filter-has":[Ce,[ui],(t,[e])=>e.value in t.properties()],"filter-has-id":[Ce,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Ce,[Js(Bt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Ce,[Js(ui)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Ce,[Bt,Js(ui)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Ce,[Bt,Js(ui)],(t,[e,n])=>function(s,u,m,g){for(;m<=g;){const E=m+g>>1;if(u[E]===s)return!0;u[E]>s?g=E-1:m=E+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Ce,overloads:[[[Ce,Ce],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[ql(Ce),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:Ce,overloads:[[[Ce,Ce],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[ql(Ce),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[Ce,[Ce],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Ce,[Bt],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[Bt,[Bt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Bt,[Bt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Bt,ql(ui),(t,e)=>e.map(n=>Pd(n.evaluate(t))).join("")],"resolved-locale":[Bt,[Ko],(t,[e])=>e.evaluate(t).resolvedLocale()],random:[Ee,[Ee,Ee,ui],(t,e)=>{const[n,s,u]=e.map(g=>g.evaluate(t));if(n>s||n===s)return n;let m;if("string"==typeof u)m=function(g){let E=0;if(0===g.length)return E;for(let T=0;T<g.length;T++)E=(E<<5)-E+g.charCodeAt(T),E|=0;return E}(u);else{if("number"!=typeof u)throw new Bl(`Invalid seed input: ${u}`);m=u}return n+Fd(m)()*(s-n)}]});class ye{constructor(e,n,s,u){var m;this.expression=e,this._warningHistory={},this._evaluator=new du(s,u),this._defaultValue=n?"color"===(m=n).type&&(b(m.default)||Array.isArray(m.default))?new Zs(0,0,0,0):"color"===m.type?Zs.parse(m.default)||null:void 0===m.default?null:m.default:null,this._enumValues=n&&"enum"===n.type?n.values:null}evaluateWithoutErrorHandling(e,n,s,u,m,g,E,T){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=s,this._evaluator.canonical=u||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=g,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=T||null,this.expression.evaluate(this._evaluator)}evaluate(e,n,s,u,m,g,E,T){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=s||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=g||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=T||null;try{const z=this.expression.evaluate(this._evaluator);if(null==z||"number"==typeof z&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new Bl(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(z)} instead.`);return z}catch(z){return this._warningHistory[z.message]||(this._warningHistory[z.message]=!0,typeof console<"u"&&console.warn(z.message)),this._defaultValue}}}function Pe(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Jc}function Fe(t,e,n,s){const u=new Qc(Jc,[],e?function(g){const E={color:Gt,string:Bt,number:Ee,enum:Bt,boolean:Ce,formatted:hs,resolvedImage:Qs};return"array"===g.type?Js(E[g.value]||ui,g.length):E[g.type]}(e):void 0,void 0,void 0,n,s),m=u.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return m?fu(new ye(m,e,n,s)):Rh(u.errors)}class Qe{constructor(e,n,s){this.kind=e,this._styleExpression=n,this.isLightConstant=s,this.isStateDependent="constant"!==e&&!Dh(n.expression),this.isConfigDependent=!z1(n.expression)}evaluateWithoutErrorHandling(e,n,s,u,m,g){return this._styleExpression.evaluateWithoutErrorHandling(e,n,s,u,m,g)}evaluate(e,n,s,u,m,g){return this._styleExpression.evaluate(e,n,s,u,m,g)}}class Je{constructor(e,n,s,u,m){this.kind=e,this.zoomStops=s,this._styleExpression=n,this.isStateDependent="camera"!==e&&!Dh(n.expression),this.isLightConstant=m,this.isConfigDependent=!z1(n.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,n,s,u,m,g){return this._styleExpression.evaluateWithoutErrorHandling(e,n,s,u,m,g)}evaluate(e,n,s,u,m,g){return this._styleExpression.evaluate(e,n,s,u,m,g)}interpolationFactor(e,n,s){return this.interpolationType?Wa.interpolationFactor(this.interpolationType,e,n,s):0}}function ot(t,e,n,s){if("error"===(t=Fe(t,e,n,s)).result)return t;const u=t.value.expression,m=qh(u);if(!m&&!z0(e))return Rh([new wu("","data expressions not supported")]);const g=ph(u,["zoom","pitch","distance-from-center"]);if(!g&&!r(e))return Rh([new wu("","zoom expressions not supported")]);const E=ph(u,["measure-light"]);if(!E&&!v(e))return Rh([new wu("","measure-light expression not supported")]);const T=e.expression&&e.expression.relaxZoomRestriction,z=Pt(u);return z||g||T?z instanceof wu?Rh([z]):z instanceof Wa&&!d(e)?Rh([new wu("",'"interpolate" expressions cannot be used with this property')]):fu(z?new Je(m?"camera":"composite",t.value,z.labels,z instanceof Wa?z.interpolation:void 0,E):new Qe(m?"constant":"source",t.value,E)):Rh([new wu("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class st{constructor(e,n){this._parameters=e,this._specification=n,lc(this,R(this._parameters,this._specification))}static deserialize(e){return new st(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Pt(t){let e=null;if(t instanceof Ua)e=Pt(t.result);else if(t instanceof gh){for(const n of t.args)if(e=Pt(n),e)break}else(t instanceof Ph||t instanceof Wa)&&t.input instanceof vl&&"zoom"===t.input.name&&(e=t);return e instanceof wu||t.eachChild(n=>{const s=Pt(n);s instanceof wu?e=s:e&&s&&e!==s&&(e=new wu("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}var Ft=en,Vt=3;function en(t,e,n){var s=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var u=new Int32Array(this.arrayBuffer);t=u[0],this.d=(e=u[1])+2*(n=u[2]);for(var m=0;m<this.d*this.d;m++){var g=u[Vt+m],E=u[Vt+m+1];s.push(g===E?null:u.subarray(g,E))}var T=u[Vt+s.length+1];this.keys=u.subarray(u[Vt+s.length],T),this.bboxes=u.subarray(T),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var z=0;z<this.d*this.d;z++)s.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var $=n/e*t;this.min=-$,this.max=t+$}en.prototype.insert=function(t,e,n,s,u){this._forEachCell(e,n,s,u,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(u)},en.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},en.prototype._insertCell=function(t,e,n,s,u,m){this.cells[u].push(m)},en.prototype.query=function(t,e,n,s,u){var m=this.min,g=this.max;if(t<=m&&e<=m&&g<=n&&g<=s&&!u)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(t,e,n,s,this._queryCell,E,{},u),E},en.prototype._queryCell=function(t,e,n,s,u,m,g,E){var T=this.cells[u];if(null!==T)for(var z=this.keys,$=this.bboxes,W=0;W<T.length;W++){var Z=T[W];if(void 0===g[Z]){var le=4*Z;(E?E($[le+0],$[le+1],$[le+2],$[le+3]):t<=$[le+2]&&e<=$[le+3]&&n>=$[le+0]&&s>=$[le+1])?(g[Z]=!0,m.push(z[Z])):g[Z]=!1}}},en.prototype._forEachCell=function(t,e,n,s,u,m,g,E){for(var T=this._convertToCellCoord(t),z=this._convertToCellCoord(e),$=this._convertToCellCoord(n),W=this._convertToCellCoord(s),Z=T;Z<=$;Z++)for(var le=z;le<=W;le++){var de=this.d*le+Z;if((!E||E(this._convertFromCellCoord(Z),this._convertFromCellCoord(le),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(le+1)))&&u.call(this,t,e,n,s,de,m,g,E))return}},en.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},en.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},en.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Vt+this.cells.length+1+1,n=0,s=0;s<this.cells.length;s++)n+=this.cells[s].length;var u=new Int32Array(e+n+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var m=e,g=0;g<t.length;g++){var E=t[g];u[Vt+g]=m,u.set(E,m),m+=E.length}return u[Vt+t.length]=m,u.set(this.keys,m),u[Vt+t.length+1]=m+=this.keys.length,u.set(this.bboxes,m),m+=this.bboxes.length,u.buffer};var tn=xn(Ft);const yn={};function lt(t,e,n={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writable:!1}),yn[e]={klass:t,omit:n.omit||[]}}lt(Object,"Object"),tn.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.add(n),{buffer:n}},tn.deserialize=function(t){return new tn(t.buffer)},Object.defineProperty(tn,"name",{value:"Grid"}),lt(tn,"Grid"),lt(Zs,"Color"),lt(Error,"Error"),lt(ja,"Formatted"),lt(Ga,"FormattedSection"),lt(He,"AJAXError"),lt(cc,"ResolvedImage"),lt(st,"StylePropertyFunction"),lt(ye,"StyleExpression",{omit:["_evaluator"]}),lt(Je,"ZoomDependentExpression"),lt(Qe,"ZoomConstantExpression"),lt(vl,"CompoundExpression",{omit:["_evaluate"]});for(const t in Jc)yn[Jc[t]._classRegistryKey]||lt(Jc[t],`Expression${t}`);function $t(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Sn(t){return self.ImageBitmap&&t instanceof ImageBitmap}function ci(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if($t(t)||Sn(t))return e&&e.add(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.add(n.buffer),n}if(t instanceof ImageData)return e&&e.add(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const s of t)n.push(ci(s,e));return n}if(t instanceof Map){const n={$name:"Map"};for(const[s,u]of t.entries())n[s]=ci(u);return n}if("object"==typeof t){const n=t.constructor,s=n._classRegistryKey;if(!s)throw new Error(`can't serialize object of unregistered class ${s}`);const u=n.serialize?n.serialize(t,e):{};if(!n.serialize){for(const m in t)t.hasOwnProperty(m)&&(yn[s].omit.indexOf(m)>=0||(u[m]=ci(t[m],e)));t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function Dn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||$t(t)||Sn(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(Dn);if("object"==typeof t){const e=t.$name||"Object";if("Map"===e){const u=new Map;for(const m of Object.keys(t))"$name"!==m&&u.set(m,Dn(t[m]));return u}const{klass:n}=yn[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const s=Object.create(n.prototype);for(const u of Object.keys(t))"$name"!==u&&(s[u]=Dn(t[u]));return s}throw new Error("can't deserialize object of type "+typeof t)}const gn={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519,"CJK Unified Ideographs Extension B":t=>t>=131072&&t<=173791};function bi(t){for(const e of t)if(te(e.charCodeAt(0)))return!0;return!1}function io(t){for(const e of t)if(!ro(e.charCodeAt(0)))return!1;return!0}function ro(t){return!(gn.Arabic(t)||gn["Arabic Supplement"](t)||gn["Arabic Extended-A"](t)||gn["Arabic Presentation Forms-A"](t)||gn["Arabic Presentation Forms-B"](t))}function te(t){return!(746!==t&&747!==t&&(t<4352||!(gn["Bopomofo Extended"](t)||gn.Bopomofo(t)||gn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||gn["CJK Compatibility Ideographs"](t)||gn["CJK Compatibility"](t)||gn["CJK Radicals Supplement"](t)||gn["CJK Strokes"](t)||!(!gn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||gn["CJK Unified Ideographs Extension A"](t)||gn["CJK Unified Ideographs"](t)||gn["Enclosed CJK Letters and Months"](t)||gn["Hangul Compatibility Jamo"](t)||gn["Hangul Jamo Extended-A"](t)||gn["Hangul Jamo Extended-B"](t)||gn["Hangul Jamo"](t)||gn["Hangul Syllables"](t)||gn.Hiragana(t)||gn["Ideographic Description Characters"](t)||gn.Kanbun(t)||gn["Kangxi Radicals"](t)||gn["Katakana Phonetic Extensions"](t)||gn.Katakana(t)&&12540!==t||!(!gn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!gn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||gn["Unified Canadian Aboriginal Syllabics"](t)||gn["Unified Canadian Aboriginal Syllabics Extended"](t)||gn["Vertical Forms"](t)||gn["Yijing Hexagram Symbols"](t)||gn["Yi Syllables"](t)||gn["Yi Radicals"](t))))}function L(t){return!(te(t)||(e=t,gn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||gn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||gn["Letterlike Symbols"](e)||gn["Number Forms"](e)||gn["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||gn["Control Pictures"](e)&&9251!==e||gn["Optical Character Recognition"](e)||gn["Enclosed Alphanumerics"](e)||gn["Geometric Shapes"](e)||gn["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||gn["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||gn["CJK Symbols and Punctuation"](e)||gn.Katakana(e)||gn["Private Use Area"](e)||gn["CJK Compatibility Forms"](e)||gn["Small Form Variants"](e)||gn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function j(t){return t>=1424&&t<=2303||gn["Arabic Presentation Forms-A"](t)||gn["Arabic Presentation Forms-B"](t)}function ie(t,e){return!(!e&&j(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||gn.Khmer(t))}function Ne(t){for(const e of t)if(j(e.charCodeAt(0)))return!0;return!1}const at="deferred",ln="loading",hn="loaded";let Qn=null,Wn="unavailable",Yi=null;const yr=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Wn="error"),Qn&&Qn(t)};function Sr(){$r.fire(new Mc("pluginStateChange",{pluginStatus:Wn,pluginURL:Yi}))}const $r=new Hl,is=function(){return Wn},tl=function(){if(Wn!==at||!Yi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Wn=ln,Sr(),Yi&&dr({url:Yi},t=>{t?yr(t):(Wn=hn,Sr())})},Ds={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Wn===hn||null!=Ds.applyArabicShaping,isLoading:()=>Wn===ln,setState(t){Wn=t.pluginStatus,Yi=t.pluginURL},isParsed:()=>null!=Ds.applyArabicShaping&&null!=Ds.processBidirectionalText&&null!=Ds.processStyledBidirectionalText,getPluginURL:()=>Yi};class os{constructor(e,n){this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch,this.brightness=n.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(e){return function(n,s){for(const u of n)if(!ie(u.charCodeAt(0),s))return!1;return!0}(e,Ds.isLoaded())}}class ea{constructor(e,n,s,u){this.property=e,this.value=n,this.expression=function(m,g,E,T){if(b(m))return new st(m,g);if(Pe(m)||Array.isArray(m)&&m.length>0){const z=ot(m,g,E,T);if("error"===z.result)throw new Error(z.value.map($=>`${$.key}: ${$.message}`).join(", "));return z.value}{let z=m;return"string"==typeof m&&"color"===g.type&&(z=Zs.parse(m)),{kind:"constant",isConfigDependent:!1,evaluate:()=>z}}}(void 0===n?e.specification.default:n,e.specification,s,u)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,n,s){return this.property.possiblyEvaluate(this,e,n,s)}}class na{constructor(e,n,s){this.property=e,this.value=new ea(e,void 0,n,s)}transitioned(e,n){return new fs(this.property,this.value,n,gi({},e.transition,this.transition),e.now)}untransitioned(){return new fs(this.property,this.value,null,{},0)}}class js{constructor(e,n,s){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._scope=n,this._options=s,this.isConfigDependent=!1}getValue(e){return aa(this._values[e].value.value)}setValue(e,n){this._values.hasOwnProperty(e)||(this._values[e]=new na(this._values[e].property,this._scope,this._options)),this._values[e].value=new ea(this._values[e].property,null===n?void 0:aa(n),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].value.expression.isConfigDependent}setTransitionOrValue(e,n){n&&(this._options=n);const s=this._properties.properties;if(e)for(const u in e){const m=e[u];if(zs(u,"-transition")){const g=u.slice(0,-11);s[g]&&this.setTransition(g,m)}else s.hasOwnProperty(u)&&this.setValue(u,m)}}getTransition(e){return aa(this._values[e].transition)}setTransition(e,n){this._values.hasOwnProperty(e)||(this._values[e]=new na(this._values[e].property)),this._values[e].transition=aa(n)||void 0}serialize(){const e={};for(const n of Object.keys(this._values)){const s=this.getValue(n);void 0!==s&&(e[n]=s);const u=this.getTransition(n);void 0!==u&&(e[`${n}-transition`]=u)}return e}transitioned(e,n){const s=new ya(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].transitioned(e,n._values[u]);return s}untransitioned(){const e=new ya(this._properties);for(const n of Object.keys(this._values))e._values[n]=this._values[n].untransitioned();return e}}class fs{constructor(e,n,s,u,m){const g=u.delay||0,E=u.duration||0;m=m||0,this.property=e,this.value=n,this.begin=m+g,this.end=this.begin+E,e.specification.transition&&(u.delay||u.duration)&&(this.prior=s)}possiblyEvaluate(e,n,s){const u=e.now||0,m=this.value.possiblyEvaluate(e,n,s),g=this.prior;if(g){if(u>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(u<this.begin)return g.possiblyEvaluate(e,n,s);{const E=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(e,n,s),m,Dt(E))}}return m}}class ya{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,n,s){const u=new ba(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].possiblyEvaluate(e,n,s);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ll{constructor(e,n,s){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._scope=n,this._options=s,this.isConfigDependent=!1}getValue(e){return aa(this._values[e].value)}setValue(e,n){this._values[e]=new ea(this._values[e].property,null===n?void 0:aa(n),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].expression.isConfigDependent}serialize(){const e={};for(const n of Object.keys(this._values)){const s=this.getValue(n);void 0!==s&&(e[n]=s)}return e}possiblyEvaluate(e,n,s){const u=new ba(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].possiblyEvaluate(e,n,s);return u}}class ia{constructor(e,n,s){this.property=e,this.value=n,this.parameters=s}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,n,s,u){return this.property.evaluate(this.value,this.parameters,e,n,s,u)}}class ba{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Ki{constructor(e){this.specification=e}possiblyEvaluate(e,n){return e.expression.evaluate(n)}interpolate(e,n,s){const u=Xu[this.specification.type];return u?u(e,n,s):e}}class er{constructor(e,n){this.specification=e,this.overrides=n}possiblyEvaluate(e,n,s,u){return new ia(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(n,null,{},s,u)}:e.expression,n)}interpolate(e,n,s){if("constant"!==e.value.kind||"constant"!==n.value.kind)return e;if(void 0===e.value.value||void 0===n.value.value)return new ia(this,{kind:"constant",value:void 0},e.parameters);const u=Xu[this.specification.type];return u?new ia(this,{kind:"constant",value:u(e.value.value,n.value.value,s)},e.parameters):e}evaluate(e,n,s,u,m,g){return"constant"===e.kind?e.value:e.evaluate(n,s,u,m,g)}}class us{constructor(e){this.specification=e}possiblyEvaluate(e,n,s,u){return!!e.expression.evaluate(n,null,{},s,u)}interpolate(){return!1}}class ma{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const n=new os(0,{});for(const s in e){const u=e[s];u.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new ea(u,void 0),g=this.defaultTransitionablePropertyValues[s]=new na(u);this.defaultTransitioningPropertyValues[s]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate(n)}}}lt(er,"DataDrivenProperty"),lt(Ki,"DataConstantProperty"),lt(us,"ColorRampProperty");var ai=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Ju(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Id(t){if(Array.isArray(t))return t.map(Id);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=Id(t[n]);return e}return Ju(t)}function Iu(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Iu(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function Lu(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Iu(t)||(t=Jh(t));const n=t;let s=!0;try{s=function(z){if(!Ka(z))return z;let $=Id(z);return O0($),$=Oh($),$}(n)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const u=ai[`filter_${e}`],m=Fe(s,u);let g=null;if("error"===m.result)throw new Error(m.value.map(z=>`${z.key}: ${z.message}`).join(", "));g=(z,$,W)=>m.value.evaluate(z,$,{},W);let E=null,T=null;if(s!==n){const z=Fe(n,u);if("error"===z.result)throw new Error(z.value.map($=>`${$.key}: ${$.message}`).join(", "));E=($,W,Z,le,de)=>z.value.evaluate($,W,{},Z,void 0,void 0,le,de),T=!qh(z.value.expression)}return{filter:g,dynamicFilter:E||void 0,needGeometry:O1(s),needFeature:!!T}}function Oh(t){if(!Array.isArray(t))return t;const e=function(n){if(e1.has(n[0]))for(let s=1;s<n.length;s++)if(Ka(n[s]))return!0;return n}(t);return!0===e?e:e.map(n=>Oh(n))}function O0(t){let e=!1;const n=[];if("case"===t[0]){for(let s=1;s<t.length-1;s+=2)e=e||Ka(t[s]),n.push(t[s+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||Ka(t[1]);for(let s=2;s<t.length-1;s+=2)n.push(t[s+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||Ka(t[1]);for(let s=1;s<t.length-1;s+=2)n.push(t[s+1])}e&&(t.length=0,t.push("any",...n));for(let s=1;s<t.length;s++)O0(t[s])}function Ka(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let n=1;n<t.length;n++)if(Ka(t[n]))return!0;return!1}const e1=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function _1(t,e){return t<e?-1:t>e?1:0}function O1(t){if(!Array.isArray(t))return!1;if("within"===t[0]||"distance"===t[0])return!0;for(let e=1;e<t.length;e++)if(O1(t[e]))return!0;return!1}function Jh(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?y1(t[1],t[2],"=="):"!="===e?tp(y1(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?y1(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Jh))):"all"===e?["all"].concat(t.slice(1).map(Jh)):"none"===e?["all"].concat(t.slice(1).map(Jh).map(tp)):"in"===e?Mo(t[1],t.slice(2)):"!in"===e?tp(Mo(t[1],t.slice(2))):"has"===e?ua(t[1]):"!has"!==e||tp(ua(t[1]));var n}function y1(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Mo(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(n=>typeof n!=typeof e[0])?["filter-in-large",t,["literal",e.sort(_1)]]:["filter-in-small",t,["literal",e]]}}function ua(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function tp(t){return["!",t]}function yl(t,e){return e?`${t}\x1f${e}`:t}const ed="-transition",Bu=new Set(["fill","line","background","hillshade","raster"]);class nl extends Hl{constructor(e,n,s,u,m){if(super(),this.id=e.id,this.fqid=yl(this.id,s),this.type=e.type,this.scope=s,this.lut=u,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&"slot"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),e.slot&&(this.slot=e.slot),n.layout&&(this._unevaluatedLayout=new ll(n.layout,this.scope,m),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),n.paint)){this._transitionablePaint=new js(n.paint,this.scope,m);for(const g in e.paint)this.setPaintProperty(g,e.paint[g]);for(const g in e.layout)this.setLayoutProperty(g,e.layout[g]);this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ba(n.paint)}}onAdd(e){}onRemove(e){}isDraped(e){return Bu.has(this.type)}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,n){if("custom"===this.type&&"visibility"===e)return void(this.visibility=n);const s=this._unevaluatedLayout;s._properties.properties[e]&&(s.setValue(e,n),this.isConfigDependent=this.isConfigDependent||s.isConfigDependent,"visibility"===e&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(e){return zs(e,ed)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,n){const s=this._transitionablePaint,u=s._properties.properties;if(zs(e,ed)){const W=e.slice(0,-11);return u[W]&&s.setTransition(W,n||void 0),!1}if(!u[e])return!1;const m=s._values[e],g=m.value.isDataDriven(),E=m.value;s.setValue(e,n),this.isConfigDependent=this.isConfigDependent||s.isConfigDependent,this._handleSpecialPaintPropertyUpdate(e);const T=s._values[e].value,z=T.isDataDriven(),$=zs(e,"pattern")||"line-dasharray"===e;return z||g||$||this._handleOverridablePaintPropertyUpdate(e,E,T)}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getDefaultProgramParams(e,n,s){return null}_handleOverridablePaintPropertyUpdate(e,n,s){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,n){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,n)}serialize(){return ts({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(e,n)=>!(void 0===e||"layout"===n&&!Object.keys(e).length||"paint"===n&&!Object.keys(e).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const e in this.paint._values){const n=this.paint.get(e);if(n instanceof ia&&z0(n.property.specification)&&("source"===n.value.kind||"composite"===n.value.kind)&&n.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Lu(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(e){this._stats&&("shadow"===e.renderPass?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(e){}queryIntersectsFeature(e,n,s,u,m,g,E,T,z){}queryIntersectsMatchingFeature(e,n,s,u){}}const kp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class np{constructor(e,n){this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class cl{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,n){return e._trim(),n&&(e.isTransferred=!0,n.add(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const n=Object.create(this.prototype);return n.arrayBuffer=e.arrayBuffer,n.length=e.length,n.capacity=e.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...e){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...e){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function wa(t,e=1){let n=0,s=0;return{members:t.map(u=>{const m=kp[u.type].BYTES_PER_ELEMENT,g=n=_h(n,Math.max(e,m)),E=u.components||1;return s=Math.max(s,m),n+=m*E,{name:u.name,type:u.type,components:E,offset:g}}),size:_h(n,Math.max(s,e)),alignment:e}}function _h(t,e){return Math.ceil(t/e)*e}class Eu extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.int16[u+0]=n,this.int16[u+1]=s,e}}Eu.prototype.bytesPerElement=4,lt(Eu,"StructArrayLayout2i4");class sf extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const m=3*e;return this.int16[m+0]=n,this.int16[m+1]=s,this.int16[m+2]=u,e}}sf.prototype.bytesPerElement=6,lt(sf,"StructArrayLayout3i6");class e0 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=4*e;return this.int16[g+0]=n,this.int16[g+1]=s,this.int16[g+2]=u,this.int16[g+3]=m,e}}e0.prototype.bytesPerElement=8,lt(e0,"StructArrayLayout4i8");class Cu extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,s,u,m)}emplace(e,n,s,u,m,g){const E=5*e;return this.int16[E+0]=n,this.int16[E+1]=s,this.int16[E+2]=u,this.int16[E+3]=m,this.int16[E+4]=g,e}}Cu.prototype.bytesPerElement=10,lt(Cu,"StructArrayLayout5i10");class ku extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,n,s,u,m,g,E)}emplace(e,n,s,u,m,g,E,T){const z=6*e,$=12*e,W=3*e;return this.int16[z+0]=n,this.int16[z+1]=s,this.uint8[$+4]=u,this.uint8[$+5]=m,this.uint8[$+6]=g,this.uint8[$+7]=E,this.float32[W+2]=T,e}}ku.prototype.bytesPerElement=12,lt(ku,"StructArrayLayout2i4ub1f12");class oh extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=4*e;return this.float32[g+0]=n,this.float32[g+1]=s,this.float32[g+2]=u,this.float32[g+3]=m,e}}oh.prototype.bytesPerElement=16,lt(oh,"StructArrayLayout4f16");class mu extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const m=3*e;return this.float32[m+0]=n,this.float32[m+1]=s,this.float32[m+2]=u,e}}mu.prototype.bytesPerElement=12,lt(mu,"StructArrayLayout3f12");class Il extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,s,u,m)}emplace(e,n,s,u,m,g){const E=6*e,T=3*e;return this.uint16[E+0]=n,this.uint16[E+1]=s,this.uint16[E+2]=u,this.uint16[E+3]=m,this.float32[T+2]=g,e}}Il.prototype.bytesPerElement=12,lt(Il,"StructArrayLayout4ui1f12");class Sp extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=4*e;return this.uint16[g+0]=n,this.uint16[g+1]=s,this.uint16[g+2]=u,this.uint16[g+3]=m,e}}Sp.prototype.bytesPerElement=8,lt(Sp,"StructArrayLayout4ui8");class hc extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g){const E=this.length;return this.resize(E+1),this.emplace(E,e,n,s,u,m,g)}emplace(e,n,s,u,m,g,E){const T=6*e;return this.int16[T+0]=n,this.int16[T+1]=s,this.int16[T+2]=u,this.int16[T+3]=m,this.int16[T+4]=g,this.int16[T+5]=E,e}}hc.prototype.bytesPerElement=12,lt(hc,"StructArrayLayout6i12");class L0 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Z){const le=this.length;return this.resize(le+1),this.emplace(le,e,n,s,u,m,g,E,T,z,$,W,Z)}emplace(e,n,s,u,m,g,E,T,z,$,W,Z,le){const de=12*e;return this.int16[de+0]=n,this.int16[de+1]=s,this.int16[de+2]=u,this.int16[de+3]=m,this.uint16[de+4]=g,this.uint16[de+5]=E,this.uint16[de+6]=T,this.uint16[de+7]=z,this.int16[de+8]=$,this.int16[de+9]=W,this.int16[de+10]=Z,this.int16[de+11]=le,e}}L0.prototype.bytesPerElement=24,lt(L0,"StructArrayLayout4i4ui4i24");class b1 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g){const E=this.length;return this.resize(E+1),this.emplace(E,e,n,s,u,m,g)}emplace(e,n,s,u,m,g,E){const T=10*e,z=5*e;return this.int16[T+0]=n,this.int16[T+1]=s,this.int16[T+2]=u,this.float32[z+2]=m,this.float32[z+3]=g,this.float32[z+4]=E,e}}b1.prototype.bytesPerElement=20,lt(b1,"StructArrayLayout3i3f20");class n1 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint32[1*e+0]=n,e}}n1.prototype.bytesPerElement=4,lt(n1,"StructArrayLayout1ul4");class yc extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.float32[1*e+0]=n,e}}yc.prototype.bytesPerElement=4,lt(yc,"StructArrayLayout1f4");class t0 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.uint16[u+0]=n,this.uint16[u+1]=s,e}}t0.prototype.bytesPerElement=4,lt(t0,"StructArrayLayout2ui4");class w1 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Z,le){const de=this.length;return this.resize(de+1),this.emplace(de,e,n,s,u,m,g,E,T,z,$,W,Z,le)}emplace(e,n,s,u,m,g,E,T,z,$,W,Z,le,de){const be=20*e,xe=10*e;return this.int16[be+0]=n,this.int16[be+1]=s,this.int16[be+2]=u,this.int16[be+3]=m,this.int16[be+4]=g,this.float32[xe+3]=E,this.float32[xe+4]=T,this.float32[xe+5]=z,this.float32[xe+6]=$,this.int16[be+14]=W,this.uint32[xe+8]=Z,this.uint16[be+18]=le,this.uint16[be+19]=de,e}}w1.prototype.bytesPerElement=40,lt(w1,"StructArrayLayout5i4f1i1ul2ui40");class L1 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,n,s,u,m,g,E)}emplace(e,n,s,u,m,g,E,T){const z=8*e;return this.int16[z+0]=n,this.int16[z+1]=s,this.int16[z+2]=u,this.int16[z+4]=m,this.int16[z+5]=g,this.int16[z+6]=E,this.int16[z+7]=T,e}}L1.prototype.bytesPerElement=16,lt(L1,"StructArrayLayout3i2i2i16");class af extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,s,u,m)}emplace(e,n,s,u,m,g){const E=4*e,T=8*e;return this.float32[E+0]=n,this.float32[E+1]=s,this.float32[E+2]=u,this.int16[T+6]=m,this.int16[T+7]=g,e}}af.prototype.bytesPerElement=16,lt(af,"StructArrayLayout2f1f2i16");class Vd extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=12*e,E=3*e;return this.uint8[g+0]=n,this.uint8[g+1]=s,this.float32[E+1]=u,this.float32[E+2]=m,e}}Vd.prototype.bytesPerElement=12,lt(Vd,"StructArrayLayout2ub2f12");class bc extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const m=3*e;return this.uint16[m+0]=n,this.uint16[m+1]=s,this.uint16[m+2]=u,e}}bc.prototype.bytesPerElement=6,lt(bc,"StructArrayLayout3ui6");class Of extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e,gt,yt,wt,nn){const Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e,gt,yt,wt,nn)}emplace(e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e,gt,yt,wt,nn,Qt){const kn=30*e,Rn=15*e,li=60*e;return this.int16[kn+0]=n,this.int16[kn+1]=s,this.int16[kn+2]=u,this.float32[Rn+2]=m,this.float32[Rn+3]=g,this.uint16[kn+8]=E,this.uint16[kn+9]=T,this.uint32[Rn+5]=z,this.uint32[Rn+6]=$,this.uint32[Rn+7]=W,this.uint16[kn+16]=Z,this.uint16[kn+17]=le,this.uint16[kn+18]=de,this.float32[Rn+10]=be,this.float32[Rn+11]=xe,this.uint8[li+48]=$e,this.uint8[li+49]=gt,this.uint8[li+50]=yt,this.uint32[Rn+13]=wt,this.int16[kn+28]=nn,this.uint8[li+58]=Qt,e}}Of.prototype.bytesPerElement=60,lt(Of,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class n0 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e,gt,yt,wt,nn,Qt,kn,Rn,li,Di,xi,Ji,So,qi,wo,zi,bo,Ro){const Co=this.length;return this.resize(Co+1),this.emplace(Co,e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e,gt,yt,wt,nn,Qt,kn,Rn,li,Di,xi,Ji,So,qi,wo,zi,bo,Ro)}emplace(e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e,gt,yt,wt,nn,Qt,kn,Rn,li,Di,xi,Ji,So,qi,wo,zi,bo,Ro,Co){const lr=22*e,To=44*e,Fo=88*e;return this.float32[lr+0]=n,this.float32[lr+1]=s,this.int16[To+4]=u,this.int16[To+5]=m,this.int16[To+6]=g,this.int16[To+7]=E,this.int16[To+8]=T,this.int16[To+9]=z,this.int16[To+10]=$,this.int16[To+11]=W,this.int16[To+12]=Z,this.uint16[To+13]=le,this.uint16[To+14]=de,this.uint16[To+15]=be,this.uint16[To+16]=xe,this.uint16[To+17]=$e,this.uint16[To+18]=gt,this.uint16[To+19]=yt,this.uint16[To+20]=wt,this.uint16[To+21]=nn,this.uint16[To+22]=Qt,this.uint16[To+23]=kn,this.uint16[To+24]=Rn,this.uint16[To+25]=li,this.uint16[To+26]=Di,this.uint16[To+27]=xi,this.uint32[lr+14]=Ji,this.float32[lr+15]=So,this.float32[lr+16]=qi,this.float32[lr+17]=wo,this.float32[lr+18]=zi,this.float32[lr+19]=bo,this.float32[lr+20]=Ro,this.uint8[Fo+84]=Co,e}}n0.prototype.bytesPerElement=88,lt(n0,"StructArrayLayout2f9i15ui1ul6f1ub88");class wc extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,s,u,m)}emplace(e,n,s,u,m,g){const E=5*e;return this.float32[E+0]=n,this.float32[E+1]=s,this.float32[E+2]=u,this.float32[E+3]=m,this.float32[E+4]=g,e}}wc.prototype.bytesPerElement=20,lt(wc,"StructArrayLayout5f20");class o0 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,n,s,u,m,g,E)}emplace(e,n,s,u,m,g,E,T){const z=7*e;return this.float32[z+0]=n,this.float32[z+1]=s,this.float32[z+2]=u,this.float32[z+3]=m,this.float32[z+4]=g,this.float32[z+5]=E,this.float32[z+6]=T,e}}o0.prototype.bytesPerElement=28,lt(o0,"StructArrayLayout7f28");class eu extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.float32[u+0]=n,this.float32[u+1]=s,e}}eu.prototype.bytesPerElement=8,lt(eu,"StructArrayLayout2f8");class gu extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u)}emplace(e,n,s,u,m){const g=6*e;return this.uint32[3*e+0]=n,this.uint16[g+2]=s,this.uint16[g+3]=u,this.uint16[g+4]=m,e}}gu.prototype.bytesPerElement=12,lt(gu,"StructArrayLayout1ul3ui12");class o1 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint16[1*e+0]=n,e}}o1.prototype.bytesPerElement=2,lt(o1,"StructArrayLayout1ui2");class pc extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe){const $e=this.length;return this.resize($e+1),this.emplace($e,e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe)}emplace(e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e){const gt=16*e;return this.float32[gt+0]=n,this.float32[gt+1]=s,this.float32[gt+2]=u,this.float32[gt+3]=m,this.float32[gt+4]=g,this.float32[gt+5]=E,this.float32[gt+6]=T,this.float32[gt+7]=z,this.float32[gt+8]=$,this.float32[gt+9]=W,this.float32[gt+10]=Z,this.float32[gt+11]=le,this.float32[gt+12]=de,this.float32[gt+13]=be,this.float32[gt+14]=xe,this.float32[gt+15]=$e,e}}pc.prototype.bytesPerElement=64,lt(pc,"StructArrayLayout16f64");class r1 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,m,g,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,n,s,u,m,g,E)}emplace(e,n,s,u,m,g,E,T){const z=10*e,$=5*e;return this.uint16[z+0]=n,this.uint16[z+1]=s,this.uint16[z+2]=u,this.uint16[z+3]=m,this.float32[$+2]=g,this.float32[$+3]=E,this.float32[$+4]=T,e}}r1.prototype.bytesPerElement=20,lt(r1,"StructArrayLayout4ui3f20");class B1 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.int16[1*e+0]=n,e}}B1.prototype.bytesPerElement=2,lt(B1,"StructArrayLayout1i2");class N1 extends cl{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint8[1*e+0]=n,e}}N1.prototype.bytesPerElement=1,lt(N1,"StructArrayLayout1ub1");class ip extends np{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ip.prototype.size=40;class s1 extends w1{get(e){return new ip(this,e)}}lt(s1,"CollisionBoxArray");class La extends np{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}La.prototype.size=60;class B0 extends Of{get(e){return new La(this,e)}}lt(B0,"PlacedSymbolArray");class yh extends np{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(e){this._structArray.uint32[this._pos4+14]=e}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(e){this._structArray.float32[this._pos4+18]=e}get occlusionState(){return this._structArray.float32[this._pos4+19]}set occlusionState(e){this._structArray.float32[this._pos4+19]=e}get occlusionOpacity(){return this._structArray.float32[this._pos4+20]}set occlusionOpacity(e){this._structArray.float32[this._pos4+20]=e}get hasIconTextFit(){return this._structArray.uint8[this._pos1+84]}}yh.prototype.size=88;class rm extends n0{get(e){return new yh(this,e)}}lt(rm,"SymbolInstanceArray");class op extends yc{getoffsetX(e){return this.float32[1*e+0]}}lt(op,"GlyphOffsetArray");class Tp extends Eu{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}lt(Tp,"SymbolLineVertexArray");class Mp extends np{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Mp.prototype.size=12;class Lf extends gu{get(e){return new Mp(this,e)}}lt(Lf,"FeatureIndexArray");class Ap extends t0{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}lt(Ap,"FillExtrusionCentroidArray");const lf=wa([{name:"a_pos",components:2,type:"Int16"}],4),_2=wa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ul{constructor(e=[]){this.segments=e}_prepareSegment(e,n,s,u){let m=this.segments[this.segments.length-1];return e>ul.MAX_VERTEX_ARRAY_LENGTH&&fa(`Max vertices per segment is ${ul.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!m||m.vertexLength+e>ul.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==u)&&(m={vertexOffset:n,primitiveOffset:s,vertexLength:0,primitiveLength:0},void 0!==u&&(m.sortKey=u),this.segments.push(m)),m}prepareSegment(e,n,s,u){return this._prepareSegment(e,n.length,s.length,u)}get(){return this.segments}destroy(){for(const e of this.segments)for(const n in e.vaos)e.vaos[n].destroy()}static simpleSegment(e,n,s,u){return new ul([{vertexOffset:e,primitiveOffset:n,vertexLength:s,primitiveLength:u,vaos:{},sortKey:0}])}}function Dp(t,e){return 256*(t=zn(Math.floor(t),0,255))+zn(Math.floor(e),0,255)}ul.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lt(ul,"SegmentVector");const sm=wa([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Bf=wa([{name:"a_dash",components:4,type:"Uint16"}]);class rp{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(e,n,s,u){this.ids.push(Um(e)),this.positions.push(n,s,u)}eachPosition(e,n){const s=Um(e);let u=0,m=this.ids.length-1;for(;u<m;){const g=u+m>>1;this.ids[g]>=s?m=g:u=g+1}for(;this.ids[u]===s;)n(this.positions[3*u],this.positions[3*u+1],this.positions[3*u+2]),u++}static serialize(e,n){const s=new Float64Array(e.ids),u=new Uint32Array(e.positions);return cf(s,u,0,s.length-1),n&&(n.add(s.buffer),n.add(u.buffer)),{ids:s,positions:u}}static deserialize(e){const n=new rp;let s;n.ids=e.ids,n.positions=e.positions;for(const u of n.ids)u!==s&&n.uniqueIds.push(u),s=u;return n.indexed=!0,n}}function Um(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Za(String(t))}function cf(t,e,n,s){for(;n<s;){const u=t[n+s>>1];let m=n-1,g=s+1;for(;;){do{m++}while(t[m]<u);do{g--}while(t[g]>u);if(m>=g)break;y2(t,m,g),y2(e,3*m,3*g),y2(e,3*m+1,3*g+1),y2(e,3*m+2,3*g+2)}g-n<s-g?(cf(t,e,n,g),n=g+1):(cf(t,e,g+1,s),s=g)}}function y2(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}lt(rp,"FeaturePositionMap");class x1{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,n){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,n),this.initialized=!0),!!this.location}set(e,n,s){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class sp extends x1{constructor(e){super(e),this.current=0}set(e,n,s){this.fetchUniformLocation(e,n)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}}class Pc extends x1{constructor(e){super(e),this.current=0}set(e,n,s){this.fetchUniformLocation(e,n)&&this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class rh extends x1{constructor(e){super(e),this.current=[0,0]}set(e,n,s){this.fetchUniformLocation(e,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}}class a1 extends x1{constructor(e){super(e),this.current=[0,0,0]}set(e,n,s){this.fetchUniformLocation(e,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}}class Pp extends x1{constructor(e){super(e),this.current=[0,0,0,0]}set(e,n,s){this.fetchUniformLocation(e,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3])))}}class ap extends x1{constructor(e){super(e),this.current=Zs.transparent.toRenderColor(null)}set(e,n,s){this.fetchUniformLocation(e,n)&&(s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a)))}}const am=new Float32Array(16);class bh extends x1{constructor(e){super(e),this.current=am}set(e,n,s){if(this.fetchUniformLocation(e,n)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let u=1;u<16;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}}const uf=new Float32Array(9),Eg=new Float32Array(4);class df extends x1{constructor(e){super(e),this.current=Eg}set(e,n,s){if(this.fetchUniformLocation(e,n))for(let u=0;u<4;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}function Nf(t){return[Dp(255*t.r,255*t.g),Dp(255*t.b,255*t.a)]}class Ff{constructor(e,n,s,u){this.value=e,this.uniformNames=n.map(m=>`u_${m}`),this.type=s,this.context=u}setUniform(e,n,s,u,m){const g=u.constantOr(this.value);n.set(e,m,g instanceof Zs?g.toRenderColor(this.context.lut):g)}getBinding(e,n){return"color"===this.type?new ap(e):new Pc(e)}}class Ed{constructor(e,n){this.uniformNames=n.map(s=>`u_${s}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,n,s,u,m){const g="u_pattern"===m||"u_dash"===m?this.pattern:"u_pixel_ratio"===m?this.pixelRatio:null;g&&n.set(e,m,g)}getBinding(e,n){return"u_pattern"===n||"u_dash"===n?new Pp(e):new Pc(e)}}class F1{constructor(e,n,s,u){this.expression=e,this.type=s,this.maxValue=0,this.paintVertexAttributes=n.map(m=>({name:`a_${m}`,type:"Float32",components:"color"===s?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,n,s,u,m,g,E){const T=this.paintVertexArray.length,z=this.expression.evaluate(new os(0,{brightness:g}),n,{},m,u,E);this.paintVertexArray.resize(e),this._setPaintValue(T,e,z,this.context)}updatePaintArray(e,n,s,u,m,g,E){const T=this.expression.evaluate({zoom:0,brightness:E},s,u,void 0,m);this._setPaintValue(e,n,T,this.context)}_setPaintValue(e,n,s,u){if("color"===this.type){const m=Nf(s.toRenderColor(u.lut));for(let g=e;g<n;g++)this.paintVertexArray.emplace(g,m[0],m[1])}else{for(let m=e;m<n;m++)this.paintVertexArray.emplace(m,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class sh{constructor(e,n,s,u,m,g){this.expression=e,this.uniformNames=n.map(E=>`u_${E}_t`),this.type=s,this.useIntegerZoom=u,this.context=m,this.maxValue=0,this.paintVertexAttributes=n.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===s?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(e,n,s,u,m,g,E){const T=this.expression.evaluate(new os(this.context.zoom,{brightness:g}),n,{},m,u,E),z=this.expression.evaluate(new os(this.context.zoom+1,{brightness:g}),n,{},m,u,E),$=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue($,e,T,z,this.context)}updatePaintArray(e,n,s,u,m,g,E){const T=this.expression.evaluate({zoom:this.context.zoom,brightness:E},s,u,void 0,m),z=this.expression.evaluate({zoom:this.context.zoom+1,brightness:E},s,u,void 0,m);this._setPaintValue(e,n,T,z,this.context)}_setPaintValue(e,n,s,u,m){if("color"===this.type){const g=Nf(s.toRenderColor(m.lut)),E=Nf(s.toRenderColor(m.lut));for(let T=e;T<n;T++)this.paintVertexArray.emplace(T,g[0],g[1],E[0],E[1])}else{for(let g=e;g<n;g++)this.paintVertexArray.emplace(g,s,u);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,n,s,u,m){const g=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,E=zn(this.expression.interpolationFactor(g,this.context.zoom,this.context.zoom+1),0,1);n.set(e,m,E)}getBinding(e,n){return new Pc(e)}}class V1{constructor(e,n,s,u,m){this.expression=e,this.layerId=m,this.paintVertexAttributes=("array"===s?Bf:sm).members;for(let g=0;g<n.length;++g);this.paintVertexArray=new u}populatePaintArray(e,n,s,u){const m=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(m,e,n.patterns&&n.patterns[this.layerId],s)}updatePaintArray(e,n,s,u,m,g,E){this._setPaintValues(e,n,s.patterns&&s.patterns[this.layerId],g)}_setPaintValues(e,n,s,u){if(!u||!s)return;const m=u[s];if(!m)return;const{tl:g,br:E,pixelRatio:T}=m;for(let z=e;z<n;z++)this.paintVertexArray.emplace(z,g[0],g[1],E[0],E[1],T)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class l1{constructor(e,n,s=(()=>!0)){this.binders={},this._buffers=[],this.context=n;const u=[];for(const m in e.paint._values){const g=e.paint.get(m);if(!s(m)||!(g instanceof ia&&z0(g.property.specification)))continue;const E=Hm(m,e.type),T=g.value,z=g.property.specification.type,$=!!g.property.useIntegerZoom,W="line-dasharray"===m||m.endsWith("pattern"),Z="line-dasharray"===m&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==T.kind||Z)if("source"===T.kind||Z||W){const le=lm(m,z,"source");this.binders[m]=W?new V1(T,E,z,le,e.id):new F1(T,E,z,le),u.push(`/a_${m}`)}else{const le=lm(m,z,"composite");this.binders[m]=new sh(T,E,z,$,n,le),u.push(`/z_${m}`)}else this.binders[m]=W?new Ed(T.value,E):new Ff(T.value,E,z,n),u.push(`/u_${m}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const n=this.binders[e];return n instanceof F1||n instanceof sh?n.maxValue:0}populatePaintArrays(e,n,s,u,m,g,E){for(const T in this.binders){const z=this.binders[T];z.context=this.context,(z instanceof F1||z instanceof sh||z instanceof V1)&&z.populatePaintArray(e,n,s,u,m,g,E)}}setConstantPatternPositions(e){for(const n in this.binders){const s=this.binders[n];s instanceof Ed&&s.setConstantPatternPositions(e)}}updatePaintArrays(e,n,s,u,m,g,E,T){let z=!1;const $=Object.keys(e),W=0!==$.length,Z=W?$:n.uniqueIds;this.context.lut=m.lut;for(const le in this.binders){const de=this.binders[le];if(de.context=this.context,(de instanceof F1||de instanceof sh||de instanceof V1)&&(!0===de.expression.isStateDependent||!1===de.expression.isLightConstant)){const be=m.paint.get(le);de.expression=be.value;for(const xe of Z){const $e=e[xe.toString()];n.eachPosition(xe,(gt,yt,wt)=>{const nn=u.feature(gt);de.updatePaintArray(yt,wt,nn,$e,g,E,T)})}if(!W)for(const xe of s.uniqueIds){const $e=e[xe.toString()];s.eachPosition(xe,(gt,yt,wt)=>{const nn=u.feature(gt);de.updatePaintArray(yt,wt,nn,$e,g,E,T)})}z=!0}}return z}defines(){const e=[];for(const n in this.binders){const s=this.binders[n];(s instanceof Ff||s instanceof Ed)&&e.push(...s.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof F1||s instanceof sh||s instanceof V1)for(let u=0;u<s.paintVertexAttributes.length;u++)e.push(s.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof Ff||s instanceof Ed||s instanceof sh)for(const u of s.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const n=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Ff||u instanceof Ed||u instanceof sh)for(const m of u.uniformNames)n.push({name:m,property:s,binding:u.getBinding(e,m)})}return n}setUniforms(e,n,s,u,m){for(const{name:g,property:E,binding:T}of s)this.binders[E].setUniform(e,T,m,u.get(E),g)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const n=this.binders[e];(n instanceof F1||n instanceof sh||n instanceof V1)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const n in this.binders){const s=this.binders[n];(s instanceof F1||s instanceof sh||s instanceof V1)&&s.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const n=this.binders[e];(n instanceof F1||n instanceof sh||n instanceof V1)&&n.destroy()}}}class I1{constructor(e,n,s=(()=>!0)){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new l1(u,n,s);this.needsUpload=!1,this._featureMap=new rp,this._featureMapWithoutIds=new rp,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(e,n,s,u,m,g,E,T){for(const z in this.programConfigurations)this.programConfigurations[z].populatePaintArrays(e,n,u,m,g,E,T);void 0!==n.id?this._featureMap.add(n.id,s,this._bufferOffset,e):(this._featureMapWithoutIds.add(this._idlessCounter,s,this._bufferOffset,e),this._idlessCounter+=1),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,n,s,u,m,g){for(const E of s)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(e,this._featureMap,this._featureMapWithoutIds,n,E,u,m,g||0)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Vf={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Hm(t,e){return Vf[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const b2={"line-pattern":{source:Il,composite:Il},"fill-pattern":{source:Il,composite:Il},"fill-extrusion-pattern":{source:Il,composite:Il},"line-dasharray":{source:Sp,composite:Sp}},Gm={color:{source:eu,composite:oh},number:{source:yc,composite:eu}};function lm(t,e,n){const s=b2[t];return s&&s[n]||Gm[e][n]}lt(Ff,"ConstantBinder"),lt(Ed,"PatternConstantBinder"),lt(F1,"SourceExpressionBinder"),lt(V1,"PatternCompositeBinder"),lt(sh,"CompositeExpressionBinder"),lt(l1,"ProgramConfiguration",{omit:["_buffers"]}),lt(I1,"ProgramConfigurationSet");const $d=Xi/Math.PI/2,Rp=5,$f=6,lp=16383,jf=[64,32,16],r0=-$d,Su=$d;function c1(t,e,n,s=$d){return n=Gr(n),[t*Math.sin(n)*s,-e*s,t*Math.cos(n)*s]}function xc(t,e,n){return c1(Math.cos(Gr(t)),Math.sin(Gr(t)),e,n)}const cp=6371008.8,j1=2*Math.PI*cp;class oa{constructor(e,n){if(isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new oa(go(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const n=Math.PI/180,s=this.lat*n,u=e.lat*n,m=Math.sin(s)*Math.sin(u)+Math.cos(s)*Math.cos(u)*Math.cos((e.lng-this.lng)*n);return cp*Math.acos(Math.min(m,1))}toBounds(e=0){const n=360*e/40075017,s=n/Math.cos(Math.PI/180*this.lat);return new N0({lng:this.lng-s,lat:this.lat-n},{lng:this.lng+s,lat:this.lat+n})}toEcef(e){return xc(this.lat,this.lng,$d+e*$d/cp)}static convert(e){if(e instanceof oa)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new oa(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new oa(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class N0{constructor(e,n){if(e)if(n)this.setSouthWest(e).setNorthEast(n);else if(4===e.length){const s=e;this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]])}else{const s=e;this.setSouthWest(s[0]).setNorthEast(s[1])}}setNorthEast(e){return this._ne=e instanceof oa?new oa(e.lng,e.lat):oa.convert(e),this}setSouthWest(e){return this._sw=e instanceof oa?new oa(e.lng,e.lat):oa.convert(e),this}extend(e){const n=this._sw,s=this._ne;let u,m;if(e instanceof oa)u=e,m=e;else{if(!(e instanceof N0))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(N0.convert(e)):this.extend(oa.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(oa.convert(e)):this;if(u=e._sw,m=e._ne,!u||!m)return this}return n||s?(n.lng=Math.min(u.lng,n.lng),n.lat=Math.min(u.lat,n.lat),s.lng=Math.max(m.lng,s.lng),s.lat=Math.max(m.lat,s.lat)):(this._sw=new oa(u.lng,u.lat),this._ne=new oa(m.lng,m.lat)),this}getCenter(){return new oa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new oa(this.getWest(),this.getNorth())}getSouthEast(){return new oa(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:s}=oa.convert(e);let u=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=s&&s<=this._ne.lat&&u}static convert(e){return!e||e instanceof N0?e:new N0(e)}}var cm={};!function(n){function s(m,g,E){var T=u(256*m,256*(g=Math.pow(2,E)-g-1),E),z=u(256*(m+1),256*(g+1),E);return T[0]+","+T[1]+","+z[0]+","+z[1]}function u(m,g,E){var T=2*Math.PI*6378137/256/Math.pow(2,E);return[m*T-2*Math.PI*6378137/2,g*T-2*Math.PI*6378137/2]}n.getURL=function(m,g,E,T,z,$){return $=$||{},m+"?"+["bbox="+s(E,T,z),"format="+($.format||"image/png"),"service="+($.service||"WMS"),"version="+($.version||"1.1.1"),"request="+($.request||"GetMap"),"srs="+($.srs||"EPSG:3857"),"width="+($.width||256),"height="+($.height||256),"layers="+g].join("&")},n.getTileBBox=s,n.getMercCoords=u,Object.defineProperty(n,"__esModule",{value:!0})}(cm);var w2=cm;class up{constructor(e,n,s){this.z=e,this.x=n,this.y=s,this.key=E1(0,e,e,n,s)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,n){const s=w2.getTileBBox(this.x,this.y,this.z),u=function(m,g,E){let T,z="";for(let $=m;$>0;$--)T=1<<$-1,z+=(g&T?1:0)+(E&T?2:0);return z}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)}toString(){return`${this.z}/${this.x}/${this.y}`}}class hf{constructor(e,n){this.wrap=e,this.canonical=n,this.key=E1(e,n.z,n.z,n.x,n.y)}}class Ic{constructor(e,n,s,u,m){this.overscaledZ=e,this.wrap=n,this.canonical=new up(s,+u,+m),this.key=0===n&&e===s?this.canonical.key:E1(n,e,s,u,m)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const n=this.canonical.z-e;return e>this.canonical.z?new Ic(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ic(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(e,n=!0){if(this.overscaledZ===e&&n)return this.key;if(e>this.canonical.z)return E1(this.wrap*+n,e,this.canonical.z,this.canonical.x,this.canonical.y);{const s=this.canonical.z-e;return E1(this.wrap*+n,e,e,this.canonical.x>>s,this.canonical.y>>s)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const n=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.z<this.canonical.z&&e.canonical.x===this.canonical.x>>n&&e.canonical.y===this.canonical.y>>n}children(e){if(this.overscaledZ>=e)return[new Ic(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,s=2*this.canonical.x,u=2*this.canonical.y;return[new Ic(n,this.wrap,n,s,u),new Ic(n,this.wrap,n,s+1,u),new Ic(n,this.wrap,n,s,u+1),new Ic(n,this.wrap,n,s+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Ic(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Ic(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new hf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function E1(t,e,n,s,u){const m=1<<Math.min(n,22);let g=m*(u%m)+s%m;return t&&n<22&&(g+=m*m*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*g+n)+(e-n)}const um=[t=>{let e=t.canonical.x-1,n=t.wrap;return e<0&&(e=(1<<t.canonical.z)-1,n--),new Ic(t.overscaledZ,n,t.canonical.z,e,t.canonical.y)},t=>{let e=t.canonical.x+1,n=t.wrap;return e===1<<t.canonical.z&&(e=0,n++),new Ic(t.overscaledZ,n,t.canonical.z,e,t.canonical.y)},t=>new Ic(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new Ic(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)];lt(up,"CanonicalTileID"),lt(Ic,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const dm=0,hm=25.5;function Uf(t){return j1*Math.cos(t*Math.PI/180)}function s0(t){return(180+t)/360}function a0(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function El(t,e){return t/Uf(e)}function Tu(t){return 360*t-180}function $c(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Cg(t,e){return t*Uf($c(e))}const nc=85.051129;function pf(t){return Math.cos(Gr(zn(t,-nc,nc)))}function Xl(t,e){const n=zn(e,dm,hm),s=Math.pow(2,n);return pf(t)*j1/(512*s)}function Wm(t){return 1/Math.cos(t*Math.PI/180)}function Hf(t,e=0){const n=Math.exp(Math.PI*(1-(t.y+e/Xi)/(1<<t.z)*2));return 80150034*n/(n*n+1)/Xi/(1<<t.z)}class jd{constructor(e,n,s=0){this.x=+e,this.y=+n,this.z=+s}static fromLngLat(e,n=0){const s=oa.convert(e);return new jd(s0(s.lng),a0(s.lat),El(n,s.lat))}toLngLat(){return new oa(Tu(this.x),$c(this.y))}toAltitude(){return Cg(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/j1*Wm($c(this.y))}}function ff(t,e,n,s,u,m,g,E,T){const z=(e+s)/2,$=(n+u)/2,W=new Eo(z,$);E(W),function(Z,le,de,be,xe,$e){const gt=de-xe,yt=be-$e;return Math.abs((be-le)*gt-(de-Z)*yt)/Math.hypot(gt,yt)}(W.x,W.y,m.x,m.y,g.x,g.y)>=T?(ff(t,e,n,z,$,m,W,E,T),ff(t,z,$,s,u,W,g,E,T)):t.push(g)}function pm(t,e,n){let s=t[0],u=s.x,m=s.y;e(s);const g=[s];for(let E=1;E<t.length;E++){const T=t[E],{x:z,y:$}=T;e(T),ff(g,u,m,z,$,s,T,e,n),u=z,m=$,s=T}return g}function U1(t,e,n,s){if(s(e,n)){const u=e.add(n)._mult(.5);U1(t,e,u,s),U1(t,u,n,s)}else t.push(n)}function wh(t,e){let n=t[0];const s=[n];for(let u=1;u<t.length;u++){const m=t[u];U1(s,n,m,e),n=m}return s}const dd=Math.pow(2,14)-1,C1=-dd-1;function kg(t,e){const n=Math.round(t.x*e),s=Math.round(t.y*e);return t.x=zn(n,C1,dd),t.y=zn(s,C1,dd),(n<t.x||n>t.x+1||s<t.y||s>t.y+1)&&fa("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function u1(t,e,n){const s=t.loadGeometry(),u=t.extent,m=Xi/u;if(e&&n&&n.projection.isReprojectedInTileSpace){const g=1<<e.z,{scale:E,x:T,y:z,projection:$}=n,W=Z=>{const le=Tu((e.x+Z.x/u)/g),de=$c((e.y+Z.y/u)/g),be=$.project(le,de);Z.x=(be.x*E-T)*u,Z.y=(be.y*E-z)*u};for(let Z=0;Z<s.length;Z++)if(1!==t.type)s[Z]=pm(s[Z],W,1);else{const le=[];for(const de of s[Z])de.x<0||de.x>=u||de.y<0||de.y>=u||(W(de),le.push(de));s[Z]=le}}for(const g of s)for(const E of g)kg(E,m);return s}function F0(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?u1(t):[]}}function x2(t,e,n,s,u){t.emplaceBack(2*e+(s+1)/2,2*n+(u+1)/2)}function V0(t,e,n){t.emplaceBack(e.x,e.y,e.z,16384*n[0],16384*n[1],16384*n[2])}class Gf{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Eu,this.indexArray=new bc,this.segments=new ul,this.programConfigurations=new I1(e.layers,{zoom:e.zoom,lut:e.lut}),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}updateFootprints(e,n){}populate(e,n,s,u){const m=this.layers[0],g=[];let E=null;"circle"===m.type&&(E=m.layout.get("circle-sort-key"));for(const{feature:z,id:$,index:W,sourceLayerIndex:Z}of e){const le=this.layers[0]._featureFilter.needGeometry,de=F0(z,le);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),de,s))continue;const be=E?E.evaluate(de,{},s):void 0,xe={id:$,properties:z.properties,type:z.type,sourceLayerIndex:Z,index:W,geometry:le?de.geometry:u1(z,s,u),patterns:{},sortKey:be};g.push(xe)}E&&g.sort((z,$)=>z.sortKey-$.sortKey);let T=null;"globe"===u.projection.name&&(this.globeExtVertexArray=new hc,T=u.projection);for(const z of g){const{geometry:$,index:W,sourceLayerIndex:Z}=z,le=e[W].feature;this.addFeature(z,$,W,n.availableImages,s,T,n.brightness),n.featureIndex.insert(le,$,W,Z,this.index)}}update(e,n,s,u,m){const g=0!==Object.keys(e).length;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,g?this.stateDependentLayers:this.layers,s,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,lf.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,_2.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,n,s,u,m,g,E){for(const T of n)for(const z of T){const $=z.x,W=z.y;if($<0||$>=Xi||W<0||W>=Xi)continue;if(g){const de=g.projectTilePoint($,W,m),be=g.upVector(m,$,W),xe=this.globeExtVertexArray;V0(xe,de,be),V0(xe,de,be),V0(xe,de,be),V0(xe,de,be)}const Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),le=Z.vertexLength;x2(this.layoutVertexArray,$,W,-1,-1),x2(this.layoutVertexArray,$,W,1,-1),x2(this.layoutVertexArray,$,W,1,1),x2(this.layoutVertexArray,$,W,-1,1),this.indexArray.emplaceBack(le,le+1,le+2),this.indexArray.emplaceBack(le,le+2,le+3),Z.vertexLength+=4,Z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,{},u,m,E)}}function k1(t,e){for(let n=0;n<t.length;n++)if(td(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(td(t,e[n]))return!0;return!!dp(t,e)}function I2(t,e,n){return!!td(t,e)||!!xa(e,t,n)}function E2(t,e){if(1===t.length)return fm(e,t[0]);for(let n=0;n<e.length;n++){const s=e[n];for(let u=0;u<s.length;u++)if(td(t,s[u]))return!0}for(let n=0;n<t.length;n++)if(fm(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(dp(t,e[n]))return!0;return!1}function zp(t,e,n){if(t.length>1){if(dp(t,e))return!0;for(let s=0;s<e.length;s++)if(xa(e[s],t,n))return!0}for(let s=0;s<t.length;s++)if(xa(t[s],e,n))return!0;return!1}function dp(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const s=t[n],u=t[n+1];for(let m=0;m<e.length-1;m++)if(Wf(s,u,e[m],e[m+1]))return!0}return!1}function Wf(t,e,n,s){return Ms(t,n,s)!==Ms(e,n,s)&&Ms(t,e,n)!==Ms(t,e,s)}function xa(t,e,n){const s=n*n;if(1===e.length)return t.distSqr(e[0])<s;for(let u=1;u<e.length;u++)if(qm(t,e[u-1],e[u])<s)return!0;return!1}function qm(t,e,n){const s=e.distSqr(n);if(0===s)return t.distSqr(e);const u=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/s;return t.distSqr(u<0?e:u>1?n:n.sub(e)._mult(u)._add(e))}function fm(t,e){let n,s,u,m=!1;for(let g=0;g<t.length;g++){n=t[g];for(let E=0,T=n.length-1;E<n.length;T=E++)s=n[E],u=n[T],s.y>e.y!=u.y>e.y&&e.x<(u.x-s.x)*(e.y-s.y)/(u.y-s.y)+s.x&&(m=!m)}return m}function td(t,e){let n=!1;for(let s=0,u=t.length-1;s<t.length;u=s++){const m=t[s],g=t[u];m.y>e.y!=g.y>e.y&&e.x<(g.x-m.x)*(e.y-m.y)/(g.y-m.y)+m.x&&(n=!n)}return n}function Xm(t,e,n,s,u){for(const g of t)if(e<=g.x&&n<=g.y&&s>=g.x&&u>=g.y)return!0;const m=[new Eo(e,n),new Eo(e,u),new Eo(s,u),new Eo(s,n)];if(t.length>2)for(const g of m)if(td(t,g))return!0;for(let g=0;g<t.length-1;g++)if(Nu(t[g],t[g+1],m))return!0;return!1}function Nu(t,e,n){const s=n[0],u=n[2];if(t.x<s.x&&e.x<s.x||t.x>u.x&&e.x>u.x||t.y<s.y&&e.y<s.y||t.y>u.y&&e.y>u.y)return!1;const m=Ms(t,e,n[0]);return m!==Ms(t,e,n[1])||m!==Ms(t,e,n[2])||m!==Ms(t,e,n[3])}function $l(t,e,n,s,u,m){let g=e.y-t.y,E=t.x-e.x;if(m=m||0){const T=g*g+E*E;if(0===T)return!0;const z=Math.sqrt(T);g/=z,E/=z}return!((n.x-t.x)*g+(n.y-t.y)*E-m<0||(s.x-t.x)*g+(s.y-t.y)*E-m<0||(u.x-t.x)*g+(u.y-t.y)*E-m<0)}function l0(t,e,n,s,u,m,g){return!($l(t,e,s,u,m,g)||$l(e,n,s,u,m,g)||$l(n,t,s,u,m,g)||$l(s,u,t,e,n,g)||$l(u,m,t,e,n,g)||$l(m,s,t,e,n,g))}function Op(t,e,n){const s=e.paint.get(t).value;return"constant"===s.kind?s.value:n.programConfigurations.get(e.id).getMaxValue(t)}function mm(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function mf(t,e,n,s,u){if(!e[0]&&!e[1])return t;const m=Eo.convert(e)._mult(u);"viewport"===n&&m._rotate(-s);const g=[];for(let E=0;E<t.length;E++)g.push(t[E].sub(m));return g}function hp(t,e,n,s){const u=Eo.convert(t)._mult(s);return"viewport"===e&&u._rotate(-n),u}lt(Gf,"CircleBucket",{omit:["layers"]});const pp=new ma({"circle-sort-key":new er(ai.layout_circle["circle-sort-key"]),visibility:new Ki(ai.layout_circle.visibility)});var C2={paint:new ma({"circle-radius":new er(ai.paint_circle["circle-radius"]),"circle-color":new er(ai.paint_circle["circle-color"]),"circle-blur":new er(ai.paint_circle["circle-blur"]),"circle-opacity":new er(ai.paint_circle["circle-opacity"]),"circle-translate":new Ki(ai.paint_circle["circle-translate"]),"circle-translate-anchor":new Ki(ai.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ki(ai.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ki(ai.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new er(ai.paint_circle["circle-stroke-width"]),"circle-stroke-color":new er(ai.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new er(ai.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ki(ai.paint_circle["circle-emissive-strength"])}),layout:pp};class qf{constructor(e,n){this.pos=e,this.dir=n}intersectsPlane(e,n,s){const u=l._.dot(n,this.dir);if(Math.abs(u)<1e-6)return!1;const m=((e[0]-this.pos[0])*n[0]+(e[1]-this.pos[1])*n[1]+(e[2]-this.pos[2])*n[2])/u;return s[0]=this.pos[0]+this.dir[0]*m,s[1]=this.pos[1]+this.dir[1]*m,s[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(e,n,s){if(l._.equals(this.pos,e)||0===n)return s[0]=s[1]=s[2]=0,!1;const[u,m,g]=this.dir,E=this.pos[0]-e[0],T=this.pos[1]-e[1],z=this.pos[2]-e[2],$=u*u+m*m+g*g,W=2*(E*u+T*m+z*g),Z=W*W-4*$*(E*E+T*T+z*z-n*n);if(Z<0){const le=Math.max(-W/2,0),de=E+u*le,be=T+m*le,xe=z+g*le,$e=Math.hypot(de,be,xe);return s[0]=de*n/$e,s[1]=be*n/$e,s[2]=xe*n/$e,!1}{const le=(-W-Math.sqrt(Z))/(2*$);if(le<0){const de=Math.hypot(E,T,z);return s[0]=E*n/de,s[1]=T*n/de,s[2]=z*n/de,!1}return s[0]=E+u*le,s[1]=T+m*le,s[2]=z+g*le,!0}}}class k2{constructor(e,n,s,u,m){this.TL=e,this.TR=n,this.BR=s,this.BL=u,this.horizon=m}static fromInvProjectionMatrix(e,n,s){const u=[-1,1,1],m=[1,1,1],g=[1,-1,1],E=[-1,-1,1],T=l._.transformMat4(u,u,e),z=l._.transformMat4(m,m,e),$=l._.transformMat4(g,g,e),W=l._.transformMat4(E,E,e);return new k2(T,z,$,W,n/s)}}function H1(t,e,n){let s=1/0,u=-1/0;const m=[];for(const g of t){l._.sub(m,g,e);const E=l._.dot(m,n);s=Math.min(s,E),u=Math.max(u,E)}return[s,u]}function ic(t,e){let n=!0;for(let s=0;s<t.planes.length;s++){const u=t.planes[s];let m=0;for(let g=0;g<e.length;g++)m+=l._.dot(u,e[g])+u[3]>=0;if(0===m)return 0;m!==e.length&&(n=!1)}return n?2:1}function Sg(t,e){for(const n of t.projections){const s=H1(e,t.points[0],n.axis);if(n.projection[1]<s[0]||n.projection[0]>s[1])return 0}return 1}function xh(t,e){let n=0;const s=[0,0,0,0];for(let u=0;u<t.length;u++)s[0]=t[u][0],s[1]=t[u][1],s[2]=t[u][2],s[3]=1,l.aA.dot(s,e)>=0&&n++;return n}class oc{constructor(e,n){this.points=e||new Array(8).fill([0,0,0]),this.planes=n||new Array(6).fill([0,0,0,0]),this.bounds=Ml.fromPoints(this.points),this.projections=[],this.frustumEdges=[l._.sub([],this.points[2],this.points[3]),l._.sub([],this.points[0],this.points[3]),l._.sub([],this.points[4],this.points[0]),l._.sub([],this.points[5],this.points[1]),l._.sub([],this.points[6],this.points[2]),l._.sub([],this.points[7],this.points[3])];for(const s of this.frustumEdges){const u=[0,-s[2],s[1]],m=[s[2],0,-s[0]];this.projections.push({axis:u,projection:H1(this.points,this.points[0],u)}),this.projections.push({axis:m,projection:H1(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(e,n,s,u){const m=Math.pow(2,s),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const $=l.aA.transformMat4([],z,e),W=1/$[3]/n*m;return l.aA.mul($,$,[W,W,u?1/$[3]:W,W])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const $=l._.sub([],g[z[0]],g[z[1]]),W=l._.sub([],g[z[2]],g[z[1]]),Z=l._.normalize([],l._.cross([],$,W)),le=-l._.dot(Z,g[z[1]]);return Z.concat(le)}),T=[];for(let z=0;z<g.length;z++)T.push([g[z][0],g[z][1],g[z][2]]);return new oc(T,E)}intersectsPrecise(e,n,s){for(let u=0;u<n.length;u++)if(!xh(e,n[u]))return 0;for(let u=0;u<this.planes.length;u++)if(!xh(e,this.planes[u]))return 0;for(const u of s)for(const m of this.frustumEdges){const g=l._.cross([],u,m),E=l._.length(g);if(0===E)continue;l._.scale(g,g,1/E);const T=H1(this.points,this.points[0],g),z=H1(e,this.points[0],g);if(T[0]>z[1]||z[0]>T[1])return 0}return 1}}class Ml{static fromPoints(e){const n=[1/0,1/0,1/0],s=[-1/0,-1/0,-1/0];for(const u of e)l._.min(n,n,u),l._.max(s,s,u);return new Ml(n,s)}static fromTileIdAndHeight(e,n,s){const u=1<<e.canonical.z,m=e.canonical.x,g=e.canonical.y;return new Ml([m/u,g/u,n],[(m+1)/u,(g+1)/u,s])}static applyTransform(e,n){const s=e.getCorners();for(let u=0;u<s.length;++u)l._.transformMat4(s[u],s[u],n);return Ml.fromPoints(s)}static applyTransformFast(e,n){const s=[n[12],n[13],n[14]],u=[...s];for(let m=0;m<3;m++)for(let g=0;g<3;g++){const E=n[4*g+m],T=E*e.min[g],z=E*e.max[g];s[m]+=Math.min(T,z),u[m]+=Math.max(T,z)}return new Ml(s,u)}static projectAabbCorners(e,n){const s=e.getCorners();for(let u=0;u<s.length;++u)l._.transformMat4(s[u],s[u],n);return s}constructor(e,n){this.min=e,this.max=n,this.center=l._.scale([],l._.add([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],s=l._.clone(this.min),u=l._.clone(this.max);for(let m=0;m<n.length;m++)s[m]=n[m]?this.min[m]:this.center[m],u[m]=n[m]?this.center[m]:this.max[m];return u[2]=this.max[2],new Ml(s,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,n=this.max;return[[e[0],e[1],e[2]],[n[0],e[1],e[2]],[n[0],n[1],e[2]],[e[0],n[1],e[2]],[e[0],e[1],n[2]],[n[0],e[1],n[2]],[n[0],n[1],n[2]],[e[0],n[1],n[2]]]}intersects(e){return this.intersectsAabb(e.bounds)?ic(e,this.getCorners()):0}intersectsFlat(e){return this.intersectsAabb(e.bounds)?ic(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(e,n){return n||this.intersects(e)?Sg(e,this.getCorners()):0}intersectsPreciseFlat(e,n){return n||this.intersectsFlat(e)?Sg(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(e){for(let n=0;n<3;++n)if(this.min[n]>e.max[n]||e.min[n]>this.max[n])return!1;return!0}intersectsAabbXY(e){return!(this.min[0]>e.max[0]||e.min[0]>this.max[0]||this.min[1]>e.max[1]||e.min[1]>this.max[1])}encapsulate(e){for(let n=0;n<3;n++)this.min[n]=Math.min(this.min[n],e.min[n]),this.max[n]=Math.max(this.max[n],e.max[n])}encapsulatePoint(e){for(let n=0;n<3;n++)this.min[n]=Math.min(this.min[n],e[n]),this.max[n]=Math.max(this.max[n],e[n])}closestPoint(e){return[Math.max(Math.min(this.max[0],e[0]),this.min[0]),Math.max(Math.min(this.max[1],e[1]),this.min[1]),Math.max(Math.min(this.max[2],e[2]),this.min[2])]}}lt(Ml,"Aabb");const gf=wa([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Lp}=gf,S2=wa([{name:"a_pos_3",components:3,type:"Int16"}]);var Cd=wa([{name:"a_pos",type:"Int16",components:2}]);function fp(t){return t*$d/cp}const i4=[new Ml([r0,r0,r0],[Su,Su,Su]),new Ml([r0,r0,r0],[0,0,Su]),new Ml([0,r0,r0],[Su,0,Su]),new Ml([r0,0,r0],[0,Su,Su]),new Ml([0,0,r0],[Su,Su,Su])];function Tg(t,e,n,s=!0){const u=l._.scale([],t._camera.position,t.worldSize),m=[e,n,1,1];l.aA.transformMat4(m,m,t.pixelMatrixInverse),l.aA.scale(m,m,1/m[3]);const g=l._.sub([],m,u),E=l._.normalize([],g),T=t.globeMatrix,z=[T[12],T[13],T[14]],$=l._.sub([],z,u),W=l._.length($),Z=l._.normalize([],$),le=t.worldSize/(2*Math.PI),de=l._.dot(Z,E),be=Math.asin(le/W);if(be<Math.acos(de)){if(!s)return null;const xi=[],Ji=[];l._.scale(xi,E,W/de),l._.normalize(Ji,l._.sub(Ji,xi,$)),l._.normalize(E,l._.add(E,$,l._.scale(E,Ji,Math.tan(be)*W)))}const xe=[];new qf(u,E).closestPointOnSphere(z,le,xe);const $e=l._.normalize([],Tt(T,0)),gt=l._.normalize([],Tt(T,1)),yt=l._.normalize([],Tt(T,2)),wt=l._.dot($e,xe),nn=l._.dot(gt,xe),Qt=l._.dot(yt,xe),kn=rl(Math.asin(-nn/le));let Rn=rl(Math.atan2(wt,Qt));Rn=t.center.lng+function(xi,Ji){const So=(Ji-xi+180)%360-180;return So<-180?So+360:So}(t.center.lng,Rn);const li=s0(Rn),Di=zn(a0(kn),0,1);return new jd(li,Di)}class gm{constructor(e,n,s){this.a=l._.sub([],e,s),this.b=l._.sub([],n,s),this.center=s;const u=l._.normalize([],this.a),m=l._.normalize([],this.b);this.angle=Math.acos(l._.dot(u,m))}}function vm(t,e){if(0===t.angle)return null;let n;return n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(s,u,m,g){const E=Math.sin(m);return s*(Math.sin((1-g)*m)/E)+u*(Math.sin(g*m)/E)}(t.a[e],t.b[e],t.angle,zn(n,0,1))+t.center[e]}function d1(t){if(t.z<=1)return i4[t.z+2*t.y+t.x];const e=Mg(S1(t));return Ml.fromPoints(e)}function Ud(t,e,n){return l._.scale(t,t,1-n),l._.scaleAndAdd(t,t,e,n)}function Bp(t,e){const n=Ih(e.zoom);if(0===n)return d1(t);const s=S1(t),u=Mg(s),m=s0(s.getWest())*e.worldSize,g=s0(s.getEast())*e.worldSize,E=a0(s.getNorth())*e.worldSize,T=a0(s.getSouth())*e.worldSize,z=[m,E,0],$=[g,E,0],W=[m,T,0],Z=[g,T,0],le=l.ad.invert([],e.globeMatrix);return l._.transformMat4(z,z,le),l._.transformMat4($,$,le),l._.transformMat4(W,W,le),l._.transformMat4(Z,Z,le),u[0]=Ud(u[0],W,n),u[1]=Ud(u[1],Z,n),u[2]=Ud(u[2],$,n),u[3]=Ud(u[3],z,n),Ml.fromPoints(u)}function T2(t,e,n){for(const s of t)l._.transformMat4(s,s,e),l._.scale(s,s,n)}function Np(t,e,n,s){const u=e/t.worldSize,m=t.globeMatrix;if(n.z<=1){const li=d1(n).getCorners();return T2(li,m,u),Ml.fromPoints(li)}const g=S1(n,s),E=Mg(g,$d+fp(t._tileCoverLift));T2(E,m,u);const T=Number.MAX_VALUE,z=[-T,-T,-T],$=[T,T,T];if(g.contains(t.center)){for(const xi of E)l._.min($,$,xi),l._.max(z,z,xi);z[2]=0;const li=t.point,Di=[li.x*u,li.y*u,0];return l._.min($,$,Di),l._.max(z,z,Di),new Ml($,z)}if(t._tileCoverLift>0){for(const li of E)l._.min($,$,li),l._.max(z,z,li);return new Ml($,z)}const W=[m[12]*u,m[13]*u,m[14]*u],Z=g.getCenter(),le=zn(t.center.lat,-nc,nc),de=zn(Z.lat,-nc,nc),be=s0(t.center.lng),xe=a0(le);let $e=be-s0(Z.lng);const gt=xe-a0(de);$e>.5?$e-=1:$e<-.5&&($e+=1);let yt=0;if(Math.abs($e)>Math.abs(gt))yt=$e>=0?1:3;else{yt=gt>=0?0:2;const li=[m[4]*u,m[5]*u,m[6]*u],Di=-Math.sin(Gr(gt>=0?g.getSouth():g.getNorth()))*$d;l._.scaleAndAdd(W,W,li,Di)}const wt=E[yt],nn=E[(yt+1)%4],Qt=new gm(wt,nn,W),kn=[vm(Qt,0)||wt[0],vm(Qt,1)||wt[1],vm(Qt,2)||wt[2]],Rn=Ih(t.zoom);if(Rn>0){const li=function({x:xi,y:Ji,z:So},qi,wo,zi,bo){const Ro=1/(1<<So);let Co=xi*Ro,lr=Co+Ro,To=Ji*Ro,Fo=To+Ro,Yr=0;const Br=(Co+lr)/2-zi;return Br>.5?Yr=-1:Br<-.5&&(Yr=1),Co=((Co+Yr)*qi-(zi*=qi))*wo+zi,lr=((lr+Yr)*qi-zi)*wo+zi,To=(To*qi-(bo*=qi))*wo+bo,Fo=(Fo*qi-bo)*wo+bo,[[Co,Fo,0],[lr,Fo,0],[lr,To,0],[Co,To,0]]}(n,e,t._pixelsPerMercatorPixel,be,xe);for(let xi=0;xi<E.length;xi++)Ud(E[xi],li[xi],Rn);const Di=l._.add([],li[yt],li[(yt+1)%4]);l._.scale(Di,Di,.5),Ud(kn,Di,Rn)}for(const li of E)l._.min($,$,li),l._.max(z,z,li);return $[2]=Math.min(wt[2],nn[2]),l._.min($,$,kn),l._.max(z,z,kn),new Ml($,z)}function S1({x:t,y:e,z:n},s=!1){const u=1/(1<<n),m=new oa(Tu(t*u),e===(1<<n)-1&&s?-90:$c((e+1)*u)),g=new oa(Tu((t+1)*u),0===e&&s?90:$c(e*u));return new N0(m,g)}function Mg(t,e=$d){const n=Gr(t.getNorth()),s=Gr(t.getSouth()),u=Math.cos(n),m=Math.cos(s),g=Math.sin(n),E=Math.sin(s),T=t.getWest(),z=t.getEast();return[c1(m,E,T,e),c1(m,E,z,e),c1(u,g,z,e),c1(u,g,T,e)]}function h1(t,e,n,s){const u=1<<n.z,m=(t/Xi+n.x)/u;return xc($c((e/Xi+n.y)/u),Tu(m),s)}function Fp({min:t,max:e}){return lp/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}const M2=new Float64Array(16);function Vp(t){const e=Fp(t),n=l.ad.fromScaling(M2,[e,e,e]);return l.ad.translate(n,n,l._.negate([],t.min))}function $p(t){const e=l.ad.fromTranslation(M2,t.min),n=1/Fp(t);return l.ad.scale(e,e,[n,n,n])}function Xf(t){const e=Xi/(2*Math.PI);return t/(2*Math.PI)/e}function Kf(t,e){return Xi/(512*Math.pow(2,t))*Fp(d1(e))}function _m(t,e,n,s,u){const m=Xf(n),g=[t,e,-n/(2*Math.PI)],E=l.ad.identity(new Float64Array(16));return l.ad.translate(E,E,g),l.ad.scale(E,E,[m,m,m]),l.ad.rotateX(E,E,Gr(-u)),l.ad.rotateY(E,E,Gr(-s)),E}function Ih(t){return vi(Rp,$f,t)}function vf(t,e){const n=xc(e.lat,e.lng),s=function(m){const g=xc(m._center.lat,m._center.lng),E=l._.fromValues(0,1,0);let T=l._.cross([],E,g);const z=l.ad.fromRotation([],-m.angle,g);T=l._.transformMat4(T,T,z),l.ad.fromRotation(z,-m._pitch,T);const $=l._.normalize([],g);return l._.scale($,$,fp(m.cameraToCenterDistance/m.pixelsPerMeter)),l._.transformMat4($,$,z),l._.add([],g,$)}(t),u=l._.subtract([],s,n);return l._.angle(u,n)}function _f(t,e){return vf(t,e)>Math.PI/2*1.01}const A2=Gr(85),Yf=Math.cos(A2),Zf=Math.sin(A2),yf=l.ad.create(),D2=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e};function bf(t,e,n,s,u,m,g,E,T){if(m&&t.queryGeometry.isAboveHorizon)return!1;m&&(T*=t.pixelToTileUnitsFactor);const z=t.tileID.canonical,$=n.projection.upVectorScale(z,n.center.lat,n.worldSize).metersToTile;for(const W of e)for(const Z of W){const le=Z.add(E),de=u&&n.elevation?n.elevation.exaggeration()*u.getElevationAt(le.x,le.y,!0):0,be=n.projection.projectTilePoint(le.x,le.y,z);if(de>0){const yt=n.projection.upVector(z,le.x,le.y);be.x+=yt[0]*$*de,be.y+=yt[1]*$*de,be.z+=yt[2]*$*de}const xe=m?le:mp(be.x,be.y,be.z,s),$e=m?t.tilespaceRays.map(yt=>ym(yt,de)):t.queryGeometry.screenGeometry,gt=l.aA.transformMat4([],[be.x,be.y,be.z,1],s);if(!g&&m?T*=gt[3]/n.cameraToCenterDistance:g&&!m&&(T*=n.cameraToCenterDistance/gt[3]),m){const yt=$c((Z.y/Xi+z.y)/(1<<z.z));T/=n.projection.pixelsPerMeter(yt,1)/El(1,yt)}if(I2($e,xe,T))return!0}return!1}function mp(t,e,n,s){const u=l.aA.transformMat4([],[t,e,n,1],s);return new Eo(u[0]/u[3],u[1]/u[3])}const Km=l._.fromValues(0,0,0),gp=l._.fromValues(0,0,1);function ym(t,e){const n=l._.create();return Km[2]=e,t.intersectsPlane(Km,gp,n),new Eo(n[0],n[1])}class Qf extends Gf{}function Jf(t,{width:e,height:n},s,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*n*s)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*n*s);return t.width=e,t.height=n,t.data=u,t}function Lh(t,e,n){const{width:s,height:u}=e;s===t.width&&u===t.height||(jp(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,s),height:Math.min(t.height,u)},n,null),t.width=s,t.height=u,t.data=e.data)}function jp(t,e,n,s,u,m,g,E){if(0===u.width||0===u.height)return e;if(u.width>t.width||u.height>t.height||n.x>t.width-u.width||n.y>t.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||s.x>e.width-u.width||s.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const T=t.data,z=e.data,$=4===m&&E;for(let W=0;W<u.height;W++){const Z=((n.y+W)*t.width+n.x)*m,le=((s.y+W)*e.width+s.x)*m;if($)for(let de=0;de<u.width;de++){const be=Z+de*m+3,xe=le+de*m;z[xe+0]=255,z[xe+1]=255,z[xe+2]=255,z[xe+3]=T[be]}else if(g)for(let de=0;de<u.width;de++){const be=Z+de*m,xe=le+de*m,$e=T[be+3],gt=new Zs(T[be+0]/255*$e,T[be+1]/255*$e,T[be+2]/255*$e,$e).toRenderColor(g).toArray();z[xe+0]=gt[0],z[xe+1]=gt[1],z[xe+2]=gt[2],z[xe+3]=gt[3]}else for(let de=0;de<u.width*m;de++)z[le+de]=T[Z+de]}return e}lt(Qf,"HeatmapBucket",{omit:["layers"]});class p1{constructor(e,n){Jf(this,e,1,n)}resize(e){Lh(this,new p1(e),1)}clone(){return new p1({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,s,u,m){jp(e,n,s,u,m,1,null)}}class hd{constructor(e,n){Jf(this,e,4,n)}resize(e){Lh(this,new hd(e),4)}replace(e,n){n?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new hd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,s,u,m,g,E){jp(e,n,s,u,m,4,g,E)}}class e2{constructor(e,n){this.width=e.width,this.height=e.height,this.data=n instanceof Uint8Array?new Float32Array(n.buffer):n}}lt(p1,"AlphaImage"),lt(hd,"RGBAImage");const t2=new ma({visibility:new Ki(ai.layout_heatmap.visibility)});var Up={paint:new ma({"heatmap-radius":new er(ai.paint_heatmap["heatmap-radius"]),"heatmap-weight":new er(ai.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ki(ai.paint_heatmap["heatmap-intensity"]),"heatmap-color":new us(ai.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ki(ai.paint_heatmap["heatmap-opacity"])}),layout:t2};function vp(t){const e={},n=t.resolution||256,s=t.clips?t.clips.length:1,u=t.image||new hd({width:n,height:s}),m=(g,E,T)=>{e[t.evaluationKey]=T;const z=t.expression.evaluate(e);z&&(u.data[g+E+0]=Math.floor(255*z.r/z.a),u.data[g+E+1]=Math.floor(255*z.g/z.a),u.data[g+E+2]=Math.floor(255*z.b/z.a),u.data[g+E+3]=Math.floor(255*z.a))};if(t.clips)for(let g=0,E=0;g<s;++g,E+=4*n)for(let T=0,z=0;T<n;T++,z+=4){const $=T/(n-1),{start:W,end:Z}=t.clips[g];m(E,z,W*(1-$)+Z*$)}else for(let g=0,E=0;g<n;g++,E+=4)m(0,E,g/(n-1));return u}const P2=new ma({visibility:new Ki(ai.layout_hillshade.visibility)});var Ym={paint:new ma({"hillshade-illumination-direction":new Ki(ai.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ki(ai.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ki(ai.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ki(ai.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ki(ai.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ki(ai.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ki(ai.paint_hillshade["hillshade-emissive-strength"])}),layout:P2};const R2=wa([{name:"a_pos",components:2,type:"Int16"}],4),{members:o4}=R2;function $0(t,e,n=2){const s=e&&e.length,u=s?e[0]*n:t.length;let m=bm(t,0,u,n,!0);const g=[];if(!m||m.next===m.prev)return g;let E,T,z;if(s&&(m=function($,W,Z,le){const de=[];for(let be=0,xe=W.length;be<xe;be++){const $e=bm($,W[be]*le,be<xe-1?W[be+1]*le:$.length,le,!1);$e===$e.next&&($e.steiner=!0),de.push(O2($e))}de.sort(Gp);for(let be=0;be<de.length;be++)Z=If(de[be],Z);return Z}(t,e,m,n)),t.length>80*n){E=1/0,T=1/0;let $=-1/0,W=-1/0;for(let Z=n;Z<u;Z+=n){const le=t[Z],de=t[Z+1];le<E&&(E=le),de<T&&(T=de),le>$&&($=le),de>W&&(W=de)}z=Math.max($-E,W-T),z=0!==z?32767/z:0}return wf(m,g,n,E,T,z,0),g}function bm(t,e,n,s,u){let m;if(u===function(g,E,T,z){let $=0;for(let W=E,Z=T-z;W<T;W+=z)$+=(g[Z]-g[W])*(g[W+1]+g[Z+1]),Z=W;return $}(t,e,n,s)>0)for(let g=e;g<n;g+=s)m=h(g/s|0,t[g],t[g+1],m);else for(let g=n-s;g>=e;g-=s)m=h(g/s|0,t[g],t[g+1],m);return m&&T1(m,m.next)&&(A(m),m=m.next),m}function ah(t,e){if(!t)return t;e||(e=t);let n,s=t;do{if(n=!1,s.steiner||!T1(s,s.next)&&0!==tu(s.prev,s,s.next))s=s.next;else{if(A(s),s=e=s.prev,s===s.next)break;n=!0}}while(n||s!==e);return e}function wf(t,e,n,s,u,m,g){if(!t)return;!g&&m&&function(T,z,$,W){let Z=T;do{0===Z.z&&(Z.z=_p(Z.x,Z.y,z,$,W)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next}while(Z!==T);Z.prevZ.nextZ=null,Z.prevZ=null,function(le){let de,be=1;do{let xe,$e=le;le=null;let gt=null;for(de=0;$e;){de++;let yt=$e,wt=0;for(let Qt=0;Qt<be&&(wt++,yt=yt.nextZ,yt);Qt++);let nn=be;for(;wt>0||nn>0&&yt;)0!==wt&&(0===nn||!yt||$e.z<=yt.z)?(xe=$e,$e=$e.nextZ,wt--):(xe=yt,yt=yt.nextZ,nn--),gt?gt.nextZ=xe:le=xe,xe.prevZ=gt,gt=xe;$e=yt}gt.nextZ=null,be*=2}while(de>1)}(Z)}(t,s,u,m);let E=t;for(;t.prev!==t.next;){const T=t.prev,z=t.next;if(m?Hp(t,s,u,m):z2(t))e.push(T.i,t.i,z.i),A(t),t=z.next,E=z.next;else if((t=z)===E){g?1===g?wf(t=xf(ah(t),e),e,n,s,u,m,2):2===g&&G1(t,e,n,s,u,m):wf(ah(t),e,n,s,u,m,1);break}}}function z2(t){const e=t.prev,n=t,s=t.next;if(tu(e,n,s)>=0)return!1;const u=e.x,m=n.x,g=s.x,E=e.y,T=n.y,z=s.y,$=u<m?u<g?u:g:m<g?m:g,W=E<T?E<z?E:z:T<z?T:z,Z=u>m?u>g?u:g:m>g?m:g,le=E>T?E>z?E:z:T>z?T:z;let de=s.next;for(;de!==e;){if(de.x>=$&&de.x<=Z&&de.y>=W&&de.y<=le&&c0(u,E,m,T,g,z,de.x,de.y)&&tu(de.prev,de,de.next)>=0)return!1;de=de.next}return!0}function Hp(t,e,n,s){const u=t.prev,m=t,g=t.next;if(tu(u,m,g)>=0)return!1;const E=u.x,T=m.x,z=g.x,$=u.y,W=m.y,Z=g.y,le=E<T?E<z?E:z:T<z?T:z,de=$<W?$<Z?$:Z:W<Z?W:Z,be=E>T?E>z?E:z:T>z?T:z,xe=$>W?$>Z?$:Z:W>Z?W:Z,$e=_p(le,de,e,n,s),gt=_p(be,xe,e,n,s);let yt=t.prevZ,wt=t.nextZ;for(;yt&&yt.z>=$e&&wt&&wt.z<=gt;){if(yt.x>=le&&yt.x<=be&&yt.y>=de&&yt.y<=xe&&yt!==u&&yt!==g&&c0(E,$,T,W,z,Z,yt.x,yt.y)&&tu(yt.prev,yt,yt.next)>=0||(yt=yt.prevZ,wt.x>=le&&wt.x<=be&&wt.y>=de&&wt.y<=xe&&wt!==u&&wt!==g&&c0(E,$,T,W,z,Z,wt.x,wt.y)&&tu(wt.prev,wt,wt.next)>=0))return!1;wt=wt.nextZ}for(;yt&&yt.z>=$e;){if(yt.x>=le&&yt.x<=be&&yt.y>=de&&yt.y<=xe&&yt!==u&&yt!==g&&c0(E,$,T,W,z,Z,yt.x,yt.y)&&tu(yt.prev,yt,yt.next)>=0)return!1;yt=yt.prevZ}for(;wt&&wt.z<=gt;){if(wt.x>=le&&wt.x<=be&&wt.y>=de&&wt.y<=xe&&wt!==u&&wt!==g&&c0(E,$,T,W,z,Z,wt.x,wt.y)&&tu(wt.prev,wt,wt.next)>=0)return!1;wt=wt.nextZ}return!0}function xf(t,e){let n=t;do{const s=n.prev,u=n.next.next;!T1(s,u)&&wm(s,n,n.next,u)&&Wp(s,u)&&Wp(u,s)&&(e.push(s.i,n.i,u.i),A(n),A(n.next),n=t=u),n=n.next}while(n!==t);return ah(n)}function G1(t,e,n,s,u,m){let g=t;do{let E=g.next.next;for(;E!==g.prev;){if(g.i!==E.i&&r4(g,E)){let T=y(g,E);return g=ah(g,g.next),T=ah(T,T.next),wf(g,e,n,s,u,m,0),void wf(T,e,n,s,u,m,0)}E=E.next}g=g.next}while(g!==t)}function Gp(t,e){return t.x-e.x}function If(t,e){const n=function(u,m){let g=m;const E=u.x,T=u.y;let z,$=-1/0;do{if(T<=g.y&&T>=g.next.y&&g.next.y!==g.y){const be=g.x+(T-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(be<=E&&be>$&&($=be,z=g.x<g.next.x?g:g.next,be===E))return z}g=g.next}while(g!==m);if(!z)return null;const W=z,Z=z.x,le=z.y;let de=1/0;g=z;do{if(E>=g.x&&g.x>=Z&&E!==g.x&&c0(T<le?E:$,T,Z,le,T<le?$:E,T,g.x,g.y)){const be=Math.abs(T-g.y)/(E-g.x);Wp(g,u)&&(be<de||be===de&&(g.x>z.x||g.x===z.x&&n2(z,g)))&&(z=g,de=be)}g=g.next}while(g!==W);return z}(t,e);if(!n)return e;const s=y(n,t);return ah(s,s.next),ah(n,n.next)}function n2(t,e){return tu(t.prev,t,e.prev)<0&&tu(e.next,t,t.next)<0}function _p(t,e,n,s,u){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*u|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*u|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function O2(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function c0(t,e,n,s,u,m,g,E){return(u-g)*(e-E)>=(t-g)*(m-E)&&(t-g)*(s-E)>=(n-g)*(e-E)&&(n-g)*(m-E)>=(u-g)*(s-E)}function r4(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(n,s){let u=n;do{if(u.i!==n.i&&u.next.i!==n.i&&u.i!==s.i&&u.next.i!==s.i&&wm(u,u.next,n,s))return!0;u=u.next}while(u!==n);return!1}(t,e)&&(Wp(t,e)&&Wp(e,t)&&function(n,s){let u=n,m=!1;const g=(n.x+s.x)/2,E=(n.y+s.y)/2;do{u.y>E!=u.next.y>E&&u.next.y!==u.y&&g<(u.next.x-u.x)*(E-u.y)/(u.next.y-u.y)+u.x&&(m=!m),u=u.next}while(u!==n);return m}(t,e)&&(tu(t.prev,t,e.prev)||tu(t,e.prev,e))||T1(t,e)&&tu(t.prev,t,t.next)>0&&tu(e.prev,e,e.next)>0)}function tu(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function T1(t,e){return t.x===e.x&&t.y===e.y}function wm(t,e,n,s){const u=Ef(tu(t,e,n)),m=Ef(tu(t,e,s)),g=Ef(tu(n,s,t)),E=Ef(tu(n,s,e));return u!==m&&g!==E||!(0!==u||!L2(t,n,e))||!(0!==m||!L2(t,s,e))||!(0!==g||!L2(n,t,s))||!(0!==E||!L2(n,e,s))}function L2(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ef(t){return t>0?1:t<0?-1:0}function Wp(t,e){return tu(t.prev,t,t.next)<0?tu(t,e,t.next)>=0&&tu(t,t.prev,e)>=0:tu(t,e,t.prev)<0||tu(t,t.next,e)<0}function y(t,e){const n=I(t.i,t.x,t.y),s=I(e.i,e.x,e.y),u=t.next,m=e.prev;return t.next=e,e.prev=t,n.next=u,u.prev=n,s.next=n,n.prev=s,m.next=s,s.prev=m,s}function h(t,e,n,s){const u=I(t,e,n);return s?(u.next=s.next,u.prev=s,s.next.prev=u,s.next=u):(u.prev=u,u.next=u),u}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function F(t,e){const n=t.length;if(n<=1)return[t];const s=[];let u,m;for(let g=0;g<n;g++){const E=Bc(t[g]);0!==E&&(t[g].area=Math.abs(E),void 0===m&&(m=E<0),m===E<0?(u&&s.push(u),u=[t[g]]):u.push(t[g]))}if(u&&s.push(u),e>1)for(let g=0;g<s.length;g++)s[g].length<=e||(Sh(s[g],e,1,s[g].length-1,K),s[g]=s[g].slice(0,e));return s}function K(t,e){return e.area-t.area}function Te(t,e,n){const s=n.patternDependencies;let u=!1;for(const m of e){const g=m.paint.get(`${t}-pattern`);g.isConstant()||(u=!0);const E=g.constantOr(null);E&&(u=!0,s[E]=!0)}return u}function je(t,e,n,s,u){const m=u.patternDependencies;for(const g of e){const E=g.paint.get(`${t}-pattern`).value;if("constant"!==E.kind){let T=E.evaluate({zoom:s},n,{},u.availableImages);T=T&&T.name?T.name:T,m[T]=!0,n.patterns[g.id]=T}}return n}class ze{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Eu,this.indexArray=new bc,this.indexArray2=new t0,this.programConfigurations=new I1(e.layers,{zoom:e.zoom,lut:e.lut}),this.segments=new ul,this.segments2=new ul,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.projection=e.projection}updateFootprints(e,n){}populate(e,n,s,u){this.hasPattern=Te("fill",this.layers,n);const m=this.layers[0].layout.get("fill-sort-key"),g=[];for(const{feature:E,id:T,index:z,sourceLayerIndex:$}of e){const W=this.layers[0]._featureFilter.needGeometry,Z=F0(E,W);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),Z,s))continue;const le=m?m.evaluate(Z,{},s,n.availableImages):void 0,de={id:T,properties:E.properties,type:E.type,sourceLayerIndex:$,index:z,geometry:W?Z.geometry:u1(E,s,u),patterns:{},sortKey:le};g.push(de)}m&&g.sort((E,T)=>E.sortKey-T.sortKey);for(const E of g){const{geometry:T,index:z,sourceLayerIndex:$}=E;if(this.hasPattern){const W=je("fill",this.layers,E,this.zoom,n);this.patternFeatures.push(W)}else this.addFeature(E,T,z,s,{},n.availableImages,n.brightness);n.featureIndex.insert(e[z].feature,T,z,$,this.index)}}update(e,n,s,u,m){const g=0!==Object.keys(e).length;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,g?this.stateDependentLayers:this.layers,s,u,m)}addFeatures(e,n,s,u,m,g){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,n,s,u,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,o4),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,n,s,u,m,g=[],E){for(const T of F(n,500)){let z=0;for(const be of T)z+=be.length;const $=this.segments.prepareSegment(z,this.layoutVertexArray,this.indexArray),W=$.vertexLength,Z=[],le=[];for(const be of T){if(0===be.length)continue;be!==T[0]&&le.push(Z.length/2);const xe=this.segments2.prepareSegment(be.length,this.layoutVertexArray,this.indexArray2),$e=xe.vertexLength;this.layoutVertexArray.emplaceBack(be[0].x,be[0].y),this.indexArray2.emplaceBack($e+be.length-1,$e),Z.push(be[0].x),Z.push(be[0].y);for(let gt=1;gt<be.length;gt++)this.layoutVertexArray.emplaceBack(be[gt].x,be[gt].y),this.indexArray2.emplaceBack($e+gt-1,$e+gt),Z.push(be[gt].x),Z.push(be[gt].y);xe.vertexLength+=be.length,xe.primitiveLength+=be.length}const de=$0(Z,le);for(let be=0;be<de.length;be+=3)this.indexArray.emplaceBack(W+de[be],W+de[be+1],W+de[be+2]);$.vertexLength+=z,$.primitiveLength+=de.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,g,u,E)}}lt(ze,"FillBucket",{omit:["layers","patternFeatures"]});const ut=new ma({"fill-sort-key":new er(ai.layout_fill["fill-sort-key"]),visibility:new Ki(ai.layout_fill.visibility)});var nt={paint:new ma({"fill-antialias":new Ki(ai.paint_fill["fill-antialias"]),"fill-opacity":new er(ai.paint_fill["fill-opacity"]),"fill-color":new er(ai.paint_fill["fill-color"]),"fill-outline-color":new er(ai.paint_fill["fill-outline-color"]),"fill-translate":new Ki(ai.paint_fill["fill-translate"]),"fill-translate-anchor":new Ki(ai.paint_fill["fill-translate-anchor"]),"fill-pattern":new er(ai.paint_fill["fill-pattern"]),"fill-emissive-strength":new Ki(ai.paint_fill["fill-emissive-strength"])}),layout:ut};class pt{constructor(e,n,s,u){if(this.triangleCount=n.length/3,this.min=new Eo(0,0),this.max=new Eo(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],0===this.triangleCount||0===e.length)return;const[m,g]=[e[0].clone(),e[0].clone()];for(let W=1;W<e.length;++W){const Z=e[W];m.x=Math.min(m.x,Z.x),m.y=Math.min(m.y,Z.y),g.x=Math.max(g.x,Z.x),g.y=Math.max(g.y,Z.y)}if(u){const W=Math.ceil(Math.max(g.x-m.x,g.y-m.y)/u);s=Math.max(s,W)}if(0===s)return;this.min=m,this.max=g;const E=this.max.sub(this.min);E.x=Math.max(E.x,1),E.y=Math.max(E.y,1);const T=Math.max(E.x,E.y)/s;this.cellsX=Math.max(1,Math.ceil(E.x/T)),this.cellsY=Math.max(1,Math.ceil(E.y/T)),this.xScale=1/T,this.yScale=1/T;const z=[];for(let W=0;W<this.triangleCount;W++){const Z=e[n[3*W+0]].sub(this.min),le=e[n[3*W+1]].sub(this.min),de=e[n[3*W+2]].sub(this.min),be=bt(Math.floor(Math.min(Z.x,le.x,de.x)),this.xScale,this.cellsX),xe=bt(Math.floor(Math.max(Z.x,le.x,de.x)),this.xScale,this.cellsX),$e=bt(Math.floor(Math.min(Z.y,le.y,de.y)),this.yScale,this.cellsY),gt=bt(Math.floor(Math.max(Z.y,le.y,de.y)),this.yScale,this.cellsY),yt=new Eo(0,0),wt=new Eo(0,0),nn=new Eo(0,0),Qt=new Eo(0,0);for(let kn=$e;kn<=gt;++kn){yt.y=wt.y=kn*T,nn.y=Qt.y=(kn+1)*T;for(let Rn=be;Rn<=xe;++Rn)yt.x=nn.x=Rn*T,wt.x=Qt.x=(Rn+1)*T,(l0(Z,le,de,yt,wt,Qt)||l0(Z,le,de,yt,Qt,nn))&&z.push({cellIdx:kn*this.cellsX+Rn,triIdx:W})}}if(0===z.length)return;z.sort((W,Z)=>W.cellIdx-Z.cellIdx||W.triIdx-Z.triIdx);let $=0;for(;$<z.length;){const W=z[$].cellIdx,Z={start:this.payload.length,len:0};for(;$<z.length&&z[$].cellIdx===W;)++Z.len,this.payload.push(z[$++].triIdx);this.cells[W]=Z}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(e,n){if(0===this.triangleCount||0===this.cells.length||e.x>this.max.x||this.min.x>e.x||e.y>this.max.y||this.min.y>e.y)return;const s=bt(e.x-this.min.x,this.xScale,this.cellsX),u=bt(e.y-this.min.y,this.yScale,this.cellsY),m=this.cells[u*this.cellsX+s];if(m){this._lazyInitLookup();for(let g=0;g<m.len;g++){const E=this.payload[m.start+g],T=Math.floor(E/8),z=1<<E%8;if(!(this.lookup[T]&z)&&(this.lookup[T]|=z,n.push(E),n.length===this.triangleCount))return}}}query(e,n,s){if(0===this.triangleCount||0===this.cells.length||e.x>this.max.x||this.min.x>n.x||e.y>this.max.y||this.min.y>n.y)return;this._lazyInitLookup();const u=bt(e.x-this.min.x,this.xScale,this.cellsX),m=bt(n.x-this.min.x,this.xScale,this.cellsX),g=bt(e.y-this.min.y,this.yScale,this.cellsY),E=bt(n.y-this.min.y,this.yScale,this.cellsY);for(let T=g;T<=E;T++)for(let z=u;z<=m;z++){const $=this.cells[T*this.cellsX+z];if($)for(let W=0;W<$.len;W++){const Z=this.payload[$.start+W],le=Math.floor(Z/8),de=1<<Z%8;if(!(this.lookup[le]&de)&&(this.lookup[le]|=de,s.push(Z),s.length===this.triangleCount))return}}}}function bt(t,e,n){return Math.max(0,Math.min(n-1,Math.floor(t*e)))}lt(pt,"TriangleGridIndex");class rn{constructor(e){this.zoom=e.zoom,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.footprints=[]}updateFootprints(e,n){for(const s of this.footprints)n.push({footprint:s,id:e})}populate(e,n,s,u){const m=[];for(const{feature:g,id:E,index:T,sourceLayerIndex:z}of e){const $=this.layers[0]._featureFilter.needGeometry,W=F0(g,$);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),W,s))continue;const Z={id:E,properties:g.properties,type:g.type,sourceLayerIndex:z,index:T,geometry:$?W.geometry:u1(g,s,u),patterns:{}};m.push(Z)}for(const g of m){const{geometry:E,index:T,sourceLayerIndex:z}=g;this.addFeature(g,E,T,s,{},n.availableImages,n.brightness),n.featureIndex.insert(e[T].feature,E,T,z,this.index)}}isEmpty(){return 0===this.footprints.length}uploadPending(){return!1}upload(e){}update(e,n,s,u,m){}destroy(){}addFeature(e,n,s,u,m,g=[],E){for(const T of F(n,2)){const z=[],$=[],W=[],Z=new Eo(1/0,1/0),le=new Eo(-1/0,-1/0);for(const xe of T)if(0!==xe.length){xe!==T[0]&&W.push($.length/2);for(let $e=0;$e<xe.length;$e++)$.push(xe[$e].x),$.push(xe[$e].y),z.push(xe[$e]),Z.x=Math.min(Z.x,xe[$e].x),Z.y=Math.min(Z.y,xe[$e].y),le.x=Math.max(le.x,xe[$e].x),le.y=Math.max(le.y,xe[$e].y)}const de=$0($,W),be=new pt(z,de,8,256);this.footprints.push({vertices:z,indices:de,grid:be,min:Z,max:le})}}}lt(rn,"ClipBucket",{omit:["layers"]});const fn=new ma({"clip-layer-types":new Ki(ai.layout_clip["clip-layer-types"])});var mn={paint:new ma({}),layout:fn};const wn=wa([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Nt=wa([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),Ln=wa([{name:"a_centroid_pos",components:2,type:"Uint16"}]),_n=wa([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),di=wa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:uo}=wn;var Qo={},ur=kc,zo=Qi;function Qi(t,e,n,s,u){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=s,this._values=u,t.readFields(Po,this,e)}function Po(t,e,n){1==t?e.id=n.readVarint():2==t?function(s,u){for(var m=s.readVarint()+s.pos;s.pos<m;){var g=u._keys[s.readVarint()],E=u._values[s.readVarint()];u.properties[g]=E}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Yo(t){for(var e,n,s=0,u=0,m=t.length,g=m-1;u<m;g=u++)s+=((n=t[g]).x-(e=t[u]).x)*(e.y+n.y);return s}Qi.types=["Unknown","Point","LineString","Polygon"],Qi.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,s=1,u=0,m=0,g=0,E=[];t.pos<n;){if(u<=0){var T=t.readVarint();s=7&T,u=T>>3}if(u--,1===s||2===s)m+=t.readSVarint(),g+=t.readSVarint(),1===s&&(e&&E.push(e),e=[]),e.push(new ur(m,g));else{if(7!==s)throw new Error("unknown command "+s);e&&e.push(e[0].clone())}}return e&&E.push(e),E},Qi.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,s=0,u=0,m=0,g=1/0,E=-1/0,T=1/0,z=-1/0;t.pos<e;){if(s<=0){var $=t.readVarint();n=7&$,s=$>>3}if(s--,1===n||2===n)(u+=t.readSVarint())<g&&(g=u),u>E&&(E=u),(m+=t.readSVarint())<T&&(T=m),m>z&&(z=m);else if(7!==n)throw new Error("unknown command "+n)}return[g,T,E,z]},Qi.prototype.toGeoJSON=function(t,e,n){var s,u,m=this.extent*Math.pow(2,n),g=this.extent*t,E=this.extent*e,T=this.loadGeometry(),z=Qi.types[this.type];function $(le){for(var de=0;de<le.length;de++){var be=le[de];le[de]=[360*(be.x+g)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+E)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(s=0;s<T.length;s++)W[s]=T[s][0];$(T=W);break;case 2:for(s=0;s<T.length;s++)$(T[s]);break;case 3:for(T=function(le){var de=le.length;if(de<=1)return[le];for(var be,xe,$e=[],gt=0;gt<de;gt++){var yt=Yo(le[gt]);0!==yt&&(void 0===xe&&(xe=yt<0),xe===yt<0?(be&&$e.push(be),be=[le[gt]]):be.push(le[gt]))}return be&&$e.push(be),$e}(T),s=0;s<T.length;s++)for(u=0;u<T[s].length;u++)$(T[s][u])}1===T.length?T=T[0]:z="Multi"+z;var Z={type:"Feature",geometry:{type:z,coordinates:T},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var vo=zo,Si=ko;function ko(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(vr,this,e),this.length=this._features.length}function vr(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(s){for(var u=null,m=s.readVarint()+s.pos;s.pos<m;){var g=s.readVarint()>>3;u=1===g?s.readString():2===g?s.readFloat():3===g?s.readDouble():4===g?s.readVarint64():5===g?s.readVarint():6===g?s.readSVarint():7===g?s.readBoolean():null}return u}(n))}ko.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new vo(this._pbf,e,this.extent,this._keys,this._values)};var Rs=Si;function $o(t,e,n){if(3===t){var s=new Rs(n,n.readVarint()+n.pos);s.length&&(e[s.name]=s)}}var No=Qo.VectorTile=function(t,e){this.layers=t.readFields($o,{},e)},Xr=Qo.VectorTileFeature=zo;Qo.VectorTileLayer=Si;class ga extends Eo{constructor(e,n,s){super(e,n),this.z=s}}class xr extends ga{constructor(e,n,s,u){super(e,n,s),this.w=u}}function qr(t,e,n,s){const u=[],m=0===s?(g,E,T,z,$,W)=>{g.push(new Eo(W,T+(W-E)/(z-E)*($-T)))}:(g,E,T,z,$,W)=>{g.push(new Eo(E+(W-T)/($-T)*(z-E),W))};for(const g of t){const E=[];for(const T of g){if(T.length<=2)continue;const z=[];for(let Z=0;Z<T.length-1;Z++){const le=T[Z].x,de=T[Z].y,be=T[Z+1].x,xe=T[Z+1].y,$e=0===s?le:de,gt=0===s?be:xe;$e<e?gt>e&&m(z,le,de,be,xe,e):$e>n?gt<n&&m(z,le,de,be,xe,n):z.push(T[Z]),gt<e&&$e>=e&&m(z,le,de,be,xe,e),gt>n&&$e<=n&&m(z,le,de,be,xe,n)}let $=T[T.length-1];const W=0===s?$.x:$.y;W>=e&&W<=n&&z.push($),z.length&&($=z[z.length-1],z[0].x===$.x&&z[0].y===$.y||z.push(z[0]),E.push(z))}E.length&&u.push(E)}return u}function ms(t,e,n,s){const u="x"===n?"y":"x",m=(s-t[n])/(e[n]-t[n]);t[u]=t[u]+(e[u]-t[u])*m,t[n]=s,t.hasOwnProperty("z")&&(t.z=Cr(t.z,e.z,m)),t.hasOwnProperty("w")&&(t.w=Cr(t.w,e.w,m))}function jc(t,e,n,s){const u=n,m=s;for(const g of["x","y"]){let E=t,T=e;E[g]>=T[g]&&(E=e,T=t),E[g]<u&&T[g]>u&&ms(E,T,g,u),E[g]<m&&T[g]>m&&ms(T,E,g,m)}}function Ls(t,e){return t.x-e.x||t.y-e.y}function Kl(t,e){return 0===Ls(t.min,e.min)&&0===Ls(t.max,e.max)}function Yl(t,e){return!(t.min.x>e.max.x||t.max.x<e.min.x||t.min.y>e.max.y||t.max.y<e.min.y)}function qp(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].sourceId!==e[n].sourceId||!Kl(t[n],e[n])||t[n].order!==e[n].order||t[n].clipMask!==e[n].clipMask)return!1;return!0}function Hs(t,e,n){const s=1/Xi,u=1/(1<<n.canonical.z),m=(e.x*s+n.canonical.x)*u+n.wrap,g=(e.y*s+n.canonical.y)*u;return{min:new Eo((t.x*s+n.canonical.x)*u+n.wrap,(t.y*s+n.canonical.y)*u),max:new Eo(m,g)}}function j0(t,e,n){const s=1<<n.canonical.z,u=((e.x-n.wrap)*s-n.canonical.x)*Xi,m=(e.y*s-n.canonical.y)*Xi;return{min:new Eo(((t.x-n.wrap)*s-n.canonical.x)*Xi,(t.y*s-n.canonical.y)*Xi),max:new Eo(u,m)}}function Cf(t,e,n,s,u,m,g){const E=t.indices,T=t.vertices,z=[];for(let $=s;$<s+u;$+=3){const W=e[n[$+0]+m],Z=e[n[$+1]+m],le=e[n[$+2]+m],de=Math.min(W.x,Z.x,le.x),be=Math.max(W.x,Z.x,le.x),xe=Math.min(W.y,Z.y,le.y),$e=Math.max(W.y,Z.y,le.y);z.length=0,t.grid.query(new Eo(de,xe),new Eo(be,$e),z);for(let gt=0;gt<z.length;gt++){const yt=z[gt];if(l0(T[E[3*yt+0]],T[E[3*yt+1]],T[E[3*yt+2]],W,Z,le,g))return!0}}return!1}function s4(t,e,n,s){if(!t||!n)return!1;let u=t.vertices;if(!e.canonical.equals(s.canonical)||e.wrap!==s.wrap){if(n.vertices.length<t.vertices.length)return s4(n,s,t,e);const m=e.canonical,g=s.canonical,E=Math.pow(2,g.z-m.z);u=t.vertices.map(T=>new Eo((T.x+m.x*Xi)*E-g.x*Xi,(T.y+m.y*Xi)*E-g.y*Xi))}return Cf(n,u,t.indices,0,t.indices.length,0,0)}function a4(t,e,n,s){const u=Math.pow(2,s.z-n.z);return new Eo((t+n.x*Xi)*u-s.x*Xi,(e+n.y*Xi)*u-s.y*Xi)}function Ag(t,e){const n=[];e.footprint.grid.queryPoint(t,n);const s=e.footprint.indices,u=e.footprint.vertices;for(let m=0;m<n.length;m++){const g=n[m];if(td([u[s[3*g+0]],u[s[3*g+1]],u[s[3*g+2]]],t))return!0}return!1}class l4{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,n){const s=this.toIdx(e,n);return{min:this.minimums[s],max:this.maximums[s]}}isLeaf(e,n){return this.leaves[this.toIdx(e,n)]}toIdx(e,n){return n*this.size+e}}function Zm(t,e,n,s){let u=0,m=Number.MAX_VALUE;for(let g=0;g<3;g++)if(Math.abs(s[g])<1e-15){if(n[g]<t[g]||n[g]>e[g])return null}else{const E=1/s[g];let T=(t[g]-n[g])*E,z=(e[g]-n[g])*E;if(T>z){const $=T;T=z,z=$}if(T>u&&(u=T),z<m&&(m=z),u>m)return null}return u}function B2(t,e,n,s,u,m,g,E,T,z,$){const W=s-t,Z=u-e,le=m-n,de=g-t,be=E-e,xe=T-n,$e=$[1]*xe-$[2]*be,gt=$[2]*de-$[0]*xe,yt=$[0]*be-$[1]*de,wt=W*$e+Z*gt+le*yt;if(Math.abs(wt)<1e-15)return null;const nn=1/wt,Qt=z[0]-t,kn=z[1]-e,Rn=z[2]-n,li=(Qt*$e+kn*gt+Rn*yt)*nn;if(li<0||li>1)return null;const Di=kn*le-Rn*Z,xi=Rn*W-Qt*le,Ji=Qt*Z-kn*W,So=($[0]*Di+$[1]*xi+$[2]*Ji)*nn;return So<0||li+So>1?null:(de*Di+be*xi+xe*Ji)*nn}function Qm(t,e,n){return(t-e)/(n-e)}function N2(t,e,n,s,u,m,g,E,T){const z=1<<n,$=m-s,W=g-u,Z=(t+1)/z*$+s,le=(e+0)/z*W+u,de=(e+1)/z*W+u;E[0]=(t+0)/z*$+s,E[1]=le,T[0]=Z,T[1]=de}class F2{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const n=function(m){const g=Math.ceil(Math.log2(m.dim/8)),E=[];let T=Math.ceil(Math.pow(2,g));const z=1/T,$=(le,de,be,xe,$e)=>{const gt=xe?1:0,yt=(le+1)*be-gt,wt=de*be,nn=(de+1)*be-gt;$e[0]=le*be,$e[1]=wt,$e[2]=yt,$e[3]=nn};let W=new l4(T);const Z=[];for(let le=0;le<T*T;le++){$(le%T,Math.floor(le/T),z,!1,Z);const de=u0(Z[0],Z[1],m),be=u0(Z[2],Z[1],m),xe=u0(Z[2],Z[3],m),$e=u0(Z[0],Z[3],m);W.minimums.push(Math.min(de,be,xe,$e)),W.maximums.push(Math.max(de,be,xe,$e)),W.leaves.push(1)}for(E.push(W),T/=2;T>=1;T/=2){const le=E[E.length-1];W=new l4(T);for(let de=0;de<T*T;de++){$(de%T,Math.floor(de/T),2,!0,Z);const be=le.getElevation(Z[0],Z[1]),xe=le.getElevation(Z[2],Z[1]),$e=le.getElevation(Z[2],Z[3]),gt=le.getElevation(Z[0],Z[3]),yt=le.isLeaf(Z[0],Z[1]),wt=le.isLeaf(Z[2],Z[1]),nn=le.isLeaf(Z[2],Z[3]),Qt=le.isLeaf(Z[0],Z[3]),kn=Math.min(be.min,xe.min,$e.min,gt.min),Rn=Math.max(be.max,xe.max,$e.max,gt.max),li=yt&&wt&&nn&&Qt;W.maximums.push(Rn),W.minimums.push(kn),W.leaves.push(Rn-kn<=5&&li?1:0)}E.push(W)}return E}(this.dem),s=n.length-1,u=n[s];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(n,0,0,s,0)}raycastRoot(e,n,s,u,m,g,E=1){return Zm([e,n,-100],[s,u,this.maximums[0]*E],m,g)}raycast(e,n,s,u,m,g,E=1){if(!this.nodeCount)return null;const T=this.raycastRoot(e,n,s,u,m,g,E);if(null==T)return null;const z=[],$=[],W=[],Z=[],le=[{idx:0,t:T,nodex:0,nodey:0,depth:0}];for(;le.length>0;){const{idx:de,t:be,nodex:xe,nodey:$e,depth:gt}=le.pop();if(this.leaves[de]){N2(xe,$e,gt,e,n,s,u,W,Z);const wt=1<<gt,nn=(xe+0)/wt,Qt=(xe+1)/wt,kn=($e+0)/wt,Rn=($e+1)/wt,li=u0(nn,kn,this.dem)*E,Di=u0(Qt,kn,this.dem)*E,xi=u0(Qt,Rn,this.dem)*E,Ji=u0(nn,Rn,this.dem)*E,So=B2(W[0],W[1],li,Z[0],W[1],Di,Z[0],Z[1],xi,m,g),qi=B2(Z[0],Z[1],xi,W[0],Z[1],Ji,W[0],W[1],li,m,g),wo=Math.min(null!==So?So:Number.MAX_VALUE,null!==qi?qi:Number.MAX_VALUE);if(wo!==Number.MAX_VALUE)return wo;{const zi=l._.scaleAndAdd([],m,g,be);if(xm(li,Di,Ji,xi,Qm(zi[0],W[0],Z[0]),Qm(zi[1],W[1],Z[1]))>=zi[2])return be}continue}let yt=0;for(let wt=0;wt<this._siblingOffset.length;wt++){N2((xe<<1)+this._siblingOffset[wt][0],($e<<1)+this._siblingOffset[wt][1],gt+1,e,n,s,u,W,Z),W[2]=-100,Z[2]=this.maximums[this.childOffsets[de]+wt]*E;const nn=Zm(W,Z,m,g);if(null!=nn){const Qt=nn;z[wt]=Qt;let kn=!1;for(let Rn=0;Rn<yt&&!kn;Rn++)Qt>=z[$[Rn]]&&($.splice(Rn,0,wt),kn=!0);kn||($[yt]=wt),yt++}}for(let wt=0;wt<yt;wt++){const nn=$[wt];le.push({idx:this.childOffsets[de]+nn,t:z[nn],nodex:(xe<<1)+this._siblingOffset[nn][0],nodey:($e<<1)+this._siblingOffset[nn][1],depth:gt+1})}}return null}_addNode(e,n,s){return this.minimums.push(e),this.maximums.push(n),this.leaves.push(s),this.childOffsets.push(0),this.nodeCount++}_construct(e,n,s,u,m){if(1===e[u].isLeaf(n,s))return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const g=u-1,E=e[g];let T=0,z=0;for(let $=0;$<this._siblingOffset.length;$++){const W=2*n+this._siblingOffset[$][0],Z=2*s+this._siblingOffset[$][1],le=E.getElevation(W,Z),de=E.isLeaf(W,Z),be=this._addNode(le.min,le.max,de);de&&(T|=1<<$),z||(z=be)}for(let $=0;$<this._siblingOffset.length;$++)T&1<<$||this._construct(e,2*n+this._siblingOffset[$][0],2*s+this._siblingOffset[$][1],g,z+$)}}function xm(t,e,n,s,u,m){return Cr(Cr(t,n,m),Cr(e,s,m),u)}function u0(t,e,n){const s=n.dim,u=zn(t*s-.5,0,s-1),m=zn(e*s-.5,0,s-1),g=Math.floor(u),E=Math.floor(m),T=Math.min(g+1,s-1),z=Math.min(E+1,s-1);return xm(n.get(g,E),n.get(T,E),n.get(g,z),n.get(T,z),u-g,m-E)}const W1={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function yp(t,e,n){return(256*t*256+256*e+n)/10-1e4}function Dg(t,e,n){return 256*t+e+n/256-32768}class V2{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,n,s,u=!1){if(this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(s&&"mapbox"!==s&&"terrarium"!==s)return fa(`"${s}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=n.height;const m=this.dim=n.height-2,g=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.floatView=new Float32Array(n.data.buffer),this.borderReady=u,this._modifiedForSources={},!u){for(let T=0;T<m;T++)g[this._idx(-1,T)]=g[this._idx(0,T)],g[this._idx(m,T)]=g[this._idx(m-1,T)],g[this._idx(T,-1)]=g[this._idx(T,0)],g[this._idx(T,m)]=g[this._idx(T,m-1)];g[this._idx(-1,-1)]=g[this._idx(0,0)],g[this._idx(m,-1)]=g[this._idx(m-1,0)],g[this._idx(-1,m)]=g[this._idx(0,m-1)],g[this._idx(m,m)]=g[this._idx(m-1,m-1)]}const E="terrarium"===s?Dg:yp;for(let T=0;T<g.length;++T){const z=4*T;this.floatView[T]=E(this.pixels[z],this.pixels[z+1],this.pixels[z+2])}this._timestamp=mi.now()}_buildQuadTree(){this._tree=new F2(this)}get(e,n,s=!1){s&&(e=zn(e,-1,this.dim),n=zn(n,-1,this.dim));const u=this._idx(e,n);return this.floatView[u]}set(e,n,s){const u=this._idx(e,n),m=this.floatView[u];return this.floatView[u]=s,s-m}static getUnpackVector(e){return W1[e]}_idx(e,n){if(e<-1||e>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(e+1)}static pack(e,n){const s=[0,0,0,0],u=V2.getUnpackVector(n);let m=Math.floor((e+u[3])/u[2]);return s[2]=m%256,m=Math.floor(m/256),s[1]=m%256,m=Math.floor(m/256),s[0]=m,s}getPixels(){return new e2({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,n,s){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=n*this.dim,m=n*this.dim+this.dim,g=s*this.dim,E=s*this.dim+this.dim;switch(n){case-1:u=m-1;break;case 1:m=u+1}switch(s){case-1:g=E-1;break;case 1:E=g+1}const T=-n*this.dim,z=-s*this.dim;for(let $=g;$<E;$++)for(let W=u;W<m;W++){const Z=4*this._idx(W,$),le=4*this._idx(W+T,$+z);this.pixels[Z+0]=e.pixels[le+0],this.pixels[Z+1]=e.pixels[le+1],this.pixels[Z+2]=e.pixels[le+2],this.pixels[Z+3]=e.pixels[le+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}lt(V2,"DEMData"),lt(F2,"DemMinMaxQuadTree",{omit:["dem"]});class Im{constructor(e,n,s){this._demTile=e,this._dem=this._demTile.dem,this._scale=n,this._offset=s}static create(e,n,s){const u=s||e.findDEMTileFor(n);if(!u||!u.dem)return;const m=u.dem,g=u.tileID,E=1<<n.canonical.z-g.canonical.z;return new Im(u,m.dim/Xi/E,[(n.canonical.x/E-g.canonical.x)*m.dim,(n.canonical.y/E-g.canonical.y)*m.dim])}tileCoordToPixel(e,n){const s=n*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),m=Math.floor(s);return new Eo(u,m)}getElevationAt(e,n,s,u){const m=e*this._scale+this._offset[0],g=n*this._scale+this._offset[1],E=Math.floor(m),T=Math.floor(g),z=this._dem;return u=!!u,s?Cr(Cr(z.get(E,T,u),z.get(E,T+1,u),g-T),Cr(z.get(E+1,T,u),z.get(E+1,T+1,u),g-T),m-E):z.get(E,T,u)}getElevationAtPixel(e,n,s){return this._dem.get(e,n,!!s)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*El(1,e)*this._dem.stride}}const _v={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7},r3=Xr.types,R4=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],$2=["fill-extrusion-flood-light-ground-radius"],S=Math.pow(2,13),a=Math.pow(2,15)-1,p=new Eo(0,1),w=2147483648;function P(t,e,n,s,u,m,g,E){t.emplaceBack((e<<1)+g,(n<<1)+m,(Math.floor(s*S)<<1)+u,Math.round(E))}function U(t,e,n,s,u,m){t.emplaceBack(e.x,e.y,(n.x<<1)+s,(n.y<<1)+u,m)}function Q(t,e,n){t.emplaceBack(e.x,e.y,e.z,16384*n[0],16384*n[1],16384*n[2])}class ve{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class Oe{constructor(){this.centroidXY=new Eo(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Eo(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Eo(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Eo(this.max.x-this.min.x,this.max.y-this.min.y)}}class rt{constructor(){this.acc=new Eo(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(e,n){e.min.x===Number.MAX_VALUE&&(e.min.x=e.max.x=n.x,e.min.y=e.max.y=n.y)}appendEdge(e,n,s){this.accCount++,this.acc._add(n);let u=!!this.borders;n.x<e.min.x?(e.min.x=n.x,u=!0):n.x>e.max.x&&(e.max.x=n.x,u=!0),n.y<e.min.y?(e.min.y=n.y,u=!0):n.y>e.max.y&&(e.max.y=n.y,u=!0),((0===n.x||n.x===Xi)&&n.x===s.x)!=((0===n.y||n.y===Xi)&&n.y===s.y)&&this.processBorderOverlap(n,s),u&&this.checkBorderIntersection(n,s)}checkBorderIntersection(e,n){n.x<0!=e.x<0&&this.addBorderIntersection(0,Cr(n.y,e.y,(0-n.x)/(e.x-n.x))),n.x>Xi!=e.x>Xi&&this.addBorderIntersection(1,Cr(n.y,e.y,(Xi-n.x)/(e.x-n.x))),n.y<0!=e.y<0&&this.addBorderIntersection(2,Cr(n.x,e.x,(0-n.y)/(e.y-n.y))),n.y>Xi!=e.y>Xi&&this.addBorderIntersection(3,Cr(n.x,e.x,(Xi-n.y)/(e.y-n.y)))}addBorderIntersection(e,n){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const s=this.borders[e];n<s[0]&&(s[0]=n),n>s[1]&&(s[1]=n)}processBorderOverlap(e,n){if(e.x===n.x){if(e.y===n.y)return;const s=0===e.x?0:1;this.addBorderIntersection(s,n.y),this.addBorderIntersection(s,e.y)}else{const s=0===e.y?2:3;this.addBorderIntersection(s,n.x),this.addBorderIntersection(s,e.x)}}centroid(){return 0===this.accCount?new Eo(0,0):new Eo(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((e,n)=>e+ +(n[0]!==Number.MAX_VALUE),0):0}}function Wt(t,e){const n=t.add(e)._unit(),s=zn(t.x*n.x+t.y*n.y,-1,1);var u,m,g;return u=Math.acos(s),Math.min(4,Math.max(-4,Math.tan(u)))/4*a*((m=t).x*(g=e).y-m.y*g.x<0?-1:1)}const In=[t=>t.x<0,t=>t.x>Xi,t=>t.y<0,t=>t.y>Xi];function pi(t,e,n,s){const u=[4];if(0===s)return u;n._mult(s);const m=t.sub(n),g=e.sub(n),E=[t,e,m,g];for(let T=0;T<4;T++)for(const z of E)if(In[T](z)){u.push(T);break}return u}class no{constructor(e){this.vertexArray=new Cu,this.indexArray=new bc,this.programConfigurations=new I1(e.layers,{zoom:e.zoom,lut:e.lut},n=>$2.includes(n)),this._segments=new ul,this.hiddenByLandmarkVertexArray=new N1,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new ul}getDefaultSegment(){return this.regionSegments[4]}hasData(){return 0!==this.vertexArray.length}addData(e,n,s,u=!1){const m=e.length;if(m>2){let g=Math.max(0,this._segments.get().length-1);const E=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[g].length);let T;g!==this._segments.get().length-1&&(g++,this._segmentToGroundQuads[g]=[],this._segmentToRegionTriCounts[g]=[0,0,0,0,0]);{const z=e[0],$=e[1];T=Wt(z.sub(e[m-1])._perp()._unit(),$.sub(z)._perp()._unit())}for(let z=0;z<m;z++){const $=z===m-1?0:z+1,W=e[z],Z=e[$],le=e[$===m-1?0:$+1],de=Z.sub(W)._perp()._unit(),be=Wt(de,le.sub(Z)._perp()._unit()),xe=T,$e=be;if(Bs(W,Z,n)||u&&Fs(W,n)&&Fs(Z,n)){T=be;continue}const gt=E.vertexLength;U(this.vertexArray,W,Z,1,1,xe),U(this.vertexArray,W,Z,1,0,xe),U(this.vertexArray,W,Z,0,1,$e),U(this.vertexArray,W,Z,0,0,$e),E.vertexLength+=4;const yt=pi(W,Z,de,s);for(const wt of yt)this._segmentToGroundQuads[g].push({id:gt,region:wt}),this._segmentToRegionTriCounts[g][wt]+=2,E.primitiveLength+=2;T=be}}}prepareBorderSegments(){if(!this.hasData())return;const e=this._segments.get(),n=e.length;for(let s=0;s<n;s++)this._segmentToGroundQuads[s].sort((u,m)=>u.region-m.region);for(let s=0;s<n;s++){const u=this._segmentToGroundQuads[s],m=e[s],g=this._segmentToRegionTriCounts[s];g.reduce((T,z)=>T+z,0);let E=0;for(let T=0;T<=4;T++){const z=g[T];if(0!==z){let $=this.regionSegments[T];$||($=this.regionSegments[T]=new ul);const W={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+E,vertexLength:m.vertexLength,primitiveLength:z};$.get().push(W)}E+=z}for(let T=0;T<u.length;T++){const z=u[T].id;this.indexArray.emplaceBack(z,z+1,z+3),this.indexArray.emplaceBack(z,z+3,z+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(e,n,s,u,m,g){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,e,n,s,u,m,g)}upload(e){this.hasData()&&(this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Nt.members),this.indexBuffer=e.createIndexBuffer(this.indexArray))}uploadPaintProperties(e){this.hasData()&&this.programConfigurations.upload(e)}update(e,n,s,u,m,g){this.hasData()&&this.programConfigurations.updatePaintArrays(e,n,s,u,m,g)}updateHiddenByLandmark(e){if(!this.hasData())return;const n=e.groundVertexCount+e.groundVertexArrayOffset;if(0===e.groundVertexCount)return;const s=e.flags&w?1:0;for(let u=e.groundVertexArrayOffset;u<n;++u)this.hiddenByLandmarkVertexArray.emplace(u,s);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(e){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=e.createVertexBuffer(this.hiddenByLandmarkVertexArray,_n.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let e=0;e<=4;e++){const n=this.regionSegments[e];n&&n.destroy()}}}}class Wo{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new bc,this.footprintVertices=new Eu,this.footprintSegments=[],this.layoutVertexArray=new e0,this.centroidVertexArray=new Ap,this.indexArray=new bc,this.programConfigurations=new I1(e.layers,{zoom:e.zoom,lut:e.lut},n=>R4.includes(n)),this.segments=new ul,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.groundEffect=new no(e),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(e,n){}populate(e,n,s,u){this.features=[],this.hasPattern=Te("fill-extrusion",this.layers,n),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=Hf(s),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:g,index:E,sourceLayerIndex:T}of e){const z=this.layers[0]._featureFilter.needGeometry,$=F0(m,z);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),$,s))continue;const W={id:g,sourceLayerIndex:T,index:E,geometry:z?$.geometry:u1(m,s,u),properties:m.properties,type:m.type,patterns:{}},Z=this.layoutVertexArray.length;this.hasPattern?this.features.push(je("fill-extrusion",this.layers,W,this.zoom,n)):this.addFeature(W,W.geometry,E,s,{},n.availableImages,u,n.brightness),n.featureIndex.insert(m,W.geometry,E,T,this.index,Z)}this.sortBorders(),"mercator"===this.projection.name&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(e,n,s,u,m,g){for(const E of this.features){const{geometry:T}=E;this.addFeature(E,T,E.index,n,s,u,m,g)}this.sortBorders(),"mercator"===this.projection.name&&this.splitToSubtiles()}update(e,n,s,u,m){const g=0!==Object.keys(e).length;if(g&&!this.stateDependentLayers.length)return;const E=g?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(e,n,E,s,u,m),this.groundEffect.update(e,n,E,s,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,uo),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,di.members,!0)),this.groundEffect.upload(e)),this.groundEffect.uploadPaintProperties(e),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.groundEffect.uploadHiddenByLandmark(e),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ln.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,s,u,m,g,E,T){const z=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(e,{})/this.tileToMeter,$=[new Eo(0,0),new Eo(Xi,Xi)],W=E.projection,Z="globe"===W.name,le="Polygon"===r3[e.type],de=new rt;de.centroidDataIndex=this.centroidData.length;const be=new Oe,xe=this.layers[0].paint.get("fill-extrusion-base").evaluate(e,{},u)<=0,$e=this.layers[0].paint.get("fill-extrusion-height").evaluate(e,{},u);be.height=$e,be.vertexArrayOffset=this.layoutVertexArray.length,be.groundVertexArrayOffset=this.groundEffect.vertexArray.length,Z&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new hc);const gt=F(n,500);for(let Rn=gt.length-1;Rn>=0;Rn--){const li=gt[Rn];(0===li.length||(yt=li[0]).every(Di=>Di.x<=0)||yt.every(Di=>Di.x>=Xi)||yt.every(Di=>Di.y<=0)||yt.every(Di=>Di.y>=Xi))&&gt.splice(Rn,1)}var yt;let wt;if(Z)wt=Oi(gt,$,u);else{wt=[];for(const Rn of gt)wt.push({polygon:Rn,bounds:$})}const nn=le?this.edgeRadius:0,Qt=nn>0&&this.zoom<17,kn=(Rn,li)=>{if(0===Rn.length)return!1;const Di=Rn[Rn.length-1];return li.x===Di.x&&li.y===Di.y};for(const{polygon:Rn,bounds:li}of wt){let Di=0,xi=0;for(const wo of Rn)le&&!wo[0].equals(wo[wo.length-1])&&wo.push(wo[0]),xi+=le?wo.length-1:wo.length;const Ji=this.segments.prepareSegment((le?5:4)*xi,this.layoutVertexArray,this.indexArray);be.footprintSegIdx<0&&(be.footprintSegIdx=this.footprintSegments.length),be.polygonSegIdx<0&&(be.polygonSegIdx=this.polygonSegments.length);const So={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},qi=new ve;if(qi.vertexOffset=this.footprintVertices.length,qi.indexOffset=3*this.footprintIndices.length,qi.ringIndices=[],le){const wo=[],zi=[];Di=Ji.vertexLength;for(let Ro=0;Ro<Rn.length;Ro++){const Co=Rn[Ro];Co.length&&0!==Ro&&zi.push(wo.length/2);const lr=[];let To,Fo;To=Co[1].sub(Co[0])._perp()._unit(),qi.ringIndices.push(Co.length-1);for(let Yr=1;Yr<Co.length;Yr++){const Br=Co[Yr],Rr=Co[Yr===Co.length-1?1:Yr+1],Lo=Br.clone();if(nn){Fo=Rr.sub(Br)._perp()._unit();const Zr=To.add(Fo)._unit(),ta=nn*Math.min(4,1/(To.x*Zr.x+To.y*Zr.y));Lo.x+=ta*Zr.x,Lo.y+=ta*Zr.y,Lo.x=Math.round(Lo.x),Lo.y=Math.round(Lo.y),To=Fo}!xe||0!==nn&&!Qt||kn(lr,Lo)||lr.push(Lo),P(this.layoutVertexArray,Lo.x,Lo.y,0,0,1,1,0),Ji.vertexLength++,this.footprintVertices.emplaceBack(Br.x,Br.y),wo.push(Br.x,Br.y),Z&&Q(this.layoutVertexExtArray,W.projectTilePoint(Lo.x,Lo.y,u),W.upVector(u,Lo.x,Lo.y))}xe&&(0===nn||Qt)&&(0!==lr.length&&kn(lr,lr[0])&&lr.pop(),this.groundEffect.addData(lr,li,z))}const bo=$0(wo,zi);for(let Ro=0;Ro<bo.length;Ro+=3)this.footprintIndices.emplaceBack(qi.vertexOffset+bo[Ro+0],qi.vertexOffset+bo[Ro+1],qi.vertexOffset+bo[Ro+2]),this.indexArray.emplaceBack(Di+bo[Ro],Di+bo[Ro+2],Di+bo[Ro+1]),Ji.primitiveLength++;qi.indexCount+=bo.length,qi.vertexCount+=this.footprintVertices.length-qi.vertexOffset}for(let wo=0;wo<Rn.length;wo++){const zi=Rn[wo];de.startRing(be,zi[0]);let bo=zi.length>4&&Aa(zi[zi.length-2],zi[0],zi[1]),Ro=nn?ar(zi[zi.length-2],zi[0],zi[1],nn):0;const Co=[];let lr,To,Fo;To=zi[1].sub(zi[0])._perp()._unit();let Yr=!0;for(let Br=1,Rr=0;Br<zi.length;Br++){let Lo=zi[Br-1],Zr=zi[Br];const ta=zi[Br===zi.length-1?1:Br+1];if(de.appendEdge(be,Zr,Lo),Bs(Zr,Lo,li)){nn&&(To=ta.sub(Zr)._perp()._unit(),Yr=!Yr);continue}const Ss=Zr.sub(Lo)._perp(),da=Ss.x/(Math.abs(Ss.x)+Math.abs(Ss.y)),ra=Ss.y>0?1:0,ka=Lo.dist(Zr);if(Rr+ka>32768&&(Rr=0),nn){Fo=ta.sub(Zr)._perp()._unit();let Ya=Ps(Lo,Zr,ta,Ir(To,Fo),nn);isNaN(Ya)&&(Ya=0);const Ba=Zr.sub(Lo)._unit();Lo=Lo.add(Ba.mult(Ro))._round(),Zr=Zr.add(Ba.mult(-Ya))._round(),Ro=Ya,To=Fo,xe&&this.zoom>=17&&(kn(Co,Lo)||Co.push(Lo),kn(Co,Zr)||Co.push(Zr))}const bs=Ji.vertexLength,jl=zi.length>4&&Aa(Lo,Zr,ta);let Pl=Al(Rr,bo,Yr);if(P(this.layoutVertexArray,Lo.x,Lo.y,da,ra,0,0,Pl),P(this.layoutVertexArray,Lo.x,Lo.y,da,ra,0,1,Pl),Rr+=ka,Pl=Al(Rr,jl,!Yr),bo=jl,P(this.layoutVertexArray,Zr.x,Zr.y,da,ra,0,0,Pl),P(this.layoutVertexArray,Zr.x,Zr.y,da,ra,0,1,Pl),Ji.vertexLength+=4,this.indexArray.emplaceBack(bs+0,bs+1,bs+2),this.indexArray.emplaceBack(bs+1,bs+3,bs+2),Ji.primitiveLength+=2,nn){const Ya=Di+(1===Br?zi.length-2:Br-2),Ba=1===Br?Di:Ya+1;if(this.indexArray.emplaceBack(bs+1,Ya,bs+3),this.indexArray.emplaceBack(Ya,Ba,bs+3),Ji.primitiveLength+=2,void 0===lr&&(lr=bs),!Bs(ta,zi[Br],li)){const Ha=Br===zi.length-1?lr:Ji.vertexLength;this.indexArray.emplaceBack(bs+2,bs+3,Ha),this.indexArray.emplaceBack(bs+3,Ha+1,Ha),this.indexArray.emplaceBack(bs+3,Ba,Ha+1),Ji.primitiveLength+=3}Yr=!Yr}if(Z){const Ya=this.layoutVertexExtArray,Ba=W.projectTilePoint(Lo.x,Lo.y,u),Ha=W.projectTilePoint(Zr.x,Zr.y,u),rc=W.upVector(u,Lo.x,Lo.y),sc=W.upVector(u,Zr.x,Zr.y);Q(Ya,Ba,rc),Q(Ya,Ba,rc),Q(Ya,Ha,sc),Q(Ya,Ha,sc)}}le&&(Di+=zi.length-1),xe&&nn&&this.zoom>=17&&(0!==Co.length&&kn(Co,Co[0])&&Co.pop(),this.groundEffect.addData(Co,li,z,nn>0))}this.footprintSegments.push(qi),So.triangleCount=this.indexArray.length-So.triangleArrayOffset,this.polygonSegments.push(So),++be.footprintSegLen,++be.polygonSegLen}if(be.vertexCount=this.layoutVertexArray.length-be.vertexArrayOffset,be.groundVertexCount=this.groundEffect.vertexArray.length-be.groundVertexArrayOffset,0!==be.vertexCount){if(be.centroidXY=de.borders?p:this.encodeCentroid(de,be),this.centroidData.push(be),de.borders){this.featuresOnBorder.push(de);const Rn=this.featuresOnBorder.length-1;for(let li=0;li<de.borders.length;li++)de.borders[li][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[li].push(Rn)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,g,u,T),this.groundEffect.addPaintPropertiesData(e,s,m,g,u,T),this.maxHeight=Math.max(this.maxHeight,$e)}}sortBorders(){for(let e=0;e<this.borderFeatureIndices.length;e++)this.borderFeatureIndices[e].sort((n,s)=>this.featuresOnBorder[n].borders[e][0]-this.featuresOnBorder[s].borders[e][0])}splitToSubtiles(){const e=[];for(let E=0;E<this.centroidData.length;E++){const T=this.centroidData[E],z=+(T.min.y+T.max.y>Xi),$=2*z+(+(T.min.x+T.max.x>Xi)^z);for(let W=0;W<T.polygonSegLen;W++){const Z=T.polygonSegIdx+W;e.push({centroidIdx:E,subtile:$,polygonSegmentIdx:Z,triangleSegmentIdx:this.polygonSegments[Z].triangleSegIdx})}}const n=new bc;e.sort((E,T)=>E.triangleSegmentIdx===T.triangleSegmentIdx?E.subtile-T.subtile:E.triangleSegmentIdx-T.triangleSegmentIdx);let s=0,u=0,m=0;for(const E of e){if(E.triangleSegmentIdx!==s)break;m++}const g=e.length;for(;u!==e.length;){s=e[u].triangleSegmentIdx;let E=0,T=u,z=u;for(let $=T;$<m&&e[$].subtile===E;$++)z++;for(;T!==m;){const $=e[T];E=$.subtile;const W=this.centroidData[$.centroidIdx].min.clone(),Z=this.centroidData[$.centroidIdx].max.clone(),le={vertexOffset:this.segments.segments[s].vertexOffset,primitiveOffset:n.length,vertexLength:this.segments.segments[s].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let de=T;de<z;de++){const be=e[de],xe=this.polygonSegments[be.polygonSegmentIdx],$e=this.centroidData[be.centroidIdx].min,gt=this.centroidData[be.centroidIdx].max,yt=this.indexArray.uint16;for(let wt=xe.triangleArrayOffset;wt<xe.triangleArrayOffset+xe.triangleCount;wt++)n.emplaceBack(yt[3*wt],yt[3*wt+1],yt[3*wt+2]);le.primitiveLength+=xe.triangleCount,W.x=Math.min(W.x,$e.x),W.y=Math.min(W.y,$e.y),Z.x=Math.max(Z.x,gt.x),Z.y=Math.max(Z.y,gt.y)}le.primitiveLength>0&&this.triangleSubSegments.push({segment:le,min:W,max:Z}),T=z;for(let de=T;de<m&&e[de].subtile===e[T].subtile;de++)z++}u=m;for(let $=u;$<g&&e[$].triangleSegmentIdx===e[u].triangleSegmentIdx;$++)m++}n._trim(),this.indexArray=n}getVisibleSegments(e,n,s){let u=0,m=0;const g=1<<e.canonical.z;if(n){const be=n.getMinMaxForTile(e);be&&(u=be.min,m=be.max)}m+=this.maxHeight;const E=e.toUnwrapped();let T;const z=[E.canonical.x/g+E.wrap,E.canonical.y/g],$=[(E.canonical.x+1)/g+E.wrap,(E.canonical.y+1)/g],W=new ul,Z=(be,xe,$e)=>[be[0]*(1-$e[0])+xe[0]*$e[0],be[1]*(1-$e[1])+xe[1]*$e[1]],le=[],de=[];for(const be of this.triangleSubSegments){le[0]=be.min.x/Xi,le[1]=be.min.y/Xi,de[0]=be.max.x/Xi,de[1]=be.max.y/Xi;const xe=Z(z,$,le),$e=Z(z,$,de);if(0===new Ml([xe[0],xe[1],u],[$e[0],$e[1],m]).intersectsPrecise(s)){T&&(W.segments.push(T),T=void 0);continue}const gt=be.segment;T&&T.vertexOffset!==gt.vertexOffset&&(W.segments.push(T),T=void 0),T?(T.vertexLength+=gt.vertexLength,T.primitiveLength+=gt.primitiveLength):T={vertexOffset:gt.vertexOffset,primitiveLength:gt.primitiveLength,vertexLength:gt.vertexLength,primitiveOffset:gt.primitiveOffset,sortKey:void 0,vaos:{}}}return T&&W.segments.push(T),W}encodeCentroid(e,n){const s=e.centroid(),u=n.span(),m=Math.min(7,Math.round(u.x*this.tileToMeter/10)),g=Math.min(7,Math.round(u.y*this.tileToMeter/10));return new Eo(zn(s.x,1,Xi-1)<<3|m,zn(s.y,1,Xi-1)<<3|g)}encodeBorderCentroid(e){if(!e.borders)return new Eo(0,0);const n=e.borders,s=Number.MAX_VALUE;if(n[0][0]!==s||n[1][0]!==s){const u=n[0][0]!==s?0:1;return new Eo(6|(n[0][0]!==s?0:65528),(n[u][0]+n[u][1])/2<<3|6)}{const u=n[2][0]!==s?2:3;return new Eo((n[u][0]+n[u][1])/2<<3|6,6|(n[2][0]!==s?0:65528))}}showCentroid(e){const n=this.centroidData[e.centroidDataIndex];n.flags&=w,n.centroidXY.x=0,n.centroidXY.y=0,this.writeCentroidToBuffer(n)}writeCentroidToBuffer(e){this.groundEffect.updateHiddenByLandmark(e);const n=e.vertexArrayOffset,s=e.vertexCount+e.vertexArrayOffset,u=e.flags&w?p:e.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(n);if(this.centroidVertexArray.geta_centroid_pos1(n)!==u.y||m!==u.x){for(let g=n;g<s;++g)this.centroidVertexArray.emplace(g,u.x,u.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const e of this.centroidData)this.writeCentroidToBuffer(e)}updateReplacement(e,n,s){if(n.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=n.updateTime;const u=n.getReplacementRegionsForTile(e.toUnwrapped());if(qp(this.activeReplacements,u))return;if(this.activeReplacements=u,0===this.centroidVertexArray.length)this.createCentroidsBuffer();else for(const g of this.centroidData)g.flags&=2147483647;const m=[];for(const g of this.activeReplacements){if(g.order<s)continue;const E=Math.pow(2,g.footprintTileId.canonical.z-e.canonical.z);for(const T of this.centroidData)if(!(T.flags&w||g.min.x>T.max.x||T.min.x>g.max.x||g.min.y>T.max.y||T.min.y>g.max.y))for(let z=0;z<T.footprintSegLen;z++){const $=this.footprintSegments[T.footprintSegIdx+z];if(m.length=0,ii(this.footprintVertices,$.vertexOffset,$.vertexCount,g.footprintTileId.canonical,e.canonical,m),Cf(g.footprint,m,this.footprintIndices.uint16,$.indexOffset,$.indexCount,-$.vertexOffset,-E)){T.flags|=w;break}}}for(const g of this.centroidData)this.writeCentroidToBuffer(g);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(e,n,s){let u=!1;for(let m=0;m<s.footprintSegLen;m++){const g=this.footprintSegments[s.footprintSegIdx+m];let E=0;for(const T of g.ringIndices){for(let z=E,$=T+E-1;z<T+E;$=z++){const W=this.footprintVertices.int16[2*(z+g.vertexOffset)+0],Z=this.footprintVertices.int16[2*(z+g.vertexOffset)+1],le=this.footprintVertices.int16[2*($+g.vertexOffset)+1];Z>n!=le>n&&e<(this.footprintVertices.int16[2*($+g.vertexOffset)+0]-W)*(n-Z)/(le-Z)+W&&(u=!u)}E=T}}return u}getHeightAtTileCoord(e,n){let s=Number.NEGATIVE_INFINITY,u=!0;const m=4*(e+Xi)*Xi+(n+Xi);if(this.partLookup.hasOwnProperty(m)){const g=this.partLookup[m];return g?{height:g.height,hidden:!!(g.flags&w)}:void 0}for(const g of this.centroidData)e>g.max.x||g.min.x>e||n>g.max.y||g.min.y>n||this.footprintContainsPoint(e,n,g)&&g&&g.height>s&&(s=g.height,this.partLookup[m]=g,u=!!(g.flags&w));if(s!==Number.NEGATIVE_INFINITY)return{height:s,hidden:u};this.partLookup[m]=void 0}}function Ir(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function ar(t,e,n,s){const u=e.sub(t)._perp()._unit(),m=n.sub(e)._perp()._unit();return Ps(t,e,n,Ir(u,m),s)}function Ps(t,e,n,s,u){const m=Math.sqrt(1-s*s);return Math.min(t.dist(e)/3,e.dist(n)/3,u*m/s)}function Bs(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function Fs(t,e){return t.x<e[0].x||t.x>e[1].x||t.y<e[0].y||t.y>e[1].y}function Aa(t,e,n){if(t.x<0||t.x>=Xi||e.x<0||e.x>=Xi||n.x<0||n.x>=Xi)return!1;const s=n.sub(e),u=s.perp(),m=t.sub(e);return(s.x*m.x+s.y*m.y)/Math.sqrt((s.x*s.x+s.y*s.y)*(m.x*m.x+m.y*m.y))>-.866&&u.x*m.x+u.y*m.y<0}function Al(t,e,n){const s=e?2|t:-3&t;return n?1|s:-2&s}function qa(){const t=Math.PI/32,e=Math.tan(t),n=cp;return n*Math.sqrt(1+2*e*e)-n}function Oi(t,e,n){const s=1<<n.z,u=Tu(n.x/s),m=Tu((n.x+1)/s),g=$c(n.y/s),E=$c((n.y+1)/s);return function(T,z,$,W,Z=0,le){const de=[];if(!T.length||!$||!W)return de;const be=(Qt,kn)=>{for(const Rn of Qt)de.push({polygon:Rn,bounds:kn})},xe=Math.ceil(Math.log2($)),$e=Math.ceil(Math.log2(W)),gt=xe-$e,yt=[];for(let Qt=0;Qt<Math.abs(gt);Qt++)yt.push(gt>0?0:1);for(let Qt=0;Qt<Math.min(xe,$e);Qt++)yt.push(0),yt.push(1);let wt=T;if(wt=qr(wt,z[0].y-Z,z[1].y+Z,1),wt=qr(wt,z[0].x-Z,z[1].x+Z,0),!wt.length)return de;const nn=[];for(yt.length?nn.push({polygons:wt,bounds:z,depth:0}):be(wt,z);nn.length;){const Qt=nn.pop(),kn=Qt.depth,Rn=yt[kn],li=Qt.bounds[0],Di=Qt.bounds[1],xi=0===Rn?li.x:li.y,Ji=0===Rn?Di.x:Di.y,So=le?le(Rn,xi,Ji):.5*(xi+Ji),qi=qr(Qt.polygons,xi-Z,So+Z,Rn),wo=qr(Qt.polygons,So-Z,Ji+Z,Rn);if(qi.length){const zi=[li,new Eo(0===Rn?So:Di.x,1===Rn?So:Di.y)];yt.length>kn+1?nn.push({polygons:qi,bounds:zi,depth:kn+1}):be(qi,zi)}if(wo.length){const zi=[new Eo(0===Rn?So:li.x,1===Rn?So:li.y),Di];yt.length>kn+1?nn.push({polygons:wo,bounds:zi,depth:kn+1}):be(wo,zi)}}return de}(t,e,Math.ceil((m-u)/11.25),Math.ceil((g-E)/11.25),1,(T,z,$)=>{if(0===T)return.5*(z+$);{const W=$c((n.y+z/Xi)/s);return(a0(.5*($c((n.y+$/Xi)/s)+W))*s-n.y)*Xi}})}function ii(t,e,n,s,u,m){const g=Math.pow(2,s.z-u.z);for(let E=0;E<n;E++){let T=t.int16[2*(E+e)+0],z=t.int16[2*(E+e)+1];T=(T+u.x*Xi)*g-s.x*Xi,z=(z+u.y*Xi)*g-s.y*Xi,m.push(new Eo(T,z))}}lt(Wo,"FillExtrusionBucket",{omit:["layers","features"]}),lt(Oe,"PartData"),lt(ve,"FootprintSegment"),lt(rt,"BorderCentroidData"),lt(no,"GroundEffect");const wi=new ma({visibility:new Ki(ai["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ki(ai["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Ni={paint:new ma({"fill-extrusion-opacity":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new er(ai["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new er(ai["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new er(ai["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new er(ai["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new er(ai["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new er(ai["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ki(ai["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:wi};function Gi(t,e){return t.x*e.x+t.y*e.y}function ho(t,e){if(1===t.length){let n=0;const s=e[n++];let u;for(;!u||s.equals(u);)if(u=e[n++],!u)return 1/0;for(;n<e.length;n++){const m=e[n],g=t[0],E=u.sub(s),T=m.sub(s),z=g.sub(s),$=Gi(E,E),W=Gi(E,T),Z=Gi(T,T),le=Gi(z,E),de=Gi(z,T),be=$*Z-W*W,xe=(Z*le-W*de)/be,$e=($*de-W*le)/be,gt=s.z*(1-xe-$e)+u.z*xe+m.z*$e;if(isFinite(gt))return gt}return 1/0}{let n=1/0;for(const s of e)n=Math.min(n,s.z);return n}}function _i(t,e,n,s,u,m,g,E){const T=g*u.getElevationAt(t,e,!0,!0),z=0!==m[0],$=z?0===m[1]?g*(m[0]/7-450):g*function(W,Z,le){const de=Math.floor(Z[0]/8),be=Math.floor(Z[1]/8),xe=10*(Z[0]-8*de),$e=10*(Z[1]-8*be),gt=W.getElevationAt(de,be,!0,!0),yt=W.getMeterToDEM(le),wt=Math.floor(.5*(xe*yt-1)),nn=Math.floor(.5*($e*yt-1)),Qt=W.tileCoordToPixel(de,be),kn=2*wt+1,Rn=2*nn+1,li=(Ro=kn,Co=Rn,[(wo=W).getElevationAtPixel(zi=Qt.x-wt,bo=Qt.y-nn,!0),wo.getElevationAtPixel(zi+Co,bo,!0),wo.getElevationAtPixel(zi,bo+Co,!0),wo.getElevationAtPixel(zi+Ro,bo+Co,!0)]),Di=Math.abs(li[0]-li[1]),xi=Math.abs(li[2]-li[3]),Ji=Math.abs(li[0]-li[2])+Math.abs(li[1]-li[3]),So=Math.min(.25,.5*yt*(Di+xi)/kn),qi=Math.min(.25,.5*yt*Ji/Rn);var wo,zi,bo,Ro,Co;return gt+Math.max(So*xe,qi*$e)}(u,m,E):T;return{base:T+(0===n)?-1:n,top:z?Math.max($+s,T+n+2):T+s}}const M1=wa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Jm}=M1,yv=wa([{name:"a_packed",components:4,type:"Float32"}]),{members:eg}=yv,Em=wa([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Pg}=Em,c4=wa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),z4=wa([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),i2=wa([{name:"a_projected_pos",components:4,type:"Float32"}],4);wa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lh=wa([{name:"a_occlusion_query_opacity",components:1,type:"Float32"}],4),O4=wa([{name:"a_z_offset",components:1,type:"Float32"}],4),Xp=wa([{name:"a_texb",components:2,type:"Uint16"}]),bv=wa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),tg=wa([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);wa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ng=wa([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wv=wa([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);wa([{name:"triangle",components:3,type:"Uint16"}]),wa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),wa([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Float32",name:"occlusionState"},{type:"Float32",name:"occlusionOpacity"},{type:"Uint8",name:"hasIconTextFit"}]),wa([{type:"Float32",name:"offsetX"}]),wa([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);class Rg{constructor(e,n){this.width=e,this.height=n,this.nextRow=0,this.image=new p1({width:e,height:n}),this.positions={},this.uploaded=!1}getDash(e,n){const s=this.getKey(e,n);return this.positions[s]}trim(){const e=this.width,n=this.height=Wr(this.nextRow);this.image.resize({width:e,height:n})}getKey(e,n){return e.join(",")+n}getDashRanges(e,n,s){const u=[];let m=e.length%2==1?-e[e.length-1]*s:0,g=e[0]*s,E=!0;u.push({left:m,right:g,isDash:E,zeroLength:0===e[0]});let T=e[0];for(let z=1;z<e.length;z++){E=!E;const $=e[z];m=T*s,T+=$,g=T*s,u.push({left:m,right:g,isDash:E,zeroLength:0===$})}return u}addRoundDash(e,n,s){const u=n/2;for(let m=-s;m<=s;m++){const g=this.width*(this.nextRow+s+m);let E=0,T=e[E];for(let z=0;z<this.width;z++){z/T.right>1&&(T=e[++E]);const $=Math.abs(z-T.left),W=Math.abs(z-T.right),Z=Math.min($,W);let le;const de=m/s*(u+1);if(T.isDash){const be=u-Math.abs(de);le=Math.sqrt(Z*Z+be*be)}else le=u-Math.sqrt(Z*Z+de*de);this.image.data[g+z]=Math.max(0,Math.min(255,le+128))}}}addRegularDash(e,n){for(let T=e.length-1;T>=0;--T){const z=e[T],$=e[T+1];z.zeroLength?e.splice(T,1):$&&$.isDash===z.isDash&&($.left=z.left,e.splice(T,1))}const s=e[0],u=e[e.length-1];s.isDash===u.isDash&&(s.left=u.left-this.width,u.right=s.right+this.width);const m=this.width*this.nextRow;let g=0,E=e[g];for(let T=0;T<this.width;T++){T/E.right>1&&(E=e[++g]);const z=Math.abs(T-E.left),$=Math.abs(T-E.right),W=Math.min(z,$);this.image.data[m+T]=Math.max(0,Math.min(255,(E.isDash?W:-W)+n+128))}}addDash(e,n){const s=this.getKey(e,n);if(this.positions[s])return this.positions[s];const u="round"===n,m=u?7:0,g=2*m+1;if(this.nextRow+g>this.height)return fa("LineAtlas out of space"),null;0===e.length&&e.push(1);let E=0;for(let $=0;$<e.length;$++)e[$]<0&&(fa("Negative value is found in line dasharray, replacing values with 0"),e[$]=0),E+=e[$];if(0!==E){const $=this.width/E,W=this.getDashRanges(e,this.width,$);u?this.addRoundDash(W,$,m):this.addRegularDash(W,"square"===n?.5*$:0)}const T=this.nextRow+m;this.nextRow+=g;const z={tl:[T,m],br:[E,0]};return this.positions[s]=z,z}}lt(Rg,"LineAtlas");const zg=Xr.types,u4=Math.cos(Math.PI/180*37.5),d4=Math.cos(Math.PI/180*5);class j2{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new ku,this.layoutVertexArray2=new oh,this.patternVertexArray=new mu,this.indexArray=new bc,this.programConfigurations=new I1(e.layers,{zoom:e.zoom,lut:e.lut}),this.segments=new ul,this.maxLineLength=0,this.zOffsetVertexArray=new yc,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.tessellationStep=e.tessellationStep?e.tessellationStep:Xi/64}updateFootprints(e,n){}populate(e,n,s,u){this.hasPattern=Te("line",this.layers,n);const m=this.layers[0].layout.get("line-sort-key"),g=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!g.isConstant()||!!g.constantOr(0);const E=[];for(const{feature:W,id:Z,index:le,sourceLayerIndex:de}of e){const be=this.layers[0]._featureFilter.needGeometry,xe=F0(W,be);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),xe,s))continue;const $e=m?m.evaluate(xe,{},s):void 0,gt={id:Z,properties:W.properties,type:W.type,sourceLayerIndex:de,index:le,geometry:be?xe.geometry:u1(W,s,u),patterns:{},sortKey:$e};E.push(gt)}m&&E.sort((W,Z)=>W.sortKey-Z.sortKey);const{lineAtlas:T,featureIndex:z}=n,$=this.addConstantDashes(T);for(const W of E){const{geometry:Z,index:le,sourceLayerIndex:de}=W;if($&&this.addFeatureDashes(W,T),this.hasPattern){const be=je("line",this.layers,W,this.zoom,n);this.patternFeatures.push(be)}else this.addFeature(W,Z,le,s,T.positions,n.availableImages,n.brightness);z.insert(e[le].feature,Z,le,de,this.index)}}addConstantDashes(e){let n=!1;for(const s of this.layers){const u=s.paint.get("line-dasharray").value,m=s.layout.get("line-cap").value;if("constant"!==u.kind||"constant"!==m.kind)n=!0;else{const g=m.value,E=u.value;if(!E)continue;e.addDash(E,g)}}return n}addFeatureDashes(e,n){const s=this.zoom;for(const u of this.layers){const m=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if("constant"===m.kind&&"constant"===g.kind)continue;let E,T;if("constant"===m.kind){if(E=m.value,!E)continue}else E=m.evaluate({zoom:s},e);T="constant"===g.kind?g.value:g.evaluate({zoom:s},e),n.addDash(E,T),e.patterns[u.id]=n.getKey(E,T)}}update(e,n,s,u,m){const g=0!==Object.keys(e).length;g&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,g?this.stateDependentLayers:this.layers,s,u,m)}addFeatures(e,n,s,u,m,g){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,n,s,u,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,eg)),0!==this.patternVertexArray.length&&(this.patternVertexBuffer=e.createVertexBuffer(this.patternVertexArray,Pg)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,O4.members,!0)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jm),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,n,s,u,m,g,E){const T=this.layers[0].layout,z=T.get("line-join").evaluate(e,{}),$=T.get("line-cap").evaluate(e,{}),W=T.get("line-miter-limit"),Z=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const le of n)this.addLine(le,e,u,z,$,W,Z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,m,g,u,E)}addLine(e,n,s,u,m,g,E){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const T={zoom:this.zoom,lineProgress:void 0},z=this.layers[0].layout,$="none"===u;if(this.patternJoinNone=this.hasPattern&&$,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Qt=0;Qt<e.length-1;Qt++)this.totalDistance+=e[Qt].dist(e[Qt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const W="Polygon"===zg[n.type];let Z=e.length;for(;Z>=2&&e[Z-1].equals(e[Z-2]);)Z--;let le=0;for(;le<Z-1&&e[le].equals(e[le+1]);)le++;if(Z<(W?3:2))return;"bevel"===u&&(g=1.05);const de=this.overscaling<=16?15*Xi/(512*this.overscaling):0,be=this.segments.prepareSegment(10*Z,this.layoutVertexArray,this.indexArray);let xe,$e,gt,yt,wt,nn;this.e1=this.e2=-1,W&&(xe=e[Z-2],wt=e[le].sub(xe)._unit()._perp());for(let Qt=le;Qt<Z;Qt++){if(gt=Qt===Z-1?W?e[le+1]:void 0:e[Qt+1],gt&&e[Qt].equals(gt))continue;if(wt&&(yt=wt),xe&&($e=xe),xe=e[Qt],this.hasZOffset){const zi=z.get("line-z-offset").value;if("constant"===zi.kind)nn=zi.value;else{if(this.lineClips){const bo=this.totalDistance/(this.lineClips.end-this.lineClips.start);T.lineProgress=(bo*this.lineClips.start+this.distance+($e?$e.dist(xe):0))/bo}else fa(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),T.lineProgress=0;nn=zi.evaluate(T,n)}nn=nn||0}wt=gt?gt.sub(xe)._unit()._perp():yt,yt=yt||wt;const kn=$e&&gt;let Rn=kn?u:W||$?"butt":m;const li=yt.x*wt.x+yt.y*wt.y;if($){const zi=function(bo){if(bo.patternJoinNone){const Ro=bo.segmentPoints.length/2,Co=bo.lineSoFar-bo.segmentStart;for(let lr=0;lr<Ro;++lr){const To=bo.segmentPoints[2*lr+1],Fo=Math.round(bo.segmentPoints[2*lr])+.5+.25*To;bo.patternVertexArray.emplaceBack(Fo,Co,bo.segmentStart),bo.patternVertexArray.emplaceBack(Fo,Co,bo.segmentStart)}bo.segmentPoints.length=0}bo.e1=bo.e2=-1};if(kn&&li<d4){this.updateDistance($e,xe),this.addCurrentVertex(xe,yt,1,1,be,nn),zi(this),this.addCurrentVertex(xe,wt,-1,-1,be,nn);continue}if($e){if(!gt){this.updateDistance($e,xe),this.addCurrentVertex(xe,yt,1,1,be,nn),zi(this);continue}Rn="miter"}}let Di=yt.add(wt);0===Di.x&&0===Di.y||Di._unit();const xi=Di.x*wt.x+Di.y*wt.y,Ji=0!==xi?1/xi:1/0,So=2*Math.sqrt(2-2*xi),qi=xi<u4&&$e&&gt,wo=yt.x*wt.y-yt.y*wt.x>0;if(qi&&Qt>le){const zi=xe.dist($e);if(zi>2*de){const bo=xe.sub(xe.sub($e)._mult(de/zi)._round());this.updateDistance($e,bo),this.addCurrentVertex(bo,yt,0,0,be,nn),$e=bo}}if(kn&&"round"===Rn&&(Ji<E?Rn="miter":Ji<=2&&(Rn="fakeround")),"miter"===Rn&&Ji>g&&(Rn="bevel"),"bevel"===Rn&&(Ji>2&&(Rn="flipbevel"),Ji<g&&(Rn="miter")),$e&&this.updateDistance($e,xe),"miter"===Rn)Di._mult(Ji),this.addCurrentVertex(xe,Di,0,0,be,nn);else if("flipbevel"===Rn){if(Ji>100)Di=wt.mult(-1);else{const zi=Ji*yt.add(wt).mag()/yt.sub(wt).mag();Di._perp()._mult(zi*(wo?-1:1))}this.addCurrentVertex(xe,Di,0,0,be,nn),this.addCurrentVertex(xe,Di.mult(-1),0,0,be,nn)}else if("bevel"===Rn||"fakeround"===Rn){const zi=-Math.sqrt(Ji*Ji-1),bo=wo?zi:0,Ro=wo?0:zi;if($e&&this.addCurrentVertex(xe,yt,bo,Ro,be,nn),"fakeround"===Rn){const Co=Math.round(180*So/Math.PI/20);for(let lr=1;lr<Co;lr++){let To=lr/Co;if(.5!==To){const Yr=To-.5;To+=To*Yr*(To-1)*((1.0904+li*(li*(3.55645-1.43519*li)-3.2452))*Yr*Yr+(.848013+li*(.215638*li-1.06021)))}const Fo=wt.sub(yt)._mult(To)._add(yt)._unit()._mult(wo?-1:1);this.addHalfVertex(xe,Fo.x,Fo.y,!1,wo,0,be,nn)}}gt&&this.addCurrentVertex(xe,wt,-bo,-Ro,be,nn)}else"butt"===Rn?this.addCurrentVertex(xe,Di,0,0,be,nn):"square"===Rn?($e||this.addCurrentVertex(xe,Di,-1,-1,be,nn),this.addCurrentVertex(xe,Di,0,0,be,nn),$e&&this.addCurrentVertex(xe,Di,1,1,be,nn)):"round"===Rn&&($e&&(this.addCurrentVertex(xe,yt,0,0,be,nn),this.addCurrentVertex(xe,yt,1,1,be,nn,!0)),gt&&(this.addCurrentVertex(xe,wt,-1,-1,be,nn,!0),this.addCurrentVertex(xe,wt,0,0,be,nn)));if(qi&&Qt<Z-1){const zi=xe.dist(gt);if(zi>2*de){const bo=xe.add(gt.sub(xe)._mult(de/zi)._round());this.updateDistance(xe,bo),this.addCurrentVertex(bo,wt,0,0,be,nn),xe=bo}}}}addVerticesTo(e,n,s,u,m,g,E,T,z,$){const W=(n.w-e.w)/this.tessellationStep|0;if(W>1){this.lineSoFar=e.w;const Z=(n.x-e.x)/W,le=(n.y-e.y)/W,de=(n.z-e.z)/W,be=(n.w-e.w)/W;for(let xe=1;xe<W;++xe)e.x+=Z,e.y+=le,e.z+=de,this.lineSoFar+=be,this.addHalfVertex(e,s,u,$,!1,E,z,e.z),this.addHalfVertex(e,m,g,$,!0,-T,z,e.z)}this.lineSoFar=n.w,this.addHalfVertex(n,s,u,$,!1,E,z,n.z),this.addHalfVertex(n,m,g,$,!0,-T,z,n.z)}addCurrentVertex(e,n,s,u,m,g,E=!1){const T=n.x+n.y*s,z=n.y-n.x*s,$=n.y*u-n.x,W=-n.y-n.x*u;if(null!=g){const le=Xi+10,de=g,be=new xr(e.x,e.y,de,this.lineSoFar),xe=o2(e,-10,le),$e=this.lineSoFar;if(this.currentVertex)if(xe){const gt=this.currentVertexIsOutside,yt=this.currentVertex,wt=new xr(e.x,e.y,de,this.lineSoFar);jc(yt,wt,-10,le),o2(wt,-10,le)||(gt&&(this.e1=this.e2=-1,this.lineSoFar=yt.w,this.addHalfVertex(yt,T,z,E,!1,s,m,yt.z),this.addHalfVertex(yt,$,W,E,!0,-u,m,yt.z)),this.addVerticesTo(yt,wt,T,z,$,W,s,u,m,E))}else{const gt=this.currentVertex;this.currentVertexIsOutside&&(jc(gt,be,-10,le),this.e1=this.e2=-1,this.lineSoFar=gt.w,this.addHalfVertex(gt,T,z,E,!1,s,m,gt.z),this.addHalfVertex(gt,$,W,E,!0,-u,m,gt.z)),this.addVerticesTo(gt,be,T,z,$,W,s,u,m,E)}else xe||(this.addHalfVertex(e,T,z,E,!1,s,m,g),this.addHalfVertex(e,$,W,E,!0,-u,m,g));this.currentVertex=be,this.currentVertexIsOutside=xe,this.lineSoFar=$e}else this.addHalfVertex(e,T,z,E,!1,s,m,g),this.addHalfVertex(e,$,W,E,!0,-u,m,g)}addHalfVertex({x:e,y:n},s,u,m,g,E,T,z){this.patternJoinNone&&(0===this.segmentPoints.length&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),g||this.segmentPoints.push(this.lineSoFar-this.segmentStart,E)),this.layoutVertexArray.emplaceBack((e<<1)+(m?1:0),(n<<1)+(g?1:0),Math.round(63*s)+128,Math.round(63*u)+128,1+(0===E?0:E<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const $=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),T.primitiveLength++),g?this.e2=$:this.e1=$,null!=z&&this.zOffsetVertexArray.emplaceBack(z)}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,n){this.distance+=e.dist(n),this.updateScaledDistance()}}function o2(t,e,n){return t.x<e||t.x>n||t.y<e||t.y>n}lt(j2,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const Cm=new ma({"line-cap":new er(ai.layout_line["line-cap"]),"line-join":new er(ai.layout_line["line-join"]),"line-miter-limit":new Ki(ai.layout_line["line-miter-limit"]),"line-round-limit":new Ki(ai.layout_line["line-round-limit"]),"line-sort-key":new er(ai.layout_line["line-sort-key"]),"line-z-offset":new er(ai.layout_line["line-z-offset"]),visibility:new Ki(ai.layout_line.visibility)});var km={paint:new ma({"line-opacity":new er(ai.paint_line["line-opacity"]),"line-color":new er(ai.paint_line["line-color"]),"line-translate":new Ki(ai.paint_line["line-translate"]),"line-translate-anchor":new Ki(ai.paint_line["line-translate-anchor"]),"line-width":new er(ai.paint_line["line-width"]),"line-gap-width":new er(ai.paint_line["line-gap-width"]),"line-offset":new er(ai.paint_line["line-offset"]),"line-blur":new er(ai.paint_line["line-blur"]),"line-dasharray":new er(ai.paint_line["line-dasharray"]),"line-pattern":new er(ai.paint_line["line-pattern"]),"line-gradient":new us(ai.paint_line["line-gradient"]),"line-trim-offset":new Ki(ai.paint_line["line-trim-offset"]),"line-trim-fade-range":new Ki(ai.paint_line["line-trim-fade-range"]),"line-trim-color":new Ki(ai.paint_line["line-trim-color"]),"line-emissive-strength":new Ki(ai.paint_line["line-emissive-strength"]),"line-border-width":new er(ai.paint_line["line-border-width"]),"line-border-color":new er(ai.paint_line["line-border-color"]),"line-occlusion-opacity":new Ki(ai.paint_line["line-occlusion-opacity"])}),layout:Cm};function Og(t,e,n){return e*(Xi/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}function Lg(t,e){return 1/Og(t,1,e.tileZoom)}function h4(t,e,n,s){return t.translatePosMatrix(s||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Bg=t=>{const e=[];Ng(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const n=t.paint.get("line-trim-offset");0===n[0]&&0===n[1]||e.push("RENDER_LINE_TRIM_OFFSET"),0!==t.paint.get("line-border-width").constantOr(1)&&e.push("RENDER_LINE_BORDER");const s="none"===t.layout.get("line-join").constantOr("miter"),u=!!t.paint.get("line-pattern").constantOr(1);return s&&u&&e.push("LINE_JOIN_NONE"),e};function Ng(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}class U2{constructor(e){this._stringToNumber={},this._numberToString=[];for(let n=0;n<e.length;n++){const s=e[n];this._stringToNumber[s]=n,this._numberToString[n]=s}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}var d0={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,e,n,s,u){var m,g,E=8*u-s-1,T=(1<<E)-1,z=T>>1,$=-7,W=n?u-1:0,Z=n?-1:1,le=t[e+W];for(W+=Z,m=le&(1<<-$)-1,le>>=-$,$+=E;$>0;m=256*m+t[e+W],W+=Z,$-=8);for(g=m&(1<<-$)-1,m>>=-$,$+=s;$>0;g=256*g+t[e+W],W+=Z,$-=8);if(0===m)m=1-z;else{if(m===T)return g?NaN:1/0*(le?-1:1);g+=Math.pow(2,s),m-=z}return(le?-1:1)*g*Math.pow(2,m-s)},write:function(t,e,n,s,u,m){var g,E,T,z=8*m-u-1,$=(1<<z)-1,W=$>>1,Z=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,le=s?0:m-1,de=s?1:-1,be=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(E=isNaN(e)?1:0,g=$):(g=Math.floor(Math.log(e)/Math.LN2),e*(T=Math.pow(2,-g))<1&&(g--,T*=2),(e+=g+W>=1?Z/T:Z*Math.pow(2,1-W))*T>=2&&(g++,T/=2),g+W>=$?(E=0,g=$):g+W>=1?(E=(e*T-1)*Math.pow(2,u),g+=W):(E=e*Math.pow(2,W-1)*Math.pow(2,u),g=0));u>=8;t[n+le]=255&E,le+=de,E/=256,u-=8);for(g=g<<u|E,z+=u;z>0;t[n+le]=255&g,le+=de,g/=256,z-=8);t[n+le-de]|=128*be}},Bh=Da,r2=d0;function Da(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Da.Varint=0,Da.Fixed64=1,Da.Bytes=2,Da.Fixed32=5;var ch=4294967296,ig=1/ch,p4=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function q1(t){return t.type===Da.Bytes?t.readVarint()+t.pos:t.pos+1}function Sm(t,e,n){var s=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(s);for(var u=n.pos-1;u>=t;u--)n.buf[u+s]=n.buf[u]}function Tm(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Mm(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Am(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function L4(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function H2(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Dm(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Fg(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function og(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function kf(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function G2(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Kp(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Yp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Da.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var s=this.readVarint(),u=s>>3,m=this.pos;this.type=7&s,t(u,e,this),this.pos===m&&this.skip(s)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=G2(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Yp(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=G2(this.buf,this.pos)+G2(this.buf,this.pos+4)*ch;return this.pos+=8,t},readSFixed64:function(){var t=G2(this.buf,this.pos)+Yp(this.buf,this.pos+4)*ch;return this.pos+=8,t},readFloat:function(){var t=r2.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r2.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,s=this.buf;return e=127&(n=s[this.pos++]),n<128?e:(e|=(127&(n=s[this.pos++]))<<7,n<128?e:(e|=(127&(n=s[this.pos++]))<<14,n<128?e:(e|=(127&(n=s[this.pos++]))<<21,n<128?e:function(u,m,g){var E,T,z=g.buf;if(E=(112&(T=z[g.pos++]))>>4,T<128||(E|=(127&(T=z[g.pos++]))<<3,T<128)||(E|=(127&(T=z[g.pos++]))<<10,T<128)||(E|=(127&(T=z[g.pos++]))<<17,T<128)||(E|=(127&(T=z[g.pos++]))<<24,T<128)||(E|=(1&(T=z[g.pos++]))<<31,T<128))return function s2(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}(u,E,m);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=s[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&p4?p4.decode(this.buf.subarray(e,t)):function(n,s,u){for(var m="",g=s;g<u;){var E,T,z,$=n[g],W=null,Z=$>239?4:$>223?3:$>191?2:1;if(g+Z>u)break;1===Z?$<128&&(W=$):2===Z?128==(192&(E=n[g+1]))&&(W=(31&$)<<6|63&E)<=127&&(W=null):3===Z?(T=n[g+2],128==(192&(E=n[g+1]))&&128==(192&T)&&((W=(15&$)<<12|(63&E)<<6|63&T)<=2047||W>=55296&&W<=57343)&&(W=null)):4===Z&&(T=n[g+2],z=n[g+3],128==(192&(E=n[g+1]))&&128==(192&T)&&128==(192&z)&&((W=(15&$)<<18|(63&E)<<12|(63&T)<<6|63&z)<=65535||W>=1114112)&&(W=null)),null===W?(W=65533,Z=1):W>65535&&(W-=65536,m+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),m+=String.fromCharCode(W),g+=Z}return m}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Da.Bytes)return t.push(this.readVarint(e));var n=q1(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Da.Bytes)return t.push(this.readSVarint());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Da.Bytes)return t.push(this.readBoolean());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Da.Bytes)return t.push(this.readFloat());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Da.Bytes)return t.push(this.readDouble());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Da.Bytes)return t.push(this.readFixed32());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Da.Bytes)return t.push(this.readSFixed32());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Da.Bytes)return t.push(this.readFixed64());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Da.Bytes)return t.push(this.readSFixed64());var e=q1(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Da.Varint)for(;this.buf[this.pos++]>127;);else if(e===Da.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Da.Fixed32)this.pos+=4;else{if(e!==Da.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Kp(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Kp(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Kp(this.buf,-1&t,this.pos),Kp(this.buf,Math.floor(t*ig),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Kp(this.buf,-1&t,this.pos),Kp(this.buf,Math.floor(t*ig),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,n){var s,u,m,E;if(e>=0?(s=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(s=~(-e%4294967296))?s=s+1|0:(s=0,u=u+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),m=s,(E=n).buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,E.buf[E.pos]=127&(m>>>=7),function(m,g){var E=(7&m)<<4;g.buf[g.pos++]|=E|((m>>>=3)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m|((m>>>=7)?128:0),m&&(g.buf[g.pos++]=127&m)))))}(u,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(s,u,m){for(var g,E,T=0;T<u.length;T++){if((g=u.charCodeAt(T))>55295&&g<57344){if(!E){g>56319||T+1===u.length?(s[m++]=239,s[m++]=191,s[m++]=189):E=g;continue}if(g<56320){s[m++]=239,s[m++]=191,s[m++]=189,E=g;continue}g=E-55296<<10|g-56320|65536,E=null}else E&&(s[m++]=239,s[m++]=191,s[m++]=189,E=null);g<128?s[m++]=g:(g<2048?s[m++]=g>>6|192:(g<65536?s[m++]=g>>12|224:(s[m++]=g>>18|240,s[m++]=g>>12&63|128),s[m++]=g>>6&63|128),s[m++]=63&g|128)}return m}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Sm(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r2.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r2.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var s=this.pos-n;s>=128&&Sm(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeMessage:function(t,e,n){this.writeTag(t,Da.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Tm,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Mm,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,H2,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Am,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,L4,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Dm,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Fg,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,og,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,kf,e)},writeBytesField:function(t,e){this.writeTag(t,Da.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Da.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Da.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Da.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Da.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Da.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Da.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Da.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Da.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Da.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};var a2=xn(Bh);const Pm=["id","tile","layer","source","sourceLayer","state"];class rg{constructor(e,n,s,u,m){this.type="Feature",this._vectorTileFeature=e,this._z=n,this._x=s,this._y=u,this.properties=e.properties,this.id=m}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const n of Pm)void 0!==this[n]&&(e[n]=this[n]);return e}}class l2{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,s){const u=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},gi(this.stateChanges[e][u],s),null===this.deletedStates[e]){this.deletedStates[e]={};for(const m in this.state[e])m!==u&&(this.deletedStates[e][m]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][u]){this.deletedStates[e][u]={};for(const m in this.state[e][u])s[m]||(this.deletedStates[e][u][m]=null)}else for(const m in s)this.deletedStates[e]&&this.deletedStates[e][u]&&null===this.deletedStates[e][u][m]&&delete this.deletedStates[e][u][m]}removeFeatureState(e,n,s){if(null===this.deletedStates[e])return;const u=String(n);if(this.deletedStates[e]=this.deletedStates[e]||{},s&&void 0!==n)null!==this.deletedStates[e][u]&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][s]=null);else if(void 0!==n)if(this.stateChanges[e]&&this.stateChanges[e][u])for(s in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][s]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,n){const s=String(n),u=gi({},(this.state[e]||{})[s],(this.stateChanges[e]||{})[s]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const m=this.deletedStates[e][n];if(null===m)return{};for(const g in m)delete u[g]}return u}initializeTileState(e,n){e.setFeatureState(this.state,n)}coalesceChanges(e,n){const s={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const m={};for(const g in this.stateChanges[u])this.state[u][g]||(this.state[u][g]={}),gi(this.state[u][g],this.stateChanges[u][g]),m[g]=this.state[u][g];s[u]=m}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const m={};if(null===this.deletedStates[u])for(const g in this.state[u])m[g]={},this.state[u][g]={};else for(const g in this.deletedStates[u]){if(null===this.deletedStates[u][g])this.state[u][g]={};else if(this.state[u][g])for(const E of Object.keys(this.deletedStates[u][g]))delete this.state[u][g][E];m[g]=this.state[u][g]}s[u]=s[u]||{},gi(s[u],m)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(s).length)for(const u in e)e[u].setFeatureState(s,n)}}class Sf{constructor(e,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new tn(Xi,16,0),this.featureIndexArray=new Lf,this.promoteId=n,this.is3DTile=!1}insert(e,n,s,u,m,g=0,E=0){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,u,m,g);const z=this.grid;for(let $=0;$<n.length;$++){const W=n[$],Z=[1/0,1/0,-1/0,-1/0];for(let le=0;le<W.length;le++){const de=W[le];Z[0]=Math.min(Z[0],de.x),Z[1]=Math.min(Z[1],de.y),Z[2]=Math.max(Z[2],de.x),Z[3]=Math.max(Z[3],de.y)}0!==E&&(Z[0]-=E,Z[1]-=E,Z[2]+=E,Z[3]+=E),Z[0]<Xi&&Z[1]<Xi&&Z[2]>=0&&Z[3]>=0&&z.insert(T,Z[0],Z[1],Z[2],Z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new No(new a2(this.rawTileData)).layers,this.sourceLayerCoder=new U2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,n,s,u){this.loadVTLayers();const m=e.params||{},g=Lu(m.filter),E=e.tileResult,T=e.transform,z=E.bufferedTilespaceBounds,$=this.grid.query(z.min.x,z.min.y,z.max.x,z.max.y,(de,be,xe,$e)=>Xm(E.bufferedTilespaceGeometry,de,be,xe,$e));$.sort(sg);let W=null;T.elevation&&$.length>0&&(W=Im.create(T.elevation,this.tileID));const Z={};let le;for(let de=0;de<$.length;de++){const be=$[de];if(be===le)continue;le=be;const xe=this.featureIndexArray.get(be);let $e=null;if(this.is3DTile){const gt=this.bucketLayerIDs[0][0],yt=n[gt];if("model"!==yt.type)continue;const{queryFeature:wt,intersectionZ:nn}=yt.queryIntersectsMatchingFeature(E,xe.featureIndex,g,T);wt&&this.appendToResult(Z,gt,xe.featureIndex,wt,nn)}else this.loadMatchingFeature(Z,xe,g,m.layers,m.availableImages,n,s,u,(gt,yt,wt,nn=0)=>($e||($e=u1(gt,this.tileID.canonical,e.tileTransform)),yt.queryIntersectsFeature(E,gt,wt,$e,this.z,e.transform,e.pixelPosMatrix,W,nn)))}return Z}loadMatchingFeature(e,n,s,u,m,g,E,T,z){const{featureIndex:$,bucketIndex:W,sourceLayerIndex:Z,layoutVertexArrayOffset:le}=n,de=this.bucketLayerIDs[W];if(u&&!function(gt,yt){for(let wt=0;wt<gt.length;wt++)if(yt.indexOf(gt[wt])>=0)return!0;return!1}(u,de))return;const be=this.sourceLayerCoder.decode(Z),xe=this.vtLayers[be].feature($);if(s.needGeometry){const gt=F0(xe,!0);if(!s.filter(new os(this.tileID.overscaledZ),gt,this.tileID.canonical))return}else if(!s.filter(new os(this.tileID.overscaledZ),xe))return;const $e=this.getId(xe,be);for(let gt=0;gt<de.length;gt++){const yt=de[gt];if(u&&u.indexOf(yt)<0)continue;const wt=g[yt];if(!wt)continue;let nn={};void 0!==$e&&T&&(nn=T.getState(wt.sourceLayer||"_geojsonTileLayer",$e));const Qt=!z||z(xe,wt,nn,le);if(!Qt)continue;const kn=new rg(xe,this.z,this.x,this.y,$e),Rn=gi({},E[yt]);Rn.paint=Hd(Rn.paint,wt.paint,xe,nn,m),Rn.layout=Hd(Rn.layout,wt.layout,xe,nn,m),kn.layer=Rn,this.appendToResult(e,yt,$,kn,Qt)}}appendToResult(e,n,s,u,m){let g=e[n];void 0===g&&(g=e[n]=[]),g.push({featureIndex:s,feature:u,intersectionZ:m})}lookupSymbolFeatures(e,n,s,u,m,g,E,T){const z={};this.loadVTLayers();const $=Lu(m);for(const W of e)this.loadMatchingFeature(z,{bucketIndex:s,sourceLayerIndex:u,featureIndex:W,layoutVertexArrayOffset:0},$,g,E,T,n);return z}loadFeature(e){const{featureIndex:n,sourceLayerIndex:s}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(s),m=this.vtFeatures[u];if(m[n])return m[n];const g=this.vtLayers[u].feature(n);return m[n]=g,g}hasLayer(e){for(const n of this.bucketLayerIDs)for(const s of n)if(e===s)return!0;return!1}getId(e,n){let s=e.id;if(this.promoteId){const u="string"==typeof this.promoteId?this.promoteId:this.promoteId[n];null!=u&&(s=e.properties[u]),"boolean"==typeof s&&(s=Number(s))}return s}}function Hd(t,e,n,s,u){return Fr(t,(m,g)=>{const E=e instanceof ba?e.get(g):null;return E&&E.evaluate?E.evaluate(n,s,u):E})}function sg(t,e){return e-t}lt(Sf,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var Mu=24;const h0=128;function Rm(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new os(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:s,interpolationType:u}=n;let m=0;for(;m<s.length&&s[m]<=t;)m++;m=Math.max(0,m-1);let g=m;for(;g<s.length&&s[g]<t+1;)g++;g=Math.min(s.length-1,g);const E=s[m],T=s[g];return"composite"===n.kind?{kind:"composite",minZoom:E,maxZoom:T,interpolationType:u}:{kind:"camera",minZoom:E,maxZoom:T,minSize:n.evaluate(new os(E)),maxSize:n.evaluate(new os(T)),interpolationType:u}}}function zm(t,{uSize:e,uSizeT:n},{lowerSize:s,upperSize:u}){return"source"===t.kind?s/h0:"composite"===t.kind?Cr(s/h0,u/h0,n):e}function B(t,e){let n=0,s=0;if("constant"===t.kind)s=t.layoutSize;else if("source"!==t.kind){const{interpolationType:u,minZoom:m,maxZoom:g}=t,E=u?zn(Wa.interpolationFactor(u,e,m,g),0,1):0;"camera"===t.kind?s=Cr(t.minSize,t.maxSize,E):n=E}return{uSizeT:n,uSize:s}}var _=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:h0,evaluateSizeForFeature:zm,evaluateSizeForZoom:B,getSizeData:Rm});function k(t,e,n){return t.sections.forEach(s=>{s.text=function(u,m,g){const E=m.layout.get("text-transform").evaluate(g,{});return"uppercase"===E?u=u.toLocaleUpperCase():"lowercase"===E&&(u=u.toLocaleLowerCase()),Ds.applyArabicShaping&&(u=Ds.applyArabicShaping(u)),u}(s.text,e,n)}),t}const D={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function q(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function ce(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}const De=3;function dt(t,e,n){e.glyphs=[],1===t&&n.readMessage(jt,e)}function jt(t,e,n){if(3===t){const{id:s,bitmap:u,width:m,height:g,left:E,top:T,advance:z}=n.readMessage(bn,{});e.glyphs.push({id:s,bitmap:new p1({width:m+2*De,height:g+2*De},u),metrics:{width:m,height:g,left:E,top:T,advance:z}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function bn(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}const fi=De,Ii={horizontal:1,vertical:2,horizontalOnly:3};class oo{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,n){const s=new oo;return s.scale=e||1,s.fontStack=n,s}static forImage(e){const n=new oo;return n.imageName=e,n}}class ji{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,n){const s=new ji;for(let u=0;u<e.sections.length;u++){const m=e.sections[u];m.image?s.addImageSection(m):s.addTextSection(m,n)}return s}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCodePoint(e){return this.text.codePointAt(e)}verticalizePunctuation(e){this.text=function(n,s){let u="";for(let m=0;m<n.length;m++){const g=n.charCodeAt(m+1)||null,E=n.charCodeAt(m-1)||null;u+=!s&&(g&&L(g)&&!D[n[m+1]]||E&&L(E)&&!D[n[m-1]])||!D[n[m]]?n[m]:D[n[m]]}return u}(this.text,e)}trim(){let e=0;for(let s=0;s<this.text.length&&Do[this.text.charCodeAt(s)];s++)e++;let n=this.text.length;for(let s=this.text.length-1;s>=0&&s>=e&&Do[this.text.charCodeAt(s)];s--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}substring(e,n){const s=new ji;return s.text=this.text.substring(e,n),s.sectionIndex=this.sectionIndex.slice(e,n),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,n)=>Math.max(e,this.sections[n].scale),0)}addTextSection(e,n){this.text+=e.text,this.sections.push(oo.forText(e.scale,e.fontStack||n));const s=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(s)}addImageSection(e){const n=e.image?e.image.namePrimary:"";if(0===n.length)return void fa("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCodePoint(s),this.sections.push(oo.forImage(n)),this.sectionIndex.push(this.sections.length-1)):fa("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Io(t,e,n,s,u,m,g,E,T,z,$,W,Z,le,de){const be=ji.fromFeature(t,u);W===Ii.vertical&&be.verticalizePunctuation(Z);let xe=[];const $e=function(Qt,kn,Rn,li,Di,xi){if(!Qt)return[];const Ji=[],So=function(bo,Ro,Co,lr,To,Fo){let Yr=0;for(let Br=0;Br<bo.length();Br++){const Rr=bo.getSection(Br);Yr+=ls(bo.getCodePoint(Br),Rr,lr,To,Ro,Fo)}return Yr/Math.max(1,Math.ceil(Yr/Co))}(Qt,kn,Rn,li,Di,xi),qi=Qt.text.indexOf("\u200b")>=0;let wo=0;for(let bo=0;bo<Qt.length();bo++){const Ro=Qt.getSection(bo),Co=Qt.getCodePoint(bo);if(Do[Co]||(wo+=ls(Co,Ro,li,Di,kn,xi)),bo<Qt.length()-1){const lr=!((zi=Co)<11904||!(gn["Bopomofo Extended"](zi)||gn.Bopomofo(zi)||gn["CJK Compatibility Forms"](zi)||gn["CJK Compatibility Ideographs"](zi)||gn["CJK Compatibility"](zi)||gn["CJK Radicals Supplement"](zi)||gn["CJK Strokes"](zi)||gn["CJK Symbols and Punctuation"](zi)||gn["CJK Unified Ideographs Extension A"](zi)||gn["CJK Unified Ideographs"](zi)||gn["Enclosed CJK Letters and Months"](zi)||gn["Halfwidth and Fullwidth Forms"](zi)||gn.Hiragana(zi)||gn["Ideographic Description Characters"](zi)||gn["Kangxi Radicals"](zi)||gn["Katakana Phonetic Extensions"](zi)||gn.Katakana(zi)||gn["Vertical Forms"](zi)||gn["Yi Radicals"](zi)||gn["Yi Syllables"](zi)));(wr[Co]||lr||Ro.imageName)&&Ji.push(xs(bo+1,wo,So,Ji,Ur(Co,Qt.getCodePoint(bo+1),lr&&qi),!1))}}var zi;return Is(xs(Qt.length(),wo,So,Ji,0,!0))}(be,z,m,e,s,le),{processBidirectionalText:gt,processStyledBidirectionalText:yt}=Ds;if(gt&&1===be.sections.length){const Qt=gt(be.toString(),$e);for(const kn of Qt){const Rn=new ji;Rn.text=kn,Rn.sections=be.sections;for(let li=0;li<kn.length;li++)Rn.sectionIndex.push(0);xe.push(Rn)}}else if(yt){const Qt=yt(be.text,be.sectionIndex,$e);for(const kn of Qt){const Rn=new ji;Rn.text=kn[0],Rn.sectionIndex=kn[1],Rn.sections=be.sections,xe.push(Rn)}}else xe=function(Qt,kn){const Rn=[],li=Qt.text;let Di=0;for(const xi of kn)Rn.push(Qt.substring(Di,xi)),Di=xi;return Di<li.length&&Rn.push(Qt.substring(Di,li.length)),Rn}(be,$e);const wt=[],nn={positionedLines:wt,text:be.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:W,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Qt,kn,Rn,li,Di,xi,Ji,So,qi,wo,zi,bo){let Ro=0,Co=0,lr=0;const To="right"===So?1:"left"===So?0:.5;let Fo=!1;for(const ta of Di){const Ss=ta.getSections();for(const da of Ss){if(da.imageName)continue;const ra=kn[da.fontStack];if(ra&&(Fo=void 0!==ra.ascender&&void 0!==ra.descender,!Fo))break}if(!Fo)break}let Yr=0;for(const ta of Di){ta.trim();const Ss=ta.getMaxScale(),da=(Ss-1)*Mu,ra={positionedGlyphs:[],lineOffset:0};Qt.positionedLines[Yr]=ra;const ka=ra.positionedGlyphs;let bs=0;if(!ta.length()){Co+=xi,++Yr;continue}let jl=0,Pl=0;for(let Ba=0;Ba<ta.length();Ba++){const Ha=ta.getSection(Ba),rc=ta.getSectionIndex(Ba),sc=ta.getCodePoint(Ba);let Au=Ha.scale,vu=null,f1=null,ad=null,iu=Mu,qd=0;const g0=!(qi===Ii.horizontal||!zi&&!te(sc)||zi&&(Do[sc]||(Br=sc,gn.Arabic(Br)||gn["Arabic Supplement"](Br)||gn["Arabic Extended-A"](Br)||gn["Arabic Presentation Forms-A"](Br)||gn["Arabic Presentation Forms-B"](Br))));if(Ha.imageName){const v0=li[Ha.imageName];if(!v0)continue;ad=Ha.imageName,Qt.iconsInText=Qt.iconsInText||!0,f1=v0.paddedRect;const ac=v0.displaySize;Au=Au*Mu/bo,vu={width:ac[0],height:ac[1],left:0,top:-fi,advance:g0?ac[1]:ac[0],localGlyph:!1},qd=Fo?-vu.height*Au:Ss*Mu-17-ac[1]*Au,iu=vu.advance;const Eh=(g0?ac[0]:ac[1])*Au-Mu*Ss;Eh>0&&Eh>bs&&(bs=Eh)}else{const v0=Rn[Ha.fontStack];if(!v0)continue;v0[sc]&&(f1=v0[sc]);const ac=kn[Ha.fontStack];if(!ac)continue;const Eh=ac.glyphs[sc];if(!Eh)continue;if(vu=Eh.metrics,iu=8203!==sc?Mu:0,Fo){const nf=void 0!==ac.ascender?Math.abs(ac.ascender):0,Pf=void 0!==ac.descender?Math.abs(ac.descender):0,im=(nf+Pf)*Au;jl<im&&(jl=im,Pl=(nf-Pf)/2*Au),qd=-nf*Au}else qd=(Ss-Au)*Mu-17}g0?(Qt.verticalizable=!0,ka.push({glyph:sc,imageName:ad,x:Ro,y:Co+qd,vertical:g0,scale:Au,localGlyph:vu.localGlyph,fontStack:Ha.fontStack,sectionIndex:rc,metrics:vu,rect:f1}),Ro+=iu*Au+wo):(ka.push({glyph:sc,imageName:ad,x:Ro,y:Co+qd,vertical:g0,scale:Au,localGlyph:vu.localGlyph,fontStack:Ha.fontStack,sectionIndex:rc,metrics:vu,rect:f1}),Ro+=vu.advance*Au+wo)}0!==ka.length&&(lr=Math.max(Ro-wo,lr),Fo?fl(ka,To,bs,Pl,xi*Ss/2):fl(ka,To,bs,0,xi/2)),Ro=0;const Ya=xi*Ss+bs;ra.lineOffset=Math.max(bs,da),Co+=Ya,++Yr}var Br;const Rr=Co,{horizontalAlign:Lo,verticalAlign:Zr}=Us(Ji);(function(ta,Ss,da,ra,ka,bs){const jl=(Ss-da)*ka,Pl=-bs*ra;for(const Ya of ta)for(const Ba of Ya.positionedGlyphs)Ba.x+=jl,Ba.y+=Pl})(Qt.positionedLines,To,Lo,Zr,lr,Rr),Qt.top+=-Zr*Rr,Qt.bottom=Qt.top+Rr,Qt.left+=-Lo*lr,Qt.right=Qt.left+lr,Qt.hasBaseline=Fo}(nn,e,n,s,xe,g,E,T,W,z,Z,de),!function(Qt){for(const kn of Qt)if(0!==kn.positionedGlyphs.length)return!1;return!0}(wt)&&nn}const Do={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wr={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function ls(t,e,n,s,u,m){if(e.imageName){const g=s[e.imageName];return g?g.displaySize[0]*e.scale*Mu/m+u:0}{const g=n[e.fontStack],E=g&&g.glyphs[t];return E?E.metrics.advance*e.scale+u:0}}function ys(t,e,n,s){const u=Math.pow(t-e,2);return s?t<e?u/2:2*u:u+Math.abs(n)*n}function Ur(t,e,n){let s=0;return 10===t&&(s-=1e4),n&&(s+=150),40!==t&&65288!==t||(s+=50),41!==e&&65289!==e||(s+=50),s}function xs(t,e,n,s,u,m){let g=null,E=ys(e,n,u,m);for(const T of s){const z=ys(e-T.x,n,u,m)+T.badness;z<=E&&(g=T,E=z)}return{index:t,x:e,priorBreak:g,badness:E}}function Is(t){return t?Is(t.priorBreak).concat(t.index):[]}function Us(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function fl(t,e,n,s,u){if(!(e||n||s||u))return;const m=t.length-1,g=t[m],E=(g.x+g.metrics.advance*g.scale)*e;for(let T=0;T<=m;T++)t[T].x-=E,t[T].y+=n+s+u}function Ec(t,e,n,s){const{horizontalAlign:u,verticalAlign:m}=Us(s),g=n[0]-t.displaySize[0]*u,E=n[1]-t.displaySize[1]*m;return{imagePrimary:t,imageSecondary:e,top:E,bottom:E+t.displaySize[1],left:g,right:g+t.displaySize[0]}}function Dl(t,e,n,s,u,m){const g=t.imagePrimary;let E;if(g.content){const xe=g.content,$e=g.pixelRatio||1;E=[xe[0]/$e,xe[1]/$e,g.displaySize[0]-xe[2]/$e,g.displaySize[1]-xe[3]/$e]}const T=e.left*m,z=e.right*m;let $,W,Z,le;"width"===n||"both"===n?(le=u[0]+T-s[3],W=u[0]+z+s[1]):(le=u[0]+(T+z-g.displaySize[0])/2,W=le+g.displaySize[0]);const de=e.top*m,be=e.bottom*m;return"height"===n||"both"===n?($=u[1]+de-s[0],Z=u[1]+be+s[2]):($=u[1]+(de+be-g.displaySize[1])/2,Z=$+g.displaySize[1]),{imagePrimary:g,imageSecondary:void 0,top:$,right:W,bottom:Z,left:le,collisionPadding:E}}class Zl extends Eo{constructor(e,n,s,u,m){super(e,n),this.angle=u,this.z=s,void 0!==m&&(this.segment=m)}clone(){return new Zl(this.x,this.y,this.z,this.angle,this.segment)}}function Es(t,e,n,s,u){if(void 0===e.segment)return!0;let m=e,g=e.segment+1,E=0;for(;E>-n/2;){if(g--,g<0)return!1;E-=t[g].dist(m),m=t[g]}E+=t[g].dist(t[g+1]),g++;const T=[];let z=0;for(;E<n/2;){const $=t[g],W=t[g+1];if(!W)return!1;let Z=t[g-1].angleTo($)-$.angleTo(W);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:E,angleDelta:Z}),z+=Z;E-T[0].distance>s;)z-=T.shift().angleDelta;if(z>u)return!1;g++,E+=$.dist(W)}return!0}function Fu(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function nd(t,e,n){return t?.6*e*n:0}function Gd(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Vu(t,e,n,s,u,m){const g=nd(n,u,m),E=Gd(n,s)*m;let T=0;const z=Fu(t)/2;for(let $=0;$<t.length-1;$++){const W=t[$],Z=t[$+1],le=W.dist(Z);if(T+le>z){const de=(z-T)/le,be=Cr(W.x,Z.x,de),xe=Cr(W.y,Z.y,de),$e=new Zl(be,xe,0,Z.angleTo(W),$);return!g||Es(t,$e,E,g,e)?$e:void 0}T+=le}}function id(t,e,n,s,u,m,g,E,T){const z=nd(s,m,g),$=Gd(s,u),W=$*g,Z=0===t[0].x||t[0].x===T||0===t[0].y||t[0].y===T;return e-W<e/4&&(e=W+e/4),uh(t,Z?e/2*E%e:($/2+2*m)*g*E%e,e,z,n,W,Z,!1,T)}function uh(t,e,n,s,u,m,g,E,T){const z=m/2,$=Fu(t);let W=0,Z=e-n,le=[];for(let de=0;de<t.length-1;de++){const be=t[de],xe=t[de+1],$e=be.dist(xe),gt=xe.angleTo(be);for(;Z+n<W+$e;){Z+=n;const yt=(Z-W)/$e,wt=Cr(be.x,xe.x,yt),nn=Cr(be.y,xe.y,yt);if(wt>=0&&wt<T&&nn>=0&&nn<T&&Z-z>=0&&Z+z<=$){const Qt=new Zl(wt,nn,0,gt,de);s&&!Es(t,Qt,m,s,u)||le.push(Qt)}}W+=$e}return E||le.length||g||(le=uh(t,W/2,n,s,u,m,g,!0,T)),le}function Rc(t,e,n,s,u){const m=[];for(let g=0;g<t.length;g++){const E=t[g];let T;for(let z=0;z<E.length-1;z++){let $=E[z],W=E[z+1];$.x<e&&W.x<e||($.x<e?$=new Eo(e,$.y+(e-$.x)/(W.x-$.x)*(W.y-$.y))._round():W.x<e&&(W=new Eo(e,$.y+(e-$.x)/(W.x-$.x)*(W.y-$.y))._round()),$.y<n&&W.y<n||($.y<n?$=new Eo($.x+(n-$.y)/(W.y-$.y)*(W.x-$.x),n)._round():W.y<n&&(W=new Eo($.x+(n-$.y)/(W.y-$.y)*(W.x-$.x),n)._round()),$.x>=s&&W.x>=s||($.x>=s?$=new Eo(s,$.y+(s-$.x)/(W.x-$.x)*(W.y-$.y))._round():W.x>=s&&(W=new Eo(s,$.y+(s-$.x)/(W.x-$.x)*(W.y-$.y))._round()),$.y>=u&&W.y>=u||($.y>=u?$=new Eo($.x+(u-$.y)/(W.y-$.y)*(W.x-$.x),u)._round():W.y>=u&&(W=new Eo($.x+(u-$.y)/(W.y-$.y)*(W.x-$.x),u)._round()),T&&$.equals(T[T.length-1])||(T=[$],m.push(T)),T.push(W)))))}}return m}function $u(t){let e=0,n=0;for(const g of t)e+=g.w*g.h,n=Math.max(n,g.w);t.sort((g,E)=>E.h-g.h);const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let u=0,m=0;for(const g of t)for(let E=s.length-1;E>=0;E--){const T=s[E];if(!(g.w>T.w||g.h>T.h)){if(g.x=T.x,g.y=T.y,m=Math.max(m,g.y+g.h),u=Math.max(u,g.x+g.w),g.w===T.w&&g.h===T.h){const z=s.pop();E<s.length&&(s[E]=z)}else g.h===T.h?(T.x+=g.w,T.w-=g.w):g.w===T.w?(T.y+=g.h,T.h-=g.h):(s.push({x:T.x+g.w,y:T.y,w:T.w-g.w,h:g.h}),T.y+=g.h,T.h-=g.h);break}}return{w:u,h:m,fill:e/(u*m)||0}}lt(Zl,"Anchor");const Cc=1;class ju{constructor(e,{pixelRatio:n,version:s,stretchX:u,stretchY:m,content:g}){this.paddedRect=e,this.pixelRatio=n,this.stretchX=u,this.stretchY=m,this.content=g,this.version=s}get tl(){return[this.paddedRect.x+Cc,this.paddedRect.y+Cc]}get br(){return[this.paddedRect.x+this.paddedRect.w-Cc,this.paddedRect.y+this.paddedRect.h-Cc]}get displaySize(){return[(this.paddedRect.w-2*Cc)/this.pixelRatio,(this.paddedRect.h-2*Cc)/this.pixelRatio]}}class c2{constructor(e,n,s){const u={},m={};this.haveRenderCallbacks=[];const g=[];this.addImages(e,u,g),this.addImages(n,m,g);const{w:E,h:T}=$u(g),z=new hd({width:E||1,height:T||1});for(const $ in e){const W=e[$],Z=u[$].paddedRect;hd.copy(W.data,z,{x:0,y:0},{x:Z.x+Cc,y:Z.y+Cc},W.data,s,W.sdf)}for(const $ in n){const W=n[$],Z=m[$].paddedRect,le=Z.x+Cc,de=Z.y+Cc,be=W.data.width,xe=W.data.height;hd.copy(W.data,z,{x:0,y:0},{x:le,y:de},W.data,s),hd.copy(W.data,z,{x:0,y:xe-1},{x:le,y:de-1},{width:be,height:1},s),hd.copy(W.data,z,{x:0,y:0},{x:le,y:de+xe},{width:be,height:1},s),hd.copy(W.data,z,{x:be-1,y:0},{x:le-1,y:de},{width:1,height:xe},s),hd.copy(W.data,z,{x:0,y:0},{x:le+be,y:de},{width:1,height:xe},s)}this.image=z,this.iconPositions=u,this.patternPositions=m}addImages(e,n,s){for(const u in e){const m=e[u],g={x:0,y:0,w:m.data.width+2*Cc,h:m.data.height+2*Cc};s.push(g),n[u]=new ju(g,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,n,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>e.hasImage(u,s)),e.dispatchRenderCallbacks(this.haveRenderCallbacks,s);for(const u in e.getUpdatedImages(s))this.patchUpdatedImage(this.iconPositions[u],e.getImage(u,s),n),this.patchUpdatedImage(this.patternPositions[u],e.getImage(u,s),n)}patchUpdatedImage(e,n,s){if(!e||!n||e.version===n.version)return;e.version=n.version;const[u,m]=e.tl,g=!!Object.keys(this.patternPositions).length;s.update(n.data,{useMipmap:g},{x:u,y:m})}}lt(ju,"ImagePosition"),lt(c2,"ImageAtlas");const Cl=1e20;function bp(t,e,n,s,u,m,g,E,T){for(let z=e;z<e+s;z++)Tf(t,n*m+z,m,u,g,E,T);for(let z=n;z<n+u;z++)Tf(t,z*m+e,1,s,g,E,T)}function Tf(t,e,n,s,u,m,g){m[0]=0,g[0]=-Cl,g[1]=Cl,u[0]=t[e];for(let E=1,T=0,z=0;E<s;E++){u[E]=t[e+E*n];const $=E*E;do{const W=m[T];z=(u[E]-u[W]+$-W*W)/(E-W)/2}while(z<=g[T]&&--T>-1);T++,m[T]=E,g[T]=z,g[T+1]=Cl}for(let E=0,T=0;E<s;E++){for(;g[T+1]<E;)T++;const z=m[T],$=E-z;t[e+E*n]=u[z]+$*$}}const p0=2,Vg={none:0,ideographs:1,all:2};class Om{constructor(e,n,s){this.requestManager=e,this.localGlyphMode=n,this.localFontFamily=s,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e,n){this.urls[n]=e}getGlyphs(e,n,s){const u=[],m=this.urls[n]||ft.GLYPHS_URL;for(const g in e)for(const E of e[g])u.push({stack:g,id:E});yo(u,({stack:g,id:E},T)=>{let z=this.entries[g];z||(z=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let $=z.glyphs[E];if(void 0!==$)return void T(null,{stack:g,id:E,glyph:$});if($=this._tinySDF(z,g,E),$)return z.glyphs[E]=$,void T(null,{stack:g,id:E,glyph:$});const W=Math.floor(E/256);if(256*W>65535)return void T(new Error("glyphs > 65535 not supported"));if(z.ranges[W])return void T(null,{stack:g,id:E,glyph:$});let Z=z.requests[W];Z||(Z=z.requests[W]=[],Om.loadGlyphRange(g,W,m,this.requestManager,(le,de)=>{if(de){z.ascender=de.ascender,z.descender=de.descender;for(const be in de.glyphs)this._doesCharSupportLocalGlyph(+be)||(z.glyphs[+be]=de.glyphs[+be]);z.ranges[W]=!0}for(const be of Z)be(le,de);delete z.requests[W]})),Z.push((le,de)=>{le?T(le):de&&T(null,{stack:g,id:E,glyph:de.glyphs[E]||null})})},(g,E)=>{if(g)s(g);else if(E){const T={};for(const{stack:z,id:$,glyph:W}of E)void 0===T[z]&&(T[z]={}),void 0===T[z].glyphs&&(T[z].glyphs={}),T[z].glyphs[$]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics},T[z].ascender=this.entries[z].ascender,T[z].descender=this.entries[z].descender;s(null,T)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Vg.none&&(this.localGlyphMode===Vg.all?!!this.localFontFamily:!!this.localFontFamily&&(gn["CJK Unified Ideographs"](e)||gn["Hangul Syllables"](e)||gn.Hiragana(e)||gn.Katakana(e)||gn["CJK Symbols and Punctuation"](e)||gn["CJK Unified Ideographs Extension A"](e)||gn["CJK Unified Ideographs Extension B"](e)))}_tinySDF(e,n,s){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(s))return;let m=e.tinySDF;if(!m){let be="400";/bold/i.test(n)?be="900":/medium/i.test(n)?be="500":/light/i.test(n)&&(be="200"),m=e.tinySDF=new Om.TinySDF({fontFamily:u,fontWeight:be,fontSize:24*p0,buffer:3*p0,radius:8*p0}),m.fontWeight=be}if(this.localGlyphs[m.fontWeight][s])return this.localGlyphs[m.fontWeight][s];const g=String.fromCodePoint(s),{data:E,width:T,height:z,glyphWidth:$,glyphHeight:W,glyphLeft:Z,glyphTop:le,glyphAdvance:de}=m.draw(g);return this.localGlyphs[m.fontWeight][s]={id:s,bitmap:new p1({width:T,height:z},E),metrics:{width:$/p0,height:W/p0,left:Z/p0,top:le/p0-27,advance:de/p0,localGlyph:!0}}}}Om.loadGlyphRange=function(t,e,n,s,u){const m=256*e,g=m+255,E=s.transformRequest(s.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${m}-${g}`),_t.Glyphs);dr(E,(T,z)=>{if(T)u(T);else if(z){const $={},W=new a2(z).readFields(dt,{});for(const Z of W.glyphs)$[Z.id]=Z;u(null,{glyphs:$,ascender:W.ascender,descender:W.descender})}})},Om.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:s=.25,fontFamily:u="sans-serif",fontWeight:m="normal",fontStyle:g="normal"}={}){this.buffer=e,this.cutoff=s,this.radius=n;const E=this.size=t+4*e,T=this._createCanvas(E),z=this.ctx=T.getContext("2d",{willReadFrequently:!0});z.font=`${g} ${m} ${t}px ${u}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:s,actualBoundingBoxLeft:u,actualBoundingBoxRight:m}=this.ctx.measureText(t),g=Math.ceil(n),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-u))),T=Math.min(this.size-this.buffer,g+Math.ceil(s)),z=E+2*this.buffer,$=T+2*this.buffer,W=Math.max(z*$,0),Z=new Uint8ClampedArray(W),le={data:Z,width:z,height:$,glyphWidth:E,glyphHeight:T,glyphTop:g,glyphLeft:0,glyphAdvance:e};if(0===E||0===T)return le;const{ctx:de,buffer:be,gridInner:xe,gridOuter:$e}=this;de.clearRect(be,be,E,T),de.fillText(t,be,be+g);const gt=de.getImageData(be,be,E,T);$e.fill(Cl,0,W),xe.fill(0,0,W);for(let yt=0;yt<T;yt++)for(let wt=0;wt<E;wt++){const nn=gt.data[4*(yt*E+wt)+3]/255;if(0===nn)continue;const Qt=(yt+be)*z+wt+be;if(1===nn)$e[Qt]=0,xe[Qt]=Cl;else{const kn=.5-nn;$e[Qt]=kn>0?kn*kn:0,xe[Qt]=kn<0?kn*kn:0}}bp($e,0,0,z,$,z,this.f,this.v,this.z),bp(xe,be,be,E,T,z,this.f,this.v,this.z);for(let yt=0;yt<W;yt++){const wt=Math.sqrt($e[yt])-Math.sqrt(xe[yt]);Z[yt]=Math.round(255-255*(wt/this.radius+this.cutoff))}return le}};const W2=Cc;function xv(t,e,n,s){const u=[],m=t.imagePrimary,g=m.pixelRatio,E=m.paddedRect.w-2*W2,T=m.paddedRect.h-2*W2,z=t.right-t.left,$=t.bottom-t.top,W=m.stretchX||[[0,E]],Z=m.stretchY||[[0,T]],le=(xi,Ji)=>xi+Ji[1]-Ji[0],de=W.reduce(le,0),be=Z.reduce(le,0),xe=E-de,$e=T-be;let gt=0,yt=de,wt=0,nn=be,Qt=0,kn=xe,Rn=0,li=$e;if(m.content&&s){const xi=m.content;gt=$g(W,0,xi[0]),wt=$g(Z,0,xi[1]),yt=$g(W,xi[0],xi[2]),nn=$g(Z,xi[1],xi[3]),Qt=xi[0]-gt,Rn=xi[1]-wt,kn=xi[2]-xi[0]-yt,li=xi[3]-xi[1]-nn}const Di=(xi,Ji,So,qi)=>{const wo=q2(xi.stretch-gt,yt,z,t.left),zi=Zp(xi.fixed-Qt,kn,xi.stretch,de),bo=q2(Ji.stretch-wt,nn,$,t.top),Ro=Zp(Ji.fixed-Rn,li,Ji.stretch,be),Co=q2(So.stretch-gt,yt,z,t.left),lr=Zp(So.fixed-Qt,kn,So.stretch,de),To=q2(qi.stretch-wt,nn,$,t.top),Fo=Zp(qi.fixed-Rn,li,qi.stretch,be),Yr=new Eo(wo,bo),Br=new Eo(Co,bo),Rr=new Eo(Co,To),Lo=new Eo(wo,To),Zr=new Eo(zi/g,Ro/g),ta=new Eo(lr/g,Fo/g),Ss=e*Math.PI/180;if(Ss){const Pl=Math.sin(Ss),Ya=Math.cos(Ss),Ba=[Ya,-Pl,Pl,Ya];Yr._matMult(Ba),Br._matMult(Ba),Lo._matMult(Ba),Rr._matMult(Ba)}const da=xi.stretch+xi.fixed,ra=So.stretch+So.fixed,ka=Ji.stretch+Ji.fixed,bs=qi.stretch+qi.fixed,jl=t.imageSecondary;return{tl:Yr,tr:Br,bl:Lo,br:Rr,texPrimary:{x:m.paddedRect.x+W2+da,y:m.paddedRect.y+W2+ka,w:ra-da,h:bs-ka},texSecondary:jl?{x:jl.paddedRect.x+W2+da,y:jl.paddedRect.y+W2+ka,w:ra-da,h:bs-ka}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zr,pixelOffsetBR:ta,minFontScaleX:kn/g/z,minFontScaleY:li/g/$,isSDF:n}};if(s&&(m.stretchX||m.stretchY)){const xi=Iv(W,xe,de),Ji=Iv(Z,$e,be);for(let So=0;So<xi.length-1;So++){const qi=xi[So],wo=xi[So+1];for(let zi=0;zi<Ji.length-1;zi++)u.push(Di(qi,Ji[zi],wo,Ji[zi+1]))}}else u.push(Di({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:T+1}));return u}function $g(t,e,n){let s=0;for(const u of t)s+=Math.max(e,Math.min(n,u[1]))-Math.max(e,Math.min(n,u[0]));return s}function Iv(t,e,n){const s=[{fixed:-W2,stretch:0}];for(const[u,m]of t){const g=s[s.length-1];s.push({fixed:u-g.stretch,stretch:g.stretch}),s.push({fixed:u-g.stretch,stretch:g.stretch+(m-u)})}return s.push({fixed:e+W2,stretch:n}),s}function q2(t,e,n,s){return t/e*n+s}function Zp(t,e,n,s){return t-e*n/s}function B4(t,e,n,s){const u=e+t.positionedLines[s].lineOffset;return 0===s?n+u/2:n+(u+(e+t.positionedLines[s-1].lineOffset))/2}function N4(t,e=1,n=!1){let s=1/0,u=1/0,m=-1/0,g=-1/0;const E=t[0];for(let le=0;le<E.length;le++){const de=E[le];(!le||de.x<s)&&(s=de.x),(!le||de.y<u)&&(u=de.y),(!le||de.x>m)&&(m=de.x),(!le||de.y>g)&&(g=de.y)}const T=Math.min(m-s,g-u);let z=T/2;const $=new S0([],F4);if(0===T)return new Eo(s,u);for(let le=s;le<m;le+=T)for(let de=u;de<g;de+=T)$.push(new Qp(le+z,de+z,z,t));let W=function(le){let de=0,be=0,xe=0;const $e=le[0];for(let gt=0,yt=$e.length,wt=yt-1;gt<yt;wt=gt++){const nn=$e[gt],Qt=$e[wt],kn=nn.x*Qt.y-Qt.x*nn.y;be+=(nn.x+Qt.x)*kn,xe+=(nn.y+Qt.y)*kn,de+=3*kn}return new Qp(be/de,xe/de,0,le)}(t),Z=$.length;for(;$.length;){const le=$.pop();(le.d>W.d||!W.d)&&(W=le,n&&console.log("found best %d after %d probes",Math.round(1e4*le.d)/1e4,Z)),le.max-W.d<=e||(z=le.h/2,$.push(new Qp(le.p.x-z,le.p.y-z,z,t)),$.push(new Qp(le.p.x+z,le.p.y-z,z,t)),$.push(new Qp(le.p.x-z,le.p.y+z,z,t)),$.push(new Qp(le.p.x+z,le.p.y+z,z,t)),Z+=4)}return n&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${W.d}`)),W.p}function F4(t,e){return e.max-t.max}class Qp{constructor(e,n,s,u){this.p=new Eo(e,n),this.h=s,this.d=function(m,g){let E=!1,T=1/0;for(let z=0;z<g.length;z++){const $=g[z];for(let W=0,Z=$.length,le=Z-1;W<Z;le=W++){const de=$[W],be=$[le];de.y>m.y!=be.y>m.y&&m.x<(be.x-de.x)*(m.y-de.y)/(be.y-de.y)+de.x&&(E=!E),T=Math.min(T,qm(m,de,be))}}return(E?1:-1)*Math.sqrt(T)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}}const V4=Number.POSITIVE_INFINITY,A1=Math.sqrt(2);function Ev(t,[e,n]){let s=0,u=0;if(n===V4){e<0&&(e=0);const m=e/A1;switch(t){case"top-right":case"top-left":u=m-7;break;case"bottom-right":case"bottom-left":u=7-m;break;case"bottom":u=7-e;break;case"top":u=e-7}switch(t){case"top-right":case"bottom-right":s=-m;break;case"top-left":case"bottom-left":s=m;break;case"left":s=e;break;case"right":s=-e}}else{switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":u=n-7;break;case"bottom-right":case"bottom-left":case"bottom":u=7-n}switch(t){case"top-right":case"bottom-right":case"right":s=-e;break;case"top-left":case"bottom-left":case"left":s=e}}return[s,u]}function Mf(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function d6(t,e,n,s,u,m,g,E,T,z,$,W,Z,le,de){let be=m.textMaxSize.evaluate(e,{},W);void 0===be&&(be=g);const xe=t.layers[0].layout,$e=xe.get("icon-offset").evaluate(e,{},W),gt=$4(n.horizontal)||n.vertical,yt="globe"===Z.name,wt=Mu,nn=g/wt,Qt=t.tilePixelRatio*be/wt,kn=(wo=t.overscaling,t.zoom>18&&wo>2&&(wo>>=1),Math.max(Xi/(512*wo),1)*xe.get("symbol-spacing")),Rn=xe.get("text-padding")*t.tilePixelRatio,li=xe.get("icon-padding")*t.tilePixelRatio,Di=Gr(xe.get("text-max-angle")),xi="map"===xe.get("text-rotation-alignment")&&"point"!==xe.get("symbol-placement"),Ji="map"===xe.get("icon-rotation-alignment")&&"point"!==xe.get("symbol-placement"),So=xe.get("symbol-placement"),qi=kn/2;var wo;const zi=xe.get("icon-text-fit").evaluate(e,{},W),bo=xe.get("icon-text-fit-padding").evaluate(e,{},W),Ro="none"!==zi;let Co;!1===t.hasAnyIconTextFit&&Ro&&(t.hasAnyIconTextFit=!0),s&&Ro&&(t.allowVerticalPlacement&&n.vertical&&(Co=Dl(s,n.vertical,zi,bo,$e,nn)),gt&&(s=Dl(s,gt,zi,bo,$e,nn)));const lr=(To,Fo,Yr)=>{if(Fo.x<0||Fo.x>=Xi||Fo.y<0||Fo.y>=Xi)return;let Br=null;if(yt){const{x:Rr,y:Lo,z:Zr}=Z.projectTilePoint(Fo.x,Fo.y,Yr);Br={anchor:new Zl(Rr,Lo,Zr,0,void 0),up:Z.upVector(Yr,Fo.x,Fo.y)}}!function(Rr,Lo,Zr,ta,Ss,da,ra,ka,bs,jl,Pl,Ya,Ba,Ha,rc,sc,Au,vu,f1,ad,iu,qd,g0,v0,ac,Eh,nf){const Pf=Rr.addToLineVertexArray(Lo,ta);let im,$m,vg,D4,$6,j6,U6,uv=0,L3=0,H6=0,B3=0,G6=-1,Qv=-1;const jm={};let W6=Za("");const _g=Zr?Zr.anchor:Lo,dv="none"!==bs.layout.get("icon-text-fit").evaluate(iu,{},ac);let N3=0,F3=0;if(void 0===bs._unevaluatedLayout.getValue("text-radial-offset")?[N3,F3]=bs.layout.get("text-offset").evaluate(iu,{},ac).map(xp=>xp*Mu):(N3=bs.layout.get("text-radial-offset").evaluate(iu,{},ac)*Mu,F3=V4),Rr.allowVerticalPlacement&&Ss.vertical){const xp=Ss.vertical;if(rc)j6=u2(xp),ka&&(U6=u2(ka));else{const Ip=bs.layout.get("text-rotate").evaluate(iu,{},ac)+90;vg=X2(jl,_g,Lo,Pl,Ya,Ba,xp,Ha,Ip,sc),ka&&(D4=X2(jl,_g,Lo,Pl,Ya,Ba,ka,vu,Ip))}}if(da){const xp=bs.layout.get("icon-rotate").evaluate(iu,{},ac),Ip=xv(da,xp,g0,dv),P4=ka?xv(ka,xp,g0,dv):void 0;$m=X2(jl,_g,Lo,Pl,Ya,Ba,da,vu,xp),uv=4*Ip.length;const q6=Rr.iconSizeData;let e4=null;"source"===q6.kind?(e4=[h0*bs.layout.get("icon-size").evaluate(iu,{},ac)],e4[0]>X1&&fa(`${Rr.layerIds[0]}: Value for "icon-size" is >= ${Lm}. Reduce your "icon-size".`)):"composite"===q6.kind&&(e4=[h0*qd.compositeIconSizes[0].evaluate(iu,{},ac),h0*qd.compositeIconSizes[1].evaluate(iu,{},ac)],(e4[0]>X1||e4[1]>X1)&&fa(`${Rr.layerIds[0]}: Value for "icon-size" is >= ${Lm}. Reduce your "icon-size".`)),Rr.addSymbols(Rr.icon,Ip,e4,ad,f1,iu,!1,Zr,Lo,Pf.lineStartIndex,Pf.lineLength,-1,v0,ac,Eh,nf),G6=Rr.icon.placedSymbolArray.length-1,P4&&(L3=4*P4.length,Rr.addSymbols(Rr.icon,P4,e4,ad,f1,iu,Ii.vertical,Zr,Lo,Pf.lineStartIndex,Pf.lineLength,-1,v0,ac,Eh,nf),Qv=Rr.icon.placedSymbolArray.length-1)}for(const xp in Ss.horizontal){const Ip=Ss.horizontal[xp];im||(W6=Za(Ip.text),rc?$6=u2(Ip):im=X2(jl,_g,Lo,Pl,Ya,Ba,Ip,Ha,bs.layout.get("text-rotate").evaluate(iu,{},ac),sc));const P4=1===Ip.positionedLines.length;if(H6+=jg(Rr,Zr,Lo,Ip,ra,bs,rc,iu,sc,Pf,Ss.vertical?Ii.horizontal:Ii.horizontalOnly,P4?Object.keys(Ss.horizontal):[xp],jm,G6,qd,v0,ac,Eh),P4)break}Ss.vertical&&(B3+=jg(Rr,Zr,Lo,Ss.vertical,ra,bs,rc,iu,sc,Pf,Ii.vertical,["vertical"],jm,Qv,qd,v0,ac,Eh));let Rf=-1;const V3=(xp,Ip)=>xp?Math.max(xp,Ip):Ip;Rf=V3($6,Rf),Rf=V3(j6,Rf),Rf=V3(U6,Rf);const K5=Rf>-1?1:0;Rr.glyphOffsetArray.length>=65535&&fa("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==iu.sortKey&&Rr.addToSortKeyRanges(Rr.symbolInstances.length,iu.sortKey),Rr.symbolInstances.emplaceBack(Lo.x,Lo.y,_g.x,_g.y,_g.z,jm.right>=0?jm.right:-1,jm.center>=0?jm.center:-1,jm.left>=0?jm.left:-1,jm.vertical>=0?jm.vertical:-1,G6,Qv,W6,void 0!==im?im:Rr.collisionBoxArray.length,void 0!==im?im+1:Rr.collisionBoxArray.length,void 0!==vg?vg:Rr.collisionBoxArray.length,void 0!==vg?vg+1:Rr.collisionBoxArray.length,void 0!==$m?$m:Rr.collisionBoxArray.length,void 0!==$m?$m+1:Rr.collisionBoxArray.length,D4||Rr.collisionBoxArray.length,D4?D4+1:Rr.collisionBoxArray.length,Pl,H6,B3,uv,L3,K5,0,N3,F3,Rf,0,1,1,dv?1:0)}(t,Fo,Br,To,n,s,u,Co,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,Rn,xi,T,0,li,Ji,$e,e,m,z,$,W,le,de)};if("line"===So)for(const To of Rc(e.geometry,0,0,Xi,Xi)){const Fo=id(To,kn,Di,n.vertical||gt,s,wt,Qt,t.overscaling,Xi);for(const Yr of Fo)gt&&Cv(t,gt.text,qi,Yr)||lr(To,Yr,W)}else if("line-center"===So){for(const To of e.geometry)if(To.length>1){const Fo=Vu(To,Di,n.vertical||gt,s,wt,Qt);Fo&&lr(To,Fo,W)}}else if("Polygon"===e.type)for(const To of F(e.geometry,0)){const Fo=N4(To,16);lr(To[0],new Zl(Fo.x,Fo.y,0,0,void 0),W)}else if("LineString"===e.type)for(const To of e.geometry)lr(To,new Zl(To[0].x,To[0].y,0,0,void 0),W);else if("Point"===e.type)for(const To of e.geometry)for(const Fo of To)lr([Fo],new Zl(Fo.x,Fo.y,0,0,void 0),W)}const Lm=255,X1=Lm*h0;function jg(t,e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe,$e){const gt=function(nn,Qt,kn,Rn,li,Di,xi,Ji){const So=[];if(0===Qt.positionedLines.length)return So;const qi=Rn.layout.get("text-rotate").evaluate(Di,{})*Math.PI/180,wo=function(lr){const To=lr[0],Fo=lr[1],Yr=To*Fo;return Yr>0?[To,-Fo]:Yr<0?[-To,Fo]:0===To?[Fo,To]:[Fo,-To]}(kn);let zi=Math.abs(Qt.top-Qt.bottom);for(const lr of Qt.positionedLines)zi-=lr.lineOffset;const bo=Qt.positionedLines.length,Ro=zi/bo;let Co=Qt.top-kn[1];for(let lr=0;lr<bo;++lr){const To=Qt.positionedLines[lr];Co=B4(Qt,Ro,Co,lr);for(const Fo of To.positionedGlyphs){if(!Fo.rect)continue;const Yr=Fo.rect||{};let Br=fi+1,Rr=!0,Lo=1,Zr=0;if(Fo.imageName){const ad=xi[Fo.imageName];if(!ad)continue;if(ad.sdf){fa("SDF images are not supported in formatted text and will be ignored.");continue}Rr=!1,Lo=ad.pixelRatio,Br=Cc/Lo}const ta=(li||Ji)&&Fo.vertical,Ss=Fo.metrics.advance*Fo.scale/2,da=Fo.metrics,ra=Fo.rect;if(null===ra)continue;Ji&&Qt.verticalizable&&(Zr=Fo.imageName?Ss-Fo.metrics.width*Fo.scale/2:0);const ka=li?[Fo.x+Ss,Fo.y]:[0,0];let bs=[0,0],jl=[0,0],Pl=!1;li||(ta?(jl=[Fo.x+Ss+wo[0],Fo.y+wo[1]-Zr],Pl=!0):bs=[Fo.x+Ss+kn[0],Fo.y+kn[1]-Zr]);const Ya=ra.w*Fo.scale/(Lo*(Fo.localGlyph?p0:1)),Ba=ra.h*Fo.scale/(Lo*(Fo.localGlyph?p0:1));let Ha,rc,sc,Au;if(ta){const ad=Fo.y-Co,iu=new Eo(-Ss,Ss-ad),qd=-Math.PI/2,g0=new Eo(...jl);Ha=new Eo(-Ss+bs[0],bs[1]),Ha._rotateAround(qd,iu)._add(g0),Ha.x+=-ad+Ss,Ha.y-=(da.left-Br)*Fo.scale;const v0=Fo.imageName?da.advance*Fo.scale:Mu*Fo.scale,ac=String.fromCodePoint(Fo.glyph);q(ac)?Ha.x+=(1-Br)*Fo.scale:ce(ac)?Ha.x+=v0-da.height*Fo.scale+(-Br-1)*Fo.scale:Ha.x+=Fo.imageName||da.width+2*Br===ra.w&&da.height+2*Br===ra.h?(v0-Ba)/2:(v0-(da.height+2*Br)*Fo.scale)/2,rc=new Eo(Ha.x,Ha.y-Ya),sc=new Eo(Ha.x+Ba,Ha.y),Au=new Eo(Ha.x+Ba,Ha.y-Ya)}else{const ad=(da.left-Br)*Fo.scale-Ss+bs[0],iu=(-da.top-Br)*Fo.scale+bs[1],qd=ad+Ya,g0=iu+Ba;Ha=new Eo(ad,iu),rc=new Eo(qd,iu),sc=new Eo(ad,g0),Au=new Eo(qd,g0)}if(qi){let ad;ad=li?new Eo(0,0):Pl?new Eo(wo[0],wo[1]):new Eo(kn[0],kn[1]),Ha._rotateAround(qi,ad),rc._rotateAround(qi,ad),sc._rotateAround(qi,ad),Au._rotateAround(qi,ad)}const vu=new Eo(0,0),f1=new Eo(0,0);So.push({tl:Ha,tr:rc,bl:sc,br:Au,texPrimary:Yr,texSecondary:void 0,writingMode:Qt.writingMode,glyphOffset:ka,sectionIndex:Fo.sectionIndex,isSDF:Rr,pixelOffsetTL:vu,pixelOffsetBR:f1,minFontScaleX:0,minFontScaleY:0})}}return So}(0,s,T,m,g,E,u,t.allowVerticalPlacement),yt=t.textSizeData;let wt=null;"source"===yt.kind?(wt=[h0*m.layout.get("text-size").evaluate(E,{},xe)],wt[0]>X1&&fa(`${t.layerIds[0]}: Value for "text-size" is >= ${Lm}. Reduce your "text-size".`)):"composite"===yt.kind&&(wt=[h0*de.compositeTextSizes[0].evaluate(E,{},xe),h0*de.compositeTextSizes[1].evaluate(E,{},xe)],(wt[0]>X1||wt[1]>X1)&&fa(`${t.layerIds[0]}: Value for "text-size" is >= ${Lm}. Reduce your "text-size".`)),t.addSymbols(t.text,gt,wt,T,g,E,$,e,n,z.lineStartIndex,z.lineLength,le,be,xe,$e,!1);for(const nn of W)Z[nn]=t.text.placedSymbolArray.length-1;return 4*gt.length}function $4(t){for(const e in t)return t[e];return null}function X2(t,e,n,s,u,m,g,E,T,z){let $=g.top,W=g.bottom,Z=g.left,le=g.right;const de=g.collisionPadding;if(de&&(Z-=de[0],$-=de[1],le+=de[2],W+=de[3]),T){const be=new Eo(Z,$),xe=new Eo(le,$),$e=new Eo(Z,W),gt=new Eo(le,W),yt=Gr(T);let wt=new Eo(0,0);z&&(wt=new Eo(z[0],z[1])),be._rotateAround(yt,wt),xe._rotateAround(yt,wt),$e._rotateAround(yt,wt),gt._rotateAround(yt,wt),Z=Math.min(be.x,xe.x,$e.x,gt.x),le=Math.max(be.x,xe.x,$e.x,gt.x),$=Math.min(be.y,xe.y,$e.y,gt.y),W=Math.max(be.y,xe.y,$e.y,gt.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,Z,$,le,W,E,s,u,m),t.length-1}function u2(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Cv(t,e,n,s){const u=t.compareText;if(e in u){const m=u[e];for(let g=m.length-1;g>=0;g--)if(s.dist(m[g])<n)return!0}else u[e]=[];return u[e].push(s),!1}function f4(t,e){const n=t.fovAboveCenter,s=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,u=(t._camera.position[2]*t.worldSize-s)/Math.cos(t._pitch),m=Math.sin(n)*u/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),g=Math.sin(t._pitch)*m+u;return Math.min(1.01*g,u*(1/t._horizonShift))}function zc(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),s=t.x*n,u=(t.x+1)*n,m=t.y*n,g=(t.y+1)*n,E=Tu(s),T=Tu(u),z=$c(m),$=$c(g),W=e.project(E,z),Z=e.project(T,z),le=e.project(T,$),de=e.project(E,$);let be=Math.min(W.x,Z.x,le.x,de.x),xe=Math.min(W.y,Z.y,le.y,de.y),$e=Math.max(W.x,Z.x,le.x,de.x),gt=Math.max(W.y,Z.y,le.y,de.y);const yt=n/16;function wt(Qt,kn,Rn,li,Di,xi){const Ji=(Rn+Di)/2,So=(li+xi)/2,qi=e.project(Tu(Ji),$c(So)),wo=Math.max(0,be-qi.x,xe-qi.y,qi.x-$e,qi.y-gt);be=Math.min(be,qi.x),$e=Math.max($e,qi.x),xe=Math.min(xe,qi.y),gt=Math.max(gt,qi.y),wo>yt&&(wt(Qt,qi,Rn,li,Ji,So),wt(qi,kn,Ji,So,Di,xi))}wt(W,Z,s,m,u,m),wt(Z,le,u,m,u,g),wt(le,de,u,g,s,g),wt(de,W,s,g,s,m),be-=yt,xe-=yt,$e+=yt,gt+=yt;const nn=1/Math.max($e-be,gt-xe);return{scale:nn,x:be*nn,y:xe*nn,x2:$e*nn,y2:gt*nn,projection:e}}function kv(t,{x:e,y:n},s=0){return new Eo(((e-s)*t.scale-t.x)*Xi,(n*t.scale-t.y)*Xi)}const s3=l.ad.identity(new Float32Array(16));class d2{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,n){return{x:0,y:0,z:0}}unproject(e,n){return new oa(0,0)}projectTilePoint(e,n,s){return{x:e,y:n,z:0}}locationPoint(e,n,s=!0){return e._coordinatePoint(e.locationCoordinate(n),s)}pixelsPerMeter(e,n){return El(1,e)*n}pixelSpaceConversion(e,n,s){return 1}farthestPixelDistance(e){return f4(e,e.pixelsPerMeter)}pointCoordinate(e,n,s,u){const m=e.horizonLineFromTop(!1),g=new Eo(n,Math.max(m,s));return e.rayIntersectionCoordinate(e.pointRayIntersection(g,u))}pointCoordinate3D(e,n,s){const u=new Eo(n,s);if(e.elevation)return e.elevation.pointCoordinate(u);{const m=this.pointCoordinate(e,u.x,u.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(e,n){if(e.elevation&&e.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(e,n.x,n.y);const s=e.horizonLineFromTop();return n.y<s}createInversionMatrix(e,n){return s3}createTileMatrix(e,n,s){let u,m,g;const E=s.canonical,T=l.ad.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const z=zc(E,this);u=1,m=z.x+s.wrap*z.scale,g=z.y,l.ad.scale(T,T,[u/z.scale,u/z.scale,e.pixelsPerMeter/n])}else u=n/e.zoomScale(E.z),m=(E.x+Math.pow(2,E.z)*s.wrap)*u,g=E.y*u;return l.ad.translate(T,T,[m,g,0]),l.ad.scale(T,T,[u/Xi,u/Xi,1]),T}upVector(e,n,s){return[0,0,1]}upVectorScale(e,n,s){return{metersToTile:1}}}class Sv extends d2{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[n,s]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(Gr(n));this.n=(u+Math.sin(Gr(s)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,n){const{n:s,c:u,r0:m}=this,g=Gr(e-this.center[0]),E=Gr(n),T=Math.sqrt(u-2*s*Math.sin(E))/s;return{x:T*Math.sin(g*s),y:T*Math.cos(g*s)-m,z:0}}unproject(e,n){const{n:s,c:u,r0:m}=this,g=m+n;let E=Math.atan2(e,Math.abs(g))*Math.sign(g);g*s<0&&(E-=Math.PI*Math.sign(e)*Math.sign(g));const T=Gr(this.center[0])*s;E=go(E,-Math.PI-T,Math.PI-T);const z=zn(rl(E/s)+this.center[0],-180,180),$=Math.asin(zn((u-(e*e+g*g)*s*s)/(2*s),-1,1)),W=zn(rl($),-nc,nc);return new oa(z,W)}}const ag=1.340264,f0=-.081106,K2=893e-6,K1=.003796,Ug=Math.sqrt(3)/2;class Tv extends d2{project(e,n){n=n/180*Math.PI,e=e/180*Math.PI;const s=Math.asin(Ug*Math.sin(n)),u=s*s,m=u*u*u;return{x:.5*(e*Math.cos(s)/(Ug*(ag+3*f0*u+m*(7*K2+9*K1*u)))/Math.PI+.5),y:1-.5*(s*(ag+f0*u+m*(K2+K1*u))/Math.PI+1),z:0}}unproject(e,n){e=(2*e-.5)*Math.PI;let s=n=(2*(1-n)-1)*Math.PI,u=s*s,m=u*u*u;for(let $,W,Z,le=0;le<12&&(W=s*(ag+f0*u+m*(K2+K1*u))-n,Z=ag+3*f0*u+m*(7*K2+9*K1*u),$=W/Z,s=zn(s-$,-Math.PI/3,Math.PI/3),u=s*s,m=u*u*u,!(Math.abs($)<1e-12));++le);const g=Ug*e*(ag+3*f0*u+m*(7*K2+9*K1*u))/Math.cos(s),E=Math.asin(Math.sin(s)/Ug),T=zn(180*g/Math.PI,-180,180),z=zn(180*E/Math.PI,-nc,nc);return new oa(T,z)}}class lg extends d2{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,n){return{x:.5+e/360,y:.5-n/360,z:0}}unproject(e,n){const s=360*(e-.5),u=zn(360*(.5-n),-nc,nc);return new oa(s,u)}}const Af=Math.PI/2;function Y2(t){return Math.tan((Af+t)/2)}class j4 extends d2{constructor(e){super(e),this.center=e.center||[0,30];const[n,s]=this.parallels=e.parallels||[30,30];let u=Gr(n),m=Gr(s);this.southernCenter=u+m<0,this.southernCenter&&(u=-u,m=-m);const g=Math.cos(u),E=Y2(u);this.n=u===m?Math.sin(u):Math.log(g/Math.cos(m))/Math.log(Y2(m)/E),this.f=g*Math.pow(Y2(u),this.n)/this.n}project(e,n){n=Gr(n),this.southernCenter&&(n=-n),e=Gr(e-this.center[0]);const s=1e-6,{n:u,f:m}=this;m>0?n<-Af+s&&(n=-Af+s):n>Af-s&&(n=Af-s);const g=m/Math.pow(Y2(n),u);let E=g*Math.sin(u*e),T=m-g*Math.cos(u*e);return E=.5*(E/Math.PI+.5),T=.5*(T/Math.PI+.5),{x:E,y:this.southernCenter?T:1-T,z:0}}unproject(e,n){e=(2*e-.5)*Math.PI,this.southernCenter&&(n=1-n),n=(2*(1-n)-.5)*Math.PI;const{n:s,f:u}=this,m=u-n,g=Math.sign(m),E=Math.sign(s)*Math.sqrt(e*e+m*m);let T=Math.atan2(e,Math.abs(m))*g;m*s<0&&(T-=Math.PI*Math.sign(e)*g);const z=zn(rl(T/s)+this.center[0],-180,180),$=zn(rl(2*Math.atan(Math.pow(u/E,1/s))-Af),-nc,nc);return new oa(z,this.southernCenter?-$:$)}}class m4 extends d2{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,n){return{x:s0(e),y:a0(n),z:0}}unproject(e,n){const s=Tu(e),u=$c(n);return new oa(s,u)}}const Bm=Gr(nc);class Mv extends d2{project(e,n){const s=(n=Gr(n))*n,u=s*s;return{x:.5*((e=Gr(e))*(.8707-.131979*s+u*(u*(.003971*s-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(n*(1.007226+s*(.015085+u*(.028874*s-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,n){e=(2*e-.5)*Math.PI;let s=n=(2*(1-n)-1)*Math.PI,u=25,m=0,g=s*s;do{g=s*s;const z=g*g;m=(s*(1.007226+g*(.015085+z*(.028874*g-.044475-.005916*z)))-n)/(1.007226+g*(.045255+z*(.259866*g-.311325-.005916*11*z))),s=zn(s-m,-Bm,Bm)}while(Math.abs(m)>1e-6&&--u>0);g=s*s;const E=zn(rl(e/(.8707+g*(g*(g*g*g*(.003971-.001529*g)-.013791)-.131979))),-180,180),T=rl(s);return new oa(E,T)}}const cg=Gr(nc);class Nm extends d2{project(e,n){n=Gr(n),e=Gr(e);const s=Math.cos(n),u=2/Math.PI,m=Math.acos(s*Math.cos(e/2)),g=Math.sin(m)/m,E=.5*(e*u+2*s*Math.sin(e/2)/g)||0,T=.5*(n+Math.sin(n)/g)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(T/Math.PI+1),z:0}}unproject(e,n){let s=e=(2*e-.5)*Math.PI,u=n=(2*(1-n)-1)*Math.PI,m=25;const g=1e-6;let E=0,T=0;do{const z=Math.cos(u),$=Math.sin(u),W=2*$*z,Z=$*$,le=z*z,de=Math.cos(s/2),be=Math.sin(s/2),xe=2*de*be,$e=be*be,gt=1-le*de*de,yt=gt?1/gt:0,wt=gt?Math.acos(z*de)*Math.sqrt(1/gt):0,nn=.5*(2*wt*z*be+2*s/Math.PI)-e,Qt=.5*(wt*$+u)-n,kn=.5*yt*(le*$e+wt*z*de*Z)+1/Math.PI,Rn=yt*(xe*W/4-wt*$*be),li=.125*yt*(W*be-wt*$*le*xe),Di=.5*yt*(Z*de+wt*$e*z)+.5,xi=Rn*li-Di*kn;E=(Qt*Rn-nn*Di)/xi,T=(nn*li-Qt*kn)/xi,s=zn(s-E,-Math.PI,Math.PI),u=zn(u-T,-cg,cg)}while((Math.abs(E)>g||Math.abs(T)>g)&&--m>0);return new oa(rl(s),rl(u))}}class Jp extends d2{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Gr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,n){const{scale:s,cosPhi:u}=this;return{x:Gr(e)*u*s+.5,y:-Math.sin(Gr(n))/u*s+.5,z:0}}unproject(e,n){const{scale:s,cosPhi:u}=this,m=-(n-.5)/s,g=zn(rl((e-.5)/s)/u,-180,180),E=Math.asin(zn(m*u,-1,1)),T=zn(rl(E),-nc,nc);return new oa(g,T)}}class Av extends m4{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,n,s){const u=h1(e,n,s),m=Vp(d1(s));return l._.transformMat4(u,u,m),{x:u[0],y:u[1],z:u[2]}}locationPoint(e,n){const s=xc(n.lat,n.lng),u=l._.normalize([],s),m=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(n),e._centerAltitude):e._centerAltitude,g=El(1,0)*Xi*m;l._.scaleAndAdd(s,s,u,g);const E=l.ad.identity(new Float64Array(16));return l.ad.multiply(E,e.pixelMatrix,e.globeMatrix),l._.transformMat4(s,s,E),new Eo(s[0],s[1])}pixelsPerMeter(e,n){return El(1,0)*n}pixelSpaceConversion(e,n,s){const u=El(1,e)*n,m=Cr(El(1,45)*n,u,s);return this.pixelsPerMeter(e,n)/m}createTileMatrix(e,n,s){const u=$p(d1(s.canonical));return l.ad.multiply(new Float64Array(16),e.globeMatrix,u)}createInversionMatrix(e,n){const{center:s}=e,u=Vp(d1(n));return l.ad.rotateY(u,u,Gr(s.lng)),l.ad.rotateX(u,u,Gr(s.lat)),l.ad.scale(u,u,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(u)}pointCoordinate(e,n,s,u){return Tg(e,n,s,!0)||new jd(0,0)}pointCoordinate3D(e,n,s){const u=this.pointCoordinate(e,n,s,0);return[u.x,u.y,u.z]}isPointAboveHorizon(e,n){return!Tg(e,n.x,n.y,!1)}farthestPixelDistance(e){const n=function(u,m){const g=u.cameraToCenterDistance,E=u._centerAltitude*m,T=u._camera,z=u._camera.forward(),$=l._.add([],l._.scale([],z,-g),[0,0,E]),W=u.worldSize/(2*Math.PI),Z=[0,0,-W],le=u.width/u.height,de=Math.tan(u.fovAboveCenter),be=l._.scale([],T.up(),de),xe=l._.scale([],T.right(),de*le),$e=l._.normalize([],l._.add([],l._.add([],z,be),xe)),gt=[];let yt;if(new qf($,$e).closestPointOnSphere(Z,W,gt)){const wt=l._.add([],gt,Z),nn=l._.sub([],wt,$);yt=Math.cos(u.fovAboveCenter)*l._.length(nn)}else{const wt=l._.sub([],$,Z),nn=l._.sub([],Z,$);l._.normalize(nn,nn);const Qt=l._.length(wt)-W;yt=Math.sqrt(Qt*(Qt+2*W));const kn=Math.acos(yt/(W+Qt))-Math.acos(l._.dot(z,nn));yt*=Math.cos(kn)}return 1.01*yt}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),s=Ih(e.zoom);if(s>0){const u=f4(e,El(1,e.center.lat)*e.worldSize),m=e.worldSize/(2*Math.PI),g=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Cr(n,u+m*(1-Math.cos(g)),Math.pow(s,10))}return n}upVector(e,n,s){return h1(n,s,e,1)}upVectorScale(e){return{metersToTile:fp(Fp(d1(e)))}}}function g4(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new m4(t);case"equirectangular":return new lg(t);case"naturalEarth":return new Mv(t);case"equalEarth":return new Tv(t);case"winkelTripel":return new Nm(t);case"albers":return n?new Jp(t):new Sv(t);case"lambertConformalConic":return n?new Jp(t):new j4(t);case"globe":return new Av(t)}throw new Error(`Invalid projection name: ${t.name}`)}let Hg=(()=>{class t{constructor(n,s,u,m){this.id=t.uniqueIdxCounter,t.uniqueIdxCounter++,this.context=n;const g=n.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||m||s.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){this.id=t.uniqueIdxCounter,t.uniqueIdxCounter++;const s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}return t.uniqueIdxCounter=0,t})();class Fm{constructor(e,n,s){this.func=e,this.mask=n,this.range=s}}Fm.ReadOnly=!1,Fm.ReadWrite=!0,Fm.disabled=new Fm(519,Fm.ReadOnly,[0,1]);class Gg{constructor(e,n,s,u,m,g){this.test=e,this.ref=n,this.mask=s,this.fail=u,this.depthFail=m,this.pass=g}}Gg.disabled=new Gg({func:519,mask:0},0,0,7680,7680,7680);class Uu{constructor(e,n,s,u){this.blendFunction=e,this.blendColor=n,this.mask=s,this.blendEquation=u}}Uu.Replace=[1,0,1,0],Uu.disabled=new Uu(Uu.Replace,Zs.transparent,[!1,!1,!1,!1]),Uu.unblended=new Uu(Uu.Replace,Zs.transparent,[!0,!0,!0,!0]),Uu.alphaBlended=new Uu([1,771,1,771],Zs.transparent,[!0,!0,!0,!0]),Uu.alphaBlendedNonPremultiplied=new Uu([770,771,770,771],Zs.transparent,[!0,!0,!0,!0]),Uu.multiply=new Uu([774,0,774,0],Zs.transparent,[!0,!0,!0,!0]);class Y1{constructor(e,n,s){this.enable=e,this.mode=n,this.frontFace=s}}Y1.disabled=new Y1(!1,1029,2305),Y1.backCCW=new Y1(!0,1029,2305),Y1.backCW=new Y1(!0,1029,2304),Y1.frontCW=new Y1(!0,1028,2304),Y1.frontCCW=new Y1(!0,1028,2305);const U4=Xr.types,v4=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function U0(t,e,n,s,u,m,g,E,T,z,$,W,Z){const le=E?Math.min(X1,Math.round(E[0])):0,de=E?Math.min(X1,Math.round(E[1])):0;t.emplaceBack(e,n,Math.round(32*s),Math.round(32*u),m,g,(le<<1)+(T?1:0),de,16*z,16*$,256*W,256*Z)}function Wg(t,e,n){t.emplaceBack(e,n)}function qg(t,e,n,s,u,m,g){t.emplaceBack(e,n,s,u,m,g)}function h2(t,e,n,s,u){t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u)}function X(t){for(const e of t.sections)if(Ne(e.text))return!0;return!1}class Le{constructor(e){this.layoutVertexArray=new L0,this.indexArray=new bc,this.programConfigurations=e,this.segments=new ul,this.dynamicLayoutVertexArray=new oh,this.opacityVertexArray=new n1,this.occlusionQueryOpacityVertexArray=new yc,this.placedSymbolArray=new B0,this.iconTransitioningVertexArray=new t0,this.globeExtVertexArray=new b1,this.zOffsetVertexArray=new yc}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length&&0===this.iconTransitioningVertexArray.length}upload(e,n,s,u,m){this.isEmpty()||(s&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,c4.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,i2.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,v4,!0),this.occlusionQueryOpacityVertexBuffer=e.createVertexBuffer(this.occlusionQueryOpacityVertexArray,lh.members,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=e.createVertexBuffer(this.iconTransitioningVertexArray,Xp.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,z4.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,O4.members,!0)),this.opacityVertexBuffer.itemSize=1),(s||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.occlusionQueryOpacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}lt(Le,"SymbolBuffers");class ct{constructor(e,n,s){this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new s,this.segments=new ul,this.collisionVertexArray=new Vd,this.collisionVertexArrayExt=new oh}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,bv.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,tg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}lt(ct,"CollisionBuffers");class sn{constructor(e){this.queries=new Map,this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.lut=e.lut,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(g=>g.fqid),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=l.ad.identity([]),this.placementViewportMatrix=l.ad.identity([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rm(this.zoom,n["text-size"]),this.iconSizeData=Rm(this.zoom,n["icon-size"]);const s=this.layers[0].layout,u=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==m&&void 0!==u.constantOr(1),this.sortFeaturesByY=("viewport-y"===m||"auto"===m&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=s.get("text-writing-mode").map(g=>Ii[g]),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=e.sourceID,this.projection=e.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=s.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new Le(new I1(this.layers,{zoom:this.zoom,lut:this.lut},e=>/^text/.test(e))),this.icon=new Le(new I1(this.layers,{zoom:this.zoom,lut:this.lut},e=>/^icon/.test(e))),this.glyphOffsetArray=new op,this.lineVertexArray=new Tp,this.symbolInstances=new rm}calculateGlyphDependencies(e,n,s,u,m){for(let g=0;g<e.length;g++){const E=e.codePointAt(g);if(void 0===E)break;if(n[E]=!0,u&&m&&E<=65535){const T=D[e.charAt(g)];T&&(n[T.charCodeAt(0)]=!0)}}}updateFootprints(e,n){}updateReplacement(e,n){if(n.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=n.updateTime;const s=n.getReplacementRegionsForTile(e.toUnwrapped(),!0);return!qp(this.activeReplacements,s)&&(this.activeReplacements=s,!0)}populate(e,n,s,u){const m=this.layers[0],g=m.layout,E="globe"===this.projection.name,T=g.get("text-font"),z=g.get("text-field"),$=g.get("icon-image"),W=("constant"!==z.value.kind||z.value.value instanceof ja&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&("constant"!==T.value.kind||T.value.value.length>0),Z="constant"!==$.value.kind||!!$.value.value||Object.keys($.parameters).length>0,le=g.get("symbol-sort-key");if(this.features=[],!W&&!Z)return;const de=n.iconDependencies,be=n.glyphDependencies,xe=n.availableImages,$e=new os(this.zoom);for(const{feature:gt,id:yt,index:wt,sourceLayerIndex:nn}of e){const Qt=m._featureFilter.needGeometry,kn=F0(gt,Qt);if(!m._featureFilter.filter($e,kn,s))continue;if(Qt||(kn.geometry=u1(gt,s,u)),E&&1!==gt.type&&s.z<=5){const xi=kn.geometry,Ji=.98078528056,So=(qi,wo)=>{const zi=h1(qi.x,qi.y,s,1),bo=h1(wo.x,wo.y,s,1);return l._.dot(zi,bo)<Ji};for(let qi=0;qi<xi.length;qi++)xi[qi]=wh(xi[qi],So)}let Rn,li;if(W){const xi=m.getValueAndResolveTokens("text-field",kn,s,xe),Ji=ja.factory(xi);X(Ji)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===is()||this.hasRTLText&&Ds.isParsed())&&(Rn=k(Ji,m,kn))}if(Z){const xi=m.getValueAndResolveTokens("icon-image",kn,s,xe);li=xi instanceof cc?xi:cc.fromString(xi)}if(!Rn&&!li)continue;const Di=this.sortFeaturesByKey?le.evaluate(kn,{},s):void 0;if(this.features.push({id:yt,text:Rn,icon:li,index:wt,sourceLayerIndex:nn,geometry:kn.geometry,properties:gt.properties,type:U4[gt.type],sortKey:Di}),li&&(de[li.namePrimary]=!0,li.nameSecondary&&(de[li.nameSecondary]=!0)),Rn){const xi=T.evaluate(kn,{},s).join(","),Ji="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ii.vertical)>=0;for(const So of Rn.sections)if(So.image)de[So.image.namePrimary]=!0;else{const qi=bi(Rn.toString()),wo=So.fontStack||xi,zi=be[wo]=be[wo]||{};this.calculateGlyphDependencies(So.text,zi,Ji,this.allowVerticalPlacement,qi)}}}"line"===g.get("symbol-placement")&&(this.features=function(gt){const yt={},wt={},nn=[];let Qt=0;function kn(xi){nn.push(gt[xi]),Qt++}function Rn(xi,Ji,So){const qi=wt[xi];return delete wt[xi],wt[Ji]=qi,nn[qi].geometry[0].pop(),nn[qi].geometry[0]=nn[qi].geometry[0].concat(So[0]),qi}function li(xi,Ji,So){const qi=yt[Ji];return delete yt[Ji],yt[xi]=qi,nn[qi].geometry[0].shift(),nn[qi].geometry[0]=So[0].concat(nn[qi].geometry[0]),qi}function Di(xi,Ji,So){const qi=So?Ji[0][Ji[0].length-1]:Ji[0][0];return`${xi}:${qi.x}:${qi.y}`}for(let xi=0;xi<gt.length;xi++){const Ji=gt[xi],So=Ji.geometry,qi=Ji.text?Ji.text.toString():null;if(!qi){kn(xi);continue}const wo=Di(qi,So),zi=Di(qi,So,!0);if(wo in wt&&zi in yt&&wt[wo]!==yt[zi]){const bo=li(wo,zi,So),Ro=Rn(wo,zi,nn[bo].geometry);delete yt[wo],delete wt[zi],wt[Di(qi,nn[Ro].geometry,!0)]=Ro,nn[bo].geometry=null}else wo in wt?Rn(wo,zi,So):zi in yt?li(wo,zi,So):(kn(xi),yt[wo]=Qt-1,wt[zi]=Qt-1)}return nn.filter(xi=>xi.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((gt,yt)=>gt.sortKey-yt.sortKey)}update(e,n,s,u,m){const g=0!==Object.keys(e).length;if(g&&!this.stateDependentLayers.length)return;const E=g?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(e,n,E,s,u,m),this.icon.programConfigurations.updatePaintArrays(e,n,E,s,u,m)}updateOcclusionOpacities(e,n,s){if(!n.useOcclusionQueries)return!1;const u=this;if("globe"===u.projection.name)return!1;let m=!1;u.hasTextData()&&(m=m||0!==u.text.occlusionQueryOpacityVertexArray.length),u.hasIconData()&&(m=m||0!==u.icon.occlusionQueryOpacityVertexArray.length);const g=u.layers[0].paint,E=g.get("icon-occlusion-opacity").constantOr(0),T=g.get("text-occlusion-opacity").constantOr(0);if(!u.layers[0].hasInitialOcclusionOpacityProperties||1===E&&1===T)return!1;let z=!m;for(let le=0;le<u.symbolInstances.length;le++){const de=u.symbolInstances.get(le),be=de.occlusionOpacity;de.occlusionOpacity+=(de.occlusionState>.5?1:-1)*n.fadeSpeed*s*.001,de.occlusionOpacity=zn(de.occlusionOpacity,0,1),z=z||de.occlusionOpacity!==be}if(!z)return!1;let $=0,W=0;const Z=(le,de,be,xe)=>{let $e=0,gt=0;be?($e=W,W+=xe,gt=W):($e=$,$+=xe,gt=$),gt>de.occlusionQueryOpacityVertexArray.length&&de.occlusionQueryOpacityVertexArray.resize(gt);const yt=le.occlusionOpacity;for(let wt=0;wt<xe;wt++)de.occlusionQueryOpacityVertexArray.emplace(wt+$e,yt)};for(let le=0;le<u.symbolInstances.length;le++){const de=u.symbolInstances.get(le),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:xe,numIconVertices:$e}=de,gt=$e>0;if((be>0||xe>0)&&(Z(de,u.text,!1,be),Z(de,u.text,!1,xe)),gt){const{placedIconSymbolIndex:yt,verticalPlacedIconSymbolIndex:wt}=de;yt>=0&&Z(de,u.icon,!0,$e),wt>=0&&Z(de,u.icon,!0,de.numVerticalIconVertices)}}return u.hasTextData()&&u.text.occlusionQueryOpacityVertexBuffer&&(u.text.occlusionQueryOpacityVertexBuffer.length<u.text.occlusionQueryOpacityVertexArray.length?u.text.occlusionQueryOpacityVertexBuffer=e.createVertexBuffer(u.text.occlusionQueryOpacityVertexArray,lh.members,!0):u.text.occlusionQueryOpacityVertexBuffer.updateData(u.text.occlusionQueryOpacityVertexArray)),u.hasIconData()&&u.icon.occlusionQueryOpacityVertexBuffer&&(u.icon.occlusionQueryOpacityVertexBuffer.length<u.icon.occlusionQueryOpacityVertexArray.length?u.icon.occlusionQueryOpacityVertexBuffer=e.createVertexBuffer(u.icon.occlusionQueryOpacityVertexArray,lh.members,!0):u.icon.occlusionQueryOpacityVertexBuffer.updateData(u.icon.occlusionQueryOpacityVertexArray)),!0}updateZOffset(){const e=(m,g,E)=>{s+=g,s>m.length&&m.resize(s);for(let T=-g;T<0;T++)m.emplace(T+s,E)},n=(m,g,E)=>{u+=g,u>m.length&&m.resize(u);for(let T=-g;T<0;T++)m.emplace(T+u,E)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let s=0,u=0;for(let m=0;m<this.symbolInstances.length;m++){const g=this.symbolInstances.get(m),{numHorizontalGlyphVertices:E,numVerticalGlyphVertices:T,numIconVertices:z}=g,$=g.zOffset,W=z>0;if((E>0||T>0)&&(e(this.text.zOffsetVertexArray,E,$),e(this.text.zOffsetVertexArray,T,$)),W){const{placedIconSymbolIndex:Z,verticalPlacedIconSymbolIndex:le}=g;Z>=0&&n(this.icon.zOffsetVertexArray,z,$),le>=0&&n(this.icon.zOffsetVertexArray,g.numVerticalIconVertices,$)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=g4(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData();for(const e of this.queries.values())e.destroy()}addToLineVertexArray(e,n){const s=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:u,y:m}of n)this.lineVertexArray.emplaceBack(u,m);return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(e,n,s,u,m,g,E,T,z,$,W,Z,le,de,be,xe){const $e=e.indexArray,gt=e.layoutVertexArray,yt=e.globeExtVertexArray,wt=e.segments.prepareSegment(4*n.length,gt,$e,this.canOverlap?g.sortKey:void 0),nn=this.glyphOffsetArray.length,Qt=wt.vertexLength,kn=this.allowVerticalPlacement&&E===Ii.vertical?Math.PI/2:0,Rn=g.text&&g.text.sections;for(let Di=0;Di<n.length;Di++){const{tl:xi,tr:Ji,bl:So,br:qi,texPrimary:wo,texSecondary:zi,pixelOffsetTL:bo,pixelOffsetBR:Ro,minFontScaleX:Co,minFontScaleY:lr,glyphOffset:To,isSDF:Fo,sectionIndex:Yr}=n[Di],Br=wt.vertexLength,Rr=To[1];if(U0(gt,z.x,z.y,xi.x,Rr+xi.y,wo.x,wo.y,s,Fo,bo.x,bo.y,Co,lr),U0(gt,z.x,z.y,Ji.x,Rr+Ji.y,wo.x+wo.w,wo.y,s,Fo,Ro.x,bo.y,Co,lr),U0(gt,z.x,z.y,So.x,Rr+So.y,wo.x,wo.y+wo.h,s,Fo,bo.x,Ro.y,Co,lr),U0(gt,z.x,z.y,qi.x,Rr+qi.y,wo.x+wo.w,wo.y+wo.h,s,Fo,Ro.x,Ro.y,Co,lr),T){const{x:Lo,y:Zr,z:ta}=T.anchor,[Ss,da,ra]=T.up;qg(yt,Lo,Zr,ta,Ss,da,ra),qg(yt,Lo,Zr,ta,Ss,da,ra),qg(yt,Lo,Zr,ta,Ss,da,ra),qg(yt,Lo,Zr,ta,Ss,da,ra),h2(e.dynamicLayoutVertexArray,Lo,Zr,ta,kn)}else h2(e.dynamicLayoutVertexArray,z.x,z.y,z.z,kn);if(xe){const Lo=zi||wo;Wg(e.iconTransitioningVertexArray,Lo.x,Lo.y),Wg(e.iconTransitioningVertexArray,Lo.x+Lo.w,Lo.y),Wg(e.iconTransitioningVertexArray,Lo.x,Lo.y+Lo.h),Wg(e.iconTransitioningVertexArray,Lo.x+Lo.w,Lo.y+Lo.h)}$e.emplaceBack(Br,Br+1,Br+2),$e.emplaceBack(Br+1,Br+2,Br+3),wt.vertexLength+=4,wt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(To[0]),Di!==n.length-1&&Yr===n[Di+1].sectionIndex||e.programConfigurations.populatePaintArrays(gt.length,g,g.index,{},le,de,be,Rn&&Rn[Yr])}const li=T?T.anchor:z;e.placedSymbolArray.emplaceBack(li.x,li.y,li.z,z.x,z.y,nn,this.glyphOffsetArray.length-nn,Qt,$,W,z.segment,s?s[0]:0,s?s[1]:0,u[0],u[1],E,0,!1,0,Z,0)}_commitLayoutVertex(e,n,s,u,m,g,E){e.emplaceBack(n,s,u,m,g,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(e,n,s,u,m,g,E){const T=s.segments.prepareSegment(4,s.layoutVertexArray,s.indexArray),z=T.vertexLength,$=E.tileAnchorX,W=E.tileAnchorY;for(let le=0;le<4;le++)s.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(s.collisionVertexArrayExt,n,e.padding,E.zOffset),this._commitLayoutVertex(s.layoutVertexArray,u,m,g,$,W,new Eo(e.x1,e.y1)),this._commitLayoutVertex(s.layoutVertexArray,u,m,g,$,W,new Eo(e.x2,e.y1)),this._commitLayoutVertex(s.layoutVertexArray,u,m,g,$,W,new Eo(e.x2,e.y2)),this._commitLayoutVertex(s.layoutVertexArray,u,m,g,$,W,new Eo(e.x1,e.y2)),T.vertexLength+=4;const Z=s.indexArray;Z.emplaceBack(z,z+1),Z.emplaceBack(z+1,z+2),Z.emplaceBack(z+2,z+3),Z.emplaceBack(z+3,z),T.primitiveLength+=4}_addTextDebugCollisionBoxes(e,n,s,u,m,g){for(let E=u;E<m;E++){const T=s.get(E),z=this.getSymbolInstanceTextSize(e,g,n,E);this._addCollisionDebugVertices(T,z,this.textCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,g)}}_addIconDebugCollisionBoxes(e,n,s,u,m,g){for(let E=u;E<m;E++){const T=s.get(E),z=this.getSymbolInstanceIconSize(e,n,g.placedIconSymbolIndex);this._addCollisionDebugVertices(T,z,this.iconCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,g)}}generateCollisionDebugBuffers(e,n){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ct(L1,ng.members,t0),this.iconCollisionBox=new ct(L1,ng.members,t0);const s=B(this.iconSizeData,e),u=B(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const g=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(u,e,n,g.textBoxStartIndex,g.textBoxEndIndex,g),this._addTextDebugCollisionBoxes(u,e,n,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._addIconDebugCollisionBoxes(s,e,n,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._addIconDebugCollisionBoxes(s,e,n,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}}getSymbolInstanceTextSize(e,n,s,u){const m=this.text.placedSymbolArray.get(n.rightJustifiedTextSymbolIndex>=0?n.rightJustifiedTextSymbolIndex:n.centerJustifiedTextSymbolIndex>=0?n.centerJustifiedTextSymbolIndex:n.leftJustifiedTextSymbolIndex>=0?n.leftJustifiedTextSymbolIndex:n.verticalPlacedTextSymbolIndex>=0?n.verticalPlacedTextSymbolIndex:u),g=zm(this.textSizeData,e,m)/Mu;return this.tilePixelRatio*g}getSymbolInstanceIconSize(e,n,s){const u=this.icon.placedSymbolArray.get(s),m=zm(this.iconSizeData,e,u);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(e,n,s,u){e.emplaceBack(n,-s,-s,u),e.emplaceBack(n,s,-s,u),e.emplaceBack(n,s,s,u),e.emplaceBack(n,-s,s,u)}_updateTextDebugCollisionBoxes(e,n,s,u,m,g){for(let E=u;E<m;E++){const T=s.get(E),z=this.getSymbolInstanceTextSize(e,g,n,E);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,z,T.padding,g.zOffset)}}_updateIconDebugCollisionBoxes(e,n,s,u,m,g){for(let E=u;E<m;E++){const T=s.get(E),z=this.getSymbolInstanceIconSize(e,n,g.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,z,T.padding,g.zOffset)}}updateCollisionDebugBuffers(e,n){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const s=B(this.iconSizeData,e),u=B(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const g=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(u,e,n,g.textBoxStartIndex,g.textBoxEndIndex,g),this._updateTextDebugCollisionBoxes(u,e,n,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._updateIconDebugCollisionBoxes(s,e,n,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._updateIconDebugCollisionBoxes(s,e,n,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,n,s,u,m,g,E,T,z){const $={};if(n<s){const{x1:W,y1:Z,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:$e,projectedAnchorZ:gt,tileAnchorX:yt,tileAnchorY:wt,featureIndex:nn}=e.get(n);$.textBox={x1:W,y1:Z,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:$e,projectedAnchorZ:gt,tileAnchorX:yt,tileAnchorY:wt},$.textFeatureIndex=nn}if(u<m){const{x1:W,y1:Z,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:$e,projectedAnchorZ:gt,tileAnchorX:yt,tileAnchorY:wt,featureIndex:nn}=e.get(u);$.verticalTextBox={x1:W,y1:Z,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:$e,projectedAnchorZ:gt,tileAnchorX:yt,tileAnchorY:wt},$.verticalTextFeatureIndex=nn}if(g<E){const{x1:W,y1:Z,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:$e,projectedAnchorZ:gt,tileAnchorX:yt,tileAnchorY:wt,featureIndex:nn}=e.get(g);$.iconBox={x1:W,y1:Z,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:$e,projectedAnchorZ:gt,tileAnchorX:yt,tileAnchorY:wt},$.iconFeatureIndex=nn}if(T<z){const{x1:W,y1:Z,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:$e,projectedAnchorZ:gt,tileAnchorX:yt,tileAnchorY:wt,featureIndex:nn}=e.get(T);$.verticalIconBox={x1:W,y1:Z,x2:le,y2:de,padding:be,projectedAnchorX:xe,projectedAnchorY:$e,projectedAnchorZ:gt,tileAnchorX:yt,tileAnchorY:wt},$.verticalIconFeatureIndex=nn}return $}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(e,n){const s=e.placedSymbolArray.get(n),u=s.vertexStartIndex+4*s.numGlyphs;for(let m=s.vertexStartIndex;m<u;m+=4)e.indexArray.emplaceBack(m,m+1,m+2),e.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const n=Math.sin(e),s=Math.cos(e),u=[],m=[],g=[];for(let E=0;E<this.symbolInstances.length;++E){g.push(E);const T=this.symbolInstances.get(E);u.push(0|Math.round(n*T.tileAnchorX+s*T.tileAnchorY)),m.push(T.featureIndex)}return g.sort((E,T)=>u[E]-u[T]||m[T]-m[E]),g}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let e=0;e<this.symbolInstances.length;++e)this.symbolInstanceIndexesSortedZOffset.push(e)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((e,n)=>this.symbolInstances.get(n).zOffset-this.symbolInstances.get(e).zOffset)}addToSortKeyRanges(e,n){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===n?s.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const s=this.symbolInstances.get(n);this.featureSortOrder.push(s.featureIndex);const{rightJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:g,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:T,verticalPlacedIconSymbolIndex:z}=s;u>=0&&this.addIndicesForPlacedSymbol(this.text,u),m>=0&&m!==u&&this.addIndicesForPlacedSymbol(this.text,m),g>=0&&g!==m&&g!==u&&this.addIndicesForPlacedSymbol(this.text,g),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T),z>=0&&this.addIndicesForPlacedSymbol(this.icon,z)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}lt(sn,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sn.addDynamicAttributes=h2;class Ui{constructor(e,n,s,u){this.context=e,this.format=s,this.texture=e.gl.createTexture(),this.update(n,u)}update(e,n,s){const{width:u,height:m}=e,{context:g}=this,{gl:E}=g;if(E.bindTexture(E.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!n||!1!==n.premultiply)),this.useMipmap=!(!n||!n.useMipmap),s||this.size&&this.size[0]===u&&this.size[1]===m){const{x:T,y:z}=s||{x:0,y:0};if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap)E.texSubImage2D(E.TEXTURE_2D,0,T,z,E.RGBA,E.UNSIGNED_BYTE,e);else{let $=this.format,W=E.UNSIGNED_BYTE;this.format===E.R32F&&($=E.RED,W=E.FLOAT),E.texSubImage2D(E.TEXTURE_2D,0,T,z,u,m,$,W,e.data)}}else if(this.size=[u,m],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap){let T=this.format;this.format===E.R8&&(T=E.RED),E.texImage2D(E.TEXTURE_2D,0,this.format,T,E.UNSIGNED_BYTE,e)}else{let T=this.format,z=this.format,$=E.UNSIGNED_BYTE,W=!1;this.format===E.DEPTH_COMPONENT&&(T=E.DEPTH_COMPONENT16,$=E.UNSIGNED_SHORT),this.format===E.DEPTH_STENCIL&&(T=E.DEPTH24_STENCIL8,$=E.UNSIGNED_INT_24_8,W=!0),this.format===E.R8&&(z=E.RED),this.format===E.R32F&&($=E.FLOAT,z=E.RED),!this.useMipmap&&W?E.texStorage2D(E.TEXTURE_2D,1,T,u,m):E.texImage2D(E.TEXTURE_2D,0,T,u,m,0,z,$,e.data)}this.useMipmap&&E.generateMipmap(E.TEXTURE_2D)}bind(e,n,s=!1){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),e!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,e),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!s?e===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),n!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,n),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,n),this.wrapS=n)}bindExtraParam(e,n,s,u){const{context:m}=this,{gl:g}=m;g.bindTexture(g.TEXTURE_2D,this.texture),n!==this.magFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,n),this.magFilter=n),e!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?e===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),s!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,s),this.wrapS=s),u!==this.wrapT&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrapT=u)}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Ao{constructor(e,n){this.context=e,this.texture=n}bind(e,n){const{context:s}=this,{gl:u}=s;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.minFilter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,e),this.minFilter=e),n!==this.wrapS&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,n),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,n),this.wrapS=n)}}const od=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,n=0,s=0,u=0,m=0,g=0,E=0;for(1&e?u=m=g=32:n=s=E=32;(e>>=1)>1;){const z=n+u>>1,$=s+m>>1;1&e?(u=n,m=s,n=g,s=E):(n=u,s=m,u=g,m=E),g=z,E=$}const T=4*t;od[T+0]=n,od[T+1]=s,od[T+2]=u,od[T+3]=m}const il=new Uint16Array(2178),rd=new Uint8Array(1089),Wd=new Uint16Array(1089);function Q2(t){return 0===t?-.03125:32===t?.03125:0}var Nh=wa([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),J2=wa([{name:"a_index",type:"Int16",components:1}]);const em={type:2,extent:Xi,loadGeometry:()=>[[new Eo(0,0),new Eo(Xi+1,0),new Eo(Xi+1,Xi+1),new Eo(0,Xi+1),new Eo(0,0)]]};class Dv{constructor(e,n,s,u,m){this.tileID=e,this.uid=cr(),this.uses=0,this.tileSize=n,this.tileZoom=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,u&&u.style&&(this._lastUpdatedBrightness=u.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const n=e+this.timeAdded;n<mi.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=zc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,n,s){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,m){const g={};if(!m)return g;for(const E of u){const T=E.layerIds.map(z=>m.getLayer(z)).filter(Boolean);if(0!==T.length){E.layers=T,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(z=>T.filter($=>$.id===z)[0]));for(const z of T)g[z.fqid]=E}}return g}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const m=this.buckets[u];if(m instanceof sn){if(this.hasSymbolBuckets=!0,!s)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const m=this.buckets[u];if(m instanceof sn&&m.hasRTLText){this.hasRTLText=!0,Ds.isLoading()||Ds.isLoaded()||"deferred"!==is()||tl();break}}this.queryPadding=0;for(const u in this.buckets){const m=this.buckets[u],g=n.style.getOwnLayer(u);if(!g)continue;const E=g.queryRadius(m);this.queryPadding=Math.max(this.queryPadding,E)}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas),this._lastUpdatedBrightness=e.brightness}else this.collisionBoxArray=new s1}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.fqid]}upload(e){for(const u in this.buckets){const m=this.buckets[u];m.uploadPending()&&m.upload(e)}const n=e.gl,s=this.imageAtlas;if(s&&!s.uploaded){const u=!!Object.keys(s.patternPositions).length;this.imageAtlasTexture=new Ui(e,s.image,n.RGBA,{useMipmap:u}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ui(e,this.glyphAtlasImage,n.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ui(e,this.lineAtlas.image,n.R8),this.lineAtlas.uploaded=!0)}prepare(e,n,s){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture,s),!n||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const u=n.style.getBrightness();(this._lastUpdatedBrightness||u)&&(this._lastUpdatedBrightness&&u&&Math.abs(this._lastUpdatedBrightness-u)<.001||(this._lastUpdatedBrightness=u,this.updateBuckets(void 0,n)))}queryRenderedFeatures(e,n,s,u,m,g,E,T){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:E,transform:g,params:m,tileTransform:this.tileTransform},e,n,s):{}}querySourceFeatures(e,n){const s=this.latestFeatureIndex;if(!s||!s.rawTileData)return;const u=s.loadVTLayers(),m=n?n.sourceLayer:"",g=u._geojsonTileLayer||u[m];if(!g)return;const E=Lu(n&&n.filter),{z:T,x:z,y:$}=this.tileID.canonical,W={z:T,x:z,y:$};for(let Z=0;Z<g.length;Z++){const le=g.feature(Z);if(E.needGeometry){const xe=F0(le,!0);if(!E.filter(new os(this.tileID.overscaledZ),xe,this.tileID.canonical))continue}else if(!E.filter(new os(this.tileID.overscaledZ),le))continue;const de=s.getId(le,m),be=new rg(le,T,z,$,de);be.tile=W,e.push(be)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}bucketsLoaded(){for(const e in this.buckets)if(this.buckets[e].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const s=Wu(e.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const s=Date.now();let u=!1;if(this.expirationTime>s)u=!1;else if(n)if(this.expirationTime<n)u=!0;else{const m=this.expirationTime-n;m?this.expirationTime=s+Math.max(m,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,n){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&n&&this.updateBuckets(e,n)}updateBuckets(e,n){if(!this.latestFeatureIndex)return;const s=this.latestFeatureIndex.loadVTLayers(),u=n.style.listImages(),m=n.style.getBrightness();for(const g in this.buckets){if(!n.style.hasLayer(g))continue;const E=this.buckets[g],T=E.layers[0].sourceLayer||"_geojsonTileLayer",z=s[T];let $={};if(e&&($=e[T],!z||!$||0===Object.keys($).length))continue;if(E.update($,z,u,this.imageAtlas&&this.imageAtlas.patternPositions||{},m),E instanceof j2||E instanceof ze){const Z=n.style.getOwnSourceCache(E.layers[0].source);n._terrain&&n._terrain.enabled&&Z&&E.programConfigurations.needsUpload&&n._terrain._clearRenderCacheForTile(Z.id,this.tileID)}const W=n&&n.style&&n.style.getOwnLayer(g);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(E)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<mi.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=mi.now()+e}setTexture(e,n){const s=n.context,u=s.gl;this.texture=this.texture||n.getTileTexture(e.width),this.texture&&this.texture instanceof Ui?this.texture.update(e,{useMipmap:!0}):(this.texture=new Ui(s,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE))}setDependencies(e,n){const s={};for(const u of n)s[u]=!0;this.dependencies[e]=s}hasDependency(e,n){for(const s of e){const u=this.dependencies[s];if(u)for(const m of n)if(u[m])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,n){if(!n||"mercator"===n.name||this._tileDebugBuffer)return;const s=u1(em,this.tileID.canonical,this.tileTransform)[0],u=new Eu,m=new o1;for(let g=0;g<s.length;g++){const{x:E,y:T}=s[g];u.emplaceBack(E,T),m.emplaceBack(g)}m.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(m),this._tileDebugBuffer=e.createVertexBuffer(u,Cd.members),this._tileDebugSegments=ul.simpleSegment(0,0,u.length,m.length)}_makeTileBoundsBuffers(e,n){if(this._tileBoundsBuffer||!n||"mercator"===n.name)return;const s=u1(em,this.tileID.canonical,this.tileTransform)[0];let u,m;if(this.isRaster){const g=function(E,T){const z=zc(E,T),$=Math.pow(2,E.z);for(let xe=0;xe<33;xe++)for(let $e=0;$e<33;$e++){const gt=Tu((E.x+($e+Q2($e))/32)/$),yt=$c((E.y+(xe+Q2(xe))/32)/$),wt=T.project(gt,yt),nn=33*xe+$e;il[2*nn+0]=Math.round((wt.x*z.scale-z.x)*Xi),il[2*nn+1]=Math.round((wt.y*z.scale-z.y)*Xi)}rd.fill(0),Wd.fill(0);for(let xe=2045;xe>=0;xe--){const $e=4*xe,gt=od[$e+0],yt=od[$e+1],wt=od[$e+2],nn=od[$e+3],Qt=gt+wt>>1,kn=yt+nn>>1,Rn=Qt+kn-yt,li=kn+gt-Qt,Di=33*yt+gt,xi=33*nn+wt,Ji=33*kn+Qt,So=Math.hypot((il[2*Di+0]+il[2*xi+0])/2-il[2*Ji+0],(il[2*Di+1]+il[2*xi+1])/2-il[2*Ji+1])>=16;rd[Ji]=rd[Ji]||(So?1:0),xe<1022&&(rd[Ji]=rd[Ji]||rd[33*(yt+li>>1)+(gt+Rn>>1)]||rd[33*(nn+li>>1)+(wt+Rn>>1)])}const W=new e0,Z=new bc;let le=0;function de(xe,$e){const gt=33*$e+xe;return 0===Wd[gt]&&(W.emplaceBack(il[2*gt+0],il[2*gt+1],xe*Xi/32,$e*Xi/32),Wd[gt]=++le),Wd[gt]-1}function be(xe,$e,gt,yt,wt,nn){const Qt=xe+gt>>1,kn=$e+yt>>1;if(Math.abs(xe-wt)+Math.abs($e-nn)>1&&rd[33*kn+Qt])be(wt,nn,xe,$e,Qt,kn),be(gt,yt,wt,nn,Qt,kn);else{const Rn=de(xe,$e),li=de(gt,yt),Di=de(wt,nn);Z.emplaceBack(Rn,li,Di)}}return be(0,0,32,32,32,0),be(32,32,0,0,0,32),{vertices:W,indices:Z}}(this.tileID.canonical,n);u=g.vertices,m=g.indices}else{u=new e0,m=new bc;for(const{x:E,y:T}of s)u.emplaceBack(E,T,0,0);const g=$0(u.int16,void 0,4);for(let E=0;E<g.length;E+=3)m.emplaceBack(g[E],g[E+1],g[E+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,Nh.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(m),this._tileBoundsSegments=ul.simpleSegment(0,0,u.length,m.length)}_makeGlobeTileDebugBuffers(e,n){const s=n.projection;if(!s||"globe"!==s.name||n.freezeTileCoverage)return;const u=this.tileID.canonical,m=Vp(Bp(u,n)),g=Ih(n.zoom);let E;g>0&&(E=l.ad.invert(new Float64Array(16),n.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,u,n,m,E,g),this._makeGlobeTileDebugTextBuffer(e,u,n,m,E,g)}_globePoint(e,n,s,u,m,g,E){let T=h1(e,n,s);if(g){const z=1<<s.z,$=s0(u.center.lng),W=a0(u.center.lat),Z=(s.x+.5)/z-$;let le=0;Z>.5?le=-1:Z<-.5&&(le=1);let de=(e/Xi+s.x)/z+le,be=(n/Xi+s.y)/z;de=(de-$)*u._pixelsPerMercatorPixel+$,be=(be-W)*u._pixelsPerMercatorPixel+W;const xe=[de*u.worldSize,be*u.worldSize,0];l._.transformMat4(xe,xe,g),T=Ud(T,xe,E)}return l._.transformMat4(T,T,m)}_makeGlobeTileDebugBorderBuffer(e,n,s,u,m,g){const E=new Eu,T=new o1,z=new sf,$=(Z,le,de,be,xe)=>{const $e=(de-Z)/(xe-1),gt=(be-le)/(xe-1),yt=E.length;for(let wt=0;wt<xe;wt++){const nn=Z+wt*$e,Qt=le+wt*gt;E.emplaceBack(nn,Qt);const kn=this._globePoint(nn,Qt,n,s,u,m,g);z.emplaceBack(kn[0],kn[1],kn[2]),T.emplaceBack(yt+wt)}},W=Xi;$(0,0,W,0,16),$(W,0,W,W,16),$(W,W,0,W,16),$(0,W,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(T),this._tileDebugBuffer=e.createVertexBuffer(E,Cd.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(z,S2.members),this._tileDebugSegments=ul.simpleSegment(0,0,E.length,T.length)}_makeGlobeTileDebugTextBuffer(e,n,s,u,m,g){const E=Xi/4,T=new Eu,z=new bc,$=new sf,W=25;z.reserve(32),T.reserve(W),$.reserve(W);const Z=(le,de)=>W*le+de;for(let le=0;le<W;le++){const de=le*E;for(let be=0;be<W;be++){const xe=be*E;T.emplaceBack(xe,de);const $e=this._globePoint(xe,de,n,s,u,m,g);$.emplaceBack($e[0],$e[1],$e[2])}}for(let le=0;le<4;le++)for(let de=0;de<4;de++){const be=Z(le,de),xe=Z(le,de+1),$e=Z(le+1,de),gt=Z(le+1,de+1);z.emplaceBack(be,xe,$e),z.emplaceBack($e,xe,gt)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(z),this._tileDebugTextBuffer=e.createVertexBuffer(T,Cd.members),this._globeTileDebugTextBuffer=e.createVertexBuffer($,S2.members),this._tileDebugTextSegments=ul.simpleSegment(0,0,W,32)}destroy(e=!1){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!e&&this.texture&&this.texture instanceof Ui&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}function g5(t,e,n){var s,u;1===t?e.header_length=n.readFixed32():2===t?e.x=n.readVarint():3===t?e.y=n.readVarint():4===t?e.z=n.readVarint():5===t&&e.layers.push((s=n,u=n.readVarint()+n.pos,s.readFields(A8,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},u)))}function v5(t,e,n){var s,u;1===t?(e.delta_filter=(s=n,u=n.readVarint()+n.pos,s.readFields(Pv,{block_size:0},u)),e.filter="delta_filter"):2===t?(n.readVarint(),e.filter="zigzag_filter"):3===t?(n.readVarint(),e.filter="bitshuffle_filter"):4===t&&(n.readVarint(),e.filter="byteshuffle_filter")}function Pv(t,e,n){1===t&&(e.block_size=n.readVarint())}function a3(t,e,n){1===t?(n.readVarint(),e.codec="gzip_data"):2===t?(n.readVarint(),e.codec="jpeg_image"):3===t?(n.readVarint(),e.codec="webp_image"):4===t&&(n.readVarint(),e.codec="png_image")}function _5(t,e,n){var s,u;1===t?e.first_byte=n.readFixed64():2===t?e.last_byte=n.readFixed64():3===t?e.filters.push((s=n,u=n.readVarint()+n.pos,s.readFields(v5,{},u))):4===t?e.codec=function(s,u){return s.readFields(a3,{},u)}(n,n.readVarint()+n.pos):5===t?e.offset=n.readFloat():6===t?e.scale=n.readFloat():7===t&&e.bands.push(n.readString())}function A8(t,e,n){var s,u;1===t?e.version=n.readVarint():2===t?e.name=n.readString():3===t?e.units=n.readString():4===t?e.tilesize=n.readVarint():5===t?e.buffer=n.readVarint():6===t?e.pixel_format=n.readVarint():7===t&&e.data_index.push((s=n,u=n.readVarint()+n.pos,s.readFields(_5,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},u)))}function D8(t,e,n){if(2===t)s=n,u=n.readVarint()+n.pos,s.readFields(y5,e,u);else if(3===t)throw new Error("Not implemented");var s,u}function y5(t,e,n){if(1===t){let s=0;const u=n.readVarint()+n.pos;for(;n.pos<u;)e[s++]=n.readVarint()}}class b5{constructor(e=0,n=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=n}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const n=this.items[e];delete this.items[e],this.size--,null!==n.prev&&(n.prev.next=n.next),null!==n.next&&(n.next.prev=n.prev),this.first===n&&(this.first=n.next),this.last===n&&(this.last=n.prev)}return this}entries(e=this.keys()){return e.map(n=>[n,this.get(n)])}evict(e=!1){if(e||this.size>0){const n=this.first;delete this.items[n.key],0==--this.size?(this.first=null,this.last=null):(this.first=n.next,this.first.prev=null)}return this}expiresAt(e){let n;return this.has(e)&&(n=this.items[e].expiry),n}get(e){let n;if(this.has(e)){const s=this.items[e];this.ttl>0&&s.expiry<=Date.now()?this.delete(e):(n=s.value,this.set(e,n,!0))}return n}has(e){return e in this.items}keys(){const e=[];let n=this.first;for(;null!==n;)e.push(n.key),n=n.next;return e}set(e,n,s=!1,u=this.resetTtl){let m;if(s||this.has(e)){if(m=this.items[e],m.value=n,!1===s&&u&&(m.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==m){const g=this.last,E=m.next,T=m.prev;this.first===m&&(this.first=m.next),m.next=null,m.prev=this.last,g.next=m,null!==T&&(T.next=E),null!==E&&(E.prev=T)}}else this.max>0&&this.size===this.max&&this.evict(!0),m=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:n},1==++this.size?this.first=m:this.last.next=m;return this.last=m,this}values(e=this.keys()){return e.map(n=>this.get(n))}}function P8(t,e){if(4!==e.length)throw new Error(`Expected data of dimension 4 but got ${e.length}.`);let n=e[3];for(let s=2;s>=1;s--){const u=1===s?1:0,m=2===s?1:0;for(let g=0;g<e[0];g++){const E=e[1]*g;for(let T=u;T<e[1];T++){const z=e[2]*(T+E);for(let $=m;$<e[2];$++){const W=e[3]*($+z);for(let Z=0;Z<e[3];Z++){const le=W+Z;t[le]+=t[le-n]}}}}n*=e[s]}return t}function w5(t){for(let e=0,n=t.length;e<n;e++)t[e]=t[e]>>>1^-(1&t[e]);return t}function x5(t,e){switch(e){case"uint32":return t;case"uint16":for(let n=0;n<t.length;n+=2){const s=t[n],u=t[n+1];t[n]=(240&s)>>4|(61440&s)>>8|(240&u)<<4|61440&u,t[n+1]=15&s|(3840&s)>>4|(15&u)<<8|(3840&u)<<4}return t;case"uint8":for(let n=0;n<t.length;n+=4){const s=t[n],u=t[n+1],m=t[n+2],g=t[n+3];t[n+0]=(192&s)>>6|(192&u)>>4|(192&m)>>2|192&g,t[n+1]=(48&s)>>4|(48&u)>>2|48&m|(48&g)<<2,t[n+2]=(12&s)>>2|12&u|(12&m)<<2|(12&g)<<4,t[n+3]=3&s|(3&u)<<2|(3&m)<<4|(3&g)<<6}return t;default:throw new Error(`Invalid pixel format, "${e}"`)}}class dg extends Error{constructor(e){super(e),this.name="MRTError"}}var tf=Uint8Array,_4=Uint16Array,l3=Int32Array,y4=new tf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Rv=new tf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zv=new tf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c3=function(t,e){for(var n=new _4(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];var u=new l3(n[30]);for(s=1;s<30;++s)for(var m=n[s];m<n[s+1];++m)u[m]=m-n[s]<<5|s;return{b:n,r:u}},b4=c3(y4,2),u3=b4.b,I5=b4.r;u3[28]=258,I5[258]=28;for(var H4=c3(Rv,0).b,Ov=new _4(32768),sd=0;sd<32768;++sd){var Xg=(43690&sd)>>1|(21845&sd)<<1;Ov[sd]=((65280&(Xg=(61680&(Xg=(52428&Xg)>>2|(13107&Xg)<<2))>>4|(3855&Xg)<<4))>>8|(255&Xg)<<8)>>1}var w4=function(t,e,n){for(var s=t.length,u=0,m=new _4(e);u<s;++u)t[u]&&++m[t[u]-1];var g,E=new _4(e);for(u=1;u<e;++u)E[u]=E[u-1]+m[u-1]<<1;if(n){g=new _4(1<<e);var T=15-e;for(u=0;u<s;++u)if(t[u])for(var z=u<<4|t[u],$=e-t[u],W=E[t[u]-1]++<<$,Z=W|(1<<$)-1;W<=Z;++W)g[Ov[W]>>T]=z}else for(g=new _4(s),u=0;u<s;++u)t[u]&&(g[u]=Ov[E[t[u]-1]++]>>15-t[u]);return g},G4=new tf(288);for(sd=0;sd<144;++sd)G4[sd]=8;for(sd=144;sd<256;++sd)G4[sd]=9;for(sd=256;sd<280;++sd)G4[sd]=7;for(sd=280;sd<288;++sd)G4[sd]=8;var h6=new tf(32);for(sd=0;sd<32;++sd)h6[sd]=5;var E5=w4(G4,9,1),W4=w4(h6,5,1),d3=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},p2=function(t,e,n){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(7&e)&n},h3=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},Lv=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Df=function(t,e,n){var s=new Error(e||Lv[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,Df),!n)throw s;return s},p6=new tf(0),f6=typeof TextDecoder<"u"&&new TextDecoder;try{f6.decode(p6,{stream:!0})}catch{}const C5={gzip_data:"gzip"},m6={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},p3={uint32:1,uint16:2,uint8:4},Bv={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};class f3{constructor(e=1){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=e}getLayer(e){return this.layers[e]}getHeaderLength(e){const n=new Uint8Array(e),s=new DataView(e);if(13!==n[0])throw new dg("File is not a valid MRT.");return s.getUint32(1,!0)}parseHeader(e){const n=new Uint8Array(e),s=this.getHeaderLength(e);if(n.length<s)throw new dg(`Expected header with length >= ${s} but got buffer of length ${n.length}`);const u=new a2(n.subarray(0,s)).readFields(g5,{header_length:0,x:0,y:0,z:0,layers:[]},void 0);if(!isNaN(this.x)&&(this.x!==u.x||this.y!==u.y||this.z!==u.z))throw new dg(`Invalid attempt to parse header ${u.z}/${u.x}/${u.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=u.x,this.y=u.y,this.z=u.z;for(const m of u.layers)this.layers[m.name]=new k5(m,{cacheSize:this._cacheSize});return this}createDecodingTask(e){const n=[],s=this.getLayer(e.layerName);for(let u=0;u<s.dataIndex.length;u++){const m=s.dataIndex[u],g=m.first_byte-e.firstByte,E=m.last_byte+1-e.firstByte;if(u<e.firstBlock||u>e.lastBlock||s._blocksInProgress.has(u))continue;const T={layerName:s.name,firstByte:g,lastByte:E,pixelFormat:s.pixelFormat,blockIndex:u,blockShape:[m.bands.length].concat(s.bandShape),buffer:s.buffer,codec:m.codec.codec,filters:m.filters.map(z=>z.filter)};s._blocksInProgress.add(u),n.push(T)}return new g6(n,()=>{n.forEach(u=>s._blocksInProgress.delete(u.blockIndex))},(u,m)=>{if(n.forEach(g=>s._blocksInProgress.delete(g.blockIndex)),u)throw u;m.forEach(g=>{this.getLayer(g.layerName).processDecodedData(g)})})}}class k5{constructor({version:e,name:n,units:s,tilesize:u,pixel_format:m,buffer:g,data_index:E},T){if(this.version=e,1!==this.version)throw new dg(`Cannot parse raster layer encoded with MRT version ${e}`);this.name=n,this.units=s,this.tileSize=u,this.buffer=g,this.pixelFormat=m6[m],this.dataIndex=E,this.bandShape=[u+2*g,u+2*g,p3[this.pixelFormat]],this._decodedBlocks=function(z=1e3,$=0,W=!1){if(isNaN(z)||z<0)throw new TypeError("Invalid max value");if(isNaN($)||$<0)throw new TypeError("Invalid ttl value");if("boolean"!=typeof W)throw new TypeError("Invalid resetTtl value");return new b5(z,$,W)}(T?T.cacheSize:5),this._blocksInProgress=new Set}processDecodedData(e){const n=e.blockIndex.toString();this._decodedBlocks.get(n)||this._decodedBlocks.set(n,e.data)}getBlockForBand(e){let n=0;switch(typeof e){case"string":for(const[s,u]of this.dataIndex.entries()){for(const[m,g]of u.bands.entries())if(g===e)return{bandIndex:n+m,blockIndex:s,blockBandIndex:m};n+=u.bands.length}break;case"number":for(const[s,u]of this.dataIndex.entries()){if(e>=n&&e<n+u.bands.length)return{bandIndex:e,blockIndex:s,blockBandIndex:e-n};n+=u.bands.length}break;default:throw new dg(`Invalid band \`${JSON.stringify(e)}\`. Expected string or integer.`)}throw new dg(`Band not found: ${JSON.stringify(e)}`)}getDataRange(e){let n=1/0,s=-1/0,u=1/0,m=-1/0;for(const g of e){const{blockIndex:E}=this.getBlockForBand(g);if(E<0)throw new dg(`Invalid band: ${JSON.stringify(g)}`);const T=this.dataIndex[E];u=Math.min(u,E),m=Math.max(m,E),n=Math.min(n,T.first_byte),s=Math.max(s,T.last_byte)}return{layerName:this.name,firstByte:n,lastByte:s,firstBlock:u,lastBlock:m}}hasBand(e){const{blockIndex:n}=this.getBlockForBand(e);return n>=0}hasDataForBand(e){const{blockIndex:n}=this.getBlockForBand(e);return n>=0&&!!this._decodedBlocks.get(n.toString())}getBandView(e){const{blockIndex:n,blockBandIndex:s}=this.getBlockForBand(e),u=this._decodedBlocks.get(n.toString());if(!u)throw new dg(`Data for band ${JSON.stringify(e)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[n],g=this.bandShape.reduce((z,$)=>z*$,1),E=s*g,T=u.subarray(E,E+g);return{data:T,bytes:new Uint8Array(T.buffer).subarray(T.byteOffset,T.byteOffset+T.byteLength),tileSize:this.tileSize,buffer:this.buffer,offset:m.offset,scale:m.scale}}}class g6{constructor(e,n,s){this.tasks=e,this._onCancel=n,this._onComplete=s,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(e,n){this._finalized||(this._onComplete(e,n),this._finalized=!0)}}f3.performDecoding=function(t,e){return Promise.all(e.tasks.map(n=>{const{layerName:s,firstByte:u,lastByte:m,pixelFormat:g,blockShape:E,blockIndex:T,filters:z,codec:$}=n,W=new Uint8Array(t).subarray(u,m+1),Z=new Uint32Array(E[0]*E[1]*E[2]);let le;if("gzip_data"!==$)throw new Error(`Unhandled codec: ${$}`);return le=function(de,be){if(!globalThis.DecompressionStream&&"gzip_data"===be)return Promise.resolve(((yt=function(Qt){31==Qt[0]&&139==Qt[1]&&8==Qt[2]||Df(6,"invalid gzip data");var kn=Qt[3],Rn=10;4&kn&&(Rn+=2+(Qt[10]|Qt[11]<<8));for(var li=(kn>>3&1)+(kn>>4&1);li>0;li-=!Qt[Rn++]);return Rn+(2&kn)}(gt=de))+8>gt.length&&Df(6,"invalid gzip data"),function(Qt,kn,Rn,li){var Di=Qt.length;if(!Di||kn.f&&!kn.l)return Rn||new tf(0);var xi=!Rn,Ji=xi||2!=kn.i,So=kn.i;xi&&(Rn=new tf(3*Di));var qi,wo,zi=function($m){var vg=Rn.length;if($m>vg){var D4=new tf(Math.max(2*vg,$m));D4.set(Rn),Rn=D4}},bo=kn.f||0,Ro=kn.p||0,Co=kn.b||0,lr=kn.l,To=kn.d,Fo=kn.m,Yr=kn.n,Br=8*Di;do{if(!lr){bo=p2(Qt,Ro,1);var Rr=p2(Qt,Ro+1,3);if(Ro+=3,!Rr){var Lo=Qt[(Ba=4+((Ro+7)/8|0))-4]|Qt[Ba-3]<<8,Zr=Ba+Lo;if(Zr>Di){So&&Df(0);break}Ji&&zi(Co+Lo),Rn.set(Qt.subarray(Ba,Zr),Co),kn.b=Co+=Lo,kn.p=Ro=8*Zr,kn.f=bo;continue}if(1==Rr)lr=E5,To=W4,Fo=9,Yr=5;else if(2==Rr){var ta=p2(Qt,Ro,31)+257,Ss=p2(Qt,Ro+10,15)+4,da=ta+p2(Qt,Ro+5,31)+1;Ro+=14;for(var ra=new tf(da),ka=new tf(19),bs=0;bs<Ss;++bs)ka[zv[bs]]=p2(Qt,Ro+3*bs,7);Ro+=3*Ss;var jl=d3(ka),Pl=(1<<jl)-1,Ya=w4(ka,jl,1);for(bs=0;bs<da;){var Ba,Ha=Ya[p2(Qt,Ro,Pl)];if(Ro+=15&Ha,(Ba=Ha>>4)<16)ra[bs++]=Ba;else{var rc=0,sc=0;for(16==Ba?(sc=3+p2(Qt,Ro,3),Ro+=2,rc=ra[bs-1]):17==Ba?(sc=3+p2(Qt,Ro,7),Ro+=3):18==Ba&&(sc=11+p2(Qt,Ro,127),Ro+=7);sc--;)ra[bs++]=rc}}var Au=ra.subarray(0,ta),vu=ra.subarray(ta);Fo=d3(Au),Yr=d3(vu),lr=w4(Au,Fo,1),To=w4(vu,Yr,1)}else Df(1);if(Ro>Br){So&&Df(0);break}}Ji&&zi(Co+131072);for(var f1=(1<<Fo)-1,ad=(1<<Yr)-1,iu=Ro;;iu=Ro){var qd=(rc=lr[h3(Qt,Ro)&f1])>>4;if((Ro+=15&rc)>Br){So&&Df(0);break}if(rc||Df(2),qd<256)Rn[Co++]=qd;else{if(256==qd){iu=Ro,lr=null;break}var g0=qd-254;qd>264&&(g0=p2(Qt,Ro,(1<<(Eh=y4[bs=qd-257]))-1)+u3[bs],Ro+=Eh);var v0=To[h3(Qt,Ro)&ad],ac=v0>>4;if(v0||Df(3),Ro+=15&v0,vu=H4[ac],ac>3){var Eh=Rv[ac];vu+=h3(Qt,Ro)&(1<<Eh)-1,Ro+=Eh}if(Ro>Br){So&&Df(0);break}Ji&&zi(Co+131072);var nf=Co+g0;if(Co<vu){var Pf=0-vu,im=Math.min(vu,nf);for(Pf+Co<0&&Df(3);Co<im;++Co)Rn[Co]=(void 0)[Pf+Co]}for(;Co<nf;++Co)Rn[Co]=Rn[Co-vu]}}kn.l=lr,kn.p=iu,kn.b=Co,kn.f=bo,lr&&(bo=1,kn.m=Fo,kn.d=To,kn.n=Yr)}while(!bo);return Co!=Rn.length&&xi?(qi=Rn,(null==(wo=Co)||wo>qi.length)&&(wo=qi.length),new tf(qi.subarray(0,wo))):Rn.subarray(0,Co)}(gt.subarray(yt,-8),{i:2},new tf(((xe=gt)[($e=xe.length)-4]|xe[$e-3]<<8|xe[$e-2]<<16|xe[$e-1]<<24)>>>0))));var xe,$e,gt,yt;const wt=C5[be];if(!wt)throw new Error(`Unhandled codec: ${be}`);const nn=new globalThis.DecompressionStream(wt);return new Response(new Blob([de]).stream().pipeThrough(nn)).arrayBuffer().then(Qt=>new Uint8Array(Qt))}(W,$).then(de=>(new a2(de).readFields(D8,Z),new Bv[g](Z.buffer))),le.then(de=>{for(let be=z.length-1;be>=0;be--)switch(z[be]){case"delta_filter":P8(de,E);break;case"zigzag_filter":w5(de);break;case"bitshuffle_filter":x5(de,g);break;default:throw new Error(`Unhandled filter "${z[be]}"`)}return{layerName:s,blockIndex:T,data:de}}).catch(de=>{throw de})}))};class v6 extends Dv{constructor(e,n,s,u,m){super(e,n,s,u,m),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(e,n){const s=n.context,u=s.gl;this.texture=this.texture||n.getTileTexture(e.width),this.texture&&this.texture instanceof Ui?this.texture.update(e,{useMipmap:!1,premultiply:!1}):this.texture=new Ui(s,e,u.RGBA,{useMipmap:!1,premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(e=16384,n){const s=this._mrt=new f3(30),u=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(e-1)}});return this.entireBuffer=null,this.request=dr(u,(m,g,E,T)=>{if(m)n(m);else try{const z=s.getHeaderLength(g);if(z>e)return void(this.request=this.fetchHeader(z,n));s.parseHeader(g),this._isHeaderLoaded=!0;let $=0;for(const W of Object.values(s.layers))$=Math.max($,W.dataIndex[W.dataIndex.length-1].last_byte);g.byteLength>=$&&(this.entireBuffer=g),n(null,this.entireBuffer||g,E,T)}catch(z){n(z)}}),this.request}fetchBand(e,n,s){const u=this._mrt;if(!this._isHeaderLoaded||!u)return void s(new Error("Tile header is not ready"));const m=this.actor;if(!m)return void s(new Error("Can't fetch tile band without an actor"));let g;const E=(W,Z)=>{g.complete(W,Z),W?s(W):(this.updateTextureDescriptor(e,n),s(null,this.textureDescriptor&&this.textureDescriptor.img))},T=(W,Z)=>{if(W)return s(W);const le=m.send("decodeRasterArray",{buffer:Z,task:g},E,void 0,!0);this._workQueue.push(()=>{le&&le.cancel(),g.cancel()})},z=u.getLayer(e);if(!z)return void s(new Error(`Unknown sourceLayer "${e}"`));if(z.hasDataForBand(n))return this.updateTextureDescriptor(e,n),void s(null,this.textureDescriptor?this.textureDescriptor.img:null);const $=z.getDataRange([n]);if(g=u.createDecodingTask($),!g||g.tasks.length)if(this.flushQueues(),this.entireBuffer)T(null,this.entireBuffer.slice($.firstByte,$.lastByte+1));else{const W=Object.assign({},this.requestParams,{headers:{Range:`bytes=${$.firstByte}-${$.lastByte}`}}),Z=dr(W,T);this._fetchQueue.push(()=>{Z.cancel(),g.cancel()})}else s(null)}updateNeeded(e,n){return(!this.textureDescriptor||this.textureDescriptor.band!==n||this.textureDescriptor.layer!==e)&&"errored"!==this.state}updateTextureDescriptor(e,n){if(!this._mrt)return;const s=this._mrt.getLayer(e);if(!s||!s.hasBand(n)||!s.hasDataForBand(n))return;const{bytes:u,tileSize:m,buffer:g,offset:E,scale:T}=s.getBandView(n),z=m+2*g,$={data:u,width:z,height:z},W=this.texture;W&&W instanceof Ui&&W.update($,{useMipmap:!1,premultiply:!1}),this.textureDescriptor={layer:e,band:n,img:$,buffer:g,offset:E,tileSize:m,format:s.pixelFormat,mix:[T,256*T,65536*T,16777216*T]}}}class S5{constructor(e,n){this.max=e,this.onRemove=n,this.reset()}reset(){for(const e in this.data)for(const n of this.data[e])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(e,n,s){const u=e.wrapped().key;void 0===this.data[u]&&(this.data[u]=[]);const m={value:n,timeout:void 0};if(void 0!==s&&(m.timeout=setTimeout(()=>{this.remove(e,m)},s)),this.data[u].push(m),this.order.push(u),this.order.length>this.max){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const n=this.data[e].shift();return n.timeout&&clearTimeout(n.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),n.value}getByKey(e){const n=this.data[e];return n?n[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,n){if(!this.has(e))return this;const s=e.wrapped().key,u=void 0===n?0:this.data[s].indexOf(n),m=this.data[s][u];return this.data[s].splice(u,1),m.timeout&&clearTimeout(m.timeout),0===this.data[s].length&&delete this.data[s],this.onRemove(m.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this}filter(e){const n=[];for(const s in this.data)for(const u of this.data[s])e(u.value)||n.push(u);for(const s of n)this.remove(s.value.tileID,s)}}class Kg extends Hl{constructor(e,n,s){super(),this.id=e,this._onlySymbols=s,n.on("data",u=>{"source"===u.dataType&&"metadata"===u.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===u.dataType&&"content"===u.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),n.on("error",()=>{this._sourceErrored=!0}),this._source=n,this._tiles={},this._cache=new S5(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=n.minTileCacheSize,this._maxTileCacheSize=n.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new l2,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"raster-array"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const n=this._tiles[e];if("errored"!==n.state&&("loaded"!==n.state||!n.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,n){return e.isSymbolTile=this._onlySymbols,e.isExtraShadowCaster=this._shadowCasterTiles[e.tileID.key],this._source.loadTile(e,n)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e)}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e)}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const n in this._tiles){const s=this._tiles[n];s.upload(e),s.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return co(this._tiles).map(e=>e.tileID).sort(Nv).map(e=>e.key)}getRenderableIds(e,n){const s=[];for(const u in this._tiles)this._isIdRenderable(+u,e,n)&&s.push(this._tiles[u]);return e?s.sort((u,m)=>{const g=u.tileID,E=m.tileID,T=new Eo(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),z=new Eo(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-E.overscaledZ||z.y-T.y||z.x-T.x}).map(u=>u.tileID.key):s.map(u=>u.tileID).sort(Nv).map(u=>u.key)}hasRenderableParent(e){const n=this.findLoadedParent(e,0);return!!n&&this._isIdRenderable(n.tileID.key)}_isIdRenderable(e,n,s){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(n||!this._tiles[e].holdingForFade())&&(s||!this._shadowCasterTiles[e])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,n){const s=this._tiles[e];s&&("loading"!==s.state&&(s.state=n),this._loadTile(s,this._tileLoaded.bind(this,s,e,n)))}_tileLoaded(e,n,s,u){if(u)if(e.state="errored",404!==u.status)this._source.fire(new Os(u,{tile:e}));else{if(!(e.tileID.key in this._loadedParentTiles))return void this._source.fire(new Mc("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform)}else e.timeAdded=mi.now(),"expired"===s&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Mc("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const n=this.getRenderableIds();for(let u=0;u<n.length;u++){const m=n[u];if(e.neighboringTiles&&e.neighboringTiles[m]){const g=this.getTileByID(m);s(e,g),s(g,e)}}function s(u,m){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let g=m.tileID.canonical.x-u.tileID.canonical.x;const E=m.tileID.canonical.y-u.tileID.canonical.y,T=Math.pow(2,u.tileID.canonical.z),z=m.tileID.key;0===g&&0===E||Math.abs(E)>1||(Math.abs(g)>1&&(1===Math.abs(g+T)?g+=T:1===Math.abs(g-T)&&(g-=T)),m.dem&&u.dem&&(u.dem.backfillBorder(m.dem,g,E),u.neighboringTiles&&u.neighboringTiles[z]&&(u.neighboringTiles[z].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,n,s,u){for(const m in this._tiles){let g=this._tiles[m];if(u[m]||!g.hasData()||g.tileID.overscaledZ<=n||g.tileID.overscaledZ>s)continue;let E=g.tileID;for(;g&&g.tileID.overscaledZ>n+1;){const z=g.tileID.scaledTo(g.tileID.overscaledZ-1);g=this._tiles[z.key],g&&g.hasData()&&(E=z)}let T=E;for(;T.overscaledZ>n;)if(T=T.scaledTo(T.overscaledZ-1),e[T.key]){u[E.key]=E;break}}}findLoadedParent(e,n){if(e.key in this._loadedParentTiles){const s=this._loadedParentTiles[e.key];return s&&s.tileID.overscaledZ>=n?s:null}for(let s=e.overscaledZ-1;s>=n;s--){const u=e.scaledTo(s),m=this._getLoadedTile(u);if(m)return m}}_getLoadedTile(e){const n=this._tiles[e.key];return n&&n.hasData()?n:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,n){n=n||this._source.tileSize;const s=Math.ceil(e.width/n)+1,u=Math.ceil(e.height/n)+1,m=Math.floor(s*u*5),g="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,m):m,E="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(E)}handleWrapJump(e){const n=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,n){const s={};for(const u in this._tiles){const m=this._tiles[u];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+n),s[m.tileID.key]=m}this._tiles=s;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,n,s,u){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!s)return;let m;if(this.updateCacheSize(e,n),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain){if(this._source.tileID)m=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(T=>new Ic(T.canonical.z,T.wrap,T.canonical.z,T.canonical.x,T.canonical.y));else if(0!==this.tileCoverLift){const T=e.clone();T.tileCoverLift=this.tileCoverLift,m=T.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!s,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.minzoom<=1&&"globe"===e.projection.name&&(m.push(new Ic(1,0,1,0,0)),m.push(new Ic(1,0,1,1,0)),m.push(new Ic(1,0,1,0,1)),m.push(new Ic(1,0,1,1,1)))}else if(m=e.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!s,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile){const T=this._source.hasTile.bind(this._source);m=m.filter(z=>T(z))}}else m=[];if(m.length>0&&this.castsShadows&&u&&"globe"!==this.transform.projection.name&&!this.usedForTerrain&&!Yg(this._source.type)){const T=e.coveringZoomLevel({tileSize:n||this._source.tileSize,roundZoom:this._source.roundZoom&&!s}),z=Math.min(T,this._source.maxzoom),$=e.extendTileCoverForShadows(m,u,z);for(const W of $)this._shadowCasterTiles[W.key]=!0,m.push(W)}const g=this._updateRetainedTiles(m);if(Yg(this._source.type)&&0!==m.length){const T={},z={},$=Object.keys(g);for(const Z of $){const le=g[Z],de=this._tiles[Z];if(!de||de.fadeEndTime&&de.fadeEndTime<=mi.now())continue;const be=this.findLoadedParent(le,Math.max(le.overscaledZ-Kg.maxOverzooming,this._source.minzoom));be&&(this._addTile(be.tileID),T[be.tileID.key]=be.tileID),z[Z]=le}const W=m[m.length-1].overscaledZ;for(const Z in this._tiles){const le=this._tiles[Z];if(g[Z]||!le.hasData())continue;let de=le.tileID;for(;de.overscaledZ>W;){de=de.scaledTo(de.overscaledZ-1);const be=this._tiles[de.key];if(be&&be.hasData()&&z[de.key]){g[Z]=le.tileID;break}}}for(const Z in T)g[Z]||(this._coveredTiles[Z]=!0,g[Z]=T[Z])}for(const T in g)this._tiles[T].clearFadeHold();const E=function(T,z){const $=[];for(const W in T)W in z||$.push(W);return $}(this._tiles,g);for(const T of E){const z=this._tiles[T];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(+T)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const n={};if(0===e.length)return n;const s={},u=e.reduce((z,$)=>Math.min(z,$.overscaledZ),1/0),m=e[0].overscaledZ,g=Math.max(m-Kg.maxOverzooming,this._source.minzoom),E=Math.max(m+Kg.maxUnderzooming,this._source.minzoom),T={};for(const z of e){const $=this._addTile(z);n[z.key]=z,$.hasData()||u<this._source.maxzoom&&(T[z.key]=z)}this._retainLoadedChildren(T,u,E,n);for(const z of e){let $=this._tiles[z.key];if($.hasData())continue;if(z.canonical.z>=this._source.maxzoom){const Z=z.children(this._source.maxzoom)[0],le=this.getTile(Z);if(le&&le.hasData()){n[Z.key]=Z;continue}}else{const Z=z.children(this._source.maxzoom);if(n[Z[0].key]&&n[Z[1].key]&&n[Z[2].key]&&n[Z[3].key])continue}let W=$.wasRequested();for(let Z=z.overscaledZ-1;Z>=g;--Z){const le=z.scaledTo(Z);if(s[le.key]||(s[le.key]=!0,$=this.getTile(le),!$&&W&&($=this._addTile(le)),$&&(n[le.key]=le,W=$.wasRequested(),$.hasData())))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const n=[];let s,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){s=this._loadedParentTiles[u.key];break}n.push(u.key);const m=u.scaledTo(u.overscaledZ-1);if(s=this._getLoadedTile(m),s)break;u=m}for(const m of n)this._loadedParentTiles[m]=s}}_addTile(e){let n=this._tiles[e.key];if(n)return!0!==n.isExtraShadowCaster||this._shadowCasterTiles[e.key]||this._reloadTile(e.key,"reloading"),n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const s=!!n;if(!s){const u=this.map?this.map.painter:null,m=this._source.tileSize*e.overscaleFactor();n="raster-array"===this._source.type?new v6(e,m,this.transform.tileZoom,u,this._isRaster):new Dv(e,m,this.transform.tileZoom,u,this._isRaster),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))}return n?(n.uses++,this._tiles[e.key]=n,s||this._source.fire(new Mc("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null}_setTileReloadTimer(e,n){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const s=n.getExpiryTimeout();s&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},s))}_removeTile(e){const n=this._tiles[e];n&&(n.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),n.uses>0||(n.hasData()&&"reloading"!==n.state||"empty"===n.state?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,n,s){const u=[],m=this.transform;if(!m)return u;const g="globe"===m.projection.name,E=s0(m.center.lng);for(const T in this._tiles){const z=this._tiles[T];if(s&&z.clearQueryDebugViz(),z.holdingForFade())continue;let $;if(g){const W=z.tileID.canonical;if(0===W.z){const Z=[Math.abs(zn(E,...x4(W,-1))-E),Math.abs(zn(E,...x4(W,1))-E)];$=[0,2*Z.indexOf(Math.min(...Z))-1]}else{const Z=[Math.abs(zn(E,...x4(W,-1))-E),Math.abs(zn(E,...x4(W,0))-E),Math.abs(zn(E,...x4(W,1))-E)];$=[Z.indexOf(Math.min(...Z))-1]}}else $=[0];for(const W of $){const Z=e.containsTile(z,m,n,W);Z&&u.push(Z)}}return u}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(e){return this._getRenderableCoordinates(e)}_getRenderableCoordinates(e,n){const s=this.getRenderableIds(e,n).map(m=>this._tiles[m].tileID),u="globe"===this.transform.projection.name;for(const m of s)m.projMatrix=this.transform.calculateProjMatrix(m.toUnwrapped()),m.expandedProjMatrix=u?this.transform.calculateProjMatrix(m.toUnwrapped(),!1,!0):m.projMatrix;return s}sortCoordinatesByDistance(e){const n=e.slice(),s=this.transform._camera.position,u=this.transform._camera.forward(),m={};for(const g of n){const E=1/(1<<g.canonical.z);m[g.key]=((g.canonical.x+.5)*E+g.wrap-s[0])*u[0]+((g.canonical.y+.5)*E-s[1])*u[1]-s[2]*u[2]}return n.sort((g,E)=>m[g.key]-m[E.key]),n}hasTransition(){if(this._source.hasTransition())return!0;if(Yg(this._source.type))for(const e in this._tiles){const n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=mi.now())return!0}return!1}setFeatureState(e,n,s){this._state.updateState(e=e||"_geojsonTileLayer",n,s)}removeFeatureState(e,n,s){this._state.removeFeatureState(e=e||"_geojsonTileLayer",n,s)}getFeatureState(e,n){return this._state.getState(e=e||"_geojsonTileLayer",n)}setDependencies(e,n,s){const u=this._tiles[e];u&&u.setDependencies(n,s)}reloadTilesForDependencies(e,n){for(const s in this._tiles)this._tiles[s].hasDependency(e,n)&&this._reloadTile(+s,"reloading");this._cache.filter(s=>!s.hasDependency(e,n))}_preloadTiles(e,n){if(!this._sourceLoaded){const E=()=>{this._sourceLoaded&&(this._source.off("data",E),this._preloadTiles(e,n))};return void this._source.on("data",E)}const s=new Map,u=Array.isArray(e)?e:[e],m=this.map.painter.terrain,g=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const E of u){const T=E.coveringTiles({tileSize:g,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const z of T)s.set(z.key,z);this.usedForTerrain&&E.updateElevation(!1)}yo(Array.from(s.values()),(E,T)=>{const z=new Dv(E,this._source.tileSize*E.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(z,$=>{"raster-dem"===this._source.type&&z.dem&&this._backfillDEM(z),T($,z)})},n)}}function Nv(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),s=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||s-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Yg(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function x4(t,e){const n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}Kg.maxOverzooming=10,Kg.maxUnderzooming=3;const m3=new class extends er{possiblyEvaluate(t,e){return e=new os(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,s){return e=gi({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,s)}}(km.paint.properties["line-width"].specification);function _6(t,e){return e>0?e+2*t:t}m3.useIntegerZoom=!0;const q4=new ma({"symbol-placement":new Ki(ai.layout_symbol["symbol-placement"]),"symbol-spacing":new Ki(ai.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ki(ai.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new er(ai.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ki(ai.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ki(ai.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Ki(ai.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ki(ai.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ki(ai.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ki(ai.layout_symbol["icon-rotation-alignment"]),"icon-size":new er(ai.layout_symbol["icon-size"]),"icon-text-fit":new er(ai.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new er(ai.layout_symbol["icon-text-fit-padding"]),"icon-image":new er(ai.layout_symbol["icon-image"]),"icon-rotate":new er(ai.layout_symbol["icon-rotate"]),"icon-padding":new Ki(ai.layout_symbol["icon-padding"]),"icon-keep-upright":new Ki(ai.layout_symbol["icon-keep-upright"]),"icon-offset":new er(ai.layout_symbol["icon-offset"]),"icon-anchor":new er(ai.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ki(ai.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ki(ai.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ki(ai.layout_symbol["text-rotation-alignment"]),"text-field":new er(ai.layout_symbol["text-field"]),"text-font":new er(ai.layout_symbol["text-font"]),"text-size":new er(ai.layout_symbol["text-size"]),"text-max-width":new er(ai.layout_symbol["text-max-width"]),"text-line-height":new er(ai.layout_symbol["text-line-height"]),"text-letter-spacing":new er(ai.layout_symbol["text-letter-spacing"]),"text-justify":new er(ai.layout_symbol["text-justify"]),"text-radial-offset":new er(ai.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ki(ai.layout_symbol["text-variable-anchor"]),"text-anchor":new er(ai.layout_symbol["text-anchor"]),"text-max-angle":new Ki(ai.layout_symbol["text-max-angle"]),"text-writing-mode":new Ki(ai.layout_symbol["text-writing-mode"]),"text-rotate":new er(ai.layout_symbol["text-rotate"]),"text-padding":new Ki(ai.layout_symbol["text-padding"]),"text-keep-upright":new Ki(ai.layout_symbol["text-keep-upright"]),"text-transform":new er(ai.layout_symbol["text-transform"]),"text-offset":new er(ai.layout_symbol["text-offset"]),"text-allow-overlap":new Ki(ai.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ki(ai.layout_symbol["text-ignore-placement"]),"text-optional":new Ki(ai.layout_symbol["text-optional"]),visibility:new Ki(ai.layout_symbol.visibility)});var I4={paint:new ma({"icon-opacity":new er(ai.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new er(ai.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new er(ai.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new er(ai.paint_symbol["text-emissive-strength"]),"icon-color":new er(ai.paint_symbol["icon-color"]),"icon-halo-color":new er(ai.paint_symbol["icon-halo-color"]),"icon-halo-width":new er(ai.paint_symbol["icon-halo-width"]),"icon-halo-blur":new er(ai.paint_symbol["icon-halo-blur"]),"icon-translate":new Ki(ai.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ki(ai.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new er(ai.paint_symbol["icon-image-cross-fade"]),"text-opacity":new er(ai.paint_symbol["text-opacity"]),"text-occlusion-opacity":new er(ai.paint_symbol["text-occlusion-opacity"]),"text-color":new er(ai.paint_symbol["text-color"],{runtimeType:Gt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new er(ai.paint_symbol["text-halo-color"]),"text-halo-width":new er(ai.paint_symbol["text-halo-width"]),"text-halo-blur":new er(ai.paint_symbol["text-halo-blur"]),"text-translate":new Ki(ai.paint_symbol["text-translate"]),"text-translate-anchor":new Ki(ai.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Ki(ai.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Ki(ai.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Ki(ai.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Ki(ai.paint_symbol["icon-color-brightness-max"])}),layout:q4};class T5{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:fe,this.defaultValue=e}evaluate(e){if(e.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(e.formattedSection))return n.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}lt(T5,"FormatSectionOverride",{omit:["defaultValue"]});class Fv extends nl{constructor(e,n,s,u){super(e,I4,n,s,u),this._colorAdjustmentMatrix=l.ad.identity([]),this.hasInitialOcclusionOpacityProperties=void 0!==e.paint&&("icon-occlusion-opacity"in e.paint||"text-occlusion-opacity"in e.paint)}recalculate(e,n){super.recalculate(e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const s=this.layout.get("text-writing-mode");if(s){const u=[];for(const m of s)u.indexOf(m)<0&&u.push(m);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(e,n,s,u){return this._saturation===e&&this._contrast===n&&this._brightnessMin===s&&this._brightnessMax===u||(this._colorAdjustmentMatrix=function(m,g,E,T){m=Ai(m),g=Un(g);const z=l.ad.create(),$=m/3,W=1-2*$,Z=[W,$,$,0,$,W,$,0,$,$,W,0,0,0,0,1],le=.5-.5*g,de=T-E;return l.ad.multiply(z,[de,0,0,0,0,de,0,0,0,0,de,0,E,E,E,1],[g,0,0,0,0,g,0,0,0,0,g,0,le,le,le,1]),l.ad.multiply(z,z,Z),z}(e,n,s,u),this._saturation=e,this._contrast=n,this._brightnessMin=s,this._brightnessMax=u),this._colorAdjustmentMatrix}getValueAndResolveTokens(e,n,s,u){const m=this.layout.get(e).evaluate(n,{},s,u),g=this._unevaluatedLayout._values[e];return g.isDataDriven()||Pe(g.value)||!m?m:(E=n.properties,m.replace(/{([^{}]+)}/g,(z,$)=>$ in E?String(E[$]):""));var E}createBucket(e){return new sn(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of I4.paint.overridableProperties){if(!Fv.hasPaintOverride(this.layout,e))continue;const n=this.paint.get(e),s=new T5(n),u=new ye(s,n.property.specification,this.scope,this.options);let m=null;m="constant"===n.value.kind||"source"===n.value.kind?new Qe("source",u):new Je("composite",u,n.value.zoomStops,n.value._interpolationType),this.paint._values[e]=new ia(n.property,m,n.parameters)}}_handleOverridablePaintPropertyUpdate(e,n,s){return!(!this.layout||n.isDataDriven()||s.isDataDriven())&&Fv.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,n){const s=e.get("text-field"),u=I4.paint.properties[n];let m=!1;const g=E=>{for(const T of E)if(u.overrides&&u.overrides.hasOverride(T))return void(m=!0)};if("constant"===s.value.kind&&s.value.value instanceof ja)g(s.value.value.sections);else if("source"===s.value.kind){const E=z=>{m||(z instanceof md&&Qa(z.value)===hs?g(z.value.sections):z instanceof gd?g(z.sections):z.eachChild(E))},T=s.value;T._styleExpression&&E(T._styleExpression.expression)}return m}getProgramIds(){const e=0!==this.paint.get("icon-opacity").constantOr(1),n=0!==this.paint.get("text-opacity").constantOr(1),s=[];return e&&s.push("symbolIcon"),n&&s.push("symbolSDF"),s}getDefaultProgramParams(e,n,s){return{config:new l1(this,{zoom:n,lut:s}),overrideFog:!1}}}const y6=new ma({visibility:new Ki(ai.layout_background.visibility)});var g3={paint:new ma({"background-color":new Ki(ai.paint_background["background-color"]),"background-pattern":new Ki(ai.paint_background["background-pattern"]),"background-opacity":new Ki(ai.paint_background["background-opacity"]),"background-emissive-strength":new Ki(ai.paint_background["background-emissive-strength"])}),layout:y6};const M5=new ma({visibility:new Ki(ai.layout_raster.visibility)});var b6={paint:new ma({"raster-opacity":new Ki(ai.paint_raster["raster-opacity"]),"raster-color":new us(ai.paint_raster["raster-color"]),"raster-color-mix":new Ki(ai.paint_raster["raster-color-mix"]),"raster-color-range":new Ki(ai.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ki(ai.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ki(ai.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ki(ai.paint_raster["raster-brightness-max"]),"raster-saturation":new Ki(ai.paint_raster["raster-saturation"]),"raster-contrast":new Ki(ai.paint_raster["raster-contrast"]),"raster-resampling":new Ki(ai.paint_raster["raster-resampling"]),"raster-fade-duration":new Ki(ai.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Ki(ai.paint_raster["raster-emissive-strength"]),"raster-array-band":new Ki(ai.paint_raster["raster-array-band"]),"raster-elevation":new Ki(ai.paint_raster["raster-elevation"])}),layout:M5};function Vv(t,e,n,s,u,m,g,E){const T=[t,e,1,n,s,1,u,m,1],z=[g,E,1],$=l.bC.adjoint([],T),[W,Z,le]=l._.transformMat3(z,z,$);return l.bC.multiply(T,T,[W,0,0,0,Z,0,0,0,le])}function v3(t,e,n,s,u,m,g,E){const T=function(z,$,W,Z,le,de,be,xe){const $e=Vv(0,0,1,0,1,1,0,1),gt=Vv(z,$,W,Z,le,de,be,xe),yt=l.bC.adjoint([],$e);return l.bC.multiply(gt,gt,yt)}(t,e,n,s,u,m,g,E);return[T[2]/T[8]/Xi,T[5]/T[8]/Xi]}function X4(t){return[t[0],Math.min(Math.max(t[1],-nc),nc)]}class _3 extends Hl{constructor(e,n,s,u){super(),this.id=e,this.dispatcher=s,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(u),this.options=n,this._dirty=!1}load(e,n){if(this._loaded=n||!1,this.fire(new Mc("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return e&&(this.coordinates=e),this._loaded=!0,void this._finishLoading();this._imageRequest=ws(this.map._requestManager.transformRequest(this.url,_t.Image),(s,u)=>{this._imageRequest=null,this._loaded=!0,s?this.fire(new Os(s)):u&&(this.image=u instanceof HTMLImageElement?mi.getImageData(u):u,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}setTexture(e){if(!(e.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Ao(this.map.painter.context,e.handle),this.width=e.dimensions[0],this.height=e.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Mc("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(e){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Ao||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(e){if(this.coordinates=e,this._boundsArray=void 0,this._unsupportedCoords=!1,!e.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let n=e[0][1],s=e[0][1];for(const m of e)m[1]>s&&(s=m[1]),m[1]<n&&(n=m[1]);const u=(s+n)/2;if(u>nc?this.onNorthPole=!0:u<-nc&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=e.map(jd.fromLngLat);this.tileID=function(g){let E=1/0,T=1/0,z=-1/0,$=-1/0;for(const be of g)E=Math.min(E,be.x),T=Math.min(T,be.y),z=Math.max(z,be.x),$=Math.max($,be.y);const W=Math.max(z-E,$-T),Z=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),le=Math.pow(2,Z);let de=Math.floor((E+z)/2*le);return de>1&&(de-=1),new up(Z,de,Math.floor((T+$)/2*le))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Mc("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(e){for(const xe in this.tiles){const $e=this.tiles[xe];"loaded"!==$e.state&&($e.state="loaded",$e.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const n=zc(new up(0,0,0),this.map.transform.projection),s=[n.projection.project(this.coordinates[0][0],this.coordinates[0][1]),n.projection.project(this.coordinates[1][0],this.coordinates[1][1]),n.projection.project(this.coordinates[2][0],this.coordinates[2][1]),n.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(xe){const $e=xe[1].x-xe[0].x,gt=xe[1].y-xe[0].y,yt=xe[2].x-xe[1].x,wt=xe[2].y-xe[1].y,nn=xe[3].x-xe[2].x,Qt=xe[3].y-xe[2].y,kn=xe[0].x-xe[3].x,Rn=xe[0].y-xe[3].y,li=$e*wt-yt*gt,Di=yt*Qt-nn*wt,xi=nn*Rn-kn*Qt,Ji=kn*gt-$e*Rn;return li>0&&Di>0&&xi>0&&Ji>0||li<0&&Di<0&&xi<0&&Ji<0}(s))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const u=zc(this.tileID,this.map.transform.projection),[m,g,E,T]=this.coordinates.map(xe=>{const $e=u.projection.project(xe[0],xe[1]);return kv(u,$e)._round()});this.perspectiveTransform=v3(m.x,m.y,g.x,g.y,E.x,E.y,T.x,T.y);const z=this._boundsArray=new e0;z.emplaceBack(m.x,m.y,0,0),z.emplaceBack(g.x,g.y,Xi,0),z.emplaceBack(T.x,T.y,0,Xi),z.emplaceBack(E.x,E.y,Xi,Xi),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=e.createVertexBuffer(z,Nh.members),this.boundsSegments=ul.simpleSegment(0,0,4,2);const $=[],W=[X4((xe=this.coordinates)[0]),X4(xe[1]),X4(xe[2]),X4(xe[3])],[Z,le,de,be]=function(xe){let $e=xe[0][0],gt=$e,yt=xe[0][1],wt=yt;for(let nn=1;nn<xe.length;nn++)xe[nn][0]<$e?$e=xe[nn][0]:xe[nn][0]>gt&&(gt=xe[nn][0]),xe[nn][1]<yt?yt=xe[nn][1]:xe[nn][1]>wt&&(wt=xe[nn][1]);return[$e,yt,gt-$e,wt-yt]}(W);var xe;{const xe=new e0,[$e,gt,yt,wt]=function(zi){let bo=zi[0].x,Ro=bo,Co=zi[0].y,lr=Co;for(let To=1;To<zi.length;To++)zi[To].x<bo?bo=zi[To].x:zi[To].x>Ro&&(Ro=zi[To].x),zi[To].y<Co?Co=zi[To].y:zi[To].y>lr&&(lr=zi[To].y);return[bo,Co,Ro-bo,lr-Co]}(s),nn=zi=>[(zi.x-$e)/yt,(zi.y-gt)/wt],[Qt,kn,Rn,li]=s.map(nn),Di=function(zi,bo,Ro,Co,lr,To,Fo,Yr){const Br=Vv(0,0,1,0,1,1,0,1),Rr=Vv(zi,bo,Ro,Co,lr,To,Fo,Yr),Lo=l.bC.adjoint([],Rr);return l.bC.multiply(Br,Br,Lo)}(Qt[0],Qt[1],kn[0],kn[1],Rn[0],Rn[1],li[0],li[1]);this.elevatedGlobePerspectiveTransform=v3(Qt[0],Qt[1],kn[0],kn[1],Rn[0],Rn[1],li[0],li[1]);const xi=(zi,bo)=>{$.push(zi.lng);const Ro=Math.round((zi.lng-Z)/de*Xi),Co=Math.round((zi.lat-le)/be*Xi),lr=nn(bo),To=l._.transformMat3([],[lr[0],lr[1],1],Di),Fo=Math.round(To[0]/To[2]*Xi),Yr=Math.round(To[1]/To[2]*Xi);xe.emplaceBack(Ro,Co,Fo,Yr)},Ji=s[3].x-s[0].x,So=s[3].y-s[0].y,qi=s[2].x-s[1].x,wo=s[2].y-s[1].y;for(let zi=0;zi<65;zi++){const bo=zi/64,Ro=[s[0].x+bo*Ji,s[0].y+bo*So],Co=[s[1].x+bo*qi,s[1].y+bo*wo],lr=Co[0]-Ro[0],To=Co[1]-Ro[1];for(let Fo=0;Fo<65;Fo++){const Yr=Fo/64,Br={x:Ro[0]+lr*Yr,y:Ro[1]+To*Yr,z:0};xi(n.projection.unproject(Br.x,Br.y),Br)}}this.elevatedGlobeVertexBuffer=e.createVertexBuffer(xe,Nh.members)}{this.maxLongitudeTriangleSize=0;let xe=[],$e=new bc;const gt=(yt,wt,nn)=>{$e.emplaceBack(yt,wt,nn);const Qt=$[yt],kn=$[wt],Rn=$[nn],li=Math.min(Math.min(Qt,kn),Rn),Di=Math.max(Math.max(Qt,kn),Rn)-li;Di>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Di),xe.push(li+Di/2)};for(let yt=0;yt<64;yt++)for(let wt=0;wt<64;wt++){const nn=65*yt+wt,Qt=nn+1,kn=nn+65,Rn=kn+1;gt(nn,kn,Qt),gt(Qt,kn,Rn)}[xe,$e]=function(yt,wt){const nn=Array.from({length:yt.length},(Rn,li)=>li);nn.sort((Rn,li)=>yt[Rn]-yt[li]);const Qt=[],kn=new bc;for(let Rn=0;Rn<nn.length;Rn++){const li=nn[Rn];Qt.push(yt[li]);const Di=3*li,xi=Di+1;kn.emplaceBack(wt.uint16[Di],wt.uint16[xi],wt.uint16[xi+1])}return[Qt,kn]}(xe,$e),this.elevatedGlobeTrianglesCenterLongitudes=xe,this.elevatedGlobeIndexBuffer=e.createIndexBuffer($e)}this.elevatedGlobeSegments=ul.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,de/Xi,0,be/Xi,0,0,le,Z,0])}prepare(){const e=0!==Object.keys(this.tiles).length;if(this.tileID&&!e)return;const n=this.map.painter.context,s=n.gl;!this._dirty||this.texture instanceof Ao||(this.texture?this.texture.update(this.image):(this.texture=new Ui(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this._dirty=!1),e&&this._prepareData(n)}loadTile(e,n){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},n(null)):(e.state="errored",n(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(e){const n=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!n)return null;const s=this.elevatedGlobeTrianglesCenterLongitudes;let u=(m=e+180)+360*Math.round((s[0]-m)/360);var m;const g=new ul,E=(W,Z)=>{g.segments.push({vertexOffset:0,primitiveOffset:W,vertexLength:n.segments[0].vertexLength,primitiveLength:Z,sortKey:void 0,vaos:{}})},T=.51*this.maxLongitudeTriangleSize;if(Math.abs(s[0]-u)<=T){const W=$n(s,0,s.length,u+T);return W===s.length||E(W,an(s,W+1,s.length,u+360-T)-W),g}u<s[0]&&(u+=360);const z=an(s,0,s.length,u-T);if(z===s.length)return E(0,s.length),g;E(0,z-0);const $=$n(s,z+1,s.length,u+T);return $!==s.length&&E($,s.length-$),g}}const y3=(Math.pow(256,2)-1)/16907520;class w6 extends nl{constructor(e,n,s,u){super(e,b6,n,s,u),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(e){return!(e&&e._source instanceof _3&&(e._source.onNorthPole||e._source.onSouthPole))&&0===this.paint.get("raster-elevation")}_handleSpecialPaintPropertyUpdate(e){"raster-color"!==e&&"raster-color-range"!==e||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(e){if(!this.hasColorMap()||!this._curRampRange)return;const n=this._transitionablePaint._values["raster-color"].value.expression,[s,u]=e||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(s)&&isNaN(u)||s===this._curRampRange[0]&&u===this._curRampRange[1]||(this.colorRamp=vp({expression:n,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:s,end:u}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[s,u])}}const A5=new ma({visibility:new Ki(ai["layout_raster-particle"].visibility)});var D5={paint:new ma({"raster-particle-array-band":new Ki(ai["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Ki(ai["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new us(ai["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Ki(ai["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Ki(ai["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Ki(ai["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Ki(ai["paint_raster-particle"]["raster-particle-reset-rate-factor"])}),layout:A5};class x6 extends nl{constructor(e,n,s,u){super(e,D5,n,s,u),this._updateColorRamp(),this.lastInvalidatedAt=mi.now()}onRemove(e){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return"none"!==this.visibility}isDraped(e){return!1}_handleSpecialPaintPropertyUpdate(e){"raster-particle-color"!==e&&"raster-particle-max-speed"!==e||(this._updateColorRamp(),this._invalidateAnimationState()),"raster-particle-count"===e&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const e=this._transitionablePaint._values["raster-particle-color"].value.expression,n=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=vp({expression:e,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:n}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=mi.now()}}class P5 extends nl{constructor(e,n){super(e,{},n,null),this.implementation=e,e.slot&&(this.slot=e.slot)}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isDraped(e){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}const R5=new ma({visibility:new Ki(ai.layout_sky.visibility)});var b3={paint:new ma({"sky-type":new Ki(ai.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ki(ai.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ki(ai.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ki(ai.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ki(ai.paint_sky["sky-gradient-radius"]),"sky-gradient":new us(ai.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ki(ai.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ki(ai.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ki(ai.paint_sky["sky-opacity"])}),layout:R5};function w3(t,e,n){const s=[0,0,1],u=l.av.identity([]);return l.av.rotateY(u,u,n?-Gr(t)+Math.PI:Gr(t)),l.av.rotateX(u,u,-Gr(e)),l._.transformQuat(s,s,u),l._.normalize(s,s)}var z5={paint:new ma({})};function I6(t,e){const n=pg(t.projection,t.zoom,t.width,t.height),s=function(m,g,E,T,z){const $=new oa(E.lng-180*tm,E.lat),W=new oa(E.lng+180*tm,E.lat),Z=m.project($.lng,$.lat),le=m.project(W.lng,W.lat),de=-Math.atan2(le.y-Z.y,le.x-Z.x),be=jd.fromLngLat(E);be.y=zn(be.y,-1+tm,1-tm);const xe=be.toLngLat(),$e=m.project(xe.lng,xe.lat),gt=jd.fromLngLat(xe);gt.x+=tm;const yt=gt.toLngLat(),wt=m.project(yt.lng,yt.lat),nn=E6(wt.x-$e.x,wt.y-$e.y,de),Qt=jd.fromLngLat(xe);Qt.y+=tm;const kn=Qt.toLngLat(),Rn=m.project(kn.lng,kn.lat),li=E6(Rn.x-$e.x,Rn.y-$e.y,de),Di=Math.abs(nn.x)/Math.abs(li.y),xi=l.ad.identity([]);l.ad.rotateZ(xi,xi,-de*(1-(z?0:T)));const Ji=l.ad.identity([]);return l.ad.scale(Ji,Ji,[1,1-(1-Di)*T,1]),Ji[4]=-li.x/li.y*T,l.ad.rotateZ(Ji,Ji,de),l.ad.multiply(Ji,xi,Ji),Ji}(t.projection,0,t.center,n,e),u=hg(t);return l.ad.scale(s,s,[u,u,1]),s}function hg(t){const e=t.projection,n=pg(t.projection,t.zoom,t.width,t.height),s=$v(e,t.center),u=$v(e,oa.convert(e.center));return Math.pow(2,s*n+(1-n)*u)}function pg(t,e,n,s,u=1/0){const m=t.range;if(!m)return 0;const g=Math.min(u,Math.max(n,s)),E=Math.log(g/1024)/Math.LN2;return vi(m[0]+E,m[1]+E,e)}const tm=1/4e4;function $v(t,e){const n=zn(e.lat,-nc,nc),s=new oa(e.lng-180*tm,n),u=new oa(e.lng+180*tm,n),m=t.project(s.lng,n),g=t.project(u.lng,n),E=jd.fromLngLat(s),T=jd.fromLngLat(u),z=g.x-m.x,$=g.y-m.y,W=T.x-E.x,Z=T.y-E.y,le=Math.sqrt((W*W+Z*Z)/(z*z+$*$));return Math.log(le)/Math.LN2}function E6(t,e,n){const s=Math.cos(n),u=Math.sin(n);return{x:t*s-e*u,y:t*u+e*s}}function Zg(t,e,n){l.ad.identity(t),l.ad.rotateZ(t,t,Gr(e[2])),l.ad.rotateX(t,t,Gr(e[0])),l.ad.rotateY(t,t,Gr(e[1])),l.ad.scale(t,t,n),l.ad.multiply(t,t,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function K4(t,e,n,s,u,m,g,E){const T=[n[0]-e[0],n[1]-e[1],0],z=[s[0]-e[0],s[1]-e[1],0];if(l._.length(T)<1e-12||l._.length(z)<1e-12)return l.av.identity(t);const $=l._.cross([],T,z);l._.normalize($,$),l._.subtract(z,s,e),T[2]=(m-u)*E,z[2]=(g-u)*E;const W=T;return l._.cross(W,T,z),l._.normalize(W,W),l.av.rotationTo(t,$,W)}function x3(t,e,n=!1){const s=Ih(e.zoom),u=function(m,g,E){const T=g.worldSize,z=[m[12],m[13],m[14]],$=$c(z[1]/T),W=Tu(z[0]/T),Z=l.ad.identity([]),le=El(1,$)*T,de=El(1,0)*T*Xl($,g.zoom),be=1/Xf(T);let xe=de*be;if(E){const wt=pg(g.projection,g.zoom,g.width,g.height,1024);xe=be*g.projection.pixelSpaceConversion(g.center.lat,T,wt)}const $e=xc($,W);l._.add($e,$e,l._.scale([],l._.normalize([],$e),le*xe*z[2]));const gt=function(wt){const nn=[wt[0],wt[1],wt[2]];let Qt=[0,1,0];const kn=l._.cross([],Qt,nn);return l._.cross(Qt,nn,kn),0===l._.squaredLength(Qt)&&(Qt=[0,1,0],l._.cross(kn,nn,Qt)),l._.normalize(kn,kn),l._.normalize(Qt,Qt),l._.normalize(nn,nn),[kn[0],kn[1],kn[2],0,Qt[0],Qt[1],Qt[2],0,nn[0],nn[1],nn[2],0,wt[0],wt[1],wt[2],1]}($e);l.ad.scale(Z,Z,[xe,xe,xe*le]),l.ad.translate(Z,Z,[-z[0],-z[1],-z[2]]);const yt=l.ad.multiply([],g.globeMatrix,gt);return l.ad.multiply(yt,yt,Z),l.ad.multiply(yt,yt,m),yt}(t,e,n);return s>0?function(g,E,T){const z=(de,be,xe)=>{const $e=l._.length(de),gt=l._.length(be),yt=Ud(de,be,xe);return l._.scale(yt,yt,1/l._.length(yt)*Cr($e,gt,xe))},$=z([g[0],g[1],g[2]],[E[0],E[1],E[2]],T),W=z([g[4],g[5],g[6]],[E[4],E[5],E[6]],T),Z=z([g[8],g[9],g[10]],[E[8],E[9],E[10]],T),le=Ud([g[12],g[13],g[14]],[E[12],E[13],E[14]],T);return[$[0],$[1],$[2],0,W[0],W[1],W[2],0,Z[0],Z[1],Z[2],0,le[0],le[1],le[2],1]}(u,function(g,E){const T=E.worldSize,z=El(1,0)*T*Xl(E.center.lat,E.zoom)/Xf(T),$=El(1,E.center.lat)*T,W=l.ad.identity([]);return l.ad.rotateY(W,W,Gr(E.center.lng)),l.ad.rotateX(W,W,Gr(E.center.lat)),l.ad.translate(W,W,[0,0,$d]),l.ad.scale(W,W,[z,z,z*$]),l.ad.translate(W,W,[E.point.x-.5*T,E.point.y-.5*T,0]),l.ad.multiply(W,W,g),l.ad.multiply(W,E.globeMatrix,W)}(t,e),s):u}function C6(t,e,n,s){const u=Ml.projectAabbCorners(s,n);let m=Number.MAX_VALUE,g=-1;for(let z=0;z<u.length;++z){const $=u[z];$[0]=(.5*$[0]+.5)*e.width,$[1]=(.5-.5*$[1])*e.height,$[2]<m&&(g=z,m=$[2])}const E=z=>new Eo(u[z][0],u[z][1]);let T;switch(g){case 0:case 6:T=[E(1),E(5),E(4),E(7),E(3),E(2),E(1)];break;case 1:case 7:T=[E(0),E(4),E(5),E(6),E(2),E(3),E(0)];break;case 3:case 5:T=[E(1),E(0),E(4),E(7),E(6),E(2),E(1)];break;default:T=[E(1),E(5),E(6),E(7),E(3),E(0),E(1)]}if(k1(t,T))return m}const O5=wa([{name:"a_pos_3f",components:3,type:"Float32"}]),L5=wa([{name:"a_color_3f",components:3,type:"Float32"}]),B5=wa([{name:"a_color_4f",components:4,type:"Float32"}]),k6=wa([{name:"a_uv_2f",components:2,type:"Float32"}]),N5=wa([{name:"a_normal_3f",components:3,type:"Float32"}]),S6=wa([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),jv=wa([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class Uv{constructor(e,n,s,u){this.message=(e?`${e}: `:"")+s,u&&(this.identifier=u),null!=n&&n.__line__&&(this.line=n.__line__)}}function T6(t,e){const n=-1===t.indexOf("://");try{return new URL(t,n&&e?"http://example.com":void 0),!0}catch{return!1}}class I3{constructor(e,n){this.feature=e,this.instancedDataOffset=n,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class M6{constructor(){this.instancedDataArray=new pc,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class E3{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.projection=e.projection,this.index=e.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(e,n){}populate(e,n,s,u){this.tileToMeter=Hf(s);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:g,id:E,index:T,sourceLayerIndex:z}of e){const $=null!=E?E:g.properties&&g.properties.hasOwnProperty("id")?g.properties.id:void 0,W=F0(g,m);if(!this.layers[0]._featureFilter.filter(new os(this.zoom),W,s))continue;const Z={id:$,sourceLayerIndex:z,index:T,geometry:m?W.geometry:u1(g,s,u),properties:g.properties,type:g.type,patterns:{}},le=this.addFeature(Z,Z.geometry,W);le&&n.featureIndex.insert(g,Z.geometry,T,z,this.index,this.instancesPerModel[le].instancedDataArray.length,Xi/32)}this.lookup=null}update(e,n,s,u){for(const m in this.instancesPerModel){const g=this.instancesPerModel[m];for(const E in e)g.idToFeaturesIndex.hasOwnProperty(E)&&(this.evaluate(g.features[g.idToFeaturesIndex[E]],e[E],g,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let e=!1;for(const n in this.instancesPerModel){const s=this.instancesPerModel[n];for(const u of s.features){const m=this.layers[0],g=u.feature,E=this.canonical,T=m.paint.get("model-rotation").evaluate(g,{},E),z=m.paint.get("model-scale").evaluate(g,{},E),$=m.paint.get("model-translation").evaluate(g,{},E);l._.exactEquals(u.rotation,T)&&l._.exactEquals(u.scale,z)&&l._.exactEquals(u.translation,$)||(this.evaluate(u,u.featureStates,s,!0),e=!0)}}return e}updateReplacement(e,n,s){if(n.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=n.updateTime;const u=n.getReplacementRegionsForTile(e.toUnwrapped(),!0);if(qp(this.activeReplacements,u))return!1;this.activeReplacements=u;let m=!1;for(const g in this.instancesPerModel){const E=this.instancesPerModel[g],T=E.instancedDataArray;for(const z of E.features){const $=z.instancedDataOffset,W=z.instancedDataCount;for(let Z=0;Z<W;Z++){const le=16*(Z+$);let de=T.float32[le+0];de=de>Xi?de-Xi:de;const be=Math.floor(de),xe=T.float32[le+1];let $e=!1;for(const gt of this.activeReplacements)if(!(gt.order<s||gt.order===1/0)&&gt.clipMask&_v.Model&&!(gt.min.x>be||be>gt.max.x||gt.min.y>xe||xe>gt.max.y)&&($e=Ag(a4(be,xe,e.canonical,gt.footprintTileId.canonical),gt),$e))break;T.float32[le]=$e?de+Xi:de,m=m||$e}}}return m}isEmpty(){for(const e in this.instancesPerModel)if(0!==this.instancesPerModel[e].instancedDataArray.length)return!1;return!0}uploadPending(){return!this.uploaded}upload(e){if(!this.uploaded)for(const n in this.instancesPerModel){const s=this.instancesPerModel[n];s.instancedDataArray.length<0||0===s.instancedDataArray.length||(s.instancedDataBuffer?s.instancedDataBuffer.updateData(s.instancedDataArray):s.instancedDataBuffer=e.createVertexBuffer(s.instancedDataArray,S6.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const n in this.instancesPerModel){const s=this.instancesPerModel[n];0!==s.instancedDataArray.length&&s.instancedDataBuffer&&s.instancedDataBuffer.destroy()}const e=this.layers[0].modelManager;if(e&&this.modelUris)for(const n of this.modelUris)e.removeModel(n,"")}addFeature(e,n,s){const u=this.layers[0],m=u.layout.get("model-id").evaluate(s,{},this.canonical);if(!m)return fa(`modelId is not evaluated for layer ${u.id} and it is not going to get rendered.`),m;T6(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new M6);const g=this.instancesPerModel[m],E=g.instancedDataArray,T=new I3(s,E.length);for(const z of n)for(const $ of z){if($.x<0||$.x>=Xi||$.y<0||$.y>=Xi)continue;const W=(this.lookupDim-1)/Xi,Z=this.lookupDim*($.y*W|0)+$.x*W|0;if(this.lookup){if(0!==this.lookup[Z])continue;this.lookup[Z]=1}this.instanceCount++;const le=E.length;E.resize(le+1),g.instancesEvaluatedElevation.push(0),E.float32[16*le]=$.x,E.float32[16*le+1]=$.y}return T.instancedDataCount=g.instancedDataArray.length-T.instancedDataOffset,T.instancedDataCount>0&&(e.id&&(g.idToFeaturesIndex[e.id]=g.features.length),g.features.push(T),this.evaluate(T,{},g,!1)),m}getModelUris(){return this.modelUris}evaluate(e,n,s,u){const m=this.layers[0],g=e.feature,E=this.canonical,T=e.rotation=m.paint.get("model-rotation").evaluate(g,n,E),z=e.scale=m.paint.get("model-scale").evaluate(g,n,E),$=e.translation=m.paint.get("model-translation").evaluate(g,n,E),W=m.paint.get("model-color").evaluate(g,n,E);W.a=m.paint.get("model-color-mix-intensity").evaluate(g,n,E);const Z=[];this.maxVerticalOffset<$[2]&&(this.maxVerticalOffset=$[2]),this.maxScale=Math.max(Math.max(this.maxScale,z[0]),Math.max(z[1],z[2])),Zg(Z,T,z);const le=Math.round(100*W.a)+W.b/1.05;for(let de=0;de<e.instancedDataCount;++de){const be=e.instancedDataOffset+de,xe=16*be,$e=s.instancedDataArray.float32;let gt=0;u&&(gt=$e[xe+6]-s.instancesEvaluatedElevation[be]);const yt=0|$e[xe+1];$e[xe]=(0|$e[xe])+W.r/1.05,$e[xe+1]=yt+W.g/1.05,$e[xe+2]=le,$e[xe+3]=1/(E.z>10?this.tileToMeter:Hf(E,yt)),$e[xe+4]=$[0],$e[xe+5]=$[1],$e[xe+6]=$[2]+gt,$e[xe+7]=Z[0],$e[xe+8]=Z[1],$e[xe+9]=Z[2],$e[xe+10]=Z[4],$e[xe+11]=Z[5],$e[xe+12]=Z[6],$e[xe+13]=Z[8],$e[xe+14]=Z[9],$e[xe+15]=Z[10],s.instancesEvaluatedElevation[be]=$[2]}}}lt(E3,"ModelBucket",{omit:["layers"]}),lt(M6,"PerModelAttributes"),lt(I3,"ModelFeature");const Qg=new ma({visibility:new Ki(ai.layout_model.visibility),"model-id":new er(ai.layout_model["model-id"])});var E4={paint:new ma({"model-opacity":new Ki(ai.paint_model["model-opacity"]),"model-rotation":new er(ai.paint_model["model-rotation"]),"model-scale":new er(ai.paint_model["model-scale"]),"model-translation":new er(ai.paint_model["model-translation"]),"model-color":new er(ai.paint_model["model-color"]),"model-color-mix-intensity":new er(ai.paint_model["model-color-mix-intensity"]),"model-type":new Ki(ai.paint_model["model-type"]),"model-cast-shadows":new Ki(ai.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ki(ai.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ki(ai.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new er(ai.paint_model["model-emissive-strength"]),"model-roughness":new er(ai.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new er(ai.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ki(ai.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Ki(ai.paint_model["model-front-cutoff"])}),layout:Qg};const Y4={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function C3(t,e,n,s,u,m,g,E,T,z=!1){const $=n.zoom,W=n.project(s),Z=Xl(s.lat,$),le=1/Z;l.ad.identity(t),l.ad.translate(t,t,[W.x+g[0]*le,W.y+g[1]*le,g[2]]);let de=1,be=1;const xe=n.worldSize;if(z){if("mercator"===n.projection.name){let wt=0;n.elevation&&(wt=n.elevation.getAtPointOrZero(new jd(W.x/xe,W.y/xe),0));const nn=l.aA.transformMat4([],[W.x,W.y,wt,1],n.projMatrix)[3]/n.cameraToCenterDistance;de=nn,be=nn*Xl(n.center.lat,$)}else if("globe"===n.projection.name){const wt=x3(t,n),nn=l.ad.multiply([],n.projMatrix,wt),Qt=[0,0,0,1];l.aA.transformMat4(Qt,Qt,nn);const kn=Qt[3]/n.cameraToCenterDistance,Rn=Ih($),li=n.projection.pixelsPerMeter(s.lat,xe)*Xl(s.lat,$),Di=n.projection.pixelsPerMeter(n.center.lat,xe)*Xl(n.center.lat,$);de=kn/Cr(li,pf(n.center.lat),Rn),be=kn*Z/li,de*=Di,be*=Di}}else de=le;l.ad.scale(t,t,[de,de,be]);const $e=[...t],gt=e.orientation,yt=[];if(Zg(yt,[gt[0]+u[0],gt[1]+u[1],gt[2]+u[2]],m),l.ad.multiply(t,$e,yt),E&&n.elevation){let wt=0;const nn=[];if(T&&n.elevation){wt=function(Rn,li,Di,xi,Ji){const So=li.elevation;if(!So)return 0;const qi=Ml.projectAabbCorners(Di,xi),wo=El(1,Ji.lat)*li.worldSize,zi=function(Zr,ta){const Ss=[0,0,1],da=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const ra of da){const ka=Zr[ra.corners[0]],bs=Zr[ra.corners[1]],jl=Zr[ra.corners[2]],Pl=[bs[0]-ka[0],bs[1]-ka[1],ta*(bs[2]-ka[2])],Ya=l._.cross(Pl,Pl,[jl[0]-ka[0],jl[1]-ka[1],ta*(jl[2]-ka[2])]);l._.normalize(Ya,Ya),ra.dotProductWithUp=l._.dot(Ya,Ss)}return da.sort((ra,ka)=>ra.dotProductWithUp-ka.dotProductWithUp),da[0].corners}(qi,wo),bo=qi[zi[0]],Ro=qi[zi[1]],Co=qi[zi[2]],lr=qi[zi[3]],To=So.getAtPointOrZero(new jd(bo[0]/li.worldSize,bo[1]/li.worldSize),0),Fo=So.getAtPointOrZero(new jd(Ro[0]/li.worldSize,Ro[1]/li.worldSize),0),Yr=So.getAtPointOrZero(new jd(Co[0]/li.worldSize,Co[1]/li.worldSize),0),Br=So.getAtPointOrZero(new jd(lr[0]/li.worldSize,lr[1]/li.worldSize),0),Rr=(To+Br)/2,Lo=(Fo+Yr)/2;return Rr>Lo?Fo<Yr?K4(Rn,Ro,lr,bo,Fo,Br,To,wo):K4(Rn,Co,bo,lr,Yr,To,Br,wo):To<Br?K4(Rn,bo,Ro,Co,To,Fo,Yr,wo):K4(Rn,lr,Co,Ro,Br,Yr,Fo,wo),Math.max(Rr,Lo)}(nn,n,e.aabb,t,s);const Qt=l.ad.fromQuat([],nn),kn=l.ad.multiply([],Qt,yt);l.ad.multiply(t,$e,kn)}else wt=n.elevation.getAtPointOrZero(new jd(W.x/xe,W.y/xe),0);0!==wt&&(t[14]+=wt)}}function Z4(t,e,n=!1){t.uploaded||(t.gfxTexture=new Ui(e,t.image,n?e.gl.R8:e.gl.RGBA,{useMipmap:t.sampler.minFilter>=e.gl.NEAREST_MIPMAP_NEAREST}),t.uploaded=!0,t.image=null)}function A6(t,e,n){t.indexBuffer=e.createIndexBuffer(t.indexArray,!1,!0),t.vertexBuffer=e.createVertexBuffer(t.vertexArray,O5.members,!1,!0),t.normalArray&&(t.normalBuffer=e.createVertexBuffer(t.normalArray,N5.members,!1,!0)),t.texcoordArray&&(t.texcoordBuffer=e.createVertexBuffer(t.texcoordArray,k6.members,!1,!0)),t.colorArray&&(t.colorBuffer=e.createVertexBuffer(t.colorArray,(12===t.colorArray.bytesPerElement?L5:B5).members,!1,!0)),t.featureArray&&(t.pbrBuffer=e.createVertexBuffer(t.featureArray,jv.members,!0)),t.segments=ul.simpleSegment(0,0,t.vertexArray.length,t.indexArray.length);const s=t.material;s.pbrMetallicRoughness.baseColorTexture&&Z4(s.pbrMetallicRoughness.baseColorTexture,e),s.pbrMetallicRoughness.metallicRoughnessTexture&&Z4(s.pbrMetallicRoughness.metallicRoughnessTexture,e),s.normalTexture&&Z4(s.normalTexture,e),s.occlusionTexture&&Z4(s.occlusionTexture,e,n),s.emissionTexture&&Z4(s.emissionTexture,e)}function k3(t,e,n){if(t.meshes)for(const s of t.meshes)A6(s,e,n);if(t.children)for(const s of t.children)k3(s,e,n)}function Q4(t){if(t.meshes)for(const e of t.meshes)e.indexArray.destroy(),e.vertexArray.destroy(),e.colorArray&&e.colorArray.destroy(),e.normalArray&&e.normalArray.destroy(),e.texcoordArray&&e.texcoordArray.destroy(),e.featureArray&&e.featureArray.destroy();if(t.children)for(const e of t.children)Q4(e)}function S3(t){if(t.meshes)for(const n of t.meshes)n.vertexBuffer&&(n.vertexBuffer.destroy(),n.indexBuffer.destroy(),n.normalBuffer&&n.normalBuffer.destroy(),n.texcoordBuffer&&n.texcoordBuffer.destroy(),n.colorBuffer&&n.colorBuffer.destroy(),n.pbrBuffer&&n.pbrBuffer.destroy(),n.segments.destroy(),n.material&&((e=n.material).pbrMetallicRoughness.baseColorTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),e.pbrMetallicRoughness.metallicRoughnessTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),e.normalTexture&&e.normalTexture.gfxTexture&&e.normalTexture.gfxTexture.destroy(),e.emissionTexture&&e.emissionTexture.gfxTexture&&e.emissionTexture.gfxTexture.destroy(),e.occlusionTexture&&e.occlusionTexture.gfxTexture&&e.occlusionTexture.gfxTexture.destroy()));var e;if(t.children)for(const n of t.children)S3(n)}class F5{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class J4{constructor(){this.tasks={},this.taskQueue=[],ca(["process"],this),this.invoker=new F5(this.process),this.nextId=0}add(e,n){const s=this.nextId++,u=function({type:m,isSymbolTile:g,zoom:E}){return E=E||0,"message"===m?0:"maybePrepare"!==m||g?"parseTile"!==m||g?"parseTile"===m&&g?300-E:"maybePrepare"===m&&g?400-E:500:200-E:100-E}(n);if(0===u){try{e()}finally{}return null}return this.tasks[s]={fn:e,metadata:n,priority:u,id:s},this.taskQueue.push(s),this.invoker.trigger(),{cancel:()=>{delete this.tasks[s]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(s=>!!this.tasks[s]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const n=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}pick(){let e=null,n=1/0;for(let u=0;u<this.taskQueue.length;u++){const m=this.tasks[this.taskQueue[u]];m.priority<n&&(n=m.priority,e=u)}if(null===e)return null;const s=this.taskQueue[e];return this.taskQueue.splice(e,1),s}remove(){this.invoker.remove()}}class Hv{constructor(e,n,s){this.target=e,this.parent=n,this.mapId=s,this.callbacks={},this.cancelCallbacks={},ca(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new J4}send(e,n,s,u,m=!1,g){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=g,this.callbacks[E]=s);const T=new Set;return this.target.postMessage({id:E,type:e,hasCallback:!!s,targetMapId:u,mustQueue:m,sourceMapId:this.mapId,data:ci(n,T)},T),{cancel:()=>{s&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(e){const n=e.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){const u=this.cancelCallbacks[s];delete this.cancelCallbacks[s],u&&u.cancel()}else if(n.mustQueue||Sc()){const u=this.callbacks[s],m=this.scheduler.add(()=>this.processTask(s,n),u&&u.metadata||{type:"message"});m&&(this.cancelCallbacks[s]=m)}else this.processTask(s,n)}processTask(e,n){if(delete this.cancelCallbacks[e],"<response>"===n.type){const s=this.callbacks[e];delete this.callbacks[e],s&&(n.error?s(Dn(n.error)):s(null,Dn(n.data)))}else{const s=new Set,u=n.hasCallback?(g,E)=>{this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:g?ci(g):null,data:ci(E,s)},s)}:g=>{},m=Dn(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,m,u);else if(this.parent.getWorkerSource){const g=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,g[0],m.source,m.scope)[g[1]](m,u)}else u(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}let Gv=(()=>{class t{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=cr();const u=this.workerPool.acquire(this.id);for(let m=0;m<u.length;m++){const g=new t.Actor(u[m],s,this.id);g.name=`Worker ${m}`,this.actors.push(g)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(n,s,u){yo(this.actors,(m,g)=>{m.send(n,s,g)},u=u||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}return t.Actor=Hv,t})();var ev={workerUrl:"",workerClass:null,workerParams:void 0};function D6(){return null!=ev.workerClass?new ev.workerClass:new self.Worker(ev.workerUrl,ev.workerParams)}const P6="mapboxgl_preloaded_worker_pool";class C4{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<C4.workerCount;)this.workers.push(new D6);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.workers&&0===this.numActive()&&(this.workers.forEach(n=>{n.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[P6]}numActive(){return Object.keys(this.active).length}}let m0;function tv(){return m0||(m0=new C4),m0}C4.workerCount=2;let nv,Wv,nm,nu,T3,fg=null;function R6(){return Sc()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:Wv||ft.DRACO_URL}function z6(){if(Sc()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(nu)return nu;const t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if("object"!=typeof WebAssembly)throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return nu=WebAssembly.validate(t)?ft.MESHOPT_SIMD_URL:ft.MESHOPT_URL,nu}const k4={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},O6={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},S4={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function qv(t,e,n){const s=n.json.bufferViews.length,u=n.buffers.length;e.bufferView=s,n.json.bufferViews[s]={buffer:u,byteLength:t.byteLength},n.buffers[u]=t}const M3="KHR_draco_mesh_compression";function V5(t,e){const n=t.extensions&&t.extensions[M3];if(!n)return;const s=new nm.Decoder,u=L6(e,n.bufferView),m=new nm.Mesh;if(!s.DecodeArrayToMesh(u,u.byteLength,m))throw new Error("Failed to decode Draco mesh");const g=e.json.accessors[t.indices],E=k4[g.componentType],T=g.count*E.BYTES_PER_ELEMENT,z=nm._malloc(T);E===Uint16Array?s.GetTrianglesUInt16Array(m,T,z):s.GetTrianglesUInt32Array(m,T,z),qv(nm.memory.buffer.slice(z,z+T),g,e),nm._free(z);for(const $ of Object.keys(n.attributes)){const W=s.GetAttributeByUniqueId(m,n.attributes[$]),Z=e.json.accessors[t.attributes[$]],le=O6[Z.componentType],de=Z.count*S4[Z.type]*k4[Z.componentType].BYTES_PER_ELEMENT,be=nm._malloc(de);s.GetAttributeDataArrayForAllPoints(m,W,nm[le],de,be),qv(nm.memory.buffer.slice(be,be+de),Z,e),nm._free(be)}s.destroy(),m.destroy(),delete t.extensions[M3]}const iv="EXT_meshopt_compression";function $5(t,e){if(!t.extensions||!t.extensions[iv])return;const n=t.extensions[iv],s=new Uint8Array(e.buffers[n.buffer],n.byteOffset||0,n.byteLength||0),u=new Uint8Array(n.count*n.byteStride);T3.decodeGltfBuffer(u,n.count,n.byteStride,s,n.mode,n.filter),t.buffer=e.buffers.length,t.byteOffset=0,e.buffers[t.buffer]=u.buffer,delete t.extensions[iv]}const D1=1179937895,A3=new TextDecoder("utf8");function Xv(t,e){return new URL(t,e).href}function j5(t,e,n,s){return fetch(Xv(t.uri,s)).then(u=>u.arrayBuffer()).then(u=>{e.buffers[n]=u})}function L6(t,e){const n=t.json.bufferViews[e];return new Uint8Array(t.buffers[n.buffer],n.byteOffset||0,n.byteLength)}function U5(t,e,n,s){if(t.uri){const u=Xv(t.uri,s);return fetch(u).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{e.images[n]=m})}if(void 0!==t.bufferView){const u=L6(e,t.bufferView),m=new Blob([u],{type:t.mimeType});return createImageBitmap(m).then(g=>{e.images[n]=g})}}function D3(t,e=0,n){const s={json:null,images:[],buffers:[]};if(new Uint32Array(t,e,1)[0]===D1){const $=new Uint32Array(t,e);let W=2;const Z=($[W++]>>2)-3,le=$[W++]>>2;if(W++,s.json=JSON.parse(A3.decode($.subarray(W,W+le))),W+=le,W<Z){const de=$[W++];W++;const be=e+(W<<2);s.buffers[0]=t.slice(be,be+de)}}else s.json=JSON.parse(A3.decode(new Uint8Array(t,e)));const{buffers:u,images:m,meshes:g,extensionsUsed:E,bufferViews:T}=s.json;let z=Promise.resolve();if(u){const $=[];for(let W=0;W<u.length;W++){const Z=u[W];Z.uri?$.push(j5(Z,s,W,n)):s.buffers[W]||(s.buffers[W]=null)}z=Promise.all($)}return z.then(()=>{const $=[],W=E&&E.includes(M3),Z=E&&E.includes(iv);if(W&&$.push(function(){if(!nm)return nv||(nv=function(le){let de,be=null;function xe(){de=new Uint8Array(be.buffer)}function $e(){throw new Error("Unexpected Draco error.")}const gt={a:{a:$e,d:function(yt,wt,nn){return de.copyWithin(yt,wt,wt+nn)},c:function(yt){const wt=de.length,nn=Math.max(yt>>>0,Math.ceil(1.2*wt)),Qt=Math.ceil((nn-wt)/65536);try{return be.grow(Qt),xe(),!0}catch{return!1}},b:$e}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(le,gt):le.then(yt=>yt.arrayBuffer()).then(yt=>WebAssembly.instantiate(yt,gt))).then(yt=>{const{Rb:wt,Qb:nn,P:Qt,T:kn,X:Rn,Ja:li,La:Di,Qa:xi,Va:Ji,Wa:So,eb:qi,jb:wo,f:zi,e:bo,yb:Ro,zb:Co,Ab:lr,Bb:To,Db:Fo,Gb:Yr}=yt.instance.exports;be=bo;const Br=(()=>{let Rr=0,Lo=0,Zr=0,ta=0;return Ss=>{Zr&&(wt(ta),wt(Rr),Lo+=Zr,Zr=Rr=0),Rr||(Lo+=128,Rr=nn(Lo));const da=Ss.length+7&-8;let ra=Rr;da>=Lo&&(Zr=da,ra=ta=nn(da));for(let ka=0;ka<Ss.length;ka++)de[ra+ka]=Ss[ka];return ra}})();return xe(),zi(),{memory:bo,_free:wt,_malloc:nn,Mesh:class{constructor(){this.ptr=Qt()}destroy(){kn(this.ptr)}},Decoder:class{constructor(){this.ptr=li()}destroy(){wo(this.ptr)}DecodeArrayToMesh(Rr,Lo,Zr){const ta=Br(Rr),Ss=Di(this.ptr,ta,Lo,Zr.ptr);return!!Rn(Ss)}GetAttributeByUniqueId(Rr,Lo){return{ptr:xi(this.ptr,Rr.ptr,Lo)}}GetTrianglesUInt16Array(Rr,Lo,Zr){Ji(this.ptr,Rr.ptr,Lo,Zr)}GetTrianglesUInt32Array(Rr,Lo,Zr){So(this.ptr,Rr.ptr,Lo,Zr)}GetAttributeDataArrayForAllPoints(Rr,Lo,Zr,ta,Ss){qi(this.ptr,Rr.ptr,Lo.ptr,Zr,ta,Ss)}},DT_INT8:Ro(),DT_UINT8:Co(),DT_INT16:lr(),DT_UINT16:To(),DT_UINT32:Fo(),DT_FLOAT32:Yr()}})}(fetch(R6())),nv.then(le=>{nm=le,nv=void 0}))}()),Z&&$.push(function(){if(T3)return;const le=function(de){let be;const xe=WebAssembly.instantiateStreaming(de,{}).then(yt=>{be=yt.instance,be.exports.__wasm_call_ctors()}),$e={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},gt={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:xe,supported:!0,decodeGltfBuffer(yt,wt,nn,Qt,kn,Rn){!function(li,Di,xi,Ji,So,qi,wo){const zi=li.exports.sbrk,bo=Ji+3&-4,Ro=zi(bo*So),Co=zi(qi.length),lr=new Uint8Array(li.exports.memory.buffer);lr.set(qi,Co);const To=Di(Ro,Ji,So,Co,qi.length);if(0===To&&wo&&wo(Ro,bo,So),xi.set(lr.subarray(Ro,Ro+Ji*So)),zi(Ro-zi(0)),0!==To)throw new Error(`Malformed buffer data: ${To}`)}(be,be.exports[gt[kn]],yt,wt,nn,Qt,be.exports[$e[Rn]])}}}(fetch(z6()));return le.ready.then(()=>{T3=le})}()),m)for(let le=0;le<m.length;le++)$.push(U5(m[le],s,le,n));return($.length?Promise.all($):Promise.resolve()).then(()=>{if(W&&g)for(const{primitives:le}of g)for(const de of le)V5(de,s);if(Z&&g&&T)for(const le of T)$5(le,s);return s})})}function Jg(t,e){const n=t.json.bufferViews[e.bufferView],s=k4[e.componentType];return new s(t.buffers[n.buffer],(e.byteOffset||0)+(n.byteOffset||0),e.count*(n.byteStride&&n.byteStride!==S4[e.type]*s.BYTES_PER_ELEMENT?n.byteStride/s.BYTES_PER_ELEMENT:S4[e.type]))}function P3(t,e,n,s){const u=k4[e.componentType],m=function($){switch($){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(u),g=t.json.bufferViews[e.bufferView],E=g.byteStride?g.byteStride/u.BYTES_PER_ELEMENT:S4[e.type],T=n.float32,z=T.length/n.capacity;for(let $=0,W=0;$<e.count*E;$+=E,W+=z)for(let Z=0;Z<z;Z++)T[W+Z]=s[$+Z]*m;n._trim()}function Kv(t,e,n){const s=t.indices,u=t.attributes,m={};m.indexArray=new bc;const g=e.json.accessors[s],E=g.count/3;m.indexArray.reserve(E);const T=Jg(e,g);for(let Z=0;Z<E;Z++)m.indexArray.emplaceBack(T[3*Z],T[3*Z+1],T[3*Z+2]);m.indexArray._trim(),m.vertexArray=new mu;const z=e.json.accessors[u.POSITION];m.vertexArray.reserve(z.count);const $=Jg(e,z);for(let Z=0;Z<z.count;Z++)m.vertexArray.emplaceBack($[3*Z],$[3*Z+1],$[3*Z+2]);if(m.vertexArray._trim(),m.aabb=new Ml(z.min,z.max),m.centroid=function(Z,le){const de=[0,0,0],be=Z.length;if(be>0){for(let xe=0;xe<be;xe++){const $e=3*Z[xe];de[0]+=le[$e],de[1]+=le[$e+1],de[2]+=le[$e+2]}de[0]/=be,de[1]/=be,de[2]/=be}return de}(T,$),void 0!==u.COLOR_0){const Z=e.json.accessors[u.COLOR_0],le=S4[Z.type],de=Jg(e,Z);m.colorArray=3===le?new mu:new oh,m.colorArray.resize(Z.count),P3(e,Z,m.colorArray,de)}if(void 0!==u.NORMAL){m.normalArray=new mu;const Z=e.json.accessors[u.NORMAL];m.normalArray.resize(Z.count);const le=Jg(e,Z);P3(e,Z,m.normalArray,le)}if(void 0!==u.TEXCOORD_0&&n.length>0){m.texcoordArray=new eu;const Z=e.json.accessors[u.TEXCOORD_0];m.texcoordArray.resize(Z.count);const le=Jg(e,Z);P3(e,Z,m.texcoordArray,le)}if(void 0!==u._FEATURE_ID_RGBA4444){const Z=e.json.accessors[u._FEATURE_ID_RGBA4444];e.json.extensionsUsed&&e.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=Jg(e,Z))}void 0!==u._FEATURE_RGBA4444&&(m.featureData=new Uint32Array(Jg(e,e.json.accessors[u._FEATURE_RGBA4444]).buffer));const W=t.material;return m.material=function(Z,le){const{emissiveFactor:de=[0,0,0],alphaMode:be="OPAQUE",alphaCutoff:xe=.5,normalTexture:$e,occlusionTexture:gt,emissiveTexture:yt,doubleSided:wt}=Z,{baseColorFactor:nn=[1,1,1,1],metallicFactor:Qt=1,roughnessFactor:kn=1,baseColorTexture:Rn,metallicRoughnessTexture:li}=Z.pbrMetallicRoughness||{},Di=gt?le[gt.index]:void 0;if(gt&&gt.extensions&&gt.extensions.KHR_texture_transform&&Di){const xi=gt.extensions.KHR_texture_transform;Di.offsetScale=[xi.offset[0],xi.offset[1],xi.scale[0],xi.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new Zs(...nn),metallicFactor:Qt,roughnessFactor:kn,baseColorTexture:Rn?le[Rn.index]:void 0,metallicRoughnessTexture:li?le[li.index]:void 0},doubleSided:wt,emissiveFactor:de,alphaMode:be,alphaCutoff:xe,normalTexture:$e?le[$e.index]:void 0,occlusionTexture:Di,emissionTexture:yt?le[yt.index]:void 0,defined:void 0===Z.defined}}(void 0!==W?e.json.materials[W]:{defined:!1},n),m}function Yv(t,e,n){const{matrix:s,rotation:u,translation:m,scale:g,mesh:E,extras:T,children:z}=t,$={};if($.matrix=s||l.ad.fromRotationTranslationScale([],u||[0,0,0,1],m||[0,0,0],g||[1,1,1]),void 0!==E){$.meshes=n[E];const W=$.anchor=[0,0];for(const Z of $.meshes){const{min:le,max:de}=Z.aabb;W[0]+=le[0]+de[0],W[1]+=le[1]+de[1]}W[0]=Math.floor(W[0]/$.meshes.length/2),W[1]=Math.floor(W[1]/$.meshes.length/2)}if(T&&(T.id&&($.id=T.id),T.lights&&($.lights=function(W){if(!W.length)return[];const Z=function($e){const gt=atob($e),yt=new Uint8Array(gt.length);for(let wt=0;wt<gt.length;wt++)yt[wt]=gt.codePointAt(wt);return yt}(W),le=[],de=Z.length/24,be=new Uint16Array(Z.buffer),xe=new Float32Array(Z.buffer);for(let $e=0;$e<de;$e++){const gt=be[2*$e*6]/30,yt=be[2*$e*6+1]/30,wt=be[2*$e*6+10]/100,nn=xe[6*$e+1],Qt=xe[6*$e+2],kn=xe[6*$e+3],Rn=xe[6*$e+4],li=kn-nn,Di=Rn-Qt,xi=Math.hypot(li,Di);le.push({pos:[nn+.5*li,Qt+.5*Di,yt],normal:[Di/xi,-li/xi,0],width:xi,height:gt,depth:wt,points:[nn,Qt,kn,Rn]})}return le}(T.lights))),z){const W=[];for(const Z of z)W.push(Yv(e.json.nodes[Z],e,n));$.children=W}return $}function mg(t){if(0===t.vertices.length||0===t.indices.length)return null;const e=new pt(t.vertices,t.indices,8,256),[n,s]=[e.min.clone(),e.max.clone()];return{vertices:t.vertices,indices:t.indices,grid:e,min:n,max:s}}function Zv(t){if(!t.extras||!t.extras.ground)return null;const e=t.extras.ground;if(!e||!Array.isArray(e)||0===e.length)return null;const n=e[0];if(!n||!Array.isArray(n)||0===n.length)return null;const s=[];for(const g of n){if(!Array.isArray(g)||2!==g.length)continue;const E=g[0],T=g[1];"number"==typeof E&&"number"==typeof T&&s.push(new Eo(E,T))}if(s.length<3)return null;s.length>1&&s[s.length-1].equals(s[0])&&s.pop();let u=0;for(let g=0;g<s.length;g++){const E=s[g],T=s[(g+1)%s.length],z=s[(g+2)%s.length];u+=(E.x-T.x)*(z.y-T.y)-(z.x-T.x)*(E.y-T.y)}u>0&&s.reverse();const m=$0(s.flatMap(g=>[g.x,g.y]),[]);return 0===m.length?null:{vertices:s,indices:m}}function B6(t,e){const n=[],s=[];let u=0;const m=[];for(const g of t){u=n.length;const E=g.vertexArray.float32,T=g.indexArray.uint16;for(let z=0;z<g.vertexArray.length;z++)m[0]=E[3*z+0],m[1]=E[3*z+1],m[2]=E[3*z+2],l._.transformMat4(m,m,e),n.push(new Eo(m[0],m[1]));for(let z=0;z<3*g.indexArray.length;z++)s.push(T[z]+u)}if(s.length%3!=0)return null;for(let g=0;g<s.length;g+=3){const E=n[s[g+0]],T=n[s[g+1]],z=n[s[g+2]];(E.x-T.x)*(z.y-T.y)-(z.x-T.x)*(E.y-T.y)>0&&([s[g+1],s[g+2]]=[s[g+2],s[g+1]])}return{vertices:n,indices:s}}function T4(t){const n=function(T,z){const $=[];for(const W of T.json.meshes){const Z=[];for(const le of W.primitives)Z.push(Kv(le,T,z));$.push(Z)}return $}(t,function(T,z){const $=[],W=WebGL2RenderingContext;if(T.json.textures)for(const Z of T.json.textures){const le={magFilter:W.LINEAR,minFilter:W.NEAREST,wrapS:W.REPEAT,wrapT:W.REPEAT};void 0!==Z.sampler&&Object.assign(le,T.json.samplers[Z.sampler]),$.push({image:z[Z.source],sampler:le,uploaded:!1})}return $}(t,t.images)),{scenes:s,scene:u,nodes:m}=t.json,g=s?s[u||0].nodes:m,E=[];for(const T of g)E.push(Yv(m[T],t,n));return function(T,z,$){const W={},Z=new Set;for(let le=0;le<T.length;le++){const de=$[z[le]];if(!de.extras)continue;const be=de.extras["mapbox:footprint:version"],xe=de.extras["mapbox:footprint:id"];(be||xe)&&Z.add(le),"1.0.0"===be&&xe&&(W[xe]=le)}for(let le=0;le<T.length;le++){if(Z.has(le))continue;const de=T[le],be=$[z[le]];if(!be.extras)continue;let xe=null;de.id in W&&(xe=B6(T[W[de.id]].meshes,de.matrix)),xe||(xe=Zv(be)),xe&&(de.footprint=mg(xe))}if(Z.size>0){const le=Array.from(Z.values()).sort((de,be)=>de-be);for(let de=le.length-1;de>=0;de--)T.splice(le[de],1)}}(E,g,t.json.nodes),E}function H5(t){t.heightmap=new Float32Array(4096),t.heightmap.fill(-1);const e=t.vertexArray.float32,n=t.aabb.min[0]-1,s=t.aabb.min[1]-1,u=64/(t.aabb.max[0]-n+2),m=64/(t.aabb.max[1]-s+2);for(let g=0;g<e.length;g+=3){const E=e[g+2],T=(e[g+0]-n)*u|0,z=(e[g+1]-s)*m|0;E>t.heightmap[64*z+T]&&(t.heightmap[64*z+T]=E)}}function G5(t,e){const n={};n.indexArray=new bc,n.indexArray.reserve(4*t.length),n.vertexArray=new mu,n.vertexArray.reserve(10*t.length),n.colorArray=new oh,n.vertexArray.reserve(10*t.length);let s=0;for(const g of t){const E=Math.min(10,Math.max(4,1.3*g.height))*e,T=[-g.normal[1],g.normal[0],0],z=Math.min(.29,.1*g.width/g.depth),$=g.width-2*g.depth*e*(z+.01),W=l._.scaleAndAdd([],g.pos,T,$/2),Z=l._.scaleAndAdd([],g.pos,T,-$/2),le=[W[0],W[1],W[2]+g.height],de=[Z[0],Z[1],Z[2]+g.height],be=l._.scaleAndAdd([],g.normal,T,z);l._.scale(be,be,E);const xe=l._.scaleAndAdd([],g.normal,T,-z);l._.scale(xe,xe,E),l._.add(be,W,be),l._.add(xe,Z,xe),W[2]+=.1,Z[2]+=.1,n.vertexArray.emplaceBack(be[0],be[1],be[2]),n.vertexArray.emplaceBack(xe[0],xe[1],xe[2]),n.vertexArray.emplaceBack(W[0],W[1],W[2]),n.vertexArray.emplaceBack(Z[0],Z[1],Z[2]),n.vertexArray.emplaceBack(le[0],le[1],le[2]),n.vertexArray.emplaceBack(de[0],de[1],de[2]),n.vertexArray.emplaceBack(W[0],W[1],W[2]),n.vertexArray.emplaceBack(Z[0],Z[1],Z[2]),n.vertexArray.emplaceBack(be[0],be[1],be[2]),n.vertexArray.emplaceBack(xe[0],xe[1],xe[2]);const $e=$/E/2;n.colorArray.emplaceBack(-$e-z,-1,$e,.8),n.colorArray.emplaceBack($e+z,-1,$e,.8),n.colorArray.emplaceBack(-$e,0,$e,1.3),n.colorArray.emplaceBack($e,0,$e,1.3),n.colorArray.emplaceBack($e+z,-.8,$e,.7),n.colorArray.emplaceBack($e+z,-.8,$e,.7),n.colorArray.emplaceBack(0,0,$e,1.3),n.colorArray.emplaceBack(0,0,$e,1.3),n.colorArray.emplaceBack($e+z,-1.2,$e,.8),n.colorArray.emplaceBack($e+z,-1.2,$e,.8),n.indexArray.emplaceBack(6+s,4+s,8+s),n.indexArray.emplaceBack(7+s,9+s,5+s),n.indexArray.emplaceBack(0+s,1+s,2+s),n.indexArray.emplaceBack(1+s,3+s,2+s),s+=10}const u={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=Zs.white,u.pbrMetallicRoughness=m,n.material=u,n.aabb=new Ml([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),n}const ov=new Float32Array(262144),gg=new Uint8Array(262144);function Vm(t){let e=0;if(t.meshes)for(const n of t.meshes)e=Math.max(e,n.aabb.max[2]);if(t.children)for(const n of t.children)e=Math.max(e,Vm(n));return e}function M4(t,e,n){if(t.meshes)for(const s of t.meshes)s.aabb.min[0]!==1/0&&n.insert(e,s.aabb.min[0],s.aabb.min[1],s.aabb.max[0],s.aabb.max[1]);if(t.children)for(const s of t.children)M4(s,e,n)}const W5=["","wall","door","roof","window","lamp","logo"];class rv{constructor(e){this.node=e,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:e.id,geometry:[],properties:{height:Vm(e)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new Ml([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let e=0;const n=new Ml([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const s of this.node.meshes)this.node.lightMeshIndex!==e&&(s.transformedAabb=Ml.applyTransformFast(s.aabb,this.node.matrix),n.encapsulate(s.transformedAabb)),e++;this.aabb=n}return this.aabb}}class sv{constructor(e,n,s,u,m,g){this.id=n,this.modelTraits|=Y4.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,s&&(this.modelTraits|=Y4.HasMapboxMeshFeatures),u&&(this.modelTraits|=Y4.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=m,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const E of e)this.nodesInfo.push(new rv(E)),M4(E,g.featureIndexArray.length,g.grid),g.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,g.bucketLayerIDs.length-1,0)}updateFootprints(e,n){for(const s of this.getNodesInfo()){const u=s.node;u.footprint&&n.push({footprint:u.footprint,id:e})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(e){if(!this.needsUpload)return;const n=this.getNodesInfo();for(const s of n){const u=s.node;this.uploaded?this.updatePbrBuffer(u):k3(u,e,!0)}for(const s of n)Q4(s.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(e){let n=!1;if(!e.meshes)return n;for(const s of e.meshes)s.pbrBuffer&&(s.pbrBuffer.updateData(s.featureArray),n=!0);return n}needsReEvaluation(e,n,s){const u=e.transform.projectionOptions,m=e.style.getBrightness(),g=this.brightness!==m;return!!(!this.uploaded||this.dirty||u.name!==this.projection.name||A4(s.paint.get("model-color").value,g)||A4(s.paint.get("model-color-mix-intensity").value,g)||A4(s.paint.get("model-roughness").value,g)||A4(s.paint.get("model-emissive-strength").value,g)||A4(s.paint.get("model-height-based-emissive-strength-multiplier").value,g))&&(this.projection=u,this.brightness=m,!0)}evaluateScale(e,n){if(e.transform.zoom===this.zoom)return;this.zoom=e.transform.zoom;const s=this.getNodesInfo(),u=this.id.canonical;for(const m of s){const g=m.feature;m.evaluatedScale=n.paint.get("model-scale").evaluate(g,{},u)}}evaluate(e){const n=this.getNodesInfo();for(const s of n){if(!s.node.meshes)continue;const u=s.feature,m=s.node.meshes&&s.node.meshes[0].featureData,g=s.evaluatedColor[2],E=s.evaluatedRMEA[2],T=this.id.canonical;if(s.hasTranslucentParts=!1,m){for(let z=0;z<W5.length;z++){const $=W5[z];$.length&&(u.properties.part=$);const W=e.paint.get("model-color").evaluate(u,{},T).toRenderColor(null),Z=e.paint.get("model-color-mix-intensity").evaluate(u,{},T);s.evaluatedColor[z]=[W.r,W.g,W.b,Z],s.evaluatedRMEA[z][0]=e.paint.get("model-roughness").evaluate(u,{},T),s.evaluatedRMEA[z][2]=e.paint.get("model-emissive-strength").evaluate(u,{},T),s.evaluatedRMEA[z][3]=W.a,s.emissionHeightBasedParams[z]=e.paint.get("model-height-based-emissive-strength-multiplier").evaluate(u,{},T),!s.hasTranslucentParts&&W.a<1&&(s.hasTranslucentParts=!0)}delete u.properties.part,av(s,g!==s.evaluatedColor[2]||E!==s.evaluatedRMEA[2],this.modelTraits)}else s.evaluatedRMEA[0][2]=e.paint.get("model-emissive-strength").evaluate(u,{},T);s.evaluatedScale=e.paint.get("model-scale").evaluate(u,{},T),this.updatePbrBuffer(s.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(e,n,s,u){const m=e.findDEMTileFor(s);if(m&&(m.tileID.canonical!==this.terrainTile||n!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const g=Im.create(e,s,m);if(!g)return;this.modelTraits&Y4.HasMapboxMeshFeatures&&this.updateDEM(e,g,s,u);for(const E of this.getNodesInfo()){const T=E.node;if(!T.footprint||!T.footprint.vertices||!T.footprint.vertices.length)continue;const z=T.footprint.vertices;let $=g.getElevationAt(z[0].x,z[0].y,!0,!0);for(let W=1;W<z.length;W++)$=Math.min($,g.getElevationAt(z[W].x,z[W].y,!0,!0));T.elevation=$}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=n}}updateDEM(e,n,s,u){let m=n._dem._modifiedForSources[u];if(void 0===m&&(n._dem._modifiedForSources[u]=[],m=n._dem._modifiedForSources[u]),m.includes(s.canonical))return;const g=n._dem.dim;m.push(s.canonical);let E=!1;for(const T of this.getNodesInfo()){const z=T.node;if(!z.footprint||!z.footprint.grid)continue;const $=z.footprint.grid,W=n.tileCoordToPixel($.min.x,$.min.y),Z=n.tileCoordToPixel($.max.x,$.max.y),le=Math.min(Math.min(g-Z.y,W.x),Math.min(W.y,g-Z.x));if(le<0)continue;const de=zn(le,2,5);let be=Math.max(0,W.x-de),xe=Math.max(0,W.y-de),$e=Math.min(Z.x+de,g-1),gt=Math.min(Z.y+de,g-1);for(let Qt=xe;Qt<=gt;++Qt)for(let kn=be;kn<=$e;++kn)gg[Qt*g+kn]=255;let yt=0,wt=0;for(let Qt=0;Qt<$.cellsY;++Qt)for(let kn=0;kn<$.cellsX;++kn){if(!$.cells[Qt*$.cellsX+kn])continue;const Rn=n.tileCoordToPixel($.min.x+kn/$.xScale,$.min.y+Qt/$.yScale),li=n.tileCoordToPixel($.min.x+(kn+1)/$.xScale,$.min.y+(Qt+1)/$.yScale);for(let Di=Rn.y;Di<=Math.min(li.y+1,g-1);++Di)for(let xi=Rn.x;xi<=Math.min(li.x+1,g-1);++xi)255===gg[Di*g+xi]&&(gg[Di*g+xi]=0,yt+=n.getElevationAtPixel(xi,Di),wt++)}const nn=yt/wt;be=Math.max(1,W.x-de),xe=Math.max(1,W.y-de),$e=Math.min(Z.x+de,g-2),gt=Math.min(Z.y+de,g-2),E=!0;for(let Qt=xe;Qt<=gt;++Qt)for(let kn=be;kn<=$e;++kn)0===gg[Qt*g+kn]&&(ov[Qt*g+kn]=n._dem.set(kn,Qt,nn));for(let Qt=1;Qt<de;++Qt){be=Math.max(1,W.x-Qt),xe=Math.max(1,W.y-Qt),$e=Math.min(Z.x+Qt,g-2),gt=Math.min(Z.y+Qt,g-2);for(let kn=xe;kn<=gt;++kn)for(let Rn=be;Rn<=$e;++Rn){const li=kn*g+Rn;if(255===gg[li]){let Di=0,xi=0,Ji=-1,So=-1;for(let qi=-1;qi<=1;++qi)for(let wo=-1;wo<=1;++wo){const zi=(kn+qi)*g+Rn+wo;if(gg[zi]>=Qt)continue;const bo=ov[zi],Ro=Math.abs(bo);Ro>xi&&(Di=bo,xi=Ro,Ji=wo,So=qi)}if(xi>.1){const qi=1-(Qt+.5*Math.abs(Ji*So))/de;let wo=n._dem.get(Rn,kn)+Di*qi;const zi=n._dem.get(Rn+Ji,kn+So),bo=n._dem.get(Rn-Ji,kn-So,!0);(wo-zi)*(wo-bo)>0&&(wo=(zi+bo)/2),ov[li]=n._dem.set(Rn,kn,wo),gg[li]=Qt}}}}}E&&(n._demTile.needsDEMTextureUpload=!0,n._dem._timestamp=mi.now())}getNodesInfo(){return this.nodesInfo}destroy(){const e=this.getNodesInfo();for(const n of e)Q4(n.node),S3(n.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(e,n){if(n.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=n.updateTime;const s=n.getReplacementRegionsForTile(e.toUnwrapped()),u=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const g=u[m].node;u[m].hiddenByReplacement=!!g.footprint&&!s.find(E=>E.footprint===g.footprint)}}getHeightAtTileCoord(e,n){const s=this.getNodesInfo(),u=[],m=[0,0,0],g=l.ad.identity([]);for(let E=0;E<this.nodesInfo.length;E++){const T=s[E],z=T.node.meshes[0],$=z.transformedAabb;if(e<$.min[0]||n<$.min[1]||e>$.max[0]||n>$.max[1])continue;if(!0===T.node.hidden)return{height:0,maxHeight:T.feature.properties.height,hidden:!1,verticalScale:T.evaluatedScale[2]};l.ad.invert(g,T.node.matrix),m[0]=e,m[1]=n,l._.transformMat4(m,m,g);const W=(m[0]-z.aabb.min[0])/(z.aabb.max[0]-z.aabb.min[0])*64|0,Z=64*Math.min(63,(m[1]-z.aabb.min[1])/(z.aabb.max[1]-z.aabb.min[1])*64|0)+Math.min(63,W),le=z.heightmap[Z];if(!(le<0&&T.node.footprint))return T.hiddenByReplacement?void 0:{height:le,maxHeight:T.feature.properties.height,hidden:!1,verticalScale:T.evaluatedScale[2]};if(T.node.footprint.grid.query(new Eo(e,n),new Eo(e,n),u),u.length>0)return{height:void 0,maxHeight:T.feature.properties.height,hidden:T.hiddenByReplacement,verticalScale:T.evaluatedScale[2]}}}}function A4(t,e){return!t.isLightConstant&&e}function q5(t,e,n,s,u,m,g,E){let T=(61440&e|(61440&e)>>4)>>8,z=(3840&e|(3840&e)>>4)>>4,$=240&e|(240&e)>>4;n[3]>0&&(T=Cr(T,255*n[0],n[3]),z=Cr(z,255*n[1],n[3]),$=Cr($,255*n[2],n[3]));const W=T<<8|z,Z=$<<8|Math.floor(255*s[3]),le=function(Qt){const kn=zn(Qt,0,2);return Math.min(Math.round(.5*kn*255),255)}(s[2])<<8|15*s[0]<<4|15*s[1],de=zn(u[0],0,1),be=zn(u[1],0,1),xe=zn(u[2],0,1),$e=zn(u[3],0,1);let gt,yt,wt,nn;if(de!==be&&g!==m&&be!==de){const Qt=g-m;yt=1/(Qt*(be-de)),wt=-(m+Qt*de)/(Qt*(be-de));const kn=zn(u[4],-1,1);nn=Math.pow(10,kn),gt=255*xe<<8|255*$e}else gt=65535,yt=0,wt=1,nn=1;if(t.emplaceBack(W,Z,le,gt,yt,wt,nn),E){const Qt=E.length;E.clear();for(let kn=0;kn<Qt;kn++)E.emplaceBack(W,Z,le,gt,yt,wt,nn)}}function av(t,e,n){const s=t.node;let u=0;const m=n&Y4.HasMeshoptCompression;for(const g of s.meshes){if(s.lights&&s.lightMeshIndex===u||!g.featureData)continue;g.featureArray=new r1,g.featureArray.reserve(g.featureData.length);let E=e;for(const T of g.featureData){const z=m?65535&T:T>>16&65535,$=m?T>>16&65535:65535&T,W=(15&$)<8?15&$:0,Z=t.evaluatedRMEA[W],le=t.evaluatedColor[W],de=t.emissionHeightBasedParams[W];let be;if(E&&2===W&&s.lights&&(be=new r1,be.resize(10*s.lights.length)),q5(g.featureArray,z,le,Z,de,g.aabb.min[2],g.aabb.max[2],be),be&&E){E=!1;const xe=s.meshes[s.lightMeshIndex];xe.featureArray=be,xe.featureArray._trim()}}g.featureArray._trim(),u++}}function N6(t,e,n,s){const u=1<<t.z;e.lat=$c((s/Xi+t.y)/u),e.lng=Tu((n/Xi+t.x)/u)}lt(sv,"Tiled3dModelBucket",{omit:["layers"]}),lt(rv,"Tiled3dModelFeature");const X5={circle:class extends nl{constructor(t,e,n,s){super(t,C2,e,n,s)}createBucket(t){return new Gf(t)}queryRadius(t){const e=t;return Op("circle-radius",this,e)+Op("circle-stroke-width",this,e)+mm(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,s,u,m,g,E){const T=hp(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,t.pixelToTileUnitsFactor),z=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return bf(t,s,m,g,E,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),T,z)}getProgramIds(){return["circle"]}getDefaultProgramParams(t,e,n){const s=D2(this);return{config:new l1(this,{zoom:e,lut:n}),defines:s,overrideFog:!1}}},heatmap:class extends nl{createBucket(t){return new Qf(t)}constructor(t,e,n,s){super(t,Up,e,n,s),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return Op("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,s,u,m,g,E){const T=this.paint.get("heatmap-radius").evaluate(e,n);return bf(t,s,m,g,E,!0,!0,new Eo(0,0),T)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(t,e,n){return"heatmap"===t?{config:new l1(this,{zoom:e,lut:n}),overrideFog:!1}:{}}},hillshade:class extends nl{constructor(t,e,n,s){super(t,Ym,e,n,s)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(t,e,n){return{overrideFog:!1}}},fill:class extends nl{constructor(t,e,n,s){super(t,nt,e,n,s)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getDefaultProgramParams(t,e,n){return{config:new l1(this,{zoom:e,lut:n}),overrideFog:!1}}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new ze(t)}queryRadius(){return mm(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,s,u,m){return!t.queryGeometry.isAboveHorizon&&E2(mf(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,t.pixelToTileUnitsFactor),s)}isTileClipped(){return!0}},"fill-extrusion":class extends nl{constructor(t,e,n,s){super(t,Ni,e,n,s),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(t){return new Wo(t)}queryRadius(){return mm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(t,e,n,s,u,m,g,E,T){const z=hp(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,t.pixelToTileUnitsFactor),$=this.paint.get("fill-extrusion-height").evaluate(e,n),W=this.paint.get("fill-extrusion-base").evaluate(e,n),Z=[0,0],le=E&&m.elevation,de=m.elevation?m.elevation.exaggeration():1,be=t.tile.getBucket(this);if(le&&be instanceof Wo){const wt=be.centroidVertexArray,nn=T+1;nn<wt.length&&(Z[0]=wt.geta_centroid_pos0(nn),Z[1]=wt.geta_centroid_pos1(nn))}if(0===Z[0]&&1===Z[1])return!1;"globe"===m.projection.name&&(s=Oi([s],[new Eo(0,0),new Eo(Xi,Xi)],t.tileID.canonical).map(wt=>wt.polygon).flat());const xe=le?E:null,[$e,gt]=(nn=s,Qt=W,kn=$,Rn=z,li=g,Di=xe,xi=Z,Ji=de,So=m.center.lat,"globe"===(wt=m).projection.name?function(wo,zi,bo,Ro,Co,lr,To,Fo,Yr,Br,Rr){const Lo=[],Zr=[],ta=wo.projection.upVectorScale(Rr,wo.center.lat,wo.worldSize).metersToTile,Ss=[0,0,0,1],da=[0,0,0,1],ra=(bs,jl,Pl,Ya)=>{bs[0]=jl,bs[1]=Pl,bs[2]=Ya,bs[3]=1},ka=qa();bo>0&&(bo+=ka),Ro+=ka;for(const bs of zi){const jl=[],Pl=[];for(const Ya of bs){const Ba=Ya.x+Co.x,Ha=Ya.y+Co.y,rc=wo.projection.projectTilePoint(Ba,Ha,Rr),sc=wo.projection.upVector(Rr,Ya.x,Ya.y);let Au=bo,vu=Ro;if(To){const f1=_i(Ba,Ha,bo,Ro,To,Fo,Yr,Br);Au+=f1.base,vu+=f1.top}0!==bo?ra(Ss,rc.x+sc[0]*ta*Au,rc.y+sc[1]*ta*Au,rc.z+sc[2]*ta*Au):ra(Ss,rc.x,rc.y,rc.z),ra(da,rc.x+sc[0]*ta*vu,rc.y+sc[1]*ta*vu,rc.z+sc[2]*ta*vu),l._.transformMat4(Ss,Ss,lr),l._.transformMat4(da,da,lr),jl.push(new ga(Ss[0],Ss[1],Ss[2])),Pl.push(new ga(da[0],da[1],da[2]))}Lo.push(jl),Zr.push(Pl)}return[Lo,Zr]}(wt,nn,Qt,kn,Rn,li,Di,xi,Ji,So,t.tileID.canonical):Di?function(wo,zi,bo,Ro,Co,lr,To,Fo,Yr){const Br=[],Rr=[],Lo=[0,0,0,1];for(const Zr of wo){const ta=[],Ss=[];for(const da of Zr){const ra=da.x+Ro.x,ka=da.y+Ro.y,bs=_i(ra,ka,zi,bo,lr,To,Fo,Yr);Lo[0]=ra,Lo[1]=ka,Lo[2]=bs.base,Lo[3]=1,l.aA.transformMat4(Lo,Lo,Co),Lo[3]=Math.max(Lo[3],1e-5);const jl=new ga(Lo[0]/Lo[3],Lo[1]/Lo[3],Lo[2]/Lo[3]);Lo[0]=ra,Lo[1]=ka,Lo[2]=bs.top,Lo[3]=1,l.aA.transformMat4(Lo,Lo,Co),Lo[3]=Math.max(Lo[3],1e-5);const Pl=new ga(Lo[0]/Lo[3],Lo[1]/Lo[3],Lo[2]/Lo[3]);ta.push(jl),Ss.push(Pl)}Br.push(ta),Rr.push(Ss)}return[Br,Rr]}(nn,Qt,kn,Rn,li,Di,xi,Ji,So):function(wo,zi,bo,Ro,Co){const lr=[],To=[],Fo=Co[8]*zi,Yr=Co[9]*zi,Br=Co[10]*zi,Rr=Co[11]*zi,Lo=Co[8]*bo,Zr=Co[9]*bo,ta=Co[10]*bo,Ss=Co[11]*bo;for(const da of wo){const ra=[],ka=[];for(const bs of da){const jl=bs.x+Ro.x,Pl=bs.y+Ro.y,Ya=Co[0]*jl+Co[4]*Pl+Co[12],Ba=Co[1]*jl+Co[5]*Pl+Co[13],Ha=Co[2]*jl+Co[6]*Pl+Co[14],rc=Co[3]*jl+Co[7]*Pl+Co[15],sc=Ya+Fo,Au=Ba+Yr,vu=Ha+Br,f1=Math.max(rc+Rr,1e-5),ad=Ya+Lo,iu=Ba+Zr,qd=Ha+ta,g0=Math.max(rc+Ss,1e-5);ra.push(new ga(sc/f1,Au/f1,vu/f1)),ka.push(new ga(ad/g0,iu/g0,qd/g0))}lr.push(ra),To.push(ka)}return[lr,To]}(nn,Qt,kn,Rn,li)),yt=t.queryGeometry;var wt,nn,Qt,kn,Rn,li,Di,xi,Ji,So;return function(wt,nn,Qt){let kn=1/0;E2(Qt,nn)&&(kn=ho(Qt,nn[0]));for(let Rn=0;Rn<nn.length;Rn++){const li=nn[Rn],Di=wt[Rn];for(let xi=0;xi<li.length-1;xi++){const Ji=li[xi],So=[Ji,li[xi+1],Di[xi+1],Di[xi],Ji];k1(Qt,So)&&(kn=Math.min(kn,ho(Qt,So)))}}return kn!==1/0&&kn}($e,gt,yt.isPointQuery()?yt.screenBounds:yt.screenGeometry)}},line:class extends nl{constructor(t,e,n,s){super(t,km,e,n,s),km.layout&&(this.layout=new ba(km.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Ph,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=m3.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new j2(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(t,e,n){const s=Bg(this);return{config:new l1(this,{zoom:e,lut:n}),defines:s,overrideFog:!1}}queryRadius(t){const e=t,n=_6(Op("line-width",this,e),Op("line-gap-width",this,e)),s=Op("line-offset",this,e);return n/2+Math.abs(s)+mm(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,s,u,m){if(t.queryGeometry.isAboveHorizon)return!1;const g=mf(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,t.pixelToTileUnitsFactor),E=t.pixelToTileUnitsFactor/2*_6(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),T=this.paint.get("line-offset").evaluate(e,n);return T&&(s=function(z,$){const W=[],Z=new Eo(0,0);for(let le=0;le<z.length;le++){const de=z[le],be=[];for(let xe=0;xe<de.length;xe++){const $e=de[xe],gt=de[xe+1],yt=0===xe?Z:$e.sub(de[xe-1])._unit()._perp(),wt=xe===de.length-1?Z:gt.sub($e)._unit()._perp(),nn=yt._add(wt)._unit();nn._mult(1/(nn.x*wt.x+nn.y*wt.y)),be.push(nn._mult($)._add($e))}W.push(be)}return W}(s,T*t.pixelToTileUnitsFactor)),function(z,$,W){for(let Z=0;Z<$.length;Z++){const le=$[Z];if(z.length>=3)for(let de=0;de<le.length;de++)if(td(z,le[de]))return!0;if(zp(z,le,W))return!0}return!1}(g,s,E)}isTileClipped(){return!0}isDraped(t){const e=this.layout.get("line-z-offset");return e.isConstant()&&!e.constantOr(0)}},symbol:Fv,background:class extends nl{constructor(t,e,n,s){super(t,g3,e,n,s)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(t,e,n){return{overrideFog:!1}}},raster:w6,"raster-particle":x6,sky:class extends nl{constructor(t,e,n,s){super(t,b3,e,n,s),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=vp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const s=this.paint.get("sky-atmosphere-sun"),u=!s,m=t.style.light,g=m.properties.get("position");return u&&"viewport"===m.properties.get("anchor")&&fa("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?w3(g.azimuthal,90-g.polar,e):w3(s[0],90-s[1],e)}const n=this.paint.get("sky-gradient-center");return w3(n[0],90-n[1],e)}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}},slot:class extends nl{constructor(t,e,n,s){super(t,z5,e,null)}},model:class extends nl{constructor(t,e,n,s){super(t,E4,e,n,s),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(t){return new E3(t)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(t){return t instanceof sv?Xi-1:0}queryIntersectsFeature(t,e,n,s,u,m){if(!this.modelManager)return!1;const g=this.modelManager,E=t.tile.getBucket(this);if(!(E&&E instanceof E3))return!1;const T=E;for(const z in T.instancesPerModel){const $=T.instancesPerModel[z],W=void 0!==e.id?e.id:e.properties&&e.properties.hasOwnProperty("id")?e.properties.id:void 0;if($.idToFeaturesIndex.hasOwnProperty(W)){const Z=$.features[$.idToFeaturesIndex[W]],le=g.getModel(z,this.scope);if(!le)return!1;let de=l.ad.create();const be=new oa(0,0),xe=T.canonical;let $e=Number.MAX_VALUE;for(let gt=0;gt<Z.instancedDataCount;++gt){const yt=16*(Z.instancedDataOffset+gt),wt=$.instancedDataArray.float32,nn=[wt[yt+4],wt[yt+5],wt[yt+6]];N6(xe,be,wt[yt],0|wt[yt+1]),C3(de,le,m,be,Z.rotation,Z.scale,nn,!1,!1,!1),"globe"===m.projection.name&&(de=x3(de,m));const Qt=l.ad.multiply([],m.projMatrix,de),kn=t.queryGeometry,Rn=C6(kn.isPointQuery()?kn.screenBounds:kn.screenGeometry,m,Qt,le.aabb);null!=Rn&&($e=Math.min(Rn,$e))}return $e!==Number.MAX_VALUE&&$e}}return!1}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven()||"model-color"!==t&&"model-color-mix-intensity"!==t&&"model-rotation"!==t&&"model-scale"!==t&&"model-translation"!==t&&"model-emissive-strength"!==t)}_isPropertyZoomDependent(t){const e=this._transitionablePaint._values[t];return null!=e&&null!=e.value&&null!=e.value.expression&&e.value.expression instanceof Je}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(t,e,n,s){const u=t.tile,m=u.getBucket(this);let g=null,E=Number.MAX_VALUE;if(!(m&&m instanceof sv))return{queryFeature:g,intersectionZ:E};const T=m.getNodesInfo()[e];if(T.hiddenByReplacement||!T.node.meshes||!n.filter(new os(u.tileID.overscaledZ),T.feature,u.tileID.canonical))return{queryFeature:g,intersectionZ:E};const z=T.node,$=s.calculatePosMatrix(u.tileID.toUnwrapped(),s.worldSize),W=T.evaluatedScale;let Z=0;s.elevation&&z.elevation&&(Z=z.elevation*s.elevation.exaggeration()),l.ad.translate($,$,[(z.anchor?z.anchor[0]:0)*(W[0]-1),(z.anchor?z.anchor[1]:0)*(W[1]-1),Z]),l.ad.scale($,$,W),l.ad.multiply($,$,z.matrix);const le=t.queryGeometry,de=le.isPointQuery()?le.screenBounds:le.screenGeometry,be=function($e){const gt=l.ad.multiply([],$,$e.matrix),yt=l.ad.multiply(gt,s.expandedFarZProjMatrix,gt);for(let wt=0;wt<$e.meshes.length;++wt){const nn=$e.meshes[wt];if(wt===$e.lightMeshIndex)continue;const Qt=C6(de,s,yt,nn.aabb);null!=Qt&&(E=Math.min(Qt,E))}if($e.children)for(const wt of $e.children)be(wt)};if(be(z),E===Number.MAX_VALUE)return{queryFeature:g,intersectionZ:E};const xe=new oa(0,0);return N6(u.tileID.canonical,xe,T.node.anchor[0],T.node.anchor[1]),g={type:"Feature",geometry:{type:"Point",coordinates:[xe.lng,xe.lat]},properties:T.feature.properties,id:T.feature.id,state:{},layer:this.serialize()},{queryFeature:g,intersectionZ:E}}},clip:class extends nl{constructor(t,e,n,s){super(t,mn,e,n,s)}recalculate(t,e){super.recalculate(t,e)}createBucket(t){return new rn(t)}isTileClipped(){return!0}is3D(){return!0}}};lt(g6,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});const F6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class R3{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,s]=new Uint8Array(e,0,2);if(219!==n)throw new Error("Data does not appear to be in a KDBush format.");const u=s>>4;if(1!==u)throw new Error(`Got v${u} data when expected v1.`);const m=F6[15&s];if(!m)throw new Error("Unrecognized array type.");const[g]=new Uint16Array(e,2,1),[E]=new Uint32Array(e,4,1);return new R3(E,g,m,e)}constructor(e,n=64,s=Float64Array,u){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const m=F6.indexOf(this.ArrayType),g=2*e*this.ArrayType.BYTES_PER_ELEMENT,E=e*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-E%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${s}.`);u&&u instanceof ArrayBuffer?(this.data=u,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+E+T,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+g+E+T),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+E+T,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=n,s}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return z3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:g,nodeSize:E}=this,T=[0,m.length-1,0],z=[];for(;T.length;){const $=T.pop()||0,W=T.pop()||0,Z=T.pop()||0;if(W-Z<=E){for(let xe=Z;xe<=W;xe++){const $e=g[2*xe],gt=g[2*xe+1];$e>=e&&$e<=s&&gt>=n&&gt<=u&&z.push(m[xe])}continue}const le=Z+W>>1,de=g[2*le],be=g[2*le+1];de>=e&&de<=s&&be>=n&&be<=u&&z.push(m[le]),(0===$?e<=de:n<=be)&&(T.push(Z),T.push(le-1),T.push(1-$)),(0===$?s>=de:u>=be)&&(T.push(le+1),T.push(W),T.push(1-$))}return z}within(e,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:m,nodeSize:g}=this,E=[0,u.length-1,0],T=[],z=s*s;for(;E.length;){const $=E.pop()||0,W=E.pop()||0,Z=E.pop()||0;if(W-Z<=g){for(let xe=Z;xe<=W;xe++)cv(m[2*xe],m[2*xe+1],e,n)<=z&&T.push(u[xe]);continue}const le=Z+W>>1,de=m[2*le],be=m[2*le+1];cv(de,be,e,n)<=z&&T.push(u[le]),(0===$?e-s<=de:n-s<=be)&&(E.push(Z),E.push(le-1),E.push(1-$)),(0===$?e+s>=de:n+s>=be)&&(E.push(le+1),E.push(W),E.push(1-$))}return T}}function z3(t,e,n,s,u,m){if(u-s<=n)return;const g=s+u>>1;V6(t,e,g,s,u,m),z3(t,e,n,s,g-1,1-m),z3(t,e,n,g+1,u,1-m)}function V6(t,e,n,s,u,m){for(;u>s;){if(u-s>600){const z=u-s+1,$=n-s+1,W=Math.log(z),Z=.5*Math.exp(2*W/3),le=.5*Math.sqrt(W*Z*(z-Z)/z)*($-z/2<0?-1:1);V6(t,e,n,Math.max(s,Math.floor(n-$*Z/z+le)),Math.min(u,Math.floor(n+(z-$)*Z/z+le)),m)}const g=e[2*n+m];let E=s,T=u;for(lv(t,e,s,n),e[2*u+m]>g&&lv(t,e,s,u);E<T;){for(lv(t,e,E,T),E++,T--;e[2*E+m]<g;)E++;for(;e[2*T+m]>g;)T--}e[2*s+m]===g?lv(t,e,s,T):(T++,lv(t,e,T,u)),T<=n&&(s=T+1),n<=T&&(u=T-1)}}function lv(t,e,n,s){O3(t,n,s),O3(e,2*n,2*s),O3(e,2*n+1,2*s+1)}function O3(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}function cv(t,e,n,s){const u=t-n,m=e-s;return u*u+m*m}l.$=vi,l.A=ph,l.B=qh,l.C=Zs,l.D=vl,l.E=Hl,l.G=Iu,l.H=b,l.I=Hg,l.J=v,l.K=function(t){const e=t.value;let n=[];if(!e)return n;const s=vd(e);return"string"!==s?(n=n.concat([new Uv(t.key,e,`string expected, "${s}" found`)]),n):(T6(e,!0)||(n=n.concat([new Uv(t.key,e,`invalid url "${e}"`)])),n)},l.L=ai,l.M=class{constructor(t,e,n,s){this.id=t,this.position=null!=e?new oa(e[0],e[1]):new oa(0,0),this.orientation=null!=n?n:[0,0,0],this.nodes=s,this.uploaded=!1,this.aabb=new Ml([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(t,e){if(l.ad.multiply(t.matrix,e,t.matrix),t.meshes)for(const n of t.meshes){const s=Ml.applyTransformFast(n.aabb,t.matrix);this.aabb.encapsulate(s)}if(t.children)for(const n of t.children)this._applyTransformations(n,t.matrix)}computeBoundsAndApplyParent(){const t=l.ad.identity([]);for(const e of this.nodes)this._applyTransformations(e,t)}computeModelMatrix(t,e,n,s,u,m,g=!1){C3(this.matrix,this,t.transform,this.position,e,n,s,u,m,g)}upload(t){if(!this.uploaded){for(const e of this.nodes)k3(e,t);for(const e of this.nodes)Q4(e);this.uploaded=!0}}destroy(){for(const t of this.nodes)S3(t)}},l.N=ma,l.O=Ki,l.P=Eo,l.Q=class{constructor(t){this.specification=t}possiblyEvaluate(t,e){return ha(t.expression.evaluate(e))}interpolate(t,e,n){return{x:Cr(t.x,e.x,n),y:Cr(t.y,e.y,n),z:Cr(t.z,e.z,n),azimuthal:Cr(t.azimuthal,e.azimuthal,n),polar:Cr(t.polar,e.polar,n)}}},l.R=_t,l.S=B1,l.T=Ui,l.U=js,l.V=Uv,l.W=gi,l.X=os,l.Y=jd,l.Z=Je,l.a=Uu,l.a$=function(t){const{x:e,y:n}=t.point,{lng:s,lat:u}=t._center;return _m(e,n,t.worldSize,s,u)},l.a0=ba,l.a1=Ih,l.a2=Cr,l.a3=Xi,l.a4=Dd,l.a5=class{constructor(t){this.specification=t}possiblyEvaluate(t,e){return function([n,s]){const u=ha([1,n,s]);return{x:u.x,y:u.y,z:u.z}}(t.expression.evaluate(e))}interpolate(t,e,n){return{x:Cr(t.x,e.x,n),y:Cr(t.y,e.y,n),z:Cr(t.z,e.z,n)}}},l.a6=bh,l.a7=sp,l.a8=rh,l.a9=ap,l.aB=function(t,e){const{x:n,y:s}=t.point,u=_m(n,s,t.worldSize/t._pixelsPerMercatorPixel,0,0);return l.ad.multiply(u,u,$p(d1(e)))},l.aD=B,l.aE=Ii,l.aF=zm,l.aG=function(t,e,n,s,u){const m=5*e+2;t.float32[m+0]=n,t.float32[m+1]=s,t.float32[m+2]=u},l.aH=h2,l.aI=oa,l.aJ=g4,l.aK=hf,l.aL=Ic,l.aM=oc,l.aN=hg,l.aO=up,l.aP=Np,l.aQ=function(t,e,n,s,u,m,g,E,T){if("globe"===T.name)return Np(t,e,new up(n,s,u),!1);const z=zc({z:n,x:s,y:u},T);return new Ml([(m+z.x/z.scale)*e,e*(z.y/z.scale),g],[(m+z.x2/z.scale)*e,e*(z.y2/z.scale),E])},l.aR=function(t,e,n){let s=0;for(let u=0;u<2;++u)t[u]>0&&(s+=(t[u]-0)*(t[u]-0)),e[u]<0&&(s+=(0-e[u])*(0-e[u]));return s},l.aS=nc,l.aT=qf,l.aU=$f,l.aV=function(t){const e=l.ad.identity(new Float64Array(16));l.ad.multiply(e,t.pixelMatrix,t.globeMatrix);const n=[0,r0,0],s=[0,Su,0];return l._.transformMat4(n,n,e),l._.transformMat4(s,s,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!_f(t,new oa(t.center.lat,90)),s[0]>0&&s[0]<=t.width&&s[1]>0&&s[1]<=t.height&&!_f(t,new oa(t.center.lat,-90))]},l.aW=function(t,e){const{scale:n}=t.tileTransform,s=n*Xi/(t.tileSize*Math.pow(2,e.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return l.aC.scale(new Float32Array(4),e.inverseAdjustmentMatrix,[s,s])},l.aX=pg,l.aY=I6,l.aZ=function(t){const e=I6(t,!0);return l.aC.invert([],[e[0],e[1],e[4],e[5]])},l.a_=k2,l.aa=Pc,l.ab=Gr,l.ac=function(t,e,n){const s=Math.sqrt(t*t+e*e+n*n),u=s>0?Math.acos(n/s)*Lc:0;let m=0!==t||0!==e?Math.atan2(-e,-t)*Lc+90:0;return m<0&&(m+=360),[s,m,u]},l.ae=Fm,l.af=Y1,l.ag=Gg,l.ah=function(t,e){const n={};for(let s=0;s<e.length;s++){const u=e[s];u in t&&(n[u]=t[u])}return n},l.ai=N0,l.aj=s0,l.ak=a0,l.al=yl,l.am=function(t){wl++,wl>jr&&(t.getActor().send("enforceCacheSizeLimit",gr),wl=0)},l.an=Vh,l.ao=class{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,s){const u=this.entries[t]=this.entries[t]||{callbacks:[]};if(u.result){const[m,g]=u.result;return this.scheduler?this.scheduler.add(()=>{s(m,g)},e):s(m,g),()=>{}}return u.callbacks.push(s),u.cancel||(u.cancel=n((m,g)=>{u.result=[m,g];for(const E of u.callbacks)this.scheduler?this.scheduler.add(()=>{E(m,g)},e):E(m,g);setTimeout(()=>delete this.entries[t],3e3)})),()=>{u.result||(u.callbacks=u.callbacks.filter(m=>m!==s),u.callbacks.length||(u.cancel(),delete this.entries[t]))}}},l.ap=function(t,e,n){const s=JSON.stringify(t.request);return t.data&&(this.deduped.entries[s]={result:[null,t.data]}),this.deduped.request(s,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},u=>{const m=dr(t.request,(g,E,T,z)=>{g?u(g):E&&u(null,{vectorTile:n?void 0:new No(new a2(E)),rawData:E,cacheControl:T,expires:z})});return()=>{m.cancel(),u()}},e)},l.aq=a1,l.ar=class extends x1{constructor(t){super(t),this.current=uf}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let s=0;s<9;s++)if(n[s]!==this.current[s]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},l.as=Pp,l.at=zn,l.au=go,l.aw=Tt,l.ax=El,l.ay=$c,l.az=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},l.b=ul,l.b$=w,l.b0=rl,l.b1=Rp,l.b2=function(t){const e=Math.round((t+45+360)%360/90)%4;return et[e]},l.b3=45,l.b4=Uf,l.b5=Hf,l.b6=Ml,l.b7=ha,l.b8=function(t){return[Math.pow(t[0],1/2.2),Math.pow(t[1],1/2.2),Math.pow(t[2],1/2.2)]},l.b9=Dt,l.bA=function(t,e){return[Math.pow(t[0],2.2)*e,Math.pow(t[1],2.2)*e,Math.pow(t[2],2.2)*e]},l.bB=Og,l.bD=Kf,l.bE=Ai,l.bF=Un,l.bG=256,l.bH=function(t,e){const n=[0,0,0],s=Vp(d1(e.canonical));return l._.transformMat4(n,n,s),l._.transformMat4(n,n,t),n},l.bI=t=>({u_camera_to_center_distance:new Pc(t),u_extrude_scale:new df(t),u_device_pixel_ratio:new Pc(t),u_matrix:new bh(t),u_inv_rot_matrix:new bh(t),u_merc_center:new rh(t),u_tile_id:new a1(t),u_zoom_transition:new Pc(t),u_up_dir:new a1(t),u_emissive_strength:new Pc(t)}),l.bJ=t=>({u_matrix:new bh(t),u_pixels_to_tile_units:new df(t),u_device_pixel_ratio:new Pc(t),u_units_to_pixels:new rh(t),u_dash_image:new sp(t),u_gradient_image:new sp(t),u_image_height:new Pc(t),u_texsize:new rh(t),u_tile_units_to_pixels:new Pc(t),u_alpha_discard_threshold:new Pc(t),u_trim_offset:new rh(t),u_trim_fade_range:new rh(t),u_trim_color:new Pp(t),u_emissive_strength:new Pc(t)}),l.bK=t=>({u_matrix:new bh(t),u_texsize:new rh(t),u_pixels_to_tile_units:new df(t),u_device_pixel_ratio:new Pc(t),u_image:new sp(t),u_units_to_pixels:new rh(t),u_tile_units_to_pixels:new Pc(t),u_alpha_discard_threshold:new Pc(t),u_trim_offset:new rh(t)}),l.bL=af,l.bM=wv,l.bN=Mu,l.bO=_,l.bP=Ev,l.bQ=Us,l.bR=D2,l.bS=(t,e,n,s,u,m)=>{const g=t.transform,E="globe"===g.projection.name;let T;if("map"===m.paint.get("circle-pitch-alignment"))if(E){const $=Kf(g.zoom,e.canonical)*g._pixelsPerMercatorPixel;T=Float32Array.from([$,0,0,$])}else T=g.calculatePixelsToTileUnitsMatrix(n);else T=new Float32Array([g.pixelsToGLUnits[0],0,0,g.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:t.transform.getCameraToCenterDistance(g.projection),u_matrix:t.translatePosMatrix(e.projMatrix,n,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:mi.devicePixelRatio,u_extrude_scale:T,u_inv_rot_matrix:yf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(E){z.u_inv_rot_matrix=s,z.u_merc_center=u,z.u_tile_id=[e.canonical.x,e.canonical.y,1<<e.canonical.z],z.u_zoom_transition=Ih(g.zoom);const $=u[0]*Xi,W=u[1]*Xi;z.u_up_dir=g.projection.upVector(new up(0,0,0),$,W)}return z},l.bT=Bg,l.bU=(t,e,n,s,u,m)=>{const g=t.transform;return{u_matrix:h4(t,e,n,s),u_texsize:e.imageAtlasTexture?e.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:g.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:u,u_image:0,u_tile_units_to_pixels:Lg(e,g),u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:m}},l.bV=(t,e,n,s,u,m,g)=>{const E=t.transform,T=E.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:h4(t,e,n,s),u_pixels_to_tile_units:T,u_device_pixel_ratio:m,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:u,u_texsize:Ng(n)&&e.lineAtlasTexture?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Lg(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:g,u_trim_fade_range:n.paint.get("line-trim-fade-range"),u_trim_color:n.paint.get("line-trim-color").toRenderColor(n.lut).toArray01(),u_emissive_strength:n.paint.get("line-emissive-strength")}},l.bW=Wr,l.bX=vp,l.bY=qa,l.bZ=um,l.b_=Wo,l.ba=function(t,e,n){const s=Ih(n.zoom),u=t.style.map._antialias,m=e.options.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===s&&!u&&!m},l.bb=function(t){const e=t.pixelsPerMeter,n=e/El(1,t.center.lat),s=l.ad.identity(new Float64Array(16));return l.ad.translate(s,s,[t.point.x,t.point.y,0]),l.ad.scale(s,s,[n,n,e]),Float32Array.from(s)},l.bc=S1,l.bd=function(t){const e=nc-5;t=zn(t,-e,e)/e*90;const n=Math.pow(Math.abs(Math.sin(Gr(t))),3);return Math.round(n*(jf.length-1))},l.be=function(t,e,n,s){const u=e.getNorth(),m=e.getSouth(),g=e.getWest(),E=e.getEast(),T=1<<t.z,z=E-g,$=u-m,W=z/64,Z=-$/jf[n],le=[0,W,0,Z,0,0,u,g,0];if(t.z>0){const de=180/s;l.bC.multiply(le,le,[de/z+1,0,0,0,de/$+1,0,-.5*de/W,.5*de/Z,1])}return le[2]=T,le[5]=t.x,le[8]=t.y,le},l.bf=Vp,l.bg=d1,l.bh=function(t,e,n){const s=l.ad.identity(new Float64Array(16)),u=(e/(1<<t)-.5)*Math.PI*2;return l.ad.rotateY(s,n.globeMatrix,u),Float32Array.from(s)},l.bi=Ti,l.bj=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},l.bk=w6,l.bl=x6,l.bm=_3,l.bn=function(t,e){const n=document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let s=0;s<t.length;s++){const u=document.createElement("source");Xa(t[s])||(n.crossOrigin="Anonymous"),u.src=t[s],n.appendChild(u)}return{cancel:()=>{}}},l.bo=Ao,l.bp=ca,l.bq=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const n=e.getSource().maxzoom,s=1<<n,u=Math.floor(t.x),m=Math.floor((t.x-u)*s),g=Math.floor(t.y*s),E=this.findDEMTileFor(new Ic(n,u,n,m,g));return!(!E||!E.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){if(this.isUsingMockSource())return null;null==e&&(e=null);const s=this._source();if(!s||t.y<0||t.y>1)return e;const u=s.getSource().maxzoom,m=1<<u,g=Math.floor(t.x),E=t.x-g,T=new Ic(u,g,u,Math.floor(E*m),Math.floor(t.y*m)),z=this.findDEMTileFor(T);if(!z||!z.dem)return e;const $=z.dem,W=1<<z.tileID.canonical.z,Z=(E*W-z.tileID.canonical.x)*$.dim,le=(t.y*W-z.tileID.canonical.y)*$.dim,de=Math.floor(Z),be=Math.floor(le);return(n?this.exaggeration():1)*Cr(Cr($.get(de,be),$.get(de,be+1),le-be),Cr($.get(de+1,be),$.get(de+1,be+1),le-be),Z-de)}getAtTileOffset(t,e,n){const s=1<<t.canonical.z;return this.getAtPointOrZero(new jd(t.wrap+(t.canonical.x+e/Xi)/s,(t.canonical.y+n/Xi)/s))}getAtTileOffsetFunc(t,e,n,s){return u=>{const m=this.getAtTileOffset(t,u.x,u.y),g=s.upVector(t.canonical,u.x,u.y),E=s.upVectorScale(t.canonical,e,n).metersToTile;return l._.scale(g,g,m*E),g}}getForTilePoints(t,e,n,s){if(this.isUsingMockSource())return!1;const u=Im.create(this,t,s);return!!u&&(e.forEach(m=>{m[2]=this.exaggeration()*u.getElevationAt(m[0],m[1],n)}),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,s=e.tileID,u=1<<t.canonical.z-s.canonical.z;let m=t.canonical.x/u-s.canonical.x,g=t.canonical.y/u-s.canonical.y,E=0;for(let T=0;T<t.canonical.z-s.canonical.z&&!n.leaves[E];T++){m*=2,g*=2;const z=2*Math.floor(g)+Math.floor(m);E=n.childOffsets[E]+z,m%=1,g%=1}return{min:this.exaggeration()*n.minimums[E],max:this.exaggeration()*n.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const t=this.visibleDemTiles;if(0===t.length)return null;let e=!1,n=Number.MAX_VALUE,s=Number.MIN_VALUE;for(const u of t){const m=this.getMinMaxForTile(u.tileID);m&&(n=Math.min(n,m.min),s=Math.max(s,m.max),e=!0)}return e?{min:n,max:s}:null}},l.br=Cd,l.bs=fp,l.bt=Eu,l.bu=bc,l.bv=Kg,l.bw=Gv,l.bx=tv,l.by=Dv,l.bz=e2,l.c=T4,l.c$=Vo,l.c0=450,l.c1=7,l.c2=y3,l.c3=v6,l.c4=256,l.c5=Bp,l.c6=$p,l.c7=wa,l.c8=mu,l.c9=wc,l.cA=function(t){let e=1/0,n=1/0,s=-1/0,u=-1/0;for(const m of t)e=Math.min(e,m.x),n=Math.min(n,m.y),s=Math.max(s,m.x),u=Math.max(u,m.y);return{min:new Eo(e,n),max:new Eo(s,u)}},l.cB=td,l.cC=pm,l.cD=$d,l.cE=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.cF=Rc,l.cG=k1,l.cH=a4,l.cI=Ag,l.cJ=Mf,l.cK=R3,l.cL=function(t){return t({pluginStatus:Wn,pluginURL:Yi}),$r.on("pluginStateChange",t),t},l.cM=Om,l.cN=Vg,l.cO=Zt,l.cP=yr,l.cQ=Ut,l.cR=Xo,l.cS=Za,l.cT=aa,l.cU=function(t){const e=t.indexOf("\x1f");return e>=0?t.slice(0,e):t},l.cV=function(t){return t.indexOf("\x1f")>=0},l.cW=function(t){const e=t.indexOf("\x1f");return e>=0?t.slice(e+1):""},l.cX=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},l.cY=function(t,e,n,s){return"custom"===t.type?new P5(t,e):new X5[t.type](t,e,n,s)},l.cZ=ts,l.c_=$r,l.ca=1,l.cb=771,l.cc=0,l.cd=o0,l.ce=function(t,e,n,s,u){return zn((t-e)/(n-e)*(u-s)+s,s,u)},l.cf=Fd,l.cg=Xl,l.ch=class{constructor(t,e,n,s){this.context=t,this.format=s,this.size=n,this.texture=t.gl.createTexture();const[u,m,g]=this.size,{gl:E}=t;E.bindTexture(E.TEXTURE_3D,this.texture),t.pixelStoreUnpackFlipY.set(!1),t.pixelStoreUnpack.set(1),t.pixelStoreUnpackPremultiplyAlpha.set(!1);let T=this.format,z=E.UNSIGNED_BYTE;this.format===E.DEPTH_COMPONENT&&(T=E.DEPTH_COMPONENT16,z=E.UNSIGNED_SHORT),this.format===E.R8&&(s=E.RED),this.format===E.R32F&&(z=E.FLOAT,s=E.RED),E.texImage3D(E.TEXTURE_3D,0,T,u,m,g,0,s,z,e.data)}bind(t,e){const{context:n}=this,{gl:s}=n;s.bindTexture(s.TEXTURE_3D,this.texture),t!==this.minFilter&&(s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MAG_FILTER,t),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_MIN_FILTER,t),this.minFilter=t),e!==this.wrapS&&(s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_S,e),s.texParameteri(s.TEXTURE_3D,s.TEXTURE_WRAP_T,e),this.wrapS=e)}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}},l.ci=x3,l.cj=[1,1,1],l.ck=Im,l.cl=Y4,l.cm=t0,l.cn=eu,l.co=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Eo(1/0,1/0),max:new Eo(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(t,e=!1){const n=Hs(new Eo(0,0),new Eo(Xi,Xi),t),s=[];if(e&&!Yl(n,this._globalClipBounds))return s;for(const u of this._activeRegions){if(u.hiddenByOverlap||!Yl(n,u))continue;const m=j0(u.min,u.max,t);s.push({min:m.min,max:m.max,sourceId:this._sourceIds[u.priority],footprint:u.footprint,footprintTileId:u.tileId,order:u.order,clipMask:u.clipMask})}return s}setSources(t){this._setSources(t.map(e=>({getSourceId:()=>e.cache.id,getFootprints:()=>{const n=[];for(const s of e.cache.getVisibleCoordinates()){const u=e.cache.getTile(s).buckets[e.layer];u&&u.updateFootprints(s.toUnwrapped(),n)}return n},getOrder:()=>e.order,getClipMask:()=>e.clipMask})))}_addSource(t){const e=t.getFootprints();if(0===e.length)return;const n=t.getOrder(),s=t.getClipMask();for(const u of e){if(!u.footprint)continue;const m=Hs(u.footprint.min,u.footprint.max,u.id);this._activeRegions.push({min:m.min,max:m.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:u.id,footprint:u.footprint,order:n,clipMask:s})}this._sourceIds.push(t.getSourceId())}_computeReplacement(){this._activeRegions.sort((e,n)=>e.priority-n.priority||Ls(e.min,n.min)||Ls(e.max,n.max));let t=this._activeRegions.length!==this._prevRegions.length;if(!t){let e=0;for(;!t&&e!==this._activeRegions.length;){const n=this._activeRegions[e],s=this._prevRegions[e];t=n.priority!==s.priority||!Kl(n,s)||n.order!==s.order||n.clipMask!==s.clipMask,++e}}if(t){++this._updateTime;for(const n of this._activeRegions)n.order!==1/0&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,n.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,n.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,n.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,n.max.y));const e=n=>{const s=this._activeRegions;if(n>=s.length)return n;const u=s[n].priority;for(;n<s.length&&s[n].priority===u;)++n;return n};if(this._sourceIds.length>1){let n=0,s=e(n);for(;n!==s;){let u=n;const m=n;for(;u!==s;){const g=this._activeRegions[u];g.hiddenByOverlap=!1;for(let E=0;E<m;E++){const T=this._activeRegions[E];if(!T.hiddenByOverlap&&g.order===1/0&&Yl(g,T)&&(g.hiddenByOverlap=s4(g.footprint,g.tileId,T.footprint,T.tileId),g.hiddenByOverlap))break}++u}n=s,s=e(n)}}}}_setSources(t){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let e=t.length-1;e>=0;e--)this._addSource(t[e]);this._computeReplacement()}},l.cp=e0,l.cq=Nh,l.cr=o1,l.cs=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy()}_fillGridMeshWithLods(t,e){const n=new Eu,s=new bc,u=[],m=t+1+2,g=e[0]+1,E=e[0]+1+(1+e.length),T=(z,$,W)=>{let Z=z===m-1?z-2:0===z?z:z-1;return Z+=W?24575:0,[Z,$]};for(let z=0;z<m;++z)n.emplaceBack(...T(z,0,!0));for(let z=0;z<g;++z)for(let $=0;$<m;++$)n.emplaceBack(...T($,z,(0===$||$===m-1)&&!0));for(let z=0;z<e.length;++z){const $=e[z];for(let W=0;W<m;++W)n.emplaceBack(...T(W,$,!0))}for(let z=0;z<e.length;++z){const $=s.length,W=e[z]+1+2,Z=new bc;for(let be=0;be<W-1;be++){const xe=be===W-2,$e=xe?m*(E-e.length+z-be):m;for(let gt=0;gt<m-1;gt++){const yt=be*m+gt;0===be||xe||0===gt||gt===m-2?(Z.emplaceBack(yt+1,yt,yt+$e),Z.emplaceBack(yt+$e,yt+$e+1,yt+1)):(s.emplaceBack(yt+1,yt,yt+$e),s.emplaceBack(yt+$e,yt+$e+1,yt+1))}}const le=ul.simpleSegment(0,$,n.length,s.length-$);for(let be=0;be<Z.uint16.length;be+=3)s.emplaceBack(Z.uint16[be],Z.uint16[be+1],Z.uint16[be+2]);const de=ul.simpleSegment(0,$,n.length,s.length-$);u.push({withoutSkirts:le,withSkirts:de})}return{vertices:n,indices:s,segments:u}}_createGrid(t){const e=this._fillGridMeshWithLods(64,jf);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,Cd.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}_createPoles(t){const e=new bc;for(let g=0;g<=64;g++)e.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const n=new wc,s=new wc,u=new wc,m=new wc;this._poleSegments=[];for(let g=0,E=0;g<Rp;g++){const T=360/(1<<g);n.emplaceBack(0,-$d,0,.5,0),s.emplaceBack(0,-$d,0,.5,1),u.emplaceBack(0,-$d,0,.5,.5),m.emplaceBack(0,-$d,0,.5,.5);for(let z=0;z<=64;z++){let $=z/64,W=0;const Z=Cr(0,T,$),[le,de,be]=c1(Yf,Zf,Z,$d);n.emplaceBack(le,de,be,$,W),s.emplaceBack(le,de,be,$,1-W);const xe=Gr(Z);$=.5+.5*Math.sin(xe),W=.5+.5*Math.cos(xe),u.emplaceBack(le,de,be,$,W),m.emplaceBack(le,de,be,$,1-W)}this._poleSegments.push(ul.simpleSegment(E,0,66,64)),E+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,Lp,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(s,Lp,!1),this._texturedPoleNorthVertexBuffer=t.createVertexBuffer(u,Lp,!1),this._texturedPoleSouthVertexBuffer=t.createVertexBuffer(m,Lp,!1)}getGridBuffers(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t,e){return[e?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,e?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}},l.ct=function(t){return As.has(t)},l.cu=_v,l.cv=function(t,e,n=0,s=!0){const u=new Eo(n,n),m=t.sub(u),g=e.add(u),E=[m,new Eo(g.x,m.y),g,new Eo(m.x,g.y)];return s&&E.push(m.clone()),E},l.cw=function(t,e){const n=[];for(let s=0;s<t.length;s++){const u=go(s-1,-1,t.length-1),m=go(s+1,-1,t.length-1),g=t[s],E=t[m],T=t[u].sub(g).unit(),z=E.sub(g).unit(),$=z.angleWithSep(T.x,T.y),W=T.add(z).unit().mult(-1*e/Math.sin($/2));n.push(g.add(W))}return n},l.cx=kv,l.cy=Xm,l.cz=function(t,e,n=0){return l._.fromValues(((e.x-n)*t.scale-t.x)*Xi,(e.y*t.scale-t.y)*Xi,Cg(e.z,e.y))},l.d=Os,l.d$=kc,l.d0=Nn,l.d1=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},l.d2=Zn,l.d3=Wm,l.d4=xc,l.d5=function([t,e,n]){const s=Math.hypot(t,e,n),u=Math.atan2(t,n),m=.5*Math.PI-Math.acos(-e/s);return new oa(rl(u),rl(m))},l.d6=Tu,l.d7=cp,l.d8=ft,l.d9=_f,l.dA=function(t){const e=gs();if(!e)return;const n=e.delete(hr);t&&n.catch(t).then(()=>t())},l.dB=ev,l.dC=R6,l.dD=function(t){Wv=mi.resolveURL(t),fg||(fg=new Gv(tv(),new Hl)),fg.broadcast("setDracoUrl",Wv)},l.dE=z6,l.dF=function(t){nu=mi.resolveURL(t),fg||(fg=new Gv(tv(),new Hl)),fg.broadcast("setMeshoptUrl",nu)},l.dG=co,l.dH=lt,l.dI=p1,l.dJ=p0,l.dK=zc,l.dL=s1,l.dM=U2,l.dN=Sf,l.dO=Rg,l.dP=Fr,l.dQ=c2,l.dR=sn,l.dS=function(t,e,n,s,u,m,g,E,T,z,$){t.createArrays(),t.tilePixelRatio=Xi/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const W=t.layers[0].layout,Z=t.layers[0]._unevaluatedLayout._values,le={};if("composite"===t.textSizeData.kind){const{minZoom:$e,maxZoom:gt}=t.textSizeData;le.compositeTextSizes=[Z["text-size"].possiblyEvaluate(new os($e),E),Z["text-size"].possiblyEvaluate(new os(gt),E)]}if("composite"===t.iconSizeData.kind){const{minZoom:$e,maxZoom:gt}=t.iconSizeData;le.compositeIconSizes=[Z["icon-size"].possiblyEvaluate(new os($e),E),Z["icon-size"].possiblyEvaluate(new os(gt),E)]}le.layoutTextSize=Z["text-size"].possiblyEvaluate(new os(T+1),E),le.layoutIconSize=Z["icon-size"].possiblyEvaluate(new os(T+1),E),le.textMaxSize=Z["text-size"].possiblyEvaluate(new os(18),E);const de="map"===W.get("text-rotation-alignment")&&"point"!==W.get("symbol-placement"),be=W.get("text-size");let xe=!1;for(const $e of t.features)if($e.icon&&$e.icon.nameSecondary){xe=!0;break}for(const $e of t.features){const gt=W.get("text-font").evaluate($e,{},E).join(","),yt=be.evaluate($e,{},E),wt=le.layoutTextSize.evaluate($e,{},E),nn=(le.layoutIconSize.evaluate($e,{},E),{horizontal:{},vertical:void 0}),Qt=$e.text;let kn,Rn=[0,0];if(Qt){const xi=Qt.toString(),Ji=W.get("text-letter-spacing").evaluate($e,{},E)*Mu,So=W.get("text-line-height").evaluate($e,{},E)*Mu,qi=io(xi)?Ji:0,wo=W.get("text-anchor").evaluate($e,{},E),zi=W.get("text-variable-anchor");if(!zi){const To=W.get("text-radial-offset").evaluate($e,{},E);Rn=To?Ev(wo,[To*Mu,V4]):W.get("text-offset").evaluate($e,{},E).map(Fo=>Fo*Mu)}let bo=de?"center":W.get("text-justify").evaluate($e,{},E);const Ro="point"===W.get("symbol-placement"),Co=Ro?W.get("text-max-width").evaluate($e,{},E)*Mu:1/0,lr=To=>{t.allowVerticalPlacement&&bi(xi)&&(nn.vertical=Io(Qt,e,n,u,gt,Co,So,wo,To,qi,Rn,Ii.vertical,!0,wt,yt))};if(!de&&zi){const To="auto"===bo?zi.map(Yr=>Mf(Yr)):[bo];let Fo=!1;for(let Yr=0;Yr<To.length;Yr++){const Br=To[Yr];if(!nn.horizontal[Br])if(Fo)nn.horizontal[Br]=nn.horizontal[0];else{const Rr=Io(Qt,e,n,u,gt,Co,So,"center",Br,qi,Rn,Ii.horizontal,!1,wt,yt);Rr&&(nn.horizontal[Br]=Rr,Fo=1===Rr.positionedLines.length)}}lr("left")}else{if("auto"===bo&&(bo=Mf(wo)),Ro||W.get("text-writing-mode").indexOf("horizontal")>=0||!bi(xi)){const To=Io(Qt,e,n,u,gt,Co,So,wo,bo,qi,Rn,Ii.horizontal,!1,wt,yt);To&&(nn.horizontal[bo]=To)}lr(Ro?"left":bo)}}let li=!1;if($e.icon&&$e.icon.namePrimary){const xi=s[$e.icon.namePrimary];xi&&(kn=Ec(u[$e.icon.namePrimary],$e.icon.nameSecondary?u[$e.icon.nameSecondary]:void 0,W.get("icon-offset").evaluate($e,{},E),W.get("icon-anchor").evaluate($e,{},E)),li=xi.sdf,void 0===t.sdfIcons?t.sdfIcons=xi.sdf:t.sdfIcons!==xi.sdf&&fa("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xi.pixelRatio!==t.pixelRatio||0!==W.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const Di=$4(nn.horizontal)||nn.vertical;t.iconsInText||(t.iconsInText=!!Di&&Di.iconsInText),(Di||kn)&&d6(t,$e,nn,kn,s,le,wt,0,Rn,li,g,E,z,$,xe)}m&&t.generateCollisionDebugBuffers(T,t.collisionBoxArray)},l.dT=j2,l.dU=ze,l.dV=No,l.dW=a2,l.dX=V2,l.dY=f3,l.dZ=Xr,l.d_=Qo,l.da=vf,l.db=function(t){const e=[0,0,0],n=l.ad.identity(new Float64Array(16));return l.ad.multiply(n,t.pixelMatrix,t.globeMatrix),l._.transformMat4(e,e,n),new Eo(e[0],e[1])},l.dc=vt,l.dd=Ht,l.de=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!function(n){if(null==Re){const s=n.navigator?n.navigator.userAgent:null;Re=!!n.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Re}(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},l.df=cr,l.dg=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let e="";for(let n=0;n<10;n++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Gc,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!Ut(t))return t;const n=_s(t);return n.params.push(`sdk=js-${qe}`),n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!Ut(t))return t;const n=_s(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeModelURL(t,e){if(!Ut(t))return t;const n=_s(t);return n.path=`/models/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,s){if(!Ut(t))return t;const u=_s(t);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),n&&u.params.push(`language=${n}`),s&&u.params.push(`worldview=${s}`),this._makeAPIURL(u,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,s){const u=_s(t);return Ut(t)?(u.path=`/styles/v1${u.path}/sprite${e}${n}`,this._makeAPIURL(u,this._customAccessToken||s)):(u.path+=`${e}${n}`,Sd(u))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Ut(t))return t;const s=_s(t);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||n&&"raster"!==s.authority&&512===n?"@2x":""}${$a.supported?".webp":"$1"}`),"raster"===s.authority?s.path=`/${ft.RASTER_URL_PREFIX}${s.path}`:"rasterarrays"===s.authority?s.path=`/${ft.RASTERARRAYS_URL_PREFIX}${s.path}`:"3dtiles"===s.authority?s.path=`/${ft.TILES3D_URL_PREFIX}${s.path}`:(s.path=s.path.replace(/^.+\/v4\//,"/"),s.path=`/${ft.TILE_URL_VERSION}${s.path}`);const u=this._customAccessToken||function(m){for(const g of m){const E=g.match(/^access_token=(.*)$/);if(E)return E[1]}return null}(s.params)||ft.ACCESS_TOKEN;return ft.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&s.params.push(`sku=${this._skuToken}`),this._makeAPIURL(s,u)}canonicalizeTileURL(t,e){const n=_s(t);if(!n.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let s="mapbox://";n.path.match(/^\/raster\/v1\//)?s+=`raster/${n.path.replace(`/${ft.RASTER_URL_PREFIX}/`,"")}`:n.path.match(/^\/rasterarrays\/v1\//)?s+=`rasterarrays/${n.path.replace(`/${ft.RASTERARRAYS_URL_PREFIX}/`,"")}`:s+=`tiles/${n.path.replace(`/${ft.TILE_URL_VERSION}/`,"")}`;let u=n.params;return e&&(u=u.filter(m=>!m.match(/^access_token=/))),u.length&&(s+=`?${u.join("&")}`),s}canonicalizeTileset(t,e){const n=!!e&&Ut(e),s=[];for(const u of t.tiles||[])Xt(u)?s.push(this.canonicalizeTileURL(u,n)):s.push(u);return s}_makeAPIURL(t,e){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",s=_s(ft.API_URL);if(t.protocol=s.protocol,t.authority=s.authority,"http"===t.protocol){const u=t.params.indexOf("secure");u>=0&&t.params.splice(u,1)}if("/"!==s.path&&(t.path=`${s.path}${t.path}`),!ft.REQUIRE_ACCESS_TOKEN)return Sd(t);if(e=e||ft.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter(u=>-1===u.indexOf("access_token")),t.params.push(`access_token=${e||""}`),Sd(t)}},l.dh=function(t,e){e?As.add(t):As.delete(t)},l.di=$a,l.dj=uu,l.dk=H0,l.dl=Wc,l.dm=w0,l.dn=Xd,l.dp=function(t){As.delete(t)},l.dq=Xc,l.dr=Nc,l.ds=yo,l.dt=qe,l.du=function(t,e){gr=t,jr=e},l.dv=function(t,e,n=!1){if(Wn===at||Wn===ln||Wn===hn)throw new Error("setRTLTextPlugin cannot be called multiple times.");Yi=mi.resolveURL(t),Wn=at,Qn=e,Sr(),n||tl()},l.dw=is,l.dx=function(){tv().acquire(P6)},l.dy=function(){const t=m0;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(P6),m0=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.dz=C4,l.e=mi,l.e0=Bh,l.e1=xn,l.e2=dr,l.e3=function(t){let e=0;if(new Uint32Array(t,0,1)[0]!==D1){const n=new Uint32Array(t,0,7),[,,s,u,m,g]=n;e=n.byteLength+u+m+g+m,(s!==t.byteLength||e>=t.byteLength)&&fa("Invalid b3dm header information.")}return D3(t,e)},l.e4=function(t,e){const n=T4(t);for(const s of n){for(const u of s.meshes)H5(u);s.lights&&(s.lightMeshIndex=s.meshes.length,s.meshes.push(G5(s.lights,e)))}return n},l.e5=sv,l.e6=Hv,l.e7=Ds,l.e8=function(t){nr(),la&&la.then(e=>{e.keys().then(n=>{for(let s=0;s<n.length-t;s++)e.delete(n[s])})})},l.f=Mc,l.g=function(t,e){return Vo(gi(t,{type:"json"}),e)},l.h=ws,l.i=hd,l.j=$u,l.k=ju,l.l=function(t){return fetch(t).then(e=>e.arrayBuffer()).then(e=>D3(e,0,t))},l.m=class extends Uv{},l.n=vd,l.o=lc,l.p=J2,l.q=z0,l.r=r,l.s=d,l.t=Pe,l.u=Ju,l.v=Id,l.w=fa,l.x=ot,l.y=Fe,l.z=Dh}),se(0,function(l){function qe(Ie){const ue=Ie?Ie.url.toString():void 0;return ue?performance.getEntriesByName(ue):[]}function Y(Ie){if("number"==typeof Ie||"boolean"==typeof Ie||"string"==typeof Ie||null==Ie)return JSON.stringify(Ie);if(Array.isArray(Ie)){let ae="[";for(const we of Ie)ae+=`${Y(we)},`;return`${ae}]`}let ue="{";for(const ae of Object.keys(Ie).sort())ue+=`${ae}:${Y(Ie[ae])},`;return`${ue}}`}function ft(Ie){let ue="";for(const ae of l.cE)ue+=`/${Y(Ie[ae])}`;return ue}class Xt{constructor(ue){this.keyCache={},this._layers={},this._layerConfigs={},ue&&this.replace(ue)}replace(ue,ae){this._layerConfigs={},this._layers={},this.update(ue,[],ae)}update(ue,ae,we){this._options=we;for(const it of ue)this._layerConfigs[it.id]=it,(this._layers[it.id]=l.cY(it,this.scope,null,this._options)).compileFilter(),this.keyCache[it.id]&&delete this.keyCache[it.id];for(const it of ae)delete this.keyCache[it],delete this._layerConfigs[it],delete this._layers[it];this.familiesBySource={};const Ue=function(it,qt){const En={};for(let Gn=0;Gn<it.length;Gn++){const Bi=qt&&qt[it[Gn].id]||ft(it[Gn]);qt&&(qt[it[Gn].id]=Bi);let Vi=En[Bi];Vi||(Vi=En[Bi]=[]),Vi.push(it[Gn])}const dn=[];for(const Gn in En)dn.push(En[Gn]);return dn}(l.dG(this._layerConfigs),this.keyCache);for(const it of Ue){const qt=it.map(Bo=>this._layers[Bo.id]),En=qt[0];if("none"===En.visibility)continue;const dn=En.source||"";let Gn=this.familiesBySource[dn];Gn||(Gn=this.familiesBySource[dn]={});const Bi=En.sourceLayer||"_geojsonTileLayer";let Vi=Gn[Bi];Vi||(Vi=Gn[Bi]=[]),Vi.push(qt)}}}const Ut=1*l.dJ;class It{constructor(ue){const ae={},we=[];for(const En in ue){const dn=ue[En],Gn=ae[En]={};for(const Bi in dn.glyphs){const Vi=dn.glyphs[+Bi];if(!Vi||0===Vi.bitmap.width||0===Vi.bitmap.height)continue;const Bo=Vi.metrics.localGlyph?Ut:1,rr={x:0,y:0,w:Vi.bitmap.width+2*Bo,h:Vi.bitmap.height+2*Bo};we.push(rr),Gn[Bi]=rr}}const{w:Ue,h:it}=l.j(we),qt=new l.dI({width:Ue||1,height:it||1});for(const En in ue){const dn=ue[En];for(const Gn in dn.glyphs){const Bi=dn.glyphs[+Gn];if(!Bi||0===Bi.bitmap.width||0===Bi.bitmap.height)continue;const Vi=ae[En][Gn],Bo=Bi.metrics.localGlyph?Ut:1;l.dI.copy(Bi.bitmap,qt,{x:0,y:0},{x:Vi.x+Bo,y:Vi.y+Bo},Bi.bitmap)}}this.image=qt,this.positions=ae}}l.dH(It,"GlyphAtlas");class C{constructor(ue){this.tileID=new l.aL(ue.tileID.overscaledZ,ue.tileID.wrap,ue.tileID.canonical.z,ue.tileID.canonical.x,ue.tileID.canonical.y),this.tileZoom=ue.tileZoom,this.uid=ue.uid,this.zoom=ue.zoom,this.lut=ue.lut,this.canonical=ue.tileID.canonical,this.pixelRatio=ue.pixelRatio,this.tileSize=ue.tileSize,this.source=ue.source,this.scope=ue.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ue.showCollisionBoxes,this.collectResourceTiming=!!ue.collectResourceTiming,this.promoteId=ue.promoteId,this.isSymbolTile=ue.isSymbolTile,this.tileTransform=l.dK(ue.tileID.canonical,ue.projection),this.projection=ue.projection,this.brightness=ue.brightness,this.extraShadowCaster=!!ue.extraShadowCaster,this.tessellationStep=ue.tessellationStep}parse(ue,ae,we,Ue,it){this.status="parsing",this.data=ue,this.collisionBoxArray=new l.dL;const qt=new l.dM(Object.keys(ue.layers).sort()),En=new l.dN(this.tileID,this.promoteId);En.bucketLayerIDs=[];const dn={},Gn=new l.dO(256,256),Bi={featureIndex:En,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Gn,availableImages:we,brightness:this.brightness},Vi=ae.familiesBySource[this.source];for(const Zi in Vi){const Yt=ue.layers[Zi];if(!Yt)continue;let ri=!1,Ri=!1,Uo=!1;for(const Vr of Vi[Zi])"symbol"===Vr[0].type?ri=!0:Ri=!0,Vr[0].is3D()&&"model"!==Vr[0].type&&(Uo=!0);if(this.extraShadowCaster&&!Uo||!0===this.isSymbolTile&&!ri||!1===this.isSymbolTile&&!Ri)continue;1===Yt.version&&l.w(`Vector tile source "${this.source}" layer "${Zi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const mr=qt.encode(Zi),ss=[];for(let Vr=0;Vr<Yt.length;Vr++){const Na=Yt.feature(Vr),Rl=En.getId(Na,Zi);ss.push({feature:Na,id:Rl,index:Vr,sourceLayerIndex:mr})}for(const Vr of Vi[Zi]){const Na=Vr[0];(!this.extraShadowCaster||Na.is3D()&&"model"!==Na.type)&&(void 0!==this.isSymbolTile&&"symbol"===Na.type!==this.isSymbolTile||Na.minzoom&&this.zoom<Math.floor(Na.minzoom)||Na.maxzoom&&this.zoom>=Na.maxzoom||"none"!==Na.visibility&&(At(Vr,this.zoom,Bi.brightness,we),(dn[Na.id]=Na.createBucket({index:En.bucketLayerIDs.length,layers:Vr,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:mr,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(ss,Bi,this.tileID.canonical,this.tileTransform),En.bucketLayerIDs.push(Vr.map(Rl=>Rl.id))))}}let Bo,rr,oi,Vn;Gn.trim();const hi={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},po=()=>{if(Bo)return this.status="done",it(Bo);if(this.extraShadowCaster)this.status="done",it(null,{buckets:l.dG(dn).filter(Zi=>!Zi.isEmpty()),featureIndex:En,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Bi.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(rr&&oi&&Vn){const Zi=new It(rr),Yt=new l.dQ(oi,Vn,this.lut);for(const ri in dn){const Ri=dn[ri];Ri instanceof l.dR?(At(Ri.layers,this.zoom,Bi.brightness,we),l.dS(Ri,rr,Zi.positions,oi,Yt.iconPositions,this.showCollisionBoxes,we,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Ri.hasPattern&&(Ri instanceof l.dT||Ri instanceof l.dU||Ri instanceof l.b_)&&(At(Ri.layers,this.zoom,Bi.brightness,we),Ri.addFeatures(Bi,this.tileID.canonical,Yt.patternPositions,we,this.tileTransform,this.brightness))}this.status="done",it(null,{buckets:l.dG(dn).filter(ri=>!ri.isEmpty()),featureIndex:En,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Zi.image,lineAtlas:Gn,imageAtlas:Yt,brightness:Bi.brightness})}};if(!this.extraShadowCaster){const Zi=l.dP(Bi.glyphDependencies,Ri=>Object.keys(Ri).map(Number));Object.keys(Zi).length?Ue.send("getGlyphs",{uid:this.uid,stacks:Zi,scope:this.scope},(Ri,Uo)=>{Bo||(Bo=Ri,rr=Uo,po())},void 0,!1,hi):rr={};const Yt=Object.keys(Bi.iconDependencies);Yt.length?Ue.send("getImages",{icons:Yt,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Ri,Uo)=>{Bo||(Bo=Ri,oi=Uo,po())},void 0,!1,hi):oi={};const ri=Object.keys(Bi.patternDependencies);ri.length?Ue.send("getImages",{icons:ri,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Ri,Uo)=>{Bo||(Bo=Ri,Vn=Uo,po())},void 0,!1,hi):Vn={}}po()}}function At(Ie,ue,ae,we){const Ue=new l.X(ue,{brightness:ae});for(const it of Ie)it.recalculate(Ue,we)}class Ht extends l.E{constructor(ue,ae,we,Ue,it,qt){super(),this.actor=ue,this.layerIndex=ae,this.availableImages=we,this.loadVectorData=it||l.ap,this.loading={},this.loaded={},this.deduped=new l.ao(ue.scheduler),this.isSpriteLoaded=Ue,this.scheduler=ue.scheduler,this.brightness=qt}loadTile(ue,ae){const we=ue.uid,Ue=ue&&ue.request,it=Ue&&Ue.collectResourceTiming,qt=this.loading[we]=new C(ue);qt.abort=this.loadVectorData(ue,(En,dn)=>{const Gn=!this.loading[we];if(delete this.loading[we],Gn||En||!dn)return qt.status="done",Gn||(this.loaded[we]=qt),ae(En);const Bi=dn.rawData,Vi={};dn.expires&&(Vi.expires=dn.expires),dn.cacheControl&&(Vi.cacheControl=dn.cacheControl),qt.vectorTile=dn.vectorTile||new l.dV(new l.dW(Bi));const Bo=()=>{qt.parse(qt.vectorTile,this.layerIndex,this.availableImages,this.actor,(rr,oi)=>{if(rr||!oi)return ae(rr);const Vn={};if(it){const hi=qe(Ue);hi.length>0&&(Vn.resourceTiming=JSON.parse(JSON.stringify(hi)))}ae(null,l.W({rawTileData:Bi.slice(0)},oi,Vi,Vn))})};this.isSpriteLoaded?Bo():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Bo,{type:"parseTile",isSymbolTile:ue.isSymbolTile,zoom:ue.tileZoom}):Bo()}),this.loaded=this.loaded||{},this.loaded[we]=qt})}reloadTile(ue,ae){const we=this.loaded,Ue=ue.uid;if(we&&we[Ue]){const it=we[Ue];it.showCollisionBoxes=ue.showCollisionBoxes,it.projection=ue.projection,it.brightness=ue.brightness,it.tileTransform=l.dK(ue.tileID.canonical,ue.projection),it.extraShadowCaster=ue.extraShadowCaster,it.lut=ue.lut;const qt=(En,dn)=>{const Gn=it.reloadCallback;Gn&&(delete it.reloadCallback,it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,Gn)),ae(En,dn)};"parsing"===it.status?it.reloadCallback=qt:"done"===it.status&&(it.vectorTile?it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,qt):qt())}else ae(null,void 0)}abortTile(ue,ae){const we=ue.uid,Ue=this.loading[we];Ue&&(Ue.abort&&Ue.abort(),delete this.loading[we]),ae()}removeTile(ue,ae){const we=this.loaded,Ue=ue.uid;we&&we[Ue]&&delete we[Ue],ae()}}class vt{loadTile(ue,ae){const{uid:we,encoding:Ue,rawImageData:it,padding:qt}=ue,En=ImageBitmap&&it instanceof ImageBitmap?this.getImageData(it,qt):it;ae(null,new l.dX(we,En,Ue,qt<1))}getImageData(ue,ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ue.width,ue.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ue.width,this.offscreenCanvas.height=ue.height,this.offscreenCanvasContext.drawImage(ue,0,0,ue.width,ue.height);const we=this.offscreenCanvasContext.getImageData(-ae,-ae,ue.width+2*ae,ue.height+2*ae);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),we}}class un{decodeRasterArray({task:ue,buffer:ae},we){l.dY.performDecoding(ae,ue).then(Ue=>{we(null,Ue)},Ue=>{we(Ue)})}}const xn=l.dZ.prototype.toGeoJSON;let on=class{constructor(Ie){this._feature=Ie,this.extent=l.a3,this.type=Ie.type,this.properties=Ie.tags,"id"in Ie&&!isNaN(Ie.id)&&(this.id=parseInt(Ie.id,10))}loadGeometry(){if(1===this._feature.type){const Ie=[];for(const ue of this._feature.geometry)Ie.push([new l.P(ue[0],ue[1])]);return Ie}{const Ie=[];for(const ue of this._feature.geometry){const ae=[];for(const we of ue)ae.push(new l.P(we[0],we[1]));Ie.push(ae)}return Ie}}toGeoJSON(Ie,ue,ae){return xn.call(this,Ie,ue,ae)}},ht=class{constructor(Ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.a3,this.length=Ie.length,this._features=Ie}feature(Ie){return new on(this._features[Ie])}};const Jn=64/4096;class An{constructor(){this.features=new Map}clear(){this.features.clear()}load(ue=[],ae){for(const we of ue){const Ue=we.id;if(null==Ue)continue;let it=this.features.get(Ue);it&&this.updateCache(it,ae),we.geometry?(it=xt(we),this.updateCache(it,ae),this.features.set(Ue,it)):this.features.delete(Ue),this.updateCache(it,ae)}}updateCache(ue,ae){for(const{canonical:we,uid:Ue}of Object.values(ae)){const{z:it,x:qt,y:En}=we;qn(ue,Math.pow(2,it),qt,En)&&delete ae[Ue]}}getTile(ue,ae,we){const Ue=Math.pow(2,ue),it=[];for(const qt of this.features.values())qn(qt,Ue,ae,we)&&it.push(ki(qt,Ue,ae,we));return{features:it}}getFeatures(){return[...this.features.values()]}}function qn({minX:Ie,minY:ue,maxX:ae,maxY:we},Ue,it,qt){return Ie<(it+1+Jn)/Ue&&ue<(qt+1+Jn)/Ue&&ae>(it-Jn)/Ue&&we>(qt-Jn)/Ue}function xt(Ie){const{id:ue,geometry:ae,properties:we}=Ie;if(!ae)return;if("GeometryCollection"===ae.type)throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Ue,coordinates:it}=ae,qt={id:ue,type:1,geometry:[],tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},En=qt.geometry;if("Point"===Ue)Ot(it,En,qt);else if("MultiPoint"===Ue)for(const dn of it)Ot(dn,En,qt);else if("LineString"===Ue)qt.type=2,vn(it,En,qt);else if("MultiLineString"===Ue)qt.type=2,Pn(it,En,qt);else if("Polygon"===Ue)qt.type=3,Pn(it,En,qt,!0);else{if("MultiPolygon"!==Ue)throw new Error("Input data is not a valid GeoJSON object.");qt.type=3;for(const dn of it)Pn(dn,En,qt,!0)}return qt}function Ot([Ie,ue],ae,we){const Ue=l.aj(Ie);let it=l.ak(ue);it=it<0?0:it>1?1:it,ae.push(Ue,it),we.minX=Math.min(we.minX,Ue),we.minY=Math.min(we.minY,it),we.maxX=Math.max(we.maxX,Ue),we.maxY=Math.max(we.maxY,it)}function vn(Ie,ue,ae,we=!1,Ue=!1){const it=[];for(const qt of Ie)Ot(qt,it,ae);ue.push(it),we&&function(qt,En){let dn=0;for(let Gn=0,Bi=qt.length,Vi=Bi-2;Gn<Bi;Vi=Gn,Gn+=2)dn+=(qt[Gn]-qt[Vi])*(qt[Gn+1]+qt[Vi+1]);if(dn>0===En)for(let Gn=0,Bi=qt.length;Gn<Bi/2;Gn+=2){const Vi=qt[Gn],Bo=qt[Gn+1];qt[Gn]=qt[Bi-2-Gn],qt[Gn+1]=qt[Bi-1-Gn],qt[Bi-2-Gn]=Vi,qt[Bi-1-Gn]=Bo}}(it,Ue)}function Pn(Ie,ue,ae,we=!1){for(let Ue=0;Ue<Ie.length;Ue++)vn(Ie[Ue],ue,ae,we,0===Ue)}function ki(Ie,ue,ae,we){const{id:Ue,type:it,geometry:qt,tags:En}=Ie,dn=[];if(1===it)Ct(qt,ue,ae,we,dn);else for(const Gn of qt)dn.push(Ct(Gn,ue,ae,we));return{id:Ue,type:it,geometry:dn,tags:En}}function Ct(Ie,ue,ae,we,Ue=[]){for(let it=0;it<Ie.length;it+=2)Ue.push(Me(Ie[it],Ie[it+1],ue,ae,we));return Ue}function Me(Ie,ue,ae,we,Ue){return[Math.round(l.a3*(Ie*ae-we)),Math.round(l.a3*(ue*ae-Ue))]}var pn={exports:{}},Rt=l.d$,On=l.d_.VectorTileFeature,Cn=so;function so(Ie,ue){this.options=ue||{},this.features=Ie,this.length=Ie.length}function Fn(Ie,ue){this.id="number"==typeof Ie.id?Ie.id:void 0,this.type=Ie.type,this.rawGeometry=1===Ie.type?[Ie.geometry]:Ie.geometry,this.properties=Ie.tags,this.extent=ue||4096}so.prototype.feature=function(Ie){return new Fn(this.features[Ie],this.options.extent)},Fn.prototype.loadGeometry=function(){var Ie=this.rawGeometry;this.geometry=[];for(var ue=0;ue<Ie.length;ue++){for(var ae=Ie[ue],we=[],Ue=0;Ue<ae.length;Ue++)we.push(new Rt(ae[Ue][0],ae[Ue][1]));this.geometry.push(we)}return this.geometry},Fn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ie=this.geometry,ue=1/0,ae=-1/0,we=1/0,Ue=-1/0,it=0;it<Ie.length;it++)for(var qt=Ie[it],En=0;En<qt.length;En++){var dn=qt[En];ue=Math.min(ue,dn.x),ae=Math.max(ae,dn.x),we=Math.min(we,dn.y),Ue=Math.max(Ue,dn.y)}return[ue,we,ae,Ue]},Fn.prototype.toGeoJSON=On.prototype.toGeoJSON;var Ke=l.e0,Ae=Cn;function Ge(Ie){var ue=new Ke;return function(ae,we){for(var Ue in ae.layers)we.writeMessage(3,tt,ae.layers[Ue])}(Ie,ue),ue.finish()}function tt(Ie,ue){var ae;ue.writeVarintField(15,Ie.version||1),ue.writeStringField(1,Ie.name||""),ue.writeVarintField(5,Ie.extent||4096);var we={keys:[],values:[],keycache:{},valuecache:{}};for(ae=0;ae<Ie.length;ae++)we.feature=Ie.feature(ae),ue.writeMessage(2,zt,we);var Ue=we.keys;for(ae=0;ae<Ue.length;ae++)ue.writeStringField(3,Ue[ae]);var it=we.values;for(ae=0;ae<it.length;ae++)ue.writeMessage(4,pr,it[ae])}function zt(Ie,ue){var ae=Ie.feature;void 0!==ae.id&&ue.writeVarintField(1,ae.id),ue.writeMessage(2,Yn,Ie),ue.writeVarintField(3,ae.type),ue.writeMessage(4,to,ae)}function Yn(Ie,ue){var ae=Ie.feature,we=Ie.keys,Ue=Ie.values,it=Ie.keycache,qt=Ie.valuecache;for(var En in ae.properties){var dn=ae.properties[En],Gn=it[En];if(null!==dn){void 0===Gn&&(we.push(En),it[En]=Gn=we.length-1),ue.writeVarint(Gn);var Bi=typeof dn;"string"!==Bi&&"boolean"!==Bi&&"number"!==Bi&&(dn=JSON.stringify(dn));var Vi=Bi+":"+dn,Bo=qt[Vi];void 0===Bo&&(Ue.push(dn),qt[Vi]=Bo=Ue.length-1),ue.writeVarint(Bo)}}}function cn(Ie,ue){return(ue<<3)+(7&Ie)}function _o(Ie){return Ie<<1^Ie>>31}function to(Ie,ue){for(var ae=Ie.loadGeometry(),we=Ie.type,Ue=0,it=0,qt=ae.length,En=0;En<qt;En++){var dn=ae[En],Gn=1;1===we&&(Gn=dn.length),ue.writeVarint(cn(1,Gn));for(var Bi=3===we?dn.length-1:dn.length,Vi=0;Vi<Bi;Vi++){1===Vi&&1!==we&&ue.writeVarint(cn(2,Bi-1));var Bo=dn[Vi].x-Ue,rr=dn[Vi].y-it;ue.writeVarint(_o(Bo)),ue.writeVarint(_o(rr)),Ue+=Bo,it+=rr}3===we&&ue.writeVarint(cn(7,1))}}function pr(Ie,ue){var ae=typeof Ie;"string"===ae?ue.writeStringField(1,Ie):"boolean"===ae?ue.writeBooleanField(7,Ie):"number"===ae&&(Ie%1!=0?ue.writeDoubleField(3,Ie):Ie<0?ue.writeSVarintField(6,Ie):ue.writeVarintField(5,Ie))}pn.exports=Ge,pn.exports.fromVectorTileJs=Ge,pn.exports.fromGeojsonVt=function(Ie,ue){ue=ue||{};var ae={};for(var we in Ie)ae[we]=new Ae(Ie[we].features,ue),ae[we].name=we,ae[we].version=ue.version,ae[we].extent=ue.extent;return Ge({layers:ae})},pn.exports.GeoJSONWrapper=Ae;var jo=l.e1(pn.exports);const zr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ie=>Ie},Mi=Math.fround||(rs=new Float32Array(1),Ie=>(rs[0]=+Ie,rs[0]));var rs;const $i=3,br=5,Jr=6;class Li{constructor(ue){this.options=Object.assign(Object.create(zr),ue),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ue){const{log:ae,minZoom:we,maxZoom:Ue}=this.options;ae&&console.time("total time");const it=`prepare ${ue.length} points`;ae&&console.time(it),this.points=ue;const qt=[];for(let dn=0;dn<ue.length;dn++){const Gn=ue[dn];if(!Gn.geometry)continue;const[Bi,Vi]=Gn.geometry.coordinates,Bo=Mi(si(Bi)),rr=Mi(Fi(Vi));qt.push(Bo,rr,1/0,dn,-1,1),this.options.reduce&&qt.push(0)}let En=this.trees[Ue+1]=this._createTree(qt);ae&&console.timeEnd(it);for(let dn=Ue;dn>=we;dn--){const Gn=+Date.now();En=this.trees[dn]=this._createTree(this._cluster(En,dn)),ae&&console.log("z%d: %d clusters in %dms",dn,En.numItems,+Date.now()-Gn)}return ae&&console.timeEnd("total time"),this}getClusters(ue,ae){let we=((ue[0]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,ue[1]));let it=180===ue[2]?180:((ue[2]+180)%360+360)%360-180;const qt=Math.max(-90,Math.min(90,ue[3]));if(ue[2]-ue[0]>=360)we=-180,it=180;else if(we>it){const Vi=this.getClusters([we,Ue,180,qt],ae),Bo=this.getClusters([-180,Ue,it,qt],ae);return Vi.concat(Bo)}const En=this.trees[this._limitZoom(ae)],dn=En.range(si(we),Fi(qt),si(it),Fi(Ue)),Gn=En.data,Bi=[];for(const Vi of dn){const Bo=this.stride*Vi;Bi.push(Gn[Bo+br]>1?yi(Gn,Bo,this.clusterProps):this.points[Gn[Bo+$i]])}return Bi}getChildren(ue){const ae=this._getOriginId(ue),we=this._getOriginZoom(ue),Ue="No cluster with the specified id.",it=this.trees[we];if(!it)throw new Error(Ue);const qt=it.data;if(ae*this.stride>=qt.length)throw new Error(Ue);const En=this.options.radius/(this.options.extent*Math.pow(2,we-1)),dn=it.within(qt[ae*this.stride],qt[ae*this.stride+1],En),Gn=[];for(const Bi of dn){const Vi=Bi*this.stride;qt[Vi+4]===ue&&Gn.push(qt[Vi+br]>1?yi(qt,Vi,this.clusterProps):this.points[qt[Vi+$i]])}if(0===Gn.length)throw new Error(Ue);return Gn}getLeaves(ue,ae,we){const Ue=[];return this._appendLeaves(Ue,ue,ae=ae||10,we=we||0,0),Ue}getTile(ue,ae,we){const Ue=this.trees[this._limitZoom(ue)],it=Math.pow(2,ue),{extent:qt,radius:En}=this.options,dn=En/qt,Gn=(we-dn)/it,Bi=(we+1+dn)/it,Vi={features:[]};return this._addTileFeatures(Ue.range((ae-dn)/it,Gn,(ae+1+dn)/it,Bi),Ue.data,ae,we,it,Vi),0===ae&&this._addTileFeatures(Ue.range(1-dn/it,Gn,1,Bi),Ue.data,it,we,it,Vi),ae===it-1&&this._addTileFeatures(Ue.range(0,Gn,dn/it,Bi),Ue.data,-1,we,it,Vi),Vi.features.length?Vi:null}getClusterExpansionZoom(ue){let ae=this._getOriginZoom(ue)-1;for(;ae<=this.options.maxZoom;){const we=this.getChildren(ue);if(ae++,1!==we.length)break;ue=we[0].properties.cluster_id}return ae}_appendLeaves(ue,ae,we,Ue,it){const qt=this.getChildren(ae);for(const En of qt){const dn=En.properties;if(dn&&dn.cluster?it+dn.point_count<=Ue?it+=dn.point_count:it=this._appendLeaves(ue,dn.cluster_id,we,Ue,it):it<Ue?it++:ue.push(En),ue.length===we)break}return it}_createTree(ue){const ae=new l.cK(ue.length/this.stride|0,this.options.nodeSize,Float32Array);for(let we=0;we<ue.length;we+=this.stride)ae.add(ue[we],ue[we+1]);return ae.finish(),ae.data=ue,ae}_addTileFeatures(ue,ae,we,Ue,it,qt){for(const En of ue){const dn=En*this.stride,Gn=ae[dn+br]>1;let Bi,Vi,Bo;if(Gn)Bi=ao(ae,dn,this.clusterProps),Vi=ae[dn],Bo=ae[dn+1];else{const Vn=this.points[ae[dn+$i]];Bi=Vn.properties;const[hi,po]=Vn.geometry.coordinates;Vi=si(hi),Bo=Fi(po)}const rr={type:1,geometry:[[Math.round(this.options.extent*(Vi*it-we)),Math.round(this.options.extent*(Bo*it-Ue))]],tags:Bi};let oi;oi=Gn||this.options.generateId?ae[dn+$i]:this.points[ae[dn+$i]].id,void 0!==oi&&(rr.id=oi),qt.features.push(rr)}}_limitZoom(ue){return Math.max(this.options.minZoom,Math.min(Math.floor(+ue),this.options.maxZoom+1))}_cluster(ue,ae){const{radius:we,extent:Ue,reduce:it,minPoints:qt}=this.options,En=we/(Ue*Math.pow(2,ae)),dn=ue.data,Gn=[],Bi=this.stride;for(let Vi=0;Vi<dn.length;Vi+=Bi){if(dn[Vi+2]<=ae)continue;dn[Vi+2]=ae;const Bo=dn[Vi],rr=dn[Vi+1],oi=ue.within(dn[Vi],dn[Vi+1],En),Vn=dn[Vi+br];let hi=Vn;for(const po of oi){const Zi=po*Bi;dn[Zi+2]>ae&&(hi+=dn[Zi+br])}if(hi>Vn&&hi>=qt){let po,Zi=Bo*Vn,Yt=rr*Vn,ri=-1;const Ri=(Vi/Bi<<5)+(ae+1)+this.points.length;for(const Uo of oi){const mr=Uo*Bi;if(dn[mr+2]<=ae)continue;dn[mr+2]=ae;const ss=dn[mr+br];Zi+=dn[mr]*ss,Yt+=dn[mr+1]*ss,dn[mr+4]=Ri,it&&(po||(po=this._map(dn,Vi,!0),ri=this.clusterProps.length,this.clusterProps.push(po)),it(po,this._map(dn,mr)))}dn[Vi+4]=Ri,Gn.push(Zi/hi,Yt/hi,1/0,Ri,-1,hi),it&&Gn.push(ri)}else{for(let po=0;po<Bi;po++)Gn.push(dn[Vi+po]);if(hi>1)for(const po of oi){const Zi=po*Bi;if(!(dn[Zi+2]<=ae)){dn[Zi+2]=ae;for(let Yt=0;Yt<Bi;Yt++)Gn.push(dn[Zi+Yt])}}}}return Gn}_getOriginId(ue){return ue-this.points.length>>5}_getOriginZoom(ue){return(ue-this.points.length)%32}_map(ue,ae,we){if(ue[ae+br]>1){const qt=this.clusterProps[ue[ae+Jr]];return we?Object.assign({},qt):qt}const Ue=this.points[ue[ae+$i]].properties,it=this.options.map(Ue);return we&&it===Ue?Object.assign({},it):it}}function yi(Ie,ue,ae){return{type:"Feature",id:Ie[ue+$i],properties:ao(Ie,ue,ae),geometry:{type:"Point",coordinates:[(we=Ie[ue],360*(we-.5)),mo(Ie[ue+1])]}};var we}function ao(Ie,ue,ae){const we=Ie[ue+br],Ue=we>=1e4?`${Math.round(we/1e3)}k`:we>=1e3?Math.round(we/100)/10+"k":we,it=Ie[ue+Jr],qt=-1===it?{}:Object.assign({},ae[it]);return Object.assign(qt,{cluster:!0,cluster_id:Ie[ue+$i],point_count:we,point_count_abbreviated:Ue})}function si(Ie){return Ie/360+.5}function Fi(Ie){const ue=Math.sin(Ie*Math.PI/180),ae=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return ae<0?0:ae>1?1:ae}function mo(Ie){const ue=(180-360*Ie)*Math.PI/180;return 360*Math.atan(Math.exp(ue))/Math.PI-90}function eo(Ie,ue,ae,we){let Ue=we;const it=ue+(ae-ue>>1);let qt,En=ae-ue;const dn=Ie[ue],Gn=Ie[ue+1],Bi=Ie[ae],Vi=Ie[ae+1];for(let Bo=ue+3;Bo<ae;Bo+=3){const rr=es(Ie[Bo],Ie[Bo+1],dn,Gn,Bi,Vi);if(rr>Ue)qt=Bo,Ue=rr;else if(rr===Ue){const oi=Math.abs(Bo-it);oi<En&&(qt=Bo,En=oi)}}Ue>we&&(qt-ue>3&&eo(Ie,ue,qt,we),Ie[qt+2]=Ue,ae-qt>3&&eo(Ie,qt,ae,we))}function es(Ie,ue,ae,we,Ue,it){let qt=Ue-ae,En=it-we;if(0!==qt||0!==En){const dn=((Ie-ae)*qt+(ue-we)*En)/(qt*qt+En*En);dn>1?(ae=Ue,we=it):dn>0&&(ae+=qt*dn,we+=En*dn)}return qt=Ie-ae,En=ue-we,qt*qt+En*En}function Jo(Ie,ue,ae,we){const Ue={id:null!=Ie?Ie:null,type:ue,geometry:ae,tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===ue||"MultiPoint"===ue||"LineString"===ue)or(Ue,ae);else if("Polygon"===ue)or(Ue,ae[0]);else if("MultiLineString"===ue)for(const it of ae)or(Ue,it);else if("MultiPolygon"===ue)for(const it of ae)or(Ue,it[0]);return Ue}function or(Ie,ue){for(let ae=0;ae<ue.length;ae+=3)Ie.minX=Math.min(Ie.minX,ue[ae]),Ie.minY=Math.min(Ie.minY,ue[ae+1]),Ie.maxX=Math.max(Ie.maxX,ue[ae]),Ie.maxY=Math.max(Ie.maxY,ue[ae+1])}function ti(Ie,ue,ae,we){if(!ue.geometry)return;const Ue=ue.geometry.coordinates;if(Ue&&0===Ue.length)return;const it=ue.geometry.type,qt=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let En=[],dn=ue.id;if(ae.promoteId?dn=ue.properties[ae.promoteId]:ae.generateId&&(dn=we||0),"Point"===it)cs(Ue,En);else if("MultiPoint"===it)for(const Gn of Ue)cs(Gn,En);else if("LineString"===it)Cs(Ue,En,qt,!1);else if("MultiLineString"===it){if(ae.lineMetrics){for(const Gn of Ue)En=[],Cs(Gn,En,qt,!1),Ie.push(Jo(dn,"LineString",En,ue.properties));return}Or(Ue,En,qt,!1)}else if("Polygon"===it)Or(Ue,En,qt,!0);else{if("MultiPolygon"!==it){if("GeometryCollection"===it){for(const Gn of ue.geometry.geometries)ti(Ie,{id:dn,geometry:Gn,properties:ue.properties},ae,we);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Gn of Ue){const Bi=[];Or(Gn,Bi,qt,!0),En.push(Bi)}}Ie.push(Jo(dn,it,En,ue.properties))}function cs(Ie,ue){ue.push(Kr(Ie[0]),Qr(Ie[1]),0)}function Cs(Ie,ue,ae,we){let Ue,it,qt=0;for(let dn=0;dn<Ie.length;dn++){const Gn=Kr(Ie[dn][0]),Bi=Qr(Ie[dn][1]);ue.push(Gn,Bi,0),dn>0&&(qt+=we?(Ue*Bi-Gn*it)/2:Math.sqrt(Math.pow(Gn-Ue,2)+Math.pow(Bi-it,2))),Ue=Gn,it=Bi}const En=ue.length-3;ue[2]=1,eo(ue,0,En,ae),ue[En+2]=1,ue.size=Math.abs(qt),ue.start=0,ue.end=ue.size}function Or(Ie,ue,ae,we){for(let Ue=0;Ue<Ie.length;Ue++){const it=[];Cs(Ie[Ue],it,ae,we),ue.push(it)}}function Kr(Ie){return Ie/360+.5}function Qr(Ie){const ue=Math.sin(Ie*Math.PI/180),ae=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return ae<0?0:ae>1?1:ae}function Ho(Ie,ue,ae,we,Ue,it,qt,En){if(we/=ue,it>=(ae/=ue)&&qt<we)return Ie;if(qt<ae||it>=we)return null;const dn=[];for(const Gn of Ie){const Bi=Gn.geometry;let Vi=Gn.type;const Bo=0===Ue?Gn.minX:Gn.minY,rr=0===Ue?Gn.maxX:Gn.maxY;if(Bo>=ae&&rr<we){dn.push(Gn);continue}if(rr<ae||Bo>=we)continue;let oi=[];if("Point"===Vi||"MultiPoint"===Vi)Nr(Bi,oi,ae,we,Ue);else if("LineString"===Vi)ir(Bi,oi,ae,we,Ue,!1,En.lineMetrics);else if("MultiLineString"===Vi)Dr(Bi,oi,ae,we,Ue,!1);else if("Polygon"===Vi)Dr(Bi,oi,ae,we,Ue,!0);else if("MultiPolygon"===Vi)for(const Vn of Bi){const hi=[];Dr(Vn,hi,ae,we,Ue,!0),hi.length&&oi.push(hi)}if(oi.length){if(En.lineMetrics&&"LineString"===Vi){for(const Vn of oi)dn.push(Jo(Gn.id,Vi,Vn,Gn.tags));continue}"LineString"!==Vi&&"MultiLineString"!==Vi||(1===oi.length?(Vi="LineString",oi=oi[0]):Vi="MultiLineString"),"Point"!==Vi&&"MultiPoint"!==Vi||(Vi=3===oi.length?"Point":"MultiPoint"),dn.push(Jo(Gn.id,Vi,oi,Gn.tags))}}return dn.length?dn:null}function Nr(Ie,ue,ae,we,Ue){for(let it=0;it<Ie.length;it+=3){const qt=Ie[it+Ue];qt>=ae&&qt<=we&&Gs(ue,Ie[it],Ie[it+1],Ie[it+2])}}function ir(Ie,ue,ae,we,Ue,it,qt){let En=_r(Ie);const dn=0===Ue?ni:as;let Gn,Bi,Vi=Ie.start;for(let hi=0;hi<Ie.length-3;hi+=3){const po=Ie[hi],Zi=Ie[hi+1],Yt=Ie[hi+2],ri=Ie[hi+3],Ri=Ie[hi+4],Uo=0===Ue?po:Zi,mr=0===Ue?ri:Ri;let ss=!1;qt&&(Gn=Math.sqrt(Math.pow(po-ri,2)+Math.pow(Zi-Ri,2))),Uo<ae?mr>ae&&(Bi=dn(En,po,Zi,ri,Ri,ae),qt&&(En.start=Vi+Gn*Bi)):Uo>we?mr<we&&(Bi=dn(En,po,Zi,ri,Ri,we),qt&&(En.start=Vi+Gn*Bi)):Gs(En,po,Zi,Yt),mr<ae&&Uo>=ae&&(Bi=dn(En,po,Zi,ri,Ri,ae),ss=!0),mr>we&&Uo<=we&&(Bi=dn(En,po,Zi,ri,Ri,we),ss=!0),!it&&ss&&(qt&&(En.end=Vi+Gn*Bi),ue.push(En),En=_r(Ie)),qt&&(Vi+=Gn)}let Bo=Ie.length-3;const rr=Ie[Bo],oi=Ie[Bo+1],Vn=0===Ue?rr:oi;Vn>=ae&&Vn<=we&&Gs(En,rr,oi,Ie[Bo+2]),Bo=En.length-3,it&&Bo>=3&&(En[Bo]!==En[0]||En[Bo+1]!==En[1])&&Gs(En,En[0],En[1],En[2]),En.length&&ue.push(En)}function _r(Ie){const ue=[];return ue.size=Ie.size,ue.start=Ie.start,ue.end=Ie.end,ue}function Dr(Ie,ue,ae,we,Ue,it){for(const qt of Ie)ir(qt,ue,ae,we,Ue,it,!1)}function Gs(Ie,ue,ae,we){Ie.push(ue,ae,we)}function ni(Ie,ue,ae,we,Ue,it){const qt=(it-ue)/(we-ue);return Gs(Ie,it,ae+(Ue-ae)*qt,1),qt}function as(Ie,ue,ae,we,Ue,it){const qt=(it-ae)/(Ue-ae);return Gs(Ie,ue+(we-ue)*qt,it,1),qt}function Lr(Ie,ue){const ae=[];for(let we=0;we<Ie.length;we++){const Ue=Ie[we],it=Ue.type;let qt;if("Point"===it||"MultiPoint"===it||"LineString"===it)qt=Xs(Ue.geometry,ue);else if("MultiLineString"===it||"Polygon"===it){qt=[];for(const En of Ue.geometry)qt.push(Xs(En,ue))}else if("MultiPolygon"===it){qt=[];for(const En of Ue.geometry){const dn=[];for(const Gn of En)dn.push(Xs(Gn,ue));qt.push(dn)}}ae.push(Jo(Ue.id,it,qt,Ue.tags))}return ae}function Xs(Ie,ue){const ae=[];ae.size=Ie.size,void 0!==Ie.start&&(ae.start=Ie.start,ae.end=Ie.end);for(let we=0;we<Ie.length;we+=3)ae.push(Ie[we]+ue,Ie[we+1],Ie[we+2]);return ae}function vs(Ie,ue){if(Ie.transformed)return Ie;const ae=1<<Ie.z,we=Ie.x,Ue=Ie.y;for(const it of Ie.features){const qt=it.geometry,En=it.type;if(it.geometry=[],1===En)for(let dn=0;dn<qt.length;dn+=2)it.geometry.push(Hr(qt[dn],qt[dn+1],ue,ae,we,Ue));else for(let dn=0;dn<qt.length;dn++){const Gn=[];for(let Bi=0;Bi<qt[dn].length;Bi+=2)Gn.push(Hr(qt[dn][Bi],qt[dn][Bi+1],ue,ae,we,Ue));it.geometry.push(Gn)}}return Ie.transformed=!0,Ie}function Hr(Ie,ue,ae,we,Ue,it){return[Math.round(ae*(Ie*we-Ue)),Math.round(ae*(ue*we-it))]}function Wi(Ie,ue,ae,we,Ue){const it=ue===Ue.maxZoom?0:Ue.tolerance/((1<<ue)*Ue.extent),qt={features:[],numPoints:0,numSimplified:0,numFeatures:Ie.length,source:null,x:ae,y:we,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const En of Ie)ei(qt,En,it,Ue);return qt}function ei(Ie,ue,ae,we){const Ue=ue.geometry,it=ue.type,qt=[];if(Ie.minX=Math.min(Ie.minX,ue.minX),Ie.minY=Math.min(Ie.minY,ue.minY),Ie.maxX=Math.max(Ie.maxX,ue.maxX),Ie.maxY=Math.max(Ie.maxY,ue.maxY),"Point"===it||"MultiPoint"===it)for(let En=0;En<Ue.length;En+=3)qt.push(Ue[En],Ue[En+1]),Ie.numPoints++,Ie.numSimplified++;else if("LineString"===it)Pi(qt,Ue,Ie,ae,!1,!1);else if("MultiLineString"===it||"Polygon"===it)for(let En=0;En<Ue.length;En++)Pi(qt,Ue[En],Ie,ae,"Polygon"===it,0===En);else if("MultiPolygon"===it)for(let En=0;En<Ue.length;En++){const dn=Ue[En];for(let Gn=0;Gn<dn.length;Gn++)Pi(qt,dn[Gn],Ie,ae,!0,0===Gn)}if(qt.length){let En=ue.tags||null;if("LineString"===it&&we.lineMetrics){En={};for(const Gn in ue.tags)En[Gn]=ue.tags[Gn];En.mapbox_clip_start=Ue.start/Ue.size,En.mapbox_clip_end=Ue.end/Ue.size}const dn={geometry:qt,type:"Polygon"===it||"MultiPolygon"===it?3:"LineString"===it||"MultiLineString"===it?2:1,tags:En};null!==ue.id&&(dn.id=ue.id),Ie.features.push(dn)}}function Pi(Ie,ue,ae,we,Ue,it){const qt=we*we;if(we>0&&ue.size<(Ue?qt:we))return void(ae.numPoints+=ue.length/3);const En=[];for(let dn=0;dn<ue.length;dn+=3)(0===we||ue[dn+2]>qt)&&(ae.numSimplified++,En.push(ue[dn],ue[dn+1])),ae.numPoints++;Ue&&function(dn,Gn){let Bi=0;for(let Vi=0,Bo=dn.length,rr=Bo-2;Vi<Bo;rr=Vi,Vi+=2)Bi+=(dn[Vi]-dn[rr])*(dn[Vi+1]+dn[rr+1]);if(Bi>0===Gn)for(let Vi=0,Bo=dn.length;Vi<Bo/2;Vi+=2){const rr=dn[Vi],oi=dn[Vi+1];dn[Vi]=dn[Bo-2-Vi],dn[Vi+1]=dn[Bo-1-Vi],dn[Bo-2-Vi]=rr,dn[Bo-1-Vi]=oi}}(En,it),Ie.push(En)}const Xn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class kt{constructor(ue,ae){const we=(ae=this.options=function(it,qt){for(const En in qt)it[En]=qt[En];return it}(Object.create(Xn),ae)).debug;if(we&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ue=function(it,qt){const En=[];if("FeatureCollection"===it.type)for(let dn=0;dn<it.features.length;dn++)ti(En,it.features[dn],qt,dn);else ti(En,"Feature"===it.type?it:{geometry:it},qt);return En}(ue,ae);this.tiles={},this.tileCoords=[],we&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ue=function(it,qt){const En=qt.buffer/qt.extent;let dn=it;const Gn=Ho(it,1,-1-En,En,0,-1,2,qt),Bi=Ho(it,1,1-En,2+En,0,-1,2,qt);return(Gn||Bi)&&(dn=Ho(it,1,-En,1+En,0,-1,2,qt)||[],Gn&&(dn=Lr(Gn,1).concat(dn)),Bi&&(dn=dn.concat(Lr(Bi,-1)))),dn}(Ue,ae),Ue.length&&this.splitTile(Ue,0,0,0),we&&(Ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ue,ae,we,Ue,it,qt,En){const dn=[ue,ae,we,Ue],Gn=this.options,Bi=Gn.debug;for(;dn.length;){Ue=dn.pop(),we=dn.pop(),ae=dn.pop(),ue=dn.pop();const Vi=1<<ae,Bo=mt(ae,we,Ue);let rr=this.tiles[Bo];if(!rr&&(Bi>1&&console.time("creation"),rr=this.tiles[Bo]=Wi(ue,ae,we,Ue,Gn),this.tileCoords.push({z:ae,x:we,y:Ue}),Bi)){Bi>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,we,Ue,rr.numFeatures,rr.numPoints,rr.numSimplified),console.timeEnd("creation"));const ss=`z${ae}`;this.stats[ss]=(this.stats[ss]||0)+1,this.total++}if(rr.source=ue,null==it){if(ae===Gn.indexMaxZoom||rr.numPoints<=Gn.indexMaxPoints)continue}else{if(ae===Gn.maxZoom||ae===it)continue;if(null!=it){const ss=it-ae;if(we!==qt>>ss||Ue!==En>>ss)continue}}if(rr.source=null,0===ue.length)continue;Bi>1&&console.time("clipping");const oi=.5*Gn.buffer/Gn.extent,Vn=.5-oi,hi=.5+oi,po=1+oi;let Zi=null,Yt=null,ri=null,Ri=null,Uo=Ho(ue,Vi,we-oi,we+hi,0,rr.minX,rr.maxX,Gn),mr=Ho(ue,Vi,we+Vn,we+po,0,rr.minX,rr.maxX,Gn);ue=null,Uo&&(Zi=Ho(Uo,Vi,Ue-oi,Ue+hi,1,rr.minY,rr.maxY,Gn),Yt=Ho(Uo,Vi,Ue+Vn,Ue+po,1,rr.minY,rr.maxY,Gn),Uo=null),mr&&(ri=Ho(mr,Vi,Ue-oi,Ue+hi,1,rr.minY,rr.maxY,Gn),Ri=Ho(mr,Vi,Ue+Vn,Ue+po,1,rr.minY,rr.maxY,Gn),mr=null),Bi>1&&console.timeEnd("clipping"),dn.push(Zi||[],ae+1,2*we,2*Ue),dn.push(Yt||[],ae+1,2*we,2*Ue+1),dn.push(ri||[],ae+1,2*we+1,2*Ue),dn.push(Ri||[],ae+1,2*we+1,2*Ue+1)}}getTile(ue,ae,we){ue=+ue,ae=+ae,we=+we;const Ue=this.options,{extent:it,debug:qt}=Ue;if(ue<0||ue>24)return null;const En=1<<ue,dn=mt(ue,ae=ae+En&En-1,we);if(this.tiles[dn])return vs(this.tiles[dn],it);qt>1&&console.log("drilling down to z%d-%d-%d",ue,ae,we);let Gn,Bi=ue,Vi=ae,Bo=we;for(;!Gn&&Bi>0;)Bi--,Vi>>=1,Bo>>=1,Gn=this.tiles[mt(Bi,Vi,Bo)];return Gn&&Gn.source?(qt>1&&(console.log("found parent tile z%d-%d-%d",Bi,Vi,Bo),console.time("drilling down")),this.splitTile(Gn.source,Bi,Vi,Bo,ue,ae,we),qt>1&&console.timeEnd("drilling down"),this.tiles[dn]?vs(this.tiles[dn],it):null):null}}function mt(Ie,ue,ae){return 32*((1<<Ie)*ae+ue)+Ie}function Ye(Ie,ue){const ae=Ie.tileID.canonical;if(!this._geoJSONIndex)return ue(null,null);const we=this._geoJSONIndex.getTile(ae.z,ae.x,ae.y);if(!we)return ue(null,null);const Ue=new ht(we.features);let it=jo(Ue);0===it.byteOffset&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),ue(null,{vectorTile:Ue,rawData:it.buffer})}class Mt extends Ht{constructor(ue,ae,we,Ue,it,qt){super(ue,ae,we,Ue,Ye,qt),it&&(this.loadGeoJSON=it),this._dynamicIndex=new An}loadData(ue,ae){const we=ue&&ue.request,Ue=we&&we.collectResourceTiming;this.loadGeoJSON(ue,(it,qt)=>{if(it||!qt)return ae(it);if("object"!=typeof qt)return ae(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));{try{if(ue.filter){const dn=l.y(ue.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===dn.result)throw new Error(dn.value.map(Gn=>`${Gn.key}: ${Gn.message}`).join(", "));qt.features=qt.features.filter(Gn=>dn.value.evaluate({zoom:0},Gn))}ue.dynamic?("Feature"===qt.type&&(qt={type:"FeatureCollection",features:[qt]}),ue.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(qt.features,this.loaded),ue.cluster&&(qt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ue.cluster?new Li(function({superclusterOptions:dn,clusterProperties:Gn}){if(!Gn||!dn)return dn;const Bi={},Vi={},Bo={accumulated:null,zoom:0},rr={properties:null},oi=Object.keys(Gn);for(const Vn of oi){const[hi,po]=Gn[Vn],Zi=l.y(po),Yt=l.y("string"==typeof hi?[hi,["accumulated"],["get",Vn]]:hi);Bi[Vn]=Zi.value,Vi[Vn]=Yt.value}return dn.map=Vn=>{rr.properties=Vn;const hi={};for(const po of oi)hi[po]=Bi[po].evaluate(Bo,rr);return hi},dn.reduce=(Vn,hi)=>{rr.properties=hi;for(const po of oi)Bo.accumulated=Vn[po],Vn[po]=Vi[po].evaluate(Bo,rr)},dn}(ue)).load(qt.features):ue.dynamic?this._dynamicIndex:new kt(dn=qt,ue.geojsonVtOptions)}catch(dn){return ae(dn)}const En={};if(Ue){const dn=qe(we);dn&&(En.resourceTiming={},En.resourceTiming[ue.source]=JSON.parse(JSON.stringify(dn)))}ae(null,En)}var dn})}reloadTile(ue,ae){const we=this.loaded;return we&&we[ue.uid]?ue.partial?ae(null,void 0):super.reloadTile(ue,ae):this.loadTile(ue,ae)}loadGeoJSON(ue,ae){if(ue.request)l.g(ue.request,ae);else{if("string"!=typeof ue.data)return ae(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));try{return ae(null,JSON.parse(ue.data))}catch{return ae(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ue,ae){try{ae(null,this._geoJSONIndex.getClusterExpansionZoom(ue.clusterId))}catch(we){ae(we)}}getClusterChildren(ue,ae){try{ae(null,this._geoJSONIndex.getChildren(ue.clusterId))}catch(we){ae(we)}}getClusterLeaves(ue,ae){try{ae(null,this._geoJSONIndex.getLeaves(ue.clusterId,ue.limit,ue.offset))}catch(we){ae(we)}}}class Jt{constructor(ue,ae){this.tileID=new l.aL(ue.tileID.overscaledZ,ue.tileID.wrap,ue.tileID.canonical.z,ue.tileID.canonical.x,ue.tileID.canonical.y),this.tileZoom=ue.tileZoom,this.uid=ue.uid,this.zoom=ue.zoom,this.canonical=ue.tileID.canonical,this.pixelRatio=ue.pixelRatio,this.tileSize=ue.tileSize,this.source=ue.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ue.projection,this.brightness=ae}parse(ue,ae,we,Ue){this.status="parsing";const it=new l.aL(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),qt={},En=ae.familiesBySource[we.source],dn=new l.dN(it,we.promoteId);return dn.bucketLayerIDs=[],dn.is3DTile=!0,l.e3(ue).then(Gn=>{if(!Gn)return Ue(new Error("Could not parse tile"));const Bi=l.e4(Gn,1/l.b5(we.tileID.canonical)),Vi=Gn.json.extensionsUsed&&Gn.json.extensionsUsed.includes("MAPBOX_mesh_features")||Gn.json.asset.extras&&Gn.json.asset.extras.MAPBOX_mesh_features,Bo=Gn.json.extensionsUsed&&Gn.json.extensionsUsed.includes("EXT_meshopt_compression"),rr=new l.X(this.zoom,{brightness:this.brightness});for(const oi in En)for(const Vn of En[oi]){const hi=Vn[0];dn.bucketLayerIDs.push(Vn.map(Zi=>Zi.id)),hi.recalculate(rr,[]);const po=new l.e5(Bi,it,Vi,Bo,this.brightness,dn);Vi||(po.needsUpload=!0),qt[hi.fqid]=po,po.evaluate(hi)}this.status="done",Ue(null,{buckets:qt,featureIndex:dn})}).catch(Gn=>Ue(new Error(Gn.message)))}}class Bn{constructor(ue,ae,we,Ue,it,qt){this.actor=ue,this.layerIndex=ae,this.brightness=qt,this.loading={},this.loaded={}}loadTile(ue,ae){const we=ue.uid,Ue=this.loading[we]=new Jt(ue,this.brightness);l.e2(ue.request,(it,qt)=>{const En=!this.loading[we];return delete this.loading[we],En||it?(Ue.status="done",En||(this.loaded[we]=Ue),ae(it)):qt&&0!==qt.byteLength?void Ue.parse(qt,this.layerIndex,ue,(dn,Gn)=>{Ue.status="done",this.loaded=this.loaded||{},this.loaded[we]=Ue,dn||!Gn?ae(dn):ae(null,Gn)}):(Ue.status="done",this.loaded[we]=Ue,ae())})}reloadTile(ue,ae){const we=this.loaded,Ue=ue.uid;if(we&&we[Ue]){const it=we[Ue];it.projection=ue.projection,it.brightness=ue.brightness;const qt=(En,dn)=>{it.reloadCallback&&(delete it.reloadCallback,this.loadTile(ue,ae)),ae(En,dn)};"parsing"===it.status?it.reloadCallback=qt:"done"===it.status&&this.loadTile(ue,ae)}}abortTile(ue,ae){const we=ue.uid;this.loading[we]&&delete this.loading[we],ae()}removeTile(ue,ae){const we=this.loaded,Ue=ue.uid;we&&we[Ue]&&delete we[Ue],ae()}}class Lt{constructor(ue){this.self=ue,this.actor=new l.e6(ue,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=l.aJ({name:"mercator"}),this.workerSourceTypes={vector:Ht,geojson:Mt,"batched-model":Bn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ae,we)=>{if(this.workerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.workerSourceTypes[ae]=we},this.self.registerRTLTextPlugin=ae=>{if(l.e7.isParsed())throw new Error("RTL text plugin already registered.");l.e7.applyArabicShaping=ae.applyArabicShaping,l.e7.processBidirectionalText=ae.processBidirectionalText,l.e7.processStyledBidirectionalText=ae.processStyledBidirectionalText}}clearCaches(ue,ae,we){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue],delete this.rasterArrayWorkerSource,we()}checkIfReady(ue,ae,we){we()}setReferrer(ue,ae){this.referrer=ae}spriteLoaded(ue,{scope:ae,isLoaded:we}){if(this.isSpriteLoaded[ue]||(this.isSpriteLoaded[ue]={}),this.isSpriteLoaded[ue][ae]=we,this.workerSources[ue]&&this.workerSources[ue][ae])for(const Ue in this.workerSources[ue][ae]){const it=this.workerSources[ue][ae][Ue];for(const qt in it){const En=it[qt];En instanceof Ht&&(En.isSpriteLoaded=we,En.fire(new l.f("isSpriteLoaded")))}}}setImages(ue,{scope:ae,images:we},Ue){if(this.availableImages[ue]||(this.availableImages[ue]={}),this.availableImages[ue][ae]=we,this.workerSources[ue]&&this.workerSources[ue][ae]){for(const it in this.workerSources[ue][ae]){const qt=this.workerSources[ue][ae][it];for(const En in qt)qt[En].availableImages=we}Ue()}else Ue()}setProjection(ue,ae){this.projections[ue]=l.aJ(ae)}setBrightness(ue,ae,we){this.brightness=ae,we()}setLayers(ue,ae,we){this.getLayerIndex(ue,ae.scope).replace(ae.layers,ae.options),we()}updateLayers(ue,ae,we){this.getLayerIndex(ue,ae.scope).update(ae.layers,ae.removedIds,ae.options),we()}loadTile(ue,ae,we){ae.projection=this.projections[ue]||this.defaultProjection,this.getWorkerSource(ue,ae.type,ae.source,ae.scope).loadTile(ae,we)}loadDEMTile(ue,ae,we){this.getDEMWorkerSource(ue,ae.source,ae.scope).loadTile(ae,we)}decodeRasterArray(ue,ae,we){this.getRasterArrayWorkerSource().decodeRasterArray(ae,we)}reloadTile(ue,ae,we){ae.projection=this.projections[ue]||this.defaultProjection,this.getWorkerSource(ue,ae.type,ae.source,ae.scope).reloadTile(ae,we)}abortTile(ue,ae,we){this.getWorkerSource(ue,ae.type,ae.source,ae.scope).abortTile(ae,we)}removeTile(ue,ae,we){this.getWorkerSource(ue,ae.type,ae.source,ae.scope).removeTile(ae,we)}removeSource(ue,ae,we){if(!(this.workerSources[ue]&&this.workerSources[ue][ae.scope]&&this.workerSources[ue][ae.scope][ae.type]&&this.workerSources[ue][ae.scope][ae.type][ae.source]))return;const Ue=this.workerSources[ue][ae.scope][ae.type][ae.source];delete this.workerSources[ue][ae.scope][ae.type][ae.source],void 0!==Ue.removeSource?Ue.removeSource(ae,we):we()}loadWorkerSource(ue,ae,we){try{this.self.importScripts(ae.url),we()}catch(Ue){we(Ue.toString())}}syncRTLPluginState(ue,ae,we){try{l.e7.setState(ae);const Ue=l.e7.getPluginURL();if(l.e7.isLoaded()&&!l.e7.isParsed()&&null!=Ue){this.self.importScripts(Ue);const it=l.e7.isParsed();we(it?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ue}`),it)}}catch(Ue){we(Ue.toString())}}setDracoUrl(ue,ae){this.dracoUrl=ae}getAvailableImages(ue,ae){this.availableImages[ue]||(this.availableImages[ue]={});let we=this.availableImages[ue][ae];return we||(we=[]),we}getLayerIndex(ue,ae){this.layerIndexes[ue]||(this.layerIndexes[ue]={});let we=this.layerIndexes[ue][ae];return we||(we=this.layerIndexes[ue][ae]=new Xt,we.scope=ae),we}getWorkerSource(ue,ae,we,Ue){return this.workerSources[ue]||(this.workerSources[ue]={}),this.workerSources[ue][Ue]||(this.workerSources[ue][Ue]={}),this.workerSources[ue][Ue][ae]||(this.workerSources[ue][Ue][ae]={}),this.isSpriteLoaded[ue]||(this.isSpriteLoaded[ue]={}),this.workerSources[ue][Ue][ae][we]||(this.workerSources[ue][Ue][ae][we]=new this.workerSourceTypes[ae]({send:(it,qt,En,dn,Gn,Bi)=>{this.actor.send(it,qt,En,ue,Gn,Bi)},scheduler:this.actor.scheduler},this.getLayerIndex(ue,Ue),this.getAvailableImages(ue,Ue),this.isSpriteLoaded[ue][Ue],void 0,this.brightness)),this.workerSources[ue][Ue][ae][we]}getDEMWorkerSource(ue,ae,we){return this.demWorkerSources[ue]||(this.demWorkerSources[ue]={}),this.demWorkerSources[ue][we]||(this.demWorkerSources[ue][we]={}),this.demWorkerSources[ue][we][ae]||(this.demWorkerSources[ue][we][ae]=new vt),this.demWorkerSources[ue][we][ae]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new un),this.rasterArrayWorkerSource}enforceCacheSizeLimit(ue,ae){l.e8(ae)}getWorkerPerformanceMetrics(ue,ae,we){we(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Lt(self)),Lt}),se(0,function(l){function qe(v,r){if(Array.isArray(v)){if(!Array.isArray(r)||v.length!==r.length)return!1;for(let d=0;d<v.length;d++)if(!qe(v[d],r[d]))return!1;return!0}if("object"==typeof v&&null!==v&&null!==r){if("object"!=typeof r||Object.keys(v).length!==Object.keys(r).length)return!1;for(const d in v)if(!qe(v[d],r[d]))return!1;return!0}return v===r}var Y=ft;function ft(v){return r=v,!(typeof window>"u"||typeof document>"u"||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,M,R=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(R);try{M=new Worker(N),b=!0}catch{b=!1}return M&&M.terminate(),URL.revokeObjectURL(N),b}()||!function(){var b=document.createElement("canvas");b.width=b.height=1;var M=b.getContext("2d");if(!M)return!1;var R=M.getImageData(0,0,1,1);return R&&R.width===b.width}()||(void 0===Xt[d=r&&r.failIfMajorPerformanceCaveat]&&(Xt[d]=function(b){var M,N,H,J,R=(N=b,H=document.createElement("canvas"),(J=Object.create(ft.webGLContextAttributes)).failIfMajorPerformanceCaveat=N,H.getContext("webgl2",J));if(!R)return!1;try{M=R.createShader(R.VERTEX_SHADER)}catch{return!1}return!(!M||R.isContextLost())&&(R.shaderSource(M,"void main() {}"),R.compileShader(M),!0===R.getShaderParameter(M,R.COMPILE_STATUS))}(d)),!Xt[d]||document.documentMode));var r,d}var Xt={};function Ut(v,r,d){const b=document.createElement(v);return null!=r&&(b.className=r),d&&d.appendChild(b),b}function It(v,r,d){const b=document.createElementNS("http://www.w3.org/2000/svg",v);for(const M of Object.keys(r))b.setAttributeNS(null,M,String(r[M]));return d&&d.appendChild(b),b}ft.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const C=typeof document<"u"?document.documentElement&&document.documentElement.style:null,At=C&&void 0!==C.userSelect?"userSelect":"WebkitUserSelect";let Ht;function vt(){C&&At&&(Ht=C[At],C[At]="none")}function un(){C&&At&&(C[At]=Ht)}function xn(v){v.preventDefault(),v.stopPropagation(),window.removeEventListener("click",xn,!0)}function on(){window.addEventListener("click",xn,!0),window.setTimeout(()=>{window.removeEventListener("click",xn,!0)},0)}function ht(v,r){const d=v.getBoundingClientRect();return qn(v,d,r)}function Jn(v,r){const d=v.getBoundingClientRect(),b=[];for(let M=0;M<r.length;M++)b.push(qn(v,d,r[M]));return b}function An(v){return void 0!==window.InstallTrigger&&2===v.button&&v.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function qn(v,r,d){const b=v.offsetWidth===r.width?1:v.offsetWidth/r.width;return new l.P((d.clientX-r.left)*b,(d.clientY-r.top)*b)}class xt{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(r,d){this._updatedSourceCaches[r]=d,this.setDirty()}discardSourceCacheUpdate(r){delete this._updatedSourceCaches[r]}updateLayer(r){const d=r.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(r.id),this.setDirty()}removeLayer(r){const d=r.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][r.id]=r,this._updatedLayers[d].delete(r.id),this._updatedPaintProps.delete(r.fqid),this.setDirty()}getRemovedLayer(r){return this._removedLayers[r.scope]?this._removedLayers[r.scope][r.id]:null}discardLayerRemoval(r){this._removedLayers[r.scope]&&delete this._removedLayers[r.scope][r.id]}getLayerUpdatesByScope(){const r={};for(const d in this._updatedLayers)r[d]=r[d]||{},r[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)r[d]=r[d]||{},r[d].removedIds=Object.keys(this._removedLayers[d]);return r}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(r){this._updatedPaintProps.add(r.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(r){this._updatedImages.add(r),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}const Ot={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vn{constructor(r,d,b,M,R,N){this.length=d.length,this.attributes=b,this.itemSize=d.bytesPerElement,this.dynamicDraw=M,this.instanceCount=N,this.context=r;const H=r.gl;this.buffer=H.createBuffer(),r.bindVertexBuffer.set(this.buffer),H.bufferData(H.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?H.DYNAMIC_DRAW:H.STATIC_DRAW),this.dynamicDraw||R||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,d){for(let b=0;b<this.attributes.length;b++){const M=d.attributes[this.attributes[b].name];void 0!==M&&r.enableVertexAttribArray(M)}}setVertexAttribPointers(r,d,b){for(let M=0;M<this.attributes.length;M++){const R=this.attributes[M],N=d.attributes[R.name];void 0!==N&&r.vertexAttribPointer(N,R.components,r[Ot[R.type]],!1,this.itemSize,R.offset+this.itemSize*(b||0))}}setVertexAttribDivisor(r,d,b){for(let M=0;M<this.attributes.length;M++){const R=d.attributes[this.attributes[M].name];void 0!==R&&this.instanceCount&&this.instanceCount>0&&r.vertexAttribDivisor(R,b)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ki extends Pn{getDefault(){return l.C.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ct extends Pn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Me extends Pn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class pn extends Pn{getDefault(){return[!0,!0,!0,!0]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Rt extends Pn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class On extends Pn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Cn extends Pn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const d=this.current;(r.func!==d.func||r.ref!==d.ref||r.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class so extends Pn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Fn extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ke extends Pn{getDefault(){return[0,1]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ae extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=r,this.dirty=!1}}class Ge extends Pn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class tt extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.BLEND):d.disable(d.BLEND),this.current=r,this.dirty=!1}}class zt extends Pn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO,r.ONE,r.ZERO]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Yn extends Pn{getDefault(){return l.C.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class cn extends Pn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(r,r),this.current=r,this.dirty=!1)}}class _o extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=r,this.dirty=!1}}class to extends Pn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class pr extends Pn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}let jo=class extends Pn{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class zr extends Pn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Mi extends Pn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class rs extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class $i extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class br extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Jr extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Li extends Pn{getDefault(){return null}set(r){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class yi extends Pn{getDefault(){return null}set(r){this.gl&&(r!==this.current||this.dirty)&&(this.gl.bindVertexArray(r),this.current=r,this.dirty=!1)}}class ao extends Pn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class si extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Fi extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class mo extends Pn{constructor(r,d){super(r),this.context=r,this.parent=d}getDefault(){return null}}class eo extends mo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class es extends mo{attachment(){return this.gl.DEPTH_ATTACHMENT}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Jo extends mo{attachment(){return this.gl.DEPTH_ATTACHMENT}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class or extends es{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ti{constructor(r,d,b,M,R){this.context=r,this.width=d,this.height=b;const N=this.framebuffer=r.gl.createFramebuffer();M&&(this.colorAttachment=new eo(r,N)),R&&(this.depthAttachmentType=R,this.depthAttachment="renderbuffer"===R?new es(r,N):new Jo(r,N))}destroy(){const r=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&r.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if("renderbuffer"===this.depthAttachmentType){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&r.deleteTexture(d)}r.deleteFramebuffer(this.framebuffer)}}class cs{constructor(r,d){this.gl=r,this.clearColor=new ki(this),this.clearDepth=new Ct(this),this.clearStencil=new Me(this),this.colorMask=new pn(this),this.depthMask=new Rt(this),this.stencilMask=new On(this),this.stencilFunc=new Cn(this),this.stencilOp=new so(this),this.stencilTest=new Fn(this),this.depthRange=new Ke(this),this.depthTest=new Ae(this),this.depthFunc=new Ge(this),this.blend=new tt(this),this.blendFunc=new zt(this),this.blendColor=new Yn(this),this.blendEquation=new cn(this),this.cullFace=new _o(this),this.cullFaceSide=new to(this),this.frontFace=new pr(this),this.program=new jo(this),this.activeTexture=new zr(this),this.viewport=new Mi(this),this.bindFramebuffer=new rs(this),this.bindRenderbuffer=new $i(this),this.bindTexture=new br(this),this.bindVertexBuffer=new Jr(this),this.bindElementBuffer=new Li(this),this.bindVertexArrayOES=new yi(this),this.pixelStoreUnpack=new ao(this),this.pixelStoreUnpackPremultiplyAlpha=new si(this),this.pixelStoreUnpackFlipY=new Fi(this),this.options=d?{...d}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=r.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=r.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=r.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=r.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.maxPointSize=r.getParameter(r.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,d,b){return new l.I(this,r,d,b)}createVertexBuffer(r,d,b,M,R){return new vn(this,r,d,b,M,R)}createRenderbuffer(r,d,b){const M=this.gl,R=M.createRenderbuffer();return this.bindRenderbuffer.set(R),M.renderbufferStorage(M.RENDERBUFFER,r,d,b),this.bindRenderbuffer.set(null),R}createFramebuffer(r,d,b,M){return new ti(this,r,d,b,M)}clear({color:r,depth:d,stencil:b,colorMask:M}){const R=this.gl;let N=0;r&&(N|=R.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set(M||[!0,!0,!0,!0])),void 0!==d&&(N|=R.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==b&&(N|=R.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),R.clear(N)}setCullFace(r){!1===r.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){qe(r.blendFunction,l.a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor),r.blendEquation?this.blendEquation.set(r.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(r.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}class Cs{constructor(r){this._gl=r.gl,this._query=this._gl.createQuery(),this._isFree=!0}begin(){this._gl.beginQuery(this._gl.ANY_SAMPLES_PASSED,this._query),this._isFree=!1}end(){this._gl.endQuery(this._gl.ANY_SAMPLES_PASSED)}isResultAvailable(){return this._gl.getQueryParameter(this._query,this._gl.QUERY_RESULT_AVAILABLE)}consumeResult(){const r=this._gl.getQueryParameter(this._query,this._gl.QUERY_RESULT);return this._isFree=!0,r}isFree(){return this._isFree}destroy(){this._gl.deleteQuery(this._query)}}class Or{constructor(r){this.useOcclusionQueries=!0,this.visualizeOcclusions="none",this.occlusionQueryFrameWindow=5,this.occluderSize=32,this.fadeSpeed=7,this.depthOffset=-1e-4,r.registerParameter(this,["Symbols"],"useOcclusionQueries"),r.registerParameter(this,["Symbols"],"visualizeOcclusions",{options:{none:"none",zPass:"zPass",zTest:"zTest"}}),r.registerParameter(this,["Symbols"],"occlusionQueryFrameWindow",{min:1,max:30,step:1}),r.registerParameter(this,["Symbols"],"occluderSize",{min:1,max:100,step:1}),r.registerParameter(this,["Symbols"],"fadeSpeed",{min:.1,max:50,step:.1}),r.registerParameter(this,["Symbols"],"depthOffset",{min:-.001,max:0,step:1e-4})}}class Kr{constructor(r,d,b,M){const R={width:b[0],height:b[1],data:null},N=r.gl;this.targetColorTexture=new l.T(r,R,N.RGBA,{useMipmap:!1}),this.backgroundColorTexture=new l.T(r,R,N.RGBA,{useMipmap:!1}),this.context=r,this.updateParticleTexture(d,M),this.lastInvalidatedAt=0}updateParticleTexture(r,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const b=this.context.gl,M=d.width*d.height;this.particleTexture0=new l.T(this.context,d,b.RGBA,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new l.T(this.context,d,b.RGBA,{premultiply:!1,useMipmap:!1});const R=new l.S;R.reserve(M);for(let N=0;N<M;N++)R.emplaceBack(N);this.particleIndexBuffer=this.context.createVertexBuffer(R,l.p.members,!0),this.particleSegment=l.b.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(r){return!(this.lastInvalidatedAt<r&&(this.lastInvalidatedAt=l.e.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}class Qr extends l.E{constructor(r){super(),this.requestManager=r,this.models={"":{}},this.numModelsLoading={}}loadModel(r,d){return l.l(this.requestManager.transformRequest(d,l.R.Model).url).then(b=>{if(!b)return;const M=l.c(b),R=new l.M(r,void 0,void 0,M);return R.computeBoundsAndApplyParent(),R}).catch(b=>{if(b&&404===b.status)return null;this.fire(new l.d(new Error(`Could not load model ${r} from ${d}: ${b.message}`)))})}load(r,d){this.models[d]||(this.models[d]={});const b=Object.keys(r);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+b.length;const M=[];for(const R of b)M.push(this.loadModel(R,r[R]));Promise.allSettled(M).then(R=>{for(let N=0;N<R.length;N++){const{status:H,value:J}=R[N];"fulfilled"===H&&J&&(this.models[d][b[N]]={model:J,numReferences:1})}this.numModelsLoading[d]-=b.length,this.fire(new l.f("data",{dataType:"style"}))}).catch(R=>{this.fire(new l.d(new Error(`Could not load models: ${R.message}`)))})}isLoaded(){for(const r in this.numModelsLoading)if(this.numModelsLoading[r]>0)return!1;return!0}hasModel(r,d){return!!this.getModel(r,d)}getModel(r,d){return this.models[d]||(this.models[d]={}),this.models[d][r]?this.models[d][r].model:void 0}addModel(r,d,b){this.models[b]||(this.models[b]={}),this.hasModel(r,b)&&this.models[b][r].numReferences++,this.load({[r]:this.requestManager.normalizeModelURL(d)},b)}addModels(r,d){this.models[d]||(this.models[d]={});const b={};for(const M in r)this.models[d][M]={},b[M]=this.requestManager.normalizeModelURL(r[M]);this.load(b,d)}addModelsFromBucket(r,d){this.models[d]||(this.models[d]={});const b={};for(const M of r)this.hasModel(M,d)?this.models[d][M].numReferences++:b[M]=this.requestManager.normalizeModelURL(M);this.load(b,d)}removeModel(r,d){if(this.models[d]&&this.models[d][r]&&(this.models[d][r].numReferences--,0===this.models[d][r].numReferences)){const b=this.models[d][r].model;delete this.models[d][r],b.destroy()}}listModels(r){return this.models[r]||(this.models[r]={}),Object.keys(this.models[r])}upload(r,d){this.models[d]||(this.models[d]={});for(const b in this.models[d])this.models[d][b].model&&this.models[d][b].model.upload(r.context)}}function Ho(v){const{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class Nr extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(r){this.images[r]={},this.loaded[r]=!1,this.updatedImages[r]={},this.patterns[r]={},this.callbackDispatchedThisFrame[r]={},this.atlasImage[r]=new l.i({width:1,height:1})}isLoaded(){for(const r in this.loaded)if(!this.loaded[r])return!1;return!0}setLoaded(r,d){if(this.loaded[d]!==r&&(this.loaded[d]=r,r)){for(const{ids:b,callback:M}of this.requestors)this._notify(b,d,M);this.requestors=[]}}hasImage(r,d){return!!this.getImage(r,d)}getImage(r,d){return this.images[d][r]}addImage(r,d,b){this._validate(r,b)&&(this.images[d][r]=b)}_validate(r,d){let b=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new l.d(new Error(`Image "${r}" has invalid "stretchX" value`))),b=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new l.d(new Error(`Image "${r}" has invalid "stretchY" value`))),b=!1),this._validateContent(d.content,d)||(this.fire(new l.d(new Error(`Image "${r}" has invalid "content" value`))),b=!1),b}_validateStretch(r,d){if(!r)return!0;let b=0;for(const M of r){if(M[0]<b||M[1]<M[0]||d<M[1])return!1;b=M[1]}return!0}_validateContent(r,d){return!(r&&(4!==r.length||r[0]<0||d.data.width<r[0]||r[1]<0||d.data.height<r[1]||r[2]<0||d.data.width<r[2]||r[3]<0||d.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))}updateImage(r,d,b){b.version=this.images[d][r].version+1,this.images[d][r]=b,this.updatedImages[d][r]=!0}removeImage(r,d){const b=this.images[d][r];delete this.images[d][r],delete this.patterns[d][r],b.userImage&&b.userImage.onRemove&&b.userImage.onRemove()}listImages(r){return Object.keys(this.images[r])}getImages(r,d,b){let M=!0;const R=!!this.loaded[d];if(!R)for(const N of r)this.images[d][N]||(M=!1);R||M?this._notify(r,d,b):this.requestors.push({ids:r,scope:d,callback:b})}getUpdatedImages(r){return this.updatedImages[r]}_notify(r,d,b){const M={};for(const R of r){this.images[d][R]||this.fire(new l.f("styleimagemissing",{id:R}));const N=this.images[d][R];N?M[R]={data:N.data.clone(),pixelRatio:N.pixelRatio,sdf:N.sdf,version:N.version,stretchX:N.stretchX,stretchY:N.stretchY,content:N.content,hasRenderCallback:!(!N.userImage||!N.userImage.render)}:l.w(`Image "${R}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}b(null,M)}getPixelSize(r){const{width:d,height:b}=this.atlasImage[r];return{width:d,height:b}}getPattern(r,d,b){const M=this.patterns[d][r],R=this.getImage(r,d);if(!R)return null;if(M&&M.position.version===R.version)return M.position;if(M)M.position.version=R.version;else{const N={w:R.data.width+2,h:R.data.height+2,x:0,y:0},H=new l.k(N,R);this.patterns[d][r]={bin:N,position:H}}return this._updatePatternAtlas(d,b),this.patterns[d][r].position}bind(r,d){const b=r.gl;let M=this.atlasTexture[d];M?this.dirty&&(M.update(this.atlasImage[d]),this.dirty=!1):(M=new l.T(r,this.atlasImage[d],b.RGBA),this.atlasTexture[d]=M),M.bind(b.LINEAR,b.CLAMP_TO_EDGE)}_updatePatternAtlas(r,d){const b=[];for(const H in this.patterns[r])b.push(this.patterns[r][H].bin);const{w:M,h:R}=l.j(b),N=this.atlasImage[r];N.resize({width:M||1,height:R||1});for(const H in this.patterns[r]){const{bin:J}=this.patterns[r][H],re=J.x+1,he=J.y+1,ye=this.images[r][H].data,Pe=ye.width,Fe=ye.height;l.i.copy(ye,N,{x:0,y:0},{x:re,y:he},{width:Pe,height:Fe},d),l.i.copy(ye,N,{x:0,y:Fe-1},{x:re,y:he-1},{width:Pe,height:1},d),l.i.copy(ye,N,{x:0,y:0},{x:re,y:he+Fe},{width:Pe,height:1},d),l.i.copy(ye,N,{x:Pe-1,y:0},{x:re-1,y:he},{width:1,height:Fe},d),l.i.copy(ye,N,{x:0,y:0},{x:re+Pe,y:he},{width:1,height:Fe},d)}this.dirty=!0}beginFrame(){for(const r in this.images)this.callbackDispatchedThisFrame[r]={}}dispatchRenderCallbacks(r,d){for(const b of r){if(this.callbackDispatchedThisFrame[d][b])continue;this.callbackDispatchedThisFrame[d][b]=!0;const M=this.images[d][b];Ho(M)&&this.updateImage(b,d,M)}}}function ir(v){const r=v.key,d=v.value,b=v.valueSpec||{},M=v.objectElementValidators||{},R=v.style,N=v.styleSpec;let H=[];const J=l.n(d);if("object"!==J)return[new l.V(r,d,`object expected, ${J} found`)];for(const re in d){const he=re.split(".")[0];let ye;M[he]?ye=M[he]:b[he]?ye=ue:M["*"]?ye=M["*"]:b["*"]&&(ye=ue),ye?H=H.concat(ye({key:(r&&`${r}.`)+re,value:d[re],valueSpec:b[he]||b["*"],style:R,styleSpec:N,object:d,objectKey:re},d)):H.push(new l.m(r,d[re],`unknown property "${re}"`))}for(const re in b)M[re]||b[re].required&&void 0===b[re].default&&void 0===d[re]&&H.push(new l.V(r,d,`missing required property "${re}"`));return H}function _r(v){const r=v.value,d=v.valueSpec,b=v.style,M=v.styleSpec,R=v.key,N=v.arrayElementValidator||ue;if("array"!==l.n(r))return[new l.V(R,r,`array expected, ${l.n(r)} found`)];if(d.length&&r.length!==d.length)return[new l.V(R,r,`array length ${d.length} expected, length ${r.length} found`)];if(d["min-length"]&&r.length<d["min-length"])return[new l.V(R,r,`array length at least ${d["min-length"]} expected, length ${r.length} found`)];let H={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};M.$version<7&&(H.function=d.function),"object"===l.n(d.value)&&(H=d.value);let J=[];for(let re=0;re<r.length;re++)J=J.concat(N({array:r,arrayIndex:re,value:r[re],valueSpec:H,style:b,styleSpec:M,key:`${R}[${re}]`},!0));return J}function Dr(v){const r=v.key,d=v.value,b=v.valueSpec;let M=l.n(d);if("number"===M&&d!=d&&(M="NaN"),"number"!==M)return[new l.V(r,d,`number expected, ${M} found`)];if("minimum"in b){let R=b.minimum;if("array"===l.n(b.minimum)&&(R=b.minimum[v.arrayIndex]),d<R)return[new l.V(r,d,`${d} is less than the minimum value ${R}`)]}if("maximum"in b){let R=b.maximum;if("array"===l.n(b.maximum)&&(R=b.maximum[v.arrayIndex]),d>R)return[new l.V(r,d,`${d} is greater than the maximum value ${R}`)]}return[]}function Gs(v){const r=v.valueSpec,d=l.u(v.value.type);let b,M,R,N={};const H="categorical"!==d&&void 0===v.value.property,J=!H,re="array"===l.n(v.value.stops)&&"array"===l.n(v.value.stops[0])&&"object"===l.n(v.value.stops[0][0]),he=ir({key:v.key,value:v.value,valueSpec:v.styleSpec.function,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{stops:function(Fe){if("identity"===d)return[new l.V(Fe.key,Fe.value,'identity function may not have a "stops" property')];let Qe=[];const Je=Fe.value;return Qe=Qe.concat(_r({key:Fe.key,value:Je,valueSpec:Fe.valueSpec,style:Fe.style,styleSpec:Fe.styleSpec,arrayElementValidator:ye})),"array"===l.n(Je)&&0===Je.length&&Qe.push(new l.V(Fe.key,Je,"array must have at least one stop")),Qe},default:function(Fe){return ue({key:Fe.key,value:Fe.value,valueSpec:r,style:Fe.style,styleSpec:Fe.styleSpec})}}});return"identity"===d&&H&&he.push(new l.V(v.key,v.value,'missing required property "property"')),"identity"===d||v.value.stops||he.push(new l.V(v.key,v.value,'missing required property "stops"')),"exponential"===d&&v.valueSpec.expression&&!l.s(v.valueSpec)&&he.push(new l.V(v.key,v.value,"exponential functions not supported")),v.styleSpec.$version>=8&&(J&&!l.q(v.valueSpec)?he.push(new l.V(v.key,v.value,"property functions not supported")):H&&!l.r(v.valueSpec)&&he.push(new l.V(v.key,v.value,"zoom functions not supported"))),"categorical"!==d&&!re||void 0!==v.value.property||he.push(new l.V(v.key,v.value,'"property" property is required')),he;function ye(Fe){let Qe=[];const Je=Fe.value,ot=Fe.key;if("array"!==l.n(Je))return[new l.V(ot,Je,`array expected, ${l.n(Je)} found`)];if(2!==Je.length)return[new l.V(ot,Je,`array length 2 expected, length ${Je.length} found`)];if(re){if("object"!==l.n(Je[0]))return[new l.V(ot,Je,`object expected, ${l.n(Je[0])} found`)];if(void 0===Je[0].zoom)return[new l.V(ot,Je,"object stop key must have zoom")];if(void 0===Je[0].value)return[new l.V(ot,Je,"object stop key must have value")];const st=l.u(Je[0].zoom);if("number"!=typeof st)return[new l.V(ot,Je[0].zoom,"stop zoom values must be numbers")];if(R&&R>st)return[new l.V(ot,Je[0].zoom,"stop zoom values must appear in ascending order")];st!==R&&(R=st,M=void 0,N={}),Qe=Qe.concat(ir({key:`${ot}[0]`,value:Je[0],valueSpec:{zoom:{}},style:Fe.style,styleSpec:Fe.styleSpec,objectElementValidators:{zoom:Dr,value:Pe}}))}else Qe=Qe.concat(Pe({key:`${ot}[0]`,value:Je[0],valueSpec:{},style:Fe.style,styleSpec:Fe.styleSpec},Je));return l.t(l.v(Je[1]))?Qe.concat([new l.V(`${ot}[1]`,Je[1],"expressions are not allowed in function stops.")]):Qe.concat(ue({key:`${ot}[1]`,value:Je[1],valueSpec:r,style:Fe.style,styleSpec:Fe.styleSpec}))}function Pe(Fe,Qe){const Je=l.n(Fe.value),ot=l.u(Fe.value),st=null!==Fe.value?Fe.value:Qe;if(b){if(Je!==b)return[new l.V(Fe.key,st,`${Je} stop domain type must match previous stop domain type ${b}`)]}else b=Je;if("number"!==Je&&"string"!==Je&&"boolean"!==Je&&"number"!=typeof ot&&"string"!=typeof ot&&"boolean"!=typeof ot)return[new l.V(Fe.key,st,"stop domain value must be a number, string, or boolean")];if("number"!==Je&&"categorical"!==d){let Pt=`number expected, ${Je} found`;return l.q(r)&&void 0===d&&(Pt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new l.V(Fe.key,st,Pt)]}return"categorical"!==d||"number"!==Je||"number"==typeof ot&&isFinite(ot)&&Math.floor(ot)===ot?"categorical"!==d&&"number"===Je&&"number"==typeof ot&&"number"==typeof M&&void 0!==M&&ot<M?[new l.V(Fe.key,st,"stop domain values must appear in ascending order")]:(M=ot,"categorical"===d&&ot in N?[new l.V(Fe.key,st,"stop domain values must be unique")]:(N[ot]=!0,[])):[new l.V(Fe.key,st,`integer expected, found ${String(ot)}`)]}}function ni(v){const r=("property"===v.expressionContext?l.x:l.y)(l.v(v.value),v.valueSpec);if("error"===r.result)return r.value.map(b=>new l.V(`${v.key}${b.key}`,v.value,b.message));const d=r.value.expression||r.value._styleExpression.expression;if("property"===v.expressionContext&&"text-font"===v.propertyKey&&!d.outputDefined())return[new l.V(v.key,v.value,`Invalid data expression for "${v.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===v.expressionContext&&"layout"===v.propertyType&&!l.z(d))return[new l.V(v.key,v.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===v.expressionContext)return as(d,v);if(v.expressionContext&&0===v.expressionContext.indexOf("cluster")){if(!l.A(d,["zoom","feature-state"]))return[new l.V(v.key,v.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===v.expressionContext&&!l.B(d))return[new l.V(v.key,v.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function as(v,r){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(const M of r.valueSpec.expression.parameters)d.delete(M);if(0===d.size)return[];const b=[];return v instanceof l.D&&d.has(v.name)?[new l.V(r.key,r.value,`["${v.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(v.eachChild(M=>{b.push(...as(M,r))}),b)}function Lr(v){const r=v.key,d=v.value,b=v.valueSpec,M=[];return Array.isArray(b.values)?-1===b.values.indexOf(l.u(d))&&M.push(new l.V(r,d,`expected one of [${b.values.join(", ")}], ${JSON.stringify(d)} found`)):-1===Object.keys(b.values).indexOf(l.u(d))&&M.push(new l.V(r,d,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(d)} found`)),M}function Xs(v){return l.G(l.v(v.value))?ni(l.o({},v,{expressionContext:"filter",valueSpec:v.styleSpec[`filter_${v.layerType||"fill"}`]})):vs(v)}function vs(v){const r=v.value,d=v.key;if("array"!==l.n(r))return[new l.V(d,r,`array expected, ${l.n(r)} found`)];const b=v.styleSpec;let M,R=[];if(r.length<1)return[new l.V(d,r,"filter array must have at least 1 element")];switch(R=R.concat(Lr({key:`${d}[0]`,value:r[0],valueSpec:b.filter_operator,style:v.style,styleSpec:v.styleSpec})),l.u(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===l.u(r[1])&&R.push(new l.V(d,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":3!==r.length&&R.push(new l.V(d,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(M=l.n(r[1]),"string"!==M&&R.push(new l.V(`${d}[1]`,r[1],`string expected, ${M} found`)));for(let N=2;N<r.length;N++)M=l.n(r[N]),"$type"===l.u(r[1])?R=R.concat(Lr({key:`${d}[${N}]`,value:r[N],valueSpec:b.geometry_type,style:v.style,styleSpec:v.styleSpec})):"string"!==M&&"number"!==M&&"boolean"!==M&&R.push(new l.V(`${d}[${N}]`,r[N],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let N=1;N<r.length;N++)R=R.concat(vs({key:`${d}[${N}]`,value:r[N],style:v.style,styleSpec:v.styleSpec}));break;case"has":case"!has":M=l.n(r[1]),2!==r.length?R.push(new l.V(d,r,`filter array for "${r[0]}" operator must have 2 elements`)):"string"!==M&&R.push(new l.V(`${d}[1]`,r[1],`string expected, ${M} found`))}return R}function Hr(v,r){const d=v.key,b=v.style,M=v.layer,R=v.styleSpec,N=v.value,H=v.objectKey,J=R[`${r}_${v.layerType}`];if(!J)return[];const re=H.match(/^(.*)-transition$/);if("paint"===r&&re&&J[re[1]]&&J[re[1]].transition)return ue({key:d,value:N,valueSpec:R.transition,style:b,styleSpec:R});const he=v.valueSpec||J[H];if(!he)return[new l.m(d,N,`unknown property "${H}"`)];let ye;if("string"===l.n(N)&&l.q(he)&&!he.tokens&&(ye=/^{([^}]+)}$/.exec(N))){const Fe=`\`{ "type": "identity", "property": ${ye?JSON.stringify(ye[1]):'"_"'} }\``;return[new l.V(d,N,`"${H}" does not support interpolation syntax\nUse an identity property function instead: ${Fe}.`)]}const Pe=[];if("symbol"===v.layerType)"text-field"!==H||!b||b.glyphs||b.imports||Pe.push(new l.V(d,N,'use of "text-field" requires a style "glyphs" property')),"text-font"===H&&l.H(l.v(N))&&"identity"===l.u(N.type)&&Pe.push(new l.V(d,N,'"text-font" does not support identity functions'));else if("model"===v.layerType&&"paint"===r&&M&&M.layout&&M.layout.hasOwnProperty("model-id")&&l.q(he)&&(l.J(he)||l.r(he))){const Fe=l.x(l.v(N),he),Qe=Fe.value.expression||Fe.value._styleExpression.expression;Qe&&!l.A(Qe,["measure-light"])&&("model-emissive-strength"===H&&l.B(Qe)&&l.z(Qe)||Pe.push(new l.V(d,N,`${H} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return Pe.concat(ue({key:v.key,value:N,valueSpec:he,style:b,styleSpec:R,expressionContext:"property",propertyType:r,propertyKey:H}))}function Wi(v){return Hr(v,"paint")}function ei(v){return Hr(v,"layout")}function Pi(v){let r=[];const d=v.value,b=v.key,M=v.style,R=v.styleSpec;d.type||d.ref||r.push(new l.V(b,d,'either "type" or "ref" is required'));let N=l.u(d.type);const H=l.u(d.ref);if(d.id){const J=l.u(d.id);for(let re=0;re<v.arrayIndex;re++){const he=M.layers[re];l.u(he.id)===J&&r.push(new l.V(b,d.id,`duplicate layer id "${d.id}", previously used at line ${he.id.__line__}`))}}if("ref"in d){let J;["type","source","source-layer","filter","layout"].forEach(re=>{re in d&&r.push(new l.V(b,d[re],`"${re}" is prohibited for ref layers`))}),M.layers.forEach(re=>{l.u(re.id)===H&&(J=re)}),J?J.ref?r.push(new l.V(b,d.ref,"ref cannot reference another ref layer")):N=l.u(J.type):"string"==typeof H&&r.push(new l.V(b,d.ref,`ref layer "${H}" not found`))}else if("background"!==N&&"sky"!==N&&"slot"!==N)if(d.source){const J=M.sources&&M.sources[d.source],re=J&&l.u(J.type);J?"vector"===re&&"raster"===N?r.push(new l.V(b,d.source,`layer "${d.id}" requires a raster source`)):"raster"===re&&"raster"!==N?r.push(new l.V(b,d.source,`layer "${d.id}" requires a vector source`)):"vector"!==re||d["source-layer"]?"raster-dem"===re&&"hillshade"!==N?r.push(new l.V(b,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):"raster-array"!==re||["raster","raster-particle"].includes(N)?"line"!==N||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||"geojson"===re&&J.lineMetrics?"raster-particle"===N&&"raster-array"!==re&&r.push(new l.V(b,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):r.push(new l.V(b,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new l.V(b,d.source,"raster-array source can only be used with layer type 'raster'.")):r.push(new l.V(b,d,`layer "${d.id}" must specify a "source-layer"`)):r.push(new l.V(b,d.source,`source "${d.source}" not found`))}else r.push(new l.V(b,d,'missing required property "source"'));return r=r.concat(ir({key:b,value:d,valueSpec:R.layer,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ue({key:`${b}.type`,value:d.type,valueSpec:R.layer.type,style:v.style,styleSpec:v.styleSpec,object:d,objectKey:"type"}),filter:J=>Xs(l.o({layerType:N},J)),layout:J=>ir({layer:d,key:J.key,value:J.value,valueSpec:{},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{"*":re=>ei(l.o({layerType:N},re))}}),paint:J=>ir({layer:d,key:J.key,value:J.value,valueSpec:{},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{"*":re=>Wi(l.o({layerType:N,layer:d},re))}})}})),r}function Xn(v){const r=v.value,d=v.key,b=l.n(r);return"string"!==b?[new l.V(d,r,`string expected, ${b} found`)]:[]}const kt={promoteId:function({key:v,value:r}){if("string"===l.n(r))return Xn({key:v,value:r});{const d=[];for(const b in r)d.push(...Xn({key:`${v}.${b}`,value:r[b]}));return d}}};function mt(v){const r=v.value,d=v.key,b=v.styleSpec,M=v.style;if(!r.type)return[new l.V(d,r,'"type" is required')];const R=l.u(r.type);let N=[];switch(["vector","raster","raster-dem","raster-array"].includes(R)&&(r.url||r.tiles||N.push(new l.m(d,r,'Either "url" or "tiles" is required.'))),R){case"vector":case"raster":case"raster-dem":case"raster-array":return N=N.concat(ir({key:d,value:r,valueSpec:b[`source_${R.replace("-","_")}`],style:v.style,styleSpec:b,objectElementValidators:kt})),N;case"geojson":if(N=ir({key:d,value:r,valueSpec:b.source_geojson,style:M,styleSpec:b,objectElementValidators:kt}),r.cluster)for(const H in r.clusterProperties){const[J,re]=r.clusterProperties[H],he="string"==typeof J?[J,["accumulated"],["get",H]]:J;N.push(...ni({key:`${d}.${H}.map`,value:re,expressionContext:"cluster-map"})),N.push(...ni({key:`${d}.${H}.reduce`,value:he,expressionContext:"cluster-reduce"}))}return N;case"video":return ir({key:d,value:r,valueSpec:b.source_video,style:M,styleSpec:b});case"image":return ir({key:d,value:r,valueSpec:b.source_image,style:M,styleSpec:b});case"canvas":return[new l.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Lr({key:`${d}.type`,value:r.type,valueSpec:{values:Ye(b)},style:M,styleSpec:b})}}function Ye(v){return v.source.reduce((r,d)=>{const b=v[d];return"enum"===b.type.type&&(r=r.concat(Object.keys(b.type.values))),r},[])}function Mt(v){const r=v.value,d=v.styleSpec,b=d.light,M=v.style;let R=[];const N=l.n(r);if(void 0===r)return R;if("object"!==N)return R=R.concat([new l.V("light",r,`object expected, ${N} found`)]),R;for(const H in r){const J=H.match(/^(.*)-transition$/);R=R.concat(J&&b[J[1]]&&b[J[1]].transition?ue({key:H,value:r[H],valueSpec:d.transition,style:M,styleSpec:d}):b[H]?ue({key:H,value:r[H],valueSpec:b[H],style:M,styleSpec:d}):[new l.V(H,r[H],`unknown property "${H}"`)])}return R}function Jt(v){const r=v.value;let d=[];if(!r)return d;const b=l.n(r);if("object"!==b)return d=d.concat([new l.V("light-3d",r,`object expected, ${b} found`)]),d;const M=v.styleSpec,R=M["light-3d"],N=v.key,H=v.style,J=v.style.lights;for(const ye of["type","id"])if(!(ye in r))return d=d.concat([new l.V("light-3d",r,`missing property ${ye} on light`)]),d;if(r.type&&J)for(let ye=0;ye<v.arrayIndex;ye++){const Pe=l.u(r.type),Fe=J[ye];l.u(Fe.type)===Pe&&d.push(new l.V(N,r.id,`duplicate light type "${r.type}", previously defined at line ${Fe.id.__line__}`))}const re=`properties_light_${r.type}`;if(!(re in M))return d=d.concat([new l.V("light-3d",r,`Invalid light type ${r.type}`)]),d;const he=M[re];for(const ye in r)if("properties"===ye){const Pe=r[ye],Fe=l.n(Pe);if("object"!==Fe)return d=d.concat([new l.V("properties",Pe,`object expected, ${Fe} found`)]),d;for(const Qe in Pe)d=d.concat(he[Qe]?ue({key:Qe,value:Pe[Qe],valueSpec:he[Qe],style:H,styleSpec:M}):[new l.m(v.key,Pe[Qe],`unknown property "${Qe}"`)])}else{const Pe=ye.match(/^(.*)-transition$/);d=d.concat(Pe&&R[Pe[1]]&&R[Pe[1]].transition?ue({key:ye,value:r[ye],valueSpec:M.transition,style:H,styleSpec:M}):R[ye]?ue({key:ye,value:r[ye],valueSpec:R[ye],style:H,styleSpec:M}):[new l.m(ye,r[ye],`unknown property "${ye}"`)])}return d}function Bn(v){const r=v.value,d=v.key,b=v.style,M=v.styleSpec,R=M.terrain;let N=[];const H=l.n(r);if(void 0===r||"null"===H)return N;if("object"!==H)return N=N.concat([new l.V("terrain",r,`object expected, ${H} found`)]),N;for(const J in r){const re=J.match(/^(.*)-transition$/);N=N.concat(re&&R[re[1]]&&R[re[1]].transition?ue({key:J,value:r[J],valueSpec:M.transition,style:b,styleSpec:M}):R[J]?ue({key:J,value:r[J],valueSpec:R[J],style:b,styleSpec:M}):[new l.m(J,r[J],`unknown property "${J}"`)])}if(r.source){const J=b.sources&&b.sources[r.source],re=J&&l.u(J.type);J?"raster-dem"!==re&&N.push(new l.V(d,r.source,`terrain cannot be used with a source of type ${String(re)}, it only be used with a "raster-dem" source type`)):N.push(new l.V(d,r.source,`source "${r.source}" not found`))}else N.push(new l.V(d,r,'terrain is missing required property "source"'));return N}function Lt(v){const r=v.value,d=v.style,b=v.styleSpec,M=b.fog;let R=[];const N=l.n(r);if(void 0===r)return R;if("object"!==N)return R=R.concat([new l.V("fog",r,`object expected, ${N} found`)]),R;for(const H in r){const J=H.match(/^(.*)-transition$/);R=R.concat(J&&M[J[1]]&&M[J[1]].transition?ue({key:H,value:r[H],valueSpec:b.transition,style:d,styleSpec:b}):M[H]?ue({key:H,value:r[H],valueSpec:M[H],style:d,styleSpec:b}):[new l.m(H,r[H],`unknown property "${H}"`)])}return R}const Ie={"*":()=>[],array:_r,boolean:function(v){const r=v.value,d=v.key,b=l.n(r);return"boolean"!==b?[new l.V(d,r,`boolean expected, ${b} found`)]:[]},number:Dr,color:function(v){const r=v.key,d=v.value,b=l.n(d);return"string"!==b?[new l.V(r,d,`color expected, ${b} found`)]:null===l.F(d)?[new l.V(r,d,`color expected, "${d}" found`)]:[]},enum:Lr,filter:Xs,function:Gs,layer:Pi,object:ir,source:mt,model:l.K,light:Mt,"light-3d":Jt,terrain:Bn,fog:Lt,string:Xn,formatted:function(v){return 0===Xn(v).length?[]:ni(v)},resolvedImage:function(v){return 0===Xn(v).length?[]:ni(v)},projection:function(v){const r=v.value,d=v.styleSpec,b=d.projection,M=v.style;let R=[];const N=l.n(r);if("object"===N)for(const H in r)R=R.concat(ue({key:H,value:r[H],valueSpec:b[H],style:M,styleSpec:d}));else"string"!==N&&(R=R.concat([new l.V("projection",r,`object or string expected, ${N} found`)]));return R},import:function(v){const{value:r,styleSpec:d}=v,{data:b,...M}=r;Object.defineProperty(M,"__line__",{value:r.__line__,enumerable:!1});let R=ir(l.o({},v,{value:M,valueSpec:d.import}));return""===l.u(M.id)&&R.push(new l.V(`${v.key}.id`,M,"import id can't be an empty string")),b&&(R=R.concat(we(b,d,{key:`${v.key}.data`}))),R}};function ue(v,r=!1){const d=v.value,b=v.valueSpec,M=v.styleSpec;if(b.expression&&l.H(l.u(d)))return Gs(v);if(b.expression&&l.t(l.v(d)))return ni(v);if(b.type&&Ie[b.type]){const R=Ie[b.type](v);return!0===r&&R.length>0&&"array"===l.n(v.value)?ni(v):R}return ir(l.o({},v,{valueSpec:b.type?M[b.type]:b}))}function ae(v){const r=v.value,d=v.key,b=Xn(v);return b.length||(-1===r.indexOf("{fontstack}")&&b.push(new l.V(d,r,'"glyphs" url must include a "{fontstack}" token')),-1===r.indexOf("{range}")&&b.push(new l.V(d,r,'"glyphs" url must include a "{range}" token'))),b}function we(v,r=l.L,d={}){return ue({key:d.key||"",value:v,valueSpec:r.$root,styleSpec:r,style:v,objectElementValidators:{glyphs:ae,"*":()=>[]}})}function Ue(v,r=l.L){return Vn(we(v,r))}const it=v=>Vn(mt(v)),qt=v=>Vn(Mt(v)),En=v=>Vn(Jt(v)),dn=v=>Vn(Bn(v)),Gn=v=>Vn(Lt(v)),Bi=v=>Vn(Pi(v)),Vi=v=>Vn(Xs(v)),Bo=v=>Vn(Wi(v)),rr=v=>Vn(ei(v)),oi=v=>Vn(l.K(v));function Vn(v){return v.slice().sort((r,d)=>r.line&&d.line?r.line-d.line:0)}function hi(v,r){let d=!1;if(r&&r.length)for(const b of r)b instanceof l.m?l.w(b.message):(v.fire(new l.d(new Error(b.message))),d=!0);return d}const po=new l.N({anchor:new l.O(l.L.light.anchor),position:new l.Q(l.L.light.position),color:new l.O(l.L.light.color),intensity:new l.O(l.L.light.intensity)});class Zi extends l.E{constructor(r,d="flat"){super(),this._transitionable=new l.U(po),this.setLight(r,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,d,b={}){this._validate(qt,r,b)||(this._transitionable.setTransitionOrValue(r),this.id=d)}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,d,b){return(!b||!1!==b.validate)&&hi(this,r.call(Ue,l.W({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.L})))}}const Yt=new l.N({source:new l.O(l.L.terrain.source),exaggeration:new l.O(l.L.terrain.exaggeration)});let ri=class extends l.E{constructor(v,r,d,b){super(),this.scope=d,this._transitionable=new l.U(Yt,d,b),this._transitionable.setTransitionOrValue(v,b),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=r}get(){return this._transitionable.serialize()}set(v,r){this._transitionable.setTransitionOrValue(v,r)}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}getExaggeration(v){return this._transitioning.possiblyEvaluate(new l.X(v)).get("exaggeration")}isZoomDependent(){const v=this._transitionable._values.exaggeration;return null!=v&&null!=v.value&&null!=v.value.expression&&v.value.expression instanceof l.Z}};const Ri=45,Uo=65,mr=.05;function ss(v,r,d,b){const M=l.$(Ri,Uo,d),[R,N]=Vr(v,b);let H=1-Math.min(1,Math.exp((r-R)/(N-R)*-6));return H*=H*H,H=Math.min(1,1.00747*H),H*M*v.alpha}function Vr(v,r){const d=.5/Math.tan(.5*r);return[v.range[0]+d,v.range[1]+d]}function Na(v,r,d,b,M){const R=l._.transformMat4([],[r,d,b],M.mercatorFogMatrix);return ss(v,l._.length(R),M.pitch,M._fov)}function Rl(v,r,d,b,M,R,N){const H=[[d,b,0],[M,b,0],[M,R,0],[d,R,0]];let J=Number.MAX_VALUE,re=-Number.MAX_VALUE;for(const he of H){const ye=l._.transformMat4([],he,r),Pe=l._.length(ye);J=Math.min(J,Pe),re=Math.max(re,Pe)}return[ss(v,J,N.pitch,N._fov),ss(v,re,N.pitch,N._fov)]}const Du=new l.N({range:new l.O(l.L.fog.range),color:new l.O(l.L.fog.color),"high-color":new l.O(l.L.fog["high-color"]),"space-color":new l.O(l.L.fog["space-color"]),"horizon-blend":new l.O(l.L.fog["horizon-blend"]),"star-intensity":new l.O(l.L.fog["star-intensity"]),"vertical-range":new l.O(l.L.fog["vertical-range"])});class Ra extends l.E{constructor(r,d,b,M){super(),this._transitionable=new l.U(Du,b,new Map(M)),this.set(r,M),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new l.a0(Du),this.scope=b}get state(){const r=this._transform,d="globe"===r.projection.name,b=l.a1(r.zoom),M=this.properties.get("range"),R=[.5,3];return{range:d?[l.a2(R[0],M[0],b),l.a2(R[1],M[1],b)]:M,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(r,d,b={}){if(this._validate(Gn,r,b))return;const M=l.W({},r);for(const R of Object.keys(l.L.fog))void 0===M[R]&&(M[R]=l.L.fog[R].default);this._options=M,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(r){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:l.$(Ri,Uo,r))*d.a}getOpacityAtLatLng(r,d){return this._transform.projection.supportsFog?function(b,M,R){const N=l.Y.fromLngLat(M),H=R.elevation?R.elevation.getAtPointOrZero(N):0;return Na(b,N.x,N.y,H,R)}(this.state,r,d):0}getOpacityForTile(r){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(r.toUnwrapped());return Rl(this.state,d,0,0,l.a3,l.a3,this._transform)}getOpacityForBounds(r,d,b,M,R){return this._transform.projection.supportsFog?Rl(this.state,r,d,b,M,R,this._transform):[1,1]}getFovAdjustedRange(r){return this._transform.projection.supportsFog?Vr(this.state,r):[0,1]}isVisibleOnFrustum(r){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const b of d){const M=r.points[b];let R;if(M[2]>=0)R=M;else{const N=r.points[b-4];R=l.a4(N,M,N[2]/(N[2]-M[2]))}if(Na(this.state,R[0],R[1],0,this._transform)>=mr)return!0}return!1}updateConfig(r){this._transitionable.setTransitionOrValue(this._options,new Map(r))}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,d,b){return(!b||!1!==b.validate)&&hi(this,r.call(Ue,l.W({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.L})))}}class Ar extends l.E{constructor(r,d,b,M){super(),this.scope=b,this._options=r,this.properties=new l.a0(d),this._transitionable=new l.U(d,b,new Map(M)),this._transitionable.setTransitionOrValue(r.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(r){this._transitionable.setTransitionOrValue(this._options.properties,new Map(r))}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(r,d){this._options=r,this._transitionable.setTransitionOrValue(r.properties,d)}shadowsEnabled(){return!!this.properties&&!0===this.properties.get("cast-shadows")}}const Hi=new l.N({color:new l.O(l.L.properties_light_ambient.color),intensity:new l.O(l.L.properties_light_ambient.intensity)}),Zo=new l.N({direction:new l.a5(l.L.properties_light_directional.direction),color:new l.O(l.L.properties_light_directional.color),intensity:new l.O(l.L.properties_light_directional.intensity),"cast-shadows":new l.O(l.L.properties_light_directional["cast-shadows"]),"shadow-intensity":new l.O(l.L.properties_light_directional["shadow-intensity"])});var Tr="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef RENDER_CUTOFF\nfloat cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}\n#endif",ds="\nout vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#ifdef INDICATOR_CUTOUT\nuniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;\n#endif\nvec4 applyCutout(vec4 color) {\n#ifdef INDICATOR_CUTOUT\nfloat holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);\n#else\nreturn color;\n#endif\n}\n#ifdef DEBUG_WIREFRAME\n#define HANDLE_WIREFRAME_DEBUG \\\nglFragColor=vec4(0.7,0.0,0.0,0.7); \\\ngl_FragDepth=gl_FragCoord.z-0.0001;\n#else\n#define HANDLE_WIREFRAME_DEBUG\n#endif\n#ifdef RENDER_CUTOFF\nuniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;\n#endif\nvec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}",Vs="\n#define EXTENT 8192.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}\n#ifdef RENDER_CUTOFF\nuniform vec4 u_cutoff_params;out float v_cutoff_opacity;\n#endif\nconst vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}",Ys="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",sa="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform highp sampler2D u_depth;uniform vec2 u_depth_size_inv;uniform vec2 u_depth_range_unpack;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\n#ifdef TERRAIN_DEPTH_D24\nfloat unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}\n#else\nhighp float unpack_depth_rgba(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}\n#endif\nbool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;\n#ifdef TERRAIN_DEPTH_D24\nfloat depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);\n#else\nfloat depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));\n#endif\nreturn coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;\n#ifdef TERRAIN_DEPTH_D24\nvec4 depth=vec4(\ntexture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r\n);depth=unpack_depth4(depth);\n#else\nvec4 depth=vec4(\nunpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))\n);\n#endif\nreturn dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",va="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",ol="highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {\n#ifdef FOG_DITHERING\nvec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);\n#else\nreturn color;\n#endif\n}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",Fa="#ifdef RASTER_ARRAY\nuniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)\n);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)\n);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}\n#endif",ru="#ifdef RASTER_ARRAY\nuniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}\n#endif\nuniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}",_u="#ifdef RENDER_SHADOWS\nuniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}\n#endif//RENDER_SHADOWS",Ia="#ifdef RENDER_SHADOWS\n#ifdef DEPTH_TEXTURE\nuniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;\n#else\nuniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;\n#endif\nuniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;\n#ifdef DEPTH_TEXTURE\nshadow_depth=texture(u_shadowmap_1,uv).r;\n#else\nshadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;\n#endif\nreturn step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;\n#ifdef DEPTH_TEXTURE\nshadow_depth=texture(u_shadowmap_0,uv).r;\n#else\nshadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;\n#endif\nreturn step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;\n#ifdef NATIVE\nhighp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));\n#else\nhighp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(\nshadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)\n);\n#endif\nvec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {\n#ifdef SHADOWS_SINGLE_CASCADE\nlight_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);\n#else\nlight_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));\n#endif\n}highp float calculate_shadow_bias(float NDotL) {\n#ifdef NORMAL_OFFSET\nreturn 0.5*u_shadow_bias.x;\n#else\nreturn 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));\n#endif\n}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}\n#endif";const su=[];zl(Tr,su),zl(Vs,su),zl(ds,su);const dl={"_prelude_fog.vertex.glsl":va,"_prelude_terrain.vertex.glsl":sa,"_prelude_shadow.vertex.glsl":_u,"_prelude_fog.fragment.glsl":ol,"_prelude_shadow.fragment.glsl":Ia,"_prelude_lighting.glsl":"\n#ifdef LIGHTING_3D_MODE\nuniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}\n#endif//LIGHTING_3D_MODE","_prelude_raster_array.glsl":Fa,"_prelude_raster_particle.glsl":ru},Pa={};ks("",sa),ks(ol,va),ks(Ia,_u),ks(Fa,""),ks(ru,"");const Uc=ks(ds,Vs),Hu=Tr;var Gu={background:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nin vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_lighting.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),backgroundPattern:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),circle:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nuniform float u_emissive_strength;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\nglFragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nout vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}'),clippingMask:ks("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ks('#include "_prelude_fog.fragment.glsl"\nuniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nout vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),heatmapTexture:ks("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(0.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}","in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ks("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",'#include "_prelude_terrain.vertex.glsl"\nin vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}'),collisionCircle:ks("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}","in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ks("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",'#include "_prelude_terrain.vertex.glsl"\nin vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;\n#endif\nout vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}'),fill:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nuniform float u_emissive_strength;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillOutline:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin highp vec2 v_pos;uniform float u_emissive_strength;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillOutlinePattern:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillPattern:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillExtrusion:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec4 v_color;in vec4 v_flat;\n#ifdef RENDER_SHADOWS\nin highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;\n#endif\nuniform lowp float u_opacity;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;in vec2 v_ao;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nin vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nin highp vec3 v_normal;\n#endif\nuniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;\n#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)\nin float v_flood_radius;in float v_has_floodlight;\n#endif\nuniform float u_emissive_strength;in float v_height;void main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nvec3 normal=normalize(v_normal);\n#endif\nfloat z;vec4 color=v_color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);\n#ifdef LIGHTING_3D_MODE\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#else\ncolor=mix(v_color,v_roof_color,z);\n#endif\n#endif\nfloat h=max(0.0,v_height);float ao_shade=1.0;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);\n#ifdef LIGHTING_3D_MODE\n#ifdef FLOOD_LIGHT\ncolor.rgb*=mix(ao_shade,1.0,v_has_floodlight);\n#else\ncolor.rgb*=ao_shade;\n#endif\n#else\ncolor.rgb*=ao_shade;\n#endif\n#endif\n#ifdef LIGHTING_3D_MODE\nfloat flood_radiance=0.0;\n#ifdef FLOOD_LIGHT\nflood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef FLOOD_LIGHT\nfloat ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);\n#else\nfloat shadowed_lighting_factor;\n#ifdef RENDER_CUTOFF\nshadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}\n#else\nshadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);\n#endif\ncolor.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);\n#endif\n#else\ncolor.rgb=apply_lighting(color.rgb,normal);\n#ifdef FLOOD_LIGHT\ncolor.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);\n#endif\n#endif\ncolor.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));\n#endif\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color);\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\n#include "_prelude_lighting.glsl"\nuniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nuniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nout vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nout highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;out vec2 v_ao;\n#endif\n#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)\nout float v_flood_radius;out float v_has_floodlight;\n#endif\nout float v_height;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define highp float flood_light_wall_radius\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize highp float flood_light_wall_radius\nbase*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nv_normal=normal;\n#endif\nbase=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat cutoff=1.0;vec3 scaled_pos=pos;\n#ifdef RENDER_CUTOFF\nvec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);\n#endif\nfloat hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=pos;vec3 shd_pos1=pos;\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifndef LIGHTING_3D_MODE\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#endif\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\n#ifdef FLOOD_LIGHT\nfloat is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;\n#endif\nv_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);\n#else\nv_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),fillExtrusionDepth:ks("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}",'#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\nout highp float v_depth;void main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\nbase*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nvec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);\n#else\npos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}'),fillExtrusionPattern:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;in vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nin vec3 v_normal;\n#endif\nin vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define highp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize highp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_lighting.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nout vec2 v_pos;out vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;out vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nout vec3 v_normal;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define highp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize highp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_normal=normal;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}'),groundShadow:ks('#include "_prelude_shadow.fragment.glsl"\nprecision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;\n#ifdef FOG\nin float v_fog_opacity;\n#endif\nvoid main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);\n#ifdef RENDER_CUTOFF\nshadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));\n#endif\n#ifdef FOG\nshadow=mix(shadow,vec3(1.0),v_fog_opacity);\n#endif\n#ifdef INDICATOR_CUTOUT\nshadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);\n#endif\nglFragColor=vec4(shadow,1.0);}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;\n#ifdef FOG\nout float v_fog_opacity;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);\n#endif\n}'),fillExtrusionGroundEffect:ks("uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;\n#ifdef SDF_SUBPASS\nin highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}\n#ifdef FOG\nin highp float v_fog;\n#endif\n#endif\nvoid main() {\n#ifdef CLEAR_SUBPASS\nvec4 color=vec4(1.0);\n#ifdef CLEAR_FROM_TEXTURE\ncolor=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));\n#endif\nglFragColor=color;\n#else\n#ifdef SDF_SUBPASS\nhighp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;\n#ifdef FOG\nfog=v_fog;\n#endif\n#ifdef RENDER_CUTOFF\nfog*=v_cutoff_opacity;\n#endif\nglFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));\n#else\nvec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);\n#ifdef OVERDRAW_INSPECTOR\ncolor=vec4(1.0);\n#endif\nglFragColor=color;\n#endif\nHANDLE_WIREFRAME_DEBUG;\n#endif\n}",'#include "_prelude_fog.vertex.glsl"\nin highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;\n#ifdef SDF_SUBPASS\nout highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;\n#ifdef FOG\nout highp float v_fog;\n#endif\n#endif\nuniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;\n#pragma mapbox: define highp float flood_light_ground_radius\nconst float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {\n#pragma mapbox: initialize highp float flood_light_ground_radius\nvec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;\n#ifdef SDF_SUBPASS\nv_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);\n#ifdef FOG\nv_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);\n#endif\n#endif\nfloat hidden_by_landmark=0.0;\n#ifdef HAS_CENTROID\nhidden_by_landmark=a_hidden_by_landmark;\n#endif\nfloat isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n}'),hillshadePrepare:ks("precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\nglFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);\n#endif\n#ifdef FOG\nglFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),line:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform lowp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;in vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nfloat luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float border_width\n#pragma mapbox: define lowp vec4 border_color\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float border_width\n#pragma mapbox: initialize lowp vec4 border_color\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trim_alpha=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/clamp(u_trim_fade_range[0],1e-4,1.0)));float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/clamp(u_trim_fade_range[1],1e-4,1.0)));float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}\n#endif\nif (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nout_color*=(alpha*opacity);\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define EXTRUDE_SCALE 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;\n#if defined(ELEVATED)\nin float a_z_offset;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nin highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nin float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float border_width\n#pragma mapbox: define lowp vec4 border_color\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float border_width\n#pragma mapbox: initialize lowp vec4 border_color\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);\n#if defined(ELEVATED)\nvec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);\n#else\ngl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#endif\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),linePattern:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef RENDER_LINE_TRIM_OFFSET\nin highp vec4 v_uv;\n#endif\n#ifdef LINE_JOIN_NONE\nin vec2 v_pattern_data;\n#endif\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define mediump float pixel_ratio\n#pragma mapbox: define mediump float blur\n#pragma mapbox: define mediump float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize mediump float pixel_ratio\n#pragma mapbox: initialize mediump float blur\n#pragma mapbox: initialize mediump float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}\n#endif\n#ifdef LINE_JOIN_NONE\nfloat pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}\n#endif\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting_ground(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ncolor*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color);\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;\n#if defined(ELEVATED)\nin float a_z_offset;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nin highp vec4 a_packed;\n#endif\nin highp float a_linesofar;\n#ifdef LINE_JOIN_NONE\nin highp vec3 a_pattern_data;out vec2 v_pattern_data;\n#endif\nuniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef RENDER_LINE_TRIM_OFFSET\nout highp vec4 v_uv;\n#endif\n#pragma mapbox: define mediump float blur\n#pragma mapbox: define mediump float opacity\n#pragma mapbox: define mediump float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define mediump float floorwidth\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define mediump float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize mediump float blur\n#pragma mapbox: initialize mediump float opacity\n#pragma mapbox: initialize mediump float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize mediump float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);\n#if defined(ELEVATED)\nvec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);\n#else\ngl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#endif\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nfloat a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef LINE_JOIN_NONE\nv_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),raster:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_raster_array.glsl"\nuniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;\n#ifdef PROJECTION_GLOBE_VIEW\nin float v_split_fade;\n#endif\nuniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;\n#ifndef RASTER_ARRAY\nuniform sampler2D u_image0;uniform sampler2D u_image1;\n#endif\n#ifdef RASTER_COLOR\nuniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;\n#endif\nvoid main() {vec4 color0,color1,color;vec2 value;\n#ifdef RASTER_COLOR\n#ifdef RASTER_ARRAY\n#ifdef RASTER_ARRAY_LINEAR\nvalue=mix(\nraTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t\n);\n#else\nvalue=mix(\nraTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t\n);\n#endif\nif (value.y > 0.0) value.x/=value.y;\n#else\ncolor=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);\n#endif\ncolor=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;\n#else\ncolor0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);\n#endif\ncolor.a*=u_opacity;\n#ifdef GLOBE_POLES\ncolor.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);\n#endif\nvec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;\n#endif\n#ifdef FOG\nhighp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));\n#endif\nglFragColor=vec4(out_color*color.a,color.a);\n#ifdef PROJECTION_GLOBE_VIEW\nglFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));\n#endif\n#ifdef RENDER_CUTOFF\nglFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;\n#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8\n#ifdef GLOBE_POLES\nin vec3 a_globe_pos;in vec2 a_uv;\n#else\nin vec2 a_pos;in vec2 a_texture_pos;\n#endif\nout vec2 v_pos0;out vec2 v_pos1;out float v_depth;\n#ifdef PROJECTION_GLOBE_VIEW\nout float v_split_fade;\n#endif\nvoid main() {vec2 uv;\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);\n#endif\n#else\nfloat w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    \nv_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n#else\ngl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n#endif\n#endif\nv_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;\n#ifdef RENDER_CUTOFF\nv_depth=gl_Position.z;\n#endif\n}'),rasterParticle:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;\n#endif\n#ifdef FOG\nhighp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));\n#endif\nglFragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;\n#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8\nin vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n#else\nuv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n#endif\nv_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}'),rasterParticleDraw:ks("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",'#include "_prelude_raster_particle.glsl"\nin float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(\nmod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}'),rasterParticleTexture:ks("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:ks('#include "_prelude_raster_particle.glsl"\nuniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(\nlinearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)\n);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}',"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbolIcon:ks('#include "_prelude_lighting.glsl"\nuniform sampler2D u_texture;\n#ifdef ICON_TRANSITION\nuniform float u_icon_transition;\n#endif\nin float v_fade_opacity;in vec2 v_tex_a;\n#ifdef ICON_TRANSITION\nin vec2 v_tex_b;\n#endif\n#ifdef COLOR_ADJUSTMENT\nuniform mat4 u_color_adj_mat;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float emissive_strength\nlowp float alpha=opacity*v_fade_opacity;vec4 out_color;\n#ifdef ICON_TRANSITION\nvec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);\n#else\nout_color=texture(u_texture,v_tex_a);\n#endif\n#ifdef COLOR_ADJUSTMENT\nout_color=u_color_adj_mat*out_color;\n#endif\nout_color*=alpha;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef OCCLUSION_QUERIES\nin float a_occlusion_query_opacity;\n#endif\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\n#ifdef ICON_TRANSITION\nin vec2 a_texb;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout vec2 v_tex_a;\n#ifdef ICON_TRANSITION\nout vec2 v_tex_b;\n#endif\nout float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float emissive_strength\n#pragma mapbox: define lowp float occlusion_opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float emissive_strength\n#pragma mapbox: initialize lowp float occlusion_opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;vec2 a;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;\n#endif\nvec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=globe_occlusion_fade;\n#ifdef SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH\nocclusion_fade*=occlusionFade(projected_point);\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nv_tex_a=a_tex/u_texsize;\n#ifdef ICON_TRANSITION\nv_tex_b=a_texb/u_texsize;\n#endif\nv_fade_opacity=out_fade_opacity;\n#ifdef OCCLUSION_QUERIES\nfloat occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);v_fade_opacity*=occludedFadeMultiplier;\n#endif\n}'),symbolSDF:ks('#include "_prelude_lighting.glsl"\n#define SDF_PX 8.0\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\n#ifdef OCCLUSION_QUERIES\nin float a_occlusion_query_opacity;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout float v_draw_halo;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\n#pragma mapbox: define lowp float occlusion_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\n#pragma mapbox: initialize lowp float occlusion_opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;\n#endif\nvec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=globe_occlusion_fade;\n#ifdef SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH\nocclusion_fade*=occlusionFade(projected_point);\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;\n#ifdef OCCLUSION_QUERIES\nfloat occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;\n#endif\nfloat alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nfloat gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}'),symbolTextAndIcon:ks('#include "_prelude_lighting.glsl"\n#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef OCCLUSION_QUERIES\nin float a_occlusion_query_opacity;\n#endif\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout float v_draw_halo;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\n#pragma mapbox: define lowp float occlusion_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\n#pragma mapbox: initialize lowp float occlusion_opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=globe_occlusion_fade;\n#ifdef SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH\nocclusion_fade*=occlusionFade(projected_point);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nfloat out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;\n#ifdef OCCLUSION_QUERIES\nfloat occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;\n#endif\nfloat alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+ xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nfloat gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}'),terrainRaster:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image0;in vec2 v_pos0;\n#ifdef FOG\nin float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nin vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;\n#endif\nuniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;\n#ifdef LIGHTING_3D_MODE\nconst vec3 normal=vec3(0.0,0.0,1.0);\n#ifdef RENDER_SHADOWS\nfloat cutoffOpacity=1.0;\n#ifdef RENDER_CUTOFF\ncutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);\n#endif\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\nvec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;\n#else\nfloat lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));\n#endif\n#else\nfloat lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\ncolor.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;\n#endif\n#endif\n#else\ncolor=image_color;\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;\n#ifdef FOG\nout float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;\n#endif\nvoid main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);\n#endif\n}'),terrainDepth:ks("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",'#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}'),skybox:ks('#include "_prelude_fog.fragment.glsl"\nin lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}',Ys),skyboxGradient:ks('#include "_prelude_fog.fragment.glsl"\nin highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}',Ys),skyboxCapture:ks("\nin highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}","in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);\n#ifdef LIGHTING_3D_MODE\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\nraster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);\n#else\nraster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#endif\n#else\ncolor=vec4(raster.rgb*antialias,raster.a*antialias);\n#endif\n#else\ncolor=texture(u_image0,v_pos0);\n#ifdef LIGHTING_3D_MODE\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\ncolor=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;\n#else\ncolor=apply_lighting_ground(color);\n#endif\n#endif\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ncolor*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nin vec3 a_globe_pos;in vec2 a_uv;\n#else\nin vec2 a_pos;\n#endif\nout vec2 v_pos0;void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);globe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}'),globeAtmosphere:ks('#include "_prelude_fog.fragment.glsl"\nuniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {\n#ifdef ALPHA_PASS\nglFragColor=vec4(0,0,0,0);return;\n#else\n#ifdef NATIVE\nglFragColor=vec4(1,1,1,1);\n#else\nglFragColor=vec4(0,0,0,1);\n#endif\nreturn;\n#endif\n}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;\n#ifdef ALPHA_PASS\nfloat a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);\n#else\nvec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;\n#ifndef NATIVE\nc=dither(c,gl_FragCoord.xy+u_temporal_offset);\n#endif\nglFragColor=vec4(c*t,t);\n#endif\n}',"in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}"),model:ks('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;\n#ifdef RENDER_SHADOWS\nin vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;\n#endif\n#ifdef OCCLUSION_TEXTURE_TRANSFORM\nuniform vec4 u_occlusionTextureTransform;\n#endif\n#pragma mapbox: define-attribute highp vec3 normal_3f\n#pragma mapbox: define-attribute highp vec3 color_3f\n#pragma mapbox: define-attribute highp vec4 color_4f\n#pragma mapbox: define-attribute highp vec2 uv_2f\n#pragma mapbox: initialize-attribute highp vec3 normal_3f\n#pragma mapbox: initialize-attribute highp vec3 color_3f\n#pragma mapbox: initialize-attribute highp vec4 color_4f\n#pragma mapbox: initialize-attribute highp vec2 uv_2f\n#ifdef HAS_ATTRIBUTE_a_pbr\nin lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;\n#endif\n#ifdef HAS_TEXTURE_u_baseColorTexture\nuniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;\n#endif\n#ifdef HAS_TEXTURE_u_metallicRoughnessTexture\nuniform sampler2D u_metallicRoughnessTexture;\n#endif\n#ifdef HAS_TEXTURE_u_occlusionTexture\nuniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;\n#endif\n#ifdef HAS_TEXTURE_u_normalTexture\nuniform sampler2D u_normalTexture;\n#endif\n#ifdef HAS_TEXTURE_u_emissionTexture\nuniform sampler2D u_emissionTexture;\n#endif\n#ifdef APPLY_LUT_ON_GPU\nuniform highp sampler3D u_lutTexture;\n#endif\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nin highp float v_depth;uniform highp sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;uniform vec2 u_depth_range_unpack;\n#ifdef TERRAIN_DEPTH_D24\nfloat unpack_depth(float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}\n#else\nhighp float unpack_depth_rgba(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}\n#endif\nbool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;\n#ifdef TERRAIN_DEPTH_D24\nhighp float depth=unpack_depth(texture(u_depthTexture,coord).r);\n#else\nhighp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));\n#endif\nreturn v_depth > depth+0.0005;}\n#endif\n#define saturate(_x) clamp(_x,0.,1.)\nvec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)\n{\n#ifdef LIGHTING_3D_MODE\nvec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;\n#ifdef RENDER_SHADOWS\nlighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nlighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));\n#endif\nreturn apply_lighting(albedo,transformed_normal,lighting_factor);\n#else\nvec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;\n#endif\n}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;\n#ifdef HAS_ATTRIBUTE_a_color_3f\nalbedo*=vec4(color_3f,1.0);\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\n#else\n#ifdef HAS_ATTRIBUTE_a_color_4f\nalbedo*=color_4f;\n#endif\n#endif\n#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)\nvec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}\n#ifdef UNPREMULT_TEXTURE_IN_SHADER\nif(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;\n#endif\nif(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}\n#endif\nvec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);\n#ifdef APPLY_LUT_ON_GPU\ncolor=applyLUT(u_lutTexture,color);\n#endif\nreturn color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {\n#ifdef HAS_TEXTURE_u_normalTexture\nhighp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;\n#else\nreturn mat3(1.0);\n#endif\n}highp vec3 getNormal(){highp vec3 n;\n#ifdef HAS_ATTRIBUTE_a_normal_3f\nn=normalize(normal_3f);\n#else\nhighp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;\n#endif\n#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\nvec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);\n#endif\nreturn n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;\n#ifdef HAS_ATTRIBUTE_a_pbr\nmat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;\n#endif\n#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) \nvec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;\n#endif\nconst float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)\n{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)\n{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)\n{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)\n{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)\n{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)\n{\n#ifdef LIGHTING_3D_MODE\nreturn mat.diffuseColor;\n#else\nreturn mat.diffuseColor/PI;\n#endif\n}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)\n{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)\n{vec3 env_light=vec3(0.65,0.65,0.65);\n#ifdef LIGHTING_3D_MODE\nfloat ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;\n#endif\nvec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)\n{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;\n#ifdef RENDER_SHADOWS\nlighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nlighting_factor=NdotL;\n#endif\nvec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;\n#if !defined(LIGHTING_3D_MODE)\nconst vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);\n#endif\ncolor*=intensityFactor;return color;}void main() {\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nif (isOccluded()) {discard;}\n#endif\nvec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;\n#ifdef LIGHTING_3D_MODE\nlightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;\n#endif\nvec4 finalColor;\n#ifdef DIFFUSE_SHADED\nvec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);\n#ifdef HAS_TEXTURE_u_occlusionTexture\nfloat ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;\n#endif\nfinalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;\n#else\nMaterial mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;\n#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\n#ifdef OCCLUSION_TEXTURE_TRANSFORM\nvec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;\n#else\nvec2 uv=uv_2f;\n#endif\nao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;\n#endif\nvec4 emissive=u_emissiveFactor;\n#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\nemissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);\n#endif\n#ifdef APPLY_LUT_ON_GPU\nfloat emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;\n#endif\ncolor+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;\n#ifdef HAS_ATTRIBUTE_a_pbr\nfloat resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;\n#ifdef APPLY_LUT_ON_GPU\ncolor_mix=applyLUT(u_lutTexture,color_mix);\n#endif\ncolor=mix(color,color_mix,min(1.0,resEmission));\n#ifdef HAS_ATTRIBUTE_a_color_4f\nfloat distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);\n#endif\n#endif\nvec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);\n#endif\n#ifdef FOG\nfinalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));\n#endif\n#ifdef RENDER_CUTOFF\nfinalColor*=v_cutoff_opacity;\n#endif\n#ifdef INDICATOR_CUTOUT\nfinalColor=applyCutout(finalColor);\n#endif\nglFragColor=finalColor;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec3 a_pos_3f;\n#pragma mapbox: define-attribute highp vec3 normal_3f\n#pragma mapbox: define-attribute highp vec2 uv_2f\n#pragma mapbox: define-attribute highp vec3 color_3f\n#pragma mapbox: define-attribute highp vec4 color_4f\n#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr\n#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength\nuniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;\n#ifdef INSTANCED_ARRAYS\nin vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;\n#else\nuniform highp mat4 u_normal_matrix;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;\n#endif\nout vec4 v_position_height;out lowp vec4 v_color_mix;\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nout highp float v_depth;\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\nout lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;\n#endif\nvec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {\n#pragma mapbox: initialize-attribute highp vec3 normal_3f\n#pragma mapbox: initialize-attribute highp vec2 uv_2f\n#pragma mapbox: initialize-attribute highp vec3 color_3f\n#pragma mapbox: initialize-attribute highp vec4 color_4f\n#pragma mapbox: initialize-attribute-custom highp vec4 pbr\n#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength\nhighp mat4 normal_matrix;\n#ifdef INSTANCED_ARRAYS\nnormal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);\n#else\nnormal_matrix=u_normal_matrix;\n#endif\nvec3 local_pos;mat3 rs;\n#ifdef MODEL_POSITION_ON_GPU\nvec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;\n#else\nlocal_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);\n#endif\nv_position_height.w=a_pos_3f.z;\n#ifdef HAS_ATTRIBUTE_a_pbr\nvec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(local_pos);\n#endif\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef HAS_ATTRIBUTE_a_normal_3f\n#ifdef MODEL_POSITION_ON_GPU\nfloat x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);\n#else\nnormal_3f=vec3(normal_matrix*vec4(normal_3f,0));\n#endif\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\n#ifdef HAS_ATTRIBUTE_a_color_4f\nv_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);\n#ifdef NORMAL_OFFSET\n#ifdef HAS_ATTRIBUTE_a_normal_3f\n#ifdef MODEL_POSITION_ON_GPU\nvec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();\n#else\nvec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();\n#endif\n#endif\n#endif\nv_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;\n#endif\n}'),modelDepth:ks("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}","in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;\n#ifdef MODEL_POSITION_ON_GPU\n#ifdef INSTANCED_ARRAYS\nin vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;\n#else\nuniform highp mat4 u_instance;\n#endif\nuniform highp mat4 u_node_matrix;\n#endif\nvoid main() {\n#ifdef MODEL_POSITION_ON_GPU\nhighp mat4 instance;\n#ifdef INSTANCED_ARRAYS\ninstance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);\n#else\ninstance=u_instance;\n#endif\nvec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(a_pos_3f,1);\n#endif\nv_depth=gl_Position.z/gl_Position.w;}"),stars:ks("in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)\n{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}","\nin vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}"),occlusion:ks("uniform vec4 u_color;void main() {glFragColor=u_color;}",'#include "_prelude_terrain.vertex.glsl"\nin highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;\n#ifdef TERRAIN\nfloat e=elevation(world_pos.xy);world_pos.z+=e;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}')};function zl(v,r){const d=v.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let b of d)if(b=b.trim(),"#"===b[0]&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const M=b.split(" ");for(const R of M)r.includes(R)||r.push(R)}}function ks(v,r){const d=/#include\s+"([^"]+)"/g,b=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let M=r.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);M&&(M=M.map(re=>{const he=re.split(" ");return he[he.length-1]}),M=[...new Set(M)]);const R={},N=[],H=[];if(v=v.replace(d,(re,he)=>(H.push(he),"")),(r=r.replace(d,(re,he)=>(N.push(he),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let J=[...su];zl(v,J),zl(r,J);for(const re of[...N,...H])dl[re]||console.error(`Undefined include: ${re}`),Pa[re]||(Pa[re]=[],zl(dl[re],Pa[re])),J=[...J,...Pa[re]];return{fragmentSource:v=v.replace(b,(re,he,ye,Pe,Fe)=>(R[Fe]=!0,"define"===he?`\n#ifndef HAS_UNIFORM_u_${Fe}\nin ${ye} ${Pe} ${Fe};\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:"initialize"===he?`\n#ifdef HAS_UNIFORM_u_${Fe}\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`:"define-attribute"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\n    in ${ye} ${Pe} ${Fe};\n#endif\n`:"initialize-attribute"===he?"":void 0)),vertexSource:r=r.replace(b,(re,he,ye,Pe,Fe)=>{const Qe="float"===Pe?"vec2":Pe,Je=Fe.match(/color/)?"color":Qe;return"define-attribute-vertex-shader-only"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\nin ${ye} ${Pe} a_${Fe};\n#endif\n`:R[Fe]?"define"===he?`\n#ifndef HAS_UNIFORM_u_${Fe}\nuniform lowp float u_${Fe}_t;\nin ${ye} ${Qe} a_${Fe};\nout ${ye} ${Pe} ${Fe};\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:"initialize"===he?"vec4"===Je?`\n#ifndef HAS_UNIFORM_u_${Fe}\n    ${Fe} = a_${Fe};\n#else\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Fe}\n    ${Fe} = unpack_mix_${Je}(a_${Fe}, u_${Fe}_t);\n#else\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`:"define-attribute"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\n    in ${ye} ${Pe} a_${Fe};\n    out ${ye} ${Pe} ${Fe};\n#endif\n`:"initialize-attribute"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\n    ${Fe} = a_${Fe};\n#endif\n`:void 0:"define"===he?`\n#ifndef HAS_UNIFORM_u_${Fe}\nuniform lowp float u_${Fe}_t;\nin ${ye} ${Qe} a_${Fe};\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:"define-instanced"===he?"mat4"===Je?`\n#ifdef INSTANCED_ARRAYS\nin vec4 a_${Fe}0;\nin vec4 a_${Fe}1;\nin vec4 a_${Fe}2;\nin vec4 a_${Fe}3;\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:`\n#ifdef INSTANCED_ARRAYS\nin ${ye} ${Qe} a_${Fe};\n#else\nuniform ${ye} ${Pe} u_${Fe};\n#endif\n`:"initialize-attribute-custom"===he?`\n#ifdef HAS_ATTRIBUTE_a_${Fe}\n    ${ye} ${Pe} ${Fe} = a_${Fe};\n#endif\n`:"vec4"===Je?`\n#ifndef HAS_UNIFORM_u_${Fe}\n    ${ye} ${Pe} ${Fe} = a_${Fe};\n#else\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Fe}\n    ${ye} ${Pe} ${Fe} = unpack_mix_${Je}(a_${Fe}, u_${Fe}_t);\n#else\n    ${ye} ${Pe} ${Fe} = u_${Fe};\n#endif\n`}),staticAttributes:M,usedDefines:J,vertexIncludes:N,fragmentIncludes:H}}class ld{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(r,d,b,M,R,N,H,J){this.context=r;let re=this.boundPaintVertexBuffers.length!==M.length;for(let ye=0;!re&&ye<M.length;ye++)this.boundPaintVertexBuffers[ye]!==M[ye]&&(re=!0);let he=this.boundDynamicVertexBuffers.length!==H.length;for(let ye=0;!he&&ye<H.length;ye++)this.boundDynamicVertexBuffers[ye]!==H[ye]&&(he=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==b||re||he||this.boundIndexBuffer!==R||this.boundVertexOffset!==N)this.freshBind(d,b,M,R,N,H,J);else{r.bindVertexArrayOES.set(this.vao);for(const ye of H)ye&&(ye.bind(),J&&ye.instanceCount&&ye.setVertexAttribDivisor(r.gl,d,J));R&&R.dynamicDraw&&R.bind()}}freshBind(r,d,b,M,R,N,H){const J=r.numAttributes,re=this.context,he=re.gl;this.vao&&this.destroy(),this.vao=re.gl.createVertexArray(),re.bindVertexArrayOES.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=M,this.boundVertexOffset=R,this.boundDynamicVertexBuffers=N,d.enableAttributes(he,r),d.bind(),d.setVertexAttribPointers(he,r,R);for(const ye of b)ye.enableAttributes(he,r),ye.bind(),ye.setVertexAttribPointers(he,r,R);for(const ye of N)ye&&(ye.enableAttributes(he,r),ye.bind(),ye.setVertexAttribPointers(he,r,R),H&&ye.instanceCount&&ye.setVertexAttribDivisor(he,r,H));M&&M.bind(),re.currentNumAttributes=J}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function fc(v,r){const d=Math.pow(2,r.canonical.z),b=r.canonical.y;return[new l.Y(0,b/d).toLngLat().lat,new l.Y(0,(b+1)/d).toLngLat().lat]}function au(v,r,d,b,M,R,N){const H=v.context,J=H.gl,re=d.hillshadeFBO;if(!re)return;v.prepareDrawTile();const he=v.isTileAffectedByFog(r),ye=v.getOrCreateProgram("hillshade",{overrideFog:he});H.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,re.colorAttachment.get());const Pe=((ot,st,Pt,Ft)=>{const Vt=Pt.paint.get("hillshade-shadow-color"),en=Pt.paint.get("hillshade-highlight-color"),tn=Pt.paint.get("hillshade-accent-color"),yn=Pt.paint.get("hillshade-emissive-strength");let lt=l.ab(Pt.paint.get("hillshade-illumination-direction"));if("viewport"===Pt.paint.get("hillshade-illumination-anchor"))lt-=ot.transform.angle;else if(ot.style&&ot.style.enable3dLights()&&ot.style.directionalLight){const Sn=ot.style.directionalLight.properties.get("direction"),ci=l.ac(Sn.x,Sn.y,Sn.z);lt=l.ab(ci[1])}const $t=!ot.options.moving;return{u_matrix:Ft||ot.transform.calculateProjMatrix(st.tileID.toUnwrapped(),$t),u_image:0,u_latrange:fc(0,st.tileID),u_light:[Pt.paint.get("hillshade-exaggeration"),lt],u_shadow:Vt.toRenderColor(Pt.lut),u_highlight:en.toRenderColor(Pt.lut),u_emissive_strength:yn,u_accent:tn.toRenderColor(Pt.lut)}})(v,d,b,v.terrain?r.projMatrix:null);v.uploadCommonUniforms(H,ye,r.toUnwrapped());const{tileBoundsBuffer:Fe,tileBoundsIndexBuffer:Qe,tileBoundsSegments:Je}=v.getTileBoundsBuffers(d);ye.draw(v,J.TRIANGLES,M,R,N,l.af.disabled,Pe,b.id,Fe,Qe,Je)}function mc(v,r,d){if(!r.needsDEMTextureUpload)return;const b=v.context,M=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(d.stride);const R=d.getPixels();r.demTexture?r.demTexture.update(R,{premultiply:!1}):r.demTexture=new l.T(b,R,M.R32F,{premultiply:!1}),r.needsDEMTextureUpload=!1}function Ea(v,r,d){const b=v.context,M=b.gl;if(!r.dem)return;const R=r.dem;if(b.activeTexture.set(M.TEXTURE1),mc(v,r,R),!r.demTexture)return;r.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);const N=R.dim;b.activeTexture.set(M.TEXTURE0);let H=r.hillshadeFBO;if(!H){const Pe=new l.T(b,{width:N,height:N,data:null},M.RGBA);Pe.bind(M.LINEAR,M.CLAMP_TO_EDGE),H=r.hillshadeFBO=b.createFramebuffer(N,N,!0,"renderbuffer"),H.colorAttachment.set(Pe.texture)}b.bindFramebuffer.set(H.framebuffer),b.viewport.set([0,0,N,N]);const{tileBoundsBuffer:J,tileBoundsIndexBuffer:re,tileBoundsSegments:he}=v.getMercatorTileBoundsBuffers(),ye=[];v.linearFloatFilteringSupported()&&ye.push("TERRAIN_DEM_FLOAT_FORMAT"),v.getOrCreateProgram("hillshadePrepare",{defines:ye}).draw(v,M.TRIANGLES,l.ae.disabled,l.ag.disabled,l.a.unblended,l.af.disabled,((Pe,Fe)=>{const Qe=Fe.stride,Je=l.ad.create();return l.ad.ortho(Je,0,l.a3,-l.a3,0,0,1),l.ad.translate(Je,Je,[0,-l.a3,0]),{u_matrix:Je,u_image:1,u_dimension:[Qe,Qe],u_zoom:Pe.overscaledZ}})(r.tileID,R),d.id,J,re,he),r.needsHillshadePrepare=!1}function gc(v,r,d,b,M){const R=function(N,H){if(N)return M(N);if(H){if(v.url&&H.tiles&&v.tiles&&delete v.tiles,H.variants){if(!Array.isArray(H.variants))return M(new Error("variants must be an array"));for(const re of H.variants){if(null==re||"object"!=typeof re||re.constructor!==Object)return M(new Error("variant must be an object"));if(!Array.isArray(re.capabilities))return M(new Error("capabilities must be an array"));if(1===re.capabilities.length&&"meshopt"===re.capabilities[0]){H=l.W(H,re);break}}}const J=l.ah(l.W(H,v),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);H.vector_layers&&(J.vectorLayers=H.vector_layers,J.vectorLayerIds=J.vectorLayers.map(re=>re.id)),H.raster_layers&&(J.rasterLayers=H.raster_layers,J.rasterLayerIds=J.rasterLayers.map(re=>re.id)),J.tiles=r.canonicalizeTileset(J,v.url),M(null,J)}};return v.url?l.g(r.transformRequest(r.normalizeSourceURL(v.url,null,d,b),l.R.Source),R):l.e.frame(()=>R(null,v))}class Ul{constructor(r,d,b){this.bounds=l.ai.convert(this.validateBounds(r)),this.minzoom=d||0,this.maxzoom=b||24}validateBounds(r){return Array.isArray(r)&&4===r.length?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const d=Math.pow(2,r.z),b=Math.floor(l.aj(this.bounds.getWest())*d),M=Math.floor(l.ak(this.bounds.getNorth())*d),R=Math.ceil(l.aj(this.bounds.getEast())*d),N=Math.ceil(l.ak(this.bounds.getSouth())*d);return r.x>=b&&r.x<R&&r.y>=M&&r.y<N}}class yu extends l.E{constructor(r,d,b,M){super(),this.id=r,this.dispatcher=b,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.W({type:"raster"},d),l.W(this,l.ah(d,["url","scheme","tileSize"]))}load(r){this._loaded=!1,this.fire(new l.f("dataloading",{dataType:"source"})),this._tileJSONRequest=gc(this._options,this.map._requestManager,null,null,(d,b)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new l.d(d)):b&&(l.W(this,b),b.bounds&&(this.tileBounds=new Ul(b.bounds,this.minzoom,this.maxzoom)),l.an(b.tiles),this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))),r&&r(d)})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}reload(){this.cancelTileJSONRequest();const r=l.al(this.id,this.scope);this.load(()=>this.map.style.clearSource(r))}setTiles(r){return this._options.tiles=r,this.reload(),this}setUrl(r){return this.url=r,this._options.url=r,this.reload(),this}onRemove(r){this.cancelTileJSONRequest()}serialize(){return l.W({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,d){const b=l.e.devicePixelRatio>=2,M=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);r.request=l.h(this.map._requestManager.transformRequest(M,l.R.Tile),(R,N,H,J)=>(delete r.request,r.aborted?(r.state="unloaded",d(null)):R?(r.state="errored",d(R)):N?(this.map._refreshExpiredTiles&&r.setExpiryData({cacheControl:H,expires:J}),r.setTexture(N,this.map.painter),r.state="loaded",l.am(this.dispatcher),void d(null)):d(null)))}abortTile(r,d){r.request&&(r.request.cancel(),delete r.request),d&&d()}unloadTile(r,d){r.texture&&r.texture instanceof l.T?(r.destroy(!0),r.texture&&r.texture instanceof l.T&&this.map.painter.saveTileTexture(r.texture)):r.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class kc extends l.E{constructor(r,d,b,M){if(super(),this.id=r,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.W(this,l.ah(d,["url","scheme","tileSize","promoteId"])),this._options=l.W({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M),this._tileWorkers={},this._deduped=new l.ao}load(r){this._loaded=!1,this.fire(new l.f("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,b=this.map._worldview;this._tileJSONRequest=gc(this._options,this.map._requestManager,d,b,(M,R)=>{this._tileJSONRequest=null,this._loaded=!0,M?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),b&&2!==b.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${b}`),this.fire(new l.d(M))):R&&(l.W(this,R),R.bounds&&(this.tileBounds=new Ul(R.bounds,this.minzoom,this.maxzoom)),l.an(R.tiles,this.map._requestManager._customAccessToken),this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))),r&&r(M)})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}reload(){this.cancelTileJSONRequest();const r=l.al(this.id,this.scope);this.load(()=>this.map.style.clearSource(r))}setTiles(r){return this._options.tiles=r,this.reload(),this}setUrl(r){return this.url=r,this._options.url=r,this.reload(),this}onRemove(r){this.cancelTileJSONRequest()}serialize(){return l.W({},this._options)}loadTile(r,d){const b=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme)),M=this.map._requestManager.transformRequest(b,l.R.Tile),R=this.map.style?this.map.style.getLut(this.scope):null,N={request:M,data:void 0,uid:r.uid,tileID:r.tileID,tileZoom:r.tileZoom,zoom:r.tileID.overscaledZ,lut:R?{image:R.image.clone()}:null,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:l.e.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:r.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:r.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(N.request.collectResourceTiming=this._collectResourceTiming,r.actor&&"expired"!==r.state)"loading"===r.state?r.reloadCallback=d:r.request=r.actor.send("reloadTile",N,H.bind(this));else if(r.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)r.request=r.actor.send("loadTile",N,H.bind(this),void 0,!0);else{const J=l.ap.call({deduped:this._deduped},N,(re,he)=>{re||!he?H.call(this,re):(N.data={cacheControl:he.cacheControl,expires:he.expires,rawData:he.rawData.slice(0)},r.actor&&r.actor.send("loadTile",N,H.bind(this),void 0,!0))},!0);r.request={cancel:J}}function H(J,re){return delete r.request,r.aborted?d(null):J&&404!==J.status?d(J):(re&&re.resourceTiming&&(r.resourceTiming=re.resourceTiming),this.map._refreshExpiredTiles&&re&&r.setExpiryData(re),r.loadVectorData(re,this.map.painter),l.am(this.dispatcher),d(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(r,d){r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id,scope:this.scope}),r.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}const lu=(v,r,d)=>({u_matrix:v,u_image0:0,u_skirt_height:r,u_ground_shadow_factor:d}),Eo=(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:r,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:d,u_zoom_transition:M,u_merc_center:R,u_image0:0,u_frustum_tl:N,u_frustum_tr:H,u_frustum_br:J,u_frustum_bl:re,u_globe_pos:he,u_globe_radius:ye,u_viewport:Pe,u_grid_matrix:Je?Float32Array.from(Je):new Float32Array(9),u_skirt_height:Fe,u_far_z_cutoff:Qe});class Oc{constructor(r=0,d=0,b=0,M=0){if(isNaN(r)||r<0||isNaN(d)||d<0||isNaN(b)||b<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=d,this.left=b,this.right=M}interpolate(r,d,b){return null!=d.top&&null!=r.top&&(this.top=l.a2(r.top,d.top,b)),null!=d.bottom&&null!=r.bottom&&(this.bottom=l.a2(r.bottom,d.bottom,b)),null!=d.left&&null!=r.left&&(this.left=l.a2(r.left,d.left,b)),null!=d.right&&null!=r.right&&(this.right=l.a2(r.right,d.right,b)),this}getCenter(r,d){const b=l.at((this.left+r-this.right)/2,0,r),M=l.at((this.top+d-this.bottom)/2,0,d);return new l.P(b,M)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Oc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Lc(v,r){const d=l.aw(v,3);l.ad.fromQuat(v,r),l.az(v,3,d)}function Gr(v,r){const d=l.av.identity([]);return l.av.rotateZ(d,d,-r),l.av.rotateX(d,d,-v),d}function rl(v,r){const d=[v[0],v[1],0],b=[r[0],r[1],0];if(l._.length(d)>=1e-15){const N=l._.normalize([],d);l._.scale(b,N,l._.dot(b,N)),r[0]=b[0],r[1]=b[1]}const M=l._.cross([],r,v);if(l._.len(M)<1e-15)return null;const R=Math.atan2(-M[1],M[0]);return Gr(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),R)}class et{constructor(r,d){this.position=r,this.orientation=d}get position(){return this._position}set position(r){if(r){const d=r instanceof l.Y?r:new l.Y(r[0],r[1],r[2]);this._renderWorldCopies&&(d.x=l.au(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(r,d){if(this.orientation=null,!this.position)return;const b=this.position,M=this._elevation?this._elevation.getAtPointOrZero(l.Y.fromLngLat(r)):0,R=l.Y.fromLngLat(r,M),N=[R.x-b.x,R.y-b.y,R.z-b.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=rl(N,d)}setPitchBearing(r,d){this.orientation=Gr(l.ab(r),l.ab(-d))}}class Dt{constructor(r,d){this._transform=l.ad.identity([]),this.orientation=d,this.position=r}get mercatorPosition(){const r=this.position;return new l.Y(r[0],r[1],r[2])}get position(){const r=l.aw(this._transform,3);return[r[0],r[1],r[2]]}set position(r){var d;r&&l.az(this._transform,3,[(d=r)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(r){this._orientation=r||l.av.identity([]),r&&Lc(this._transform,this._orientation)}getPitchBearing(){const r=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(r[0]*r[0]+r[1]*r[1]),-r[2])}}setPitchBearing(r,d){this._orientation=Gr(r,d),Lc(this._transform,this._orientation)}forward(){const r=l.aw(this._transform,2);return[-r[0],-r[1],-r[2]]}up(){const r=l.aw(this._transform,1);return[-r[0],-r[1],-r[2]]}right(){const r=l.aw(this._transform,0);return[r[0],r[1],r[2]]}getCameraToWorld(r,d){const b=new Float64Array(16);return l.ad.invert(b,this.getWorldToCamera(r,d)),b}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(r,d,b){const M=this.position;l._.scale(M,M,-r);const R=new Float64Array(16);return l.ad.fromScaling(R,[b,b,b]),l.ad.translate(R,R,M),R[10]*=d,R}getWorldToCamera(r,d){const b=new Float64Array(16),M=new Float64Array(4),R=this.position;return l.av.conjugate(M,this._orientation),l._.scale(R,R,-r),l.ad.fromQuat(b,M),l.ad.translate(b,b,R),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=d,b[9]*=d,b[10]*=d,b[11]*=d,b}getCameraToClipPerspective(r,d,b,M){const R=new Float64Array(16);return l.ad.perspective(R,r,d,b,M),R}getCameraToClipOrthographic(r,d,b,M,R,N){const H=new Float64Array(16);return l.ad.ortho(H,r,d,b,M,R,N),H}getDistanceToElevation(r,d=!1){const b=0===r?0:l.ax(r,d?l.ay(this.position[1]):this.position[1]),M=this.forward();return(b-this.position[2])/M[2]}clone(){return new Dt([...this.position],[...this.orientation])}}const Nn={unknown:0,flipRequired:1,flipNotRequired:2},Zn=Math.tan(85*Math.PI/180);function zn(v,r,d,b,M,R,N){const H=l.ad.create();if(d)if("globe"===R.name){const J=l.aB(M,r);l.ad.multiply(H,H,J)}else{const J=l.aC.invert([],N);H[0]=J[0],H[1]=J[1],H[4]=J[2],H[5]=J[3],b||l.ad.rotateZ(H,H,M.angle)}else l.ad.multiply(H,M.labelPlaneMatrix,v);return H}function vi(v,r,d,b,M,R,N){const H=zn(v,r,d,b,M,R,N);return"globe"===R.name&&d||(H[2]=H[6]=H[10]=H[14]=0),H}function go(v,r,d,b,M,R,N){if(d){if("globe"===R.name){const H=zn(v,r,d,b,M,R,N);return l.ad.invert(H,H),l.ad.multiply(H,v,H),H}{const H=l.ad.clone(v),J=l.ad.identity([]);return J[0]=N[0],J[1]=N[1],J[4]=N[2],J[5]=N[3],l.ad.multiply(H,H,J),b||l.ad.rotateZ(H,H,-M.angle),H}}return M.glCoordMatrix}function yo(v,r,d,b){const M=[v,r,d,1];d?l.aA.transformMat4(M,M,b):ts(M,M,b);const R=M[3];return M[0]/=R,M[1]/=R,M[2]/=R,M}function co(v,r){return Math.min(.5+v/r*.5,1.5)}function gi(v,r){const d=v[0]/v[3],b=v[1]/v[3];return d>=-r[0]&&d<=r[0]&&b>=-r[1]&&b<=r[1]}function qo(v,r,d,b,M,R,N,H,J,re){const he=d.transform,ye=b?v.textSizeData:v.iconSizeData,Pe=l.aD(ye,d.transform.zoom),Fe="globe"===he.projection.name,Qe=[256/d.width*2+1,256/d.height*2+1],Je=b?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Je.clear();let ot=null;Fe&&(ot=b?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const st=v.lineVertexArray,Pt=b?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ft=d.transform.width/d.transform.height;let Vt,en=!1;for(let tn=0;tn<Pt.length;tn++){const yn=Pt.get(tn),{numGlyphs:lt,writingMode:$t}=yn;if($t!==l.aE.vertical||en||Vt===l.aE.horizontal||(en=!0),Vt=$t,(yn.hidden||$t===l.aE.vertical)&&!en){Fr(lt,Je);continue}en=!1;const Sn=new l.P(yn.tileAnchorX,yn.tileAnchorY);let{x:ci,y:Dn,z:gn}=he.projection.projectTilePoint(Sn.x,Sn.y,re.canonical);if(J){const[ln,hn,Qn]=J(Sn);ci+=ln,Dn+=hn,gn+=Qn}const bi=[ci,Dn,gn,1];if(l.aA.transformMat4(bi,bi,r),!gi(bi,Qe)){Fr(lt,Je);continue}const io=bi[3],ro=co(d.transform.getCameraToCenterDistance(he.projection),io),te=l.aF(ye,Pe,yn),L=N?te/ro:te*ro,j=yo(ci,Dn,gn,M);if(j[3]<=0){Fr(lt,Je);continue}let ie={};const Ne=N?null:J,at=Wr(yn,L,!1,H,r,M,R,v.glyphOffsetArray,st,Je,ot,j,Sn,ie,Ft,Ne,he.projection,re,N);en=at.useVertical,Ne&&at.needsFlipping&&(ie={}),(at.notEnoughRoom||en||at.needsFlipping&&Wr(yn,L,!0,H,r,M,R,v.glyphOffsetArray,st,Je,ot,j,Sn,ie,Ft,Ne,he.projection,re,N).notEnoughRoom)&&Fr(lt,Je)}b?(v.text.dynamicLayoutVertexBuffer.updateData(Je),ot&&v.text.globeExtVertexBuffer&&v.text.globeExtVertexBuffer.updateData(ot)):(v.icon.dynamicLayoutVertexBuffer.updateData(Je),ot&&v.icon.globeExtVertexBuffer&&v.icon.globeExtVertexBuffer.updateData(ot))}function cr(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je){const{lineStartIndex:ot,glyphStartIndex:st,segment:Pt}=H,Ft=st+H.numGlyphs,Vt=ot+H.lineLength,en=r.getoffsetX(st),tn=r.getoffsetX(Ft-1),yn=zs(v*en,d,b,M,R,N,Pt,ot,Vt,J,re,he,ye,Pe,!0,Fe,Qe,Je);if(!yn)return null;const lt=zs(v*tn,d,b,M,R,N,Pt,ot,Vt,J,re,he,ye,Pe,!0,Fe,Qe,Je);return lt?{first:yn,last:lt}:null}function Er(v,r,d,b){return v===l.aE.horizontal&&Math.abs(b)>Math.abs(d)?{useVertical:!0}:v===l.aE.vertical?b>0?{needsFlipping:!0}:null:r!==Nn.unknown&&(0===(M=d)||Math.abs(b/M)>Zn)?r===Nn.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null;var M}function Wr(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je,ot,st,Pt){const Ft=r/24,Vt=v.lineOffsetX*Ft,en=v.lineOffsetY*Ft,{lineStartIndex:tn,glyphStartIndex:yn,numGlyphs:lt,segment:$t,writingMode:Sn,flipState:ci}=v,Dn=tn+v.lineLength,gn=bi=>{if(he){const[L,j,ie]=bi.up,Ne=re.length;l.aG(he,Ne+0,L,j,ie),l.aG(he,Ne+1,L,j,ie),l.aG(he,Ne+2,L,j,ie),l.aG(he,Ne+3,L,j,ie)}const[io,ro,te]=bi.point;l.aH(re,io,ro,te,bi.angle)};if(lt>1){const bi=cr(Ft,H,Vt,en,d,ye,Pe,v,J,R,Fe,Je,!1,ot,st,Pt);if(!bi)return{notEnoughRoom:!0};if(b&&!d){let[io,ro,te]=bi.first.point,[L,j,ie]=bi.last.point;[io,ro]=yo(io,ro,te,N),[L,j]=yo(L,j,ie,N);const Ne=Er(Sn,ci,(L-io)*Qe,j-ro);if(v.flipState=Ne&&Ne.needsFlipping?Nn.flipRequired:Nn.flipNotRequired,Ne)return Ne}gn(bi.first);for(let io=yn+1;io<yn+lt-1;io++){const ro=zs(Ft*H.getoffsetX(io),Vt,en,d,ye,Pe,$t,tn,Dn,J,R,Fe,Je,!1,!1,ot,st,Pt);if(!ro)return re.length-=4*(io-yn),{notEnoughRoom:!0};gn(ro)}gn(bi.last)}else{if(b&&!d){const io=yo(Pe.x,Pe.y,0,M),ro=tn+$t+1,te=new l.P(J.getx(ro),J.gety(ro)),L=yo(te.x,te.y,0,M),j=L[3]>0?L:ca(Pe,te,io,1,M,void 0,ot,st.canonical),ie=Er(Sn,ci,(j[0]-io[0])*Qe,j[1]-io[1]);if(v.flipState=ie&&ie.needsFlipping?Nn.flipRequired:Nn.flipNotRequired,ie)return ie}const bi=zs(Ft*H.getoffsetX(yn),Vt,en,d,ye,Pe,$t,tn,Dn,J,R,Fe,Je,!1,!1,ot,st,Pt);if(!bi)return{notEnoughRoom:!0};gn(bi)}return{}}function Ts(v,r,d,b,M){const{x:R,y:N,z:H}=b.projectTilePoint(v.x,v.y,r);if(!M)return yo(R,N,H,d);const[J,re,he]=M(v);return yo(R+J,N+re,H+he,d)}function ca(v,r,d,b,M,R,N,H){const J=Ts(v.sub(r)._unit()._add(v),H,M,N,R);return l._.sub(J,d,J),l._.normalize(J,J),l._.scaleAndAdd(J,d,J,b)}function zs(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je,ot,st){const Pt=b?v-r:v+r;let Ft=Pt>0?1:-1,Vt=0;b&&(Ft*=-1,Vt=Math.PI),Ft<0&&(Vt+=Math.PI);let en=H+N+(Ft>0?0:1)|0,tn=M,yn=M,lt=0,$t=0;const Sn=Math.abs(Pt),ci=[],Dn=[];let gn=R,bi=gn;const io=()=>ca(bi,gn,yn,Sn-lt+1,he,Pe,Je,ot.canonical);for(;lt+$t<=Sn;){if(en+=Ft,en<H||en>=J)return null;if(yn=tn,bi=gn,ci.push(yn),Fe&&Dn.push(bi),gn=new l.P(re.getx(en),re.gety(en)),tn=ye[en],!tn){const hn=Ts(gn,ot.canonical,he,Je,Pe);tn=hn[3]>0?ye[en]=hn:io()}lt+=$t,$t=l._.distance(yn,tn)}Qe&&Pe&&(ye[en]&&(tn=io(),$t=l._.distance(yn,tn)),ye[en]=tn);const ro=(Sn-lt)/$t,te=gn.sub(bi)._mult(ro)._add(bi),L=l._.sub([],tn,yn),j=l._.scaleAndAdd([],yn,L,ro);let ie=[0,0,1],Ne=L[0],at=L[1];if(st&&(ie=Je.upVector(ot.canonical,te.x,te.y),0!==ie[0]||0!==ie[1]||1!==ie[2])){const hn=[ie[2],0,-ie[0]],Qn=l._.cross([],ie,hn);l._.normalize(hn,hn),l._.normalize(Qn,Qn),Ne=l._.dot(L,hn),at=l._.dot(L,Qn)}if(d){const hn=l._.cross([],ie,L);l._.normalize(hn,hn),l._.scaleAndAdd(j,j,hn,d*Ft)}const ln=Vt+Math.atan2(at,Ne);return ci.push(j),Fe&&Dn.push(te),{point:j,angle:ln,path:ci,tilePath:Dn,up:ie}}function Fr(v,r){const d=r.length,b=d+4*v;r.resize(b),r.float32.fill(-1/0,4*d,4*b)}function ts(v,r,d){const b=r[0],M=r[1];return v[0]=d[0]*b+d[4]*M+d[12],v[1]=d[1]*b+d[5]*M+d[13],v[3]=d[3]*b+d[7]*M+d[15],v}const aa=(v,r,d)=>(1-d)*v+d*r,Hc=v=>v*v*v*v*v;class fa{constructor(r,d,b,M,R,N,H){this.tileSize=512,this._renderWorldCopies=void 0===R||R,this._minZoom=r||0,this._maxZoom=d||22,this._minPitch=null!=b?b:0,this._maxPitch=null!=M?M:60,this.setProjection(N),this.setMaxBounds(H),this.width=0,this.height=0,this._center=new l.aI(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Oc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Dt,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const r=new fa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return r._elevation=this._elevation,r._centerAltitude=this._centerAltitude,r._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,r.tileSize=this.tileSize,r.mercatorFromTransition=this.mercatorFromTransition,r.width=this.width,r.height=this.height,r.cameraElevationReference=this.cameraElevationReference,r._center=this._center,r._setZoom(this.zoom),r._seaLevelZoom=this._seaLevelZoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._nearZ=this._nearZ,r._farZ=this._farZ,r._averageElevation=this._averageElevation,r._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._camera=this._camera.clone(),r._calcMatrices(),r.freezeTileCoverage=this.freezeTileCoverage,r.frustumCorners=this.frustumCorners,r}get isOrthographic(){return"globe"!==this.projection.name&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(r){this._elevation!==r&&(this._elevation=r,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return"globe"!==this.projection.name&&!this.isOrthographic}updateElevation(r,d=!1){const b=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||b)&&this._updateCameraOnTerrain(),(r||b)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return l.ah(this.projection,["name","center","parallels"])}setProjection(r){this.projectionOptions=r||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=l.aJ(this.projectionOptions);const b=!qe(d,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setOrthographicProjectionAtLowPitch(r){return this._orthographicProjectionAtLowPitch!==r&&(this._orthographicProjectionAtLowPitch=r,this._calcMatrices(),!0)}setMercatorFromTransition(){const r=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=l.aJ({name:"mercator"});const d=r!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(r){void 0===r?r=!0:null===r&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const r=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(r))}get cameraWorldSize(){const r=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(r))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return l.ax(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return l.au(this.rotation,-180,180)}set bearing(r){this.rotation=r}get rotation(){return-this.angle/Math.PI*180}set rotation(r){const d=-r*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=l.aC.create(),l.aC.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const d=l.at(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const r=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/r)}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=l.ab(r),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(r){this._averageElevation=r,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(r){const d=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(r){this._zoom=r,this.scale=this.zoomScale(r),this.tileZoom=Math.floor(r),this.zoomFraction=r-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(r){this._tileCoverLift!==r&&(this._tileCoverLift=r)}_updateCameraOnTerrain(){const r=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&r===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||r===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const b=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&b.exaggeration()&&this._centerAltitudeValidForExaggeration!==b.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*b.exaggeration(),this._centerAltitudeValidForExaggeration=b.exaggeration()):(this._centerAltitude=r||0,this._centerAltitudeValidForExaggeration=b.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const r=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let M=0,R=0;for(let N=0;N<d.length;N++){const H=new l.P(d[N][0]*this.width,b+d[N][1]*(this.height-b)),J=r.pointCoordinate(H);if(!J)continue;const re=1/Math.hypot(J[0]-this._camera.position[0],J[1]-this._camera.position[1]);M+=J[3]*re,R+=re}return 0===R?NaN:M/R}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const r=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*d,M=this._mercatorZfromZoom(r),R=this._mercatorZfromZoom(this._maxZoom),N=Math.max(M-b,R);this._setZoom(this._zoomFromMercatorZ(N))}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}computeZoomRelativeTo(r){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,r.toAltitude()));let b;b=r.z<this._camera.position[2]?[d.x,d.y,d.z]:[r.x,r.y,r.z];const M=l._.length(l._.sub([],this._camera.position,b));return l.at(this._zoomFromMercatorZ(M),this._minZoom,this._maxZoom)}setFreeCameraOptions(r){if(!this.height||!r.position&&!r.orientation)return;this._updateCameraState();let d=!1;if(r.orientation&&!l.av.exactEquals(r.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(r.orientation)),r.position){const b=[r.position.x,r.position.y,r.position.z];l._.exactEquals(b,this._camera.position)||(this._setCameraPosition(b),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const r=this._camera.position,d=new et;return d.position=new l.Y(r[0],r[1],r[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(r){if(!l.av.length(r))return!1;l.av.normalize(r,r);const d=l._.transformQuat([],[0,0,-1],r),b=l._.transformQuat([],[0,-1,0],r);if(b[2]<0)return!1;const M=rl(d,b);return!!M&&(this._camera.orientation=M,!0)}_setCameraPosition(r){const d=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,M=this.cameraToCenterDistance;r[2]=l.at(r[2],M/b,M/d),this._camera.position=r}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,d,b){this._unmodified=!1,this._edgeInsets.interpolate(r,d,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const d=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(r){const d=[new l.aK(0,r)];if(this.renderWorldCopies){const b=this.pointCoordinate(new l.P(0,0)),M=this.pointCoordinate(new l.P(this.width,0)),R=this.pointCoordinate(new l.P(this.width,this.height)),N=this.pointCoordinate(new l.P(0,this.height)),H=Math.floor(Math.min(b.x,M.x,R.x,N.x)),J=Math.floor(Math.max(b.x,M.x,R.x,N.x)),re=1;for(let he=H-re;he<=J+re;he++)0!==he&&d.push(new l.aK(he,r))}return d}isLODDisabled(r){return(!r||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(r,d,b){let M=[];if(0===d[0]&&0===d[1])return M;for(const N of r){const H=N.canonical,J=N.overscaledZ,re=N.wrap,he=1<<H.z,ye=H.x+1<he,Pe=H.x>0,Fe=H.y+1<he,Qe=H.y>0,Je=N.wrap-(Pe?0:1),ot=N.wrap+(ye?0:1),st=Pe?H.x-1:he-1,Pt=ye?H.x+1:0;d[0]<0?(M.push(new l.aL(J,ot,H.z,Pt,H.y)),d[1]<0&&Fe&&(M.push(new l.aL(J,re,H.z,H.x,H.y+1)),M.push(new l.aL(J,ot,H.z,Pt,H.y+1))),d[1]>0&&Qe&&(M.push(new l.aL(J,re,H.z,H.x,H.y-1)),M.push(new l.aL(J,ot,H.z,Pt,H.y-1)))):d[0]>0?(M.push(new l.aL(J,Je,H.z,st,H.y)),d[1]<0&&Fe&&(M.push(new l.aL(J,re,H.z,H.x,H.y+1)),M.push(new l.aL(J,Je,H.z,st,H.y+1))),d[1]>0&&Qe&&(M.push(new l.aL(J,re,H.z,H.x,H.y-1)),M.push(new l.aL(J,Je,H.z,st,H.y-1)))):d[1]<0&&Fe?M.push(new l.aL(J,re,H.z,H.x,H.y+1)):Qe&&M.push(new l.aL(J,re,H.z,H.x,H.y-1))}if(M.length>1){M.sort((J,re)=>J.overscaledZ-re.overscaledZ||J.wrap-re.wrap||J.canonical.z-re.canonical.z||J.canonical.x-re.canonical.x||J.canonical.y-re.canonical.y);let N=0,H=0;for(;H<M.length;)M[H].equals(M[N])?++H:M[++N]=M[H++];M.length=N+1}const R=[];for(const N of M)M.some(H=>N.isChildOf(H))||R.push(N);return M=R.filter(N=>!r.some(H=>!!(N.overscaledZ<b&&H.isChildOf(N))||N.equals(H)||N.isChildOf(H))),M}coveringTiles(r){let d=this.coveringZoomLevel(r);const b=d,M=this.elevation&&this.elevation.exaggeration(),R=M&&!r.isTerrainDEM,N="mercator"===this.projection.name;if(void 0!==r.minzoom&&d<r.minzoom)return[];void 0!==r.maxzoom&&d>r.maxzoom&&(d=r.maxzoom);const H=this.locationCoordinate(this.center),J=this.center.lat,re=1<<d,he=[re*H.x,re*H.y,0],ye="globe"===this.projection.name,Pe=!ye,Fe=l.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,Pe),Qe=ye?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Je=re*l.ax(1,this.center.lat),ot=this._camera.position[2]/l.ax(1,this.center.lat),st=[re*Qe.x,re*Qe.y,ot*(Pe?1:Je)],Pt=ye||M,Ft=this.cameraToCenterDistance/r.tileSize*(r.roundZoom?1:.502),Vt=this.isLODDisabled(!0)?d:0;let en;if(this._elevation&&r.isTerrainDEM)en=1e4*this._elevation.exaggeration();else if(this._elevation){const L=this._elevation.getMinMaxForVisibleTiles();en=L?L.max:this._centerAltitude}else en=this._centerAltitude;const tn=r.isTerrainDEM?-en:this._elevation?this._elevation.getMinElevationBelowMSL():0,yn=this.projection.isReprojectedInTileSpace?l.aN(this):1,lt=L=>{const ie=new l.Y(L.x+25e-6,L.y,L.z),Ne=new l.Y(L.x,L.y+25e-6,L.z),at=L.toLngLat(),ln=ie.toLngLat(),hn=Ne.toLngLat(),Qn=this.locationCoordinate(at),Wn=this.locationCoordinate(ln),Yi=this.locationCoordinate(hn),yr=Math.hypot(Wn.x-Qn.x,Wn.y-Qn.y),Sr=Math.hypot(Yi.x-Qn.x,Yi.y-Qn.y);return Math.sqrt(yr*Sr)*yn/25e-6},$t=L=>{const j=en,ie=tn;return{aabb:l.aQ(this,re,0,0,0,L,ie,j,this.projection),zoom:0,x:0,y:0,minZ:ie,maxZ:j,wrap:L,fullyVisible:!1}},Sn=[];let ci=[];const Dn=d,gn=r.reparseOverscaled?b:d,bi=(ot-this._centerAltitude)*Je,io=L=>{if(!this._elevation||!L.tileID||!N)return;const j=this._elevation.getMinMaxForTile(L.tileID),ie=L.aabb;j?(ie.min[2]=j.min,ie.max[2]=j.max,ie.center[2]=(ie.min[2]+ie.max[2])/2):(L.shouldSplit=te(L),L.shouldSplit||(ie.min[2]=ie.max[2]=ie.center[2]=this._centerAltitude))},ro=(L,j)=>{if(.707*j<L)return 1;const ie=j/L;return ie/(1.4144271570014144+(Math.pow(1.1,ie-1.4144271570014144+1)-1)/(1.1-1)-1)},te=L=>{if(L.zoom<Vt)return!0;if(L.zoom===Dn)return!1;if(null!=L.shouldSplit)return L.shouldSplit;const j=L.aabb.distanceX(st),ie=L.aabb.distanceY(st);let Ne=bi,at=1;if(ye){Ne=L.aabb.distanceZ(st);const Sr=Math.pow(2,L.zoom),$r=l.ay((L.y+1)/Sr),is=l.ay(L.y/Sr),tl=Math.min(Math.max(J,$r),is),Ds=l.b4(tl)/l.b4(J);if(at=tl===J?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ds/this._mercatorScaleRatio),this.zoom<=l.b1&&L.zoom===Dn-1&&Ds>=.9)return!0}else if(R&&(Ne=L.aabb.distanceZ(st)*Je),this.projection.isReprojectedInTileSpace&&b<=5){const Sr=Math.pow(2,L.zoom),$r=lt(new l.Y((L.x+.5)/Sr,(L.y+.5)/Sr));at=$r>.85?1:$r}if(!N){const Sr=Math.sqrt(j*j+ie*ie+Ne*Ne);let $r=(1<<Dn-L.zoom)*Ft*at;return $r*=ro(Math.max(Ne,bi),Sr),Sr<$r}let ln=Number.MAX_VALUE,hn=0;const Qn=L.aabb.getCorners(),Wn=[];for(const Sr of Qn){l._.sub(Wn,Sr,st),ye||(R?Wn[2]*=Je:Wn[2]=bi);const $r=l._.dot(Wn,this._camera.forward());$r<ln&&(ln=$r,hn=Math.abs(Wn[2]))}let Yi=(1<<Dn-L.zoom)*Ft*at;if(Yi*=ro(Math.max(hn,bi),ln),ln<Yi)return!0;const yr=L.aabb.closestPoint(he);return yr[0]===he[0]&&yr[1]===he[1]};if(this.renderWorldCopies)for(let L=1;L<=3;L++)Sn.push($t(-L)),Sn.push($t(L));for(Sn.push($t(0));Sn.length>0;){const L=Sn.pop(),j=L.x,ie=L.y;let Ne=L.fullyVisible;const at=()=>"globe"===this.projection.name&&(0===L.y||L.y===(1<<L.zoom)-1);if(!Ne){let ln=Pt?L.aabb.intersects(Fe):L.aabb.intersectsFlat(Fe);if(0===ln&&at()){const hn=new l.aO(L.zoom,j,ie);ln=l.aP(this,re,hn,!0).intersects(Fe)}if(0===ln)continue;Ne=2===ln}if(L.zoom!==Dn&&te(L))for(let ln=0;ln<4;ln++){const hn=(j<<1)+ln%2,Qn=(ie<<1)+(ln>>1),Wn={aabb:N?L.aabb.quadrant(ln):l.aQ(this,re,L.zoom+1,hn,Qn,L.wrap,L.minZ,L.maxZ,this.projection),zoom:L.zoom+1,x:hn,y:Qn,wrap:L.wrap,fullyVisible:Ne,tileID:void 0,shouldSplit:void 0,minZ:L.minZ,maxZ:L.maxZ};R&&!ye&&(Wn.tileID=new l.aL(L.zoom+1===Dn?gn:L.zoom+1,L.wrap,L.zoom+1,hn,Qn),io(Wn)),Sn.push(Wn)}else{const ln=L.zoom===Dn?gn:L.zoom;if(r.minzoom&&r.minzoom>ln)continue;if(!Ne){let Yi=Pt?L.aabb.intersectsPrecise(Fe):L.aabb.intersectsPreciseFlat(Fe);if(0===Yi&&at()){const yr=new l.aO(L.zoom,j,ie);Yi=l.aP(this,re,yr,!0).intersectsPrecise(Fe)}if(0===Yi)continue}const hn=he[0]-(.5+j+(L.wrap<<L.zoom))*(1<<d-L.zoom),Qn=he[1]-.5-ie,Wn=L.tileID?L.tileID:new l.aL(ln,L.wrap,L.zoom,j,ie);ci.push({tileID:Wn,distanceSq:hn*hn+Qn*Qn})}}if(this.fogCullDistSq){const L=this.fogCullDistSq,j=this.horizonLineFromTop();ci=ci.filter(ie=>{const Ne=[0,0,0,1],at=[l.a3,l.a3,0,1],ln=this.calculateFogTileMatrix(ie.tileID.toUnwrapped());l.aA.transformMat4(Ne,Ne,ln),l.aA.transformMat4(at,at,ln);const hn=l.aA.min([],Ne,at),Qn=l.aA.max([],Ne,at),Wn=l.aR(hn,Qn);if(0===Wn)return!0;let Yi=!1;const yr=this._elevation;if(yr&&Wn>L&&0!==j){const Sr=this.calculateProjMatrix(ie.tileID.toUnwrapped());let $r;r.isTerrainDEM||($r=yr.getMinMaxForTile(ie.tileID)),$r||($r={min:tn,max:en});const is=l.b2(this.rotation),tl=[is[0]*l.a3,is[1]*l.a3,$r.max];l._.transformMat4(tl,tl,Sr),Yi=(1-tl[1])*this.height*.5<j}return Wn<L||Yi})}return ci.sort((L,j)=>L.distanceSq-j.distanceSq).map(L=>L.tileID)}resize(r,d){this.width=r,this.height=d,this.pixelsToGLUnits=[2/r,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const d=l.at(r.lat,-l.aS,l.aS),b=this.projection.project(r.lng,d);return new l.P(b.x*this.worldSize,b.y*this.worldSize)}unproject(r){return this.projection.unproject(r.x/this.worldSize,r.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/l.ax(1,this.center.lat)/this.worldSize}setLocationAtPoint(r,d){let b,M;const R=this.centerPoint;if("globe"===this.projection.name){const H=this.worldSize;b=(d.x-R.x)/H,M=(d.y-R.y)/H}else{const H=this.pointCoordinate(d),J=this.pointCoordinate(R);b=H.x-J.x,M=H.y-J.y}const N=this.locationCoordinate(r);this.setLocation(new l.Y(N.x-b,N.y-M))}setLocation(r){this.center=this.coordinateLocation(r),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(r){return this.projection.locationPoint(this,r)}locationPoint3D(r){return this.projection.locationPoint(this,r,!0)}pointLocation(r){return this.coordinateLocation(this.pointCoordinate(r))}pointLocation3D(r){return this.coordinateLocation(this.pointCoordinate3D(r))}locationCoordinate(r,d){const b=d?l.ax(d,r.lat):void 0,M=this.projection.project(r.lng,r.lat);return new l.Y(M.x,M.y,b)}coordinateLocation(r){return this.projection.unproject(r.x,r.y)}pointRayIntersection(r,d){const b=null!=d?d:this._centerAltitude,M=[r.x,r.y,0,1],R=[r.x,r.y,1,1];l.aA.transformMat4(M,M,this.pixelMatrixInverse),l.aA.transformMat4(R,R,this.pixelMatrixInverse);const N=R[3];l.aA.scale(M,M,1/M[3]),l.aA.scale(R,R,1/N);const H=M[2],J=R[2];return{p0:M,p1:R,t:H===J?0:(b-H)/(J-H)}}screenPointToMercatorRay(r){const d=[r.x,r.y,0,1],b=[r.x,r.y,1,1];return l.aA.transformMat4(d,d,this.pixelMatrixInverse),l.aA.transformMat4(b,b,this.pixelMatrixInverse),l.aA.scale(d,d,1/d[3]),l.aA.scale(b,b,1/b[3]),d[2]=l.ax(d[2],this._center.lat)*this.worldSize,b[2]=l.ax(b[2],this._center.lat)*this.worldSize,l.aA.scale(d,d,1/this.worldSize),l.aA.scale(b,b,1/this.worldSize),new l.aT([d[0],d[1],d[2]],l._.normalize([],l._.sub([],b,d)))}rayIntersectionCoordinate(r){const{p0:d,p1:b,t:M}=r,R=l.ax(d[2],this._center.lat),N=l.ax(b[2],this._center.lat);return new l.Y(l.a2(d[0],b[0],M)/this.worldSize,l.a2(d[1],b[1],M)/this.worldSize,l.a2(R,N,M))}pointCoordinate(r,d=this._centerAltitude){return this.projection.pointCoordinate(this,r.x,r.y,d)}pointCoordinate3D(r){if(!this.elevation)return this.pointCoordinate(r);let d=this.projection.pointCoordinate3D(this,r.x,r.y);if(d)return new l.Y(d[0],d[1],d[2]);let b=0,M=this.horizonLineFromTop();if(r.y>M)return this.pointCoordinate(r);const R=.02*M,N=r.clone();for(let H=0;H<10&&M-b>R;H++){N.y=l.a2(b,M,.66);const J=this.projection.pointCoordinate3D(this,N.x,N.y);J?(M=N.y,d=J):b=N.y}return d?new l.Y(d[0],d[1],d[2]):this.pointCoordinate(r)}isPointAboveHorizon(r){return this.projection.isPointAboveHorizon(this,r)}isPointOnSurface(r){if(r.y<0||r.y>this.height||r.x<0||r.x>this.width)return!1;if(this.elevation||this.zoom>=l.aU)return!this.isPointAboveHorizon(r);const d=this.pointCoordinate(r);return d.y>=0&&d.y<=1}_coordinatePoint(r,d){const b=d&&this.elevation?this.elevation.getAtPointOrZero(r,this._centerAltitude):this._centerAltitude,M=[r.x*this.worldSize,r.y*this.worldSize,b+r.toAltitude(),1];return l.aA.transformMat4(M,M,this.pixelMatrix),M[3]>0?new l.P(M[0]/M[3],M[1]/M[3]):new l.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:r,left:d}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,R=this.pointLocation3D(new l.P(d,r)),N=this.pointLocation3D(new l.P(M,r)),H=this.pointLocation3D(new l.P(M,b)),J=this.pointLocation3D(new l.P(d,b));let re=Math.min(R.lng,N.lng,H.lng,J.lng),he=Math.max(R.lng,N.lng,H.lng,J.lng),ye=Math.min(R.lat,N.lat,H.lat,J.lat),Pe=Math.max(R.lat,N.lat,H.lat,J.lat);const Fe=Math.pow(2,-this.zoom)/16*270,Qe="globe"===this.projection.name?1:4,Je=(ot,st,Pt,Ft,Vt)=>{const en=(ot+Pt)/2,tn=(st+Ft)/2,yn=new l.P(en,tn),{lng:lt,lat:$t}=this.pointLocation3D(yn),Sn=Math.max(0,re-lt,ye-$t,lt-he,$t-Pe);re=Math.min(re,lt),he=Math.max(he,lt),ye=Math.min(ye,$t),Pe=Math.max(Pe,$t),(Vt<Qe||Sn>Fe)&&(Je(ot,st,en,tn,Vt+1),Je(en,tn,Pt,Ft,Vt+1))};if(Je(d,r,M,r,1),Je(M,r,M,b,1),Je(M,b,d,b,1),Je(d,b,d,r,1),"globe"===this.projection.name){const[ot,st]=l.aV(this);ot?(Pe=90,he=180,re=-180):st&&(ye=-90,he=180,re=-180)}return new l.ai(new l.aI(re,ye),new l.aI(he,Pe))}_getBoundsRectangular(r,d){const{top:b,left:M}=this._edgeInsets,R=this.height-this._edgeInsets.bottom,N=this.width-this._edgeInsets.right,H=new l.P(M,b),J=new l.P(N,b),re=new l.P(N,R),he=new l.P(M,R);let ye=this.pointCoordinate(H,r),Pe=this.pointCoordinate(J,r);const Fe=this.pointCoordinate(re,d),Qe=this.pointCoordinate(he,d),Je=(ot,st)=>(st.y-ot.y)/(st.x-ot.x);return ye.y>1&&Pe.y>=0?ye=new l.Y((1-Qe.y)/Je(Qe,ye)+Qe.x,1):ye.y<0&&Pe.y<=1&&(ye=new l.Y(-Qe.y/Je(Qe,ye)+Qe.x,0)),Pe.y>1&&ye.y>=0?Pe=new l.Y((1-Fe.y)/Je(Fe,Pe)+Fe.x,1):Pe.y<0&&ye.y<=1&&(Pe=new l.Y(-Fe.y/Je(Fe,Pe)+Fe.x,0)),(new l.ai).extend(this.coordinateLocation(ye)).extend(this.coordinateLocation(Pe)).extend(this.coordinateLocation(Qe)).extend(this.coordinateLocation(Fe))}_getBoundsRectangularTerrain(){const r=this.elevation;if(!r.visibleDemTiles.length||r.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=r.visibleDemTiles.reduce((b,M)=>{if(M.dem){const R=M.dem.tree;b.min=Math.min(b.min,R.minimums[0]),b.max=Math.max(b.max,R.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*r.exaggeration(),d.max*r.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(r=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,b=this.height/2-d*(1-this._horizonShift);return r?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(r){this.maxBounds=r,this.minLat=-l.aS,this.maxLat=l.aS,this.minLng=-180,this.maxLng=180,r&&(this.minLat=r.getSouth(),this.maxLat=r.getNorth(),this.minLng=r.getWest(),this.maxLng=r.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=l.aj(this.minLng)*this.tileSize,this.worldMaxX=l.aj(this.maxLng)*this.tileSize,this.worldMinY=l.ak(this.maxLat)*this.tileSize,this.worldMaxY=l.ak(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(r,d){return this.projection.createTileMatrix(this,d,r)}calculateDistanceTileData(r){const d=r.key,b=this._distanceTileDataCache;if(b[d])return b[d];const M=r.canonical,R=1/this.height,N=this.cameraWorldSize,H=N/this.zoomScale(M.z),J=(M.x+Math.pow(2,M.z)*r.wrap)*H,re=M.y*H,he=this.point;he.x*=N/this.worldSize,he.y*=N/this.worldSize;const ye=this.angle,Pe=Math.sin(-ye),Fe=-Math.cos(-ye);return b[d]={bearing:[Pe,Fe],center:[(he.x-J)*R,(he.y-re)*R],scale:H/l.a3*R},b[d]}calculateFogTileMatrix(r){const d=r.key,b=this._fogTileMatrixCache;if(b[d])return b[d];const M=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,r);return l.ad.multiply(M,this.worldToFogMatrix,M),b[d]=new Float32Array(M),b[d]}calculateProjMatrix(r,d=!1,b=!1){const M=r.key;let R;if(R=b?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,R[M])return R[M];const N=this.calculatePosMatrix(r,this.worldSize);let H;return H=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:b?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,l.ad.multiply(N,H,N),R[M]=new Float32Array(N),R[M]}calculatePixelsToTileUnitsMatrix(r){const d=r.tileID.key,b=this._pixelsToTileUnitsCache;if(b[d])return b[d];const M=l.aW(r,this);return b[d]=M,b[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const r=1/this.worldSize,d=l.ad.fromScaling([],[r,r,r]);return l.ad.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const r=this._elevation;this._updateCameraState();const d=l.ax(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(d),M=this._camera.forward(),R=l.ax(1,this._center.lat);b[2]/=R,M[2]/=R,l._.normalize(M,M);const N=r.raycast(b,M,r.exaggeration());if(N){const H=l._.scaleAndAdd([],b,M,N),J=new l.Y(H[0],H[1],l.ax(H[2],l.ay(H[1]))),re=(J.z+l._.length([J.x-b[0],J.y-b[1],J.z-b[2]*R]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(re),this._centerAltitude=J.toAltitude(),this._center=this.coordinateLocation(J),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(r=!1){if(!this._elevation)return;const d=this._elevation,b=l.ax(1,this._center.lat)*this.worldSize,M=this._computeCameraPosition(b),R=d.getAtPointOrZero(new l.Y(...M)),N=this.pixelsPerMeter/this.worldSize*R,H=this._minimumHeightOverTerrain(),J=M[2]-N;if(J<=H)if(J<0||r){const re=this.locationCoordinate(this._center,this._centerAltitude),he=[M[0],M[1],re.z-M[2]],ye=l._.length(he);he[2]-=(H-J)/this._pixelsPerMercatorPixel;const Pe=l._.length(he);if(0===Pe)return;l._.scale(he,he,ye/Pe*this._pixelsPerMercatorPixel),this._camera.position=[M[0],M[1],re.z*this._pixelsPerMercatorPixel-he[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||r){const Pe=this.center;return Pe.lat=l.at(Pe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!r)&&(Pe.lng=l.at(Pe.lng,this.minLng,this.maxLng)),this.center=Pe,void(this._constraining=!1)}const d=this._unmodified,{x:b,y:M}=this.point;let R=0,N=b,H=M;const J=this.width/2,re=this.height/2,he=this.worldMinY*this.scale,ye=this.worldMaxY*this.scale;if(M-re<he&&(H=he+re),M+re>ye&&(H=ye-re),ye-he<this.height&&(R=Math.max(R,this.height/(ye-he)),H=(ye+he)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Pe=this.worldMinX*this.scale,Fe=this.worldMaxX*this.scale,Qe=this.worldSize/2-(Pe+Fe)/2;N=(b+Qe+this.worldSize)%this.worldSize-Qe,N-J<Pe&&(N=Pe+J),N+J>Fe&&(N=Fe-J),Fe-Pe<this.width&&(R=Math.max(R,this.width/(Fe-Pe)),N=(Fe+Pe)/2)}N===b&&H===M||(this.center=this.unproject(new l.P(N,H))),R&&(this.zoom+=this.scaleZoom(R)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let r=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(r=Math.max(r,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),r}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,d="globe"===this.projection.name,b=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=l.ax(1,this.center.lat)/l.ax(1,l.b3));const M=l.aX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,M),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const R="meters"===this.projection.zAxisUnit?b:1,N=this._camera.getWorldToCamera(this.worldSize,R);let H;const J=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(J[8]=2*-r.x/this.width,J[9]=2*r.y/this.height,this.isOrthographic){let $t=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Sn=$t*this.aspect,ci=-Sn,Dn=-$t;Sn-=r.x,ci-=r.x,$t+=r.y,Dn+=r.y,H=this._camera.getCameraToClipOrthographic(ci,Sn,Dn,$t,this._nearZ,this._farZ),((gn,bi,io,ro)=>{for(let te=0;te<16;te++)gn[te]=aa(bi[te],io[te],ro)})(H,H,J,Hc(this.pitch>=15?1:this.pitch/15))}else H=J;const re=l.ad.mul([],J,N);let he=l.ad.mul([],H,N);if(this.projection.isReprojectedInTileSpace){const $t=this.locationCoordinate(this.center),Sn=l.ad.identity([]);l.ad.translate(Sn,Sn,[$t.x*this.worldSize,$t.y*this.worldSize,0]),l.ad.multiply(Sn,Sn,l.aY(this)),l.ad.translate(Sn,Sn,[-$t.x*this.worldSize,-$t.y*this.worldSize,0]),l.ad.multiply(he,he,Sn),l.ad.multiply(re,re,Sn),this.inverseAdjustmentMatrix=l.aZ(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=l.ad.scale([],he,[this.worldSize,this.worldSize,this.worldSize/R,1]),this.projMatrix=he,this.invProjMatrix=l.ad.invert(new Float64Array(16),this.projMatrix),d){const $t=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);$t[8]=2*-r.x/this.width,$t[9]=2*r.y/this.height,this.expandedFarZProjMatrix=l.ad.mul([],$t,N)}else this.expandedFarZProjMatrix=this.projMatrix;const ye=l.ad.invert([],H);this.frustumCorners=l.a_.fromInvProjectionMatrix(ye,this.horizonLineFromTop(),this.height),this.cameraFrustum=l.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const Pe=new Float32Array(16);l.ad.identity(Pe),l.ad.scale(Pe,Pe,[1,-1,1]),l.ad.rotateX(Pe,Pe,this._pitch),l.ad.rotateZ(Pe,Pe,this.angle);const Fe=l.ad.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=l.ad.clone(Fe);const Qe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Fe[8]=2*-r.x/this.width,Fe[9]=2*(r.y+Qe)/this.height,this.skyboxMatrix=l.ad.multiply(Pe,Fe,Pe);const Je=this.point,ot=Je.x,st=Je.y,Pt=this.width%2/2,Ft=this.height%2/2,Vt=Math.cos(this.angle),en=Math.sin(this.angle),tn=ot-Math.round(ot)+Vt*Pt+en*Ft,yn=st-Math.round(st)+Vt*Ft+en*Pt,lt=new Float64Array(he);if(l.ad.translate(lt,lt,[tn>.5?tn-1:tn,yn>.5?yn-1:yn,0]),this.alignedProjMatrix=lt,he=l.ad.create(),l.ad.scale(he,he,[this.width/2,-this.height/2,1]),l.ad.translate(he,he,[1,-1,0]),this.labelPlaneMatrix=he,he=l.ad.create(),l.ad.scale(he,he,[1,-1,1]),l.ad.translate(he,he,[-1,-1,0]),l.ad.scale(he,he,[2/this.width,2/this.height,1]),this.glCoordMatrix=he,this.pixelMatrix=l.ad.multiply(new Float64Array(16),this.labelPlaneMatrix,re),this._calcFogMatrices(),this._distanceTileDataCache={},he=l.ad.invert(new Float64Array(16),this.pixelMatrix),!he)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=he,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=l.a$(this);const $t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=l._.transformMat4($t,$t,N),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=he;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const r=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,b=this._camera.position,M=1/this.height/this._pixelsPerMercatorPixel,R=[r,r,d];l._.scale(R,R,M),l._.scale(b,b,-1),l._.multiply(b,b,R);const N=l.ad.create();l.ad.translate(N,N,b),l.ad.scale(N,N,R),this.mercatorFogMatrix=N,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(r,d,M)}_computeCameraPosition(r){const d=(r=r||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),M=this.point,R=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-r/this.worldSize*this._centerAltitude;return[M.x/this.worldSize-b[0]*R,M.y/this.worldSize-b[1]*R,r/this.worldSize*this._centerAltitude-b[2]*R]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(r){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=this._camera.position[2],M=r[2];let R=1;this.projection.wrap&&(this.center=this.center.wrap()),M>0&&(R=Math.min((d-b)/M,1)),this._camera.position=l._.scaleAndAdd([],this._camera.position,r,R),this._updateStateFromCamera()}_updateStateFromCamera(){const r=this._camera.position,d=this._camera.forward(),{pitch:b,bearing:M}=this._camera.getPitchBearing(),R=l.ax(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,N=this._mercatorZfromZoom(this._maxZoom)*Math.cos(l.ab(this._maxPitch)),H=Math.max((r[2]-R)/Math.cos(b),N),J=this._zoomFromMercatorZ(H);l._.scaleAndAdd(r,r,d,H),this._pitch=l.at(b,l.ab(this.minPitch),l.ab(this.maxPitch)),this.angle=l.au(M,-Math.PI,Math.PI),this._setZoom(l.at(J,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new l.Y(r[0],r[1],r[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(r){return Math.pow(2,r)*this.tileSize}_mercatorZfromZoom(r){return this.cameraToCenterDistance/this._worldSizeFromZoom(r)}_minimumHeightOverTerrain(){const r=Math.min(null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(r)}_zoomFromMercatorZ(r){return this.scaleZoom(this.cameraToCenterDistance/(r*this.tileSize))}zoomFromMercatorZAdjusted(r){let d=0,b=l.aU,M=0,R=1/0;for(;b-d>1e-6&&b>d;){const N=d+.5*(b-d),H=this.tileSize*Math.pow(2,N),J=this.getCameraToCenterDistance(this.projection,N,H),re=this.scaleZoom(J/(r*this.tileSize)),he=Math.abs(N-re);he<R&&(R=he,M=N),N<re?d=N:b=N}return M}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(l.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(r,d){const b=Math.min(r.x,d.x),M=Math.max(r.x,d.x),R=Math.min(r.y,d.y),N=Math.max(r.y,d.y);if(R<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const H=[new l.P(b,R),new l.P(M,N),new l.P(b,N),new l.P(M,R)],J=this.renderWorldCopies?-3:0,re=this.renderWorldCopies?4:1;for(const he of H){const ye=this.pointRayIntersection(he);if(ye.t<0)return!0;const Pe=this.rayIntersectionCoordinate(ye);if(Pe.x<J||Pe.y<0||Pe.x>re||Pe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+l.b0(this.fovAboveCenter)>88||this.anyCornerOffEdge(new l.P(0,0),new l.P(this.width,this.height))}zoomDeltaToMovement(r,d){const b=l._.length(l._.sub([],this._camera.position,r)),M=this._zoomFromMercatorZ(b)+d;return b-this._mercatorZfromZoom(M)}getCameraPoint(){if("globe"===this.projection.name){const r=function([d,b,M],R){const N=[d,b,M,1];l.aA.transformMat4(N,N,R);const H=N[3]=Math.max(N[3],1e-6);return N[0]/=H,N[1]/=H,N[2]/=H,N}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new l.P(r[0],r[1])}{const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,r))}}getCameraToCenterDistance(r,d=this.zoom,b=this.worldSize){const M=l.aX(r,d,this.width,this.height,1024),R=r.pixelSpaceConversion(this.center.lat,b,M);let N=.5/Math.tan(.5*this._fov)*this.height*R;return this.isOrthographic&&(N=aa(1,N,Hc(this.pitch>=15?1:this.pitch/15))),N}getWorldToCameraMatrix(){const r=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&l.ad.multiply(r,r,this.globeMatrix),r}getFrustum(r){return l.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,"meters"===this.projection.zAxisUnit)}}const Ms={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11},Bc=(v,r)=>{if(r>0&&v.terrain&&l.w("Cutoff is currently disabled on terrain"),r<=0||v.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=v.transform,b=Math.max(Math.abs(d._zoom-(v.minCutoffZoom-1)),1),M=d.isLODDisabled(!1)?l.$(60,45,d.pitch):l.$(30,15,d.pitch),R=d._farZ-d._nearZ,N=r*d.height,H=((1-(J=M))*d.cameraToCenterDistance+J*(d._farZ+N))*b;var J;return{shouldRenderCutoff:M<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(H-d._nearZ)/R,(H-N-d._nearZ)/R]}}},ha={cascadeCount:2,shadowMapResolution:2048};class Sc{constructor(r,d){this.aabb=r,this.lastCascade=d}}class Wu{add(r,d){const b=this.receivers[r.key];void 0!==b?(b.aabb.min[0]=Math.min(b.aabb.min[0],d.min[0]),b.aabb.min[1]=Math.min(b.aabb.min[1],d.min[1]),b.aabb.min[2]=Math.min(b.aabb.min[2],d.min[2]),b.aabb.max[0]=Math.max(b.aabb.max[0],d.max[0]),b.aabb.max[1]=Math.max(b.aabb.max[1],d.max[1]),b.aabb.max[2]=Math.max(b.aabb.max[2],d.max[2])):this.receivers[r.key]=new Sc(d,null)}clear(){this.receivers={}}get(r){return this.receivers[r.key]}computeRequiredCascades(r,d,b){const M=l.b6.fromPoints(r.points);let R=0;for(const N in this.receivers){const H=this.receivers[N];if(!H||!M.intersectsAabb(H.aabb))continue;H.aabb.min=M.closestPoint(H.aabb.min),H.aabb.max=M.closestPoint(H.aabb.max);const J=H.aabb.getCorners();for(let re=0;re<b.length;re++){let he=!0;for(const ye of J){const Pe=[ye[0]*d,ye[1]*d,ye[2]];if(l._.transformMat4(Pe,Pe,b[re].matrix),Pe[0]<-1||Pe[0]>1||Pe[1]<-1||Pe[1]>1){he=!1;break}}if(H.lastCascade=re,R=Math.max(R,re),he)break}}return R+1}}class za{constructor(r){this.painter=r,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Wu,this._depthMode=new l.ae(r.context.gl.LEQUAL,l.ae.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,r.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),r.tp.registerParameter(ha,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),r.tp.registerParameter(ha,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),r.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const r of this._cascades)r.texture.destroy(),r.framebuffer.destroy();this._cascades=[]}updateShadowParameters(r,d){const b=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const M=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||M<=0||(this._shadowLayerCount=b.style.order.reduce((Qe,Je)=>{const ot=b.style._mergedLayers[Je];return Qe+(ot.hasShadowPass()&&!ot.isHidden(r.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const R=b.context,N=ha.shadowMapResolution,H=ha.shadowMapResolution;if(0===this._cascades.length||ha.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Qe=0;Qe<ha.cascadeCount;++Qe){const Je=b._shadowMapDebug,ot=R.gl,st=R.createFramebuffer(N,H,Je,"texture"),Pt=new l.T(R,{width:N,height:H,data:null},ot.DEPTH_COMPONENT);if(st.depthAttachment.set(Pt.texture),Je){const Ft=new l.T(R,{width:N,height:H,data:null},ot.RGBA);st.colorAttachment.set(Ft.texture)}this._cascades.push({framebuffer:st,texture:Pt,matrix:[],far:0,boundingSphereRadius:0,frustum:new l.aM,scale:0})}}this.shadowDirection=gl(d);let J=0;if(r.elevation){const Qe=r.elevation,Je=[1e4,-1e4];Qe.visibleDemTiles.filter(ot=>ot.dem).forEach(ot=>{const st=ot.dem.tree;Je[0]=Math.min(Je[0],st.minimums[0]),Je[1]=Math.max(Je[1],st.maximums[0])}),1e4!==Je[0]&&(J=(Je[1]-Je[0])*Qe.exaggeration())}const re=1.5*r.cameraToCenterDistance,he=3*re,ye=new Float64Array(16);for(let Qe=0;Qe<this._cascades.length;++Qe){const Je=this._cascades[Qe];let ot=r.height/50,st=1;1===ha.cascadeCount?st=he:0===Qe?st=re:(ot=re,st=he);const[Pt,Ft]=kd(r,this.shadowDirection,ot,st,ha.shadowMapResolution,J);Je.scale=r.scale,Je.matrix=Pt,Je.boundingSphereRadius=Ft,l.ad.invert(ye,Je.matrix),Je.frustum=l.aM.fromInvProjectionMatrix(ye,1,0,!0),Je.far=st}const Pe=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[Pe].far,this._cascades[Pe].far],this._uniformValues.u_shadow_intensity=M,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/ha.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=ha.shadowMapResolution,this._uniformValues.u_shadowmap_0=Ms.ShadowMap0,this._uniformValues.u_shadowmap_1=Ms.ShadowMap0+1,this._groundShadowTiles=b.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Fe=b.transform.elevation;for(const Qe of this._groundShadowTiles){let Je={min:0,max:0};if(Fe){const ot=Fe.getMinMaxForTile(Qe);ot&&(Je=ot)}this.addShadowReceiver(Qe.toUnwrapped(),Je.min,Je.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(r){this._enabled=r}drawShadowPass(r,d){if(!this.enabled)return;const b=this.painter,M=b.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(b.transform.getFrustum(0),b.transform.worldSize,this._cascades),M.viewport.set([0,0,ha.shadowMapResolution,ha.shadowMapResolution]);for(let R=0;R<this._numCascadesToRender;++R){b.currentShadowCascade=R,M.bindFramebuffer.set(this._cascades[R].framebuffer.framebuffer),M.clear({color:l.C.white,depth:1});for(const N of r.order){const H=r._mergedLayers[N];if(!H.hasShadowPass()||H.isHidden(b.transform.zoom))continue;const J=r.getLayerSourceCache(H),re=J?d[J.id]:void 0;("model"===H.type||re&&re.length)&&b.renderLayer(b,J,H,re)}}b.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const r=this.painter,d=r.style,b=r.context,M=d.directionalLight,R=d.ambientLight;if(!M||!R)return;const N=[],H=Bc(r,r.longestCutoffRange);H.shouldRenderCutoff&&N.push("RENDER_CUTOFF");const J=hl(d,M,R),re=new l.ae(b.gl.LEQUAL,l.ae.ReadOnly,r.depthRangeFor3D);for(const he of this._groundShadowTiles){const ye=he.toUnwrapped(),Pe=r.isTileAffectedByFog(he),Fe=r.getOrCreateProgram("groundShadow",{defines:N,overrideFog:Pe});this.setupShadows(ye,Fe),r.uploadCommonUniforms(b,Fe,ye,null,H);const Qe={u_matrix:r.transform.calculateProjMatrix(ye),u_ground_shadow_factor:J};Fe.draw(r,b.gl.TRIANGLES,re,l.ag.disabled,l.a.multiply,l.af.disabled,Qe,"ground_shadow",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments,{},r.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?l.a.unblended:l.a.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(r){const d=this.painter.transform,b=d.calculatePosMatrix(r,d.worldSize);return l.ad.multiply(b,this._cascades[this.painter.currentShadowCascade].matrix,b),Float32Array.from(b)}calculateShadowPassMatrixFromMatrix(r){return l.ad.multiply(r,this._cascades[this.painter.currentShadowCascade].matrix,r),Float32Array.from(r)}setupShadows(r,d,b,M=0){if(!this.enabled)return;const R=this.painter.transform,N=this.painter.context,H=N.gl,J=this._uniformValues,re=new Float64Array(16),he=R.calculatePosMatrix(r,R.worldSize);for(let ye=0;ye<this._cascades.length;ye++)l.ad.multiply(re,this._cascades[ye].matrix,he),J[0===ye?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(re),N.activeTexture.set(H.TEXTURE0+Ms.ShadowMap0+ye),this._cascades[ye].texture.bind(H.NEAREST,H.CLAMP_TO_EDGE);if(this.useNormalOffset=!!b,this.useNormalOffset){const ye=l.b5(r.canonical),Pe=2/R.tileSize*l.a3/ha.shadowMapResolution,Fe=Pe*this._cascades[0].boundingSphereRadius,Qe=Pe*this._cascades[this._cascades.length-1].boundingSphereRadius,Je=("vector-tile"===b?1:3)/Math.pow(2,M-r.canonical.z-(1-R.zoom+Math.floor(R.zoom)));J.u_shadow_normal_offset=[ye,Fe*Je,Qe*Je],J.u_shadow_bias=[6e-5,.0012,.012]}else J.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(N,J)}setupShadowsFromMatrix(r,d,b=!1){if(!this.enabled)return;const M=this.painter.context,R=M.gl,N=this._uniformValues,H=new Float64Array(16);for(let J=0;J<ha.cascadeCount;J++)l.ad.multiply(H,this._cascades[J].matrix,r),N[0===J?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(H),M.activeTexture.set(R.TEXTURE0+Ms.ShadowMap0+J),this._cascades[J].texture.bind(R.NEAREST,R.CLAMP_TO_EDGE);this.useNormalOffset=b,b?(N.u_shadow_normal_offset=[1,5,5],N.u_shadow_bias=[6e-5,.0012,.012]):N.u_shadow_bias=[36e-5,.0012,.012],d.setShadowUniformValues(M,N)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(r,d,b,M){if(M[2]>=0)return{};const R=function(J,re,he){const ye=he/(1<<J.canonical.z);return new l.b6([J.canonical.x*ye+J.wrap*he,J.canonical.y*ye+J.wrap*he,0],[(J.canonical.x+1)*ye+J.wrap*he,(J.canonical.y+1)*ye+J.wrap*he,re])}(r,d,b).getCorners(),N=d/-M[2];M[0]<0?(l._.add(R[0],R[0],[M[0]*N,0,0]),l._.add(R[3],R[3],[M[0]*N,0,0])):M[0]>0&&(l._.add(R[1],R[1],[M[0]*N,0,0]),l._.add(R[2],R[2],[M[0]*N,0,0])),M[1]<0?(l._.add(R[0],R[0],[0,M[1]*N,0]),l._.add(R[1],R[1],[0,M[1]*N,0])):M[1]>0&&(l._.add(R[2],R[2],[0,M[1]*N,0]),l._.add(R[3],R[3],[0,M[1]*N,0]));const H={};return H.vertices=R,H.planes=[Va(R[1],R[0],R[4]),Va(R[2],R[1],R[5]),Va(R[3],R[2],R[6]),Va(R[0],R[3],R[7])],H}addShadowReceiver(r,d,b){this._receivers.add(r,l.b6.fromTileIdAndHeight(r,d,b))}getMaxCascadeForTile(r){const d=this._receivers.get(r);return d&&d.lastCascade?d.lastCascade:0}}function Va(v,r,d){const b=l._.sub([],d,r),M=l._.sub([],v,r),R=l._.cross([],b,M),N=l._.length(R);return 0===N?[0,0,1,0]:(l._.scale(R,R,1/N),[R[0],R[1],R[2],-l._.dot(R,r)])}function gl(v){const r=v.properties.get("direction"),d=l.ac(r.x,r.y,r.z);d[2]=l.at(d[2],0,75);const b=l.b7([d[0],d[1],d[2]]);return l._.fromValues(b.x,b.y,b.z)}function hl(v,r,d){const b=r.properties.get("color"),M=r.properties.get("intensity"),R=r.properties.get("direction"),N=[R.x,R.y,R.z],H=d.properties.get("color"),J=d.properties.get("intensity"),re=Math.max(l._.dot([0,0,1],N),0),he=[0,0,0];l._.scale(he,H.toRenderColor(v.getLut(r.scope)).toArray01Linear().slice(0,3),J);const ye=[0,0,0];return l._.scale(ye,b.toRenderColor(v.getLut(d.scope)).toArray01Linear().slice(0,3),re*M),l.b8([he[0]>0?he[0]/(he[0]+ye[0]):0,he[1]>0?he[1]/(he[1]+ye[1]):0,he[2]>0?he[2]/(he[2]+ye[2]):0])}function kd(v,r,d,b,M,R){const N=v.zoom,H=v.scale,J=v.worldSize,re=1/J,he=v.aspect,ye=Math.sqrt(1+he*he)*Math.tan(.5*v.fovX),Pe=ye*ye,Fe=b-d,Qe=b+d;let Je,ot;Pe>Fe/Qe?(Je=b,ot=b*ye):(Je=.5*Qe*(1+Pe),ot=.5*Math.sqrt(Fe*Fe+2*(b*b+d*d)*Pe+Qe*Qe*Pe*Pe));const st=v.projection.pixelsPerMeter(v.center.lat,J),Pt=v._camera.getCameraToWorldMercator(),Ft=[0,0,-Je*re];l._.transformMat4(Ft,Ft,Pt);let Vt=ot*re;const en=v._edgeInsets;if(!(0===en.left&&0===en.top&&0===en.right&&0===en.bottom||en.left===en.right&&en.top===en.bottom)){const Ne=v._camera.getWorldToCamera(v.worldSize,"meters"===v.projection.zAxisUnit?st:1),at=v._camera.getCameraToClipPerspective(v._fov,v.width/v.height,d,b);at[8]=2*-v.centerOffset.x/v.width,at[9]=2*v.centerOffset.y/v.height;const ln=new Float64Array(16);l.ad.mul(ln,at,Ne);const hn=new Float64Array(16);l.ad.invert(hn,ln);const Qn=l.aM.fromInvProjectionMatrix(hn,J,N,!0);for(const Wn of Qn.points){const Yi=((tn=Wn)[0]/=H,tn[1]/=H,tn[2]=l.ax(tn[2],v._center.lat),tn);Vt=Math.max(Vt,l._.len(l._.subtract([],Ft,Yi)))}}var tn;Vt*=M/(M-1);const yn=Math.acos(r[2]),lt=Math.atan2(-r[0],-r[1]),$t=new Dt;$t.position=Ft,$t.setPitchBearing(yn,lt);const Sn=$t.getWorldToCamera(J,st),ci=Vt*J,Dn=Math.min(v._mercatorZfromZoom(17)*J*-2,-2*ci),gn=$t.getCameraToClipOrthographic(-ci,ci,-ci,ci,Dn,(ci+R*st)/r[2]),bi=new Float64Array(16);l.ad.multiply(bi,gn,Sn);const io=l._.fromValues(Math.floor(1e6*Ft[0])/1e6*J,Math.floor(1e6*Ft[1])/1e6*J,0),ro=.5*M,te=[0,0,0];l._.transformMat4(te,io,bi),l._.scale(te,te,ro);const L=[Math.floor(te[0]),Math.floor(te[1]),Math.floor(te[2])],j=[0,0,0];l._.sub(j,te,L),l._.scale(j,j,-1/ro);const ie=new Float64Array(16);return l.ad.identity(ie),l.ad.translate(ie,ie,j),l.ad.multiply(bi,ie,bi),[bi,ci]}function cu(v,r){return null!=v&&null!=r&&!(!v.hasData()||!r.hasData())&&null!=v.demTexture&&null!=r.demTexture&&v.tileID.key!==r.tileID.key}const Re=new class{constructor(){this.operations={}}newMorphing(v,r,d,b,M){if(v in this.operations){const R=this.operations[v];R.to.tileID.key!==d.tileID.key&&(R.queued=d)}else this.operations[v]={startTime:b,phase:0,duration:M,from:r,to:d,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const r=this.operations[v];return{from:r.from,to:r.to,phase:r.phase}}update(v){for(const r in this.operations){const d=this.operations[r];for(d.phase=(v-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,v)){delete this.operations[r];break}}}_nextOp(v,r){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=r,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},We={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Tt(v,r,d){if(0===r)return 0;const b=r<1&&514===d?.25/r:1;return 6*Math.pow(1.5,22-v)*Math.max(r,1)*b}function an(v,r){const d=1<<v.z;return!r&&(0===v.x||v.x===d-1)||0===v.y||v.y===d-1}const $n=v=>({u_matrix:v});function Un(v,r,d,b,M){if(M>0){const R=l.e.now(),N=(R-v.timeAdded)/M,H=r?(R-r.timeAdded)/M:-1,J=d.getSource(),re=b.coveringZoomLevel({tileSize:J.tileSize,roundZoom:J.roundZoom}),he=!r||Math.abs(r.tileID.overscaledZ-re)>Math.abs(v.tileID.overscaledZ-re),ye=he&&v.refreshedUponExpiration?1:l.at(he?N:1-H,0,1);return v.refreshedUponExpiration&&N>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ye}:{opacity:ye,mix:0}}return{opacity:1,mix:0}}class Ai extends yu{constructor(r,d,b,M){super(r,d,b,M),this.type="raster-array",this.maxzoom=22,this._options=l.W({type:"raster-array"},d)}triggerRepaint(r){const d=this.map.painter._terrain,b=this.map.style.getSourceCache(this.id);d&&d.enabled&&b&&d._clearRenderCacheForTile(b.id,r.tileID),this.map.triggerRepaint()}loadTile(r,d){const b=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),M=this.map._requestManager.transformRequest(b,l.R.Tile);r.requestParams=M,r.actor||(r.actor=this.dispatcher.getActor()),r.request=r.fetchHeader(void 0,(R,N,H,J)=>(delete r.request,r.aborted?(r.state="unloaded",d(null)):R?20===R.code?void 0:(r.state="errored",d(R)):(this.map._refreshExpiredTiles&&r.setExpiryData({cacheControl:H,expires:J}),r.state="empty",void d(null))))}unloadTile(r,d){const b=r.texture;b&&b instanceof l.T?(r.destroy(!0),this.map.painter.saveTileTexture(b)):(r.destroy(),r.flushQueues(),r._isHeaderLoaded=!1,delete r._mrt,delete r.textureDescriptor),r.fbo&&(r.fbo.destroy(),delete r.fbo),delete r.request,delete r.requestParams,delete r.neighboringTiles,r.state="unloaded"}prepareTile(r,d,b){r._isHeaderLoaded&&("empty"!==r.state&&(r.state="reloading"),r.fetchBand(d,b,(M,R)=>{if(M)return r.state="errored",this.fire(new l.d(M)),void this.triggerRepaint(r);R&&(r.setTexture(R,this.map.painter),r.state="loaded",this.triggerRepaint(r))}))}getInitialBand(r){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:R})=>R===r),b=d&&d.fields,M=b&&b.bands&&b.bands;return M?M[0]:0}getTextureDescriptor(r,d,b){if(!r)return;const M=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!M)return;let R=null;d instanceof l.bk?R=d.paint.get("raster-array-band"):d instanceof l.bl&&(R=d.paint.get("raster-particle-array-band"));const N=R||this.getInitialBand(M);if(null!=N)if(r.textureDescriptor){if(!r.updateNeeded(M,N)||b)return Object.assign({},r.textureDescriptor,{texture:r.texture})}else this.prepareTile(r,M,N)}}const Ti={vector:kc,raster:yu,"raster-dem":class extends yu{constructor(v,r,d,b){super(v,r,d,b),this.type="raster-dem",this.maxzoom=22,this._options=l.W({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(v,r){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(M,R){M&&(v.state="errored",r(M)),R&&(v.dem=R,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",r(null))}v.request=l.h(this.map._requestManager.transformRequest(d,l.R.Tile),function(M,R,N,H){if(delete v.request,v.aborted)v.state="unloaded",r(null);else if(M)v.state="errored",r(M);else if(R){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:N,expires:H});const J=ImageBitmap&&R instanceof ImageBitmap&&l.bi(),re=1-(R.width-l.bj(R.width))/2;re<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const he=J?R:l.e.getImageData(R,re),ye={uid:v.uid,coord:v.tileID,source:this.id,scope:this.scope,rawImageData:he,encoding:this.encoding,padding:re};v.actor&&"expired"!==v.state||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",ye,b.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(v){const r=v.canonical,d=Math.pow(2,r.z),b=(r.x-1+d)%d,M=0===r.x?v.wrap-1:v.wrap,R=(r.x+1+d)%d,N=r.x+1===d?v.wrap+1:v.wrap,H={};return H[new l.aL(v.overscaledZ,M,r.z,b,r.y).key]={backfilled:!1},H[new l.aL(v.overscaledZ,N,r.z,R,r.y).key]={backfilled:!1},r.y>0&&(H[new l.aL(v.overscaledZ,M,r.z,b,r.y-1).key]={backfilled:!1},H[new l.aL(v.overscaledZ,v.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},H[new l.aL(v.overscaledZ,N,r.z,R,r.y-1).key]={backfilled:!1}),r.y+1<d&&(H[new l.aL(v.overscaledZ,M,r.z,b,r.y+1).key]={backfilled:!1},H[new l.aL(v.overscaledZ,v.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},H[new l.aL(v.overscaledZ,N,r.z,R,r.y+1).key]={backfilled:!1}),H}},"raster-array":Ai,geojson:class extends l.E{constructor(v,r,d,b){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(b),this._data=r.data,this._options=l.W({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),void 0!==r.minzoom&&(this.minzoom=r.minzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const M=l.a3/this.tileSize;this.workerOptions=l.W({source:this.id,scope:this.scope,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*M,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*M,extent:l.a3,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:l.a3,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*M,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter,dynamic:r.dynamic},r.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}updateData(v){return this._options.dynamic?"string"!=typeof v&&("Feature"===v.type&&(v={type:"FeatureCollection",features:[v]}),"FeatureCollection"!==v.type)?this.fire(new l.d(new Error("Data to update should be a feature or a feature collection."))):(this._coalesce&&"string"!=typeof v&&"string"!=typeof this._data&&"FeatureCollection"===this._data.type?this._data.features.push(...v.features):this._data=v,this._updateWorkerData(!0),this):this.fire(new l.d(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")))}getClusterExpansionZoom(v,r){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id,scope:this.scope},r),this}getClusterChildren(v,r){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id,scope:this.scope},r),this}getClusterLeaves(v,r,d,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:v,limit:r,offset:d},b),this}_updateWorkerData(v=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new l.f("dataloading",{dataType:"source"})),this._loaded=!1;const r=l.W({append:v},this.workerOptions);r.scope=this.scope;const d=this._data;"string"==typeof d?(r.request=this.map._requestManager.transformRequest(l.e.resolveURL(d),l.R.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,r,(b,M)=>{if(this._loaded=!0,this._pendingLoad=null,b)this.fire(new l.d(b));else{const R={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&M&&M.resourceTiming&&M.resourceTiming[this.id]&&(R.resourceTiming=M.resourceTiming[this.id]),v&&(this._partialReload=!0),this.fire(new l.f("data",R)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(v),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(v,r){const d=v.actor?"reloadTile":"loadTile";v.actor=this.actor;const b=this.map.style?this.map.style.getLut(this.scope):null,M=this._partialReload,R={type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:b?{image:b.image.clone()}:null,scope:this.scope,pixelRatio:l.e.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:M};v.request=this.actor.send(d,R,(N,H)=>M&&!H?(v.state="loaded",r(null)):(delete v.request,v.destroy(),v.aborted?r(null):N?r(N):(v.loadVectorData(H,this.map.painter,"reloadTile"===d),r(null))),void 0,"loadTile"===d)}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v,r){this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id,scope:this.scope}),v.destroy()}onRemove(v){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return l.W({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends l.bm{constructor(v,r,d,b){super(v,r,d,b),this.roundZoom=!0,this.type="video",this.options=r}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const r of v.urls)this.urls.push(this.map._requestManager.transformRequest(r,l.R.Source).url);l.bn(this.urls,(r,d)=>{this._loaded=!0,r?this.fire(new l.d(r)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const r=this.video.seekable;v<r.start(0)||v>r.end(0)?this.fire(new l.d(new l.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const v=this.map.painter.context,r=v.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new l.T(v,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:l.bm,model:class extends l.E{constructor(v,r,d,b){super(),this.id=v,this.type="model",this.models=[],this._loaded=!1,this._options=r}load(){const v=[];for(const r in this._options.models){const d=this._options.models[r],b=l.l(this.map._requestManager.transformRequest(d.uri,l.R.Model).url).then(M=>{if(!M)return;const R=l.c(M),N=new l.M(r,d.position,d.orientation,R);N.computeBoundsAndApplyParent(),this.models.push(N)}).catch(M=>{this.fire(new l.d(new Error(`Could not load model ${r} from ${d.uri}: ${M.message}`)))});v.push(b)}return Promise.allSettled(v).then(()=>{this._loaded=!0,this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(r=>{this.fire(new l.d(new Error(`Could not load models: ${r.message}`)))})}onAdd(v){this.map=v,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(v,r){}serialize(){return{type:"model"}}},"batched-model":class extends l.E{constructor(v,r,d,b){super(),this.type="batched-model",this.id=v,this.tileSize=512,this._options=r,this.tiles=this._options.tiles,this.maxzoom=r.maxzoom||19,this.minzoom=r.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(b)}onAdd(v){this.map=v,this.load()}load(v){this._loaded=!1,this.fire(new l.f("dataloading",{dataType:"source"}));const r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map._worldview;this._tileJSONRequest=gc(this._options,this.map._requestManager,r,d,(b,M)=>{this._tileJSONRequest=null,this._loaded=!0,b?(r&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${r}`),d&&2!==d.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new l.d(b))):M&&(l.W(this,M),M.bounds&&(this.tileBounds=new Ul(M.bounds,this.minzoom,this.maxzoom)),l.an(M.tiles,this.map._requestManager._customAccessToken),this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))),v&&v(b)})}hasTransition(){return!1}hasTile(v){return!this.tileBounds||this.tileBounds.contains(v.canonical)}loaded(){return this._loaded}loadTile(v,r){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(d,l.R.Tile),data:void 0,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,tileSize:this.tileSize*v.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:v.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(v.actor&&"expired"!==v.state)if("loading"===v.state)v.reloadCallback=r;else{if(v.buckets){const R=Object.values(v.buckets);for(const N of R)N.dirty=!0;return void(v.state="loaded")}v.request=v.actor.send("reloadTile",b,M.bind(this))}else v.actor=this.dispatcher.getActor(),v.request=v.actor.send("loadTile",b,M.bind(this),void 0,!0);function M(R,N){return v.aborted?r(null):R&&404!==R.status?r(R):(N&&(N.resourceTiming&&(v.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&v.setExpiryData(N),v.buckets={...v.buckets,...N.buckets},N.featureIndex&&(v.latestFeatureIndex=N.featureIndex)),v.state="loaded",void r(null))}}serialize(){return l.W({},this._options)}},canvas:class extends l.bm{constructor(v,r,d,b){super(v,r,d,b),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(M=>!Array.isArray(M)||2!==M.length||M.some(R=>"number"!=typeof R))||this.fire(new l.d(new l.V(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.d(new l.V(`sources.${v}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new l.d(new l.V(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof HTMLCanvasElement||this.fire(new l.d(new l.V(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.d(new l.V(`sources.${v}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.d(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(v){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const r=this.map.painter.context;this.texture?!v&&!this._playing||this.texture instanceof l.bo||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.T(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends l.E{constructor(v,r,d,b){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=r,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new l.d(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new l.d(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ul(this._implementation.bounds,this.minzoom,this.maxzoom)),r.update=this._update.bind(this),r.clearTiles=this._clearTiles.bind(this),r.coveringTiles=this._coveringTiles.bind(this),l.W(this,l.ah(r,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return l.ah(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new l.f("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this.map=v,this._loaded=!1,this.fire(new l.f("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:r,y:d,z:b}=v.canonical;return this._implementation.hasTile({x:r,y:d,z:b})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,r){const{x:d,y:b,z:M}=v.tileID.canonical,R=new AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:d,y:b,z:M},{signal:R.signal})).then(function(N){return delete v.request,v.aborted?(v.state="unloaded",r(null)):void 0===N?(v.state="errored",r(null)):null===N?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",r(null)):(H=N)instanceof ImageData||H instanceof HTMLCanvasElement||H instanceof ImageBitmap||H instanceof HTMLImageElement?(this.loadTileData(v,N),v.state="loaded",void r(null)):(v.state="errored",r(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var H}.bind(this)).catch(N=>{20!==N.code&&(v.state="errored",r(N))}),v.request.cancel=()=>R.abort()}loadTileData(v,r){v.setTexture(r,this.map.painter)}unloadTile(v,r){if(v.texture&&v.texture instanceof l.T?(v.destroy(!0),v.texture&&v.texture instanceof l.T&&this.map.painter.saveTileTexture(v.texture)):v.destroy(),this._implementation.unloadTile){const{x:d,y:b,z:M}=v.tileID.canonical;this._implementation.unloadTile({x:d,y:b,z:M})}r&&r()}abortTile(v,r){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),r&&r()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z}))}_clearTiles(){const v=l.al(this.id,this.scope);this.map.style.clearSource(v)}_update(){this.fire(new l.f("data",{dataType:"source",sourceDataType:"content"}))}}},mi=function(v,r,d,b){const M=new Ti[r.type](v,r,d,b);if(M.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${M.id}`);return l.bp(["load","abort","unload","serialize","prepare"],M),M};class lo extends l.bv{constructor(r){const d={type:"raster-dem",maxzoom:r.transform.maxZoom},b=new l.bw(l.bx(),null),M=mi("mock-dem",d,b,r.style);super("mock-dem",M,!1),M.setEventedParent(this),this._sourceLoaded=!0}_loadTile(r,d){r.state="loaded",d(null)}}class Xo extends l.bv{constructor(r){const d=mi("proxy",{type:"geojson",maxzoom:r.transform.maxZoom},new l.bw(l.bx(),null),r.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=r,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(r,d,b){if(r.freezeTileCoverage)return;this.transform=r;const M=r.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((R,N)=>{if(R[N.key]="",!this._tiles[N.key]){const H=new l.by(N,this._source.tileSize*N.overscaleFactor(),r.tileZoom);H.state="loaded",this._tiles[N.key]=H}return R},{});for(const R in this._tiles)R in M||(this.freeFBO(R),this._tiles[R].unloadVectorData(),delete this._tiles[R])}freeFBO(r){const d=this.proxyCachedFBO[r];if(void 0!==d){const b=Object.values(d);this.renderCachePool.push(...b),delete this.proxyCachedFBO[r]}}deallocRenderCache(){this.renderCache.forEach(r=>r.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class hr extends l.aL{constructor(r,d,b){super(r.overscaledZ,r.wrap,r.canonical.z,r.canonical.x,r.canonical.y),this.proxyTileKey=d,this.projMatrix=b}}class gr extends l.bq{constructor(r,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},r.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),r.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),r.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=r,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,M,R]=function(J){const re=new l.bt,he=new l.bu;re.reserve(17161),he.reserve(33800);const Pe=l.a3/128,Fe=l.a3+Pe/2,Qe=Fe+Pe;for(let ot=-Pe;ot<Qe;ot+=Pe)for(let st=-Pe;st<Qe;st+=Pe){const Pt=st<0||st>Fe||ot<0||ot>Fe?24575:0,Ft=l.at(Math.round(st),0,l.a3),Vt=l.at(Math.round(ot),0,l.a3);re.emplaceBack(Ft+Pt,Vt)}const Je=(ot,st)=>{const Pt=131*st+ot;he.emplaceBack(Pt+1,Pt,Pt+131),he.emplaceBack(Pt+131,Pt+131+1,Pt+1)};for(let ot=1;ot<129;ot++)for(let st=1;st<129;st++)Je(st,ot);return[0,129].forEach(ot=>{for(let st=0;st<130;st++)Je(st,ot),Je(ot,st)}),[re,he,32768]}(),N=r.context;this.gridBuffer=N.createVertexBuffer(b,l.br.members),this.gridIndexBuffer=N.createIndexBuffer(M),this.gridSegments=l.b.simpleSegment(0,0,b.length,M.length),this.gridNoSkirtSegments=l.b.simpleSegment(0,0,b.length,R),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Xo(d.map),this.orthoMatrix=l.ad.create(),l.ad.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,l.a3,0,l.a3,0,1);const H=N.gl;this._overlapStencilMode=new l.ag({func:H.GEQUAL,mask:255},0,255,H.KEEP,H.KEEP,H.REPLACE),this._previousZoom=r.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new lo(d.map),this._pendingGroundEffectLayers=[]}set style(r){r.on("data",this._onStyleDataEvent.bind(this)),this._style=r,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(r,d,b){if(r&&r.terrain){this._style!==r&&(this.style=r,this._evaluationZoom=void 0);const M=r.terrain.properties,R=0===r.terrain.drapeRenderMode,N=r.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=l.e.now();const H=r.terrain&&r.terrain.scope,J=M.get("source"),re=R?this._mockSourceCache:r.getSourceCache(J,H);if(!re)return void l.w(`Couldn't find terrain source "${J}".`);if(this.sourceCache=re,this._exaggeration=N?this.calculateExaggeration(d):M.get("exaggeration"),!d.projection.requiresDraping&&N&&0===this._exaggeration)return void this._disable();this.enabled=!0;const he=()=>{this.sourceCache.used&&l.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const ye=this.getScaledDemTileSize();this.sourceCache.update(d,ye,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,he(),this._initializing=!0),he(),d.updateElevation(!0,b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(r){const d=this._previousCameraAltitude,b=r.getFreeCameraOptions().position.z/r.pixelsPerMeter*r.worldSize;this._previousCameraAltitude=b;const M=null!=d?b-d:Number.MAX_VALUE;if(Math.abs(M)<2)return this._exaggeration;const R=r.zoom,N=this._style.terrain;if(!this._previousUpdateTimestamp)return N.getExaggeration(R);let H=R-this._previousZoom;const J=this._previousUpdateTimestamp;let re=R;null!=this._evaluationZoom&&(re=this._evaluationZoom,Math.abs(R-re)>.5&&(H=.5*(R-re+H)),H*M<0&&(re+=H)),this._evaluationZoom=re;const he=N.getExaggeration(re),ye=he===N.getExaggeration(Math.max(0,re-.1));if(ye&&Math.abs(he-this._exaggeration)<.01)return he;let Pe=Math.min(.1,.00375*(this._updateTimestamp-J));return(ye||he<.1||Math.abs(H)<1e-4)&&(Pe=Math.min(.2,4*Pe)),l.a2(this._exaggeration,he,Pe)}resetTileLookupCache(r){this._findCoveringTileCache[r]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(r){r.coord&&"source"===r.dataType?this._clearRenderCacheForTile(r.sourceCacheId,r.coord):"style"===r.dataType&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const r in this._style._mergedSourceCaches)this._style._mergedSourceCaches[r].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(r=>r.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const r=2*this.proxySourceCache.getSource().tileSize;return[r,r]}set useVertexMorphing(r){this._useVertexMorphing=r}updateTileBinding(r){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=0===b._centerAltitude&&-1===this.getAtPointOrZero(l.Y.fromLngLat(b.center),-1),this._emptyDEMTextureDirty=!this._initializing);const M=this.proxyCoords=d.getIds().map(J=>{const re=d.getTileByID(J).tileID;return re.projMatrix=b.calculateProjMatrix(re.toUnwrapped()),re});!function(J,re){const he=re.transform.pointCoordinate(re.transform.getCameraPoint()),ye=new l.P(he.x,he.y);J.sort((Pe,Fe)=>{if(Fe.overscaledZ-Pe.overscaledZ)return Fe.overscaledZ-Pe.overscaledZ;const Qe=new l.P(Pe.canonical.x+(1<<Pe.canonical.z)*Pe.wrap,Pe.canonical.y),Je=new l.P(Fe.canonical.x+(1<<Fe.canonical.z)*Fe.wrap,Fe.canonical.y),ot=ye.mult(1<<Pe.canonical.z);return ot.x-=.5,ot.y-=.5,ot.distSqr(Qe)-ot.distSqr(Je)})}(M,this.painter);const R=this.proxyToSource||{};this.proxyToSource={},M.forEach(J=>{this.proxyToSource[J.key]={}}),this.terrainTileForTile={};const N=this._style._mergedSourceCaches;for(const J in N){const re=N[J];if(!re.used||(re!==this.sourceCache&&this.resetTileLookupCache(re.id),this._setupProxiedCoordsForOrtho(re,r[J],R),re.usedForTerrain))continue;const he=r[J];re.getSource().reparseOverscaled&&this._assignTerrainTiles(he)}this.proxiedCoords[d.id]=M.map(J=>new hr(J,J.key,this.orthoMatrix)),this._assignTerrainTiles(M),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(R),this.renderingToTexture=!1;const H={};this._visibleDemTiles=[];for(const J of this.proxyCoords){const re=this.terrainTileForTile[J.key];if(!re)continue;const he=re.tileID.key;he in H||(this._visibleDemTiles.push(re),H[he]=he)}}_assignTerrainTiles(r){this._initializing||r.forEach(d=>{if(this.terrainTileForTile[d.key])return;const b=this._findTileCoveringTileID(d,this.sourceCache);b&&(this.terrainTileForTile[d.key]=b)})}_prepareDEMTextures(){const r=this.painter.context,d=r.gl;for(const b in this.terrainTileForTile){const M=this.terrainTileForTile[b],R=M.dem;!R||M.demTexture&&!M.needsDEMTextureUpload||(r.activeTexture.set(d.TEXTURE1),mc(this.painter,M,R))}}_prepareDemTileUniforms(r,d,b,M){if(!d||null==d.demTexture)return!1;const R=r.tileID.canonical,N=Math.pow(2,d.tileID.canonical.z-R.z),H=M||"";return b[`u_dem_tl${H}`]=[R.x*N%1,R.y*N%1],b[`u_dem_scale${H}`]=N,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const r=this.painter.context,d=r.gl;if(!this._emptyDepthBufferTexture){const b=new l.i({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new l.T(r,b,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let r=0;const d=this._visibleDemTiles.reduce((b,M)=>{if(!M.dem)return b;const R=M.dem.tree.minimums[0];return R>0&&r++,b+R},0);return r?d/r:0}_updateEmptyDEMTexture(){const r=this.painter.context,d=r.gl;r.activeTexture.set(d.TEXTURE2);const b=this._getLoadedAreaMinimum(),[M,R]=(()=>{const H=new l.bz({width:1,height:1},new Float32Array([b]));return[d.R32F,H]})();this._emptyDEMTextureDirty=!1;let N=this._emptyDEMTexture;return N?N.update(R,{premultiply:!1}):N=this._emptyDEMTexture=new l.T(r,R,M,{premultiply:!1}),N}setupElevationDraw(r,d,b){const M=this.painter.context,R=M.gl,N={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[2,0],u_exaggeration:0};N.u_exaggeration=this.exaggeration();let H=null,J=null,re=1;if(b&&b.morphing&&this._useVertexMorphing){const Qe=b.morphing.srcDemTile,Je=b.morphing.dstDemTile;re=b.morphing.phase,Qe&&Je&&(this._prepareDemTileUniforms(r,Qe,N,"_prev")&&(J=Qe),this._prepareDemTileUniforms(r,Je,N)&&(H=Je))}const he=Qe=>Qe&&Qe.demTexture&&this.painter.linearFloatFilteringSupported()?R.LINEAR:R.NEAREST;let ye=null;var Pe,Fe;if(this.enabled?J&&H?(ye=H.demTexture,M.activeTexture.set(R.TEXTURE4),J.demTexture.bind(he(J),R.CLAMP_TO_EDGE),N.u_dem_lerp=re):(H=this.terrainTileForTile[r.tileID.key],ye=this._prepareDemTileUniforms(r,H,N)?H.demTexture:this.emptyDEMTexture):ye=this.emptyDEMTexture,M.activeTexture.set(R.TEXTURE2),ye&&(N.u_dem_size=1===(Pe=ye).size[0]?1:Pe.size[0]-2,ye.bind(he(H),R.CLAMP_TO_EDGE)),M.activeTexture.set(R.TEXTURE3),b&&b.useDepthForOcclusion&&this.painter.terrainDepthTexture&&this.painter.terrainDepthFBO?(this.painter.terrainDepthTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE),N.u_depth_size_inv=[1/this.painter.terrainDepthFBO.width,1/this.painter.terrainDepthFBO.height],N.u_depth_range_unpack=[2/((Fe=this.painter.depthRangeFor3D)[1]-Fe[0]),-1-2*Fe[0]/(Fe[1]-Fe[0])]):(this.emptyDepthBufferTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE),N.u_depth_range_unpack=[2,0]),M.activeTexture.set(R.TEXTURE0),b&&b.useMeterToDem&&H){const Qe=(1<<H.tileID.canonical.z)*l.ax(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;N.u_meter_to_dem=Qe}if(b&&b.labelPlaneMatrixInv&&(N.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),d.setTerrainUniformValues(M,N),"globe"===this.painter.transform.projection.name){const Qe=this.globeUniformValues(this.painter.transform,r.tileID.canonical,b&&b.useDenormalizedUpVectorScale);d.setGlobeUniformValues(M,Qe)}}globeUniformValues(r,d,b){const M=r.projection;return{u_tile_tl_up:M.upVector(d,0,0),u_tile_tr_up:M.upVector(d,l.a3,0),u_tile_br_up:M.upVector(d,l.a3,l.a3),u_tile_bl_up:M.upVector(d,0,l.a3),u_tile_up_scale:b?l.bs(1):M.upVectorScale(d,r.center.lat,r.worldSize).metersToTile}}renderToBackBuffer(r){const d=this.painter,b=this.painter.context;0!==r.length&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(M,R,N,H,J){if("globe"===M.transform.projection.name)!function(re,he,ye,Pe,Fe){const Qe=re.context,Je=Qe.gl;let ot,st;const Pt=re.transform,Ft=l.ba(re,Qe,Pt),Vt=(gn,bi)=>{if(st===bi)return;const io=[We[bi],"PROJECTION_GLOBE_VIEW"];Ft&&io.push("CUSTOM_ANTIALIASING");const ro=re.isTileAffectedByFog(gn);ot=re.getOrCreateProgram("globeRaster",{defines:io,overrideFog:ro}),st=bi},en=re.colorModeForRenderPass(),tn=new l.ae(Je.LEQUAL,l.ae.ReadWrite,re.depthRangeFor3D);Re.update(Fe);const yn=l.bb(Pt),lt=[l.aj(Pt.center.lng),l.ak(Pt.center.lat)],$t=re.globeSharedBuffers,Sn=[Pt.width*l.e.devicePixelRatio,Pt.height*l.e.devicePixelRatio],ci=Float32Array.from(Pt.globeMatrix),Dn={useDenormalizedUpVectorScale:!0};{const gn=re.transform,bi=Tt(gn.zoom,he.exaggeration(),he.sourceCache._source.tileSize);st=-1;const io=Je.TRIANGLES;for(const ro of Pe){const te=ye.getTile(ro),L=l.ag.disabled,j=he.prevTerrainTileForTile[ro.key],ie=he.terrainTileForTile[ro.key];cu(j,ie)&&Re.newMorphing(ro.key,j,ie,Fe,250),Qe.activeTexture.set(Je.TEXTURE0),te.texture&&te.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE);const Ne=Re.getMorphValuesForProxy(ro.key),at=Ne?1:0;Ne&&l.o(Dn,{morphing:{srcDemTile:Ne.from,dstDemTile:Ne.to,phase:l.b9(Ne.phase)}});const ln=l.bc(ro.canonical),hn=l.bd(ln.getCenter().lat),Qn=l.be(ro.canonical,ln,hn,gn.worldSize/gn._pixelsPerMercatorPixel),Wn=l.bf(l.bg(ro.canonical)),Yi=Eo(gn.expandedFarZProjMatrix,ci,yn,Wn,l.a1(gn.zoom),lt,gn.frustumCorners.TL,gn.frustumCorners.TR,gn.frustumCorners.BR,gn.frustumCorners.BL,gn.globeCenterInViewSpace,gn.globeRadius,Sn,bi,gn._farZ,Qn);if(Vt(ro,at),ot&&(he.setupElevationDraw(te,ot,Dn),re.uploadCommonUniforms(Qe,ot,ro.toUnwrapped()),$t)){const[yr,Sr,$r]=$t.getGridBuffers(hn,0!==bi);ot.draw(re,io,tn,L,en,l.af.backCCW,Yi,"globe_raster",yr,Sr,$r)}}}if($t&&(re.renderDefaultNorthPole||re.renderDefaultSouthPole)){const gn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ft&&gn.push("CUSTOM_ANTIALIASING"),ot=re.getOrCreateProgram("globeRaster",{defines:gn});for(const bi of Pe){const{x:io,y:ro,z:te}=bi.canonical,L=0===ro,j=ro===(1<<te)-1,[ie,Ne,at,ln]=$t.getPoleBuffers(te,!1);if(ln&&(L||j)){const hn=ye.getTile(bi);Qe.activeTexture.set(Je.TEXTURE0),hn.texture&&hn.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE);let Qn=l.bh(te,io,Pt);const Wn=l.bf(l.bg(bi.canonical)),Yi=(yr,Sr)=>yr.draw(re,Je.TRIANGLES,tn,l.ag.disabled,en,l.af.disabled,Eo(Pt.expandedFarZProjMatrix,Qn,Qn,Wn,0,lt,Pt.frustumCorners.TL,Pt.frustumCorners.TR,Pt.frustumCorners.BR,Pt.frustumCorners.BL,Pt.globeCenterInViewSpace,Pt.globeRadius,Sn,0,Pt._farZ),"globe_pole_raster",Sr,at,ln);he.setupElevationDraw(hn,ot,Dn),re.uploadCommonUniforms(Qe,ot,bi.toUnwrapped()),L&&re.renderDefaultNorthPole&&Yi(ot,ie),j&&re.renderDefaultSouthPole&&(Qn=l.ad.scale(l.ad.create(),Qn,[1,-1,1]),Yi(ot,Ne))}}}}(M,R,N,H,J);else{const re=M.context,he=re.gl;let ye,Pe;const Fe=M.shadowRenderer,Qe=Bc(M,M.longestCutoffRange),Je=en=>{if(Pe===en)return;const tn=[];tn.push(We[en]),Qe.shouldRenderCutoff&&tn.push("RENDER_CUTOFF"),ye=M.getOrCreateProgram("terrainRaster",{defines:tn}),Pe=en},ot=M.colorModeForRenderPass(),st=new l.ae(he.LEQUAL,l.ae.ReadWrite,M.depthRangeFor3D);Re.update(J);const Pt=M.transform,Ft=Tt(Pt.zoom,R.exaggeration(),R.sourceCache._source.tileSize);let Vt=[0,0,0];if(Fe){const en=M.style.directionalLight,tn=M.style.ambientLight;en&&tn&&(Vt=hl(M.style,en,tn))}{Pe=-1;const en=he.TRIANGLES,[tn,yn]=[R.gridIndexBuffer,R.gridSegments];for(const lt of H){const $t=N.getTile(lt),Sn=l.ag.disabled,ci=R.prevTerrainTileForTile[lt.key],Dn=R.terrainTileForTile[lt.key];cu(ci,Dn)&&Re.newMorphing(lt.key,ci,Dn,J,250),re.activeTexture.set(he.TEXTURE0),$t.texture&&$t.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);const gn=Re.getMorphValuesForProxy(lt.key),bi=gn?1:0;let io;gn&&(io={morphing:{srcDemTile:gn.from,dstDemTile:gn.to,phase:l.b9(gn.phase)}});const ro=lu(lt.projMatrix,an(lt.canonical,Pt.renderWorldCopies)?Ft/10:Ft,Vt);if(Je(bi),!ye)continue;R.setupElevationDraw($t,ye,io);const te=lt.toUnwrapped();Fe&&Fe.setupShadows(te,ye),M.uploadCommonUniforms(re,ye,te,null,Qe),ye.draw(M,en,st,Sn,ot,l.af.backCCW,ro,"terrain_raster",R.gridBuffer,tn,yn)}}}}(d,this,this.proxySourceCache,r,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),r.splice(0,r.length))}renderBatch(r){if(0===this._drapedRenderBatches.length)return r+1;this.renderingToTexture=!0;const d=this.painter,b=this.painter.context,M=this.proxySourceCache,R=this.proxiedCoords[M.id],N=this._drapedRenderBatches.shift(),H=d.style.order,J=[];let re=0;for(const he of R){const ye=M.getTileByID(he.proxyTileKey),Pe=M.proxyCachedFBO[he.key]?M.proxyCachedFBO[he.key][r]:void 0,Fe=void 0!==Pe?M.renderCache[Pe]:this.pool[re++],Qe=void 0!==Pe;if(ye.texture=Fe.tex,Qe&&!Fe.dirty){J.push(ye.tileID);continue}let Je;b.bindFramebuffer.set(Fe.fb.framebuffer),this.renderedToTile=!1,Fe.dirty&&(b.clear({color:l.C.transparent,stencil:0}),Fe.dirty=!1);for(let ot=N.start;ot<=N.end;++ot){const st=d.style._mergedLayers[H[ot]];if(st.isHidden(d.transform.zoom))continue;const Pt=d.style.getLayerSourceCache(st),Ft=Pt?this.proxyToSource[he.key][Pt.id]:[he];if(!Ft)continue;const Vt=Ft;b.viewport.set([0,0,Fe.fb.width,Fe.fb.height]),Je!==(Pt?Pt.id:null)&&(this._setupStencil(Fe,Ft,st,Pt),Je=Pt?Pt.id:null),d.renderLayer(d,Pt,st,Vt)}if(0===this._drapedRenderBatches.length)for(const ot of this._pendingGroundEffectLayers){const st=d.style._mergedLayers[H[ot]];if(st.isHidden(d.transform.zoom))continue;const Pt=d.style.getLayerSourceCache(st),Ft=Pt?this.proxyToSource[he.key][Pt.id]:[he];if(!Ft)continue;const Vt=Ft;b.viewport.set([0,0,Fe.fb.width,Fe.fb.height]),Je!==(Pt?Pt.id:null)&&(this._setupStencil(Fe,Ft,st,Pt),Je=Pt?Pt.id:null),d.renderLayer(d,Pt,st,Vt)}this.renderedToTile?(Fe.dirty=!0,J.push(ye.tileID)):Qe||--re,5===re&&(re=0,this.renderToBackBuffer(J))}return this.renderToBackBuffer(J),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,d.width,d.height]),N.end+1}postRender(){}isLayerOrderingCorrect(r){const d=r.order.length;let b=-1,M=d;for(let R=0;R<d;++R)this._style.isLayerDraped(r._mergedLayers[r.order[R]])?b=Math.max(b,R):M=Math.min(M,R);return M>b}getMinElevationBelowMSL(){let r=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{r=Math.min(r,d.dem.tree.minimums[0])}),0===r?r:(r-30)*this._exaggeration}raycast(r,d,b){if(!this._visibleDemTiles)return null;const M=this._visibleDemTiles.filter(R=>R.dem).map(R=>{const N=R.tileID,H=1<<N.overscaledZ,{x:J,y:re}=N.canonical,he=J/H,ye=(J+1)/H,Pe=re/H,Fe=(re+1)/H;return{minx:he,miny:Pe,maxx:ye,maxy:Fe,t:R.dem.tree.raycastRoot(he,Pe,ye,Fe,r,d,b),tile:R}});M.sort((R,N)=>(null!==R.t?R.t:Number.MAX_VALUE)-(null!==N.t?N.t:Number.MAX_VALUE));for(const R of M){if(null==R.t)return null;const N=R.tile.dem.tree.raycast(R.minx,R.miny,R.maxx,R.maxy,r,d,b);if(null!=N)return N}return null}_createFBO(){const r=this.painter.context,d=r.gl,b=this.drapeBufferSize;r.activeTexture.set(d.TEXTURE0);const M=new l.T(r,{width:b[0],height:b[1],data:null},d.RGBA);M.bind(d.LINEAR,d.CLAMP_TO_EDGE);const R=r.createFramebuffer(b[0],b[1],!0,null);return R.colorAttachment.set(M.texture),R.depthAttachment=new or(r,R.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=r.createRenderbuffer(r.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,R.depthAttachment.set(this._sharedDepthStencil),r.clear({stencil:0})):R.depthAttachment.set(this._sharedDepthStencil),r.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax),{fb:R,tex:M,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const r in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[r].hasTransition())return!0;return this._style.order.some(r=>{const d=this._style._mergedLayers[r],b=d.isHidden(this.painter.transform.zoom);return"custom"===d.type?!b&&d.shouldRedrape():!b&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let r=!1;for(const b of this._style.getSources())if(b instanceof kc){r=!0;break}if(!r)return;const d={};for(let b=0;b<this._style.order.length;++b){const M=this._style._mergedLayers[this._style.order[b]],R=this._style.getLayerSourceCache(M);if(R&&!d[R.id]&&!M.isHidden(this.painter.transform.zoom)&&"line"===M.type&&M.widthExpression()instanceof l.Z){d[R.id]=!0;for(const N of this.proxyCoords){const H=this.proxyToSource[N.key][R.id];if(H)for(const J of H)this._clearRenderCacheForTile(R.id,J)}}}}_clearRasterLayersFromRenderCache(){let r=!1;for(const b in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[b]._source instanceof yu){r=!0;break}if(!r)return;const d={};for(let b=0;b<this._style.order.length;++b){const M=this._style._mergedLayers[this._style.order[b]],R=this._style.getLayerSourceCache(M);if(!R||d[R.id]||M.isHidden(this.painter.transform.zoom)||"raster"!==M.type)continue;const N=M.paint.get("raster-fade-duration");for(const H of this.proxyCoords){const J=this.proxyToSource[H.key][R.id];if(J)for(const re of J){const he=Un(R.getTile(re),R.findLoadedParent(re,0),R,this.painter.transform,N);(1!==he.opacity||0!==he.mix)&&this._clearRenderCacheForTile(R.id,re)}}}}_setupDrapedRenderBatches(){const r=this._style.order,d=r.length;if(0===d)return;const b=[];this._pendingGroundEffectLayers=[];let M,R=0,N=this._style._mergedLayers[r[R]];for(;!this._style.isLayerDraped(N)&&N.isHidden(this.painter.transform.zoom)&&++R<d;)N=this._style._mergedLayers[r[R]];for(;R<d;++R){const H=this._style._mergedLayers[r[R]];H.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(H)?void 0===M&&(M=R):("fill-extrusion"===H.type&&this._pendingGroundEffectLayers.push(R),void 0!==M&&(b.push({start:M,end:R-1}),M=void 0)))}if(void 0!==M&&b.push({start:M,end:R-1}),0!==b.length){const H=b[b.length-1];this._pendingGroundEffectLayers.every(J=>J>H.end)||l.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=b}_setupRenderCache(r){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const N=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let H=0;H<N.length;++H){const J=Object.values(N[H]);d.renderCachePool.push(...J)}}return}this._clearRasterLayersFromRenderCache();const b=this.proxyCoords,M=this._tilesDirty;for(let N=b.length-1;N>=0;N--){const H=b[N];if(d.getTileByID(H.key),void 0!==d.proxyCachedFBO[H.key]){const J=r[H.key],re=this.proxyToSource[H.key];let he=0;for(const ye in re){const Pe=re[ye],Fe=J[ye];if(!Fe||Fe.length!==Pe.length||Pe.some((Qe,Je)=>Qe!==Fe[Je]||M[ye]&&M[ye].hasOwnProperty(Qe.key))){he=-1;break}++he}for(const ye in d.proxyCachedFBO[H.key])d.renderCache[d.proxyCachedFBO[H.key][ye]].dirty=he<0||he!==Object.values(J).length}}const R=[...this._drapedRenderBatches];R.sort((N,H)=>H.end-H.start-(N.end-N.start));for(const N of R)for(const H of b){if(d.proxyCachedFBO[H.key])continue;let J=d.renderCachePool.pop();void 0===J&&d.renderCache.length<50&&(J=d.renderCache.length,d.renderCache.push(this._createFBO())),void 0!==J&&(d.proxyCachedFBO[H.key]={},d.proxyCachedFBO[H.key][N.start]=J,d.renderCache[J].dirty=!0)}this._tilesDirty={}}_setupStencil(r,d,b,M){if(!M||!this._sourceTilesOverlap[M.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const R=this.painter.context,N=R.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let H;if(b.isTileClipped())H=d.length,this._overlapStencilMode.test={func:N.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);H=1,this._overlapStencilMode.test={func:N.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+H>255&&(R.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=H,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(r){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[r.key]),this._overlapStencilMode):l.ag.disabled}_renderTileClippingMasks(r,d){const b=this.painter,M=this.painter.context,R=M.gl;b._tileClippingMaskIDs={},M.setColorMode(l.a.disabled),M.setDepthMode(l.ae.disabled);const N=b.getOrCreateProgram("clippingMask");for(const H of r){const J=b._tileClippingMaskIDs[H.key]=--d;N.draw(b,R.TRIANGLES,l.ae.disabled,new l.ag({func:R.ALWAYS,mask:0},J,255,R.KEEP,R.KEEP,R.REPLACE),l.a.disabled,l.af.disabled,$n(H.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(r){const d=this.painter.transform;if(r.x<0||r.x>d.width||r.y<0||r.y>d.height)return null;const b=[r.x,r.y,1,1];l.aA.transformMat4(b,b,d.pixelMatrixInverse),l.aA.scale(b,b,1/b[3]),b[0]/=d.worldSize,b[1]/=d.worldSize;const M=d._camera.position,R=l.ax(1,d.center.lat),N=[M[0],M[1],M[2]/R,0],H=l._.subtract([],b.slice(0,3),N);l._.normalize(H,H);const J=this.raycast(N,H,this._exaggeration);return null!==J&&J?(l._.scaleAndAdd(N,N,H,J),N[3]=N[2],N[2]*=R,N):null}_setupProxiedCoordsForOrtho(r,d,b){if(r.getSource()instanceof l.bm)return this._setupProxiedCoordsForImageSource(r,d,b);this._findCoveringTileCache[r.id]=this._findCoveringTileCache[r.id]||{};const M=this.proxiedCoords[r.id]=[],R=this.proxyCoords;for(let J=0;J<R.length;J++){const re=R[J],he=this._findTileCoveringTileID(re,r);if(he){const ye=this._createProxiedId(re,he,b[re.key]&&b[re.key][r.id]);M.push(ye),this.proxyToSource[re.key][r.id]=[ye]}}let N=!1;const H=new Set;for(let J=0;J<d.length;J++){const re=r.getTile(d[J]);if(!re||!re.hasData())continue;const he=this._findTileCoveringTileID(re.tileID,this.proxySourceCache);if(he&&he.tileID.canonical.z!==re.tileID.canonical.z){const ye=this.proxyToSource[he.tileID.key][r.id],Pe=this._createProxiedId(he.tileID,re,b[he.tileID.key]&&b[he.tileID.key][r.id]);ye?ye.splice(ye.length-1,0,Pe):this.proxyToSource[he.tileID.key][r.id]=[Pe];const Fe=this.proxyToSource[he.tileID.key][r.id];H.has(Fe)||H.add(Fe),M.push(Pe),N=!0}}if(this._sourceTilesOverlap[r.id]=N,N&&this._debugParams.sortTilesHiZFirst)for(const J of H)J.sort((re,he)=>he.overscaledZ-re.overscaledZ)}_setupProxiedCoordsForImageSource(r,d,b){if(!r.getSource().loaded())return;const M=this.proxiedCoords[r.id]=[],R=this.proxyCoords,N=r.getSource(),H=N.tileID;if(!H)return;const J=new l.P(H.x,H.y)._div(1<<H.z),re=N.coordinates.map(l.Y.fromLngLat).reduce((ye,Pe)=>(ye.min.x=Math.min(ye.min.x,Pe.x-J.x),ye.min.y=Math.min(ye.min.y,Pe.y-J.y),ye.max.x=Math.max(ye.max.x,Pe.x-J.x),ye.max.y=Math.max(ye.max.y,Pe.y-J.y),ye),{min:new l.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new l.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),he=(ye,Pe)=>{const Fe=ye.wrap+ye.canonical.x/(1<<ye.canonical.z),Qe=ye.canonical.y/(1<<ye.canonical.z),Je=l.a3/(1<<ye.canonical.z),ot=Pe.wrap+Pe.canonical.x/(1<<Pe.canonical.z),st=Pe.canonical.y/(1<<Pe.canonical.z);return Fe+Je<ot+re.min.x||Fe>ot+re.max.x||Qe+Je<st+re.min.y||Qe>st+re.max.y};for(let ye=0;ye<R.length;ye++){const Pe=R[ye];for(let Fe=0;Fe<d.length;Fe++){const Qe=r.getTile(d[Fe]);if(!Qe||!Qe.hasData()||he(Pe,Qe.tileID))continue;const Je=this._createProxiedId(Pe,Qe,b[Pe.key]&&b[Pe.key][r.id]),ot=this.proxyToSource[Pe.key][r.id];ot?ot.push(Je):this.proxyToSource[Pe.key][r.id]=[Je],M.push(Je)}}}_createProxiedId(r,d,b){let M=this.orthoMatrix;if(b){const R=b.find(N=>N.key===d.tileID.key);if(R)return R}if(d.tileID.key!==r.key){const R=r.canonical.z-d.tileID.canonical.z;let N,H,J;M=l.ad.create();const re=d.tileID.wrap-r.wrap<<r.overscaledZ;R>0?(N=l.a3>>R,H=N*((d.tileID.canonical.x<<R)-r.canonical.x+re),J=N*((d.tileID.canonical.y<<R)-r.canonical.y)):(N=l.a3<<-R,H=l.a3*(d.tileID.canonical.x-(r.canonical.x+re<<-R)),J=l.a3*(d.tileID.canonical.y-(r.canonical.y<<-R))),l.ad.ortho(M,0,N,0,N,0,1),l.ad.translate(M,M,[H,J,0])}return new hr(d.tileID,r.key,M)}_findTileCoveringTileID(r,d){let b=d.getTile(r);if(b&&b.hasData())return b;const M=this._findCoveringTileCache[d.id],R=M[r.key];if(b=R?d.getTileByID(R):null,b&&b.hasData()||null===R)return b;let N=b?b.tileID:r,H=N.overscaledZ;const J=d.getSource().minzoom,re=[];if(!R){const ye=d.getSource().maxzoom;if(r.canonical.z>=ye){const Pe=r.canonical.z-ye;d.getSource().reparseOverscaled?(H=Math.max(r.canonical.z+2,d.transform.tileZoom),N=new l.aL(H,r.wrap,ye,r.canonical.x>>Pe,r.canonical.y>>Pe)):0!==Pe&&(H=ye,N=new l.aL(H,r.wrap,ye,r.canonical.x>>Pe,r.canonical.y>>Pe))}N.key!==r.key&&(re.push(N.key),b=d.getTile(N))}const he=ye=>{re.forEach(Pe=>{M[Pe]=ye}),re.length=0};for(H-=1;H>=J&&(!b||!b.hasData());H--){b&&he(b.tileID.key);const ye=N.calculateScaledKey(H);if(b=d.getTileByID(ye),b&&b.hasData())break;const Pe=M[ye];if(null===Pe)break;void 0===Pe?re.push(ye):b=d.getTileByID(Pe)}return he(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(r){return this.enabled?this._findTileCoveringTileID(r,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(r,d){let b=this._tilesDirty[r];b||(b=this._tilesDirty[r]={}),b[d.key]=!0}}function jr(v,r,d){const b=function(H,J,re){const he=l._.dot(J,H),ye=l._.dot(re,[.2126,.7152,.0722]),Pe=(Qe,Je,ot)=>(1-ot)*Qe+ot*Je,Fe=Pe(1-.3*Math.min(ye,1),1,Math.min(he+1,1));return Pe(.92,1,Math.asin(l.at(J[2],-1,1))/Math.PI+.5)*Fe}(v,[0,0,1],r),M=[0,0,0];l._.scale(M,d.slice(0,3),b);const R=[0,0,0];l._.scale(R,r.slice(0,3),v[2]);const N=[0,0,0];return l._.add(N,M,R),l.b8(N)}const la=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],bl=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class gs{static cacheKey(r,d,b,M){let R=`${d}${M?M.cacheKey:""}`;for(const N of b)r.usedDefines.includes(N)&&(R+=`/${N}`);return R}constructor(r,d,b,M,R,N){const H=r.gl;this.program=H.createProgram(),this.configuration=M,this.name=d,this.fixedDefines=[...N];const J=M?M.getBinderAttributes():[],re=(b.staticAttributes||[]).concat(J);let he=M?M.defines():[];he=he.concat(N.map(ot=>`#define ${ot}`));const ye="#version 300 es\n";let Pe=ye+he.concat("precision mediump float;",Hu,Uc.fragmentSource).join("\n");for(const ot of b.fragmentIncludes)Pe+=`\n${dl[ot]}`;Pe+=`\n${b.fragmentSource}`;let Fe=ye+he.concat("precision highp float;",Hu,Uc.vertexSource).join("\n");for(const ot of b.vertexIncludes)Fe+=`\n${dl[ot]}`;Fe+=`\n${b.vertexSource}`;const Qe=H.createShader(H.FRAGMENT_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);H.shaderSource(Qe,Pe),H.compileShader(Qe),H.attachShader(this.program,Qe);const Je=H.createShader(H.VERTEX_SHADER);if(H.isContextLost())this.failedToCreate=!0;else{H.shaderSource(Je,Fe),H.compileShader(Je),H.attachShader(this.program,Je),this.attributes={},this.numAttributes=re.length;for(let ot=0;ot<this.numAttributes;ot++)if(re[ot]){const st=re[ot].startsWith("a_")?re[ot]:`a_${re[ot]}`;H.bindAttribLocation(this.program,ot,st),this.attributes[st]=ot}H.linkProgram(this.program),H.deleteShader(Je),H.deleteShader(Qe),this.fixedUniforms=R(r),this.binderUniforms=M?M.getUniforms(r):[],N.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new l.a7(ot=r),u_dem_prev:new l.a7(ot),u_dem_tl:new l.a8(ot),u_dem_scale:new l.aa(ot),u_dem_tl_prev:new l.a8(ot),u_dem_scale_prev:new l.aa(ot),u_dem_size:new l.aa(ot),u_dem_lerp:new l.aa(ot),u_exaggeration:new l.aa(ot),u_depth:new l.a7(ot),u_depth_size_inv:new l.a8(ot),u_depth_range_unpack:new l.a8(ot),u_meter_to_dem:new l.aa(ot),u_label_plane_matrix_inv:new l.a6(ot)}),N.includes("GLOBE")&&(this.globeUniforms=(ot=>({u_tile_tl_up:new l.aq(ot),u_tile_tr_up:new l.aq(ot),u_tile_br_up:new l.aq(ot),u_tile_bl_up:new l.aq(ot),u_tile_up_scale:new l.aa(ot)}))(r)),N.includes("FOG")&&(this.fogUniforms=(ot=>({u_fog_matrix:new l.a6(ot),u_fog_range:new l.a8(ot),u_fog_color:new l.as(ot),u_fog_horizon_blend:new l.aa(ot),u_fog_vertical_limit:new l.a8(ot),u_fog_temporal_offset:new l.aa(ot),u_frustum_tl:new l.aq(ot),u_frustum_tr:new l.aq(ot),u_frustum_br:new l.aq(ot),u_frustum_bl:new l.aq(ot),u_globe_pos:new l.aq(ot),u_globe_radius:new l.aa(ot),u_globe_transition:new l.aa(ot),u_is_globe:new l.a7(ot),u_viewport:new l.a8(ot)}))(r)),N.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ot=>({u_cutoff_params:new l.as(ot)}))(r)),N.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ot=>({u_lighting_ambient_color:new l.aq(ot),u_lighting_directional_dir:new l.aq(ot),u_lighting_directional_color:new l.aq(ot),u_ground_radiance:new l.aq(ot)}))(r)),N.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ot=>({u_light_matrix_0:new l.a6(ot),u_light_matrix_1:new l.a6(ot),u_fade_range:new l.a8(ot),u_shadow_normal_offset:new l.aq(ot),u_shadow_intensity:new l.aa(ot),u_shadow_texel_size:new l.aa(ot),u_shadow_map_resolution:new l.aa(ot),u_shadow_direction:new l.aq(ot),u_shadow_bias:new l.aq(ot),u_shadowmap_0:new l.a7(ot),u_shadowmap_1:new l.a7(ot)}))(r))}var ot}setTerrainUniformValues(r,d){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M]&&b[M].set(this.program,M,d[M])}}setGlobeUniformValues(r,d){if(!this.globeUniforms)return;const b=this.globeUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M]&&b[M].set(this.program,M,d[M])}}setFogUniformValues(r,d){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M].set(this.program,M,d[M])}}setCutoffUniformValues(r,d){if(!this.cutoffUniforms)return;const b=this.cutoffUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M].set(this.program,M,d[M])}}setLightsUniformValues(r,d){if(!this.lightsUniforms)return;const b=this.lightsUniforms;if(!this.failedToCreate){r.program.set(this.program);for(const M in d)b[M].set(this.program,M,d[M])}}setShadowUniformValues(r,d){if(this.failedToCreate||!this.shadowUniforms)return;const b=this.shadowUniforms;r.program.set(this.program);for(const M in d)b[M].set(this.program,M,d[M])}_drawDebugWireframe(r,d,b,M,R,N,H,J,re,he){const ye=r.options.wireframe;if(!1===ye.terrain&&!1===ye.layers2D&&!1===ye.layers3D)return;const Pe=r.context;if(!(ye.terrain&&("terrainRaster"===this.name||"globeRaster"===this.name)||!(!ye.layers2D||r._terrain&&r._terrain.renderingToTexture)&&la.includes(this.name)||ye.layers3D&&bl.includes(this.name)))return;const Fe=Pe.gl,Qe=r.wireframeDebugCache.getLinesFromTrianglesBuffer(r.frameCounter,R,Pe);if(!Qe)return;const Je=[...this.fixedDefines];Je.push("DEBUG_WIREFRAME");const ot=r.getOrCreateProgram(this.name,{config:this.configuration,defines:Je});Pe.program.set(ot.program);const st=(Vt,en,tn)=>{if(en[Vt]&&tn[Vt])for(const yn in en[Vt])tn[Vt][yn]&&tn[Vt][yn].set(tn.program,yn,en[Vt][yn].current)};re&&re.setUniforms(ot.program,Pe,ot.binderUniforms,H,{zoom:J}),st("fixedUniforms",this,ot),st("terrainUniforms",this,ot),st("globeUniforms",this,ot),st("fogUniforms",this,ot),st("lightsUniforms",this,ot),st("shadowUniforms",this,ot),Qe.bind(),Pe.setColorMode(new l.a([Fe.ONE,Fe.ONE_MINUS_SRC_ALPHA,Fe.ZERO,Fe.ONE],l.C.transparent,[!0,!0,!0,!1])),Pe.setDepthMode(new l.ae(d.func===Fe.LESS?Fe.LEQUAL:d.func,l.ae.ReadOnly,d.range)),Pe.setStencilMode(l.ag.disabled);const Pt=3*N.primitiveLength*2,Ft=3*N.primitiveOffset*2*2;he&&he>1?Fe.drawElementsInstanced(Fe.LINES,Pt,Fe.UNSIGNED_SHORT,Ft,he):Fe.drawElements(Fe.LINES,Pt,Fe.UNSIGNED_SHORT,Ft),R.bind(),Pe.program.set(this.program),Pe.setDepthMode(d),Pe.setStencilMode(b),Pe.setColorMode(M)}draw(r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je,ot){const st=r.context,Pt=st.gl;if(this.failedToCreate)return;st.program.set(this.program),st.setDepthMode(b),st.setStencilMode(M),st.setColorMode(R),st.setCullFace(N);for(const en of Object.keys(this.fixedUniforms))this.fixedUniforms[en].set(this.program,en,H[en]);Qe&&Qe.setUniforms(this.program,st,this.binderUniforms,Pe,{zoom:Fe});const Ft={[Pt.POINTS]:1,[Pt.LINES]:2,[Pt.TRIANGLES]:3,[Pt.LINE_STRIP]:1}[d],Vt=ot&&ot>0?1:void 0;for(const en of ye.get()){const tn=en.vaos||(en.vaos={});(tn[J]||(tn[J]=new ld)).bind(st,this,re,Qe?Qe.getPaintVertexBuffers():[],he,en.vertexOffset,Je||[],Vt),ot&&ot>1?Pt.drawElementsInstanced(d,en.primitiveLength*Ft,Pt.UNSIGNED_SHORT,en.primitiveOffset*Ft*2,ot):he?Pt.drawElements(d,en.primitiveLength*Ft,Pt.UNSIGNED_SHORT,en.primitiveOffset*Ft*2):Pt.drawArrays(d,en.vertexOffset,en.vertexLength),d===Pt.TRIANGLES&&he&&this._drawDebugWireframe(r,b,M,R,he,en,Pe,Fe,Qe,ot)}}}function nr(v,r){const d=Math.pow(2,r.tileID.overscaledZ),b=r.tileSize*Math.pow(2,v.transform.tileZoom)/d,M=b*(r.tileID.canonical.x+r.tileID.wrap*d),R=b*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture?r.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/l.bB(r,1,v.transform.tileZoom),u_pixel_coord_upper:[M>>16,R>>16],u_pixel_coord_lower:[65535&M,65535&R]}}const wl=l.ad.create(),$a=(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je)=>{const ot=r.style.light,st=ot.properties.get("position"),Pt=[st.x,st.y,st.z],Ft=l.bC.create();"viewport"===ot.properties.get("anchor")&&(l.bC.fromRotation(Ft,-r.transform.angle),l._.transformMat3(Pt,Pt,Ft));const Vt=ot.properties.get("color"),en=r.transform,tn={u_matrix:v,u_lightpos:Pt,u_lightintensity:ot.properties.get("intensity"),u_lightcolor:[Vt.r,Vt.g,Vt.b],u_vertical_gradient:+d,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:wl,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:M,u_edge_radius:R,u_flood_light_color:ye,u_vertical_scale:Pe,u_flood_light_intensity:Fe,u_ground_shadow_factor:Qe,u_emissive_strength:Je};return"globe"===en.projection.name&&(tn.u_tile_id=[N.canonical.x,N.canonical.y,1<<N.canonical.z],tn.u_zoom_transition=J,tn.u_inv_rot_matrix=he,tn.u_merc_center=re,tn.u_up_dir=en.projection.upVector(new l.aO(0,0,0),re[0]*l.a3,re[1]*l.a3),tn.u_height_lift=H),tn},bu=(v,r,d)=>({u_matrix:v,u_edge_radius:r,u_vertical_scale:d}),Ol=(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe)=>{const Qe=$a(v,r,d,b,M,R,N,J,re,he,ye,Pe,Fe,1,[0,0,0],0),Je={u_height_factor:-Math.pow(2,N.overscaledZ)/H.tileSize/8};return l.W(Qe,nr(r,H),Je)},sl=(v,r)=>({u_matrix:v,u_emissive_strength:r}),Ca=(v,r,d,b)=>l.W(sl(v,r),nr(d,b)),Xe=(v,r,d)=>({u_matrix:v,u_world:d,u_emissive_strength:r}),ke=(v,r,d,b,M)=>l.W(Ca(v,r,d,b),{u_world:M}),_t=(v,r,d,b)=>{const M=l.a3/d.tileSize;return{u_matrix:v,u_camera_to_center_distance:r.getCameraToCenterDistance(b),u_extrude_scale:[r.pixelsToGLUnits[0]/M,r.pixelsToGLUnits[1]/M]}},He=(v,r,d=1)=>({u_matrix:v,u_color:r.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),Zt=l.ad.create(),Vo=(v,r,d,b,M,R,N)=>{const H=v.transform,J="globe"===H.projection.name,re=J?l.bD(H.zoom,r.canonical)*H._pixelsPerMercatorPixel:l.bB(d,1,R),he={u_matrix:r.projMatrix,u_extrude_scale:re,u_intensity:N,u_inv_rot_matrix:Zt,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(J){he.u_inv_rot_matrix=b,he.u_merc_center=M,he.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],he.u_zoom_transition=l.a1(H.zoom);const ye=M[0]*l.a3,Pe=M[1]*l.a3;he.u_up_dir=H.projection.upVector(new l.aO(0,0,0),ye,Pe)}return he};function dr(v,[r,d,b,M],[R,N]){if(R===N)return[0,0,0,0];const H=255*(v-1)/(v*(N-R));return[r*H,d*H,b*H,M*H]}function Xa(v,r,[d,b]){return d===b?0:.5/v+(r-d)*(v-1)/(v*(b-d))}const xl=(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je,ot,st,Pt,Ft,Vt)=>({u_matrix:v,u_normalize_matrix:r,u_globe_matrix:d,u_merc_matrix:b,u_grid_matrix:M,u_tl_parent:R,u_scale_parent:re,u_fade_t:he.mix,u_opacity:he.opacity*ye.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ye.paint.get("raster-brightness-min"),u_brightness_high:ye.paint.get("raster-brightness-max"),u_saturation_factor:l.bE(ye.paint.get("raster-saturation")),u_contrast_factor:l.bF(ye.paint.get("raster-contrast")),u_spin_weights:Tc(ye.paint.get("raster-hue-rotate")),u_perspective_transform:Pe,u_raster_elevation:Fe,u_zoom_transition:N,u_merc_center:H,u_cutoff_params:J,u_colorization_mix:dr(l.bG,Je,st),u_colorization_offset:Xa(l.bG,ot,st),u_color_ramp:Qe,u_texture_offset:[Ft/(Pt+2*Ft),Pt/(Pt+2*Ft)],u_texture_res:[Pt+2*Ft,Pt+2*Ft],u_emissive_strength:Vt});function Tc(v){v*=Math.PI/180;const r=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*r-d+1)/3,(Math.sqrt(3)*r-d+1)/3]}const al=.05,ws=(v,r,d,b,M,R,N,H,J,re,he,ye)=>({u_matrix:v,u_normalize_matrix:r,u_globe_matrix:d,u_merc_matrix:b,u_grid_matrix:M,u_tl_parent:R,u_scale_parent:re,u_fade_t:he.mix,u_opacity:he.opacity,u_image0:0,u_image1:1,u_raster_elevation:ye,u_zoom_transition:N,u_merc_center:H,u_cutoff_params:J}),Gc=(v,r,d,b,M,R,N,H,J,re)=>({u_particle_texture:v,u_particle_texture_side_len:r,u_tile_offset:d,u_velocity:b,u_color_ramp:R,u_velocity_res:M,u_max_speed:N,u_uv_offset:H,u_data_scale:[255*J[0],255*J[1]],u_data_offset:re,u_particle_pos_scale:1.1,u_particle_pos_offset:[al,al]}),Wc=(v,r,d,b,M,R,N,H,J,re)=>({u_particle_texture:v,u_particle_texture_side_len:r,u_velocity:d,u_velocity_res:b,u_max_speed:M,u_speed_factor:R,u_reset_rate:N,u_rand_seed:Math.random(),u_uv_offset:H,u_data_scale:[255*J[0],255*J[1]],u_data_offset:re,u_particle_pos_scale:1.1,u_particle_pos_offset:[al,al]}),Fh=l.ad.create(),_s=(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je,ot,st)=>{const Pt=M.transform,Ft={u_is_size_zoom_constant:+("constant"===v||"source"===v),u_is_size_feature_constant:+("constant"===v||"camera"===v),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Pt.getCameraToCenterDistance(Je),u_rotate_symbol:+d,u_aspect_ratio:Pt.width/Pt.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:R,u_label_plane_matrix:N,u_coord_matrix:H,u_is_text:+J,u_pitch_with_map:+b,u_texsize:re,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Fh,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Fh,u_up_vector:[0,-1,0],u_color_adj_mat:ot,u_icon_transition:st||0};return"globe"===Je.name&&(Ft.u_tile_id=[he.canonical.x,he.canonical.y,1<<he.canonical.z],Ft.u_zoom_transition=ye,Ft.u_inv_rot_matrix=Fe,Ft.u_merc_center=Pe,Ft.u_camera_forward=Pt._camera.forward(),Ft.u_ecef_origin=l.bH(Pt.globeMatrix,he.toUnwrapped()),Ft.u_tile_matrix=Float32Array.from(Pt.globeMatrix),Ft.u_up_vector=Qe),Ft},Sd=(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je,ot)=>l.W(_s(v,r,d,b,M,R,N,H,J,re,ye,Pe,Fe,Qe,Je,ot),{u_gamma_scale:b?M.transform.getCameraToCenterDistance(ot)*Math.cos(M.terrain?0:M.transform._pitch):1,u_device_pixel_ratio:l.e.devicePixelRatio,u_is_halo:+he,undefined:void 0}),qc=(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je)=>l.W(Sd(v,r,d,b,M,R,N,H,!0,J,!0,he,ye,Pe,Fe,Qe,Je),{u_texsize_icon:re,u_texture_icon:1}),dh=(v,r,d,b)=>({u_matrix:v,u_emissive_strength:r,u_opacity:d,u_color:b}),pd=(v,r,d,b,M,R,N,H)=>l.W(function(J,re,he,ye,Pe){const{width:Fe,height:Qe}=ye.imageManager.getPixelSize(re),Je=Math.pow(2,Pe.tileID.overscaledZ),ot=Pe.tileSize*Math.pow(2,ye.transform.tileZoom)/Je,st=ot*(Pe.tileID.canonical.x+Pe.tileID.wrap*Je),Pt=ot*Pe.tileID.canonical.y;return{u_image:0,u_pattern_tl:he.tl,u_pattern_br:he.br,u_texsize:[Fe,Qe],u_pattern_size:he.displaySize,u_tile_units_to_pixels:1/l.bB(Pe,1,ye.transform.tileZoom),u_pixel_coord_upper:[st>>16,Pt>>16],u_pixel_coord_lower:[65535&st,65535&Pt]}}(0,R,N,b,H),{u_matrix:v,u_emissive_strength:r,u_opacity:d}),Td=new Float32Array(l.ad.identity([])),Vh=(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe=[0,0,0],Qe)=>{const Je=M.style.light,ot=Je.properties.get("position"),st=[-ot.x,-ot.y,ot.z],Pt=l.bC.create();"viewport"===Je.properties.get("anchor")&&(l.bC.fromRotation(Pt,-M.transform.angle),l._.transformMat3(st,st,Pt));const Ft="MASK"===he.alphaMode,Vt=Je.properties.get("color").toRenderColor(null),en=Pe.paint.get("model-ambient-occlusion-intensity"),tn=Pe.paint.get("model-color").constantOr(l.C.white).toRenderColor(null),yn=Pe.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:v,u_lighting_matrix:r,u_normal_matrix:d,u_node_matrix:b||Td,u_lightpos:st,u_lightintensity:Je.properties.get("intensity"),u_lightcolor:[Vt.r,Vt.g,Vt.b],u_camera_pos:Fe,u_opacity:R,u_baseTextureIsAlpha:0,u_alphaMask:+Ft,u_alphaCutoff:he.alphaCutoff,u_baseColorFactor:[N.r,N.g,N.b,N.a],u_emissiveFactor:[H[0],H[1],H[2],1],u_metallicFactor:J,u_roughnessFactor:re,u_baseColorTexture:Ms.BaseColor,u_metallicRoughnessTexture:Ms.MetallicRoughness,u_normalTexture:Ms.Normal,u_occlusionTexture:Ms.Occlusion,u_emissionTexture:Ms.Emission,u_lutTexture:Ms.LUT,u_color_mix:[tn.r,tn.g,tn.b,yn],u_aoIntensity:en,u_emissive_strength:ye,u_occlusionTextureTransform:Qe||[0,0,0,0]}},Nc=(v,r=Td,d=Td)=>({u_matrix:v,u_instance:r,u_node_matrix:d}),w0=(v,r,d,b,M)=>({u_matrix:Float32Array.from(v),u_anchorPos:r,u_screenSizePx:d,u_occluderSizePx:b,u_color:M}),$h={fillExtrusion:v=>({u_matrix:new l.a6(v),u_lightpos:new l.aq(v),u_lightintensity:new l.aa(v),u_lightcolor:new l.aq(v),u_vertical_gradient:new l.aa(v),u_opacity:new l.aa(v),u_edge_radius:new l.aa(v),u_ao:new l.a8(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_up_dir:new l.aq(v),u_height_lift:new l.aa(v),u_flood_light_color:new l.aq(v),u_vertical_scale:new l.aa(v),u_flood_light_intensity:new l.aa(v),u_ground_shadow_factor:new l.aq(v),u_emissive_strength:new l.aa(v)}),fillExtrusionDepth:v=>({u_matrix:new l.a6(v),u_edge_radius:new l.aa(v),u_vertical_scale:new l.aa(v)}),fillExtrusionPattern:v=>({u_matrix:new l.a6(v),u_lightpos:new l.aq(v),u_lightintensity:new l.aa(v),u_lightcolor:new l.aq(v),u_vertical_gradient:new l.aa(v),u_height_factor:new l.aa(v),u_edge_radius:new l.aa(v),u_ao:new l.a8(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_up_dir:new l.aq(v),u_height_lift:new l.aa(v),u_image:new l.a7(v),u_texsize:new l.a8(v),u_pixel_coord_upper:new l.a8(v),u_pixel_coord_lower:new l.a8(v),u_tile_units_to_pixels:new l.aa(v),u_opacity:new l.aa(v)}),fillExtrusionGroundEffect:v=>({u_matrix:new l.a6(v),u_opacity:new l.aa(v),u_ao_pass:new l.aa(v),u_meter_to_tile:new l.aa(v),u_ao:new l.a8(v),u_flood_light_intensity:new l.aa(v),u_flood_light_color:new l.aq(v),u_attenuation:new l.aa(v),u_edge_radius:new l.aa(v),u_fb:new l.a7(v),u_fb_size:new l.aa(v)}),fill:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v)}),fillPattern:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_image:new l.a7(v),u_texsize:new l.a8(v),u_pixel_coord_upper:new l.a8(v),u_pixel_coord_lower:new l.a8(v),u_tile_units_to_pixels:new l.aa(v)}),fillOutline:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_world:new l.a8(v)}),fillOutlinePattern:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_world:new l.a8(v),u_image:new l.a7(v),u_texsize:new l.a8(v),u_pixel_coord_upper:new l.a8(v),u_pixel_coord_lower:new l.a8(v),u_tile_units_to_pixels:new l.aa(v)}),circle:l.bI,collisionBox:v=>({u_matrix:new l.a6(v),u_camera_to_center_distance:new l.aa(v),u_extrude_scale:new l.a8(v)}),collisionCircle:v=>({u_matrix:new l.a6(v),u_inv_matrix:new l.a6(v),u_camera_to_center_distance:new l.aa(v),u_viewport_size:new l.a8(v)}),debug:v=>({u_color:new l.a9(v),u_matrix:new l.a6(v),u_overlay:new l.a7(v),u_overlay_scale:new l.aa(v)}),clippingMask:v=>({u_matrix:new l.a6(v)}),heatmap:v=>({u_extrude_scale:new l.aa(v),u_intensity:new l.aa(v),u_matrix:new l.a6(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_up_dir:new l.aq(v)}),heatmapTexture:v=>({u_image:new l.a7(v),u_color_ramp:new l.a7(v),u_opacity:new l.aa(v)}),hillshade:v=>({u_matrix:new l.a6(v),u_image:new l.a7(v),u_latrange:new l.a8(v),u_light:new l.a8(v),u_shadow:new l.a9(v),u_highlight:new l.a9(v),u_emissive_strength:new l.aa(v),u_accent:new l.a9(v)}),hillshadePrepare:v=>({u_matrix:new l.a6(v),u_image:new l.a7(v),u_dimension:new l.a8(v),u_zoom:new l.aa(v)}),line:l.bJ,linePattern:l.bK,raster:v=>({u_matrix:new l.a6(v),u_normalize_matrix:new l.a6(v),u_globe_matrix:new l.a6(v),u_merc_matrix:new l.a6(v),u_grid_matrix:new l.ar(v),u_tl_parent:new l.a8(v),u_scale_parent:new l.aa(v),u_fade_t:new l.aa(v),u_opacity:new l.aa(v),u_image0:new l.a7(v),u_image1:new l.a7(v),u_brightness_low:new l.aa(v),u_brightness_high:new l.aa(v),u_saturation_factor:new l.aa(v),u_contrast_factor:new l.aa(v),u_spin_weights:new l.aq(v),u_perspective_transform:new l.a8(v),u_raster_elevation:new l.aa(v),u_zoom_transition:new l.aa(v),u_merc_center:new l.a8(v),u_cutoff_params:new l.as(v),u_colorization_mix:new l.as(v),u_colorization_offset:new l.aa(v),u_color_ramp:new l.a7(v),u_texture_offset:new l.a8(v),u_texture_res:new l.a8(v),u_emissive_strength:new l.aa(v)}),rasterParticle:v=>({u_matrix:new l.a6(v),u_normalize_matrix:new l.a6(v),u_globe_matrix:new l.a6(v),u_merc_matrix:new l.a6(v),u_grid_matrix:new l.ar(v),u_tl_parent:new l.a8(v),u_scale_parent:new l.aa(v),u_fade_t:new l.aa(v),u_opacity:new l.aa(v),u_image0:new l.a7(v),u_image1:new l.a7(v),u_raster_elevation:new l.aa(v),u_zoom_transition:new l.aa(v),u_merc_center:new l.a8(v),u_cutoff_params:new l.as(v)}),rasterParticleTexture:v=>({u_texture:new l.a7(v),u_opacity:new l.aa(v)}),rasterParticleDraw:v=>({u_particle_texture:new l.a7(v),u_particle_texture_side_len:new l.aa(v),u_tile_offset:new l.a8(v),u_velocity:new l.a7(v),u_color_ramp:new l.a7(v),u_velocity_res:new l.a8(v),u_max_speed:new l.aa(v),u_uv_offset:new l.a8(v),u_data_scale:new l.a8(v),u_data_offset:new l.aa(v),u_particle_pos_scale:new l.aa(v),u_particle_pos_offset:new l.a8(v)}),rasterParticleUpdate:v=>({u_particle_texture:new l.a7(v),u_particle_texture_side_len:new l.aa(v),u_velocity:new l.a7(v),u_velocity_res:new l.a8(v),u_max_speed:new l.aa(v),u_speed_factor:new l.aa(v),u_reset_rate:new l.aa(v),u_rand_seed:new l.aa(v),u_uv_offset:new l.a8(v),u_data_scale:new l.a8(v),u_data_offset:new l.aa(v),u_particle_pos_scale:new l.aa(v),u_particle_pos_offset:new l.a8(v)}),symbolIcon:v=>({u_is_size_zoom_constant:new l.a7(v),u_is_size_feature_constant:new l.a7(v),u_size_t:new l.aa(v),u_size:new l.aa(v),u_camera_to_center_distance:new l.aa(v),u_rotate_symbol:new l.a7(v),u_aspect_ratio:new l.aa(v),u_fade_change:new l.aa(v),u_matrix:new l.a6(v),u_label_plane_matrix:new l.a6(v),u_coord_matrix:new l.a6(v),u_is_text:new l.a7(v),u_pitch_with_map:new l.a7(v),u_texsize:new l.a8(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_camera_forward:new l.aq(v),u_tile_matrix:new l.a6(v),u_up_vector:new l.aq(v),u_ecef_origin:new l.aq(v),u_texture:new l.a7(v),u_icon_transition:new l.aa(v),u_color_adj_mat:new l.a6(v)}),symbolSDF:v=>({u_is_size_zoom_constant:new l.a7(v),u_is_size_feature_constant:new l.a7(v),u_size_t:new l.aa(v),u_size:new l.aa(v),u_camera_to_center_distance:new l.aa(v),u_rotate_symbol:new l.a7(v),u_aspect_ratio:new l.aa(v),u_fade_change:new l.aa(v),u_matrix:new l.a6(v),u_label_plane_matrix:new l.a6(v),u_coord_matrix:new l.a6(v),u_is_text:new l.a7(v),u_pitch_with_map:new l.a7(v),u_texsize:new l.a8(v),u_texture:new l.a7(v),u_gamma_scale:new l.aa(v),u_device_pixel_ratio:new l.aa(v),u_tile_id:new l.aq(v),u_zoom_transition:new l.aa(v),u_inv_rot_matrix:new l.a6(v),u_merc_center:new l.a8(v),u_camera_forward:new l.aq(v),u_tile_matrix:new l.a6(v),u_up_vector:new l.aq(v),u_ecef_origin:new l.aq(v),u_is_halo:new l.a7(v)}),symbolTextAndIcon:v=>({u_is_size_zoom_constant:new l.a7(v),u_is_size_feature_constant:new l.a7(v),u_size_t:new l.aa(v),u_size:new l.aa(v),u_camera_to_center_distance:new l.aa(v),u_rotate_symbol:new l.a7(v),u_aspect_ratio:new l.aa(v),u_fade_change:new l.aa(v),u_matrix:new l.a6(v),u_label_plane_matrix:new l.a6(v),u_coord_matrix:new l.a6(v),u_is_text:new l.a7(v),u_pitch_with_map:new l.a7(v),u_texsize:new l.a8(v),u_texsize_icon:new l.a8(v),u_texture:new l.a7(v),u_texture_icon:new l.a7(v),u_gamma_scale:new l.aa(v),u_device_pixel_ratio:new l.aa(v),u_is_halo:new l.a7(v)}),background:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_opacity:new l.aa(v),u_color:new l.a9(v)}),backgroundPattern:v=>({u_matrix:new l.a6(v),u_emissive_strength:new l.aa(v),u_opacity:new l.aa(v),u_image:new l.a7(v),u_pattern_tl:new l.a8(v),u_pattern_br:new l.a8(v),u_texsize:new l.a8(v),u_pattern_size:new l.a8(v),u_pixel_coord_upper:new l.a8(v),u_pixel_coord_lower:new l.a8(v),u_tile_units_to_pixels:new l.aa(v)}),terrainRaster:v=>({u_matrix:new l.a6(v),u_image0:new l.a7(v),u_skirt_height:new l.aa(v),u_ground_shadow_factor:new l.aq(v)}),skybox:v=>({u_matrix:new l.a6(v),u_sun_direction:new l.aq(v),u_cubemap:new l.a7(v),u_opacity:new l.aa(v),u_temporal_offset:new l.aa(v)}),skyboxGradient:v=>({u_matrix:new l.a6(v),u_color_ramp:new l.a7(v),u_center_direction:new l.aq(v),u_radius:new l.aa(v),u_opacity:new l.aa(v),u_temporal_offset:new l.aa(v)}),skyboxCapture:v=>({u_matrix_3f:new l.ar(v),u_sun_direction:new l.aq(v),u_sun_intensity:new l.aa(v),u_color_tint_r:new l.as(v),u_color_tint_m:new l.as(v),u_luminance:new l.aa(v)}),globeRaster:v=>({u_proj_matrix:new l.a6(v),u_globe_matrix:new l.a6(v),u_normalize_matrix:new l.a6(v),u_merc_matrix:new l.a6(v),u_zoom_transition:new l.aa(v),u_merc_center:new l.a8(v),u_image0:new l.a7(v),u_grid_matrix:new l.ar(v),u_skirt_height:new l.aa(v),u_far_z_cutoff:new l.aa(v),u_frustum_tl:new l.aq(v),u_frustum_tr:new l.aq(v),u_frustum_br:new l.aq(v),u_frustum_bl:new l.aq(v),u_globe_pos:new l.aq(v),u_globe_radius:new l.aa(v),u_viewport:new l.a8(v)}),globeAtmosphere:v=>({u_frustum_tl:new l.aq(v),u_frustum_tr:new l.aq(v),u_frustum_br:new l.aq(v),u_frustum_bl:new l.aq(v),u_horizon:new l.aa(v),u_transition:new l.aa(v),u_fadeout_range:new l.aa(v),u_color:new l.as(v),u_high_color:new l.as(v),u_space_color:new l.as(v),u_temporal_offset:new l.aa(v),u_horizon_angle:new l.aa(v)}),model:v=>({u_matrix:new l.a6(v),u_lighting_matrix:new l.a6(v),u_normal_matrix:new l.a6(v),u_node_matrix:new l.a6(v),u_lightpos:new l.aq(v),u_lightintensity:new l.aa(v),u_lightcolor:new l.aq(v),u_camera_pos:new l.aq(v),u_opacity:new l.aa(v),u_baseColorFactor:new l.as(v),u_emissiveFactor:new l.as(v),u_metallicFactor:new l.aa(v),u_roughnessFactor:new l.aa(v),u_baseTextureIsAlpha:new l.a7(v),u_alphaMask:new l.a7(v),u_alphaCutoff:new l.aa(v),u_baseColorTexture:new l.a7(v),u_metallicRoughnessTexture:new l.a7(v),u_normalTexture:new l.a7(v),u_occlusionTexture:new l.a7(v),u_emissionTexture:new l.a7(v),u_lutTexture:new l.a7(v),u_color_mix:new l.as(v),u_aoIntensity:new l.aa(v),u_emissive_strength:new l.aa(v),u_occlusionTextureTransform:new l.as(v)}),modelDepth:v=>({u_matrix:new l.a6(v),u_instance:new l.a6(v),u_node_matrix:new l.a6(v)}),groundShadow:v=>({u_matrix:new l.a6(v),u_ground_shadow_factor:new l.aq(v)}),stars:v=>({u_matrix:new l.a6(v),u_up:new l.aq(v),u_right:new l.aq(v),u_intensity_multiplier:new l.aa(v)}),occlusion:v=>({u_matrix:new l.a6(v),u_anchorPos:new l.aq(v),u_screenSizePx:new l.a8(v),u_occluderSizePx:new l.a8(v),u_color:new l.as(v)})};function Xd(v,r,d){const b=r.createTileMatrix(v,v.worldSize,d.toUnwrapped());return l.ad.multiply(new Float32Array(16),v.projMatrix,b)}function Md(v,r,d){if(r.projection.name===d.projection.name)return v.projMatrix;const b=d.clone();return b.setProjection(r.projection),Xd(b,r.getProjection(),v)}function uu(v,r,d){return r.name===d.projection.name?v.projMatrix:Xd(d,r,v)}let Xc;function H0(v,r,d,b,M,R,N){const H=v.context,J=H.gl,re=v.transform,he=v.getOrCreateProgram("collisionBox"),ye=[];let Pe=0,Fe=0;for(let Vt=0;Vt<b.length;Vt++){const en=b[Vt],tn=r.getTile(en),yn=tn.getBucket(d);if(!yn)continue;const lt=Md(en,yn,re);let $t=lt;0===M[0]&&0===M[1]||($t=v.translatePosMatrix(lt,tn,M,R));const Sn=N?yn.textCollisionBox:yn.iconCollisionBox,ci=yn.collisionCircleArray;if(ci.length>0){const Dn=l.ad.create(),gn=$t;l.ad.mul(Dn,yn.placementInvProjMatrix,re.glCoordMatrix),l.ad.mul(Dn,Dn,yn.placementViewportMatrix),ye.push({circleArray:ci,circleOffset:Fe,transform:gn,invTransform:Dn,projection:yn.getProjection()}),Pe+=ci.length/4,Fe=Pe}Sn&&(v.terrain&&v.terrain.setupElevationDraw(tn,he),he.draw(v,J.LINES,l.ae.disabled,l.ag.disabled,v.colorModeForRenderPass(),l.af.disabled,_t($t,re,tn,yn.getProjection()),d.id,Sn.layoutVertexBuffer,Sn.indexBuffer,Sn.segments,null,re.zoom,null,[Sn.collisionVertexBuffer,Sn.collisionVertexBufferExt]))}if(!N||!ye.length)return;const Qe=v.getOrCreateProgram("collisionCircle"),Je=new l.bL;Je.resize(4*Pe),Je._trim();let ot=0;for(const Vt of ye)for(let en=0;en<Vt.circleArray.length/4;en++){const tn=4*en,yn=Vt.circleArray[tn+0],lt=Vt.circleArray[tn+1],$t=Vt.circleArray[tn+2],Sn=Vt.circleArray[tn+3];Je.emplace(ot++,yn,lt,$t,Sn,0),Je.emplace(ot++,yn,lt,$t,Sn,1),Je.emplace(ot++,yn,lt,$t,Sn,2),Je.emplace(ot++,yn,lt,$t,Sn,3)}(!Xc||Xc.length<2*Pe)&&(Xc=function(Vt){const en=2*Vt,tn=new l.bu;tn.resize(en),tn._trim();for(let yn=0;yn<en;yn++){const lt=6*yn;tn.uint16[lt+0]=4*yn+0,tn.uint16[lt+1]=4*yn+1,tn.uint16[lt+2]=4*yn+2,tn.uint16[lt+3]=4*yn+2,tn.uint16[lt+4]=4*yn+3,tn.uint16[lt+5]=4*yn+0}return tn}(Pe));const st=H.createIndexBuffer(Xc,!0),Pt=H.createVertexBuffer(Je,l.bM.members,!0);for(const Vt of ye){const en={u_matrix:Vt.transform,u_inv_matrix:Vt.invTransform,u_camera_to_center_distance:(Ft=re).getCameraToCenterDistance(Vt.projection),u_viewport_size:[Ft.width,Ft.height]};Qe.draw(v,J.TRIANGLES,l.ae.disabled,l.ag.disabled,v.colorModeForRenderPass(),l.af.disabled,en,d.id,Pt,st,l.b.simpleSegment(0,2*Vt.circleOffset,Vt.circleArray.length,Vt.circleArray.length/2),null,re.zoom)}var Ft;Pt.destroy(),st.destroy()}const As=l.ad.create();function _a(v){const r=v._camera.getWorldToCamera(v.worldSize,1),d=l.ad.multiply([],r,v.globeMatrix);l.ad.invert(d,d);const b=[0,0,0],M=[0,1,0,0];return l.aA.transformMat4(M,M,d),b[0]=M[0],b[1]=M[1],b[2]=M[2],l._.normalize(b,b),b}function Ad({width:v,height:r,anchor:d,textOffset:b,textScale:M},R){const{horizontalAlign:N,verticalAlign:H}=l.bQ(d),J=-(N-.5)*v,re=-(H-.5)*r,he=l.bP(d,b);return new l.P((J/M+he[0])*R,(re/M+he[1])*R)}function Ch(v,r,d,b,M,R,N,H,J,re,he){const ye=v.text.placedSymbolArray,Pe=v.text.dynamicLayoutVertexArray,Fe=v.icon.dynamicLayoutVertexArray,Qe={},Je=v.getProjection(),ot=uu(H,Je,R),st=R.elevation,Pt=Je.upVectorScale(H.canonical,R.center.lat,R.worldSize).metersToTile;Pe.clear();for(let Ft=0;Ft<ye.length;Ft++){const Vt=ye.get(Ft),{tileAnchorX:en,tileAnchorY:tn,numGlyphs:yn}=Vt,lt=Vt.hidden||!Vt.crossTileID||v.allowVerticalPlacement&&!Vt.placedOrientation?null:b[Vt.crossTileID];if(lt){let $t=0,Sn=0,ci=0;if(st){const ie=st?st.getAtTileOffset(H,en,tn):0,[Ne,at,ln]=Je.upVector(H.canonical,en,tn);$t=ie*Ne*Pt,Sn=ie*at*Pt,ci=ie*ln*Pt}let[Dn,gn,bi,io]=yo(Vt.projectedAnchorX+$t,Vt.projectedAnchorY+Sn,Vt.projectedAnchorZ+ci,d?ot:N);const ro=co(R.getCameraToCenterDistance(Je),io);let te=M.evaluateSizeForFeature(v.textSizeData,re,Vt)*ro/l.bN;d&&(te*=v.tilePixelRatio/J);const L=Ad(lt,te);d?(({x:Dn,y:gn,z:bi}=Je.projectTilePoint(en+L.x,tn+L.y,H.canonical)),[Dn,gn,bi]=yo(Dn+$t,gn+Sn,bi+ci,N)):(r&&L._rotate(-R.angle),Dn+=L.x,gn+=L.y,bi=0);const j=v.allowVerticalPlacement&&Vt.placedOrientation===l.aE.vertical?Math.PI/2:0;for(let ie=0;ie<yn;ie++)l.aH(Pe,Dn,gn,bi,j);he&&Vt.associatedIconIndex>=0&&(Qe[Vt.associatedIconIndex]={x:Dn,y:gn,z:bi,angle:j})}else Fr(yn,Pe)}if(he){Fe.clear();const Ft=v.icon.placedSymbolArray;for(let Vt=0;Vt<Ft.length;Vt++){const en=Ft.get(Vt),{numGlyphs:tn}=en,yn=Qe[Vt];if(en.hidden||!yn)Fr(tn,Fe);else{const{x:lt,y:$t,z:Sn,angle:ci}=yn;for(let Dn=0;Dn<tn;Dn++)l.aH(Fe,lt,$t,Sn,ci)}}v.icon.dynamicLayoutVertexBuffer.updateData(Fe)}v.text.dynamicLayoutVertexBuffer.updateData(Pe)}function jh(v,r,d,b,M,R,N={}){const H=d.paint.get("icon-translate"),J=d.paint.get("text-translate"),re=d.paint.get("icon-translate-anchor"),he=d.paint.get("text-translate-anchor"),ye=d.layout.get("icon-rotation-alignment"),Pe=d.layout.get("text-rotation-alignment"),Fe=d.layout.get("icon-pitch-alignment"),Qe=d.layout.get("text-pitch-alignment"),Je=d.layout.get("icon-keep-upright"),ot=d.layout.get("text-keep-upright"),st=d.paint.get("icon-color-saturation"),Pt=d.paint.get("icon-color-contrast"),Ft=d.paint.get("icon-color-brightness-min"),Vt=d.paint.get("icon-color-brightness-max"),en=d.paint.get("icon-occlusion-opacity").constantOr(0),tn=d.paint.get("text-occlusion-opacity").constantOr(0),yn=v.context,lt=yn.gl,$t=v.transform,Sn="map"===ye,ci="map"===Pe,Dn="map"===Fe,gn="map"===Qe,bi=1!==en,io=1!==tn,ro=void 0!==d.layout.get("symbol-sort-key").constantOr(1);let te=!1;const L=v.depthModeForSublayer(0,l.ae.ReadOnly),j=[l.aj($t.center.lng),l.ak($t.center.lat)],ie=d.layout.get("text-variable-anchor"),Ne="globe"===$t.projection.name,at=[],ln=[0,-1,0];for(const hn of b){const Qn=r.getTile(hn),Wn=Qn.getBucket(d);if(!Wn||"mercator"===Wn.projection.name&&Ne||Wn.fullyClipped)continue;const Yi="globe"===Wn.projection.name,yr=Yi?l.a1($t.zoom):0,Sr=uu(hn,Wn.getProjection(),$t),$r=$t.calculatePixelsToTileUnitsMatrix(Qn),is=ie&&Wn.hasTextData(),tl=Wn.hasIconTextFit()&&is&&Wn.hasIconData(),Ds=Wn.getProjection().createInversionMatrix($t,hn.canonical),os=()=>{const ba=Sn&&"point"!==d.layout.get("symbol-placement"),Ki=[];d.hasInitialOcclusionOpacityProperties&&bi&&v.symbolParams.useOcclusionQueries&&!Yi&&!Ne&&Ki.push("OCCLUSION_QUERIES"),d.hasInitialOcclusionOpacityProperties||Ki.push("SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH");const er=ba||tl,us=d.paint.get("icon-image-cross-fade").constantOr(0);v.terrainRenderModeElevated()&&Dn&&Ki.push("PITCH_WITH_MAP_TERRAIN"),Yi&&(Ki.push("PROJECTION_GLOBE_VIEW"),er&&Ki.push("PROJECTED_POS_ON_VIEWPORT")),us>0&&Ki.push("ICON_TRANSITION"),Wn.icon.zOffsetVertexBuffer&&Ki.push("Z_OFFSET"),Ki.push("TERRAIN_DEPTH_D24"),0===st&&0===Pt&&0===Ft&&1===Vt||Ki.push("COLOR_ADJUSTMENT");const ma=Wn.icon.programConfigurations.get(d.id),ai=v.getOrCreateProgram(Wn.sdfIcons?"symbolSDF":"symbolIcon",{config:ma,defines:Ki});let Ju;const Id=Qn.imageAtlasTexture?Qn.imageAtlasTexture.size:[0,0],Iu=Wn.iconSizeData,Lu=l.aD(Iu,$t.zoom),Oh=Dn||0!==$t.pitch,O0=zn(Sr,Qn.tileID.canonical,Dn,Sn,$t,Wn.getProjection(),$r),Ka=go(Sr,Qn.tileID.canonical,Dn,Sn,$t,Wn.getProjection(),$r),e1=v.translatePosMatrix(Ka,Qn,H,re,!0),_1=v.translatePosMatrix(Sr,Qn,H,re),O1=er?As:O0,Jh=Sn&&!Dn&&!ba;let y1=ln;!Ne&&!$t.mercatorFromTransition||Sn||(y1=_a($t));const Mo=Yi?y1:ln;if(Wn.sdfIcons&&!Wn.iconsInText)Ju=Sd(Iu.kind,Lu,Jh,Dn,v,_1,O1,e1,!1,Id,!0,hn,yr,j,Ds,Mo,Wn.getProjection());else{const Bu=d.getColorAdjustmentMatrix(st,Pt,Ft,Vt);Ju=_s(Iu.kind,Lu,Jh,Dn,v,_1,O1,e1,!1,Id,hn,yr,j,Ds,Mo,Wn.getProjection(),Bu,us)}const ua=Qn.imageAtlasTexture?Qn.imageAtlasTexture:null,tp=1!==d.layout.get("icon-size").constantOr(0)||Wn.iconsNeedLinear,t1=Wn.sdfIcons||v.options.rotating||v.options.zooming||tp||Oh?lt.LINEAR:lt.NEAREST,yl=Wn.sdfIcons&&0!==d.paint.get("icon-halo-width").constantOr(1),ed=v.terrain&&Dn&&ba?l.ad.invert(l.ad.create(),O0):As;if(ba&&Wn.icon){const Bu=$t.elevation,nl=Bu?Bu.getAtTileOffsetFunc(hn,$t.center.lat,$t.worldSize,Wn.getProjection()):null,kp=vi(Sr,Qn.tileID.canonical,Dn,Sn,$t,Wn.getProjection(),$r);qo(Wn,Sr,v,!1,kp,Ka,Dn,Je,nl,hn)}return{program:ai,buffers:Wn.icon,uniformValues:Ju,atlasTexture:ua,atlasTextureIcon:null,atlasInterpolation:t1,atlasInterpolationIcon:null,isSDF:Wn.sdfIcons,hasHalo:yl,tile:Qn,labelPlaneMatrixInv:ed}},ea=()=>{const ba=ci&&"point"!==d.layout.get("symbol-placement"),Ki=[],er=ba||ie||tl;d.hasInitialOcclusionOpacityProperties&&io&&v.symbolParams.useOcclusionQueries&&!Yi&&!Ne&&Ki.push("OCCLUSION_QUERIES"),d.hasInitialOcclusionOpacityProperties||Ki.push("SYMBOL_OCCLUSION_BY_TERRAIN_DEPTH"),v.terrainRenderModeElevated()&&gn&&Ki.push("PITCH_WITH_MAP_TERRAIN"),Yi&&(Ki.push("PROJECTION_GLOBE_VIEW"),er&&Ki.push("PROJECTED_POS_ON_VIEWPORT")),Wn.text.zOffsetVertexBuffer&&Ki.push("Z_OFFSET"),Ki.push("TERRAIN_DEPTH_D24");const us=Wn.text.programConfigurations.get(d.id),ma=v.getOrCreateProgram(Wn.iconsInText?"symbolTextAndIcon":"symbolSDF",{config:us,defines:Ki});let ai,Ju=[0,0],Id=null;const Iu=Wn.textSizeData;Wn.iconsInText&&(Ju=Qn.imageAtlasTexture?Qn.imageAtlasTexture.size:[0,0],Id=Qn.imageAtlasTexture?Qn.imageAtlasTexture:null,ai=gn||0!==$t.pitch||v.options.rotating||v.options.zooming||"composite"===Iu.kind||"camera"===Iu.kind?lt.LINEAR:lt.NEAREST);const Lu=Qn.glyphAtlasTexture?Qn.glyphAtlasTexture.size:[0,0],Oh=l.aD(Iu,$t.zoom),O0=zn(Sr,Qn.tileID.canonical,gn,ci,$t,Wn.getProjection(),$r),Ka=go(Sr,Qn.tileID.canonical,gn,ci,$t,Wn.getProjection(),$r),e1=v.translatePosMatrix(Ka,Qn,J,he,!0),_1=v.translatePosMatrix(Sr,Qn,J,he),O1=er?As:O0,Jh=ci&&!gn&&!ba;let y1=ln;!Ne&&!$t.mercatorFromTransition||ci||(y1=_a($t));const Mo=Yi?y1:ln;let ua;ua=Wn.iconsInText?qc(Iu.kind,Oh,Jh,gn,v,_1,O1,e1,Lu,Ju,hn,yr,j,Ds,Mo,Wn.getProjection()):Sd(Iu.kind,Oh,Jh,gn,v,_1,O1,e1,!0,Lu,!0,hn,yr,j,Ds,Mo,Wn.getProjection());const tp=Qn.glyphAtlasTexture?Qn.glyphAtlasTexture:null,t1=lt.LINEAR,yl=0!==d.paint.get("text-halo-width").constantOr(1),ed=v.terrain&&gn&&ba?l.ad.invert(l.ad.create(),O0):As;if(ba&&Wn.text){const Bu=$t.elevation,nl=Bu?Bu.getAtTileOffsetFunc(hn,$t.center.lat,$t.worldSize,Wn.getProjection()):null,kp=vi(Sr,Qn.tileID.canonical,gn,ci,$t,Wn.getProjection(),$r);qo(Wn,Sr,v,!0,kp,Ka,gn,ot,nl,hn)}return{program:ma,buffers:Wn.text,uniformValues:ua,atlasTexture:tp,atlasTextureIcon:Id,atlasInterpolation:t1,atlasInterpolationIcon:ai,isSDF:!0,hasHalo:yl,tile:Qn,labelPlaneMatrixInv:ed}},na=Wn.icon.segments.get().length,js=Wn.text.segments.get().length,fs=na&&!N.onlyText?os():null,ya=js&&!N.onlyIcons?ea():null,ll=d.paint.get("icon-opacity").constantOr(1),ia=d.paint.get("text-opacity").constantOr(1);if(ro&&Wn.canOverlap){te=!0;const ba=ll&&!N.onlyText?Wn.icon.segments.get():[],Ki=ia&&!N.onlyIcons?Wn.text.segments.get():[];for(const er of ba)at.push({segments:new l.b([er]),sortKey:er.sortKey,state:fs});for(const er of Ki)at.push({segments:new l.b([er]),sortKey:er.sortKey,state:ya})}else N.onlyText||at.push({segments:ll?Wn.icon.segments:new l.b([]),sortKey:0,state:fs}),N.onlyIcons||at.push({segments:ia?Wn.text.segments:new l.b([]),sortKey:0,state:ya})}te&&at.sort((hn,Qn)=>hn.sortKey-Qn.sortKey);for(const hn of at){const Qn=hn.state;if(Qn)if(v.terrain&&v.terrain.setupElevationDraw(Qn.tile,Qn.program,{useDepthForOcclusion:!d.hasInitialOcclusionOpacityProperties&&$t.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Qn.labelPlaneMatrixInv}),yn.activeTexture.set(lt.TEXTURE0),Qn.atlasTexture&&Qn.atlasTexture.bind(Qn.atlasInterpolation,lt.CLAMP_TO_EDGE,!0),Qn.atlasTextureIcon&&(yn.activeTexture.set(lt.TEXTURE1),Qn.atlasTextureIcon&&Qn.atlasTextureIcon.bind(Qn.atlasInterpolationIcon,lt.CLAMP_TO_EDGE,!0)),v.uploadCommonLightUniforms(v.context,Qn.program),Qn.hasHalo){const Wn=Qn.uniformValues;Wn.u_is_halo=1,G0(Qn.buffers,hn.segments,d,v,Qn.program,L,M,R,Wn,2),Wn.u_is_halo=0}else{if(Qn.isSDF){const Wn=Qn.uniformValues;Qn.hasHalo&&(Wn.u_is_halo=1,G0(Qn.buffers,hn.segments,d,v,Qn.program,L,M,R,Wn,1)),Wn.u_is_halo=0}G0(Qn.buffers,hn.segments,d,v,Qn.program,L,M,R,Qn.uniformValues,1)}}}function G0(v,r,d,b,M,R,N,H,J,re){const he=b.context.gl,ye=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.iconTransitioningVertexBuffer,v.globeExtVertexBuffer,v.zOffsetVertexBuffer];v.occlusionQueryOpacityVertexBuffer.length>0&&ye.push(v.occlusionQueryOpacityVertexBuffer),M.draw(b,he.TRIANGLES,R,N,H,l.af.disabled,J,d.id,v.layoutVertexBuffer,v.indexBuffer,r,d.paint,b.transform.zoom,v.programConfigurations.get(d.id),ye,re)}function Za(v,r,d,b,M,R,N){const H=v.context.gl,J=d.paint.get("fill-pattern"),re=J&&J.constantOr(1);let he,ye,Pe,Fe,Qe;N?(ye=re&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=H.LINES):(ye=re?"fillPattern":"fill",he=H.TRIANGLES);for(const Je of b){const ot=r.getTile(Je);if(re&&!ot.patternsLoaded())continue;const st=ot.getBucket(d);if(!st)continue;v.prepareDrawTile();const Pt=st.programConfigurations.get(d.id),Ft=v.isTileAffectedByFog(Je),Vt=v.getOrCreateProgram(ye,{config:Pt,overrideFog:Ft});re&&(v.context.activeTexture.set(H.TEXTURE0),ot.imageAtlasTexture&&ot.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Pt.updatePaintBuffers());const en=J.constantOr(null);if(en&&ot.imageAtlas){const lt=ot.imageAtlas.patternPositions[en.toString()];lt&&Pt.setConstantPatternPositions(lt)}const tn=v.translatePosMatrix(Je.projMatrix,ot,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor")),yn=d.paint.get("fill-emissive-strength");if(N){Fe=st.indexBuffer2,Qe=st.segments2;const lt=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[H.drawingBufferWidth,H.drawingBufferHeight];Pe="fillOutlinePattern"===ye&&re?ke(tn,yn,v,ot,lt):Xe(tn,yn,lt)}else Fe=st.indexBuffer,Qe=st.segments,Pe=re?Ca(tn,yn,v,ot):sl(tn,yn);v.uploadCommonUniforms(v.context,Vt,Je.toUnwrapped()),Vt.draw(v,he,M,v.stencilModeForClipping(Je),R,l.af.disabled,Pe,d.id,st.layoutVertexBuffer,Fe,Qe,d.paint,v.transform.zoom,Pt,void 0)}}function Mc(v,r,d,b,M,R,N,H){d.resetLayerRenderingStats(v);const J=v.context,re=J.gl,he=v.transform,ye=d.paint.get("fill-extrusion-pattern"),Pe=ye.constantOr(1),Fe=d.paint.get("fill-extrusion-opacity"),Qe=v.style.enable3dLights(),Je=d.paint.get(Qe&&!Pe?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ot=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Je],st=d.layout.get("fill-extrusion-edge-radius"),Pt=st>0&&!d.paint.get("fill-extrusion-rounded-roof"),Ft=Pt?0:st,Vt="globe"===he.projection.name?l.bY():0,en="globe"===he.projection.name,tn=en?l.a1(he.zoom):0,yn=[l.aj(he.center.lng),l.ak(he.center.lat)],lt=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(d.lut).toArray01().slice(0,3),$t=d.paint.get("fill-extrusion-flood-light-intensity"),Sn=d.paint.get("fill-extrusion-vertical-scale"),ci=Bc(v,d.paint.get("fill-extrusion-cutoff-fade-range")),Dn=d.paint.get("fill-extrusion-emissive-strength"),gn=[];let bi;en&&gn.push("PROJECTION_GLOBE_VIEW"),ot[0]>0&&gn.push("FAUX_AO"),Pt&&gn.push("ZERO_ROOF_RADIUS"),H&&gn.push("HAS_CENTROID"),$t>0&&gn.push("FLOOD_LIGHT"),ci.shouldRenderCutoff&&gn.push("RENDER_CUTOFF");const io="shadow"===v.renderPass,ro=v.shadowRenderer,te=io&&!!ro;v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!0);let L=[0,0,0];if(ro){const Ne=v.style.directionalLight,at=v.style.ambientLight;Ne&&at&&(L=hl(v.style,Ne,at)),bi=gn.concat(["SHADOWS_SINGLE_CASCADE"])}const j=te?"fillExtrusionDepth":Pe?"fillExtrusionPattern":"fillExtrusion",ie=d.getLayerRenderingStats();for(const Ne of b){const at=r.getTile(Ne),ln=at.getBucket(d);if(!ln||ln.projection.name!==he.projection.name)continue;let hn=!1;ro&&(hn=0===ro.getMaxCascadeForTile(Ne.toUnwrapped()));const Qn=v.isTileAffectedByFog(Ne),Wn=ln.programConfigurations.get(d.id),Yi=v.getOrCreateProgram(j,{config:Wn,defines:hn?bi:gn,overrideFog:Qn});if(v.terrain&&v.terrain.setupElevationDraw(at,Yi,{useMeterToDem:!0}),!ln.centroidVertexBuffer){const Ds=Yi.attributes.a_centroid_pos;void 0!==Ds&&re.vertexAttrib2f(Ds,0,0)}!io&&ro&&ro.setupShadows(at.tileID.toUnwrapped(),Yi,"vector-tile",at.tileID.overscaledZ),Pe&&(v.context.activeTexture.set(re.TEXTURE0),at.imageAtlasTexture&&at.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),Wn.updatePaintBuffers());const yr=ye.constantOr(null);if(yr&&at.imageAtlas){const Ds=at.imageAtlas.patternPositions[yr.toString()];Ds&&Wn.setConstantPatternPositions(Ds)}const Sr=d.paint.get("fill-extrusion-vertical-gradient");let $r;if(io&&ro){if(Uh(at.tileID,ln,v))continue;const Ds=ro.calculateShadowPassMatrixFromTile(at.tileID.toUnwrapped());$r=bu(Ds,Ft,Sn)}else{const Ds=v.translatePosMatrix(Ne.expandedProjMatrix,at,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),os=he.projection.createInversionMatrix(he,Ne.canonical);$r=Pe?Ol(Ds,v,Sr,Fe,ot,Ft,Ne,at,Vt,tn,yn,os,lt,Sn):$a(Ds,v,Sr,Fe,ot,Ft,Ne,Vt,tn,yn,os,lt,Sn,$t,L,Dn)}v.uploadCommonUniforms(J,Yi,Ne.toUnwrapped(),null,ci);let is=ln.segments;if("mercator"===he.projection.name&&!io&&(is=ln.getVisibleSegments(at.tileID,v.terrain,v.transform.getFrustum(0)),!is.get().length))continue;if(ie)if(io)for(const Ds of is.get())ie.numRenderedVerticesInShadowPass+=Ds.primitiveLength;else for(const Ds of is.get())ie.numRenderedVerticesInTransparentPass+=Ds.primitiveLength;const tl=[];(v.terrain||H)&&tl.push(ln.centroidVertexBuffer),en&&tl.push(ln.layoutVertexExtBuffer),Yi.draw(v,J.gl.TRIANGLES,M,R,N,l.af.backCCW,$r,d.id,ln.layoutVertexBuffer,ln.indexBuffer,is,d.paint,v.transform.zoom,Wn,tl)}v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!1)}function Os(v,r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je,ot,st,Pt){const Ft=v.context,Vt=Ft.gl,en=v.transform,tn=v.transform.zoom,yn=[],lt=Bc(v,d.paint.get("fill-extrusion-cutoff-fade-range"));"clear"===re?(yn.push("CLEAR_SUBPASS"),Pt&&(yn.push("CLEAR_FROM_TEXTURE"),Ft.activeTexture.set(Vt.TEXTURE0),Pt.bind(Vt.LINEAR,Vt.CLAMP_TO_EDGE))):"sdf"===re&&yn.push("SDF_SUBPASS"),ot&&yn.push("HAS_CENTROID"),lt.shouldRenderCutoff&&yn.push("RENDER_CUTOFF");const $t=d.layout.get("fill-extrusion-edge-radius"),Sn=(ci,Dn,gn,bi,io)=>{const ro=Dn.programConfigurations.get(d.id),te=v.isTileAffectedByFog(ci),L=v.getOrCreateProgram("fillExtrusionGroundEffect",{config:ro,defines:yn,overrideFog:te}),j=((Ne,at,ln,hn,Qn,Wn,Yi,yr,Sr,$r,is)=>({u_matrix:at,u_opacity:ln,u_ao_pass:hn?1:0,u_meter_to_tile:Qn,u_ao:Wn,u_flood_light_intensity:Yi,u_flood_light_color:yr,u_attenuation:Sr,u_edge_radius:$r,u_fb:0,u_fb_size:is}))(0,bi,he,J,io,[ye,Pe*io],Fe,Qe,Je,tn>=17?0:$t*io,Pt?Pt.size[0]:0),ie=[];ot&&ie.push(Dn.hiddenByLandmarkVertexBuffer),v.uploadCommonUniforms(Ft,L,ci.toUnwrapped(),null,lt),L.draw(v,Ft.gl.TRIANGLES,M,R,N,H,j,d.id,Dn.vertexBuffer,Dn.indexBuffer,gn,d.paint,tn,ro,ie)};for(const ci of b){const Dn=r.getTile(ci),gn=Dn.getBucket(d);if(!gn||gn.projection.name!==en.projection.name||!gn.groundEffect||gn.groundEffect&&!gn.groundEffect.hasData())continue;const bi=gn.groundEffect,io=1/gn.tileToMeter;{const ro=v.translatePosMatrix(ci.projMatrix,Dn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),te=bi.getDefaultSegment();Sn(ci,bi,te,ro,io)}if(st)for(let ro=0;ro<4;ro++){const te=l.bZ[ro](ci),L=r.getTile(te);if(!L)continue;const j=L.getBucket(d);if(!j||j.projection.name!==en.projection.name||!j.groundEffect||j.groundEffect&&!j.groundEffect.hasData())continue;const ie=j.groundEffect;let Ne,at;0===ro?(Ne=[-l.a3,0,0],at=1):1===ro?(Ne=[l.a3,0,0],at=0):2===ro?(Ne=[0,-l.a3,0],at=3):(Ne=[0,l.a3,0],at=2);const ln=ie.regionSegments[at];if(!ln)continue;const hn=new Float32Array(16);l.ad.translate(hn,ci.projMatrix,Ne),Sn(ci,ie,ln,v.translatePosMatrix(hn,Dn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),io)}}}function x0(v,r,d,b,M,R,N){0===b.centroidVertexArray.length&&b.createCentroidsBuffer();const H=R?R.findDEMTileFor(d):null;if(!(H&&H.dem||N))return;const J=st=>new l.P(Math.ceil((st+l.c0)*l.c1),0),re=st=>{const Pt=r.getSource().minzoom,Ft=en=>{const tn=r.getTileByID(en);if(tn&&tn.hasData())return tn.getBucket(M)},Vt=[0,-1,1];for(const en of Vt){if(st.overscaledZ+en<Pt)continue;const tn=Ft(st.calculateScaledKey(st.overscaledZ+en));if(tn)return tn}},he=[0,0,0],ye=(st,Pt)=>(he[0]=Math.min(st.min.y,Pt.min.y),he[1]=Math.max(st.max.y,Pt.max.y),he[2]=l.a3-Pt.min.x>st.max.x?Pt.min.x-l.a3:st.max.x,he),Pe=(st,Pt)=>(he[0]=Math.min(st.min.x,Pt.min.x),he[1]=Math.max(st.max.x,Pt.max.x),he[2]=l.a3-Pt.min.y>st.max.y?Pt.min.y-l.a3:st.max.y,he),Fe=[(st,Pt)=>ye(st,Pt),(st,Pt)=>ye(Pt,st),(st,Pt)=>Pe(st,Pt),(st,Pt)=>Pe(Pt,st)],Qe=(st,Pt,Ft,Vt,en,tn,yn)=>{if(!R)return 0;const lt=[[tn?Ft:st,tn?st:Ft,0],[tn?Ft:Pt,tn?Pt:Ft,0]],$t=yn<0?l.a3+yn:yn,Sn=[tn?$t:(st+Pt)/2,tn?(st+Pt)/2:$t,0];return 0===Ft&&yn<0||0!==Ft&&yn>0?R.getForTilePoints(en,[Sn],!0,Vt):lt.push(Sn),R.getForTilePoints(d,lt,!0,H),Math.max(lt[0][2],lt[1][2],Sn[2])/R.exaggeration()};for(let st=0;st<4;st++){const Pt=b.borderFeatureIndices[st];if(0===Pt.length)continue;const Ft=l.bZ[st](d),Vt=re(Ft);if(!(Vt&&Vt instanceof l.b_)||b.borderDoneWithNeighborZ[st]===Vt.canonical.z)continue;0===Vt.centroidVertexArray.length&&Vt.createCentroidsBuffer();const en=R?R.findDEMTileFor(Ft):null;if(!(en&&en.dem||N))continue;const tn=(st<2?1:5)-st,yn=Vt.borderDoneWithNeighborZ[tn]!==b.canonical.z,lt=Vt.borderFeatureIndices[tn];let $t=0;if(b.canonical.z!==Vt.canonical.z){for(const Sn of Pt)b.showCentroid(b.featuresOnBorder[Sn]);if(yn)for(const Sn of lt)Vt.showCentroid(Vt.featuresOnBorder[Sn]);b.borderDoneWithNeighborZ[st]=Vt.canonical.z,Vt.borderDoneWithNeighborZ[tn]=b.canonical.z}for(const Sn of Pt){const ci=b.featuresOnBorder[Sn],Dn=b.centroidData[ci.centroidDataIndex],gn=ci.borders[st];let bi;for(;$t<lt.length;){bi=Vt.featuresOnBorder[lt[$t]];const io=bi.borders[tn];if(io[1]>gn[0]+3||io[0]>gn[0]-3)break;Vt.showCentroid(bi),$t++}if(bi&&$t<lt.length){const io=$t;let ro=0;for(;!(bi.borders[tn][0]>gn[1]-3)&&(ro++,++$t!==lt.length);)bi=Vt.featuresOnBorder[lt[$t]];if(bi=Vt.featuresOnBorder[lt[io]],ro>1){const j=bi.borders[tn];Math.abs(gn[0]-j[0])<3&&Math.abs(gn[1]-j[1])<3&&(ro=1,$t=io+1)}else if(0===ro){b.showCentroid(ci);continue}const te=Vt.centroidData[bi.centroidDataIndex];N&&1===ro&&(((Je=Dn).flags|(ot=te).flags)&l.b$?(Je.flags|=l.b$,ot.flags|=l.b$):(Je.flags&=~l.b$,ot.flags&=~l.b$));const L=ci.intersectsCount()>1||bi.intersectsCount()>1;if(ro>1)$t=io,Dn.centroidXY=te.centroidXY=new l.P(0,0);else if(en&&en.dem&&!L){const j=Fe[st](Dn,te),ie=st%2?l.a3-1:0,Ne=Qe(j[0],Math.min(l.a3-1,j[1]),ie,en,Ft,st<2,j[2]);Dn.centroidXY=te.centroidXY=J(Ne)}else L?Dn.centroidXY=te.centroidXY=new l.P(0,0):(Dn.centroidXY=b.encodeBorderCentroid(ci),te.centroidXY=Vt.encodeBorderCentroid(bi));b.writeCentroidToBuffer(Dn),Vt.writeCentroidToBuffer(te)}else b.showCentroid(ci)}b.borderDoneWithNeighborZ[st]=Vt.canonical.z,Vt.borderDoneWithNeighborZ[tn]=b.canonical.z}var Je,ot;(b.needsCentroidUpdate||!b.centroidVertexBuffer&&0!==b.centroidVertexArray.length)&&b.uploadCentroid(v)}const I0=[1,0,0],Hl=[0,1,0],qu=[0,0,1];function Uh(v,r,d){const b=d.transform,M=d.shadowRenderer;if(!M)return!0;const R=v.toUnwrapped(),N=b.tileSize*M._cascades[d.currentShadowCascade].scale;let H=r.maxHeight;if(b.elevation){const Je=b.elevation.getMinMaxForTile(v);Je&&(H+=Je.max)}const J=[...M.shadowDirection];J[2]=-J[2];const re=M.computeSimplifiedTileShadowVolume(R,H,N,J);if(!re)return!1;const he=[I0,Hl,qu,J,[J[0],0,J[2]],[0,J[1],J[2]]],ye="globe"===b.projection.name,Pe=b.scaleZoom(N),Fe=l.aM.fromInvProjectionMatrix(b.invProjMatrix,b.worldSize,Pe,!ye),Qe=M.getCurrentCascadeFrustum();return 0===Fe.intersectsPrecise(re.vertices,re.planes,he)||0===Qe.intersectsPrecise(re.vertices,re.planes,he)}function Kd(v){return[v[0]*l.c2,v[1]*l.c2,v[2]*l.c2,0]}function Kc(v,r,d,b,M,R,N,H,J){const re=b.getSource(),he=d.globeSharedBuffers;if(!he)return;let ye,Pe,Fe;if(r&&(ye=b.getTile(r)),re instanceof l.bm?(Pe=re.texture,Fe=l.bh(0,0,d.transform)):ye&&r&&(Pe=ye.texture,Fe=l.bh(r.canonical.z,r.canonical.x,d.transform)),!Pe||!Fe)return;v||(Fe=l.ad.scale(l.ad.create(),Fe,[1,-1,1]));const Qe=d.context,Je=Qe.gl,ot="nearest"===M.paint.get("raster-resampling")?Je.NEAREST:Je.LINEAR,st=d.colorModeForDrapableLayerRenderPass(R),Pt=N.defines;Pt.push("GLOBE_POLES");const Ft=new l.ae(Je.LEQUAL,l.ae.ReadWrite,d.depthRangeFor3D),Vt=Float32Array.from(d.transform.expandedFarZProjMatrix),en=Float32Array.from(l.bf(l.bg(new l.aO(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),Qe.activeTexture.set(Je.TEXTURE0),Pe.bind(ot,Je.CLAMP_TO_EDGE),Qe.activeTexture.set(Je.TEXTURE1),Pe.bind(ot,Je.CLAMP_TO_EDGE),Pe.useMipmap&&Qe.extTextureFilterAnisotropic&&d.transform.pitch>20&&Je.texParameterf(Je.TEXTURE_2D,Qe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Qe.extTextureFilterAnisotropicMax);const[tn,yn,lt,$t]=r?he.getPoleBuffers(r.canonical.z,!1):he.getPoleBuffers(0,!0),Sn=M.paint.get("raster-elevation");let ci;v?(ci=tn,d.renderDefaultNorthPole=0!==Sn):(ci=yn,d.renderDefaultSouthPole=0!==Sn);const Dn=Kd(N.mix),gn=(io=Vt,ro=en,te=Fe,L=l.a1(d.transform.zoom),ie=M,at=Sn,hn=Dn,Qn=N.offset,Wn=N.range,Yi=R,xl(io,ro,te,new Float32Array(16),new Float32Array(9),[0,0],L,[0,0],[0,0,0,0],1,{opacity:1,mix:0},ie,[0,0],at,2,hn,Qn,Wn,1,0,Yi)),bi=d.getOrCreateProgram("raster",{defines:Pt});var io,ro,te,L,ie,at,hn,Qn,Wn,Yi;d.uploadCommonUniforms(Qe,bi,null),bi.draw(d,Je.TRIANGLES,Ft,J,st,H,gn,M.id,ci,lt,$t)}function fd(v){const r=v._nearZ,d=v.projection.farthestPixelDistance(v),b=d-r,M=.2*v.height,R=r+M;return[r,d,(R-M-r)/b,(R-r)/b]}function Zs(v,r,d,b){if(v)return r instanceof Ai&&v instanceof l.c3?r.getTextureDescriptor(v,d,!0):{texture:v.texture,mix:Kd(b.mix),offset:b.offset,buffer:0,tileSize:1}}function Pu(v,r,d){if(!v)return null;const b=r.getTextureDescriptor(v,d,!0);if(!b)return null;let{texture:M,mix:R,offset:N,tileSize:H,buffer:J,format:re}=b;if(!M||!re)return null;let he=!1;return"uint32"===re&&(he=!0,R[3]=0,R=dr(l.c4,R,[0,d.paint.get("raster-particle-max-speed")]),N=Xa(l.c4,N,[0,d.paint.get("raster-particle-max-speed")])),{texture:M,textureOffset:[J/(H+2*J),H/(H+2*J)],tileSize:H,scalarData:he,scale:R,offset:N,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[re]]}}function Cr(v){const r=v._nearZ,d=v.projection.farthestPixelDistance(v),b=d-r,M=.2*v.height,R=r+M;return[r,d,(R-M-r)/b,(R-r)/b]}const Dd=new l.C(1,0,0,1),Xu=new l.C(0,1,0,1),lc=new l.C(0,0,1,1),wu=new l.C(1,0,1,1),xu=new l.C(0,1,1,1);function fe(v,r,d,b,M,R,N){const H=v.context,J=v.transform,re=H.gl,he="globe"===J.projection.name,ye=he?["PROJECTION_GLOBE_VIEW"]:[];let Pe=l.ad.clone(d.projMatrix);if(he&&l.a1(J.zoom)>0){const Dn=l.c5(d.canonical,J),gn=l.c6(Dn);Pe=l.ad.multiply(new Float32Array(16),J.globeMatrix,gn),l.ad.multiply(Pe,J.projMatrix,Pe)}const Fe=l.ad.create();Fe[12]+=2*M/(l.e.devicePixelRatio*J.width),Fe[13]+=2*R/(l.e.devicePixelRatio*J.height),l.ad.multiply(Pe,Fe,Pe);const Qe=v.getOrCreateProgram("debug",{defines:ye}),Je=r.getTileByID(d.key);v.terrain&&v.terrain.setupElevationDraw(Je,Qe);const ot=l.ae.disabled,st=l.ag.disabled,Pt=v.colorModeForRenderPass();H.activeTexture.set(re.TEXTURE0),v.emptyTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),he?Je._makeGlobeTileDebugBuffers(v.context,J):Je._makeDebugTileBoundsBuffers(v.context,J.projection);const Vt=Je._tileDebugBuffer||v.debugBuffer,en=Je._tileDebugIndexBuffer||v.debugIndexBuffer,tn=Je._tileDebugSegments||v.debugSegments;if(Qe.draw(v,re.LINE_STRIP,ot,st,Pt,l.af.disabled,He(Pe,b),"$debug",Vt,en,tn,null,null,null,[Je._globeTileDebugBorderBuffer]),N){const Dn=Je.latestRawTileData,gn=Math.floor((Dn&&Dn.byteLength||0)/1024);let bi=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(bi+=` => ${d.overscaledZ}`),bi+=` ${Je.state}`,bi+=` ${gn}kb`,function(io,ro){io.initDebugOverlayCanvas();const te=io.debugOverlayCanvas,L=io.context.gl,j=io.debugOverlayCanvas.getContext("2d");j.clearRect(0,0,te.width,te.height),j.shadowColor="white",j.shadowBlur=2,j.lineWidth=1.5,j.strokeStyle="white",j.textBaseline="top",j.font="bold 36px Open Sans, sans-serif",j.fillText(ro,5,5),j.strokeText(ro,5,5),io.debugOverlayTexture.update(te),io.debugOverlayTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE)}(v,bi)}const yn=r.getTile(d).tileSize,lt=512/Math.min(yn,512)*(d.overscaledZ/J.zoom)*.5,$t=Je._tileDebugTextBuffer||v.debugBuffer,Sn=Je._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,ci=Je._tileDebugTextSegments||v.debugSegments;Qe.draw(v,re.TRIANGLES,ot,st,l.a.alphaBlended,l.af.disabled,He(Pe,l.C.transparent,lt),"$debug",$t,Sn,ci,null,null,null,[Je._globeTileDebugTextBuffer])}function Ee(v,r,d,b){Ce(v,0,r+d/2,v.transform.width,d,b)}function Bt(v,r,d,b){Ce(v,r-d/2,0,d,v.transform.height,b)}function Ce(v,r,d,b,M,R){const N=v.context,H=N.gl;H.enable(H.SCISSOR_TEST),H.scissor(r*l.e.devicePixelRatio,d*l.e.devicePixelRatio,b*l.e.devicePixelRatio,M*l.e.devicePixelRatio),N.clear({color:R}),H.disable(H.SCISSOR_TEST)}const Gt=l.c7([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Tn}=Gt;function ui(v,r,d,b){v.emplaceBack(r,d,b)}class Ko{constructor(r){this.vertexArray=new l.c8,this.indices=new l.bu,ui(this.vertexArray,-1,-1,1),ui(this.vertexArray,1,-1,1),ui(this.vertexArray,-1,1,1),ui(this.vertexArray,1,1,1),ui(this.vertexArray,-1,-1,-1),ui(this.vertexArray,1,-1,-1),ui(this.vertexArray,-1,1,-1),ui(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=r.createVertexBuffer(this.vertexArray,Tn),this.indexBuffer=r.createIndexBuffer(this.indices),this.segment=l.b.simpleSegment(0,0,36,12)}}function hs(v,r,d,b,M,R){const N=v.context.gl,H=r.paint.get("sky-atmosphere-color"),J=r.paint.get("sky-atmosphere-halo-color"),re=r.paint.get("sky-atmosphere-sun-intensity"),he={u_matrix_3f:l.bC.fromMat4(l.bC.create(),b),u_sun_direction:M,u_sun_intensity:re,u_color_tint_r:[(Qe=H).r,Qe.g,Qe.b,Qe.a],u_color_tint_m:[(Je=J).r,Je.g,Je.b,Je.a],u_luminance:5e-5};var Qe,Je;N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_CUBE_MAP_POSITIVE_X+R,r.skyboxTexture,0),d.draw(v,N.TRIANGLES,l.ae.disabled,l.ag.disabled,l.a.unblended,l.af.frontCW,he,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}const Qs=l.c7([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Js{constructor(r){const d=new l.c9;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const b=new l.bu;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=r.createVertexBuffer(d,Qs.members),this.indexBuffer=r.createIndexBuffer(b),this.segments=l.b.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Pr=l.c7([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Ta{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class pa{constructor(r){this.colorModeAlphaBlendedWriteRGB=new l.a([l.ca,l.cb,l.ca,l.cb],l.C.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new l.a([l.ca,l.cc,l.ca,l.cc],l.C.transparent,[!1,!1,!1,!0]),this.params=new Ta,this.updateNeeded=!0,r.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),r.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),r.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),r.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(r){const d=r.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Js(d);const b=this.params.sizeRange,M=this.params.intensityRange,R=function(he){const ye=l.cf(30),Pe=[];for(let Fe=0;Fe<he;++Fe){const Qe=2*Math.PI*ye(),Je=Math.acos(1-2*ye())-.5*Math.PI;Pe.push(l._.fromValues(Math.cos(Je)*Math.cos(Qe),Math.cos(Je)*Math.sin(Qe),Math.sin(Je)))}return Pe}(this.params.starsCount),N=l.cf(300),H=new l.cd,J=new l.bu;let re=0;for(let he=0;he<R.length;++he){const ye=l._.scale([],R[he],200),Pe=Math.max(0,1+.01*b*(1*N()-.5)),Fe=Math.max(0,1+.01*M*(1*N()-.5));H.emplaceBack(ye[0],ye[1],ye[2],-1,-1,Pe,Fe),H.emplaceBack(ye[0],ye[1],ye[2],1,-1,Pe,Fe),H.emplaceBack(ye[0],ye[1],ye[2],1,1,Pe,Fe),H.emplaceBack(ye[0],ye[1],ye[2],-1,1,Pe,Fe),J.emplaceBack(re+0,re+1,re+2),J.emplaceBack(re+0,re+2,re+3),re+=4}this.starsVx=d.createVertexBuffer(H,Pr.members),this.starsIdx=d.createIndexBuffer(J),this.starsSegments=l.b.simpleSegment(0,0,H.length,J.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(r,d){const b=r.context,M=b.gl,R=r.transform,N=new l.ae(M.LEQUAL,l.ae.ReadOnly,[0,1]),H=l.a1(R.zoom),J=r.style.getLut(d.scope),re=d.properties.get("color").toRenderColor(J).toArray01(),he=d.properties.get("high-color").toRenderColor(J).toArray01(),ye=d.properties.get("space-color").toRenderColor(J).toArray01PremultipliedAlpha(),Fe=l.ce(d.properties.get("horizon-blend"),0,1,5e-4,.25),Qe=l.ba(r,b,R)&&5e-4===Fe?R.worldSize/(2*Math.PI*1.025)-1:R.globeRadius,Je=r.frameCounter/1e3%1,ot=l._.length(R.globeCenterInViewSpace),st=Math.sqrt(Math.pow(ot,2)-Math.pow(Qe,2)),Pt=Math.acos(st/ot),Ft=Vt=>{const en="globe"===R.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Vt&&en.push("ALPHA_PASS");const tn=r.getOrCreateProgram("globeAtmosphere",{defines:en}),yn=(($t,Sn,ci,Dn,gn,bi,io,ro,te,L,j,ie)=>({u_frustum_tl:$t,u_frustum_tr:Sn,u_frustum_br:ci,u_frustum_bl:Dn,u_horizon:gn,u_transition:bi,u_fadeout_range:io,u_color:ro,u_high_color:te,u_space_color:L,u_temporal_offset:j,u_horizon_angle:ie}))(R.frustumCorners.TL,R.frustumCorners.TR,R.frustumCorners.BR,R.frustumCorners.BL,R.frustumCorners.horizon,H,Fe,re,he,ye,Je,Pt);r.uploadCommonUniforms(b,tn);const lt=this.atmosphereBuffer;lt&&tn.draw(r,M.TRIANGLES,N,l.ag.disabled,Vt?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,l.af.backCW,yn,Vt?"atmosphere_glow_alpha":"atmosphere_glow",lt.vertexBuffer,lt.indexBuffer,lt.segments)};Ft(!1),Ft(!0)}drawStars(r,d){const b=l.at(d.properties.get("star-intensity"),0,1);if(0===b)return;const M=r.context,R=M.gl,N=r.transform,H=r.getOrCreateProgram("stars"),J=l.av.identity([]);l.av.rotateX(J,J,-N._pitch),l.av.rotateZ(J,J,-N.angle),l.av.rotateX(J,J,l.ab(N._center.lat)),l.av.rotateY(J,J,-l.ab(N._center.lng));const re=l.ad.fromQuat(new Float32Array(16),J),he=l.ad.multiply([],N.starsProjMatrix,re),ye=l.bC.fromMat4([],re),Pe=l.bC.invert([],ye),Fe=[0,1,0];l._.transformMat3(Fe,Fe,Pe),l._.scale(Fe,Fe,this.params.sizeMultiplier);const Qe=[1,0,0];l._.transformMat3(Qe,Qe,Pe),l._.scale(Qe,Qe,this.params.sizeMultiplier);const Je=(ot=Fe,st=Qe,Pt=b,{u_matrix:Float32Array.from(he),u_up:ot,u_right:st,u_intensity_multiplier:Pt});var ot,st,Pt;r.uploadCommonUniforms(M,H),this.starsVx&&this.starsIdx&&H.draw(r,R.TRIANGLES,l.ae.disabled,l.ag.disabled,this.colorModeAlphaBlendedWriteRGB,l.af.disabled,Je,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Ll(v,r){const d=[...v],b=r.cameraWorldSizeForFog/r.worldSize,M=l.ad.identity([]);return l.ad.scale(M,M,[b,b,1]),l.ad.multiply(d,M,d),l.ad.multiply(d,r.worldToFogMatrix,d),d}function Ql(v,r,d,b,M){const R=d.material,N=b.context,{baseColorTexture:H,metallicRoughnessTexture:J}=R.pbrMetallicRoughness,{normalTexture:re,occlusionTexture:he,emissionTexture:ye}=R;function Pe(Fe,Qe,Je){if(Fe&&(v.push(Qe),N.activeTexture.set(N.gl.TEXTURE0+Je),Fe.gfxTexture)){const{minFilter:ot,magFilter:st,wrapS:Pt,wrapT:Ft}=Fe.sampler;Fe.gfxTexture.bindExtraParam(ot,st,Pt,Ft)}}Pe(H,"HAS_TEXTURE_u_baseColorTexture",Ms.BaseColor),Pe(J,"HAS_TEXTURE_u_metallicRoughnessTexture",Ms.MetallicRoughness),Pe(re,"HAS_TEXTURE_u_normalTexture",Ms.Normal),Pe(he,"HAS_TEXTURE_u_occlusionTexture",Ms.Occlusion),Pe(ye,"HAS_TEXTURE_u_emissionTexture",Ms.Emission),M&&(M.texture||(M.texture=new l.ch(b.context,M.image,[M.image.height,M.image.height,M.image.height],N.gl.RGBA)),N.activeTexture.set(N.gl.TEXTURE0+Ms.LUT),M.texture&&M.texture.bind(N.gl.LINEAR,N.gl.CLAMP_TO_EDGE),v.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(v.push("HAS_ATTRIBUTE_a_uv_2f"),r.push(d.texcoordBuffer)),d.colorBuffer&&(v.push(12===d.colorBuffer.itemSize?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),r.push(d.colorBuffer)),d.normalBuffer&&(v.push("HAS_ATTRIBUTE_a_normal_3f"),r.push(d.normalBuffer)),d.pbrBuffer&&(v.push("HAS_ATTRIBUTE_a_pbr"),v.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),r.push(d.pbrBuffer)),"OPAQUE"!==R.alphaMode&&"MASK"!==R.alphaMode||v.push("UNPREMULT_TEXTURE_IN_SHADER"),R.defined||v.push("DIFFUSE_SHADED"),v.push("USE_STANDARD_DERIVATIVES")}function Jl(v,r,d,b,M,R){const N=d.paint.get("model-opacity"),H=r.context,J=new l.ae(r.context.gl.LEQUAL,l.ae.ReadWrite,r.depthRangeFor3D),re=r.transform,he=v.mesh,ye=he.material,Pe=ye.pbrMetallicRoughness,Fe=r.style.fog;let Qe;Qe="pixels"===r.transform.projection.zAxisUnit?[...v.nodeModelMatrix]:l.ad.multiply([],b.zScaleMatrix,v.nodeModelMatrix),l.ad.multiply(Qe,b.negCameraPosMatrix,Qe);const Je=l.ad.invert([],Qe);l.ad.transpose(Je,Je);const ot=d.paint.get("model-emissive-strength").constantOr(0),st=Vh(new Float32Array(v.worldViewProjection),new Float32Array(Qe),new Float32Array(Je),null,r,N,Pe.baseColorFactor.toRenderColor(null),ye.emissiveFactor,Pe.metallicFactor,Pe.roughnessFactor,ye,ot,d),Pt={defines:[]},Ft=[];Ql(Pt.defines,Ft,he,r,d.lut);const Vt=r.shadowRenderer;Vt&&(Vt.useNormalOffset=!1);let en=null;if(Fe){const lt=Ll(v.nodeModelMatrix,r.transform);if(en=new Float32Array(lt),"globe"!==re.projection.name){const $t=he.aabb.min,Sn=he.aabb.max,[ci,Dn]=Fe.getOpacityForBounds(lt,$t[0],$t[1],Sn[0],Sn[1]);Pt.overrideFog=ci>=mr||Dn>=mr}}const tn=Bc(r,d.paint.get("model-cutoff-fade-range"));tn.shouldRenderCutoff&&Pt.defines.push("RENDER_CUTOFF");const yn=r.getOrCreateProgram("model",Pt);r.uploadCommonUniforms(H,yn,null,en,tn),"shadow"!==r.renderPass&&Vt&&Vt.setupShadowsFromMatrix(v.nodeModelMatrix,yn),yn.draw(r,H.gl.TRIANGLES,J,M,R,he.material.doubleSided?l.af.disabled:l.af.backCCW,st,d.id,he.vertexBuffer,he.indexBuffer,he.segments,d.paint,r.transform.zoom,void 0,Ft)}function Ga(v,r,d,b,M,R,N){let H;H="globe"===v.projection.name?l.ci(d,v):[...d],l.ad.multiply(H,H,r.matrix);const J=l.ad.multiply([],b,H);if(r.meshes)for(const re of r.meshes){if("BLEND"!==re.material.alphaMode){N.push({mesh:re,depth:0,modelIndex:M,worldViewProjection:J,nodeModelMatrix:H});continue}const he=l._.transformMat4([],re.centroid,J);he[2]>0&&R.push({mesh:re,depth:he[2],modelIndex:M,worldViewProjection:J,nodeModelMatrix:H})}if(r.children)for(const re of r.children)Ga(v,re,d,b,M,R,N)}function ja(v,r,d,b){const M=d.shadowRenderer;if(!M)return;const R=M.getShadowPassDepthMode(),N=M.getShadowPassColorMode(),H=M.calculateShadowPassMatrixFromMatrix(r),J=Nc(H);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,R,l.ag.disabled,N,l.af.backCCW,J,b.id,v.vertexBuffer,v.indexBuffer,v.segments,b.paint,d.transform.zoom,void 0,void 0)}function cc(v,r,d){const b=r.updateZoomBasedPaintProperties(),M=function(R,N,H){let J,re,he,ye=R.terrain?R.terrain.exaggeration():0;if(R.terrain&&ye>0){const Pe=R.terrain,Fe=Pe.findDEMTileFor(H);Fe&&Fe.dem?J=l.ck.create(Pe,H,Fe):ye=0}if(0===ye&&(N.terrainElevationMin=0,N.terrainElevationMax=0),ye===N.validForExaggeration&&(0===ye||J&&J._demTile&&J._demTile.tileID===N.validForDEMTile.id&&J._dem._timestamp===N.validForDEMTile.timestamp))return!1;for(const Pe in N.instancesPerModel){const Fe=N.instancesPerModel[Pe];for(let Qe=0;Qe<Fe.instancedDataArray.length;++Qe){const Je=(J?ye*J.getElevationAt(0|Fe.instancedDataArray.float32[16*Qe],0|Fe.instancedDataArray.float32[16*Qe+1],!0,!0):0)+Fe.instancesEvaluatedElevation[Qe];Fe.instancedDataArray.float32[16*Qe+6]=Je,re=re?Math.min(N.terrainElevationMin,Je):Je,he=he?Math.max(N.terrainElevationMax,Je):Je}}return N.terrainElevationMin=re||0,N.terrainElevationMax=he||0,N.validForExaggeration=ye,N.validForDEMTile=J&&J._demTile?{id:J._demTile.tileID,timestamp:J._dem._timestamp}:{id:void 0,timestamp:0},!0}(v,r,d);(b||M)&&(r.uploaded=!1,r.upload(v.context))}const Gl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new l.b6([0,0,0],[l.a3,l.a3,0])};function Sl(v,r){const d=1<<v.canonical.z,b=r.getFreeCameraOptions().position,M=r.elevation,R=v.canonical.x/d,N=(v.canonical.x+1)/d,H=v.canonical.y/d,J=(v.canonical.y+1)/d;let re=r._centerAltitude;if(M){const Fe=M.getMinMaxForTile(v);Fe&&Fe.max>re&&(re=Fe.max)}const he=l.at(b.x,R,N)-b.x,ye=l.at(b.y,H,J)-b.y,Pe=l.ax(re,r.center.lat)-b.z;return r._zoomFromMercatorZ(Math.sqrt(he*he+ye*ye+Pe*Pe))}function Qa(v,r,d,b,M,R,N){const H=v.context,J="shadow"===v.renderPass,re=v.shadowRenderer,he=J&&re?re.getShadowPassDepthMode():new l.ae(H.gl.LEQUAL,l.ae.ReadWrite,v.depthRangeFor3D),ye=v.isTileAffectedByFog(R);if(d.meshes)for(const Pe of d.meshes){const Fe=["MODEL_POSITION_ON_GPU"],Qe=[];let Je,ot,st;b.instancedDataArray.length>20&&Fe.push("INSTANCED_ARRAYS");const Pt=Bc(v,r.paint.get("model-cutoff-fade-range"));if(Pt.shouldRenderCutoff&&Fe.push("RENDER_CUTOFF"),J&&re)Je=v.getOrCreateProgram("modelDepth",{defines:Fe}),ot=Nc(N.shadowTileMatrix,N.shadowTileMatrix,Float32Array.from(d.matrix)),st=re.getShadowPassColorMode();else{Ql(Fe,Qe,Pe,v,r.lut),Je=v.getOrCreateProgram("model",{defines:Fe,overrideFog:ye});const Vt=Pe.material,en=Vt.pbrMetallicRoughness,tn=r.paint.get("model-opacity"),yn=r.paint.get("model-emissive-strength").constantOr(0);ot=Vh(R.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,v,tn,en.baseColorFactor.toRenderColor(null),Vt.emissiveFactor,en.metallicFactor,en.roughnessFactor,Vt,yn,r,M),re&&(N.shadowUniformsInitialized?Je.setShadowUniformValues(H,re.getShadowUniformValues()):(re.setupShadows(R.toUnwrapped(),Je,"model-tile",R.overscaledZ),N.shadowUniformsInitialized=!0)),st=Pt.shouldRenderCutoff||tn<1||"OPAQUE"!==Vt.alphaMode?l.a.alphaBlended:l.a.unblended}v.uploadCommonUniforms(H,Je,R.toUnwrapped(),null,Pt);const Ft=Pe.material.doubleSided?l.af.disabled:l.af.backCCW;if(b.instancedDataArray.length>20)Qe.push(b.instancedDataBuffer),Je.draw(v,H.gl.TRIANGLES,he,l.ag.disabled,st,Ft,ot,r.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments,r.paint,v.transform.zoom,void 0,Qe,b.instancedDataArray.length);else{const Vt=J?"u_instance":"u_normal_matrix";for(let en=0;en<b.instancedDataArray.length;++en)ot[Vt]=new Float32Array(b.instancedDataArray.arrayBuffer,64*en,16),Je.draw(v,H.gl.TRIANGLES,he,l.ag.disabled,st,Ft,ot,r.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments,r.paint,v.transform.zoom,void 0,Qe)}}if(d.children)for(const Pe of d.children)Qa(v,r,Pe,b,M,R,N)}const Pd=[1,-1,1];function md(v,r,d,b){if(!d.modelManager)return!0;const M=d.modelManager;if(!d.shadowRenderer)return!0;const R=d.shadowRenderer,N=r.aabb;let H=!0,J=v.maxHeight;if(0===J){let he=0;for(const ye in v.instancesPerModel){const Pe=M.getModel(ye,b);Pe?he=Math.max(he,Math.max(Math.max(Pe.aabb.max[0],Pe.aabb.max[1]),Pe.aabb.max[2])):H=!1}J=v.maxScale*he*1.41+v.maxVerticalOffset,H&&(v.maxHeight=J)}N.max[2]=J,N.min[2]+=v.terrainElevationMin,N.max[2]+=v.terrainElevationMax,l._.transformMat4(N.min,N.min,r.tileMatrix),l._.transformMat4(N.max,N.max,r.tileMatrix);const re=N.intersects(R.getCurrentCascadeFrustum());return 0===d.currentShadowCascade&&(v.isInsideFirstShadowMapFrustum=2===re),0===re}function Bl(v,r){const d=v.uniformValues.u_cutoff_params[0],b=v.uniformValues.u_cutoff_params[1],M=v.uniformValues.u_cutoff_params[2],R=v.uniformValues.u_cutoff_params[3];return b===d||R===M?1:l.at(((r-d)/(b-d)-M)/(R-M),0,1)}function ec(v,r,d,b){if(r.pitch<20)return 1;const M=r.getWorldToCameraMatrix(),R=l.ad.multiply([],M,v),N=[...d.min,1];let H=l.aA.transformMat4([],N,R),J=H,re=H;N[1]=d.max[1],H=l.aA.transformMat4([],N,R),J=H[1]<J[1]?H:J,re=H[1]>re[1]?H:re,N[0]=d.max[0],H=l.aA.transformMat4([],N,R),J=H[1]<J[1]?H:J,re=H[1]>re[1]?H:re,N[1]=d.min[1],H=l.aA.transformMat4([],N,R),J=H[1]<J[1]?H:J,re=H[1]>re[1]?H:re;const he=l.at(b[0],0,1),ye=100*r.pixelsPerMeter*l.at(b[1],0,1),Pe=l.at(b[2],0,1),Fe=l._.lerp([],J,re,he),Qe=Math.tan(.5*r.fovX),Je=-Fe[2]*Qe;if(0===ye)return Fe[1]<-Math.abs(Je)?Pe:1;const ot=(-Math.abs(Je)-Fe[1])/ye,st=(Ft,Vt,en)=>(1-en)*Ft+en*Vt,Pt=l.at(st(1,Pe,ot),Pe,1);return st(1,Pt,l.at((r.pitch-20)/20,0,1))}class Ku{}class gd{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(r,d,b){{const ye=this._storage.get(d.id);if(ye)return ye.lastUsedFrameIdx=r,ye.buf}const M=b.gl,R=M.getBufferParameter(M.ELEMENT_ARRAY_BUFFER,M.BUFFER_SIZE),N=new ArrayBuffer(R),H=new Int16Array(N);M.getBufferSubData(M.ELEMENT_ARRAY_BUFFER,0,new Int16Array(N));const J=new l.cm;for(let ye=0;ye<R/2;ye+=3){const Pe=H[ye],Fe=H[ye+1],Qe=H[ye+2];J.emplaceBack(Pe,Fe),J.emplaceBack(Fe,Qe),J.emplaceBack(Qe,Pe)}const re=b.bindVertexArrayOES.current,he=new Ku;return he.buf=new l.I(b,J),he.lastUsedFrameIdx=r,this._storage.set(d.id,he),b.bindVertexArrayOES.set(re),he.buf}update(r){for(const[d,b]of this._storage)r-b.lastUsedFrameIdx>30&&(b.buf.destroy(),this._storage.delete(d))}destroy(){for(const[r,d]of this._storage)d.buf.destroy(),this._storage.delete(r)}}const Ma=l.c7([{type:"Float32",name:"a_offset_xy",components:2}]);class vd{constructor(r){const d=new l.cn,b=new l.bu;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1),b.emplaceBack(0,1,2),b.emplaceBack(0,2,3),this.segments=l.b.simpleSegment(0,0,d.length,b.length),this.vx=r.createVertexBuffer(d,Ma.members),this.idx=r.createIndexBuffer(b)}destroy(){this.vx.destroy(),this.idx.destroy()}}const Fc={symbol:function(v,r,d,b,M){if("translucent"!==v.renderPass)return;const R=l.ag.disabled,N=v.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(re,he,ye,Pe,Fe,Qe,Je){const ot=he.transform,st="map"===Fe,Pt="map"===Qe;for(const Ft of re){const Vt=Pe.getTile(Ft),en=Vt.getBucket(ye);if(!en||!en.text||!en.text.segments.get().length)continue;const tn=l.aD(en.textSizeData,ot.zoom),yn=uu(Ft,en.getProjection(),ot),lt=ot.calculatePixelsToTileUnitsMatrix(Vt),$t=zn(yn,Vt.tileID.canonical,Pt,st,ot,en.getProjection(),lt),Sn=en.hasIconTextFit()&&en.hasIconData();if(tn){const ci=Math.pow(2,ot.zoom-Vt.tileID.overscaledZ);Ch(en,st,Pt,Je,l.bO,ot,$t,Ft,ci,tn,Sn)}}}(b,v,d,r,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),M);const H=0!==d.paint.get("icon-opacity").constantOr(1),J=0!==d.paint.get("text-opacity").constantOr(1);void 0!==d.layout.get("symbol-sort-key").constantOr(1)&&(H||J)?jh(v,r,d,b,R,N):(H&&jh(v,r,d,b,R,N,{onlyIcons:!0}),J&&jh(v,r,d,b,R,N,{onlyText:!0}),function(re,he,ye,Pe){if(!re.symbolParams.useOcclusionQueries)return;const Fe=re.context.gl,Qe=re.transform,Je=ye.paint,ot=Je.get("icon-occlusion-opacity").constantOr(0),st=Je.get("text-occlusion-opacity").constantOr(0);if(!ye.hasInitialOcclusionOpacityProperties||1===ot&&1===st)return;const Pt="globe"===Qe.projection.name;for(const Ft of Pe){const Vt=he.getTile(Ft),en=Vt.getBucket(ye);if(!en||"mercator"===en.projection.name&&Pt||en.fullyClipped)continue;if("globe"===en.projection.name){l.w(`Occlusion not supported for globe mode. Layer: ${ye.type}`);continue}const tn=uu(Ft,en.getProjection(),Qe),yn=l.ad.fromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,re.symbolParams.depthOffset,1),lt=l.ad.multiply([],yn,tn),$t="none"!==re.symbolParams.visualizeOcclusions?1:re.symbolParams.occlusionQueryFrameWindow;for(let Sn=0;Sn<en.symbolInstances.length;Sn++){const ci=en.symbolInstances.get(Sn),Dn=re.style.placement.opacities[ci.crossTileID];if(Dn&&Dn.isHidden()||(re.frameCounter+Sn)%$t!=0)continue;const gn=ci.tileAnchorX,bi=ci.tileAnchorY,io=ci.zOffset;let ro;if("none"===re.symbolParams.visualizeOcclusions){const Ne=en.queries.get(Sn);if(Ne){if(!Ne.isFree()){if(!Ne.isResultAvailable())continue;const at=Ne.consumeResult();ci.occlusionState=0===at?0:1;continue}ro=Ne}else ro=new Cs(re.context),en.queries.set(Sn,ro)}const te=re.getOrCreateProgram("occlusion"),L=re.symbolParams.occluderSize,j=w0(lt,[gn,bi,io],[Qe.width,Qe.height],[L,L],"zPass"===re.symbolParams.visualizeOcclusions?[1,0,0,.8]:[1,.4,.2,.9]);re.terrain&&re.terrain.setupElevationDraw(Vt,te,{useDepthForOcclusion:!1,labelPlaneMatrixInv:void 0}),"none"===re.symbolParams.visualizeOcclusions&&ro&&ro.begin();const ie=new l.ae("zPass"===re.symbolParams.visualizeOcclusions?re.context.gl.ALWAYS:re.context.gl.LEQUAL,l.ae.ReadOnly,re.depthRangeFor3D);te.draw(re,Fe.TRIANGLES,ie,l.ag.disabled,"none"!==re.symbolParams.visualizeOcclusions?l.a.alphaBlendedNonPremultiplied:l.a.disabled,l.af.disabled,j,"occlusion",re.occlusionBuffers.vx,re.occlusionBuffers.idx,re.occlusionBuffers.segments),"none"===re.symbolParams.visualizeOcclusions&&ro&&ro.end()}}}(v,r,d,b)),r.map.showCollisionBoxes&&(H0(v,r,d,b,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),H0(v,r,d,b,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(v,r,d,b){if("translucent"!==v.renderPass)return;const M=d.paint.get("circle-opacity"),R=d.paint.get("circle-stroke-width"),N=d.paint.get("circle-stroke-opacity"),H=void 0!==d.layout.get("circle-sort-key").constantOr(1),J=d.paint.get("circle-emissive-strength");if(0===M.constantOr(1)&&(0===R.constantOr(1)||0===N.constantOr(1)))return;const re=v.context,he=re.gl,ye=v.transform,Pe=v.depthModeForSublayer(0,l.ae.ReadOnly),Fe=l.ag.disabled,Qe=v.colorModeForDrapableLayerRenderPass(J),Je="globe"===ye.projection.name,ot=[l.aj(ye.center.lng),l.ak(ye.center.lat)],st=[];for(let Ft=0;Ft<b.length;Ft++){const Vt=b[Ft],en=r.getTile(Vt),tn=en.getBucket(d);if(!tn||tn.projection.name!==ye.projection.name)continue;const yn=tn.programConfigurations.get(d.id),lt=l.bR(d),$t=v.isTileAffectedByFog(Vt);Je&&lt.push("PROJECTION_GLOBE_VIEW"),lt.push("TERRAIN_DEPTH_D24");const Sn=v.getOrCreateProgram("circle",{config:yn,defines:lt,overrideFog:$t}),ci=tn.layoutVertexBuffer,Dn=tn.globeExtVertexBuffer,gn=tn.indexBuffer,bi=ye.projection.createInversionMatrix(ye,Vt.canonical),io={programConfiguration:yn,program:Sn,layoutVertexBuffer:ci,globeExtVertexBuffer:Dn,indexBuffer:gn,uniformValues:l.bS(v,Vt,en,bi,ot,d),tile:en};if(H){const ro=tn.segments.get();for(const te of ro)st.push({segments:new l.b([te]),sortKey:te.sortKey,state:io})}else st.push({segments:tn.segments,sortKey:0,state:io})}H&&st.sort((Ft,Vt)=>Ft.sortKey-Vt.sortKey);const Pt={useDepthForOcclusion:ye.depthOcclusionForSymbolsAndCircles};for(const Ft of st){const{programConfiguration:Vt,program:en,layoutVertexBuffer:tn,globeExtVertexBuffer:yn,indexBuffer:lt,uniformValues:$t,tile:Sn}=Ft.state,ci=Ft.segments;v.terrain&&v.terrain.setupElevationDraw(Sn,en,Pt),v.uploadCommonUniforms(re,en,Sn.tileID.toUnwrapped()),en.draw(v,he.TRIANGLES,Pe,Fe,Qe,l.af.disabled,$t,d.id,tn,lt,ci,d.paint,ye.zoom,Vt,[yn])}},heatmap:function(v,r,d,b){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===v.renderPass){const M=v.context,R=M.gl,N=l.ag.disabled,H=new l.a([R.ONE,R.ONE,R.ONE,R.ONE],l.C.transparent,[!0,!0,!0,!0]);(function(Fe,Qe,Je,ot){const st=Fe.gl,Pt=Qe.width*ot,Ft=Qe.height*ot;Fe.activeTexture.set(st.TEXTURE1),Fe.viewport.set([0,0,Pt,Ft]);let Vt=Je.heatmapFbo;if(!Vt||Vt&&(Vt.width!==Pt||Vt.height!==Ft)){Vt&&Vt.destroy();const en=st.createTexture();st.bindTexture(st.TEXTURE_2D,en),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_WRAP_S,st.CLAMP_TO_EDGE),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_WRAP_T,st.CLAMP_TO_EDGE),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_MIN_FILTER,st.LINEAR),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_MAG_FILTER,st.LINEAR),Vt=Je.heatmapFbo=Fe.createFramebuffer(Pt,Ft,!0,null),function(tn,yn,lt,$t,Sn,ci){const Dn=tn.gl;Dn.texImage2D(Dn.TEXTURE_2D,0,tn.extRenderToTextureHalfFloat?Dn.RGBA16F:Dn.RGBA,Sn,ci,0,Dn.RGBA,tn.extRenderToTextureHalfFloat?Dn.HALF_FLOAT:Dn.UNSIGNED_BYTE,null),$t.colorAttachment.set(lt)}(Fe,0,en,Vt,Pt,Ft)}else st.bindTexture(st.TEXTURE_2D,Vt.colorAttachment.get()),Fe.bindFramebuffer.set(Vt.framebuffer)})(M,v,d,"globe"===v.transform.projection.name?.5:.25),M.clear({color:l.C.transparent});const J=v.transform,re="globe"===J.projection.name,he=re?["PROJECTION_GLOBE_VIEW"]:[],ye=re?l.af.frontCCW:l.af.disabled,Pe=[l.aj(J.center.lng),l.ak(J.center.lat)];for(let Fe=0;Fe<b.length;Fe++){const Qe=b[Fe];if(r.hasRenderableParent(Qe))continue;const Je=r.getTile(Qe),ot=Je.getBucket(d);if(!ot||ot.projection.name!==J.projection.name)continue;const st=v.isTileAffectedByFog(Qe),Pt=ot.programConfigurations.get(d.id),Ft=v.getOrCreateProgram("heatmap",{config:Pt,defines:he,overrideFog:st}),{zoom:Vt}=v.transform;v.terrain&&v.terrain.setupElevationDraw(Je,Ft),v.uploadCommonUniforms(M,Ft,Qe.toUnwrapped());const en=J.projection.createInversionMatrix(J,Qe.canonical);Ft.draw(v,R.TRIANGLES,l.ae.disabled,N,H,ye,Vo(v,Qe,Je,en,Pe,Vt,d.paint.get("heatmap-intensity")),d.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,d.paint,v.transform.zoom,Pt,re?[ot.globeExtVertexBuffer]:null)}M.viewport.set([0,0,v.width,v.height])}else"translucent"===v.renderPass&&(v.context.setColorMode(v.colorModeForRenderPass()),function(M,R){const N=M.context,H=N.gl,J=R.heatmapFbo;if(!J)return;N.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,J.colorAttachment.get()),N.activeTexture.set(H.TEXTURE1);let re=R.colorRampTexture;re||(re=R.colorRampTexture=new l.T(N,R.colorRamp,H.RGBA)),re.bind(H.LINEAR,H.CLAMP_TO_EDGE),M.getOrCreateProgram("heatmapTexture").draw(M,H.TRIANGLES,l.ae.disabled,l.ag.disabled,M.colorModeForRenderPass(),l.af.disabled,{u_image:0,u_color_ramp:1,u_opacity:R.paint.get("heatmap-opacity")},R.id,M.viewportBuffer,M.quadTriangleIndexBuffer,M.viewportSegments,R.paint,M.transform.zoom)}(v,d))},line:function(v,r,d,b){if("translucent"!==v.renderPass)return;const M=d.paint.get("line-opacity"),R=d.paint.get("line-width");if(0===M.constantOr(1)||0===R.constantOr(1))return;const N=d.paint.get("line-emissive-strength"),H=d.paint.get("line-occlusion-opacity"),J=v.context,re=J.gl,he=d.layout.get("line-z-offset"),ye=!he.isConstant()||!!he.constantOr(0),Pe=ye?new l.ae(v.depthOcclusion?re.GREATER:re.LEQUAL,l.ae.ReadOnly,v.depthRangeFor3D):v.depthModeForSublayer(0,l.ae.ReadOnly),Fe=v.colorModeForDrapableLayerRenderPass(N),Qe=v.terrain&&v.terrain.renderingToTexture,Je=Qe?1:l.e.devicePixelRatio,ot=d.paint.get("line-dasharray"),st=ot.constantOr(1),Pt=d.layout.get("line-cap"),Ft=ot.constantOr(null),Vt=Pt.constantOr(null),en=d.paint.get("line-pattern"),tn=en.constantOr(1),yn=en.constantOr(null),lt=d.paint.get("line-opacity").constantOr(1);let $t=!tn&&1!==lt||v.depthOcclusion&&H>0&&H<1;const Sn=d.paint.get("line-gradient"),ci=tn?"linePattern":"line",Dn=l.bT(d);let gn;if(Qe&&v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&($t=!1),0!==H&&v.depthOcclusion){const io=d.paint._values["line-opacity"];io&&io.value&&"constant"===io.value.kind?gn=io.value:l.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}if(ye&&(v.forceTerrainMode=!0),!ye&&0!==H&&v.terrain&&!Qe)return void l.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const bi=$t&&ye?v.stencilModeFor3D():l.ag.disabled;for(const io of b){const ro=r.getTile(io);if(tn&&!ro.patternsLoaded())continue;const te=ro.getBucket(d);if(!te)continue;v.prepareDrawTile();const L=te.programConfigurations.get(d.id),j=v.isTileAffectedByFog(io),ie=v.getOrCreateProgram(ci,{config:L,defines:ye?[...Dn,"ELEVATED"]:Dn,overrideFog:j});if(yn&&ro.imageAtlas){const Wn=ro.imageAtlas.patternPositions[yn.toString()];Wn&&L.setConstantPatternPositions(Wn)}if(!tn&&Ft&&Vt&&ro.lineAtlas){const Wn=ro.lineAtlas.getDash(Ft,Vt);Wn&&L.setConstantPatternPositions(Wn)}let[Ne,at]=d.paint.get("line-trim-offset");("round"===Vt||"square"===Vt)&&Ne!==at&&(0===Ne&&(Ne-=1),1===at&&(at+=1));const ln=Qe?io.projMatrix:null,hn=tn?l.bU(v,ro,d,ln,Je,[Ne,at]):l.bV(v,ro,d,ln,te.lineClipsArray.length,Je,[Ne,at]);if(Sn){const Wn=te.gradients[d.id];let Yi=Wn.texture;if(d.gradientVersion!==Wn.version){let yr=256;if(d.stepInterpolant){const Sr=r.getSource().maxzoom,$r=io.canonical.z===Sr?Math.ceil(1<<v.transform.maxZoom-io.canonical.z):1;yr=l.at(l.bW(te.maxLineLength/l.a3*1024*$r),256,J.maxTextureSize)}Wn.gradient=l.bX({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:yr,image:Wn.gradient||void 0,clips:te.lineClipsArray}),Wn.texture?Wn.texture.update(Wn.gradient):Wn.texture=new l.T(J,Wn.gradient,re.RGBA),Wn.version=d.gradientVersion,Yi=Wn.texture}J.activeTexture.set(re.TEXTURE1),Yi.bind(d.stepInterpolant?re.NEAREST:re.LINEAR,re.CLAMP_TO_EDGE)}st&&(J.activeTexture.set(re.TEXTURE0),ro.lineAtlasTexture&&ro.lineAtlasTexture.bind(re.LINEAR,re.REPEAT),L.updatePaintBuffers()),tn&&(J.activeTexture.set(re.TEXTURE0),ro.imageAtlasTexture&&ro.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),L.updatePaintBuffers()),ye&&v.terrain.setupElevationDraw(ro,ie),v.uploadCommonUniforms(J,ie,io.toUnwrapped());const Qn=Wn=>{null!=gn&&(gn.value=lt*H),ie.draw(v,re.TRIANGLES,Pe,Wn,Fe,l.af.disabled,hn,d.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,d.paint,v.transform.zoom,L,[te.layoutVertexBuffer2,te.patternVertexBuffer,te.zOffsetVertexBuffer]),null!=gn&&(gn.value=lt)};if($t&&!ye){const Wn=v.stencilModeForClipping(io).ref;0===Wn&&Qe&&J.clear({stencil:0});const Yi={func:re.EQUAL,mask:255};hn.u_alpha_discard_threshold=.8,Qn(new l.ag(Yi,Wn,255,re.KEEP,re.KEEP,re.INVERT)),hn.u_alpha_discard_threshold=0,Qn(new l.ag(Yi,Wn,255,re.KEEP,re.KEEP,re.KEEP))}else $t&&ye&&(hn.u_alpha_discard_threshold=.001),Qn(ye?bi:v.stencilModeForClipping(io))}$t&&(v.resetStencilClippingMasks(),Qe&&J.clear({stencil:0})),0===H||v.depthOcclusion||Qe||v.layersWithOcclusionOpacity.push(v.currentLayer),ye&&(v.forceTerrainMode=!1)},fill:function(v,r,d,b){const M=d.paint.get("fill-color"),R=d.paint.get("fill-opacity");if(0===R.constantOr(1))return;const N=d.paint.get("fill-emissive-strength"),H=v.colorModeForDrapableLayerRenderPass(N),J=d.paint.get("fill-pattern"),re=v.opaquePassEnabledForLayer()&&!J.constantOr(1)&&1===M.constantOr(l.C.transparent).a&&1===R.constantOr(0)?"opaque":"translucent";if(v.renderPass===re){const he=v.depthModeForSublayer(1,"opaque"===v.renderPass?l.ae.ReadWrite:l.ae.ReadOnly);Za(v,r,d,b,he,H,!1)}if("translucent"===v.renderPass&&d.paint.get("fill-antialias")){const he=v.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,l.ae.ReadOnly);Za(v,r,d,b,he,H,!0)}},"fill-extrusion":function(v,r,d,b){const M=d.paint.get("fill-extrusion-opacity"),R=v.context,N=R.gl,H=v.terrain,J=H&&H.renderingToTexture;if(0===M)return;const re=v.conflationActive&&v.style.isLayerClipped(d,r.getSource()),he=v.style.order.indexOf(d.fqid);if(re&&function(ye,Pe,Fe,Qe,Je){for(const ot of Qe){const st=Pe.getTile(ot).getBucket(Fe);st&&(st.updateReplacement(ot,ye.replacementSource,Je),st.uploadCentroid(ye.context))}}(v,r,d,b,he),H||re)for(const ye of b){const Pe=r.getTile(ye).getBucket(d);Pe&&x0(v.context,r,ye,Pe,d,H,re)}if("shadow"===v.renderPass&&v.shadowRenderer){const ye=v.shadowRenderer;if(H&&M<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof l.Z)return;const Pe=ye.getShadowPassDepthMode(),Fe=ye.getShadowPassColorMode();Mc(v,r,d,b,Pe,l.ag.disabled,Fe,re)}else if("translucent"===v.renderPass){const ye=!d.paint.get("fill-extrusion-pattern").constantOr(1),Pe=d.paint.get("fill-extrusion-color").constantOr(l.C.white);if(!J&&0!==Pe.a){const Fe=new l.ae(v.context.gl.LEQUAL,l.ae.ReadWrite,v.depthRangeFor3D);1===M&&ye?Mc(v,r,d,b,Fe,l.ag.disabled,l.a.unblended,re):(Mc(v,r,d,b,Fe,l.ag.disabled,l.a.disabled,re),Mc(v,r,d,b,Fe,v.stencilModeFor3D(),v.colorModeForRenderPass(),re),v.resetStencilClippingMasks())}if(v.style.enable3dLights()&&ye&&(!H&&"globe"!==v.transform.projection.name||J)){const Fe=d.paint.get("fill-extrusion-opacity"),Qe=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Je=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),ot=d.paint.get("fill-extrusion-flood-light-intensity"),st=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(d.lut).toArray01().slice(0,3),Pt=Qe>0&&Je>0,Ft=ot>0,Vt=(tn,yn,lt)=>(1-lt)*tn+lt*yn,en=tn=>{const yn=v.depthModeForSublayer(1,l.ae.ReadOnly,N.LEQUAL,!0),lt=d.paint.get(tn?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),$t=Vt(.1,3,lt),Sn=v._showOverdrawInspector;if(!Sn){const ci=new l.ag({func:N.ALWAYS,mask:255},255,255,N.KEEP,N.KEEP,N.REPLACE),Dn=new l.a([N.ONE,N.ONE,N.ONE,N.ONE],l.C.transparent,[!1,!1,!1,!0],N.MIN);Os(v,r,d,b,yn,ci,Dn,l.af.disabled,tn,"sdf",Fe,Qe,Je,ot,st,$t,re,!1)}{const ci=Sn?l.ag.disabled:new l.ag({func:N.EQUAL,mask:255},255,255,N.KEEP,N.DECR,N.DECR),Dn=Sn?v.colorModeForRenderPass():new l.a([N.ONE_MINUS_DST_ALPHA,N.DST_ALPHA,N.ONE,N.ONE],l.C.transparent,[!0,!0,!0,!0]);Os(v,r,d,b,yn,ci,Dn,l.af.disabled,tn,"color",Fe,Qe,Je,ot,st,$t,re,!1)}};if(J){const tn=(yn,lt,$t)=>{const Sn=v.depthModeForSublayer(1,l.ae.ReadOnly,N.LEQUAL,!1),ci=d.paint.get(yn?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Dn=Vt(.1,3,ci);{const gn=new l.a([N.ONE,N.ONE,N.ONE,N.ONE],l.C.transparent,[!1,!1,!1,!0]);Os(v,r,d,b,Sn,l.ag.disabled,gn,l.af.disabled,yn,"clear",Fe,Qe,Je,ot,st,Dn,re,lt)}{const gn=new l.ag({func:N.ALWAYS,mask:255},255,255,N.KEEP,N.KEEP,N.REPLACE),bi=new l.a([N.ONE,N.ONE,N.ONE,N.ONE],l.C.transparent,[!1,!1,!1,!0],N.MIN);Os(v,r,d,b,Sn,gn,bi,l.af.disabled,yn,"sdf",Fe,Qe,Je,ot,st,Dn,re,lt)}{const gn=yn?N.ZERO:N.ONE_MINUS_DST_ALPHA,bi=new l.ag({func:N.EQUAL,mask:255},255,255,N.KEEP,N.DECR,N.DECR),io=new l.a([gn,N.DST_ALPHA,N.ONE_MINUS_DST_ALPHA,N.ZERO],l.C.transparent,[!0,!0,!0,!0]);Os(v,r,d,b,Sn,bi,io,l.af.disabled,yn,"color",Fe,Qe,Je,ot,st,Dn,re,lt)}{const gn=new l.a([N.ONE,N.ONE,N.ONE,yn?N.ZERO:N.ONE],l.C.transparent,[!1,!1,!1,!0],yn?N.FUNC_ADD:N.MAX);Os(v,r,d,b,Sn,l.ag.disabled,gn,l.af.disabled,yn,"clear",Fe,Qe,Je,ot,st,Dn,re,lt,$t)}};if(Pt||Ft){let yn;if(v.prepareDrawTile(),H){const lt=H.drapeBufferSize[0],$t=H.drapeBufferSize[1];yn=H.framebufferCopyTexture,yn&&(!yn||yn.size[0]===lt&&yn.size[1]===$t)||(yn&&yn.destroy(),yn=H.framebufferCopyTexture=new l.T(R,new l.i({width:lt,height:$t}),N.RGBA)),yn.bind(N.LINEAR,N.CLAMP_TO_EDGE),N.copyTexImage2D(N.TEXTURE_2D,0,N.RGBA,0,0,lt,$t,0)}Pt&&tn(!0,!1,yn),Ft&&tn(!1,!0,yn)}}else Pt&&en(!0),Ft&&en(!1)}}},hillshade:function(v,r,d,b){if("offscreen"!==v.renderPass&&"translucent"!==v.renderPass||v.style.disableElevatedTerrain)return;const M=v.context,R=v.terrain&&v.terrain.renderingToTexture,[N,H]="translucent"!==v.renderPass||R?[{},b]:v.stencilConfigForOverlap(b);for(const J of H){const re=r.getTile(J);if(re.needsHillshadePrepare&&"offscreen"===v.renderPass)Ea(v,re,d);else if("translucent"===v.renderPass){const he=v.depthModeForSublayer(0,l.ae.ReadOnly),ye=d.paint.get("hillshade-emissive-strength"),Pe=v.colorModeForDrapableLayerRenderPass(ye),Fe=R&&v.terrain?v.terrain.stencilModeForRTTOverlap(J):N[J.overscaledZ];au(v,J,re,d,he,Fe,Pe)}}M.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,r,d,b,M,R){if("translucent"!==v.renderPass||0===d.paint.get("raster-opacity"))return;const N="globe"===v.transform.projection.name,H=0!==d.paint.get("raster-elevation"),J=H&&N;if(v.renderElevatedRasterBackface&&!J)return;const re=v.context,he=re.gl,ye=r.getSource(),Pe=function(tn,yn,lt,$t){const Sn=yn.paint.get("raster-color"),ci="raster-array"===tn.type,Dn=[],gn=yn.paint.get("raster-resampling"),bi=yn.paint.get("raster-color-mix");let io=yn.paint.get("raster-color-range");const ro=[bi[0],bi[1],bi[2],0],te=bi[3];let L="nearest"===gn?$t.NEAREST:$t.LINEAR;if(ci&&(Dn.push("RASTER_ARRAY"),Sn||Dn.push("RASTER_COLOR"),"linear"===gn&&Dn.push("RASTER_ARRAY_LINEAR"),L=$t.NEAREST,!io&&tn.rasterLayers)){const j=tn.rasterLayers.find(({id:ie})=>ie===yn.sourceLayer);j&&j.fields&&j.fields.range&&(io=j.fields.range)}if(io=io||[0,1],Sn){Dn.push("RASTER_COLOR"),lt.activeTexture.set($t.TEXTURE2),yn.updateColorRamp(io);let j=yn.colorRampTexture;j||(j=yn.colorRampTexture=new l.T(lt,yn.colorRamp,$t.RGBA)),j.bind($t.LINEAR,$t.CLAMP_TO_EDGE)}return{mix:ro,range:io,offset:te,defines:Dn,resampling:L}}(ye,d,re,he);if(ye instanceof l.bm&&!b.length&&!N)return;const Fe=d.paint.get("raster-emissive-strength"),Qe=v.colorModeForDrapableLayerRenderPass(Fe),Je=v.terrain&&v.terrain.renderingToTexture,ot=!v.options.moving,st="nearest"===d.paint.get("raster-resampling")?he.NEAREST:he.LINEAR;if(ye instanceof l.bm&&!b.length&&(ye.onNorthPole||ye.onSouthPole)){const tn=H?v.stencilModeFor3D():l.ag.disabled;return void Kc(!!ye.onNorthPole,null,v,r,d,Fe,Pe,l.af.disabled,tn)}if(!b.length)return;const[Pt,Ft]=ye instanceof l.bm||Je?[{},b]:v.stencilConfigForOverlap(b),Vt=Ft[Ft.length-1].overscaledZ;J&&Pe.defines.push("PROJECTION_GLOBE_VIEW"),H&&Pe.defines.push("RENDER_CUTOFF");const en=(tn,yn,lt)=>{for(const $t of tn){const Sn=$t.toUnwrapped(),ci=r.getTile($t);if(Je&&(!ci||!ci.hasData()))continue;re.activeTexture.set(he.TEXTURE0);const Dn=Zs(ci,ye,d,Pe);if(!Dn||!Dn.texture)continue;const{texture:gn,mix:bi,offset:io,tileSize:ro,buffer:te}=Dn;let L,j;Je?(L=l.ae.disabled,j=$t.projMatrix):H?(L=new l.ae(he.LEQUAL,l.ae.ReadWrite,v.depthRangeFor3D),j=N?Float32Array.from(v.transform.expandedFarZProjMatrix):v.transform.calculateProjMatrix(Sn,ot)):(L=v.depthModeForSublayer($t.overscaledZ-Vt,1===d.paint.get("raster-opacity")?l.ae.ReadWrite:l.ae.ReadOnly,he.LESS),j=v.transform.calculateProjMatrix(Sn,ot));const ie=v.terrain&&Je?v.terrain.stencilModeForRTTOverlap($t):Pt[$t.overscaledZ],Ne=R?0:d.paint.get("raster-fade-duration");ci.registerFadeDuration(Ne);const at=r.findLoadedParent($t,0),ln=Un(ci,at,r,v.transform,Ne);let hn,Qn;v.terrain&&v.terrain.prepareDrawTile(),re.activeTexture.set(he.TEXTURE0),gn.bind(st,he.CLAMP_TO_EDGE),re.activeTexture.set(he.TEXTURE1),at?(at.texture&&at.texture.bind(st,he.CLAMP_TO_EDGE),hn=Math.pow(2,at.tileID.overscaledZ-ci.tileID.overscaledZ),Qn=[ci.tileID.canonical.x*hn%1,ci.tileID.canonical.y*hn%1]):gn.bind(st,he.CLAMP_TO_EDGE),gn.useMipmap&&re.extTextureFilterAnisotropic&&v.transform.pitch>20&&he.texParameterf(he.TEXTURE_2D,re.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,re.extTextureFilterAnisotropicMax);const Wn=v.transform;let Yi;const yr=H?fd(Wn):[0,0,0,0];let Sr,$r,is,tl,Ds,os=0;if(J&&ye instanceof l.bm&&ye.coordinates.length>3)Sr=Float32Array.from(l.bf(l.bg(new l.aO(0,0,0)))),$r=Float32Array.from(Wn.globeMatrix),is=Float32Array.from(l.bb(Wn)),tl=[l.aj(Wn.center.lng),l.ak(Wn.center.lat)],Yi=ye.elevatedGlobePerspectiveTransform,Ds=ye.elevatedGlobeGridMatrix||new Float32Array(9);else if(J){const fs=l.bc($t.canonical);os=l.bd(fs.getCenter().lat),Sr=Float32Array.from(l.bf(l.bg($t.canonical))),$r=Float32Array.from(Wn.globeMatrix),is=Float32Array.from(l.bb(Wn)),tl=[l.aj(Wn.center.lng),l.ak(Wn.center.lat)],Yi=[0,0],Ds=Float32Array.from(l.be($t.canonical,fs,os,Wn.worldSize/Wn._pixelsPerMercatorPixel))}else Yi=ye instanceof l.bm?ye.perspectiveTransform:[0,0],Sr=new Float32Array(16),$r=new Float32Array(9),is=new Float32Array(16),tl=[0,0],Ds=new Float32Array(9);const ea=xl(j,Sr,$r,is,Ds,Qn||[0,0],l.a1(v.transform.zoom),tl,yr,hn||1,ln,d,Yi,H?d.paint.get("raster-elevation"):0,2,bi,io,Pe.range,ro,te,Fe),na=v.isTileAffectedByFog($t),js=v.getOrCreateProgram("raster",{defines:Pe.defines,overrideFog:na});if(v.uploadCommonUniforms(re,js,Sn),ye instanceof l.bm){const fs=ye.elevatedGlobeVertexBuffer,ya=ye.elevatedGlobeIndexBuffer;if(Je||!N)ye.boundsBuffer&&ye.boundsSegments&&js.draw(v,he.TRIANGLES,L,l.ag.disabled,Qe,l.af.disabled,ea,d.id,ye.boundsBuffer,v.quadTriangleIndexBuffer,ye.boundsSegments);else if(fs&&ya){const ll=Wn.zoom<=l.b1?ye.elevatedGlobeSegments:ye.getSegmentsForLongitude(Wn.center.lng);ll&&js.draw(v,he.TRIANGLES,L,l.ag.disabled,Qe,yn,ea,d.id,fs,ya,ll)}}else if(J){L=new l.ae(he.LEQUAL,l.ae.ReadOnly,v.depthRangeFor3D);const fs=v.globeSharedBuffers;if(fs){const[ya,ll,ia]=fs.getGridBuffers(os,!1);js.draw(v,he.TRIANGLES,L,lt||ie,v.colorModeForRenderPass(),yn,ea,d.id,ya,ll,ia)}}else{const{tileBoundsBuffer:fs,tileBoundsIndexBuffer:ya,tileBoundsSegments:ll}=v.getTileBoundsBuffers(ci);js.draw(v,he.TRIANGLES,L,ie,Qe,l.af.disabled,ea,d.id,fs,ya,ll)}}if(!(ye instanceof l.bm)&&J)for(const $t of tn){const Sn=$t.canonical.y===(1<<$t.canonical.z)-1;0===$t.canonical.y&&Kc(!0,$t,v,r,d,Fe,Pe,yn,lt||l.ag.disabled),Sn&&Kc(!1,$t,v,r,d,Fe,Pe,yn===l.af.frontCW?l.af.backCW:l.af.frontCW,lt||l.ag.disabled)}};J?en(Ft,v.renderElevatedRasterBackface?l.af.backCW:l.af.frontCW,v.stencilModeFor3D()):en(Ft,l.af.disabled,void 0),v.resetStencilClippingMasks()},"raster-particle":function(v,r,d,b,M,R){"offscreen"===v.renderPass&&function(N,H,J,re){if(!re.length)return;const he=N.context,ye=he.gl,Pe=H.getSource();if(!(Pe instanceof Ai))return;const Fe=Math.ceil(Math.sqrt(J.paint.get("raster-particle-count")));let Qe=J.particlePositionRGBAImage;if(!Qe||Qe.width!==Fe){const Ft=function(Vt){const en=Vt*Vt,tn=new Uint8Array(4*en),yn=function($t){return $t|=0,$t=Math.imul(2747636419^$t,2654435769),$t=Math.imul($t^$t>>>16,2654435769),(($t=Math.imul($t^$t>>>16,2654435769))>>>0)/4294967296},lt=1/1.1;for(let $t=0;$t<en;$t++){const Sn=lt*(yn(2*$t+0)+al),ci=lt*(yn(2*$t+1)+al),Dn=255*Sn%1,gn=255*ci%1,bi=Dn,io=ci-gn/255,ro=gn;tn[4*$t+0]=255*(Sn-Dn/255),tn[4*$t+1]=255*bi,tn[4*$t+2]=255*io,tn[4*$t+3]=255*ro}return tn}(Fe);Qe=J.particlePositionRGBAImage=new l.i({width:Fe,height:Fe},Ft)}let Je=J.particleFramebuffer;Je?Je.width!==Fe&&(Je.destroy(),Je=J.particleFramebuffer=he.createFramebuffer(Fe,Fe,!0,null)):Je=J.particleFramebuffer=he.createFramebuffer(Fe,Fe,!0,null);const ot=[];for(const Ft of re){const Vt=H.getTile(Ft);if(!(Vt instanceof l.c3))continue;const en=Pu(Vt,Pe,J);if(!en)continue;const tn=[Vt.tileSize,Vt.tileSize];let yn=J.tileFramebuffer;yn||(yn=J.tileFramebuffer=he.createFramebuffer(tn[0],tn[1],!0,null));let lt=Vt.rasterParticleState;lt||(lt=Vt.rasterParticleState=new Kr(he,Ft,tn,Qe));const $t=lt.update(J.lastInvalidatedAt);lt.particleTextureDimension!==Fe&&lt.updateParticleTexture(Ft,Qe);const Sn=lt.targetColorTexture;lt.targetColorTexture=lt.backgroundColorTexture,lt.backgroundColorTexture=Sn;const ci=lt.particleTexture0;lt.particleTexture0=lt.particleTexture1,lt.particleTexture1=ci,ot.push([Ft,en,lt,$t])}if(0===ot.length)return;const st=l.e.now(),Pt=J.previousDrawTimestamp?.001*(st-J.previousDrawTimestamp):.0167;if(J.previousDrawTimestamp=st,J.hasColorMap()){he.activeTexture.set(ye.TEXTURE0+2);let Ft=J.colorRampTexture;Ft||(Ft=J.colorRampTexture=new l.T(he,J.colorRamp,ye.RGBA)),Ft.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}he.bindFramebuffer.set(J.tileFramebuffer.framebuffer),function(Ft,Vt,en){const tn=Ft.context,yn=tn.gl,lt=Vt.tileFramebuffer;tn.activeTexture.set(yn.TEXTURE0);const $t={u_texture:0,u_opacity:1.05*(ci=Vt.paint.get("raster-particle-fade-opacity-factor"))/(ci+.05)},Sn=Ft.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var ci;for(const Dn of en){const[,,gn,bi]=Dn;lt.colorAttachment.set(gn.targetColorTexture.texture),tn.viewport.set([0,0,lt.width,lt.height]),tn.clear({color:l.C.transparent}),bi&&(gn.backgroundColorTexture.bind(yn.NEAREST,yn.CLAMP_TO_EDGE),Sn.draw(Ft,yn.TRIANGLES,l.ae.disabled,l.ag.disabled,l.a.alphaBlended,l.af.disabled,$t,Vt.id,Ft.viewportBuffer,Ft.quadTriangleIndexBuffer,Ft.viewportSegments))}}(N,J,ot),function(Ft,Vt,en,tn){const yn=Ft.context,lt=yn.gl,$t=en.tileFramebuffer,Sn="globe"===Ft.transform.projection.name,ci=en.paint.get("raster-particle-max-speed");for(const Dn of tn){const[gn,bi,io]=Dn;yn.activeTexture.set(lt.TEXTURE0+0),bi.texture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),$t.colorAttachment.set(io.targetColorTexture.texture);const ro=Ft.getOrCreateProgram("rasterParticleDraw",{defines:bi.defines,overrideFog:!1});yn.activeTexture.set(lt.TEXTURE0+1);const te=bi.scalarData?[]:[0,1,2,3].map(ie=>l.bZ[ie](gn));te.push(gn);const L=gn.canonical.x,j=gn.canonical.y;for(const ie of te){const Ne=Vt.getTile(Sn?ie.wrapped():ie);if(!Ne)continue;const at=Ne.rasterParticleState;if(!at)continue;const ln=ie.canonical.x+(1<<ie.canonical.z)*(ie.wrap-gn.wrap),hn=ie.canonical.y;at.particleTexture0.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);const Qn=Gc(1,at.particleTexture0.size[0],[ln-L,hn-j],0,bi.texture.size,2,ci,bi.textureOffset,bi.scale,bi.offset);ro.draw(Ft,lt.POINTS,l.ae.disabled,l.ag.disabled,l.a.alphaBlended,l.af.disabled,Qn,en.id,at.particleIndexBuffer,void 0,at.particleSegment)}}}(N,H,J,ot),he.bindFramebuffer.set(J.particleFramebuffer.framebuffer),function(Ft,Vt,en,tn){const yn=Ft.context,lt=yn.gl,$t=Vt.paint.get("raster-particle-max-speed"),Sn=tn*Vt.paint.get("raster-particle-speed-factor")*.15,ci=(gn=.01+1*Vt.paint.get("raster-particle-reset-rate-factor"),Math.pow(gn,6)),Dn=Vt.particleFramebuffer;var gn;yn.viewport.set([0,0,Dn.width,Dn.height]);for(const gn of en){const[,bi,io]=gn;yn.activeTexture.set(lt.TEXTURE0+0),bi.texture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),yn.activeTexture.set(lt.TEXTURE0+1);const ro=io.particleTexture0;ro.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);const te=Wc(1,ro.size[0],0,bi.texture.size,$t,Sn,ci,bi.textureOffset,bi.scale,bi.offset);Dn.colorAttachment.set(io.particleTexture1.texture),yn.clear({color:l.C.transparent}),Ft.getOrCreateProgram("rasterParticleUpdate",{defines:bi.defines}).draw(Ft,lt.TRIANGLES,l.ae.disabled,l.ag.disabled,l.a.unblended,l.af.disabled,te,Vt.id,Ft.viewportBuffer,Ft.quadTriangleIndexBuffer,Ft.viewportSegments)}}(N,J,ot,Pt)}(v,r,d,b),"translucent"===v.renderPass&&(function(N,H,J,re,he){const ye=N.context,Pe=ye.gl,Fe=!N.options.moving,Qe="globe"===N.transform.projection.name;if(!re.length)return;const[Je,ot]=N.stencilConfigForOverlap(re),st=[];Qe&&st.push("PROJECTION_GLOBE_VIEW");const Pt=N.stencilModeFor3D();for(const Ft of ot){const Vt=Ft.toUnwrapped(),en=H.getTile(Ft);if(!en.rasterParticleState)continue;const tn=en.rasterParticleState,yn=100;en.registerFadeDuration(yn);const lt=H.findLoadedParent(Ft,0),$t=Un(en,lt,H,N.transform,yn);let Sn,ci;N.terrain&&N.terrain.prepareDrawTile(),ye.activeTexture.set(Pe.TEXTURE0),tn.targetColorTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),ye.activeTexture.set(Pe.TEXTURE1),lt&&lt.rasterParticleState?(lt.rasterParticleState.targetColorTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),Sn=Math.pow(2,lt.tileID.overscaledZ-en.tileID.overscaledZ),ci=[en.tileID.canonical.x*Sn%1,en.tileID.canonical.y*Sn%1]):tn.targetColorTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE);const Dn=Qe?Float32Array.from(N.transform.expandedFarZProjMatrix):N.transform.calculateProjMatrix(Vt,Fe),gn=N.transform,bi=Cr(gn),io=l.bc(Ft.canonical),ro=l.bd(io.getCenter().lat);let te,L,j,ie,Ne;Qe?(te=Float32Array.from(l.bf(l.bg(Ft.canonical))),L=Float32Array.from(gn.globeMatrix),j=Float32Array.from(l.bb(gn)),ie=[l.aj(gn.center.lng),l.ak(gn.center.lat)],Ne=Float32Array.from(l.be(Ft.canonical,io,ro,gn.worldSize/gn._pixelsPerMercatorPixel))):(te=new Float32Array(16),L=new Float32Array(9),j=new Float32Array(16),ie=[0,0],Ne=new Float32Array(9));const at=ws(Dn,te,L,j,Ne,ci||[0,0],l.a1(N.transform.zoom),ie,bi,Sn||1,$t,250),ln=N.isTileAffectedByFog(Ft),hn=N.getOrCreateProgram("rasterParticle",{defines:st,overrideFog:ln});if(N.uploadCommonUniforms(ye,hn,Vt),Qe){const Qn=new l.ae(Pe.LEQUAL,l.ae.ReadWrite,N.depthRangeFor3D),Wn=0,Yi=N.globeSharedBuffers;if(Yi){const[yr,Sr,$r]=Yi.getGridBuffers(ro,0!==Wn);hn.draw(N,Pe.TRIANGLES,Qn,Pt,l.a.alphaBlended,l.af.backCCW,at,J.id,yr,Sr,$r)}}else{const Qn=N.depthModeForSublayer(0,l.ae.ReadOnly),Wn=Je[Ft.overscaledZ],{tileBoundsBuffer:Yi,tileBoundsIndexBuffer:yr,tileBoundsSegments:Sr}=N.getTileBoundsBuffers(en);hn.draw(N,Pe.TRIANGLES,Qn,Wn,l.a.alphaBlended,l.af.disabled,at,J.id,Yi,yr,Sr)}}N.resetStencilClippingMasks()}(v,r,d,b),v.style.map.triggerRepaint())},background:function(v,r,d,b){const M=d.paint.get("background-color"),R=d.paint.get("background-opacity"),N=d.paint.get("background-emissive-strength");if(0===R)return;const H=v.context,J=H.gl,re=v.transform,he=re.tileSize,ye=d.paint.get("background-pattern");let Pe;if(void 0!==ye&&(null===ye||(Pe=v.imageManager.getPattern(ye.toString(),d.scope,v.style.getLut(d.scope)),!Pe)))return;const Fe=!ye&&1===M.a&&1===R&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Fe)return;const Qe=l.ag.disabled,Je=v.depthModeForSublayer(0,"opaque"===Fe?l.ae.ReadWrite:l.ae.ReadOnly),ot=v.colorModeForDrapableLayerRenderPass(N),st=ye?"backgroundPattern":"background";let Pt,Ft=b;Ft||(Pt=v.getBackgroundTiles(),Ft=Object.values(Pt).map(Vt=>Vt.tileID)),ye&&(H.activeTexture.set(J.TEXTURE0),v.imageManager.bind(v.context,d.scope));for(const Vt of Ft){const en=v.isTileAffectedByFog(Vt),tn=v.getOrCreateProgram(st,{overrideFog:en}),yn=Vt.toUnwrapped(),lt=b?Vt.projMatrix:v.transform.calculateProjMatrix(yn);v.prepareDrawTile();const $t=r?r.getTile(Vt):Pt?Pt[Vt.key]:new l.by(Vt,he,re.zoom,v),Sn=ye?pd(lt,N,R,v,0,d.scope,Pe,{tileID:Vt,tileSize:he}):dh(lt,N,R,M.toRenderColor(d.lut));v.uploadCommonUniforms(H,tn,yn);const{tileBoundsBuffer:ci,tileBoundsIndexBuffer:Dn,tileBoundsSegments:gn}=v.getTileBoundsBuffers($t);tn.draw(v,J.TRIANGLES,Je,Qe,ot,l.af.disabled,Sn,d.id,ci,Dn,gn)}},sky:function(v,r,d){const b=v._atmosphere?l.a1(v.transform.zoom):1,M=d.paint.get("sky-opacity")*b;if(0===M)return;const R=v.context,N=d.paint.get("sky-type"),H=new l.ae(R.gl.LEQUAL,l.ae.ReadOnly,[0,1]),J=v.frameCounter/1e3%1;"atmosphere"===N?"offscreen"===v.renderPass?d.needsSkyboxCapture(v)&&(function(re,he,ye,Pe){const Fe=re.context,Qe=Fe.gl;let Je=he.skyboxFbo;if(!Je){Je=he.skyboxFbo=Fe.createFramebuffer(32,32,!0,null),he.skyboxGeometry=new Ko(Fe),he.skyboxTexture=Fe.gl.createTexture(),Qe.bindTexture(Qe.TEXTURE_CUBE_MAP,he.skyboxTexture),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_WRAP_S,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_WRAP_T,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_MIN_FILTER,Qe.LINEAR),Qe.texParameteri(Qe.TEXTURE_CUBE_MAP,Qe.TEXTURE_MAG_FILTER,Qe.LINEAR);for(let Ft=0;Ft<6;++Ft)Qe.texImage2D(Qe.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,Qe.RGBA,32,32,0,Qe.RGBA,Qe.UNSIGNED_BYTE,null)}Fe.bindFramebuffer.set(Je.framebuffer),Fe.viewport.set([0,0,32,32]);const ot=he.getCenter(re,!0),st=re.getOrCreateProgram("skyboxCapture"),Pt=new Float64Array(16);l.ad.identity(Pt),l.ad.rotateY(Pt,Pt,.5*-Math.PI),hs(re,he,st,Pt,ot,0),l.ad.identity(Pt),l.ad.rotateY(Pt,Pt,.5*Math.PI),hs(re,he,st,Pt,ot,1),l.ad.identity(Pt),l.ad.rotateX(Pt,Pt,.5*-Math.PI),hs(re,he,st,Pt,ot,2),l.ad.identity(Pt),l.ad.rotateX(Pt,Pt,.5*Math.PI),hs(re,he,st,Pt,ot,3),l.ad.identity(Pt),hs(re,he,st,Pt,ot,4),l.ad.identity(Pt),l.ad.rotateY(Pt,Pt,Math.PI),hs(re,he,st,Pt,ot,5),Fe.viewport.set([0,0,re.width,re.height])}(v,d),d.markSkyboxValid(v)):"sky"===v.renderPass&&function(re,he,ye,Pe,Fe){const Qe=re.context,Je=Qe.gl,ot=re.transform,st=re.getOrCreateProgram("skybox");Qe.activeTexture.set(Je.TEXTURE0),Je.bindTexture(Je.TEXTURE_CUBE_MAP,he.skyboxTexture);const Pt=((Ft,Vt,en,tn,yn)=>({u_matrix:Ft,u_sun_direction:Vt,u_cubemap:0,u_opacity:tn,u_temporal_offset:yn}))(ot.skyboxMatrix,he.getCenter(re,!1),0,Pe,Fe);re.uploadCommonUniforms(Qe,st),st.draw(re,Je.TRIANGLES,ye,l.ag.disabled,re.colorModeForRenderPass(),l.af.backCW,Pt,"skybox",he.skyboxGeometry.vertexBuffer,he.skyboxGeometry.indexBuffer,he.skyboxGeometry.segment)}(v,d,H,M,J):"gradient"===N&&"sky"===v.renderPass&&function(re,he,ye,Pe,Fe){const Qe=re.context,Je=Qe.gl,ot=re.transform,st=re.getOrCreateProgram("skyboxGradient");he.skyboxGeometry||(he.skyboxGeometry=new Ko(Qe)),Qe.activeTexture.set(Je.TEXTURE0);let Pt=he.colorRampTexture;Pt||(Pt=he.colorRampTexture=new l.T(Qe,he.colorRamp,Je.RGBA)),Pt.bind(Je.LINEAR,Je.CLAMP_TO_EDGE);const Ft=(Vt=ot.skyboxMatrix,en=he.getCenter(re,!1),tn=he.paint.get("sky-gradient-radius"),yn=Pe,lt=Fe,{u_matrix:Vt,u_color_ramp:0,u_center_direction:en,u_radius:l.ab(tn),u_opacity:yn,u_temporal_offset:lt});var Vt,en,tn,yn,lt;re.uploadCommonUniforms(Qe,st),st.draw(re,Je.TRIANGLES,ye,l.ag.disabled,re.colorModeForRenderPass(),l.af.backCW,Ft,"skyboxGradient",he.skyboxGeometry.vertexBuffer,he.skyboxGeometry.indexBuffer,he.skyboxGeometry.segment)}(v,d,H,M,J)},debug:function(v,r,d,b,M,R){for(let N=0;N<d.length;N++)if(M){const re=new l.C(.8*b.r,.8*b.g,.8*b.b,1);fe(v,r,d[N],b,-1,-1,R),fe(v,r,d[N],b,-1,1,R),fe(v,r,d[N],b,1,1,R),fe(v,r,d[N],b,1,-1,R),fe(v,r,d[N],re,0,0,R)}else fe(v,r,d[N],b,0,0,R)},custom:function(v,r,d,b){const M=v.context,R=d.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||"offscreen"===v.renderPass)&&d.isDraped(r)){if("offscreen"===v.renderPass){const N=R.prerender;if(N){if(v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),"globe"===v.transform.projection.name){const H=v.transform.pointMerc;N.call(R,M.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),l.a1(v.transform.zoom),[H.x,H.y],v.transform.pixelsPerMeterRatio)}else N.call(R,M.gl,v.transform.customLayerMatrix());M.setDirty(),v.setBaseState()}}else if("translucent"===v.renderPass){if(v.terrain&&v.terrain.renderingToTexture){const H=R.renderToTile;if(H){const J=b[0].canonical,re=new l.Y(J.x+b[0].wrap*(1<<J.z),J.y,J.z);M.setDepthMode(l.ae.disabled),M.setStencilMode(l.ag.disabled),M.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),H.call(R,M.gl,re),M.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),M.setStencilMode(l.ag.disabled);const N="3d"===R.renderingMode?new l.ae(v.context.gl.LEQUAL,l.ae.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,l.ae.ReadOnly);if(M.setDepthMode(N),"globe"===v.transform.projection.name){const H=v.transform.pointMerc;R.render(M.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),l.a1(v.transform.zoom),[H.x,H.y],v.transform.pixelsPerMeterRatio)}else R.render(M.gl,v.transform.customLayerMatrix());M.setDirty(),v.setBaseState(),M.bindFramebuffer.set(null)}}else l.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(v,r,d,b){if("opaque"===v.renderPass)return;const M=d.paint.get("model-opacity");if(0===M)return;const R=d.paint.get("model-cast-shadows");if("shadow"===v.renderPass&&(!R||v.terrain&&M<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof l.Z))return;const N=v.shadowRenderer,H=d.paint.get("model-receive-shadows");N&&(N.useNormalOffset=!0,H||(N.enabled=!1));const J=()=>{N&&(N.useNormalOffset=!0,H||(N.enabled=!0))},re=r.getSource();if("light-beam"===v.renderPass&&"batched-model"!==re.type)return;if("vector"===re.type||"geojson"===re.type)return function(st,Pt,Ft,Vt,en){const tn=st.transform;if("mercator"!==tn.projection.name)return void l.w(`Drawing 3D models for ${tn.projection.name} projection is not yet implemented`);const yn=tn.getFreeCameraOptions().position;if(!st.modelManager)return;const lt=st.modelManager;Ft.modelManager=lt;const $t=st.shadowRenderer;if(!Ft._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Sn=Ft._unevaluatedLayout._values["model-id"],ci={...Ft.layout.get("model-id").parameters},Dn=st.style.order.indexOf(Ft.fqid);for(const gn of Vt){const bi=Pt.getTile(gn).getBucket(Ft);if(!bi||bi.projection.name!==tn.projection.name)continue;const io=bi.getModelUris();io&&!bi.modelsRequested&&(lt.addModelsFromBucket(io,en),bi.modelsRequested=!0);const ro=Sl(gn,tn);ci.zoom=ro;const te=Sn.possiblyEvaluate(ci);if(cc(st,bi,gn),Gl.shadowUniformsInitialized=!1,Gl.useSingleShadowCascade=!!$t&&0===$t.getMaxCascadeForTile(gn.toUnwrapped()),"shadow"===st.renderPass&&$t){if(1===st.currentShadowCascade&&bi.isInsideFirstShadowMapFrustum)continue;const ie=tn.calculatePosMatrix(gn.toUnwrapped(),tn.worldSize);if(Gl.tileMatrix.set(ie),Gl.shadowTileMatrix=Float32Array.from($t.calculateShadowPassMatrixFromMatrix(ie)),Gl.aabb.min.fill(0),Gl.aabb.max[0]=Gl.aabb.max[1]=l.a3,Gl.aabb.max[2]=0,md(bi,Gl,st,Ft.scope))continue}const L=1<<gn.canonical.z,j=[((yn.x-gn.wrap)*L-gn.canonical.x)*l.a3,(yn.y*L-gn.canonical.y)*l.a3,yn.z*L*l.a3];st.conflationActive&&Object.keys(bi.instancesPerModel).length>0&&st.style.isLayerClipped(Ft,Pt.getSource())&&bi.updateReplacement(gn,st.replacementSource,Dn)&&(bi.uploaded=!1,bi.upload(st.context));for(let ie in bi.instancesPerModel){const Ne=bi.instancesPerModel[ie];Ne.features.length>0&&(ie=te.evaluate(Ne.features[0].feature,{}));const at=lt.getModel(ie,en);if(at&&at.uploaded)for(const ln of at.nodes)Qa(st,Ft,ln,Ne,j,gn,Gl)}}}(v,r,d,b,"vector"===re.type?d.scope:""),void J();if(!re.loaded())return;if("batched-model"===re.type)return function(st,Pt,Ft,Vt){Ft.resetLayerRenderingStats(st);const en=st.context,tn=st.transform,yn=st.style.fog,lt=st.shadowRenderer;if("mercator"!==tn.projection.name)return void l.w(`Drawing 3D landmark models for ${tn.projection.name} projection is not yet implemented`);const $t=st.transform.getFreeCameraOptions().position,Sn=l._.scale([],[$t.x,$t.y,$t.z],st.transform.worldSize);l._.negate(Sn,Sn);const ci=l.ad.identity([]),Dn=l.cg(tn.center.lat,tn.zoom),gn=l.ad.fromScaling([],[1,1,1/Dn]);l.ad.translate(ci,ci,Sn);const bi=Ft.paint.get("model-opacity"),io=new l.ae(en.gl.LEQUAL,l.ae.ReadWrite,st.depthRangeFor3D),ro=new l.ae(en.gl.LEQUAL,l.ae.ReadOnly,st.depthRangeFor3D),te=new l.b6([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),L="shadow"===st.renderPass,j=L&&lt?lt.getCurrentCascadeFrustum():tn.getFrustum(tn.scaleZoom(tn.worldSize)),ie=Ft.paint.get("model-front-cutoff"),Ne=ie[2]<1,at=Bc(st,Ft.paint.get("model-cutoff-fade-range")),ln=Ft.getLayerRenderingStats();(function(hn,Qn,Wn,Yi){const yr=hn.terrain?hn.terrain.exaggeration():0,Sr=hn.transform.zoom;for(const $r of Yi){const is=Qn.getTile($r).getBucket(Wn);is&&(hn.conflationActive&&is.updateReplacement($r,hn.replacementSource),is.evaluateScale(hn,Wn),hn.terrain&&yr>0&&is.elevationUpdate(hn.terrain,yr,$r,Wn.source),is.needsReEvaluation(hn,Sr,Wn)&&is.evaluate(Wn))}})(st,Pt,Ft,Vt),function(){let hn,Qn,Wn;Ne?(hn=Vt.length-1,Qn=-1,Wn=-1):(hn=0,Qn=Vt.length,Wn=1);for(let Yi=hn;Yi!==Qn;Yi+=Wn){const yr=Vt[Yi],Sr=Pt.getTile(yr).getBucket(Ft);if(!Sr||!Sr.uploaded)continue;let $r=!1;lt&&($r=0===lt.getMaxCascadeForTile(yr.toUnwrapped()));const is=tn.calculatePosMatrix(yr.toUnwrapped(),tn.worldSize),tl=Sr.modelTraits,Ds=[];for(const os of Sr.getNodesInfo()){if(os.hiddenByReplacement||!os.node.meshes)continue;const ea=os.node;let na=0;st.terrain&&ea.elevation&&(na=ea.elevation*st.terrain.exaggeration());const js=os.evaluatedScale;if(js[0]<=1&&js[1]<=1&&js[2]<=1&&0===(()=>{const ma=os.aabb;return te.min=[...ma.min],te.max=[...ma.max],te.min[2]+=na,te.max[2]+=na,l._.transformMat4(te.min,te.min,is),l._.transformMat4(te.max,te.max,is),te})().intersects(j))continue;const fs=[...is],ya=ea.anchor?ea.anchor[0]:0,ll=ea.anchor?ea.anchor[1]:0;l.ad.translate(fs,fs,[ya*(js[0]-1),ll*(js[1]-1),na]),l._.exactEquals(js,l.cj)||l.ad.scale(fs,fs,js);const ia=l.ad.multiply([],fs,ea.matrix),ba=l.ad.multiply([],tn.expandedFarZProjMatrix,ia),Ki=l.ad.multiply([],tn.expandedFarZProjMatrix,fs),er=l.aA.transformMat4([],[ya,ll,na,1],ba)[2];ea.hidden=!1;let us=bi;L||(Ne&&(us*=ec(fs,tn,os.aabb,ie)),us*=Bl(at,er)),0!==us?Ds.push({nodeInfo:os,depth:er,opacity:us,wvpForNode:ba,wvpForTile:Ki,nodeModelMatrix:ia,tileModelMatrix:fs}):ea.hidden=!0}L||Ds.sort((os,ea)=>!Ne||1===os.opacity&&1===ea.opacity?os.depth<ea.depth?-1:1:1===os.opacity?-1:1===ea.opacity?1:os.depth>ea.depth?-1:1);for(const os of Ds){const ea=os.nodeInfo,na=ea.node;let js=l.ad.multiply([],gn,os.tileModelMatrix);l.ad.multiply(js,ci,js);const fs=l.ad.invert([],js);l.ad.transpose(fs,fs),l.ad.scale(fs,fs,Pd),js=l.ad.multiply(js,js,na.matrix);const ya="light-beam"===st.renderPass,ll=tl&l.cl.HasMapboxMeshFeatures,ia=ll?0:ea.evaluatedRMEA[0][2];for(let ba=0;ba<na.meshes.length;++ba){const Ki=na.meshes[ba],er=ba===na.lightMeshIndex;let us=os.wvpForNode;if(er){if(!ya&&!st.terrain&&st.shadowRenderer){st.currentLayer<st.firstLightBeamLayer&&(st.firstLightBeamLayer=st.currentLayer);continue}us=os.wvpForTile}else if(ya)continue;const ma={defines:[]},ai=[];if(Ql(ma.defines,ai,Ki,st,Ft.lut),ll||ma.defines.push("DIFFUSE_SHADED"),$r&&ma.defines.push("SHADOWS_SINGLE_CASCADE"),ln&&(L?ln.numRenderedVerticesInShadowPass+=Ki.vertexArray.length:ln.numRenderedVerticesInTransparentPass+=Ki.vertexArray.length),L){ja(Ki,os.nodeModelMatrix,st,Ft);continue}let Ju=null;if(yn){const Ka=Ll(os.nodeModelMatrix,st.transform);if(Ju=new Float32Array(Ka),"globe"!==tn.projection.name){const e1=Ki.aabb.min,_1=Ki.aabb.max,[O1,Jh]=yn.getOpacityForBounds(Ka,e1[0],e1[1],_1[0],_1[1]);ma.overrideFog=O1>=mr||Jh>=mr}}const Id=Ki.material;let Iu;Id.occlusionTexture&&Id.occlusionTexture.offsetScale&&(Iu=Id.occlusionTexture.offsetScale,ma.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!L&&lt&&(lt.useNormalOffset=!!Ki.normalBuffer);const Lu=st.getOrCreateProgram("model",ma);!L&&lt&&lt.setupShadowsFromMatrix(os.tileModelMatrix,Lu,lt.useNormalOffset),st.uploadCommonUniforms(en,Lu,null,Ju);const Oh=Id.pbrMetallicRoughness;Oh.metallicFactor=.9,Oh.roughnessFactor=.5;const O0=Vh(new Float32Array(us),new Float32Array(js),new Float32Array(fs),new Float32Array(na.matrix),st,os.opacity,Oh.baseColorFactor.toRenderColor(null),Id.emissiveFactor,Oh.metallicFactor,Oh.roughnessFactor,Id,ia,Ft,[0,0,0],Iu);!er&&(ea.hasTranslucentParts||os.opacity<1)&&Lu.draw(st,en.gl.TRIANGLES,io,l.ag.disabled,l.a.disabled,l.af.backCCW,O0,Ft.id,Ki.vertexBuffer,Ki.indexBuffer,Ki.segments,Ft.paint,st.transform.zoom,void 0,ai),Lu.draw(st,en.gl.TRIANGLES,er?ro:io,l.ag.disabled,er||os.opacity<1||ea.hasTranslucentParts?l.a.alphaBlended:l.a.unblended,l.af.backCCW,O0,Ft.id,Ki.vertexBuffer,Ki.indexBuffer,Ki.segments,Ft.paint,st.transform.zoom,void 0,ai)}}}}()}(v,r,d,b),void J();if("model"!==re.type)return;const he=re.getModels(),ye=[],Pe=v.transform.getFreeCameraOptions().position,Fe=l._.scale([],[Pe.x,Pe.y,Pe.z],v.transform.worldSize);l._.negate(Fe,Fe);const Qe=[],Je=[];let ot=0;for(const st of he){const Pt=d.paint.get("model-rotation").constantOr(null),Ft=d.paint.get("model-scale").constantOr(null),Vt=d.paint.get("model-translation").constantOr(null);st.computeModelMatrix(v,Pt,Ft,Vt,!0,!0,!1);const en=l.ad.identity([]),tn=l.cg(st.position.lat,v.transform.zoom),yn=l.ad.fromScaling([],[1,1,1/tn]);l.ad.translate(en,en,Fe),ye.push({zScaleMatrix:yn,negCameraPosMatrix:en});for(const lt of st.nodes)Ga(v.transform,lt,st.matrix,v.transform.expandedFarZProjMatrix,ot,Qe,Je);ot++}if(Qe.sort((st,Pt)=>Pt.depth-st.depth),"shadow"!==v.renderPass){if(1===M)for(const st of Je)Jl(st,v,d,ye[st.modelIndex],l.ag.disabled,v.colorModeForRenderPass());else{for(const st of Je)Jl(st,v,d,ye[st.modelIndex],l.ag.disabled,l.a.disabled);for(const st of Je)Jl(st,v,d,ye[st.modelIndex],v.stencilModeFor3D(),v.colorModeForRenderPass());v.resetStencilClippingMasks()}for(const st of Qe)Jl(st,v,d,ye[st.modelIndex],l.ag.disabled,v.colorModeForRenderPass());J()}else{for(const st of Je)ja(st.mesh,st.nodeModelMatrix,v,d);for(const st of Qe)ja(st.mesh,st.nodeModelMatrix,v,d);J()}}},Ks={model:function(v,r,d){const b=r.getSource();if(!b.loaded())return;if("vector"===b.type||"geojson"===b.type)return void(d.modelManager&&d.modelManager.upload(d,"vector"===b.type?v.scope:""));if("batched-model"===b.type||"model"!==b.type)return;const M=b.getModels();for(const R of M)R.upload(d.context)},raster:function(v,r,d){const b=r.getSource();if(!(b instanceof Ai&&b.loaded()))return;const M=v.sourceLayer||b.rasterLayerIds&&b.rasterLayerIds[0];if(!M)return;const R=v.paint.get("raster-array-band")||b.getInitialBand(M);if(null==R)return;const N=r.getIds().map(H=>r.getTileByID(H));for(const H of N)H.updateNeeded(M,R)&&b.prepareTile(H,M,R)},"raster-particle":function(v,r,d){const b=r.getSource();if(!(b instanceof Ai&&b.loaded()))return;const M=v.sourceLayer||b.rasterLayerIds&&b.rasterLayerIds[0];if(!M)return;const R=v.paint.get("raster-particle-array-band")||b.getInitialBand(M);if(null==R)return;const N=r.getIds().map(H=>r.getTileByID(H));for(const H of N)H.updateNeeded(M,R)&&b.prepareTile(H,M,R)}};class Ru{constructor(r,d,b,M){this.context=new cs(r,d),this.occlusionBuffers=new vd(this.context),this.transform=b,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=M,this._timeStamp=l.e.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const R=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const N of R)this._debugParams.enabledLayers[N]=!0;M.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),M.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),M.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),M.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),M.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const N of R)M.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],N);this.symbolParams=new Or(M),this.setup(),this.numSublayers=l.bv.maxUnderzooming+l.bv.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new l.co,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new za(this),this._wireframeDebugCache=new gd,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[]}updateTerrain(r,d){const b=!!r&&!!r.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new gr(this,r));const M=this._terrain;this.transform.elevation=b?M:null,M.update(r,this.transform,d),this.transform.elevation&&!M.enabled&&(this.transform.elevation=null)}_updateFog(r){const d=r.fog;if(!d||"globe"===this.transform.projection.name||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,M]=d.getFovAdjustedRange(this.transform._fov);if(b>M)return void(this.transform.fogCullDistSq=null);const R=b+.78*(M-b);this.transform.fogCullDistSq=R*R}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(r){r&&!this._terrain&&(this._terrain=new gr(this,this.style)),this._forceTerrainMode=r}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(r,d){if(this.width=r*l.e.devicePixelRatio,this.height=d*l.e.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._mergedLayers[b].resize()}setup(){const r=this.context,d=new l.bt;d.emplaceBack(0,0),d.emplaceBack(l.a3,0),d.emplaceBack(0,l.a3),d.emplaceBack(l.a3,l.a3),this.tileExtentBuffer=r.createVertexBuffer(d,l.br.members),this.tileExtentSegments=l.b.simpleSegment(0,0,4,2);const b=new l.bt;b.emplaceBack(0,0),b.emplaceBack(l.a3,0),b.emplaceBack(0,l.a3),b.emplaceBack(l.a3,l.a3),this.debugBuffer=r.createVertexBuffer(b,l.br.members),this.debugSegments=l.b.simpleSegment(0,0,4,5);const M=new l.bt;M.emplaceBack(-1,-1),M.emplaceBack(1,-1),M.emplaceBack(-1,1),M.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(M,l.br.members),this.viewportSegments=l.b.simpleSegment(0,0,4,2);const R=new l.cp;R.emplaceBack(0,0,0,0),R.emplaceBack(l.a3,0,l.a3,0),R.emplaceBack(0,l.a3,0,l.a3),R.emplaceBack(l.a3,l.a3,l.a3,l.a3),this.mercatorBoundsBuffer=r.createVertexBuffer(R,l.cq.members),this.mercatorBoundsSegments=l.b.simpleSegment(0,0,4,2);const N=new l.bu;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(N);const H=new l.cr;for(const re of[0,1,3,2,0])H.emplaceBack(re);this.debugIndexBuffer=r.createIndexBuffer(H),this.emptyTexture=new l.T(r,new l.i({width:1,height:1},Uint8Array.of(0,0,0,0)),r.gl.RGBA),this.identityMat=l.ad.create();const J=this.context.gl;this.stencilClearMode=new l.ag({func:J.ALWAYS,mask:0},0,255,J.ZERO,J.ZERO,J.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(r){return r._makeTileBoundsBuffers(this.context,this.transform.projection),r._tileBoundsBuffer?{tileBoundsBuffer:r._tileBoundsBuffer,tileBoundsIndexBuffer:r._tileBoundsIndexBuffer,tileBoundsSegments:r._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const r=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,r.TRIANGLES,l.ae.disabled,this.stencilClearMode,l.a.disabled,l.af.disabled,$n(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(r,d,b){if(!d||this.currentStencilSource===d.id||!r.isTileClipped()||!b||0===b.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let H=!1;for(const J of b)if(void 0===this._tileClippingMaskIDs[J.key]){H=!0;break}if(!H)return}this.currentStencilSource=d.id;const M=this.context,R=M.gl;this.nextStencilID+b.length>256&&this.clearStencil(),M.setColorMode(l.a.disabled),M.setDepthMode(l.ae.disabled);const N=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const H of b){const J=d.getTile(H),re=this._tileClippingMaskIDs[H.key]=this.nextStencilID++,{tileBoundsBuffer:he,tileBoundsIndexBuffer:ye,tileBoundsSegments:Pe}=this.getTileBoundsBuffers(J);N.draw(this,R.TRIANGLES,l.ae.disabled,new l.ag({func:R.ALWAYS,mask:0},re,255,R.KEEP,R.KEEP,R.REPLACE),l.a.disabled,l.af.disabled,$n(H.projMatrix),"$clipping",he,ye,Pe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,d=this.context.gl;return new l.ag({func:d.NOTEQUAL,mask:255},r,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(r){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(r);const d=this.context.gl;return new l.ag({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(r){const d=this.context.gl,b=r.sort((N,H)=>H.overscaledZ-N.overscaledZ),M=b[b.length-1].overscaledZ,R=b[0].overscaledZ-M+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const N={};for(let H=0;H<R;H++)N[H+M]=new l.ag({func:d.GEQUAL,mask:255},H+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=R,[N,b]}return[{[M]:l.ag.disabled},b]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new l.a([r.CONSTANT_COLOR,r.ONE,r.CONSTANT_COLOR,r.ONE],new l.C(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?l.a.unblended:l.a.alphaBlended}colorModeForDrapableLayerRenderPass(r){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&"translucent"===this.renderPass?new l.a([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new l.C(0,0,0,void 0===r?0:r),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(r,d,b,M=!1){if(this.depthOcclusion)return new l.ae(this.context.gl.GREATER,l.ae.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!M)return l.ae.disabled;const R=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new l.ae(b||this.context.gl.LEQUAL,d,[R,R])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const r=this.context.gl,d=Math.ceil(this.width),b=Math.ceil(this.height),M=this.context.bindFramebuffer.get(),R=r.getParameter(r.TEXTURE_BINDING_2D);this.terrainDepthFBO&&this.terrainDepthFBO.width===d&&this.terrainDepthFBO.height===b||(this.terrainDepthFBO&&(this.terrainDepthFBO.destroy(),this.terrainDepthFBO=void 0,this.terrainDepthTexture=void 0),0!==d&&0!==b&&(this.terrainDepthFBO=new ti(this.context,d,b,!1,"texture"),this.terrainDepthTexture=new l.T(this.context,{width:d,height:b,data:null},r.DEPTH_STENCIL),this.terrainDepthFBO.depthAttachment.set(this.terrainDepthTexture.texture))),this.context.bindFramebuffer.set(M),r.bindTexture(r.TEXTURE_2D,R),this.terrainDepthFBO&&(r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,this.terrainDepthFBO.framebuffer),r.blitFramebuffer(0,0,d,b,0,0,d,b,r.DEPTH_BUFFER_BIT,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(0===this._dt?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((r,d)=>r+d/this._fpsHistory.length,0))}render(r,d){const b=l.e.now();this._dt=b-this._timeStamp,this._timeStamp=b,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=r.map.repaint,this.style=r,this.options=d;const M=this.style._mergedLayers,R=this.style.order.filter(lt=>{const $t=M[lt];return!($t.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[$t.type]}),N=R.map(lt=>M[lt]),H=this.style._mergedSourceCaches;this.imageManager=r.imageManager,this.modelManager=r.modelManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.e.now()),this.imageManager.beginFrame();let J=0,re=!1;for(const lt in H){const $t=H[lt];$t.used&&($t.prepare(this.context),$t.getSource().usedInConflation&&++J)}let he=!1;for(const lt of N)lt.isHidden(this.transform.zoom)||("clip"===lt.type&&(he=!0),this.prepareLayer(lt));const ye={},Pe={},Fe={},Qe={},Je={};for(const lt in H){const $t=H[lt];ye[lt]=$t.getVisibleCoordinates(),Pe[lt]=ye[lt].slice().reverse(),Fe[lt]=$t.getVisibleCoordinates(!0).reverse(),Qe[lt]=$t.getShadowCasterCoordinates(),Je[lt]=$t.sortCoordinatesByDistance(ye[lt])}const ot=lt=>{const $t=this.style.getLayerSourceCache(lt);return $t&&$t.used?$t.getSource():null};if(J||he){const lt=[],$t=[];let Sn=0;for(const ci of N)this.isSourceForClippingOrConflation(ci,ot(ci))&&(lt.push(ci),$t.push(Sn)),Sn++;if(lt&&(he||lt.length>1)){const ci=[];for(let Dn=0;Dn<lt.length;Dn++){const gn=lt[Dn],bi=$t[Dn],io=this.style.getLayerSourceCache(gn);if(!io||!io.used||!io.getSource().usedInConflation&&"clip"!==gn.type)continue;let ro=1/0,te=l.cu.None;if("clip"===gn.type){ro=bi;for(const L of gn.layout.get("clip-layer-types"))te|="model"===L?l.cu.Model:"symbol"===L?l.cu.Symbol:l.cu.FillExtrusion}ci.push({layer:gn.fqid,cache:io,order:ro,clipMask:te})}this.replacementSource.setSources(ci),re=!0}}re||this.replacementSource.clear(),this.conflationActive=re,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let lt=0;lt<N.length;lt++){const $t=N[lt],Sn=$t.cutoffRange();if(this.longestCutoffRange=Math.max(Sn,this.longestCutoffRange),Sn>0){const ci=ot($t);ci&&(this.minCutoffZoom=Math.max(ci.minzoom,this.minCutoffZoom)),$t.minzoom&&(this.minCutoffZoom=Math.max($t.minzoom,this.minCutoffZoom))}$t.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=lt),this._lastOcclusionLayer=lt)}const st=this.style&&this.style.fog;st?(this._fogVisible=0!==st.getOpacity(this.transform.pitch),this._fogVisible&&"globe"!==this.transform.projection.name&&(this._fogVisible=st.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Fe),this.opaquePassCutoff=0);const Pt=this._shadowRenderer;if(Pt){Pt.updateShadowParameters(this.transform,this.style.directionalLight);for(const lt in H)for(const $t of ye[lt]){let Sn={min:0,max:0};this.terrain&&(Sn=this.terrain.getMinMaxForTile($t)||Sn),Pt.addShadowReceiver($t.toUnwrapped(),Sn.min,Sn.max)}}if("globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new l.cs(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new pa(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!l.ct(this.context.gl))return;this.renderPass="offscreen";for(const lt of N){const $t=r.getLayerSourceCache(lt);if(!lt.hasOffscreenPass()||lt.isHidden(this.transform.zoom))continue;const Sn=$t?Pe[$t.id]:void 0;("custom"===lt.type||"raster"===lt.type||"raster-particle"===lt.type||lt.isSky()||Sn&&Sn.length)&&this.renderLayer(this,$t,lt,Sn)}this.depthRangeFor3D=[0,1-(N.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Qe)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Ft="globe"===this.transform.projection.name||this.transform.isHorizonVisible(),Vt=(()=>{if(d.showOverdrawInspector)return l.C.black;const lt=this.style.fog;if(lt&&this.transform.projection.supportsFog){const $t=this.style.getLut(lt.scope);if(!Ft){const Sn=lt.properties.get("color").toRenderColor($t).toArray01();return new l.C(...Sn)}if(Ft){const Sn=lt.properties.get("space-color").toRenderColor($t).toArray01();return new l.C(...Sn)}}return l.C.transparent})();if(this.context.clear({color:Vt,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ft&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){const lt=N[this.currentLayer],$t=r.getLayerSourceCache(lt);if(lt.isSky())continue;const Sn=$t?(lt.is3D()?Je:Pe)[$t.id]:void 0;this._renderTileClippingMasks(lt,$t,Sn),this.renderLayer(this,$t,lt,Sn)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ft&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||l.a1(this.transform.zoom)>0)&&("globe"===this.transform.projection.name||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){const lt=N[this.currentLayer],$t=r.getLayerSourceCache(lt);lt.isSky()&&this.renderLayer(this,$t,lt,$t?Pe[$t.id]:void 0)}function en(lt,$t){let Sn;return $t&&(Sn=("symbol"===lt.type?Fe:lt.is3D()?Je:Pe)[$t.id]),Sn}if(this.renderPass="translucent","globe"===this.transform.projection.name){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<R.length;){const lt=N[this.currentLayer];if("raster"===lt.type){const $t=r.getLayerSourceCache(lt);this.renderLayer(this,$t,lt,en(lt,$t))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let tn=0;Pt&&(tn=Pt.getShadowCastingLayerCount());let yn=!1;for(;this.currentLayer<R.length;){const lt=N[this.currentLayer],$t=r.getLayerSourceCache(lt);if(lt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(lt)){if(lt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(yn||!this.terrain||!this.style.hasSymbolLayers()&&!this.style.hasCircleLayers()||this.transform.isOrthographic||(yn=!0,this.blitDepth()),lt.is3D()||this.terrain||this._renderTileClippingMasks(lt,$t,$t?ye[$t.id]:void 0),this.renderLayer(this,$t,lt,en(lt,$t)),!this.terrain&&Pt&&tn>0&&lt.hasShadowPass()&&0==--tn&&(Pt.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Sn=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Sn;this.currentLayer++){const ci=N[this.currentLayer];if(!ci.hasLightBeamPass())continue;const Dn=r.getLayerSourceCache(ci);this.renderLayer(this,Dn,ci,Dn?Pe[Dn.id]:void 0)}this.currentLayer=Sn,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Sn=this.currentLayer;this.depthOcclusion=!0;for(const ci of this.layersWithOcclusionOpacity){this.currentLayer=ci;const Dn=N[this.currentLayer],gn=r.getLayerSourceCache(Dn),bi=gn?Pe[gn.id]:void 0;Dn.is3D()||this.terrain||this._renderTileClippingMasks(Dn,gn,gn?ye[gn.id]:void 0),this.renderLayer(this,gn,Dn,bi)}this.depthOcclusion=!1,this.currentLayer=Sn,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let lt=null;N.forEach($t=>{const Sn=r.getLayerSourceCache($t);Sn&&!$t.isHidden(this.transform.zoom)&&Sn.getVisibleCoordinates().length&&(!lt||lt.getSource().maxzoom<Sn.getSource().maxzoom)&&(lt=Sn)}),lt&&this.options.showTileBoundaries&&Fc.debug(this,lt,lt.getVisibleCoordinates(),l.C.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Fc.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new l.C(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(lt){const $t=lt.transform.padding;Ee(lt,lt.transform.height-($t.top||0),3,Dd),Ee(lt,$t.bottom||0,3,Xu),Bt(lt,$t.left||0,3,lc),Bt(lt,lt.transform.width-($t.right||0),3,wu);const Sn=lt.transform.centerPoint;var ci,Dn,gn,bi;Ce(ci=lt,(Dn=Sn.x)-1,(gn=lt.transform.height-Sn.y)-10,2,20,bi=xu),Ce(ci,Dn-10,gn-1,20,2,bi)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),re||(this.conflationActive=!1)}prepareLayer(r){this.gpuTimingStart(r);const{unsupportedLayers:d}=this.transform.projection,b=!d||!d.includes(r.type);if(Ks[r.type]&&(b||this.terrain&&"custom"===r.type)){const M=this.style.getLayerSourceCache(r);Ks[r.type](r,M,this)}this.gpuTimingEnd()}renderLayer(r,d,b,M){b.isHidden(this.transform.zoom)||("background"===b.type||"sky"===b.type||"custom"===b.type||"model"===b.type||"raster"===b.type||"raster-particle"===b.type||M&&M.length)&&(this.id=b.id,this.gpuTimingStart(b),r.transform.projection.unsupportedLayers&&r.transform.projection.unsupportedLayers.includes(b.type)&&(!r.terrain||"custom"!==b.type)||"clip"===b.type||Fc[b.type](r,d,b,M,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(r){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,b=this.context.gl;let M=this.gpuTimers[r.id];M||(M=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:b.createQuery()}),M.calls++,b.beginQuery(d.TIME_ELAPSED_EXT,M.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const r=this.context.extTimerQuery,d=this.context.gl,b=d.createQuery();this.deferredRenderGpuTimeQueries.push(b),d.beginQuery(r.TIME_ELAPSED_EXT,b)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const r=this.gpuTimers;return this.gpuTimers={},r}collectDeferredRenderGpuQueries(){const r=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],r}queryGpuTimers(r){const d={};for(const b in r){const M=r[b],R=this.context.extTimerQuery,N=R.getQueryParameter(M.query,this.context.gl.QUERY_RESULT)/1e6;R.deleteQueryEXT(M.query),d[b]=N}return d}queryGpuTimeDeferredRender(r){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery,b=this.context.gl;let M=0;for(const R of r)M+=d.getQueryParameter(R,b.QUERY_RESULT)/1e6,d.deleteQueryEXT(R);return M}translatePosMatrix(r,d,b,M,R){if(!b[0]&&!b[1])return r;const N=R?"map"===M?this.transform.angle:0:"viewport"===M?-this.transform.angle:0;if(N){const re=Math.sin(N),he=Math.cos(N);b=[b[0]*he-b[1]*re,b[0]*re+b[1]*he]}const H=[R?b[0]:l.bB(d,b[0],this.transform.zoom),R?b[1]:l.bB(d,b[1],this.transform.zoom),0],J=new Float32Array(16);return l.ad.translate(J,r,H),J}saveTileTexture(r){const d=r.size[0],b=this._tileTextures[d];b?b.push(r):this._tileTextures[d]=[r]}getTileTexture(r){const d=this._tileTextures[r];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return null!=this.context.extTextureFloatLinear}currentGlobalDefines(r,d,b){const M=void 0===b?this.terrain&&this.terrain.renderingToTexture:b,R=[];return this.style&&this.style.enable3dLights()&&("globeRaster"===r||"terrainRaster"===r?(R.push("LIGHTING_3D_MODE"),R.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):M||R.push("LIGHTING_3D_MODE")),"shadow"===this.renderPass?this._shadowMapDebug||R.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?R.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):R.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(R.push("TERRAIN"),this.linearFloatFilteringSupported()&&R.push("TERRAIN_DEM_FLOAT_FORMAT")),"globe"===this.transform.projection.name&&R.push("GLOBE"),!this._fogVisible||M||void 0!==d&&!d||R.push("FOG","FOG_DITHERING"),M&&R.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&R.push("OVERDRAW_INSPECTOR"),R}getOrCreateProgram(r,d){this.cache=this.cache||{};const b=d&&d.defines||[],M=d&&d.config,R=this.currentGlobalDefines(r,d&&d.overrideFog,d&&d.overrideRtt).concat(b),N=gs.cacheKey(Gu[r],r,R,M);return this.cache[N]||(this.cache[N]=new gs(this.context,r,Gu[r],M,$h[r],R)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.terrainDepthFBO&&(this.terrainDepthFBO.destroy(),this.terrainDepthFBO=void 0,this.terrainDepthTexture=void 0)}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(r,d){if(this.style.enable3dLights()){const b=this.style.directionalLight,M=this.style.ambientLight;if(b&&M){const R=((N,H,J)=>{const re=N.properties.get("direction"),he=N.properties.get("color").toRenderColor(J.getLut(N.scope)).toArray01(),ye=N.properties.get("intensity"),Pe=H.properties.get("color").toRenderColor(J.getLut(H.scope)).toArray01(),Fe=H.properties.get("intensity"),Qe=[re.x,re.y,re.z],Je=l.bA(Pe,Fe),ot=l.bA(he,ye);return{u_lighting_ambient_color:Je,u_lighting_directional_dir:Qe,u_lighting_directional_color:ot,u_ground_radiance:jr(Qe,ot,Je)}})(b,M,this.style);d.setLightsUniformValues(r,R)}}}uploadCommonUniforms(r,d,b,M,R){if(this.uploadCommonLightUniforms(r,d),this.terrain&&this.terrain.renderingToTexture)return;const N=this.style.fog;if(N){const H=N.getOpacity(this.transform.pitch),J=((re,he,ye,Pe,Fe,Qe,Je,ot,st,Pt,Ft,Vt)=>{const en=re.transform,tn=he.properties.get("color").toRenderColor(re.style.getLut(he.scope)).toArray01();tn[3]=Pe;const yn=re.frameCounter/1e3%1,[lt,$t]=he.properties.get("vertical-range");return{u_fog_matrix:ye?en.calculateFogTileMatrix(ye):Vt||re.identityMat,u_fog_range:he.getFovAdjustedRange(en._fov),u_fog_color:tn,u_fog_horizon_blend:he.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(lt,$t),$t],u_fog_temporal_offset:yn,u_frustum_tl:Fe,u_frustum_tr:Qe,u_frustum_br:Je,u_frustum_bl:ot,u_globe_pos:st,u_globe_radius:Pt,u_viewport:Ft,u_globe_transition:l.a1(en.zoom),u_is_globe:+("globe"===en.projection.name)}})(this,N,b,H,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*l.e.devicePixelRatio,this.transform.height*l.e.devicePixelRatio],M);d.setFogUniformValues(r,J)}R&&d.setCutoffUniformValues(r,R.uniformValues)}setTileLoadedFlag(r){this.tileLoaded=r}saveCanvasCopy(){const r=this.canvasCopy();r&&(this.frameCopies.push(r),this.tileLoaded=!1)}canvasCopy(){const r=this.context.gl,d=r.createTexture();return r.bindTexture(r.TEXTURE_2D,d),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,r.drawingBufferWidth,r.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const r=this.style&&this.style.fog;return!!r&&0!==r.getOpacity(this.transform.pitch)}getBackgroundTiles(){const r=this._backgroundTiles,d=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const M of b)d[M.key]=r[M.key]||new l.by(M,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(r,d){return!(!r.is3D()||r.minzoom&&r.minzoom>this.transform.zoom||(this.style._clipLayerIndices.length||"building"!==r.sourceLayer)&&"clip"!==r.type&&(!d||"batched-model"!==d.type))}isTileAffectedByFog(r){if(!this.style||!this.style.fog)return!1;if("globe"===this.transform.projection.name)return!0;let d=this._cachedTileFogOpacities[r.key];return d||(this._cachedTileFogOpacities[r.key]=d=this.style.fog.getOpacityForTile(r)),d[0]>=mr||d[1]>=mr}}class du{constructor(r,d,b,M){this.screenBounds=r,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,M)}static createFromScreenPoints(r,d){let b,M;if(r instanceof l.P||"number"==typeof r[0]){const R=l.P.convert(r);b=[R],M=d.isPointAboveHorizon(R)}else{const R=l.P.convert(r[0]),N=l.P.convert(r[1]);b=[R,N],M=l.cv(R,N).every(H=>d.isPointAboveHorizon(H))}return new du(b,d.getCameraPoint(),M,d)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(r){return l.cv(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],r)}bufferedCameraGeometry(r){const d=this.screenBounds[0],b=1===this.screenBounds.length?this.screenBounds[0].add(new l.P(1,1)):this.screenBounds[1],M=l.cv(d,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<b.x?M.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?M[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(M[3]=this.cameraPoint)),l.cw(M,r)}bufferedCameraGeometryGlobe(r){const d=this.screenBounds[0],b=1===this.screenBounds.length?this.screenBounds[0].add(new l.P(1,1)):this.screenBounds[1],M=l.cv(d,b,r),R=this.cameraPoint.clone();switch(3*((R.y>d.y)+(R.y>b.y))+((R.x>d.x)+(R.x>b.x))){case 0:M[0]=R,M[4]=R.clone();break;case 1:M.splice(1,0,R);break;case 2:M[1]=R;break;case 3:M.splice(4,0,R);break;case 5:M.splice(2,0,R);break;case 6:M[3]=R;break;case 7:M.splice(3,0,R);break;case 8:M[2]=R}return M}containsTile(r,d,b,M=0){const R=r.queryPadding/d._pixelsPerMercatorPixel+1,N=b?this._bufferedCameraMercator(R,d):this._bufferedScreenMercator(R,d);let H=r.tileID.wrap+(N.unwrapped?M:0);const J=N.polygon.map(ot=>l.cx(r.tileTransform,ot,H));if(!l.cy(J,0,0,l.a3,l.a3))return;H=r.tileID.wrap+(this.screenGeometryMercator.unwrapped?M:0);const re=this.screenGeometryMercator.polygon.map(ot=>l.cz(r.tileTransform,ot,H)),he=re.map(ot=>new l.P(ot[0],ot[1])),ye=d.getFreeCameraOptions().position||new l.Y(0,0,0),Pe=l.cz(r.tileTransform,ye,H),Fe=re.map(ot=>{const st=l._.sub(ot,ot,Pe);return l._.normalize(st,st),new l.aT(Pe,st)}),Qe=l.bB(r,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:he,tilespaceRays:Fe,bufferedTilespaceGeometry:J,bufferedTilespaceBounds:(Je=l.cA(J),Je.min.x=l.at(Je.min.x,0,l.a3),Je.min.y=l.at(Je.min.y,0,l.a3),Je.max.x=l.at(Je.max.x,0,l.a3),Je.max.y=l.at(Je.max.y,0,l.a3),Je),tile:r,tileID:r.tileID,pixelToTileUnitsFactor:Qe};var Je}_bufferedScreenMercator(r,d){const b=kh(r);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let M;return M="globe"===d.projection.name?this._projectAndResample(this.bufferedScreenGeometry(r),d):{polygon:this.bufferedScreenGeometry(r).map(R=>d.pointCoordinate3D(R)),unwrapped:!0},this._screenRaycastCache[b]=M,M}}_bufferedCameraMercator(r,d){const b=kh(r);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let M;return M="globe"===d.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(r),d):{polygon:this.bufferedCameraGeometry(r).map(R=>d.pointCoordinate3D(R)),unwrapped:!0},this._cameraRaycastCache[b]=M,M}}_projectAndResample(r,d){const b=function(R,N){const H=l.ad.multiply([],N.pixelMatrix,N.globeMatrix),J=[0,-l.cD,0,1],re=[0,l.cD,0,1],he=[0,0,0,1];l.aA.transformMat4(J,J,H),l.aA.transformMat4(re,re,H),l.aA.transformMat4(he,he,H);const ye=new l.P(J[0]/J[3],J[1]/J[3]),Pe=new l.P(re[0]/re[3],re[1]/re[3]),Fe=l.cB(R,ye)&&J[3]<he[3],Qe=l.cB(R,Pe)&&re[3]<he[3];if(!Fe&&!Qe)return null;const Je=function(yn,lt,$t){for(let Sn=1;Sn<yn.length;Sn++){const ci=Ac(lt.pointCoordinate3D(yn[Sn-1]).x),Dn=Ac(lt.pointCoordinate3D(yn[Sn]).x);if($t<0){if(ci<Dn)return{idx:Sn,t:-ci/(Dn-1-ci)}}else if(Dn<ci)return{idx:Sn,t:(1-ci)/(Dn+1-ci)}}return null}(R,N,Fe?-1:1);if(!Je)return null;const{idx:ot,t:st}=Je;let Pt=ot>1?vl(R.slice(0,ot),N):[],Ft=ot<R.length?vl(R.slice(ot),N):[];Pt=Pt.map(yn=>new l.P(Ac(yn.x),yn.y)),Ft=Ft.map(yn=>new l.P(Ac(yn.x),yn.y));const Vt=[...Pt];0===Vt.length&&Vt.push(Ft[Ft.length-1]);const en=l.a2(Vt[Vt.length-1].y,(0===Ft.length?Pt[0]:Ft[0]).y,st);let tn;return tn=Fe?[new l.P(0,en),new l.P(0,0),new l.P(1,0),new l.P(1,en)]:[new l.P(1,en),new l.P(1,1),new l.P(0,1),new l.P(0,en)],Vt.push(...tn),0===Ft.length?Vt.push(Pt[0]):Vt.push(...Ft),{polygon:Vt.map(yn=>new l.Y(yn.x,yn.y)),unwrapped:!1}}(r,d);if(b)return b;const M=function(R,N){let H=!1,J=-1/0,re=0;for(let ye=0;ye<R.length-1;ye++)R[ye].x>J&&(J=R[ye].x,re=ye);for(let ye=0;ye<R.length-1;ye++){const Pe=(re+ye)%(R.length-1),Fe=R[Pe],Qe=R[Pe+1];Math.abs(Fe.x-Qe.x)>.5&&(Fe.x<Qe.x?(Fe.x+=1,0===Pe&&(R[R.length-1].x+=1)):(Qe.x+=1,Pe+1===R.length-1&&(R[0].x+=1)),H=!0)}const he=l.aj(N.center.lng);return H&&he<Math.abs(he-1)&&R.forEach(ye=>{ye.x-=1}),{polygon:R,unwrapped:H}}(vl(r,d).map(R=>new l.P(Ac(R.x),R.y)),d);return{polygon:M.polygon.map(R=>new l.Y(R.x,R.y)),unwrapped:M.unwrapped}}}function vl(v,r){return l.cC(v,d=>{const b=r.pointCoordinate3D(d);d.x=b.x,d.y=b.y},1/256)}function Ac(v){return v<0?1+v%1:v%1}function kh(v){return 100*v|0}function Sh(v,r){const d=l.ad.identity([]);return l.ad.scale(d,d,[.5*v.width,.5*-v.height,1]),l.ad.translate(d,d,[1,-1,0]),l.ad.multiply(d,d,v.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(d)}function Yu(v,r,d,b,M,R,N,H=!1){const J=v.tilesIn(b,N,H);J.sort(tc);const re=[];for(const ye of J)re.push({wrappedTileID:ye.tile.tileID.wrapped().key,queryResults:ye.tile.queryRenderedFeatures(r,d,v._state,ye,M,R,Sh(v.transform,ye.tile.tileID),H)});const he=function(ye){const Pe={},Fe={};for(const Qe of ye){const Je=Qe.queryResults,ot=Qe.wrappedTileID,st=Fe[ot]=Fe[ot]||{};for(const Pt in Je){const Ft=Je[Pt],Vt=st[Pt]=st[Pt]||{},en=Pe[Pt]=Pe[Pt]||[];for(const tn of Ft)Vt[tn.featureIndex]||(Vt[tn.featureIndex]=!0,en.push(tn))}}return Pe}(re);for(const ye in he)he[ye].forEach(Pe=>{const Fe=Pe.feature,Qe=Fe.layer;Qe&&"background"!==Qe.type&&"sky"!==Qe.type&&"slot"!==Qe.type&&(Fe.source=Qe.source,Qe["source-layer"]&&(Fe.sourceLayer=Qe["source-layer"]),Fe.state=void 0!==Fe.id?v.getFeatureState(Qe["source-layer"],Fe.id):{})});return he}function Z1(v,r){const d=v.getRenderableIds().map(R=>v.getTileByID(R)),b=[],M={};for(let R=0;R<d.length;R++){const N=d[R],H=N.tileID.canonical.key;M[H]||(M[H]=!0,N.querySourceFeatures(b,r))}return b}function tc(v,r){const d=v.tileID,b=r.tileID;return d.overscaledZ-b.overscaledZ||d.canonical.y-b.canonical.y||d.wrap-b.wrap||d.canonical.x-b.canonical.x}class zu{constructor(r){this.style=r,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const r=!1,d=!1;for(const b in this.style._mergedLayers){const M=this.style._mergedLayers[b];if("fill-extrusion"===M.type)this.layers.push({layer:M,visible:r,visibilityChanged:d});else if("model"===M.type){const R=this.style.getLayerSource(M);R&&"batched-model"===R.type&&this.layers.push({layer:M,visible:r,visibilityChanged:d})}}}onNewFrame(r){this.layersGotHidden=!1;for(const d of this.layers){const b=d.layer;let M=!1;"fill-extrusion"===b.type?M=!b.isHidden(r)&&b.paint.get("fill-extrusion-opacity")>0:"model"===b.type&&(M=!b.isHidden(r)&&b.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!M&&d.visible,d.visible=M}}updateZOffset(r,d){this.currentBuildingBuckets=[];for(const M of this.layers){const R=M.layer,N=this.style.getLayerSourceCache(R);let H=1;"fill-extrusion"===R.type&&(H=M.visible?R.paint.get("fill-extrusion-vertical-scale"):0);let J=N?N.getTile(d):null;if(!J&&N&&d.canonical.z>N.getSource().minzoom){let re=d.scaledTo(Math.min(N.getSource().maxzoom,d.overscaledZ-1));for(;re.overscaledZ>=N.getSource().minzoom&&(J=N.getTile(re),!J&&0!==re.overscaledZ);)re=re.scaledTo(re.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:J?J.getBucket(R):null,tileID:J?J.tileID:d,verticalScale:H})}r.hasAnyZOffset=!1;let b=!1;for(let M=0;M<r.symbolInstances.length;M++){const R=r.symbolInstances.get(M),N=R.zOffset,H=this._getHeightAtTileOffset(d,R.tileAnchorX,R.tileAnchorY);R.zOffset=H!==Number.NEGATIVE_INFINITY?H:N,b||N===R.zOffset||(b=!0),r.hasAnyZOffset||0===R.zOffset||(r.hasAnyZOffset=!0)}b&&(r.zOffsetBuffersNeedUpload=!0,r.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(r,d,b,M){let R=d,N=b;if(r.canonical.z!==M.canonical.z){const H=M.canonical,J=1/(1<<r.canonical.z-H.z);R=(d+r.canonical.x*l.a3)*J-H.x*l.a3|0,N=(b+r.canonical.y*l.a3)*J-H.y*l.a3|0}return{tileX:R,tileY:N}}_getHeightAtTileOffset(r,d,b){let M,R;for(let N=0;N<this.layers.length;++N){if("fill-extrusion"!==this.layers[N].layer.type)continue;const{bucket:H,tileID:J,verticalScale:re}=this.currentBuildingBuckets[N];if(!H)continue;const{tileX:he,tileY:ye}=this._mapCoordToOverlappingTile(r,d,b,J),Pe=H.getHeightAtTileCoord(he,ye);Pe&&void 0!==Pe.height&&(Pe.hidden?M=Pe.height:R=Math.max(Pe.height*re,R||0))}if(void 0!==R)return R;for(let N=0;N<this.layers.length;++N){const H=this.layers[N];if("model"!==H.layer.type||!H.visible)continue;const{bucket:J,tileID:re}=this.currentBuildingBuckets[N];if(!J)continue;const{tileX:he,tileY:ye}=this._mapCoordToOverlappingTile(r,d,b,re),Pe=J.getHeightAtTileCoord(he,ye);if(Pe&&!Pe.hidden)return void 0===Pe.height&&void 0!==M?Math.min(Pe.maxHeight,M)*Pe.verticalScale:Pe.height?Pe.height*Pe.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Rd(v,r){const d={};for(const b in v)"ref"!==b&&(d[b]=v[b]);return l.cE.forEach(b=>{b in r&&(d[b]=r[b])}),d}function Hh(v){v=v.slice();const r=Object.create(null);for(let d=0;d<v.length;d++)r[v[d].id]=v[d];for(let d=0;d<v.length;d++)"ref"in v[d]&&(v[d]=Rd(v[d],r[v[d].ref]));return v}const Ws={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function E0(v,r,d){d.push({command:Ws.addSource,args:[v,r[v]]})}function Yd(v,r,d){r.push({command:Ws.removeSource,args:[v]}),d[v]=!0}function zd(v,r,d,b){Yd(v,d,b),E0(v,r,d)}function Q1(v,r,d){let b;for(b in v[d])if(v[d].hasOwnProperty(b)&&"data"!==b&&!qe(v[d][b],r[d][b]))return!1;for(b in r[d])if(r[d].hasOwnProperty(b)&&"data"!==b&&!qe(v[d][b],r[d][b]))return!1;return!0}function Th(v,r,d,b,M,R){let N;for(N in r=r||{},v=v||{})v.hasOwnProperty(N)&&(qe(v[N],r[N])||d.push({command:R,args:[b,N,r[N],M]}));for(N in r)r.hasOwnProperty(N)&&!v.hasOwnProperty(N)&&(qe(v[N],r[N])||d.push({command:R,args:[b,N,r[N],M]}))}function Yc(v){return v.id}function Zd(v,r){return v[r.id]=r,v}class W0{constructor(r,d){this.reset(r,d)}reset(r,d){this.points=r||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(1===this.points.length)return this.points[0];r=l.at(r,0,1);let d=1,b=this._distances[d];const M=r*this.paddedLength+this.padding;for(;b<M&&d<this._distances.length;)b=this._distances[++d];const R=d-1,N=this._distances[R],H=b-N,J=H>0?(M-N)/H:0;return this.points[R].mult(1-J).add(this.points[d].mult(J))}}class C0{constructor(r,d,b){const M=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(r/b),this.yCellCount=Math.ceil(d/b);for(let N=0;N<this.xCellCount*this.yCellCount;N++)M.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=d,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,d,b,M,R){this._forEachCell(d,b,M,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(M),this.bboxes.push(R)}insertCircle(r,d,b,M){this._forEachCell(d-M,b-M,d+M,b+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(d),this.circles.push(b),this.circles.push(M)}_insertBoxCell(r,d,b,M,R,N){this.boxCells[R].push(N)}_insertCircleCell(r,d,b,M,R,N){this.circleCells[R].push(N)}_query(r,d,b,M,R,N){if(b<0||r>this.width||M<0||d>this.height)return!R&&[];const H=[];if(r<=0&&d<=0&&this.width<=b&&this.height<=M){if(R)return!0;for(let J=0;J<this.boxKeys.length;J++)H.push({key:this.boxKeys[J],x1:this.bboxes[4*J],y1:this.bboxes[4*J+1],x2:this.bboxes[4*J+2],y2:this.bboxes[4*J+3]});for(let J=0;J<this.circleKeys.length;J++){const re=this.circles[3*J],he=this.circles[3*J+1],ye=this.circles[3*J+2];H.push({key:this.circleKeys[J],x1:re-ye,y1:he-ye,x2:re+ye,y2:he+ye})}return N?H.filter(N):H}return this._forEachCell(r,d,b,M,this._queryCell,H,{hitTest:R,seenUids:{box:{},circle:{}}},N),R?H.length>0:H}_queryCircle(r,d,b,M,R){const N=r-b,H=r+b,J=d-b,re=d+b;if(H<0||N>this.width||re<0||J>this.height)return!M&&[];const he=[];return this._forEachCell(N,J,H,re,this._queryCellCircle,he,{hitTest:M,circle:{x:r,y:d,radius:b},seenUids:{box:{},circle:{}}},R),M?he.length>0:he}query(r,d,b,M,R){return this._query(r,d,b,M,!1,R)}hitTest(r,d,b,M,R){return this._query(r,d,b,M,!0,R)}hitTestCircle(r,d,b,M){return this._queryCircle(r,d,b,!0,M)}_queryCell(r,d,b,M,R,N,H,J){const re=H.seenUids,he=this.boxCells[R];if(null!==he){const Pe=this.bboxes;for(const Fe of he)if(!re.box[Fe]){re.box[Fe]=!0;const Qe=4*Fe;if(r<=Pe[Qe+2]&&d<=Pe[Qe+3]&&b>=Pe[Qe+0]&&M>=Pe[Qe+1]&&(!J||J(this.boxKeys[Fe]))){if(H.hitTest)return N.push(!0),!0;N.push({key:this.boxKeys[Fe],x1:Pe[Qe],y1:Pe[Qe+1],x2:Pe[Qe+2],y2:Pe[Qe+3]})}}}const ye=this.circleCells[R];if(null!==ye){const Pe=this.circles;for(const Fe of ye)if(!re.circle[Fe]){re.circle[Fe]=!0;const Qe=3*Fe;if(this._circleAndRectCollide(Pe[Qe],Pe[Qe+1],Pe[Qe+2],r,d,b,M)&&(!J||J(this.circleKeys[Fe]))){if(H.hitTest)return N.push(!0),!0;{const Je=Pe[Qe],ot=Pe[Qe+1],st=Pe[Qe+2];N.push({key:this.circleKeys[Fe],x1:Je-st,y1:ot-st,x2:Je+st,y2:ot+st})}}}}}_queryCellCircle(r,d,b,M,R,N,H,J){const re=H.circle,he=H.seenUids,ye=this.boxCells[R];if(null!==ye){const Fe=this.bboxes;for(const Qe of ye)if(!he.box[Qe]){he.box[Qe]=!0;const Je=4*Qe;if(this._circleAndRectCollide(re.x,re.y,re.radius,Fe[Je+0],Fe[Je+1],Fe[Je+2],Fe[Je+3])&&(!J||J(this.boxKeys[Qe])))return N.push(!0),!0}}const Pe=this.circleCells[R];if(null!==Pe){const Fe=this.circles;for(const Qe of Pe)if(!he.circle[Qe]){he.circle[Qe]=!0;const Je=3*Qe;if(this._circlesCollide(Fe[Je],Fe[Je+1],Fe[Je+2],re.x,re.y,re.radius)&&(!J||J(this.circleKeys[Qe])))return N.push(!0),!0}}}_forEachCell(r,d,b,M,R,N,H,J){const re=this._convertToXCellCoord(r),he=this._convertToYCellCoord(d),ye=this._convertToXCellCoord(b),Pe=this._convertToYCellCoord(M);for(let Fe=re;Fe<=ye;Fe++)for(let Qe=he;Qe<=Pe;Qe++)if(R.call(this,r,d,b,M,this.xCellCount*Qe+Fe,N,H,J))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,d,b,M,R,N){const H=M-r,J=R-d,re=b+N;return re*re>H*H+J*J}_circleAndRectCollide(r,d,b,M,R,N,H){const J=(N-M)/2,re=Math.abs(r-(M+J));if(re>J+b)return!1;const he=(H-R)/2,ye=Math.abs(d-(R+he));if(ye>he+b)return!1;if(re<=J||ye<=he)return!0;const Pe=re-J,Fe=ye-he;return Pe*Pe+Fe*Fe<=b*b}}const uc=100;class Mh{constructor(r,d,b=new C0(r.width+200,r.height+200,25),M=new C0(r.width+200,r.height+200,25)){this.transform=r,this.grid=b,this.ignoredGrid=M,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+uc,this.screenBottomBoundary=r.height+uc,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.fogState=d}placeCollisionBox(r,d,b,M,R,N,H,J){let re=b.projectedAnchorX,he=b.projectedAnchorY,ye=b.projectedAnchorZ;const Pe=b.elevation,Fe=b.tileID,Qe=r.getProjection();if(Pe&&Fe){const[tn,yn,lt]=Qe.upVector(Fe.canonical,b.tileAnchorX,b.tileAnchorY),$t=Qe.upVectorScale(Fe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;re+=tn*Pe*$t,he+=yn*Pe*$t,ye+=lt*Pe*$t}const Je=this.projectAndGetPerspectiveRatio(H,re,he,ye,b.tileID,"globe"===Qe.name||!!Pe||this.transform.pitch>0,Qe),ot=N*Je.perspectiveRatio,st=(b.x1*d+M.x-b.padding)*ot+Je.point.x,Pt=(b.y1*d+M.y-b.padding)*ot+Je.point.y,Ft=(b.x2*d+M.x+b.padding)*ot+Je.point.x,Vt=(b.y2*d+M.y+b.padding)*ot+Je.point.y,en=Je.perspectiveRatio<=.55||Je.occluded;return!this.isInsideGrid(st,Pt,Ft,Vt)||!R&&this.grid.hitTest(st,Pt,Ft,Vt,J)||en?{box:[],offscreen:!1,occluded:Je.occluded}:{box:[st,Pt,Ft,Vt],offscreen:this.isOffscreen(st,Pt,Ft,Vt),occluded:!1}}placeCollisionCircles(r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je){const ot=[],st=this.transform.elevation,Pt=r.getProjection(),Ft=st?st.getAtTileOffsetFunc(Je,this.transform.center.lat,this.transform.worldSize,Pt):null,Vt=new l.P(b.tileAnchorX,b.tileAnchorY);let{x:en,y:tn,z:yn}=Pt.projectTilePoint(Vt.x,Vt.y,Je.canonical);if(Ft){const[te,L,j]=Ft(Vt);en+=te,tn+=L,yn+=j}const lt="globe"===Pt.name,$t=this.projectAndGetPerspectiveRatio(H,en,tn,yn,Je,lt||!!st||this.transform.pitch>0,Pt),{perspectiveRatio:Sn}=$t,ci=(ye?N/Sn:N*Sn)/l.bN,Dn=yo(en,tn,yn,J),gn=$t.signedDistanceFromCamera>0?cr(ci,R,b.lineOffsetX*ci,b.lineOffsetY*ci,!1,Dn,Vt,b,M,J,{},st&&!ye?Ft:null,ye&&!!st,Pt,Je,ye):null;let bi=!1,io=!1,ro=!0;if(gn&&!$t.occluded){const te=.5*Fe*Sn+Qe,L=new l.P(-100,-100),j=new l.P(this.screenRightBoundary,this.screenBottomBoundary),ie=new W0,{first:Ne,last:at}=gn,ln=Ne.path.length;let hn=[];for(let Yi=ln-1;Yi>=1;Yi--)hn.push(Ne.path[Yi]);for(let Yi=1;Yi<at.path.length;Yi++)hn.push(at.path[Yi]);const Qn=2.5*te;re&&(hn=hn.map(([Yi,yr,Sr],$r)=>(Ft&&!lt&&(Sr=Ft($r<ln-1?Ne.tilePath[ln-1-$r]:at.tilePath[$r-ln+2])[2]),yo(Yi,yr,Sr,re))),hn.some(Yi=>Yi[3]<=0)&&(hn=[]));let Wn=[];if(hn.length>0){let Yi=1/0,yr=-1/0,Sr=1/0,$r=-1/0;for(const is of hn)Yi=Math.min(Yi,is[0]),Sr=Math.min(Sr,is[1]),yr=Math.max(yr,is[0]),$r=Math.max($r,is[1]);yr>=L.x&&Yi<=j.x&&$r>=L.y&&Sr<=j.y&&(Wn=[hn.map(is=>new l.P(is[0],is[1]))],(Yi<L.x||yr>j.x||Sr<L.y||$r>j.y)&&(Wn=l.cF(Wn,L.x,L.y,j.x,j.y)))}for(const Yi of Wn){ie.reset(Yi,.25*te);let yr=0;yr=ie.length<=.5*te?1:Math.ceil(ie.paddedLength/Qn)+1;for(let Sr=0;Sr<yr;Sr++){const $r=Sr/Math.max(yr-1,1),is=ie.lerp($r),tl=is.x+uc,Ds=is.y+uc;ot.push(tl,Ds,te,0);const os=tl-te,ea=Ds-te,na=tl+te,js=Ds+te;if(ro=ro&&this.isOffscreen(os,ea,na,js),io=io||this.isInsideGrid(os,ea,na,js),!d&&this.grid.hitTestCircle(tl,Ds,te,Pe)&&(bi=!0,!he))return{circles:[],offscreen:!1,collisionDetected:bi,occluded:!1}}}}return{circles:!he&&bi||!io?[]:ot,offscreen:ro,collisionDetected:bi,occluded:$t.occluded}}queryRenderedSymbols(r){if(0===r.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let b=1/0,M=1/0,R=-1/0,N=-1/0;for(const he of r){const ye=new l.P(he.x+uc,he.y+uc);b=Math.min(b,ye.x),M=Math.min(M,ye.y),R=Math.max(R,ye.x),N=Math.max(N,ye.y),d.push(ye)}const H=this.grid.query(b,M,R,N).concat(this.ignoredGrid.query(b,M,R,N)),J={},re={};for(const he of H){const ye=he.key;if(void 0===J[ye.bucketInstanceId]&&(J[ye.bucketInstanceId]={}),J[ye.bucketInstanceId][ye.featureIndex])continue;const Pe=[new l.P(he.x1,he.y1),new l.P(he.x2,he.y1),new l.P(he.x2,he.y2),new l.P(he.x1,he.y2)];l.cG(d,Pe)&&(J[ye.bucketInstanceId][ye.featureIndex]=!0,void 0===re[ye.bucketInstanceId]&&(re[ye.bucketInstanceId]=[]),re[ye.bucketInstanceId].push(ye.featureIndex))}return re}insertCollisionBox(r,d,b,M,R){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:M,collisionGroupID:R},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,d,b,M,R){const N=d?this.ignoredGrid:this.grid,H={bucketInstanceId:b,featureIndex:M,collisionGroupID:R};for(let J=0;J<r.length;J+=4)N.insertCircle(H,r[J],r[J+1],r[J+2])}projectAndGetPerspectiveRatio(r,d,b,M,R,N,H){const J=[d,b,M,1];let re=!1;M||this.transform.pitch>0?(l.aA.transformMat4(J,J,r),this.fogState&&R&&"globe"!==H.name&&(re=function(Pe,Fe,Qe,Je,ot,st){const Pt=st.calculateFogTileMatrix(ot),Ft=[Fe,Qe,Je];return l._.transformMat4(Ft,Ft,Pt),ss(Pe,l._.length(Ft),st.pitch,st._fov)}(this.fogState,d,b,M,R.toUnwrapped(),this.transform)>.9)):ts(J,J,r);const he=J[3];return{point:new l.P((J[0]/he+1)/2*this.transform.width+uc,(-J[1]/he+1)/2*this.transform.height+uc),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(H)/he*.5,1.5),signedDistanceFromCamera:he,occluded:N&&J[2]>he||re}}isOffscreen(r,d,b,M){return b<uc||r>=this.screenRightBoundary||M<uc||d>this.screenBottomBoundary}isInsideGrid(r,d,b,M){return b>=0&&r<this.gridRightBoundary&&M>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const r=l.ad.identity([]);return l.ad.translate(r,r,[-100,-100,0]),r}}class q0{constructor(r,d,b,M){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?d:-d))):M&&b?1:0,this.placed=b}isHidden(){return 0===this.opacity&&!this.placed}}class k0{constructor(r,d,b,M,R,N=!1){this.text=new q0(r?r.text:null,d,b,R),this.icon=new q0(r?r.icon:null,d,M,R),this.clipped=N}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class cd{constructor(r,d,b,M=!1){this.text=r,this.icon=d,this.skipFade=b,this.clipped=M}}class _d{constructor(){this.invProjMatrix=l.ad.create(),this.viewportMatrix=l.ad.create(),this.circles=[]}}class m1{constructor(r,d,b,M,R){this.bucketInstanceId=r,this.featureIndex=d,this.sourceLayerIndex=b,this.bucketIndex=M,this.tileID=R}}class Qd{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const d=++this.maxGroupID;this.collisionGroups[r]={ID:d,predicate:b=>b.collisionGroupID===d}}return this.collisionGroups[r]}}function Ah(v,r,d,b,M){const{horizontalAlign:R,verticalAlign:N}=l.bQ(v),H=-(R-.5)*r,J=-(N-.5)*d,re=l.bP(v,b);return new l.P(H+re[0]*M,J+re[1]*M)}function yd(v,r,d,b,M){const R=new l.P(v,r);return d&&R._rotate(b?M:-M),R}class Jd{constructor(r,d,b,M,R,N){this.transform=r.clone(),this.projection=r.projection.name,this.collisionIndex=new Mh(this.transform,R),this.buildingIndex=N,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Qd(b),this.collisionCircleArrays={},this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,d,b,M){const R=b.getBucket(d),N=b.latestFeatureIndex;if(!R||!N||d.fqid!==R.layerIds[0])return;const H=R.layers[0].layout,J=b.collisionBoxArray,re=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),he=b.tileSize/l.a3,ye=b.tileID.toUnwrapped();this.transform.setProjection(R.projection);const Pe=(Fe=b.tileID,Qe=R.getProjection(),Je=this.transform,Qe.name===this.projection?Je.calculateProjMatrix(Fe.toUnwrapped()):Xd(Je,Qe,Fe));var Fe,Qe,Je;const ot="map"===H.get("text-pitch-alignment"),st="map"===H.get("text-rotation-alignment");d.compileFilter();const Pt=d.dynamicFilter(),Ft=d.dynamicFilterNeedsFeature(),Vt=this.transform.calculatePixelsToTileUnitsMatrix(b),en=vi(Pe,b.tileID.canonical,ot,st,this.transform,R.getProjection(),Vt);let tn=null;if(ot){const $t=go(Pe,b.tileID.canonical,ot,st,this.transform,R.getProjection(),Vt);tn=l.ad.multiply([],this.transform.labelPlaneMatrix,$t)}let yn=null;Pt&&b.latestFeatureIndex&&(yn={unwrappedTileID:ye,dynamicFilter:Pt,dynamicFilterNeedsFeature:Ft,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[R.bucketInstanceId]=new m1(R.bucketInstanceId,N,R.sourceLayerIndex,R.index,b.tileID);const lt={bucket:R,layout:H,posMatrix:Pe,textLabelPlaneMatrix:en,labelToScreenMatrix:tn,clippingData:yn,scale:re,textPixelRatio:he,holdingForFade:b.holdingForFade(),collisionBoxArray:J,partiallyEvaluatedTextSize:l.aD(R.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:l.aD(R.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(M)for(const $t of R.sortKeyRanges){const{sortKey:Sn,symbolInstanceStart:ci,symbolInstanceEnd:Dn}=$t;r.push({sortKey:Sn,symbolInstanceStart:ci,symbolInstanceEnd:Dn,parameters:lt})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:lt})}attemptAnchorPlacement(r,d,b,M,R,N,H,J,re,he,ye,Pe,Fe,Qe,Je,ot,st,Pt){const{textOffset0:Ft,textOffset1:Vt,crossTileID:en}=Pe,tn=[Ft,Vt],yn=Ah(r,b,M,tn,R),lt=this.collisionIndex.placeCollisionBox(Qe,R,d,yd(yn.x,yn.y,N,H,this.transform.angle),ye,J,re,he.predicate);if(ot){const $t=Qe.getSymbolInstanceIconSize(Pt,this.transform.zoom,Pe.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(Qe,$t,ot,yd(yn.x,yn.y,N,H,this.transform.angle),ye,J,re,he.predicate).box.length)return}if(lt.box.length>0){let $t;return this.prevPlacement&&this.prevPlacement.variableOffsets[en]&&this.prevPlacement.placements[en]&&this.prevPlacement.placements[en].text&&($t=this.prevPlacement.variableOffsets[en].anchor),this.variableOffsets[en]={textOffset:tn,width:b,height:M,anchor:r,textScale:R,prevAnchor:$t},this.markUsedJustification(Qe,r,Pe,Je),Qe.allowVerticalPlacement&&(this.markUsedOrientation(Qe,Je,Pe),this.placedOrientations[en]=Je),{shift:yn,placedGlyphBoxes:lt}}}placeLayerBucketPart(r,d,b,M){const{bucket:R,layout:N,posMatrix:H,textLabelPlaneMatrix:J,labelToScreenMatrix:re,clippingData:he,textPixelRatio:ye,holdingForFade:Pe,collisionBoxArray:Fe,partiallyEvaluatedTextSize:Qe,partiallyEvaluatedIconSize:Je,collisionGroup:ot}=r.parameters,st=N.get("text-optional"),Pt=N.get("icon-optional"),Ft=N.get("text-allow-overlap"),Vt=N.get("icon-allow-overlap"),en="map"===N.get("text-rotation-alignment"),tn="map"===N.get("text-pitch-alignment"),yn="viewport-y"===N.get("symbol-z-order"),lt=N.get("symbol-z-elevate");this.transform.setProjection(R.projection);let $t=Ft&&(Vt||!R.hasIconData()||Pt),Sn=Vt&&(Ft||!R.hasTextData()||st);!R.collisionArrays&&Fe&&R.deserializeCollisionBoxes(Fe),b&&M&&R.updateCollisionDebugBuffers(this.transform.zoom,Fe);const ci=(Dn,gn,bi)=>{const{crossTileID:io,numVerticalGlyphVertices:ro}=Dn;if(he){const na={zoom:this.transform.zoom,pitch:this.transform.pitch};let js=null;if(he.dynamicFilterNeedsFeature){const fs=this.retainedQueryData[R.bucketInstanceId];js=he.featureIndex.loadFeature({featureIndex:Dn.featureIndex,bucketIndex:fs.bucketIndex,sourceLayerIndex:fs.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,he.dynamicFilter)(na,js,this.retainedQueryData[R.bucketInstanceId].tileID.canonical,new l.P(Dn.tileAnchorX,Dn.tileAnchorY),this.transform.calculateDistanceTileData(he.unwrappedTileID)))return this.placements[io]=new cd(!1,!1,!1,!0),void d.add(io)}if(d.has(io))return;if(Pe)return void(this.placements[io]=new cd(!1,!1,!1));let te=!1,L=!1,j=!0,ie=!1,Ne=!1,at=null,ln={box:null,offscreen:null,occluded:null},hn={box:null,offscreen:null,occluded:null},Qn=null,Wn=null,Yi=null,yr=0,Sr=0,$r=0;bi.textFeatureIndex?yr=bi.textFeatureIndex:Dn.useRuntimeCollisionCircles&&(yr=Dn.featureIndex),bi.verticalTextFeatureIndex&&(Sr=bi.verticalTextFeatureIndex);const is=na=>{na.tileID=this.retainedQueryData[R.bucketInstanceId].tileID;const js=this.transform.elevation;na.elevation=Dn.zOffset+(js?js.getAtTileOffset(na.tileID,na.tileAnchorX,na.tileAnchorY):0)},tl=bi.textBox;if(tl){is(tl);const na=fs=>{let ya=l.aE.horizontal;if(R.allowVerticalPlacement&&!fs&&this.prevPlacement){const ll=this.prevPlacement.placedOrientations[io];ll&&(this.placedOrientations[io]=ll,ya=ll,this.markUsedOrientation(R,ya,Dn))}return ya},js=(fs,ya)=>{if(R.allowVerticalPlacement&&ro>0&&bi.verticalTextBox){for(const ll of R.writingModes)if(ll===l.aE.vertical?(ln=ya(),hn=ln):ln=fs(),ln&&ln.box&&ln.box.length)break}else ln=fs()};if(N.get("text-variable-anchor")){let fs=N.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[io]){const ia=this.prevPlacement.variableOffsets[io];fs.indexOf(ia.anchor)>0&&(fs=fs.filter(ba=>ba!==ia.anchor),fs.unshift(ia.anchor))}const ya=(ia,ba,Ki)=>{const er=R.getSymbolInstanceTextSize(Qe,Dn,this.transform.zoom,gn),us=(ia.x2-ia.x1)*er+2*ia.padding,ma=(ia.y2-ia.y1)*er+2*ia.padding,ai=Dn.hasIconTextFit&&!Vt?ba:null;ai&&is(ai);let Ju={box:[],offscreen:!1,occluded:!1};const Id=Ft?2*fs.length:fs.length;for(let Iu=0;Iu<Id;++Iu){const Lu=this.attemptAnchorPlacement(fs[Iu%fs.length],ia,us,ma,er,en,tn,ye,H,ot,Iu>=fs.length,Dn,gn,R,Ki,ai,Qe,Je);if(Lu&&(Ju=Lu.placedGlyphBoxes,Ju&&Ju.box&&Ju.box.length)){te=!0,at=Lu.shift;break}}return Ju};js(()=>ya(tl,bi.iconBox,l.aE.horizontal),()=>{const ia=bi.verticalTextBox;return ia&&is(ia),R.allowVerticalPlacement&&!(ln&&ln.box&&ln.box.length)&&ro>0&&ia?ya(ia,bi.verticalIconBox,l.aE.vertical):{box:null,offscreen:null,occluded:null}}),ln&&(te=ln.box,j=ln.offscreen,ie=ln.occluded);const ll=na(!(!ln||!ln.box));if(!te&&this.prevPlacement){const ia=this.prevPlacement.variableOffsets[io];ia&&(this.variableOffsets[io]=ia,this.markUsedJustification(R,ia.anchor,Dn,ll))}}else{const fs=(ya,ll)=>{const ia=R.getSymbolInstanceTextSize(Qe,Dn,this.transform.zoom,gn),ba=this.collisionIndex.placeCollisionBox(R,ia,ya,new l.P(0,0),Ft,ye,H,ot.predicate);return ba&&ba.box&&ba.box.length&&(this.markUsedOrientation(R,ll,Dn),this.placedOrientations[io]=ll),ba};js(()=>fs(tl,l.aE.horizontal),()=>{const ya=bi.verticalTextBox;return R.allowVerticalPlacement&&ro>0&&ya?(is(ya),fs(ya,l.aE.vertical)):{box:null,offscreen:null,occluded:null}}),na(!!(ln&&ln.box&&ln.box.length))}}if(Qn=ln,te=Qn&&Qn.box&&Qn.box.length>0,j=Qn&&Qn.offscreen,ie=Qn&&Qn.occluded,Dn.useRuntimeCollisionCircles){const na=R.text.placedSymbolArray.get(Dn.centerJustifiedTextSymbolIndex>=0?Dn.centerJustifiedTextSymbolIndex:Dn.verticalPlacedTextSymbolIndex),js=l.aF(R.textSizeData,Qe,na),fs=N.get("text-padding");Wn=this.collisionIndex.placeCollisionCircles(R,Ft,na,R.lineVertexArray,R.glyphOffsetArray,js,H,J,re,b,tn,ot.predicate,Dn.collisionCircleDiameter*js/l.bN,fs,this.retainedQueryData[R.bucketInstanceId].tileID),te=Ft||Wn.circles.length>0&&!Wn.collisionDetected,j=j&&Wn.offscreen,ie=Wn.occluded}if(bi.iconFeatureIndex&&($r=bi.iconFeatureIndex),bi.iconBox){const na=js=>{is(js);const fs=Dn.hasIconTextFit&&at?yd(at.x,at.y,en,tn,this.transform.angle):new l.P(0,0),ya=R.getSymbolInstanceIconSize(Je,this.transform.zoom,Dn.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(R,ya,js,fs,Vt,ye,H,ot.predicate)};hn&&hn.box&&hn.box.length&&bi.verticalIconBox?(Yi=na(bi.verticalIconBox),L=Yi.box.length>0):(Yi=na(bi.iconBox),L=Yi.box.length>0),j=j&&Yi.offscreen,Ne=Yi.occluded}const Ds=st||0===Dn.numHorizontalGlyphVertices&&0===ro,os=Pt||0===Dn.numIconVertices;if(Ds||os?os?Ds||(L=L&&te):te=L&&te:L=te=L&&te,te&&Qn&&Qn.box&&this.collisionIndex.insertCollisionBox(Qn.box,N.get("text-ignore-placement"),R.bucketInstanceId,hn&&hn.box&&Sr?Sr:yr,ot.ID),L&&Yi&&this.collisionIndex.insertCollisionBox(Yi.box,N.get("icon-ignore-placement"),R.bucketInstanceId,$r,ot.ID),Wn&&(te&&this.collisionIndex.insertCollisionCircles(Wn.circles,N.get("text-ignore-placement"),R.bucketInstanceId,yr,ot.ID),b)){const na=R.bucketInstanceId;let js=this.collisionCircleArrays[na];void 0===js&&(js=this.collisionCircleArrays[na]=new _d);for(let fs=0;fs<Wn.circles.length;fs+=4)js.circles.push(Wn.circles[fs+0]),js.circles.push(Wn.circles[fs+1]),js.circles.push(Wn.circles[fs+2]),js.circles.push(Wn.collisionDetected?1:0)}const ea="globe"!==R.projection.name;$t=$t&&(ea||!ie),Sn=Sn&&(ea||!Ne),this.placements[io]=new cd(te||$t,L||Sn,j||R.justReloaded),d.add(io)};if(lt&&this.buildingIndex&&(this.buildingIndex.updateZOffset(R,this.retainedQueryData[R.bucketInstanceId].tileID),R.updateZOffset()),yn){const Dn=R.getSortedSymbolIndexes(this.transform.angle);for(let gn=Dn.length-1;gn>=0;--gn){const bi=Dn[gn];ci(R.symbolInstances.get(bi),bi,R.collisionArrays[bi])}R.hasAnyZOffset&&l.w(`${R.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(R.hasAnyZOffset){const Dn=R.getSortedIndexesByZOffset();for(let gn=0;gn<Dn.length;++gn){const bi=Dn[gn];ci(R.symbolInstances.get(bi),bi,R.collisionArrays[bi])}}else for(let Dn=r.symbolInstanceStart;Dn<r.symbolInstanceEnd;Dn++)ci(R.symbolInstances.get(Dn),Dn,R.collisionArrays[Dn]);if(b&&R.bucketInstanceId in this.collisionCircleArrays){const Dn=this.collisionCircleArrays[R.bucketInstanceId];l.ad.invert(Dn.invProjMatrix,H),Dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1}markUsedJustification(r,d,b,M){const{leftJustifiedTextSymbolIndex:R,centerJustifiedTextSymbolIndex:N,rightJustifiedTextSymbolIndex:H,verticalPlacedTextSymbolIndex:J,crossTileID:re}=b,he=l.cJ(d),ye=M===l.aE.vertical?J:"left"===he?R:"center"===he?N:"right"===he?H:-1;R>=0&&(r.text.placedSymbolArray.get(R).crossTileID=ye>=0&&R!==ye?0:re),N>=0&&(r.text.placedSymbolArray.get(N).crossTileID=ye>=0&&N!==ye?0:re),H>=0&&(r.text.placedSymbolArray.get(H).crossTileID=ye>=0&&H!==ye?0:re),J>=0&&(r.text.placedSymbolArray.get(J).crossTileID=ye>=0&&J!==ye?0:re)}markUsedOrientation(r,d,b){const M=d===l.aE.horizontal||d===l.aE.horizontalOnly?d:0,R=d===l.aE.vertical?d:0,{leftJustifiedTextSymbolIndex:N,centerJustifiedTextSymbolIndex:H,rightJustifiedTextSymbolIndex:J,verticalPlacedTextSymbolIndex:re}=b,he=r.text.placedSymbolArray;N>=0&&(he.get(N).placedOrientation=M),H>=0&&(he.get(H).placedOrientation=M),J>=0&&(he.get(J).placedOrientation=M),re>=0&&(he.get(re).placedOrientation=R)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let b=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const M=d?d.symbolFadeChange(r):1,R=d?d.opacities:{},N=d?d.variableOffsets:{},H=d?d.placedOrientations:{};for(const J in this.placements){const re=this.placements[J],he=R[J];he?(this.opacities[J]=new k0(he,M,re.text,re.icon,null,re.clipped),b=b||re.text!==he.text.placed||re.icon!==he.icon.placed):(this.opacities[J]=new k0(null,M,re.text,re.icon,re.skipFade,re.clipped),b=b||re.text||re.icon)}for(const J in R){const re=R[J];if(!this.opacities[J]){const he=new k0(re,M,!1,!1);he.isHidden()||(this.opacities[J]=he,b=b||re.text.placed||re.icon.placed)}}for(const J in N)this.variableOffsets[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.variableOffsets[J]=N[J]);for(const J in H)this.placedOrientations[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.placedOrientations[J]=H[J]);b?this.lastPlacementChangeTime=r:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:r)}updateLayerOpacities(r,d,b,M){const R=new Set;for(const N of d){const H=N.getBucket(r);H&&N.latestFeatureIndex&&r.fqid===H.layerIds[0]&&(this.updateBucketOpacities(H,R,N.collisionBoxArray,b,M,N.tileID),H.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(H,N.tileID),H.updateZOffset()))}}updateBucketOpacities(r,d,b,M,R,N){r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const H=r.layers[0].layout,J=!!r.layers[0].dynamicFilter(),re=new k0(null,0,!1,!1,!0),he=H.get("text-allow-overlap"),ye=H.get("icon-allow-overlap"),Pe=H.get("text-variable-anchor"),Fe="map"===H.get("text-rotation-alignment"),Qe="map"===H.get("text-pitch-alignment"),Je=new k0(null,0,he&&(ye||!r.hasIconData()||H.get("icon-optional")),ye&&(he||!r.hasTextData()||H.get("text-optional")),!0);!r.collisionArrays&&b&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(b);const ot=(Pt,Ft,Vt)=>{for(let en=0;en<Ft/4;en++)Pt.opacityVertexArray.emplaceBack(Vt)};let st=0;R&&r.updateReplacement(N,R);for(let Pt=0;Pt<r.symbolInstances.length;Pt++){const Ft=r.symbolInstances.get(Pt),{numHorizontalGlyphVertices:Vt,numVerticalGlyphVertices:en,crossTileID:tn,numIconVertices:yn,tileAnchorX:lt,tileAnchorY:$t}=Ft,Sn=d.has(tn);let ci=this.opacities[tn];Sn?ci=re:ci||(ci=Je,this.opacities[tn]=ci),d.add(tn);const Dn=Vt>0||en>0,gn=yn>0,bi=this.placedOrientations[tn],io=bi===l.aE.vertical,ro=bi===l.aE.horizontal||bi===l.aE.horizontalOnly;!Dn&&!gn||ci.isHidden()||st++;let te=!1;if((Dn||gn)&&R)for(const L of r.activeReplacements){if(L.order<M||L.order===1/0||!(L.clipMask&l.cu.Symbol)||L.min.x>lt||lt>L.max.x||L.min.y>$t||$t>L.max.y)continue;const j=l.cH(lt,$t,N.canonical,L.footprintTileId.canonical);if(te=l.cI(j,L),te)break}if(Dn){const L=te?St:Ve(ci.text);ot(r.text,Vt,io?St:L),ot(r.text,en,ro?St:L);const j=ci.text.isHidden(),{leftJustifiedTextSymbolIndex:ie,centerJustifiedTextSymbolIndex:Ne,rightJustifiedTextSymbolIndex:at,verticalPlacedTextSymbolIndex:ln}=Ft,hn=r.text.placedSymbolArray,Qn=j||io?1:0;ie>=0&&(hn.get(ie).hidden=Qn),Ne>=0&&(hn.get(Ne).hidden=Qn),at>=0&&(hn.get(at).hidden=Qn),ln>=0&&(hn.get(ln).hidden=j||ro?1:0);const Wn=this.variableOffsets[tn];Wn&&this.markUsedJustification(r,Wn.anchor,Ft,bi);const Yi=this.placedOrientations[tn];Yi&&(this.markUsedJustification(r,"left",Ft,Yi),this.markUsedOrientation(r,Yi,Ft))}if(gn){const L=te?St:Ve(ci.icon),{placedIconSymbolIndex:j,verticalPlacedIconSymbolIndex:ie}=Ft,Ne=r.icon.placedSymbolArray,at=ci.icon.isHidden()?1:0;j>=0&&(ot(r.icon,yn,io?St:L),Ne.get(j).hidden=at),ie>=0&&(ot(r.icon,Ft.numVerticalIconVertices,ro?St:L),Ne.get(ie).hidden=at)}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const L=r.collisionArrays[Pt];if(L){let j=new l.P(0,0),ie=!0;if(L.textBox||L.verticalTextBox){if(Pe){const at=this.variableOffsets[tn];at?(j=Ah(at.anchor,at.width,at.height,at.textOffset,at.textScale),Fe&&j._rotate(Qe?this.transform.angle:-this.transform.angle)):ie=!1}J&&(ie=!ci.clipped),L.textBox&&bd(r.textCollisionBox.collisionVertexArray,ci.text.placed,!ie||io,j.x,j.y),L.verticalTextBox&&bd(r.textCollisionBox.collisionVertexArray,ci.text.placed,!ie||ro,j.x,j.y)}const Ne=ie&&!(ro||!L.verticalIconBox);L.iconBox&&bd(r.iconCollisionBox.collisionVertexArray,ci.icon.placed,Ne,Ft.hasIconTextFit?j.x:0,Ft.hasIconTextFit?j.y:0),L.verticalIconBox&&bd(r.iconCollisionBox.collisionVertexArray,ci.icon.placed,!Ne,Ft.hasIconTextFit?j.x:0,Ft.hasIconTextFit?j.y:0)}}}if(r.fullyClipped=0===st,r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.bucketInstanceId in this.collisionCircleArrays){const Pt=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Pt.invProjMatrix,r.placementViewportMatrix=Pt.viewportMatrix,r.collisionCircleArray=Pt.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return 0===this.fadeDuration?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,d){const b=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*b>r}setStale(){this.stale=!0}}function bd(v,r,d,b,M){v.emplaceBack(r?1:0,d?1:0,b||0,M||0),v.emplaceBack(r?1:0,d?1:0,b||0,M||0),v.emplaceBack(r?1:0,d?1:0,b||0,M||0),v.emplaceBack(r?1:0,d?1:0,b||0,M||0)}const hu=Math.pow(2,25),S0=Math.pow(2,24),Xi=Math.pow(2,17),oe=Math.pow(2,16),me=Math.pow(2,9),Se=Math.pow(2,8),ge=Math.pow(2,1);function Ve(v){if(0===v.opacity&&!v.placed)return 0;if(1===v.opacity&&v.placed)return 4294967295;const r=v.placed?1:0,d=Math.floor(127*v.opacity);return d*hu+r*S0+d*Xi+r*oe+d*me+r*Se+d*ge+r}const St=0;class Kt{constructor(r){this._sortAcrossTiles="viewport-y"!==r.layout.get("symbol-z-order")&&void 0!==r.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(r,d,b,M,R){const N=this._bucketParts;for(;this._currentTileIndex<r.length;)if(d.getBucketParts(N,M,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((H,J)=>H.sortKey-J.sortKey));this._currentPartIndex<N.length;){const H=N[this._currentPartIndex];if(d.placeLayerBucketPart(H,this._seenCrossTileIDs,b,0===H.symbolInstanceStart),this._currentPartIndex++,R())return!0}return!1}}class Ci{constructor(r,d,b,M,R,N,H,J,re){this.placement=new Jd(r,R,N,H,J,re),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=M,this._done=!1}isDone(){return this._done}continuePlacement(r,d,b,M){const R=l.e.now(),N=()=>{const H=l.e.now()-R;return!this._forceFullPlacement&&H>2};for(;this._currentPlacementIndex>=0;){const H=d[r[this._currentPlacementIndex]],J=this.placement.collisionIndex.transform.zoom;if("symbol"===H.type&&(!H.minzoom||H.minzoom<=J)&&(!H.maxzoom||H.maxzoom>J)){const re=H,he=re.layout.get("symbol-z-elevate"),ye=this._inProgressLayer=this._inProgressLayer||new Kt(re),Pe=l.al(H.source,H.scope);if(ye.continuePlacement(he?M[Pe]:b[Pe],this.placement,this._showCollisionBoxes,H,N))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const xo=512/l.a3/2;class Ei{constructor(r,d,b){this.tileID=r,this.bucketInstanceId=b,this.index=new l.cK(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const M=r.canonical.x*l.a3,R=r.canonical.y*l.a3;for(let N=0;N<d.length;N++){const{key:H,crossTileID:J,tileAnchorX:re,tileAnchorY:he}=d.get(N),ye=Math.floor((M+re)*xo),Pe=Math.floor((R+he)*xo);this.index.add(ye,Pe),this.keys.push(H),this.crossTileIDs.push(J)}this.index.finish()}findMatches(r,d,b){const M=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),R=xo/Math.pow(2,d.canonical.z-this.tileID.canonical.z),N=d.canonical.x*l.a3,H=d.canonical.y*l.a3;for(let J=0;J<r.length;J++){const re=r.get(J);if(re.crossTileID)continue;const{key:he,tileAnchorX:ye,tileAnchorY:Pe}=re,Fe=Math.floor((N+ye)*R),Qe=Math.floor((H+Pe)*R),Je=this.index.range(Fe-M,Qe-M,Fe+M,Qe+M);for(const ot of Je){const st=this.crossTileIDs[ot];if(this.keys[ot]===he&&!b.has(st)){b.add(st),re.crossTileID=st;break}}}}}class kr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ns{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const d=Math.round((r-this.lng)/360);if(0!==d)for(const b in this.indexes){const M=this.indexes[b],R={};for(const N in M){const H=M[N];H.tileID=H.tileID.unwrapTo(H.tileID.wrap+d),R[H.tileID.key]=H}this.indexes[b]=R}this.lng=r}addBucket(r,d,b){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let R=0;R<d.symbolInstances.length;R++)d.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]=new Set);const M=this.usedCrossTileIDs[r.overscaledZ];for(const R in this.indexes){const N=this.indexes[R];if(Number(R)>r.overscaledZ)for(const H in N){const J=N[H];J.tileID.isChildOf(r)&&J.findMatches(d.symbolInstances,r,M)}else{const H=N[r.scaledTo(Number(R)).key];H&&H.findMatches(d.symbolInstances,r,M)}}for(let R=0;R<d.symbolInstances.length;R++){const N=d.symbolInstances.get(R);N.crossTileID||(N.crossTileID=b.generate(),M.add(N.crossTileID))}return void 0===this.indexes[r.overscaledZ]&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ei(r,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(r,d){for(const b of d.crossTileIDs)this.usedCrossTileIDs[r].delete(b)}removeStaleBuckets(r){let d=!1;for(const b in this.indexes){const M=this.indexes[b];for(const R in M)r[M[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,M[R]),delete M[R],d=!0)}return d}}class Oa{constructor(){this.layerIndexes={},this.crossTileIDs=new kr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,d,b,M){let R=this.layerIndexes[r.fqid];void 0===R&&(R=this.layerIndexes[r.fqid]=new Ns);let N=!1;const H={};"globe"!==M.name&&R.handleWrapJump(b);for(const J of d){const re=J.getBucket(r);re&&r.fqid===re.layerIds[0]&&(re.bucketInstanceId||(re.bucketInstanceId=++this.maxBucketInstanceId),R.addBucket(J.tileID,re,this.crossTileIDs)&&(N=!0),H[re.bucketInstanceId]=!0)}return R.removeStaleBuckets(H)&&(N=!0),N}pruneUnusedLayers(r){const d={};r.forEach(b=>{d[b]=!0});for(const b in this.layerIndexes)d[b]||delete this.layerIndexes[b]}}const qs=new l.N({data:new l.O(l.L.colorTheme.data)}),Tl=(v,r)=>hi(v,r&&r.filter(d=>"source.canvas"!==d.identifier)),Nl=l.ah(Ws,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),vc=l.ah(Ws,["setCenter","setZoom","setBearing","setPitch"]),Zc={version:8,layers:[],sources:{}},Zu={duration:300,delay:0};class Dc extends l.E{constructor(r,d={}){super(),this.map=r,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=l.W({},Zu),this._buildingIndex=new zu(this),this.crossTileSymbolIndex=new Oa,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerIndices=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new xt,this.dispatcher=d.dispatcher?d.dispatcher:new l.bw(l.bx(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new Nr,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new l.cM(r._requestManager,d.localFontFamily?l.cN.all:d.localIdeographFontFamily?l.cN.ideographs:l.cN.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new Qr(r._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",l.cO());const b=this;this._rtlTextPluginCallback=Dc.registerForPluginStateChange(M=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:M.pluginStatus,pluginURL:M.pluginURL},(R,N)=>{if(l.cP(R),N&&N.every(H=>H))for(const H in b._sourceCaches){const J=b._sourceCaches[H],re=J.getSource().type;"vector"!==re&&"geojson"!==re||J.reload()}})}),this.on("data",M=>{if("source"!==M.dataType||"metadata"!==M.sourceDataType)return;const R=this.getOwnSource(M.sourceId);if(R&&R.vectorLayerIds)for(const N in this._layers){const H=this._layers[N];H.source===R.id&&this._validateLayer(H)}})}load(r){return r?("string"==typeof r?this.loadURL(r):this.loadJSON(r),this):this}_getGlobalId(r){if(!r)return null;if("string"==typeof r){if(l.cQ(r))return r;const d=l.cR(r);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${l.cS(JSON.stringify(r))}`}_diffStyle(r,d,b){this.globalId=this._getGlobalId(r);const M=(R,N)=>{try{N(null,this.setState(R,b))}catch(H){N(H,!1)}};if("string"==typeof r){const R=this.map._requestManager.normalizeStyleURL(r),N=this.map._requestManager.transformRequest(R,l.R.Style);l.g(N,(H,J)=>{H?this.fire(new l.d(H)):J&&M(J,d)})}else"object"==typeof r&&M(r,d)}loadURL(r,d={}){this.fire(new l.f("dataloading",{dataType:"style"}));const b="boolean"==typeof d.validate?d.validate:!l.cQ(r);this.globalId=this._getGlobalId(r),r=this.map._requestManager.normalizeStyleURL(r,d.accessToken),this.resolvedImports.add(r);const M=this.importsCache.get(r);if(M)return this._load(M,b);const R=this.map._requestManager.transformRequest(r,l.R.Style);this._request=l.g(R,(N,H)=>{if(this._request=null,N)this.fire(new l.d(N));else if(H)return this.importsCache.set(r,H),this._load(H,b)})}loadJSON(r,d={}){this.fire(new l.f("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(r),this._request=l.e.frame(()=>{this._request=null,this._load(r,!1!==d.validate)})}loadEmpty(){this.fire(new l.f("dataloading",{dataType:"style"})),this._load(Zc,!1)}_loadImports(r,d,b){if(this.importDepth>=4)return l.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const M=[];for(const R of r){const N=this._createFragmentStyle(R),H=new Promise(he=>{N.once("style.import.load",he),N.once("error",he)}).then(()=>this.mergeAll());if(M.push(H),this.resolvedImports.has(R.url)){N.loadEmpty();continue}const J=R.data||this.importsCache.get(R.url);J?(N.loadJSON(J,{validate:d}),this._isInternalStyle(J)&&(N.globalId=null)):R.url?N.loadURL(R.url,{validate:d}):N.loadEmpty();const re={style:N,id:R.id,config:R.config};if(b){const he=this.fragments.findIndex(({id:ye})=>ye===b);this.fragments=this.fragments.slice(0,he).concat(re).concat(this.fragments.slice(he))}else this.fragments.push(re)}return Promise.allSettled(M)}getImportGlobalIds(r=this,d=new Set){for(const b of r.fragments)b.style.globalId&&d.add(b.style.globalId),this.getImportGlobalIds(b.style,d);return[...d.values()]}_createFragmentStyle(r){const d=this.scope?l.al(r.id,this.scope):r.id;let b;const M=this._initialConfig&&this._initialConfig[d];(r.config||M)&&(b=l.W({},r.config,M));const R=new Dc(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:b,configOptions:this.options,configDependentLayers:this._configDependentLayers});return R.setEventedParent(this.map,{style:R}),R}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.isRootStyle()}_isInternalStyle(r){return this.isRootStyle()&&(r.fragment||!!r.schema&&!1!==r.fragment)}_load(r,d){const b=r.schema;if(this._isInternalStyle(r)){const N=l.W({},Zc,{imports:[{id:"basemap",data:r,url:""}]});return void this._load(N,d)}if(this.updateConfig(this._config,b),d&&Tl(this,Ue(r)))return;this._loaded=!0,this.stylesheet=l.cT(r);const M=()=>{for(const re in r.sources)this.addSource(re,r.sources[re],{validate:!1,isInitialLoad:!0});r.sprite?this._loadSprite(r.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(r.glyphs,this.scope);const N=Hh(this.stylesheet.layers);if(this._order=N.map(re=>re.id),this.stylesheet.light&&l.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(1===this.stylesheet.lights.length&&"flat"===this.stylesheet.lights[0].type){const re=this.stylesheet.lights[0];this.light=new Zi(re.properties,re.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Zi(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const re of N){const he=l.cY(re,this.scope,this._styleColorTheme.lut,this.options);he.isConfigDependent&&this._configDependentLayers.add(he.fqid),he.setEventedParent(this,{layer:{id:he.id}}),this._layers[he.id]=he,this._serializedLayers[he.id]=he.serialize();const ye=this.getOwnLayerSourceCache(he),Pe=!!this.directionalLight&&this.directionalLight.shadowsEnabled();ye&&he.canCastShadows()&&Pe&&(ye.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const H=this.stylesheet.terrain;H&&(this.checkCanvasFingerprintNoise(),this.terrainSetForDrapingOnly()||this._createTerrain(H,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new l.f("data",{dataType:"style"}));const J=this.isRootStyle();r.imports?this._loadImports(r.imports,d).then(()=>{this._reloadImports(),this.fire(new l.f(J?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new l.f(J?"style.load":"style.import.load")))},R=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=R,R){const N=this._evaluateColorThemeData(R);this._loadColorTheme(N).then(()=>{M()}).catch(H=>{l.w(`Couldn't load color theme from the stylesheet: ${H}`),M()})}else this._styleColorTheme.lut=null,M()}isRootStyle(){return 0===this.importDepth}mergeAll(){let r,d,b,M,R,N,H,J;const re={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(he=>{if(he.stylesheet){if(null!=he.light&&(r=he.light),he.stylesheet.lights)for(const ye of he.stylesheet.lights)"ambient"===ye.type&&null!=he.ambientLight&&(d=he.ambientLight),"directional"===ye.type&&null!=he.directionalLight&&(b=he.directionalLight);M=this._prioritizeTerrain(M,he.terrain,he.stylesheet.terrain),he.stylesheet.fog&&null!=he.fog&&(R=he.fog),null!=he.stylesheet.camera&&(J=he.stylesheet.camera),null!=he.stylesheet.projection&&(N=he.stylesheet.projection),null!=he.stylesheet.transition&&(H=he.stylesheet.transition),re[he.scope]=he._styleColorTheme}}),this.light=r,this.ambientLight=d,this.directionalLight=b,this.fog=R,this._styleColorThemeForScope=re,null===M?delete this.terrain:this.terrain=M,this.camera=J||{"camera-projection":"perspective"},this.projection=N||{name:"mercator"},this.transition=l.W({},Zu,H),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(r){const d=b=>{for(const M of b.fragments)d(M.style);r(b)};d(this)}_prioritizeTerrain(r,d,b){const M=r&&0===r.drapeRenderMode;return null===b?d&&0===d.drapeRenderMode?d:M?r:null:null!=d&&(!r||M||d&&1===d.drapeRenderMode)?d:r}mergeTerrain(){let r;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{r=this._prioritizeTerrain(r,d.terrain,d.stylesheet.terrain)}),null===r?delete this.terrain:this.terrain=r}mergeProjection(){let r;this.forEachFragmentStyle(d=>{null!=d.stylesheet.projection&&(r=d.stylesheet.projection)}),this.projection=r||{name:"mercator"}}mergeSources(){const r={},d={},b={};this.forEachFragmentStyle(M=>{for(const R in M._sourceCaches){const N=l.al(R,M.scope);r[N]=M._sourceCaches[R]}for(const R in M._otherSourceCaches){const N=l.al(R,M.scope);d[N]=M._otherSourceCaches[R]}for(const R in M._symbolSourceCaches){const N=l.al(R,M.scope);b[N]=M._symbolSourceCaches[R]}}),this._mergedSourceCaches=r,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=b}mergeLayers(){const r={},d=[],b={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(N=>{for(const H of N._order){const J=N._layers[H];if("slot"===J.type){const re=l.cU(H);if(r[re])continue;r[re]=[]}J.slot&&r[J.slot]?r[J.slot].push(J):d.push(J)}}),this._mergedOrder=[],this._clipLayerIndices=[];let M=0;const R=(N=[])=>{for(const H of N)if("slot"===H.type){const J=l.cU(H.id);r[J]&&R(r[J]),this._mergedSlots.push(J)}else{const J=l.al(H.id,H.scope);this._mergedOrder.push(J),b[J]=H,H.is3D()&&(this._has3DLayers=!0),"circle"===H.type&&(this._hasCircleLayers=!0),"symbol"===H.type&&(this._hasSymbolLayers=!0),"clip"===H.type&&this._clipLayerIndices.push(M),M++}};R(d),this._mergedLayers=b,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}getCamera(){return this.stylesheet.camera}setCamera(r){return this.stylesheet.camera=l.W({},this.stylesheet.camera,r),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(r){return r.data?function(d,b,M){const R=l.W({},b);for(const H of Object.keys(l.L.colorTheme))void 0===R[H]&&(R[H]=l.L.colorTheme[H].default);const N=new l.U(qs,d,new Map(M));return N.setTransitionOrValue(R,M),N.untransitioned().possiblyEvaluate(new l.X(0))}(this.scope,r,this.options).get("data"):null}_loadColorTheme(r){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((b,M)=>{const R="data:image/png;base64,";if(!r||0===r.length)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void b();let N=r;N.startsWith(R)||(N=R+N);const H="mapbox-reserved-lut",J=new Image;J.src=N,J.onerror=()=>{this._styleColorTheme.lutLoading=!1,M(new Error("Failed to load image data"))},J.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void b();this._styleColorTheme.lutLoading=!1;const{width:re,height:he,data:ye}=l.e.getImageData(J);if(he>32)return void M(new Error("The height of the image must be less than or equal to 32 pixels."));if(re!==he*he)return void M(new Error("The width of the image must be equal to the height squared."));this.getImage(H)&&this.removeImage(H),this.addImage(H,{data:new l.i({width:re,height:he},ye),pixelRatio:1,sdf:!1,version:0});const Pe=this.imageManager.getImage(H,this.scope);Pe?(this._styleColorTheme.lut={image:Pe.data,data:r},b()):M(new Error("Missing LUT image."))}})}getLut(r){const d=this._styleColorThemeForScope[r];return d?d.lut:null}setProjection(r){r?this.stylesheet.projection=r:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(r){this._spriteRequest=function(d,b,M){let R,N,H;const J=l.e.devicePixelRatio>1?"@2x":"";let re=l.g(b.transformRequest(b.normalizeSpriteURL(d,J,".json"),l.R.SpriteJSON),(Pe,Fe)=>{re=null,H||(H=Pe,R=Fe,ye())}),he=l.h(b.transformRequest(b.normalizeSpriteURL(d,J,".png"),l.R.SpriteImage),(Pe,Fe)=>{he=null,H||(H=Pe,N=Fe,ye())});function ye(){if(H)M(H);else if(R&&N){const Pe=l.e.getImageData(N),Fe={};for(const Qe in R){const{width:Je,height:ot,x:st,y:Pt,sdf:Ft,pixelRatio:Vt,stretchX:en,stretchY:tn,content:yn}=R[Qe],lt=new l.i({width:Je,height:ot});l.i.copy(Pe,lt,{x:st,y:Pt},{x:0,y:0},{width:Je,height:ot},null),Fe[Qe]={data:lt,pixelRatio:Vt,sdf:Ft,stretchX:en,stretchY:tn,content:yn}}M(null,Fe)}}return{cancel(){re&&(re.cancel(),re=null),he&&(he.cancel(),he=null)}}}(r,this.map._requestManager,(d,b)=>{if(this._spriteRequest=null,d)this.fire(new l.d(d));else if(b)for(const M in b)this.imageManager.addImage(M,this.scope,b[M]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new l.f("data",{dataType:"style"}))})}_validateLayer(r){const d=this.getOwnSource(r.source);if(!d)return;const b=r.sourceLayer;b&&("geojson"===d.type||d.vectorLayerIds&&-1===d.vectorLayerIds.indexOf(b))&&this.fire(new l.d(new Error(`Source layer "${b}" does not exist on source "${d.id}" as specified by style layer "${r.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const r in this._sourceCaches)if(!this._sourceCaches[r].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:r}of this.fragments)if(!r.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((r,d)=>{const b=this.fragments[d];return b&&b.style&&(r.data=b.style.serialize()),r})}_serializeSources(){const r={};for(const d in this._sourceCaches){const b=this._sourceCaches[d].getSource();r[b.id]||(r[b.id]=b.serialize())}return r}_serializeLayers(r){const d=[];for(const b of r){const M=this._layers[b];M&&"custom"!==M.type&&d.push(M.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const r in this._sourceCaches)if(this._sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(r){return!!this.terrain&&r.isDraped(this.getLayerSourceCache(r))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(r){const d=this.getOwnLayer(r);if(d)return d;this.fire(new l.d(new Error(`The layer '${r}' does not exist in the map's style.`)))}_checkSource(r){const d=this.getOwnSource(r);if(d)return d;this.fire(new l.d(new Error(`The source '${r}' does not exist in the map's style.`)))}update(r){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(r),this.directionalLight&&this.directionalLight.recalculate(r);const d=this.calculateLightsBrightness();r.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const b=this._changes.isDirty();let M=!1;if(this._changes.isDirty()){const N=this._changes.getLayerUpdatesByScope();for(const H in N){const{updatedIds:J,removedIds:re}=N[H];(J||re)&&(this._updateWorkerLayers(H,J,re),M=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(r),this.light&&this.light.updateTransitions(r),this.ambientLight&&this.ambientLight.updateTransitions(r),this.directionalLight&&this.directionalLight.updateTransitions(r),this.fog&&this.fog.updateTransitions(r),this._changes.reset()}const R={};for(const N in this._mergedSourceCaches){const H=this._mergedSourceCaches[N];R[N]=H.used,H.used=!1,H.tileCoverLift=0}for(const N of this._mergedOrder){const H=this._mergedLayers[N];if(H.recalculate(r,this._availableImages),!H.isHidden(r.zoom)){const J=this.getLayerSourceCache(H);J&&(J.used=!0,J.tileCoverLift=Math.max(J.tileCoverLift,H.tileCoverLift()))}if(!this._precompileDone&&this._shouldPrecompile)for(let J=H.minzoom||0;J<(H.maxzoom||25.5);J++){const re=this.map.painter;if(re){const he=H.getProgramIds();if(!he)continue;for(const ye of he){const Pe=H.getDefaultProgramParams(ye,r.zoom,this._styleColorTheme.lut);Pe&&(re.style=this,this.fog&&(re._fogVisible=!0,Pe.overrideFog=!0,re.getOrCreateProgram(ye,Pe)),re._fogVisible=!1,Pe.overrideFog=!1,re.getOrCreateProgram(ye,Pe),(this.stylesheet.terrain||this.stylesheet.projection&&"globe"===this.stylesheet.projection.name)&&(Pe.overrideRtt=!0,re.getOrCreateProgram(ye,Pe)))}}}}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&M&&this.mergeLayers();for(const N in R){const H=this._mergedSourceCaches[N];R[N]!==H.used&&H.getSource().fire(new l.f("data",{sourceDataType:"visibility",dataType:"source",sourceId:H.getSource().id}))}this.light&&this.light.recalculate(r),this.terrain&&this.terrain.recalculate(r),this.fog&&this.fog.recalculate(r),this.z=r.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),b&&this.fire(new l.f("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=this._changes.getUpdatedImages();if(r.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],r);this._changes.resetUpdatedImages()}}_updateWorkerLayers(r,d,b){const M=this.getFragmentStyle(r);M&&this.dispatcher.broadcast("updateLayers",{layers:d?M._serializeLayers(d):[],scope:r,removedIds:b||[],options:M.options})}setState(r,d){if(this._checkLoaded(),Tl(this,Ue(r)))return!1;(r=l.cT(r)).layers=Hh(r.layers);const b=function(N,H){if(!N)return[{command:Ws.setStyle,args:[H]}];let J=[];try{if(!qe(N.version,H.version))return[{command:Ws.setStyle,args:[H]}];if(qe(N.center,H.center)||J.push({command:Ws.setCenter,args:[H.center]}),qe(N.zoom,H.zoom)||J.push({command:Ws.setZoom,args:[H.zoom]}),qe(N.bearing,H.bearing)||J.push({command:Ws.setBearing,args:[H.bearing]}),qe(N.pitch,H.pitch)||J.push({command:Ws.setPitch,args:[H.pitch]}),qe(N.sprite,H.sprite)||J.push({command:Ws.setSprite,args:[H.sprite]}),qe(N.glyphs,H.glyphs)||J.push({command:Ws.setGlyphs,args:[H.glyphs]}),qe(N.imports,H.imports)||function(Fe=[],Qe=[],Je){Qe=Qe||[];const ot=(Fe=Fe||[]).map(Yc),st=Qe.map(Yc),Pt=Fe.reduce(Zd,{}),Ft=Qe.reduce(Zd,{}),Vt=ot.slice();let en,tn,yn,lt;for(en=0,tn=0;en<ot.length;en++)yn=ot[en],Ft.hasOwnProperty(yn)?tn++:(Je.push({command:Ws.removeImport,args:[yn]}),Vt.splice(Vt.indexOf(yn,tn),1));for(en=0,tn=0;en<st.length;en++)yn=st[st.length-1-en],Vt[Vt.length-1-en]!==yn&&(Pt.hasOwnProperty(yn)?(Je.push({command:Ws.removeImport,args:[yn]}),Vt.splice(Vt.lastIndexOf(yn,Vt.length-tn),1)):tn++,lt=Vt[Vt.length-en],Je.push({command:Ws.addImport,args:[Ft[yn],lt]}),Vt.splice(Vt.length-en,0,yn));for(const $t of Qe){const Sn=Pt[$t.id];Sn&&!qe(Sn,$t)&&Je.push({command:Ws.updateImport,args:[$t.id,$t]})}}(N.imports,H.imports,J),qe(N.transition,H.transition)||J.push({command:Ws.setTransition,args:[H.transition]}),qe(N.light,H.light)||J.push({command:Ws.setLight,args:[H.light]}),qe(N.fog,H.fog)||J.push({command:Ws.setFog,args:[H.fog]}),qe(N.projection,H.projection)||J.push({command:Ws.setProjection,args:[H.projection]}),qe(N.lights,H.lights)||J.push({command:Ws.setLights,args:[H.lights]}),qe(N.camera,H.camera)||J.push({command:Ws.setCamera,args:[H.camera]}),!qe(N["color-theme"],H["color-theme"]))return[{command:Ws.setStyle,args:[H]}];const re={},he=[];!function(Fe,Qe,Je,ot){let st;for(st in Qe=Qe||{},Fe=Fe||{})Fe.hasOwnProperty(st)&&(Qe.hasOwnProperty(st)||Yd(st,Je,ot));for(st in Qe){if(!Qe.hasOwnProperty(st))continue;const Pt=Qe[st];Fe.hasOwnProperty(st)?qe(Fe[st],Pt)||("geojson"===Fe[st].type&&"geojson"===Pt.type&&Q1(Fe,Qe,st)?Je.push({command:Ws.setGeoJSONSourceData,args:[st,Pt.data]}):zd(st,Qe,Je,ot)):E0(st,Qe,Je)}}(N.sources,H.sources,he,re);const ye=[];N.layers&&N.layers.forEach(Fe=>{Fe.source&&re[Fe.source]?J.push({command:Ws.removeLayer,args:[Fe.id]}):ye.push(Fe)});let Pe=N.terrain;Pe&&re[Pe.source]&&(J.push({command:Ws.setTerrain,args:[void 0]}),Pe=void 0),J=J.concat(he),qe(Pe,H.terrain)||J.push({command:Ws.setTerrain,args:[H.terrain]}),function(Fe,Qe,Je){Qe=Qe||[];const ot=(Fe=Fe||[]).map(Yc),st=Qe.map(Yc),Pt=Fe.reduce(Zd,{}),Ft=Qe.reduce(Zd,{}),Vt=ot.slice(),en=Object.create(null);let tn,yn,lt,$t,Sn,ci,Dn;for(tn=0,yn=0;tn<ot.length;tn++)lt=ot[tn],Ft.hasOwnProperty(lt)?yn++:(Je.push({command:Ws.removeLayer,args:[lt]}),Vt.splice(Vt.indexOf(lt,yn),1));for(tn=0,yn=0;tn<st.length;tn++)lt=st[st.length-1-tn],Vt[Vt.length-1-tn]!==lt&&(Pt.hasOwnProperty(lt)?(Je.push({command:Ws.removeLayer,args:[lt]}),Vt.splice(Vt.lastIndexOf(lt,Vt.length-yn),1)):yn++,ci=Vt[Vt.length-tn],Je.push({command:Ws.addLayer,args:[Ft[lt],ci]}),Vt.splice(Vt.length-tn,0,lt),en[lt]=!0);for(tn=0;tn<st.length;tn++)if(lt=st[tn],$t=Pt[lt],Sn=Ft[lt],!en[lt]&&!qe($t,Sn))if(qe($t.source,Sn.source)&&qe($t["source-layer"],Sn["source-layer"])&&qe($t.type,Sn.type)){for(Dn in Th($t.layout,Sn.layout,Je,lt,null,Ws.setLayoutProperty),Th($t.paint,Sn.paint,Je,lt,null,Ws.setPaintProperty),qe($t.slot,Sn.slot)||Je.push({command:Ws.setSlot,args:[lt,Sn.slot]}),qe($t.filter,Sn.filter)||Je.push({command:Ws.setFilter,args:[lt,Sn.filter]}),qe($t.minzoom,Sn.minzoom)&&qe($t.maxzoom,Sn.maxzoom)||Je.push({command:Ws.setLayerZoomRange,args:[lt,Sn.minzoom,Sn.maxzoom]}),$t)$t.hasOwnProperty(Dn)&&"layout"!==Dn&&"paint"!==Dn&&"filter"!==Dn&&"metadata"!==Dn&&"minzoom"!==Dn&&"maxzoom"!==Dn&&"slot"!==Dn&&(0===Dn.indexOf("paint.")?Th($t[Dn],Sn[Dn],Je,lt,Dn.slice(6),Ws.setPaintProperty):qe($t[Dn],Sn[Dn])||Je.push({command:Ws.setLayerProperty,args:[lt,Dn,Sn[Dn]]}));for(Dn in Sn)Sn.hasOwnProperty(Dn)&&!$t.hasOwnProperty(Dn)&&"layout"!==Dn&&"paint"!==Dn&&"filter"!==Dn&&"metadata"!==Dn&&"minzoom"!==Dn&&"maxzoom"!==Dn&&"slot"!==Dn&&(0===Dn.indexOf("paint.")?Th($t[Dn],Sn[Dn],Je,lt,Dn.slice(6),Ws.setPaintProperty):qe($t[Dn],Sn[Dn])||Je.push({command:Ws.setLayerProperty,args:[lt,Dn,Sn[Dn]]}))}else Je.push({command:Ws.removeLayer,args:[lt]}),ci=Vt[Vt.lastIndexOf(lt)+1],Je.push({command:Ws.addLayer,args:[Sn,ci]})}(ye,H.layers,J)}catch(re){console.warn("Unable to compute style diff:",re),J=[{command:Ws.setStyle,args:[H]}]}return J}(this.serialize(),r).filter(N=>!(N.command in vc));if(0===b.length)return!1;const M=b.filter(N=>!(N.command in Nl));if(M.length>0)throw new Error(`Unimplemented: ${M.map(N=>N.command).join(", ")}.`);const R=[];return b.forEach(N=>{R.push(this[N.command].apply(this,N.args))}),d&&Promise.all(R).then(d),this.stylesheet=r,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(r,d){return this.getImage(r)?this.fire(new l.d(new Error("An image with this name already exists."))):(this.imageManager.addImage(r,this.scope,d),this._afterImageUpdated(r),this)}updateImage(r,d){this.imageManager.updateImage(r,this.scope,d)}getImage(r){return this.imageManager.getImage(r,this.scope)}removeImage(r){return this.getImage(r)?(this.imageManager.removeImage(r,this.scope),this._afterImageUpdated(r),this):this.fire(new l.d(new Error("No image with this name exists.")))}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(r),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new l.f("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(r,d,b={}){return this._checkLoaded(),this._validate(oi,`models.${r}`,d,null,b)||(this.modelManager.addModel(r,d,this.scope),this._changes.setDirty()),this}hasModel(r){return this.modelManager.hasModel(r,this.scope)}removeModel(r){return this.hasModel(r)?(this.modelManager.removeModel(r,this.scope),this):this.fire(new l.d(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(r,d,b={}){if(this._checkLoaded(),void 0!==this.getOwnSource(r))throw new Error(`There is already a source with ID "${r}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(it,`sources.${r}`,d,null,b))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const M=mi(r,d,this.dispatcher,this);M.scope=this.scope,M.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(M.id),source:M.serialize(),sourceId:M.id}));const R=N=>{const H=(N?"symbol:":"other:")+M.id,J=l.al(H,this.scope),re=this._sourceCaches[H]=new l.bv(J,M,N);(N?this._symbolSourceCaches:this._otherSourceCaches)[M.id]=re,re.onAdd(this.map)};R(!1),"vector"!==d.type&&"geojson"!==d.type||R(!0),M.onAdd&&M.onAdd(this.map),b.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(r){this._checkLoaded();const d=this.getOwnSource(r);if(!d)throw new Error("There is no source with this ID");for(const M in this._layers)if(this._layers[M].source===r)return this.fire(new l.d(new Error(`Source "${r}" cannot be removed while layer "${M}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===r)return this.fire(new l.d(new Error(`Source "${r}" cannot be removed while terrain is using it.`)));const b=this.getOwnSourceCaches(r);for(const M of b){const R=l.cU(M.id);delete this._sourceCaches[R],this._changes.discardSourceCacheUpdate(M.id),M.fire(new l.f("data",{sourceDataType:"metadata",dataType:"source",sourceId:M.getSource().id})),M.setEventedParent(null),M.clearTiles()}return delete this._otherSourceCaches[r],delete this._symbolSourceCaches[r],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(r,d){this._checkLoaded(),this.getOwnSource(r).setData(d),this._changes.setDirty()}getOwnSource(r){const d=this.getOwnSourceCache(r);return d&&d.getSource()}getOwnSources(){const r=[];for(const d in this._otherSourceCaches){const b=this.getOwnSourceCache(d);b&&r.push(b.getSource())}return r}areTilesLoaded(){const r=this._mergedSourceCaches;for(const d in r){const b=r[d]._tiles;for(const M in b){const R=b[M];if("loaded"!==R.state&&"errored"!==R.state)return!1}}return!0}setLights(r){if(this._checkLoaded(),!r)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const M of r){if(this._validate(En,"lights",M))return;switch(M.type){case"ambient":if(this.ambientLight){const R=this.ambientLight;R.set(M),R.updateTransitions(d)}else this.ambientLight=new Ar(M,Hi,this.scope,this.options);break;case"directional":if(this.directionalLight){const R=this.directionalLight;R.set(M),R.updateTransitions(d)}else this.directionalLight=new Ar(M,Zo,this.scope,this.options)}}const b=new l.X(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(b),this.directionalLight&&this.directionalLight.recalculate(b),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const r=this.directionalLight,d=this.ambientLight;if(!r||!d)return;const b=ye=>.2126*(ye[0]<=.03928?ye[0]/12.92:Math.pow((ye[0]+.055)/1.055,2.4))+.7152*(ye[1]<=.03928?ye[1]/12.92:Math.pow((ye[1]+.055)/1.055,2.4))+.0722*(ye[2]<=.03928?ye[2]/12.92:Math.pow((ye[2]+.055)/1.055,2.4)),M=r.properties.get("color").toRenderColor(null).toArray01(),R=r.properties.get("intensity"),N=r.properties.get("direction"),H=1-l.ac(N.x,N.y,N.z)[2]/90,J=b(M)*R*H,re=d.properties.get("color").toRenderColor(null).toArray01(),he=d.properties.get("intensity");return(J+b(re)*he)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const r=[];return this.directionalLight&&r.push(this.directionalLight.get()),this.ambientLight&&r.push(this.ambientLight.get()),r}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(r){if(!r)return this;if(l.cV(r)){const d=l.cW(r),b=this.fragments.find(({id:R})=>R===d);if(!b)throw new Error(`Style import not found: ${r}`);const M=l.cU(r);return b.style.getFragmentStyle(M)}{const d=this.fragments.find(({id:b})=>b===r);if(!d)throw new Error(`Style import not found: ${r}`);return d.style}}getConfigProperty(r,d){const b=this.getFragmentStyle(r);if(!b)return null;const M=l.al(d,b.scope),R=b.options.get(M),N=R?R.value||R.default:null;return N?N.serialize():null}setConfigProperty(r,d,b){const M=this.getFragmentStyle(r);if(!M)return;const R=M.stylesheet.schema;if(!R||!R[d])return;const N=l.y(b);if("success"!==N.result)return void Tl(this,N.value);const H=N.value.expression,J=l.al(d,M.scope),re=M.options.get(J);if(!re)return;let he;const{minValue:ye,maxValue:Pe,stepValue:Fe,type:Qe,values:Je}=R[d],ot=l.y(R[d].default);"success"===ot.result&&(he=ot.value.expression),he?(this.options.set(J,{...re,value:H,default:he,minValue:ye,maxValue:Pe,stepValue:Fe,type:Qe,values:Je}),this.updateConfigDependencies()):this.fire(new l.d(new Error(`No schema defined for the config option "${d}" in the "${r}" fragment.`)))}getConfig(r){const d=this.getFragmentStyle(r);if(!d)return null;const b=d.stylesheet.schema;if(!b)return null;const M={};for(const R in b){const N=l.al(R,d.scope),H=d.options.get(N),J=H?H.value||H.default:null;M[R]=J?J.serialize():null}return M}setConfig(r,d){const b=this.getFragmentStyle(r);b&&(b.updateConfig(d,b.stylesheet.schema),this.updateConfigDependencies())}getSchema(r){const d=this.getFragmentStyle(r);return d?d.stylesheet.schema:null}setSchema(r,d){const b=this.getFragmentStyle(r);b&&(b.stylesheet.schema=d,b.updateConfig(b._config,d),this.updateConfigDependencies())}updateConfig(r,d){if(this._config=r,r||d)if(d)for(const b in d){let M,R;const N=l.y(d[b].default);if("success"===N.result&&(M=N.value.expression),r&&void 0!==r[b]){const Pe=l.y(r[b]);"success"===Pe.result&&(R=Pe.value.expression)}const{minValue:H,maxValue:J,stepValue:re,type:he,values:ye}=d[b];if(M){const Pe=l.al(b,this.scope);this.options.set(Pe,{default:M,value:R,minValue:H,maxValue:J,stepValue:re,type:he,values:ye})}else this.fire(new l.d(new Error(`No schema defined for config option "${b}".`)))}else this.fire(new l.d(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(const r of this._configDependentLayers){const d=this.getLayer(r);d&&(d.possiblyEvaluateVisibility(),this._updateLayer(d))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(r=>{if(r._styleColorTheme.colorTheme){const d=r._evaluateColorThemeData(r._styleColorTheme.colorTheme);(!r._styleColorTheme.lut||r._styleColorTheme.lut&&d!==r._styleColorTheme.lut.data)&&r.setColorTheme(r._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(r,d,b={}){this._checkLoaded();const M=r.id;if(this._layers[M])return void this.fire(new l.d(new Error(`Layer with id "${M}" already exists on this map`)));let R;if("custom"===r.type){if(Tl(this,l.cX(r)))return;R=l.cY(r,this.scope,this._styleColorTheme.lut,this.options)}else{if("object"==typeof r.source&&(this.addSource(M,r.source),r=l.cT(r),r=l.W(r,{source:M})),this._validate(Bi,`layers.${M}`,r,{arrayIndex:-1},b))return;R=l.cY(r,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(R),R.setEventedParent(this,{layer:{id:M}}),this._serializedLayers[R.id]=R.serialize()}R.isConfigDependent&&this._configDependentLayers.add(R.fqid);let N=this._order.length;if(d){const he=this._order.indexOf(d);if(-1===he)return void this.fire(new l.d(new Error(`Layer with id "${d}" does not exist on this map.`)));R.slot===this._layers[d].slot?N=he:l.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(N,0,M),this._layerOrderChanged=!0,this._layers[M]=R;const H=this.getOwnLayerSourceCache(R),J=!!this.directionalLight&&this.directionalLight.shadowsEnabled();H&&R.canCastShadows()&&J&&(H.castsShadows=!0);const re=this._changes.getRemovedLayer(R);if(re&&R.source&&H&&"custom"!==R.type){this._changes.discardLayerRemoval(R);const he=l.al(R.source,R.scope);re.type!==R.type?this._changes.updateSourceCache(he,"clear"):(this._changes.updateSourceCache(he,"reload"),H.pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map),R.scope=this.scope,this.mergeLayers()}moveLayer(r,d){this._checkLoaded();const b=this._checkLayer(r);if(!b||r===d)return;const M=this._order.indexOf(r);this._order.splice(M,1);let R=this._order.length;if(d){const N=this._order.indexOf(d);if(-1===N)return void this.fire(new l.d(new Error(`Layer with id "${d}" does not exist on this map.`)));b.slot===this._layers[d].slot?R=N:l.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(R,0,r),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(r){this._checkLoaded();const d=this._checkLayer(r);if(!d)return;d.setEventedParent(null);const b=this._order.indexOf(r);this._order.splice(b,1),delete this._layers[r],delete this._serializedLayers[r],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const M=this.getOwnLayerSourceCache(d);if(M&&M.castsShadows){let R=!1;for(const N in this._layers)if(this._layers[N].source===d.source&&this._layers[N].canCastShadows()){R=!0;break}M.castsShadows=R}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(r){return this._layers[r]}hasLayer(r){return r in this._mergedLayers}hasLayerType(r){for(const d in this._layers)if(this._layers[d].type===r)return!0;return!1}setLayerZoomRange(r,d,b){this._checkLoaded();const M=this._checkLayer(r);M&&(M.minzoom===d&&M.maxzoom===b||(null!=d&&(M.minzoom=d),null!=b&&(M.maxzoom=b),this._updateLayer(M)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(r,d){this._checkLoaded();const b=this._checkLayer(r);b&&b.slot!==d&&(b.slot=d,this._updateLayer(b))}setFilter(r,d,b={}){this._checkLoaded();const M=this._checkLayer(r);if(M&&!qe(M.filter,d))return null==d?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(Vi,`layers.${M.id}.filter`,d,{layerType:M.type},b)||(M.filter=l.cT(d),this._updateLayer(M)))}getFilter(r){const d=this._checkLayer(r);if(d)return l.cT(d.filter)}setLayoutProperty(r,d,b,M={}){this._checkLoaded();const R=this._checkLayer(r);if(R&&!qe(R.getLayoutProperty(d),b)){if(null!=b&&(!M||!1!==M.validate)&&Tl(R,rr.call(Ue,{key:`layers.${r}.layout.${d}`,layerType:R.type,objectKey:d,value:b,styleSpec:l.L,style:{glyphs:!0,sprite:!0}})))return;R.setLayoutProperty(d,b),R.isConfigDependent&&this._configDependentLayers.add(R.fqid),this._updateLayer(R)}}getLayoutProperty(r,d){const b=this._checkLayer(r);if(b)return b.getLayoutProperty(d)}setPaintProperty(r,d,b,M={}){this._checkLoaded();const R=this._checkLayer(r);if(!R||qe(R.getPaintProperty(d),b)||null!=b&&(!M||!1!==M.validate)&&Tl(R,Bo.call(Ue,{key:`layers.${r}.paint.${d}`,layerType:R.type,objectKey:d,value:b,styleSpec:l.L})))return;const N=R.setPaintProperty(d,b);R.isConfigDependent&&this._configDependentLayers.add(R.fqid),N&&this._updateLayer(R),this._changes.updatePaintProperties(R)}getPaintProperty(r,d){const b=this._checkLayer(r);if(b)return b.getPaintProperty(d)}setFeatureState(r,d){this._checkLoaded();const b=r.source,M=r.sourceLayer,R=this._checkSource(b);if(!R)return;const N=R.type;if("geojson"===N&&M)return void this.fire(new l.d(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===N&&!M)return void this.fire(new l.d(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===r.id&&this.fire(new l.d(new Error("The feature id parameter must be provided.")));const H=this.getOwnSourceCaches(b);for(const J of H)J.setFeatureState(M,r.id,d)}removeFeatureState(r,d){this._checkLoaded();const b=r.source,M=this._checkSource(b);if(!M)return;const R=M.type,N="vector"===R?r.sourceLayer:void 0;if("vector"===R&&!N)return void this.fire(new l.d(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&"string"!=typeof r.id&&"number"!=typeof r.id)return void this.fire(new l.d(new Error("A feature id is required to remove its specific state property.")));const H=this.getOwnSourceCaches(b);for(const J of H)J.removeFeatureState(N,r.id,d)}getFeatureState(r){this._checkLoaded();const d=r.source,b=r.sourceLayer,M=this._checkSource(d);if(M){if("vector"!==M.type||b)return void 0===r.id&&this.fire(new l.d(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(b,r.id);this.fire(new l.d(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(r){return this.stylesheet.transition=l.W({},this.stylesheet.transition,r),this.transition=this.stylesheet.transition,this}getTransition(){return l.W({},this.stylesheet.transition)}serialize(){this._checkLoaded();const r=this.getTerrain(),d=r&&this.terrain&&this.terrain.scope===this.scope?r:this.stylesheet.terrain;return l.cZ({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},b=>void 0!==b)}_updateLayer(r){this._changes.updateLayer(r);const d=this.getLayerSourceCache(r),b=l.al(r.source,r.scope),M=this._changes.getUpdatedSourceCaches();r.source&&!M[b]&&d&&"raster"!==d.getSource().type&&(this._changes.updateSourceCache(b,"reload"),d.pause()),r.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(r){const d=H=>"fill-extrusion"===this._mergedLayers[H].type||"model"===this._mergedLayers[H].type,b=this.order,M={},R=[];for(let H=b.length-1;H>=0;H--){const J=b[H];if(d(J)){M[J]=H;for(const re of r){const he=re[J];if(he)for(const ye of he)R.push(ye)}}}R.sort((H,J)=>J.intersectionZ-H.intersectionZ);const N=[];for(let H=b.length-1;H>=0;H--){const J=b[H];if(d(J))for(let re=R.length-1;re>=0;re--){const he=R[re].feature;if(he.layer&&M[he.layer.id]<H)break;N.push(he),R.pop()}else for(const re of r){const he=re[J];if(he)for(const ye of he)N.push(ye.feature)}}return N}queryRenderedFeatures(r,d,b){d&&d.filter&&this._validate(Vi,"queryRenderedFeatures.filter",d.filter,null,d),d.scope=this.scope,d.availableImages=this._availableImages,d.serializedLayers=this._serializedLayers;const M={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.d(new Error("parameters.layers must be an Array."))),[];for(const re of d.layers){const he=this._mergedLayers[re];if(!he)return this.fire(new l.d(new Error(`The layer '${re}' does not exist in the map's style and cannot be queried for features.`))),[];M[he.source]=!0}}const R=[],N=d.serializedLayers||{},H=d&&d.layers?d.layers.some(re=>{const he=this.getLayer(re);return he&&he.is3D()}):this.has3DLayers(),J=du.createFromScreenPoints(r,b);for(const re in this._mergedSourceCaches){const he=this._mergedSourceCaches[re].getSource();if(!he||he.scope!==d.scope)continue;const ye=this._mergedSourceCaches[re].getSource().id;d.layers&&!M[ye]||R.push(Yu(this._mergedSourceCaches[re],this._mergedLayers,N,J,d,b,H,!!this.map._showQueryGeometry))}return this.placement&&R.push(function(re,he,ye,Pe,Fe,Qe,Je){const ot={},st=Qe.queryRenderedSymbols(Pe),Pt=[];for(const Ft of Object.keys(st).map(Number))Pt.push(Je[Ft]);Pt.sort(tc);for(const Ft of Pt){const Vt=Ft.featureIndex.lookupSymbolFeatures(st[Ft.bucketInstanceId],he,Ft.bucketIndex,Ft.sourceLayerIndex,Fe.filter,Fe.layers,Fe.availableImages,re);for(const en in Vt){const tn=ot[en]=ot[en]||[],yn=Vt[en];yn.sort((lt,$t)=>{const Sn=Ft.featureSortOrder;if(Sn){const ci=Sn.indexOf(lt.featureIndex);return Sn.indexOf($t.featureIndex)-ci}return $t.featureIndex-lt.featureIndex});for(const lt of yn)tn.push(lt)}}for(const Ft in ot)ot[Ft].forEach(Vt=>{const en=Vt.feature,tn=ye(re[Ft]);if(!tn)return;const yn=tn.getFeatureState(en.layer["source-layer"],en.id);en.source=en.layer.source,en.layer["source-layer"]&&(en.sourceLayer=en.layer["source-layer"]),en.state=yn});return ot}(this._mergedLayers,N,this.getLayerSourceCache.bind(this),J.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(r,d){d&&d.filter&&this._validate(Vi,"querySourceFeatures.filter",d.filter,null,d);const b=this.getOwnSourceCaches(r);let M=[];for(const R of b)M=M.concat(Z1(R,d));return M}addSourceType(r,d,b){return Dc.getSourceType(r)?b(new Error(`A source type called "${r}" already exists.`)):(Dc.setSourceType(r,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:d.workerSourceURL},b):b(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(r,d,b={}){this._checkLoaded();const M=this.light.getLight();let R=!1;for(const H in r)if(!qe(r[H],M[H])){R=!0;break}if(!R)return;const N=this._getTransitionParameters();this.light.setLight(r,d,b),this.light.updateTransitions(N)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){void 0===this.disableElevatedTerrain&&(this.disableElevatedTerrain=l.e.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&l.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(r,d=1){if(this._checkLoaded(),!r)return this.terrainSetForDrapingOnly()&&0!==d||delete this.terrain,null===r?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let b=r;const M=null==r.source;if(1===d){if(this.disableElevatedTerrain)return;if("object"==typeof b.source){const H="terrain-dem-src";this.addSource(H,b.source),b=l.cT(b),b=l.W(b,{source:H})}const R=l.W({},b),N={};if(this.terrain&&M){R.source=this.terrain.get().source;const H=this.terrain?this.getFragmentStyle(this.terrain.scope):null;H&&(N.style=H.serialize())}if(this._validate(dn,"terrain",R,N))return}if(!this.terrain||this.terrain.scope!==this.scope&&!M||this.terrain&&d!==this.terrain.drapeRenderMode){if(!b)return;this._createTerrain(b,d),this.fire(new l.f("data",{dataType:"style"}))}else{const R=this.terrain,N=R.get();for(const H of Object.keys(l.L.terrain))!b.hasOwnProperty(H)&&l.L.terrain[H].default&&(b[H]=l.L.terrain[H].default);for(const H in r)if(!qe(r[H],N[H])){R.set(r,this.options),this.stylesheet.terrain=r;const J=this._getTransitionParameters({duration:0});R.updateTransitions(J),this.fire(new l.f("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(r){const d=this.fog=new Ra(r,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const b=this._getTransitionParameters({duration:0});d.updateTransitions(b)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const r of this.map._markers)r._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(r){if(this._checkLoaded(),!r)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!qe(d.get(),r)){d.set(r,this.options),this.stylesheet.fog=d.get();const b=this._getTransitionParameters({duration:0});d.updateTransitions(b)}}else this._createFog(r);this._markersNeedUpdate=!0}setColorTheme(r){this._checkLoaded();const d=()=>{for(const M in this._layers)this._layers[M].lut=this._styleColorTheme.lut;for(const M in this._sourceCaches)this._sourceCaches[M].clearTiles()};if(this._styleColorTheme.colorTheme=r,!r)return this._styleColorTheme.lut=null,void d();const b=this._evaluateColorThemeData(r);this._loadColorTheme(b).then(()=>{this.fire(new l.f("colorthemeset")),d()}).catch(M=>{l.w(`Couldn't set color theme: ${M}`)})}_getTransitionParameters(r){return{now:l.e.now(),transition:l.W(this.transition,r)}}updateDrapeFirstLayers(){if(!this.terrain)return;const r=[],d=[];for(const b in this._mergedLayers)this.isLayerDraped(this._mergedLayers[b])?r.push(b):d.push(b);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...r),this._drapedFirstOrder.push(...d)}_createTerrain(r,d){const b=this.terrain=new ri(r,d,this.scope,this.options);1===d&&(this.stylesheet.terrain=r),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const M=this._getTransitionParameters({duration:0});b.updateTransitions(M)}_force3DLayerUpdate(){for(const r in this._layers){const d=this._layers[r];"fill-extrusion"===d.type&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const r in this._layers){const d=this._layers[r];"symbol"===d.type&&this._updateLayer(d)}}_validate(r,d,b,M,R={}){if(R&&!1===R.validate)return!1;const N=l.W({},this.serialize());return Tl(this,r.call(Ue,l.W({key:d,style:N,value:b,styleSpec:l.L},M)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.c_.off("pluginStateChange",this._rtlTextPluginCallback);for(const r in this._mergedLayers)this._mergedLayers[r].setEventedParent(null);for(const r in this._mergedSourceCaches)this._mergedSourceCaches[r].clearTiles(),this._mergedSourceCaches[r].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(r){const d=this.getSourceCaches(r);for(const b of d)b.clearTiles()}clearSources(){for(const r in this._mergedSourceCaches)this._mergedSourceCaches[r].clearTiles()}reloadSource(r){const d=this.getSourceCaches(r);for(const b of d)b.resume(),b.reload()}reloadSources(){for(const r of this.getSources())r.reload&&r.reload()}updateSources(r){let d;this.directionalLight&&(d=gl(this.directionalLight));for(const b in this._mergedSourceCaches)this._mergedSourceCaches[b].update(r,void 0,void 0,d)}_generateCollisionBoxes(){for(const r in this._sourceCaches){const d=this._sourceCaches[r];d.resume(),d.reload()}}_updatePlacement(r,d,b,M,R,N,H=!1){let J=!1,re=!1;const he={},ye={};for(const Fe of this._mergedOrder){const Qe=this._mergedLayers[Fe];if("symbol"!==Qe.type)continue;const Je=l.al(Qe.source,Qe.scope);let ot=he[Je];if(!ot){const Pt=this.getLayerSourceCache(Qe);if(!Pt)continue;const Ft=Pt.getRenderableIds(!0).map(Vt=>Pt.getTileByID(Vt));ye[Je]=Ft.slice(),ot=he[Je]=Ft.sort((Vt,en)=>en.tileID.overscaledZ-Vt.tileID.overscaledZ||(Vt.tileID.isLessThan(en.tileID)?-1:1))}const st=this.crossTileSymbolIndex.addLayer(Qe,ot,d.center.lng,d.projection);J=J||st}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),H=H||this._layerOrderChanged||0===M,this._layerOrderChanged&&this.fire(new l.f("neworder")),(H||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.e.now(),d.zoom))&&(this.pauseablePlacement=new Ci(d,this._mergedOrder,H,b,M,R,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,he,ye),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.e.now()),re=!0),J&&this.pauseablePlacement.placement.setStale()),re||J){this._buildingIndex.onNewFrame(d.zoom);for(let Fe=0;Fe<this._mergedOrder.length;Fe++){const Qe=this._mergedLayers[this._mergedOrder[Fe]];if("symbol"!==Qe.type)continue;const Je=this.isLayerClipped(Qe)&&this._clipLayerIndices.some(ot=>Fe<ot);this.placement.updateLayerOpacities(Qe,he[l.al(Qe.source,Qe.scope)],Fe,Je?N:null)}}let Pe=!1;for(const Fe of this._mergedOrder){const Qe=this._mergedLayers[Fe];if("symbol"!==Qe.type)continue;const Je=he[l.al(Qe.source,Qe.scope)];for(const ot of Je){const st=ot.getBucket(Qe);st&&ot.latestFeatureIndex&&Qe.fqid===st.layerIds[0]&&(Pe=st.updateOcclusionOpacities(r.context,r.symbolParams,r._dt)||Pe)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.e.now())||Pe,occlusionQueryBasedOpacityChanged:Pe}}_releaseSymbolFadeTiles(){for(const r in this._sourceCaches)this._sourceCaches[r].releaseSymbolFadeTiles()}addImport(r,d){this._checkLoaded();const b=this.stylesheet.imports=this.stylesheet.imports||[];if(-1!==b.findIndex(({id:R})=>R===r.id))return void this.fire(new l.d(new Error(`Import with id '${r.id}' already exists in the map's style.`)));if(!d)return b.push(r),this._loadImports([r],!0);const M=b.findIndex(({id:R})=>R===d);return-1===M&&this.fire(new l.d(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=b.slice(0,M).concat(r).concat(b.slice(M)),this._loadImports([r],!0,d)}updateImport(r,d){this._checkLoaded();const b=this.stylesheet.imports||[],M=this.getImportIndex(r);return-1===M?this:"string"==typeof d?(this.setImportUrl(r,d),this):(d.url&&d.url!==b[M].url&&this.setImportUrl(r,d.url),qe(d.config,b[M].config)||this.setImportConfig(r,d.config),qe(d.data,b[M].data)||this.setImportData(r,d.data),this)}moveImport(r,d){this._checkLoaded();let b=this.stylesheet.imports||[];const M=this.getImportIndex(r);if(-1===M)return this;const R=this.getImportIndex(d);if(-1===R)return this;const N=b[M],H=this.fragments[M];return b=b.filter(({id:J})=>J!==r),this.fragments=this.fragments.filter(({id:J})=>J!==r),this.stylesheet.imports=b.slice(0,R).concat(N).concat(b.slice(R)),this.fragments=this.fragments.slice(0,R).concat(H).concat(this.fragments.slice(R)),this.mergeLayers(),this}setImportUrl(r,d){this._checkLoaded();const b=this.stylesheet.imports||[],M=this.getImportIndex(r);if(-1===M)return this;b[M].url=d;const R=this.fragments[M];return R.style=this._createFragmentStyle(b[M]),R.style.on("style.import.load",()=>this.mergeAll()),R.style.loadURL(d),this}setImportData(r,d){this._checkLoaded();const b=this.getImportIndex(r),M=this.stylesheet.imports||[];return-1===b?this:d?(this.fragments[b].style.setState(d),this._reloadImports(),this):(delete M[b].data,this.setImportUrl(r,M[b].url))}setImportConfig(r,d){this._checkLoaded();const b=this.getImportIndex(r),M=this.stylesheet.imports||[];if(-1===b)return this;d?M[b].config=d:delete M[b].config;const R=this.fragments[b],N=R.style.stylesheet&&R.style.stylesheet.schema;return R.config=d,R.style.updateConfig(d,N),this.updateConfigDependencies(),this}removeImport(r){this._checkLoaded();const d=this.stylesheet.imports||[],b=this.getImportIndex(r);-1!==b&&(d.splice(b,1),this.fragments[b].style._remove(),this.fragments.splice(b,1),this._reloadImports())}getImportIndex(r){const d=(this.stylesheet.imports||[]).findIndex(b=>b.id===r);return-1===d&&this.fire(new l.d(new Error(`Import '${r}' does not exist in the map's style and cannot be updated.`))),d}getLayer(r){return this._mergedLayers[r]}getSources(){const r=[];for(const d in this._mergedOtherSourceCaches){const b=this._mergedOtherSourceCaches[d];b&&r.push(b.getSource())}return r}getSource(r,d){const b=this.getSourceCache(r,d);return b&&b.getSource()}getLayerSource(r){const d=this.getLayerSourceCache(r);return d&&d.getSource()}getSourceCache(r,d){const b=l.al(r,d);return this._mergedOtherSourceCaches[b]}getLayerSourceCache(r){const d=l.al(r.source,r.scope);return"symbol"===r.type?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(r){if(null==r)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[r]&&d.push(this._mergedOtherSourceCaches[r]),this._mergedSymbolSourceCaches[r]&&d.push(this._mergedSymbolSourceCaches[r]),d}updateSourceCaches(){const r=this._changes.getUpdatedSourceCaches();for(const d in r){const b=r[d];"reload"===b?this.reloadSource(d):"clear"===b&&this.clearSource(d)}}updateLayers(r){const d=this._changes.getUpdatedPaintProperties();for(const b of d){const M=this.getLayer(b);M&&M.updateTransitions(r)}}getImages(r,d,b){this.imageManager.getImages(d.icons,d.scope,b),this._updateTilesForChangedImages();const M=R=>{R&&R.setDependencies(d.tileID.key,d.type,d.icons)};M(this._otherSourceCaches[d.source]),M(this._symbolSourceCaches[d.source])}getGlyphs(r,d,b){this.glyphManager.getGlyphs(d.stacks,d.scope,b)}getResource(r,d,b){return l.c$(d,b)}getOwnSourceCache(r){return this._otherSourceCaches[r]}getOwnLayerSourceCache(r){return"symbol"===r.type?this._symbolSourceCaches[r.source]:this._otherSourceCaches[r.source]}getOwnSourceCaches(r){const d=[];return this._otherSourceCaches[r]&&d.push(this._otherSourceCaches[r]),this._symbolSourceCaches[r]&&d.push(this._symbolSourceCaches[r]),d}_isSourceCacheLoaded(r){const d=this.getOwnSourceCaches(r);return 0===d.length?(this.fire(new l.d(new Error(`There is no source with ID '${r}'`))),!1):d.every(b=>b.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(r,d){if(0===this._clipLayerIndices.length&&"fill-extrusion"!==r.type)return!1;const b="fill-extrusion"===r.type&&"building"===r.sourceLayer;let M=0;if(r.is3D()){if(b||d&&"batched-model"===d.type)return!0;"model"===r.type&&(M=l.cu.Model)}else"symbol"===r.type&&(M=l.cu.Symbol);for(const R of this._clipLayerIndices){const N=this._mergedLayers[this._mergedOrder[R]];if(!N)continue;const H=[];for(const J of N.layout.get("clip-layer-types"))H.push("model"===J?l.cu.Model:"symbol"===J?l.cu.Symbol:l.cu.FillExtrusion);for(const J of H)if(M&J)return!0}return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(r=>{r.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}function Ou(v,r){let d=!1,b=null;const M=()=>{b=null,d&&(v(),b=setTimeout(M,r),d=!1)};return()=>(d=!0,b||M(),b)}Dc.getSourceType=function(v){return Ti[v]},Dc.setSourceType=function(v,r){Ti[v]=r},Dc.registerForPluginStateChange=l.cL;class T0{constructor(r){this._hashName=r&&encodeURIComponent(r),l.bp(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ou(this._updateHashUnthrottled.bind(this),300)}addTo(r){return this._map=r,window.addEventListener("hashchange",this._onHashChange,!1),r.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const r=this._map;if(!r)return"";const d=X0(r);if(this._hashName){const b=this._hashName;let M=!1;const R=location.hash.slice(1).split("&").map(N=>{const H=N.split("=")[0];return H===b?(M=!0,`${H}=${d}`):N}).filter(N=>N);return M||R.push(`${b}=${d}`),`#${R.join("&")}`}return`#${d}`}_getCurrentHash(){const r=location.hash.replace("#","");if(this._hashName){let d;return r.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(d=b)}),(d&&d[1]||"").split("/")}return r.split("/")}_onHashChange(){const r=this._map;if(!r)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(b=>isNaN(b))){const b=r.dragRotate.isEnabled()&&r.touchZoomRotate.isEnabled()?+(d[3]||0):r.getBearing();return r.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:b,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function X0(v,r){const d=v.getCenter(),b=Math.round(100*v.getZoom())/100,M=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,M),N=Math.round(d.lng*R)/R,H=Math.round(d.lat*R)/R,J=v.getBearing(),re=v.getPitch();let he=r?`/${N}/${H}/${b}`:`${b}/${H}/${N}`;return(J||re)&&(he+="/"+Math.round(10*J)/10),re&&(he+=`/${Math.round(re)}`),he}const _c={linearity:.3,easing:l.d0(0,0,.3,1)},v2=l.W({deceleration:2500,maxSpeed:1400},_c),eh=l.W({deceleration:20,maxSpeed:1400},_c),M0=l.W({deceleration:1e3,maxSpeed:360},_c),ud=l.W({deceleration:1e3,maxSpeed:90},_c);class Gh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.e.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,d=l.e.now();for(;r.length>0&&d-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)d.zoom+=R.zoomDelta||0,d.bearing+=R.bearingDelta||0,d.pitch+=R.pitchDelta||0,R.panDelta&&d.pan._add(R.panDelta),R.around&&(d.around=R.around),R.pinchAround&&(d.pinchAround=R.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(d.pan.mag()){const R=Wh(d.pan.mag(),b,l.W({},v2,r||{}));M.offset=d.pan.mult(R.amount/d.pan.mag()),M.center=this._map.transform.center,hh(M,R)}if(d.zoom){const R=Wh(d.zoom,b,eh);M.zoom=this._map.transform.zoom+R.amount,hh(M,R)}if(d.bearing){const R=Wh(d.bearing,b,M0);M.bearing=this._map.transform.bearing+l.at(R.amount,-179,179),hh(M,R)}if(d.pitch){const R=Wh(d.pitch,b,ud);M.pitch=this._map.transform.pitch+R.amount,hh(M,R)}if(M.zoom||M.bearing){const R=void 0===d.pinchAround?d.around:d.pinchAround;M.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),M.noMoveStart=!0,M}}function hh(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function Wh(v,r,d){const{maxSpeed:b,linearity:M,deceleration:R}=d,N=l.at(v*M/(r/1e3),-b,b),H=Math.abs(N)/(R*M);return{easing:d.easing,duration:1e3*H,amount:N*(H/2)}}class Qu extends l.f{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,b,M={}){const R=ht(d.getCanvasContainer(),b),N=d.unproject(R);super(r,l.W({point:R,lngLat:N,originalEvent:b},M)),this._defaultPrevented=!1,this.target=d}}class A0 extends l.f{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,b){const M="touchend"===r?b.changedTouches:b.touches,R=Jn(d.getCanvasContainer(),M),N=R.map(J=>d.unproject(J)),H=R.reduce((J,re,he,ye)=>J.add(re.div(ye.length)),new l.P(0,0));super(r,{points:R,point:H,lngLats:N,lngLat:d.unproject(H),originalEvent:b}),this._defaultPrevented=!1}}class qh extends l.f{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class Dh{constructor(r,d){this._map=r,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(r){return this._firePreventable(new qh(this._map,r))}mousedown(r,d){return this._mousedownPos=d,this._firePreventable(new Qu(r.type,this._map,r))}mouseup(r){this._map.fire(new Qu(r.type,this._map,r))}preclick(r){const d=l.W({},r);d.type="preclick",this._map.fire(new Qu(d.type,this._map,d))}click(r,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(r),this._map.fire(new Qu(r.type,this._map,r)))}dblclick(r){return this._firePreventable(new Qu(r.type,this._map,r))}mouseover(r){this._map.fire(new Qu(r.type,this._map,r))}mouseout(r){this._map.fire(new Qu(r.type,this._map,r))}touchstart(r){return this._firePreventable(new A0(r.type,this._map,r))}touchmove(r){this._map.fire(new A0(r.type,this._map,r))}touchend(r){this._map.fire(new A0(r.type,this._map,r))}touchcancel(r){this._map.fire(new A0(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class z1{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(r){this._map.fire(new Qu(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qu("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new Qu(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ph{constructor(r,d){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,d){this.isEnabled()&&r.shiftKey&&0===r.button&&(vt(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(r,d){if(!this._active)return;const b=d,M=this._startPos,R=this._lastPos;if(!M||!R||R.equals(b)||!this._box&&b.dist(M)<this._clickTolerance)return;this._lastPos=b,this._box||(this._box=Ut("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));const N=Math.min(M.x,b.x),H=Math.max(M.x,b.x),J=Math.min(M.y,b.y),re=Math.max(M.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${N}px,${J}px)`,this._box.style.width=H-N+"px",this._box.style.height=re-J+"px")})}mouseupWindow(r,d){if(!this._active)return;const b=this._startPos,M=d;if(b&&0===r.button){if(this.reset(),on(),b.x!==M.x||b.y!==M.y)return this._map.fire(new l.f("boxzoomend",{originalEvent:r})),{cameraAnimation:R=>R.fitScreenCoordinates(b,M,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",r)}}keydown(r){this._active&&27===r.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",r))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),un(),delete this._startPos,delete this._lastPos}_fireEvent(r,d){return this._map.fire(new l.f(r,{originalEvent:d}))}}function K0(v,r){const d={};for(let b=0;b<v.length;b++)d[v[b].identifier]=r[b];return d}class Y0{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(r,d,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=r.timeStamp),b.length===this.numTouches&&(this.centroid=function(M){const R=new l.P(0,0);for(const N of M)R._add(N);return R.div(M.length)}(d),this.touches=K0(b,d)))}touchmove(r,d,b){if(this.aborted||!this.centroid)return;const M=K0(b,d);for(const R in this.touches){const N=M[R];(!N||N.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(r,d,b){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),0===b.length){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class Qc{constructor(r){this.singleTap=new Y0(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(r,d,b){this.singleTap.touchstart(r,d,b)}touchmove(r,d,b){this.singleTap.touchmove(r,d,b)}touchend(r,d,b){const M=this.singleTap.touchend(r,d,b);if(M){const R=r.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(M)<30;if(R&&N||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class g1{constructor(){this._zoomIn=new Qc({numTouches:1,numTaps:2}),this._zoomOut=new Qc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,d,b){this._zoomIn.touchstart(r,d,b),this._zoomOut.touchstart(r,d,b)}touchmove(r,d,b){this._zoomIn.touchmove(r,d,b),this._zoomOut.touchmove(r,d,b)}touchend(r,d,b){const M=this._zoomIn.touchend(r,d,b),R=this._zoomOut.touchend(r,d,b);return M?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:N.getZoom()+1,around:N.unproject(M)},{originalEvent:r})}):R?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:N.getZoom()-1,around:N.unproject(R)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wd={0:1,2:2};class Ph{constructor(r){this.reset(),this._clickTolerance=r.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(r,d){return!1}_move(r,d){return{}}mousedown(r,d){if(this._lastPoint)return;const b=An(r);this._correctButton(r,b)&&(this._lastPoint=d,this._eventButton=b)}mousemoveWindow(r,d){const b=this._lastPoint;if(b)if(r.preventDefault(),null!=this._eventButton&&function(M,R){const N=wd[R];return void 0===M.buttons||(M.buttons&N)!==N}(r,this._eventButton))this.reset();else if(this._moved||!(d.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(b,d)}mouseupWindow(r){this._lastPoint&&An(r)===this._eventButton&&(this._moved&&on(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Z0 extends Ph{mousedown(r,d){super.mousedown(r,d),this._lastPoint&&(this._active=!0)}_correctButton(r,d){return 0===d&&!r.ctrlKey}_move(r,d){return{around:d,panDelta:d.sub(r)}}}class Ja extends Ph{_correctButton(r,d){return 0===d&&r.ctrlKey||2===d}_move(r,d){const b=.8*(d.x-r.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(r){r.preventDefault()}}class th extends Ph{_correctButton(r,d){return 0===d&&r.ctrlKey||2===d}_move(r,d){const b=-.5*(d.y-r.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(r){r.preventDefault()}}class nh{constructor(r,d){this._map=r,this._el=r.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),l.bp(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}touchstart(r,d,b){return this._calculateTransform(r,d,b)}touchmove(r,d,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===b.length&&!l.d1())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return r.cancelable&&r.preventDefault(),this._calculateTransform(r,d,b)}}touchend(r,d,b){this._calculateTransform(r,d,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,d,b){b.length>0&&(this._active=!0);const M=K0(b,d),R=new l.P(0,0),N=new l.P(0,0);let H=0;for(const re in M){const he=M[re],ye=this._touches[re];ye&&(R._add(he),N._add(he.sub(ye)),H++,M[re]=he)}if(this._touches=M,H<this._minTouches||!N.mag())return;const J=N.div(H);return this._sum._add(J),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(H),panDelta:J}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ut("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class fh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(r){}_move(r,d,b){return{}}touchstart(r,d,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([d[0],d[1]]))}touchmove(r,d,b){const M=this._firstTwoTouches;if(!M)return;r.preventDefault();const[R,N]=M,H=J1(b,d,R),J=J1(b,d,N);if(!H||!J)return;const re=this._aroundCenter?null:H.add(J).div(2);return this._move([H,J],re,r)}touchend(r,d,b){if(!this._firstTwoTouches)return;const[M,R]=this._firstTwoTouches,N=J1(b,d,M),H=J1(b,d,R);N&&H||(this._active&&on(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function J1(v,r,d){for(let b=0;b<v.length;b++)if(v[b].identifier===d)return r[b]}function Q0(v,r){return Math.log(v/r)/Math.LN2}class Cp extends fh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,d){const b=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Q0(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Q0(this._distance,b),pinchAround:d}}}function Xh(v,r){return 180*v.angleWith(r)/Math.PI}class D0 extends fh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,d){const b=this._vector;if(this._vector=r[0].sub(r[1]),b&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Xh(this._vector,b),pinchAround:d}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const d=25/(Math.PI*this._minDiameter)*360,b=this._startVector;if(!b)return!1;const M=Xh(r,b);return Math.abs(M)<d}}function mh(v){return Math.abs(v.y)>Math.abs(v.x)}class P0 extends fh{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(r){this._lastPoints=r,mh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,d,b){const M=this._lastPoints;if(!M)return;const R=r[0].sub(M[0]),N=r[1].sub(M[1]);return this._map._cooperativeGestures&&!l.d1()&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(R,N,b.timeStamp),!this._valid)?void 0:(this._lastPoints=r,this._active=!0,{pitchDelta:(R.y+N.y)/2*-.5})}gestureBeginsVertically(r,d,b){if(void 0!==this._valid)return this._valid;const M=r.mag()>=2,R=d.mag()>=2;if(!M&&!R)return;if(!M||!R)return null==this._firstMove&&(this._firstMove=b),b-this._firstMove<100&&void 0;const N=r.y>0==d.y>0;return mh(r)&&mh(d)&&N}}const ep={panStep:100,bearingStep:15,pitchStep:10};class el{constructor(){const r=ep;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let d=0,b=0,M=0,R=0,N=0;switch(r.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:r.shiftKey?b=-1:(r.preventDefault(),R=-1);break;case 39:r.shiftKey?b=1:(r.preventDefault(),R=1);break;case 38:r.shiftKey?M=1:(r.preventDefault(),N=-1);break;case 40:r.shiftKey?M=-1:(r.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(b=0,M=0),{cameraAnimation:H=>{const J=H.getZoom();H.easeTo({duration:300,easeId:"keyboardHandler",easing:sr,zoom:d?Math.round(J)+d*(r.shiftKey?2:1):J,bearing:H.getBearing()+b*this._bearingStep,pitch:H.getPitch()+M*this._pitchStep,offset:[-R*this._panStep,-N*this._panStep],center:H.getCenter()},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function sr(v){return v*(2-v)}const ps=4.000244140625,_l=1/450;class xd{constructor(r,d){this._map=r,this._el=r.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=_l,l.bp(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(r.ctrlKey||r.metaKey||this.isZooming()||l.d1()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const b=l.e.now(),M=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,0!==d&&d%ps==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(M*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),r.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=r,this._delta-=d,this._active||this._start(r)),r.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ht(this._el,r);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._map.transform;"wheel"===this._type&&r.projection.wrap&&(r._center.lng>=180||r._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>r._terrainEnabled()&&this._aroundCoord?r.computeZoomRelativeTo(this._aroundCoord):r.zoom;if(0!==this._delta){const re="wheel"===this._type&&Math.abs(this._delta)>ps?this._wheelZoomRate:this._defaultZoomRate;let he=2/(1+Math.exp(-Math.abs(this._delta*re)));this._delta<0&&0!==he&&(he=1/he);const ye=d(),Pe=Math.pow(2,ye),Fe="number"==typeof this._targetZoom?r.zoomScale(this._targetZoom):Pe;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(Fe*he))),"wheel"===this._type&&(this._startZoom=ye,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const b="number"==typeof this._targetZoom?this._targetZoom:d(),M=this._startZoom,R=this._easing;let N,H=!1;if("wheel"===this._type&&M&&R){const re=Math.min((l.e.now()-this._lastWheelEventTime)/200,1),he=R(re);N=l.a2(M,b,he),re<1?this._frameId||(this._frameId=!0):H=!0}else N=b,H=!0;this._active=!0,H&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let J=N-d();return J*this._lastDelta<0&&(J=0),{noInertia:!0,needsRenderFrame:!H,zoomDelta:J,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let d=l.d2;if(this._prevEase){const b=this._prevEase,M=(l.e.now()-b.start)/b.duration,R=b.easing(M+.01)-b.easing(M),N=.27/Math.sqrt(R*R+1e-4)*.01,H=Math.sqrt(.0729-N*N);d=l.d0(N,H,.25,1)}return this._prevEase={start:l.e.now(),duration:r,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ut("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Wa{constructor(r,d){this._clickZoom=r,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class pl{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(r,d){return r.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(r.shiftKey?-1:1),around:b.unproject(d)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gh{constructor(){this._tap=new Qc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(r,d,b){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=d[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(r,d,b))}touchmove(r,d,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const M=d[0],R=M.y-this._swipePoint.y;return this._swipePoint=M,r.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(r,d,b)}touchend(r,d,b){this._tapTime?this._swipePoint&&0===b.length&&this.reset():this._tap.touchend(r,d,b)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ua{constructor(r,d,b){this._el=r,this._mousePan=d,this._touchPan=b}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fl{constructor(r,d,b){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=d,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Od{constructor(r,d,b,M){this._el=r,this._touchZoom=d,this._touchRotate=b,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const $s=v=>v.zoom||v.drag||v.pitch||v.rotate;class Kh extends l.f{}class Yh{constructor(){this.constants=[1,1,.01],this.radius=0}setup(r,d){const b=l._.sub([],d,r);this.radius=l._.length(b[2]<0?l._.div([],b,this.constants):[b[0],b[1],0])}projectRay(r){l._.div(r,r,this.constants),l._.normalize(r,r),l._.mul(r,r,this.constants);const d=l._.scale([],r,this.radius);if(d[2]>0){const b=l._.scale([],[0,0,1],l._.dot(d,[0,0,1])),M=l._.scale([],l._.normalize([],[d[0],d[1],0]),this.radius),R=l._.add([],d,l._.scale([],l._.sub([],l._.add([],M,b),d),2));d[0]=R[0],d[1]=R[1]}return d}}function pu(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class dc{constructor(r,d){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gh(r),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Yh,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),l.bp(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,R,N]of this._listeners){const H=M===document?this.handleWindowEvent:this.handleEvent;M.addEventListener(R,H,N)}}destroy(){for(const[r,d,b]of this._listeners){const M=r===document?this.handleWindowEvent:this.handleEvent;r.removeEventListener(d,M,b)}}_addDefaultHandlers(r){const d=this._map,b=d.getCanvasContainer();this._add("mapEvent",new Dh(d,r));const M=d.boxZoom=new ph(d,r);this._add("boxZoom",M);const R=new g1,N=new pl;d.doubleClickZoom=new Wa(N,R),this._add("tapZoom",R),this._add("clickZoom",N);const H=new gh;this._add("tapDragZoom",H);const J=d.touchPitch=new P0(d);this._add("touchPitch",J);const re=new Ja(r),he=new th(r);d.dragRotate=new Fl(r,re,he),this._add("mouseRotate",re,["mousePitch"]),this._add("mousePitch",he,["mouseRotate"]);const ye=new Z0(r),Pe=new nh(d,r);d.dragPan=new Ua(b,ye,Pe),this._add("mousePan",ye),this._add("touchPan",Pe,["touchZoom","touchRotate"]);const Fe=new D0,Qe=new Cp;d.touchZoomRotate=new Od(b,Qe,Fe,H),this._add("touchRotate",Fe,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new z1(d));const Je=d.scrollZoom=new xd(d,this);this._add("scrollZoom",Je,["mousePan"]);const ot=d.keyboard=new el;this._add("keyboard",ot);for(const st of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])r.interactive&&r[st]&&d[st].enable(r[st])}_add(r,d,b){this._handlers.push({handlerName:r,handler:d,allowed:b}),this._handlersById[r]=d}stop(r){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!$s(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(r,d,b){for(const M in r)if(M!==b&&(!d||d.indexOf(M)<0))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){const d=[];for(const b of r)this._el.contains(b.target)&&d.push(b);return d}handleEvent(r,d){this._updatingCamera=!0;const b="renderFrame"===r.type,M=b?void 0:r,R={needsRenderFrame:!1},N={},H={},J=r.touches?this._getMapTouches(r.touches):void 0,re=J?Jn(this._el,J):b?void 0:ht(this._el,r);for(const{handlerName:Pe,handler:Fe,allowed:Qe}of this._handlers){if(!Fe.isEnabled())continue;let Je;this._blockedByActive(H,Qe,Pe)?Fe.reset():Fe[d||r.type]&&(Je=Fe[d||r.type](r,re,J),this.mergeHandlerResult(R,N,Je,Pe,M),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()),(Je||Fe.isActive())&&(H[Pe]=Fe)}const he={};for(const Pe in this._previousActiveHandlers)H[Pe]||(he[Pe]=M);this._previousActiveHandlers=H,(Object.keys(he).length||pu(R))&&(this._changes.push([R,N,he]),this._triggerRenderFrame()),(Object.keys(H).length||pu(R))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=R;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))}mergeHandlerResult(r,d,b,M,R){if(!b)return;l.W(r,b);const N={handlerName:M,originalEvent:b.originalEvent||R};void 0!==b.zoomDelta&&(d.zoom=N),void 0!==b.panDelta&&(d.drag=N),void 0!==b.pitchDelta&&(d.pitch=N),void 0!==b.bearingDelta&&(d.rotate=N)}_applyChanges(){const r={},d={},b={};for(const[M,R,N]of this._changes)M.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(M.panDelta)),M.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+M.pitchDelta),void 0!==M.around&&(r.around=M.around),void 0!==M.aroundCoord&&(r.aroundCoord=M.aroundCoord),void 0!==M.pinchAround&&(r.pinchAround=M.pinchAround),M.noInertia&&(r.noInertia=M.noInertia),l.W(d,R),l.W(b,N);this._updateMapTransform(r,d,b),this._changes=[]}_updateMapTransform(r,d,b){const M=this._map,R=M.transform,N=Pt=>[Pt.x,Pt.y,Pt.z];if((Pt=>{const Ft=this._eventsInProgress.drag;return Ft&&!this._handlersById[Ft.handlerName].isActive()})()&&!pu(r)){const Pt=R.zoom;R.cameraElevationReference="sea",null!=this._originalZoom&&R._orthographicProjectionAtLowPitch&&"globe"!==R.projection.name&&0===R.pitch?(R.cameraElevationReference="ground",R.zoom=this._originalZoom):(R.recenterOnTerrain(),R.cameraElevationReference="ground"),Pt!==R.zoom&&this._map._update(!0)}if(R._isCameraConstrained&&M._stop(!0),!pu(r))return void this._fireEvents(d,b,!0);let{panDelta:H,zoomDelta:J,bearingDelta:re,pitchDelta:he,around:ye,aroundCoord:Pe,pinchAround:Fe}=r;R._isCameraConstrained&&(J>0&&(J=0),R._isCameraConstrained=!1),void 0!==Fe&&(ye=Fe),(J||(Pt=>d.drag&&!this._eventsInProgress.drag)())&&ye&&(this._dragOrigin=N(R.pointCoordinate3D(ye)),this._originalZoom=R.zoom,this._trackingEllipsoid.setup(R._camera.position,this._dragOrigin)),R.cameraElevationReference="sea",M._stop(!0),ye=ye||M.transform.centerPoint,re&&(R.bearing+=re),he&&(R.pitch+=he),R._updateCameraState();const Qe=[0,0,0];if(H)if("mercator"===R.projection.name){const Pt=this._trackingEllipsoid.projectRay(R.screenPointToMercatorRay(ye).dir),Ft=this._trackingEllipsoid.projectRay(R.screenPointToMercatorRay(ye.sub(H)).dir);Qe[0]=Ft[0]-Pt[0],Qe[1]=Ft[1]-Pt[1]}else{const Pt=R.pointCoordinate(ye);if("globe"===R.projection.name){H=H.rotate(-R.angle);const Ft=R._pixelsPerMercatorPixel/R.worldSize;Qe[0]=-H.x*l.d3(l.ay(Pt.y))*Ft,Qe[1]=-H.y*l.d3(R.center.lat)*Ft}else{const Ft=R.pointCoordinate(ye.sub(H));Pt&&Ft&&(Qe[0]=Ft.x-Pt.x,Qe[1]=Ft.y-Pt.y)}}const Je=R.zoom,ot=[0,0,0];if(J){const Pt=N(Pe||R.pointCoordinate3D(ye)),Ft={dir:l._.normalize([],l._.sub([],Pt,R._camera.position))};if(Ft.dir[2]<0){const Vt=R.zoomDeltaToMovement(Pt,J);l._.scale(ot,Ft.dir,Vt)}}const st=l._.add(Qe,Qe,ot);R._translateCameraConstrained(st),J&&Math.abs(R.zoom-Je)>1e-4&&R.recenterOnTerrain(),R.cameraElevationReference="ground",this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(d,b,!0)}_fireEvents(r,d,b){const M=$s(this._eventsInProgress),R=$s(r),N={};for(const he in r){const{originalEvent:ye}=r[he];this._eventsInProgress[he]||(N[`${he}start`]=ye),this._eventsInProgress[he]=r[he]}!M&&R&&this._fireEvent("movestart",R.originalEvent);for(const he in N)this._fireEvent(he,N[he]);R&&this._fireEvent("move",R.originalEvent);for(const he in r){const{originalEvent:ye}=r[he];this._fireEvent(he,ye)}const H={};let J;for(const he in this._eventsInProgress){const{handlerName:ye,originalEvent:Pe}=this._eventsInProgress[he];this._handlersById[ye].isActive()||(delete this._eventsInProgress[he],J=d[ye]||Pe,H[`${he}end`]=J)}for(const he in H)this._fireEvent(he,H[he]);const re=$s(this._eventsInProgress);if(b&&(M||R)&&!re){this._updatingCamera=!0;const he=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=Pe=>0!==Pe&&-this._bearingSnap<Pe&&Pe<this._bearingSnap;he?(ye(he.bearing||this._map.getBearing())&&(he.bearing=0),this._map.easeTo(he,{originalEvent:J})):(this._map.fire(new l.f("moveend",{originalEvent:J})),ye(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,d){this._map.fire(new l.f(r,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{this._frameId=void 0,this.handleEvent(new Kh("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ld="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Vl extends l.E{constructor(r,d){super(),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=!1!==d.respectPrefersReducedMotion,l.bp(["_renderFrameCallback"],this)}getCenter(){return new l.aI(this.transform.center.lng,this.transform.center.lat)}setCenter(r,d){return this.jumpTo({center:r},d)}panBy(r,d,b){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.W({offset:r},d),b)}panTo(r,d,b){return this.easeTo(l.W({center:r},d),b)}getZoom(){return this.transform.zoom}setZoom(r,d){return this.jumpTo({zoom:r},d),this}zoomTo(r,d,b){return this.easeTo(l.W({zoom:r},d),b)}zoomIn(r,d){return this.zoomTo(this.getZoom()+1,r,d),this}zoomOut(r,d){return this.zoomTo(this.getZoom()-1,r,d),this}getBearing(){return this.transform.bearing}setBearing(r,d){return this.jumpTo({bearing:r},d),this}getPadding(){return this.transform.padding}setPadding(r,d){return this.jumpTo({padding:r},d),this}rotateTo(r,d,b){return this.easeTo(l.W({bearing:r},d),b)}resetNorth(r,d){return this.rotateTo(0,l.W({duration:1e3},r),d),this}resetNorthPitch(r,d){return this.easeTo(l.W({bearing:0,pitch:0,duration:1e3},r),d),this}snapToNorth(r,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,d):this}getPitch(){return this.transform.pitch}setPitch(r,d){return this.jumpTo({pitch:r},d),this}cameraForBounds(r,d){r=l.ai.convert(r);const b=d&&d.bearing||0,M=d&&d.pitch||0,R=r.getNorthWest(),N=r.getSouthEast();return this._cameraForBounds(this.transform,R,N,b,M,d)}_extendPadding(r){const d={top:0,right:0,bottom:0,left:0};return null==r?l.W({},d,this.transform.padding):"number"==typeof r?{top:r,bottom:r,right:r,left:r}:l.W({},d,r)}_extendCameraOptions(r){return(r=l.W({offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding=this._extendPadding(r.padding),r}_minimumAABBFrustumDistance(r,d){const b=d.max[0]-d.min[0],M=d.max[1]-d.min[1];return b/M>r.aspect?b/(2*Math.tan(.5*r.fovX)*r.aspect):M/(2*Math.tan(.5*r.fovY)*r.aspect)}_cameraForBoundsOnGlobe(r,d,b,M,R,N){const H=r.clone(),J=this._extendCameraOptions(N);H.bearing=M,H.pitch=R;const re=l.aI.convert(d),he=l.aI.convert(b),ye=.5*(re.lat+he.lat),Pe=.5*(re.lng+he.lng),Fe=l.d4(ye,Pe),Qe=l._.normalize([],Fe),Je=l._.normalize([],l._.cross([],Qe,[0,1,0])),ot=l._.cross([],Je,Qe),st=[Je[0],Je[1],Je[2],0,ot[0],ot[1],ot[2],0,Qe[0],Qe[1],Qe[2],0,0,0,0,1],Pt=[Fe,l.d4(re.lat,re.lng),l.d4(he.lat,re.lng),l.d4(he.lat,he.lng),l.d4(re.lat,he.lng),l.d4(ye,re.lng),l.d4(ye,he.lng),l.d4(re.lat,Pe),l.d4(he.lat,Pe)];let Ft=l.b6.fromPoints(Pt.map(ie=>[l._.dot(Je,ie),l._.dot(ot,ie),l._.dot(Qe,ie)]));const Vt=l._.transformMat4([],Ft.center,st);0===l._.squaredLength(Vt)&&l._.set(Vt,0,0,1),l._.normalize(Vt,Vt),l._.scale(Vt,Vt,l.cD),H.center=l.d5(Vt);const en=H.getWorldToCameraMatrix(),tn=l.ad.invert(new Float64Array(16),en);Ft=l.b6.applyTransform(Ft,l.ad.multiply([],en,st));const yn=this._extendAABB(Ft,H,J,M);if(!yn)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ft=yn,l._.transformMat4(Vt,Vt,en);const lt=.5*(Ft.max[2]-Ft.min[2]),$t=this._minimumAABBFrustumDistance(H,Ft),Sn=l._.scale([],[0,0,1],lt),ci=l._.add(Sn,Vt,Sn),Dn=$t+(0===H.pitch?0:l._.distance(Vt,ci)),gn=H.globeCenterInViewSpace,bi=l._.sub([],Vt,[gn[0],gn[1],gn[2]]);l._.normalize(bi,bi),l._.scale(bi,bi,Dn);const io=l._.add([],Vt,bi);l._.transformMat4(io,io,tn);const ro=l.d7/l.cD,te=l._.length(io),L=l.ax(Math.max(te*ro-l.d7,Number.EPSILON),0),j=Math.min(H.zoomFromMercatorZAdjusted(L),J.maxZoom);return j>.5*(l.b1+l.aU)?(H.setProjection({name:"mercator"}),H.zoom=j,this._cameraForBounds(H,d,b,M,R,N)):{center:H.center,zoom:j,bearing:M,pitch:R}}_extendAABB(r,d,b,M){const R=.5*((b.padding.left||0)+(b.padding.right||0)),N=.5*((b.padding.top||0)+(b.padding.bottom||0)),H=N,J=R,re=R,he=N,ye=d.width-(J+re),Pe=d.height-(H+he),Fe=l._.sub([],r.max,r.min),Qe=Math.min(ye/Fe[0],Pe/Fe[1]),Je=Math.min(d.scaleZoom(d.scale*Qe),b.maxZoom);if(isNaN(Je))return null;const ot=d.scale/d.zoomScale(Je),st=new l.b6([r.min[0]-J*ot,r.min[1]-he*ot,r.min[2]],[r.max[0]+re*ot,r.max[1]+H*ot,r.max[2]]),Pt=("number"==typeof b.offset.x&&"number"==typeof b.offset.y?new l.P(b.offset.x,b.offset.y):l.P.convert(b.offset)).rotate(-l.ab(M));return st.center[0]-=Pt.x*ot,st.center[1]+=Pt.y*ot,st}queryTerrainElevation(r,d){const b=this.transform.elevation;return b?(d=l.W({},{exaggerated:!0},d),b.getAtPoint(l.Y.fromLngLat(r),null,d.exaggerated)):null}_cameraForBounds(r,d,b,M,R,N){if("globe"===r.projection.name)return this._cameraForBoundsOnGlobe(r,d,b,M,R,N);const H=r.clone(),J=this._extendCameraOptions(N);H.bearing=M,H.pitch=R;const re=l.aI.convert(d),he=l.aI.convert(b),ye=new l.aI(re.lng,he.lat),Pe=new l.aI(he.lng,re.lat),Fe=H.project(re),Qe=H.project(he),Je=this.queryTerrainElevation(re),ot=this.queryTerrainElevation(he),st=this.queryTerrainElevation(ye),Pt=this.queryTerrainElevation(Pe),Ft=[[Fe.x,Fe.y,Math.min(Je||0,ot||0,st||0,Pt||0)],[Qe.x,Qe.y,Math.max(Je||0,ot||0,st||0,Pt||0)]];let Vt=l.b6.fromPoints(Ft);const en=H.getWorldToCameraMatrix(),tn=l.ad.invert(new Float64Array(16),en);Vt=l.b6.applyTransform(Vt,en);const yn=this._extendAABB(Vt,H,J,M);if(!yn)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Vt=yn;const lt=.5*l._.sub([],Vt.max,Vt.min)[2],$t=this._minimumAABBFrustumDistance(H,Vt),Sn=[0,0,1,0];l.aA.transformMat4(Sn,Sn,en),l.aA.normalize(Sn,Sn);const ci=l._.scale([],Sn,$t+lt),Dn=l._.add([],Vt.center,ci);l._.transformMat4(Vt.center,Vt.center,tn),l._.transformMat4(Dn,Dn,tn);const gn=[Vt.center[0],Vt.center[1],Dn[2]*H.pixelsPerMeter];l._.scale(gn,gn,1/H.worldSize);const bi=l.d6(gn[0]),io=l.ay(gn[1]),ro=Math.min(H._zoomFromMercatorZ(gn[2]),J.maxZoom),te=new l.aI(bi,io);return H.mercatorFromTransition&&ro<.5*(l.b1+l.aU)?(H.setProjection({name:"globe"}),H.zoom=ro,this._cameraForBounds(H,d,b,M,R,N)):{center:te,zoom:ro,bearing:M,pitch:R}}fitBounds(r,d,b){const M=this.cameraForBounds(r,d);return this._fitInternal(M,d,b)}fitScreenCoordinates(r,d,b,M,R){const N=l.P.convert(r),H=l.P.convert(d),J=new l.P(Math.min(N.x,H.x),Math.min(N.y,H.y)),re=new l.P(Math.max(N.x,H.x),Math.max(N.y,H.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(N,H))return this;const he=this.transform.pointLocation3D(J),ye=this.transform.pointLocation3D(re),Pe=this.transform.pointLocation3D(new l.P(J.x,re.y)),Fe=this.transform.pointLocation3D(new l.P(re.x,J.y)),Qe=[Math.min(he.lng,ye.lng,Pe.lng,Fe.lng),Math.min(he.lat,ye.lat,Pe.lat,Fe.lat)],Je=[Math.max(he.lng,ye.lng,Pe.lng,Fe.lng),Math.max(he.lat,ye.lat,Pe.lat,Fe.lat)],ot=M&&M.pitch?M.pitch:this.getPitch(),st=this._cameraForBounds(this.transform,Qe,Je,b,ot,M);return this._fitInternal(st,M,R)}_fitInternal(r,d,b){return r?(d=l.W(r,d)).linear?this.easeTo(d,b):this.flyTo(d,b):this}jumpTo(r,d){this.stop();const b=r.preloadOnly?this.transform.clone():this.transform;let M=!1,R=!1,N=!1;if("zoom"in r&&b.zoom!==+r.zoom&&(M=!0,b.zoom=+r.zoom),void 0!==r.center&&(b.center=l.aI.convert(r.center)),"bearing"in r&&b.bearing!==+r.bearing&&(R=!0,b.bearing=+r.bearing),"pitch"in r&&b.pitch!==+r.pitch&&(N=!0,b.pitch=+r.pitch),null!=r.padding){const H="number"==typeof r.padding?this._extendPadding(r.padding):r.padding;b.isPaddingEqual(H)||(b.padding=H)}return r.preloadOnly?(this._preloadTiles(b),this):(this.fire(new l.f("movestart",d)).fire(new l.f("move",d)),M&&this.fire(new l.f("zoomstart",d)).fire(new l.f("zoom",d)).fire(new l.f("zoomend",d)),R&&this.fire(new l.f("rotatestart",d)).fire(new l.f("rotate",d)).fire(new l.f("rotateend",d)),N&&this.fire(new l.f("pitchstart",d)).fire(new l.f("pitch",d)).fire(new l.f("pitchend",d)),this.fire(new l.f("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||l.w(Ld),this.transform.getFreeCameraOptions()}setFreeCameraOptions(r,d){const b=this.transform;if(!b.projection.supportsFreeCamera)return l.w(Ld),this;this.stop();const M=b.zoom,R=b.pitch,N=b.bearing;b.setFreeCameraOptions(r);const H=M!==b.zoom,J=R!==b.pitch,re=N!==b.bearing;return this.fire(new l.f("movestart",d)).fire(new l.f("move",d)),H&&this.fire(new l.f("zoomstart",d)).fire(new l.f("zoom",d)).fire(new l.f("zoomend",d)),re&&this.fire(new l.f("rotatestart",d)).fire(new l.f("rotate",d)).fire(new l.f("rotateend",d)),J&&this.fire(new l.f("pitchstart",d)).fire(new l.f("pitch",d)).fire(new l.f("pitchend",d)),this.fire(new l.f("moveend",d)),this}easeTo(r,d){this._stop(!1,r.easeId),(!1===(r=l.W({offset:[0,0],duration:500,easing:l.d2},r)).animate||this._prefersReducedMotion(r))&&(r.duration=0);const b=this.transform,M=this.getZoom(),R=this.getBearing(),N=this.getPitch(),H=this.getPadding(),J="zoom"in r?+r.zoom:M,re="bearing"in r?this._normalizeBearing(r.bearing,R):R,he="pitch"in r?+r.pitch:N,ye=this._extendPadding(r.padding),Pe=l.P.convert(r.offset);let Fe,Qe,Je;if("globe"===b.projection.name){const $t=l.Y.fromLngLat(b.center),Sn=Pe.rotate(-b.angle);$t.x+=Sn.x/b.worldSize,$t.y+=Sn.y/b.worldSize;const ci=$t.toLngLat(),Dn=l.aI.convert(r.center||ci);this._normalizeCenter(Dn),Fe=b.centerPoint.add(Sn),Qe=new l.P($t.x,$t.y).mult(b.worldSize),Je=new l.P(l.aj(Dn.lng),l.ak(Dn.lat)).mult(b.worldSize).sub(Qe)}else{Fe=b.centerPoint.add(Pe);const $t=b.pointLocation(Fe),Sn=l.aI.convert(r.center||$t);this._normalizeCenter(Sn),Qe=b.project($t),Je=b.project(Sn).sub(Qe)}const ot=b.zoomScale(J-M);let st,Pt;r.around&&(st=l.aI.convert(r.around),Pt=b.locationPoint(st));const Ft=this._zooming||J!==M,Vt=this._rotating||R!==re,en=this._pitching||he!==N,tn=!b.isPaddingEqual(ye),yn=$t=>Sn=>{if(Ft&&($t.zoom=l.a2(M,J,Sn)),Vt&&($t.bearing=l.a2(R,re,Sn)),en&&($t.pitch=l.a2(N,he,Sn)),tn&&($t.interpolatePadding(H,ye,Sn),Fe=$t.centerPoint.add(Pe)),st)$t.setLocationAtPoint(st,Pt);else{const ci=$t.zoomScale($t.zoom-M),Dn=J>M?Math.min(2,ot):Math.max(.5,ot),gn=Math.pow(Dn,1-Sn),bi=$t.unproject(Qe.add(Je.mult(Sn*gn)).mult(ci));$t.setLocationAtPoint($t.renderWorldCopies?bi.wrap():bi,Fe)}return r.preloadOnly||this._fireMoveEvents(d),$t};if(r.preloadOnly){const $t=this._emulate(yn,r.duration,b);return this._preloadTiles($t),this}const lt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ft,this._rotating=Vt,this._pitching=en,this._padding=tn,this._easeId=r.easeId,this._prepareEase(d,r.noMoveStart,lt),this._ease(yn(b),$t=>{"sea"===b.cameraElevationReference&&b.recenterOnTerrain(),this._afterEase(d,$t)},r),this}_prepareEase(r,d,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&0===this.transform.pitch&&"globe"!==this.transform.projection.name&&(this.transform.cameraElevationReference="ground"),d||b.moving||this.fire(new l.f("movestart",r)),this._zooming&&!b.zooming&&this.fire(new l.f("zoomstart",r)),this._rotating&&!b.rotating&&this.fire(new l.f("rotatestart",r)),this._pitching&&!b.pitching&&this.fire(new l.f("pitchstart",r))}_fireMoveEvents(r){this.fire(new l.f("move",r)),this._zooming&&this.fire(new l.f("zoom",r)),this._rotating&&this.fire(new l.f("rotate",r)),this._pitching&&this.fire(new l.f("pitch",r))}_afterEase(r,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,M=this._rotating,R=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new l.f("zoomend",r)),M&&this.fire(new l.f("rotateend",r)),R&&this.fire(new l.f("pitchend",r)),this.fire(new l.f("moveend",r))}flyTo(r,d){if(this._prefersReducedMotion(r)){const j=l.ah(r,["center","zoom","bearing","pitch","around","padding"]);return this.jumpTo(j,d)}this.stop(),r=l.W({offset:[0,0],speed:1.2,curve:1.42,easing:l.d2},r);const b=this.transform,M=this.getZoom(),R=this.getBearing(),N=this.getPitch(),H=this.getPadding(),J="zoom"in r?l.at(+r.zoom,b.minZoom,b.maxZoom):M,re="bearing"in r?this._normalizeBearing(r.bearing,R):R,he="pitch"in r?+r.pitch:N,ye=this._extendPadding(r.padding),Pe=b.zoomScale(J-M),Fe=l.P.convert(r.offset);let Qe=b.centerPoint.add(Fe);const Je=b.pointLocation(Qe),ot=l.aI.convert(r.center||Je);this._normalizeCenter(ot);const st=b.project(Je),Pt=b.project(ot).sub(st);let Ft=r.curve;const Vt=Math.max(b.width,b.height),en=Vt/Pe,tn=Pt.mag();if("minZoom"in r){const j=l.at(Math.min(r.minZoom,M,J),b.minZoom,b.maxZoom),ie=Vt/b.zoomScale(j-M);Ft=Math.sqrt(ie/tn*2)}const yn=Ft*Ft;function lt(j){const ie=(en*en-Vt*Vt+(j?-1:1)*yn*yn*tn*tn)/(2*(j?en:Vt)*yn*tn);return Math.log(Math.sqrt(ie*ie+1)-ie)}function $t(j){return(Math.exp(j)-Math.exp(-j))/2}function Sn(j){return(Math.exp(j)+Math.exp(-j))/2}const ci=lt(0);let Dn=function(j){return Sn(ci)/Sn(ci+Ft*j)},gn=function(j){return Vt*((Sn(ci)*($t(ie=ci+Ft*j)/Sn(ie))-$t(ci))/yn)/tn;var ie},bi=(lt(1)-ci)/Ft;if(Math.abs(tn)<1e-6||!isFinite(bi)){if(Math.abs(Vt-en)<1e-6)return this.easeTo(r,d);const j=en<Vt?-1:1;bi=Math.abs(Math.log(en/Vt))/Ft,gn=function(){return 0},Dn=function(ie){return Math.exp(j*Ft*ie)}}r.duration="duration"in r?+r.duration:1e3*bi/("screenSpeed"in r?+r.screenSpeed/Ft:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0);const io=R!==re,ro=he!==N,te=!b.isPaddingEqual(ye),L=j=>ie=>{const Ne=ie*bi,at=1/Dn(Ne);j.zoom=1===ie?J:M+j.scaleZoom(at),io&&(j.bearing=l.a2(R,re,ie)),ro&&(j.pitch=l.a2(N,he,ie)),te&&(j.interpolatePadding(H,ye,ie),Qe=j.centerPoint.add(Fe));const ln=1===ie?ot:j.unproject(st.add(Pt.mult(gn(Ne))).mult(at));return j.setLocationAtPoint(j.renderWorldCopies?ln.wrap():ln,Qe),j._updateCameraOnTerrain(),r.preloadOnly||this._fireMoveEvents(d),j};if(r.preloadOnly){const j=this._emulate(L,r.duration,b);return this._preloadTiles(j),this}return this._zooming=!0,this._rotating=io,this._pitching=ro,this._padding=te,this._prepareEase(d,!1),this._ease(L(b),()=>this._afterEase(d),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(r){}_cancelRenderFrame(r){}_stop(r,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,d)}if(!r){const b=this.handlers;b&&b.stop(!1)}return this}_ease(r,d,b){!1===b.animate||0===b.duration?(r(1),d()):(this._easeStart=l.e.now(),this._easeOptions=b,this._onEaseFrame=r,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const r=Math.min((l.e.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(r,d){r=l.au(r,-180,180);const b=Math.abs(r-d);return Math.abs(r-360-d)<b&&(r-=360),Math.abs(r+360-d)<b&&(r+=360),r}_normalizeCenter(r){const d=this.transform;if(d.maxBounds||"globe"!==d.projection.name&&!d.renderWorldCopies)return;const b=r.lng-d.center.lng;r.lng+=b>180?-360:b<-180?360:0}_prefersReducedMotion(r){return this._respectPrefersReducedMotion&&l.e.prefersReducedMotion&&!(r&&r.essential)}_emulate(r,d,b){const M=Math.ceil(15*d/1e3),R=[],N=r(b.clone());for(let H=0;H<=M;H++){const J=N(H/M);R.push(J.clone())}return R}_preloadTiles(r,d){}}class ih{constructor(r={}){this.options=r,l.bp(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){const d=this.options&&this.options.compact;return this._map=r,this._container=Ut("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ut("button","mapboxgl-ctrl-attrib-button",this._container),Ut("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ut("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===d&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(r,d){const b=this._map._getUIString(`AttributionControl.${d}`);r.removeAttribute("title"),r.firstElementChild&&r.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let r=this._editLink;r||(r=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.d8.ACCESS_TOKEN}];if(r){const b=d.reduce((M,R,N)=>(R.value&&(M+=`${R.key}=${R.value}${N<d.length-1?"&":""}`),M),"?");r.href=`${l.d8.FEEDBACK_URL}/${b}#${X0(this._map,!0)}`,r.rel="noopener nofollow",this._setElementTitle(r,"MapFeedback")}}_updateData(r){!r||"metadata"!==r.sourceDataType&&"visibility"!==r.sourceDataType&&"style"!==r.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let r=[];if(this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const d=this._map.style._mergedSourceCaches;for(const M in d){const R=d[M];if(R.used){const N=R.getSource();N.attribution&&r.indexOf(N.attribution)<0&&r.push(N.attribution)}}r.sort((M,R)=>M.length-R.length),r=r.filter((M,R)=>{for(let N=R+1;N<r.length;N++)if(r[N].indexOf(M)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=[...this.options.customAttribution,...r]:r.unshift(this.options.customAttribution));const b=r.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,r.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class J0{constructor(){l.bp(["_updateLogo","_updateCompact"],this)}onAdd(r){this._map=r,this._container=Ut("div","mapboxgl-ctrl");const d=Ut("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(r){r&&"metadata"!==r.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const r=this._map.style._sourceCaches;if(0===Object.entries(r).length)return!0;for(const d in r){const b=r[d].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const r=this._container.children;if(r.length){const d=r[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class v1{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const d=++this._id;return this._queue.push({callback:r,id:d,cancelled:!1}),d}remove(r){const d=this._currentlyRunning,b=d?this._queue.concat(d):this._queue;for(const M of b)if(M.id===r)return void(M.cancelled=!0)}run(r=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const b of d)if(!b.cancelled&&(b.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Zh(v,r,d){if(v=new l.aI(v.lng,v.lat),r){const b=new l.aI(v.lng-360,v.lat),M=new l.aI(v.lng+360,v.lat),R=360*Math.ceil(Math.abs(v.lng-d.center.lng)/360),N=d.locationPoint(v).distSqr(r),H=r.x<0||r.y<0||r.x>d.width||r.y>d.height;d.locationPoint(b).distSqr(r)<N&&(H||Math.abs(b.lng-d.center.lng)<R)?v=b:d.locationPoint(M).distSqr(r)<N&&(H||Math.abs(M.lng-d.center.lng)<R)&&(v=M)}for(;Math.abs(v.lng-d.center.lng)>180;){const b=d.locationPoint(v);if(b.x>=0&&b.y>=0&&b.x<=d.width&&b.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v}const Bd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Vc extends l.E{constructor(r,d){if(super(),(r instanceof HTMLElement||d)&&(r=l.W({element:r},d)),l.bp(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=r&&r.occludedOpacity||.2,r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ut("div");const R=41,N=27,H=It("svg",{display:"block",height:R*this._scale+"px",width:N*this._scale+"px",viewBox:`0 0 ${N} ${R}`},this._element),J=It("radialGradient",{id:"shadowGradient"},It("defs",{},H));It("stop",{offset:"10%","stop-opacity":.4},J),It("stop",{offset:"100%","stop-opacity":.05},J),It("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},H),It("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},H),It("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},H),It("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},H),this._offset=l.P.convert(r&&r.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",R=>{R.preventDefault()}),this._element.addEventListener("mousedown",R=>{R.preventDefault()});const b=this._element.classList;for(const R in Bd)b.remove(`mapboxgl-marker-anchor-${R}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`);const M=r&&r.className?r.className.trim().split(/\s+/):[];b.add(...M),this._popup=null}addTo(r){return r===this._map||(this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._updateMoving),r.on("moveend",this._update),r.on("remove",this._clearFadeTimer),r._addMarker(this),this.setDraggable(this._draggable),this._update(),r.on("click",this._onMapClick)),this}remove(){const r=this._map;return r&&(r.off("click",this._onMapClick),r.off("move",this._updateMoving),r.off("moveend",this._update),r.off("mousedown",this._addDragHandler),r.off("touchstart",this._addDragHandler),r.off("mouseup",this._onUp),r.off("touchend",this._onUp),r.off("mousemove",this._onMove),r.off("touchmove",this._onMove),r.off("remove",this._clearFadeTimer),r._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.aI.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const M=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(24.6+M)],"bottom-right":[-M,-1*(24.6+M)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=r,r._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(r){const d=r.code,b=r.charCode||r.keyCode;"Space"!==d&&"Enter"!==d&&32!==b&&13!==b||this.togglePopup()}_onMapClick(r){const d=r.originalEvent.target,b=this._element;this._popup&&(d===b||b.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?(r.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(r.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const r=this._map,d=this._pos;if(!r||!d)return!1;const b=r.unproject(d),M=r.getFreeCameraOptions();if(!M.position)return!1;const R=M.position.toLngLat();return R.distanceTo(b)<.9*R.distanceTo(this._lngLat)}_evaluateOpacity(){const r=this._map;if(!r)return;const d=this._pos;if(!d||d.x<0||d.x>r.transform.width||d.y<0||d.y>r.transform.height)return void this._clearFadeTimer();const b=r.unproject(d);let M;r._showingGlobe()&&l.d9(r.transform,this._lngLat)?M=0:(M=1-r._queryFogOpacity(b),r.transform._terrainEnabled()&&r.getTerrain()&&this._behindTerrain()&&(M*=this._occludedOpacity)),this._element.style.opacity=`${M}`,this._element.style.pointerEvents=M>0?"auto":"none",this._popup&&this._popup._setOpacity(M),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const r=this._pos;if(!r||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${r.x}px,${r.y}px)\n            ${Bd[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${d.x}px,${d.y}px)\n        `}_calculateXYTransform(){const r=this._pos,d=this._map,b=this.getPitchAlignment();if(!d||!r||"map"!==b)return"";if(!d._showingGlobe()){const J=d.getPitch();return J?`rotateX(${J}deg)`:""}const M=l.b0(l.da(d.transform,this._lngLat)),R=r.sub(l.db(d.transform)),N=Math.abs(R.x)+Math.abs(R.y);if(0===N)return"";const H=M/N;return`rotateX(${-R.y*H}deg) rotateY(${R.x*H}deg)`}_calculateZTransform(){const r=this._pos,d=this._map;if(!d||!r)return"";let b=0;const M=this.getRotationAlignment();if("map"===M)if(d._showingGlobe()){const R=d.project(new l.aI(this._lngLat.lng,this._lngLat.lat+.001)),N=d.project(new l.aI(this._lngLat.lng,this._lngLat.lat-.001)).sub(R);b=l.b0(Math.atan2(N.y,N.x))-90}else b=-d.getBearing();else if("horizon"===M){const R=l.$(4,6,d.getZoom()),N=l.db(d.transform);N.y+=R*d.transform.height;const H=r.sub(N),J=l.b0(Math.atan2(H.y,H.x));b=(J>90?J-270:J+90)*(1-R)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(r){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Zh(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),!0===r?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){return this._element.classList.add(r),this}removeClassName(r){return this._element.classList.remove(r),this}toggleClassName(r){return this._element.classList.toggle(r)}_onMove(r){const d=this._map;if(!d)return;const b=this._pointerdownPos,M=this._positionDelta;if(b&&M){if(!this._isDragging){const R=this._clickTolerance||d._clickTolerance;if(r.point.dist(b)<R)return;this._isDragging=!0}this._pos=r.point.sub(M),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new l.f("dragstart"))),this.fire(new l.f("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const r=this._map;r&&(r.off("mousemove",this._onMove),r.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new l.f("dragend")),this._state="inactive"}_addDragHandler(r){const d=this._map,b=this._pos;d&&b&&this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(b),this._pointerdownPos=r.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(r){this._draggable=!!r;const d=this._map;return d&&(r?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(r){return this._occludedOpacity=r||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ns={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fd(v=new l.P(0,0),r="bottom"){if("number"==typeof v){const d=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(r){case"top":return new l.P(0,v);case"top-left":return new l.P(d,d);case"top-right":return new l.P(-d,d);case"bottom":return new l.P(0,-v);case"bottom-left":return new l.P(d,-d);case"bottom-right":return new l.P(-d,-d);case"left":return new l.P(v,0);case"right":return new l.P(-v,0)}return new l.P(0,0)}return v instanceof l.P||Array.isArray(v)?l.P.convert(v):l.P.convert(v[r]||[0,0])}class Jc{constructor(r){this.jumpTo(r)}getValue(r){if(r<=this._startTime)return this._start;if(r>=this._endTime)return this._end;const d=l.b9((r-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(r){return r>=this._startTime&&r<=this._endTime}jumpTo(r){this._startTime=-1/0,this._endTime=-1/0,this._start=r,this._end=r}easeTo(r,d,b){this._start=this.getValue(d),this._end=r,this._startTime=d,this._endTime=d+b}}const R0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class Qh{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}const Wl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1},vh={showCompass:!0,showZoom:!0,visualizePitch:!1};class ql{constructor(r,d,b=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Ja({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,b&&(this.mousePitch=new th({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),l.bp(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(r,d){this.mouseRotate.mousedown(r,d),this.mousePitch&&this.mousePitch.mousedown(r,d),vt()}move(r,d){const b=this.map,M=this.mouseRotate.mousemoveWindow(r,d),R=M&&M.bearingDelta;if(R&&b.setBearing(b.getBearing()+R),this.mousePitch){const N=this.mousePitch.mousemoveWindow(r,d),H=N&&N.pitchDelta;H&&b.setPitch(b.getPitch()+H)}}off(){const r=this.element;r.removeEventListener("mousedown",this.mousedown),r.removeEventListener("touchstart",this.touchstart,{passive:!1}),r.removeEventListener("touchmove",this.touchmove),r.removeEventListener("touchend",this.touchend),r.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){un(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(r){this.down(l.W({},r,{ctrlKey:!0,preventDefault:()=>r.preventDefault()}),ht(this.element,r)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(r){this.move(r,ht(this.element,r))}mouseup(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()}touchstart(r){1!==r.targetTouches.length?this.reset():(this._startPos=this._lastPos=Jn(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>r.preventDefault()},this._startPos))}touchmove(r){1!==r.targetTouches.length?this.reset():(this._lastPos=Jn(this.element,r.targetTouches)[0],this.move({preventDefault:()=>r.preventDefault()},this._lastPos))}touchend(r){0===r.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const fu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Rh={maxWidth:100,unit:"metric"},zh={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:l.dt,supported:Y,setRTLTextPlugin:l.dv,getRTLTextPluginStatus:l.dw,Map:class extends Vl{constructor(v){l.dc.mark(l.dd.create);const r=v;if(null!=(v=l.W({},Wl,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&l.de(window)&&(v.antialias=!1,l.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new fa(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._repaint=!!v.repaint,this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new v1,this._domRenderTaskQueue=new v1,this._controls=[],this._markers=[],this._popups=[],this._mapId=l.df(),this._locale=l.W({},R0,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._tessellationStep=v.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Jc(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._lastDirtyFrameId=0,this._requestManager=new l.dg(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,this._contextCreateOptions=v.contextCreateOptions?{...v.contextCreateOptions}:{},"string"==typeof v.container){const d=document.getElementById(v.container);if(!d)throw new Error(`Container '${v.container.toString()}' not found.`);this._container=d}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&l.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),l.bp(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Qh),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new dc(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,(v.style||!v.testMode)&&this.setStyle(v.style||l.d8.DEFAULT_STYLE,{config:v.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),v.hash&&(this._hash=new T0("string"==typeof v.hash&&v.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){null==r.center&&null==r.zoom||(this.transform._unmodified=!1),this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch});const d=v.bounds;d&&(this.resize(),this.fitBounds(d,l.W({},v.fitBoundsOptions,{duration:0})))}this.resize(),v.attributionControl&&this.addControl(new ih({customAttribution:v.customAttribution})),this._logoControl=new J0,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",d=>{this._update("style"===d.dataType),this.fire(new l.f(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new l.f(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(v,r){if(void 0===r&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.d(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const b=this._controlPositions[r];return-1!==r.indexOf("bottom")?b.insertBefore(d,b.firstChild):b.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.d(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const r=!this._moving;return r&&this.fire(new l.f("movestart",v)).fire(new l.f("move",v)),this.fire(new l.f("resize",v)),r&&this.fire(new l.f("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(l.ai.convert(v)),this._update()}setMinZoom(v){var r;if((v=null!==(r=v)&&void 0!==r?r:-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new l.f("zoomstart")).fire(new l.f("zoom")).fire(new l.f("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){var r;if((v=null!==(r=v)&&void 0!==r?r:22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new l.f("zoomstart")).fire(new l.f("zoom")).fire(new l.f("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){var r;if((v=null!==(r=v)&&void 0!==r?r:0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new l.f("pitchstart")).fire(new l.f("pitch")).fire(new l.f("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){var r;if((v=null!==(r=v)&&void 0!==r?r:85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new l.f("pitchstart")).fire(new l.f("pitch")).fire(new l.f("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return"auto"===v?navigator.language:Array.isArray(v)?0===v.length?void 0:v.map(r=>"auto"===r?navigator.language:r):v}setLanguage(v){const r=this._parseLanguage(v);if(!this.style||r===this._language)return this;this._language=r,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(v){return this._lazyInitEmptyStyle(),v?"string"==typeof v&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.projection)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const v=this.transform,r=v.projection.name;let d;"globe"===r&&v.zoom>=l.aU?(v.setMercatorFromTransition(),d=!0):"mercator"===r&&v.zoom<l.aU&&(v.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,r){return this._updateProjection(v||r||{name:"mercator"})}_updateProjection(v){let r;return r="globe"===v.name&&this.transform.zoom>=l.aU?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),r&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(v){return this.transform.locationPoint3D(l.aI.convert(v))}unproject(v){return this.transform.pointLocation3D(l.P.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,r,d){if("mouseenter"===v||"mouseover"===v){let b=!1;const M=N=>{const H=r.filter(re=>this.getLayer(re)),J=H.length?this.queryRenderedFeatures(N.point,{layers:H}):[];J.length?b||(b=!0,d.call(this,new Qu(v,this,N.originalEvent,{features:J}))):b=!1},R=()=>{b=!1};return{layers:new Set(r),listener:d,delegates:{mousemove:M,mouseout:R}}}if("mouseleave"===v||"mouseout"===v){let b=!1;const M=N=>{const H=r.filter(J=>this.getLayer(J));(H.length?this.queryRenderedFeatures(N.point,{layers:H}):[]).length?b=!0:b&&(b=!1,d.call(this,new Qu(v,this,N.originalEvent)))},R=N=>{b&&(b=!1,d.call(this,new Qu(v,this,N.originalEvent)))};return{layers:new Set(r),listener:d,delegates:{mousemove:M,mouseout:R}}}{const b=M=>{const R=r.filter(H=>this.getLayer(H)),N=R.length?this.queryRenderedFeatures(M.point,{layers:R}):[];N.length&&(M.features=N,d.call(this,M),delete M.features)};return{layers:new Set(r),listener:d,delegates:{[v]:b}}}}on(v,r,d){if("function"==typeof r||void 0===d)return super.on(v,r);if(Array.isArray(r)||(r=[r]),r)for(const M of r)if(!this._isValidId(M))return this;const b=this._createDelegatedListener(v,r,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(b);for(const M in b.delegates)this.on(M,b.delegates[M]);return this}once(v,r,d){if("function"==typeof r||void 0===d)return super.once(v,r);if(Array.isArray(r)||(r=[r]),r)for(const M of r)if(!this._isValidId(M))return this;const b=this._createDelegatedListener(v,r,d);for(const M in b.delegates)this.once(M,b.delegates[M]);return this}off(v,r,d){if("function"==typeof r||void 0===d)return super.off(v,r);const b=new Set(Array.isArray(r)?r:[r]);for(const N of b)if(!this._isValidId(N))return this;const M=(N,H)=>{if(N.size!==H.size)return!1;for(const J of N)if(!H.has(J))return!1;return!0},R=this._delegatedListeners?this._delegatedListeners[v]:void 0;return R&&(N=>{for(let H=0;H<N.length;H++){const J=N[H];if(J.listener===d&&M(J.layers,b)){for(const re in J.delegates)this.off(re,J.delegates[re]);return N.splice(H,1),this}}})(R),this}queryRenderedFeatures(v,r){if(!this.style)return[];if(void 0!==r||void 0===v||v instanceof l.P||Array.isArray(v)||(r=v,v=void 0),v=v||[[0,0],[this.transform.width,this.transform.height]],(r=r||{}).layers&&Array.isArray(r.layers))for(const d of r.layers)if(!this._isValidId(d))return[];return this.style.queryRenderedFeatures(v,r,this.transform)}querySourceFeatures(v,r){return this._isValidId(v)?this.style.querySourceFeatures(v,r):[]}isPointOnSurface(v){const{name:r}=this.transform.projection;return"globe"!==r&&"mercator"!==r&&l.w(`${r} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(l.P.convert(v))}setStyle(v,r){return r=l.W({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r),this.style&&v&&!1!==r.diff&&r.localFontFamily===this._localFontFamily&&r.localIdeographFontFamily===this._localIdeographFontFamily&&!r.config?(this.style._diffStyle(v,(d,b)=>{d?(l.w(`Unable to perform style diff: ${String(d.message||d.error||d)}. Rebuilding the style from scratch.`),this._updateStyle(v,r)):b&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(v,r))}_getUIString(v){const r=this._locale[v];if(null==r)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v){const d=l.W({},r);r&&r.config&&(d.initialConfig=r.config,delete d.config),this.style=new Dc(this,d).load(v),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Dc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(l.w("There is no style added to the map."),!1)}_isValidId(v){return null==v?(this.fire(new l.d(new Error("IDs can't be empty."))),!1):!l.cV(v)||(this.fire(new l.d(new Error(`IDs can't contain special symbols: "${v}".`))),!1)}addSource(v,r){return this._isValidId(v)?(this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)):this}isSourceLoaded(v){return!!this._isValidId(v)&&!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(v,r,d){this._lazyInitEmptyStyle(),this.style.addSourceType(v,r,d)}removeSource(v){return this._isValidId(v)?(this.style.removeSource(v),this._updateTerrain(),this._update(!0)):this}getSource(v){return this._isValidId(v)?this.style.getOwnSource(v):null}addImage(v,r,{pixelRatio:d=1,sdf:b=!1,stretchX:M,stretchY:R,content:N}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap){const{width:H,height:J,data:re}=l.e.getImageData(r);this.style.addImage(v,{data:new l.i({width:H,height:J},re),pixelRatio:d,stretchX:M,stretchY:R,content:N,sdf:b,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new l.d(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:H,height:J}=r,re=r;this.style.addImage(v,{data:new l.i({width:H,height:J},new Uint8Array(re.data)),pixelRatio:d,stretchX:M,stretchY:R,content:N,sdf:b,version:0,userImage:re}),re.onAdd&&re.onAdd(this,v)}}updateImage(v,r){this._lazyInitEmptyStyle();const d=this.style.getImage(v);if(!d)return void this.fire(new l.d(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap?l.e.getImageData(r):r,{width:M,height:R,data:N}=b;if(void 0===M||void 0===R)return void this.fire(new l.d(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==d.data.width||R!==d.data.height)return void this.fire(new l.d(new Error(`The width and height of the updated image (${M}, ${R})\n                must be that same as the previous version of the image\n                (${d.data.width}, ${d.data.height})`)));const H=!(r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap);d.data.replace(N,H),this.style.updateImage(v,d)}hasImage(v){return v?!!this.style&&!!this.style.getImage(v):(this.fire(new l.d(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,r){l.h(this._requestManager.transformRequest(v,l.R.Image),(d,b)=>{r(d,b instanceof HTMLImageElement?l.e.getImageData(b):b)})}listImages(){return this.style.listImages()}addModel(v,r){this._lazyInitEmptyStyle(),this.style.addModel(v,r)}hasModel(v){return v?this.style.hasModel(v):(this.fire(new l.d(new Error("Missing required model id"))),!1)}removeModel(v){this.style.removeModel(v)}listModels(){return this.style.listModels()}addLayer(v,r){return this._isValidId(v.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)):this}getSlot(v){const r=this.getLayer(v);return r&&r.slot||null}setSlot(v,r){return this.style.setSlot(v,r),this.style.mergeLayers(),this._update(!0)}addImport(v,r){return this.style.addImport(v,r),this}updateImport(v,r){return"string"!=typeof r&&r.id!==v?(this.removeImport(v),this.addImport(r)):(this.style.updateImport(v,r),this._update(!0))}removeImport(v){return this.style.removeImport(v),this}moveImport(v,r){return this.style.moveImport(v,r),this._update(!0)}moveLayer(v,r){return this._isValidId(v)?(this.style.moveLayer(v,r),this._update(!0)):this}removeLayer(v){return this._isValidId(v)?(this.style.removeLayer(v),this._update(!0)):this}getLayer(v){if(!this._isValidId(v))return null;const r=this.style.getOwnLayer(v);return r?r.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(v,r,d){return this._isValidId(v)?(this.style.setLayerZoomRange(v,r,d),this._update(!0)):this}setFilter(v,r,d={}){return this._isValidId(v)?(this.style.setFilter(v,r,d),this._update(!0)):this}getFilter(v){return this._isValidId(v)?this.style.getFilter(v):null}setPaintProperty(v,r,d,b={}){return this._isValidId(v)?(this.style.setPaintProperty(v,r,d,b),this._update(!0)):this}getPaintProperty(v,r){return this._isValidId(v)?this.style.getPaintProperty(v,r):null}setLayoutProperty(v,r,d,b={}){return this._isValidId(v)?(this.style.setLayoutProperty(v,r,d,b),this._update(!0)):this}getLayoutProperty(v,r){return this._isValidId(v)?this.style.getLayoutProperty(v,r):null}getSchema(v){return this.style.getSchema(v)}setSchema(v,r){return this.style.setSchema(v,r),this._update(!0)}getConfig(v){return this.style.getConfig(v)}setConfig(v,r){return this.style.setConfig(v,r),this._update(!0)}getConfigProperty(v,r){return this.style.getConfigProperty(v,r)}setConfigProperty(v,r,d){return this.style.setConfigProperty(v,r,d),this._update(!0)}setLights(v){if(this._lazyInitEmptyStyle(),v&&1===v.length&&"flat"===v[0].type){const r=v[0];r.properties?this.style.setFlatLight(r.properties,r.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(v),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const v=this.style.getLights()||[];return 0===v.length&&v.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),v}setLight(v,r={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:v}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(v){return this._lazyInitEmptyStyle(),this.style.setColorTheme(v),this._update(!0)}setCamera(v){return this.style.setCamera(v),this._triggerCameraUpdate(v)}_triggerCameraUpdate(v){return this._update(this.transform.setOrthographicProjectionAtLowPitch("orthographic"===v["camera-projection"]))}getCamera(){return this.style.camera}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(l.aI.convert(v),this.transform):0}setFeatureState(v,r){return this._isValidId(v.source)?(this.style.setFeatureState(v,r),this._update()):this}removeFeatureState(v,r){return this._isValidId(v.source)?(this.style.removeFeatureState(v,r),this._update()):this}getFeatureState(v){return this._isValidId(v.source)?this.style.getFeatureState(v):null}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,r=this._container.getBoundingClientRect().height||300;let d,b,M,R=this._container;for(;R&&(!b||!M);){const N=window.getComputedStyle(R).transform;N&&"none"!==N&&(d=N.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&"0"!==d[0]&&"1"!==d[0]&&(b=d[0]),d[3]&&"0"!==d[3]&&"1"!==d[3]&&(M=d[3])),R=R.parentElement}this._containerWidth=b?Math.abs(v/b):v,this._containerHeight=M?Math.abs(r/M):r}_detectMissingCSS(){"rgb(250, 128, 114)"!==window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&l.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=Ut("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const r=this._canvasContainer=Ut("div","mapboxgl-canvas-container",v);this._canvas=Ut("canvas","mapboxgl-canvas",r),this._interactive&&(r.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=Ut("div","mapboxgl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{b[M]=Ut("div",`mapboxgl-ctrl-${M}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r){const d=l.e.devicePixelRatio||1;this._canvas.width=d*Math.ceil(v),this._canvas.height=d*Math.ceil(r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const r=this._markers.indexOf(v);-1!==r&&this._markers.splice(r,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const r=this._popups.indexOf(v);-1!==r&&this._popups.splice(r,1)}_setupPainter(){const v=l.W({},Y.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl2",v);r?(l.dh(r,!0),this.painter=new Ru(r,this._contextCreateOptions,this.transform,this._tp),this.on("data",d=>{"source"===d.dataType&&this.painter.setTileLoadedFlag(!0)}),l.di.testSupport(r)):this.fire(new l.d(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.f("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new l.f("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty&&!this._occlusionOpacityChanged&&this._occlusionCriteriaSatisfied()}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let r;this.fire(new l.f("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,b=l.e.now(),M=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(r=M.createQuery(),M.beginQuery(d.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const R=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const re=this.transform.zoom,he=this.transform.pitch,ye=l.e.now(),Pe=new l.X(re,{now:ye,fadeDuration:R,pitch:he,transition:this.style.transition});this.style.update(Pe)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let N=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),N=this._updateAverageElevation(b),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):N=this._updateAverageElevation(b);const H=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,R,this._crossSourceCollisions,this.painter.replacementSource);if(H&&(this._placementDirty=H.needsRerender,this._occlusionOpacityChanged=H.occlusionQueryBasedOpacityChanged),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:R,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new l.f("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.dc.mark(l.dd.load),this.fire(new l.f("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){const re=l.e.now()-b;M.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const he=M.getQueryParameter(r,M.QUERY_RESULT)/1e6;M.deleteQuery(r),this.fire(new l.f("gpu-timing-frame",{cpuTime:re,gpuTime:he}))},50)}if(this.listens("gpu-timing-layer")){const re=this.painter.collectGpuTimers();setTimeout(()=>{const he=this.painter.queryGpuTimers(re);this.fire(new l.f("gpu-timing-layer",{layerTimes:he}))},50)}if(this.listens("gpu-timing-deferred-render")){const re=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const he=this.painter.queryGpuTimeDeferredRender(re);this.fire(new l.f("gpu-timing-deferred-render",{gpuTime:he}))},50)}const J=this._sourcesDirty||this._styleDirty||this._placementDirty||this._occlusionOpacityChanged||N;if((this._sourcesDirty||this._styleDirty||N||this._occlusionOpacityChanged)&&(this._lastDirtyFrameId=this._frameId),J||this._repaint||!this._occlusionCriteriaSatisfied())this.triggerRepaint();else{const re=!this.isMoving()&&this.loaded();if(re&&(N=this._updateAverageElevation(b,!0)),N)this.triggerRepaint();else if(this._triggerFrame(!1),re&&(this.fire(new l.f("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const he=this._calculateSpeedIndex();this.fire(new l.f("speedindexcompleted",{speedIndex:he})),this.speedIndexTiming=!1}}this._loaded&&!this._fullyLoaded&&!J&&this._occlusionCriteriaSatisfied()&&(this._fullyLoaded=!0,l.dc.mark(l.dd.fullLoad),this._performanceMetricsCollection&&l.dj(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const r of this._markers)v&&!this.getRenderWorldCopies()&&(r._lngLat=r._lngLat.wrap()),r._update();for(const r of this._popups)!v||this.getRenderWorldCopies()||r._trackPointer||(r._lngLat=r._lngLat.wrap()),r._update()}_updateAverageElevation(v,r=!1){const d=M=>(this.transform.averageElevation=M,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&d(0);const b=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(b||(r||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const M=this.transform.averageElevation;let R=this.transform.sampleAverageElevation();null!=this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(R)?R=0:this._averageElevationLastSampledAt=v;const N=Math.abs(M-R);if(N>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(R),d(R);this._averageElevation.easeTo(R,v,300)}else if(N>1e-4)return this._averageElevation.jumpTo(R),d(R)}return!!this._averageElevation.isEasing(v)&&d(this._averageElevation.getValue(v))}_authenticate(){l.dk(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,v=>{if(v&&(v.message===l.dl||401===v.status)){const r=this.painter.context.gl;l.dh(r,!1),this._logoControl instanceof J0&&this._logoControl._updateLogo(),r&&r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new l.d(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),l.dm(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&l.dn(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),r=this.painter.getCanvasCopiesAndTimestamps();r.timeStamps.push(performance.now());const d=this.painter.context.gl,b=d.createFramebuffer();function M(R){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,R,0);const N=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,N),N}return d.bindFramebuffer(d.FRAMEBUFFER,b),this._canvasPixelComparison(M(v),r.canvasCopies.map(M),r.timeStamps)}_canvasPixelComparison(v,r,d){let b=d[1]-d[0];const M=v.length/4;for(let R=0;R<r.length;R++){const N=r[R];let H=0;for(let J=0;J<N.length;J+=4)N[J]===v[J]&&N[J+1]===v[J+1]&&N[J+2]===v[J+2]&&N[J+3]===v[J+3]&&(H+=1);b+=(d[R+2]-d[R+1])*(1-H/M)}return b}remove(){this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),l.dp(this.painter.context.gl),l.dq.remove(),l.dr.remove(),this._removed=!0,this.fire(new l.f("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=l.e.frame(r=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(r)}))}_preloadTiles(v){const r=this.style?this.style.getSourceCaches():[];return l.ds(r,(d,b)=>d._preloadTiles(v,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){"hidden"===document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(v){this._showParseStatus!==v&&(this._showParseStatus=v,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(v){this._showLayers2DWireframe!==v&&(this._showLayers2DWireframe=v,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(v){this._showLayers3DWireframe!==v&&(this._showLayers3DWireframe=v,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,this._tp.refreshUI(),v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,this._tp.refreshUI(),v&&this._update())}_setCacheLimits(v,r){l.du(v,r)}_occlusionCriteriaSatisfied(){const v=this.style&&(this.style.has3DLayers()||this.style.terrain&&!this.style.disableElevatedTerrain);return!(this.style&&this.style.hasSymbolLayers()&&v&&this.painter)||this._frameId-this._lastDirtyFrameId>5+2*this.painter.symbolParams.occlusionQueryFrameWindow}get version(){return l.dt}},NavigationControl:class{constructor(v={}){this.options=l.W({},vh,v),this._container=Ut("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(l.bp(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",r=>{this._map&&this._map.zoomIn({},{originalEvent:r})}),Ut("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",r=>{this._map&&this._map.zoomOut({},{originalEvent:r})}),Ut("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bp(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",r=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:r}):d.resetNorth({},{originalEvent:r}))}),this._compassIcon=Ut("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const r=v.getZoom(),d=r===v.getMaxZoom(),b=r===v.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=r)})}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ql(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,r){const d=Ut("button",v,this._container);return d.type="button",d.addEventListener("click",r),d}_setButtonTitle(v,r){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${r}`);v.setAttribute("aria-label",d),v.firstElementChild&&v.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends l.E{constructor(v={}){super();const r=navigator.geolocation;this.options=l.W({geolocation:r},fu,v),l.bp(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ou(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=Ut("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const r=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,v(d)};void 0!==this._supportsGeolocation?v(this._supportsGeolocation):void 0!==navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(d=>r("denied"!==d.state)).catch(()=>r()):r()}_isOutOfMapMaxBounds(v){const r=this._map.getMaxBounds(),d=v.coords;return!!r&&(d.longitude<r.getWest()||d.longitude>r.getEast()||d.latitude<r.getSouth()||d.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new l.f("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(v),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(v),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new l.f("geolocate",v)),this._finish()}}_updateCamera(v){const r=new l.aI(v.coords.longitude,v.coords.latitude),d=v.coords.accuracy,b=this._map.getBearing(),M=l.W({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(d),M,{geolocateSource:!0})}_updateMarker(v){if(v){const r=new l.aI(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,r=l.ax(1,v._center.lat)*v.worldSize,d=Math.ceil(2*this._accuracy*r);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(1===v.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===v.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new l.f("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=Ut("button","mapboxgl-ctrl-geolocate",this._container),Ut("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===v){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ut("div","mapboxgl-user-location"),this._dotElement.appendChild(Ut("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Ut("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Vc({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Ut("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Vc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||"ACTIVE_LOCK"!==this._watchState||r.originalEvent&&"resize"===r.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new l.f("trackuserlocationend")))})}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:!0===v.absolute&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.f("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.f("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.f("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(r=>{"granted"===r&&v()}).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ih,ScaleControl:class{constructor(v={}){this.options=l.W({},Rh,v),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),l.bp(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,r=this._map,d=r._containerHeight/2,b=r._containerWidth/2-v/2,M=r.unproject([b,d]),R=r.unproject([b+v,d]),N=M.distanceTo(R);if("imperial"===this.options.unit){const H=3.2808*N;H>5280?this._setScale(v,H/5280,"mile"):this._setScale(v,H,"foot")}else"nautical"===this.options.unit?this._setScale(v,N/1852,"nautical-mile"):N>=1e3?this._setScale(v,N/1e3,"kilometer"):this._setScale(v,N,"meter")}_setScale(v,r,d){this._map._requestDomTask(()=>{const b=function(R){const N=Math.pow(10,`${Math.floor(R)}`.length-1);let H=R/N;return H=H>=10?10:H>=5?5:H>=3?3:H>=2?2:H>=1?1:function(J){const re=Math.pow(10,Math.ceil(-Math.log(J)/Math.LN10));return Math.round(J*re)/re}(H),N*H}(r),M=b/r;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==d?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(b):`${b}&nbsp;${zh[d]}`,this._container.style.width=v*M+"px"})}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=Ut("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v={}){this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.w("Full screen control 'container' must be a DOM element.")),l.bp(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ut("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=Ut("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Ut("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.E{constructor(v){super(),this.options=l.W(Object.create(ns),v),l.bp(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new l.f("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new l.f("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=l.aI.convert(v),this._pos=null,this._trackPointer=!1,this._update();const r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const r=document.createDocumentFragment(),d=document.createElement("body");let b;for(d.innerHTML=v;b=d.firstChild,b;)r.appendChild(b);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let r=this._content;if(r)for(;r.hasChildNodes();)r.firstChild&&r.removeChild(r.firstChild);else r=this._content=Ut("div","mapboxgl-popup-content",this._container||void 0);if(r.appendChild(v),this.options.closeButton){const d=this._closeButton=Ut("button","mapboxgl-popup-close-button",r);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let r;return this._classList.delete(v)?r=!1:(this._classList.add(v),r=!0),this._updateClassList(),r}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const r=this._map,d=this._container,b=this._pos;if(!r||!d||!b)return"bottom";const M=d.offsetWidth,R=d.offsetHeight,N=b.x<M/2,H=b.x>r.transform.width-M/2;if(b.y+v<R)return N?"top-left":H?"top-right":"top";if(b.y>r.transform.height-R){if(N)return"bottom-left";if(H)return"bottom-right"}return N?"left":H?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const r=[...this._classList];r.push("mapboxgl-popup"),this._anchor&&r.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&r.push("mapboxgl-popup-track-pointer"),v.className=r.join(" ")}_update(v){const r=this._map,d=this._content;if(!r||!this._lngLat&&!this._trackPointer||!d)return;let b=this._container;if(b||(b=this._container=Ut("div","mapboxgl-popup",r.getContainer()),this._tip=Ut("div","mapboxgl-popup-tip",b),b.appendChild(d)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Zh(this._lngLat,this._pos,r.transform)),!this._trackPointer||v){const M=this._pos=this._trackPointer&&v instanceof l.P?v:r.project(this._lngLat),R=Fd(this.options.offset),N=this._anchor=this._getAnchor(R.y),H=Fd(this.options.offset,N),J=M.add(H).round();r._requestDomTask(()=>{this._container&&N&&(this._container.style.transform=`${Bd[N]} translate(${J.x}px,${J.y}px)`)})}if(!this._marker&&r._showingGlobe()){const M=l.d9(r.transform,this._lngLat)?0:1;this._setOpacity(M)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Nd);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:Vc,Style:Dc,LngLat:l.aI,LngLatBounds:l.ai,Point:l.P,MercatorCoordinate:l.Y,FreeCameraOptions:et,Evented:l.E,config:l.d8,prewarm:l.dx,clearPrewarmedResources:l.dy,get accessToken(){return l.d8.ACCESS_TOKEN},set accessToken(v){l.d8.ACCESS_TOKEN=v},get baseApiUrl(){return l.d8.API_URL},set baseApiUrl(v){l.d8.API_URL=v},get workerCount(){return l.dz.workerCount},set workerCount(v){l.dz.workerCount=v},get maxParallelImageRequests(){return l.d8.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){l.d8.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){l.dA(v)},get workerUrl(){return l.dB.workerUrl},set workerUrl(v){l.dB.workerUrl=v},get workerClass(){return l.dB.workerClass},set workerClass(v){l.dB.workerClass=v},get workerParams(){return l.dB.workerParams},set workerParams(v){l.dB.workerParams=v},get dracoUrl(){return l.dC()},set dracoUrl(v){l.dD(v)},get meshoptUrl(){return l.dE()},set meshoptUrl(v){l.dF(v)},setNow:l.e.setNow,restoreNow:l.e.restoreNow}}),V}()},4412:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{t:()=>se});var V=_e(1413);class se extends V.B{constructor(l){super(),this._value=l}get value(){return this.getValue()}_subscribe(l){const qe=super._subscribe(l);return!qe.closed&&l.next(this._value),qe}getValue(){const{hasError:l,thrownError:qe,_value:Y}=this;if(l)throw qe;return this._throwIfClosed(),Y}next(l){super.next(this._value=l)}}},1985:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{c:()=>Xt});var V=_e(7707),se=_e(8359),ne=_e(3494),l=_e(1203),qe=_e(1026),Y=_e(8071),ft=_e(9786);let Xt=(()=>{class At{constructor(vt){vt&&(this._subscribe=vt)}lift(vt){const un=new At;return un.source=this,un.operator=vt,un}subscribe(vt,un,xn){const on=function C(At){return At&&At instanceof V.vU||function It(At){return At&&(0,Y.T)(At.next)&&(0,Y.T)(At.error)&&(0,Y.T)(At.complete)}(At)&&(0,se.Uv)(At)}(vt)?vt:new V.Ms(vt,un,xn);return(0,ft.Y)(()=>{const{operator:ht,source:Jn}=this;on.add(ht?ht.call(on,Jn):Jn?this._subscribe(on):this._trySubscribe(on))}),on}_trySubscribe(vt){try{return this._subscribe(vt)}catch(un){vt.error(un)}}forEach(vt,un){return new(un=Ut(un))((xn,on)=>{const ht=new V.Ms({next:Jn=>{try{vt(Jn)}catch(An){on(An),ht.unsubscribe()}},error:on,complete:xn});this.subscribe(ht)})}_subscribe(vt){var un;return null===(un=this.source)||void 0===un?void 0:un.subscribe(vt)}[ne.s](){return this}pipe(...vt){return(0,l.m)(vt)(this)}toPromise(vt){return new(vt=Ut(vt))((un,xn)=>{let on;this.subscribe(ht=>on=ht,ht=>xn(ht),()=>un(on))})}}return At.create=Ht=>new At(Ht),At})();function Ut(At){var Ht;return null!==(Ht=null!=At?At:qe.$.Promise)&&void 0!==Ht?Ht:Promise}},1413:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{B:()=>ft});var V=_e(1985),se=_e(8359);const l=(0,_e(1853).L)(Ut=>function(){Ut(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=_e(7908),Y=_e(9786);let ft=(()=>{class Ut extends V.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(C){const At=new Xt(this,this);return At.operator=C,At}_throwIfClosed(){if(this.closed)throw new l}next(C){(0,Y.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const At of this.currentObservers)At.next(C)}})}error(C){(0,Y.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=C;const{observers:At}=this;for(;At.length;)At.shift().error(C)}})}complete(){(0,Y.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:C}=this;for(;C.length;)C.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var C;return(null===(C=this.observers)||void 0===C?void 0:C.length)>0}_trySubscribe(C){return this._throwIfClosed(),super._trySubscribe(C)}_subscribe(C){return this._throwIfClosed(),this._checkFinalizedStatuses(C),this._innerSubscribe(C)}_innerSubscribe(C){const{hasError:At,isStopped:Ht,observers:vt}=this;return At||Ht?se.Kn:(this.currentObservers=null,vt.push(C),new se.yU(()=>{this.currentObservers=null,(0,qe.o)(vt,C)}))}_checkFinalizedStatuses(C){const{hasError:At,thrownError:Ht,isStopped:vt}=this;At?C.error(Ht):vt&&C.complete()}asObservable(){const C=new V.c;return C.source=this,C}}return Ut.create=(It,C)=>new Xt(It,C),Ut})();class Xt extends ft{constructor(It,C){super(),this.destination=It,this.source=C}next(It){var C,At;null===(At=null===(C=this.destination)||void 0===C?void 0:C.next)||void 0===At||At.call(C,It)}error(It){var C,At;null===(At=null===(C=this.destination)||void 0===C?void 0:C.error)||void 0===At||At.call(C,It)}complete(){var It,C;null===(C=null===(It=this.destination)||void 0===It?void 0:It.complete)||void 0===C||C.call(It)}_subscribe(It){var C,At;return null!==(At=null===(C=this.source)||void 0===C?void 0:C.subscribe(It))&&void 0!==At?At:se.Kn}}},7707:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Ms:()=>xn,vU:()=>At});var V=_e(8071),se=_e(8359),ne=_e(1026),l=_e(5334),qe=_e(5343);const Y=Ut("C",void 0,void 0);function Ut(qn,xt,Ot){return{kind:qn,value:xt,error:Ot}}var It=_e(9270),C=_e(9786);class At extends se.yU{constructor(xt){super(),this.isStopped=!1,xt?(this.destination=xt,(0,se.Uv)(xt)&&xt.add(this)):this.destination=An}static create(xt,Ot,vn){return new xn(xt,Ot,vn)}next(xt){this.isStopped?Jn(function Xt(qn){return Ut("N",qn,void 0)}(xt),this):this._next(xt)}error(xt){this.isStopped?Jn(function ft(qn){return Ut("E",void 0,qn)}(xt),this):(this.isStopped=!0,this._error(xt))}complete(){this.isStopped?Jn(Y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xt){this.destination.next(xt)}_error(xt){try{this.destination.error(xt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ht=Function.prototype.bind;function vt(qn,xt){return Ht.call(qn,xt)}class un{constructor(xt){this.partialObserver=xt}next(xt){const{partialObserver:Ot}=this;if(Ot.next)try{Ot.next(xt)}catch(vn){on(vn)}}error(xt){const{partialObserver:Ot}=this;if(Ot.error)try{Ot.error(xt)}catch(vn){on(vn)}else on(xt)}complete(){const{partialObserver:xt}=this;if(xt.complete)try{xt.complete()}catch(Ot){on(Ot)}}}class xn extends At{constructor(xt,Ot,vn){let Pn;if(super(),(0,V.T)(xt)||!xt)Pn={next:null!=xt?xt:void 0,error:null!=Ot?Ot:void 0,complete:null!=vn?vn:void 0};else{let ki;this&&ne.$.useDeprecatedNextContext?(ki=Object.create(xt),ki.unsubscribe=()=>this.unsubscribe(),Pn={next:xt.next&&vt(xt.next,ki),error:xt.error&&vt(xt.error,ki),complete:xt.complete&&vt(xt.complete,ki)}):Pn=xt}this.destination=new un(Pn)}}function on(qn){ne.$.useDeprecatedSynchronousErrorHandling?(0,C.l)(qn):(0,l.m)(qn)}function Jn(qn,xt){const{onStoppedNotification:Ot}=ne.$;Ot&&It.f.setTimeout(()=>Ot(qn,xt))}const An={closed:!0,next:qe.l,error:function ht(qn){throw qn},complete:qe.l}},8359:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Kn:()=>Y,yU:()=>qe,Uv:()=>ft});var V=_e(8071);const ne=(0,_e(1853).L)(Ut=>function(C){Ut(this),this.message=C?`${C.length} errors occurred during unsubscription:\n${C.map((At,Ht)=>`${Ht+1}) ${At.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=C});var l=_e(7908);class qe{constructor(It){this.initialTeardown=It,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let It;if(!this.closed){this.closed=!0;const{_parentage:C}=this;if(C)if(this._parentage=null,Array.isArray(C))for(const vt of C)vt.remove(this);else C.remove(this);const{initialTeardown:At}=this;if((0,V.T)(At))try{At()}catch(vt){It=vt instanceof ne?vt.errors:[vt]}const{_finalizers:Ht}=this;if(Ht){this._finalizers=null;for(const vt of Ht)try{Xt(vt)}catch(un){It=null!=It?It:[],un instanceof ne?It=[...It,...un.errors]:It.push(un)}}if(It)throw new ne(It)}}add(It){var C;if(It&&It!==this)if(this.closed)Xt(It);else{if(It instanceof qe){if(It.closed||It._hasParent(this))return;It._addParent(this)}(this._finalizers=null!==(C=this._finalizers)&&void 0!==C?C:[]).push(It)}}_hasParent(It){const{_parentage:C}=this;return C===It||Array.isArray(C)&&C.includes(It)}_addParent(It){const{_parentage:C}=this;this._parentage=Array.isArray(C)?(C.push(It),C):C?[C,It]:It}_removeParent(It){const{_parentage:C}=this;C===It?this._parentage=null:Array.isArray(C)&&(0,l.o)(C,It)}remove(It){const{_finalizers:C}=this;C&&(0,l.o)(C,It),It instanceof qe&&It._removeParent(this)}}qe.EMPTY=(()=>{const Ut=new qe;return Ut.closed=!0,Ut})();const Y=qe.EMPTY;function ft(Ut){return Ut instanceof qe||Ut&&"closed"in Ut&&(0,V.T)(Ut.remove)&&(0,V.T)(Ut.add)&&(0,V.T)(Ut.unsubscribe)}function Xt(Ut){(0,V.T)(Ut)?Ut():Ut.unsubscribe()}},1026:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{$:()=>V});const V={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},17:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{G:()=>Y});var V=_e(1985),se=_e(8359),ne=_e(9898),l=_e(4360),qe=_e(9974);class Y extends V.c{constructor(Xt,Ut){super(),this.source=Xt,this.subjectFactory=Ut,this._subject=null,this._refCount=0,this._connection=null,(0,qe.S)(Xt)&&(this.lift=Xt.lift)}_subscribe(Xt){return this.getSubject().subscribe(Xt)}getSubject(){const Xt=this._subject;return(!Xt||Xt.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:Xt}=this;this._subject=this._connection=null,null==Xt||Xt.unsubscribe()}connect(){let Xt=this._connection;if(!Xt){Xt=this._connection=new se.yU;const Ut=this.getSubject();Xt.add(this.source.subscribe((0,l._)(Ut,void 0,()=>{this._teardown(),Ut.complete()},It=>{this._teardown(),Ut.error(It)},()=>this._teardown()))),Xt.closed&&(this._connection=null,Xt=se.yU.EMPTY)}return Xt}refCount(){return(0,ne.B)()(this)}}},4572:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{z:()=>It});var V=_e(1985),se=_e(3073),ne=_e(8455),l=_e(3669),qe=_e(6450),Y=_e(9326),ft=_e(8496),Xt=_e(4360),Ut=_e(5225);function It(...Ht){const vt=(0,Y.lI)(Ht),un=(0,Y.ms)(Ht),{args:xn,keys:on}=(0,se.D)(Ht);if(0===xn.length)return(0,ne.H)([],vt);const ht=new V.c(function C(Ht,vt,un=l.D){return xn=>{At(vt,()=>{const{length:on}=Ht,ht=new Array(on);let Jn=on,An=on;for(let qn=0;qn<on;qn++)At(vt,()=>{const xt=(0,ne.H)(Ht[qn],vt);let Ot=!1;xt.subscribe((0,Xt._)(xn,vn=>{ht[qn]=vn,Ot||(Ot=!0,An--),An||xn.next(un(ht.slice()))},()=>{--Jn||xn.complete()}))},xn)},xn)}}(xn,vt,on?Jn=>(0,ft.e)(on,Jn):l.D));return un?ht.pipe((0,qe.I)(un)):ht}function At(Ht,vt,un){Ht?(0,Ut.N)(un,Ht,vt):vt()}},8793:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{x:()=>qe});var V=_e(6365),ne=_e(9326),l=_e(8455);function qe(...Y){return function se(){return(0,V.U)(1)}()((0,l.H)(Y,(0,ne.lI)(Y)))}},9030:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{v:()=>ne});var V=_e(1985),se=_e(8750);function ne(l){return new V.c(qe=>{(0,se.Tg)(l()).subscribe(qe)})}},983:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{w:()=>se});const se=new(_e(1985).c)(qe=>qe.complete())},8455:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{H:()=>xt});var V=_e(8750),se=_e(941),ne=_e(6745),Y=_e(1985),Xt=_e(4761),Ut=_e(8071),It=_e(5225);function At(Ot,vn){if(!Ot)throw new Error("Iterable cannot be null");return new Y.c(Pn=>{(0,It.N)(Pn,vn,()=>{const ki=Ot[Symbol.asyncIterator]();(0,It.N)(Pn,vn,()=>{ki.next().then(Ct=>{Ct.done?Pn.complete():Pn.next(Ct.value)})},0,!0)})})}var Ht=_e(5055),vt=_e(9858),un=_e(7441),xn=_e(5397),on=_e(7953),ht=_e(591),Jn=_e(5196);function xt(Ot,vn){return vn?function qn(Ot,vn){if(null!=Ot){if((0,Ht.l)(Ot))return function l(Ot,vn){return(0,V.Tg)(Ot).pipe((0,ne._)(vn),(0,se.Q)(vn))}(Ot,vn);if((0,un.X)(Ot))return function ft(Ot,vn){return new Y.c(Pn=>{let ki=0;return vn.schedule(function(){ki===Ot.length?Pn.complete():(Pn.next(Ot[ki++]),Pn.closed||this.schedule())})})}(Ot,vn);if((0,vt.y)(Ot))return function qe(Ot,vn){return(0,V.Tg)(Ot).pipe((0,ne._)(vn),(0,se.Q)(vn))}(Ot,vn);if((0,on.T)(Ot))return At(Ot,vn);if((0,xn.x)(Ot))return function C(Ot,vn){return new Y.c(Pn=>{let ki;return(0,It.N)(Pn,vn,()=>{ki=Ot[Xt.l](),(0,It.N)(Pn,vn,()=>{let Ct,Me;try{({value:Ct,done:Me}=ki.next())}catch(pn){return void Pn.error(pn)}Me?Pn.complete():Pn.next(Ct)},0,!0)}),()=>(0,Ut.T)(null==ki?void 0:ki.return)&&ki.return()})}(Ot,vn);if((0,Jn.U)(Ot))return function An(Ot,vn){return At((0,Jn.C)(Ot),vn)}(Ot,vn)}throw(0,ht.L)(Ot)}(Ot,vn):(0,V.Tg)(Ot)}},3726:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{R:()=>It});var V=_e(8750),se=_e(1985),ne=_e(1397),l=_e(7441),qe=_e(8071),Y=_e(6450);const ft=["addListener","removeListener"],Xt=["addEventListener","removeEventListener"],Ut=["on","off"];function It(un,xn,on,ht){if((0,qe.T)(on)&&(ht=on,on=void 0),ht)return It(un,xn,on).pipe((0,Y.I)(ht));const[Jn,An]=function vt(un){return(0,qe.T)(un.addEventListener)&&(0,qe.T)(un.removeEventListener)}(un)?Xt.map(qn=>xt=>un[qn](xn,xt,on)):function At(un){return(0,qe.T)(un.addListener)&&(0,qe.T)(un.removeListener)}(un)?ft.map(C(un,xn)):function Ht(un){return(0,qe.T)(un.on)&&(0,qe.T)(un.off)}(un)?Ut.map(C(un,xn)):[];if(!Jn&&(0,l.X)(un))return(0,ne.Z)(qn=>It(qn,xn,on))((0,V.Tg)(un));if(!Jn)throw new TypeError("Invalid event target");return new se.c(qn=>{const xt=(...Ot)=>qn.next(1<Ot.length?Ot:Ot[0]);return Jn(xt),()=>An(xt)})}function C(un,xn){return on=>ht=>un[on](xn,ht)}},8750:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Tg:()=>Ht});var V=_e(1635),se=_e(7441),ne=_e(9858),l=_e(1985),qe=_e(5055),Y=_e(7953),ft=_e(591),Xt=_e(5397),Ut=_e(5196),It=_e(8071),C=_e(5334),At=_e(3494);function Ht(qn){if(qn instanceof l.c)return qn;if(null!=qn){if((0,qe.l)(qn))return function vt(qn){return new l.c(xt=>{const Ot=qn[At.s]();if((0,It.T)(Ot.subscribe))return Ot.subscribe(xt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(qn);if((0,se.X)(qn))return function un(qn){return new l.c(xt=>{for(let Ot=0;Ot<qn.length&&!xt.closed;Ot++)xt.next(qn[Ot]);xt.complete()})}(qn);if((0,ne.y)(qn))return function xn(qn){return new l.c(xt=>{qn.then(Ot=>{xt.closed||(xt.next(Ot),xt.complete())},Ot=>xt.error(Ot)).then(null,C.m)})}(qn);if((0,Y.T)(qn))return ht(qn);if((0,Xt.x)(qn))return function on(qn){return new l.c(xt=>{for(const Ot of qn)if(xt.next(Ot),xt.closed)return;xt.complete()})}(qn);if((0,Ut.U)(qn))return function Jn(qn){return ht((0,Ut.C)(qn))}(qn)}throw(0,ft.L)(qn)}function ht(qn){return new l.c(xt=>{(function An(qn,xt){var Ot,vn,Pn,ki;return(0,V.sH)(this,void 0,void 0,function*(){try{for(Ot=(0,V.xN)(qn);!(vn=yield Ot.next()).done;)if(xt.next(vn.value),xt.closed)return}catch(Ct){Pn={error:Ct}}finally{try{vn&&!vn.done&&(ki=Ot.return)&&(yield ki.call(Ot))}finally{if(Pn)throw Pn.error}}xt.complete()})})(qn,xt).catch(Ot=>xt.error(Ot))})}},7673:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{of:()=>ne});var V=_e(9326),se=_e(8455);function ne(...l){const qe=(0,V.lI)(l);return(0,se.H)(l,qe)}},8810:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{$:()=>ne});var V=_e(1985),se=_e(8071);function ne(l,qe){const Y=(0,se.T)(l)?l:()=>l,ft=Xt=>Xt.error(Y());return new V.c(qe?Xt=>qe.schedule(ft,0,Xt):ft)}},4360:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{_:()=>se});var V=_e(7707);function se(l,qe,Y,ft,Xt){return new ne(l,qe,Y,ft,Xt)}class ne extends V.vU{constructor(qe,Y,ft,Xt,Ut,It){super(qe),this.onFinalize=Ut,this.shouldUnsubscribe=It,this._next=Y?function(C){try{Y(C)}catch(At){qe.error(At)}}:super._next,this._error=Xt?function(C){try{Xt(C)}catch(At){qe.error(At)}finally{this.unsubscribe()}}:super._error,this._complete=ft?function(){try{ft()}catch(C){qe.error(C)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var qe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Y}=this;super.unsubscribe(),!Y&&(null===(qe=this.onFinalize)||void 0===qe||qe.call(this))}}}},274:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{H:()=>ne});var V=_e(1397),se=_e(8071);function ne(l,qe){return(0,se.T)(qe)?(0,V.Z)(l,qe,1):(0,V.Z)(l,1)}},5964:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{p:()=>ne});var V=_e(9974),se=_e(4360);function ne(l,qe){return(0,V.N)((Y,ft)=>{let Xt=0;Y.subscribe((0,se._)(ft,Ut=>l.call(qe,Ut,Xt++)&&ft.next(Ut)))})}},980:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{j:()=>se});var V=_e(9974);function se(ne){return(0,V.N)((l,qe)=>{try{l.subscribe(qe)}finally{qe.add(ne)}})}},6354:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{T:()=>ne});var V=_e(9974),se=_e(4360);function ne(l,qe){return(0,V.N)((Y,ft)=>{let Xt=0;Y.subscribe((0,se._)(ft,Ut=>{ft.next(l.call(qe,Ut,Xt++))}))})}},3703:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{u:()=>se});var V=_e(6354);function se(ne){return(0,V.T)(()=>ne)}},6365:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{U:()=>ne});var V=_e(1397),se=_e(3669);function ne(l=1/0){return(0,V.Z)(se.D,l)}},1397:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Z:()=>Xt});var V=_e(6354),se=_e(8750),ne=_e(9974),l=_e(5225),qe=_e(4360),ft=_e(8071);function Xt(Ut,It,C=1/0){return(0,ft.T)(It)?Xt((At,Ht)=>(0,V.T)((vt,un)=>It(At,vt,Ht,un))((0,se.Tg)(Ut(At,Ht))),C):("number"==typeof It&&(C=It),(0,ne.N)((At,Ht)=>function Y(Ut,It,C,At,Ht,vt,un,xn){const on=[];let ht=0,Jn=0,An=!1;const qn=()=>{An&&!on.length&&!ht&&It.complete()},xt=vn=>ht<At?Ot(vn):on.push(vn),Ot=vn=>{vt&&It.next(vn),ht++;let Pn=!1;(0,se.Tg)(C(vn,Jn++)).subscribe((0,qe._)(It,ki=>{null==Ht||Ht(ki),vt?xt(ki):It.next(ki)},()=>{Pn=!0},void 0,()=>{if(Pn)try{for(ht--;on.length&&ht<At;){const ki=on.shift();un?(0,l.N)(It,un,()=>Ot(ki)):Ot(ki)}qn()}catch(ki){It.error(ki)}}))};return Ut.subscribe((0,qe._)(It,xt,()=>{An=!0,qn()})),()=>{null==xn||xn()}}(At,Ht,Ut,C)))}},941:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Q:()=>l});var V=_e(5225),se=_e(9974),ne=_e(4360);function l(qe,Y=0){return(0,se.N)((ft,Xt)=>{ft.subscribe((0,ne._)(Xt,Ut=>(0,V.N)(Xt,qe,()=>Xt.next(Ut),Y),()=>(0,V.N)(Xt,qe,()=>Xt.complete(),Y),Ut=>(0,V.N)(Xt,qe,()=>Xt.error(Ut),Y)))})}},9898:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{B:()=>ne});var V=_e(9974),se=_e(4360);function ne(){return(0,V.N)((l,qe)=>{let Y=null;l._refCount++;const ft=(0,se._)(qe,void 0,void 0,void 0,()=>{if(!l||l._refCount<=0||0<--l._refCount)return void(Y=null);const Xt=l._connection,Ut=Y;Y=null,Xt&&(!Ut||Xt===Ut)&&Xt.unsubscribe(),qe.unsubscribe()});l.subscribe(ft),ft.closed||(Y=l.connect())})}},6745:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{_:()=>se});var V=_e(9974);function se(ne,l=0){return(0,V.N)((qe,Y)=>{Y.add(ne.schedule(()=>qe.subscribe(Y),l))})}},5558:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{n:()=>l});var V=_e(8750),se=_e(9974),ne=_e(4360);function l(qe,Y){return(0,se.N)((ft,Xt)=>{let Ut=null,It=0,C=!1;const At=()=>C&&!Ut&&Xt.complete();ft.subscribe((0,ne._)(Xt,Ht=>{null==Ut||Ut.unsubscribe();let vt=0;const un=It++;(0,V.Tg)(qe(Ht,un)).subscribe(Ut=(0,ne._)(Xt,xn=>Xt.next(Y?Y(Ht,xn,un,vt++):xn),()=>{Ut=null,At()}))},()=>{C=!0,At()}))})}},6697:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{s:()=>l});var V=_e(983),se=_e(9974),ne=_e(4360);function l(qe){return qe<=0?()=>V.w:(0,se.N)((Y,ft)=>{let Xt=0;Y.subscribe((0,ne._)(ft,Ut=>{++Xt<=qe&&(ft.next(Ut),qe<=Xt&&ft.complete())}))})}},8141:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{M:()=>qe});var V=_e(8071),se=_e(9974),ne=_e(4360),l=_e(3669);function qe(Y,ft,Xt){const Ut=(0,V.T)(Y)||ft||Xt?{next:Y,error:ft,complete:Xt}:Y;return Ut?(0,se.N)((It,C)=>{var At;null===(At=Ut.subscribe)||void 0===At||At.call(Ut);let Ht=!0;It.subscribe((0,ne._)(C,vt=>{var un;null===(un=Ut.next)||void 0===un||un.call(Ut,vt),C.next(vt)},()=>{var vt;Ht=!1,null===(vt=Ut.complete)||void 0===vt||vt.call(Ut),C.complete()},vt=>{var un;Ht=!1,null===(un=Ut.error)||void 0===un||un.call(Ut,vt),C.error(vt)},()=>{var vt,un;Ht&&(null===(vt=Ut.unsubscribe)||void 0===vt||vt.call(Ut)),null===(un=Ut.finalize)||void 0===un||un.call(Ut)}))}):l.D}},6780:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{R:()=>qe});var V=_e(8359);class se extends V.yU{constructor(ft,Xt){super()}schedule(ft,Xt=0){return this}}const ne={setInterval(Y,ft,...Xt){const{delegate:Ut}=ne;return null!=Ut&&Ut.setInterval?Ut.setInterval(Y,ft,...Xt):setInterval(Y,ft,...Xt)},clearInterval(Y){const{delegate:ft}=ne;return((null==ft?void 0:ft.clearInterval)||clearInterval)(Y)},delegate:void 0};var l=_e(7908);class qe extends se{constructor(ft,Xt){super(ft,Xt),this.scheduler=ft,this.work=Xt,this.pending=!1}schedule(ft,Xt=0){var Ut;if(this.closed)return this;this.state=ft;const It=this.id,C=this.scheduler;return null!=It&&(this.id=this.recycleAsyncId(C,It,Xt)),this.pending=!0,this.delay=Xt,this.id=null!==(Ut=this.id)&&void 0!==Ut?Ut:this.requestAsyncId(C,this.id,Xt),this}requestAsyncId(ft,Xt,Ut=0){return ne.setInterval(ft.flush.bind(ft,this),Ut)}recycleAsyncId(ft,Xt,Ut=0){if(null!=Ut&&this.delay===Ut&&!1===this.pending)return Xt;null!=Xt&&ne.clearInterval(Xt)}execute(ft,Xt){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ut=this._execute(ft,Xt);if(Ut)return Ut;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ft,Xt){let It,Ut=!1;try{this.work(ft)}catch(C){Ut=!0,It=C||new Error("Scheduled action threw falsy error")}if(Ut)return this.unsubscribe(),It}unsubscribe(){if(!this.closed){const{id:ft,scheduler:Xt}=this,{actions:Ut}=Xt;this.work=this.state=this.scheduler=null,this.pending=!1,(0,l.o)(Ut,this),null!=ft&&(this.id=this.recycleAsyncId(Xt,ft,null)),this.delay=null,super.unsubscribe()}}}},3604:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{q:()=>ne});const V={now:()=>(V.delegate||Date).now(),delegate:void 0};class se{constructor(qe,Y=se.now){this.schedulerActionCtor=qe,this.now=Y}schedule(qe,Y=0,ft){return new this.schedulerActionCtor(this,qe).schedule(ft,Y)}}se.now=V.now;class ne extends se{constructor(qe,Y=se.now){super(qe,Y),this.actions=[],this._active=!1}flush(qe){const{actions:Y}=this;if(this._active)return void Y.push(qe);let ft;this._active=!0;do{if(ft=qe.execute(qe.state,qe.delay))break}while(qe=Y.shift());if(this._active=!1,ft){for(;qe=Y.shift();)qe.unsubscribe();throw ft}}}},3236:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{E:()=>ne,b:()=>l});var V=_e(6780);const ne=new(_e(3604).q)(V.R),l=ne},9270:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{f:()=>V});const V={setTimeout(se,ne,...l){const{delegate:qe}=V;return null!=qe&&qe.setTimeout?qe.setTimeout(se,ne,...l):setTimeout(se,ne,...l)},clearTimeout(se){const{delegate:ne}=V;return((null==ne?void 0:ne.clearTimeout)||clearTimeout)(se)},delegate:void 0}},4761:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{l:()=>se});const se=function V(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{s:()=>V});const V="function"==typeof Symbol&&Symbol.observable||"@@observable"},9326:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{R0:()=>Y,lI:()=>qe,ms:()=>l});var V=_e(8071),se=_e(9470);function ne(ft){return ft[ft.length-1]}function l(ft){return(0,V.T)(ne(ft))?ft.pop():void 0}function qe(ft){return(0,se.m)(ne(ft))?ft.pop():void 0}function Y(ft,Xt){return"number"==typeof ne(ft)?ft.pop():Xt}},3073:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{D:()=>qe});const{isArray:V}=Array,{getPrototypeOf:se,prototype:ne,keys:l}=Object;function qe(ft){if(1===ft.length){const Xt=ft[0];if(V(Xt))return{args:Xt,keys:null};if(function Y(ft){return ft&&"object"==typeof ft&&se(ft)===ne}(Xt)){const Ut=l(Xt);return{args:Ut.map(It=>Xt[It]),keys:Ut}}}return{args:ft,keys:null}}},7908:(Go,Kn,_e)=>{"use strict";function V(se,ne){if(se){const l=se.indexOf(ne);0<=l&&se.splice(l,1)}}_e.d(Kn,{o:()=>V})},1853:(Go,Kn,_e)=>{"use strict";function V(se){const l=se(qe=>{Error.call(qe),qe.stack=(new Error).stack});return l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l}_e.d(Kn,{L:()=>V})},8496:(Go,Kn,_e)=>{"use strict";function V(se,ne){return se.reduce((l,qe,Y)=>(l[qe]=ne[Y],l),{})}_e.d(Kn,{e:()=>V})},9786:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Y:()=>ne,l:()=>l});var V=_e(1026);let se=null;function ne(qe){if(V.$.useDeprecatedSynchronousErrorHandling){const Y=!se;if(Y&&(se={errorThrown:!1,error:null}),qe(),Y){const{errorThrown:ft,error:Xt}=se;if(se=null,ft)throw Xt}}else qe()}function l(qe){V.$.useDeprecatedSynchronousErrorHandling&&se&&(se.errorThrown=!0,se.error=qe)}},5225:(Go,Kn,_e)=>{"use strict";function V(se,ne,l,qe=0,Y=!1){const ft=ne.schedule(function(){l(),Y?se.add(this.schedule(null,qe)):this.unsubscribe()},qe);if(se.add(ft),!Y)return ft}_e.d(Kn,{N:()=>V})},3669:(Go,Kn,_e)=>{"use strict";function V(se){return se}_e.d(Kn,{D:()=>V})},7441:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{X:()=>V});const V=se=>se&&"number"==typeof se.length&&"function"!=typeof se},7953:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{T:()=>se});var V=_e(8071);function se(ne){return Symbol.asyncIterator&&(0,V.T)(null==ne?void 0:ne[Symbol.asyncIterator])}},8071:(Go,Kn,_e)=>{"use strict";function V(se){return"function"==typeof se}_e.d(Kn,{T:()=>V})},5055:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{l:()=>ne});var V=_e(3494),se=_e(8071);function ne(l){return(0,se.T)(l[V.s])}},5397:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{x:()=>ne});var V=_e(4761),se=_e(8071);function ne(l){return(0,se.T)(null==l?void 0:l[V.l])}},9858:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{y:()=>se});var V=_e(8071);function se(ne){return(0,V.T)(null==ne?void 0:ne.then)}},5196:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{C:()=>ne,U:()=>l});var V=_e(1635),se=_e(8071);function ne(qe){return(0,V.AQ)(this,arguments,function*(){const ft=qe.getReader();try{for(;;){const{value:Xt,done:Ut}=yield(0,V.N3)(ft.read());if(Ut)return yield(0,V.N3)(void 0);yield yield(0,V.N3)(Xt)}}finally{ft.releaseLock()}})}function l(qe){return(0,se.T)(null==qe?void 0:qe.getReader)}},9470:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{m:()=>se});var V=_e(8071);function se(ne){return ne&&(0,V.T)(ne.schedule)}},9974:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{N:()=>ne,S:()=>se});var V=_e(8071);function se(l){return(0,V.T)(null==l?void 0:l.lift)}function ne(l){return qe=>{if(se(qe))return qe.lift(function(Y){try{return l(Y,this)}catch(ft){this.error(ft)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{I:()=>l});var V=_e(6354);const{isArray:se}=Array;function l(qe){return(0,V.T)(Y=>function ne(qe,Y){return se(Y)?qe(...Y):qe(Y)}(qe,Y))}},5343:(Go,Kn,_e)=>{"use strict";function V(){}_e.d(Kn,{l:()=>V})},1203:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{F:()=>se,m:()=>ne});var V=_e(3669);function se(...l){return ne(l)}function ne(l){return 0===l.length?V.D:1===l.length?l[0]:function(Y){return l.reduce((ft,Xt)=>Xt(ft),Y)}}},5334:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{m:()=>ne});var V=_e(1026),se=_e(9270);function ne(l){se.f.setTimeout(()=>{const{onUnhandledError:qe}=V.$;if(!qe)throw l;qe(l)})}},591:(Go,Kn,_e)=>{"use strict";function V(se){return new TypeError(`You provided ${null!==se&&"object"==typeof se?"an invalid object":`'${se}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}_e.d(Kn,{L:()=>V})},8996:(Go,Kn,_e)=>{var V={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,1293,7428],"./ion-datetime_3.entry.js":[2885,1293,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function se(ne){if(!_e.o(V,ne))return Promise.resolve().then(()=>{var Y=new Error("Cannot find module '"+ne+"'");throw Y.code="MODULE_NOT_FOUND",Y});var l=V[ne],qe=l[0];return Promise.all(l.slice(1).map(_e.e)).then(()=>_e(qe))}se.keys=()=>Object.keys(V),se.id=8996,Go.exports=se},5235:(Go,Kn,_e)=>{var V={"./pwa-action-sheet.entry.js":[6301,6301],"./pwa-camera-modal-instance.entry.js":[5640,5640],"./pwa-camera-modal.entry.js":[2982,2982],"./pwa-camera.entry.js":[6086,6086],"./pwa-toast.entry.js":[3574,3574]};function se(ne){if(!_e.o(V,ne))return Promise.resolve().then(()=>{var Y=new Error("Cannot find module '"+ne+"'");throw Y.code="MODULE_NOT_FOUND",Y});var l=V[ne],qe=l[0];return _e.e(l[1]).then(()=>_e(qe))}se.keys=()=>Object.keys(V),se.id=5235,Go.exports=se},4140:Go=>{function Kn(_e){return Promise.resolve().then(()=>{var V=new Error("Cannot find module '"+_e+"'");throw V.code="MODULE_NOT_FOUND",V})}Kn.keys=()=>[],Kn.resolve=Kn,Kn.id=4140,Go.exports=Kn},177:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{AJ:()=>vi,MD:()=>zn,N0:()=>Ts,QT:()=>ne,Sq:()=>Na,T3:()=>ru,UE:()=>yo,VF:()=>qe,Vy:()=>co,ZD:()=>l,_b:()=>Yt,aZ:()=>ht,bT:()=>Ra,hb:()=>vt,qQ:()=>ft,vh:()=>Ea});var V=_e(3953);let se=null;function ne(){return se}function l(fe){var Ee;null!==(Ee=se)&&void 0!==Ee||(se=fe)}class qe{}const ft=new V.nKC("");let Xt=(()=>{var fe;class Ee{historyGo(Ce){throw new Error("")}}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)},fe.\u0275prov=V.jDH({token:fe,factory:()=>(0,V.WQX)(It),providedIn:"platform"}),Ee})(),It=(()=>{var fe;class Ee extends Xt{constructor(){super(),this._doc=(0,V.WQX)(ft),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ne().getBaseHref(this._doc)}onPopState(Ce){const Gt=ne().getGlobalEventTarget(this._doc,"window");return Gt.addEventListener("popstate",Ce,!1),()=>Gt.removeEventListener("popstate",Ce)}onHashChange(Ce){const Gt=ne().getGlobalEventTarget(this._doc,"window");return Gt.addEventListener("hashchange",Ce,!1),()=>Gt.removeEventListener("hashchange",Ce)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(Ce){this._location.pathname=Ce}pushState(Ce,Gt,Tn){this._history.pushState(Ce,Gt,Tn)}replaceState(Ce,Gt,Tn){this._history.replaceState(Ce,Gt,Tn)}forward(){this._history.forward()}back(){this._history.back()}historyGo(Ce=0){this._history.go(Ce)}getState(){return this._history.state}}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)},fe.\u0275prov=V.jDH({token:fe,factory:()=>new fe,providedIn:"platform"}),Ee})();function C(fe,Ee){if(0==fe.length)return Ee;if(0==Ee.length)return fe;let Bt=0;return fe.endsWith("/")&&Bt++,Ee.startsWith("/")&&Bt++,2==Bt?fe+Ee.substring(1):1==Bt?fe+Ee:fe+"/"+Ee}function At(fe){const Ee=fe.match(/#|\?|$/),Bt=Ee&&Ee.index||fe.length;return fe.slice(0,Bt-("/"===fe[Bt-1]?1:0))+fe.slice(Bt)}function Ht(fe){return fe&&"?"!==fe[0]?"?"+fe:fe}let vt=(()=>{var fe;class Ee{historyGo(Ce){throw new Error("")}}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)},fe.\u0275prov=V.jDH({token:fe,factory:()=>(0,V.WQX)(xn),providedIn:"root"}),Ee})();const un=new V.nKC("");let xn=(()=>{var fe;class Ee extends vt{constructor(Ce,Gt){var Tn,ui,Ko;super(),this._platformLocation=Ce,this._removeListenerFns=[],this._baseHref=null!==(Tn=null!==(ui=null!=Gt?Gt:this._platformLocation.getBaseHrefFromDOM())&&void 0!==ui?ui:null===(Ko=(0,V.WQX)(ft).location)||void 0===Ko?void 0:Ko.origin)&&void 0!==Tn?Tn:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ce){this._removeListenerFns.push(this._platformLocation.onPopState(Ce),this._platformLocation.onHashChange(Ce))}getBaseHref(){return this._baseHref}prepareExternalUrl(Ce){return C(this._baseHref,Ce)}path(Ce=!1){const Gt=this._platformLocation.pathname+Ht(this._platformLocation.search),Tn=this._platformLocation.hash;return Tn&&Ce?`${Gt}${Tn}`:Gt}pushState(Ce,Gt,Tn,ui){const Ko=this.prepareExternalUrl(Tn+Ht(ui));this._platformLocation.pushState(Ce,Gt,Ko)}replaceState(Ce,Gt,Tn,ui){const Ko=this.prepareExternalUrl(Tn+Ht(ui));this._platformLocation.replaceState(Ce,Gt,Ko)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Ce=0){var Gt,Tn;null===(Gt=(Tn=this._platformLocation).historyGo)||void 0===Gt||Gt.call(Tn,Ce)}}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)(V.KVO(Xt),V.KVO(un,8))},fe.\u0275prov=V.jDH({token:fe,factory:fe.\u0275fac,providedIn:"root"}),Ee})(),ht=(()=>{var fe;class Ee{constructor(Ce){this._subject=new V.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=Ce;const Gt=this._locationStrategy.getBaseHref();this._basePath=function xt(fe){if(new RegExp("^(https?:)?//").test(fe)){const[,Bt]=fe.split(/\/\/[^\/]+/);return Bt}return fe}(At(qn(Gt))),this._locationStrategy.onPopState(Tn=>{this._subject.emit({url:this.path(!0),pop:!0,state:Tn.state,type:Tn.type})})}ngOnDestroy(){var Ce;null===(Ce=this._urlChangeSubscription)||void 0===Ce||Ce.unsubscribe(),this._urlChangeListeners=[]}path(Ce=!1){return this.normalize(this._locationStrategy.path(Ce))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(Ce,Gt=""){return this.path()==this.normalize(Ce+Ht(Gt))}normalize(Ce){return Ee.stripTrailingSlash(function An(fe,Ee){if(!fe||!Ee.startsWith(fe))return Ee;const Bt=Ee.substring(fe.length);return""===Bt||["/",";","?","#"].includes(Bt[0])?Bt:Ee}(this._basePath,qn(Ce)))}prepareExternalUrl(Ce){return Ce&&"/"!==Ce[0]&&(Ce="/"+Ce),this._locationStrategy.prepareExternalUrl(Ce)}go(Ce,Gt="",Tn=null){this._locationStrategy.pushState(Tn,"",Ce,Gt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ce+Ht(Gt)),Tn)}replaceState(Ce,Gt="",Tn=null){this._locationStrategy.replaceState(Tn,"",Ce,Gt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ce+Ht(Gt)),Tn)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(Ce=0){var Gt,Tn;null===(Gt=(Tn=this._locationStrategy).historyGo)||void 0===Gt||Gt.call(Tn,Ce)}onUrlChange(Ce){var Gt;return this._urlChangeListeners.push(Ce),null!==(Gt=this._urlChangeSubscription)&&void 0!==Gt||(this._urlChangeSubscription=this.subscribe(Tn=>{this._notifyUrlChangeListeners(Tn.url,Tn.state)})),()=>{const Tn=this._urlChangeListeners.indexOf(Ce);var ui;this._urlChangeListeners.splice(Tn,1),0===this._urlChangeListeners.length&&(null===(ui=this._urlChangeSubscription)||void 0===ui||ui.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(Ce="",Gt){this._urlChangeListeners.forEach(Tn=>Tn(Ce,Gt))}subscribe(Ce,Gt,Tn){return this._subject.subscribe({next:Ce,error:Gt,complete:Tn})}}return(fe=Ee).normalizeQueryParams=Ht,fe.joinWithSlash=C,fe.stripTrailingSlash=At,fe.\u0275fac=function(Ce){return new(Ce||fe)(V.KVO(vt))},fe.\u0275prov=V.jDH({token:fe,factory:()=>function Jn(){return new ht((0,V.KVO)(vt))}(),providedIn:"root"}),Ee})();function qn(fe){return fe.replace(/\/index.html$/,"")}var ki=function(fe){return fe[fe.Format=0]="Format",fe[fe.Standalone=1]="Standalone",fe}(ki||{}),Ct=function(fe){return fe[fe.Narrow=0]="Narrow",fe[fe.Abbreviated=1]="Abbreviated",fe[fe.Wide=2]="Wide",fe[fe.Short=3]="Short",fe}(Ct||{}),Me=function(fe){return fe[fe.Short=0]="Short",fe[fe.Medium=1]="Medium",fe[fe.Long=2]="Long",fe[fe.Full=3]="Full",fe}(Me||{});const pn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function tt(fe,Ee){return Li((0,V.H5H)(fe)[V.KH2.DateFormat],Ee)}function zt(fe,Ee){return Li((0,V.H5H)(fe)[V.KH2.TimeFormat],Ee)}function Yn(fe,Ee){return Li((0,V.H5H)(fe)[V.KH2.DateTimeFormat],Ee)}function cn(fe,Ee){const Bt=(0,V.H5H)(fe),Ce=Bt[V.KH2.NumberSymbols][Ee];if(typeof Ce>"u"){if(Ee===pn.CurrencyDecimal)return Bt[V.KH2.NumberSymbols][pn.Decimal];if(Ee===pn.CurrencyGroup)return Bt[V.KH2.NumberSymbols][pn.Group]}return Ce}function rs(fe){if(!fe[V.KH2.ExtraData])throw new Error(`Missing extra locale data for the locale "${fe[V.KH2.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Li(fe,Ee){for(let Bt=Ee;Bt>-1;Bt--)if(typeof fe[Bt]<"u")return fe[Bt];throw new Error("Locale data API: locale data undefined")}function yi(fe){const[Ee,Bt]=fe.split(":");return{hours:+Ee,minutes:+Bt}}const mo=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,eo={},es=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Jo=function(fe){return fe[fe.Short=0]="Short",fe[fe.ShortGMT=1]="ShortGMT",fe[fe.Long=2]="Long",fe[fe.Extended=3]="Extended",fe}(Jo||{}),or=function(fe){return fe[fe.FullYear=0]="FullYear",fe[fe.Month=1]="Month",fe[fe.Date=2]="Date",fe[fe.Hours=3]="Hours",fe[fe.Minutes=4]="Minutes",fe[fe.Seconds=5]="Seconds",fe[fe.FractionalSeconds=6]="FractionalSeconds",fe[fe.Day=7]="Day",fe}(or||{}),ti=function(fe){return fe[fe.DayPeriods=0]="DayPeriods",fe[fe.Days=1]="Days",fe[fe.Months=2]="Months",fe[fe.Eras=3]="Eras",fe}(ti||{});function cs(fe,Ee,Bt,Ce){let Gt=function mt(fe){if(Mt(fe))return fe;if("number"==typeof fe&&!isNaN(fe))return new Date(fe);if("string"==typeof fe){if(fe=fe.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(fe)){const[Gt,Tn=1,ui=1]=fe.split("-").map(Ko=>+Ko);return Cs(Gt,Tn-1,ui)}const Bt=parseFloat(fe);if(!isNaN(fe-Bt))return new Date(Bt);let Ce;if(Ce=fe.match(mo))return function Ye(fe){const Ee=new Date(0);let Bt=0,Ce=0;const Gt=fe[8]?Ee.setUTCFullYear:Ee.setFullYear,Tn=fe[8]?Ee.setUTCHours:Ee.setHours;fe[9]&&(Bt=Number(fe[9]+fe[10]),Ce=Number(fe[9]+fe[11])),Gt.call(Ee,Number(fe[1]),Number(fe[2])-1,Number(fe[3]));const ui=Number(fe[4]||0)-Bt,Ko=Number(fe[5]||0)-Ce,hs=Number(fe[6]||0),Qs=Math.floor(1e3*parseFloat("0."+(fe[7]||0)));return Tn.call(Ee,ui,Ko,hs,Qs),Ee}(Ce)}const Ee=new Date(fe);if(!Mt(Ee))throw new Error(`Unable to convert "${fe}" into a date`);return Ee}(fe);Ee=Or(Bt,Ee)||Ee;let Ko,ui=[];for(;Ee;){if(Ko=es.exec(Ee),!Ko){ui.push(Ee);break}{ui=ui.concat(Ko.slice(1));const Js=ui.pop();if(!Js)break;Ee=Js}}let hs=Gt.getTimezoneOffset();Ce&&(hs=Pi(Ce,hs),Gt=function kt(fe,Ee,Bt){const Ce=Bt?-1:1,Gt=fe.getTimezoneOffset();return function Xn(fe,Ee){return(fe=new Date(fe.getTime())).setMinutes(fe.getMinutes()+Ee),fe}(fe,Ce*(Pi(Ee,Gt)-Gt))}(Gt,Ce,!0));let Qs="";return ui.forEach(Js=>{const Pr=function ei(fe){if(Wi[fe])return Wi[fe];let Ee;switch(fe){case"G":case"GG":case"GGG":Ee=_r(ti.Eras,Ct.Abbreviated);break;case"GGGG":Ee=_r(ti.Eras,Ct.Wide);break;case"GGGGG":Ee=_r(ti.Eras,Ct.Narrow);break;case"y":Ee=Nr(or.FullYear,1,0,!1,!0);break;case"yy":Ee=Nr(or.FullYear,2,0,!0,!0);break;case"yyy":Ee=Nr(or.FullYear,3,0,!1,!0);break;case"yyyy":Ee=Nr(or.FullYear,4,0,!1,!0);break;case"Y":Ee=Hr(1);break;case"YY":Ee=Hr(2,!0);break;case"YYY":Ee=Hr(3);break;case"YYYY":Ee=Hr(4);break;case"M":case"L":Ee=Nr(or.Month,1,1);break;case"MM":case"LL":Ee=Nr(or.Month,2,1);break;case"MMM":Ee=_r(ti.Months,Ct.Abbreviated);break;case"MMMM":Ee=_r(ti.Months,Ct.Wide);break;case"MMMMM":Ee=_r(ti.Months,Ct.Narrow);break;case"LLL":Ee=_r(ti.Months,Ct.Abbreviated,ki.Standalone);break;case"LLLL":Ee=_r(ti.Months,Ct.Wide,ki.Standalone);break;case"LLLLL":Ee=_r(ti.Months,Ct.Narrow,ki.Standalone);break;case"w":Ee=vs(1);break;case"ww":Ee=vs(2);break;case"W":Ee=vs(1,!0);break;case"d":Ee=Nr(or.Date,1);break;case"dd":Ee=Nr(or.Date,2);break;case"c":case"cc":Ee=Nr(or.Day,1);break;case"ccc":Ee=_r(ti.Days,Ct.Abbreviated,ki.Standalone);break;case"cccc":Ee=_r(ti.Days,Ct.Wide,ki.Standalone);break;case"ccccc":Ee=_r(ti.Days,Ct.Narrow,ki.Standalone);break;case"cccccc":Ee=_r(ti.Days,Ct.Short,ki.Standalone);break;case"E":case"EE":case"EEE":Ee=_r(ti.Days,Ct.Abbreviated);break;case"EEEE":Ee=_r(ti.Days,Ct.Wide);break;case"EEEEE":Ee=_r(ti.Days,Ct.Narrow);break;case"EEEEEE":Ee=_r(ti.Days,Ct.Short);break;case"a":case"aa":case"aaa":Ee=_r(ti.DayPeriods,Ct.Abbreviated);break;case"aaaa":Ee=_r(ti.DayPeriods,Ct.Wide);break;case"aaaaa":Ee=_r(ti.DayPeriods,Ct.Narrow);break;case"b":case"bb":case"bbb":Ee=_r(ti.DayPeriods,Ct.Abbreviated,ki.Standalone,!0);break;case"bbbb":Ee=_r(ti.DayPeriods,Ct.Wide,ki.Standalone,!0);break;case"bbbbb":Ee=_r(ti.DayPeriods,Ct.Narrow,ki.Standalone,!0);break;case"B":case"BB":case"BBB":Ee=_r(ti.DayPeriods,Ct.Abbreviated,ki.Format,!0);break;case"BBBB":Ee=_r(ti.DayPeriods,Ct.Wide,ki.Format,!0);break;case"BBBBB":Ee=_r(ti.DayPeriods,Ct.Narrow,ki.Format,!0);break;case"h":Ee=Nr(or.Hours,1,-12);break;case"hh":Ee=Nr(or.Hours,2,-12);break;case"H":Ee=Nr(or.Hours,1);break;case"HH":Ee=Nr(or.Hours,2);break;case"m":Ee=Nr(or.Minutes,1);break;case"mm":Ee=Nr(or.Minutes,2);break;case"s":Ee=Nr(or.Seconds,1);break;case"ss":Ee=Nr(or.Seconds,2);break;case"S":Ee=Nr(or.FractionalSeconds,1);break;case"SS":Ee=Nr(or.FractionalSeconds,2);break;case"SSS":Ee=Nr(or.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Ee=Gs(Jo.Short);break;case"ZZZZZ":Ee=Gs(Jo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Ee=Gs(Jo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Ee=Gs(Jo.Long);break;default:return null}return Wi[fe]=Ee,Ee}(Js);Qs+=Pr?Pr(Gt,Bt,hs):"''"===Js?"'":Js.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Qs}function Cs(fe,Ee,Bt){const Ce=new Date(0);return Ce.setFullYear(fe,Ee,Bt),Ce.setHours(0,0,0),Ce}function Or(fe,Ee){var Bt;const Ce=function On(fe){return(0,V.H5H)(fe)[V.KH2.LocaleId]}(fe);if(null!==(Bt=eo[Ce])&&void 0!==Bt||(eo[Ce]={}),eo[Ce][Ee])return eo[Ce][Ee];let Gt="";switch(Ee){case"shortDate":Gt=tt(fe,Me.Short);break;case"mediumDate":Gt=tt(fe,Me.Medium);break;case"longDate":Gt=tt(fe,Me.Long);break;case"fullDate":Gt=tt(fe,Me.Full);break;case"shortTime":Gt=zt(fe,Me.Short);break;case"mediumTime":Gt=zt(fe,Me.Medium);break;case"longTime":Gt=zt(fe,Me.Long);break;case"fullTime":Gt=zt(fe,Me.Full);break;case"short":const Tn=Or(fe,"shortTime"),ui=Or(fe,"shortDate");Gt=Kr(Yn(fe,Me.Short),[Tn,ui]);break;case"medium":const Ko=Or(fe,"mediumTime"),hs=Or(fe,"mediumDate");Gt=Kr(Yn(fe,Me.Medium),[Ko,hs]);break;case"long":const Qs=Or(fe,"longTime"),Js=Or(fe,"longDate");Gt=Kr(Yn(fe,Me.Long),[Qs,Js]);break;case"full":const Pr=Or(fe,"fullTime"),Ta=Or(fe,"fullDate");Gt=Kr(Yn(fe,Me.Full),[Pr,Ta])}return Gt&&(eo[Ce][Ee]=Gt),Gt}function Kr(fe,Ee){return Ee&&(fe=fe.replace(/\{([^}]+)}/g,function(Bt,Ce){return null!=Ee&&Ce in Ee?Ee[Ce]:Bt})),fe}function Qr(fe,Ee,Bt="-",Ce,Gt){let Tn="";(fe<0||Gt&&fe<=0)&&(Gt?fe=1-fe:(fe=-fe,Tn=Bt));let ui=String(fe);for(;ui.length<Ee;)ui="0"+ui;return Ce&&(ui=ui.slice(ui.length-Ee)),Tn+ui}function Nr(fe,Ee,Bt=0,Ce=!1,Gt=!1){return function(Tn,ui){let Ko=function ir(fe,Ee){switch(fe){case or.FullYear:return Ee.getFullYear();case or.Month:return Ee.getMonth();case or.Date:return Ee.getDate();case or.Hours:return Ee.getHours();case or.Minutes:return Ee.getMinutes();case or.Seconds:return Ee.getSeconds();case or.FractionalSeconds:return Ee.getMilliseconds();case or.Day:return Ee.getDay();default:throw new Error(`Unknown DateType value "${fe}".`)}}(fe,Tn);if((Bt>0||Ko>-Bt)&&(Ko+=Bt),fe===or.Hours)0===Ko&&-12===Bt&&(Ko=12);else if(fe===or.FractionalSeconds)return function Ho(fe,Ee){return Qr(fe,3).substring(0,Ee)}(Ko,Ee);const hs=cn(ui,pn.MinusSign);return Qr(Ko,Ee,hs,Ce,Gt)}}function _r(fe,Ee,Bt=ki.Format,Ce=!1){return function(Gt,Tn){return function Dr(fe,Ee,Bt,Ce,Gt,Tn){switch(Bt){case ti.Months:return function Fn(fe,Ee,Bt){const Ce=(0,V.H5H)(fe),Tn=Li([Ce[V.KH2.MonthsFormat],Ce[V.KH2.MonthsStandalone]],Ee);return Li(Tn,Bt)}(Ee,Gt,Ce)[fe.getMonth()];case ti.Days:return function so(fe,Ee,Bt){const Ce=(0,V.H5H)(fe),Tn=Li([Ce[V.KH2.DaysFormat],Ce[V.KH2.DaysStandalone]],Ee);return Li(Tn,Bt)}(Ee,Gt,Ce)[fe.getDay()];case ti.DayPeriods:const ui=fe.getHours(),Ko=fe.getMinutes();if(Tn){const Qs=function $i(fe){const Ee=(0,V.H5H)(fe);return rs(Ee),(Ee[V.KH2.ExtraData][2]||[]).map(Ce=>"string"==typeof Ce?yi(Ce):[yi(Ce[0]),yi(Ce[1])])}(Ee),Js=function br(fe,Ee,Bt){const Ce=(0,V.H5H)(fe);rs(Ce);const Tn=Li([Ce[V.KH2.ExtraData][0],Ce[V.KH2.ExtraData][1]],Ee)||[];return Li(Tn,Bt)||[]}(Ee,Gt,Ce),Pr=Qs.findIndex(Ta=>{if(Array.isArray(Ta)){const[pa,Ll]=Ta,Ql=ui>=pa.hours&&Ko>=pa.minutes,Jl=ui<Ll.hours||ui===Ll.hours&&Ko<Ll.minutes;if(pa.hours<Ll.hours){if(Ql&&Jl)return!0}else if(Ql||Jl)return!0}else if(Ta.hours===ui&&Ta.minutes===Ko)return!0;return!1});if(-1!==Pr)return Js[Pr]}return function Cn(fe,Ee,Bt){const Ce=(0,V.H5H)(fe),Tn=Li([Ce[V.KH2.DayPeriodsFormat],Ce[V.KH2.DayPeriodsStandalone]],Ee);return Li(Tn,Bt)}(Ee,Gt,Ce)[ui<12?0:1];case ti.Eras:return function Ke(fe,Ee){return Li((0,V.H5H)(fe)[V.KH2.Eras],Ee)}(Ee,Ce)[fe.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${Bt}`)}}(Gt,Tn,fe,Ee,Bt,Ce)}}function Gs(fe){return function(Ee,Bt,Ce){const Gt=-1*Ce,Tn=cn(Bt,pn.MinusSign),ui=Gt>0?Math.floor(Gt/60):Math.ceil(Gt/60);switch(fe){case Jo.Short:return(Gt>=0?"+":"")+Qr(ui,2,Tn)+Qr(Math.abs(Gt%60),2,Tn);case Jo.ShortGMT:return"GMT"+(Gt>=0?"+":"")+Qr(ui,1,Tn);case Jo.Long:return"GMT"+(Gt>=0?"+":"")+Qr(ui,2,Tn)+":"+Qr(Math.abs(Gt%60),2,Tn);case Jo.Extended:return 0===Ce?"Z":(Gt>=0?"+":"")+Qr(ui,2,Tn)+":"+Qr(Math.abs(Gt%60),2,Tn);default:throw new Error(`Unknown zone width "${fe}"`)}}}const ni=0,as=4;function Xs(fe){const Ee=fe.getDay(),Bt=0===Ee?-3:as-Ee;return Cs(fe.getFullYear(),fe.getMonth(),fe.getDate()+Bt)}function vs(fe,Ee=!1){return function(Bt,Ce){let Gt;if(Ee){const Tn=new Date(Bt.getFullYear(),Bt.getMonth(),1).getDay()-1,ui=Bt.getDate();Gt=1+Math.floor((ui+Tn)/7)}else{const Tn=Xs(Bt),ui=function Lr(fe){const Ee=Cs(fe,ni,1).getDay();return Cs(fe,0,1+(Ee<=as?as:as+7)-Ee)}(Tn.getFullYear()),Ko=Tn.getTime()-ui.getTime();Gt=1+Math.round(Ko/6048e5)}return Qr(Gt,fe,cn(Ce,pn.MinusSign))}}function Hr(fe,Ee=!1){return function(Bt,Ce){return Qr(Xs(Bt).getFullYear(),fe,cn(Ce,pn.MinusSign),Ee)}}const Wi={};function Pi(fe,Ee){fe=fe.replace(/:/g,"");const Bt=Date.parse("Jan 01, 1970 00:00:00 "+fe)/6e4;return isNaN(Bt)?Ee:Bt}function Mt(fe){return fe instanceof Date&&!isNaN(fe.valueOf())}function Yt(fe,Ee){Ee=encodeURIComponent(Ee);for(const Bt of fe.split(";")){const Ce=Bt.indexOf("="),[Gt,Tn]=-1==Ce?[Bt,""]:[Bt.slice(0,Ce),Bt.slice(Ce+1)];if(Gt.trim()===Ee)return decodeURIComponent(Tn)}return null}class Vr{constructor(Ee,Bt,Ce,Gt){this.$implicit=Ee,this.ngForOf=Bt,this.index=Ce,this.count=Gt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Na=(()=>{var fe;class Ee{set ngForOf(Ce){this._ngForOf=Ce,this._ngForOfDirty=!0}set ngForTrackBy(Ce){this._trackByFn=Ce}get ngForTrackBy(){return this._trackByFn}constructor(Ce,Gt,Tn){this._viewContainer=Ce,this._template=Gt,this._differs=Tn,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(Ce){Ce&&(this._template=Ce)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Ce=this._ngForOf;!this._differ&&Ce&&(this._differ=this._differs.find(Ce).create(this.ngForTrackBy))}if(this._differ){const Ce=this._differ.diff(this._ngForOf);Ce&&this._applyChanges(Ce)}}_applyChanges(Ce){const Gt=this._viewContainer;Ce.forEachOperation((Tn,ui,Ko)=>{if(null==Tn.previousIndex)Gt.createEmbeddedView(this._template,new Vr(Tn.item,this._ngForOf,-1,-1),null===Ko?void 0:Ko);else if(null==Ko)Gt.remove(null===ui?void 0:ui);else if(null!==ui){const hs=Gt.get(ui);Gt.move(hs,Ko),Rl(hs,Tn)}});for(let Tn=0,ui=Gt.length;Tn<ui;Tn++){const hs=Gt.get(Tn).context;hs.index=Tn,hs.count=ui,hs.ngForOf=this._ngForOf}Ce.forEachIdentityChange(Tn=>{Rl(Gt.get(Tn.currentIndex),Tn)})}static ngTemplateContextGuard(Ce,Gt){return!0}}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)(V.rXU(V.c1b),V.rXU(V.C4Q),V.rXU(V._q3))},fe.\u0275dir=V.FsC({type:fe,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),Ee})();function Rl(fe,Ee){fe.context.$implicit=Ee.item}let Ra=(()=>{var fe;class Ee{constructor(Ce,Gt){this._viewContainer=Ce,this._context=new Ar,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Gt}set ngIf(Ce){this._context.$implicit=this._context.ngIf=Ce,this._updateView()}set ngIfThen(Ce){Hi("ngIfThen",Ce),this._thenTemplateRef=Ce,this._thenViewRef=null,this._updateView()}set ngIfElse(Ce){Hi("ngIfElse",Ce),this._elseTemplateRef=Ce,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Ce,Gt){return!0}}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)(V.rXU(V.c1b),V.rXU(V.C4Q))},fe.\u0275dir=V.FsC({type:fe,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),Ee})();class Ar{constructor(){this.$implicit=null,this.ngIf=null}}function Hi(fe,Ee){if(Ee&&!Ee.createEmbeddedView)throw new Error(`${fe} must be a TemplateRef, but received '${(0,V.Tbb)(Ee)}'.`)}let ru=(()=>{var fe;class Ee{constructor(Ce){this._viewContainerRef=Ce,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(Ce){if(this._shouldRecreateView(Ce)){var Gt;const Tn=this._viewContainerRef;if(this._viewRef&&Tn.remove(Tn.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const ui=this._createContextForwardProxy();this._viewRef=Tn.createEmbeddedView(this.ngTemplateOutlet,ui,{injector:null!==(Gt=this.ngTemplateOutletInjector)&&void 0!==Gt?Gt:void 0})}}_shouldRecreateView(Ce){return!!Ce.ngTemplateOutlet||!!Ce.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(Ce,Gt,Tn)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,Gt,Tn),get:(Ce,Gt,Tn)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,Gt,Tn)}})}}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)(V.rXU(V.c1b))},fe.\u0275dir=V.FsC({type:fe,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[V.OA$]}),Ee})();const au=new V.nKC(""),mc=new V.nKC("");let Ea=(()=>{var fe;class Ee{constructor(Ce,Gt,Tn){this.locale=Ce,this.defaultTimezone=Gt,this.defaultOptions=Tn}transform(Ce,Gt,Tn,ui){if(null==Ce||""===Ce||Ce!=Ce)return null;try{var Ko,hs,Qs,Js,Pr;const Ta=null!==(Ko=null!=Gt?Gt:null===(hs=this.defaultOptions)||void 0===hs?void 0:hs.dateFormat)&&void 0!==Ko?Ko:"mediumDate",pa=null!==(Qs=null!==(Js=null!=Tn?Tn:null===(Pr=this.defaultOptions)||void 0===Pr?void 0:Pr.timezone)&&void 0!==Js?Js:this.defaultTimezone)&&void 0!==Qs?Qs:void 0;return cs(Ce,Ta,ui||this.locale,pa)}catch(Ta){throw function Ia(fe,Ee){return new V.wOt(2100,!1)}()}}}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)(V.rXU(V.xe9,16),V.rXU(au,24),V.rXU(mc,24))},fe.\u0275pipe=V.EJ8({name:"date",type:fe,pure:!0,standalone:!0}),Ee})(),zn=(()=>{var fe;class Ee{}return(fe=Ee).\u0275fac=function(Ce){return new(Ce||fe)},fe.\u0275mod=V.$C({type:fe}),fe.\u0275inj=V.G2t({}),Ee})();const vi="browser",go="server";function yo(fe){return fe===vi}function co(fe){return fe===go}class Ts{}},3953:(Go,Kn,_e)=>{"use strict";function V(i,o){return Object.is(i,o)}_e.d(Kn,{iLQ:()=>y8,sZ2:()=>jp,hnV:()=>nx,o8S:()=>xg,BIS:()=>vp,gRc:()=>mx,Ql9:()=>YE,Ocv:()=>oC,abz:()=>C1,Z63:()=>Ru,aKT:()=>dp,uvJ:()=>ud,zcH:()=>wh,bkB:()=>td,$GK:()=>Os,nKC:()=>ws,zZn:()=>Xl,_q3:()=>q_,MKu:()=>X_,xe9:()=>w8,Co$:()=>B8,Vns:()=>hv,SKi:()=>nu,Xx1:()=>Pr,Agw:()=>e2,PLl:()=>hd,sFG:()=>Gv,_9s:()=>Hv,czy:()=>Tm,C4Q:()=>em,NYb:()=>HE,giA:()=>ex,xvI:()=>_E,RxE:()=>qw,c1b:()=>cv,gXe:()=>Sh,L39:()=>rk,EWP:()=>ak,a0P:()=>fk,Ol2:()=>Q5,w6W:()=>ey,SmG:()=>uC,Rfq:()=>Re,WQX:()=>Ce,hFB:()=>I2,naY:()=>cC,QuC:()=>Se,EmA:()=>Ei,CGW:()=>V0,HJs:()=>mk,N4e:()=>Y0,vPA:()=>To,O8t:()=>lk,H3F:()=>Xw,zAP:()=>$x,H8p:()=>X0,KH2:()=>a6,TgB:()=>xa,wOt:()=>gi,WHO:()=>Qw,e01:()=>Jw,H5H:()=>m_,Zy3:()=>qo,mq5:()=>lb,JZv:()=>ha,TL3:()=>NC,LfX:()=>He,plB:()=>mg,jNT:()=>L_,zjR:()=>tx,TL$:()=>Jf,Tbb:()=>gl,Vt3:()=>dv,GFd:()=>L8,OA$:()=>Dn,Jv_:()=>yw,aNF:()=>bw,R7$:()=>Fu,BMQ:()=>n_,AVh:()=>l_,vxM:()=>Jy,wni:()=>Gb,VBU:()=>Qd,FsC:()=>hu,jDH:()=>Ca,G2t:()=>ke,$C:()=>Jd,EJ8:()=>S0,rXU:()=>Gd,nrm:()=>p_,eu8:()=>f_,bVm:()=>u8,qex:()=>c8,k0s:()=>l8,j41:()=>a8,RV6:()=>rb,xGo:()=>j1,KVO:()=>Ee,kS0:()=>w2,bIt:()=>y_,lsd:()=>Xb,XpG:()=>Rb,nI1:()=>Aw,i5U:()=>Dw,SdG:()=>Ob,NAR:()=>zb,Y8G:()=>s_,lJ4:()=>Iw,eq3:()=>Ew,mGM:()=>qb,sdS:()=>Kb,Dyx:()=>nb,Z7z:()=>tb,fX1:()=>eb,Njj:()=>t1,eBV:()=>tp,B4B:()=>Al,n$t:()=>Gi,DNE:()=>e8,EFF:()=>rw,JRh:()=>I_,SpI:()=>f8,Lme:()=>E_,GBs:()=>Wb});let se=null,ne=!1,l=1;const qe=Symbol("SIGNAL");function Y(i){const o=se;return se=i,o}const It={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function C(i){if(ne)throw new Error("");if(null===se)return;se.consumerOnSignalRead(i);const o=se.nextProducerIndex++;vn(se),o<se.producerNode.length&&se.producerNode[o]!==i&&Ot(se)&&xt(se.producerNode[o],se.producerIndexOfThis[o]),se.producerNode[o]!==i&&(se.producerNode[o]=i,se.producerIndexOfThis[o]=Ot(se)?qn(i,se,o):0),se.producerLastReadVersion[o]=i.version}function Ht(i){if((!Ot(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==l)){if(!i.producerMustRecompute(i)&&!Jn(i))return i.dirty=!1,void(i.lastCleanEpoch=l);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=l}}function vt(i){if(void 0===i.liveConsumerNode)return;const o=ne;ne=!0;try{for(const c of i.liveConsumerNode)c.dirty||xn(c)}finally{ne=o}}function un(){var i;return!1!==(null===(i=se)||void 0===i?void 0:i.consumerAllowSignalWrites)}function xn(i){var o;i.dirty=!0,vt(i),null===(o=i.consumerMarkedDirty)||void 0===o||o.call(i,i)}function on(i){return i&&(i.nextProducerIndex=0),Y(i)}function ht(i,o){if(Y(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Ot(i))for(let c=i.nextProducerIndex;c<i.producerNode.length;c++)xt(i.producerNode[c],i.producerIndexOfThis[c]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Jn(i){vn(i);for(let o=0;o<i.producerNode.length;o++){const c=i.producerNode[o],f=i.producerLastReadVersion[o];if(f!==c.version||(Ht(c),f!==c.version))return!0}return!1}function An(i){if(vn(i),Ot(i))for(let o=0;o<i.producerNode.length;o++)xt(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function qn(i,o,c){if(Pn(i),0===i.liveConsumerNode.length&&ki(i))for(let f=0;f<i.producerNode.length;f++)i.producerIndexOfThis[f]=qn(i.producerNode[f],i,f);return i.liveConsumerIndexOfThis.push(c),i.liveConsumerNode.push(o)-1}function xt(i,o){if(Pn(i),1===i.liveConsumerNode.length&&ki(i))for(let f=0;f<i.producerNode.length;f++)xt(i.producerNode[f],i.producerIndexOfThis[f]);const c=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[c],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[c],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const f=i.liveConsumerIndexOfThis[o],x=i.liveConsumerNode[o];vn(x),x.producerIndexOfThis[f]=o}}function Ot(i){var o,c;return i.consumerIsAlwaysLive||(null!==(o=null==i||null===(c=i.liveConsumerNode)||void 0===c?void 0:c.length)&&void 0!==o?o:0)>0}function vn(i){var o,c,f;null!==(o=i.producerNode)&&void 0!==o||(i.producerNode=[]),null!==(c=i.producerIndexOfThis)&&void 0!==c||(i.producerIndexOfThis=[]),null!==(f=i.producerLastReadVersion)&&void 0!==f||(i.producerLastReadVersion=[])}function Pn(i){var o,c;null!==(o=i.liveConsumerNode)&&void 0!==o||(i.liveConsumerNode=[]),null!==(c=i.liveConsumerIndexOfThis)&&void 0!==c||(i.liveConsumerIndexOfThis=[])}function ki(i){return void 0!==i.producerNode}const Me=Symbol("UNSET"),pn=Symbol("COMPUTING"),Rt=Symbol("ERRORED"),On={...It,value:Me,dirty:!0,error:null,equal:V,producerMustRecompute:i=>i.value===Me||i.value===pn,producerRecomputeValue(i){if(i.value===pn)throw new Error("Detected cycle in computations.");const o=i.value;i.value=pn;const c=on(i);let f;try{f=i.computation()}catch(x){f=Rt,i.error=x}finally{ht(i,c)}o!==Me&&o!==Rt&&f!==Rt&&i.equal(o,f)?i.value=o:(i.value=f,i.version++)}};let so=function Cn(){throw new Error};function Fn(){so()}let Ae=null;function Yn(i,o){un()||Fn(),i.equal(i.value,o)||(i.value=o,function pr(i){var o;i.version++,function At(){l++}(),vt(i),null===(o=Ae)||void 0===o||o()}(i))}const to={...It,equal:V,value:void 0};var $i=_e(4412),br=_e(1413),Jr=_e(8359),Li=_e(6354);var vi;typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const co="https://g.co/ng/security#xss";class gi extends Error{constructor(o,c){super(qo(o,c)),this.code=o}}function qo(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}const cr=Symbol("InputSignalNode#UNSET"),Er={...to,transformFn:void 0,applyValueToInputSignal(i,o){Yn(i,o)}};function ca(i,o){const c=Object.create(Er);function f(){if(C(c),c.value===cr)throw new gi(-950,!1);return c.value}return c.value=i,c.transformFn=null==o?void 0:o.transform,f[qe]=c,f}function zs(i){return{toString:i}.toString()}const ts="__parameters__";function Ms(i,o,c){return zs(()=>{const f=function fa(i){return function(...c){if(i){const f=i(...c);for(const x in f)this[x]=f[x]}}}(o);function x(...O){if(this instanceof x)return f.apply(this,O),this;const G=new x(...O);return ee.annotation=G,ee;function ee(pe,Be,Ze){const Et=pe.hasOwnProperty(ts)?pe[ts]:Object.defineProperty(pe,ts,{value:[]})[ts];for(;Et.length<=Ze;)Et.push(null);return(Et[Ze]=Et[Ze]||[]).push(G),pe}}return c&&(x.prototype=Object.create(c.prototype)),x.prototype.ngMetadataName=i,x.annotationCls=x,x})}const ha=globalThis;function za(i){for(let o in i)if(i[o]===za)return o;throw Error("Could not find renamed property on target object.")}function Va(i,o){for(const c in o)o.hasOwnProperty(c)&&!i.hasOwnProperty(c)&&(i[c]=o[c])}function gl(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(gl).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function hl(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const cu=za({__forward_ref__:za});function Re(i){return i.__forward_ref__=Re,i.toString=function(){return gl(this())},i}function We(i){return Tt(i)?i():i}function Tt(i){return"function"==typeof i&&i.hasOwnProperty(cu)&&i.__forward_ref__===Re}function Ca(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ke(i){return{providers:i.providers||[],imports:i.imports||[]}}function _t(i){return Zt(i,Xa)||Zt(i,Tc)}function He(i){return null!==_t(i)}function Zt(i,o){return i.hasOwnProperty(o)?i[o]:null}function dr(i){return i&&(i.hasOwnProperty(xl)||i.hasOwnProperty(al))?i[xl]:null}const Xa=za({\u0275prov:za}),xl=za({\u0275inj:za}),Tc=za({ngInjectableDef:za}),al=za({ngInjectorDef:za});class ws{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Ca({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Nc(i){return i&&!!i.\u0275providers}const w0=za({\u0275cmp:za}),$h=za({\u0275dir:za}),Xd=za({\u0275pipe:za}),Md=za({\u0275mod:za}),uu=za({\u0275fac:za}),Xc=za({__NG_ELEMENT_ID__:za}),H0=za({__NG_ENV_ID__:za});function As(i){return"string"==typeof i?i:null==i?"":String(i)}function Mc(i,o){throw new gi(-201,!1)}var Os=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Os||{});let x0;function I0(){return x0}function Hl(i){const o=x0;return x0=i,o}function qu(i,o,c){const f=_t(i);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&Os.Optional?null:void 0!==o?o:void Mc()}const Kc={},fd="__NG_DI_FLAG__",Zs="ngTempTokenPath",Cr=/\n/gm,Xu="__source";let lc;function xu(i){const o=lc;return lc=i,o}function fe(i,o=Os.Default){if(void 0===lc)throw new gi(-203,!1);return null===lc?qu(i,void 0,o):lc.get(i,o&Os.Optional?null:void 0,o)}function Ee(i,o=Os.Default){return(I0()||fe)(We(i),o)}function Ce(i,o=Os.Default){return Ee(i,Gt(o))}function Gt(i){return typeof i>"u"||"number"==typeof i?i:(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Tn(i){const o=[];for(let c=0;c<i.length;c++){const f=We(i[c]);if(Array.isArray(f)){if(0===f.length)throw new gi(900,!1);let x,O=Os.Default;for(let G=0;G<f.length;G++){const ee=f[G],pe=Ko(ee);"number"==typeof pe?-1===pe?x=ee.token:O|=pe:x=ee}o.push(Ee(x,O))}else o.push(Ee(f))}return o}function ui(i,o){return i[fd]=o,i.prototype[fd]=o,i}function Ko(i){return i[fd]}const Pr=ui(Ms("Optional"),8),pa=ui(Ms("SkipSelf"),4);function Ql(i,o){return i.hasOwnProperty(uu)?i[uu]:null}function ja(i,o){i.forEach(c=>Array.isArray(c)?ja(c,o):o(c))}function cc(i,o,c){o>=i.length?i.push(c):i.splice(o,0,c)}function Gl(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function ec(i,o,c){let f=gd(i,o);return f>=0?i[1|f]=c:(f=~f,function md(i,o,c,f){let x=i.length;if(x==o)i.push(c,f);else if(1===x)i.push(f,i[0]),i[0]=c;else{for(x--,i.push(i[x-1],i[x]);x>o;)i[x]=i[x-2],x--;i[o]=c,i[o+1]=f}}(i,f,o,c)),f}function Ku(i,o){const c=gd(i,o);if(c>=0)return i[1|c]}function gd(i,o){return function vd(i,o,c){let f=0,x=i.length>>c;for(;x!==f;){const O=f+(x-f>>1),G=i[O<<c];if(o===G)return O<<c;G>o?x=O:f=O+1}return~(x<<c)}(i,o,1)}const Fc={},Ks=[],Ru=new ws(""),du=new ws("",-1),vl=new ws("");class Ac{get(o,c=Kc){if(c===Kc){const f=new Error(`NullInjectorError: No provider for ${gl(o)}!`);throw f.name="NullInjectorError",f}return c}}var kh=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(kh||{}),Sh=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Sh||{}),Yu=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(Yu||{});function Z1(i,o,c){let f=i.length;for(;;){const x=i.indexOf(o,c);if(-1===x)return x;if(0===x||i.charCodeAt(x-1)<=32){const O=o.length;if(x+O===f||i.charCodeAt(x+O)<=32)return x}c=x+1}}function tc(i,o,c){let f=0;for(;f<c.length;){const x=c[f];if("number"==typeof x){if(0!==x)break;f++;const O=c[f++],G=c[f++],ee=c[f++];i.setAttribute(o,G,ee,O)}else{const O=x,G=c[++f];Rd(O)?i.setProperty(o,O,G):i.setAttribute(o,O,G),f++}}return f}function zu(i){return 3===i||4===i||6===i}function Rd(i){return 64===i.charCodeAt(0)}function Hh(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let c=-1;for(let f=0;f<o.length;f++){const x=o[f];"number"==typeof x?c=x:0===c||Ws(i,c,x,null,-1===c||2===c?o[++f]:null)}}return i}function Ws(i,o,c,f,x){let O=0,G=i.length;if(-1===o)G=-1;else for(;O<i.length;){const ee=i[O++];if("number"==typeof ee){if(ee===o){G=-1;break}if(ee>o){G=O-1;break}}}for(;O<i.length;){const ee=i[O];if("number"==typeof ee)break;if(ee===c){if(null===f)return void(null!==x&&(i[O+1]=x));if(f===i[O+1])return void(i[O+2]=x)}O++,null!==f&&O++,null!==x&&O++}-1!==G&&(i.splice(G,0,o),O=G+1),i.splice(O++,0,c),null!==f&&i.splice(O++,0,f),null!==x&&i.splice(O++,0,x)}const E0="ng-template";function Yd(i,o,c,f){let x=0;if(f){for(;x<o.length&&"string"==typeof o[x];x+=2)if("class"===o[x]&&-1!==Z1(o[x+1].toLowerCase(),c,0))return!0}else if(zd(i))return!1;if(x=o.indexOf(1,x),x>-1){let O;for(;++x<o.length&&"string"==typeof(O=o[x]);)if(O.toLowerCase()===c)return!0}return!1}function zd(i){return 4===i.type&&i.value!==E0}function Q1(i,o,c){return o===(4!==i.type||c?i.value:E0)}function Th(i,o,c){let f=4;const x=i.attrs,O=null!==x?function uc(i){for(let o=0;o<i.length;o++)if(zu(i[o]))return o;return i.length}(x):0;let G=!1;for(let ee=0;ee<o.length;ee++){const pe=o[ee];if("number"!=typeof pe){if(!G)if(4&f){if(f=2|1&f,""!==pe&&!Q1(i,pe,c)||""===pe&&1===o.length){if(Yc(f))return!1;G=!0}}else if(8&f){if(null===x||!Yd(i,x,pe,c)){if(Yc(f))return!1;G=!0}}else{const Be=o[++ee],Ze=Zd(pe,x,zd(i),c);if(-1===Ze){if(Yc(f))return!1;G=!0;continue}if(""!==Be){let Et;if(Et=Ze>O?"":x[Ze+1].toLowerCase(),2&f&&Be!==Et){if(Yc(f))return!1;G=!0}}}}else{if(!G&&!Yc(f)&&!Yc(pe))return!1;if(G&&Yc(pe))continue;G=!1,f=pe|1&f}}return Yc(f)||G}function Yc(i){return!(1&i)}function Zd(i,o,c,f){if(null===o)return-1;let x=0;if(f||!c){let O=!1;for(;x<o.length;){const G=o[x];if(G===i)return x;if(3===G||6===G)O=!0;else{if(1===G||2===G){let ee=o[++x];for(;"string"==typeof ee;)ee=o[++x];continue}if(4===G)break;if(0===G){x+=4;continue}}x+=O?1:2}return-1}return function Mh(i,o){let c=i.indexOf(4);if(c>-1)for(c++;c<i.length;){const f=i[c];if("number"==typeof f)return-1;if(f===o)return c;c++}return-1}(o,i)}function W0(i,o,c=!1){for(let f=0;f<o.length;f++)if(Th(i,o[f],c))return!0;return!1}function q0(i,o){e:for(let c=0;c<o.length;c++){const f=o[c];if(i.length===f.length){for(let x=0;x<i.length;x++)if(i[x]!==f[x])continue e;return!0}}return!1}function k0(i,o){return i?":not("+o.trim()+")":o}function cd(i){let o=i[0],c=1,f=2,x="",O=!1;for(;c<i.length;){let G=i[c];if("string"==typeof G)if(2&f){const ee=i[++c];x+="["+G+(ee.length>0?'="'+ee+'"':"")+"]"}else 8&f?x+="."+G:4&f&&(x+=" "+G);else""!==x&&!Yc(G)&&(o+=k0(O,x),x=""),f=G,O=O||!Yc(f);c++}return""!==x&&(o+=k0(O,x)),o}function Qd(i){return zs(()=>{var o;const c=Ve(i),f={...c,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===kh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:c.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:null!==(o=i.signals)&&void 0!==o&&o,data:i.data||{},encapsulation:i.encapsulation||Sh.Emulated,styles:i.styles||Ks,_:null,schemas:i.schemas||null,tView:null,id:""};St(f);const x=i.dependencies;return f.directiveDefs=Kt(x,!1),f.pipeDefs=Kt(x,!0),f.id=function xo(i){let o=0;const c=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const x of c)o=Math.imul(31,o)+x.charCodeAt(0)|0;return o+=2147483648,"c"+o}(f),f})}function Ah(i){return Xi(i)||oe(i)}function yd(i){return null!==i}function Jd(i){return zs(()=>({type:i.type,bootstrap:i.bootstrap||Ks,declarations:i.declarations||Ks,imports:i.imports||Ks,exports:i.exports||Ks,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function bd(i,o){if(null==i)return Fc;const c={};for(const x in i)if(i.hasOwnProperty(x)){const O=i[x];let G,ee,pe=Yu.None;var f;Array.isArray(O)?(pe=O[0],G=O[1],ee=null!==(f=O[2])&&void 0!==f?f:G):(G=O,ee=O),o?(c[G]=pe!==Yu.None?[x,pe]:x,o[G]=ee):c[G]=x}return c}function hu(i){return zs(()=>{const o=Ve(i);return St(o),o})}function S0(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Xi(i){return i[w0]||null}function oe(i){return i[$h]||null}function me(i){return i[Xd]||null}function Se(i){const o=Xi(i)||oe(i)||me(i);return null!==o&&o.standalone}function ge(i,o){const c=i[Md]||null;if(!c&&!0===o)throw new Error(`Type ${gl(i)} does not have '\u0275mod' property.`);return c}function Ve(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||Fc,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Ks,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bd(i.inputs,o),outputs:bd(i.outputs),debugInfo:null}}function St(i){var o;null===(o=i.features)||void 0===o||o.forEach(c=>c(i))}function Kt(i,o){if(!i)return null;const c=o?me:Ah;return()=>("function"==typeof i?i():i).map(f=>c(f)).filter(yd)}function Ei(i){return{\u0275providers:i}}function kr(...i){return{\u0275providers:Ns(0,i),\u0275fromNgModule:!0}}function Ns(i,...o){const c=[],f=new Set;let x;const O=G=>{c.push(G)};return ja(o,G=>{const ee=G;qs(ee,O,[],f)&&(x||(x=[]),x.push(ee))}),void 0!==x&&Oa(x,O),c}function Oa(i,o){for(let c=0;c<i.length;c++){const{ngModule:f,providers:x}=i[c];Nl(x,O=>{o(O,f)})}}function qs(i,o,c,f){if(!(i=We(i)))return!1;let x=null,O=dr(i);const G=!O&&Xi(i);if(O||G){if(G&&!G.standalone)return!1;x=i}else{const pe=i.ngModule;if(O=dr(pe),!O)return!1;x=pe}const ee=f.has(x);if(G){if(ee)return!1;if(f.add(x),G.dependencies){const pe="function"==typeof G.dependencies?G.dependencies():G.dependencies;for(const Be of pe)qs(Be,o,c,f)}}else{if(!O)return!1;{if(null!=O.imports&&!ee){let Be;f.add(x);try{ja(O.imports,Ze=>{qs(Ze,o,c,f)&&(Be||(Be=[]),Be.push(Ze))})}finally{}void 0!==Be&&Oa(Be,o)}if(!ee){const Be=Ql(x)||(()=>new x);o({provide:x,useFactory:Be,deps:Ks},x),o({provide:vl,useValue:x,multi:!0},x),o({provide:Ru,useValue:()=>Ee(x),multi:!0},x)}const pe=O.providers;if(null!=pe&&!ee){const Be=i;Nl(pe,Ze=>{o(Ze,Be)})}}}return x!==i&&void 0!==i.providers}function Nl(i,o){for(let c of i)Nc(c)&&(c=c.\u0275providers),Array.isArray(c)?Nl(c,o):o(c)}const vc=za({provide:String,useValue:za});function Zc(i){return null!==i&&"object"==typeof i&&vc in i}function Ou(i){return"function"==typeof i}const X0=new ws(""),_c={},v2={};let eh;function M0(){return void 0===eh&&(eh=new Ac),eh}class ud{}class Gh extends ud{get destroyed(){return this._destroyed}constructor(o,c,f,x){super(),this.parent=c,this.source=f,this.scopes=x,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,K0(o,G=>this.processProvider(G)),this.records.set(du,qh(void 0,this)),x.has("environment")&&this.records.set(ud,qh(void 0,this));const O=this.records.get(X0);null!=O&&"string"==typeof O.value&&this.scopes.add(O.value),this.injectorDefTypes=new Set(this.get(vl,Ks,Os.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const o=Y(null);try{for(const f of this._ngOnDestroyHooks)f.ngOnDestroy();const c=this._onDestroyHooks;this._onDestroyHooks=[];for(const f of c)f()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(o)}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const c=xu(this),f=Hl(void 0);try{return o()}finally{xu(c),Hl(f)}}get(o,c=Kc,f=Os.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(H0))return o[H0](this);f=Gt(f);const O=xu(this),G=Hl(void 0);try{if(!(f&Os.SkipSelf)){let pe=this.records.get(o);if(void 0===pe){const Be=function ph(i){return"function"==typeof i||"object"==typeof i&&i instanceof ws}(o)&&_t(o);pe=Be&&this.injectableDefInScope(Be)?qh(hh(o),_c):null,this.records.set(o,pe)}if(null!=pe)return this.hydrate(o,pe)}return(f&Os.Self?M0():this.parent).get(o,c=f&Os.Optional&&c===Kc?null:c)}catch(ee){if("NullInjectorError"===ee.name){if((ee[Zs]=ee[Zs]||[]).unshift(gl(o)),O)throw ee;return function hs(i,o,c,f){const x=i[Zs];throw o[Xu]&&x.unshift(o[Xu]),i.message=function Qs(i,o,c,f=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let x=gl(o);if(Array.isArray(o))x=o.map(gl).join(" -> ");else if("object"==typeof o){let O=[];for(let G in o)if(o.hasOwnProperty(G)){let ee=o[G];O.push(G+":"+("string"==typeof ee?JSON.stringify(ee):gl(ee)))}x=`{${O.join(", ")}}`}return`${c}${f?"("+f+")":""}[${x}]: ${i.replace(Cr,"\n  ")}`}("\n"+i.message,x,c,f),i.ngTokenPath=x,i[Zs]=null,i}(ee,o,"R3InjectorError",this.source)}throw ee}finally{Hl(G),xu(O)}}resolveInjectorInitializers(){const o=Y(null),c=xu(this),f=Hl(void 0);try{const O=this.get(Ru,Ks,Os.Self);for(const G of O)G()}finally{xu(c),Hl(f),Y(o)}}toString(){const o=[],c=this.records;for(const f of c.keys())o.push(gl(f));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new gi(205,!1)}processProvider(o){let c=Ou(o=We(o))?o:We(o&&o.provide);const f=function Qu(i){return Zc(i)?qh(void 0,i.useValue):qh(A0(i),_c)}(o);if(!Ou(o)&&!0===o.multi){let x=this.records.get(c);x||(x=qh(void 0,_c,!0),x.factory=()=>Tn(x.multi),this.records.set(c,x)),c=o,x.multi.push(o)}this.records.set(c,f)}hydrate(o,c){const f=Y(null);try{return c.value===_c&&(c.value=v2,c.value=c.factory()),"object"==typeof c.value&&c.value&&function z1(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}finally{Y(f)}}injectableDefInScope(o){if(!o.providedIn)return!1;const c=We(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(o){const c=this._onDestroyHooks.indexOf(o);-1!==c&&this._onDestroyHooks.splice(c,1)}}function hh(i){const o=_t(i),c=null!==o?o.factory:Ql(i);if(null!==c)return c;if(i instanceof ws)throw new gi(204,!1);if(i instanceof Function)return function Wh(i){if(i.length>0)throw new gi(204,!1);const c=function Vo(i){return i&&(i[Xa]||i[Tc])||null}(i);return null!==c?()=>c.factory(i):()=>new i}(i);throw new gi(204,!1)}function A0(i,o,c){let f;if(Ou(i)){const x=We(i);return Ql(x)||hh(x)}if(Zc(i))f=()=>We(i.useValue);else if(function Dc(i){return!(!i||!i.useFactory)}(i))f=()=>i.useFactory(...Tn(i.deps||[]));else if(function Zu(i){return!(!i||!i.useExisting)}(i))f=()=>Ee(We(i.useExisting));else{const x=We(i&&(i.useClass||i.provide));if(!function Dh(i){return!!i.deps}(i))return Ql(x)||hh(x);f=()=>new x(...Tn(i.deps))}return f}function qh(i,o,c=!1){return{factory:i,value:o,multi:c?[]:void 0}}function K0(i,o){for(const c of i)Array.isArray(c)?K0(c,o):c&&Nc(c)?K0(c.\u0275providers,o):o(c)}function Y0(i,o){i instanceof Gh&&i.assertNotDestroyed();const f=xu(i),x=Hl(void 0);try{return o()}finally{xu(f),Hl(x)}}const el=0,sr=1,ps=2,_l=3,xd=4,Wa=5,pl=6,gh=7,Ua=8,Fl=9,Od=10,$s=11,Kh=12,Yh=13,pu=14,dc=15,Ld=16,Vl=17,ih=18,J0=19,v1=20,Zh=21,Bd=22,Vc=23,ns=25,Nd=1,Jc=7,Qh=9,Wl=10;var vh=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(vh||{});function ql(i){return Array.isArray(i)&&"object"==typeof i[Nd]}function fu(i){return Array.isArray(i)&&!0===i[Nd]}function Rh(i){return!!(4&i.flags)}function zh(i){return i.componentOffset>-1}function z0(i){return!(1&~i.flags)}function v(i){return!!i.template}function r(i){return!!(512&i[ps])}class Sn{constructor(o,c,f){this.previousValue=o,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function ci(i,o,c,f){null!==o?o.applyValueToInputSignal(o,f):i[c]=f}function Dn(){return gn}function gn(i){return i.type.prototype.ngOnChanges&&(i.setInput=io),bi}function bi(){const i=te(this),o=null==i?void 0:i.current;if(o){const c=i.previous;if(c===Fc)i.previous=o;else for(let f in o)c[f]=o[f];i.current=null,this.ngOnChanges(o)}}function io(i,o,c,f,x){const O=this.declaredInputs[f],G=te(i)||function L(i,o){return i[ro]=o}(i,{previous:Fc,current:null}),ee=G.current||(G.current={}),pe=G.previous,Be=pe[O];ee[O]=new Sn(Be&&Be.currentValue,c,pe===Fc),ci(i,o,x,c)}Dn.ngInherit=!0;const ro="__ngSimpleChanges__";function te(i){return i[ro]||null}const Ne=function(i,o,c){};function hn(i){for(;Array.isArray(i);)i=i[el];return i}function Wn(i,o){return hn(o[i])}function Yi(i,o){return hn(o[i.index])}function Sr(i,o){return i.data[o]}function $r(i,o){return i[o]}function is(i,o){const c=o[i];return ql(c)?c:c[el]}function Ds(i){return!(128&~i[ps])}function ea(i,o){return null==o?null:i[o]}function na(i){i[Vl]=0}function js(i){1024&i[ps]||(i[ps]|=1024,Ds(i)&&ia(i))}function ya(i){var o;return!!(9216&i[ps]||null!==(o=i[Vc])&&void 0!==o&&o.dirty)}function ll(i){var o;null===(o=i[Od].changeDetectionScheduler)||void 0===o||o.notify(7),64&i[ps]&&(i[ps]|=1024),ya(i)&&ia(i)}function ia(i){var o;null===(o=i[Od].changeDetectionScheduler)||void 0===o||o.notify(0);let c=er(i);for(;null!==c&&!(8192&c[ps])&&(c[ps]|=8192,Ds(c));)c=er(c)}function ba(i,o){if(!(256&~i[ps]))throw new gi(911,!1);null===i[Zh]&&(i[Zh]=[]),i[Zh].push(o)}function er(i){const o=i[_l];return fu(o)?o[_l]:o}const us={lFrame:Of(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Ju=!1;function O0(){return us.bindingsEnabled}function Ka(){return null!==us.skipHydrationRootTNode}function Mo(){return us.lFrame.lView}function ua(){return us.lFrame.tView}function tp(i){return us.lFrame.contextLView=i,i[Ua]}function t1(i){return us.lFrame.contextLView=null,i}function yl(){let i=ed();for(;null!==i&&64===i.type;)i=i.parent;return i}function ed(){return us.lFrame.currentTNode}function nl(i,o){const c=us.lFrame;c.currentTNode=i,c.isParent=o}function kp(){return us.lFrame.isParent}function np(){us.lFrame.isParent=!1}function sf(){return Ju}function e0(i){Ju=i}function Cu(){const i=us.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function mu(){return us.lFrame.bindingIndex++}function Il(i){const o=us.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,c}function L0(i,o){const c=us.lFrame;c.bindingIndex=c.bindingRootIndex=i,n1(o)}function n1(i){us.lFrame.currentDirectiveIndex=i}function t0(){return us.lFrame.currentQueryIndex}function w1(i){us.lFrame.currentQueryIndex=i}function L1(i){const o=i[sr];return 2===o.type?o.declTNode:1===o.type?i[Wa]:null}function af(i,o,c){if(c&Os.SkipSelf){let x=o,O=i;for(;!(x=x.parent,null!==x||c&Os.Host||(x=L1(O),null===x||(O=O[pu],10&x.type))););if(null===x)return!1;o=x,i=O}const f=us.lFrame=bc();return f.currentTNode=o,f.lView=i,!0}function Vd(i){const o=bc(),c=i[sr];us.lFrame=o,o.currentTNode=c.firstChild,o.lView=i,o.tView=c,o.contextLView=i,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function bc(){const i=us.lFrame,o=null===i?null:i.child;return null===o?Of(i):o}function Of(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function n0(){const i=us.lFrame;return us.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const wc=n0;function o0(){const i=n0();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function gu(){return us.lFrame.selectedIndex}function o1(i){us.lFrame.selectedIndex=i}function pc(){const i=us.lFrame;return Sr(i.tView,i.selectedIndex)}let La=!0;function B0(){return La}function yh(i){La=i}function op(i,o){for(let Be=o.directiveStart,Ze=o.directiveEnd;Be<Ze;Be++){const Mn=i.data[Be].type.prototype,{ngAfterContentInit:Hn,ngAfterContentChecked:jn,ngAfterViewInit:fo,ngAfterViewChecked:tr,ngOnDestroy:fr}=Mn;var c,f,x,O,G,ee,pe;Hn&&(null!==(c=i.contentHooks)&&void 0!==c?c:i.contentHooks=[]).push(-Be,Hn),jn&&((null!==(f=i.contentHooks)&&void 0!==f?f:i.contentHooks=[]).push(Be,jn),(null!==(x=i.contentCheckHooks)&&void 0!==x?x:i.contentCheckHooks=[]).push(Be,jn)),fo&&(null!==(O=i.viewHooks)&&void 0!==O?O:i.viewHooks=[]).push(-Be,fo),tr&&((null!==(G=i.viewHooks)&&void 0!==G?G:i.viewHooks=[]).push(Be,tr),(null!==(ee=i.viewCheckHooks)&&void 0!==ee?ee:i.viewCheckHooks=[]).push(Be,tr)),null!=fr&&(null!==(pe=i.destroyHooks)&&void 0!==pe?pe:i.destroyHooks=[]).push(Be,fr)}}function Tp(i,o,c){Ap(i,o,3,c)}function Mp(i,o,c,f){(3&i[ps])===c&&Ap(i,o,c,f)}function Lf(i,o){let c=i[ps];(3&c)===o&&(c&=16383,c+=1,i[ps]=c)}function Ap(i,o,c,f){const O=null!=f?f:-1,G=o.length-1;let ee=0;for(let pe=void 0!==f?65535&i[Vl]:0;pe<G;pe++)if("number"==typeof o[pe+1]){if(ee=o[pe],null!=f&&ee>=f)break}else o[pe]<0&&(i[Vl]+=65536),(ee<O||-1==O)&&(_2(i,c,o,pe),i[Vl]=(4294901760&i[Vl])+pe+2),pe++}function lf(i,o){Ne(4,i,o);const c=Y(null);try{o.call(i)}finally{Y(c),Ne(5,i,o)}}function _2(i,o,c,f){const x=c[f]<0,O=c[f+1],ee=i[x?-c[f]:c[f]];x?i[ps]>>14<i[Vl]>>16&&(3&i[ps])===o&&(i[ps]+=16384,lf(ee,O)):lf(ee,O)}const ul=-1;class Dp{constructor(o,c,f){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}const sp={};class Pc{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,f){f=Gt(f);const x=this.injector.get(o,sp,f);return x!==sp||c===sp?x:this.parentInjector.get(o,c,f)}}function rh(i){return i!==ul}function a1(i){return 32767&i}function ap(i,o){let c=function Pp(i){return i>>16}(i),f=o;for(;c>0;)f=f[pu],c--;return f}let bh=!0;function uf(i){const o=bh;return bh=i,o}const df=255,Nf=5;let Ff=0;const Ed={};function sh(i,o){const c=l1(i,o);if(-1!==c)return c;const f=o[sr];f.firstCreatePass&&(i.injectorIndex=o.length,V1(f.data,i),V1(o,null),V1(f.blueprint,null));const x=I1(i,o),O=i.injectorIndex;if(rh(x)){const G=a1(x),ee=ap(x,o),pe=ee[sr].data;for(let Be=0;Be<8;Be++)o[O+Be]=ee[G+Be]|pe[G+Be]}return o[O+8]=x,O}function V1(i,o){i.push(0,0,0,0,0,0,0,0,o)}function l1(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function I1(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let c=0,f=null,x=o;for(;null!==x;){if(f=cm(x),null===f)return ul;if(c++,x=x[pu],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return ul}function Vf(i,o,c){!function F1(i,o,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(Xc)&&(f=c[Xc]),null==f&&(f=c[Xc]=Ff++);const x=f&df;o.data[i+(x>>Nf)]|=1<<x}(i,o,c)}function b2(i,o,c){if(c&Os.Optional||void 0!==i)return i;Mc()}function Gm(i,o,c,f){if(c&Os.Optional&&void 0===f&&(f=null),!(c&(Os.Self|Os.Host))){const x=i[Fl],O=Hl(void 0);try{return x?x.get(o,f,c&Os.Optional):qu(o,f,c&Os.Optional)}finally{Hl(O)}}return b2(f,0,c)}function lm(i,o,c,f=Os.Default,x){if(null!==i){if(2048&o[ps]&&!(f&Os.Self)){const G=function N0(i,o,c,f,x){let O=i,G=o;for(;null!==O&&null!==G&&2048&G[ps]&&!(512&G[ps]);){const ee=$d(O,G,c,f|Os.Self,Ed);if(ee!==Ed)return ee;let pe=O.parent;if(!pe){const Be=G[v1];if(Be){const Ze=Be.get(c,Ed,f);if(Ze!==Ed)return Ze}pe=cm(G),G=G[pu]}O=pe}return x}(i,o,c,f,Ed);if(G!==Ed)return G}const O=$d(i,o,c,f,Ed);if(O!==Ed)return O}return Gm(o,c,f,x)}function $d(i,o,c,f,x){const O=function $1(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Xc)?i[Xc]:void 0;return"number"==typeof o?o>=0?o&df:cp:o}(c);if("function"==typeof O){if(!af(o,i,f))return f&Os.Host?b2(x,0,f):Gm(o,c,f,x);try{let G;if(G=O(f),null!=G||f&Os.Optional)return G;Mc()}finally{wc()}}else if("number"==typeof O){let G=null,ee=l1(i,o),pe=ul,Be=f&Os.Host?o[dc][Wa]:null;for((-1===ee||f&Os.SkipSelf)&&(pe=-1===ee?I1(i,o):o[ee+8],pe!==ul&&r0(f,!1)?(G=o[sr],ee=a1(pe),o=ap(pe,o)):ee=-1);-1!==ee;){const Ze=o[sr];if(jf(O,ee,Ze.data)){const Et=Rp(ee,o,c,G,f,Be);if(Et!==Ed)return Et}pe=o[ee+8],pe!==ul&&r0(f,o[sr].data[ee+8]===Be)&&jf(O,ee,o)?(G=Ze,ee=a1(pe),o=ap(pe,o)):ee=-1}}return x}function Rp(i,o,c,f,x,O){const G=o[sr],ee=G.data[i+8],Ze=$f(ee,G,c,null==f?zh(ee)&&bh:f!=G&&!!(3&ee.type),x&Os.Host&&O===ee);return null!==Ze?lp(o,G,Ze,ee):Ed}function $f(i,o,c,f,x){const O=i.providerIndexes,G=o.data,ee=1048575&O,pe=i.directiveStart,Ze=O>>20,Mn=x?ee+Ze:i.directiveEnd;for(let Hn=f?ee:ee+Ze;Hn<Mn;Hn++){const jn=G[Hn];if(Hn<pe&&c===jn||Hn>=pe&&jn.type===c)return Hn}if(x){const Hn=G[pe];if(Hn&&v(Hn)&&Hn.type===c)return pe}return null}function lp(i,o,c,f){let x=i[c];const O=o.data;if(function sm(i){return i instanceof Dp}(x)){const G=x;G.resolving&&function jh(i,o){throw o&&o.join(" > "),new gi(-200,i)}(function _a(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():As(i)}(O[c]));const ee=uf(G.canSeeViewProviders);G.resolving=!0;const Be=G.injectImpl?Hl(G.injectImpl):null;af(i,f,Os.Default);try{x=i[c]=G.factory(void 0,O,i,f),o.firstCreatePass&&c>=f.directiveStart&&function rm(i,o,c){const{ngOnChanges:f,ngOnInit:x,ngDoCheck:O}=o.type.prototype;if(f){var G,ee;const Et=gn(o);(null!==(G=c.preOrderHooks)&&void 0!==G?G:c.preOrderHooks=[]).push(i,Et),(null!==(ee=c.preOrderCheckHooks)&&void 0!==ee?ee:c.preOrderCheckHooks=[]).push(i,Et)}var pe,Be,Ze;x&&(null!==(pe=c.preOrderHooks)&&void 0!==pe?pe:c.preOrderHooks=[]).push(0-i,x),O&&((null!==(Be=c.preOrderHooks)&&void 0!==Be?Be:c.preOrderHooks=[]).push(i,O),(null!==(Ze=c.preOrderCheckHooks)&&void 0!==Ze?Ze:c.preOrderCheckHooks=[]).push(i,O))}(c,O[c],o)}finally{null!==Be&&Hl(Be),uf(ee),G.resolving=!1,wc()}}return x}function jf(i,o,c){return!!(c[o+(i>>Nf)]&1<<i)}function r0(i,o){return!(i&Os.Self||i&Os.Host&&o)}class xc{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,f){return lm(this._tNode,this._lView,o,Gt(f),c)}}function cp(){return new xc(yl(),Mo())}function j1(i){return zs(()=>{const o=i.prototype.constructor,c=o[uu]||oa(o),f=Object.prototype;let x=Object.getPrototypeOf(i.prototype).constructor;for(;x&&x!==f;){const O=x[uu]||oa(x);if(O&&O!==c)return O;x=Object.getPrototypeOf(x)}return O=>new O})}function oa(i){return Tt(i)?()=>{const o=oa(We(i));return o&&o()}:Ql(i)}function cm(i){const o=i[sr],c=o.type;return 2===c?o.declTNode:1===c?i[Wa]:null}function w2(i){return function Hm(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const c=i.attrs;if(c){const f=c.length;let x=0;for(;x<f;){const O=c[x];if(zu(O))break;if(0===O)x+=2;else if("number"==typeof O)for(x++;x<f&&"string"==typeof c[x];)x++;else{if(O===o)return c[x+1];x+=2}}}return null}(yl(),i)}function nc(i,o=null,c=null,f){const x=pf(i,o,c,f);return x.resolveInjectorInitializers(),x}function pf(i,o=null,c=null,f,x=new Set){const O=[c||Ks,kr(i)];return f=f||("object"==typeof i?void 0:gl(i)),new Gh(O,o||M0(),f||null,x)}class Xl{static create(o,c){if(Array.isArray(o))return nc({name:""},c,o,"");{var f;const x=null!==(f=o.name)&&void 0!==f?f:"";return nc({name:x},o.parent,o.providers,x)}}}(vi=Xl).THROW_IF_NOT_FOUND=Kc,vi.NULL=new Ac,vi.\u0275prov=Ca({token:vi,providedIn:"any",factory:()=>Ee(du)}),vi.__NG_ELEMENT_ID__=-1,new ws("").__NG_ELEMENT_ID__=i=>{const o=yl();if(null===o)throw new gi(204,!1);if(2&o.type)return o.value;if(i&Os.Optional)return null;throw new gi(204,!1)};function U1(i){return i.ngOriginalError}class wh{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&U1(o);for(;c&&U1(c);)c=U1(c);return c||null}}const dd=new ws("",{providedIn:"root",factory:()=>Ce(wh).handleError.bind(void 0)});let C1=(()=>{var i;class o{}return(i=o).__NG_ELEMENT_ID__=u1,i.__NG_ENV_ID__=c=>c,o})();class kg extends C1{constructor(o){super(),this._lView=o}onDestroy(o){return ba(this._lView,o),()=>function Ki(i,o){if(null===i[Zh])return;const c=i[Zh].indexOf(o);-1!==c&&i[Zh].splice(c,1)}(this._lView,o)}}function u1(){return new kg(Mo())}class F0{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=Ce(wh,{optional:!0}),this.destroyRef=Ce(C1),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(o){var c;if(this.destroyed)throw new gi(953,!1);return(null!==(c=this.listeners)&&void 0!==c?c:this.listeners=[]).push(o),{unsubscribe:()=>{var f;const x=null===(f=this.listeners)||void 0===f?void 0:f.indexOf(o);var O;void 0!==x&&-1!==x&&(null===(O=this.listeners)||void 0===O||O.splice(x,1))}}}emit(o){if(this.destroyed)throw new gi(953,!1);if(null===this.listeners)return;const c=Y(null);try{for(const x of this.listeners)try{x(o)}catch(O){var f;null===(f=this.errorHandler)||void 0===f||f.handleError(O)}}finally{Y(c)}}}function V0(i){return new F0}function Gf(i,o){return ca(i,o)}const I2=(Gf.required=function k1(i){return ca(cr,i)},Gf);function E2(){return zp(yl(),Mo())}function zp(i,o){return new dp(Yi(i,o))}let dp=(()=>{class o{constructor(f){this.nativeElement=f}}return o.__NG_ELEMENT_ID__=E2,o})();function Wf(i){return i instanceof dp?i.nativeElement:i}let xa=(()=>{var i;class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $i.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const f=this.taskId++;return this.pendingTasks.add(f),f}remove(f){this.pendingTasks.delete(f),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(i=o).\u0275prov=Ca({token:i,providedIn:"root",factory:()=>new i}),o})();const td=class fm extends br.B{constructor(o=!1){var c,f;super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=o,function Qc(){return void 0!==I0()||null!=function wu(){return lc}()}()&&(this.destroyRef=null!==(c=Ce(C1,{optional:!0}))&&void 0!==c?c:void 0,this.pendingTasks=null!==(f=Ce(xa,{optional:!0}))&&void 0!==f?f:void 0)}emit(o){const c=Y(null);try{super.next(o)}finally{Y(c)}}subscribe(o,c,f){let x=o,O=c||(()=>null),G=f;if(o&&"object"==typeof o){var ee,pe,Be;const Et=o;x=null===(ee=Et.next)||void 0===ee?void 0:ee.bind(Et),O=null===(pe=Et.error)||void 0===pe?void 0:pe.bind(Et),G=null===(Be=Et.complete)||void 0===Be?void 0:Be.bind(Et)}this.__isAsync&&(O=this.wrapInTimeout(O),x&&(x=this.wrapInTimeout(x)),G&&(G=this.wrapInTimeout(G)));const Ze=super.subscribe({next:x,error:O,complete:G});return o instanceof Jr.yU&&o.add(Ze),Ze}wrapInTimeout(o){return c=>{var f;const x=null===(f=this.pendingTasks)||void 0===f?void 0:f.add();setTimeout(()=>{var O;o(c),void 0!==x&&(null===(O=this.pendingTasks)||void 0===O||O.remove(x))})}}};function Xm(){return this._results[Symbol.iterator]()}class Nu{get changes(){var o;return null!==(o=this._changes)&&void 0!==o?o:this._changes=new td}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const c=Nu.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=Xm)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){this.dirty=!1;const f=function Ga(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Jl(i,o,c){if(i.length!==o.length)return!1;for(let f=0;f<i.length;f++){let x=i[f],O=o[f];if(c&&(x=c(x),O=c(O)),O!==x)return!1}return!0}(this._results,f,c))&&(this._results=f,this.length=f.length,this.last=f[this.length-1],this.first=f[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(o){this._onDirty=o}setDirty(){var o;this.dirty=!0,null===(o=this._onDirty)||void 0===o||o.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function mf(i){return!(128&~i.flags)}const pp=new Map;let C2=0;const gf="__ngContext__";function Cd(i,o){ql(o)?(i[gf]=o[J0],function k2(i){pp.set(i[J0],i)}(o)):i[gf]=o}function Fp(i){return Vp(i[Kh])}function M2(i){return Vp(i[xd])}function Vp(i){for(;null!==i&&!fu(i);)i=i[xd];return i}let Qf;function Jf(i){Qf=i}const jp=new ws("",{providedIn:"root",factory:()=>p1}),p1="ng",hd=new ws(""),e2=new ws("",{providedIn:"platform",factory:()=>"unknown"}),vp=new ws("",{providedIn:"root",factory:()=>{var i;return(null===(i=function Lh(){if(void 0!==Qf)return Qf;if(typeof document<"u")return document;throw new gi(210,!1)}().body)||void 0===i||null===(i=i.querySelector("[ngCspNonce]"))||void 0===i?void 0:i.getAttribute("ngCspNonce"))||null}});let L2=()=>null;function y(i,o,c=!1){return L2(i,o,c)}const ur=new ws("",{providedIn:"root",factory:()=>!1});let No;function qr(i){var o;return(null===(o=function Xr(){if(void 0===No&&(No=null,ha.trustedTypes))try{No=ha.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return No}())||void 0===o?void 0:o.createScriptURL(i))||i}class ms{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${co})`}}function Hs(i){return i instanceof ms?i.changingThisBreaksApplicationSecurity:i}function j0(i,o){const c=function Cf(i){return i instanceof ms&&i.getTypeName()||null}(i);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see ${co})`)}return c===o}const xm=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Bs=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Bs||{});function Al(i){const o=M1();return o?o.sanitize(Bs.URL,i)||"":j0(i,"URL")?Hs(i):function u0(i){return(i=String(i)).match(xm)?i:"unsafe:"+i}(As(i))}function qa(i){const o=M1();if(o)return qr(o.sanitize(Bs.RESOURCE_URL,i)||"");if(j0(i,"ResourceURL"))return qr(Hs(i));throw new gi(904,!1)}function Gi(i,o,c){return function Ni(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?qa:Al}(o,c)(i)}function M1(){const i=Mo();return i&&i[Od].sanitizer}const Jm=/^>|^->|<!--|-->|--!>|<!-$/g,yv=/(<|>)/g,eg="\u200b$1\u200b";function d0(i){return i instanceof Function?i():i}var Tm=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Tm||{});let Mm;function Am(i,o){return Mm(i,o)}function H2(i,o,c,f,x){if(null!=f){let O,G=!1;fu(f)?O=f:ql(f)&&(G=!0,f=f[el]);const ee=hn(f);0===i&&null!==c?null==x?_(o,c,ee):B(o,c,ee,x||null,!0):1===i&&null!==c?B(o,c,ee,x||null,!0):2===i?function wr(i,o,c){const f=ce(i,o);f&&function D(i,o,c,f){i.removeChild(o,c,f)}(i,f,o,c)}(o,ee,G):3===i&&o.destroyNode(ee),null!=O&&function Us(i,o,c,f,x){const O=c[Jc];O!==hn(c)&&H2(o,i,f,O,x);for(let ee=Wl;ee<c.length;ee++){const pe=c[ee];Ur(pe[sr],pe,i,o,f,O)}}(o,i,O,c,x)}}function og(i,o){return i.createComment(function Em(i){return i.replace(Jm,o=>o.replace(yv,eg))}(o))}function kf(i,o,c){return i.createElement(o,c)}function Yp(i,o){var c;null===(c=o[Od].changeDetectionScheduler)||void 0===c||c.notify(8),Ur(i,o,o[$s],2,null,null)}function rg(i,o){const c=i[Qh],f=o[_l];(ql(f)||o[dc]!==f[_l][dc])&&(i[ps]|=vh.HasTransplantedViews),null===c?i[Qh]=[o]:c.push(o)}function l2(i,o){const c=i[Qh],f=c.indexOf(o);c.splice(f,1)}function Sf(i,o){if(i.length<=Wl)return;const c=Wl+o,f=i[c];if(f){const x=f[Ld];null!==x&&x!==i&&l2(x,f),o>0&&(i[c-1][xd]=f[xd]);const O=Gl(i,Wl+o);!function G2(i,o){Yp(i,o),o[el]=null,o[Wa]=null}(f[sr],f);const G=O[ih];null!==G&&G.detachView(O[sr]),f[_l]=null,f[xd]=null,f[ps]&=-129}return f}function Hd(i,o){if(!(256&o[ps])){const c=o[$s];c.destroyNode&&Ur(i,o,c,3,null,null),function a2(i){let o=i[Kh];if(!o)return sg(i[sr],i);for(;o;){let c=null;if(ql(o))c=o[Kh];else{const f=o[Wl];f&&(c=f)}if(!c){for(;o&&!o[xd]&&o!==i;)ql(o)&&sg(o[sr],o),o=o[_l];null===o&&(o=i),ql(o)&&sg(o[sr],o),c=o&&o[xd]}o=c}}(o)}}function sg(i,o){if(256&o[ps])return;const c=Y(null);try{o[ps]&=-129,o[ps]|=256,o[Vc]&&An(o[Vc]),function h0(i,o){let c;if(null!=i&&null!=(c=i.destroyHooks))for(let f=0;f<c.length;f+=2){const x=o[c[f]];if(!(x instanceof Dp)){const O=c[f+1];if(Array.isArray(O))for(let G=0;G<O.length;G+=2){const ee=x[O[G]],pe=O[G+1];Ne(4,ee,pe);try{pe.call(ee)}finally{Ne(5,ee,pe)}}else{Ne(4,x,O);try{O.call(x)}finally{Ne(5,x,O)}}}}}(i,o),function Mu(i,o){const c=i.cleanup,f=o[gh];if(null!==c)for(let O=0;O<c.length-1;O+=2)if("string"==typeof c[O]){const G=c[O+3];G>=0?f[G]():f[-G].unsubscribe(),O+=2}else c[O].call(f[c[O+1]]);null!==f&&(o[gh]=null);const x=o[Zh];if(null!==x){o[Zh]=null;for(let O=0;O<x.length;O++)(0,x[O])()}}(i,o),1===o[sr].type&&o[$s].destroy();const f=o[Ld];if(null!==f&&fu(o[_l])){f!==o[_l]&&l2(f,o);const x=o[ih];null!==x&&x.detachView(i)}!function ic(i){pp.delete(i[J0])}(o)}finally{Y(c)}}function Rm(i,o,c){return function zm(i,o,c){let f=o;for(;null!==f&&168&f.type;)f=(o=f).parent;if(null===f)return c[el];{const{componentOffset:x}=f;if(x>-1){const{encapsulation:O}=i.data[f.directiveStart+x];if(O===Sh.None||O===Sh.Emulated)return null}return Yi(f,c)}}(i,o.parent,c)}function B(i,o,c,f,x){i.insertBefore(o,c,f,x)}function _(i,o,c){i.appendChild(o,c)}function k(i,o,c,f,x){null!==f?B(i,o,c,f,x):_(i,o,c)}function ce(i,o){return i.parentNode(o)}function dt(i,o,c){return bn(i,o,c)}let fi,bn=function jt(i,o,c){return 40&i.type?Yi(i,c):null};function oo(i,o,c,f){const x=Rm(i,f,o),O=o[$s],ee=dt(f.parent||o[Wa],f,o);if(null!=x)if(Array.isArray(c))for(let pe=0;pe<c.length;pe++)k(O,x,c[pe],ee,!1);else k(O,x,c,ee,!1);void 0!==fi&&fi(O,f,o,c,x)}function ji(i,o){if(null!==o){const c=o.type;if(3&c)return Yi(o,i);if(4&c)return Do(-1,i[o.index]);if(8&c){const f=o.child;if(null!==f)return ji(i,f);{const x=i[o.index];return fu(x)?Do(-1,x):hn(x)}}if(32&c)return Am(o,i)()||hn(i[o.index]);{const f=Io(i,o);return null!==f?Array.isArray(f)?f[0]:ji(er(i[dc]),f):ji(i,o.next)}}return null}function Io(i,o){return null!==o?i[dc][Wa].projection[o.projection]:null}function Do(i,o){const c=Wl+i+1;if(c<o.length){const f=o[c],x=f[sr].firstChild;if(null!==x)return ji(f,x)}return o[Jc]}function ys(i,o,c,f,x,O,G){for(;null!=c;){if(128===c.type){c=c.next;continue}const ee=f[c.index],pe=c.type;if(G&&0===o&&(ee&&Cd(hn(ee),f),c.flags|=2),32&~c.flags)if(8&pe)ys(i,o,c.child,f,x,O,!1),H2(o,i,x,ee,O);else if(32&pe){const Be=Am(c,f);let Ze;for(;Ze=Be();)H2(o,i,x,Ze,O);H2(o,i,x,ee,O)}else 16&pe?Is(i,o,f,c,x,O):H2(o,i,x,ee,O);c=G?c.projectionNext:c.next}}function Ur(i,o,c,f,x,O){ys(c,f,i.firstChild,o,x,O,!1)}function Is(i,o,c,f,x,O){const G=c[dc],pe=G[Wa].projection[f.projection];if(Array.isArray(pe))for(let Be=0;Be<pe.length;Be++)H2(o,i,x,pe[Be],O);else{let Be=pe;const Ze=G[_l];mf(f)&&(Be.flags|=128),ys(i,o,Be,Ze,x,O,!0)}}function Dl(i,o,c){""===c?i.removeAttribute(o,"class"):i.setAttribute(o,"class",c)}function Zl(i,o,c){const{mergedAttrs:f,classes:x,styles:O}=c;null!==f&&tc(i,o,f),null!==x&&Dl(i,o,x),null!==O&&function Ec(i,o,c){i.setAttribute(o,"style",c)}(i,o,O)}const Es={};function Fu(i=1){nd(ua(),Mo(),gu()+i,!1)}function nd(i,o,c,f){if(!f)if(3&~o[ps]){const O=i.preOrderHooks;null!==O&&Mp(o,O,0,c)}else{const O=i.preOrderCheckHooks;null!==O&&Tp(o,O,c)}o1(c)}function Gd(i,o=Os.Default){const c=Mo();return null===c?Ee(i,o):lm(yl(),c,We(i),o)}function id(i,o,c,f,x,O){const G=Y(null);try{let ee=null;x&Yu.SignalBased&&(ee=o[f][qe]),null!==ee&&void 0!==ee.transformFn&&(O=ee.transformFn(O)),x&Yu.HasDecoratorInputTransform&&(O=i.inputTransforms[f].call(o,O)),null!==i.setInput?i.setInput(o,ee,O,c,f):ci(o,ee,f,O)}finally{Y(G)}}function Rc(i,o,c,f,x,O,G,ee,pe,Be,Ze){const Et=o.blueprint.slice();return Et[el]=x,Et[ps]=204|f,(null!==Be||i&&2048&i[ps])&&(Et[ps]|=2048),na(Et),Et[_l]=Et[pu]=i,Et[Ua]=c,Et[Od]=G||i&&i[Od],Et[$s]=ee||i&&i[$s],Et[Fl]=pe||i&&i[Fl]||null,Et[Wa]=O,Et[J0]=function qf(){return C2++}(),Et[pl]=Ze,Et[v1]=Be,Et[dc]=2==o.type?i[dc]:Et,Et}function $u(i,o,c,f,x){let O=i.data[o];if(null===O)O=function Cc(i,o,c,f,x){const O=ed(),G=kp(),pe=i.data[o]=function B4(i,o,c,f,x,O){let G=o?o.injectorIndex:-1,ee=0;return Ka()&&(ee|=128),{type:c,index:f,insertBeforeIndex:null,injectorIndex:G,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:ee,providerIndexes:0,value:x,attrs:O,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,G?O:O&&O.parent,c,o,f,x);return null===i.firstChild&&(i.firstChild=pe),null!==O&&(G?null==O.child&&null!==pe.parent&&(O.child=pe):null===O.next&&(O.next=pe,pe.prev=O)),pe}(i,o,c,f,x),function Sp(){return us.lFrame.inI18n}()&&(O.flags|=32);else if(64&O.type){O.type=c,O.value=f,O.attrs=x;const G=function Bu(){const i=us.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();O.injectorIndex=null===G?-1:G.injectorIndex}return nl(O,!0),O}function ju(i,o,c,f){if(0===c)return-1;const x=o.length;for(let O=0;O<c;O++)o.push(f),i.blueprint.push(f),i.data.push(null);return x}function c2(i,o,c,f,x){const O=gu(),G=2&f;try{o1(-1),G&&o.length>ns&&nd(i,o,ns,!1),Ne(G?2:0,x),c(f,x)}finally{o1(O),Ne(G?3:1,x)}}function Cl(i,o,c){if(Rh(o)){const f=Y(null);try{const O=o.directiveEnd;for(let G=o.directiveStart;G<O;G++){const ee=i.data[G];ee.contentQueries&&ee.contentQueries(1,c[G],G)}}finally{Y(f)}}}function bp(i,o,c){O0()&&(function X2(i,o,c,f){const x=c.directiveStart,O=c.directiveEnd;zh(c)&&function ag(i,o,c){const f=Yi(o,i),x=p0(c);let G=16;c.signals?G=4096:c.onPush&&(G=64);const ee=Af(i,Rc(i,x,null,G,f,o,null,i[Od].rendererFactory.createRenderer(f,c),null,null,null));i[o.index]=ee}(o,c,i.data[x+c.componentOffset]),i.firstCreatePass||sh(c,o),Cd(f,o);const G=c.initialInputs;for(let ee=x;ee<O;ee++){const pe=i.data[ee],Be=lp(o,i,ee,c);Cd(Be,o),null!==G&&K1(0,ee-x,Be,pe,0,G),v(pe)&&(is(c.index,o)[Ua]=lp(o,i,ee,c))}}(i,o,c,Yi(c,o)),!(64&~c.flags)&&u2(i,o,c))}function Tf(i,o,c=Yi){const f=o.localNames;if(null!==f){let x=o.index+1;for(let O=0;O<f.length;O+=2){const G=f[O+1],ee=-1===G?c(o,i):i[G];i[x++]=ee}}}function p0(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Vg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function Vg(i,o,c,f,x,O,G,ee,pe,Be,Ze){const Et=ns+f,Mn=Et+x,Hn=function Om(i,o){const c=[];for(let f=0;f<o;f++)c.push(f<i?null:Es);return c}(Et,Mn),jn="function"==typeof Be?Be():Be;return Hn[sr]={type:i,blueprint:Hn,template:c,queries:null,viewQuery:ee,declTNode:o,data:Hn.slice().fill(null,Et),bindingStartIndex:Et,expandoStartIndex:Mn,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof O?O():O,pipeRegistry:"function"==typeof G?G():G,firstChild:null,schemas:pe,consts:jn,incompleteFirstPass:!1,ssrId:Ze}}let $g=()=>null;function N4(i,o,c,f,x){for(let G in o){var O;if(!o.hasOwnProperty(G))continue;const ee=o[G];if(void 0===ee)continue;null!==(O=f)&&void 0!==O||(f={});let pe,Be=Yu.None;Array.isArray(ee)?(pe=ee[0],Be=ee[1]):pe=ee;let Ze=G;if(null!==x){if(!x.hasOwnProperty(G))continue;Ze=x[G]}0===i?F4(f,c,Ze,pe,Be):F4(f,c,Ze,pe)}return f}function F4(i,o,c,f,x){let O;i.hasOwnProperty(c)?(O=i[c]).push(o,f):O=i[c]=[o,f],void 0!==x&&O.push(x)}function Lm(i,o,c,f){if(O0()){const x=null===f?null:{"":-1},O=function f4(i,o){const c=i.directiveRegistry;let f=null,x=null;if(c)for(let G=0;G<c.length;G++){const ee=c[G];if(W0(o,ee.selectors,!1))if(f||(f=[]),v(ee))if(null!==ee.findHostDirectiveDefs){const pe=[];x=x||new Map,ee.findHostDirectiveDefs(ee,pe,x),f.unshift(...pe,ee),zc(i,o,pe.length)}else f.unshift(ee),zc(i,o,0);else{var O;x=x||new Map,null===(O=ee.findHostDirectiveDefs)||void 0===O||O.call(ee,ee,f,x),f.push(ee)}}return null===f?null:[f,x]}(i,c);let G,ee;null===O?G=ee=null:[G,ee]=O,null!==G&&X1(i,o,c,G,x,ee),x&&function kv(i,o,c){if(o){const f=i.localNames=[];for(let x=0;x<o.length;x+=2){const O=c[o[x+1]];if(null==O)throw new gi(-301,!1);f.push(o[x],O)}}}(c,f,x)}c.mergedAttrs=Hh(c.mergedAttrs,c.attrs)}function X1(i,o,c,f,x,O){for(let Et=0;Et<f.length;Et++)Vf(sh(c,o),i,f[Et].type);!function d2(i,o,c){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+c,i.providerIndexes=o}(c,i.data.length,f.length);for(let Et=0;Et<f.length;Et++){const Mn=f[Et];Mn.providersResolver&&Mn.providersResolver(Mn)}let G=!1,ee=!1,pe=ju(i,o,f.length,null);for(let Et=0;Et<f.length;Et++){const Mn=f[Et];c.mergedAttrs=Hh(c.mergedAttrs,Mn.hostAttrs),Sv(i,c,o,pe,Mn),s3(pe,Mn,x),null!==Mn.contentQueries&&(c.flags|=4),(null!==Mn.hostBindings||null!==Mn.hostAttrs||0!==Mn.hostVars)&&(c.flags|=64);const Hn=Mn.type.prototype;var Be,Ze;!G&&(Hn.ngOnChanges||Hn.ngOnInit||Hn.ngDoCheck)&&((null!==(Be=i.preOrderHooks)&&void 0!==Be?Be:i.preOrderHooks=[]).push(c.index),G=!0),ee||!Hn.ngOnChanges&&!Hn.ngDoCheck||((null!==(Ze=i.preOrderCheckHooks)&&void 0!==Ze?Ze:i.preOrderCheckHooks=[]).push(c.index),ee=!0),pe++}!function Qp(i,o,c){const x=o.directiveEnd,O=i.data,G=o.attrs,ee=[];let pe=null,Be=null;for(let Ze=o.directiveStart;Ze<x;Ze++){const Et=O[Ze],Mn=c?c.get(Et):null,jn=Mn?Mn.outputs:null;pe=N4(0,Et.inputs,Ze,pe,Mn?Mn.inputs:null),Be=N4(1,Et.outputs,Ze,Be,jn);const fo=null===pe||null===G||zd(o)?null:Ug(pe,Ze,G);ee.push(fo)}null!==pe&&(pe.hasOwnProperty("class")&&(o.flags|=8),pe.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=ee,o.inputs=pe,o.outputs=Be}(i,c,O)}function u2(i,o,c){const f=c.directiveStart,x=c.directiveEnd,O=c.index,G=function b1(){return us.lFrame.currentDirectiveIndex}();try{o1(O);for(let ee=f;ee<x;ee++){const pe=i.data[ee],Be=o[ee];n1(ee),(null!==pe.hostBindings||0!==pe.hostVars||null!==pe.hostAttrs)&&Cv(pe,Be)}}finally{o1(-1),n1(G)}}function Cv(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function zc(i,o,c){var f;o.componentOffset=c,(null!==(f=i.components)&&void 0!==f?f:i.components=[]).push(o.index)}function s3(i,o,c){if(c){if(o.exportAs)for(let f=0;f<o.exportAs.length;f++)c[o.exportAs[f]]=i;v(o)&&(c[""]=i)}}function Sv(i,o,c,f,x){i.data[f]=x;const O=x.factory||(x.factory=Ql(x.type)),G=new Dp(O,v(x),Gd);i.blueprint[f]=G,c[f]=G,function jg(i,o,c,f,x){const O=x.hostBindings;if(O){let G=i.hostBindingOpCodes;null===G&&(G=i.hostBindingOpCodes=[]);const ee=~o.index;(function $4(i){let o=i.length;for(;o>0;){const c=i[--o];if("number"==typeof c&&c<0)return c}return 0})(G)!=ee&&G.push(ee),G.push(c,f,O)}}(i,o,f,ju(i,c,x.hostVars,Es),x)}function f0(i,o,c,f,x,O){const G=Yi(i,o);!function K2(i,o,c,f,x,O,G){if(null==O)i.removeAttribute(o,x,c);else{const ee=null==G?As(O):G(O,f||"",x);i.setAttribute(o,x,ee,c)}}(o[$s],G,O,i.value,c,f,x)}function K1(i,o,c,f,x,O){const G=O[o];if(null!==G)for(let ee=0;ee<G.length;)id(f,c,G[ee++],G[ee++],G[ee++],G[ee++])}function Ug(i,o,c){let f=null,x=0;for(;x<c.length;){const O=c[x];if(0!==O)if(5!==O){if("number"==typeof O)break;if(i.hasOwnProperty(O)){null===f&&(f=[]);const G=i[O];for(let ee=0;ee<G.length;ee+=3)if(G[ee]===o){f.push(O,G[ee+1],G[ee+2],c[x+1]);break}}x+=2}else x+=2;else x+=4}return f}function Tv(i,o,c,f){return[i,!0,0,o,null,f,null,c,null,null]}function lg(i,o){const c=i.contentQueries;if(null!==c){const f=Y(null);try{for(let x=0;x<c.length;x+=2){const G=c[x+1];if(-1!==G){const ee=i.data[G];w1(c[x]),ee.contentQueries(2,o[G],G)}}}finally{Y(f)}}}function Af(i,o){return i[Kh]?i[Yh][xd]=o:i[Kh]=o,i[Yh]=o,o}function Y2(i,o,c){w1(0);const f=Y(null);try{o(i,c)}finally{Y(f)}}function m4(i){var o;return null!==(o=i[gh])&&void 0!==o?o:i[gh]=[]}function Bm(i){var o;return null!==(o=i.cleanup)&&void 0!==o?o:i.cleanup=[]}function cg(i,o){const c=i[Fl],f=c?c.get(wh,null):null;f&&f.handleError(o)}function Nm(i,o,c,f,x){for(let O=0;O<c.length;){const G=c[O++],ee=c[O++],pe=c[O++];id(i.data[G],o[G],f,ee,pe,x)}}function Jp(i,o,c){const f=Wn(o,i);!function Fg(i,o,c){i.setValue(o,c)}(i[$s],f,c)}function Av(i,o){const c=is(o,i),f=c[sr];!function g4(i,o){for(let c=o.length;c<i.blueprint.length;c++)o.push(i.blueprint[c])}(f,c);const x=c[el];null!==x&&null===c[pl]&&(c[pl]=y(x,c[Fl])),Hg(f,c,c[Ua])}function Hg(i,o,c){Vd(o);try{var f;const x=i.viewQuery;null!==x&&Y2(1,x,c);const O=i.template;null!==O&&c2(i,o,O,1,c),i.firstCreatePass&&(i.firstCreatePass=!1),null===(f=o[ih])||void 0===f||f.finishViewCreation(i),i.staticContentQueries&&lg(i,o),i.staticViewQueries&&Y2(2,i.viewQuery,c);const G=i.components;null!==G&&function Fm(i,o){for(let c=0;c<o.length;c++)Av(i,o[c])}(o,G)}catch(x){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),x}finally{o[ps]&=-5,o0()}}function ef(i,o,c,f){const x=Y(null);try{var O,G,ee;const pe=o.tView,Et=Rc(i,pe,c,4096&i[ps]?4096:16,null,o,null,null,null!==(O=null==f?void 0:f.injector)&&void 0!==O?O:null,null!==(G=null==f?void 0:f.embeddedViewInjector)&&void 0!==G?G:null,null!==(ee=null==f?void 0:f.dehydratedView)&&void 0!==ee?ee:null);Et[Ld]=i[o.index];const Hn=i[ih];return null!==Hn&&(Et[ih]=Hn.createEmbeddedView(pe)),Hg(pe,Et,c),Et}finally{Y(x)}}function Gg(i,o){const c=Wl+o;if(c<i.length)return i[c]}function wp(i,o){return!o||null===o.firstChild||mf(i)}function Uu(i,o,c,f=!0){const x=o[sr];if(function Pm(i,o,c,f){const x=Wl+f,O=c.length;f>0&&(c[x-1][xd]=o),f<O-Wl?(o[xd]=c[x],cc(c,Wl+f,o)):(c.push(o),o[xd]=null),o[_l]=c;const G=o[Ld];null!==G&&c!==G&&rg(G,o);const ee=o[ih];null!==ee&&ee.insertView(i),ll(o),o[ps]|=128}(x,o,i,c),f){const G=Do(c,i),ee=o[$s],pe=ce(ee,i[Jc]);null!==pe&&function Kp(i,o,c,f,x,O){f[el]=x,f[Wa]=o,Ur(i,f,c,1,x,O)}(x,i[Wa],ee,o,pe,G)}const O=o[pl];null!==O&&null!==O.firstChild&&(O.firstChild=null)}function ug(i,o){const c=Sf(i,o);return void 0!==c&&Hd(c[sr],c),c}function Z2(i,o,c,f,x=!1){for(;null!==c;){if(128===c.type){c=x?c.projectionNext:c.next;continue}const O=o[c.index];null!==O&&f.push(hn(O)),fu(O)&&Y1(O,f);const G=c.type;if(8&G)Z2(i,o,c.child,f);else if(32&G){const ee=Am(c,o);let pe;for(;pe=ee();)f.push(pe)}else if(16&G){const ee=Io(o,c);if(Array.isArray(ee))f.push(...ee);else{const pe=er(o[dc]);Z2(pe[sr],pe,ee,f,!0)}}c=x?c.projectionNext:c.next}return f}function Y1(i,o){for(let c=Wl;c<i.length;c++){const f=i[c],x=f[sr].firstChild;null!==x&&Z2(f[sr],f,x,o)}i[Jc]!==i[el]&&o.push(i[Jc])}let U4=[];const qg={...It,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{ia(i.lView)},consumerOnSignalRead(){this.lView[Vc]=this}},X={...It,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{let o=er(i.lView);for(;o&&!Le(o[sr]);)o=er(o);o&&js(o)},consumerOnSignalRead(){this.lView[Vc]=this}};function Le(i){return 2!==i.type}const ct=100;function sn(i,o=!0,c=0){const f=i[Od],x=f.rendererFactory;var G;null===(G=x.begin)||void 0===G||G.call(x);try{!function Ui(i,o){const c=sf();try{e0(!0),Wd(i,o);let f=0;for(;ya(i);){if(f===ct)throw new gi(103,!1);f++,Wd(i,1)}}finally{e0(c)}}(i,c)}catch(Be){throw o&&cg(i,Be),Be}finally{var ee,pe;null===(ee=x.end)||void 0===ee||ee.call(x),null===(pe=f.inlineEffectRunner)||void 0===pe||pe.flush()}}function Mr(i,o,c,f){var x;const O=o[ps];if(!(256&~O))return;null===(x=o[Od].inlineEffectRunner)||void 0===x||x.flush(),Vd(o);let pe=!0,Be=null,Ze=null;Le(i)?(Ze=function v4(i){var o;return null!==(o=i[Vc])&&void 0!==o?o:function U0(i){var o;const c=null!==(o=U4.pop())&&void 0!==o?o:Object.create(qg);return c.lView=i,c}(i)}(o),Be=on(Ze)):null===function ft(){return se}()?(pe=!1,Ze=function h2(i){var o;const c=null!==(o=i[Vc])&&void 0!==o?o:Object.create(X);return c.lView=i,c}(o),Be=on(Ze)):o[Vc]&&(An(o[Vc]),o[Vc]=null);try{na(o),function oh(i){return us.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==c&&c2(i,o,c,2,f);const Et=!(3&~O);if(Et){const jn=i.preOrderCheckHooks;null!==jn&&Tp(o,jn,null)}else{const jn=i.preOrderHooks;null!==jn&&Mp(o,jn,0,null),Lf(o,0)}if(function od(i){for(let o=Fp(i);null!==o;o=M2(o)){if(!(o[ps]&vh.HasTransplantedViews))continue;const c=o[Qh];for(let f=0;f<c.length;f++)js(c[f])}}(o),kl(o,0),null!==i.contentQueries&&lg(i,o),Et){const jn=i.contentCheckHooks;null!==jn&&Tp(o,jn)}else{const jn=i.contentHooks;null!==jn&&Mp(o,jn,1),Lf(o,1)}!function uh(i,o){const c=i.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const x=c[f];if(x<0)o1(~x);else{const O=x,G=c[++f],ee=c[++f];L0(G,O),ee(2,o[O])}}}finally{o1(-1)}}(i,o);const Mn=i.components;null!==Mn&&Q2(o,Mn,0);const Hn=i.viewQuery;if(null!==Hn&&Y2(2,Hn,f),Et){const jn=i.viewCheckHooks;null!==jn&&Tp(o,jn)}else{const jn=i.viewHooks;null!==jn&&Mp(o,jn,2),Lf(o,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Bd]){for(const jn of o[Bd])jn();o[Bd]=null}o[ps]&=-73}catch(Et){throw ia(o),Et}finally{null!==Ze&&(ht(Ze,Be),pe&&function Wg(i){i.lView[Vc]!==i&&(i.lView=null,U4.push(i))}(Ze)),o0()}}function kl(i,o){for(let c=Fp(i);null!==c;c=M2(c))for(let f=Wl;f<c.length;f++)rd(c[f],o)}function il(i,o,c){rd(is(o,i),c)}function rd(i,o){Ds(i)&&Wd(i,o)}function Wd(i,o){const f=i[sr],x=i[ps],O=i[Vc];let G=!!(0===o&&16&x);if(G||(G=!!(64&x&&0===o)),G||(G=!!(1024&x)),G||(G=!(null==O||!O.dirty||!Jn(O))),G||(G=!1),O&&(O.dirty=!1),i[ps]&=-9217,G)Mr(f,i,f.template,i[Ua]);else if(8192&x){kl(i,1);const ee=f.components;null!==ee&&Q2(i,ee,1)}}function Q2(i,o,c){for(let f=0;f<o.length;f++)il(i,o[f],c)}function Nh(i,o){var c;const f=sf()?64:1088;for(null===(c=i[Od].changeDetectionScheduler)||void 0===c||c.notify(o);i;){i[ps]|=f;const x=er(i);if(r(i)&&!x)return i;i=x}return null}class J2{get rootNodes(){const o=this._lView,c=o[sr];return Z2(c,o,c.firstChild,[])}constructor(o,c,f=!0){this._lView=o,this._cdRefInjectingView=c,this.notifyErrorHandler=f,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ua]}set context(o){this._lView[Ua]=o}get destroyed(){return!(256&~this._lView[ps])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[_l];if(fu(o)){const c=o[8],f=c?c.indexOf(this):-1;f>-1&&(Sf(o,f),Gl(c,f))}this._attachedToViewContainer=!1}Hd(this._lView[sr],this._lView)}onDestroy(o){ba(this._lView,o)}markForCheck(){Nh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ps]&=-129}reattach(){ll(this._lView),this._lView[ps]|=128}detectChanges(){this._lView[ps]|=1024,sn(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new gi(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const o=r(this._lView),c=this._lView[Ld];null!==c&&!o&&l2(c,this._lView),Yp(this._lView[sr],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new gi(902,!1);this._appRef=o;const c=r(this._lView),f=this._lView[Ld];null!==f&&!c&&rg(f,this._lView),ll(this._lView)}}let em=(()=>{class o{}return o.__NG_ELEMENT_ID__=v5,o})();const Dv=em,g5=class extends Dv{constructor(o,c,f){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=f}get ssrId(){var o;return(null===(o=this._declarationTContainer.tView)||void 0===o?void 0:o.ssrId)||null}createEmbeddedView(o,c){return this.createEmbeddedViewImpl(o,c)}createEmbeddedViewImpl(o,c,f){const x=ef(this._declarationLView,this._declarationTContainer,o,{embeddedViewInjector:c,dehydratedView:f});return new J2(x)}};function v5(){return Pv(yl(),Mo())}function Pv(i,o){return 4&i.type?new g5(o,i,zp(i,o)):null}let I3=()=>null;function Qg(i,o){return I3(i,o)}class E4{}const f2=new ws("",{providedIn:"root",factory:()=>!1}),C3=new ws("");class Z4{}class A6{}class F5{resolveComponentFactory(o){throw function k3(i){const o=Error(`No component factory found for ${gl(i)}.`);return o.ngComponent=i,o}(o)}}class J4{}J4.NULL=new F5;class Hv{}let Gv=(()=>{class o{constructor(){this.destroyNode=null}}return o.__NG_ELEMENT_ID__=()=>function ev(){const i=Mo(),c=is(yl().index,i);return(ql(c)?c:i)[$s]}(),o})(),D6=(()=>{var i;class o{}return(i=o).\u0275prov=Ca({token:i,providedIn:"root",factory:()=>null}),o})();const C4=new Set;function m0(i){var o,c;C4.has(i)||(C4.add(i),null===(o=performance)||void 0===o||null===(c=o.mark)||void 0===c||c.call(o,"mark_feature_usage",{detail:{feature:i}}))}function tv(i){let o=!0;return setTimeout(()=>{o&&(o=!1,i())}),"function"==typeof ha.requestAnimationFrame&&ha.requestAnimationFrame(()=>{o&&(o=!1,i())}),()=>{o=!1}}function nv(i){let o=!0;return queueMicrotask(()=>{o&&i()}),()=>{o=!1}}function Wv(...i){}class nu{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new td(!1),this.onMicrotaskEmpty=new td(!1),this.onStable=new td(!1),this.onError=new td(!1),typeof Zone>"u")throw new gi(908,!1);Zone.assertZonePatched();const x=this;x._nesting=0,x._outer=x._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(x._inner=x._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(x._inner=x._inner.fork(Zone.longStackTraceZoneSpec)),x.shouldCoalesceEventChangeDetection=!f&&c,x.shouldCoalesceRunChangeDetection=f,x.callbackScheduled=!1,function z6(i){const o=()=>{!function R6(i){i.isCheckStableRunning||i.callbackScheduled||(i.callbackScheduled=!0,Zone.root.run(()=>{tv(()=>{i.callbackScheduled=!1,k4(i),i.isCheckStableRunning=!0,fg(i),i.isCheckStableRunning=!1})}),k4(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,x,O,G,ee)=>{if(function M3(i){return iv(i,"__ignore_ng_zone__")}(ee))return c.invokeTask(x,O,G,ee);try{return O6(i),c.invokeTask(x,O,G,ee)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===O.type||i.shouldCoalesceRunChangeDetection)&&o(),S4(i)}},onInvoke:(c,f,x,O,G,ee,pe)=>{try{return O6(i),c.invoke(x,O,G,ee,pe)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!function V5(i){return iv(i,"__scheduler_tick__")}(ee)&&o(),S4(i)}},onHasTask:(c,f,x,O)=>{c.hasTask(x,O),f===x&&("microTask"==O.change?(i._hasPendingMicrotasks=O.microTask,k4(i),fg(i)):"macroTask"==O.change&&(i.hasPendingMacrotasks=O.macroTask))},onHandleError:(c,f,x,O)=>(c.handleError(x,O),i.runOutsideAngular(()=>i.onError.emit(O)),!1)})}(x)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nu.isInAngularZone())throw new gi(909,!1)}static assertNotInAngularZone(){if(nu.isInAngularZone())throw new gi(909,!1)}run(o,c,f){return this._inner.run(o,c,f)}runTask(o,c,f,x){const O=this._inner,G=O.scheduleEventTask("NgZoneEvent: "+x,o,T3,Wv,Wv);try{return O.runTask(G,c,f)}finally{O.cancelTask(G)}}runGuarded(o,c,f){return this._inner.runGuarded(o,c,f)}runOutsideAngular(o){return this._outer.run(o)}}const T3={};function fg(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function k4(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&!0===i.callbackScheduled)}function O6(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function S4(i){i._nesting--,fg(i)}class qv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new td,this.onMicrotaskEmpty=new td,this.onStable=new td,this.onError=new td}run(o,c,f){return o.apply(c,f)}runGuarded(o,c,f){return o.apply(c,f)}runOutsideAngular(o){return o()}runTask(o,c,f,x){return o.apply(c,f)}}function iv(i,o){var c;return!(!Array.isArray(i)||1!==i.length)&&!0===(null===(c=i[0])||void 0===c||null===(c=c.data)||void 0===c?void 0:c[o])}let Kv=(()=>{var i;class o{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var f;this.executeInternalCallbacks(),null===(f=this.handler)||void 0===f||f.execute()}executeInternalCallbacks(){const f=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const x of f)x()}ngOnDestroy(){var f;null===(f=this.handler)||void 0===f||f.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(i=o).\u0275prov=Ca({token:i,providedIn:"root",factory:()=>new i}),o})();function mg(i){return!!ge(i)}function rv(i,o,c){let f=c?i.styles:null,x=c?i.classes:null,O=0;if(null!==o)for(let G=0;G<o.length;G++){const ee=o[G];"number"==typeof ee?O=ee:1==O?x=hl(x,ee):2==O&&(f=hl(f,ee+": "+o[++G]+";"))}c?i.styles=f:i.stylesWithoutHost=f,c?i.classes=x:i.classesWithoutHost=x}class sv extends J4{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=Xi(o);return new av(c,this.ngModule)}}function A4(i,o){const c=[];for(const f in i){if(!i.hasOwnProperty(f))continue;const x=i[f];if(void 0===x)continue;const O=Array.isArray(x),G=O?x[0]:x;c.push(o?{propName:G,templateName:f,isSignal:!!((O?x[1]:Yu.None)&Yu.SignalBased)}:{propName:G,templateName:f})}return c}class av extends A6{get inputs(){const o=this.componentDef,c=o.inputTransforms,f=A4(o.inputs,!0);if(null!==c)for(const x of f)c.hasOwnProperty(x.propName)&&(x.transform=c[x.propName]);return f}get outputs(){return A4(this.componentDef.outputs,!1)}constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function _d(i){return i.map(cd).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}create(o,c,f,x){const O=Y(null);try{var ee;let pe=(x=x||this.ngModule)instanceof ud?x:null===(ee=x)||void 0===ee?void 0:ee.injector;pe&&null!==this.componentDef.getStandaloneInjector&&(pe=this.componentDef.getStandaloneInjector(pe)||pe);const Be=pe?new Pc(o,pe):o,Ze=Be.get(Hv,null);if(null===Ze)throw new gi(407,!1);const Et=Be.get(D6,null),jn={rendererFactory:Ze,sanitizer:Et,inlineEffectRunner:null,afterRenderEventManager:Be.get(Kv,null),changeDetectionScheduler:Be.get(E4,null)},fo=Ze.createRenderer(null,this.componentDef),tr=this.componentDef.selectors[0][0]||"div",fr=f?function W2(i,o,c,f){const O=f.get(ur,!1)||c===Sh.ShadowDom,G=i.selectRootElement(o,O);return function xv(i){$g(i)}(G),G}(fo,f,this.componentDef.encapsulation,Be):kf(fo,tr,function q5(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(tr));let Oo=512;this.componentDef.signals?Oo|=4096:this.componentDef.onPush||(Oo|=16);let Sa=null;null!==fr&&(Sa=y(fr,Be,!0));const ml=Vg(0,null,null,1,0,null,null,null,null,null,null),ou=Rc(null,ml,null,Oo,null,null,jn,fo,Be,null,Sa);let Ep,rf;Vd(ou);try{const Ig=this.componentDef;let o3,Q_=null;Ig.findHostDirectiveDefs?(o3=[],Q_=new Map,Ig.findHostDirectiveDefs(Ig,o3,Q_),o3.push(Ig)):o3=[Ig];const gk=function X5(i,o){const c=i[sr],f=ns;return i[f]=o,$u(c,f,2,"#host",null)}(ou,fr),vk=function F6(i,o,c,f,x,O,G){const ee=x[sr];!function R3(i,o,c,f){for(const x of i)o.mergedAttrs=Hh(o.mergedAttrs,x.hostAttrs);null!==o.mergedAttrs&&(rv(o,o.mergedAttrs,!0),null!==c&&Zl(f,c,o))}(f,i,o,G);let pe=null;null!==o&&(pe=y(o,x[Fl]));const Be=O.rendererFactory.createRenderer(o,c);let Ze=16;c.signals?Ze=4096:c.onPush&&(Ze=64);const Et=Rc(x,p0(c),null,Ze,x[i.index],i,O,Be,null,null,pe);return ee.firstCreatePass&&zc(ee,i,f.length-1),Af(x,Et),x[i.index]=Et}(gk,fr,Ig,o3,ou,jn,fo);rf=Sr(ml,ns),fr&&function V6(i,o,c,f){if(f)tc(i,c,["ng-version","18.1.1"]);else{const{attrs:x,classes:O}=function m1(i){const o=[],c=[];let f=1,x=2;for(;f<i.length;){let O=i[f];if("string"==typeof O)2===x?""!==O&&o.push(O,i[++f]):8===x&&c.push(O);else{if(!Yc(x))break;x=O}f++}return{attrs:o,classes:c}}(o.selectors[0]);x&&tc(i,c,x),O&&O.length>0&&Dl(i,c,O.join(" "))}}(fo,Ig,fr,f),void 0!==c&&function lv(i,o,c){const f=i.projection=[];for(let x=0;x<o.length;x++){const O=c[x];f.push(null!=O?Array.from(O):null)}}(rf,this.ngContentSelectors,c),Ep=function z3(i,o,c,f,x,O){const G=yl(),ee=x[sr],pe=Yi(G,x);X1(ee,x,G,c,null,f);for(let Ze=0;Ze<c.length;Ze++)Cd(lp(x,ee,G.directiveStart+Ze,G),x);u2(ee,x,G),pe&&Cd(pe,x);const Be=lp(x,ee,G.directiveStart+G.componentOffset,G);if(i[Ua]=x[Ua]=Be,null!==O)for(const Ze of O)Ze(Be,o);return Cl(ee,G,x),Be}(vk,Ig,o3,Q_,ou,[O3]),Hg(ml,ou,null)}finally{o0()}return new N6(this.componentType,Ep,zp(rf,ou),ou,rf)}finally{Y(O)}}}class N6 extends Z4{constructor(o,c,f,x,O){super(),this.location=f,this._rootLView=x,this._tNode=O,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new J2(x,void 0,!1),this.componentType=o}setInput(o,c){const f=this._tNode.inputs;let x;if(null!==f&&(x=f[o])){var O;if(null!==(O=this.previousInputValues)&&void 0!==O||(this.previousInputValues=new Map),this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),c))return;const G=this._rootLView;Nm(G[sr],G,x,o,c),this.previousInputValues.set(o,c),Nh(is(this._tNode.index,G),1)}}get injector(){return new xc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function O3(){const i=yl();op(Mo()[sr],i)}let cv=(()=>{class o{}return o.__NG_ELEMENT_ID__=t,o})();function t(){return m(yl(),Mo())}const e=cv,n=class extends e{constructor(o,c,f){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=f}get element(){return zp(this._hostTNode,this._hostLView)}get injector(){return new xc(this._hostTNode,this._hostLView)}get parentInjector(){const o=I1(this._hostTNode,this._hostLView);if(rh(o)){const c=ap(o,this._hostLView),f=a1(o);return new xc(c[sr].data[f+8],c)}return new xc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=s(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-Wl}createEmbeddedView(o,c,f){let x,O;"number"==typeof f?x=f:null!=f&&(x=f.index,O=f.injector);const G=Qg(this._lContainer,o.ssrId),ee=o.createEmbeddedViewImpl(c||{},O,G);return this.insertImpl(ee,x,wp(this._hostTNode,G)),ee}createComponent(o,c,f,x,O){var G,ee,pe;const Be=o&&!function fh(i){return"function"==typeof i}(o);let Ze;if(Be)Ze=c;else{const fr=c||{};Ze=fr.index,f=fr.injector,x=fr.projectableNodes,O=fr.environmentInjector||fr.ngModuleRef}const Et=Be?o:new av(Xi(o)),Mn=f||this.parentInjector;if(!O&&null==Et.ngModule){const Oo=(Be?Mn:this.parentInjector).get(ud,null);Oo&&(O=Oo)}const Hn=Xi(null!==(G=Et.componentType)&&void 0!==G?G:{}),jn=Qg(this._lContainer,null!==(ee=null==Hn?void 0:Hn.id)&&void 0!==ee?ee:null),fo=null!==(pe=null==jn?void 0:jn.firstChild)&&void 0!==pe?pe:null,tr=Et.create(Mn,x,fo,O);return this.insertImpl(tr.hostView,Ze,wp(this._hostTNode,jn)),tr}insert(o,c){return this.insertImpl(o,c,!0)}insertImpl(o,c,f){const x=o._lView;if(function os(i){return fu(i[_l])}(x)){const ee=this.indexOf(o);if(-1!==ee)this.detach(ee);else{const pe=x[_l],Be=new n(pe,pe[Wa],pe[_l]);Be.detach(Be.indexOf(o))}}const O=this._adjustIndex(c),G=this._lContainer;return Uu(G,x,O,f),o.attachToViewContainerRef(),cc(u(G),O,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=s(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),f=Sf(this._lContainer,c);f&&(Gl(u(this._lContainer),c),Hd(f[sr],f))}detach(o){const c=this._adjustIndex(o,-1),f=Sf(this._lContainer,c);return f&&null!=Gl(u(this._lContainer),c)?new J2(f):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function s(i){return i[8]}function u(i){return i[8]||(i[8]=[])}function m(i,o){let c;const f=o[i.index];return fu(f)?c=f:(c=Tv(f,o,null,i),o[i.index]=c,Af(o,c)),E(c,o,i,f),new n(c,i,o)}let E=function $(i,o,c,f){if(i[Jc])return;let x;x=8&c.type?hn(f):function g(i,o){const c=i[$s],f=c.createComment(""),x=Yi(o,i);return B(c,ce(c,x),f,function De(i,o){return i.nextSibling(o)}(c,x),!1),f}(o,c),i[Jc]=x},T=()=>!1;class de{constructor(o){this.queryList=o,this.matches=null}clone(){return new de(this.queryList)}setDirty(){this.queryList.setDirty()}}class be{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const f=null!==o.contentQueries?o.contentQueries[0]:c.length,x=[];for(let O=0;O<f;O++){const G=c.getByIndex(O);x.push(this.queries[G.indexInDeclarationView].clone())}return new be(x)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}finishViewCreation(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==zi(o,c).matches&&this.queries[c].setDirty()}}class xe{constructor(o,c,f=null){this.flags=c,this.read=f,this.predicate="string"==typeof o?function So(i){return i.split(",").map(o=>o.trim())}(o):o}}class $e{constructor(o=[]){this.queries=o}elementStart(o,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let f=0;f<this.length;f++){const x=null!==c?c.length:0,O=this.getByIndex(f).embeddedTView(o,x);O&&(O.indexInDeclarationView=f,null!==c?c.push(O):c=[O])}return null!==c?new $e(c):null}template(o,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class gt{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new gt(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1&~this.metadata.flags){const c=this._declarationNodeIndex;let f=o.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let x=0;x<f.length;x++){const O=f[x];this.matchTNodeWithReadOption(o,c,yt(c,O)),this.matchTNodeWithReadOption(o,c,$f(c,o,O,!1,!1))}else f===em?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,$f(c,o,f,!1,!1))}matchTNodeWithReadOption(o,c,f){if(null!==f){const x=this.metadata.read;if(null!==x)if(x===dp||x===cv||x===em&&4&c.type)this.addMatch(c.index,-2);else{const O=$f(c,o,x,!1,!1);null!==O&&this.addMatch(c.index,O)}else this.addMatch(c.index,f)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function yt(i,o){const c=i.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===o)return c[f+1];return null}function nn(i,o,c,f){return-1===c?function wt(i,o){return 11&i.type?zp(i,o):4&i.type?Pv(i,o):null}(o,i):-2===c?function Qt(i,o,c){return c===dp?zp(o,i):c===em?Pv(o,i):c===cv?m(o,i):void 0}(i,o,f):lp(i,i[sr],c,o)}function kn(i,o,c,f){const x=o[ih].queries[f];if(null===x.matches){const O=i.data,G=c.matches,ee=[];for(let pe=0;null!==G&&pe<G.length;pe+=2){const Be=G[pe];ee.push(Be<0?null:nn(o,O[Be],G[pe+1],c.metadata.read))}x.matches=ee}return x.matches}function Rn(i,o,c,f){const x=i.queries.getByIndex(c),O=x.matches;if(null!==O){const G=kn(i,o,x,c);for(let ee=0;ee<O.length;ee+=2){const pe=O[ee];if(pe>0)f.push(G[ee/2]);else{const Be=O[ee+1],Ze=o[-pe];for(let Et=Wl;Et<Ze.length;Et++){const Mn=Ze[Et];Mn[Ld]===Mn[_l]&&Rn(Mn[sr],Mn,Be,f)}if(null!==Ze[Qh]){const Et=Ze[Qh];for(let Mn=0;Mn<Et.length;Mn++){const Hn=Et[Mn];Rn(Hn[sr],Hn,Be,f)}}}}}return f}function Di(i,o,c){var f;const x=new Nu(!(4&~c));return function Zp(i,o,c,f){const x=m4(o);x.push(c),i.firstCreatePass&&Bm(i).push(f,x.length-1)}(i,o,x,x.destroy),(null!==(f=o[ih])&&void 0!==f?f:o[ih]=new be).queries.push(new de(x))-1}function qi(i,o,c){null===i.queries&&(i.queries=new $e),i.queries.track(new gt(o,c))}function zi(i,o){return i.queries.getByIndex(o)}function bo(i,o){const c=i[sr],f=zi(c,o);return f.crossesNgTemplate?Rn(c,i,o,[]):kn(c,i,f,o)}function To(i,o){m0("NgSignals");const c=function Ge(i){const o=Object.create(to);o.value=i;const c=()=>(C(o),o.value);return c[qe]=o,c}(i),f=c[qe];return null!=o&&o.equal&&(f.equal=o.equal),c.set=x=>Yn(f,x),c.update=x=>function cn(i,o){un()||Fn(),Yn(i,o(i.value))}(f,x),c.asReadonly=Fo.bind(c),c}function Fo(){const i=this[qe];if(void 0===i.readonlyFn){const o=()=>this();o[qe]=i,i.readonlyFn=o}return i.readonlyFn}function dv(i){let o=function _g(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),c=!0;const f=[i];for(;o;){let x;if(v(i))x=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new gi(903,!1);x=o.\u0275dir}if(x){if(c){f.push(x);const G=i;G.inputs=Rf(i.inputs),G.inputTransforms=Rf(i.inputTransforms),G.declaredInputs=Rf(i.declaredInputs),G.outputs=Rf(i.outputs);const ee=x.hostBindings;ee&&xp(i,ee);const pe=x.viewQuery,Be=x.contentQueries;if(pe&&V3(i,pe),Be&&K5(i,Be),N3(i,x),Va(i.outputs,x.outputs),v(x)&&x.data.animation){const Ze=i.data;Ze.animation=(Ze.animation||[]).concat(x.data.animation)}}const O=x.features;if(O)for(let G=0;G<O.length;G++){const ee=O[G];ee&&ee.ngInherit&&ee(i),ee===dv&&(c=!1)}}o=Object.getPrototypeOf(o)}!function F3(i){let o=0,c=null;for(let f=i.length-1;f>=0;f--){const x=i[f];x.hostVars=o+=x.hostVars,x.hostAttrs=Hh(x.hostAttrs,c=Hh(c,x.hostAttrs))}}(f)}function N3(i,o){for(const f in o.inputs){if(!o.inputs.hasOwnProperty(f)||i.inputs.hasOwnProperty(f))continue;const x=o.inputs[f];if(void 0!==x&&(i.inputs[f]=x,i.declaredInputs[f]=o.declaredInputs[f],null!==o.inputTransforms)){var c;const O=Array.isArray(x)?x[0]:x;if(!o.inputTransforms.hasOwnProperty(O))continue;null!==(c=i.inputTransforms)&&void 0!==c||(i.inputTransforms={}),i.inputTransforms[O]=o.inputTransforms[O]}}}function Rf(i){return i===Fc?{}:i===Ks?[]:i}function V3(i,o){const c=i.viewQuery;i.viewQuery=c?(f,x)=>{o(f,x),c(f,x)}:o}function K5(i,o){const c=i.contentQueries;i.contentQueries=c?(f,x,O)=>{o(f,x,O),c(f,x,O)}:o}function xp(i,o){const c=i.hostBindings;i.hostBindings=c?(f,x)=>{o(f,x),c(f,x)}:o}function L8(i){const o=i.inputConfig,c={};for(const f in o)if(o.hasOwnProperty(f)){const x=o[f];Array.isArray(x)&&x[3]&&(c[f]=x[3])}i.inputTransforms=c}class hv{}class B8{}function ey(i,o){return new Y5(i,null!=o?o:null,[])}class Y5 extends hv{constructor(o,c,f){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sv(this);const x=ge(o);this._bootstrapComponents=d0(x.bootstrap),this._r3Injector=pf(o,c,[{provide:hv,useValue:this},{provide:J4,useValue:this.componentFactoryResolver},...f],gl(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Z5 extends B8{constructor(o){super(),this.moduleType=o}create(o){return new Y5(this.moduleType,o,[])}}class N8 extends hv{constructor(o){super(),this.componentFactoryResolver=new sv(this),this.instance=null;const c=new Gh([...o.providers,{provide:hv,useValue:this},{provide:J4,useValue:this.componentFactoryResolver}],o.parent||M0(),o.debugName,new Set(["environment"]));this.injector=c,o.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Q5(i,o,c=null){return new N8({providers:i,parent:o,debugName:c,runEnvironmentInitializers:!0}).injector}function X6(i){return!!J5(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function J5(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function yg(i,o,c){return i[o]=c}function _0(i,o,c){return!Object.is(i[o],c)&&(i[o]=c,!0)}function pv(i,o,c,f){const x=_0(i,o,c);return _0(i,o+1,f)||x}function j3(i,o,c,f,x,O,G,ee,pe,Be){const Ze=c+ns,Et=o.firstCreatePass?function sy(i,o,c,f,x,O,G,ee,pe){const Be=o.consts,Ze=$u(o,i,4,G||null,ee||null);Lm(o,c,Ze,ea(Be,pe)),op(o,Ze);const Et=Ze.tView=Vg(2,Ze,f,x,O,o.directiveRegistry,o.pipeRegistry,null,o.schemas,Be,null);return null!==o.queries&&(o.queries.template(o,Ze),Et.queries=o.queries.embeddedTView(Ze)),Ze}(Ze,o,i,f,x,O,G,ee,pe):o.data[Ze];nl(Et,!1);const Mn=F8(o,i,Et,c);B0()&&oo(o,i,Mn,Et),Cd(Mn,i);const Hn=Tv(Mn,i,Mn,Et);return i[Ze]=Hn,Af(i,Hn),function z(i,o,c){return T(i,o,c)}(Hn,Et,i),z0(Et)&&bp(o,i,Et),null!=pe&&Tf(i,Et,Be),Et}function e8(i,o,c,f,x,O,G,ee){const pe=Mo(),Be=ua();return j3(pe,Be,i,o,c,f,x,ea(Be.consts,O),G,ee),e8}let F8=function V8(i,o,c,f){return yh(!0),o[$s].createComment("")};function n_(i,o,c,f){const x=Mo();return _0(x,mu(),o)&&(ua(),f0(pc(),x,i,o,c,f)),n_}function Q3(i,o,c,f,x,O){const ee=pv(i,function ku(){return us.lFrame.bindingIndex}(),c,x);return Il(2),ee?o+As(c)+f+As(x)+O:Es}function o8(i,o){return i<<17|o<<2}function gv(i){return i>>17&32767}function i_(i){return 2|i}function t3(i){return(131068&i)>>2}function o_(i,o){return-131069&i|o<<2}function r_(i){return 1|i}function Ly(i,o,c,f){const x=i[c+1],O=null===o;let G=f?gv(x):t3(x),ee=!1;for(;0!==G&&(!1===ee||O);){const Be=i[G+1];R7(i[G],o)&&(ee=!0,i[G+1]=f?r_(Be):i_(Be)),G=f?gv(Be):t3(Be)}ee&&(i[c+1]=f?i_(x):r_(x))}function R7(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&gd(i,o)>=0}function s_(i,o,c){const f=Mo();return _0(f,mu(),o)&&function A1(i,o,c,f,x,O,G,ee){const pe=Yi(o,c);let Ze,Be=o.inputs;!ee&&null!=Be&&(Ze=Be[f])?(Nm(i,c,Ze,f,x),zh(o)&&function Ev(i,o){const c=is(o,i);16&c[ps]||(c[ps]|=64)}(c,o.index)):3&o.type&&(f=function V4(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(f),x=null!=G?G(x,o.value||"",f):x,O.setProperty(pe,f,x))}(ua(),pc(),f,i,o,f[$s],c,!1),s_}function a_(i,o,c,f,x){const G=x?"class":"style";Nm(i,c,o.inputs[G],G,f)}function l_(i,o){return function bg(i,o,c,f){const x=Mo(),O=ua(),G=Il(2);O.firstUpdatePass&&function Gy(i,o,c,f){const x=i.data;if(null===x[c+1]){const O=x[gu()],G=function Hy(i,o){return o>=i.expandoStartIndex}(i,c);(function Ky(i,o){return!!(i.flags&(o?8:16))})(O,f)&&null===o&&!G&&(o=!1),o=function j7(i,o,c,f){const x=function yc(i){const o=us.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let O=f?o.residualClasses:o.residualStyles;if(null===x)0===(f?o.classBindings:o.styleBindings)&&(c=t5(c=c_(null,i,o,c,f),o.attrs,f),O=null);else{const G=o.directiveStylingLast;if(-1===G||i[G]!==x)if(c=c_(x,i,o,c,f),null===O){let pe=function U7(i,o,c){const f=c?o.classBindings:o.styleBindings;if(0!==t3(f))return i[gv(f)]}(i,o,f);void 0!==pe&&Array.isArray(pe)&&(pe=c_(null,i,o,pe[1],f),pe=t5(pe,o.attrs,f),function H7(i,o,c,f){i[gv(c?o.classBindings:o.styleBindings)]=f}(i,o,f,pe))}else O=function G7(i,o,c){let f;const x=o.directiveEnd;for(let O=1+o.directiveStylingLast;O<x;O++)f=t5(f,i[O].hostAttrs,c);return t5(f,o.attrs,c)}(i,o,f)}return void 0!==O&&(f?o.residualClasses=O:o.residualStyles=O),c}(x,O,o,f),function D7(i,o,c,f,x,O){let G=O?o.classBindings:o.styleBindings,ee=gv(G),pe=t3(G);i[f]=c;let Ze,Be=!1;if(Array.isArray(c)?(Ze=c[1],(null===Ze||gd(c,Ze)>0)&&(Be=!0)):Ze=c,x)if(0!==pe){const Mn=gv(i[ee+1]);i[f+1]=o8(Mn,ee),0!==Mn&&(i[Mn+1]=o_(i[Mn+1],f)),i[ee+1]=function M7(i,o){return 131071&i|o<<17}(i[ee+1],f)}else i[f+1]=o8(ee,0),0!==ee&&(i[ee+1]=o_(i[ee+1],f)),ee=f;else i[f+1]=o8(pe,0),0===ee?ee=f:i[pe+1]=o_(i[pe+1],f),pe=f;Be&&(i[f+1]=i_(i[f+1])),Ly(i,Ze,f,!0),Ly(i,Ze,f,!1),function P7(i,o,c,f,x){const O=x?i.residualClasses:i.residualStyles;null!=O&&"string"==typeof o&&gd(O,o)>=0&&(c[f+1]=r_(c[f+1]))}(o,Ze,i,f,O),G=o8(ee,pe),O?o.classBindings=G:o.styleBindings=G}(x,O,o,c,G,f)}}(O,i,G,f),o!==Es&&_0(x,G,o)&&function qy(i,o,c,f,x,O,G,ee){if(!(3&o.type))return;const pe=i.data,Be=pe[ee+1],Ze=function A7(i){return!(1&~i)}(Be)?Xy(pe,o,c,x,t3(Be),G):void 0;r8(Ze)||(r8(O)||function T7(i){return!(2&~i)}(Be)&&(O=Xy(pe,null,c,x,ee,G)),function fl(i,o,c,f,x){if(o)x?i.addClass(c,f):i.removeClass(c,f);else{let O=-1===f.indexOf("-")?void 0:Tm.DashCase;null==x?i.removeStyle(c,f,O):("string"==typeof x&&x.endsWith("!important")&&(x=x.slice(0,-10),O|=Tm.Important),i.setStyle(c,f,x,O))}}(f,G,Wn(gu(),c),x,O))}(O,O.data[gu()],x,x[$s],i,x[G+1]=function K7(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=gl(Hs(i)))),i}(o,c),f,G)}(i,o,null,!0),l_}function c_(i,o,c,f,x){let O=null;const G=c.directiveEnd;let ee=c.directiveStylingLast;for(-1===ee?ee=c.directiveStart:ee++;ee<G&&(O=o[ee],f=t5(f,O.hostAttrs,x),O!==i);)ee++;return null!==i&&(c.directiveStylingLast=ee),f}function t5(i,o,c){const f=c?1:2;let x=-1;if(null!==o)for(let O=0;O<o.length;O++){const G=o[O];"number"==typeof G?x=G:x===f&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ec(i,G,!!c||o[++O]))}return void 0===i?null:i}function Xy(i,o,c,f,x,O){const G=null===o;let ee;for(;x>0;){const pe=i[x],Be=Array.isArray(pe),Ze=Be?pe[1]:pe,Et=null===Ze;let Mn=c[x+1];Mn===Es&&(Mn=Et?Ks:void 0);let Hn=Et?Ku(Mn,f):Ze===f?Mn:void 0;if(Be&&!r8(Hn)&&(Hn=Ku(pe,f)),r8(Hn)&&(ee=Hn,G))return ee;const jn=i[x+1];x=G?gv(jn):t3(jn)}if(null!==o){let pe=O?o.residualClasses:o.residualStyles;null!=pe&&(ee=Ku(pe,f))}return ee}function r8(i){return void 0!==i}class s9{destroy(o){}updateValue(o,c){}swap(o,c){const f=Math.min(o,c),x=Math.max(o,c),O=this.detach(x);if(x-f>1){const G=this.detach(f);this.attach(f,O),this.attach(x,G)}else this.attach(f,O)}move(o,c){this.attach(c,this.detach(o))}}function u_(i,o,c,f,x){return i===c&&Object.is(o,f)?1:Object.is(x(i,o),x(c,f))?-1:0}function d_(i,o,c,f){return!(void 0===o||!o.has(f)||(i.attach(c,o.get(f)),o.delete(f),0))}function Yy(i,o,c,f,x){if(d_(i,o,f,c(f,x)))i.updateValue(f,x);else{const O=i.create(f,x);i.attach(f,O)}}function Zy(i,o,c,f){const x=new Set;for(let O=o;O<=c;O++)x.add(f(O,i.at(O)));return x}class Qy{constructor(){this.kvMap=new Map,this._vMap=void 0}has(o){return this.kvMap.has(o)}delete(o){if(!this.has(o))return!1;const c=this.kvMap.get(o);return void 0!==this._vMap&&this._vMap.has(c)?(this.kvMap.set(o,this._vMap.get(c)),this._vMap.delete(c)):this.kvMap.delete(o),!0}get(o){return this.kvMap.get(o)}set(o,c){if(this.kvMap.has(o)){let f=this.kvMap.get(o);void 0===this._vMap&&(this._vMap=new Map);const x=this._vMap;for(;x.has(f);)f=x.get(f);x.set(f,c)}else this.kvMap.set(o,c)}forEach(o){for(let[c,f]of this.kvMap)if(o(f,c),void 0!==this._vMap){const x=this._vMap;for(;x.has(f);)f=x.get(f),o(f,c)}}}function Jy(i,o){m0("NgControlFlow");const c=Mo(),f=mu(),x=c[f]!==Es?c[f]:-1,O=-1!==x?s8(c,ns+x):void 0;if(_0(c,f,i)){const ee=Y(null);try{if(void 0!==O&&ug(O,0),-1!==i){const pe=ns+i,Be=s8(c,pe),Ze=h_(c[sr],pe),Et=Qg(Be,Ze.tView.ssrId);Uu(Be,ef(c,Ze,o,{dehydratedView:Et}),0,wp(Ze,Et))}}finally{Y(ee)}}else if(void 0!==O){const ee=Gg(O,0);void 0!==ee&&(ee[Ua]=o)}}class l9{constructor(o,c,f){this.lContainer=o,this.$implicit=c,this.$index=f}get $count(){return this.lContainer.length-Wl}}function eb(i,o){return o}class u9{constructor(o,c,f){this.hasEmptyBlock=o,this.trackByFn=c,this.liveCollection=f}}function tb(i,o,c,f,x,O,G,ee,pe,Be,Ze,Et,Mn){m0("NgControlFlow");const Hn=Mo(),jn=ua(),fo=void 0!==pe,tr=Mo(),fr=ee?G.bind(tr[dc][Ua]):G,Oo=new u9(fo,fr);tr[ns+i]=Oo,j3(Hn,jn,i+1,o,c,f,x,ea(jn.consts,O)),fo&&j3(Hn,jn,i+2,pe,Be,Ze,Et,ea(jn.consts,Mn))}class d9 extends s9{constructor(o,c,f){super(),this.lContainer=o,this.hostLView=c,this.templateTNode=f,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Wl}at(o){return this.getLView(o)[Ua].$implicit}attach(o,c){const f=c[pl];this.needsIndexUpdate||(this.needsIndexUpdate=o!==this.length),Uu(this.lContainer,c,o,wp(this.templateTNode,f))}detach(o){return this.needsIndexUpdate||(this.needsIndexUpdate=o!==this.length-1),function h9(i,o){return Sf(i,o)}(this.lContainer,o)}create(o,c){var f;const x=Qg(this.lContainer,this.templateTNode.tView.ssrId),O=ef(this.hostLView,this.templateTNode,new l9(this.lContainer,c,o),{dehydratedView:x});return null===(f=this.operationsCounter)||void 0===f||f.recordCreate(),O}destroy(o){var c;Hd(o[sr],o),null===(c=this.operationsCounter)||void 0===c||c.recordDestroy()}updateValue(o,c){this.getLView(o)[Ua].$implicit=c}reset(){var o;this.needsIndexUpdate=!1,null===(o=this.operationsCounter)||void 0===o||o.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let o=0;o<this.length;o++)this.getLView(o)[Ua].$index=o}getLView(o){return function p9(i,o){return Gg(i,o)}(this.lContainer,o)}}function nb(i){const o=Y(null),c=gu();try{const x=Mo(),O=x[sr],G=x[c],ee=c+1,pe=s8(x,ee);if(void 0===G.liveCollection){const Ze=h_(O,ee);G.liveCollection=new d9(pe,x,Ze)}else G.liveCollection.reset();const Be=G.liveCollection;if(function a9(i,o,c){var f;let x,O,G=0,ee=i.length-1;if(Array.isArray(o)){let Hn=o.length-1;for(;G<=ee&&G<=Hn;){var Be,Ze;const jn=i.at(G),fo=o[G],tr=u_(G,jn,G,fo,c);if(0!==tr){tr<0&&i.updateValue(G,fo),G++;continue}const fr=i.at(ee),Oo=o[Hn],Sa=u_(ee,fr,Hn,Oo,c);if(0!==Sa){Sa<0&&i.updateValue(ee,Oo),ee--,Hn--;continue}const ml=c(G,jn),ou=c(ee,fr),Ep=c(G,fo);if(Object.is(Ep,ou)){const rf=c(Hn,Oo);Object.is(rf,ml)?(i.swap(G,ee),i.updateValue(ee,Oo),Hn--,ee--):i.move(ee,G),i.updateValue(G,fo),G++}else if(null!==(Be=x)&&void 0!==Be||(x=new Qy),null!==(Ze=O)&&void 0!==Ze||(O=Zy(i,G,ee,c)),d_(i,x,G,Ep))i.updateValue(G,fo),G++,ee++;else if(O.has(Ep))x.set(ml,i.detach(G)),ee--;else{const rf=i.create(G,o[G]);i.attach(G,rf),G++,ee++}}for(;G<=Hn;)Yy(i,x,c,G,o[G]),G++}else if(null!=o){const Hn=o[Symbol.iterator]();let jn=Hn.next();for(;!jn.done&&G<=ee;){const fo=i.at(G),tr=jn.value,fr=u_(G,fo,G,tr,c);if(0!==fr)fr<0&&i.updateValue(G,tr),G++,jn=Hn.next();else{var Et,Mn;null!==(Et=x)&&void 0!==Et||(x=new Qy),null!==(Mn=O)&&void 0!==Mn||(O=Zy(i,G,ee,c));const Oo=c(G,tr);if(d_(i,x,G,Oo))i.updateValue(G,tr),G++,ee++,jn=Hn.next();else if(O.has(Oo)){const Sa=c(G,fo);x.set(Sa,i.detach(G)),ee--}else i.attach(G,i.create(G,tr)),G++,ee++,jn=Hn.next()}}for(;!jn.done;)Yy(i,x,c,i.length,jn.value),jn=Hn.next()}for(;G<=ee;)i.destroy(i.detach(ee--));null===(f=x)||void 0===f||f.forEach(Hn=>{i.destroy(Hn)})}(Be,i,G.trackByFn),Be.updateIndexes(),G.hasEmptyBlock){const Ze=mu(),Et=0===Be.length;if(_0(x,Ze,Et)){const Mn=c+2,Hn=s8(x,Mn);if(Et){const jn=h_(O,Mn),fo=Qg(Hn,jn.tView.ssrId);Uu(Hn,ef(x,jn,void 0,{dehydratedView:fo}),0,wp(jn,fo))}else ug(Hn,0)}}}finally{Y(o)}}function s8(i,o){return i[o]}function h_(i,o){return Sr(i,o)}function a8(i,o,c,f){const x=Mo(),O=ua(),G=ns+i,ee=x[$s],pe=O.firstCreatePass?function f9(i,o,c,f,x,O){const G=o.consts,pe=$u(o,i,2,f,ea(G,x));return Lm(o,c,pe,ea(G,O)),null!==pe.attrs&&rv(pe,pe.attrs,!1),null!==pe.mergedAttrs&&rv(pe,pe.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,pe),pe}(G,O,x,o,c,f):O.data[G],Be=ib(O,x,pe,ee,o,i);x[G]=Be;const Ze=z0(pe);return nl(pe,!0),Zl(ee,Be,pe),!function Jv(i){return!(32&~i.flags)}(pe)&&B0()&&oo(O,x,Be,pe),0===function Iu(){return us.lFrame.elementDepthCount}()&&Cd(Be,x),function Lu(){us.lFrame.elementDepthCount++}(),Ze&&(bp(O,x,pe),Cl(O,pe,x)),null!==f&&Tf(x,pe),a8}function l8(){let i=yl();kp()?np():(i=i.parent,nl(i,!1));const o=i;(function e1(i){return us.skipHydrationRootTNode===i})(o)&&function y1(){us.skipHydrationRootTNode=null}(),function Oh(){us.lFrame.elementDepthCount--}();const c=ua();return c.firstCreatePass&&(op(c,i),Rh(i)&&c.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Um(i){return!!(8&i.flags)}(o)&&a_(c,o,Mo(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function cf(i){return!!(16&i.flags)}(o)&&a_(c,o,Mo(),o.stylesWithoutHost,!1),l8}function p_(i,o,c,f){return a8(i,o,c,f),l8(),p_}let ib=(i,o,c,f,x,O)=>(yh(!0),kf(f,x,function s1(){return us.lFrame.currentNamespace}()));function c8(i,o,c){const f=Mo(),x=ua(),O=i+ns,G=x.firstCreatePass?function v9(i,o,c,f,x){const O=o.consts,G=ea(O,f),ee=$u(o,i,8,"ng-container",G);return null!==G&&rv(ee,G,!0),Lm(o,c,ee,ea(O,x)),null!==o.queries&&o.queries.elementStart(o,ee),ee}(O,x,f,o,c):x.data[O];nl(G,!0);const ee=ob(x,f,G,i);return f[O]=ee,B0()&&oo(x,f,ee,G),Cd(ee,f),z0(G)&&(bp(x,f,G),Cl(x,G,f)),null!=c&&Tf(f,G),c8}function u8(){let i=yl();const o=ua();return kp()?np():(i=i.parent,nl(i,!1)),o.firstCreatePass&&(op(o,i),Rh(i)&&o.queries.elementEnd(i)),u8}function f_(i,o,c){return c8(i,o,c),u8(),f_}let ob=(i,o,c,f)=>(yh(!0),og(o[$s],""));function rb(){return Mo()}const n3=void 0;var w9=["en",[["a","p"],["AM","PM"],n3],[["AM","PM"],n3,n3],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],n3,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],n3,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",n3,"{1} 'at' {0}",n3],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function b9(i){const c=Math.floor(Math.abs(i)),f=i.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===f?1:5}];let s6={};function m_(i){const o=function x9(i){return i.toLowerCase().replace(/_/g,"-")}(i);let c=cb(o);if(c)return c;const f=o.split("-")[0];if(c=cb(f),c)return c;if("en"===f)return w9;throw new gi(701,!1)}function lb(i){return m_(i)[a6.PluralCase]}function cb(i){return i in s6||(s6[i]=ha.ng&&ha.ng.common&&ha.ng.common.locales&&ha.ng.common.locales[i]),s6[i]}var a6=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(a6||{});const l6="en-US";let ub=l6;let Mb=(i,o,c)=>{};function y_(i,o,c,f){const x=Mo(),O=ua(),G=yl();return function b_(i,o,c,f,x,O,G){const ee=z0(f),Be=i.firstCreatePass&&Bm(i),Ze=o[Ua],Et=m4(o);let Mn=!0;if(3&f.type||G){const fo=Yi(f,o),tr=G?G(fo):fo,fr=Et.length,Oo=G?ml=>G(hn(ml[f.index])):f.index;let Sa=null;if(!G&&ee&&(Sa=function cI(i,o,c,f){const x=i.cleanup;if(null!=x)for(let O=0;O<x.length-1;O+=2){const G=x[O];if(G===c&&x[O+1]===f){const ee=o[gh],pe=x[O+2];return ee.length>pe?ee[pe]:null}"string"==typeof G&&(O+=2)}return null}(i,o,x,f.index)),null!==Sa)(Sa.__ngLastListenerFn__||Sa).__ngNextListenerFn__=O,Sa.__ngLastListenerFn__=O,Mn=!1;else{O=Pb(f,o,Ze,O),Mb(fo,x,O);const ml=c.listen(tr,x,O);Et.push(O,ml),Be&&Be.push(x,Oo,fr,fr+1)}}else O=Pb(f,o,Ze,O);const Hn=f.outputs;let jn;if(Mn&&null!==Hn&&(jn=Hn[x])){const fo=jn.length;if(fo)for(let tr=0;tr<fo;tr+=2){const ou=o[jn[tr]][jn[tr+1]].subscribe(O),Ep=Et.length;Et.push(O,ou),Be&&Be.push(x,f.index,Ep,-(Ep+1))}}}(O,x,x[$s],G,i,o,f),y_}function Db(i,o,c,f){const x=Y(null);try{return Ne(6,o,c),!1!==c(f)}catch(O){return cg(i,O),!1}finally{Ne(7,o,c),Y(x)}}function Pb(i,o,c,f){return function x(O){if(O===Function)return f;Nh(i.componentOffset>-1?is(i.index,o):o,5);let ee=Db(o,c,f,O),pe=x.__ngNextListenerFn__;for(;pe;)ee=Db(o,c,pe,O)&&ee,pe=pe.__ngNextListenerFn__;return ee}}function Rb(i=1){return function eu(i){return(us.lFrame.contextLView=function fs(i,o){for(;i>0;)o=o[pu],i--;return o}(i,us.lFrame.contextLView))[Ua]}(i)}function uI(i,o){let c=null;const f=function C0(i){const o=i.attrs;if(null!=o){const c=o.indexOf(5);if(!(1&c))return o[c+1]}return null}(i);for(let x=0;x<o.length;x++){const O=o[x];if("*"!==O){if(null===f?W0(i,O,!0):q0(f,O))return x}else c=x}return c}function zb(i){const o=Mo()[dc][Wa];if(!o.projection){const f=o.projection=function Sl(i,o){const c=[];for(let f=0;f<i;f++)c.push(o);return c}(i?i.length:1,null),x=f.slice();let O=o.child;for(;null!==O;){if(128!==O.type){const G=i?uI(O,i):0;null!==G&&(x[G]?x[G].projectionNext=O:f[G]=O,x[G]=O)}O=O.next}}}function Ob(i,o=0,c,f,x,O){const G=Mo(),ee=ua(),pe=f?i+1:null;null!==pe&&j3(G,ee,pe,f,x,O,null,c);const Be=$u(ee,ns+i,16,null,c||null);null===Be.projection&&(Be.projection=o),np();const Et=!G[pl]||Ka();null===G[dc][Wa].projection[Be.projection]&&null!==pe?function dI(i,o,c){const f=ns+c,x=o.data[f],O=i[f],G=Qg(O,x.tView.ssrId);Uu(O,ef(i,x,void 0,{dehydratedView:G}),0,wp(x,G))}(G,ee,pe):Et&&32&~Be.flags&&function xs(i,o,c){Is(o[$s],0,o,c,Rm(i,c,o),dt(c.parent||o[Wa],c,o))}(ee,G,Be)}function Gb(i,o,c,f){!function Ji(i,o,c,f){const x=ua();if(x.firstCreatePass){const O=yl();qi(x,new xe(o,c,f),O.index),function wo(i,o){const c=i.contentQueries||(i.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(i.queries.length-1,o)}(x,i),!(2&~c)&&(x.staticContentQueries=!0)}return Di(x,Mo(),c)}(i,o,c,f)}function Wb(i,o,c){!function xi(i,o,c){const f=ua();return f.firstCreatePass&&(qi(f,new xe(i,o,c),-1),!(2&~o)&&(f.staticViewQueries=!0)),Di(f,Mo(),o)}(i,o,c)}function qb(i){const o=Mo(),c=ua(),f=t0();w1(f+1);const x=zi(c,f);if(i.dirty&&function tl(i){return!(4&~i[ps])}(o)===!(2&~x.metadata.flags)){if(null===x.matches)i.reset([]);else{const O=bo(o,f);i.reset(O,Wf),i.notifyOnChanges()}return!0}return!1}function Xb(){return function li(i,o){return i[ih].queries[o].queryList}(Mo(),t0())}function Kb(i){return $r(function cl(){return us.lFrame.contextLView}(),ns+i)}function rw(i,o=""){const c=Mo(),f=ua(),x=i+ns,O=f.firstCreatePass?$u(f,x,1,o,null):f.data[x],G=sw(f,c,O,o,i);c[x]=G,B0()&&oo(f,c,G,O),nl(O,!1)}let sw=(i,o,c,f,x)=>(yh(!0),function Dm(i,o){return i.createText(o)}(o[$s],f));function I_(i){return f8("",i,""),I_}function f8(i,o,c){const f=Mo(),x=function Z3(i,o,c,f){return _0(i,mu(),c)?o+As(c)+f:Es}(f,i,o,c);return x!==Es&&Jp(f,gu(),x),f8}function E_(i,o,c,f,x){const O=Mo(),G=Q3(O,i,o,c,f,x);return G!==Es&&Jp(O,gu(),G),E_}function C_(i,o,c,f,x){if(i=We(i),Array.isArray(i))for(let O=0;O<i.length;O++)C_(i[O],o,c,f,x);else{const O=ua(),G=Mo(),ee=yl();let pe=Ou(i)?i:We(i.provide);const Be=A0(i),Ze=1048575&ee.providerIndexes,Et=ee.directiveStart,Mn=ee.providerIndexes>>20;if(Ou(i)||!i.multi){const Hn=new Dp(Be,x,Gd),jn=S_(pe,o,x?Ze:Ze+Mn,Et);-1===jn?(Vf(sh(ee,G),O,pe),k_(O,i,o.length),o.push(pe),ee.directiveStart++,ee.directiveEnd++,x&&(ee.providerIndexes+=1048576),c.push(Hn),G.push(Hn)):(c[jn]=Hn,G[jn]=Hn)}else{const Hn=S_(pe,o,Ze+Mn,Et),jn=S_(pe,o,Ze,Ze+Mn),tr=jn>=0&&c[jn];if(x&&!tr||!x&&!(Hn>=0&&c[Hn])){Vf(sh(ee,G),O,pe);const fr=function PI(i,o,c,f,x){const O=new Dp(i,c,Gd);return O.multi=[],O.index=o,O.componentProviders=0,_w(O,x,f&&!c),O}(x?DI:AI,c.length,x,f,Be);!x&&tr&&(c[jn].providerFactory=fr),k_(O,i,o.length,0),o.push(pe),ee.directiveStart++,ee.directiveEnd++,x&&(ee.providerIndexes+=1048576),c.push(fr),G.push(fr)}else k_(O,i,Hn>-1?Hn:jn,_w(c[x?jn:Hn],Be,!x&&f));!x&&f&&tr&&c[jn].componentProviders++}}}function k_(i,o,c,f){const x=Ou(o),O=function T0(i){return!!i.useClass}(o);if(x||O){const pe=(O?We(o.useClass):o).prototype.ngOnDestroy;if(pe){const Be=i.destroyHooks||(i.destroyHooks=[]);if(!x&&o.multi){const Ze=Be.indexOf(c);-1===Ze?Be.push(c,[f,pe]):Be[Ze+1].push(f,pe)}else Be.push(c,pe)}}}function _w(i,o,c){return c&&i.componentProviders++,i.multi.push(o)-1}function S_(i,o,c,f){for(let x=c;x<f;x++)if(o[x]===i)return x;return-1}function AI(i,o,c,f){return T_(this.multi,[])}function DI(i,o,c,f){const x=this.multi;let O;if(this.providerFactory){const G=this.providerFactory.componentProviders,ee=lp(c,c[sr],this.providerFactory.index,f);O=ee.slice(0,G),T_(x,O);for(let pe=G;pe<ee.length;pe++)O.push(ee[pe])}else O=[],T_(x,O);return O}function T_(i,o){for(let c=0;c<i.length;c++)o.push((0,i[c])());return o}function yw(i,o=[]){return c=>{c.providersResolver=(f,x)=>function MI(i,o,c){const f=ua();if(f.firstCreatePass){const x=v(i);C_(c,f.data,f.blueprint,x,!0),C_(o,f.data,f.blueprint,x,!1)}}(f,x?x(i):i,o)}}let RI=(()=>{var i;class o{constructor(f){this._injector=f,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(f){if(!f.standalone)return null;if(!this.cachedInjectors.has(f)){const x=Ns(0,f.type),O=x.length>0?Q5([x],this._injector,`Standalone[${f.type.name}]`):null;this.cachedInjectors.set(f,O)}return this.cachedInjectors.get(f)}ngOnDestroy(){try{for(const f of this.cachedInjectors.values())null!==f&&f.destroy()}finally{this.cachedInjectors.clear()}}}return(i=o).\u0275prov=Ca({token:i,providedIn:"environment",factory:()=>new i(Ee(ud))}),o})();function bw(i){m0("NgStandalone"),i.getStandaloneInjector=o=>o.get(RI).getOrCreateStandaloneInjector(i)}function Iw(i,o,c){const f=Cu()+i,x=Mo();return x[f]===Es?yg(x,f,c?o.call(c):o()):function $3(i,o){return i[o]}(x,f)}function Ew(i,o,c,f){return function Cw(i,o,c,f,x,O){const G=o+c;return _0(i,G,x)?yg(i,G+1,O?f.call(O,x):f(x)):a5(i,G+1)}(Mo(),Cu(),i,o,c,f)}function a5(i,o){const c=i[o];return c===Es?void 0:c}function Aw(i,o){const c=ua();let f;const x=i+ns;var O;c.firstCreatePass?(f=function GI(i,o){if(o)for(let c=o.length-1;c>=0;c--){const f=o[c];if(i===f.name)return f}}(o,c.pipeRegistry),c.data[x]=f,f.onDestroy&&(null!==(O=c.destroyHooks)&&void 0!==O?O:c.destroyHooks=[]).push(x,f.onDestroy)):f=c.data[x];const G=f.factory||(f.factory=Ql(f.type)),pe=Hl(Gd);try{const Be=uf(!1),Ze=G();return uf(Be),function x_(i,o,c,f){c>=i.data.length&&(i.data[c]=null,i.blueprint[c]=null),o[c]=f}(c,Mo(),x,Ze),Ze}finally{Hl(pe)}}function Dw(i,o,c,f){const x=i+ns,O=Mo(),G=$r(O,x);return function l5(i,o){return i[sr].data[o].pure}(O,x)?function kw(i,o,c,f,x,O,G){const ee=o+c;return pv(i,ee,x,O)?yg(i,ee+2,G?f.call(G,x,O):f(x,O)):a5(i,ee+2)}(O,Cu(),o,G.transform,c,f,G):G.transform(c,f)}class qw{constructor(o){this.full=o;const c=o.split(".");this.major=c[0],this.minor=c[1],this.patch=c.slice(2).join(".")}}const _E=new qw("18.1.1");let Xw=(()=>{var i;class o{log(f){console.log(f)}warn(f){console.warn(f)}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=Ca({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();const Qw=new ws(""),Jw=new ws("");let O_,HE=(()=>{var i;class o{constructor(f,x,O){this._ngZone=f,this.registry=x,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,O_||(function GE(i){O_=i}(O),O.addToWindow(x)),this._watchAngularEvents(),f.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nu.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let f=this._callbacks.pop();clearTimeout(f.timeoutId),f.doneCb()}});else{let f=this.getPendingTasks();this._callbacks=this._callbacks.filter(x=>!x.updateCb||!x.updateCb(f)||(clearTimeout(x.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(f=>({source:f.source,creationLocation:f.creationLocation,data:f.data})):[]}addCallback(f,x,O){let G=-1;x&&x>0&&(G=setTimeout(()=>{this._callbacks=this._callbacks.filter(ee=>ee.timeoutId!==G),f()},x)),this._callbacks.push({doneCb:f,timeoutId:G,updateCb:O})}whenStable(f,x,O){if(O&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(f,x,O),this._runCallbacksIfReady()}registerApplication(f){this.registry.registerApplication(f,this)}unregisterApplication(f){this.registry.unregisterApplication(f)}findProviders(f,x,O){return[]}}return(i=o).\u0275fac=function(f){return new(f||i)(Ee(nu),Ee(ex),Ee(Jw))},i.\u0275prov=Ca({token:i,factory:i.\u0275fac}),o})(),ex=(()=>{var i;class o{constructor(){this._applications=new Map}registerApplication(f,x){this._applications.set(f,x)}unregisterApplication(f){this._applications.delete(f)}unregisterAllApplications(){this._applications.clear()}getTestability(f){return this._applications.get(f)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(f,x=!0){var O,G;return null!==(O=null===(G=O_)||void 0===G?void 0:G.findTestabilityInTree(this,f,x))&&void 0!==O?O:null}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=Ca({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();function L_(i){return!!i&&"function"==typeof i.then}function tx(i){return!!i&&"function"==typeof i.subscribe}const nx=new ws("");let B_=(()=>{var i;class o{constructor(){var f;this.initialized=!1,this.done=!1,this.donePromise=new Promise((x,O)=>{this.resolve=x,this.reject=O}),this.appInits=null!==(f=Ce(nx,{optional:!0}))&&void 0!==f?f:[]}runInitializers(){if(this.initialized)return;const f=[];for(const O of this.appInits){const G=O();if(L_(G))f.push(G);else if(tx(G)){const ee=new Promise((pe,Be)=>{G.subscribe({complete:pe,error:Be})});f.push(ee)}}const x=()=>{this.done=!0,this.resolve()};Promise.all(f).then(()=>{x()}).catch(O=>{this.reject(O)}),0===f.length&&x(),this.initialized=!0}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=Ca({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const y8=new ws("");let xg=(()=>{var i;class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ce(dd),this.afterRenderEffectManager=Ce(Kv),this.zonelessEnabled=Ce(f2),this.externalTestViews=new Set,this.beforeRender=new br.B,this.afterTick=new br.B,this.componentTypes=[],this.components=[],this.isStable=Ce(xa).hasPendingTasks.pipe((0,Li.T)(f=>!f)),this._injector=Ce(ud)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(f,x){const O=f instanceof A6;if(!this._injector.get(B_).done)throw!O&&Se(f),new gi(405,!1);let ee;ee=O?f:this._injector.get(J4).resolveComponentFactory(f),this.componentTypes.push(ee.componentType);const pe=function WE(i){return i.isBoundToModule}(ee)?void 0:this._injector.get(hv),Ze=ee.create(Xl.NULL,[],x||ee.selector,pe),Et=Ze.location.nativeElement,Mn=Ze.injector.get(Qw,null);return null==Mn||Mn.registerApplication(Et),Ze.onDestroy(()=>{this.detachView(Ze.hostView),b8(this.components,Ze),null==Mn||Mn.unregisterApplication(Et)}),this._loadComponent(Ze),Ze}tick(){this._tick(!0)}_tick(f){if(this._runningTick)throw new gi(101,!1);const x=Y(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(f)}catch(O){this.internalErrorHandler(O)}finally{this._runningTick=!1,Y(x),this.afterTick.next()}}detectChangesInAttachedViews(f){let x=null;this._injector.destroyed||(x=this._injector.get(Hv,null,{optional:!0}));let O=0;const G=this.afterRenderEffectManager;for(;O<10;){const Hn=0===O;if(f||!Hn){this.beforeRender.next(Hn);for(let{_lView:jn,notifyErrorHandler:fo}of this._views)XE(jn,fo,Hn,this.zonelessEnabled)}else{var ee,pe,Be,Ze,Et,Mn;null===(ee=x)||void 0===ee||null===(pe=(Be=ee).begin)||void 0===pe||pe.call(Be),null===(Ze=x)||void 0===Ze||null===(Et=(Mn=Ze).end)||void 0===Et||Et.call(Mn)}if(O++,G.executeInternalCallbacks(),!this.allViews.some(({_lView:jn})=>ya(jn))&&(G.execute(),!this.allViews.some(({_lView:jn})=>ya(jn))))break}}attachView(f){const x=f;this._views.push(x),x.attachToAppRef(this)}detachView(f){const x=f;b8(this._views,x),x.detachFromAppRef()}_loadComponent(f){this.attachView(f.hostView),this.tick(),this.components.push(f);const x=this._injector.get(y8,[]);[...this._bootstrapListeners,...x].forEach(O=>O(f))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(f=>f()),this._views.slice().forEach(f=>f.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(f){return this._destroyListeners.push(f),()=>b8(this._destroyListeners,f)}destroy(){if(this._destroyed)throw new gi(406,!1);const f=this._injector;f.destroy&&!f.destroyed&&f.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=Ca({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function b8(i,o){const c=i.indexOf(o);c>-1&&i.splice(c,1)}function XE(i,o,c,f){(c||ya(i))&&sn(i,o,c&&!f?0:1)}class KE{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let YE=(()=>{var i;class o{compileModuleSync(f){return new Z5(f)}compileModuleAsync(f){return Promise.resolve(this.compileModuleSync(f))}compileModuleAndAllComponentsSync(f){const x=this.compileModuleSync(f),G=d0(ge(f).declarations).reduce((ee,pe)=>{const Be=Xi(pe);return Be&&ee.push(new av(Be)),ee},[]);return new KE(x,G)}compileModuleAndAllComponentsAsync(f){return Promise.resolve(this.compileModuleAndAllComponentsSync(f))}clearCache(){}clearCacheFor(f){}getModuleId(f){}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=Ca({token:i,factory:i.\u0275fac,providedIn:"root"}),o})(),JE=(()=>{var i;class o{constructor(){this.zone=Ce(nu),this.changeDetectionScheduler=Ce(E4),this.applicationRef=Ce(xg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var f;null===(f=this._onMicrotaskEmptySubscription)||void 0===f||f.unsubscribe()}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=Ca({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function N_({ngZoneFactory:i,ignoreChangesOutsideZone:o}){var c;return null!==(c=i)&&void 0!==c||(i=()=>new nu(function F_(i){var o,c;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(o=null==i?void 0:i.eventCoalescing)&&void 0!==o&&o,shouldCoalesceRunChangeDetection:null!==(c=null==i?void 0:i.runCoalescing)&&void 0!==c&&c}}())),[{provide:nu,useFactory:i},{provide:Ru,multi:!0,useFactory:()=>{const f=Ce(JE,{optional:!0});return()=>f.initialize()}},{provide:Ru,multi:!0,useFactory:()=>{const f=Ce(nC);return()=>{f.initialize()}}},{provide:dd,useFactory:tC},!0===o?{provide:C3,useValue:!0}:[]]}function tC(){const i=Ce(nu),o=Ce(wh);return c=>i.runOutsideAngular(()=>o.handleError(c))}let nC=(()=>{var i;class o{constructor(){this.subscription=new Jr.yU,this.initialized=!1,this.zone=Ce(nu),this.pendingTasks=Ce(xa)}initialize(){if(this.initialized)return;this.initialized=!0;let f=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(f=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nu.assertNotInAngularZone(),queueMicrotask(()=>{null!==f&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(f),f=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var x;nu.assertInAngularZone(),null!==(x=f)&&void 0!==x||(f=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=Ca({token:i,factory:i.\u0275fac,providedIn:"root"}),o})(),h5=(()=>{var i;class o{constructor(){var f;this.appRef=Ce(xg),this.taskService=Ce(xa),this.ngZone=Ce(nu),this.zonelessEnabled=Ce(f2),this.disableScheduling=null!==(f=Ce(C3,{optional:!0}))&&void 0!==f&&f,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Jr.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||(this.disableScheduling=!this.zonelessEnabled&&(this.ngZone instanceof qv||!this.zoneIsDefined))}notify(f){if(!this.zonelessEnabled&&5===f)return;switch(f){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const x=this.useMicrotaskScheduler?nv:tv;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=x(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=x(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&nu.isInAngularZone())}tick(f){if(this.runningTick||this.appRef.destroyed)return;const x=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(f)},void 0,this.schedulerTickApplyArgs)}catch(O){throw this.taskService.remove(x),O}finally{this.cleanup()}this.useMicrotaskScheduler=!0,nv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(x)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){var f;if(this.shouldRefreshViews=!1,this.runningTick=!1,null===(f=this.cancelScheduledCallback)||void 0===f||f.call(this),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const x=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(x)}}}return(i=o).\u0275fac=function(f){return new(f||i)},i.\u0275prov=Ca({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const w8=new ws("",{providedIn:"root",factory:()=>Ce(w8,Os.Optional|Os.SkipSelf)||function iC(){return typeof $localize<"u"&&$localize.locale||l6}()}),oC=new ws("",{providedIn:"root",factory:()=>"USD"}),$_=new ws("");let vv=null;function cC(){return!1}function uC(){}let mx=(()=>{class o{}return o.__NG_ELEMENT_ID__=dC,o})();function dC(i){return function hC(i,o,c){if(zh(i)&&!c){const f=is(i.index,o);return new J2(f,f)}return 175&i.type?new J2(o[dc],o):null}(yl(),Mo(),!(16&~i))}class yx{constructor(){}supports(o){return X6(o)}create(o){return new vC(o)}}const gC=(i,o)=>o;class vC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||gC}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,f=this._removalsHead,x=0,O=null;for(;c||f;){const G=!f||c&&c.currentIndex<wx(f,x,O)?c:f,ee=wx(G,x,O),pe=G.currentIndex;if(G===f)x--,f=f._nextRemoved;else if(c=c._next,null==G.previousIndex)x++;else{O||(O=[]);const Be=ee-x,Ze=pe-x;if(Be!=Ze){for(let Mn=0;Mn<Be;Mn++){const Hn=Mn<O.length?O[Mn]:O[Mn]=0,jn=Hn+Mn;Ze<=jn&&jn<Be&&(O[Mn]=Hn+1)}O[G.previousIndex]=Ze-Be}}ee!==pe&&o(G,ee,pe)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!X6(o))throw new gi(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let x,O,G,c=this._itHead,f=!1;if(Array.isArray(o)){this.length=o.length;for(let ee=0;ee<this.length;ee++)O=o[ee],G=this._trackByFn(ee,O),null!==c&&Object.is(c.trackById,G)?(f&&(c=this._verifyReinsertion(c,O,G,ee)),Object.is(c.item,O)||this._addIdentityChange(c,O)):(c=this._mismatch(c,O,G,ee),f=!0),c=c._next}else x=0,function oy(i,o){if(Array.isArray(i))for(let c=0;c<i.length;c++)o(i[c]);else{const c=i[Symbol.iterator]();let f;for(;!(f=c.next()).done;)o(f.value)}}(o,ee=>{G=this._trackByFn(x,ee),null!==c&&Object.is(c.trackById,G)?(f&&(c=this._verifyReinsertion(c,ee,G,x)),Object.is(c.item,ee)||this._addIdentityChange(c,ee)):(c=this._mismatch(c,ee,G,x),f=!0),c=c._next,x++}),this.length=x;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,f,x){let O;return null===o?O=this._itTail:(O=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,O,x)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(f,x))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,O,x)):o=this._addAfter(new _C(c,f),O,x),o}_verifyReinsertion(o,c,f,x){let O=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==O?o=this._reinsertAfter(O,o._prev,x):o.currentIndex!=x&&(o.currentIndex=x,this._addToMoves(o,x)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const x=o._prevRemoved,O=o._nextRemoved;return null===x?this._removalsHead=O:x._nextRemoved=O,null===O?this._removalsTail=x:O._prevRemoved=x,this._insertAfter(o,c,f),this._addToMoves(o,f),o}_moveAfter(o,c,f){return this._unlink(o),this._insertAfter(o,c,f),this._addToMoves(o,f),o}_addAfter(o,c,f){return this._insertAfter(o,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,f){const x=null===c?this._itHead:c._next;return o._next=x,o._prev=c,null===x?this._itTail=o:x._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new bx),this._linkedRecords.put(o),o.currentIndex=f,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,f=o._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bx),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class _C{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yC{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,o))return f;return null}remove(o){const c=o._prevDup,f=o._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class bx{constructor(){this.map=new Map}put(o){const c=o.trackById;let f=this.map.get(c);f||(f=new yC,this.map.set(c,f)),f.add(o)}get(o,c){const x=this.map.get(o);return x?x.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wx(i,o,c){const f=i.previousIndex;if(null===f)return f;let x=0;return c&&f<c.length&&(x=c[f]),f+o+x}class xx{constructor(){}supports(o){return o instanceof Map||J5(o)}create(){return new bC}}class bC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||J5(o)))throw new gi(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(f,x)=>{if(c&&c.key===x)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const O=this._getOrCreateRecordForKey(x,f);c=this._insertBeforeOrAppend(c,O)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const f=o._prev;return c._next=o,c._prev=f,o._prev=c,f&&(f._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const x=this._records.get(o);this._maybeAddToChanges(x,c);const O=x._prev,G=x._next;return O&&(O._next=G),G&&(G._prev=O),x._next=null,x._prev=null,x}const f=new wC(o);return this._records.set(o,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(f=>c(o[f],f))}}class wC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ix(){return new q_([new yx])}let q_=(()=>{var i;class o{constructor(f){this.factories=f}static create(f,x){if(null!=x){const O=x.factories.slice();f=f.concat(O)}return new o(f)}static extend(f){return{provide:o,useFactory:x=>o.create(f,x||Ix()),deps:[[o,new pa,new Pr]]}}find(f){const x=this.factories.find(O=>O.supports(f));if(null!=x)return x;throw new gi(901,!1)}}return(i=o).\u0275prov=Ca({token:i,providedIn:"root",factory:Ix}),o})();function Ex(){return new X_([new xx])}let X_=(()=>{var i;class o{constructor(f){this.factories=f}static create(f,x){if(x){const O=x.factories.slice();f=f.concat(O)}return new o(f)}static extend(f){return{provide:o,useFactory:x=>o.create(f,x||Ex()),deps:[[o,new pa,new Pr]]}}find(f){const x=this.factories.find(O=>O.supports(f));if(x)return x;throw new gi(901,!1)}}return(i=o).\u0275prov=Ca({token:i,providedIn:"root",factory:Ex}),o})();function NC(i){try{const{rootComponent:o,appProviders:c,platformProviders:f}=i,x=function lC(i=[]){if(vv)return vv;const o=function hx(i=[],o){return Xl.create({name:o,providers:[{provide:X0,useValue:"platform"},{provide:$_,useValue:new Set([()=>vv=null])},...i]})}(i);return vv=o,function ix(){!function Ke(i){so=i}(()=>{throw new gi(600,!1)})}(),function px(i){const o=i.get(hd,null);null==o||o.forEach(c=>c())}(o),o}(f),O=[N_({}),{provide:E4,useExisting:h5},...c||[]],ee=new N8({providers:O,parent:x,debugName:"",runEnvironmentInitializers:!1}).injector,pe=ee.get(nu);return pe.run(()=>{ee.resolveInjectorInitializers();const Be=ee.get(wh,null);let Ze;pe.runOutsideAngular(()=>{Ze=pe.onError.subscribe({next:Hn=>{Be.handleError(Hn)}})});const Et=()=>ee.destroy(),Mn=x.get($_);return Mn.add(Et),ee.onDestroy(()=>{Ze.unsubscribe(),Mn.delete(Et)}),function ox(i,o,c){try{const f=c();return L_(f)?f.catch(x=>{throw o.runOutsideAngular(()=>i.handleError(x)),x}):f}catch(f){throw o.runOutsideAngular(()=>i.handleError(f)),f}}(Be,pe,()=>{const Hn=ee.get(B_);return Hn.runInitializers(),Hn.donePromise.then(()=>{!function db(i){"string"==typeof i&&(ub=i.toLowerCase().replace(/_/g,"-"))}(ee.get(w8,l6)||l6);const fo=ee.get(xg);return void 0!==o&&fo.bootstrap(o),fo})})})}catch(o){return Promise.reject(o)}}const $x=new ws("");function rk(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function ak(i,o){m0("NgSignals");const c=function Ct(i){const o=Object.create(On);o.computation=i;const c=()=>{if(Ht(o),C(o),o.value===Rt)throw o.error;return o.value};return c[qe]=o,c}(i);return null!=o&&o.equal&&(c[qe].equal=o.equal),c}function lk(i){const o=Y(null);try{return i()}finally{Y(o)}}function fk(i,o){const c=Xi(i),f=o.elementInjector||M0();return new av(c).create(f,o.projectableNodes,o.hostElement,o.environmentInjector)}function mk(i){const o=Xi(i);if(!o)return null;const c=new av(o);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},7440:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{MW:()=>Ht,Wp:()=>on,XU:()=>l,gL:()=>qe});var V=_e(2214),se=_e(3953),ne=_e(5407);class l{constructor(Ot){return Ot}}class qe{constructor(){return(0,V.Dk)()}}const Xt=new se.nKC("angularfire2._apps"),Ut={provide:l,useFactory:function ft(xt){return xt&&1===xt.length?xt[0]:new l((0,V.Sx)())},deps:[[new se.Xx1,Xt]]},It={provide:qe,deps:[[new se.Xx1,Xt]]};function C(xt){return(Ot,vn)=>{const Pn=vn.get(se.Agw);(0,V.KO)("angularfire",ne.xv.full,"core"),(0,V.KO)("angularfire",ne.xv.full,"app"),(0,V.KO)("angular",se.xvI.full,Pn.toString());const ki=Ot.runOutsideAngular(()=>xt(vn));return new l(ki)}}function Ht(xt,...Ot){return(0,se.EmA)([Ut,It,{provide:Xt,useFactory:C(xt),multi:!0,deps:[se.SKi,se.zZn,ne.u0,...Ot]}])}const on=(0,ne.S3)(V.Wp,!0)},5621:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{DF:()=>Xt,J1:()=>Li,Nj:()=>ft,Wm:()=>Ct,_q:()=>xn,eJ:()=>Pn,x9:()=>eo,xI:()=>pn,zK:()=>si});var V=_e(5407),se=_e(3953),ne=_e(7440),l=_e(2214),qe=_e(2802);const Y="auth";class ft{constructor(as){return as}}class Xt{constructor(){return(0,V.CA)(Y)}}const It=new se.nKC("angularfire2.auth-instances");function At(ni){return(as,Lr)=>{const Xs=as.runOutsideAngular(()=>ni(Lr));return new ft(Xs)}}const Ht={provide:Xt,deps:[[new se.Xx1,It]]},vt={provide:ft,useFactory:function C(ni,as){const Lr=(0,V.lR)(Y,ni,as);return Lr&&new ft(Lr)},deps:[[new se.Xx1,It],ne.XU]};function xn(ni,...as){return(0,l.KO)("angularfire",V.xv.full,"auth"),(0,se.EmA)([vt,Ht,{provide:It,useFactory:At(ni),multi:!0,deps:[se.SKi,se.zZn,V.u0,ne.gL,[new se.Xx1,V.Jv],...as]}])}const Pn=(0,V.S3)(qe.eJ,!0),Ct=(0,V.S3)(qe.Wm,!0),pn=(0,V.S3)(qe.xI,!0),Li=(0,V.S3)(qe.J1,!0),si=(0,V.S3)(qe.zK,!0),eo=(0,V.S3)(qe.x9,!0)},9967:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{_7:()=>On,rJ:()=>or,xs:()=>zr,Bg:()=>br,aU:()=>Ye,hV:()=>cn});var V=_e(5407),se=_e(3953),ne=_e(7440),l=_e(5621),qe=_e(2214),Y=_e(3273),ft=_e(1985),Xt=_e(6354),Ut=function(){return Ut=Object.assign||function(Hi){for(var Zo,Tr=1,ds=arguments.length;Tr<ds;Tr++)for(var Vs in Zo=arguments[Tr])Object.prototype.hasOwnProperty.call(Zo,Vs)&&(Hi[Vs]=Zo[Vs]);return Hi},Ut.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var C={includeMetadataChanges:!1};function At(Ar,Hi){return void 0===Hi&&(Hi=C),new ft.c(function(Zo){return{unsubscribe:(0,Y.aQ)(Ar,Hi,{next:Zo.next.bind(Zo),error:Zo.error.bind(Zo),complete:Zo.complete.bind(Zo)})}})}function vt(Ar,Hi){return void 0===Hi&&(Hi={}),function Ht(Ar){return At(Ar,{includeMetadataChanges:!0})}(Ar).pipe((0,Xt.T)(function(Zo){return un(Zo,Hi)}))}function un(Ar,Hi){var Zo;void 0===Hi&&(Hi={});var Tr=Ar.data(Hi);return Ar.exists()&&"object"==typeof Tr&&null!==Tr&&Hi.idField?Ut(Ut({},Tr),((Zo={})[Hi.idField]=Ar.id,Zo)):Tr}function Me(Ar,Hi){return void 0===Hi&&(Hi={}),function Pn(Ar){return At(Ar,{includeMetadataChanges:!0}).pipe((0,Xt.T)(function(Hi){return Hi.docs}))}(Ar).pipe((0,Xt.T)(function(Zo){return Zo.map(function(Tr){return un(Tr,Hi)})}))}class On{constructor(Hi){return Hi}}const Cn="firestore",Ke=new se.nKC("angularfire2.firestore-instances");function Ge(Ar){return(Hi,Zo)=>{const Tr=Hi.runOutsideAngular(()=>Ar(Zo));return new On(Tr)}}const tt={provide:class so{constructor(){return(0,V.CA)(Cn)}},deps:[[new se.Xx1,Ke]]},zt={provide:On,useFactory:function Ae(Ar,Hi){const Zo=(0,V.lR)(Cn,Ar,Hi);return Zo&&new On(Zo)},deps:[[new se.Xx1,Ke],ne.XU]};function cn(Ar,...Hi){return(0,qe.KO)("angularfire",V.xv.full,"fst"),(0,se.EmA)([zt,tt,{provide:Ke,useFactory:Ge(Ar),multi:!0,deps:[se.SKi,se.zZn,V.u0,ne.gL,[new se.Xx1,l.DF],[new se.Xx1,V.Jv],...Hi]}])}const zr=(0,V.S3)(Me,!0),br=(0,V.S3)(vt,!0),or=(0,V.S3)(Y.rJ,!0),Ye=(0,V.S3)(Y.aU,!0)},5407:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{xv:()=>un,u0:()=>vn,Jv:()=>Jn,CA:()=>ht,lR:()=>on,S3:()=>so});var V=_e(9842),se=_e(3953),ne=_e(2214),l=_e(6780),Y=_e(3604);const Xt=new class ft extends Y.q{}(class qe extends l.R{constructor(Ke,Ae){super(Ke,Ae),this.scheduler=Ke,this.work=Ae}schedule(Ke,Ae=0){return Ae>0?super.schedule(Ke,Ae):(this.delay=Ae,this.state=Ke,this.scheduler.flush(this),this)}execute(Ke,Ae){return Ae>0||this.closed?super.execute(Ke,Ae):this._execute(Ke,Ae)}requestAsyncId(Ke,Ae,Ge=0){return null!=Ge&&Ge>0||null==Ge&&this.delay>0?super.requestAsyncId(Ke,Ae,Ge):(Ke.flush(this),0)}});var It=_e(3236),C=_e(1985),At=_e(8141),Ht=_e(6745),vt=_e(941);const un=new se.RxE("ANGULARFIRE2_VERSION");function on(Fn,Ke,Ae){if(Ke){if(1===Ke.length)return Ke[0];const zt=Ke.filter(Yn=>Yn.app===Ae);if(1===zt.length)return zt[0]}return Ae.container.getProvider(Fn).getImmediate({optional:!0})}const ht=(Fn,Ke)=>{const Ae=Ke?[Ke]:(0,ne.Dk)(),Ge=[];return Ae.forEach(tt=>{tt.container.getProvider(Fn).instances.forEach(Yn=>{Ge.includes(Yn)||Ge.push(Yn)})}),Ge};class Jn{constructor(){return ht(An)}}const An="app-check";function qn(){}class xt{constructor(Ke,Ae=Xt){(0,V.A)(this,"zone",void 0),(0,V.A)(this,"delegate",void 0),this.zone=Ke,this.delegate=Ae}now(){return this.delegate.now()}schedule(Ke,Ae,Ge){const tt=this.zone;return this.delegate.schedule(function(Yn){tt.runGuarded(()=>{Ke.apply(this,[Yn])})},Ae,Ge)}}class Ot{constructor(Ke){(0,V.A)(this,"zone",void 0),(0,V.A)(this,"task",null),this.zone=Ke}call(Ke,Ae){const Ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qn,{},qn,qn)),Ae.pipe((0,At.M)({next:Ge,complete:Ge,error:Ge})).subscribe(Ke).add(Ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vn=(()=>{var Fn;class Ke{constructor(Ge){(0,V.A)(this,"ngZone",void 0),(0,V.A)(this,"outsideAngular",void 0),(0,V.A)(this,"insideAngular",void 0),this.ngZone=Ge,this.outsideAngular=Ge.runOutsideAngular(()=>new xt(Zone.current)),this.insideAngular=Ge.run(()=>new xt(Zone.current,It.E)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Fn=Ke,(0,V.A)(Ke,"\u0275fac",function(Ge){return new(Ge||Fn)(se.KVO(se.SKi))}),(0,V.A)(Ke,"\u0275prov",se.jDH({token:Fn,factory:Fn.\u0275fac,providedIn:"root"})),Ke})();function Pn(){const Fn=globalThis.\u0275AngularFireScheduler;if(!Fn)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Fn}function Ct(Fn){return Pn().ngZone.run(()=>Fn())}function Rt(Fn){return function On(Fn){return function(Ae){return(Ae=Ae.lift(new Ot(Fn.ngZone))).pipe((0,Ht._)(Fn.outsideAngular),(0,vt.Q)(Fn.insideAngular))}}(Pn())(Fn)}const Cn=(Fn,Ke)=>function(){const Ge=arguments;return Ke&&setTimeout(()=>{"scheduled"===Ke.state&&Ke.invoke()},10),Ct(()=>Fn.apply(void 0,Ge))},so=(Fn,Ke)=>function(){let Ae;const Ge=arguments;for(let zt=0;zt<arguments.length;zt++)"function"==typeof Ge[zt]&&(Ke&&(Ae||(Ae=Ct(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qn,{},qn,qn)))),Ge[zt]=Cn(Ge[zt],Ae));const tt=function ki(Fn){return Pn().ngZone.runOutsideAngular(()=>Fn())}(()=>Fn.apply(this,Ge));if(!Ke){if(tt instanceof C.c){const zt=Pn();return tt.pipe((0,Ht._)(zt.outsideAngular),(0,vt.Q)(zt.insideAngular))}return Ct(()=>tt)}return tt instanceof C.c?tt.pipe(Rt):tt instanceof Promise?Ct(()=>new Promise((zt,Yn)=>tt.then(cn=>Ct(()=>zt(cn)),cn=>Ct(()=>Yn(cn))))):"function"==typeof tt&&Ae?function(){return setTimeout(()=>{Ae&&"scheduled"===Ae.state&&Ae.invoke()},10),tt.apply(this,arguments)}:Ct(()=>tt)}},4341:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{me:()=>xt,Yp:()=>la,MJ:()=>Pa,l_:()=>Zn,JD:()=>Er,gE:()=>Gn,j4:()=>vi,YN:()=>sl,zX:()=>Va,VZ:()=>hl,cz:()=>Pn,kq:()=>xn,vO:()=>mo,BC:()=>or,cb:()=>ti,X1:()=>Ca,k0:()=>Me,qT:()=>yu});var V=_e(3953),se=_e(177),ne=_e(8455),l=_e(1985),qe=_e(3073),Y=_e(8750),ft=_e(9326),Xt=_e(4360),Ut=_e(6450),It=_e(8496),At=_e(1413),Ht=_e(6354);let vt=(()=>{var Xe;class ke{constructor(He,Zt){this._renderer=He,this._elementRef=Zt,this.onChange=Vo=>{},this.onTouched=()=>{}}setProperty(He,Zt){this._renderer.setProperty(this._elementRef.nativeElement,He,Zt)}registerOnTouched(He){this.onTouched=He}registerOnChange(He){this.onChange=He}setDisabledState(He){this.setProperty("disabled",He)}}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)(V.rXU(V.sFG),V.rXU(V.aKT))},Xe.\u0275dir=V.FsC({type:Xe}),ke})(),un=(()=>{var Xe;class ke extends vt{}return(Xe=ke).\u0275fac=(()=>{let _t;return function(Zt){return(_t||(_t=V.xGo(Xe)))(Zt||Xe)}})(),Xe.\u0275dir=V.FsC({type:Xe,features:[V.Vt3]}),ke})();const xn=new V.nKC(""),Jn={provide:xn,useExisting:(0,V.Rfq)(()=>xt),multi:!0},qn=new V.nKC("");let xt=(()=>{var Xe;class ke extends vt{constructor(He,Zt,Vo){super(He,Zt),this._compositionMode=Vo,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function An(){const Xe=(0,se.QT)()?(0,se.QT)().getUserAgent():"";return/android (\d+)/.test(Xe.toLowerCase())}())}writeValue(He){this.setProperty("value",null==He?"":He)}_handleInput(He){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(He)}_compositionStart(){this._composing=!0}_compositionEnd(He){this._composing=!1,this._compositionMode&&this.onChange(He)}}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)(V.rXU(V.sFG),V.rXU(V.aKT),V.rXU(qn,8))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(He,Zt){1&He&&V.bIt("input",function(dr){return Zt._handleInput(dr.target.value)})("blur",function(){return Zt.onTouched()})("compositionstart",function(){return Zt._compositionStart()})("compositionend",function(dr){return Zt._compositionEnd(dr.target.value)})},features:[V.Jv_([Jn]),V.Vt3]}),ke})();function Ot(Xe){return null==Xe||("string"==typeof Xe||Array.isArray(Xe))&&0===Xe.length}function vn(Xe){return null!=Xe&&"number"==typeof Xe.length}const Pn=new V.nKC(""),ki=new V.nKC(""),Ct=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Me{static min(ke){return pn(ke)}static max(ke){return Rt(ke)}static required(ke){return function On(Xe){return Ot(Xe.value)?{required:!0}:null}(ke)}static requiredTrue(ke){return function Cn(Xe){return!0===Xe.value?null:{required:!0}}(ke)}static email(ke){return function so(Xe){return Ot(Xe.value)||Ct.test(Xe.value)?null:{email:!0}}(ke)}static minLength(ke){return function Fn(Xe){return ke=>Ot(ke.value)||!vn(ke.value)?null:ke.value.length<Xe?{minlength:{requiredLength:Xe,actualLength:ke.value.length}}:null}(ke)}static maxLength(ke){return function Ke(Xe){return ke=>vn(ke.value)&&ke.value.length>Xe?{maxlength:{requiredLength:Xe,actualLength:ke.value.length}}:null}(ke)}static pattern(ke){return function Ae(Xe){if(!Xe)return Ge;let ke,_t;return"string"==typeof Xe?(_t="","^"!==Xe.charAt(0)&&(_t+="^"),_t+=Xe,"$"!==Xe.charAt(Xe.length-1)&&(_t+="$"),ke=new RegExp(_t)):(_t=Xe.toString(),ke=Xe),He=>{if(Ot(He.value))return null;const Zt=He.value;return ke.test(Zt)?null:{pattern:{requiredPattern:_t,actualValue:Zt}}}}(ke)}static nullValidator(ke){return null}static compose(ke){return pr(ke)}static composeAsync(ke){return zr(ke)}}function pn(Xe){return ke=>{if(Ot(ke.value)||Ot(Xe))return null;const _t=parseFloat(ke.value);return!isNaN(_t)&&_t<Xe?{min:{min:Xe,actual:ke.value}}:null}}function Rt(Xe){return ke=>{if(Ot(ke.value)||Ot(Xe))return null;const _t=parseFloat(ke.value);return!isNaN(_t)&&_t>Xe?{max:{max:Xe,actual:ke.value}}:null}}function Ge(Xe){return null}function tt(Xe){return null!=Xe}function zt(Xe){return(0,V.jNT)(Xe)?(0,ne.H)(Xe):Xe}function Yn(Xe){let ke={};return Xe.forEach(_t=>{ke=null!=_t?{...ke,..._t}:ke}),0===Object.keys(ke).length?null:ke}function cn(Xe,ke){return ke.map(_t=>_t(Xe))}function to(Xe){return Xe.map(ke=>function _o(Xe){return!Xe.validate}(ke)?ke:_t=>ke.validate(_t))}function pr(Xe){if(!Xe)return null;const ke=Xe.filter(tt);return 0==ke.length?null:function(_t){return Yn(cn(_t,ke))}}function jo(Xe){return null!=Xe?pr(to(Xe)):null}function zr(Xe){if(!Xe)return null;const ke=Xe.filter(tt);return 0==ke.length?null:function(_t){return function C(...Xe){const ke=(0,ft.ms)(Xe),{args:_t,keys:He}=(0,qe.D)(Xe),Zt=new l.c(Vo=>{const{length:dr}=_t;if(!dr)return void Vo.complete();const Xa=new Array(dr);let xl=dr,Tc=dr;for(let al=0;al<dr;al++){let ws=!1;(0,Y.Tg)(_t[al]).subscribe((0,Xt._)(Vo,Gc=>{ws||(ws=!0,Tc--),Xa[al]=Gc},()=>xl--,void 0,()=>{(!xl||!ws)&&(Tc||Vo.next(He?(0,It.e)(He,Xa):Xa),Vo.complete())}))}});return ke?Zt.pipe((0,Ut.I)(ke)):Zt}(cn(_t,ke).map(zt)).pipe((0,Ht.T)(Yn))}}function Mi(Xe){return null!=Xe?zr(to(Xe)):null}function rs(Xe,ke){return null===Xe?[ke]:Array.isArray(Xe)?[...Xe,ke]:[Xe,ke]}function $i(Xe){return Xe._rawValidators}function br(Xe){return Xe._rawAsyncValidators}function Jr(Xe){return Xe?Array.isArray(Xe)?Xe:[Xe]:[]}function Li(Xe,ke){return Array.isArray(Xe)?Xe.includes(ke):Xe===ke}function yi(Xe,ke){const _t=Jr(ke);return Jr(Xe).forEach(Zt=>{Li(_t,Zt)||_t.push(Zt)}),_t}function ao(Xe,ke){return Jr(ke).filter(_t=>!Li(Xe,_t))}class si{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(ke){this._rawValidators=ke||[],this._composedValidatorFn=jo(this._rawValidators)}_setAsyncValidators(ke){this._rawAsyncValidators=ke||[],this._composedAsyncValidatorFn=Mi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(ke){this._onDestroyCallbacks.push(ke)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(ke=>ke()),this._onDestroyCallbacks=[]}reset(ke=void 0){this.control&&this.control.reset(ke)}hasError(ke,_t){return!!this.control&&this.control.hasError(ke,_t)}getError(ke,_t){return this.control?this.control.getError(ke,_t):null}}class Fi extends si{get formDirective(){return null}get path(){return null}}class mo extends si{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class eo{constructor(ke){this._cd=ke}get isTouched(){var ke,_t,He;return null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||null===(_t=ke._touched)||void 0===_t||_t.call(ke),!(null===(He=this._cd)||void 0===He||null===(He=He.control)||void 0===He||!He.touched)}get isUntouched(){var ke;return!(null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||!ke.untouched)}get isPristine(){var ke,_t,He;return null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||null===(_t=ke._pristine)||void 0===_t||_t.call(ke),!(null===(He=this._cd)||void 0===He||null===(He=He.control)||void 0===He||!He.pristine)}get isDirty(){var ke;return!(null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||!ke.dirty)}get isValid(){var ke,_t,He;return null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||null===(_t=ke._status)||void 0===_t||_t.call(ke),!(null===(He=this._cd)||void 0===He||null===(He=He.control)||void 0===He||!He.valid)}get isInvalid(){var ke;return!(null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||!ke.invalid)}get isPending(){var ke;return!(null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||!ke.pending)}get isSubmitted(){var ke,_t,He;return null===(ke=this._cd)||void 0===ke||null===(_t=ke._submitted)||void 0===_t||_t.call(ke),!(null===(He=this._cd)||void 0===He||!He.submitted)}}let or=(()=>{var Xe;class ke extends eo{constructor(He){super(He)}}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)(V.rXU(mo,2))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(He,Zt){2&He&&V.AVh("ng-untouched",Zt.isUntouched)("ng-touched",Zt.isTouched)("ng-pristine",Zt.isPristine)("ng-dirty",Zt.isDirty)("ng-valid",Zt.isValid)("ng-invalid",Zt.isInvalid)("ng-pending",Zt.isPending)},features:[V.Vt3]}),ke})(),ti=(()=>{var Xe;class ke extends eo{constructor(He){super(He)}}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)(V.rXU(Fi,10))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(He,Zt){2&He&&V.AVh("ng-untouched",Zt.isUntouched)("ng-touched",Zt.isTouched)("ng-pristine",Zt.isPristine)("ng-dirty",Zt.isDirty)("ng-valid",Zt.isValid)("ng-invalid",Zt.isInvalid)("ng-pending",Zt.isPending)("ng-submitted",Zt.isSubmitted)},features:[V.Vt3]}),ke})();const ei="VALID",Pi="INVALID",Xn="PENDING",kt="DISABLED";class mt{}class Ye extends mt{constructor(ke,_t){super(),this.value=ke,this.source=_t}}class Mt extends mt{constructor(ke,_t){super(),this.pristine=ke,this.source=_t}}class Jt extends mt{constructor(ke,_t){super(),this.touched=ke,this.source=_t}}class Bn extends mt{constructor(ke,_t){super(),this.status=ke,this.source=_t}}class Lt extends mt{constructor(ke){super(),this.source=ke}}class Ie extends mt{constructor(ke){super(),this.source=ke}}function ue(Xe){return(it(Xe)?Xe.validators:Xe)||null}function we(Xe,ke){return(it(ke)?ke.asyncValidators:Xe)||null}function it(Xe){return null!=Xe&&!Array.isArray(Xe)&&"object"==typeof Xe}function qt(Xe,ke,_t){const He=Xe.controls;if(!(ke?Object.keys(He):He).length)throw new V.wOt(1e3,"");if(!He[_t])throw new V.wOt(1001,"")}function En(Xe,ke,_t){Xe._forEachChild((He,Zt)=>{if(void 0===_t[Zt])throw new V.wOt(1002,"")})}class dn{constructor(ke,_t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,V.EWP)(()=>this.statusReactive()),this.statusReactive=(0,V.vPA)(void 0),this._pristine=(0,V.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,V.vPA)(!0),this._touched=(0,V.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,V.vPA)(!1),this._events=new At.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(ke),this._assignAsyncValidators(_t)}get validator(){return this._composedValidatorFn}set validator(ke){this._rawValidators=this._composedValidatorFn=ke}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(ke){this._rawAsyncValidators=this._composedAsyncValidatorFn=ke}get parent(){return this._parent}get status(){return(0,V.O8t)(this.statusReactive)}set status(ke){(0,V.O8t)(()=>this.statusReactive.set(ke))}get valid(){return this.status===ei}get invalid(){return this.status===Pi}get pending(){return this.status==Xn}get disabled(){return this.status===kt}get enabled(){return this.status!==kt}get pristine(){return(0,V.O8t)(this.pristineReactive)}set pristine(ke){(0,V.O8t)(()=>this.pristineReactive.set(ke))}get dirty(){return!this.pristine}get touched(){return(0,V.O8t)(this.touchedReactive)}set touched(ke){(0,V.O8t)(()=>this.touchedReactive.set(ke))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(ke){this._assignValidators(ke)}setAsyncValidators(ke){this._assignAsyncValidators(ke)}addValidators(ke){this.setValidators(yi(ke,this._rawValidators))}addAsyncValidators(ke){this.setAsyncValidators(yi(ke,this._rawAsyncValidators))}removeValidators(ke){this.setValidators(ao(ke,this._rawValidators))}removeAsyncValidators(ke){this.setAsyncValidators(ao(ke,this._rawAsyncValidators))}hasValidator(ke){return Li(this._rawValidators,ke)}hasAsyncValidator(ke){return Li(this._rawAsyncValidators,ke)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(ke={}){var _t;const He=!1===this.touched;this.touched=!0;const Zt=null!==(_t=ke.sourceControl)&&void 0!==_t?_t:this;this._parent&&!ke.onlySelf&&this._parent.markAsTouched({...ke,sourceControl:Zt}),He&&!1!==ke.emitEvent&&this._events.next(new Jt(!0,Zt))}markAllAsTouched(ke={}){this.markAsTouched({onlySelf:!0,emitEvent:ke.emitEvent,sourceControl:this}),this._forEachChild(_t=>_t.markAllAsTouched(ke))}markAsUntouched(ke={}){var _t;const He=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const Zt=null!==(_t=ke.sourceControl)&&void 0!==_t?_t:this;this._forEachChild(Vo=>{Vo.markAsUntouched({onlySelf:!0,emitEvent:ke.emitEvent,sourceControl:Zt})}),this._parent&&!ke.onlySelf&&this._parent._updateTouched(ke,Zt),He&&!1!==ke.emitEvent&&this._events.next(new Jt(!1,Zt))}markAsDirty(ke={}){var _t;const He=!0===this.pristine;this.pristine=!1;const Zt=null!==(_t=ke.sourceControl)&&void 0!==_t?_t:this;this._parent&&!ke.onlySelf&&this._parent.markAsDirty({...ke,sourceControl:Zt}),He&&!1!==ke.emitEvent&&this._events.next(new Mt(!1,Zt))}markAsPristine(ke={}){var _t;const He=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const Zt=null!==(_t=ke.sourceControl)&&void 0!==_t?_t:this;this._forEachChild(Vo=>{Vo.markAsPristine({onlySelf:!0,emitEvent:ke.emitEvent})}),this._parent&&!ke.onlySelf&&this._parent._updatePristine(ke,Zt),He&&!1!==ke.emitEvent&&this._events.next(new Mt(!0,Zt))}markAsPending(ke={}){var _t;this.status=Xn;const He=null!==(_t=ke.sourceControl)&&void 0!==_t?_t:this;!1!==ke.emitEvent&&(this._events.next(new Bn(this.status,He)),this.statusChanges.emit(this.status)),this._parent&&!ke.onlySelf&&this._parent.markAsPending({...ke,sourceControl:He})}disable(ke={}){var _t;const He=this._parentMarkedDirty(ke.onlySelf);this.status=kt,this.errors=null,this._forEachChild(Vo=>{Vo.disable({...ke,onlySelf:!0})}),this._updateValue();const Zt=null!==(_t=ke.sourceControl)&&void 0!==_t?_t:this;!1!==ke.emitEvent&&(this._events.next(new Ye(this.value,Zt)),this._events.next(new Bn(this.status,Zt)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...ke,skipPristineCheck:He},this),this._onDisabledChange.forEach(Vo=>Vo(!0))}enable(ke={}){const _t=this._parentMarkedDirty(ke.onlySelf);this.status=ei,this._forEachChild(He=>{He.enable({...ke,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:ke.emitEvent}),this._updateAncestors({...ke,skipPristineCheck:_t},this),this._onDisabledChange.forEach(He=>He(!1))}_updateAncestors(ke,_t){this._parent&&!ke.onlySelf&&(this._parent.updateValueAndValidity(ke),ke.skipPristineCheck||this._parent._updatePristine({},_t),this._parent._updateTouched({},_t))}setParent(ke){this._parent=ke}getRawValue(){return this.value}updateValueAndValidity(ke={}){var _t;if(this._setInitialStatus(),this._updateValue(),this.enabled){const Zt=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ei||this.status===Xn)&&this._runAsyncValidator(Zt,ke.emitEvent)}const He=null!==(_t=ke.sourceControl)&&void 0!==_t?_t:this;!1!==ke.emitEvent&&(this._events.next(new Ye(this.value,He)),this._events.next(new Bn(this.status,He)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!ke.onlySelf&&this._parent.updateValueAndValidity({...ke,sourceControl:He})}_updateTreeValidity(ke={emitEvent:!0}){this._forEachChild(_t=>_t._updateTreeValidity(ke)),this.updateValueAndValidity({onlySelf:!0,emitEvent:ke.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kt:ei}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(ke,_t){if(this.asyncValidator){this.status=Xn,this._hasOwnPendingAsyncValidator={emitEvent:!1!==_t};const He=zt(this.asyncValidator(this));this._asyncValidationSubscription=He.subscribe(Zt=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(Zt,{emitEvent:_t,shouldHaveEmitted:ke})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){var ke,_t;this._asyncValidationSubscription.unsubscribe();const He=null!==(ke=null===(_t=this._hasOwnPendingAsyncValidator)||void 0===_t?void 0:_t.emitEvent)&&void 0!==ke&&ke;return this._hasOwnPendingAsyncValidator=null,He}return!1}setErrors(ke,_t={}){this.errors=ke,this._updateControlsErrors(!1!==_t.emitEvent,this,_t.shouldHaveEmitted)}get(ke){let _t=ke;return null==_t||(Array.isArray(_t)||(_t=_t.split(".")),0===_t.length)?null:_t.reduce((He,Zt)=>He&&He._find(Zt),this)}getError(ke,_t){const He=_t?this.get(_t):this;return He&&He.errors?He.errors[ke]:null}hasError(ke,_t){return!!this.getError(ke,_t)}get root(){let ke=this;for(;ke._parent;)ke=ke._parent;return ke}_updateControlsErrors(ke,_t,He){this.status=this._calculateStatus(),ke&&this.statusChanges.emit(this.status),(ke||He)&&this._events.next(new Bn(this.status,_t)),this._parent&&this._parent._updateControlsErrors(ke,_t,He)}_initObservables(){this.valueChanges=new V.bkB,this.statusChanges=new V.bkB}_calculateStatus(){return this._allControlsDisabled()?kt:this.errors?Pi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xn)?Xn:this._anyControlsHaveStatus(Pi)?Pi:ei}_anyControlsHaveStatus(ke){return this._anyControls(_t=>_t.status===ke)}_anyControlsDirty(){return this._anyControls(ke=>ke.dirty)}_anyControlsTouched(){return this._anyControls(ke=>ke.touched)}_updatePristine(ke,_t){const He=!this._anyControlsDirty(),Zt=this.pristine!==He;this.pristine=He,this._parent&&!ke.onlySelf&&this._parent._updatePristine(ke,_t),Zt&&this._events.next(new Mt(this.pristine,_t))}_updateTouched(ke={},_t){this.touched=this._anyControlsTouched(),this._events.next(new Jt(this.touched,_t)),this._parent&&!ke.onlySelf&&this._parent._updateTouched(ke,_t)}_registerOnCollectionChange(ke){this._onCollectionChange=ke}_setUpdateStrategy(ke){it(ke)&&null!=ke.updateOn&&(this._updateOn=ke.updateOn)}_parentMarkedDirty(ke){return!ke&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(ke){return null}_assignValidators(ke){this._rawValidators=Array.isArray(ke)?ke.slice():ke,this._composedValidatorFn=function ae(Xe){return Array.isArray(Xe)?jo(Xe):Xe||null}(this._rawValidators)}_assignAsyncValidators(ke){this._rawAsyncValidators=Array.isArray(ke)?ke.slice():ke,this._composedAsyncValidatorFn=function Ue(Xe){return Array.isArray(Xe)?Mi(Xe):Xe||null}(this._rawAsyncValidators)}}class Gn extends dn{constructor(ke,_t,He){super(ue(_t),we(He,_t)),this.controls=ke,this._initObservables(),this._setUpdateStrategy(_t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(ke,_t){return this.controls[ke]?this.controls[ke]:(this.controls[ke]=_t,_t.setParent(this),_t._registerOnCollectionChange(this._onCollectionChange),_t)}addControl(ke,_t,He={}){this.registerControl(ke,_t),this.updateValueAndValidity({emitEvent:He.emitEvent}),this._onCollectionChange()}removeControl(ke,_t={}){this.controls[ke]&&this.controls[ke]._registerOnCollectionChange(()=>{}),delete this.controls[ke],this.updateValueAndValidity({emitEvent:_t.emitEvent}),this._onCollectionChange()}setControl(ke,_t,He={}){this.controls[ke]&&this.controls[ke]._registerOnCollectionChange(()=>{}),delete this.controls[ke],_t&&this.registerControl(ke,_t),this.updateValueAndValidity({emitEvent:He.emitEvent}),this._onCollectionChange()}contains(ke){return this.controls.hasOwnProperty(ke)&&this.controls[ke].enabled}setValue(ke,_t={}){En(this,0,ke),Object.keys(ke).forEach(He=>{qt(this,!0,He),this.controls[He].setValue(ke[He],{onlySelf:!0,emitEvent:_t.emitEvent})}),this.updateValueAndValidity(_t)}patchValue(ke,_t={}){null!=ke&&(Object.keys(ke).forEach(He=>{const Zt=this.controls[He];Zt&&Zt.patchValue(ke[He],{onlySelf:!0,emitEvent:_t.emitEvent})}),this.updateValueAndValidity(_t))}reset(ke={},_t={}){this._forEachChild((He,Zt)=>{He.reset(ke?ke[Zt]:null,{onlySelf:!0,emitEvent:_t.emitEvent})}),this._updatePristine(_t,this),this._updateTouched(_t,this),this.updateValueAndValidity(_t)}getRawValue(){return this._reduceChildren({},(ke,_t,He)=>(ke[He]=_t.getRawValue(),ke))}_syncPendingControls(){let ke=this._reduceChildren(!1,(_t,He)=>!!He._syncPendingControls()||_t);return ke&&this.updateValueAndValidity({onlySelf:!0}),ke}_forEachChild(ke){Object.keys(this.controls).forEach(_t=>{const He=this.controls[_t];He&&ke(He,_t)})}_setUpControls(){this._forEachChild(ke=>{ke.setParent(this),ke._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(ke){for(const[_t,He]of Object.entries(this.controls))if(this.contains(_t)&&ke(He))return!0;return!1}_reduceValue(){return this._reduceChildren({},(_t,He,Zt)=>((He.enabled||this.disabled)&&(_t[Zt]=He.value),_t))}_reduceChildren(ke,_t){let He=ke;return this._forEachChild((Zt,Vo)=>{He=_t(He,Zt,Vo)}),He}_allControlsDisabled(){for(const ke of Object.keys(this.controls))if(this.controls[ke].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(ke){return this.controls.hasOwnProperty(ke)?this.controls[ke]:null}}const Vn=new V.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>hi}),hi="always";function Zi(Xe,ke,_t=hi){var He,Zt;Uo(Xe,ke),ke.valueAccessor.writeValue(Xe.value),(Xe.disabled||"always"===_t)&&(null===(He=(Zt=ke.valueAccessor).setDisabledState)||void 0===He||He.call(Zt,Xe.disabled)),function ss(Xe,ke){ke.valueAccessor.registerOnChange(_t=>{Xe._pendingValue=_t,Xe._pendingChange=!0,Xe._pendingDirty=!0,"change"===Xe.updateOn&&Na(Xe,ke)})}(Xe,ke),function Rl(Xe,ke){const _t=(He,Zt)=>{ke.valueAccessor.writeValue(He),Zt&&ke.viewToModelUpdate(He)};Xe.registerOnChange(_t),ke._registerOnDestroy(()=>{Xe._unregisterOnChange(_t)})}(Xe,ke),function Vr(Xe,ke){ke.valueAccessor.registerOnTouched(()=>{Xe._pendingTouched=!0,"blur"===Xe.updateOn&&Xe._pendingChange&&Na(Xe,ke),"submit"!==Xe.updateOn&&Xe.markAsTouched()})}(Xe,ke),function Ri(Xe,ke){if(ke.valueAccessor.setDisabledState){const _t=He=>{ke.valueAccessor.setDisabledState(He)};Xe.registerOnDisabledChange(_t),ke._registerOnDestroy(()=>{Xe._unregisterOnDisabledChange(_t)})}}(Xe,ke)}function Yt(Xe,ke,_t=!0){const He=()=>{};ke.valueAccessor&&(ke.valueAccessor.registerOnChange(He),ke.valueAccessor.registerOnTouched(He)),mr(Xe,ke),Xe&&(ke._invokeOnDestroyCallbacks(),Xe._registerOnCollectionChange(()=>{}))}function ri(Xe,ke){Xe.forEach(_t=>{_t.registerOnValidatorChange&&_t.registerOnValidatorChange(ke)})}function Uo(Xe,ke){const _t=$i(Xe);null!==ke.validator?Xe.setValidators(rs(_t,ke.validator)):"function"==typeof _t&&Xe.setValidators([_t]);const He=br(Xe);null!==ke.asyncValidator?Xe.setAsyncValidators(rs(He,ke.asyncValidator)):"function"==typeof He&&Xe.setAsyncValidators([He]);const Zt=()=>Xe.updateValueAndValidity();ri(ke._rawValidators,Zt),ri(ke._rawAsyncValidators,Zt)}function mr(Xe,ke){let _t=!1;if(null!==Xe){if(null!==ke.validator){const Zt=$i(Xe);if(Array.isArray(Zt)&&Zt.length>0){const Vo=Zt.filter(dr=>dr!==ke.validator);Vo.length!==Zt.length&&(_t=!0,Xe.setValidators(Vo))}}if(null!==ke.asyncValidator){const Zt=br(Xe);if(Array.isArray(Zt)&&Zt.length>0){const Vo=Zt.filter(dr=>dr!==ke.asyncValidator);Vo.length!==Zt.length&&(_t=!0,Xe.setAsyncValidators(Vo))}}}const He=()=>{};return ri(ke._rawValidators,He),ri(ke._rawAsyncValidators,He),_t}function Na(Xe,ke){Xe._pendingDirty&&Xe.markAsDirty(),Xe.setValue(Xe._pendingValue,{emitModelToViewChange:!1}),ke.viewToModelUpdate(Xe._pendingValue),Xe._pendingChange=!1}function Vs(Xe,ke){if(!Xe.hasOwnProperty("model"))return!1;const _t=Xe.model;return!!_t.isFirstChange()||!Object.is(ke,_t.currentValue)}function va(Xe,ke){if(!ke)return null;let _t,He,Zt;return Array.isArray(ke),ke.forEach(Vo=>{Vo.constructor===xt?_t=Vo:function Ys(Xe){return Object.getPrototypeOf(Xe.constructor)===un}(Vo)?He=Vo:Zt=Vo}),Zt||He||_t||null}function su(Xe,ke){const _t=Xe.indexOf(ke);_t>-1&&Xe.splice(_t,1)}function dl(Xe){return"object"==typeof Xe&&null!==Xe&&2===Object.keys(Xe).length&&"value"in Xe&&"disabled"in Xe}Promise.resolve();const Pa=class extends dn{constructor(ke=null,_t,He){super(ue(_t),we(He,_t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(ke),this._setUpdateStrategy(_t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),it(_t)&&(_t.nonNullable||_t.initialValueIsDefault)&&(this.defaultValue=dl(ke)?ke.value:ke)}setValue(ke,_t={}){this.value=this._pendingValue=ke,this._onChange.length&&!1!==_t.emitModelToViewChange&&this._onChange.forEach(He=>He(this.value,!1!==_t.emitViewToModelChange)),this.updateValueAndValidity(_t)}patchValue(ke,_t={}){this.setValue(ke,_t)}reset(ke=this.defaultValue,_t={}){this._applyFormState(ke),this.markAsPristine(_t),this.markAsUntouched(_t),this.setValue(this.value,_t),this._pendingChange=!1}_updateValue(){}_anyControls(ke){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(ke){this._onChange.push(ke)}_unregisterOnChange(ke){su(this._onChange,ke)}registerOnDisabledChange(ke){this._onDisabledChange.push(ke)}_unregisterOnDisabledChange(ke){su(this._onDisabledChange,ke)}_forEachChild(ke){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(ke){dl(ke)?(this.value=this._pendingValue=ke.value,ke.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=ke}};Promise.resolve();let yu=(()=>{var Xe;class ke{}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ke})();const Dt=new V.nKC(""),Nn={provide:mo,useExisting:(0,V.Rfq)(()=>Zn)};let Zn=(()=>{var Xe;class ke extends mo{set isDisabled(He){}constructor(He,Zt,Vo,dr,Xa){super(),this._ngModelWarningConfig=dr,this.callSetDisabledState=Xa,this.update=new V.bkB,this._ngModelWarningSent=!1,this._setValidators(He),this._setAsyncValidators(Zt),this.valueAccessor=va(0,Vo)}ngOnChanges(He){if(this._isControlChanged(He)){const Zt=He.form.previousValue;Zt&&Yt(Zt,this,!1),Zi(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Vs(He,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Yt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(He){this.viewModel=He,this.update.emit(He)}_isControlChanged(He){return He.hasOwnProperty("form")}}return(Xe=ke)._ngModelWarningSentOnce=!1,Xe.\u0275fac=function(He){return new(He||Xe)(V.rXU(Pn,10),V.rXU(ki,10),V.rXU(xn,10),V.rXU(Dt,8),V.rXU(Vn,8))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[V.Jv_([Nn]),V.Vt3,V.OA$]}),ke})();const zn={provide:Fi,useExisting:(0,V.Rfq)(()=>vi)};let vi=(()=>{var Xe;class ke extends Fi{get submitted(){return(0,V.O8t)(this._submittedReactive)}set submitted(He){this._submittedReactive.set(He)}constructor(He,Zt,Vo){super(),this.callSetDisabledState=Vo,this._submitted=(0,V.EWP)(()=>this._submittedReactive()),this._submittedReactive=(0,V.vPA)(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new V.bkB,this._setValidators(He),this._setAsyncValidators(Zt)}ngOnChanges(He){this._checkFormPresent(),He.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(mr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(He){const Zt=this.form.get(He.path);return Zi(Zt,He,this.callSetDisabledState),Zt.updateValueAndValidity({emitEvent:!1}),this.directives.push(He),Zt}getControl(He){return this.form.get(He.path)}removeControl(He){Yt(He.control||null,He,!1),function ol(Xe,ke){const _t=Xe.indexOf(ke);_t>-1&&Xe.splice(_t,1)}(this.directives,He)}addFormGroup(He){this._setUpFormContainer(He)}removeFormGroup(He){this._cleanUpFormContainer(He)}getFormGroup(He){return this.form.get(He.path)}addFormArray(He){this._setUpFormContainer(He)}removeFormArray(He){this._cleanUpFormContainer(He)}getFormArray(He){return this.form.get(He.path)}updateModel(He,Zt){this.form.get(He.path).setValue(Zt)}onSubmit(He){var Zt;return this._submittedReactive.set(!0),function sa(Xe,ke){Xe._syncPendingControls(),ke.forEach(_t=>{const He=_t.control;"submit"===He.updateOn&&He._pendingChange&&(_t.viewToModelUpdate(He._pendingValue),He._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(He),this.form._events.next(new Lt(this.control)),"dialog"===(null==He||null===(Zt=He.target)||void 0===Zt?void 0:Zt.method)}onReset(){this.resetForm()}resetForm(He=void 0){this.form.reset(He),this._submittedReactive.set(!1),this.form._events.next(new Ie(this.form))}_updateDomValue(){this.directives.forEach(He=>{const Zt=He.control,Vo=this.form.get(He.path);Zt!==Vo&&(Yt(Zt||null,He),(Xe=>Xe instanceof Pa)(Vo)&&(Zi(Vo,He,this.callSetDisabledState),He.control=Vo))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(He){const Zt=this.form.get(He.path);(function Du(Xe,ke){Uo(Xe,ke)})(Zt,He),Zt.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(He){if(this.form){const Zt=this.form.get(He.path);Zt&&function Ra(Xe,ke){return mr(Xe,ke)}(Zt,He)&&Zt.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Uo(this.form,this),this._oldForm&&mr(this._oldForm,this)}_checkFormPresent(){}}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)(V.rXU(Pn,10),V.rXU(ki,10),V.rXU(Vn,8))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formGroup",""]],hostBindings:function(He,Zt){1&He&&V.bIt("submit",function(dr){return Zt.onSubmit(dr)})("reset",function(){return Zt.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[V.Jv_([zn]),V.Vt3,V.OA$]}),ke})();const cr={provide:mo,useExisting:(0,V.Rfq)(()=>Er)};let Er=(()=>{var Xe;class ke extends mo{set isDisabled(He){}constructor(He,Zt,Vo,dr,Xa){super(),this._ngModelWarningConfig=Xa,this._added=!1,this.name=null,this.update=new V.bkB,this._ngModelWarningSent=!1,this._parent=He,this._setValidators(Zt),this._setAsyncValidators(Vo),this.valueAccessor=va(0,dr)}ngOnChanges(He){this._added||this._setUpControl(),Vs(He,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(He){this.viewModel=He,this.update.emit(He)}get path(){return function po(Xe,ke){return[...ke.path,Xe]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(Xe=ke)._ngModelWarningSentOnce=!1,Xe.\u0275fac=function(He){return new(He||Xe)(V.rXU(Fi,13),V.rXU(Pn,10),V.rXU(ki,10),V.rXU(xn,10),V.rXU(Dt,8))},Xe.\u0275dir=V.FsC({type:Xe,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[V.Jv_([cr]),V.Vt3,V.OA$]}),ke})();function Sc(Xe){return"number"==typeof Xe?Xe:parseFloat(Xe)}let Wu=(()=>{var Xe;class ke{constructor(){this._validator=Ge}ngOnChanges(He){if(this.inputName in He){const Zt=this.normalizeInput(He[this.inputName].currentValue);this._enabled=this.enabled(Zt),this._validator=this._enabled?this.createValidator(Zt):Ge,this._onChange&&this._onChange()}}validate(He){return this._validator(He)}registerOnValidatorChange(He){this._onChange=He}enabled(He){return null!=He}}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275dir=V.FsC({type:Xe,features:[V.OA$]}),ke})();const za={provide:Pn,useExisting:(0,V.Rfq)(()=>Va),multi:!0};let Va=(()=>{var Xe;class ke extends Wu{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=He=>Sc(He),this.createValidator=He=>Rt(He)}}return(Xe=ke).\u0275fac=(()=>{let _t;return function(Zt){return(_t||(_t=V.xGo(Xe)))(Zt||Xe)}})(),Xe.\u0275dir=V.FsC({type:Xe,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(He,Zt){2&He&&V.BMQ("max",Zt._enabled?Zt.max:null)},inputs:{max:"max"},features:[V.Jv_([za]),V.Vt3]}),ke})();const gl={provide:Pn,useExisting:(0,V.Rfq)(()=>hl),multi:!0};let hl=(()=>{var Xe;class ke extends Wu{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=He=>Sc(He),this.createValidator=He=>pn(He)}}return(Xe=ke).\u0275fac=(()=>{let _t;return function(Zt){return(_t||(_t=V.xGo(Xe)))(Zt||Xe)}})(),Xe.\u0275dir=V.FsC({type:Xe,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(He,Zt){2&He&&V.BMQ("min",Zt._enabled?Zt.min:null)},inputs:{min:"min"},features:[V.Jv_([gl]),V.Vt3]}),ke})(),jr=(()=>{var Xe;class ke{}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275mod=V.$C({type:Xe}),Xe.\u0275inj=V.G2t({}),ke})();class la extends dn{constructor(ke,_t,He){super(ue(_t),we(He,_t)),this.controls=ke,this._initObservables(),this._setUpdateStrategy(_t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(ke){return this.controls[this._adjustIndex(ke)]}push(ke,_t={}){this.controls.push(ke),this._registerControl(ke),this.updateValueAndValidity({emitEvent:_t.emitEvent}),this._onCollectionChange()}insert(ke,_t,He={}){this.controls.splice(ke,0,_t),this._registerControl(_t),this.updateValueAndValidity({emitEvent:He.emitEvent})}removeAt(ke,_t={}){let He=this._adjustIndex(ke);He<0&&(He=0),this.controls[He]&&this.controls[He]._registerOnCollectionChange(()=>{}),this.controls.splice(He,1),this.updateValueAndValidity({emitEvent:_t.emitEvent})}setControl(ke,_t,He={}){let Zt=this._adjustIndex(ke);Zt<0&&(Zt=0),this.controls[Zt]&&this.controls[Zt]._registerOnCollectionChange(()=>{}),this.controls.splice(Zt,1),_t&&(this.controls.splice(Zt,0,_t),this._registerControl(_t)),this.updateValueAndValidity({emitEvent:He.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(ke,_t={}){En(this,0,ke),ke.forEach((He,Zt)=>{qt(this,!1,Zt),this.at(Zt).setValue(He,{onlySelf:!0,emitEvent:_t.emitEvent})}),this.updateValueAndValidity(_t)}patchValue(ke,_t={}){null!=ke&&(ke.forEach((He,Zt)=>{this.at(Zt)&&this.at(Zt).patchValue(He,{onlySelf:!0,emitEvent:_t.emitEvent})}),this.updateValueAndValidity(_t))}reset(ke=[],_t={}){this._forEachChild((He,Zt)=>{He.reset(ke[Zt],{onlySelf:!0,emitEvent:_t.emitEvent})}),this._updatePristine(_t,this),this._updateTouched(_t,this),this.updateValueAndValidity(_t)}getRawValue(){return this.controls.map(ke=>ke.getRawValue())}clear(ke={}){this.controls.length<1||(this._forEachChild(_t=>_t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:ke.emitEvent}))}_adjustIndex(ke){return ke<0?ke+this.length:ke}_syncPendingControls(){let ke=this.controls.reduce((_t,He)=>!!He._syncPendingControls()||_t,!1);return ke&&this.updateValueAndValidity({onlySelf:!0}),ke}_forEachChild(ke){this.controls.forEach((_t,He)=>{ke(_t,He)})}_updateValue(){this.value=this.controls.filter(ke=>ke.enabled||this.disabled).map(ke=>ke.value)}_anyControls(ke){return this.controls.some(_t=>_t.enabled&&ke(_t))}_setUpControls(){this._forEachChild(ke=>this._registerControl(ke))}_allControlsDisabled(){for(const ke of this.controls)if(ke.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(ke){ke.setParent(this),ke._registerOnCollectionChange(this._onCollectionChange)}_find(ke){var _t;return null!==(_t=this.at(ke))&&void 0!==_t?_t:null}}let sl=(()=>{var Xe;class ke{static withConfig(He){var Zt;return{ngModule:ke,providers:[{provide:Vn,useValue:null!==(Zt=He.callSetDisabledState)&&void 0!==Zt?Zt:hi}]}}}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275mod=V.$C({type:Xe}),Xe.\u0275inj=V.G2t({imports:[jr]}),ke})(),Ca=(()=>{var Xe;class ke{static withConfig(He){var Zt,Vo;return{ngModule:ke,providers:[{provide:Dt,useValue:null!==(Zt=He.warnOnNgModelWithFormControl)&&void 0!==Zt?Zt:"always"},{provide:Vn,useValue:null!==(Vo=He.callSetDisabledState)&&void 0!==Vo?Vo:hi}]}}}return(Xe=ke).\u0275fac=function(He){return new(He||Xe)},Xe.\u0275mod=V.$C({type:Xe}),Xe.\u0275inj=V.G2t({imports:[jr]}),ke})()},345:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{B8:()=>zt,hE:()=>ao});var V=_e(177),se=_e(3953);class ne extends V.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class l extends ne{static makeCurrent(){(0,V.ZD)(new l)}onAndCancel(ei,Pi,Xn){return ei.addEventListener(Pi,Xn),()=>{ei.removeEventListener(Pi,Xn)}}dispatchEvent(ei,Pi){ei.dispatchEvent(Pi)}remove(ei){ei.parentNode&&ei.parentNode.removeChild(ei)}createElement(ei,Pi){return(Pi=Pi||this.getDefaultDocument()).createElement(ei)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ei){return ei.nodeType===Node.ELEMENT_NODE}isShadowRoot(ei){return ei instanceof DocumentFragment}getGlobalEventTarget(ei,Pi){return"window"===Pi?window:"document"===Pi?ei:"body"===Pi?ei.body:null}getBaseHref(ei){const Pi=function Y(){return qe=qe||document.querySelector("base"),qe?qe.getAttribute("href"):null}();return null==Pi?null:function ft(Wi){return new URL(Wi,document.baseURI).pathname}(Pi)}resetBaseElement(){qe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ei){return(0,V._b)(document.cookie,ei)}}let qe=null,Ut=(()=>{var Wi;class ei{build(){return new XMLHttpRequest}}return(Wi=ei).\u0275fac=function(Xn){return new(Xn||Wi)},Wi.\u0275prov=se.jDH({token:Wi,factory:Wi.\u0275fac}),ei})();const It=new se.nKC("");let C=(()=>{var Wi;class ei{constructor(Xn,kt){this._zone=kt,this._eventNameToPlugin=new Map,Xn.forEach(mt=>{mt.manager=this}),this._plugins=Xn.slice().reverse()}addEventListener(Xn,kt,mt){return this._findPluginFor(kt).addEventListener(Xn,kt,mt)}getZone(){return this._zone}_findPluginFor(Xn){let kt=this._eventNameToPlugin.get(Xn);if(kt)return kt;if(kt=this._plugins.find(Ye=>Ye.supports(Xn)),!kt)throw new se.wOt(5101,!1);return this._eventNameToPlugin.set(Xn,kt),kt}}return(Wi=ei).\u0275fac=function(Xn){return new(Xn||Wi)(se.KVO(It),se.KVO(se.SKi))},Wi.\u0275prov=se.jDH({token:Wi,factory:Wi.\u0275fac}),ei})();class At{constructor(ei){this._doc=ei}}const Ht="ng-app-id";let vt=(()=>{var Wi;class ei{constructor(Xn,kt,mt,Ye={}){this.doc=Xn,this.appId=kt,this.nonce=mt,this.platformId=Ye,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,V.Vy)(Ye),this.resetHostNodes()}addStyles(Xn){for(const kt of Xn)1===this.changeUsageCount(kt,1)&&this.onStyleAdded(kt)}removeStyles(Xn){for(const kt of Xn)this.changeUsageCount(kt,-1)<=0&&this.onStyleRemoved(kt)}ngOnDestroy(){const Xn=this.styleNodesInDOM;Xn&&(Xn.forEach(kt=>kt.remove()),Xn.clear());for(const kt of this.getAllStyles())this.onStyleRemoved(kt);this.resetHostNodes()}addHost(Xn){this.hostNodes.add(Xn);for(const kt of this.getAllStyles())this.addStyleToHost(Xn,kt)}removeHost(Xn){this.hostNodes.delete(Xn)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Xn){for(const kt of this.hostNodes)this.addStyleToHost(kt,Xn)}onStyleRemoved(Xn){var kt;const mt=this.styleRef;null===(kt=mt.get(Xn))||void 0===kt||null===(kt=kt.elements)||void 0===kt||kt.forEach(Ye=>Ye.remove()),mt.delete(Xn)}collectServerRenderedStyles(){var Xn;const kt=null===(Xn=this.doc.head)||void 0===Xn?void 0:Xn.querySelectorAll(`style[${Ht}="${this.appId}"]`);if(null!=kt&&kt.length){const mt=new Map;return kt.forEach(Ye=>{null!=Ye.textContent&&mt.set(Ye.textContent,Ye)}),mt}return null}changeUsageCount(Xn,kt){const mt=this.styleRef;if(mt.has(Xn)){const Ye=mt.get(Xn);return Ye.usage+=kt,Ye.usage}return mt.set(Xn,{usage:kt,elements:[]}),kt}getStyleElement(Xn,kt){const mt=this.styleNodesInDOM,Ye=null==mt?void 0:mt.get(kt);if((null==Ye?void 0:Ye.parentNode)===Xn)return mt.delete(kt),Ye.removeAttribute(Ht),Ye;{const Mt=this.doc.createElement("style");return this.nonce&&Mt.setAttribute("nonce",this.nonce),Mt.textContent=kt,this.platformIsServer&&Mt.setAttribute(Ht,this.appId),Xn.appendChild(Mt),Mt}}addStyleToHost(Xn,kt){var mt;const Ye=this.getStyleElement(Xn,kt),Mt=this.styleRef,Jt=null===(mt=Mt.get(kt))||void 0===mt?void 0:mt.elements;Jt?Jt.push(Ye):Mt.set(kt,{elements:[Ye],usage:1})}resetHostNodes(){const Xn=this.hostNodes;Xn.clear(),Xn.add(this.doc.head)}}return(Wi=ei).\u0275fac=function(Xn){return new(Xn||Wi)(se.KVO(V.qQ),se.KVO(se.sZ2),se.KVO(se.BIS,8),se.KVO(se.Agw))},Wi.\u0275prov=se.jDH({token:Wi,factory:Wi.\u0275fac}),ei})();const un={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xn=/%COMP%/g,qn=new se.nKC("",{providedIn:"root",factory:()=>!0});function vn(Wi,ei){return ei.map(Pi=>Pi.replace(xn,Wi))}let Pn=(()=>{var Wi;class ei{constructor(Xn,kt,mt,Ye,Mt,Jt,Bn,Lt=null){this.eventManager=Xn,this.sharedStylesHost=kt,this.appId=mt,this.removeStylesOnCompDestroy=Ye,this.doc=Mt,this.platformId=Jt,this.ngZone=Bn,this.nonce=Lt,this.rendererByCompId=new Map,this.platformIsServer=(0,V.Vy)(Jt),this.defaultRenderer=new ki(Xn,Mt,Bn,this.platformIsServer)}createRenderer(Xn,kt){if(!Xn||!kt)return this.defaultRenderer;this.platformIsServer&&kt.encapsulation===se.gXe.ShadowDom&&(kt={...kt,encapsulation:se.gXe.Emulated});const mt=this.getOrCreateRenderer(Xn,kt);return mt instanceof Cn?mt.applyToHost(Xn):mt instanceof On&&mt.applyStyles(),mt}getOrCreateRenderer(Xn,kt){const mt=this.rendererByCompId;let Ye=mt.get(kt.id);if(!Ye){const Mt=this.doc,Jt=this.ngZone,Bn=this.eventManager,Lt=this.sharedStylesHost,Ie=this.removeStylesOnCompDestroy,ue=this.platformIsServer;switch(kt.encapsulation){case se.gXe.Emulated:Ye=new Cn(Bn,Lt,kt,this.appId,Ie,Mt,Jt,ue);break;case se.gXe.ShadowDom:return new Rt(Bn,Lt,Xn,kt,Mt,Jt,this.nonce,ue);default:Ye=new On(Bn,Lt,kt,Ie,Mt,Jt,ue)}mt.set(kt.id,Ye)}return Ye}ngOnDestroy(){this.rendererByCompId.clear()}}return(Wi=ei).\u0275fac=function(Xn){return new(Xn||Wi)(se.KVO(C),se.KVO(vt),se.KVO(se.sZ2),se.KVO(qn),se.KVO(V.qQ),se.KVO(se.Agw),se.KVO(se.SKi),se.KVO(se.BIS))},Wi.\u0275prov=se.jDH({token:Wi,factory:Wi.\u0275fac}),ei})();class ki{constructor(ei,Pi,Xn,kt){this.eventManager=ei,this.doc=Pi,this.ngZone=Xn,this.platformIsServer=kt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(ei,Pi){return Pi?this.doc.createElementNS(un[Pi]||Pi,ei):this.doc.createElement(ei)}createComment(ei){return this.doc.createComment(ei)}createText(ei){return this.doc.createTextNode(ei)}appendChild(ei,Pi){(pn(ei)?ei.content:ei).appendChild(Pi)}insertBefore(ei,Pi,Xn){ei&&(pn(ei)?ei.content:ei).insertBefore(Pi,Xn)}removeChild(ei,Pi){ei&&ei.removeChild(Pi)}selectRootElement(ei,Pi){let Xn="string"==typeof ei?this.doc.querySelector(ei):ei;if(!Xn)throw new se.wOt(-5104,!1);return Pi||(Xn.textContent=""),Xn}parentNode(ei){return ei.parentNode}nextSibling(ei){return ei.nextSibling}setAttribute(ei,Pi,Xn,kt){if(kt){Pi=kt+":"+Pi;const mt=un[kt];mt?ei.setAttributeNS(mt,Pi,Xn):ei.setAttribute(Pi,Xn)}else ei.setAttribute(Pi,Xn)}removeAttribute(ei,Pi,Xn){if(Xn){const kt=un[Xn];kt?ei.removeAttributeNS(kt,Pi):ei.removeAttribute(`${Xn}:${Pi}`)}else ei.removeAttribute(Pi)}addClass(ei,Pi){ei.classList.add(Pi)}removeClass(ei,Pi){ei.classList.remove(Pi)}setStyle(ei,Pi,Xn,kt){kt&(se.czy.DashCase|se.czy.Important)?ei.style.setProperty(Pi,Xn,kt&se.czy.Important?"important":""):ei.style[Pi]=Xn}removeStyle(ei,Pi,Xn){Xn&se.czy.DashCase?ei.style.removeProperty(Pi):ei.style[Pi]=""}setProperty(ei,Pi,Xn){null!=ei&&(ei[Pi]=Xn)}setValue(ei,Pi){ei.nodeValue=Pi}listen(ei,Pi,Xn){if("string"==typeof ei&&!(ei=(0,V.QT)().getGlobalEventTarget(this.doc,ei)))throw new Error(`Unsupported event target ${ei} for event ${Pi}`);return this.eventManager.addEventListener(ei,Pi,this.decoratePreventDefault(Xn))}decoratePreventDefault(ei){return Pi=>{if("__ngUnwrap__"===Pi)return ei;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ei(Pi)):ei(Pi))&&Pi.preventDefault()}}}function pn(Wi){return"TEMPLATE"===Wi.tagName&&void 0!==Wi.content}class Rt extends ki{constructor(ei,Pi,Xn,kt,mt,Ye,Mt,Jt){super(ei,mt,Ye,Jt),this.sharedStylesHost=Pi,this.hostEl=Xn,this.shadowRoot=Xn.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Bn=vn(kt.id,kt.styles);for(const Lt of Bn){const Ie=document.createElement("style");Mt&&Ie.setAttribute("nonce",Mt),Ie.textContent=Lt,this.shadowRoot.appendChild(Ie)}}nodeOrShadowRoot(ei){return ei===this.hostEl?this.shadowRoot:ei}appendChild(ei,Pi){return super.appendChild(this.nodeOrShadowRoot(ei),Pi)}insertBefore(ei,Pi,Xn){return super.insertBefore(this.nodeOrShadowRoot(ei),Pi,Xn)}removeChild(ei,Pi){return super.removeChild(this.nodeOrShadowRoot(ei),Pi)}parentNode(ei){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ei)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class On extends ki{constructor(ei,Pi,Xn,kt,mt,Ye,Mt,Jt){super(ei,mt,Ye,Mt),this.sharedStylesHost=Pi,this.removeStylesOnCompDestroy=kt,this.styles=Jt?vn(Jt,Xn.styles):Xn.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Cn extends On{constructor(ei,Pi,Xn,kt,mt,Ye,Mt,Jt){const Bn=kt+"-"+Xn.id;super(ei,Pi,Xn,mt,Ye,Mt,Jt,Bn),this.contentAttr=function xt(Wi){return"_ngcontent-%COMP%".replace(xn,Wi)}(Bn),this.hostAttr=function Ot(Wi){return"_nghost-%COMP%".replace(xn,Wi)}(Bn)}applyToHost(ei){this.applyStyles(),this.setAttribute(ei,this.hostAttr,"")}createElement(ei,Pi){const Xn=super.createElement(ei,Pi);return super.setAttribute(Xn,this.contentAttr,""),Xn}}let so=(()=>{var Wi;class ei extends At{constructor(Xn){super(Xn)}supports(Xn){return!0}addEventListener(Xn,kt,mt){return Xn.addEventListener(kt,mt,!1),()=>this.removeEventListener(Xn,kt,mt)}removeEventListener(Xn,kt,mt){return Xn.removeEventListener(kt,mt)}}return(Wi=ei).\u0275fac=function(Xn){return new(Xn||Wi)(se.KVO(V.qQ))},Wi.\u0275prov=se.jDH({token:Wi,factory:Wi.\u0275fac}),ei})(),Fn=(()=>{var Wi;class ei extends At{constructor(Xn){super(Xn),this.delegate=(0,se.WQX)(se.zAP,{optional:!0})}supports(Xn){return!!this.delegate&&this.delegate.supports(Xn)}addEventListener(Xn,kt,mt){return this.delegate.addEventListener(Xn,kt,mt)}removeEventListener(Xn,kt,mt){return this.delegate.removeEventListener(Xn,kt,mt)}}return(Wi=ei).\u0275fac=function(Xn){return new(Xn||Wi)(se.KVO(V.qQ))},Wi.\u0275prov=se.jDH({token:Wi,factory:Wi.\u0275fac}),ei})();const Ke=["alt","control","meta","shift"],Ae={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ge={alt:Wi=>Wi.altKey,control:Wi=>Wi.ctrlKey,meta:Wi=>Wi.metaKey,shift:Wi=>Wi.shiftKey};let tt=(()=>{var Wi;class ei extends At{constructor(Xn){super(Xn)}supports(Xn){return null!=ei.parseEventName(Xn)}addEventListener(Xn,kt,mt){const Ye=ei.parseEventName(kt),Mt=ei.eventCallback(Ye.fullKey,mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,V.QT)().onAndCancel(Xn,Ye.domEventName,Mt))}static parseEventName(Xn){const kt=Xn.toLowerCase().split("."),mt=kt.shift();if(0===kt.length||"keydown"!==mt&&"keyup"!==mt)return null;const Ye=ei._normalizeKey(kt.pop());let Mt="",Jt=kt.indexOf("code");if(Jt>-1&&(kt.splice(Jt,1),Mt="code."),Ke.forEach(Lt=>{const Ie=kt.indexOf(Lt);Ie>-1&&(kt.splice(Ie,1),Mt+=Lt+".")}),Mt+=Ye,0!=kt.length||0===Ye.length)return null;const Bn={};return Bn.domEventName=mt,Bn.fullKey=Mt,Bn}static matchEventFullKeyCode(Xn,kt){let mt=Ae[Xn.key]||Xn.key,Ye="";return kt.indexOf("code.")>-1&&(mt=Xn.code,Ye="code."),!(null==mt||!mt)&&(mt=mt.toLowerCase()," "===mt?mt="space":"."===mt&&(mt="dot"),Ke.forEach(Mt=>{Mt!==mt&&(0,Ge[Mt])(Xn)&&(Ye+=Mt+".")}),Ye+=mt,Ye===kt)}static eventCallback(Xn,kt,mt){return Ye=>{ei.matchEventFullKeyCode(Ye,Xn)&&mt.runGuarded(()=>kt(Ye))}}static _normalizeKey(Xn){return"esc"===Xn?"escape":Xn}}return(Wi=ei).\u0275fac=function(Xn){return new(Xn||Wi)(se.KVO(V.qQ))},Wi.\u0275prov=se.jDH({token:Wi,factory:Wi.\u0275fac}),ei})();function zt(Wi,ei){return(0,se.TL3)({rootComponent:Wi,...cn(ei)})}function cn(Wi){var ei;return{appProviders:[...br,...null!==(ei=null==Wi?void 0:Wi.providers)&&void 0!==ei?ei:[]],platformProviders:zr}}const zr=[{provide:se.Agw,useValue:V.AJ},{provide:se.PLl,useValue:function to(){l.makeCurrent()},multi:!0},{provide:V.qQ,useFactory:function jo(){return(0,se.TL$)(document),document},deps:[]}],br=[{provide:se.H8p,useValue:"root"},{provide:se.zcH,useFactory:function pr(){return new se.zcH},deps:[]},{provide:It,useClass:so,multi:!0,deps:[V.qQ,se.SKi,se.Agw]},{provide:It,useClass:tt,multi:!0,deps:[V.qQ]},{provide:It,useClass:Fn,multi:!0},Pn,vt,C,{provide:se._9s,useExisting:Pn},{provide:V.N0,useClass:Ut,deps:[]},[]];let ao=(()=>{var Wi;class ei{constructor(Xn){this._doc=Xn}getTitle(){return this._doc.title}setTitle(Xn){this._doc.title=Xn||""}}return(Wi=ei).\u0275fac=function(Xn){return new(Xn||Wi)(se.KVO(V.qQ))},Wi.\u0275prov=se.jDH({token:Wi,factory:Wi.\u0275fac,providedIn:"root"}),ei})()},8573:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{nX:()=>cr,Zp:()=>Nn,Z:()=>ds,Xk:()=>$i,Kp:()=>gd,b:()=>Pr,Ix:()=>Sl,Wk:()=>md,wQ:()=>Bl,n3:()=>Hc,Sd:()=>as,lh:()=>Ru,lG:()=>Yc,Sn:()=>Yd});var V=_e(3953),se=_e(1985),ne=_e(8071),qe=_e(8455),Y=_e(7673),ft=_e(4412),Xt=_e(4572);const It=(0,_e(1853).L)(oe=>function(){oe(this),this.name="EmptyError",this.message="no elements in sequence"});var C=_e(8793),At=_e(9030),Ht=_e(1203),vt=_e(8810),un=_e(983),xn=_e(17),on=_e(1413),ht=_e(8359),Jn=_e(177),An=_e(6354),qn=_e(5558),xt=_e(6697),Ot=_e(9326),vn=_e(9974),ki=_e(5964),Ct=_e(1397),Me=_e(4360);function pn(oe){return(0,vn.N)((me,Se)=>{let ge=!1;me.subscribe((0,Me._)(Se,Ve=>{ge=!0,Se.next(Ve)},()=>{ge||Se.next(oe),Se.complete()}))})}function Rt(oe=On){return(0,vn.N)((me,Se)=>{let ge=!1;me.subscribe((0,Me._)(Se,Ve=>{ge=!0,Se.next(Ve)},()=>ge?Se.complete():Se.error(oe())))})}function On(){return new It}var Cn=_e(3669);function so(oe,me){const Se=arguments.length>=2;return ge=>ge.pipe(oe?(0,ki.p)((Ve,St)=>oe(Ve,St,ge)):Cn.D,(0,xt.s)(1),Se?pn(me):Rt(()=>new It))}var Fn=_e(274),Ke=_e(8141),Ae=_e(8750);function Ge(oe){return(0,vn.N)((me,Se)=>{let St,ge=null,Ve=!1;ge=me.subscribe((0,Me._)(Se,void 0,void 0,Kt=>{St=(0,Ae.Tg)(oe(Kt,Ge(oe)(me))),ge?(ge.unsubscribe(),ge=null,St.subscribe(Se)):Ve=!0})),Ve&&(ge.unsubscribe(),ge=null,St.subscribe(Se))})}function Yn(oe){return oe<=0?()=>un.w:(0,vn.N)((me,Se)=>{let ge=[];me.subscribe((0,Me._)(Se,Ve=>{ge.push(Ve),oe<ge.length&&ge.shift()},()=>{for(const Ve of ge)Se.next(Ve);Se.complete()},void 0,()=>{ge=null}))})}var _o=_e(3703),to=_e(980),pr=_e(9898),jo=_e(5343),Mi=_e(6365),rs=_e(345);const $i="primary",br=Symbol("RouteTitle");class Jr{constructor(me){this.params=me||{}}has(me){return Object.prototype.hasOwnProperty.call(this.params,me)}get(me){if(this.has(me)){const Se=this.params[me];return Array.isArray(Se)?Se[0]:Se}return null}getAll(me){if(this.has(me)){const Se=this.params[me];return Array.isArray(Se)?Se:[Se]}return[]}get keys(){return Object.keys(this.params)}}function Li(oe){return new Jr(oe)}function yi(oe,me,Se){const ge=Se.path.split("/");if(ge.length>oe.length||"full"===Se.pathMatch&&(me.hasChildren()||ge.length<oe.length))return null;const Ve={};for(let St=0;St<ge.length;St++){const Kt=ge[St],Ci=oe[St];if(":"===Kt[0])Ve[Kt.substring(1)]=Ci;else if(Kt!==Ci.path)return null}return{consumed:oe.slice(0,ge.length),posParams:Ve}}function si(oe,me){const Se=oe?Fi(oe):void 0,ge=me?Fi(me):void 0;if(!Se||!ge||Se.length!=ge.length)return!1;let Ve;for(let St=0;St<Se.length;St++)if(Ve=Se[St],!mo(oe[Ve],me[Ve]))return!1;return!0}function Fi(oe){return[...Object.keys(oe),...Object.getOwnPropertySymbols(oe)]}function mo(oe,me){if(Array.isArray(oe)&&Array.isArray(me)){if(oe.length!==me.length)return!1;const Se=[...oe].sort(),ge=[...me].sort();return Se.every((Ve,St)=>ge[St]===Ve)}return oe===me}function eo(oe){return oe.length>0?oe[oe.length-1]:null}function es(oe){return function l(oe){return!!oe&&(oe instanceof se.c||(0,ne.T)(oe.lift)&&(0,ne.T)(oe.subscribe))}(oe)?oe:(0,V.jNT)(oe)?(0,qe.H)(Promise.resolve(oe)):(0,Y.of)(oe)}const Jo={exact:function Cs(oe,me,Se){if(!Gs(oe.segments,me.segments)||!Ho(oe.segments,me.segments,Se)||oe.numberOfChildren!==me.numberOfChildren)return!1;for(const ge in me.children)if(!oe.children[ge]||!Cs(oe.children[ge],me.children[ge],Se))return!1;return!0},subset:Kr},or={exact:function cs(oe,me){return si(oe,me)},subset:function Or(oe,me){return Object.keys(me).length<=Object.keys(oe).length&&Object.keys(me).every(Se=>mo(oe[Se],me[Se]))},ignored:()=>!0};function ti(oe,me,Se){return Jo[Se.paths](oe.root,me.root,Se.matrixParams)&&or[Se.queryParams](oe.queryParams,me.queryParams)&&!("exact"===Se.fragment&&oe.fragment!==me.fragment)}function Kr(oe,me,Se){return Qr(oe,me,me.segments,Se)}function Qr(oe,me,Se,ge){if(oe.segments.length>Se.length){const Ve=oe.segments.slice(0,Se.length);return!(!Gs(Ve,Se)||me.hasChildren()||!Ho(Ve,Se,ge))}if(oe.segments.length===Se.length){if(!Gs(oe.segments,Se)||!Ho(oe.segments,Se,ge))return!1;for(const Ve in me.children)if(!oe.children[Ve]||!Kr(oe.children[Ve],me.children[Ve],ge))return!1;return!0}{const Ve=Se.slice(0,oe.segments.length),St=Se.slice(oe.segments.length);return!!(Gs(oe.segments,Ve)&&Ho(oe.segments,Ve,ge)&&oe.children[$i])&&Qr(oe.children[$i],me,St,ge)}}function Ho(oe,me,Se){return me.every((ge,Ve)=>or[Se](oe[Ve].parameters,ge.parameters))}class Nr{constructor(me=new ir([],{}),Se={},ge=null){this.root=me,this.queryParams=Se,this.fragment=ge}get queryParamMap(){var me;return null!==(me=this._queryParamMap)&&void 0!==me||(this._queryParamMap=Li(this.queryParams)),this._queryParamMap}toString(){return Xs.serialize(this)}}class ir{constructor(me,Se){this.segments=me,this.children=Se,this.parent=null,Object.values(Se).forEach(ge=>ge.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vs(this)}}class _r{constructor(me,Se){this.path=me,this.parameters=Se}get parameterMap(){var me;return null!==(me=this._parameterMap)&&void 0!==me||(this._parameterMap=Li(this.parameters)),this._parameterMap}toString(){return Ye(this)}}function Gs(oe,me){return oe.length===me.length&&oe.every((Se,ge)=>Se.path===me[ge].path)}let as=(()=>{var oe;class me{}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:()=>new Lr,providedIn:"root"}),me})();class Lr{parse(me){const Se=new qt(me);return new Nr(Se.parseRootSegment(),Se.parseQueryParams(),Se.parseFragment())}serialize(me){const Se=`/${Hr(me.root,!0)}`,ge=function Jt(oe){const me=Object.entries(oe).map(([Se,ge])=>Array.isArray(ge)?ge.map(Ve=>`${ei(Se)}=${ei(Ve)}`).join("&"):`${ei(Se)}=${ei(ge)}`).filter(Se=>Se);return me.length?`?${me.join("&")}`:""}(me.queryParams);return`${Se}${ge}${"string"==typeof me.fragment?`#${function Pi(oe){return encodeURI(oe)}(me.fragment)}`:""}`}}const Xs=new Lr;function vs(oe){return oe.segments.map(me=>Ye(me)).join("/")}function Hr(oe,me){if(!oe.hasChildren())return vs(oe);if(me){const Se=oe.children[$i]?Hr(oe.children[$i],!1):"",ge=[];return Object.entries(oe.children).forEach(([Ve,St])=>{Ve!==$i&&ge.push(`${Ve}:${Hr(St,!1)}`)}),ge.length>0?`${Se}(${ge.join("//")})`:Se}{const Se=function ni(oe,me){let Se=[];return Object.entries(oe.children).forEach(([ge,Ve])=>{ge===$i&&(Se=Se.concat(me(Ve,ge)))}),Object.entries(oe.children).forEach(([ge,Ve])=>{ge!==$i&&(Se=Se.concat(me(Ve,ge)))}),Se}(oe,(ge,Ve)=>Ve===$i?[Hr(oe.children[$i],!1)]:[`${Ve}:${Hr(ge,!1)}`]);return 1===Object.keys(oe.children).length&&null!=oe.children[$i]?`${vs(oe)}/${Se[0]}`:`${vs(oe)}/(${Se.join("//")})`}}function Wi(oe){return encodeURIComponent(oe).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ei(oe){return Wi(oe).replace(/%3B/gi,";")}function Xn(oe){return Wi(oe).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kt(oe){return decodeURIComponent(oe)}function mt(oe){return kt(oe.replace(/\+/g,"%20"))}function Ye(oe){return`${Xn(oe.path)}${function Mt(oe){return Object.entries(oe).map(([me,Se])=>`;${Xn(me)}=${Xn(Se)}`).join("")}(oe.parameters)}`}const Bn=/^[^\/()?;#]+/;function Lt(oe){const me=oe.match(Bn);return me?me[0]:""}const Ie=/^[^\/()?;=#]+/,ae=/^[^=?&#]+/,Ue=/^[^&#]+/;class qt{constructor(me){this.url=me,this.remaining=me}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ir([],{}):new ir([],this.parseChildren())}parseQueryParams(){const me={};if(this.consumeOptional("?"))do{this.parseQueryParam(me)}while(this.consumeOptional("&"));return me}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const me=[];for(this.peekStartsWith("(")||me.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),me.push(this.parseSegment());let Se={};this.peekStartsWith("/(")&&(this.capture("/"),Se=this.parseParens(!0));let ge={};return this.peekStartsWith("(")&&(ge=this.parseParens(!1)),(me.length>0||Object.keys(Se).length>0)&&(ge[$i]=new ir(me,Se)),ge}parseSegment(){const me=Lt(this.remaining);if(""===me&&this.peekStartsWith(";"))throw new V.wOt(4009,!1);return this.capture(me),new _r(kt(me),this.parseMatrixParams())}parseMatrixParams(){const me={};for(;this.consumeOptional(";");)this.parseParam(me);return me}parseParam(me){const Se=function ue(oe){const me=oe.match(Ie);return me?me[0]:""}(this.remaining);if(!Se)return;this.capture(Se);let ge="";if(this.consumeOptional("=")){const Ve=Lt(this.remaining);Ve&&(ge=Ve,this.capture(ge))}me[kt(Se)]=kt(ge)}parseQueryParam(me){const Se=function we(oe){const me=oe.match(ae);return me?me[0]:""}(this.remaining);if(!Se)return;this.capture(Se);let ge="";if(this.consumeOptional("=")){const Kt=function it(oe){const me=oe.match(Ue);return me?me[0]:""}(this.remaining);Kt&&(ge=Kt,this.capture(ge))}const Ve=mt(Se),St=mt(ge);if(me.hasOwnProperty(Ve)){let Kt=me[Ve];Array.isArray(Kt)||(Kt=[Kt],me[Ve]=Kt),Kt.push(St)}else me[Ve]=St}parseParens(me){const Se={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const ge=Lt(this.remaining),Ve=this.remaining[ge.length];if("/"!==Ve&&")"!==Ve&&";"!==Ve)throw new V.wOt(4010,!1);let St;ge.indexOf(":")>-1?(St=ge.slice(0,ge.indexOf(":")),this.capture(St),this.capture(":")):me&&(St=$i);const Kt=this.parseChildren();Se[St]=1===Object.keys(Kt).length?Kt[$i]:new ir([],Kt),this.consumeOptional("//")}return Se}peekStartsWith(me){return this.remaining.startsWith(me)}consumeOptional(me){return!!this.peekStartsWith(me)&&(this.remaining=this.remaining.substring(me.length),!0)}capture(me){if(!this.consumeOptional(me))throw new V.wOt(4011,!1)}}function En(oe){return oe.segments.length>0?new ir([],{[$i]:oe}):oe}function dn(oe){const me={};for(const[ge,Ve]of Object.entries(oe.children)){const St=dn(Ve);if(ge===$i&&0===St.segments.length&&St.hasChildren())for(const[Kt,Ci]of Object.entries(St.children))me[Kt]=Ci;else(St.segments.length>0||St.hasChildren())&&(me[ge]=St)}return function Gn(oe){if(1===oe.numberOfChildren&&oe.children[$i]){const me=oe.children[$i];return new ir(oe.segments.concat(me.segments),me.children)}return oe}(new ir(oe.segments,me))}function Bi(oe){return oe instanceof Nr}function Bo(oe){var me;let Se;const St=En(function ge(Kt){const Ci={};for(const Ei of Kt.children){const kr=ge(Ei);Ci[Ei.outlet]=kr}const xo=new ir(Kt.url,Ci);return Kt===oe&&(Se=xo),xo}(oe.root));return null!==(me=Se)&&void 0!==me?me:St}function rr(oe,me,Se,ge){let Ve=oe;for(;Ve.parent;)Ve=Ve.parent;if(0===me.length)return hi(Ve,Ve,Ve,Se,ge);const St=function Yt(oe){if("string"==typeof oe[0]&&1===oe.length&&"/"===oe[0])return new Zi(!0,0,oe);let me=0,Se=!1;const ge=oe.reduce((Ve,St,Kt)=>{if("object"==typeof St&&null!=St){if(St.outlets){const Ci={};return Object.entries(St.outlets).forEach(([xo,Ei])=>{Ci[xo]="string"==typeof Ei?Ei.split("/"):Ei}),[...Ve,{outlets:Ci}]}if(St.segmentPath)return[...Ve,St.segmentPath]}return"string"!=typeof St?[...Ve,St]:0===Kt?(St.split("/").forEach((Ci,xo)=>{0==xo&&"."===Ci||(0==xo&&""===Ci?Se=!0:".."===Ci?me++:""!=Ci&&Ve.push(Ci))}),Ve):[...Ve,St]},[]);return new Zi(Se,me,ge)}(me);if(St.toRoot())return hi(Ve,Ve,new ir([],{}),Se,ge);const Kt=function Ri(oe,me,Se){if(oe.isAbsolute)return new ri(me,!0,0);if(!Se)return new ri(me,!1,NaN);if(null===Se.parent)return new ri(Se,!0,0);const ge=oi(oe.commands[0])?0:1;return function Uo(oe,me,Se){let ge=oe,Ve=me,St=Se;for(;St>Ve;){if(St-=Ve,ge=ge.parent,!ge)throw new V.wOt(4005,!1);Ve=ge.segments.length}return new ri(ge,!1,Ve-St)}(Se,Se.segments.length-1+ge,oe.numberOfDoubleDots)}(St,Ve,oe),Ci=Kt.processChildren?Vr(Kt.segmentGroup,Kt.index,St.commands):ss(Kt.segmentGroup,Kt.index,St.commands);return hi(Ve,Kt.segmentGroup,Ci,Se,ge)}function oi(oe){return"object"==typeof oe&&null!=oe&&!oe.outlets&&!oe.segmentPath}function Vn(oe){return"object"==typeof oe&&null!=oe&&oe.outlets}function hi(oe,me,Se,ge,Ve){let Kt,St={};ge&&Object.entries(ge).forEach(([xo,Ei])=>{St[xo]=Array.isArray(Ei)?Ei.map(kr=>`${kr}`):`${Ei}`}),Kt=oe===me?Se:po(oe,me,Se);const Ci=En(dn(Kt));return new Nr(Ci,St,Ve)}function po(oe,me,Se){const ge={};return Object.entries(oe.children).forEach(([Ve,St])=>{ge[Ve]=St===me?Se:po(St,me,Se)}),new ir(oe.segments,ge)}class Zi{constructor(me,Se,ge){if(this.isAbsolute=me,this.numberOfDoubleDots=Se,this.commands=ge,me&&ge.length>0&&oi(ge[0]))throw new V.wOt(4003,!1);const Ve=ge.find(Vn);if(Ve&&Ve!==eo(ge))throw new V.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ri{constructor(me,Se,ge){this.segmentGroup=me,this.processChildren=Se,this.index=ge}}function ss(oe,me,Se){var ge;if(null!==(ge=oe)&&void 0!==ge||(oe=new ir([],{})),0===oe.segments.length&&oe.hasChildren())return Vr(oe,me,Se);const Ve=function Na(oe,me,Se){let ge=0,Ve=me;const St={match:!1,pathIndex:0,commandIndex:0};for(;Ve<oe.segments.length;){if(ge>=Se.length)return St;const Kt=oe.segments[Ve],Ci=Se[ge];if(Vn(Ci))break;const xo=`${Ci}`,Ei=ge<Se.length-1?Se[ge+1]:null;if(Ve>0&&void 0===xo)break;if(xo&&Ei&&"object"==typeof Ei&&void 0===Ei.outlets){if(!Ar(xo,Ei,Kt))return St;ge+=2}else{if(!Ar(xo,{},Kt))return St;ge++}Ve++}return{match:!0,pathIndex:Ve,commandIndex:ge}}(oe,me,Se),St=Se.slice(Ve.commandIndex);if(Ve.match&&Ve.pathIndex<oe.segments.length){const Kt=new ir(oe.segments.slice(0,Ve.pathIndex),{});return Kt.children[$i]=new ir(oe.segments.slice(Ve.pathIndex),oe.children),Vr(Kt,0,St)}return Ve.match&&0===St.length?new ir(oe.segments,{}):Ve.match&&!oe.hasChildren()?Rl(oe,me,Se):Ve.match?Vr(oe,0,St):Rl(oe,me,Se)}function Vr(oe,me,Se){if(0===Se.length)return new ir(oe.segments,{});{const ge=function mr(oe){return Vn(oe[0])?oe[0].outlets:{[$i]:oe}}(Se),Ve={};if(Object.keys(ge).some(St=>St!==$i)&&oe.children[$i]&&1===oe.numberOfChildren&&0===oe.children[$i].segments.length){const St=Vr(oe.children[$i],me,Se);return new ir(oe.segments,St.children)}return Object.entries(ge).forEach(([St,Kt])=>{"string"==typeof Kt&&(Kt=[Kt]),null!==Kt&&(Ve[St]=ss(oe.children[St],me,Kt))}),Object.entries(oe.children).forEach(([St,Kt])=>{void 0===ge[St]&&(Ve[St]=Kt)}),new ir(oe.segments,Ve)}}function Rl(oe,me,Se){const ge=oe.segments.slice(0,me);let Ve=0;for(;Ve<Se.length;){const St=Se[Ve];if(Vn(St)){const xo=Du(St.outlets);return new ir(ge,xo)}if(0===Ve&&oi(Se[0])){ge.push(new _r(oe.segments[me].path,Ra(Se[0]))),Ve++;continue}const Kt=Vn(St)?St.outlets[$i]:`${St}`,Ci=Ve<Se.length-1?Se[Ve+1]:null;Kt&&Ci&&oi(Ci)?(ge.push(new _r(Kt,Ra(Ci))),Ve+=2):(ge.push(new _r(Kt,{})),Ve++)}return new ir(ge,{})}function Du(oe){const me={};return Object.entries(oe).forEach(([Se,ge])=>{"string"==typeof ge&&(ge=[ge]),null!==ge&&(me[Se]=Rl(new ir([],{}),0,ge))}),me}function Ra(oe){const me={};return Object.entries(oe).forEach(([Se,ge])=>me[Se]=`${ge}`),me}function Ar(oe,me,Se){return oe==Se.path&&si(me,Se.parameters)}const Hi="imperative";var Zo=function(oe){return oe[oe.NavigationStart=0]="NavigationStart",oe[oe.NavigationEnd=1]="NavigationEnd",oe[oe.NavigationCancel=2]="NavigationCancel",oe[oe.NavigationError=3]="NavigationError",oe[oe.RoutesRecognized=4]="RoutesRecognized",oe[oe.ResolveStart=5]="ResolveStart",oe[oe.ResolveEnd=6]="ResolveEnd",oe[oe.GuardsCheckStart=7]="GuardsCheckStart",oe[oe.GuardsCheckEnd=8]="GuardsCheckEnd",oe[oe.RouteConfigLoadStart=9]="RouteConfigLoadStart",oe[oe.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",oe[oe.ChildActivationStart=11]="ChildActivationStart",oe[oe.ChildActivationEnd=12]="ChildActivationEnd",oe[oe.ActivationStart=13]="ActivationStart",oe[oe.ActivationEnd=14]="ActivationEnd",oe[oe.Scroll=15]="Scroll",oe[oe.NavigationSkipped=16]="NavigationSkipped",oe}(Zo||{});class Tr{constructor(me,Se){this.id=me,this.url=Se}}class ds extends Tr{constructor(me,Se,ge="imperative",Ve=null){super(me,Se),this.type=Zo.NavigationStart,this.navigationTrigger=ge,this.restoredState=Ve}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vs extends Tr{constructor(me,Se,ge){super(me,Se),this.urlAfterRedirects=ge,this.type=Zo.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ys=function(oe){return oe[oe.Redirect=0]="Redirect",oe[oe.SupersededByNewNavigation=1]="SupersededByNewNavigation",oe[oe.NoDataFromResolver=2]="NoDataFromResolver",oe[oe.GuardRejected=3]="GuardRejected",oe}(Ys||{}),sa=function(oe){return oe[oe.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",oe[oe.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",oe}(sa||{});class va extends Tr{constructor(me,Se,ge,Ve){super(me,Se),this.reason=ge,this.code=Ve,this.type=Zo.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ol extends Tr{constructor(me,Se,ge,Ve){super(me,Se),this.reason=ge,this.code=Ve,this.type=Zo.NavigationSkipped}}class Fa extends Tr{constructor(me,Se,ge,Ve){super(me,Se),this.error=ge,this.target=Ve,this.type=Zo.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ru extends Tr{constructor(me,Se,ge,Ve){super(me,Se),this.urlAfterRedirects=ge,this.state=Ve,this.type=Zo.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _u extends Tr{constructor(me,Se,ge,Ve){super(me,Se),this.urlAfterRedirects=ge,this.state=Ve,this.type=Zo.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ia extends Tr{constructor(me,Se,ge,Ve,St){super(me,Se),this.urlAfterRedirects=ge,this.state=Ve,this.shouldActivate=St,this.type=Zo.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class su extends Tr{constructor(me,Se,ge,Ve){super(me,Se),this.urlAfterRedirects=ge,this.state=Ve,this.type=Zo.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dl extends Tr{constructor(me,Se,ge,Ve){super(me,Se),this.urlAfterRedirects=ge,this.state=Ve,this.type=Zo.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pa{constructor(me){this.route=me,this.type=Zo.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Uc{constructor(me){this.route=me,this.type=Zo.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hu{constructor(me){this.snapshot=me,this.type=Zo.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gu{constructor(me){this.snapshot=me,this.type=Zo.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zl{constructor(me){this.snapshot=me,this.type=Zo.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ks{constructor(me){this.snapshot=me,this.type=Zo.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fc{}class au{constructor(me,Se){this.url=me,this.navigationBehaviorOptions=Se}}function Gr(oe){return oe.outlet||$i}function et(oe){var me;if(!oe)return null;if(null!==(me=oe.routeConfig)&&void 0!==me&&me._injector)return oe.routeConfig._injector;for(let Se=oe.parent;Se;Se=Se.parent){const ge=Se.routeConfig;if(null!=ge&&ge._loadedInjector)return ge._loadedInjector;if(null!=ge&&ge._injector)return ge._injector}return null}class Dt{get injector(){var me,Se;return null!==(me=et(null===(Se=this.route)||void 0===Se?void 0:Se.snapshot))&&void 0!==me?me:this.rootInjector}set injector(me){}constructor(me){this.rootInjector=me,this.outlet=null,this.route=null,this.children=new Nn(this.rootInjector),this.attachRef=null}}let Nn=(()=>{var oe;class me{constructor(ge){this.rootInjector=ge,this.contexts=new Map}onChildOutletCreated(ge,Ve){const St=this.getOrCreateContext(ge);St.outlet=Ve,this.contexts.set(ge,St)}onChildOutletDestroyed(ge){const Ve=this.getContext(ge);Ve&&(Ve.outlet=null,Ve.attachRef=null)}onOutletDeactivated(){const ge=this.contexts;return this.contexts=new Map,ge}onOutletReAttached(ge){this.contexts=ge}getOrCreateContext(ge){let Ve=this.getContext(ge);return Ve||(Ve=new Dt(this.rootInjector),this.contexts.set(ge,Ve)),Ve}getContext(ge){return this.contexts.get(ge)||null}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)(V.KVO(V.uvJ))},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})();class Zn{constructor(me){this._root=me}get root(){return this._root.value}parent(me){const Se=this.pathFromRoot(me);return Se.length>1?Se[Se.length-2]:null}children(me){const Se=zn(me,this._root);return Se?Se.children.map(ge=>ge.value):[]}firstChild(me){const Se=zn(me,this._root);return Se&&Se.children.length>0?Se.children[0].value:null}siblings(me){const Se=vi(me,this._root);return Se.length<2?[]:Se[Se.length-2].children.map(Ve=>Ve.value).filter(Ve=>Ve!==me)}pathFromRoot(me){return vi(me,this._root).map(Se=>Se.value)}}function zn(oe,me){if(oe===me.value)return me;for(const Se of me.children){const ge=zn(oe,Se);if(ge)return ge}return null}function vi(oe,me){if(oe===me.value)return[me];for(const Se of me.children){const ge=vi(oe,Se);if(ge.length)return ge.unshift(me),ge}return[]}class go{constructor(me,Se){this.value=me,this.children=Se}toString(){return`TreeNode(${this.value})`}}function yo(oe){const me={};return oe&&oe.children.forEach(Se=>me[Se.value.outlet]=Se),me}class co extends Zn{constructor(me,Se){super(me),this.snapshot=Se,ca(this,me)}toString(){return this.snapshot.toString()}}function gi(oe){const me=function qo(oe){const St=new Wr([],{},{},"",{},$i,oe,null,{});return new Ts("",new go(St,[]))}(oe),Se=new ft.t([new _r("",{})]),ge=new ft.t({}),Ve=new ft.t({}),St=new ft.t({}),Kt=new ft.t(""),Ci=new cr(Se,ge,St,Kt,Ve,$i,oe,me.root);return Ci.snapshot=me.root,new co(new go(Ci,[]),me)}class cr{constructor(me,Se,ge,Ve,St,Kt,Ci,xo){var Ei,kr;this.urlSubject=me,this.paramsSubject=Se,this.queryParamsSubject=ge,this.fragmentSubject=Ve,this.dataSubject=St,this.outlet=Kt,this.component=Ci,this._futureSnapshot=xo,this.title=null!==(Ei=null===(kr=this.dataSubject)||void 0===kr?void 0:kr.pipe((0,An.T)(Ns=>Ns[br])))&&void 0!==Ei?Ei:(0,Y.of)(void 0),this.url=me,this.params=Se,this.queryParams=ge,this.fragment=Ve,this.data=St}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var me;return null!==(me=this._paramMap)&&void 0!==me||(this._paramMap=this.params.pipe((0,An.T)(Se=>Li(Se)))),this._paramMap}get queryParamMap(){var me;return null!==(me=this._queryParamMap)&&void 0!==me||(this._queryParamMap=this.queryParams.pipe((0,An.T)(Se=>Li(Se)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Er(oe,me,Se="emptyOnly"){var ge;let Ve;const{routeConfig:St}=oe;var Kt;return Ve=null===me||"always"!==Se&&""!==(null==St?void 0:St.path)&&(me.component||null!==(ge=me.routeConfig)&&void 0!==ge&&ge.loadComponent)?{params:{...oe.params},data:{...oe.data},resolve:{...oe.data,...null!==(Kt=oe._resolvedData)&&void 0!==Kt?Kt:{}}}:{params:{...me.params,...oe.params},data:{...me.data,...oe.data},resolve:{...oe.data,...me.data,...null==St?void 0:St.data,...oe._resolvedData}},St&&aa(St)&&(Ve.resolve[br]=St.title),Ve}class Wr{get title(){var me;return null===(me=this.data)||void 0===me?void 0:me[br]}constructor(me,Se,ge,Ve,St,Kt,Ci,xo,Ei){this.url=me,this.params=Se,this.queryParams=ge,this.fragment=Ve,this.data=St,this.outlet=Kt,this.component=Ci,this.routeConfig=xo,this._resolve=Ei}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var me;return null!==(me=this._paramMap)&&void 0!==me||(this._paramMap=Li(this.params)),this._paramMap}get queryParamMap(){var me;return null!==(me=this._queryParamMap)&&void 0!==me||(this._queryParamMap=Li(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(ge=>ge.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ts extends Zn{constructor(me,Se){super(Se),this.url=me,ca(this,Se)}toString(){return zs(this._root)}}function ca(oe,me){me.value._routerState=oe,me.children.forEach(Se=>ca(oe,Se))}function zs(oe){const me=oe.children.length>0?` { ${oe.children.map(zs).join(", ")} } `:"";return`${oe.value}${me}`}function Fr(oe){if(oe.snapshot){const me=oe.snapshot,Se=oe._futureSnapshot;oe.snapshot=Se,si(me.queryParams,Se.queryParams)||oe.queryParamsSubject.next(Se.queryParams),me.fragment!==Se.fragment&&oe.fragmentSubject.next(Se.fragment),si(me.params,Se.params)||oe.paramsSubject.next(Se.params),function ao(oe,me){if(oe.length!==me.length)return!1;for(let Se=0;Se<oe.length;++Se)if(!si(oe[Se],me[Se]))return!1;return!0}(me.url,Se.url)||oe.urlSubject.next(Se.url),si(me.data,Se.data)||oe.dataSubject.next(Se.data)}else oe.snapshot=oe._futureSnapshot,oe.dataSubject.next(oe._futureSnapshot.data)}function ts(oe,me){const Se=si(oe.params,me.params)&&function Dr(oe,me){return Gs(oe,me)&&oe.every((Se,ge)=>si(Se.parameters,me[ge].parameters))}(oe.url,me.url);return Se&&!(!oe.parent!=!me.parent)&&(!oe.parent||ts(oe.parent,me.parent))}function aa(oe){return"string"==typeof oe.title||null===oe.title}let Hc=(()=>{var oe;class me{constructor(){this.activated=null,this._activatedRoute=null,this.name=$i,this.activateEvents=new V.bkB,this.deactivateEvents=new V.bkB,this.attachEvents=new V.bkB,this.detachEvents=new V.bkB,this.parentContexts=(0,V.WQX)(Nn),this.location=(0,V.WQX)(V.c1b),this.changeDetector=(0,V.WQX)(V.gRc),this.inputBinder=(0,V.WQX)(Ms,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(ge){if(ge.name){const{firstChange:Ve,previousValue:St}=ge.name;if(Ve)return;this.isTrackedInParentContexts(St)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(St)),this.initializeOutletWithName()}}ngOnDestroy(){var ge;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(ge=this.inputBinder)||void 0===ge||ge.unsubscribeFromRouteData(this)}isTrackedInParentContexts(ge){var Ve;return(null===(Ve=this.parentContexts.getContext(ge))||void 0===Ve?void 0:Ve.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const ge=this.parentContexts.getContext(this.name);null!=ge&&ge.route&&(ge.attachRef?this.attach(ge.attachRef,ge.route):this.activateWith(ge.route,ge.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V.wOt(4012,!1);this.location.detach();const ge=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(ge.instance),ge}attach(ge,Ve){var St;this.activated=ge,this._activatedRoute=Ve,this.location.insert(ge.hostView),null===(St=this.inputBinder)||void 0===St||St.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(ge.instance)}deactivate(){if(this.activated){const ge=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(ge)}}activateWith(ge,Ve){var St;if(this.isActivated)throw new V.wOt(4013,!1);this._activatedRoute=ge;const Kt=this.location,xo=ge.snapshot.component,Ei=this.parentContexts.getOrCreateContext(this.name).children,kr=new fa(ge,Ei,Kt.injector);this.activated=Kt.createComponent(xo,{index:Kt.length,injector:kr,environmentInjector:Ve}),this.changeDetector.markForCheck(),null===(St=this.inputBinder)||void 0===St||St.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275dir=V.FsC({type:oe,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[V.OA$]}),me})();class fa{__ngOutletInjector(me){return new fa(this.route,this.childContexts,me)}constructor(me,Se,ge){this.route=me,this.childContexts=Se,this.parent=ge}get(me,Se){return me===cr?this.route:me===Nn?this.childContexts:this.parent.get(me,Se)}}const Ms=new V.nKC("");let Bc=(()=>{var oe;class me{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(ge){this.unsubscribeFromRouteData(ge),this.subscribeToRouteData(ge)}unsubscribeFromRouteData(ge){var Ve;null===(Ve=this.outletDataSubscriptions.get(ge))||void 0===Ve||Ve.unsubscribe(),this.outletDataSubscriptions.delete(ge)}subscribeToRouteData(ge){const{activatedRoute:Ve}=ge,St=(0,Xt.z)([Ve.queryParams,Ve.params,Ve.data]).pipe((0,qn.n)(([Kt,Ci,xo],Ei)=>(xo={...Kt,...Ci,...xo},0===Ei?(0,Y.of)(xo):Promise.resolve(xo)))).subscribe(Kt=>{if(!ge.isActivated||!ge.activatedComponentRef||ge.activatedRoute!==Ve||null===Ve.component)return void this.unsubscribeFromRouteData(ge);const Ci=(0,V.HJs)(Ve.component);if(Ci)for(const{templateName:xo}of Ci.inputs)ge.activatedComponentRef.setInput(xo,Kt[xo]);else this.unsubscribeFromRouteData(ge)});this.outletDataSubscriptions.set(ge,St)}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac}),me})();function Sc(oe,me,Se){if(Se&&oe.shouldReuseRoute(me.value,Se.value.snapshot)){const ge=Se.value;ge._futureSnapshot=me.value;const Ve=function Wu(oe,me,Se){return me.children.map(ge=>{for(const Ve of Se.children)if(oe.shouldReuseRoute(ge.value,Ve.value.snapshot))return Sc(oe,ge,Ve);return Sc(oe,ge)})}(oe,me,Se);return new go(ge,Ve)}{if(oe.shouldAttach(me.value)){const St=oe.retrieve(me.value);if(null!==St){const Kt=St.route;return Kt.value._futureSnapshot=me.value,Kt.children=me.children.map(Ci=>Sc(oe,Ci)),Kt}}const ge=function za(oe){return new cr(new ft.t(oe.url),new ft.t(oe.params),new ft.t(oe.queryParams),new ft.t(oe.fragment),new ft.t(oe.data),oe.outlet,oe.component,oe)}(me.value),Ve=me.children.map(St=>Sc(oe,St));return new go(ge,Ve)}}class Va{constructor(me,Se){this.redirectTo=me,this.navigationBehaviorOptions=Se}}const gl="ngNavigationCancelingError";function hl(oe,me){const{redirectTo:Se,navigationBehaviorOptions:ge}=Bi(me)?{redirectTo:me,navigationBehaviorOptions:void 0}:me,Ve=kd(!1,Ys.Redirect);return Ve.url=Se,Ve.navigationBehaviorOptions=ge,Ve}function kd(oe,me){const Se=new Error(`NavigationCancelingError: ${oe||""}`);return Se[gl]=!0,Se.cancellationCode=me,Se}function Re(oe){return!!oe&&oe[gl]}class an{constructor(me,Se,ge,Ve,St){this.routeReuseStrategy=me,this.futureState=Se,this.currState=ge,this.forwardEvent=Ve,this.inputBindingEnabled=St}activate(me){const Se=this.futureState._root,ge=this.currState?this.currState._root:null;this.deactivateChildRoutes(Se,ge,me),Fr(this.futureState.root),this.activateChildRoutes(Se,ge,me)}deactivateChildRoutes(me,Se,ge){const Ve=yo(Se);me.children.forEach(St=>{const Kt=St.value.outlet;this.deactivateRoutes(St,Ve[Kt],ge),delete Ve[Kt]}),Object.values(Ve).forEach(St=>{this.deactivateRouteAndItsChildren(St,ge)})}deactivateRoutes(me,Se,ge){const Ve=me.value,St=Se?Se.value:null;if(Ve===St)if(Ve.component){const Kt=ge.getContext(Ve.outlet);Kt&&this.deactivateChildRoutes(me,Se,Kt.children)}else this.deactivateChildRoutes(me,Se,ge);else St&&this.deactivateRouteAndItsChildren(Se,ge)}deactivateRouteAndItsChildren(me,Se){me.value.component&&this.routeReuseStrategy.shouldDetach(me.value.snapshot)?this.detachAndStoreRouteSubtree(me,Se):this.deactivateRouteAndOutlet(me,Se)}detachAndStoreRouteSubtree(me,Se){const ge=Se.getContext(me.value.outlet),Ve=ge&&me.value.component?ge.children:Se,St=yo(me);for(const Kt of Object.values(St))this.deactivateRouteAndItsChildren(Kt,Ve);if(ge&&ge.outlet){const Kt=ge.outlet.detach(),Ci=ge.children.onOutletDeactivated();this.routeReuseStrategy.store(me.value.snapshot,{componentRef:Kt,route:me,contexts:Ci})}}deactivateRouteAndOutlet(me,Se){const ge=Se.getContext(me.value.outlet),Ve=ge&&me.value.component?ge.children:Se,St=yo(me);for(const Kt of Object.values(St))this.deactivateRouteAndItsChildren(Kt,Ve);ge&&(ge.outlet&&(ge.outlet.deactivate(),ge.children.onOutletDeactivated()),ge.attachRef=null,ge.route=null)}activateChildRoutes(me,Se,ge){const Ve=yo(Se);me.children.forEach(St=>{this.activateRoutes(St,Ve[St.value.outlet],ge),this.forwardEvent(new ks(St.value.snapshot))}),me.children.length&&this.forwardEvent(new Gu(me.value.snapshot))}activateRoutes(me,Se,ge){const Ve=me.value,St=Se?Se.value:null;if(Fr(Ve),Ve===St)if(Ve.component){const Kt=ge.getOrCreateContext(Ve.outlet);this.activateChildRoutes(me,Se,Kt.children)}else this.activateChildRoutes(me,Se,ge);else if(Ve.component){const Kt=ge.getOrCreateContext(Ve.outlet);if(this.routeReuseStrategy.shouldAttach(Ve.snapshot)){const Ci=this.routeReuseStrategy.retrieve(Ve.snapshot);this.routeReuseStrategy.store(Ve.snapshot,null),Kt.children.onOutletReAttached(Ci.contexts),Kt.attachRef=Ci.componentRef,Kt.route=Ci.route.value,Kt.outlet&&Kt.outlet.attach(Ci.componentRef,Ci.route.value),Fr(Ci.route.value),this.activateChildRoutes(me,null,Kt.children)}else Kt.attachRef=null,Kt.route=Ve,Kt.outlet&&Kt.outlet.activateWith(Ve,Kt.injector),this.activateChildRoutes(me,null,Kt.children)}else this.activateChildRoutes(me,null,ge)}}class $n{constructor(me){this.path=me,this.route=this.path[this.path.length-1]}}class Un{constructor(me,Se){this.component=me,this.route=Se}}function Ai(oe,me,Se){const ge=oe._root;return lo(ge,me?me._root:null,Se,[ge.value])}function mi(oe,me){const Se=Symbol(),ge=me.get(oe,Se);return ge===Se?"function"!=typeof oe||(0,V.LfX)(oe)?me.get(oe):oe:ge}function lo(oe,me,Se,ge,Ve={canDeactivateChecks:[],canActivateChecks:[]}){const St=yo(me);return oe.children.forEach(Kt=>{(function Xo(oe,me,Se,ge,Ve={canDeactivateChecks:[],canActivateChecks:[]}){const St=oe.value,Kt=me?me.value:null,Ci=Se?Se.getContext(oe.value.outlet):null;if(Kt&&St.routeConfig===Kt.routeConfig){const xo=function hr(oe,me,Se){if("function"==typeof Se)return Se(oe,me);switch(Se){case"pathParamsChange":return!Gs(oe.url,me.url);case"pathParamsOrQueryParamsChange":return!Gs(oe.url,me.url)||!si(oe.queryParams,me.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ts(oe,me)||!si(oe.queryParams,me.queryParams);default:return!ts(oe,me)}}(Kt,St,St.routeConfig.runGuardsAndResolvers);xo?Ve.canActivateChecks.push(new $n(ge)):(St.data=Kt.data,St._resolvedData=Kt._resolvedData),lo(oe,me,St.component?Ci?Ci.children:null:Se,ge,Ve),xo&&Ci&&Ci.outlet&&Ci.outlet.isActivated&&Ve.canDeactivateChecks.push(new Un(Ci.outlet.component,Kt))}else Kt&&gr(me,Ci,Ve),Ve.canActivateChecks.push(new $n(ge)),lo(oe,null,St.component?Ci?Ci.children:null:Se,ge,Ve)})(Kt,St[Kt.value.outlet],Se,ge.concat([Kt.value]),Ve),delete St[Kt.value.outlet]}),Object.entries(St).forEach(([Kt,Ci])=>gr(Ci,Se.getContext(Kt),Ve)),Ve}function gr(oe,me,Se){const ge=yo(oe),Ve=oe.value;Object.entries(ge).forEach(([St,Kt])=>{gr(Kt,Ve.component?me?me.children.getContext(St):null:me,Se)}),Se.canDeactivateChecks.push(new Un(Ve.component&&me&&me.outlet&&me.outlet.isActivated?me.outlet.component:null,Ve))}function jr(oe){return"function"==typeof oe}function bu(oe){return oe instanceof It||"EmptyError"===(null==oe?void 0:oe.name)}const Ol=Symbol("INITIAL_VALUE");function sl(){return(0,qn.n)(oe=>(0,Xt.z)(oe.map(me=>me.pipe((0,xt.s)(1),function Pn(...oe){const me=(0,Ot.lI)(oe);return(0,vn.N)((Se,ge)=>{(me?(0,C.x)(oe,Se,me):(0,C.x)(oe,Se)).subscribe(ge)})}(Ol)))).pipe((0,An.T)(me=>{for(const Se of me)if(!0!==Se){if(Se===Ol)return Ol;if(!1===Se||Ca(Se))return Se}return!0}),(0,ki.p)(me=>me!==Ol),(0,xt.s)(1)))}function Ca(oe){return Bi(oe)||oe instanceof Va}function Tc(oe){return(0,Ht.F)((0,Ke.M)(me=>{if("boolean"!=typeof me)throw hl(0,me)}),(0,An.T)(me=>!0===me))}class ws{constructor(me){this.segmentGroup=me||null}}class Gc extends Error{constructor(me){super(),this.urlTree=me}}function Wc(oe){return(0,vt.$)(new ws(oe))}class qc{constructor(me,Se){this.urlSerializer=me,this.urlTree=Se}lineralizeSegments(me,Se){let ge=[],Ve=Se.root;for(;;){if(ge=ge.concat(Ve.segments),0===Ve.numberOfChildren)return(0,Y.of)(ge);if(Ve.numberOfChildren>1||!Ve.children[$i])return(0,vt.$)(new V.wOt(4e3,!1));Ve=Ve.children[$i]}}applyRedirectCommands(me,Se,ge,Ve,St){if("string"!=typeof Se){const Ci=Se,{queryParams:xo,fragment:Ei,routeConfig:kr,url:Ns,outlet:Oa,params:qs,data:Tl,title:Nl}=Ve,vc=(0,V.N4e)(St,()=>Ci({params:qs,data:Tl,queryParams:xo,fragment:Ei,routeConfig:kr,url:Ns,outlet:Oa,title:Nl}));if(vc instanceof Nr)throw new Gc(vc);Se=vc}const Kt=this.applyRedirectCreateUrlTree(Se,this.urlSerializer.parse(Se),me,ge);if("/"===Se[0])throw new Gc(Kt);return Kt}applyRedirectCreateUrlTree(me,Se,ge,Ve){const St=this.createSegmentGroup(me,Se.root,ge,Ve);return new Nr(St,this.createQueryParams(Se.queryParams,this.urlTree.queryParams),Se.fragment)}createQueryParams(me,Se){const ge={};return Object.entries(me).forEach(([Ve,St])=>{if("string"==typeof St&&":"===St[0]){const Ci=St.substring(1);ge[Ve]=Se[Ci]}else ge[Ve]=St}),ge}createSegmentGroup(me,Se,ge,Ve){const St=this.createSegments(me,Se.segments,ge,Ve);let Kt={};return Object.entries(Se.children).forEach(([Ci,xo])=>{Kt[Ci]=this.createSegmentGroup(me,xo,ge,Ve)}),new ir(St,Kt)}createSegments(me,Se,ge,Ve){return Se.map(St=>":"===St.path[0]?this.findPosParam(me,St,Ve):this.findOrReturn(St,ge))}findPosParam(me,Se,ge){const Ve=ge[Se.path.substring(1)];if(!Ve)throw new V.wOt(4001,!1);return Ve}findOrReturn(me,Se){let ge=0;for(const Ve of Se){if(Ve.path===me.path)return Se.splice(ge),Ve;ge++}return me}}const dh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pd(oe,me,Se,ge,Ve){const St=Td(oe,me,Se);return St.matched?(ge=function Ea(oe,me){var Se;return oe.providers&&!oe._injector&&(oe._injector=(0,V.Ol2)(oe.providers,me,`Route: ${oe.path}`)),null!==(Se=oe._injector)&&void 0!==Se?Se:me}(me,ge),function al(oe,me,Se,ge){const Ve=me.canMatch;if(!Ve||0===Ve.length)return(0,Y.of)(!0);const St=Ve.map(Kt=>{const Ci=mi(Kt,oe);return es(function $a(oe){return oe&&jr(oe.canMatch)}(Ci)?Ci.canMatch(me,Se):(0,V.N4e)(oe,()=>Ci(me,Se)))});return(0,Y.of)(St).pipe(sl(),Tc())}(ge,me,Se).pipe((0,An.T)(Kt=>!0===Kt?St:{...dh}))):(0,Y.of)(St)}function Td(oe,me,Se){var ge,Ve;if("**"===me.path)return function Vh(oe){return{matched:!0,parameters:oe.length>0?eo(oe).parameters:{},consumedSegments:oe,remainingSegments:[],positionalParamSegments:{}}}(Se);if(""===me.path)return"full"===me.pathMatch&&(oe.hasChildren()||Se.length>0)?{...dh}:{matched:!0,consumedSegments:[],remainingSegments:Se,parameters:{},positionalParamSegments:{}};const Kt=(me.matcher||yi)(Se,oe,me);if(!Kt)return{...dh};const Ci={};Object.entries(null!==(ge=Kt.posParams)&&void 0!==ge?ge:{}).forEach(([Ei,kr])=>{Ci[Ei]=kr.path});const xo=Kt.consumed.length>0?{...Ci,...Kt.consumed[Kt.consumed.length-1].parameters}:Ci;return{matched:!0,consumedSegments:Kt.consumed,remainingSegments:Se.slice(Kt.consumed.length),parameters:xo,positionalParamSegments:null!==(Ve=Kt.posParams)&&void 0!==Ve?Ve:{}}}function Nc(oe,me,Se,ge){return Se.length>0&&function Xd(oe,me,Se){return Se.some(ge=>uu(oe,me,ge)&&Gr(ge)!==$i)}(oe,Se,ge)?{segmentGroup:new ir(me,$h(ge,new ir(Se,oe.children))),slicedSegments:[]}:0===Se.length&&function Md(oe,me,Se){return Se.some(ge=>uu(oe,me,ge))}(oe,Se,ge)?{segmentGroup:new ir(oe.segments,w0(oe,Se,ge,oe.children)),slicedSegments:Se}:{segmentGroup:new ir(oe.segments,oe.children),slicedSegments:Se}}function w0(oe,me,Se,ge){const Ve={};for(const St of Se)if(uu(oe,me,St)&&!ge[Gr(St)]){const Kt=new ir([],{});Ve[Gr(St)]=Kt}return{...ge,...Ve}}function $h(oe,me){const Se={};Se[$i]=me;for(const ge of oe)if(""===ge.path&&Gr(ge)!==$i){const Ve=new ir([],{});Se[Gr(ge)]=Ve}return Se}function uu(oe,me,Se){return(!(oe.hasChildren()||me.length>0)||"full"!==Se.pathMatch)&&""===Se.path}class As{}class Ch{constructor(me,Se,ge,Ve,St,Kt,Ci){this.injector=me,this.configLoader=Se,this.rootComponentType=ge,this.config=Ve,this.urlTree=St,this.paramsInheritanceStrategy=Kt,this.urlSerializer=Ci,this.applyRedirects=new qc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(me){return new V.wOt(4002,`'${me.segmentGroup}'`)}recognize(){const me=Nc(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(me).pipe((0,An.T)(({children:Se,rootSnapshot:ge})=>{const Ve=new go(ge,Se),St=new Ts("",Ve),Kt=function Vi(oe,me,Se=null,ge=null){return rr(Bo(oe),me,Se,ge)}(ge,[],this.urlTree.queryParams,this.urlTree.fragment);return Kt.queryParams=this.urlTree.queryParams,St.url=this.urlSerializer.serialize(Kt),{state:St,tree:Kt}}))}match(me){const Se=new Wr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),$i,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,me,$i,Se).pipe((0,An.T)(ge=>({children:ge,rootSnapshot:Se})),Ge(ge=>{if(ge instanceof Gc)return this.urlTree=ge.urlTree,this.match(ge.urlTree.root);throw ge instanceof ws?this.noMatchError(ge):ge}))}processSegmentGroup(me,Se,ge,Ve,St){return 0===ge.segments.length&&ge.hasChildren()?this.processChildren(me,Se,ge,St):this.processSegment(me,Se,ge,ge.segments,Ve,!0,St).pipe((0,An.T)(Kt=>Kt instanceof go?[Kt]:[]))}processChildren(me,Se,ge,Ve){const St=[];for(const Kt of Object.keys(ge.children))"primary"===Kt?St.unshift(Kt):St.push(Kt);return(0,qe.H)(St).pipe((0,Fn.H)(Kt=>{const Ci=ge.children[Kt],xo=function rl(oe,me){const Se=oe.filter(ge=>Gr(ge)===me);return Se.push(...oe.filter(ge=>Gr(ge)!==me)),Se}(Se,Kt);return this.processSegmentGroup(me,xo,Ci,Kt,Ve)}),function zt(oe,me){return(0,vn.N)(function tt(oe,me,Se,ge,Ve){return(St,Kt)=>{let Ci=Se,xo=me,Ei=0;St.subscribe((0,Me._)(Kt,kr=>{const Ns=Ei++;xo=Ci?oe(xo,kr,Ns):(Ci=!0,kr),ge&&Kt.next(xo)},Ve&&(()=>{Ci&&Kt.next(xo),Kt.complete()})))}}(oe,me,arguments.length>=2,!0))}((Kt,Ci)=>(Kt.push(...Ci),Kt)),pn(null),function cn(oe,me){const Se=arguments.length>=2;return ge=>ge.pipe(oe?(0,ki.p)((Ve,St)=>oe(Ve,St,ge)):Cn.D,Yn(1),Se?pn(me):Rt(()=>new It))}(),(0,Ct.Z)(Kt=>{if(null===Kt)return Wc(ge);const Ci=Za(Kt);return function jh(oe){oe.sort((me,Se)=>me.value.outlet===$i?-1:Se.value.outlet===$i?1:me.value.outlet.localeCompare(Se.value.outlet))}(Ci),(0,Y.of)(Ci)}))}processSegment(me,Se,ge,Ve,St,Kt,Ci){return(0,qe.H)(Se).pipe((0,Fn.H)(xo=>{var Ei;return this.processSegmentAgainstRoute(null!==(Ei=xo._injector)&&void 0!==Ei?Ei:me,Se,xo,ge,Ve,St,Kt,Ci).pipe(Ge(kr=>{if(kr instanceof ws)return(0,Y.of)(null);throw kr}))}),so(xo=>!!xo),Ge(xo=>{if(bu(xo))return function H0(oe,me,Se){return 0===me.length&&!oe.children[Se]}(ge,Ve,St)?(0,Y.of)(new As):Wc(ge);throw xo}))}processSegmentAgainstRoute(me,Se,ge,Ve,St,Kt,Ci,xo){return function Xc(oe,me,Se,ge){return!!(Gr(oe)===ge||ge!==$i&&uu(me,Se,oe))&&Td(me,oe,Se).matched}(ge,Ve,St,Kt)?void 0===ge.redirectTo?this.matchSegmentAgainstRoute(me,Ve,ge,St,Kt,xo):this.allowRedirects&&Ci?this.expandSegmentAgainstRouteUsingRedirect(me,Ve,Se,ge,St,Kt,xo):Wc(Ve):Wc(Ve)}expandSegmentAgainstRouteUsingRedirect(me,Se,ge,Ve,St,Kt,Ci){var xo,Ei;const{matched:kr,parameters:Ns,consumedSegments:Oa,positionalParamSegments:qs,remainingSegments:Tl}=Td(Se,Ve,St);if(!kr)return Wc(Se);"string"==typeof Ve.redirectTo&&"/"===Ve.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Nl=new Wr(St,Ns,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Os(Ve),Gr(Ve),null!==(xo=null!==(Ei=Ve.component)&&void 0!==Ei?Ei:Ve._loadedComponent)&&void 0!==xo?xo:null,Ve,x0(Ve)),vc=Er(Nl,Ci,this.paramsInheritanceStrategy);Nl.params=Object.freeze(vc.params),Nl.data=Object.freeze(vc.data);const Zc=this.applyRedirects.applyRedirectCommands(Oa,Ve.redirectTo,qs,Nl,me);return this.applyRedirects.lineralizeSegments(Ve,Zc).pipe((0,Ct.Z)(Zu=>this.processSegment(me,ge,Se,Zu.concat(Tl),Kt,!1,Ci)))}matchSegmentAgainstRoute(me,Se,ge,Ve,St,Kt){const Ci=pd(Se,ge,Ve,me);return"**"===ge.path&&(Se.children={}),Ci.pipe((0,qn.n)(xo=>{var Ei;return xo.matched?(me=null!==(Ei=ge._injector)&&void 0!==Ei?Ei:me,this.getChildConfig(me,ge,Ve).pipe((0,qn.n)(({routes:kr})=>{var Ns,Oa,qs;const Tl=null!==(Ns=ge._loadedInjector)&&void 0!==Ns?Ns:me,{parameters:Nl,consumedSegments:vc,remainingSegments:Zc}=xo,Zu=new Wr(vc,Nl,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Os(ge),Gr(ge),null!==(Oa=null!==(qs=ge.component)&&void 0!==qs?qs:ge._loadedComponent)&&void 0!==Oa?Oa:null,ge,x0(ge)),Dc=Er(Zu,Kt,this.paramsInheritanceStrategy);Zu.params=Object.freeze(Dc.params),Zu.data=Object.freeze(Dc.data);const{segmentGroup:Ou,slicedSegments:T0}=Nc(Se,vc,Zc,kr);if(0===T0.length&&Ou.hasChildren())return this.processChildren(Tl,kr,Ou,Zu).pipe((0,An.T)(_c=>new go(Zu,_c)));if(0===kr.length&&0===T0.length)return(0,Y.of)(new go(Zu,[]));const X0=Gr(ge)===St;return this.processSegment(Tl,kr,Ou,T0,X0?$i:St,!0,Zu).pipe((0,An.T)(_c=>new go(Zu,_c instanceof go?[_c]:[])))}))):Wc(Se)}))}getChildConfig(me,Se,ge){return Se.children?(0,Y.of)({routes:Se.children,injector:me}):Se.loadChildren?void 0!==Se._loadedRoutes?(0,Y.of)({routes:Se._loadedRoutes,injector:Se._loadedInjector}):function xl(oe,me,Se,ge){const Ve=me.canLoad;if(void 0===Ve||0===Ve.length)return(0,Y.of)(!0);const St=Ve.map(Kt=>{const Ci=mi(Kt,oe);return es(function bl(oe){return oe&&jr(oe.canLoad)}(Ci)?Ci.canLoad(me,Se):(0,V.N4e)(oe,()=>Ci(me,Se)))});return(0,Y.of)(St).pipe(sl(),Tc())}(me,Se,ge).pipe((0,Ct.Z)(Ve=>Ve?this.configLoader.loadChildren(me,Se).pipe((0,Ke.M)(St=>{Se._loadedRoutes=St.routes,Se._loadedInjector=St.injector})):function Sd(oe){return(0,vt.$)(kd(!1,Ys.GuardRejected))}())):(0,Y.of)({routes:[],injector:me})}}function G0(oe){const me=oe.value.routeConfig;return me&&""===me.path}function Za(oe){const me=[],Se=new Set;for(const ge of oe){if(!G0(ge)){me.push(ge);continue}const Ve=me.find(St=>ge.value.routeConfig===St.value.routeConfig);void 0!==Ve?(Ve.children.push(...ge.children),Se.add(Ve)):me.push(ge)}for(const ge of Se){const Ve=Za(ge.children);me.push(new go(ge.value,Ve))}return me.filter(ge=>!Se.has(ge))}function Os(oe){return oe.data||{}}function x0(oe){return oe.resolve||{}}function qu(oe){const me=oe.children.map(Se=>qu(Se)).flat();return[oe,...me]}function fd(oe){return(0,qn.n)(me=>{const Se=oe(me);return Se?(0,qe.H)(Se).pipe((0,An.T)(()=>me)):(0,Y.of)(me)})}let Zs=(()=>{var oe;class me{buildTitle(ge){let Ve,St=ge.root;for(;void 0!==St;){var Kt;Ve=null!==(Kt=this.getResolvedTitleForRoute(St))&&void 0!==Kt?Kt:Ve,St=St.children.find(Ci=>Ci.outlet===$i)}return Ve}getResolvedTitleForRoute(ge){return ge.data[br]}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:()=>(0,V.WQX)(Pu),providedIn:"root"}),me})(),Pu=(()=>{var oe;class me extends Zs{constructor(ge){super(),this.title=ge}updateTitle(ge){const Ve=this.buildTitle(ge);void 0!==Ve&&this.title.setTitle(Ve)}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)(V.KVO(rs.hE))},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})();const Cr=new V.nKC("",{providedIn:"root",factory:()=>({})});let Dd=(()=>{var oe;class me{}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275cmp=V.VBU({type:oe,selectors:[["ng-component"]],standalone:!0,features:[V.aNF],decls:1,vars:0,template:function(ge,Ve){1&ge&&V.nrm(0,"router-outlet")},dependencies:[Hc],encapsulation:2}),me})();function Xu(oe){const me=oe.children&&oe.children.map(Xu),Se=me?{...oe,children:me}:{...oe};return!Se.component&&!Se.loadComponent&&(me||Se.loadChildren)&&Se.outlet&&Se.outlet!==$i&&(Se.component=Dd),Se}const lc=new V.nKC("");let wu=(()=>{var oe;class me{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,V.WQX)(V.Ql9)}loadComponent(ge){if(this.componentLoaders.get(ge))return this.componentLoaders.get(ge);if(ge._loadedComponent)return(0,Y.of)(ge._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(ge);const Ve=es(ge.loadComponent()).pipe((0,An.T)(Ee),(0,Ke.M)(Kt=>{this.onLoadEndListener&&this.onLoadEndListener(ge),ge._loadedComponent=Kt}),(0,to.j)(()=>{this.componentLoaders.delete(ge)})),St=new xn.G(Ve,()=>new on.B).pipe((0,pr.B)());return this.componentLoaders.set(ge,St),St}loadChildren(ge,Ve){if(this.childrenLoaders.get(Ve))return this.childrenLoaders.get(Ve);if(Ve._loadedRoutes)return(0,Y.of)({routes:Ve._loadedRoutes,injector:Ve._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(Ve);const Kt=function xu(oe,me,Se,ge){return es(oe.loadChildren()).pipe((0,An.T)(Ee),(0,Ct.Z)(Ve=>Ve instanceof V.Co$||Array.isArray(Ve)?(0,Y.of)(Ve):(0,qe.H)(me.compileModuleAsync(Ve))),(0,An.T)(Ve=>{ge&&ge(oe);let St,Kt,Ci=!1;return Array.isArray(Ve)?(Kt=Ve,!0):(St=Ve.create(Se).injector,Kt=St.get(lc,[],{optional:!0,self:!0}).flat()),{routes:Kt.map(Xu),injector:St}}))}(Ve,this.compiler,ge,this.onLoadEndListener).pipe((0,to.j)(()=>{this.childrenLoaders.delete(Ve)})),Ci=new xn.G(Kt,()=>new on.B).pipe((0,pr.B)());return this.childrenLoaders.set(Ve,Ci),Ci}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})();function Ee(oe){return function fe(oe){return oe&&"object"==typeof oe&&"default"in oe}(oe)?oe.default:oe}let Bt=(()=>{var oe;class me{}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:()=>(0,V.WQX)(Ce),providedIn:"root"}),me})(),Ce=(()=>{var oe;class me{shouldProcessUrl(ge){return!0}extract(ge){return ge}merge(ge,Ve){return ge}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})();const Gt=new V.nKC(""),hs=new V.nKC("");let Qs=(()=>{var oe;class me{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new on.B,this.transitionAbortSubject=new on.B,this.configLoader=(0,V.WQX)(wu),this.environmentInjector=(0,V.WQX)(V.uvJ),this.urlSerializer=(0,V.WQX)(as),this.rootContexts=(0,V.WQX)(Nn),this.location=(0,V.WQX)(Jn.aZ),this.inputBindingEnabled=null!==(0,V.WQX)(Ms,{optional:!0}),this.titleStrategy=(0,V.WQX)(Zs),this.options=(0,V.WQX)(Cr,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,V.WQX)(Bt),this.createViewTransition=(0,V.WQX)(Gt,{optional:!0}),this.navigationErrorHandler=(0,V.WQX)(hs,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Y.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=St=>this.events.next(new Uc(St)),this.configLoader.onLoadStartListener=St=>this.events.next(new Pa(St))}complete(){var ge;null===(ge=this.transitions)||void 0===ge||ge.complete()}handleNavigationRequest(ge){var Ve;const St=++this.navigationId;null===(Ve=this.transitions)||void 0===Ve||Ve.next({...this.transitions.value,...ge,id:St})}setupNavigations(ge,Ve,St){return this.transitions=new ft.t({id:0,currentUrlTree:Ve,currentRawUrl:Ve,extractedUrl:this.urlHandlingStrategy.extract(Ve),urlAfterRedirects:this.urlHandlingStrategy.extract(Ve),rawUrl:Ve,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Hi,restoredState:null,currentSnapshot:St.snapshot,targetSnapshot:null,currentRouterState:St,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ki.p)(Kt=>0!==Kt.id),(0,An.T)(Kt=>({...Kt,extractedUrl:this.urlHandlingStrategy.extract(Kt.rawUrl)})),(0,qn.n)(Kt=>{let Ci=!1,xo=!1;return(0,Y.of)(Kt).pipe((0,qn.n)(Ei=>{var kr;if(this.navigationId>Kt.id)return this.cancelNavigationTransition(Kt,"",Ys.SupersededByNewNavigation),un.w;this.currentTransition=Kt,this.currentNavigation={id:Ei.id,initialUrl:Ei.rawUrl,extractedUrl:Ei.extractedUrl,targetBrowserUrl:"string"==typeof Ei.extras.browserUrl?this.urlSerializer.parse(Ei.extras.browserUrl):Ei.extras.browserUrl,trigger:Ei.source,extras:Ei.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Ns=!ge.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),Oa=null!==(kr=Ei.extras.onSameUrlNavigation)&&void 0!==kr?kr:ge.onSameUrlNavigation;if(!Ns&&"reload"!==Oa){const qs="";return this.events.next(new ol(Ei.id,this.urlSerializer.serialize(Ei.rawUrl),qs,sa.IgnoredSameUrlNavigation)),Ei.resolve(!1),un.w}if(this.urlHandlingStrategy.shouldProcessUrl(Ei.rawUrl))return(0,Y.of)(Ei).pipe((0,qn.n)(qs=>{var Tl,Nl;const vc=null===(Tl=this.transitions)||void 0===Tl?void 0:Tl.getValue();return this.events.next(new ds(qs.id,this.urlSerializer.serialize(qs.extractedUrl),qs.source,qs.restoredState)),vc!==(null===(Nl=this.transitions)||void 0===Nl?void 0:Nl.getValue())?un.w:Promise.resolve(qs)}),function I0(oe,me,Se,ge,Ve,St){return(0,Ct.Z)(Kt=>function _a(oe,me,Se,ge,Ve,St,Kt="emptyOnly"){return new Ch(oe,me,Se,ge,Ve,Kt,St).recognize()}(oe,me,Se,ge,Kt.extractedUrl,Ve,St).pipe((0,An.T)(({state:Ci,tree:xo})=>({...Kt,targetSnapshot:Ci,urlAfterRedirects:xo}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,ge.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ke.M)(qs=>{Kt.targetSnapshot=qs.targetSnapshot,Kt.urlAfterRedirects=qs.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:qs.urlAfterRedirects};const Tl=new ru(qs.id,this.urlSerializer.serialize(qs.extractedUrl),this.urlSerializer.serialize(qs.urlAfterRedirects),qs.targetSnapshot);this.events.next(Tl)}));if(Ns&&this.urlHandlingStrategy.shouldProcessUrl(Ei.currentRawUrl)){const{id:qs,extractedUrl:Tl,source:Nl,restoredState:vc,extras:Zc}=Ei,Zu=new ds(qs,this.urlSerializer.serialize(Tl),Nl,vc);this.events.next(Zu);const Dc=gi(this.rootComponentType).snapshot;return this.currentTransition=Kt={...Ei,targetSnapshot:Dc,urlAfterRedirects:Tl,extras:{...Zc,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Tl,(0,Y.of)(Kt)}{const qs="";return this.events.next(new ol(Ei.id,this.urlSerializer.serialize(Ei.extractedUrl),qs,sa.IgnoredByUrlHandlingStrategy)),Ei.resolve(!1),un.w}}),(0,Ke.M)(Ei=>{const kr=new _u(Ei.id,this.urlSerializer.serialize(Ei.extractedUrl),this.urlSerializer.serialize(Ei.urlAfterRedirects),Ei.targetSnapshot);this.events.next(kr)}),(0,An.T)(Ei=>(this.currentTransition=Kt={...Ei,guards:Ai(Ei.targetSnapshot,Ei.currentSnapshot,this.rootContexts)},Kt)),function Xe(oe,me){return(0,Ct.Z)(Se=>{const{targetSnapshot:ge,currentSnapshot:Ve,guards:{canActivateChecks:St,canDeactivateChecks:Kt}}=Se;return 0===Kt.length&&0===St.length?(0,Y.of)({...Se,guardsResult:!0}):function ke(oe,me,Se,ge){return(0,qe.H)(oe).pipe((0,Ct.Z)(Ve=>function Xa(oe,me,Se,ge,Ve){const St=me&&me.routeConfig?me.routeConfig.canDeactivate:null;if(!St||0===St.length)return(0,Y.of)(!0);const Kt=St.map(Ci=>{var xo;const Ei=null!==(xo=et(me))&&void 0!==xo?xo:Ve,kr=mi(Ci,Ei);return es(function wl(oe){return oe&&jr(oe.canDeactivate)}(kr)?kr.canDeactivate(oe,me,Se,ge):(0,V.N4e)(Ei,()=>kr(oe,me,Se,ge))).pipe(so())});return(0,Y.of)(Kt).pipe(sl())}(Ve.component,Ve.route,Se,me,ge)),so(Ve=>!0!==Ve,!0))}(Kt,ge,Ve,oe).pipe((0,Ct.Z)(Ci=>Ci&&function la(oe){return"boolean"==typeof oe}(Ci)?function _t(oe,me,Se,ge){return(0,qe.H)(me).pipe((0,Fn.H)(Ve=>(0,C.x)(function Zt(oe,me){return null!==oe&&me&&me(new Hu(oe)),(0,Y.of)(!0)}(Ve.route.parent,ge),function He(oe,me){return null!==oe&&me&&me(new zl(oe)),(0,Y.of)(!0)}(Ve.route,ge),function dr(oe,me,Se){const ge=me[me.length-1],St=me.slice(0,me.length-1).reverse().map(Kt=>function Ti(oe){const me=oe.routeConfig?oe.routeConfig.canActivateChild:null;return me&&0!==me.length?{node:oe,guards:me}:null}(Kt)).filter(Kt=>null!==Kt).map(Kt=>(0,At.v)(()=>{const Ci=Kt.guards.map(xo=>{var Ei;const kr=null!==(Ei=et(Kt.node))&&void 0!==Ei?Ei:Se,Ns=mi(xo,kr);return es(function nr(oe){return oe&&jr(oe.canActivateChild)}(Ns)?Ns.canActivateChild(ge,oe):(0,V.N4e)(kr,()=>Ns(ge,oe))).pipe(so())});return(0,Y.of)(Ci).pipe(sl())}));return(0,Y.of)(St).pipe(sl())}(oe,Ve.path,Se),function Vo(oe,me,Se){const ge=me.routeConfig?me.routeConfig.canActivate:null;if(!ge||0===ge.length)return(0,Y.of)(!0);const Ve=ge.map(St=>(0,At.v)(()=>{var Kt;const Ci=null!==(Kt=et(me))&&void 0!==Kt?Kt:Se,xo=mi(St,Ci);return es(function gs(oe){return oe&&jr(oe.canActivate)}(xo)?xo.canActivate(me,oe):(0,V.N4e)(Ci,()=>xo(me,oe))).pipe(so())}));return(0,Y.of)(Ve).pipe(sl())}(oe,Ve.route,Se))),so(Ve=>!0!==Ve,!0))}(ge,St,oe,me):(0,Y.of)(Ci)),(0,An.T)(Ci=>({...Se,guardsResult:Ci})))})}(this.environmentInjector,Ei=>this.events.next(Ei)),(0,Ke.M)(Ei=>{if(Kt.guardsResult=Ei.guardsResult,Ei.guardsResult&&"boolean"!=typeof Ei.guardsResult)throw hl(0,Ei.guardsResult);const kr=new Ia(Ei.id,this.urlSerializer.serialize(Ei.extractedUrl),this.urlSerializer.serialize(Ei.urlAfterRedirects),Ei.targetSnapshot,!!Ei.guardsResult);this.events.next(kr)}),(0,ki.p)(Ei=>!!Ei.guardsResult||(this.cancelNavigationTransition(Ei,"",Ys.GuardRejected),!1)),fd(Ei=>{if(Ei.guards.canActivateChecks.length)return(0,Y.of)(Ei).pipe((0,Ke.M)(kr=>{const Ns=new su(kr.id,this.urlSerializer.serialize(kr.extractedUrl),this.urlSerializer.serialize(kr.urlAfterRedirects),kr.targetSnapshot);this.events.next(Ns)}),(0,qn.n)(kr=>{let Ns=!1;return(0,Y.of)(kr).pipe(function Hl(oe,me){return(0,Ct.Z)(Se=>{const{targetSnapshot:ge,guards:{canActivateChecks:Ve}}=Se;if(!Ve.length)return(0,Y.of)(Se);const St=new Set(Ve.map(xo=>xo.route)),Kt=new Set;for(const xo of St)if(!Kt.has(xo))for(const Ei of qu(xo))Kt.add(Ei);let Ci=0;return(0,qe.H)(Kt).pipe((0,Fn.H)(xo=>St.has(xo)?function Uh(oe,me,Se,ge){const Ve=oe.routeConfig,St=oe._resolve;return void 0!==(null==Ve?void 0:Ve.title)&&!aa(Ve)&&(St[br]=Ve.title),function Kd(oe,me,Se,ge){const Ve=Fi(oe);if(0===Ve.length)return(0,Y.of)({});const St={};return(0,qe.H)(Ve).pipe((0,Ct.Z)(Kt=>function Kc(oe,me,Se,ge){var Ve;const St=null!==(Ve=et(me))&&void 0!==Ve?Ve:ge,Kt=mi(oe,St);return es(Kt.resolve?Kt.resolve(me,Se):(0,V.N4e)(St,()=>Kt(me,Se)))}(oe[Kt],me,Se,ge).pipe(so(),(0,Ke.M)(Ci=>{if(Ci instanceof Va)throw hl(new Lr,Ci);St[Kt]=Ci}))),Yn(1),(0,_o.u)(St),Ge(Kt=>bu(Kt)?un.w:(0,vt.$)(Kt)))}(St,oe,me,ge).pipe((0,An.T)(Kt=>(oe._resolvedData=Kt,oe.data=Er(oe,oe.parent,Se).resolve,null)))}(xo,ge,oe,me):(xo.data=Er(xo,xo.parent,oe).resolve,(0,Y.of)(void 0))),(0,Ke.M)(()=>Ci++),Yn(1),(0,Ct.Z)(xo=>Ci===Kt.size?(0,Y.of)(Se):un.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ke.M)({next:()=>Ns=!0,complete:()=>{Ns||this.cancelNavigationTransition(kr,"",Ys.NoDataFromResolver)}}))}),(0,Ke.M)(kr=>{const Ns=new dl(kr.id,this.urlSerializer.serialize(kr.extractedUrl),this.urlSerializer.serialize(kr.urlAfterRedirects),kr.targetSnapshot);this.events.next(Ns)}))}),fd(Ei=>{const kr=Ns=>{var Oa;const qs=[];null!==(Oa=Ns.routeConfig)&&void 0!==Oa&&Oa.loadComponent&&!Ns.routeConfig._loadedComponent&&qs.push(this.configLoader.loadComponent(Ns.routeConfig).pipe((0,Ke.M)(Tl=>{Ns.component=Tl}),(0,An.T)(()=>{})));for(const Tl of Ns.children)qs.push(...kr(Tl));return qs};return(0,Xt.z)(kr(Ei.targetSnapshot.root)).pipe(pn(null),(0,xt.s)(1))}),fd(()=>this.afterPreactivation()),(0,qn.n)(()=>{var Ei;const{currentSnapshot:kr,targetSnapshot:Ns}=Kt,Oa=null===(Ei=this.createViewTransition)||void 0===Ei?void 0:Ei.call(this,this.environmentInjector,kr.root,Ns.root);return Oa?(0,qe.H)(Oa).pipe((0,An.T)(()=>Kt)):(0,Y.of)(Kt)}),(0,An.T)(Ei=>{const kr=function ha(oe,me,Se){const ge=Sc(oe,me._root,Se?Se._root:void 0);return new co(ge,me)}(ge.routeReuseStrategy,Ei.targetSnapshot,Ei.currentRouterState);return this.currentTransition=Kt={...Ei,targetRouterState:kr},this.currentNavigation.targetRouterState=kr,Kt}),(0,Ke.M)(()=>{this.events.next(new fc)}),((oe,me,Se,ge)=>(0,An.T)(Ve=>(new an(me,Ve.targetRouterState,Ve.currentRouterState,Se,ge).activate(oe),Ve)))(this.rootContexts,ge.routeReuseStrategy,Ei=>this.events.next(Ei),this.inputBindingEnabled),(0,xt.s)(1),(0,Ke.M)({next:Ei=>{var kr;Ci=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vs(Ei.id,this.urlSerializer.serialize(Ei.extractedUrl),this.urlSerializer.serialize(Ei.urlAfterRedirects))),null===(kr=this.titleStrategy)||void 0===kr||kr.updateTitle(Ei.targetRouterState.snapshot),Ei.resolve(!0)},complete:()=>{Ci=!0}}),function zr(oe){return(0,vn.N)((me,Se)=>{(0,Ae.Tg)(oe).subscribe((0,Me._)(Se,()=>Se.complete(),jo.l)),!Se.closed&&me.subscribe(Se)})}(this.transitionAbortSubject.pipe((0,Ke.M)(Ei=>{throw Ei}))),(0,to.j)(()=>{var Ei;!Ci&&!xo&&this.cancelNavigationTransition(Kt,"",Ys.SupersededByNewNavigation),(null===(Ei=this.currentTransition)||void 0===Ei?void 0:Ei.id)===Kt.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ge(Ei=>{if(xo=!0,Re(Ei))this.events.next(new va(Kt.id,this.urlSerializer.serialize(Kt.extractedUrl),Ei.message,Ei.cancellationCode)),function cu(oe){return Re(oe)&&Bi(oe.url)}(Ei)?this.events.next(new au(Ei.url,Ei.navigationBehaviorOptions)):Kt.resolve(!1);else{var kr;const Ns=new Fa(Kt.id,this.urlSerializer.serialize(Kt.extractedUrl),Ei,null!==(kr=Kt.targetSnapshot)&&void 0!==kr?kr:void 0);try{const Oa=(0,V.N4e)(this.environmentInjector,()=>{var qs;return null===(qs=this.navigationErrorHandler)||void 0===qs?void 0:qs.call(this,Ns)});if(Oa instanceof Va){const{message:qs,cancellationCode:Tl}=hl(0,Oa);this.events.next(new va(Kt.id,this.urlSerializer.serialize(Kt.extractedUrl),qs,Tl)),this.events.next(new au(Oa.redirectTo,Oa.navigationBehaviorOptions))}else{this.events.next(Ns);const qs=ge.errorHandler(Ei);Kt.resolve(!!qs)}}catch(Oa){this.options.resolveNavigationPromiseOnError?Kt.resolve(!1):Kt.reject(Oa)}}return un.w}))}))}cancelNavigationTransition(ge,Ve,St){const Kt=new va(ge.id,this.urlSerializer.serialize(ge.extractedUrl),Ve,St);this.events.next(Kt),ge.resolve(!1)}isUpdatingInternalState(){var ge,Ve;return(null===(ge=this.currentTransition)||void 0===ge?void 0:ge.extractedUrl.toString())!==(null===(Ve=this.currentTransition)||void 0===Ve?void 0:Ve.currentUrlTree.toString())}isUpdatedBrowserUrl(){var ge,Ve,St,Kt;const Ci=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),xo=null!==(ge=null===(Ve=this.currentNavigation)||void 0===Ve?void 0:Ve.targetBrowserUrl)&&void 0!==ge?ge:null===(St=this.currentNavigation)||void 0===St?void 0:St.extractedUrl;return Ci.toString()!==(null==xo?void 0:xo.toString())&&!(null!==(Kt=this.currentNavigation)&&void 0!==Kt&&Kt.extras.skipLocationChange)}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})();function Js(oe){return oe!==Hi}let Pr=(()=>{var oe;class me{}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:()=>(0,V.WQX)(pa),providedIn:"root"}),me})();class Ta{shouldDetach(me){return!1}store(me,Se){}shouldAttach(me){return!1}retrieve(me){return null}shouldReuseRoute(me,Se){return me.routeConfig===Se.routeConfig}}let pa=(()=>{var oe;class me extends Ta{}return(oe=me).\u0275fac=(()=>{let Se;return function(Ve){return(Se||(Se=V.xGo(oe)))(Ve||oe)}})(),oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})(),Ll=(()=>{var oe;class me{}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:()=>(0,V.WQX)(Ql),providedIn:"root"}),me})(),Ql=(()=>{var oe;class me extends Ll{constructor(){super(...arguments),this.location=(0,V.WQX)(Jn.aZ),this.urlSerializer=(0,V.WQX)(as),this.options=(0,V.WQX)(Cr,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,V.WQX)(Bt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Nr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gi(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var ge,Ve;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(ge=null===(Ve=this.restoredState())||void 0===Ve?void 0:Ve.\u0275routerPageId)&&void 0!==ge?ge:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(ge){return this.location.subscribe(Ve=>{"popstate"===Ve.type&&ge(Ve.url,Ve.state)})}handleRouterEvent(ge,Ve){if(ge instanceof ds)this.stateMemento=this.createStateMemento();else if(ge instanceof ol)this.rawUrlTree=Ve.initialUrl;else if(ge instanceof ru){if("eager"===this.urlUpdateStrategy&&!Ve.extras.skipLocationChange){var St;const Ci=this.urlHandlingStrategy.merge(Ve.finalUrl,Ve.initialUrl);this.setBrowserUrl(null!==(St=Ve.targetBrowserUrl)&&void 0!==St?St:Ci,Ve)}}else if(ge instanceof fc){var Kt;this.currentUrlTree=Ve.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(Ve.finalUrl,Ve.initialUrl),this.routerState=Ve.targetRouterState,"deferred"!==this.urlUpdateStrategy||Ve.extras.skipLocationChange||this.setBrowserUrl(null!==(Kt=Ve.targetBrowserUrl)&&void 0!==Kt?Kt:this.rawUrlTree,Ve)}else ge instanceof va&&(ge.code===Ys.GuardRejected||ge.code===Ys.NoDataFromResolver)?this.restoreHistory(Ve):ge instanceof Fa?this.restoreHistory(Ve,!0):ge instanceof Vs&&(this.lastSuccessfulId=ge.id,this.currentPageId=this.browserPageId)}setBrowserUrl(ge,Ve){const St=ge instanceof Nr?this.urlSerializer.serialize(ge):ge;if(this.location.isCurrentPathEqualTo(St)||Ve.extras.replaceUrl){const Ci={...Ve.extras.state,...this.generateNgRouterState(Ve.id,this.browserPageId)};this.location.replaceState(St,"",Ci)}else{const Kt={...Ve.extras.state,...this.generateNgRouterState(Ve.id,this.browserPageId+1)};this.location.go(St,"",Kt)}}restoreHistory(ge,Ve=!1){if("computed"===this.canceledNavigationResolution){const Kt=this.currentPageId-this.browserPageId;0!==Kt?this.location.historyGo(Kt):this.currentUrlTree===ge.finalUrl&&0===Kt&&(this.resetState(ge),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(Ve&&this.resetState(ge),this.resetUrlToCurrentUrlTree())}resetState(ge){var Ve;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(Ve=ge.finalUrl)&&void 0!==Ve?Ve:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(ge,Ve){return"computed"===this.canceledNavigationResolution?{navigationId:ge,\u0275routerPageId:Ve}:{navigationId:ge}}}return(oe=me).\u0275fac=(()=>{let Se;return function(Ve){return(Se||(Se=V.xGo(oe)))(Ve||oe)}})(),oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})();var Jl=function(oe){return oe[oe.COMPLETE=0]="COMPLETE",oe[oe.FAILED=1]="FAILED",oe[oe.REDIRECTING=2]="REDIRECTING",oe}(Jl||{});function ja(oe){throw oe}const cc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sl=(()=>{var oe;class me{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var ge,Ve;this.disposed=!1,this.console=(0,V.WQX)(V.H3F),this.stateManager=(0,V.WQX)(Ll),this.options=(0,V.WQX)(Cr,{optional:!0})||{},this.pendingTasks=(0,V.WQX)(V.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,V.WQX)(Qs),this.urlSerializer=(0,V.WQX)(as),this.location=(0,V.WQX)(Jn.aZ),this.urlHandlingStrategy=(0,V.WQX)(Bt),this._events=new on.B,this.errorHandler=this.options.errorHandler||ja,this.navigated=!1,this.routeReuseStrategy=(0,V.WQX)(Pr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(ge=null===(Ve=(0,V.WQX)(lc,{optional:!0}))||void 0===Ve?void 0:Ve.flat())&&void 0!==ge?ge:[],this.componentInputBindingEnabled=!!(0,V.WQX)(Ms,{optional:!0}),this.eventsSubscription=new ht.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:St=>{this.console.warn(St)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const ge=this.navigationTransitions.events.subscribe(Ve=>{try{const St=this.navigationTransitions.currentTransition,Kt=this.navigationTransitions.currentNavigation;if(null!==St&&null!==Kt)if(this.stateManager.handleRouterEvent(Ve,Kt),Ve instanceof va&&Ve.code!==Ys.Redirect&&Ve.code!==Ys.SupersededByNewNavigation)this.navigated=!0;else if(Ve instanceof Vs)this.navigated=!0;else if(Ve instanceof au){const Ci=Ve.navigationBehaviorOptions,xo=this.urlHandlingStrategy.merge(Ve.url,St.currentRawUrl),Ei={browserUrl:St.extras.browserUrl,info:St.extras.info,skipLocationChange:St.extras.skipLocationChange,replaceUrl:St.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Js(St.source),...Ci};this.scheduleNavigation(xo,Hi,null,Ei,{resolve:St.resolve,reject:St.reject,promise:St.promise})}(function Pd(oe){return!(oe instanceof fc||oe instanceof au)})(Ve)&&this._events.next(Ve)}catch(St){this.navigationTransitions.transitionAbortSubject.next(St)}});this.eventsSubscription.add(ge)}resetRootComponentType(ge){this.routerState.root.component=ge,this.navigationTransitions.rootComponentType=ge}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hi,this.stateManager.restoredState())}setUpLocationChangeListener(){var ge;null!==(ge=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==ge||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((Ve,St)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(Ve,"popstate",St)},0)}))}navigateToSyncWithBrowser(ge,Ve,St){const Kt={replaceUrl:!0},Ci=null!=St&&St.navigationId?St:null;if(St){const Ei={...St};delete Ei.navigationId,delete Ei.\u0275routerPageId,0!==Object.keys(Ei).length&&(Kt.state=Ei)}const xo=this.parseUrl(ge);this.scheduleNavigation(xo,Ve,Ci,Kt)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(ge){this.config=ge.map(Xu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(ge,Ve={}){const{relativeTo:St,queryParams:Kt,fragment:Ci,queryParamsHandling:xo,preserveFragment:Ei}=Ve,kr=Ei?this.currentUrlTree.fragment:Ci;let Oa,Ns=null;switch(xo){case"merge":Ns={...this.currentUrlTree.queryParams,...Kt};break;case"preserve":Ns=this.currentUrlTree.queryParams;break;default:Ns=Kt||null}null!==Ns&&(Ns=this.removeEmptyProps(Ns));try{Oa=Bo(St?St.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof ge[0]||"/"!==ge[0][0])&&(ge=[]),Oa=this.currentUrlTree.root}return rr(Oa,ge,Ns,null!=kr?kr:null)}navigateByUrl(ge,Ve={skipLocationChange:!1}){const St=Bi(ge)?ge:this.parseUrl(ge),Kt=this.urlHandlingStrategy.merge(St,this.rawUrlTree);return this.scheduleNavigation(Kt,Hi,null,Ve)}navigate(ge,Ve={skipLocationChange:!1}){return function Qa(oe){for(let me=0;me<oe.length;me++)if(null==oe[me])throw new V.wOt(4008,!1)}(ge),this.navigateByUrl(this.createUrlTree(ge,Ve),Ve)}serializeUrl(ge){return this.urlSerializer.serialize(ge)}parseUrl(ge){try{return this.urlSerializer.parse(ge)}catch{return this.urlSerializer.parse("/")}}isActive(ge,Ve){let St;if(St=!0===Ve?{...cc}:!1===Ve?{...Gl}:Ve,Bi(ge))return ti(this.currentUrlTree,ge,St);const Kt=this.parseUrl(ge);return ti(this.currentUrlTree,Kt,St)}removeEmptyProps(ge){return Object.entries(ge).reduce((Ve,[St,Kt])=>(null!=Kt&&(Ve[St]=Kt),Ve),{})}scheduleNavigation(ge,Ve,St,Kt,Ci){if(this.disposed)return Promise.resolve(!1);let xo,Ei,kr;Ci?(xo=Ci.resolve,Ei=Ci.reject,kr=Ci.promise):kr=new Promise((Oa,qs)=>{xo=Oa,Ei=qs});const Ns=this.pendingTasks.add();return function Ga(oe,me){oe.events.pipe((0,ki.p)(Se=>Se instanceof Vs||Se instanceof va||Se instanceof Fa||Se instanceof ol),(0,An.T)(Se=>Se instanceof Vs||Se instanceof ol?Jl.COMPLETE:Se instanceof va&&(Se.code===Ys.Redirect||Se.code===Ys.SupersededByNewNavigation)?Jl.REDIRECTING:Jl.FAILED),(0,ki.p)(Se=>Se!==Jl.REDIRECTING),(0,xt.s)(1)).subscribe(()=>{me()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Ns))}),this.navigationTransitions.handleNavigationRequest({source:Ve,restoredState:St,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:ge,extras:Kt,resolve:xo,reject:Ei,promise:kr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),kr.catch(Oa=>Promise.reject(Oa))}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})(),md=(()=>{var oe;class me{constructor(ge,Ve,St,Kt,Ci,xo){var Ei;this.router=ge,this.route=Ve,this.tabIndexAttribute=St,this.renderer=Kt,this.el=Ci,this.locationStrategy=xo,this.href=null,this.onChanges=new on.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const kr=null===(Ei=Ci.nativeElement.tagName)||void 0===Ei?void 0:Ei.toLowerCase();this.isAnchorElement="a"===kr||"area"===kr,this.isAnchorElement?this.subscription=ge.events.subscribe(Ns=>{Ns instanceof Vs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(ge){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",ge)}ngOnChanges(ge){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(ge){null==ge?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Bi(ge)||Array.isArray(ge)?ge:[ge],this.setTabIndexIfNotOnNativeEl("0"))}onClick(ge,Ve,St,Kt,Ci){const xo=this.urlTree;return!!(null===xo||this.isAnchorElement&&(0!==ge||Ve||St||Kt||Ci||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(xo,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var ge;null===(ge=this.subscription)||void 0===ge||ge.unsubscribe()}updateHref(){var ge;const Ve=this.urlTree;this.href=null!==Ve&&this.locationStrategy?null===(ge=this.locationStrategy)||void 0===ge?void 0:ge.prepareExternalUrl(this.router.serializeUrl(Ve)):null;const St=null===this.href?null:(0,V.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",St)}applyAttributeValue(ge,Ve){const St=this.renderer,Kt=this.el.nativeElement;null!==Ve?St.setAttribute(Kt,ge,Ve):St.removeAttribute(Kt,ge)}get urlTree(){return null===this.routerLinkInput?null:Bi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)(V.rXU(Sl),V.rXU(cr),V.kS0("tabindex"),V.rXU(V.sFG),V.rXU(V.aKT),V.rXU(Jn.hb))},oe.\u0275dir=V.FsC({type:oe,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(ge,Ve){1&ge&&V.bIt("click",function(Kt){return Ve.onClick(Kt.button,Kt.ctrlKey,Kt.shiftKey,Kt.altKey,Kt.metaKey)}),2&ge&&V.BMQ("target",Ve.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",V.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",V.L39],replaceUrl:[2,"replaceUrl","replaceUrl",V.L39],routerLink:"routerLink"},standalone:!0,features:[V.GFd,V.OA$]}),me})(),Bl=(()=>{var oe;class me{get isActive(){return this._isActive}constructor(ge,Ve,St,Kt,Ci){this.router=ge,this.element=Ve,this.renderer=St,this.cdr=Kt,this.link=Ci,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new V.bkB,this.routerEventsSubscription=ge.events.subscribe(xo=>{xo instanceof Vs&&this.update()})}ngAfterContentInit(){(0,Y.of)(this.links.changes,(0,Y.of)(null)).pipe((0,Mi.U)()).subscribe(ge=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var ge;null===(ge=this.linkInputChangesSubscription)||void 0===ge||ge.unsubscribe();const Ve=[...this.links.toArray(),this.link].filter(St=>!!St).map(St=>St.onChanges);this.linkInputChangesSubscription=(0,qe.H)(Ve).pipe((0,Mi.U)()).subscribe(St=>{this._isActive!==this.isLinkActive(this.router)(St)&&this.update()})}set routerLinkActive(ge){const Ve=Array.isArray(ge)?ge:ge.split(" ");this.classes=Ve.filter(St=>!!St)}ngOnChanges(ge){this.update()}ngOnDestroy(){var ge;this.routerEventsSubscription.unsubscribe(),null===(ge=this.linkInputChangesSubscription)||void 0===ge||ge.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const ge=this.hasActiveLinks();this.classes.forEach(Ve=>{ge?this.renderer.addClass(this.element.nativeElement,Ve):this.renderer.removeClass(this.element.nativeElement,Ve)}),ge&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==ge&&(this._isActive=ge,this.cdr.markForCheck(),this.isActiveChange.emit(ge))})}isLinkActive(ge){const Ve=function ec(oe){return!!oe.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return St=>{const Kt=St.urlTree;return!!Kt&&ge.isActive(Kt,Ve)}}hasActiveLinks(){const ge=this.isLinkActive(this.router);return this.link&&ge(this.link)||this.links.some(ge)}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)(V.rXU(Sl),V.rXU(V.aKT),V.rXU(V.sFG),V.rXU(V.gRc),V.rXU(md,8))},oe.\u0275dir=V.FsC({type:oe,selectors:[["","routerLinkActive",""]],contentQueries:function(ge,Ve,St){if(1&ge&&V.wni(St,md,5),2&ge){let Kt;V.mGM(Kt=V.lsd())&&(Ve.links=Kt)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[V.OA$]}),me})();class Ku{}let gd=(()=>{var oe;class me{preload(ge,Ve){return Ve().pipe(Ge(()=>(0,Y.of)(null)))}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})(),vd=(()=>{var oe;class me{constructor(ge,Ve,St,Kt,Ci){this.router=ge,this.injector=St,this.preloadingStrategy=Kt,this.loader=Ci}setUpPreloading(){this.subscription=this.router.events.pipe((0,ki.p)(ge=>ge instanceof Vs),(0,Fn.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(ge,Ve){const St=[];for(const Ei of Ve){var Kt,Ci;Ei.providers&&!Ei._injector&&(Ei._injector=(0,V.Ol2)(Ei.providers,ge,`Route: ${Ei.path}`));const kr=null!==(Kt=Ei._injector)&&void 0!==Kt?Kt:ge,Ns=null!==(Ci=Ei._loadedInjector)&&void 0!==Ci?Ci:kr;var xo;(Ei.loadChildren&&!Ei._loadedRoutes&&void 0===Ei.canLoad||Ei.loadComponent&&!Ei._loadedComponent)&&St.push(this.preloadConfig(kr,Ei)),(Ei.children||Ei._loadedRoutes)&&St.push(this.processRoutes(Ns,null!==(xo=Ei.children)&&void 0!==xo?xo:Ei._loadedRoutes))}return(0,qe.H)(St).pipe((0,Mi.U)())}preloadConfig(ge,Ve){return this.preloadingStrategy.preload(Ve,()=>{let St;St=Ve.loadChildren&&void 0===Ve.canLoad?this.loader.loadChildren(ge,Ve):(0,Y.of)(null);const Kt=St.pipe((0,Ct.Z)(Ci=>{var xo;return null===Ci?(0,Y.of)(void 0):(Ve._loadedRoutes=Ci.routes,Ve._loadedInjector=Ci.injector,this.processRoutes(null!==(xo=Ci.injector)&&void 0!==xo?xo:ge,Ci.routes))}));if(Ve.loadComponent&&!Ve._loadedComponent){const Ci=this.loader.loadComponent(Ve);return(0,qe.H)([Kt,Ci]).pipe((0,Mi.U)())}return Kt})}}return(oe=me).\u0275fac=function(ge){return new(ge||oe)(V.KVO(Sl),V.KVO(V.Ql9),V.KVO(V.uvJ),V.KVO(Ku),V.KVO(wu))},oe.\u0275prov=V.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"}),me})();const Fc=new V.nKC("");function Ru(oe,...me){return(0,V.EmA)([{provide:lc,multi:!0,useValue:oe},[],{provide:cr,useFactory:du,deps:[Sl]},{provide:V.iLQ,multi:!0,useFactory:Z1},me.map(Se=>Se.\u0275providers)])}function du(oe){return oe.routerState.root}function vl(oe,me){return{\u0275kind:oe,\u0275providers:me}}function Z1(){const oe=(0,V.WQX)(V.zZn);return me=>{var Se,ge;const Ve=oe.get(V.o8S);if(me!==Ve.components[0])return;const St=oe.get(Sl),Kt=oe.get(tc);1===oe.get(zu)&&St.initialNavigation(),null===(Se=oe.get(E0,null,V.$GK.Optional))||void 0===Se||Se.setUpPreloading(),null===(ge=oe.get(Fc,null,V.$GK.Optional))||void 0===ge||ge.init(),St.resetRootComponentType(Ve.componentTypes[0]),Kt.closed||(Kt.next(),Kt.complete(),Kt.unsubscribe())}}const tc=new V.nKC("",{factory:()=>new on.B}),zu=new V.nKC("",{providedIn:"root",factory:()=>1}),E0=new V.nKC("");function Yd(oe){return vl(0,[{provide:E0,useExisting:vd},{provide:Ku,useExisting:oe}])}function Yc(){return vl(8,[Bc,{provide:Ms,useExisting:Bc}])}},7852:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{MF:()=>Xs,j6:()=>Ho,xZ:()=>_r,om:()=>Qr,Sx:()=>Wi,Dk:()=>ei,Wp:()=>vs,KO:()=>kt});var V=_e(467),se=_e(1362),ne=_e(8041),l=_e(1076);const qe=(oi,Vn)=>Vn.some(hi=>oi instanceof hi);let Y,ft;const It=new WeakMap,C=new WeakMap,At=new WeakMap,Ht=new WeakMap,vt=new WeakMap;let on={get(oi,Vn,hi){if(oi instanceof IDBTransaction){if("done"===Vn)return C.get(oi);if("objectStoreNames"===Vn)return oi.objectStoreNames||At.get(oi);if("store"===Vn)return hi.objectStoreNames[1]?void 0:hi.objectStore(hi.objectStoreNames[0])}return qn(oi[Vn])},set:(oi,Vn,hi)=>(oi[Vn]=hi,!0),has:(oi,Vn)=>oi instanceof IDBTransaction&&("done"===Vn||"store"===Vn)||Vn in oi};function An(oi){return"function"==typeof oi?function Jn(oi){return oi!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ut(){return ft||(ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oi)?function(...Vn){return oi.apply(xt(this),Vn),qn(It.get(this))}:function(...Vn){return qn(oi.apply(xt(this),Vn))}:function(Vn,...hi){const po=oi.call(xt(this),Vn,...hi);return At.set(po,Vn.sort?Vn.sort():[Vn]),qn(po)}}(oi):(oi instanceof IDBTransaction&&function xn(oi){if(C.has(oi))return;const Vn=new Promise((hi,po)=>{const Zi=()=>{oi.removeEventListener("complete",Yt),oi.removeEventListener("error",ri),oi.removeEventListener("abort",ri)},Yt=()=>{hi(),Zi()},ri=()=>{po(oi.error||new DOMException("AbortError","AbortError")),Zi()};oi.addEventListener("complete",Yt),oi.addEventListener("error",ri),oi.addEventListener("abort",ri)});C.set(oi,Vn)}(oi),qe(oi,function Xt(){return Y||(Y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oi,on):oi)}function qn(oi){if(oi instanceof IDBRequest)return function un(oi){const Vn=new Promise((hi,po)=>{const Zi=()=>{oi.removeEventListener("success",Yt),oi.removeEventListener("error",ri)},Yt=()=>{hi(qn(oi.result)),Zi()},ri=()=>{po(oi.error),Zi()};oi.addEventListener("success",Yt),oi.addEventListener("error",ri)});return Vn.then(hi=>{hi instanceof IDBCursor&&It.set(hi,oi)}).catch(()=>{}),vt.set(Vn,oi),Vn}(oi);if(Ht.has(oi))return Ht.get(oi);const Vn=An(oi);return Vn!==oi&&(Ht.set(oi,Vn),vt.set(Vn,oi)),Vn}const xt=oi=>vt.get(oi),Pn=["get","getKey","getAll","getAllKeys","count"],ki=["put","add","delete","clear"],Ct=new Map;function Me(oi,Vn){if(!(oi instanceof IDBDatabase)||Vn in oi||"string"!=typeof Vn)return;if(Ct.get(Vn))return Ct.get(Vn);const hi=Vn.replace(/FromIndex$/,""),po=Vn!==hi,Zi=ki.includes(hi);if(!(hi in(po?IDBIndex:IDBObjectStore).prototype)||!Zi&&!Pn.includes(hi))return;const Yt=function(){var ri=(0,V.A)(function*(Ri,...Uo){const mr=this.transaction(Ri,Zi?"readwrite":"readonly");let ss=mr.store;return po&&(ss=ss.index(Uo.shift())),(yield Promise.all([ss[hi](...Uo),Zi&&mr.done]))[0]});return function(Uo){return ri.apply(this,arguments)}}();return Ct.set(Vn,Yt),Yt}!function ht(oi){on=oi(on)}(oi=>({...oi,get:(Vn,hi,po)=>Me(Vn,hi)||oi.get(Vn,hi,po),has:(Vn,hi)=>!!Me(Vn,hi)||oi.has(Vn,hi)}));class pn{constructor(Vn){this.container=Vn}getPlatformInfoString(){return this.container.getProviders().map(hi=>{if(function Rt(oi){const Vn=oi.getComponent();return"VERSION"===(null==Vn?void 0:Vn.type)}(hi)){const po=hi.getImmediate();return`${po.library}/${po.version}`}return null}).filter(hi=>hi).join(" ")}}const On="@firebase/app",so=new ne.Vy("@firebase/app"),Jo="[DEFAULT]",or={[On]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ti=new Map,cs=new Map,Cs=new Map;function Or(oi,Vn){try{oi.container.addComponent(Vn)}catch(hi){so.debug(`Component ${Vn.name} failed to register with FirebaseApp ${oi.name}`,hi)}}function Qr(oi){const Vn=oi.name;if(Cs.has(Vn))return so.debug(`There were multiple attempts to register component ${Vn}.`),!1;Cs.set(Vn,oi);for(const hi of ti.values())Or(hi,oi);for(const hi of cs.values())Or(hi,oi);return!0}function Ho(oi,Vn){const hi=oi.container.getProvider("heartbeat").getImmediate({optional:!0});return hi&&hi.triggerHeartbeat(),oi.container.getProvider(Vn)}function _r(oi){return void 0!==oi.settings}const ni=new l.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class as{constructor(Vn,hi,po){this._isDeleted=!1,this._options=Object.assign({},Vn),this._config=Object.assign({},hi),this._name=hi.name,this._automaticDataCollectionEnabled=hi.automaticDataCollectionEnabled,this._container=po,this.container.addComponent(new se.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Vn){this.checkDestroyed(),this._automaticDataCollectionEnabled=Vn}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Vn){this._isDeleted=Vn}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}const Xs="10.12.4";function vs(oi,Vn={}){let hi=oi;"object"!=typeof Vn&&(Vn={name:Vn});const po=Object.assign({name:Jo,automaticDataCollectionEnabled:!1},Vn),Zi=po.name;if("string"!=typeof Zi||!Zi)throw ni.create("bad-app-name",{appName:String(Zi)});if(hi||(hi=(0,l.T9)()),!hi)throw ni.create("no-options");const Yt=ti.get(Zi);if(Yt){if((0,l.bD)(hi,Yt.options)&&(0,l.bD)(po,Yt.config))return Yt;throw ni.create("duplicate-app",{appName:Zi})}const ri=new se.h1(Zi);for(const Uo of Cs.values())ri.addComponent(Uo);const Ri=new as(hi,po,ri);return ti.set(Zi,Ri),Ri}function Wi(oi=Jo){const Vn=ti.get(oi);if(!Vn&&oi===Jo&&(0,l.T9)())return vs();if(!Vn)throw ni.create("no-app",{appName:oi});return Vn}function ei(){return Array.from(ti.values())}function kt(oi,Vn,hi){var po;let Zi=null!==(po=or[oi])&&void 0!==po?po:oi;hi&&(Zi+=`-${hi}`);const Yt=Zi.match(/\s|\//),ri=Vn.match(/\s|\//);if(Yt||ri){const Ri=[`Unable to register library "${Zi}" with version "${Vn}":`];return Yt&&Ri.push(`library name "${Zi}" contains illegal characters (whitespace or "/")`),Yt&&ri&&Ri.push("and"),ri&&Ri.push(`version name "${Vn}" contains illegal characters (whitespace or "/")`),void so.warn(Ri.join(" "))}Qr(new se.uA(`${Zi}-version`,()=>({library:Zi,version:Vn}),"VERSION"))}const Mt="firebase-heartbeat-database",Jt=1,Bn="firebase-heartbeat-store";let Lt=null;function Ie(){return Lt||(Lt=function Ot(oi,Vn,{blocked:hi,upgrade:po,blocking:Zi,terminated:Yt}={}){const ri=indexedDB.open(oi,Vn),Ri=qn(ri);return po&&ri.addEventListener("upgradeneeded",Uo=>{po(qn(ri.result),Uo.oldVersion,Uo.newVersion,qn(ri.transaction),Uo)}),hi&&ri.addEventListener("blocked",Uo=>hi(Uo.oldVersion,Uo.newVersion,Uo)),Ri.then(Uo=>{Yt&&Uo.addEventListener("close",()=>Yt()),Zi&&Uo.addEventListener("versionchange",mr=>Zi(mr.oldVersion,mr.newVersion,mr))}).catch(()=>{}),Ri}(Mt,Jt,{upgrade:(oi,Vn)=>{if(0===Vn)try{oi.createObjectStore(Bn)}catch(hi){console.warn(hi)}}}).catch(oi=>{throw ni.create("idb-open",{originalErrorMessage:oi.message})})),Lt}function ae(){return(ae=(0,V.A)(function*(oi){try{const hi=(yield Ie()).transaction(Bn),po=yield hi.objectStore(Bn).get(it(oi));return yield hi.done,po}catch(Vn){if(Vn instanceof l.g)so.warn(Vn.message);else{const hi=ni.create("idb-get",{originalErrorMessage:null==Vn?void 0:Vn.message});so.warn(hi.message)}}})).apply(this,arguments)}function we(oi,Vn){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,V.A)(function*(oi,Vn){try{const po=(yield Ie()).transaction(Bn,"readwrite");yield po.objectStore(Bn).put(Vn,it(oi)),yield po.done}catch(hi){if(hi instanceof l.g)so.warn(hi.message);else{const po=ni.create("idb-set",{originalErrorMessage:null==hi?void 0:hi.message});so.warn(po.message)}}})).apply(this,arguments)}function it(oi){return`${oi.name}!${oi.options.appId}`}class dn{constructor(Vn){this.container=Vn,this._heartbeatsCache=null;const hi=this.container.getProvider("app").getImmediate();this._storage=new Vi(hi),this._heartbeatsCachePromise=this._storage.read().then(po=>(this._heartbeatsCache=po,po))}triggerHeartbeat(){var Vn=this;return(0,V.A)(function*(){var hi,po;const Yt=Vn.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ri=Gn();if((null!=(null===(hi=Vn._heartbeatsCache)||void 0===hi?void 0:hi.heartbeats)||(Vn._heartbeatsCache=yield Vn._heartbeatsCachePromise,null!=(null===(po=Vn._heartbeatsCache)||void 0===po?void 0:po.heartbeats)))&&Vn._heartbeatsCache.lastSentHeartbeatDate!==ri&&!Vn._heartbeatsCache.heartbeats.some(Ri=>Ri.date===ri))return Vn._heartbeatsCache.heartbeats.push({date:ri,agent:Yt}),Vn._heartbeatsCache.heartbeats=Vn._heartbeatsCache.heartbeats.filter(Ri=>{const Uo=new Date(Ri.date).valueOf();return Date.now()-Uo<=2592e6}),Vn._storage.overwrite(Vn._heartbeatsCache)})()}getHeartbeatsHeader(){var Vn=this;return(0,V.A)(function*(){var hi;if(null===Vn._heartbeatsCache&&(yield Vn._heartbeatsCachePromise),null==(null===(hi=Vn._heartbeatsCache)||void 0===hi?void 0:hi.heartbeats)||0===Vn._heartbeatsCache.heartbeats.length)return"";const po=Gn(),{heartbeatsToSend:Zi,unsentEntries:Yt}=function Bi(oi,Vn=1024){const hi=[];let po=oi.slice();for(const Zi of oi){const Yt=hi.find(ri=>ri.agent===Zi.agent);if(Yt){if(Yt.dates.push(Zi.date),Bo(hi)>Vn){Yt.dates.pop();break}}else if(hi.push({agent:Zi.agent,dates:[Zi.date]}),Bo(hi)>Vn){hi.pop();break}po=po.slice(1)}return{heartbeatsToSend:hi,unsentEntries:po}}(Vn._heartbeatsCache.heartbeats),ri=(0,l.Uj)(JSON.stringify({version:2,heartbeats:Zi}));return Vn._heartbeatsCache.lastSentHeartbeatDate=po,Yt.length>0?(Vn._heartbeatsCache.heartbeats=Yt,yield Vn._storage.overwrite(Vn._heartbeatsCache)):(Vn._heartbeatsCache.heartbeats=[],Vn._storage.overwrite(Vn._heartbeatsCache)),ri})()}}function Gn(){return(new Date).toISOString().substring(0,10)}class Vi{constructor(Vn){this.app=Vn,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,V.A)(function*(){return!!(0,l.zW)()&&(0,l.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Vn=this;return(0,V.A)(function*(){if(yield Vn._canUseIndexedDBPromise){const po=yield function ue(oi){return ae.apply(this,arguments)}(Vn.app);return null!=po&&po.heartbeats?po:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Vn){var hi=this;return(0,V.A)(function*(){var po;if(yield hi._canUseIndexedDBPromise){const Yt=yield hi.read();return we(hi.app,{lastSentHeartbeatDate:null!==(po=Vn.lastSentHeartbeatDate)&&void 0!==po?po:Yt.lastSentHeartbeatDate,heartbeats:Vn.heartbeats})}})()}add(Vn){var hi=this;return(0,V.A)(function*(){var po;if(yield hi._canUseIndexedDBPromise){const Yt=yield hi.read();return we(hi.app,{lastSentHeartbeatDate:null!==(po=Vn.lastSentHeartbeatDate)&&void 0!==po?po:Yt.lastSentHeartbeatDate,heartbeats:[...Yt.heartbeats,...Vn.heartbeats]})}})()}}function Bo(oi){return(0,l.Uj)(JSON.stringify({version:2,heartbeats:oi})).length}!function rr(oi){Qr(new se.uA("platform-logger",Vn=>new pn(Vn),"PRIVATE")),Qr(new se.uA("heartbeat",Vn=>new dn(Vn),"PRIVATE")),kt(On,"0.10.7",oi),kt(On,"0.10.7","esm2017"),kt("fire-js","")}("")},1362:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{h1:()=>Xt,uA:()=>ne});var V=_e(467),se=_e(1076);class ne{constructor(It,C,At){this.name=It,this.instanceFactory=C,this.type=At,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(It){return this.instantiationMode=It,this}setMultipleInstances(It){return this.multipleInstances=It,this}setServiceProps(It){return this.serviceProps=It,this}setInstanceCreatedCallback(It){return this.onInstanceCreated=It,this}}const l="[DEFAULT]";class qe{constructor(It,C){this.name=It,this.container=C,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(It){const C=this.normalizeInstanceIdentifier(It);if(!this.instancesDeferred.has(C)){const At=new se.cY;if(this.instancesDeferred.set(C,At),this.isInitialized(C)||this.shouldAutoInitialize())try{const Ht=this.getOrInitializeService({instanceIdentifier:C});Ht&&At.resolve(Ht)}catch{}}return this.instancesDeferred.get(C).promise}getImmediate(It){var C;const At=this.normalizeInstanceIdentifier(null==It?void 0:It.identifier),Ht=null!==(C=null==It?void 0:It.optional)&&void 0!==C&&C;if(!this.isInitialized(At)&&!this.shouldAutoInitialize()){if(Ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:At})}catch(vt){if(Ht)return null;throw vt}}getComponent(){return this.component}setComponent(It){if(It.name!==this.name)throw Error(`Mismatching Component ${It.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=It,this.shouldAutoInitialize()){if(function ft(Ut){return"EAGER"===Ut.instantiationMode}(It))try{this.getOrInitializeService({instanceIdentifier:l})}catch{}for(const[C,At]of this.instancesDeferred.entries()){const Ht=this.normalizeInstanceIdentifier(C);try{const vt=this.getOrInitializeService({instanceIdentifier:Ht});At.resolve(vt)}catch{}}}}clearInstance(It=l){this.instancesDeferred.delete(It),this.instancesOptions.delete(It),this.instances.delete(It)}delete(){var It=this;return(0,V.A)(function*(){const C=Array.from(It.instances.values());yield Promise.all([...C.filter(At=>"INTERNAL"in At).map(At=>At.INTERNAL.delete()),...C.filter(At=>"_delete"in At).map(At=>At._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(It=l){return this.instances.has(It)}getOptions(It=l){return this.instancesOptions.get(It)||{}}initialize(It={}){const{options:C={}}=It,At=this.normalizeInstanceIdentifier(It.instanceIdentifier);if(this.isInitialized(At))throw Error(`${this.name}(${At}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ht=this.getOrInitializeService({instanceIdentifier:At,options:C});for(const[vt,un]of this.instancesDeferred.entries())At===this.normalizeInstanceIdentifier(vt)&&un.resolve(Ht);return Ht}onInit(It,C){var At;const Ht=this.normalizeInstanceIdentifier(C),vt=null!==(At=this.onInitCallbacks.get(Ht))&&void 0!==At?At:new Set;vt.add(It),this.onInitCallbacks.set(Ht,vt);const un=this.instances.get(Ht);return un&&It(un,Ht),()=>{vt.delete(It)}}invokeOnInitCallbacks(It,C){const At=this.onInitCallbacks.get(C);if(At)for(const Ht of At)try{Ht(It,C)}catch{}}getOrInitializeService({instanceIdentifier:It,options:C={}}){let At=this.instances.get(It);if(!At&&this.component&&(At=this.component.instanceFactory(this.container,{instanceIdentifier:(Ut=It,Ut===l?void 0:Ut),options:C}),this.instances.set(It,At),this.instancesOptions.set(It,C),this.invokeOnInitCallbacks(At,It),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,It,At)}catch{}var Ut;return At||null}normalizeInstanceIdentifier(It=l){return this.component?this.component.multipleInstances?It:l:It}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xt{constructor(It){this.name=It,this.providers=new Map}addComponent(It){const C=this.getProvider(It.name);if(C.isComponentSet())throw new Error(`Component ${It.name} has already been registered with ${this.name}`);C.setComponent(It)}addOrOverwriteComponent(It){this.getProvider(It.name).isComponentSet()&&this.providers.delete(It.name),this.addComponent(It)}getProvider(It){if(this.providers.has(It))return this.providers.get(It);const C=new qe(It,this);return this.providers.set(It,C),C}getProviders(){return Array.from(this.providers.values())}}},8041:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{$b:()=>se,Vy:()=>ft});const V=[];var se=function(It){return It[It.DEBUG=0]="DEBUG",It[It.VERBOSE=1]="VERBOSE",It[It.INFO=2]="INFO",It[It.WARN=3]="WARN",It[It.ERROR=4]="ERROR",It[It.SILENT=5]="SILENT",It}(se||{});const ne={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},l=se.INFO,qe={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},Y=(It,C,...At)=>{if(C<It.logLevel)return;const Ht=(new Date).toISOString(),vt=qe[C];if(!vt)throw new Error(`Attempted to log a message with an invalid logType (value: ${C})`);console[vt](`[${Ht}]  ${It.name}:`,...At)};class ft{constructor(C){this.name=C,this._logLevel=l,this._logHandler=Y,this._userLogHandler=null,V.push(this)}get logLevel(){return this._logLevel}set logLevel(C){if(!(C in se))throw new TypeError(`Invalid value "${C}" assigned to \`logLevel\``);this._logLevel=C}setLogLevel(C){this._logLevel="string"==typeof C?ne[C]:C}get logHandler(){return this._logHandler}set logHandler(C){if("function"!=typeof C)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=C}get userLogHandler(){return this._userLogHandler}set userLogHandler(C){this._userLogHandler=C}debug(...C){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...C),this._logHandler(this,se.DEBUG,...C)}log(...C){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...C),this._logHandler(this,se.VERBOSE,...C)}info(...C){this._userLogHandler&&this._userLogHandler(this,se.INFO,...C),this._logHandler(this,se.INFO,...C)}warn(...C){this._userLogHandler&&this._userLogHandler(this,se.WARN,...C),this._logHandler(this,se.WARN,...C)}error(...C){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...C),this._logHandler(this,se.ERROR,...C)}}},8880:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Yq:()=>tt,TS:()=>Fn,sR:()=>Ke,el:()=>as,Sb:()=>si,QE:()=>Wi,CF:()=>Li,Rg:()=>Ho,p4:()=>ei,jM:()=>Jt,q9:()=>Rt,Kb:()=>Bn,hO:()=>$i,CE:()=>Lr,pF:()=>Xs,fL:()=>Xn,YV:()=>Dr,z3:()=>kt});var V=_e(467),se=_e(9842),ne=_e(3953),l=_e(8573),qe=_e(177),Y=_e(5531),ft=_e(6031),Xt=_e(1656),Ut=_e(1413),It=_e(3726),C=_e(4412),At=_e(4572),Ht=_e(7673),vt=_e(1635),un=_e(5964),xn=_e(5558),on=_e(3669),ht=_e(9974),Jn=_e(4360);function qn(Lt,Ie){return Lt===Ie}var xt=_e(4341);const Ot=["tabsInner"];let Ct=(()=>{var Lt;class Ie{constructor(ae,we){(0,se.A)(this,"doc",void 0),(0,se.A)(this,"_readyPromise",void 0),(0,se.A)(this,"win",void 0),(0,se.A)(this,"backButton",new Ut.B),(0,se.A)(this,"keyboardDidShow",new Ut.B),(0,se.A)(this,"keyboardDidHide",new Ut.B),(0,se.A)(this,"pause",new Ut.B),(0,se.A)(this,"resume",new Ut.B),(0,se.A)(this,"resize",new Ut.B),this.doc=ae,we.run(()=>{var Ue;let it;this.win=ae.defaultView,this.backButton.subscribeWithPriority=function(qt,En){return this.subscribe(dn=>dn.register(qt,Gn=>we.run(()=>En(Gn))))},pn(this.pause,ae,"pause",we),pn(this.resume,ae,"resume",we),pn(this.backButton,ae,"ionBackButton",we),pn(this.resize,this.win,"resize",we),pn(this.keyboardDidShow,this.win,"ionKeyboardDidShow",we),pn(this.keyboardDidHide,this.win,"ionKeyboardDidHide",we),this._readyPromise=new Promise(qt=>{it=qt}),null!==(Ue=this.win)&&void 0!==Ue&&Ue.cordova?ae.addEventListener("deviceready",()=>{it("cordova")},{once:!0}):it("dom")})}is(ae){return(0,Y.a)(this.win,ae)}platforms(){return(0,Y.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(ae){return Me(this.win.location.href,ae)}isLandscape(){return!this.isPortrait()}isPortrait(){var ae,we;return null===(ae=(we=this.win).matchMedia)||void 0===ae?void 0:ae.call(we,"(orientation: portrait)").matches}testUserAgent(ae){const we=this.win.navigator;return!!(null!=we&&we.userAgent&&we.userAgent.indexOf(ae)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)(ne.KVO(qe.qQ),ne.KVO(ne.SKi))}),(0,se.A)(Ie,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac,providedIn:"root"})),Ie})();const Me=(Lt,Ie)=>{Ie=Ie.replace(/[[\]\\]/g,"\\$&");const ae=new RegExp("[\\?&]"+Ie+"=([^&#]*)").exec(Lt);return ae?decodeURIComponent(ae[1].replace(/\+/g," ")):null},pn=(Lt,Ie,ue,ae)=>{Ie&&Ie.addEventListener(ue,we=>{ae.run(()=>{Lt.next(null!=we?we.detail:void 0)})})};let Rt=(()=>{var Lt;class Ie{constructor(ae,we,Ue,it){(0,se.A)(this,"location",void 0),(0,se.A)(this,"serializer",void 0),(0,se.A)(this,"router",void 0),(0,se.A)(this,"topOutlet",void 0),(0,se.A)(this,"direction",Cn),(0,se.A)(this,"animated",so),(0,se.A)(this,"animationBuilder",void 0),(0,se.A)(this,"guessDirection","forward"),(0,se.A)(this,"guessAnimation",void 0),(0,se.A)(this,"lastNavId",-1),this.location=we,this.serializer=Ue,this.router=it,it&&it.events.subscribe(qt=>{if(qt instanceof l.Z){const En=qt.restoredState?qt.restoredState.navigationId:qt.id;this.guessDirection=this.guessAnimation=En<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?qt.id:En}}),ae.backButton.subscribeWithPriority(0,qt=>{this.pop(),qt()})}navigateForward(ae,we={}){return this.setDirection("forward",we.animated,we.animationDirection,we.animation),this.navigate(ae,we)}navigateBack(ae,we={}){return this.setDirection("back",we.animated,we.animationDirection,we.animation),this.navigate(ae,we)}navigateRoot(ae,we={}){return this.setDirection("root",we.animated,we.animationDirection,we.animation),this.navigate(ae,we)}back(ae={animated:!0,animationDirection:"back"}){return this.setDirection("back",ae.animated,ae.animationDirection,ae.animation),this.location.back()}pop(){var ae=this;return(0,V.A)(function*(){let we=ae.topOutlet;for(;we;){if(yield we.pop())return!0;we=we.parentOutlet}return!1})()}setDirection(ae,we,Ue,it){this.direction=ae,this.animated=On(ae,we,Ue),this.animationBuilder=it}setTopOutlet(ae){this.topOutlet=ae}consumeTransition(){let we,ae="root";const Ue=this.animationBuilder;return"auto"===this.direction?(ae=this.guessDirection,we=this.guessAnimation):(we=this.animated,ae=this.direction),this.direction=Cn,this.animated=so,this.animationBuilder=void 0,{direction:ae,animation:we,animationBuilder:Ue}}navigate(ae,we){if(Array.isArray(ae))return this.router.navigate(ae,we);{const Ue=this.serializer.parse(ae.toString());return void 0!==we.queryParams&&(Ue.queryParams={...we.queryParams}),void 0!==we.fragment&&(Ue.fragment=we.fragment),this.router.navigateByUrl(Ue,we)}}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)(ne.KVO(Ct),ne.KVO(qe.aZ),ne.KVO(l.Sd),ne.KVO(l.Ix,8))}),(0,se.A)(Ie,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac,providedIn:"root"})),Ie})();const On=(Lt,Ie,ue)=>{if(!1!==Ie){if(void 0!==ue)return ue;if("forward"===Lt||"back"===Lt)return Lt;if("root"===Lt&&!0===Ie)return"forward"}},Cn="auto",so=void 0;let Fn=(()=>{var Lt;class Ie{get(ae,we){const Ue=Ae();return Ue?Ue.get(ae,we):null}getBoolean(ae,we){const Ue=Ae();return!!Ue&&Ue.getBoolean(ae,we)}getNumber(ae,we){const Ue=Ae();return Ue?Ue.getNumber(ae,we):0}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)}),(0,se.A)(Ie,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac,providedIn:"root"})),Ie})();const Ke=new ne.nKC("USERCONFIG"),Ae=()=>{if(typeof window<"u"){const Lt=window.Ionic;if(null!=Lt&&Lt.config)return Lt.config}return null};class Ge{constructor(Ie={}){(0,se.A)(this,"data",void 0),this.data=Ie,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(Ie){return this.data[Ie]}}let tt=(()=>{var Lt;class Ie{constructor(){(0,se.A)(this,"zone",(0,ne.WQX)(ne.SKi)),(0,se.A)(this,"applicationRef",(0,ne.WQX)(ne.o8S)),(0,se.A)(this,"config",(0,ne.WQX)(Ke))}create(ae,we,Ue){var it;return new zt(ae,we,this.applicationRef,this.zone,Ue,null!==(it=this.config.useSetInputAPI)&&void 0!==it&&it)}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)}),(0,se.A)(Ie,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac})),Ie})();class zt{constructor(Ie,ue,ae,we,Ue,it){(0,se.A)(this,"environmentInjector",void 0),(0,se.A)(this,"injector",void 0),(0,se.A)(this,"applicationRef",void 0),(0,se.A)(this,"zone",void 0),(0,se.A)(this,"elementReferenceKey",void 0),(0,se.A)(this,"enableSignalsSupport",void 0),(0,se.A)(this,"elRefMap",new WeakMap),(0,se.A)(this,"elEventsMap",new WeakMap),this.environmentInjector=Ie,this.injector=ue,this.applicationRef=ae,this.zone=we,this.elementReferenceKey=Ue,this.enableSignalsSupport=it}attachViewToDom(Ie,ue,ae,we){return this.zone.run(()=>new Promise(Ue=>{const it={...ae};void 0!==this.elementReferenceKey&&(it[this.elementReferenceKey]=Ie),Ue(Yn(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,Ie,ue,it,we,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(Ie,ue){return this.zone.run(()=>new Promise(ae=>{const we=this.elRefMap.get(ue);if(we){we.destroy(),this.elRefMap.delete(ue);const Ue=this.elEventsMap.get(ue);Ue&&(Ue(),this.elEventsMap.delete(ue))}ae()}))}}const Yn=(Lt,Ie,ue,ae,we,Ue,it,qt,En,dn,Gn,Bi)=>{const Vi=ne.zZn.create({providers:pr(En),parent:ue}),Bo=(0,ne.a0P)(qt,{environmentInjector:Ie,elementInjector:Vi}),rr=Bo.instance,oi=Bo.location.nativeElement;if(En)if(Gn&&void 0!==rr[Gn]&&console.error(`[Ionic Error]: ${Gn} is a reserved property when using ${it.tagName.toLowerCase()}. Rename or remove the "${Gn}" property from ${qt.name}.`),!0===Bi&&void 0!==Bo.setInput){const{modal:hi,popover:po,...Zi}=En;for(const Yt in Zi)Bo.setInput(Yt,Zi[Yt]);void 0!==hi&&Object.assign(rr,{modal:hi}),void 0!==po&&Object.assign(rr,{popover:po})}else Object.assign(rr,En);if(dn)for(const hi of dn)oi.classList.add(hi);const Vn=_o(Lt,rr,oi);return it.appendChild(oi),ae.attachView(Bo.hostView),we.set(oi,Bo),Ue.set(oi,Vn),oi},cn=[ft.L,ft.a,ft.b,ft.c,ft.d],_o=(Lt,Ie,ue)=>Lt.run(()=>{const ae=cn.filter(we=>"function"==typeof Ie[we]).map(we=>{const Ue=it=>Ie[we](it.detail);return ue.addEventListener(we,Ue),()=>ue.removeEventListener(we,Ue)});return()=>ae.forEach(we=>we())}),to=new ne.nKC("NavParamsToken"),pr=Lt=>[{provide:to,useValue:Lt},{provide:Ge,useFactory:jo,deps:[to]}],jo=Lt=>new Ge(Lt),zr=(Lt,Ie)=>{const ue=Lt.prototype;Ie.forEach(ae=>{Object.defineProperty(ue,ae,{get(){return this.el[ae]},set(we){this.z.runOutsideAngular(()=>this.el[ae]=we)}})})},Mi=(Lt,Ie)=>{const ue=Lt.prototype;Ie.forEach(ae=>{ue[ae]=function(){const we=arguments;return this.z.runOutsideAngular(()=>this.el[ae].apply(this.el,we))}})},rs=(Lt,Ie,ue)=>{ue.forEach(ae=>Lt[ae]=(0,It.R)(Ie,ae))};function $i(Lt){return function(ue){const{defineCustomElementFn:ae,inputs:we,methods:Ue}=Lt;return void 0!==ae&&ae(),we&&zr(ue,we),Ue&&Mi(ue,Ue),ue}}const br=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],Jr=["present","dismiss","onDidDismiss","onWillDismiss"];let Li=(()=>{var Lt;let Ie=((0,se.A)(Lt=class{constructor(ae,we,Ue){(0,se.A)(this,"z",void 0),(0,se.A)(this,"template",void 0),(0,se.A)(this,"isCmpOpen",!1),(0,se.A)(this,"el",void 0),this.z=Ue,this.el=we.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,ae.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,ae.detectChanges()}),rs(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,se.A)(Lt,"\u0275dir",ne.FsC({type:Lt,selectors:[["ion-popover"]],contentQueries:function(ae,we,Ue){if(1&ae&&ne.wni(Ue,ne.C4Q,5),2&ae){let it;ne.mGM(it=ne.lsd())&&(we.template=it.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"}})),Lt);return Ie=(0,vt.Cg)([$i({inputs:br,methods:Jr})],Ie),Ie})();const yi=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],ao=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let si=(()=>{var Lt;let Ie=((0,se.A)(Lt=class{constructor(ae,we,Ue){(0,se.A)(this,"z",void 0),(0,se.A)(this,"template",void 0),(0,se.A)(this,"isCmpOpen",!1),(0,se.A)(this,"el",void 0),this.z=Ue,this.el=we.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,ae.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,ae.detectChanges()}),rs(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,se.A)(Lt,"\u0275dir",ne.FsC({type:Lt,selectors:[["ion-modal"]],contentQueries:function(ae,we,Ue){if(1&ae&&ne.wni(Ue,ne.C4Q,5),2&ae){let it;ne.mGM(it=ne.lsd())&&(we.template=it.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"}})),Lt);return Ie=(0,vt.Cg)([$i({inputs:yi,methods:ao})],Ie),Ie})();const mo=(Lt,Ie)=>((Lt=Lt.filter(ue=>ue.stackId!==Ie.stackId)).push(Ie),Lt),Jo=(Lt,Ie)=>{const ue=Lt.createUrlTree(["."],{relativeTo:Ie});return Lt.serializeUrl(ue)},or=(Lt,Ie)=>!Ie||Lt.stackId!==Ie.stackId,ti=(Lt,Ie)=>{if(!Lt)return;const ue=cs(Ie);for(let ae=0;ae<ue.length;ae++){if(ae>=Lt.length)return ue[ae];if(ue[ae]!==Lt[ae])return}},cs=Lt=>Lt.split("/").map(Ie=>Ie.trim()).filter(Ie=>""!==Ie),Cs=Lt=>{Lt&&(Lt.ref.destroy(),Lt.unlistenEvents())};class Or{constructor(Ie,ue,ae,we,Ue,it){(0,se.A)(this,"containerEl",void 0),(0,se.A)(this,"router",void 0),(0,se.A)(this,"navCtrl",void 0),(0,se.A)(this,"zone",void 0),(0,se.A)(this,"location",void 0),(0,se.A)(this,"views",[]),(0,se.A)(this,"runningTask",void 0),(0,se.A)(this,"skipTransition",!1),(0,se.A)(this,"tabsPrefix",void 0),(0,se.A)(this,"activeView",void 0),(0,se.A)(this,"nextId",0),this.containerEl=ue,this.router=ae,this.navCtrl=we,this.zone=Ue,this.location=it,this.tabsPrefix=void 0!==Ie?cs(Ie):void 0}createView(Ie,ue){var ae;const we=Jo(this.router,ue),Ue=null==Ie||null===(ae=Ie.location)||void 0===ae?void 0:ae.nativeElement,it=_o(this.zone,Ie.instance,Ue);return{id:this.nextId++,stackId:ti(this.tabsPrefix,we),unlistenEvents:it,element:Ue,ref:Ie,url:we}}getExistingView(Ie){const ue=Jo(this.router,Ie),ae=this.views.find(we=>we.url===ue);return ae&&ae.ref.changeDetectorRef.reattach(),ae}setActive(Ie){var ue,ae;const we=this.navCtrl.consumeTransition();let{direction:Ue,animation:it,animationBuilder:qt}=we;const En=this.activeView,dn=or(Ie,En);dn&&(Ue="back",it=void 0);const Gn=this.views.slice();let Bi;const Vi=this.router;Vi.getCurrentNavigation?Bi=Vi.getCurrentNavigation():null!==(ue=Vi.navigations)&&void 0!==ue&&ue.value&&(Bi=Vi.navigations.value),null!==(ae=Bi)&&void 0!==ae&&null!==(ae=ae.extras)&&void 0!==ae&&ae.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Bo=this.views.includes(Ie),rr=this.insertView(Ie,Ue);Bo||Ie.ref.changeDetectorRef.detectChanges();const oi=Ie.animationBuilder;return void 0===qt&&"back"===Ue&&!dn&&void 0!==oi&&(qt=oi),En&&(En.animationBuilder=qt),this.zone.runOutsideAngular(()=>this.wait(()=>(En&&En.ref.changeDetectorRef.detach(),Ie.ref.changeDetectorRef.reattach(),this.transition(Ie,En,it,this.canGoBack(1),!1,qt).then(()=>Kr(Ie,rr,Gn,this.location,this.zone)).then(()=>({enteringView:Ie,direction:Ue,animation:it,tabSwitch:dn})))))}canGoBack(Ie,ue=this.getActiveStackId()){return this.getStack(ue).length>Ie}pop(Ie,ue=this.getActiveStackId()){return this.zone.run(()=>{const ae=this.getStack(ue);if(ae.length<=Ie)return Promise.resolve(!1);const we=ae[ae.length-Ie-1];let Ue=we.url;const it=we.savedData;if(it){var qt;const dn=it.get("primary");null!=dn&&null!==(qt=dn.route)&&void 0!==qt&&null!==(qt=qt._routerState)&&void 0!==qt&&qt.snapshot.url&&(Ue=dn.route._routerState.snapshot.url)}const{animationBuilder:En}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Ue,{...we.savedExtras,animation:En}).then(()=>!0)})}startBackTransition(){const Ie=this.activeView;if(Ie){const ue=this.getStack(Ie.stackId),ae=ue[ue.length-2],we=ae.animationBuilder;return this.wait(()=>this.transition(ae,Ie,"back",this.canGoBack(2),!0,we))}return Promise.resolve()}endBackTransition(Ie){Ie?(this.skipTransition=!0,this.pop(1)):this.activeView&&Qr(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(Ie){const ue=this.getStack(Ie);return ue.length>0?ue[ue.length-1]:void 0}getRootUrl(Ie){const ue=this.getStack(Ie);return ue.length>0?ue[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Cs),this.activeView=void 0,this.views=[]}getStack(Ie){return this.views.filter(ue=>ue.stackId===Ie)}insertView(Ie,ue){return this.activeView=Ie,this.views=((Lt,Ie,ue)=>"root"===ue?mo(Lt,Ie):"forward"===ue?((Lt,Ie)=>(Lt.indexOf(Ie)>=0?Lt=Lt.filter(ae=>ae.stackId!==Ie.stackId||ae.id<=Ie.id):Lt.push(Ie),Lt))(Lt,Ie):((Lt,Ie)=>Lt.indexOf(Ie)>=0?Lt.filter(ae=>ae.stackId!==Ie.stackId||ae.id<=Ie.id):mo(Lt,Ie))(Lt,Ie))(this.views,Ie,ue),this.views.slice()}transition(Ie,ue,ae,we,Ue,it){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(ue===Ie)return Promise.resolve(!1);const qt=Ie?Ie.element:void 0,En=ue?ue.element:void 0,dn=this.containerEl;return qt&&qt!==En&&(qt.classList.add("ion-page"),qt.classList.add("ion-page-invisible"),dn.commit)?dn.commit(qt,En,{duration:void 0===ae?0:void 0,direction:ae,showGoBack:we,progressAnimation:Ue,animationBuilder:it}):Promise.resolve(!1)}wait(Ie){var ue=this;return(0,V.A)(function*(){void 0!==ue.runningTask&&(yield ue.runningTask,ue.runningTask=void 0);const ae=ue.runningTask=Ie();return ae.finally(()=>ue.runningTask=void 0),ae})()}}const Kr=(Lt,Ie,ue,ae,we)=>"function"==typeof requestAnimationFrame?new Promise(Ue=>{requestAnimationFrame(()=>{Qr(Lt,Ie,ue,ae,we),Ue()})}):Promise.resolve(),Qr=(Lt,Ie,ue,ae,we)=>{we.run(()=>ue.filter(Ue=>!Ie.includes(Ue)).forEach(Cs)),Ie.forEach(Ue=>{const qt=ae.path().split("?")[0].split("#")[0];if(Ue!==Lt&&Ue.url!==qt){const En=Ue.element;En.setAttribute("aria-hidden","true"),En.classList.add("ion-page-hidden"),Ue.ref.changeDetectorRef.detach()}})};let Ho=(()=>{var Lt;class Ie{get activatedComponentRef(){return this.activated}set animation(ae){this.nativeEl.animation=ae}set animated(ae){this.nativeEl.animated=ae}set swipeGesture(ae){this._swipeGesture=ae,this.nativeEl.swipeHandler=ae?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:we=>this.stackCtrl.endBackTransition(we)}:void 0}constructor(ae,we,Ue,it,qt,En,dn,Gn){(0,se.A)(this,"parentOutlet",void 0),(0,se.A)(this,"nativeEl",void 0),(0,se.A)(this,"activatedView",null),(0,se.A)(this,"tabsPrefix",void 0),(0,se.A)(this,"_swipeGesture",void 0),(0,se.A)(this,"stackCtrl",void 0),(0,se.A)(this,"proxyMap",new WeakMap),(0,se.A)(this,"currentActivatedRoute$",new C.t(null)),(0,se.A)(this,"activated",null),(0,se.A)(this,"_activatedRoute",null),(0,se.A)(this,"name",l.Xk),(0,se.A)(this,"stackWillChange",new ne.bkB),(0,se.A)(this,"stackDidChange",new ne.bkB),(0,se.A)(this,"activateEvents",new ne.bkB),(0,se.A)(this,"deactivateEvents",new ne.bkB),(0,se.A)(this,"parentContexts",(0,ne.WQX)(l.Zp)),(0,se.A)(this,"location",(0,ne.WQX)(ne.c1b)),(0,se.A)(this,"environmentInjector",(0,ne.WQX)(ne.uvJ)),(0,se.A)(this,"inputBinder",(0,ne.WQX)(ir,{optional:!0})),(0,se.A)(this,"supportsBindingToComponentInputs",!0),(0,se.A)(this,"config",(0,ne.WQX)(Fn)),(0,se.A)(this,"navCtrl",(0,ne.WQX)(Rt)),this.parentOutlet=Gn,this.nativeEl=it.nativeElement,this.name=ae||l.Xk,this.tabsPrefix="true"===we?Jo(qt,dn):void 0,this.stackCtrl=new Or(this.tabsPrefix,this.nativeEl,qt,this.navCtrl,En,Ue),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){var ae;this.stackCtrl.destroy(),null===(ae=this.inputBinder)||void 0===ae||ae.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const ae=this.getContext();null!=ae&&ae.route&&this.activateWith(ae.route,ae.injector)}new Promise(ae=>(0,Xt.c)(this.nativeEl,ae)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(ae,we){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const we=this.getContext();this.activatedView.savedData=new Map(we.children.contexts);const Ue=this.activatedView.savedData.get("primary");if(Ue&&we.route&&(Ue.route={...we.route}),this.activatedView.savedExtras={},we.route){const it=we.route.snapshot;this.activatedView.savedExtras.queryParams=it.queryParams,this.activatedView.savedExtras.fragment=it.fragment}}const ae=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(ae)}}activateWith(ae,we){var Ue;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=ae;let it,qt=this.stackCtrl.getExistingView(ae);if(qt){it=this.activated=qt.ref;const Gn=qt.savedData;Gn&&(this.getContext().children.contexts=Gn),this.updateActivatedRouteProxy(it.instance,ae)}else{var En;const Gn=ae._futureSnapshot,Bi=this.parentContexts.getOrCreateContext(this.name).children,Vi=new C.t(null),Bo=this.createActivatedRouteProxy(Vi,ae),rr=new Nr(Bo,Bi,this.location.injector),oi=null!==(En=Gn.routeConfig.component)&&void 0!==En?En:Gn.component;it=this.activated=this.outletContent.createComponent(oi,{index:this.outletContent.length,injector:rr,environmentInjector:null!=we?we:this.environmentInjector}),Vi.next(it.instance),qt=this.stackCtrl.createView(this.activated,ae),this.proxyMap.set(it.instance,Bo),this.currentActivatedRoute$.next({component:it.instance,activatedRoute:ae})}null===(Ue=this.inputBinder)||void 0===Ue||Ue.bindActivatedRouteToOutletComponent(this),this.activatedView=qt,this.navCtrl.setTopOutlet(this);const dn=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:qt,tabSwitch:or(qt,dn)}),this.stackCtrl.setActive(qt).then(Gn=>{this.activateEvents.emit(it.instance),this.stackDidChange.emit(Gn)})}canGoBack(ae=1,we){return this.stackCtrl.canGoBack(ae,we)}pop(ae=1,we){return this.stackCtrl.pop(ae,we)}getLastUrl(ae){const we=this.stackCtrl.getLastUrl(ae);return we?we.url:void 0}getLastRouteView(ae){return this.stackCtrl.getLastUrl(ae)}getRootView(ae){return this.stackCtrl.getRootUrl(ae)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(ae,we){const Ue=new l.nX;return Ue._futureSnapshot=we._futureSnapshot,Ue._routerState=we._routerState,Ue.snapshot=we.snapshot,Ue.outlet=we.outlet,Ue.component=we.component,Ue._paramMap=this.proxyObservable(ae,"paramMap"),Ue._queryParamMap=this.proxyObservable(ae,"queryParamMap"),Ue.url=this.proxyObservable(ae,"url"),Ue.params=this.proxyObservable(ae,"params"),Ue.queryParams=this.proxyObservable(ae,"queryParams"),Ue.fragment=this.proxyObservable(ae,"fragment"),Ue.data=this.proxyObservable(ae,"data"),Ue}proxyObservable(ae,we){return ae.pipe((0,un.p)(Ue=>!!Ue),(0,xn.n)(Ue=>this.currentActivatedRoute$.pipe((0,un.p)(it=>null!==it&&it.component===Ue),(0,xn.n)(it=>it&&it.activatedRoute[we]),function An(Lt,Ie=on.D){return Lt=null!=Lt?Lt:qn,(0,ht.N)((ue,ae)=>{let we,Ue=!0;ue.subscribe((0,Jn._)(ae,it=>{const qt=Ie(it);(Ue||!Lt(we,qt))&&(Ue=!1,we=qt,ae.next(it))}))})}())))}updateActivatedRouteProxy(ae,we){const Ue=this.proxyMap.get(ae);if(!Ue)throw new Error("Could not find activated route proxy for view");Ue._futureSnapshot=we._futureSnapshot,Ue._routerState=we._routerState,Ue.snapshot=we.snapshot,Ue.outlet=we.outlet,Ue.component=we.component,this.currentActivatedRoute$.next({component:ae,activatedRoute:we})}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)(ne.kS0("name"),ne.kS0("tabs"),ne.rXU(qe.aZ),ne.rXU(ne.aKT),ne.rXU(l.Ix),ne.rXU(ne.SKi),ne.rXU(l.nX),ne.rXU(Lt,12))}),(0,se.A)(Ie,"\u0275dir",ne.FsC({type:Lt,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]})),Ie})();class Nr{constructor(Ie,ue,ae){(0,se.A)(this,"route",void 0),(0,se.A)(this,"childContexts",void 0),(0,se.A)(this,"parent",void 0),this.route=Ie,this.childContexts=ue,this.parent=ae}get(Ie,ue){return Ie===l.nX?this.route:Ie===l.Zp?this.childContexts:this.parent.get(Ie,ue)}}const ir=new ne.nKC("");let _r=(()=>{var Lt;class Ie{constructor(){(0,se.A)(this,"outletDataSubscriptions",new Map)}bindActivatedRouteToOutletComponent(ae){this.unsubscribeFromRouteData(ae),this.subscribeToRouteData(ae)}unsubscribeFromRouteData(ae){var we;null===(we=this.outletDataSubscriptions.get(ae))||void 0===we||we.unsubscribe(),this.outletDataSubscriptions.delete(ae)}subscribeToRouteData(ae){const{activatedRoute:we}=ae,Ue=(0,At.z)([we.queryParams,we.params,we.data]).pipe((0,xn.n)(([it,qt,En],dn)=>(En={...it,...qt,...En},0===dn?(0,Ht.of)(En):Promise.resolve(En)))).subscribe(it=>{if(!ae.isActivated||!ae.activatedComponentRef||ae.activatedRoute!==we||null===we.component)return void this.unsubscribeFromRouteData(ae);const qt=(0,ne.HJs)(we.component);if(qt)for(const{templateName:En}of qt.inputs)ae.activatedComponentRef.setInput(En,it[En]);else this.unsubscribeFromRouteData(ae)});this.outletDataSubscriptions.set(ae,Ue)}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)}),(0,se.A)(Ie,"\u0275prov",ne.jDH({token:Lt,factory:Lt.\u0275fac})),Ie})();const Dr=()=>({provide:ir,useFactory:Gs,deps:[l.Ix]});function Gs(Lt){return null!=Lt&&Lt.componentInputBindingEnabled?new _r:null}const ni=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let as=(()=>{var Lt;let Ie=((0,se.A)(Lt=class{constructor(ae,we,Ue,it,qt,En){(0,se.A)(this,"routerOutlet",void 0),(0,se.A)(this,"navCtrl",void 0),(0,se.A)(this,"config",void 0),(0,se.A)(this,"r",void 0),(0,se.A)(this,"z",void 0),(0,se.A)(this,"el",void 0),this.routerOutlet=ae,this.navCtrl=we,this.config=Ue,this.r=it,this.z=qt,En.detach(),this.el=this.r.nativeElement}onClick(ae){var we;const Ue=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(we=this.routerOutlet)&&void 0!==we&&we.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),ae.preventDefault()):null!=Ue&&(this.navCtrl.navigateBack(Ue,{animation:this.routerAnimation}),ae.preventDefault())}},"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(Ho,8),ne.rXU(Rt),ne.rXU(Fn),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.gRc))}),(0,se.A)(Lt,"\u0275dir",ne.FsC({type:Lt,hostBindings:function(ae,we){1&ae&&ne.bIt("click",function(it){return we.onClick(it)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"}})),Lt);return Ie=(0,vt.Cg)([$i({inputs:ni})],Ie),Ie})(),Lr=(()=>{var Lt;class Ie{constructor(ae,we,Ue,it,qt){(0,se.A)(this,"locationStrategy",void 0),(0,se.A)(this,"navCtrl",void 0),(0,se.A)(this,"elementRef",void 0),(0,se.A)(this,"router",void 0),(0,se.A)(this,"routerLink",void 0),(0,se.A)(this,"routerDirection","forward"),(0,se.A)(this,"routerAnimation",void 0),this.locationStrategy=ae,this.navCtrl=we,this.elementRef=Ue,this.router=it,this.routerLink=qt}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var ae;if(null!==(ae=this.routerLink)&&void 0!==ae&&ae.urlTree){const we=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=we}}onClick(ae){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),ae.preventDefault()}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(qe.hb),ne.rXU(Rt),ne.rXU(ne.aKT),ne.rXU(l.Ix),ne.rXU(l.Wk,8))}),(0,se.A)(Ie,"\u0275dir",ne.FsC({type:Lt,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(ae,we){1&ae&&ne.bIt("click",function(it){return we.onClick(it)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[ne.OA$]})),Ie})(),Xs=(()=>{var Lt;class Ie{constructor(ae,we,Ue,it,qt){(0,se.A)(this,"locationStrategy",void 0),(0,se.A)(this,"navCtrl",void 0),(0,se.A)(this,"elementRef",void 0),(0,se.A)(this,"router",void 0),(0,se.A)(this,"routerLink",void 0),(0,se.A)(this,"routerDirection","forward"),(0,se.A)(this,"routerAnimation",void 0),this.locationStrategy=ae,this.navCtrl=we,this.elementRef=Ue,this.router=it,this.routerLink=qt}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var ae;if(null!==(ae=this.routerLink)&&void 0!==ae&&ae.urlTree){const we=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=we}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(qe.hb),ne.rXU(Rt),ne.rXU(ne.aKT),ne.rXU(l.Ix),ne.rXU(l.Wk,8))}),(0,se.A)(Ie,"\u0275dir",ne.FsC({type:Lt,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(ae,we){1&ae&&ne.bIt("click",function(){return we.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[ne.OA$]})),Ie})();const vs=["animated","animation","root","rootParams","swipeGesture"],Hr=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let Wi=(()=>{var Lt;let Ie=((0,se.A)(Lt=class{constructor(ae,we,Ue,it,qt,En){(0,se.A)(this,"z",void 0),(0,se.A)(this,"el",void 0),this.z=qt,En.detach(),this.el=ae.nativeElement,ae.nativeElement.delegate=it.create(we,Ue),rs(this,this.el,["ionNavDidChange","ionNavWillChange"])}},"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(ne.aKT),ne.rXU(ne.uvJ),ne.rXU(ne.zZn),ne.rXU(tt),ne.rXU(ne.SKi),ne.rXU(ne.gRc))}),(0,se.A)(Lt,"\u0275dir",ne.FsC({type:Lt,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"}})),Lt);return Ie=(0,vt.Cg)([$i({inputs:vs,methods:Hr})],Ie),Ie})(),ei=(()=>{var Lt;class Ie{constructor(ae){(0,se.A)(this,"navCtrl",void 0),(0,se.A)(this,"tabsInner",void 0),(0,se.A)(this,"ionTabsWillChange",new ne.bkB),(0,se.A)(this,"ionTabsDidChange",new ne.bkB),(0,se.A)(this,"tabBarSlot","bottom"),this.navCtrl=ae}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:ae,tabSwitch:we}){const Ue=ae.stackId;we&&void 0!==Ue&&this.ionTabsWillChange.emit({tab:Ue})}onStackDidChange({enteringView:ae,tabSwitch:we}){const Ue=ae.stackId;we&&void 0!==Ue&&(this.tabBar&&(this.tabBar.selectedTab=Ue),this.ionTabsDidChange.emit({tab:Ue}))}select(ae){const we="string"==typeof ae,Ue=we?ae:ae.detail.tab,it=this.outlet.getActiveStackId()===Ue,qt=`${this.outlet.tabsPrefix}/${Ue}`;if(we||ae.stopPropagation(),it){const En=this.outlet.getActiveStackId(),dn=this.outlet.getLastRouteView(En);if((null==dn?void 0:dn.url)===qt)return;const Gn=this.outlet.getRootView(Ue);return this.navCtrl.navigateRoot(qt,{...Gn&&qt===Gn.url&&Gn.savedExtras,animated:!0,animationDirection:"back"})}{const En=this.outlet.getLastRouteView(Ue);return this.navCtrl.navigateRoot((null==En?void 0:En.url)||qt,{...null==En?void 0:En.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(ae=>{const we=ae.el.getAttribute("slot");we!==this.tabBarSlot&&(this.tabBarSlot=we,this.relocateTabBar())})}relocateTabBar(){const ae=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(ae):this.tabsInner.nativeElement.after(ae)}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(Rt))}),(0,se.A)(Ie,"\u0275dir",ne.FsC({type:Lt,selectors:[["ion-tabs"]],viewQuery:function(ae,we){if(1&ae&&ne.GBs(Ot,7,ne.aKT),2&ae){let Ue;ne.mGM(Ue=ne.lsd())&&(we.tabsInner=Ue.first)}},hostBindings:function(ae,we){1&ae&&ne.bIt("ionTabButtonClick",function(it){return we.select(it)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"}})),Ie})(),Xn=(()=>{var Lt;class Ie{constructor(ae,we){(0,se.A)(this,"injector",void 0),(0,se.A)(this,"elementRef",void 0),(0,se.A)(this,"onChange",()=>{}),(0,se.A)(this,"onTouched",()=>{}),(0,se.A)(this,"lastValue",void 0),(0,se.A)(this,"statusChanges",void 0),this.injector=ae,this.elementRef=we}writeValue(ae){this.elementRef.nativeElement.value=this.lastValue=ae,kt(this.elementRef)}handleValueChange(ae,we){ae===this.elementRef.nativeElement&&(we!==this.lastValue&&(this.lastValue=we,this.onChange(we)),kt(this.elementRef))}_handleBlurEvent(ae){ae===this.elementRef.nativeElement&&(this.onTouched(),kt(this.elementRef))}registerOnChange(ae){this.onChange=ae}registerOnTouched(ae){this.onTouched=ae}setDisabledState(ae){this.elementRef.nativeElement.disabled=ae}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let ae;try{ae=this.injector.get(xt.vO)}catch{}if(!ae)return;ae.statusChanges&&(this.statusChanges=ae.statusChanges.subscribe(()=>kt(this.elementRef)));const we=ae.control;we&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(it=>{if(typeof we[it]<"u"){const qt=we[it].bind(we);we[it]=(...En)=>{qt(...En),kt(this.elementRef)}}})}}return Lt=Ie,(0,se.A)(Ie,"\u0275fac",function(ae){return new(ae||Lt)(ne.rXU(ne.zZn),ne.rXU(ne.aKT))}),(0,se.A)(Ie,"\u0275dir",ne.FsC({type:Lt,hostBindings:function(ae,we){1&ae&&ne.bIt("ionBlur",function(it){return we._handleBlurEvent(it.target)})}})),Ie})();const kt=Lt=>{(Lt=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Lt):"function"==typeof requestAnimationFrame?requestAnimationFrame(Lt):setTimeout(Lt)})(()=>{const Ie=Lt.nativeElement,ue=null!=Ie.value&&Ie.value.toString().length>0,ae=mt(Ie);Ye(Ie,ae);const we=Ie.closest("ion-item");we&&Ye(we,ue?[...ae,"item-has-value"]:ae)})},mt=Lt=>{const Ie=Lt.classList,ue=[];for(let ae=0;ae<Ie.length;ae++){const we=Ie.item(ae);null!==we&&Mt(we,"ng-")&&ue.push(`ion-${we.substring(3)}`)}return ue},Ye=(Lt,Ie)=>{const ue=Lt.classList;ue.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),ue.add(...Ie)},Mt=(Lt,Ie)=>Lt.substring(0,Ie.length)===Ie;class Jt{shouldDetach(Ie){return!1}shouldAttach(Ie){return!1}store(Ie,ue){}retrieve(Ie){return null}shouldReuseRoute(Ie,ue){if(Ie.routeConfig!==ue.routeConfig)return!1;const ae=Ie.params,we=ue.params,Ue=Object.keys(ae),it=Object.keys(we);if(Ue.length!==it.length)return!1;for(const qt of Ue)if(we[qt]!==ae[qt])return!1;return!0}}class Bn{constructor(Ie){(0,se.A)(this,"ctrl",void 0),this.ctrl=Ie}create(Ie){return this.ctrl.create(Ie||{})}dismiss(Ie,ue,ae){return this.ctrl.dismiss(Ie,ue,ae)}getTop(){return this.ctrl.getTop()}}},2700:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{hG:()=>Og,U1:()=>Ag,Jm:()=>F2,QW:()=>xm,b_:()=>u0,I9:()=>W1,ME:()=>yp,HW:()=>Dg,tN:()=>V2,eY:()=>ch,hU:()=>_v,W9:()=>r3,Q8:()=>$2,YW:()=>S,lO:()=>w,eU:()=>P,iq:()=>s2,KW:()=>U,$w:()=>Mm,uz:()=>rt,he:()=>Ir,nf:()=>ar,Sb:()=>xr,FH:()=>ho,Rg:()=>Xr,ln:()=>Pg,S1:()=>Kp,Gp:()=>Pm,eP:()=>c4,Nm:()=>Sf,Ip:()=>z4,Jq:()=>Xp,qW:()=>bv,p4:()=>u4,IO:()=>tg,nc:()=>Mu,Zx:()=>ng,BC:()=>wv,ai:()=>zg,K_:()=>d0,_H:()=>o2});var V=_e(9842),se=_e(1635),ne=_e(3953),l=_e(8880),qe=_e(467),Y=_e(1771);const ft=(B,_,k,D,q)=>Ut(B[1],_[1],k[1],D[1],q).map(ce=>Xt(B[0],_[0],k[0],D[0],ce)),Xt=(B,_,k,D,q)=>q*(3*_*Math.pow(q-1,2)+q*(-3*k*q+3*k+D*q))-B*Math.pow(q-1,3),Ut=(B,_,k,D,q)=>C((D-=q)-3*(k-=q)+3*(_-=q)-(B-=q),3*k-6*_+3*B,3*_-3*B,B).filter(De=>De>=0&&De<=1),C=(B,_,k,D)=>{if(0===B)return((B,_,k)=>{const D=_*_-4*B*k;return D<0?[]:[(-_+Math.sqrt(D))/(2*B),(-_-Math.sqrt(D))/(2*B)]})(_,k,D);const q=(3*(k/=B)-(_/=B)*_)/3,ce=(2*_*_*_-9*_*k+27*(D/=B))/27;if(0===q)return[Math.pow(-ce,1/3)];if(0===ce)return[Math.sqrt(-q),-Math.sqrt(-q)];const De=Math.pow(ce/2,2)+Math.pow(q/3,3);if(0===De)return[Math.pow(ce/2,.5)-_/3];if(De>0)return[Math.pow(-ce/2+Math.sqrt(De),1/3)-Math.pow(ce/2+Math.sqrt(De),1/3)-_/3];const dt=Math.sqrt(Math.pow(-q/3,3)),jt=Math.acos(-ce/(2*Math.sqrt(Math.pow(-q/3,3)))),bn=2*Math.pow(dt,1/3);return[bn*Math.cos(jt/3)-_/3,bn*Math.cos((jt+2*Math.PI)/3)-_/3,bn*Math.cos((jt+4*Math.PI)/3)-_/3]};var At=_e(1656);const Ht=function(){var B=(0,qe.A)(function*(_,k,D,q,ce,De){var dt;if(_)return _.attachViewToDom(k,D,ce,q);if(!(De||"string"==typeof D||D instanceof HTMLElement))throw new Error("framework delegate is missing");const jt="string"==typeof D?null===(dt=k.ownerDocument)||void 0===dt?void 0:dt.createElement(D):D;return q&&q.forEach(bn=>jt.classList.add(bn)),ce&&Object.assign(jt,ce),k.appendChild(jt),yield new Promise(bn=>(0,At.c)(jt,bn)),jt});return function(k,D,q,ce,De,dt){return B.apply(this,arguments)}}(),vt=(B,_)=>{if(_){if(B)return B.removeViewFromDom(_.parentElement,_);_.remove()}return Promise.resolve()},un=()=>{let B,_;return{attachViewToDom:function(){var q=(0,qe.A)(function*(ce,De,dt={},jt=[]){var bn,fi;let Ii;if(B=ce,De){const ji="string"==typeof De?null===(bn=B.ownerDocument)||void 0===bn?void 0:bn.createElement(De):De;jt.forEach(Io=>ji.classList.add(Io)),Object.assign(ji,dt),B.appendChild(ji),Ii=ji,yield new Promise(Io=>(0,At.c)(ji,Io))}else if(B.children.length>0&&("ION-MODAL"===B.tagName||"ION-POPOVER"===B.tagName)&&!(Ii=B.children[0]).classList.contains("ion-delegate-host")){const Io=null===(fi=B.ownerDocument)||void 0===fi?void 0:fi.createElement("div");Io.classList.add("ion-delegate-host"),jt.forEach(Do=>Io.classList.add(Do)),Io.append(...B.children),B.appendChild(Io),Ii=Io}const oo=document.querySelector("ion-app")||document.body;return _=document.createComment("ionic teleport"),B.parentNode.insertBefore(_,B),oo.appendChild(B),null!=Ii?Ii:B});return function(De,dt){return q.apply(this,arguments)}}(),removeViewFromDom:()=>(B&&_&&(_.parentNode.insertBefore(B,_),_.remove()),Promise.resolve())}},xn=()=>{let B;return{lock:function(){var k=(0,qe.A)(function*(){const D=B;let q;return B=new Promise(ce=>q=ce),void 0!==D&&(yield D),q});return function(){return k.apply(this,arguments)}}()}};var on=_e(6031),ht=_e(5531);const qn=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=(0,Y.lh)(this,"ionNavWillLoad",7),this.ionNavWillChange=(0,Y.lh)(this,"ionNavWillChange",3),this.ionNavDidChange=(0,Y.lh)(this,"ionNavDidChange",3),this.lockController=xn(),this.gestureOrAnimationInProgress=!1,this.mode=(0,ht.b)(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(void 0!==this.swipeHandler)}connectedCallback(){var _=this;return(0,qe.A)(function*(){_.gesture=(yield _e.e(6499).then(_e.bind(_e,6499))).createSwipeBackGesture(_.el,()=>!_.gestureOrAnimationInProgress&&!!_.swipeHandler&&_.swipeHandler.canStart(),()=>(_.gestureOrAnimationInProgress=!0,void(_.swipeHandler&&_.swipeHandler.onStart())),D=>{var q;return null===(q=_.ani)||void 0===q?void 0:q.progressStep(D)},(D,q,ce)=>{if(_.ani){_.ani.onFinish(()=>{_.gestureOrAnimationInProgress=!1,_.swipeHandler&&_.swipeHandler.onEnd(D)},{oneTimeCallback:!0});let De=D?-.001:.001;D?De+=ft([0,0],[.32,.72],[0,1],[1,1],q)[0]:(_.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),De+=ft([0,0],[1,0],[.68,.28],[1,1],q)[0]),_.ani.progressEnd(D?1:0,De,ce)}else _.gestureOrAnimationInProgress=!1}),_.swipeHandlerChanged()})()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}commit(_,k,D){var q=this;return(0,qe.A)(function*(){const ce=yield q.lockController.lock();let De=!1;try{De=yield q.transition(_,k,D)}catch(dt){console.error(dt)}return ce(),De})()}setRouteId(_,k,D,q){var ce=this;return(0,qe.A)(function*(){return{changed:yield ce.setRoot(_,k,{duration:"root"===D?0:void 0,direction:"back"===D?"back":"forward",animationBuilder:q}),element:ce.activeEl}})()}getRouteId(){var _=this;return(0,qe.A)(function*(){const k=_.activeEl;return k?{id:k.tagName,element:k,params:_.activeParams}:void 0})()}setRoot(_,k,D){var q=this;return(0,qe.A)(function*(){if(q.activeComponent===_&&(0,At.s)(k,q.activeParams))return!1;const ce=q.activeEl,De=yield Ht(q.delegate,q.el,_,["ion-page","ion-page-invisible"],k);return q.activeComponent=_,q.activeEl=De,q.activeParams=k,yield q.commit(De,ce,D),yield vt(q.delegate,ce),!0})()}transition(_,k,D={}){var q=this;return(0,qe.A)(function*(){if(k===_)return!1;q.ionNavWillChange.emit();const{el:ce,mode:De}=q,dt=q.animated&&ht.c.getBoolean("animated",!0),jt=D.animationBuilder||q.animation||ht.c.get("navAnimation");return yield(0,on.t)(Object.assign(Object.assign({mode:De,animated:dt,enteringEl:_,leavingEl:k,baseEl:ce,deepWait:(0,At.j)(ce),progressCallback:D.progressAnimation?bn=>{void 0===bn||q.gestureOrAnimationInProgress?q.ani=bn:(q.gestureOrAnimationInProgress=!0,bn.onFinish(()=>{q.gestureOrAnimationInProgress=!1,q.swipeHandler&&q.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),bn.progressEnd(0,0,0))}:void 0},D),{animationBuilder:jt})),q.ionNavDidChange.emit(),!0})()}render(){return(0,Y.h)("slot",{key:"8279a453c66a766e6e383ff59842b4ae070c13a9"})}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}"}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]},void 0,{swipeHandler:["swipeHandlerChanged"]}]),vn=function xt(){typeof customElements>"u"||["ion-router-outlet"].forEach(_=>{"ion-router-outlet"===_&&(customElements.get(_)||customElements.define(_,qn))})};var Pn=_e(177),ki=_e(8573),Ct=_e(7849),Me=_e(1979),pn=_e(6081),Rt=_e(4878),On=_e(5098),Cn=_e(8875);const so='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Fn=(B,_)=>{const k=B.querySelector(so);Ae(k,null!=_?_:B)},Ke=(B,_)=>{const k=Array.from(B.querySelectorAll(so));Ae(k.length>0?k[k.length-1]:null,null!=_?_:B)},Ae=(B,_)=>{let k=B;const D=null==B?void 0:B.shadowRoot;D&&(k=D.querySelector(so)||B),k?(0,At.f)(k):_.focus()};let Ge=0,tt=0;const zt=new WeakMap,Yn=B=>({create:_=>br(B,_),dismiss:(_,k,D)=>si(document,_,k,B,D),getTop:()=>(0,qe.A)(function*(){return eo(document,B)})()}),cn=Yn("ion-alert"),_o=Yn("ion-action-sheet"),pr=Yn("ion-modal"),zr=Yn("ion-popover"),Mi=Yn("ion-toast"),rs=B=>{typeof document<"u"&&ao(document);const _=Ge++;B.overlayIndex=_},$i=B=>(B.hasAttribute("id")||(B.id="ion-overlay-"+ ++tt),B.id),br=(B,_)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(B).then(()=>{const k=document.createElement(B);return k.classList.add("overlay-hidden"),Object.assign(k,Object.assign(Object.assign({},_),{hasController:!0})),cs(document).appendChild(k),new Promise(D=>(0,At.c)(k,D))}):Promise.resolve(),Li=(B,_)=>{let k=B;const D=null==B?void 0:B.shadowRoot;D&&(k=D.querySelector(so)||B),k?(0,At.f)(k):_.focus()},ao=B=>{0===Ge&&(Ge=1,B.addEventListener("focus",_=>{((B,_)=>{const k=eo(_,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),D=B.target;k&&D&&!k.classList.contains(Xs)&&(k.shadowRoot?(()=>{if(k.contains(D))k.lastFocus=D;else if("ION-TOAST"===D.tagName)Li(k.lastFocus,k);else{const De=k.lastFocus;Fn(k),De===_.activeElement&&Ke(k),k.lastFocus=_.activeElement}})():(()=>{if(k===D)k.lastFocus=void 0;else if("ION-TOAST"===D.tagName)Li(k.lastFocus,k);else{const De=(0,At.g)(k);if(!De.contains(D))return;const dt=De.querySelector(".ion-overlay-wrapper");if(!dt)return;if(dt.contains(D)||D===De.querySelector("ion-backdrop"))k.lastFocus=D;else{const jt=k.lastFocus;Fn(dt,k),jt===_.activeElement&&Ke(dt,k),k.lastFocus=_.activeElement}}})())})(_,B)},!0),B.addEventListener("ionBackButton",_=>{const k=eo(B);null!=k&&k.backdropDismiss&&_.detail.register(On.OVERLAY_BACK_BUTTON_PRIORITY,()=>{k.dismiss(void 0,ir)})}),(0,On.shouldUseCloseWatcher)()||B.addEventListener("keydown",_=>{if("Escape"===_.key){const k=eo(B);null!=k&&k.backdropDismiss&&k.dismiss(void 0,ir)}}))},si=(B,_,k,D,q)=>{const ce=eo(B,D,q);return ce?ce.dismiss(_,k):Promise.reject("overlay does not exist")},mo=(B,_)=>((B,_)=>(void 0===_&&(_="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(B.querySelectorAll(_)).filter(k=>k.overlayIndex>0)))(B,_).filter(k=>!(B=>B.classList.contains("overlay-hidden"))(k)),eo=(B,_,k)=>{const D=mo(B,_);return void 0===k?D[D.length-1]:D.find(q=>q.id===k)},es=(B=!1)=>{const k=cs(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");k&&(B?k.setAttribute("aria-hidden","true"):k.removeAttribute("aria-hidden"))},Jo=function(){var B=(0,qe.A)(function*(_,k,D,q,ce){var De,dt;if(_.presented)return;es(!0),document.body.classList.add(Cn.B),as(_.el),_.presented=!0,_.willPresent.emit(),null===(De=_.willPresentShorthand)||void 0===De||De.emit();const jt=(0,ht.b)(_),bn=_.enterAnimation?_.enterAnimation:ht.c.get(k,"ios"===jt?D:q);(yield Cs(_,bn,_.el,ce))&&(_.didPresent.emit(),null===(dt=_.didPresentShorthand)||void 0===dt||dt.emit()),"ION-TOAST"!==_.el.tagName&&or(_.el),_.keyboardClose&&(null===document.activeElement||!_.el.contains(document.activeElement))&&_.el.focus(),_.el.removeAttribute("aria-hidden")});return function(k,D,q,ce,De){return B.apply(this,arguments)}}(),or=function(){var B=(0,qe.A)(function*(_){let k=document.activeElement;if(!k)return;const D=null==k?void 0:k.shadowRoot;D&&(k=D.querySelector(so)||k),yield _.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&k.focus()});return function(k){return B.apply(this,arguments)}}(),ti=function(){var B=(0,qe.A)(function*(_,k,D,q,ce,De,dt){var jt,bn;if(!_.presented)return!1;void 0!==Rt.d&&1===mo(Rt.d).length&&(es(!1),document.body.classList.remove(Cn.B)),_.presented=!1;try{_.el.style.setProperty("pointer-events","none"),_.willDismiss.emit({data:k,role:D}),null===(jt=_.willDismissShorthand)||void 0===jt||jt.emit({data:k,role:D});const Ii=(0,ht.b)(_),oo=_.leaveAnimation?_.leaveAnimation:ht.c.get(q,"ios"===Ii?ce:De);D!==_r&&(yield Cs(_,oo,_.el,dt)),_.didDismiss.emit({data:k,role:D}),null===(bn=_.didDismissShorthand)||void 0===bn||bn.emit({data:k,role:D}),(zt.get(_)||[]).forEach(Io=>Io.destroy()),zt.delete(_),_.el.classList.add("overlay-hidden"),_.el.style.removeProperty("pointer-events"),void 0!==_.el.lastFocus&&(_.el.lastFocus=void 0)}catch(Ii){console.error(Ii)}return _.el.remove(),Lr(),!0});return function(k,D,q,ce,De,dt,jt){return B.apply(this,arguments)}}(),cs=B=>B.querySelector("ion-app")||B.body,Cs=function(){var B=(0,qe.A)(function*(_,k,D,q){D.classList.remove("overlay-hidden");const De=k(_.el,q);(!_.animated||!ht.c.getBoolean("animated",!0))&&De.duration(0),_.keyboardClose&&De.beforeAddWrite(()=>{const jt=D.ownerDocument.activeElement;null!=jt&&jt.matches("input,ion-input, ion-textarea")&&jt.blur()});const dt=zt.get(_)||[];return zt.set(_,[...dt,De]),yield De.play(),!0});return function(k,D,q,ce){return B.apply(this,arguments)}}(),Or=(B,_)=>{let k;const D=new Promise(q=>k=q);return Kr(B,_,q=>{k(q.detail)}),D},Kr=(B,_,k)=>{const D=q=>{(0,At.b)(B,_,D),k(q)};(0,At.a)(B,_,D)},Qr=B=>"cancel"===B||B===ir,Ho=B=>B(),Nr=(B,_)=>{if("function"==typeof B)return ht.c.get("_zoneGate",Ho)(()=>{try{return B(_)}catch(D){throw D}})},ir="backdrop",_r="gesture",Gs=B=>{let k,_=!1;const D=un(),q=(dt=!1)=>{if(k&&!dt)return{delegate:k,inline:_};const{el:jt,hasController:bn,delegate:fi}=B;return _=null!==jt.parentNode&&!bn,k=_?fi||D:fi,{inline:_,delegate:k}};return{attachViewToDom:function(){var dt=(0,qe.A)(function*(jt){const{delegate:bn}=q(!0);if(bn)return yield bn.attachViewToDom(B.el,jt);const{hasController:fi}=B;if(fi&&void 0!==jt)throw new Error("framework delegate is missing");return null});return function(bn){return dt.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:dt}=q();dt&&void 0!==B.el&&dt.removeViewFromDom(B.el.parentElement,B.el)}}},ni=()=>{let B;const _=()=>{B&&(B(),B=void 0)};return{addClickListener:(D,q)=>{_();const ce=void 0!==q?document.getElementById(q):null;ce?B=((dt,jt)=>{const bn=()=>{jt.present()};return dt.addEventListener("click",bn),()=>{dt.removeEventListener("click",bn)}})(ce,D):(0,Me.p)(`A trigger element with the ID "${q}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,D)},removeClickListener:_}},as=B=>{var _;if(void 0===Rt.d)return;const k=mo(Rt.d);for(let D=k.length-1;D>=0;D--){const q=k[D],ce=null!==(_=k[D+1])&&void 0!==_?_:B;(ce.hasAttribute("aria-hidden")||"ION-TOAST"!==ce.tagName)&&q.setAttribute("aria-hidden","true")}},Lr=()=>{if(void 0===Rt.d)return;const B=mo(Rt.d);for(let _=B.length-1;_>=0;_--){const k=B[_];if(k.removeAttribute("aria-hidden"),"ION-TOAST"!==k.tagName)break}},Xs="ion-disable-focus-trap",vs=(B,_)=>null!==_.closest(B),Hr=(B,_)=>"string"==typeof B&&B.length>0?Object.assign({"ion-color":!0,[`ion-color-${B}`]:!0},_):_,ei=B=>{const _={};return(B=>void 0!==B?(Array.isArray(B)?B:B.split(" ")).filter(k=>null!=k).map(k=>k.trim()).filter(k=>""!==k):[])(B).forEach(k=>_[k]=!0),_},Pi=/^[a-z][a-z0-9+\-.]*:/,Xn=function(){var B=(0,qe.A)(function*(_,k,D,q){if(null!=_&&"#"!==_[0]&&!Pi.test(_)){const ce=document.querySelector("ion-router");if(ce)return null!=k&&k.preventDefault(),ce.push(_,D,q)}return!1});return function(k,D,q,ce){return B.apply(this,arguments)}}();var kt=_e(6008),mt=_e(555),Ye=_e(2104);const Ie=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=(0,Y.lh)(this,"ionBackdropTap",7),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}onMouseDown(_){this.emitTap(_)}emitTap(_){this.stopPropagation&&(_.preventDefault(),_.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"c803b4302c8e722064feb03dafe3cb6e190b4f2b",tabindex:"-1","aria-hidden":"true",class:{[_]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",md:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}"}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function ue(){typeof customElements>"u"||["ion-backdrop"].forEach(_=>{"ion-backdrop"===_&&(customElements.get(_)||customElements.define(_,Ie))})}var ae=function(B){return B.Dark="DARK",B.Light="LIGHT",B.Default="DEFAULT",B}(ae||{});const we={getEngine(){const B=(0,pn.g)();if(null!=B&&B.isPluginAvailable("StatusBar"))return B.Plugins.StatusBar},setStyle(B){const _=this.getEngine();_&&_.setStyle(B)},getStyle:(B=(0,qe.A)(function*(){const _=this.getEngine();if(!_)return ae.Default;const{style:k}=yield _.getInfo();return k}),function(){return B.apply(this,arguments)})},Ue=(B,_)=>{if(1===_)return 0;const k=1/(1-_);return B*k+-_*k},it=()=>{!Rt.w||Rt.w.innerWidth>=768||we.setStyle({style:ae.Dark})},qt=(B=ae.Default)=>{!Rt.w||Rt.w.innerWidth>=768||we.setStyle({style:B})},En=function(){var B=(0,qe.A)(function*(_,k){"function"!=typeof _.canDismiss||!(yield _.canDismiss(void 0,_r))||(k.isRunning()?k.onFinish(()=>{_.dismiss(void 0,"handler")},{oneTimeCallback:!0}):_.dismiss(void 0,"handler"))});return function(k,D){return B.apply(this,arguments)}}(),dn=B=>.00255275*2.71828**(-14.9619*B)-1.00255*2.71828**(-.0380968*B)+1,Vi=(B,_)=>(0,At.k)(400,B/Math.abs(1.1*_),500),Bo=B=>{const{currentBreakpoint:_,backdropBreakpoint:k}=B,D=void 0===k||k<_,q=D?`calc(var(--backdrop-opacity) * ${_})`:"0",ce=(0,mt.c)("backdropAnimation").fromTo("opacity",0,q);return D&&ce.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:(0,mt.c)("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:`translateY(${100-100*_}%)`}]),backdropAnimation:ce}},rr=B=>{const{currentBreakpoint:_,backdropBreakpoint:k}=B,D=`calc(var(--backdrop-opacity) * ${Ue(_,k)})`,q=[{offset:0,opacity:D},{offset:1,opacity:0}],ce=[{offset:0,opacity:D},{offset:k,opacity:0},{offset:1,opacity:0}],De=(0,mt.c)("backdropAnimation").keyframes(0!==k?ce:q);return{wrapperAnimation:(0,mt.c)("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:`translateY(${100-100*_}%)`},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:De}},Vn=(B,_)=>{const{presentingEl:k,currentBreakpoint:D}=_,q=(0,At.g)(B),{wrapperAnimation:ce,backdropAnimation:De}=void 0!==D?Bo(_):{backdropAnimation:(0,mt.c)().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),wrapperAnimation:(0,mt.c)().fromTo("transform","translateY(100vh)","translateY(0vh)")};De.addElement(q.querySelector("ion-backdrop")),ce.addElement(q.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const dt=(0,mt.c)("entering-base").addElement(B).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(ce);if(k){const jt=window.innerWidth<768,bn="ION-MODAL"===k.tagName&&void 0!==k.presentingElement,fi=(0,At.g)(k),Ii=(0,mt.c)().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),oo=document.body;if(jt){const ji=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",wr=`translateY(${bn?"-10px":ji}) scale(0.915)`;Ii.afterStyles({transform:wr}).beforeAddWrite(()=>oo.style.setProperty("background-color","black")).addElement(k).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:wr,borderRadius:"10px 10px 0 0"}]),dt.addAnimation(Ii)}else if(dt.addAnimation(De),bn){const Io=`translateY(-10px) scale(${bn?.915:1})`;Ii.afterStyles({transform:Io}).addElement(fi.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:Io}]);const Do=(0,mt.c)().afterStyles({transform:Io}).addElement(fi.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:Io}]);dt.addAnimation([Ii,Do])}else ce.fromTo("opacity","0","1")}else dt.addAnimation(De);return dt},po=(B,_,k=500)=>{const{presentingEl:D,currentBreakpoint:q}=_,ce=(0,At.g)(B),{wrapperAnimation:De,backdropAnimation:dt}=void 0!==q?rr(_):{backdropAnimation:(0,mt.c)().fromTo("opacity","var(--backdrop-opacity)",0),wrapperAnimation:(0,mt.c)().fromTo("transform","translateY(0vh)","translateY(100vh)")};dt.addElement(ce.querySelector("ion-backdrop")),De.addElement(ce.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const jt=(0,mt.c)("leaving-base").addElement(B).easing("cubic-bezier(0.32,0.72,0,1)").duration(k).addAnimation(De);if(D){const bn=window.innerWidth<768,fi="ION-MODAL"===D.tagName&&void 0!==D.presentingElement,Ii=(0,At.g)(D),oo=(0,mt.c)().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(Io=>{1===Io&&(D.style.setProperty("overflow",""),Array.from(ji.querySelectorAll("ion-modal:not(.overlay-hidden)")).filter(wr=>void 0!==wr.presentingElement).length<=1&&ji.style.setProperty("background-color",""))}),ji=document.body;if(bn){const Io=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",ls=`translateY(${fi?"-10px":Io}) scale(0.915)`;oo.addElement(D).keyframes([{offset:0,filter:"contrast(0.85)",transform:ls,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),jt.addAnimation(oo)}else if(jt.addAnimation(dt),fi){const Do=`translateY(-10px) scale(${fi?.915:1})`;oo.addElement(Ii.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:Do},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const wr=(0,mt.c)().addElement(Ii.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:Do},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);jt.addAnimation([oo,wr])}else De.fromTo("opacity","1","0")}else jt.addAnimation(dt);return jt},Yt=(B,_)=>{const{currentBreakpoint:k}=_,D=(0,At.g)(B),{wrapperAnimation:q,backdropAnimation:ce}=void 0!==k?Bo(_):{backdropAnimation:(0,mt.c)().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),wrapperAnimation:(0,mt.c)().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}])};return ce.addElement(D.querySelector("ion-backdrop")),q.addElement(D.querySelector(".modal-wrapper")),(0,mt.c)().addElement(B).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([ce,q])},Ri=(B,_)=>{const{currentBreakpoint:k}=_,D=(0,At.g)(B),{wrapperAnimation:q,backdropAnimation:ce}=void 0!==k?rr(_):{backdropAnimation:(0,mt.c)().fromTo("opacity","var(--backdrop-opacity)",0),wrapperAnimation:(0,mt.c)().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}])};return ce.addElement(D.querySelector("ion-backdrop")),q.addElement(D.querySelector(".modal-wrapper")),(0,mt.c)().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([ce,q])},Rl=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=(0,Y.lh)(this,"ionModalDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionModalWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionModalWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=(0,Y.lh)(this,"ionBreakpointDidChange",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.ionMount=(0,Y.lh)(this,"ionMount",7),this.lockController=xn(),this.triggerController=ni(),this.coreDelegate=un(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.onHandleClick=()=>{const{sheetTransition:_,handleBehavior:k}=this;"cycle"!==k||void 0!==_||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:_}=this;void 0===_&&this.dismiss(void 0,ir)},this.onLifecycle=_=>{const k=this.usersElement,D=Du[_.type];if(k&&D){const q=new CustomEvent(D,{bubbles:!1,cancelable:!1,detail:_.detail});k.dispatchEvent(q)}},this.presented=!1,this.hasController=!1,this.overlayIndex=void 0,this.delegate=void 0,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.breakpoints=void 0,this.initialBreakpoint=void 0,this.backdropBreakpoint=0,this.handle=void 0,this.handleBehavior="none",this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.presentingElement=void 0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0,this.keepContentsMounted=!1,this.focusTrap=!0,this.canDismiss=!0}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}triggerChanged(){const{trigger:_,el:k,triggerController:D}=this;_&&D.addClickListener(k,_)}breakpointsChanged(_){void 0!==_&&(this.sortedBreakpoints=_.sort((k,D)=>k-D))}connectedCallback(){const{el:_}=this;rs(_),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){const{breakpoints:_,initialBreakpoint:k,el:D,htmlAttributes:q}=this,ce=this.isSheetModal=void 0!==_&&void 0!==k,De=["aria-label","role"];this.inheritedAttributes=(0,At.d)(D,De),void 0!==q&&De.forEach(dt=>{q[dt]&&(this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{[dt]:q[dt]}),delete q[dt])}),ce&&(this.currentBreakpoint=this.initialBreakpoint),void 0!==_&&void 0!==k&&!_.includes(k)&&(0,Me.p)("Your breakpoints array must include the initialBreakpoint value."),$i(D)}componentDidLoad(){!0===this.isOpen&&(0,At.r)(()=>this.present()),this.breakpointsChanged(this.breakpoints),this.triggerChanged()}getDelegate(_=!1){if(this.workingDelegate&&!_)return{delegate:this.workingDelegate,inline:this.inline};const D=this.inline=null!==this.el.parentNode&&!this.hasController;return{inline:D,delegate:this.workingDelegate=D?this.delegate||this.coreDelegate:this.delegate}}checkCanDismiss(_,k){var D=this;return(0,qe.A)(function*(){const{canDismiss:q}=D;return"function"==typeof q?q(_,k):q})()}present(){var _=this;return(0,qe.A)(function*(){const k=yield _.lockController.lock();if(_.presented)return void k();const{presentingElement:D,el:q}=_;_.currentBreakpoint=_.initialBreakpoint;const{inline:ce,delegate:De}=_.getDelegate(!0);_.ionMount.emit(),_.usersElement=yield Ht(De,q,_.component,["ion-page"],_.componentProps,ce),(0,At.j)(q)?yield(0,on.e)(_.usersElement):_.keepContentsMounted||(yield(0,on.w)()),(0,Y.bN)(()=>_.el.classList.add("show-modal"));const dt=void 0!==D;dt&&"ios"===(0,ht.b)(_)&&(_.statusBarStyle=yield we.getStyle(),it()),yield Jo(_,"modalEnter",Vn,Yt,{presentingEl:D,currentBreakpoint:_.initialBreakpoint,backdropBreakpoint:_.backdropBreakpoint}),typeof window<"u"&&(_.keyboardOpenCallback=()=>{_.gesture&&(_.gesture.enable(!1),(0,At.r)(()=>{_.gesture&&_.gesture.enable(!0)}))},window.addEventListener(kt.KEYBOARD_DID_OPEN,_.keyboardOpenCallback)),_.isSheetModal?_.initSheetGesture():dt&&_.initSwipeToClose(),k()})()}initSwipeToClose(){var k,_=this;if("ios"!==(0,ht.b)(this))return;const{el:D}=this,q=this.leaveAnimation||ht.c.get("modalLeave",po),ce=this.animation=q(D,{presentingEl:this.presentingElement});if(!(0,Ct.f)(D))return void(0,Ct.p)(D);const dt=null!==(k=this.statusBarStyle)&&void 0!==k?k:ae.Default;this.gesture=((B,_,k,D)=>{const ce=B.offsetHeight;let De=!1,dt=!1,jt=null,bn=null,Ii=!0,oo=0;const ys=(0,Ye.createGesture)({el:B,gestureName:"modalSwipeToClose",gesturePriority:39,direction:"y",threshold:10,canStart:Ur=>{const xs=Ur.event.target;return null===xs||!xs.closest||(jt=(0,Ct.a)(xs),jt?(bn=(0,Ct.i)(jt)?(0,At.g)(jt).querySelector(".inner-scroll"):jt,!jt.querySelector("ion-refresher")&&0===bn.scrollTop):null===xs.closest("ion-footer"))},onStart:Ur=>{const{deltaY:xs}=Ur;Ii=!jt||!(0,Ct.i)(jt)||jt.scrollY,dt=void 0!==B.canDismiss&&!0!==B.canDismiss,xs>0&&jt&&(0,Ct.d)(jt),_.progressStart(!0,De?1:0)},onMove:Ur=>{const{deltaY:xs}=Ur;xs>0&&jt&&(0,Ct.d)(jt);const Is=Ur.deltaY/ce,Us=Is>=0&&dt,fl=Us?.2:.9999,Ec=Us?dn(Is/fl):Is,Dl=(0,At.k)(1e-4,Ec,fl);_.progressStep(Dl),Dl>=.5&&oo<.5?qt(k):Dl<.5&&oo>=.5&&it(),oo=Dl},onEnd:Ur=>{const xs=Ur.velocityY,Is=Ur.deltaY/ce,Us=Is>=0&&dt,fl=Us?.2:.9999,Ec=Us?dn(Is/fl):Is,Dl=(0,At.k)(1e-4,Ec,fl),Es=!Us&&(Ur.deltaY+1e3*xs)/ce>=.5;let Fu=Es?-.001:.001;Es?(_.easing("cubic-bezier(0.32, 0.72, 0, 1)"),Fu+=ft([0,0],[.32,.72],[0,1],[1,1],Dl)[0]):(_.easing("cubic-bezier(1, 0, 0.68, 0.28)"),Fu+=ft([0,0],[1,0],[.68,.28],[1,1],Dl)[0]);const nd=Vi(Es?Is*ce:(1-Dl)*ce,xs);De=Es,ys.enable(!1),jt&&(0,Ct.r)(jt,Ii),_.onFinish(()=>{Es||ys.enable(!0)}).progressEnd(Es?1:0,Fu,nd),Us&&Dl>fl/4?En(B,_):Es&&D()}});return ys})(D,ce,dt,()=>{this.gestureAnimationDismissing=!0,qt(this.statusBarStyle),this.animation.onFinish((0,qe.A)(function*(){yield _.dismiss(void 0,_r),_.gestureAnimationDismissing=!1}))}),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:_,initialBreakpoint:k,backdropBreakpoint:D}=this;if(!_||void 0===k)return;const q=this.enterAnimation||ht.c.get("modalEnter",Vn),ce=this.animation=q(this.el,{presentingEl:this.presentingElement,currentBreakpoint:k,backdropBreakpoint:D});ce.progressStart(!0,1);const{gesture:De,moveSheetToBreakpoint:dt}=((B,_,k,D,q,ce,De=[],dt,jt,bn)=>{const oo={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:0!==q?[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-q,opacity:0},{offset:1,opacity:0}]:[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}]},ji=B.querySelector("ion-content"),Io=k.clientHeight;let Do=D,wr=0,ls=!1;const Ur=ce.childAnimations.find(Vu=>"wrapperAnimation"===Vu.id),xs=ce.childAnimations.find(Vu=>"backdropAnimation"===Vu.id),Is=De[De.length-1],Us=De[0],fl=()=>{B.style.setProperty("pointer-events","auto"),_.style.setProperty("pointer-events","auto"),B.classList.remove(Xs)},Ec=()=>{B.style.setProperty("pointer-events","none"),_.style.setProperty("pointer-events","none"),B.classList.add(Xs)};Ur&&xs&&(Ur.keyframes([...oo.WRAPPER_KEYFRAMES]),xs.keyframes([...oo.BACKDROP_KEYFRAMES]),ce.progressStart(!0,1-Do),Do>q?fl():Ec()),ji&&Do!==Is&&(ji.scrollY=!1);const nd=Vu=>{const{breakpoint:id,canDismiss:uh,breakpointOffset:Rc,animated:$u}=Vu,Cc=uh&&0===id,ju=Cc?Do:id,c2=0!==ju;return Do=0,Ur&&xs&&(Ur.keyframes([{offset:0,transform:`translateY(${100*Rc}%)`},{offset:1,transform:`translateY(${100*(1-ju)}%)`}]),xs.keyframes([{offset:0,opacity:`calc(var(--backdrop-opacity) * ${Ue(1-Rc,q)})`},{offset:1,opacity:`calc(var(--backdrop-opacity) * ${Ue(ju,q)})`}]),ce.progressStep(0)),Gd.enable(!1),Cc?En(B,ce):c2||jt(),ji&&ju===De[De.length-1]&&(ji.scrollY=!0),new Promise(Cl=>{ce.onFinish(()=>{c2?Ur&&xs?(0,At.r)(()=>{Ur.keyframes([...oo.WRAPPER_KEYFRAMES]),xs.keyframes([...oo.BACKDROP_KEYFRAMES]),ce.progressStart(!0,1-ju),Do=ju,bn(Do),Do>q?fl():Ec(),Gd.enable(!0),Cl()}):(Gd.enable(!0),Cl()):Cl()},{oneTimeCallback:!0}).progressEnd(1,0,$u?500:0)})},Gd=(0,Ye.createGesture)({el:k,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:Vu=>{const id=(0,Ct.a)(Vu.event.target);if(Do=dt(),1===Do&&id){const uh=(0,Ct.i)(id)?(0,At.g)(id).querySelector(".inner-scroll"):id;return!id.querySelector("ion-refresher")&&0===uh.scrollTop}return!0},onStart:Vu=>{ls=void 0!==B.canDismiss&&!0!==B.canDismiss&&0===Us,Vu.deltaY>0&&ji&&(ji.scrollY=!1),(0,At.r)(()=>{B.focus()}),ce.progressStart(!0,1-Do)},onMove:Vu=>{Vu.deltaY>0&&ji&&(ji.scrollY=!1);const uh=De.length>1?1-De[1]:void 0,Rc=1-Do+Vu.deltaY/Io,$u=void 0!==uh&&Rc>=uh&&ls,Cc=$u?.95:.9999,ju=$u&&void 0!==uh?uh+dn((Rc-uh)/(Cc-uh)):Rc;wr=(0,At.k)(1e-4,ju,Cc),ce.progressStep(wr)},onEnd:Vu=>{const Rc=Do-(Vu.deltaY+350*Vu.velocityY)/Io,$u=De.reduce((Cc,ju)=>Math.abs(ju-Rc)<Math.abs(Cc-Rc)?ju:Cc);nd({breakpoint:$u,breakpointOffset:wr,canDismiss:ls,animated:!0})}});return{gesture:Gd,moveSheetToBreakpoint:nd}})(this.el,this.backdropEl,_,k,D,ce,this.sortedBreakpoints,()=>{var jt;return null!==(jt=this.currentBreakpoint)&&void 0!==jt?jt:0},()=>this.sheetOnDismiss(),jt=>{this.currentBreakpoint!==jt&&(this.currentBreakpoint=jt,this.ionBreakpointDidChange.emit({breakpoint:jt}))});this.gesture=De,this.moveSheetToBreakpoint=dt,this.gesture.enable(!0)}sheetOnDismiss(){var _=this;this.gestureAnimationDismissing=!0,this.animation.onFinish((0,qe.A)(function*(){_.currentBreakpoint=0,_.ionBreakpointDidChange.emit({breakpoint:_.currentBreakpoint}),yield _.dismiss(void 0,_r),_.gestureAnimationDismissing=!1}))}dismiss(_,k){var D=this;return(0,qe.A)(function*(){var q;if(D.gestureAnimationDismissing&&k!==_r)return!1;const ce=yield D.lockController.lock();if("handler"!==k&&!(yield D.checkCanDismiss(_,k)))return ce(),!1;const{presentingElement:De}=D;void 0!==De&&"ios"===(0,ht.b)(D)&&qt(D.statusBarStyle),typeof window<"u"&&D.keyboardOpenCallback&&(window.removeEventListener(kt.KEYBOARD_DID_OPEN,D.keyboardOpenCallback),D.keyboardOpenCallback=void 0);const jt=yield ti(D,_,k,"modalLeave",po,Ri,{presentingEl:De,currentBreakpoint:null!==(q=D.currentBreakpoint)&&void 0!==q?q:D.initialBreakpoint,backdropBreakpoint:D.backdropBreakpoint});if(jt){const{delegate:bn}=D.getDelegate();yield vt(bn,D.usersElement),(0,Y.bN)(()=>D.el.classList.remove("show-modal")),D.animation&&D.animation.destroy(),D.gesture&&D.gesture.destroy()}return D.currentBreakpoint=void 0,D.animation=void 0,ce(),jt})()}onDidDismiss(){return Or(this.el,"ionModalDidDismiss")}onWillDismiss(){return Or(this.el,"ionModalWillDismiss")}setCurrentBreakpoint(_){var k=this;return(0,qe.A)(function*(){if(!k.isSheetModal)return void(0,Me.p)("setCurrentBreakpoint is only supported on sheet modals.");if(!k.breakpoints.includes(_))return void(0,Me.p)(`Attempted to set invalid breakpoint value ${_}. Please double check that the breakpoint value is part of your defined breakpoints.`);const{currentBreakpoint:D,moveSheetToBreakpoint:q,canDismiss:ce,breakpoints:De,animated:dt}=k;D!==_&&q&&(k.sheetTransition=q({breakpoint:_,breakpointOffset:1-D,canDismiss:void 0!==ce&&!0!==ce&&0===De[0],animated:dt}),yield k.sheetTransition,k.sheetTransition=void 0)})()}getCurrentBreakpoint(){var _=this;return(0,qe.A)(function*(){return _.currentBreakpoint})()}moveToNextBreakpoint(){var _=this;return(0,qe.A)(function*(){const{breakpoints:k,currentBreakpoint:D}=_;if(!k||null==D)return!1;const q=k.filter(jt=>0!==jt),De=(q.indexOf(D)+1)%q.length,dt=q[De];return yield _.setCurrentBreakpoint(dt),!0})()}render(){const{handle:_,isSheetModal:k,presentingElement:D,htmlAttributes:q,handleBehavior:ce,inheritedAttributes:De,focusTrap:dt}=this,jt=!1!==_&&k,bn=(0,ht.b)(this),fi=void 0!==D&&"ios"===bn,Ii="cycle"===ce;return(0,Y.h)(Y.xr,Object.assign({key:"fe6fd17cf857127f89d652b9aa3e9473d28c55db","no-router":!0,tabindex:"-1"},q,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign({[bn]:!0,"modal-default":!fi&&!k,"modal-card":fi,"modal-sheet":k,"overlay-hidden":!0,[Xs]:!1===dt},ei(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),(0,Y.h)("ion-backdrop",{key:"0f3a31363c2717e5483bc0412c25804897d4aff8",ref:oo=>this.backdropEl=oo,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),"ios"===bn&&(0,Y.h)("div",{key:"0e5ed59162ff08fe0a9f757e06bdacc75f65c0ed",class:"modal-shadow"}),(0,Y.h)("div",Object.assign({key:"35cdbe2238765e5f346ad7be64f7eefa8c78f0c0",role:"dialog"},De,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:oo=>this.wrapperEl=oo}),jt&&(0,Y.h)("button",{key:"7a4031eaebf9a098f4c4220a5fe9d1c25cc0ec92",class:"modal-handle",tabIndex:Ii?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:Ii?this.onHandleClick:void 0,part:"handle"}),(0,Y.h)("slot",{key:"534adc8e5bd850199fe2e9e16f0e7c19217d8486"})))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}',md:':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}'}}},[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],focusTrap:[4,"focus-trap"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]},void 0,{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),Du={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};var B;const Hi=function Ra(){typeof customElements>"u"||["ion-modal","ion-backdrop"].forEach(_=>{switch(_){case"ion-modal":customElements.get(_)||customElements.define(_,Rl);break;case"ion-backdrop":customElements.get(_)||ue()}})},Tr=(B,_,k)=>{const D=_.getBoundingClientRect(),q=D.height;let ce=D.width;return"cover"===B&&k&&(ce=k.getBoundingClientRect().width),{contentWidth:ce,contentHeight:q}},Vs=(B,_,k)=>{let D=[];switch(_){case"hover":let q;D=[{eventName:"mouseenter",callback:(ce=(0,qe.A)(function*(De){De.stopPropagation(),q&&clearTimeout(q),q=setTimeout(()=>{(0,At.r)(()=>{k.presentFromTrigger(De),q=void 0})},100)}),function(dt){return ce.apply(this,arguments)})},{eventName:"mouseleave",callback:ce=>{q&&clearTimeout(q);const De=ce.relatedTarget;De&&De.closest("ion-popover")!==k&&k.dismiss(void 0,void 0,!1)}},{eventName:"click",callback:ce=>ce.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:ce=>k.presentFromTrigger(ce,!0)}];break;case"context-menu":D=[{eventName:"contextmenu",callback:ce=>{ce.preventDefault(),k.presentFromTrigger(ce)}},{eventName:"click",callback:ce=>ce.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:ce=>k.presentFromTrigger(ce,!0)}];break;default:D=[{eventName:"click",callback:ce=>k.presentFromTrigger(ce)},{eventName:"ionPopoverActivateTrigger",callback:ce=>k.presentFromTrigger(ce,!0)}]}var ce;return D.forEach(({eventName:q,callback:ce})=>B.addEventListener(q,ce)),B.setAttribute("data-ion-popover-trigger","true"),()=>{D.forEach(({eventName:q,callback:ce})=>B.removeEventListener(q,ce)),B.removeAttribute("data-ion-popover-trigger")}},Ys=(B,_)=>_&&"ION-ITEM"===_.tagName?B.findIndex(k=>k===_):-1,ol=B=>{const k=(0,At.g)(B).querySelector("button");k&&(0,At.r)(()=>k.focus())},ru=B=>{const _=function(){var k=(0,qe.A)(function*(D){var q;const ce=document.activeElement;let De=[];const dt=null===(q=D.target)||void 0===q?void 0:q.tagName;if("ION-POPOVER"===dt||"ION-ITEM"===dt){try{De=Array.from(B.querySelectorAll("ion-item:not(ion-popover ion-popover *):not([disabled])"))}catch{}switch(D.key){case"ArrowLeft":(yield B.getParentPopover())&&B.dismiss(void 0,void 0,!1);break;case"ArrowDown":D.preventDefault();const bn=((B,_)=>B[Ys(B,_)+1])(De,ce);void 0!==bn&&ol(bn);break;case"ArrowUp":D.preventDefault();const fi=((B,_)=>B[Ys(B,_)-1])(De,ce);void 0!==fi&&ol(fi);break;case"Home":D.preventDefault();const Ii=De[0];void 0!==Ii&&ol(Ii);break;case"End":D.preventDefault();const oo=De[De.length-1];void 0!==oo&&ol(oo);break;case"ArrowRight":case" ":case"Enter":if(ce&&(B=>B.hasAttribute("data-ion-popover-trigger"))(ce)){const ji=new CustomEvent("ionPopoverActivateTrigger");ce.dispatchEvent(ji)}}}});return function(q){return k.apply(this,arguments)}}();return B.addEventListener("keydown",_),()=>B.removeEventListener("keydown",_)},_u=(B,_,k,D,q,ce,De,dt,jt,bn,fi)=>{var Ii;let oo={top:0,left:0,width:0,height:0};if("event"===ce){if(!fi)return jt;oo={top:fi.clientY,left:fi.clientX,width:1,height:1}}else{const fl=bn||(null===(Ii=null==fi?void 0:fi.detail)||void 0===Ii?void 0:Ii.ionShadowTarget)||(null==fi?void 0:fi.target);if(!fl)return jt;const Ec=fl.getBoundingClientRect();oo={top:Ec.top,left:Ec.left,width:Ec.width,height:Ec.height}}const ji=Uc(De,oo,_,k,D,q,B),Io=Hu(dt,De,oo,_,k),Do=ji.top+Io.top,wr=ji.left+Io.left,{arrowTop:ls,arrowLeft:ys}=Pa(De,D,q,Do,wr,_,k,B),{originX:Ur,originY:xs}=Ia(De,dt,B);return{top:Do,left:wr,referenceCoordinates:oo,arrowTop:ls,arrowLeft:ys,originX:Ur,originY:xs}},Ia=(B,_,k)=>{switch(B){case"top":return{originX:su(_),originY:"bottom"};case"bottom":return{originX:su(_),originY:"top"};case"left":return{originX:"right",originY:dl(_)};case"right":return{originX:"left",originY:dl(_)};case"start":return{originX:k?"left":"right",originY:dl(_)};case"end":return{originX:k?"right":"left",originY:dl(_)}}},su=B=>{switch(B){case"start":return"left";case"center":return"center";case"end":return"right"}},dl=B=>{switch(B){case"start":return"top";case"center":return"center";case"end":return"bottom"}},Pa=(B,_,k,D,q,ce,De,dt)=>{const jt={arrowTop:D+De/2-_/2,arrowLeft:q+ce-_/2},bn={arrowTop:D+De/2-_/2,arrowLeft:q-1.5*_};switch(B){case"top":return{arrowTop:D+De,arrowLeft:q+ce/2-_/2};case"bottom":return{arrowTop:D-k,arrowLeft:q+ce/2-_/2};case"left":return jt;case"right":return bn;case"start":return dt?bn:jt;case"end":return dt?jt:bn;default:return{arrowTop:0,arrowLeft:0}}},Uc=(B,_,k,D,q,ce,De)=>{const dt={top:_.top,left:_.left-k-q},jt={top:_.top,left:_.left+_.width+q};switch(B){case"top":return{top:_.top-D-ce,left:_.left};case"right":return jt;case"bottom":return{top:_.top+_.height+ce,left:_.left};case"left":return dt;case"start":return De?jt:dt;case"end":return De?dt:jt}},Hu=(B,_,k,D,q)=>{switch(B){case"center":return zl(_,k,D,q);case"end":return Gu(_,k,D,q);default:return{top:0,left:0}}},Gu=(B,_,k,D)=>{switch(B){case"start":case"end":case"left":case"right":return{top:-(D-_.height),left:0};default:return{top:0,left:-(k-_.width)}}},zl=(B,_,k,D)=>{switch(B){case"start":case"end":case"left":case"right":return{top:-(D/2-_.height/2),left:0};default:return{top:0,left:-(k/2-_.width/2)}}},ks=(B,_,k,D,q,ce,De,dt,jt,bn,fi,Ii,oo=0,ji=0,Io=0)=>{let Do=oo;const wr=ji;let Ur,ls=k,ys=_,xs=bn,Is=fi,Us=!1,fl=!1;const Ec=Ii?Ii.top+Ii.height:ce/2-dt/2,Dl=Ii?Ii.height:0;let Zl=!1;return ls<D+jt?(ls=D,Us=!0,xs="left"):De+D+ls+jt>q&&(fl=!0,ls=q-De-D,xs="right"),Ec+Dl+dt>ce&&("top"===B||"bottom"===B)&&(Ec-dt>0?(ys=Math.max(12,Ec-dt-Dl-(Io-1)),Do=ys+dt,Is="bottom",Zl=!0):Ur=D),{top:ys,left:ls,bottom:Ur,originX:xs,originY:Is,checkSafeAreaLeft:Us,checkSafeAreaRight:fl,arrowTop:Do,arrowLeft:wr,addPopoverBottomClass:Zl}},au=(B,_)=>{var k;const{event:D,size:q,trigger:ce,reference:De,side:dt,align:jt}=_,bn=B.ownerDocument,fi="rtl"===bn.dir,Ii=bn.defaultView.innerWidth,oo=bn.defaultView.innerHeight,ji=(0,At.g)(B),Io=ji.querySelector(".popover-content"),Do=ji.querySelector(".popover-arrow"),wr=ce||(null===(k=null==D?void 0:D.detail)||void 0===k?void 0:k.ionShadowTarget)||(null==D?void 0:D.target),{contentWidth:ls,contentHeight:ys}=Tr(q,Io,wr),{arrowWidth:Ur,arrowHeight:xs}=(B=>{if(!B)return{arrowWidth:0,arrowHeight:0};const{width:_,height:k}=B.getBoundingClientRect();return{arrowWidth:_,arrowHeight:k}})(Do),Us=_u(fi,ls,ys,Ur,xs,De,dt,jt,{top:oo/2-ys/2,left:Ii/2-ls/2,originX:fi?"right":"left",originY:"top"},ce,D),fl="cover"===q?0:5,Ec="cover"===q?0:25,{originX:Dl,originY:Zl,top:Es,left:Fu,bottom:nd,checkSafeAreaLeft:Gd,checkSafeAreaRight:Vu,arrowTop:id,arrowLeft:uh,addPopoverBottomClass:Rc}=ks(dt,Us.top,Us.left,fl,Ii,oo,ls,ys,Ec,Us.originX,Us.originY,Us.referenceCoordinates,Us.arrowTop,Us.arrowLeft,xs),$u=(0,mt.c)(),Cc=(0,mt.c)(),ju=(0,mt.c)();return Cc.addElement(ji.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),ju.addElement(ji.querySelector(".popover-arrow")).addElement(ji.querySelector(".popover-content")).fromTo("opacity",.01,1),$u.easing("ease").duration(100).beforeAddWrite(()=>{"cover"===q&&B.style.setProperty("--width",`${ls}px`),Rc&&B.classList.add("popover-bottom"),void 0!==nd&&Io.style.setProperty("bottom",`${nd}px`);let bp=`${Fu}px`;Gd&&(bp=`${Fu}px + var(--ion-safe-area-left, 0)`),Vu&&(bp=`${Fu}px - var(--ion-safe-area-right, 0)`),Io.style.setProperty("top",`calc(${Es}px + var(--offset-y, 0))`),Io.style.setProperty("left",`calc(${bp} + var(--offset-x, 0))`),Io.style.setProperty("transform-origin",`${Zl} ${Dl}`),null!==Do&&(((B,_=!1,k,D)=>!(!k&&!D||"top"!==B&&"bottom"!==B&&_))(dt,Us.top!==Es||Us.left!==Fu,D,ce)?(Do.style.setProperty("top",`calc(${id}px + var(--offset-y, 0))`),Do.style.setProperty("left",`calc(${uh}px + var(--offset-x, 0))`)):Do.style.setProperty("display","none"))}).addAnimation([Cc,ju])},mc=B=>{const _=(0,At.g)(B),k=_.querySelector(".popover-content"),D=_.querySelector(".popover-arrow"),q=(0,mt.c)(),ce=(0,mt.c)(),De=(0,mt.c)();return ce.addElement(_.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),De.addElement(_.querySelector(".popover-arrow")).addElement(_.querySelector(".popover-content")).fromTo("opacity",.99,0),q.easing("ease").afterAddWrite(()=>{B.style.removeProperty("--width"),B.classList.remove("popover-bottom"),k.style.removeProperty("top"),k.style.removeProperty("left"),k.style.removeProperty("bottom"),k.style.removeProperty("transform-origin"),D&&(D.style.removeProperty("top"),D.style.removeProperty("left"),D.style.removeProperty("display"))}).duration(300).addAnimation([ce,De])},gc=(B,_)=>{var k;const{event:D,size:q,trigger:ce,reference:De,side:dt,align:jt}=_,bn=B.ownerDocument,fi="rtl"===bn.dir,Ii=bn.defaultView.innerWidth,oo=bn.defaultView.innerHeight,ji=(0,At.g)(B),Io=ji.querySelector(".popover-content"),Do=ce||(null===(k=null==D?void 0:D.detail)||void 0===k?void 0:k.ionShadowTarget)||(null==D?void 0:D.target),{contentWidth:wr,contentHeight:ls}=Tr(q,Io,Do),Ur=_u(fi,wr,ls,0,0,De,dt,jt,{top:oo/2-ls/2,left:Ii/2-wr/2,originX:fi?"right":"left",originY:"top"},ce,D),xs="cover"===q?0:12,{originX:Is,originY:Us,top:fl,left:Ec,bottom:Dl}=ks(dt,Ur.top,Ur.left,xs,Ii,oo,wr,ls,0,Ur.originX,Ur.originY,Ur.referenceCoordinates),Zl=(0,mt.c)(),Es=(0,mt.c)(),Fu=(0,mt.c)(),nd=(0,mt.c)(),Gd=(0,mt.c)();return Es.addElement(ji.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),Fu.addElement(ji.querySelector(".popover-wrapper")).duration(150).fromTo("opacity",.01,1),nd.addElement(Io).beforeStyles({top:`calc(${fl}px + var(--offset-y, 0px))`,left:`calc(${Ec}px + var(--offset-x, 0px))`,"transform-origin":`${Us} ${Is}`}).beforeAddWrite(()=>{void 0!==Dl&&Io.style.setProperty("bottom",`${Dl}px`)}).fromTo("transform","scale(0.8)","scale(1)"),Gd.addElement(ji.querySelector(".popover-viewport")).fromTo("opacity",.01,1),Zl.easing("cubic-bezier(0.36,0.66,0.04,1)").duration(300).beforeAddWrite(()=>{"cover"===q&&B.style.setProperty("--width",`${wr}px`),"bottom"===Us&&B.classList.add("popover-bottom")}).addAnimation([Es,Fu,nd,Gd])},Ul=B=>{const _=(0,At.g)(B),k=_.querySelector(".popover-content"),D=(0,mt.c)(),q=(0,mt.c)(),ce=(0,mt.c)();return q.addElement(_.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),ce.addElement(_.querySelector(".popover-wrapper")).fromTo("opacity",.99,0),D.easing("ease").afterAddWrite(()=>{B.style.removeProperty("--width"),B.classList.remove("popover-bottom"),k.style.removeProperty("top"),k.style.removeProperty("left"),k.style.removeProperty("bottom"),k.style.removeProperty("transform-origin")}).duration(150).addAnimation([q,ce])},Oc=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=(0,Y.lh)(this,"ionPopoverDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionPopoverWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionPopoverWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionPopoverDidDismiss",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.ionMount=(0,Y.lh)(this,"ionMount",7),this.parentPopover=null,this.coreDelegate=un(),this.lockController=xn(),this.inline=!1,this.focusDescendantOnPresent=!1,this.onBackdropTap=()=>{this.dismiss(void 0,ir)},this.onLifecycle=_=>{const k=this.usersElement,D=Lc[_.type];if(k&&D){const q=new CustomEvent(D,{bubbles:!1,cancelable:!1,detail:_.detail});k.dispatchEvent(q)}},this.configureTriggerInteraction=()=>{const{trigger:_,triggerAction:k,el:D,destroyTriggerInteraction:q}=this;if(q&&q(),void 0===_)return;const ce=this.triggerEl=void 0!==_?document.getElementById(_):null;ce?this.destroyTriggerInteraction=Vs(ce,k,D):(0,Me.p)(`A trigger element with the ID "${_}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on ion-popover.`,this.el)},this.configureKeyboardInteraction=()=>{const{destroyKeyboardInteraction:_,el:k}=this;_&&_(),this.destroyKeyboardInteraction=ru(k)},this.configureDismissInteraction=()=>{const{destroyDismissInteraction:_,parentPopover:k,triggerAction:D,triggerEl:q,el:ce}=this;!k||!q||(_&&_(),this.destroyDismissInteraction=((B,_,k,D)=>{let q=[];const De=(0,At.g)(D).querySelector(".popover-content");return q="hover"===_?[{eventName:"mouseenter",callback:dt=>{document.elementFromPoint(dt.clientX,dt.clientY)!==B&&k.dismiss(void 0,void 0,!1)}}]:[{eventName:"click",callback:dt=>{dt.target.closest("[data-ion-popover-trigger]")!==B?k.dismiss(void 0,void 0,!1):dt.stopPropagation()}}],q.forEach(({eventName:dt,callback:jt})=>De.addEventListener(dt,jt)),()=>{q.forEach(({eventName:dt,callback:jt})=>De.removeEventListener(dt,jt))}})(q,D,ce,k))},this.presented=!1,this.hasController=!1,this.delegate=void 0,this.overlayIndex=void 0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.component=void 0,this.componentProps=void 0,this.keyboardClose=!0,this.cssClass=void 0,this.backdropDismiss=!0,this.event=void 0,this.showBackdrop=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.triggerAction="click",this.trigger=void 0,this.size="auto",this.dismissOnSelect=!1,this.reference="trigger",this.side="bottom",this.alignment=void 0,this.arrow=!0,this.isOpen=!1,this.keyboardEvents=!1,this.focusTrap=!0,this.keepContentsMounted=!1}onTriggerChange(){this.configureTriggerInteraction()}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}connectedCallback(){const{configureTriggerInteraction:_,el:k}=this;rs(k),_()}disconnectedCallback(){const{destroyTriggerInteraction:_}=this;_&&_()}componentWillLoad(){const{el:_}=this,k=$i(_);this.parentPopover=_.closest(`ion-popover:not(#${k})`),void 0===this.alignment&&(this.alignment="ios"===(0,ht.b)(this)?"center":"start")}componentDidLoad(){const{parentPopover:_,isOpen:k}=this;!0===k&&(0,At.r)(()=>this.present()),_&&(0,At.a)(_,"ionPopoverWillDismiss",()=>{this.dismiss(void 0,void 0,!1)}),this.configureTriggerInteraction()}presentFromTrigger(_,k=!1){var D=this;return(0,qe.A)(function*(){D.focusDescendantOnPresent=k,yield D.present(_),D.focusDescendantOnPresent=!1})()}getDelegate(_=!1){if(this.workingDelegate&&!_)return{delegate:this.workingDelegate,inline:this.inline};const D=this.inline=null!==this.el.parentNode&&!this.hasController;return{inline:D,delegate:this.workingDelegate=D?this.delegate||this.coreDelegate:this.delegate}}present(_){var k=this;return(0,qe.A)(function*(){const D=yield k.lockController.lock();if(k.presented)return void D();const{el:q}=k,{inline:ce,delegate:De}=k.getDelegate(!0);k.ionMount.emit(),k.usersElement=yield Ht(De,q,k.component,["popover-viewport"],k.componentProps,ce),k.keyboardEvents||k.configureKeyboardInteraction(),k.configureDismissInteraction(),(0,At.j)(q)?yield(0,on.e)(k.usersElement):k.keepContentsMounted||(yield(0,on.w)()),yield Jo(k,"popoverEnter",au,gc,{event:_||k.event,size:k.size,trigger:k.triggerEl,reference:k.reference,side:k.side,align:k.alignment}),k.focusDescendantOnPresent&&Fn(q),D()})()}dismiss(_,k,D=!0){var q=this;return(0,qe.A)(function*(){const ce=yield q.lockController.lock(),{destroyKeyboardInteraction:De,destroyDismissInteraction:dt}=q;D&&q.parentPopover&&q.parentPopover.dismiss(_,k,D);const jt=yield ti(q,_,k,"popoverLeave",mc,Ul,q.event);if(jt){De&&(De(),q.destroyKeyboardInteraction=void 0),dt&&(dt(),q.destroyDismissInteraction=void 0);const{delegate:bn}=q.getDelegate();yield vt(bn,q.usersElement)}return ce(),jt})()}getParentPopover(){var _=this;return(0,qe.A)(function*(){return _.parentPopover})()}onDidDismiss(){return Or(this.el,"ionPopoverDidDismiss")}onWillDismiss(){return Or(this.el,"ionPopoverWillDismiss")}render(){const _=(0,ht.b)(this),{onLifecycle:k,parentPopover:D,dismissOnSelect:q,side:ce,arrow:De,htmlAttributes:dt,focusTrap:jt}=this,bn=(0,ht.a)("desktop"),fi=De&&!D;return(0,Y.h)(Y.xr,Object.assign({key:"17e5e8b3e7ba5e251665fb9d0ade10c781f82f0e","aria-modal":"true","no-router":!0,tabindex:"-1"},dt,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign(Object.assign({},ei(this.cssClass)),{[_]:!0,"popover-translucent":this.translucent,"overlay-hidden":!0,"popover-desktop":bn,[`popover-side-${ce}`]:!0,[Xs]:!1===jt,"popover-nested":!!D}),onIonPopoverDidPresent:k,onIonPopoverWillPresent:k,onIonPopoverWillDismiss:k,onIonPopoverDidDismiss:k,onIonBackdropTap:this.onBackdropTap}),!D&&(0,Y.h)("ion-backdrop",{key:"c12fb94b375d7e88a0c5d715440c0f66ad7ee817",tappable:this.backdropDismiss,visible:this.showBackdrop,part:"backdrop"}),(0,Y.h)("div",{key:"478b388cc9a5a382003a2863e968e77a174914ab",class:"popover-wrapper ion-overlay-wrapper",onClick:q?()=>this.dismiss():void 0},fi&&(0,Y.h)("div",{key:"f1c63a0079f197a8d4577e7c00a654871fb9d816",class:"popover-arrow",part:"arrow"}),(0,Y.h)("div",{key:"08b62a321c09ad4b0f90460468ecbc1d56320bf1",class:"popover-content",part:"content"},(0,Y.h)("slot",{key:"55645ff597f64d434219caa28015cf2a4ceb0ee5"}))))}get el(){return this}static get watchers(){return{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}}static get style(){return{ios:':host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{z-index:10}.popover-content{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:auto;z-index:10}::slotted(.popover-viewport){--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-start:dir(rtl)){--offset-x:-5px}}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-end:dir(rtl)){--offset-x:5px}}:host{--width:200px;--max-height:90%;--box-shadow:none;--backdrop-opacity:var(--ion-backdrop-opacity, 0.08)}:host(.popover-desktop){--box-shadow:0px 4px 16px 0px rgba(0, 0, 0, 0.12)}.popover-content{border-radius:10px}:host(.popover-desktop) .popover-content{border:0.5px solid var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.popover-arrow{display:block;position:absolute;width:20px;height:10px;overflow:hidden;z-index:11}.popover-arrow::after{top:3px;border-radius:3px;position:absolute;width:14px;height:14px;-webkit-transform:rotate(45deg);transform:rotate(45deg);background:var(--background);content:"";z-index:10}.popover-arrow::after{inset-inline-start:3px}:host(.popover-bottom) .popover-arrow{top:auto;bottom:-10px}:host(.popover-bottom) .popover-arrow::after{top:-6px}:host(.popover-side-left) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host(.popover-side-right) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host(.popover-side-top) .popover-arrow{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host(.popover-side-start) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host-context([dir=rtl]):host(.popover-side-start) .popover-arrow,:host-context([dir=rtl]).popover-side-start .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}@supports selector(:dir(rtl)){:host(.popover-side-start:dir(rtl)) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}}:host(.popover-side-end) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host-context([dir=rtl]):host(.popover-side-end) .popover-arrow,:host-context([dir=rtl]).popover-side-end .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}@supports selector(:dir(rtl)){:host(.popover-side-end:dir(rtl)) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}.popover-arrow,.popover-content{opacity:0}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.popover-translucent) .popover-content,:host(.popover-translucent) .popover-arrow::after{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}',md:":host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{z-index:10}.popover-content{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:auto;z-index:10}::slotted(.popover-viewport){--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-start:dir(rtl)){--offset-x:-5px}}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-end:dir(rtl)){--offset-x:5px}}:host{--width:250px;--max-height:90%;--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}.popover-content{border-radius:4px;-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]) .popover-content{-webkit-transform-origin:right top;transform-origin:right top}[dir=rtl] .popover-content{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.popover-content:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.popover-viewport{-webkit-transition-delay:100ms;transition-delay:100ms}.popover-wrapper{opacity:0}"}}},[33,"ion-popover",{hasController:[4,"has-controller"],delegate:[16],overlayIndex:[2,"overlay-index"],enterAnimation:[16],leaveAnimation:[16],component:[1],componentProps:[16],keyboardClose:[4,"keyboard-close"],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],event:[8],showBackdrop:[4,"show-backdrop"],translucent:[4],animated:[4],htmlAttributes:[16],triggerAction:[1,"trigger-action"],trigger:[1],size:[1],dismissOnSelect:[4,"dismiss-on-select"],reference:[1],side:[1],alignment:[1025],arrow:[4],isOpen:[4,"is-open"],keyboardEvents:[4,"keyboard-events"],focusTrap:[4,"focus-trap"],keepContentsMounted:[4,"keep-contents-mounted"],presented:[32],presentFromTrigger:[64],present:[64],dismiss:[64],getParentPopover:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}]),Lc={ionPopoverDidPresent:"ionViewDidEnter",ionPopoverWillPresent:"ionViewWillEnter",ionPopoverWillDismiss:"ionViewWillLeave",ionPopoverDidDismiss:"ionViewDidLeave"};function Gr(){typeof customElements>"u"||["ion-popover","ion-backdrop"].forEach(_=>{switch(_){case"ion-popover":customElements.get(_)||customElements.define(_,Oc);break;case"ion-backdrop":customElements.get(_)||ue()}})}const et=Gr;var Dt=_e(3726);const Nn=B=>{try{if(B instanceof co)return B.value;if(!vi()||"string"!=typeof B||""===B)return B;if(B.includes("onload="))return"";const _=document.createDocumentFragment(),k=document.createElement("div");_.appendChild(k),k.innerHTML=B,yo.forEach(De=>{const dt=_.querySelectorAll(De);for(let jt=dt.length-1;jt>=0;jt--){const bn=dt[jt];bn.parentNode?bn.parentNode.removeChild(bn):_.removeChild(bn);const fi=zn(bn);for(let Ii=0;Ii<fi.length;Ii++)Zn(fi[Ii])}});const D=zn(_);for(let De=0;De<D.length;De++)Zn(D[De]);const q=document.createElement("div");q.appendChild(_);const ce=q.querySelector("div");return null!==ce?ce.innerHTML:q.innerHTML}catch(_){return console.error(_),""}},Zn=B=>{if(B.nodeType&&1!==B.nodeType)return;if(typeof NamedNodeMap<"u"&&!(B.attributes instanceof NamedNodeMap))return void B.remove();for(let k=B.attributes.length-1;k>=0;k--){const D=B.attributes.item(k),q=D.name;if(!go.includes(q.toLowerCase())){B.removeAttribute(q);continue}const ce=D.value,De=B[q];(null!=ce&&ce.toLowerCase().includes("javascript:")||null!=De&&De.toLowerCase().includes("javascript:"))&&B.removeAttribute(q)}const _=zn(B);for(let k=0;k<_.length;k++)Zn(_[k])},zn=B=>null!=B.children?B.children:B.childNodes,vi=()=>{var B;const _=window,k=null===(B=null==_?void 0:_.Ionic)||void 0===B?void 0:B.config;return!k||(k.get?k.get("sanitizerEnabled",!0):!0===k.sanitizerEnabled||void 0===k.sanitizerEnabled)},go=["class","id","href","src","name","slot"],yo=["script","style","iframe","meta","link","object","embed"];class co{constructor(_){this.value=_}}var Er=function(B){return B.Heavy="HEAVY",B.Medium="MEDIUM",B.Light="LIGHT",B}(Er||{});const Ts={getEngine(){const B=(0,pn.g)();if(null!=B&&B.isPluginAvailable("Haptics"))return B.Plugins.Haptics},available(){if(!this.getEngine())return!1;const _=(0,pn.g)();return"web"!==(null==_?void 0:_.getPlatform())||typeof navigator<"u"&&void 0!==navigator.vibrate},impact(B){const _=this.getEngine();_&&_.impact({style:B.style})},notification(B){const _=this.getEngine();_&&_.notification({type:B.type})},selection(){this.impact({style:Er.Light})},selectionStart(){const B=this.getEngine();B&&B.selectionStart()},selectionChanged(){const B=this.getEngine();B&&B.selectionChanged()},selectionEnd(){const B=this.getEngine();B&&B.selectionEnd()}},ca=()=>Ts.available(),Fr=()=>{ca()&&Ts.selectionStart()},ts=()=>{ca()&&Ts.selectionChanged()},fa=(B,_)=>{let k,D;const q=(dt,jt,bn)=>{if(typeof document>"u")return;const fi=document.elementFromPoint(dt,jt);fi&&_(fi)&&!fi.disabled?fi!==k&&(De(),ce(fi,bn)):De()},ce=(dt,jt)=>{k=dt,D||(D=k);const bn=k;(0,Y.bN)(()=>bn.classList.add("ion-activated")),jt()},De=(dt=!1)=>{if(!k)return;const jt=k;(0,Y.bN)(()=>jt.classList.remove("ion-activated")),dt&&D!==k&&k.click(),k=void 0};return(0,Ye.createGesture)({el:B,gestureName:"buttonActiveDrag",threshold:0,onStart:dt=>q(dt.currentX,dt.currentY,Fr),onMove:dt=>q(dt.currentX,dt.currentY,ts),onEnd:()=>{De(!0),ca()&&Ts.selectionEnd(),D=void 0}})},ha=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}addRipple(_,k){var D=this;return(0,qe.A)(function*(){return new Promise(q=>{(0,Y.gv)(()=>{const ce=D.el.getBoundingClientRect(),De=ce.width,dt=ce.height,jt=Math.sqrt(De*De+dt*dt),bn=Math.max(dt,De),fi=D.unbounded?bn:jt+Wu,Ii=Math.floor(bn*za),oo=fi/Ii;let ji=_-ce.left,Io=k-ce.top;D.unbounded&&(ji=.5*De,Io=.5*dt);const Do=ji-.5*Ii,wr=Io-.5*Ii,ls=.5*De-ji,ys=.5*dt-Io;(0,Y.bN)(()=>{const Ur=document.createElement("div");Ur.classList.add("ripple-effect");const xs=Ur.style;xs.top=wr+"px",xs.left=Do+"px",xs.width=xs.height=Ii+"px",xs.setProperty("--final-scale",`${oo}`),xs.setProperty("--translate-end",`${ls}px, ${ys}px`),(D.el.shadowRoot||D.el).appendChild(Ur),setTimeout(()=>{q(()=>{Sc(Ur)})},325)})})})})()}get unbounded(){return"unbounded"===this.type}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"2302f087ab1c6755355736e4ca77309c5fdcf185",role:"presentation",class:{[_]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}"}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),Sc=B=>{B.classList.add("fade-out"),setTimeout(()=>{B.remove()},200)},Wu=10,za=.5;function Va(){typeof customElements>"u"||["ion-ripple-effect"].forEach(_=>{"ion-ripple-effect"===_&&(customElements.get(_)||customElements.define(_,ha))})}const gl=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),D.addElement(B.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),_.addElement(B).easing("ease-in-out").duration(200).addAnimation([k,D])},hl=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),D.addElement(B.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),_.addElement(B).easing("ease-in-out").duration(200).addAnimation([k,D])},kd=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),D.addElement(B.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),_.addElement(B).easing("ease-in-out").duration(150).addAnimation([k,D])},cu=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),D.addElement(B.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),_.addElement(B).easing("ease-in-out").duration(150).addAnimation([k,D])},$n=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.didPresent=(0,Y.lh)(this,"ionAlertDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionAlertWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionAlertWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionAlertDidDismiss",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.delegateController=Gs(this),this.lockController=xn(),this.triggerController=ni(),this.customHTMLEnabled=ht.c.get("innerHTMLTemplatesEnabled",!1),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,ir)},this.dispatchCancelHandler=_=>{if(Qr(_.detail.role)){const D=this.processedButtons.find(q=>"cancel"===q.role);this.callButtonHandler(D)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.header=void 0,this.subHeader=void 0,this.message=void 0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}triggerChanged(){const{trigger:_,el:k,triggerController:D}=this;_&&D.addClickListener(k,_)}onKeydown(_){const k=new Set(this.processedInputs.map(dt=>dt.type));if(k.has("checkbox")&&"Enter"===_.key)return void _.preventDefault();if(!k.has("radio")||_.target&&!this.el.contains(_.target)||_.target.classList.contains("alert-button"))return;const D=this.el.querySelectorAll(".alert-radio"),q=Array.from(D).filter(dt=>!dt.disabled),ce=q.findIndex(dt=>dt.id===_.target.id);let De;if(["ArrowDown","ArrowRight"].includes(_.key)&&(De=ce===q.length-1?q[0]:q[ce+1]),["ArrowUp","ArrowLeft"].includes(_.key)&&(De=0===ce?q[q.length-1]:q[ce-1]),De&&q.includes(De)){const dt=this.processedInputs.find(jt=>jt.id===(null==De?void 0:De.id));dt&&(this.rbClick(dt),De.focus())}}buttonsChanged(){this.processedButtons=this.buttons.map(k=>"string"==typeof k?{text:k,role:"cancel"===k.toLowerCase()?"cancel":void 0}:k)}inputsChanged(){const _=this.inputs,k=_.find(De=>!De.disabled),q=_.find(De=>De.checked&&!De.disabled)||k,ce=new Set(_.map(De=>De.type));ce.has("checkbox")&&ce.has("radio")&&console.warn(`Alert cannot mix input types: ${Array.from(ce.values()).join("/")}. Please see alert docs for more info.`),this.inputType=ce.values().next().value,this.processedInputs=_.map((De,dt)=>{var jt;return{type:De.type||"text",name:De.name||`${dt}`,placeholder:De.placeholder||"",value:De.value,label:De.label,checked:!!De.checked,disabled:!!De.disabled,id:De.id||`alert-input-${this.overlayIndex}-${dt}`,handler:De.handler,min:De.min,max:De.max,cssClass:null!==(jt=De.cssClass)&&void 0!==jt?jt:"",attributes:De.attributes||{},tabindex:"radio"===De.type&&De!==q?-1:0}})}connectedCallback(){rs(this.el),this.triggerChanged()}componentWillLoad(){$i(this.el),this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){!this.gesture&&"ios"===(0,ht.b)(this)&&this.wrapperEl&&(this.gesture=fa(this.wrapperEl,_=>_.classList.contains("alert-button")),this.gesture.enable(!0)),!0===this.isOpen&&(0,At.r)(()=>this.present()),this.triggerChanged()}present(){var _=this;return(0,qe.A)(function*(){const k=yield _.lockController.lock();yield _.delegateController.attachViewToDom(),yield Jo(_,"alertEnter",gl,kd),k()})()}dismiss(_,k){var D=this;return(0,qe.A)(function*(){const q=yield D.lockController.lock(),ce=yield ti(D,_,k,"alertLeave",hl,cu);return ce&&D.delegateController.removeViewFromDom(),q(),ce})()}onDidDismiss(){return Or(this.el,"ionAlertDidDismiss")}onWillDismiss(){return Or(this.el,"ionAlertWillDismiss")}rbClick(_){for(const k of this.processedInputs)k.checked=k===_,k.tabindex=k===_?0:-1;this.activeId=_.id,Nr(_.handler,_),(0,Y.$x)(this)}cbClick(_){_.checked=!_.checked,Nr(_.handler,_),(0,Y.$x)(this)}buttonClick(_){var k=this;return(0,qe.A)(function*(){const D=_.role,q=k.getValues();if(Qr(D))return k.dismiss({values:q},D);const ce=yield k.callButtonHandler(_,q);return!1!==ce&&k.dismiss(Object.assign({values:q},ce),_.role)})()}callButtonHandler(_,k){return(0,qe.A)(function*(){if(null!=_&&_.handler){const D=yield Nr(_.handler,k);if(!1===D)return!1;if("object"==typeof D)return D}return{}})()}getValues(){if(0===this.processedInputs.length)return;if("radio"===this.inputType){const k=this.processedInputs.find(D=>!!D.checked);return k?k.value:void 0}if("checkbox"===this.inputType)return this.processedInputs.filter(k=>k.checked).map(k=>k.value);const _={};return this.processedInputs.forEach(k=>{_[k.name]=k.value||""}),_}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const _=this.processedInputs,k=(0,ht.b)(this);return 0===_.length?null:(0,Y.h)("div",{class:"alert-checkbox-group"},_.map(D=>(0,Y.h)("button",{type:"button",onClick:()=>this.cbClick(D),"aria-checked":`${D.checked}`,id:D.id,disabled:D.disabled,tabIndex:D.tabindex,role:"checkbox",class:Object.assign(Object.assign({},ei(D.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":D.disabled||!1})},(0,Y.h)("div",{class:"alert-button-inner"},(0,Y.h)("div",{class:"alert-checkbox-icon"},(0,Y.h)("div",{class:"alert-checkbox-inner"})),(0,Y.h)("div",{class:"alert-checkbox-label"},D.label)),"md"===k&&(0,Y.h)("ion-ripple-effect",null))))}renderRadio(){const _=this.processedInputs;return 0===_.length?null:(0,Y.h)("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},_.map(k=>(0,Y.h)("button",{type:"button",onClick:()=>this.rbClick(k),"aria-checked":`${k.checked}`,disabled:k.disabled,id:k.id,tabIndex:k.tabindex,class:Object.assign(Object.assign({},ei(k.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":k.disabled||!1}),role:"radio"},(0,Y.h)("div",{class:"alert-button-inner"},(0,Y.h)("div",{class:"alert-radio-icon"},(0,Y.h)("div",{class:"alert-radio-inner"})),(0,Y.h)("div",{class:"alert-radio-label"},k.label)))))}renderInput(){const _=this.processedInputs;return 0===_.length?null:(0,Y.h)("div",{class:"alert-input-group"},_.map(k=>{var D,q,ce,De;return(0,Y.h)("div",{class:"alert-input-wrapper"},"textarea"===k.type?(0,Y.h)("textarea",Object.assign({placeholder:k.placeholder,value:k.value,id:k.id,tabIndex:k.tabindex},k.attributes,{disabled:null!==(q=null===(D=k.attributes)||void 0===D?void 0:D.disabled)&&void 0!==q?q:k.disabled,class:Un(k),onInput:dt=>{var jt;k.value=dt.target.value,null!==(jt=k.attributes)&&void 0!==jt&&jt.onInput&&k.attributes.onInput(dt)}})):(0,Y.h)("input",Object.assign({placeholder:k.placeholder,type:k.type,min:k.min,max:k.max,value:k.value,id:k.id,tabIndex:k.tabindex},k.attributes,{disabled:null!==(De=null===(ce=k.attributes)||void 0===ce?void 0:ce.disabled)&&void 0!==De?De:k.disabled,class:Un(k),onInput:dt=>{var jt;k.value=dt.target.value,null!==(jt=k.attributes)&&void 0!==jt&&jt.onInput&&k.attributes.onInput(dt)}})))}))}renderAlertButtons(){const _=this.processedButtons,k=(0,ht.b)(this);return(0,Y.h)("div",{class:{"alert-button-group":!0,"alert-button-group-vertical":_.length>2}},_.map(q=>(0,Y.h)("button",Object.assign({},q.htmlAttributes,{type:"button",id:q.id,class:Ai(q),tabIndex:0,onClick:()=>this.buttonClick(q)}),(0,Y.h)("span",{class:"alert-button-inner"},q.text),"md"===k&&(0,Y.h)("ion-ripple-effect",null))))}renderAlertMessage(_){const{customHTMLEnabled:k,message:D}=this;return k?(0,Y.h)("div",{id:_,class:"alert-message",innerHTML:Nn(D)}):(0,Y.h)("div",{id:_,class:"alert-message"},D)}render(){const{overlayIndex:_,header:k,subHeader:D,message:q,htmlAttributes:ce}=this,De=(0,ht.b)(this),dt=`alert-${_}-hdr`,jt=`alert-${_}-sub-hdr`,bn=`alert-${_}-msg`;return(0,Y.h)(Y.xr,Object.assign({key:"b1875ea565c40a25915e26e61864f8c61d840ccc",role:this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert","aria-modal":"true","aria-labelledby":k?dt:D?jt:null,"aria-describedby":void 0!==q?bn:null,tabindex:"-1"},ce,{style:{zIndex:`${2e4+_}`},class:Object.assign(Object.assign({},ei(this.cssClass)),{[De]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),(0,Y.h)("ion-backdrop",{key:"37d9d7d1a47bfa23c3bb8d8d9805f52a5bbedf61",tappable:this.backdropDismiss}),(0,Y.h)("div",{key:"0134cc90b7f02dcdd13dfdc39a72f2259182de90",tabindex:"0"}),(0,Y.h)("div",{key:"ed054b063ec2d1847b3234d5bdf3e66054784ed7",class:"alert-wrapper ion-overlay-wrapper",ref:oo=>this.wrapperEl=oo},(0,Y.h)("div",{key:"fb81befae081424f03c64b434ffdd79bb1b00d0c",class:"alert-head"},k&&(0,Y.h)("h2",{key:"92596dfdd92c4f63c82ed86b4a2473b3110daae3",id:dt,class:"alert-title"},k),D&&(0,Y.h)("h2",{key:"ba7a0734cf818224f453604ec638770ca61bfef6",id:jt,class:"alert-sub-title"},D)),this.renderAlertMessage(bn),this.renderAlertInputs(),this.renderAlertButtons()),(0,Y.h)("div",{key:"41a2619836a4af5d158216ef14b49985c7941b78",tabindex:"0"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}}static get style(){return{ios:".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-label.sc-ion-alert-ios,.alert-radio-label.sc-ion-alert-ios{overflow-wrap:anywhere}@media (any-pointer: coarse){.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:0.875rem;line-height:1.25rem;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.alert-button-inner.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, var(--ion-background-color-step-100, #f9f9f9)));--max-width:clamp(270px, 16.875rem, 324px);--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:max(14px, 0.875rem)}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;-webkit-box-shadow:none;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:7px;text-align:center}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:max(17px, 1.0625rem);font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));font-size:max(14px, 0.875rem)}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:max(13px, 0.8125rem);text-align:center}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:7px;margin-top:10px;-webkit-padding-start:7px;padding-inline-start:7px;-webkit-padding-end:7px;padding-inline-end:7px;padding-top:7px;padding-bottom:7px;border:0.55px solid var(--ion-color-step-250, var(--ion-background-color-step-250, #bfbfbf));background-color:var(--ion-background-color, #fff);-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:1rem}.alert-input.sc-ion-alert-ios::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-input.sc-ion-alert-ios::-webkit-date-and-time-value{height:18px}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{min-height:44px}.alert-radio-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;color:var(--ion-text-color, #000)}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #0054e9)}.alert-radio-icon.sc-ion-alert-ios{position:relative;-ms-flex-order:1;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{top:-7px;position:absolute;width:6px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{inset-inline-start:7px}.alert-checkbox-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-text-color, #000)}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px;margin-top:10px;margin-bottom:10px;position:relative;width:min(1.375rem, 55.836px);height:min(1.375rem, 55.836px);border-width:0.125rem;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #0054e9);background-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{top:calc(min(1.375rem, 55.836px) / 8);position:absolute;width:calc(min(1.375rem, 55.836px) / 6 + 1px);height:calc(min(1.375rem, 55.836px) * 0.5);-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:0.125rem;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{inset-inline-start:calc(min(1.375rem, 55.836px) / 3)}.alert-button-group.sc-ion-alert-ios{-webkit-margin-end:-0.55px;margin-inline-end:-0.55px;-ms-flex-wrap:wrap;flex-wrap:wrap}.alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios{border-right:none}[dir=rtl].sc-ion-alert-ios-h .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:none}[dir=rtl].sc-ion-alert-ios .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:none}@supports selector(:dir(rtl)){.alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:none}}.alert-button.sc-ion-alert-ios{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;-ms-flex:1 1 auto;flex:1 1 auto;min-width:50%;height:max(44px, 2.75rem);border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #0054e9);font-size:max(17px, 1.0625rem);overflow:hidden}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child{border-right:0}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:first-child:dir(rtl){border-right:0}}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #c5000f)}",md:".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-label.sc-ion-alert-md,.alert-radio-label.sc-ion-alert-md{overflow-wrap:anywhere}@media (any-pointer: coarse){.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:0.875rem;line-height:1.25rem;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.alert-button-inner.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:0.875rem}.alert-wrapper.sc-ion-alert-md{border-radius:4px;-webkit-box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px;padding-top:20px;padding-bottom:15px;text-align:start}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:1.25rem;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:1rem}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.alert-message.sc-ion-alert-md{font-size:1rem}@media screen and (max-width: 767px){.alert-message.sc-ion-alert-md{max-height:266px}}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #0054e9)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;border-top:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));border-bottom:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));overflow:auto}@media screen and (max-width: 767px){.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{max-height:266px}}.alert-tappable.sc-ion-alert-md{position:relative;min-height:48px}.alert-radio-label.sc-ion-alert-md{-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));font-size:1rem}.alert-radio-icon.sc-ion-alert-md{top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, var(--ion-background-color-step-550, #737373))}.alert-radio-icon.sc-ion-alert-md{inset-inline-start:26px}.alert-radio-inner.sc-ion-alert-md{top:3px;border-radius:50%;position:absolute;width:10px;height:10px;-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #0054e9)}.alert-radio-inner.sc-ion-alert-md{inset-inline-start:3px}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626))}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;width:calc(100% - 53px);color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));font-size:1rem}.alert-checkbox-icon.sc-ion-alert-md{top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, var(--ion-background-color-step-550, #737373));contain:strict}.alert-checkbox-icon.sc-ion-alert-md{inset-inline-start:26px}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #0054e9);background-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{top:0;position:absolute;width:6px;height:10px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{inset-inline-start:3px}.alert-button-group.sc-ion-alert-md{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;-ms-flex-pack:end;justify-content:flex-end}.alert-button.sc-ion-alert-md{border-radius:2px;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:0;margin-bottom:0;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #0054e9);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}.alert-button-inner.sc-ion-alert-md{-ms-flex-pack:end;justify-content:flex-end}@media screen and (min-width: 768px){.sc-ion-alert-md-h{--max-width:min(100vw - 96px, 560px);--max-height:min(100vh - 96px, 560px)}}"}}},[34,"ion-alert",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],header:[1],subHeader:[1,"sub-header"],message:[1],buttons:[16],inputs:[1040],backdropDismiss:[4,"backdrop-dismiss"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},[[4,"keydown","onKeydown"]],{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}]),Un=B=>{var _,k,D;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":(null!==(k=null===(_=B.attributes)||void 0===_?void 0:_.disabled)&&void 0!==k?k:B.disabled)||!1},ei(B.cssClass)),ei(B.attributes?null===(D=B.attributes.class)||void 0===D?void 0:D.toString():""))},Ai=B=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,[`alert-button-role-${B.role}`]:void 0!==B.role},ei(B.cssClass));function Ti(){typeof customElements>"u"||["ion-alert","ion-backdrop","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-alert":customElements.get(_)||customElements.define(_,$n);break;case"ion-backdrop":customElements.get(_)||ue();break;case"ion-ripple-effect":customElements.get(_)||Va()}})}const lo=Ti,gr=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost()}componentDidLoad(){var _=this;Y.L2.isBrowser&&la((0,qe.A)(function*(){const k=(0,ht.a)(window,"hybrid");if(ht.c.getBoolean("_testing")||_e.e(7338).then(_e.bind(_e,7338)).then(ce=>ce.startTapClick(ht.c)),ht.c.getBoolean("statusTap",k)&&_e.e(6631).then(_e.bind(_e,6631)).then(ce=>ce.startStatusTap()),ht.c.getBoolean("inputShims",jr())){const ce=(0,ht.a)(window,"ios")?"ios":"android";_e.e(7402).then(_e.bind(_e,7402)).then(De=>De.startInputShims(ht.c,ce))}const D=yield Promise.resolve().then(_e.bind(_e,5098)),q=k||(0,On.shouldUseCloseWatcher)();ht.c.getBoolean("hardwareBackButton",q)?D.startHardwareBackButton():((0,On.shouldUseCloseWatcher)()&&(0,Me.p)("experimentalCloseWatcher was set to `true`, but hardwareBackButton was set to `false`. Both config options must be `true` for the Close Watcher API to be used."),D.blockHardwareBackButton()),typeof window<"u"&&Promise.resolve().then(_e.bind(_e,6008)).then(ce=>ce.startKeyboardAssist(window)),Promise.resolve().then(_e.bind(_e,5498)).then(ce=>_.focusVisible=ce.startFocusVisible())}))}setFocus(_){var k=this;return(0,qe.A)(function*(){k.focusVisible&&k.focusVisible.setFocus(_)})()}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"a562850f242d9d45573e35efdd4bd178254677ef",class:{[_]:!0,"ion-page":!0,"force-statusbar-padding":ht.c.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return"html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}"}},[0,"ion-app",{setFocus:[64]}]),jr=()=>!!((0,ht.a)(window,"ios")&&(0,ht.a)(window,"mobile")||(0,ht.a)(window,"android")&&(0,ht.a)(window,"mobileweb")),la=B=>{"requestIdleCallback"in window?window.requestIdleCallback(B):setTimeout(B,32)},nr=function bl(){typeof customElements>"u"||["ion-app"].forEach(_=>{"ion-app"===_&&(customElements.get(_)||customElements.define(_,gr))})},sl=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=_=>{const{el:k}=this;"button"===this.type?Xn(this.href,_,this.routerDirection,this.routerAnimation):(0,At.h)(k)&&this.submitForm(_)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.slotChanged=()=>{this.isCircle=this.hasIconOnly},this.isCircle=!1,this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:_}=this;this.formButtonEl&&(this.formButtonEl.disabled=_)}renderHiddenButton(){const _=this.formEl=this.findForm();if(_){const{formButtonEl:k}=this;if(null!==k&&_.contains(k))return;const D=this.formButtonEl=document.createElement("button");D.type=this.type,D.style.display="none",D.disabled=this.disabled,_.appendChild(D)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=(0,At.i)(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:_}=this;if(_ instanceof HTMLFormElement)return _;if("string"==typeof _){const k=document.getElementById(_);return k?k instanceof HTMLFormElement?k:((0,Me.p)(`Form with selector: "#${_}" could not be found. Verify that the id is attached to a <form> element.`,this.el),null):((0,Me.p)(`Form with selector: "#${_}" could not be found. Verify that the id is correct and the form is rendered in the DOM.`,this.el),null)}return void 0!==_?((0,Me.p)('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(_){this.formEl&&this.formButtonEl&&(_.preventDefault(),this.formButtonEl.click())}render(){const _=(0,ht.b)(this),{buttonType:k,type:D,disabled:q,rel:ce,target:De,size:dt,href:jt,color:bn,expand:fi,hasIconOnly:Ii,shape:oo,strong:ji,inheritedAttributes:Io}=this,Do=void 0===dt&&this.inItem?"small":dt,wr=void 0===jt?"button":"a",ls="button"===wr?{type:D}:{download:this.download,href:jt,rel:ce,target:De};let ys=this.fill;return null==ys&&(ys=this.inToolbar||this.inListHeader?"clear":"solid"),"button"!==D&&this.renderHiddenButton(),(0,Y.h)(Y.xr,{key:"8f3a0363d46ef888d22b0b0812c70cb4f79e6efa",onClick:this.handleClick,"aria-disabled":q?"true":null,class:Hr(bn,{[_]:!0,[k]:!0,[`${k}-${fi}`]:void 0!==fi,[`${k}-${Do}`]:void 0!==Do,[`${k}-${oo}`]:void 0!==oo,[`${k}-${ys}`]:!0,[`${k}-strong`]:ji,"in-toolbar":vs("ion-toolbar",this.el),"in-toolbar-color":vs("ion-toolbar[color]",this.el),"in-buttons":vs("ion-buttons",this.el),"button-has-icon-only":Ii,"button-disabled":q,"ion-activatable":!0,"ion-focusable":!0})},(0,Y.h)(wr,Object.assign({key:"a517c7d06aab15ad4c2a51b8ec224c1aeb4ed565"},ls,{class:"button-native",part:"native",disabled:q,onFocus:this.onFocus,onBlur:this.onBlur},Io),(0,Y.h)("span",{key:"127c26dd97c0bf5097433df77df7313d59784899",class:"button-inner"},(0,Y.h)("slot",{key:"39d9a9cad8e1addbe63406062e555e05c2cb541b",name:"icon-only",onSlotchange:this.slotChanged}),(0,Y.h)("slot",{key:"cfdebdd89155c6c21eb80e51e06456a3a6d877e0",name:"start"}),(0,Y.h)("slot",{key:"eac497e0f97ab55baa834ae23155d89b0f7069c6"}),(0,Y.h)("slot",{key:"c99f7900f8856b32a0b4ac11092d461f5e9a1109",name:"end"})),"md"===_&&(0,Y.h)("ion-ripple-effect",{key:"c681edb0480879fbd801575f2233f6e118898638",type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #0054e9);--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:min(1rem, 48px);font-weight:500;letter-spacing:0}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #004acd);--background-focused:var(--ion-color-primary-shade, #004acd);--background-hover:var(--ion-color-primary-tint, #1a65eb);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #0054e9);--background-focused:var(--ion-color-primary, #0054e9);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:transparent;--background-focused-opacity:.1;font-size:min(1.0625rem, 51px);font-weight:normal}:host(.in-buttons){font-size:clamp(17px, 1.0625rem, 21.08px);font-weight:400}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:min(1.25rem, 60px)}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:min(0.8125rem, 39px)}:host(.button-round){--border-radius:999px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:var(--padding-top);--padding-end:var(--padding-top);--padding-start:var(--padding-end);min-width:clamp(30px, 2.125em, 60px);min-height:clamp(30px, 2.125em, 60px)}::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.12px, 1.125em, 43.02px)}:host(.button-small.button-has-icon-only){min-width:clamp(23px, 2.16em, 54px);min-height:clamp(23px, 2.16em, 54px)}:host(.button-small) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(12.1394px, 1.308125em, 40.1856px)}:host(.button-large.button-has-icon-only){min-width:clamp(46px, 2.5em, 78px);min-height:clamp(46px, 2.5em, 78px)}:host(.button-large) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.12px, 0.9em, 43.056px)}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}',md:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #0054e9);--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:0.875rem;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:var(--ion-color-primary, #0054e9);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:var(--ion-color-primary, #0054e9);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:999px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:1.25rem}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:0.8125rem}:host(.button-strong){font-weight:bold}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:var(--padding-top);--padding-end:var(--padding-top);--padding-start:var(--padding-end);min-width:clamp(30px, 2.86em, 60px);min-height:clamp(30px, 2.86em, 60px)}::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.104px, 1.6em, 43.008px)}:host(.button-small.button-has-icon-only){min-width:clamp(23px, 2.16em, 54px);min-height:clamp(23px, 2.16em, 54px)}:host(.button-small) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(13.002px, 1.23125em, 40.385px)}:host(.button-large.button-has-icon-only){min-width:clamp(46px, 2.5em, 78px);min-height:clamp(46px, 2.5em, 78px)}:host(.button-large) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.008px, 1.4em, 43.008px)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-background, var(--color));color:var(--ion-toolbar-color, var(--background), var(--ion-color-primary-contrast, #fff))}'}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1],isCircle:[32]},void 0,{disabled:["disabledChanged"]}]);const ke=function Ca(){typeof customElements>"u"||["ion-button","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-button":customElements.get(_)||customElements.define(_,sl);break;case"ion-ripple-effect":customElements.get(_)||Va()}})},dr=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.collapse=!1}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"4e5ce9abb3f56e8c91e3eb58c2819300e61eba24",class:{[_]:!0,"buttons-collapse":this.collapse}},(0,Y.h)("slot",{key:"f2f360ec888b6e946b512fed07431fab47c61482"}))}static get style(){return{ios:".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-ios-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.41em;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.41em;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.65em;line-height:0.67}",md:".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-md-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:3rem;height:3rem}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}"}}},[38,"ion-buttons",{collapse:[4]}]);const Tc=function Xa(){typeof customElements>"u"||["ion-buttons"].forEach(_=>{"ion-buttons"===_&&(customElements.get(_)||customElements.define(_,dr))})},Fh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAriaAttributes={},this.color=void 0,this.button=!1,this.type="button",this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0}componentWillLoad(){this.inheritedAriaAttributes=(0,At.d)(this.el,["aria-label"])}isClickable(){return void 0!==this.href||this.button}renderCard(_){const k=this.isClickable();if(!k)return[(0,Y.h)("slot",null)];const{href:D,routerAnimation:q,routerDirection:ce,inheritedAriaAttributes:De}=this,dt=k?void 0===D?"button":"a":"div";return(0,Y.h)(dt,Object.assign({},"button"===dt?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target},De,{class:"card-native",part:"native",disabled:this.disabled,onClick:bn=>Xn(D,bn,ce,q)}),(0,Y.h)("slot",null),k&&"md"===_&&(0,Y.h)("ion-ripple-effect",null))}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"8584300522f382ee8891c039d71da82533dfa36a",class:Hr(this.color,{[_]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(_))}get el(){return this}static get style(){return{ios:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))));-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:0.875rem;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",md:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))));-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:0.875rem;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}"}}},[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]),qc=function _s(){typeof customElements>"u"||["ion-card","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-card":customElements.get(_)||customElements.define(_,Fh);break;case"ion-ripple-effect":customElements.get(_)||Va()}})},Nc=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost()}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"2a2d0b48aad4b83990a1748fce60e772514eb223",class:{[_]:!0,[`card-content-${_}`]:!0}})}static get style(){return{ios:"ion-card-content{display:block;position:relative}.card-content-ios{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:20px;font-size:1rem;line-height:1.4}.card-content-ios h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.card-content-ios h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.card-content-ios h3,.card-content-ios h4,.card-content-ios h5,.card-content-ios h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal}.card-content-ios p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem}ion-card-header+.card-content-ios{padding-top:0}",md:"ion-card-content{display:block;position:relative}.card-content-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:13px;padding-bottom:13px;font-size:0.875rem;line-height:1.5}.card-content-md h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.card-content-md h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.card-content-md h3,.card-content-md h4,.card-content-md h5,.card-content-md h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal}.card-content-md p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;font-weight:normal;line-height:1.5}ion-card-header+.card-content-md{padding-top:0}"}}},[32,"ion-card-content"]),Xd=function w0(){typeof customElements>"u"||["ion-card-content"].forEach(_=>{"ion-card-content"===_&&(customElements.get(_)||customElements.define(_,Nc))})},As=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.translucent=!1}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"18d12507ec6e650a72d721e9d0f4128b5e86df1d",class:Hr(this.color,{"card-header-translucent":this.translucent,"ion-inherit-color":!0,[_]:!0})},(0,Y.h)("slot",{key:"3374c087d8c3f014082787e255432e7a335ef44f"}))}static get style(){return{ios:":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:16px;-ms-flex-direction:column-reverse;flex-direction:column-reverse}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.card-header-translucent){background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(30px);backdrop-filter:saturate(180%) blur(30px)}}",md:":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:16px;padding-bottom:16px}::slotted(ion-card-title:not(:first-child)),::slotted(ion-card-subtitle:not(:first-child)){margin-top:8px}"}}},[33,"ion-card-header",{color:[513],translucent:[4]}]),Ch=function _a(){typeof customElements>"u"||["ion-card-header"].forEach(_=>{"ion-card-header"===_&&(customElements.get(_)||customElements.define(_,As))})},Os=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"cbcb01bd01cf6de64a0b04fb626e42b07ceb8f53",role:"heading","aria-level":"3",class:Hr(this.color,{"ion-inherit-color":!0,[_]:!0})},(0,Y.h)("slot",{key:"cbcaa73aa5799882c48d6c0aabfb13651bcc91c0"}))}static get style(){return{ios:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));margin-left:0;margin-right:0;margin-top:0;margin-bottom:4px;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:0.75rem;font-weight:700;letter-spacing:0.4px;text-transform:uppercase}",md:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:0.875rem;font-weight:500}"}}},[33,"ion-card-subtitle",{color:[513]}]),Hl=function x0(){typeof customElements>"u"||["ion-card-subtitle"].forEach(_=>{"ion-card-subtitle"===_&&(customElements.get(_)||customElements.define(_,Os))})},fd=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"f904a0ca6489f147d03c9c5f9f2c5549cdb38d1a",role:"heading","aria-level":"2",class:Hr(this.color,{"ion-inherit-color":!0,[_]:!0})},(0,Y.h)("slot",{key:"effb921de4ad8dfbbe318b3f692f4005812da7b1"}))}static get style(){return{ios:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-text-color, #000);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:1.75rem;font-weight:700;line-height:1.2}",md:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:1.25rem;font-weight:500;line-height:1.2}"}}},[33,"ion-card-title",{color:[513]}]),Cr=function Zs(){typeof customElements>"u"||["ion-card-title"].forEach(_=>{"ion-card-title"===_&&(customElements.get(_)||customElements.define(_,fd))})},Dd={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},Xu=B=>void 0===B||""===B||!!window.matchMedia&&window.matchMedia(Dd[B]).matches,xu=typeof window<"u"?window:void 0,fe=xu&&!!(xu.CSS&&xu.CSS.supports&&xu.CSS.supports("--a: 0")),Ee=["","xs","sm","md","lg","xl"],Bt=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.offset=void 0,this.offsetXs=void 0,this.offsetSm=void 0,this.offsetMd=void 0,this.offsetLg=void 0,this.offsetXl=void 0,this.pull=void 0,this.pullXs=void 0,this.pullSm=void 0,this.pullMd=void 0,this.pullLg=void 0,this.pullXl=void 0,this.push=void 0,this.pushXs=void 0,this.pushSm=void 0,this.pushMd=void 0,this.pushLg=void 0,this.pushXl=void 0,this.size=void 0,this.sizeXs=void 0,this.sizeSm=void 0,this.sizeMd=void 0,this.sizeLg=void 0,this.sizeXl=void 0}onResize(){(0,Y.$x)(this)}getColumns(_){let k;for(const D of Ee){const q=Xu(D),ce=this[_+D.charAt(0).toUpperCase()+D.slice(1)];q&&void 0!==ce&&(k=ce)}return k}calculateSize(){const _=this.getColumns("size");if(!_||""===_)return;const k="auto"===_?"auto":fe?`calc(calc(${_} / var(--ion-grid-columns, 12)) * 100%)`:_/12*100+"%";return{flex:`0 0 ${k}`,width:`${k}`,"max-width":`${k}`}}calculatePosition(_,k){const D=this.getColumns(_);if(D)return{[k]:fe?`calc(calc(${D} / var(--ion-grid-columns, 12)) * 100%)`:D>0&&D<12?D/12*100+"%":"auto"}}calculateOffset(_){return this.calculatePosition("offset",_?"margin-right":"margin-left")}calculatePull(_){return this.calculatePosition("pull",_?"left":"right")}calculatePush(_){return this.calculatePosition("push",_?"right":"left")}render(){const _="rtl"===document.dir,k=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"c37fa4c4c993385ccbb6f4e89b2f390b140507a0",class:{[k]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(_)),this.calculatePull(_)),this.calculatePush(_)),this.calculateSize())},(0,Y.h)("slot",{key:"6a5296ff0b9dee6600c2dafe7363a065d053bac2"}))}static get style(){return":host{-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}"}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]),Tn=function Ce(){typeof customElements>"u"||["ion-col"].forEach(_=>{"ion-col"===_&&(customElements.get(_)||customElements.define(_,Bt))})};var ui=_e(2782);const Qs=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=(0,Y.lh)(this,"ionScrollStart",7),this.ionScroll=(0,Y.lh)(this,"ionScroll",7),this.ionScrollEnd=(0,Y.lh)(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.tabsElement=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.fixedSlotPlacement="after",this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){if(this.isMainContent=null===this.el.closest("ion-menu, ion-popover, ion-modal"),(0,At.j)(this.el)){const _=this.tabsElement=this.el.closest("ion-tabs");null!==_&&(this.tabsLoadCallback=()=>this.resize(),_.addEventListener("ionTabBarLoaded",this.tabsLoadCallback))}}disconnectedCallback(){if(this.onScrollEnd(),(0,At.j)(this.el)){const{tabsElement:_,tabsLoadCallback:k}=this;null!==_&&void 0!==k&&_.removeEventListener("ionTabBarLoaded",k),this.tabsElement=null,this.tabsLoadCallback=void 0}}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{null!==this.el.offsetParent&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:_}=this,k=(0,ht.b)(this);return void 0===_?"ios"===k&&(0,ht.a)("ios"):_}resize(){Y.L2.isBrowser&&(this.fullscreen?(0,Y.gv)(()=>this.readDimensions()):(0!==this.cTop||0!==this.cBottom)&&(this.cTop=this.cBottom=0,(0,Y.$x)(this)))}readDimensions(){const _=Pr(this.el),k=Math.max(this.el.offsetTop,0),D=Math.max(_.offsetHeight-k-this.el.offsetHeight,0);(k!==this.cTop||D!==this.cBottom)&&(this.cTop=k,this.cBottom=D,(0,Y.$x)(this))}onScroll(_){const k=Date.now(),D=!this.isScrolling;this.lastScroll=k,D&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,(0,Y.gv)(q=>{this.queued=!1,this.detail.event=_,Ta(this.detail,this.scrollEl,q,D),this.ionScroll.emit(this.detail)}))}getScrollElement(){var _=this;return(0,qe.A)(function*(){return _.scrollEl||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.scrollEl)})()}getBackgroundElement(){var _=this;return(0,qe.A)(function*(){return _.backgroundContentEl||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.backgroundContentEl)})()}scrollToTop(_=0){return this.scrollToPoint(void 0,0,_)}scrollToBottom(_=0){var k=this;return(0,qe.A)(function*(){const D=yield k.getScrollElement();return k.scrollToPoint(void 0,D.scrollHeight-D.clientHeight,_)})()}scrollByPoint(_,k,D){var q=this;return(0,qe.A)(function*(){const ce=yield q.getScrollElement();return q.scrollToPoint(_+ce.scrollLeft,k+ce.scrollTop,D)})()}scrollToPoint(_,k,D=0){var q=this;return(0,qe.A)(function*(){const ce=yield q.getScrollElement();if(D<32)return null!=k&&(ce.scrollTop=k),void(null!=_&&(ce.scrollLeft=_));let De,dt=0;const jt=new Promise(Io=>De=Io),bn=ce.scrollTop,fi=ce.scrollLeft,Ii=null!=k?k-bn:0,oo=null!=_?_-fi:0,ji=Io=>{const Do=Math.min(1,(Io-dt)/D)-1,wr=Math.pow(Do,3)+1;0!==Ii&&(ce.scrollTop=Math.floor(wr*Ii+bn)),0!==oo&&(ce.scrollLeft=Math.floor(wr*oo+fi)),wr<1?requestAnimationFrame(ji):De()};return requestAnimationFrame(Io=>{dt=Io,ji(Io)}),jt})()}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{fixedSlotPlacement:_,isMainContent:k,scrollX:D,scrollY:q,el:ce}=this,De=(0,ui.i)(ce)?"rtl":"ltr",dt=(0,ht.b)(this),jt=this.shouldForceOverscroll(),bn="ios"===dt;return this.resize(),(0,Y.h)(Y.xr,{key:"f599a7da14969df38c20a6f650179d2a319fb58b",role:k?"main":void 0,class:Hr(this.color,{[dt]:!0,"content-sizing":vs("ion-popover",this.el),overscroll:jt,[`content-${De}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},(0,Y.h)("div",{key:"7c545c3c95ea05abd036d0462936ac153d2a8fc6",ref:fi=>this.backgroundContentEl=fi,id:"background-content",part:"background"}),"before"===_?(0,Y.h)("slot",{name:"fixed"}):null,(0,Y.h)("div",{key:"a67ab7438466c99f74b7ba59964802c3ba86ac5b",class:{"inner-scroll":!0,"scroll-x":D,"scroll-y":q,overscroll:(D||q)&&jt},ref:fi=>this.scrollEl=fi,onScroll:this.scrollEvents?fi=>this.onScroll(fi):void 0,part:"scroll"},(0,Y.h)("slot",{key:"6d10fcac2e40b4dd6c20d91a8957ac07251d2fa7"})),bn?(0,Y.h)("div",{class:"transition-effect"},(0,Y.h)("div",{class:"transition-cover"}),(0,Y.h)("div",{class:"transition-shadow"})):null,"after"===_?(0,Y.h)("slot",{name:"fixed"}):null)}get el(){return this}static get style(){return':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}'}},[1,"ion-content",{color:[513],fullscreen:[4],fixedSlotPlacement:[1,"fixed-slot-placement"],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[9,"resize","onResize"]]]),Pr=B=>{const _=B.closest("ion-tabs");return _||(B.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content")||(B=>{var _;return B.parentElement?B.parentElement:null!==(_=B.parentNode)&&void 0!==_&&_.host?B.parentNode.host:null})(B))},Ta=(B,_,k,D)=>{const q=B.currentX,ce=B.currentY,dt=_.scrollLeft,jt=_.scrollTop,bn=k-B.currentTime;if(D&&(B.startTime=k,B.startX=dt,B.startY=jt,B.velocityX=B.velocityY=0),B.currentTime=k,B.currentX=B.scrollLeft=dt,B.currentY=B.scrollTop=jt,B.deltaX=dt-B.startX,B.deltaY=jt-B.startY,bn>0&&bn<100){const Ii=(jt-ce)/bn;B.velocityX=(dt-q)/bn*.7+.3*B.velocityX,B.velocityY=.7*Ii+.3*B.velocityY}},Ql=function pa(){typeof customElements>"u"||["ion-content"].forEach(_=>{"ion-content"===_&&(customElements.get(_)||customElements.define(_,Qs))})},ja=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.horizontal=void 0,this.vertical=void 0,this.edge=!1,this.activated=!1}activatedChanged(){const _=this.activated,k=this.getFab();k&&(k.activated=_),Array.from(this.el.querySelectorAll("ion-fab-list")).forEach(D=>{D.activated=_})}componentDidLoad(){this.activated&&this.activatedChanged()}close(){var _=this;return(0,qe.A)(function*(){_.activated=!1})()}getFab(){return this.el.querySelector("ion-fab-button")}toggle(){var _=this;return(0,qe.A)(function*(){_.el.querySelector("ion-fab-list")&&(_.activated=!_.activated)})()}render(){const{horizontal:_,vertical:k,edge:D}=this,q=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"cb44cf6486b0a6439b99da87c065b0b52e2514f4",class:{[q]:!0,[`fab-horizontal-${_}`]:void 0!==_,[`fab-vertical-${k}`]:void 0!==k,"fab-edge":D}},(0,Y.h)("slot",{key:"1ed484c7ecb10cd81fbca9a4f5c4049bf82f9f8a"}))}get el(){return this}static get watchers(){return{activated:["activatedChanged"]}}static get style(){return":host{position:absolute;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;z-index:999}:host(.fab-horizontal-center){left:0px;right:0px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}:host(.fab-horizontal-start){left:calc(10px + var(--ion-safe-area-left, 0px));}:host-context([dir=rtl]):host(.fab-horizontal-start),:host-context([dir=rtl]).fab-horizontal-start{right:calc(10px + var(--ion-safe-area-right, 0px));left:unset}@supports selector(:dir(rtl)){:host(.fab-horizontal-start:dir(rtl)){right:calc(10px + var(--ion-safe-area-right, 0px));left:unset}}:host(.fab-horizontal-end){right:calc(10px + var(--ion-safe-area-right, 0px));}:host-context([dir=rtl]):host(.fab-horizontal-end),:host-context([dir=rtl]).fab-horizontal-end{left:calc(10px + var(--ion-safe-area-left, 0px));right:unset}@supports selector(:dir(rtl)){:host(.fab-horizontal-end:dir(rtl)){left:calc(10px + var(--ion-safe-area-left, 0px));right:unset}}:host(.fab-vertical-top){top:10px}:host(.fab-vertical-top.fab-edge){top:0}:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-button){margin-top:-50%}:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-button.fab-button-small){margin-top:calc((-100% + 16px) / 2)}:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-list.fab-list-side-start),:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-list.fab-list-side-end){margin-top:-50%}:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-list.fab-list-side-top),:host(.fab-vertical-top.fab-edge) ::slotted(ion-fab-list.fab-list-side-bottom){margin-top:calc(50% + 10px)}:host(.fab-vertical-bottom){bottom:10px}:host(.fab-vertical-bottom.fab-edge){bottom:0}:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-button){margin-bottom:-50%}:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-button.fab-button-small){margin-bottom:calc((-100% + 16px) / 2)}:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-list.fab-list-side-start),:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-list.fab-list-side-end){margin-bottom:-50%}:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-list.fab-list-side-top),:host(.fab-vertical-bottom.fab-edge) ::slotted(ion-fab-list.fab-list-side-bottom){margin-bottom:calc(50% + 10px)}:host(.fab-vertical-center){top:0px;bottom:0px;margin-top:auto;margin-bottom:auto}"}},[1,"ion-fab",{horizontal:[1],vertical:[1],edge:[4],activated:[1028],close:[64],toggle:[64]},void 0,{activated:["activatedChanged"]}]),Sl=function cc(){typeof customElements>"u"||["ion-fab"].forEach(_=>{"ion-fab"===_&&(customElements.get(_)||customElements.define(_,ja))})},Fc="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",du="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",vl="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>";let Yd;const Yc=(B,_,k,D,q)=>(k="ios"===(k&&uc(k))?"ios":"md",D&&"ios"===k?B=uc(D):q&&"md"===k?B=uc(q):(!B&&_&&!W0(_)&&(B=_),C0(B)&&(B=uc(B))),C0(B)&&""!==B.trim()&&""===B.replace(/[a-z]|-|\d/gi,"")?B:null),Zd=B=>C0(B)&&(B=B.trim(),W0(B))?B:null,W0=B=>B.length>0&&/(\/|\.)/.test(B),C0=B=>"string"==typeof B,uc=B=>B.toLowerCase(),q0=B=>B&&""!==B.dir?"rtl"===B.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase()),cd=B=>{if(1===B.nodeType){if("script"===B.nodeName.toLowerCase())return!1;for(let _=0;_<B.attributes.length;_++){const k=B.attributes[_].name;if(C0(k)&&0===k.toLowerCase().indexOf("on"))return!1}for(let _=0;_<B.childNodes.length;_++)if(!cd(B.childNodes[_]))return!1}return!0},Qd=new Map,Ah=new Map;let yd;const S0=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=Xi(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((B,_=[])=>{const k={};return _.forEach(D=>{B.hasAttribute(D)&&(null!==B.getAttribute(D)&&(k[D]=B.getAttribute(D)),B.removeAttribute(D))}),k})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(_,k,D){if(Y.L2.isBrowser&&this.lazy&&typeof window<"u"&&window.IntersectionObserver){const q=this.io=new window.IntersectionObserver(ce=>{ce[0].isIntersecting&&(q.disconnect(),this.io=void 0,D())},{rootMargin:k});q.observe(_)}else D()}loadIcon(){if(Y.L2.isBrowser&&this.isVisible){const _=(B=>{let _=Zd(B.src);return _||(_=Yc(B.name,B.icon,B.mode,B.ios,B.md),_?((B,_)=>{const k=(()=>{if(typeof window>"u")return new Map;if(!Yd){const B=window;B.Ionicons=B.Ionicons||{},Yd=B.Ionicons.map=B.Ionicons.map||new Map}return Yd})().get(B);if(k)return k;try{return(0,Y.OX)(`svg/${B}.svg`)}catch{console.warn(`[Ionicons Warning]: Could not load icon with name "${B}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,_)}})(_,B):B.icon&&(_=Zd(B.icon),_||(_=Zd(B.icon[B.mode]),_))?_:null)})(this);_&&(Qd.has(_)?this.svgContent=Qd.get(_):((B,_)=>{let k=Ah.get(B);if(!k){if(!(typeof fetch<"u"&&typeof document<"u"))return Qd.set(B,""),Promise.resolve();if((B=>B.startsWith("data:image/svg+xml"))(B)&&(B=>-1!==B.indexOf(";utf8,"))(B)){yd||(yd=new DOMParser);const q=yd.parseFromString(B,"text/html").querySelector("svg");return q&&Qd.set(B,q.outerHTML),Promise.resolve()}k=fetch(B).then(D=>{if(D.ok)return D.text().then(q=>{q&&!1!==_&&(q=(B=>{const _=document.createElement("div");_.innerHTML=B;for(let D=_.childNodes.length-1;D>=0;D--)"svg"!==_.childNodes[D].nodeName.toLowerCase()&&_.removeChild(_.childNodes[D]);const k=_.firstElementChild;if(k&&"svg"===k.nodeName.toLowerCase()){const D=k.getAttribute("class")||"";if(k.setAttribute("class",(D+" s-ion-icon").trim()),cd(k))return _.innerHTML}return""})(q)),Qd.set(B,q||"")});Qd.set(B,"")}),Ah.set(B,k)}return k})(_,this.sanitize).then(()=>this.svgContent=Qd.get(_)),this.didLoadIcon=!0)}this.iconName=Yc(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:_,iconName:k,inheritedAttributes:D,el:q}=this,ce=this.mode||"md",De=!!k&&(k.includes("arrow")||k.includes("chevron"))&&!1!==_,dt=_||De;return(0,Y.h)(Y.xr,Object.assign({role:"img",class:Object.assign(Object.assign({[ce]:!0},oe(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":dt,"icon-rtl":dt&&q0(q)})},D),(0,Y.h)("div",Y.L2.isBrowser&&this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},void 0,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]),Xi=()=>Y.L2.isBrowser&&typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",oe=B=>B?{"ion-color":!0,[`ion-color-${B}`]:!0}:null;function me(){typeof customElements>"u"||["ion-icon"].forEach(_=>{"ion-icon"===_&&(customElements.get(_)||customElements.define(_,S0))})}const Kt=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.fab=null,this.inheritedAttributes={},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.onClick=()=>{const{fab:_}=this;_&&_.toggle()},this.color=void 0,this.activated=!1,this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0,this.show=!1,this.translucent=!1,this.type="button",this.size=void 0,this.closeIcon="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>"}connectedCallback(){this.fab=this.el.closest("ion-fab")}componentWillLoad(){this.inheritedAttributes=(0,At.i)(this.el)}render(){const{el:_,disabled:k,color:D,href:q,activated:ce,show:De,translucent:dt,size:jt,inheritedAttributes:bn}=this,fi=vs("ion-fab-list",_),Ii=(0,ht.b)(this),oo=void 0===q?"button":"a",ji="button"===oo?{type:this.type}:{download:this.download,href:q,rel:this.rel,target:this.target};return(0,Y.h)(Y.xr,{key:"eb347f7d6749c40637540d84778eb8d1b667a947",onClick:this.onClick,"aria-disabled":k?"true":null,class:Hr(D,{[Ii]:!0,"fab-button-in-list":fi,"fab-button-translucent-in-list":fi&&dt,"fab-button-close-active":ce,"fab-button-show":De,"fab-button-disabled":k,"fab-button-translucent":dt,"ion-activatable":!0,"ion-focusable":!0,[`fab-button-${jt}`]:void 0!==jt})},(0,Y.h)(oo,Object.assign({key:"83e853c8815f41543c848eb2e05ec2bb1716110a"},ji,{class:"button-native",part:"native",disabled:k,onFocus:this.onFocus,onBlur:this.onBlur,onClick:Io=>Xn(q,Io,this.routerDirection,this.routerAnimation)},bn),(0,Y.h)("ion-icon",{key:"798deede94de658e4345acf7c2aafe2ab2567b0b","aria-hidden":"true",icon:this.closeIcon,part:"close-icon",class:"close-icon",lazy:!1}),(0,Y.h)("span",{key:"99252fde6de1aca73fc240a6da7e29acac9acb18",class:"button-inner"},(0,Y.h)("slot",{key:"dc73e9b41bf1f0e385e5784f975dfb81e37c8dfb"})),"md"===Ii&&(0,Y.h)("ion-ripple-effect",{key:"8413e162f44a0350f54dff06cff7aad101de3549"})))}get el(){return this}static get style(){return{ios:':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}.close-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;top:0;position:absolute;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;font-size:var(--close-icon-font-size);opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #0054e9);--background-activated:var(--ion-color-primary-shade, #004acd);--background-focused:var(--ion-color-primary-shade, #004acd);--background-hover:var(--ion-color-primary-tint, #1a65eb);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transition:0.2s transform cubic-bezier(0.25, 1.11, 0.78, 1.59);--close-icon-font-size:28px}:host(.ion-activated){--box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);--transform:scale(1.1);--transition:0.2s transform ease-out}::slotted(ion-icon){font-size:28px}:host(.fab-button-in-list){--background:var(--ion-color-light, #f4f5f8);--background-activated:var(--ion-color-light-shade, #d7d8da);--background-focused:var(--background-activated);--background-hover:var(--ion-color-light-tint, #f5f6f9);--color:var(--ion-color-light-contrast, #000);--color-activated:var(--ion-color-light-contrast, #000);--color-focused:var(--color-activated);--transition:transform 200ms ease 10ms, opacity 200ms ease 10ms}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}:host(.ion-color.ion-focused) .button-native,:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after,:host(.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent){--background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.9);--background-hover:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.8);--background-focused:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.82);--backdrop-filter:saturate(180%) blur(20px)}:host(.fab-button-translucent-in-list){--background:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.9);--background-hover:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.8);--background-focused:rgba(var(--ion-color-light-rgb, 244, 245, 248), 0.82)}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){@media (any-hover: hover){:host(.fab-button-translucent.ion-color:hover) .button-native{background:rgba(var(--ion-color-base-rgb), 0.8)}}:host(.ion-color.fab-button-translucent) .button-native{background:rgba(var(--ion-color-base-rgb), 0.9)}:host(.ion-color.ion-focused.fab-button-translucent) .button-native,:host(.ion-color.ion-activated.fab-button-translucent) .button-native{background:var(--ion-color-base)}}',md:':host{--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--background-hover:var(--ion-color-primary-contrast, #fff);--background-hover-opacity:.08;--transition:background-color, opacity 100ms linear;--ripple-color:currentColor;--border-radius:50%;--border-width:0;--border-style:none;--border-color:initial;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:56px;height:56px;font-size:14px;text-align:center;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:var(--border-radius);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);background-clip:padding-box;color:var(--color);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:strict;cursor:pointer;overflow:hidden;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-icon){line-height:1}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{left:0;right:0;top:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;z-index:1}:host(.fab-button-disabled){cursor:default;opacity:0.5;pointer-events:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-activated) .button-native{color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}::slotted(ion-icon){line-height:1}:host(.fab-button-small){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px;width:40px;height:40px}.close-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;top:0;position:absolute;height:100%;-webkit-transform:scale(0.4) rotateZ(-45deg);transform:scale(0.4) rotateZ(-45deg);-webkit-transition:all ease-in-out 300ms;transition:all ease-in-out 300ms;-webkit-transition-property:opacity, -webkit-transform;transition-property:opacity, -webkit-transform;transition-property:transform, opacity;transition-property:transform, opacity, -webkit-transform;font-size:var(--close-icon-font-size);opacity:0;z-index:1}:host(.fab-button-close-active) .close-icon{-webkit-transform:scale(1) rotateZ(0deg);transform:scale(1) rotateZ(0deg);opacity:1}:host(.fab-button-close-active) .button-inner{-webkit-transform:scale(0.4) rotateZ(45deg);transform:scale(0.4) rotateZ(45deg);opacity:0}ion-ripple-effect{color:var(--ripple-color)}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.fab-button-translucent) .button-native{-webkit-backdrop-filter:var(--backdrop-filter);backdrop-filter:var(--backdrop-filter)}}:host(.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{--background:var(--ion-color-primary, #0054e9);--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--color:var(--ion-color-primary-contrast, #fff);--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1), background-color 280ms cubic-bezier(0.4, 0, 0.2, 1), color 280ms cubic-bezier(0.4, 0, 0.2, 1), opacity 15ms linear 30ms, transform 270ms cubic-bezier(0, 0, 0.2, 1) 0ms;--close-icon-font-size:24px}:host(.ion-activated){--box-shadow:0 7px 8px -4px rgba(0, 0, 0, 0.2), 0 12px 17px 2px rgba(0, 0, 0, 0.14), 0 5px 22px 4px rgba(0, 0, 0, 0.12)}::slotted(ion-icon){font-size:24px}:host(.fab-button-in-list){--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);--color-activated:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);--color-focused:var(--color-activated);--background:var(--ion-color-light, #f4f5f8);--background-activated:transparent;--background-focused:var(--ion-color-light-shade, #d7d8da);--background-hover:var(--ion-color-light-tint, #f5f6f9)}:host(.fab-button-in-list) ::slotted(ion-icon){font-size:18px}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.ion-color.ion-activated) .button-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activated) .button-native::after{background:transparent}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-contrast)}:host(.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}}'}}},[33,"ion-fab-button",{color:[513],activated:[4],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1],show:[4],translucent:[4],type:[1],size:[1],closeIcon:[1,"close-icon"]}]),Ei=function Ci(){typeof customElements>"u"||["ion-fab-button","ion-icon","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-fab-button":customElements.get(_)||customElements.define(_,Kt);break;case"ion-icon":customElements.get(_)||me();break;case"ion-ripple-effect":customElements.get(_)||Va()}})},Oa=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"930ce78b02f8360fbca08a35d364d2c09128c6c8",class:{[_]:!0,"grid-fixed":this.fixed}},(0,Y.h)("slot",{key:"c47bf7ef2197f5ebc42d3e2c55044276fb0db393"}))}static get style(){return":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}"}},[1,"ion-grid",{fixed:[4]}]),Nl=function qs(){typeof customElements>"u"||["ion-grid"].forEach(_=>{"ion-grid"===_&&(customElements.get(_)||customElements.define(_,Oa))})},Zc=B=>{const _=document.querySelector(`${B}.ion-cloned-element`);if(null!==_)return _;const k=document.createElement(B);return k.classList.add("ion-cloned-element"),k.style.setProperty("display","none"),document.body.appendChild(k),k},Zu=B=>{if(!B)return;const _=B.querySelectorAll("ion-toolbar");return{el:B,toolbars:Array.from(_).map(k=>{const D=k.querySelector("ion-title");return{el:k,background:k.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:D,innerTitleEl:D?D.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(k.querySelectorAll("ion-buttons"))}})}},Ou=(B,_)=>{"fade"!==B.collapse&&(void 0===_?B.style.removeProperty("--opacity-scale"):B.style.setProperty("--opacity-scale",_.toString()))},_c=(B,_=!0)=>{const k=B.el;_?(k.classList.remove("header-collapse-condense-inactive"),k.removeAttribute("aria-hidden")):(k.classList.add("header-collapse-condense-inactive"),k.setAttribute("aria-hidden","true"))},eh=(B,_,k)=>{(0,Y.gv)(()=>{const D=B.scrollTop,q=_.clientHeight,ce=k?k.clientHeight:0;if(null!==k&&D<ce)return _.style.setProperty("--opacity-scale","0"),void B.style.setProperty("clip-path",`inset(${q}px 0px 0px 0px)`);const jt=(0,At.k)(0,(D-ce)/10,1);(0,Y.bN)(()=>{B.style.removeProperty("clip-path"),_.style.setProperty("--opacity-scale",jt.toString())})})},Wh=(0,Y.w$)(class extends Y.wt{constructor(){var _;super(),_=this,this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=function(){var k=(0,qe.A)(function*(D,q){const ce=_.scrollEl=yield(0,Ct.g)(D);_.contentScrollCallback=()=>{eh(_.scrollEl,_.el,q)},ce.addEventListener("scroll",_.contentScrollCallback),eh(_.scrollEl,_.el,q)});return function(D,q){return k.apply(this,arguments)}}(),this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=(0,At.i)(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}checkCollapsibleHeader(){var _=this;return(0,qe.A)(function*(){if("ios"!==(0,ht.b)(_))return;const{collapse:D}=_,q="condense"===D,ce="fade"===D;if(_.destroyCollapsibleHeader(),q){const De=_.el.closest("ion-app,ion-page,.ion-page,page-inner"),dt=De?(0,Ct.f)(De):null;(0,Y.bN)(()=>{Zc("ion-title").size="large",Zc("ion-back-button")}),yield _.setupCondenseHeader(dt,De)}else if(ce){const De=_.el.closest("ion-app,ion-page,.ion-page,page-inner"),dt=De?(0,Ct.f)(De):null;if(!dt)return void(0,Ct.p)(_.el);const jt=dt.querySelector('ion-header[collapse="condense"]');yield _.setupFadeHeader(dt,jt)}})()}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}setupCondenseHeader(_,k){var D=this;return(0,qe.A)(function*(){if(!_||!k)return void(0,Ct.p)(D.el);if(typeof IntersectionObserver>"u")return;D.scrollEl=yield(0,Ct.g)(_);const q=k.querySelectorAll("ion-header");if(D.collapsibleMainHeader=Array.from(q).find(jt=>"condense"!==jt.collapse),!D.collapsibleMainHeader)return;const ce=Zu(D.collapsibleMainHeader),De=Zu(D.el);ce&&De&&(_c(ce,!1),Ou(ce.el,0),D.intersectionObserver=new IntersectionObserver(jt=>{((B,_,k,D)=>{(0,Y.bN)(()=>{const q=D.scrollTop;((B,_,k)=>{if(!B[0].isIntersecting)return;const D=B[0].intersectionRatio>.9||k<=0?0:100*(1-B[0].intersectionRatio)/75;Ou(_.el,1===D?void 0:D)})(B,_,q);const ce=B[0],De=ce.intersectionRect,dt=De.width*De.height,bn=0===dt&&0==ce.rootBounds.width*ce.rootBounds.height,fi=Math.abs(De.left-ce.boundingClientRect.left),Ii=Math.abs(De.right-ce.boundingClientRect.right);bn||dt>0&&(fi>=5||Ii>=5)||(ce.isIntersecting?(_c(_,!1),_c(k)):(0===De.x&&0===De.y||0!==De.width&&0!==De.height)&&q>0&&(_c(_),_c(k,!1),Ou(_.el)))})})(jt,ce,De,D.scrollEl)},{root:_,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),D.intersectionObserver.observe(De.toolbars[De.toolbars.length-1].el),D.contentScrollCallback=()=>{((B,_,k)=>{(0,Y.gv)(()=>{const q=(0,At.k)(1,1+-B.scrollTop/500,1.1);null===k.querySelector("ion-refresher.refresher-native")&&(0,Y.bN)(()=>{((B=[],_=1,k=!1)=>{B.forEach(D=>{const q=D.ionTitleEl,ce=D.innerTitleEl;!q||"large"!==q.size||(ce.style.transition=k?"all 0.2s ease-in-out":"",ce.style.transform=`scale3d(${_}, ${_}, 1)`)})})(_.toolbars,q)})})})(D.scrollEl,De,_)},D.scrollEl.addEventListener("scroll",D.contentScrollCallback),(0,Y.bN)(()=>{void 0!==D.collapsibleMainHeader&&D.collapsibleMainHeader.classList.add("header-collapse-main")}))})()}render(){const{translucent:_,inheritedAttributes:k}=this,D=(0,ht.b)(this),q=this.collapse||"none",ce=vs("ion-menu",this.el)?"none":"banner";return(0,Y.h)(Y.xr,Object.assign({key:"c687314ef290793a9d633ad20cfc5eeb47621e31",role:ce,class:{[D]:!0,[`header-${D}`]:!0,"header-translucent":this.translucent,[`header-collapse-${q}`]:!0,[`header-translucent-${D}`]:this.translucent}},k),"ios"===D&&_&&(0,Y.h)("div",{key:"b429996046082405a91e7c23f95516db0b736f12",class:"header-background"}),(0,Y.h)("slot",{key:"e17a8965f8d3a33c1bfcb056c153d8242e5229fa"}))}get el(){return this}static get style(){return{ios:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:0px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}ion-header.header-ios:not(.header-collapse-main):has(~ion-content ion-header.header-ios[collapse=condense],~ion-content ion-header.header-ios.header-collapse-condense){opacity:0}",md:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}"}}},[36,"ion-header",{collapse:[1],translucent:[4]}]),qh=function Qu(){typeof customElements>"u"||["ion-header"].forEach(_=>{"ion-header"===_&&(customElements.get(_)||customElements.define(_,Wh))})},ph=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionImgWillLoad=(0,Y.lh)(this,"ionImgWillLoad",7),this.ionImgDidLoad=(0,Y.lh)(this,"ionImgDidLoad",7),this.ionError=(0,Y.lh)(this,"ionError",7),this.inheritedAttributes={},this.onLoad=()=>{this.ionImgDidLoad.emit()},this.onError=()=>{this.ionError.emit()},this.loadSrc=void 0,this.loadError=void 0,this.alt=void 0,this.src=void 0}srcChanged(){this.addIO()}componentWillLoad(){this.inheritedAttributes=(0,At.d)(this.el,["draggable"])}componentDidLoad(){this.addIO()}addIO(){void 0!==this.src&&(typeof window<"u"&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype?(this.removeIO(),this.io=new IntersectionObserver(_=>{_[_.length-1].isIntersecting&&(this.load(),this.removeIO())}),this.io.observe(this.el)):setTimeout(()=>this.load(),200))}load(){this.loadError=this.onError,this.loadSrc=this.src,this.ionImgWillLoad.emit()}removeIO(){this.io&&(this.io.disconnect(),this.io=void 0)}render(){const{loadSrc:_,alt:k,onLoad:D,loadError:q,inheritedAttributes:ce}=this,{draggable:De}=ce;return(0,Y.h)(Y.xr,{key:"14d24d65ec8e5522192ca58035264971b1ab883b",class:(0,ht.b)(this)},(0,Y.h)("img",{key:"345ba155a5fdce5e66c397a599b7333d37d9cb1d",decoding:"async",src:_,alt:k,onLoad:D,onError:q,part:"image",draggable:K0(De)}))}get el(){return this}static get watchers(){return{src:["srcChanged"]}}static get style(){return":host{display:block;-o-object-fit:contain;object-fit:contain}img{display:block;width:100%;height:100%;-o-object-fit:inherit;object-fit:inherit;-o-object-position:inherit;object-position:inherit}"}},[1,"ion-img",{alt:[1],src:[1],loadSrc:[32],loadError:[32]},void 0,{src:["srcChanged"]}]),K0=B=>{switch(B){case"true":return!0;case"false":return!1;default:return}},g1=function Y0(){typeof customElements>"u"||["ion-img"].forEach(_=>{"ion-img"===_&&(customElements.get(_)||customElements.define(_,ph))})},th=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.color=void 0,this.button=!1,this.detail=void 0,this.detailIcon=Fc,this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.lines=void 0,this.routerAnimation=void 0,this.routerDirection="forward",this.target=void 0,this.type="button"}buttonChanged(){this.focusable=this.isFocusable()}labelColorChanged(_){const{color:k}=this;void 0===k&&(this.labelColorStyles=_.detail)}itemStyle(_){_.stopPropagation();const k=_.target.tagName,D=_.detail,q={},ce=this.itemStyles.get(k)||{};let De=!1;Object.keys(D).forEach(dt=>{if(D[dt]){const jt=`item-${dt}`;ce[jt]||(De=!0),q[jt]=!0}}),!De&&Object.keys(q).length!==Object.keys(ce).length&&(De=!0),De&&(this.itemStyles.set(k,q),(0,Y.$x)(this))}connectedCallback(){this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=(0,At.d)(this.el,["aria-label"])}componentDidLoad(){(0,At.r)(()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()})}setMultipleInputs(){const _=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),k=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),D=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=_.length+k.length>1||_.length+D.length>1||_.length>0&&this.isClickable()}hasCover(){return 1===this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length&&!this.multipleInputs}isClickable(){return void 0!==this.href||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const _=this.el.querySelector(".ion-focusable");return this.canActivate()||null!==_}hasStartEl(){null!==this.el.querySelector('[slot="start"]')&&this.el.classList.add("item-has-start-slot")}getFirstInteractive(){return this.el.querySelectorAll("ion-toggle:not([disabled]), ion-checkbox:not([disabled]), ion-radio:not([disabled]), ion-select:not([disabled]), ion-input:not([disabled]), ion-textarea:not([disabled])")[0]}render(){const{detail:_,detailIcon:k,download:D,labelColorStyles:q,lines:ce,disabled:De,href:dt,rel:jt,target:bn,routerAnimation:fi,routerDirection:Ii,inheritedAriaAttributes:oo,multipleInputs:ji}=this,Io={},Do=(0,ht.b)(this),wr=this.isClickable(),ls=this.canActivate(),ys=wr?void 0===dt?"button":"a":"div",Ur="button"===ys?{type:this.type}:{download:D,href:dt,rel:jt,target:bn};let xs={};const Is=this.getFirstInteractive();(wr||void 0!==Is&&!ji)&&(xs={onClick:Zl=>{if(wr&&Xn(dt,Zl,Ii,fi),void 0!==Is&&!ji){const Fu=Zl.composedPath()[0];Zl.isTrusted&&this.el.shadowRoot.contains(Fu)&&("ION-INPUT"===Is.tagName||"ION-TEXTAREA"===Is.tagName?Is.setFocus():Is.click())}}});const Us=void 0!==_?_:"ios"===Do&&wr;this.itemStyles.forEach(Zl=>{Object.assign(Io,Zl)});const fl=De||Io["item-interactive-disabled"]?"true":null,Ec=vs("ion-list",this.el)&&!vs("ion-radio-group",this.el),Dl=void 0!==Is&&!["ION-INPUT","ION-TEXTAREA"].includes(Is.tagName);return(0,Y.h)(Y.xr,{key:"f7986b5b81c4f289460bff2c452ce993b674236b","aria-disabled":fl,class:Object.assign(Object.assign(Object.assign({},Io),q),Hr(this.color,{item:!0,[Do]:!0,"item-lines-default":void 0===ce,[`item-lines-${ce}`]:void 0!==ce,"item-control-needs-pointer-cursor":Dl,"item-disabled":De,"in-list":Ec,"item-multiple-inputs":this.multipleInputs,"ion-activatable":ls,"ion-focusable":this.focusable,"item-rtl":"rtl"===document.dir})),role:Ec?"listitem":null},(0,Y.h)(ys,Object.assign({key:"cfafac67cdb532e4bce2dd4989e1936c013396ba"},Ur,oo,{class:"item-native",part:"native",disabled:De},xs),(0,Y.h)("slot",{key:"68a5b8e978eed62d7d913ca006bd4bd01497cd32",name:"start"}),(0,Y.h)("div",{key:"5b052cc338b00e8d40ab77cac7a139448f9b6452",class:"item-inner"},(0,Y.h)("div",{key:"7548addbe881a41ee32fd51627db230b56510760",class:"input-wrapper"},(0,Y.h)("slot",{key:"b6f4edd5895b9f91bf060edb35666b0e7ea26ccc"})),(0,Y.h)("slot",{key:"b595e7fb96461ea2e356dbad6529531ca19705db",name:"end"}),Us&&(0,Y.h)("ion-icon",{key:"091aa449464d530c921bd7de79bdc16fbdc14a70",icon:k,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":k===Fc})),ls&&"md"===Do&&(0,Y.h)("ion-ripple-effect",{key:"a4454f5ad15a67d5e41173d0227b77cd69776a18"})))}get el(){return this}static get watchers(){return{button:["buttonChanged"]}}static get style(){return{ios:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--detail-icon-color:initial;--detail-icon-font-size:1.25em;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-control-needs-pointer-cursor){cursor:pointer}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-right:var(--padding-end);padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}[dir=rtl] .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}@supports selector(:dir(rtl)){.item-native:dir(rtl){padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-left:var(--inner-padding-start);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}[dir=rtl] .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}@supports selector(:dir(rtl)){.item-inner:dir(rtl){padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:100%}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--color:var(--ion-item-color, var(--ion-text-color, #000));font-size:1rem}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:1px;--padding-bottom:1px;--padding-start:.5em;--padding-end:.5em;min-height:24px;font-size:0.8125rem}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}',md:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--detail-icon-color:initial;--detail-icon-font-size:1.25em;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-control-needs-pointer-cursor){cursor:pointer}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-right:var(--padding-end);padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}[dir=rtl] .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}@supports selector(:dir(rtl)){.item-native:dir(rtl){padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-left:var(--inner-padding-start);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}[dir=rtl] .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}@supports selector(:dir(rtl)){.item-inner:dir(rtl){padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:100%}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;font-size:1rem;font-weight:normal;text-transform:none}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0}:host(.item-lines-full){--border-width:0 0 1px 0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted([slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:1.5em}:host(.ion-color) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:0.6875rem}::slotted(ion-note[slot]){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:2px;--padding-bottom:2px;--padding-start:.6em;--padding-end:.6em;min-height:25px;font-size:0.75rem}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #0054e9)}'}}},[33,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[516],download:[1],href:[1],rel:[1],lines:[1],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],multipleInputs:[32],focusable:[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{button:["buttonChanged"]}]);function nh(){typeof customElements>"u"||["ion-item","ion-icon","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-item":customElements.get(_)||customElements.define(_,th);break;case"ion-icon":customElements.get(_)||me();break;case"ion-ripple-effect":customElements.get(_)||Va()}})}const J1=nh,mh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.ionColor=(0,Y.lh)(this,"ionColor",7),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate="floating"===this.position,this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:_}=this;this.ionColor.emit({"item-label-color":void 0!==_,[`ion-color-${_}`]:void 0!==_})}emitStyle(){const{inRange:_,position:k}=this;_||this.ionStyle.emit({label:!0,[`label-${k}`]:void 0!==k})}render(){const _=this.position,k=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"c2c0f388dab910d294efb9fbb409ee4ef829c1ed",class:Hr(this.color,{[k]:!0,"in-item-color":vs("ion-item.ion-color",this.el),[`label-${_}`]:void 0!==_,"label-no-animate":this.noAnimate,"label-rtl":"rtl"===document.dir})},(0,Y.h)("slot",{key:"4de6b69950f417873a13c851018ec31ea2686f0a"}))}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-nowrap.sc-ion-label-ios-h{overflow:hidden}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.item-skeleton-text.sc-ion-label-ios-h,.item-skeleton-text .sc-ion-label-ios-h{overflow:hidden}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h{font-size:0.875rem;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:0.875rem}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:1.375rem;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.0625rem;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:0.875rem;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:var(--ion-color-step-400, var(--ion-text-color-step-600, #999999))}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",md:".item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-nowrap.sc-ion-label-md-h{overflow:hidden}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.item-skeleton-text.sc-ion-label-md-h,.item-skeleton-text .sc-ion-label-md-h{overflow:hidden}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #0054e9)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;line-height:1.25rem;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}"}}},[38,"ion-label",{color:[513],position:[1],noAnimate:[32]},void 0,{color:["colorChanged"],position:["positionChanged"]}]);function P0(){typeof customElements>"u"||["ion-label"].forEach(_=>{"ion-label"===_&&(customElements.get(_)||customElements.define(_,mh))})}const el=P0,Wa=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.lines=void 0,this.inset=!1}closeSlidingItems(){var _=this;return(0,qe.A)(function*(){const k=_.el.querySelector("ion-item-sliding");return!(null==k||!k.closeOpened)&&k.closeOpened()})()}render(){const _=(0,ht.b)(this),{lines:k,inset:D}=this;return(0,Y.h)(Y.xr,{key:"8bde220025a7eeca6da075379c6487c4c9bdddc1",role:"list",class:{[_]:!0,[`list-${_}`]:!0,"list-inset":D,[`list-lines-${k}`]:void 0!==k,[`list-${_}-lines-${k}`]:void 0!==k}})}get el(){return this}static get style(){return{ios:"ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}.list-ios.list-inset ion-item:only-child,.list-ios.list-inset ion-item:not(:only-of-type):last-of-type,.list-ios.list-inset ion-item-sliding:last-of-type ion-item{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-ios-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 0.55px 0}.list-ios-lines-inset .item-lines-default{--inner-border-width:0 0 0.55px 0;--border-width:0px}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",md:"ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-md>.input:last-child::after{inset-inline-start:0}.list-md.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}.list-md.list-inset ion-item:not(:only-of-type):last-of-type,.list-md.list-inset ion-item-sliding:last-of-type ion-item{--border-width:0;--inner-border-width:0}.list-md.list-inset ion-item:only-child{--border-width:0;--inner-border-width:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-md-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 1px 0}.list-md-lines-inset .item-lines-default{--inner-border-width:0 0 1px 0;--border-width:0px}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}"}}},[32,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);function pl(){typeof customElements>"u"||["ion-list"].forEach(_=>{"ion-list"===_&&(customElements.get(_)||customElements.define(_,Wa))})}const Ua=pl,Yh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="determinate",this.reversed=!1,this.value=0,this.buffer=1,this.color=void 0}render(){const{color:_,type:k,reversed:D,value:q,buffer:ce}=this,De=ht.c.getBoolean("_testing"),dt=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"b293f4475bcdaa7851b41ebfda659037f0365120",role:"progressbar","aria-valuenow":"determinate"===k?q:null,"aria-valuemin":"0","aria-valuemax":"1",class:Hr(_,{[dt]:!0,[`progress-bar-${k}`]:!0,"progress-paused":De,"progress-bar-reversed":"rtl"===document.dir?!D:D,"progress-bar-solid":1===ce})},"indeterminate"===k?pu():dc(q,ce))}static get style(){return{ios:":host{--background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.3);--progress-background:var(--ion-color-primary, #0054e9);display:block;position:relative;width:100%;contain:strict;direction:ltr;overflow:hidden}.progress,.progress-indeterminate,.indeterminate-bar-primary,.indeterminate-bar-secondary,.progress-buffer-bar{left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%}.buffer-circles-container,.buffer-circles{left:0;right:0;top:0;bottom:0;position:absolute}.buffer-circles{right:-10px;left:-10px;}.progress,.progress-buffer-bar,.buffer-circles-container{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms linear;transition:-webkit-transform 150ms linear;transition:transform 150ms linear;transition:transform 150ms linear, -webkit-transform 150ms linear}.progress,.progress-indeterminate{background:var(--progress-background);z-index:2}.progress-buffer-bar{background:var(--background);z-index:1}.buffer-circles-container{overflow:hidden}.indeterminate-bar-primary{top:0;right:0;bottom:0;left:-145.166611%;-webkit-animation:primary-indeterminate-translate 2s infinite linear;animation:primary-indeterminate-translate 2s infinite linear}.indeterminate-bar-primary .progress-indeterminate{-webkit-animation:primary-indeterminate-scale 2s infinite linear;animation:primary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.indeterminate-bar-secondary{top:0;right:0;bottom:0;left:-54.888891%;-webkit-animation:secondary-indeterminate-translate 2s infinite linear;animation:secondary-indeterminate-translate 2s infinite linear}.indeterminate-bar-secondary .progress-indeterminate{-webkit-animation:secondary-indeterminate-scale 2s infinite linear;animation:secondary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.buffer-circles{background-image:radial-gradient(ellipse at center, var(--background) 0%, var(--background) 30%, transparent 30%);background-repeat:repeat-x;background-position:5px center;background-size:10px 10px;z-index:0;-webkit-animation:buffering 450ms infinite linear;animation:buffering 450ms infinite linear}:host(.progress-bar-reversed){-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.progress-paused) .indeterminate-bar-secondary,:host(.progress-paused) .indeterminate-bar-primary,:host(.progress-paused) .buffer-circles{-webkit-animation-play-state:paused;animation-play-state:paused}:host(.ion-color) .buffer-circles{background-image:radial-gradient(ellipse at center, rgba(var(--ion-color-base-rgb), 0.3) 0%, rgba(var(--ion-color-base-rgb), 0.3) 30%, transparent 30%)}:host(.ion-color) .progress,:host(.ion-color) .progress-indeterminate{background:var(--ion-color-base)}@-webkit-keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@-webkit-keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@-webkit-keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}@keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}:host{border-radius:9999px;height:4px}:host(.progress-bar-solid){--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}",md:":host{--background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.3);--progress-background:var(--ion-color-primary, #0054e9);display:block;position:relative;width:100%;contain:strict;direction:ltr;overflow:hidden}.progress,.progress-indeterminate,.indeterminate-bar-primary,.indeterminate-bar-secondary,.progress-buffer-bar{left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%}.buffer-circles-container,.buffer-circles{left:0;right:0;top:0;bottom:0;position:absolute}.buffer-circles{right:-10px;left:-10px;}.progress,.progress-buffer-bar,.buffer-circles-container{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms linear;transition:-webkit-transform 150ms linear;transition:transform 150ms linear;transition:transform 150ms linear, -webkit-transform 150ms linear}.progress,.progress-indeterminate{background:var(--progress-background);z-index:2}.progress-buffer-bar{background:var(--background);z-index:1}.buffer-circles-container{overflow:hidden}.indeterminate-bar-primary{top:0;right:0;bottom:0;left:-145.166611%;-webkit-animation:primary-indeterminate-translate 2s infinite linear;animation:primary-indeterminate-translate 2s infinite linear}.indeterminate-bar-primary .progress-indeterminate{-webkit-animation:primary-indeterminate-scale 2s infinite linear;animation:primary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.indeterminate-bar-secondary{top:0;right:0;bottom:0;left:-54.888891%;-webkit-animation:secondary-indeterminate-translate 2s infinite linear;animation:secondary-indeterminate-translate 2s infinite linear}.indeterminate-bar-secondary .progress-indeterminate{-webkit-animation:secondary-indeterminate-scale 2s infinite linear;animation:secondary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.buffer-circles{background-image:radial-gradient(ellipse at center, var(--background) 0%, var(--background) 30%, transparent 30%);background-repeat:repeat-x;background-position:5px center;background-size:10px 10px;z-index:0;-webkit-animation:buffering 450ms infinite linear;animation:buffering 450ms infinite linear}:host(.progress-bar-reversed){-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.progress-paused) .indeterminate-bar-secondary,:host(.progress-paused) .indeterminate-bar-primary,:host(.progress-paused) .buffer-circles{-webkit-animation-play-state:paused;animation-play-state:paused}:host(.ion-color) .buffer-circles{background-image:radial-gradient(ellipse at center, rgba(var(--ion-color-base-rgb), 0.3) 0%, rgba(var(--ion-color-base-rgb), 0.3) 30%, transparent 30%)}:host(.ion-color) .progress,:host(.ion-color) .progress-indeterminate{background:var(--ion-color-base)}@-webkit-keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@-webkit-keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@-webkit-keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}@keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}:host{height:4px}:host(.ion-color) .progress-buffer-bar{background:rgba(var(--ion-color-base-rgb), 0.3)}"}}},[33,"ion-progress-bar",{type:[1],reversed:[4],value:[2],buffer:[2],color:[513]}]),pu=()=>(0,Y.h)("div",{part:"track",class:"progress-buffer-bar"},(0,Y.h)("div",{class:"indeterminate-bar-primary"},(0,Y.h)("span",{part:"progress",class:"progress-indeterminate"})),(0,Y.h)("div",{class:"indeterminate-bar-secondary"},(0,Y.h)("span",{part:"progress",class:"progress-indeterminate"}))),dc=(B,_)=>{const k=(0,At.k)(0,B,1),D=(0,At.k)(0,_,1);return[(0,Y.h)("div",{part:"progress",class:"progress",style:{transform:`scaleX(${k})`}}),(0,Y.h)("div",{class:{"buffer-circles-container":!0,"ion-hide":1===D},style:{transform:`translateX(${100*D}%)`}},(0,Y.h)("div",{class:"buffer-circles-container",style:{transform:`translateX(-${100*D}%)`}},(0,Y.h)("div",{part:"stream",class:"buffer-circles"}))),(0,Y.h)("div",{part:"track",class:"progress-buffer-bar",style:{transform:`scaleX(${D})`}})]},ih=function Ld(){typeof customElements>"u"||["ion-progress-bar"].forEach(_=>{"ion-progress-bar"===_&&(customElements.get(_)||customElements.define(_,Yh))})},Zh=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return(0,Y.h)(Y.xr,{key:"813c9a7f6782d2cf8eb27f30d3ab28e6f3122868",class:(0,ht.b)(this)},(0,Y.h)("slot",{key:"356bec4d4d408ea63d6b431b06465d5b7bcbff71"}))}static get style(){return":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}"}},[1,"ion-row"]),ns=function Bd(){typeof customElements>"u"||["ion-row"].forEach(_=>{"ion-row"===_&&(customElements.get(_)||customElements.define(_,Zh))})};let Qh=0;const Wl=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.segmentEl=null,this.inheritedAttributes={},this.updateStyle=()=>{(0,Y.$x)(this)},this.updateState=()=>{const{segmentEl:_}=this;_&&(this.checked=_.value===this.value,_.disabled&&(this.disabled=!0))},this.checked=!1,this.disabled=!1,this.layout="icon-top",this.type="button",this.value="ion-sb-"+Qh++}valueChanged(){this.updateState()}connectedCallback(){const _=this.segmentEl=this.el.closest("ion-segment");_&&(this.updateState(),(0,At.a)(_,"ionSelect",this.updateState),(0,At.a)(_,"ionStyle",this.updateStyle))}disconnectedCallback(){const _=this.segmentEl;_&&((0,At.b)(_,"ionSelect",this.updateState),(0,At.b)(_,"ionStyle",this.updateStyle),this.segmentEl=null)}componentWillLoad(){this.inheritedAttributes=Object.assign({},(0,At.d)(this.el,["aria-label"]))}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}setFocus(){var _=this;return(0,qe.A)(function*(){const{nativeEl:k}=_;void 0!==k&&k.focus()})()}render(){const{checked:_,type:k,disabled:D,hasIcon:q,hasLabel:ce,layout:De,segmentEl:dt}=this,jt=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"70cf5c7a3ae2620222c5250c644faf3cfc3b3e4e",class:{[jt]:!0,"in-toolbar":vs("ion-toolbar",this.el),"in-toolbar-color":vs("ion-toolbar[color]",this.el),"in-segment":vs("ion-segment",this.el),"in-segment-color":void 0!==(null==dt?void 0:dt.color),"segment-button-has-label":ce,"segment-button-has-icon":q,"segment-button-has-label-only":ce&&!q,"segment-button-has-icon-only":q&&!ce,"segment-button-disabled":D,"segment-button-checked":_,[`segment-button-layout-${De}`]:!0,"ion-activatable":!0,"ion-activatable-instant":!0,"ion-focusable":!0}},(0,Y.h)("button",Object.assign({key:"a53c9f1e360934e8d2e90476642ba4507fc38ebd","aria-selected":_?"true":"false",role:"tab",ref:fi=>this.nativeEl=fi,type:k,class:"button-native",part:"native",disabled:D},this.inheritedAttributes),(0,Y.h)("span",{key:"7d8feda840d389941cc693f500b5eba0b39b41da",class:"button-inner"},(0,Y.h)("slot",{key:"d9ae1eec45db253cbf573d29cd545658dd595d87"})),"md"===jt&&(0,Y.h)("ion-ripple-effect",{key:"49e6a16968709dc9b3fc77bc9fb99acb42fda88c"})),(0,Y.h)("div",{key:"4e3ea0989ed5205dbb03586e4facb439b05a92de",part:"indicator",class:{"segment-button-indicator":!0,"segment-button-indicator-animated":!0}},(0,Y.h)("div",{key:"65c72a151080998c1e548c87d4d4ebd5c7dda72f",part:"indicator-background",class:"segment-button-indicator-background"})))}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:none;--background-hover-opacity:0;--background-focused:none;--background-focused-opacity:0;--border-radius:7px;--border-width:1px;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.12);--border-style:solid;--indicator-box-shadow:0 0 5px rgba(0, 0, 0, 0.16);--indicator-color:var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff)));--indicator-height:100%;--indicator-transition:transform 260ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--transition:100ms all linear;--padding-top:0;--padding-end:13px;--padding-bottom:0;--padding-start:13px;margin-top:2px;margin-bottom:2px;position:relative;-ms-flex-direction:row;flex-direction:row;min-width:70px;min-height:28px;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);font-size:13px;font-weight:450;line-height:37px}:host::before{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;-webkit-transition:160ms opacity ease-in-out;transition:160ms opacity ease-in-out;-webkit-transition-delay:100ms;transition-delay:100ms;border-left:var(--border-width) var(--border-style) var(--border-color);content:"";opacity:1;will-change:opacity}:host(:first-of-type)::before{border-left-color:transparent}:host(.segment-button-disabled){opacity:0.3}::slotted(ion-icon){font-size:24px}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:2px;margin-inline-end:2px}.segment-button-indicator{-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;left:0;right:0;top:0;bottom:0}.segment-button-indicator-background{border-radius:var(--border-radius);background:var(--indicator-color)}.segment-button-indicator-background{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked)::before,:host(.segment-button-after-checked)::before{opacity:0}:host(.segment-button-checked){z-index:-1}:host(.segment-button-activated){--indicator-transform:scale(0.95)}:host(.ion-focused) .button-native{opacity:0.7}@media (any-hover: hover){:host(:hover) .button-native{opacity:0.5}:host(.segment-button-checked:hover) .button-native{opacity:1}}:host(.in-segment-color){background:none;color:var(--ion-text-color, #000)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff)))}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native,:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-text-color, #000)}}:host(.in-toolbar:not(.in-segment-color)){--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, var(--ion-toolbar-color), initial);--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-toolbar-color), initial);--indicator-color:var(--ion-toolbar-segment-indicator-color, var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff))))}:host(.in-toolbar-color) .segment-button-indicator-background{background:var(--ion-color-contrast)}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color):hover) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color):hover) .button-native{color:var(--ion-color-base)}}',md:':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:var(--color-checked);--background-focused:var(--color-checked);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--color-checked:var(--ion-color-primary, #0054e9);--indicator-box-shadow:none;--indicator-color:var(--color-checked);--indicator-height:2px;--indicator-transition:transform 250ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--padding-top:0;--padding-end:16px;--padding-bottom:0;--padding-start:16px;--transition:color 0.15s linear 0s, opacity 0.15s linear 0s;min-width:90px;min-height:48px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);font-size:14px;font-weight:500;letter-spacing:0.06em;line-height:40px;text-transform:uppercase}:host(.segment-button-disabled){opacity:0.3}:host(.in-segment-color){background:none;color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color) ion-ripple-effect{color:var(--ion-color-base)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked) .button-native{color:var(--ion-color-base)}:host(.in-segment-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color:hover) .button-native::after{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-segment-color)){--background:var(--ion-toolbar-segment-background, none);--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6));--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-color-primary, #0054e9));--indicator-color:var(--ion-toolbar-segment-color-checked, var(--color-checked))}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:rgba(var(--ion-color-contrast-rgb), 0.6)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color)) .button-native::after{background:var(--ion-color-contrast)}}::slotted(ion-icon){margin-top:12px;margin-bottom:12px;font-size:24px}::slotted(ion-label){margin-top:12px;margin-bottom:12px}:host(.segment-button-layout-icon-top) ::slotted(ion-label),:host(.segment-button-layout-icon-bottom) ::slotted(ion-icon){margin-top:0}:host(.segment-button-layout-icon-top) ::slotted(ion-icon),:host(.segment-button-layout-icon-bottom) ::slotted(ion-label){margin-bottom:0}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}:host(.segment-button-has-icon-only) ::slotted(ion-icon){margin-top:12px;margin-bottom:12px}:host(.segment-button-has-label-only) ::slotted(ion-label){margin-top:12px;margin-bottom:12px}.segment-button-indicator{left:0;right:0;bottom:0}.segment-button-indicator-background{background:var(--indicator-color)}:host(.in-toolbar:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-toolbar-segment-indicator-color, var(--indicator-color))}:host(.in-toolbar-color:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-color-contrast)}'}}},[33,"ion-segment-button",{disabled:[1028],layout:[1],type:[1],value:[8],checked:[32],setFocus:[64]},void 0,{value:["valueChanged"]}]),fu=function vh(){typeof customElements>"u"||["ion-segment-button","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-segment-button":customElements.get(_)||customElements.define(_,Wl);break;case"ion-ripple-effect":customElements.get(_)||Va()}})},z0=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inputId="ion-selopt-"+v++,this.disabled=!1,this.value=void 0}render(){return(0,Y.h)(Y.xr,{key:"ba5a9c695c53fe0802af11a49f4305a9b8f71773",role:"option",id:this.inputId,class:(0,ht.b)(this)})}get el(){return this}static get style(){return":host{display:none}"}},[1,"ion-select-option",{disabled:[4],value:[8]}]);let v=0;const b=function r(){typeof customElements>"u"||["ion-select-option"].forEach(_=>{"ion-select-option"===_&&(customElements.get(_)||customElements.define(_,z0))})};var M=_e(5680);const R=B=>{if(void 0===Rt.d||B===M.a.None||void 0===B)return null;const _=Rt.d.querySelector("ion-app");return null!=_?_:Rt.d.body},N=B=>{const _=R(B);return null===_?0:_.clientHeight},H=function(){var B=(0,qe.A)(function*(_){let k,D,q,ce;const De=function(){var Ii=(0,qe.A)(function*(){const oo=yield M.K.getResizeMode(),ji=void 0===oo?void 0:oo.mode;k=()=>{void 0===ce&&(ce=N(ji)),q=!0,dt(q,ji)},D=()=>{q=!1,dt(q,ji)},null==Rt.w||Rt.w.addEventListener("keyboardWillShow",k),null==Rt.w||Rt.w.addEventListener("keyboardWillHide",D)});return function(){return Ii.apply(this,arguments)}}(),dt=(Ii,oo)=>{_&&_(Ii,jt(oo))},jt=Ii=>{if(0===ce||ce===N(Ii))return;const oo=R(Ii);return null!==oo?new Promise(ji=>{const Do=new ResizeObserver(()=>{oo.clientHeight===ce&&(Do.disconnect(),ji())});Do.observe(oo)}):void 0};return yield De(),{init:De,destroy:()=>{null==Rt.w||Rt.w.removeEventListener("keyboardWillShow",k),null==Rt.w||Rt.w.removeEventListener("keyboardWillHide",D),k=D=void 0},isKeyboardVisible:()=>q}});return function(k){return B.apply(this,arguments)}}(),Pe=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=(0,Y.lh)(this,"ionTabBarChanged",7),this.ionTabBarLoaded=(0,Y.lh)(this,"ionTabBarLoaded",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){void 0!==this.selectedTab&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}connectedCallback(){var _=this;return(0,qe.A)(function*(){_.keyboardCtrl=yield H(function(){var k=(0,qe.A)(function*(D,q){!1===D&&void 0!==q&&(yield q),_.keyboardVisible=D});return function(D,q){return k.apply(this,arguments)}}())})()}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}componentDidLoad(){this.ionTabBarLoaded.emit()}render(){const{color:_,translucent:k,keyboardVisible:D}=this,q=(0,ht.b)(this),ce=D&&"top"!==this.el.getAttribute("slot");return(0,Y.h)(Y.xr,{key:"3a8595dd83f89e8319471a7a7f9f64b2565b384c",role:"tablist","aria-hidden":ce?"true":null,class:Hr(_,{[q]:!0,"tab-bar-translucent":k,"tab-bar-hidden":ce})},(0,Y.h)("slot",{key:"8b65eceb922f6abfa15f41046261586fb94b981f"}))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, var(--ion-text-color-step-400, #666666)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",md:":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.07)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, var(--ion-text-color-step-350, #595959)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:56px}"}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]},void 0,{selectedTab:["selectedTabChanged"]}]),Je=function Fe(){typeof customElements>"u"||["ion-tab-bar"].forEach(_=>{"ion-tab-bar"===_&&(customElements.get(_)||customElements.define(_,Pe))})},Vt=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=(0,Y.lh)(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=_=>{("Enter"===_.key||" "===_.key)&&this.selectTab(_)},this.onClick=_=>{this.selectTab(_)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(_){const k=_.target,D=this.el.parentElement;(_.composedPath().includes(D)||null!=k&&k.contains(this.el))&&(this.selected=this.tab===_.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},(0,At.d)(this.el,["aria-label"])),void 0===this.layout&&(this.layout=ht.c.get("tabButtonLayout","icon-top"))}selectTab(_){void 0!==this.tab&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),_.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:_,hasIcon:k,hasLabel:D,href:q,rel:ce,target:De,layout:dt,selected:jt,tab:bn,inheritedAttributes:fi}=this,Ii=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"4b528ce31f67e10ad849e0c99bd034bba675c227",onClick:this.onClick,onKeyup:this.onKeyUp,id:void 0!==bn?`tab-button-${bn}`:null,class:{[Ii]:!0,"tab-selected":jt,"tab-disabled":_,"tab-has-label":D,"tab-has-icon":k,"tab-has-label-only":D&&!k,"tab-has-icon-only":k&&!D,[`tab-layout-${dt}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},(0,Y.h)("a",Object.assign({key:"0da8784b1b243ffaaaf04dd7adb55d6881ed0c08"},{download:this.download,href:q,rel:ce,target:De},{class:"button-native",part:"native",role:"tab","aria-selected":jt?"true":null,"aria-disabled":_?"true":null,tabindex:_?"-1":void 0},fi),(0,Y.h)("span",{key:"2c628e8f1ebc129f84876c01530468cb97d8bf3a",class:"button-inner"},(0,Y.h)("slot",{key:"8052a171d197a7de1a7eb12b091c35f73ae1ee21"})),"md"===Ii&&(0,Y.h)("ion-ripple-effect",{key:"4186bdb5ed045ec16f495a14fa30ac864c576227",type:"unbounded"})))}get el(){return this}static get style(){return{ios:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:24px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){font-size:30px}',md:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}'}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]),yn=function en(){typeof customElements>"u"||["ion-tab-button","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-tab-button":customElements.get(_)||customElements.define(_,Vt);break;case"ion-ripple-effect":customElements.get(_)||Va()}})},Sn=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"4b76333b1ea5cab134b9dc1f5670c0d5a253fc32",class:Hr(this.color,{[_]:!0})},(0,Y.h)("slot",{key:"3dee5f16bc58b3d92547d910bd4f441a00ce2039"}))}static get style(){return":host(.ion-color){color:var(--ion-color-base)}"}},[1,"ion-text",{color:[513]}]),gn=function ci(){typeof customElements>"u"||["ion-text"].forEach(_=>{"ion-text"===_&&(customElements.get(_)||customElements.define(_,Sn))})},ro=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return(0,Y.h)(Y.xr,{key:"ea55000055f941b0c79561e8934be6242ec8e114",class:(0,ht.b)(this)},(0,Y.h)("slot",{key:"a4f934f442797f5c66a77e0ef8920fdd07c204f2"}))}static get style(){return":host{--size:48px;--border-radius:0;border-radius:var(--border-radius);display:block;width:var(--size);height:var(--size)}::slotted(ion-img),::slotted(img){border-radius:var(--border-radius);width:100%;height:100%;-o-object-fit:cover;object-fit:cover;overflow:hidden}"}},[1,"ion-thumbnail"]),j=function te(){typeof customElements>"u"||["ion-thumbnail"].forEach(_=>{"ion-thumbnail"===_&&(customElements.get(_)||customElements.define(_,ro))})},hn=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const _=this.getSize();this.ionStyle.emit({[`title-${_}`]:!0})}getSize(){return void 0!==this.size?this.size:"default"}render(){const _=(0,ht.b)(this),k=this.getSize();return(0,Y.h)(Y.xr,{key:"5a58dc437a6f4257244bbdd7e9a682a17d8c9a6b",class:Hr(this.color,{[_]:!0,[`title-${k}`]:!0,"title-rtl":"rtl"===document.dir})},(0,Y.h)("div",{key:"58682ea7b8f47a08adfad419b5c76b34784c6501",class:"toolbar-title"},(0,Y.h)("slot",{key:"8a9248534e4c3076f5e2dfda38ef86069796851c"})))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:min(1.0625rem, 20.4px);font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host{inset-inline-start:0}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:min(0.8125rem, 23.4px);font-weight:normal}:host(.title-large){-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:2px;padding-bottom:4px;-webkit-transform-origin:left center;transform-origin:left center;position:static;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:min(2.125rem, 61.2px);font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000);font-family:var(--ion-font-family)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit;width:auto}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large:dir(rtl)) .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",md:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:1.25rem;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:0.9375rem;font-weight:normal}"}}},[33,"ion-title",{color:[513],size:[1]},void 0,{size:["sizeChanged"]}]),Yi=function Qn(){typeof customElements>"u"||["ion-title"].forEach(_=>{"ion-title"===_&&(customElements.get(_)||customElements.define(_,hn))})};const $r=(B,_)=>Math.floor(B/2-_/2),is=(B,_)=>{const k=(0,mt.c)(),D=(0,mt.c)(),{position:q,top:ce,bottom:De}=_,jt=(0,At.g)(B).querySelector(".toast-wrapper");switch(D.addElement(jt),q){case"top":D.fromTo("transform","translateY(-100%)",`translateY(${ce})`);break;case"middle":const bn=$r(B.clientHeight,jt.clientHeight);jt.style.top=`${bn}px`,D.fromTo("opacity",.01,1);break;default:D.fromTo("transform","translateY(100%)",`translateY(${De})`)}return k.easing("cubic-bezier(.155,1.105,.295,1.12)").duration(400).addAnimation(D)},tl=(B,_)=>{const k=(0,mt.c)(),D=(0,mt.c)(),{position:q,top:ce,bottom:De}=_,jt=(0,At.g)(B).querySelector(".toast-wrapper");switch(D.addElement(jt),q){case"top":D.fromTo("transform",`translateY(${ce})`,"translateY(-100%)");break;case"middle":D.fromTo("opacity",.99,0);break;default:D.fromTo("transform",`translateY(${De})`,"translateY(100%)")}return k.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(D)},Ds=(B,_)=>{const k=(0,mt.c)(),D=(0,mt.c)(),{position:q,top:ce,bottom:De}=_,jt=(0,At.g)(B).querySelector(".toast-wrapper");switch(D.addElement(jt),q){case"top":jt.style.setProperty("transform",`translateY(${ce})`),D.fromTo("opacity",.01,1);break;case"middle":const bn=$r(B.clientHeight,jt.clientHeight);jt.style.top=`${bn}px`,D.fromTo("opacity",.01,1);break;default:jt.style.setProperty("transform",`translateY(${De})`),D.fromTo("opacity",.01,1)}return k.easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation(D)},os=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),q=(0,At.g)(B).querySelector(".toast-wrapper");return k.addElement(q).fromTo("opacity",.99,0),_.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(k)},ll=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=(0,Y.lh)(this,"ionToastDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionToastWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionToastWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionToastDidDismiss",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.delegateController=Gs(this),this.lockController=xn(),this.triggerController=ni(),this.customHTMLEnabled=ht.c.get("innerHTMLTemplatesEnabled",!1),this.presented=!1,this.dispatchCancelHandler=_=>{if(Qr(_.detail.role)){const D=this.getButtons().find(q=>"cancel"===q.role);this.callButtonHandler(D)}},this.createSwipeGesture=_=>{(this.gesture=((B,_,k)=>{const D=Y.L2.isTesting?document.createElement("div"):(0,At.g)(B).querySelector(".toast-wrapper"),q=B.clientHeight,ce=D.getBoundingClientRect();let De=0;const jt="middle"===B.position?.5:0,bn="top"===B.position?-1:1,fi=$r(q,ce.height),Ii=[{offset:0,transform:`translateY(-${fi+ce.height}px)`},{offset:.5,transform:"translateY(0px)"},{offset:1,transform:`translateY(${fi+ce.height}px)`}],oo=(0,mt.c)("toast-swipe-to-dismiss-animation").addElement(D).duration(100);switch(B.position){case"middle":De=q+ce.height,oo.keyframes(Ii),oo.progressStart(!0,.5);break;case"top":De=ce.bottom,oo.keyframes([{offset:0,transform:`translateY(${_.top})`},{offset:1,transform:"translateY(-100%)"}]),oo.progressStart(!0,0);break;default:De=q-ce.top,oo.keyframes([{offset:0,transform:`translateY(${_.bottom})`},{offset:1,transform:"translateY(100%)"}]),oo.progressStart(!0,0)}const ji=ls=>ls*bn/De,wr=(0,Ye.createGesture)({el:D,gestureName:"toast-swipe-to-dismiss",gesturePriority:39,direction:"y",onMove:ls=>{const ys=jt+ji(ls.deltaY);oo.progressStep(ys)},onEnd:ls=>{const ys=ls.velocityY,Ur=(ls.deltaY+1e3*ys)/De*bn;wr.enable(!1);let xs=!0,Is=1,Us=0,fl=0;if("middle"===B.position){xs=Ur>=.25||Ur<=-.25,Is=1,Us=0;const Dl=D.getBoundingClientRect(),Zl=Dl.top-fi,nd=(fi+Dl.height)*(ls.deltaY<=0?-1:1);oo.keyframes([{offset:0,transform:`translateY(${Zl}px)`},{offset:1,transform:`translateY(${xs?`${nd}px`:"0px"})`}]),fl=nd-Zl}else xs=Ur>=.5,Is=xs?1:0,Us=ji(ls.deltaY),fl=(xs?1-Us:Us)*De;const Ec=Math.min(Math.abs(fl)/Math.abs(ys),200);oo.onFinish(()=>{xs?(k(),oo.destroy()):("middle"===B.position?oo.keyframes(Ii).progressStart(!0,.5):oo.progressStart(!0,0),wr.enable(!0))},{oneTimeCallback:!0}).progressEnd(Is,Us,Ec)}});return wr})(this.el,_,()=>{this.dismiss(void 0,_r)})).enable(!0)},this.destroySwipeGesture=()=>{const{gesture:_}=this;void 0!==_&&(_.destroy(),this.gesture=void 0)},this.prefersSwipeGesture=()=>{const{swipeGesture:_}=this;return"vertical"===_},this.revealContentToScreenReader=!1,this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.color=void 0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.duration=ht.c.getNumber("toastDuration",0),this.header=void 0,this.layout="baseline",this.message=void 0,this.keyboardClose=!1,this.position="bottom",this.positionAnchor=void 0,this.buttons=void 0,this.translucent=!1,this.animated=!0,this.icon=void 0,this.htmlAttributes=void 0,this.swipeGesture=void 0,this.isOpen=!1,this.trigger=void 0}swipeGestureChanged(){this.destroySwipeGesture(),this.presented&&this.prefersSwipeGesture()&&this.createSwipeGesture(this.lastPresentedPosition)}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}triggerChanged(){const{trigger:_,el:k,triggerController:D}=this;_&&D.addClickListener(k,_)}connectedCallback(){rs(this.el),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){$i(this.el)}componentDidLoad(){!0===this.isOpen&&(0,At.r)(()=>this.present()),this.triggerChanged()}present(){var _=this;return(0,qe.A)(function*(){const k=yield _.lockController.lock();yield _.delegateController.attachViewToDom();const{el:D,position:q}=_,De=function yr(B,_,k,D){let q;if(q="md"===k?"top"===B?8:-8:"top"===B?10:-10,_&&Rt.w){!function Sr(B,_){null===B.offsetParent&&(0,Me.p)("The positionAnchor element for ion-toast was found in the DOM, but appears to be hidden. This may lead to unexpected positioning of the toast.",_)}(_,D);const ce=_.getBoundingClientRect();return"top"===B?q+=ce.bottom:"bottom"===B&&(q-=Rt.w.innerHeight-ce.top),{top:`${q}px`,bottom:`${q}px`}}return{top:`calc(${q}px + var(--ion-safe-area-top, 0px))`,bottom:`calc(${q}px - var(--ion-safe-area-bottom, 0px))`}}(q,_.getAnchorElement(),(0,ht.b)(_),D);_.lastPresentedPosition=De,yield Jo(_,"toastEnter",is,Ds,{position:q,top:De.top,bottom:De.bottom}),_.revealContentToScreenReader=!0,_.duration>0&&(_.durationTimeout=setTimeout(()=>_.dismiss(void 0,"timeout"),_.duration)),_.prefersSwipeGesture()&&_.createSwipeGesture(De),k()})()}dismiss(_,k){var D=this;return(0,qe.A)(function*(){var q,ce;const De=yield D.lockController.lock(),{durationTimeout:dt,position:jt,lastPresentedPosition:bn}=D;dt&&clearTimeout(dt);const fi=yield ti(D,_,k,"toastLeave",tl,os,{position:jt,top:null!==(q=null==bn?void 0:bn.top)&&void 0!==q?q:"",bottom:null!==(ce=null==bn?void 0:bn.bottom)&&void 0!==ce?ce:""});return fi&&(D.delegateController.removeViewFromDom(),D.revealContentToScreenReader=!1),D.lastPresentedPosition=void 0,D.destroySwipeGesture(),De(),fi})()}onDidDismiss(){return Or(this.el,"ionToastDidDismiss")}onWillDismiss(){return Or(this.el,"ionToastWillDismiss")}getButtons(){return this.buttons?this.buttons.map(k=>"string"==typeof k?{text:k}:k):[]}getAnchorElement(){const{position:_,positionAnchor:k,el:D}=this;if(void 0!==k){if("middle"===_&&void 0!==k)return void(0,Me.p)('The positionAnchor property is ignored when using position="middle".',this.el);if("string"==typeof k){const q=document.getElementById(k);return null===q?void(0,Me.p)(`An anchor element with an ID of "${k}" was not found in the DOM.`,D):q}if(k instanceof Y.wt)return k;(0,Me.p)("Invalid positionAnchor value:",k,D)}}buttonClick(_){var k=this;return(0,qe.A)(function*(){const D=_.role;return Qr(D)||(yield k.callButtonHandler(_))?k.dismiss(void 0,D):Promise.resolve()})()}callButtonHandler(_){return(0,qe.A)(function*(){if(null!=_&&_.handler)try{if(!1===(yield Nr(_.handler)))return!1}catch(k){console.error(k)}return!0})()}renderButtons(_,k){if(0===_.length)return;const D=(0,ht.b)(this);return(0,Y.h)("div",{class:{"toast-button-group":!0,[`toast-button-group-${k}`]:!0}},_.map(ce=>(0,Y.h)("button",Object.assign({},ce.htmlAttributes,{type:"button",class:ia(ce),tabIndex:0,onClick:()=>this.buttonClick(ce),part:ba(ce)}),(0,Y.h)("div",{class:"toast-button-inner"},ce.icon&&(0,Y.h)("ion-icon",{"aria-hidden":"true",icon:ce.icon,slot:void 0===ce.text?"icon-only":void 0,class:"toast-button-icon"}),ce.text),"md"===D&&(0,Y.h)("ion-ripple-effect",{type:void 0!==ce.icon&&void 0===ce.text?"unbounded":"bounded"}))))}renderToastMessage(_,k=null){const{customHTMLEnabled:D,message:q}=this;return D?(0,Y.h)("div",{key:_,"aria-hidden":k,class:"toast-message",part:"message",innerHTML:Nn(q)}):(0,Y.h)("div",{key:_,"aria-hidden":k,class:"toast-message",part:"message"},q)}renderHeader(_,k=null){return(0,Y.h)("div",{key:_,class:"toast-header","aria-hidden":k,part:"header"},this.header)}render(){const{layout:_,el:k,revealContentToScreenReader:D,header:q,message:ce}=this,De=this.getButtons(),dt=De.filter(Ii=>"start"===Ii.side),jt=De.filter(Ii=>"start"!==Ii.side),bn=(0,ht.b)(this),fi={"toast-wrapper":!0,[`toast-${this.position}`]:!0,[`toast-layout-${_}`]:!0};return"stacked"===_&&dt.length>0&&jt.length>0&&(0,Me.p)("This toast is using start and end buttons with the stacked toast layout. We recommend following the best practice of using either start or end buttons with the stacked toast layout.",k),(0,Y.h)(Y.xr,Object.assign({key:"da148788489146a20b42023fdc6401e53c044767",tabindex:"-1"},this.htmlAttributes,{style:{zIndex:`${6e4+this.overlayIndex}`},class:Hr(this.color,Object.assign(Object.assign({[bn]:!0},ei(this.cssClass)),{"overlay-hidden":!0,"toast-translucent":this.translucent})),onIonToastWillDismiss:this.dispatchCancelHandler}),(0,Y.h)("div",{key:"ab0a4d783aa43ba961492b3eb8beb60a38153057",class:fi},(0,Y.h)("div",{key:"83e49027fd1ca6553d6910ff91befeea43576f3c",class:"toast-container",part:"container"},this.renderButtons(dt,"start"),void 0!==this.icon&&(0,Y.h)("ion-icon",{key:"025cb4b6b170a89548969a25bcce4ab7a3817898",class:"toast-icon",part:"icon",icon:this.icon,lazy:!1,"aria-hidden":"true"}),(0,Y.h)("div",{key:"b811b4e1cbc1528c2cfb57898f5615692120f840",class:"toast-content",role:"status","aria-atomic":"true","aria-live":"polite"},!D&&void 0!==q&&this.renderHeader("oldHeader","true"),!D&&void 0!==ce&&this.renderToastMessage("oldMessage","true"),D&&void 0!==q&&this.renderHeader("header"),D&&void 0!==ce&&this.renderToastMessage("header")),this.renderButtons(jt,"end"))))}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}:host{inset-inline-start:0}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:auto;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-radius:14px;--button-color:var(--ion-color-primary, #0054e9);--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--max-width:700px;--max-height:478px;--start:10px;--end:10px;font-size:clamp(14px, 0.875rem, 43.4px)}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;z-index:10}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.toast-translucent) .toast-wrapper{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}:host(.ion-color.toast-translucent) .toast-wrapper{background:rgba(var(--ion-color-base-rgb), 0.8)}}.toast-wrapper.toast-middle{opacity:0.01}.toast-content{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:15px;padding-bottom:15px}.toast-header{margin-bottom:2px;font-weight:500}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;min-height:44px;-webkit-transition:background-color, opacity 100ms linear;transition:background-color, opacity 100ms linear;border:0;background-color:transparent;font-family:var(--ion-font-family);font-size:clamp(17px, 1.0625rem, 21.998px);font-weight:500;overflow:hidden}.toast-button.ion-activated{opacity:0.4}@media (any-hover: hover){.toast-button:hover{opacity:0.6}}",md:":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}:host{inset-inline-start:0}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:auto;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-800, var(--ion-background-color-step-800, #333333));--border-radius:4px;--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--button-color:var(--ion-color-primary, #0054e9);--color:var(--ion-color-step-50, var(--ion-text-color-step-950, #f2f2f2));--max-width:700px;--start:8px;--end:8px;font-size:0.875rem}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;opacity:0.01;z-index:10}.toast-content{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:14px;padding-bottom:14px}.toast-header{margin-bottom:2px;font-weight:500;line-height:1.25rem}.toast-message{line-height:1.25rem}.toast-layout-baseline .toast-button-group-start{-webkit-margin-start:8px;margin-inline-start:8px}.toast-layout-stacked .toast-button-group-start{-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px}.toast-layout-baseline .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px}.toast-layout-stacked .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px;margin-bottom:8px}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;font-family:var(--ion-font-family);font-size:0.875rem;font-weight:500;letter-spacing:0.84px;text-transform:uppercase;overflow:hidden}.toast-button-cancel{color:var(--ion-color-step-100, var(--ion-text-color-step-900, #e6e6e6))}.toast-button-icon-only{border-radius:50%;-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:9px;padding-bottom:9px;width:36px;height:36px}@media (any-hover: hover){.toast-button:hover{background-color:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.08)}.toast-button-cancel:hover{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.08)}}"}}},[33,"ion-toast",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],color:[513],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],duration:[2],header:[1],layout:[1],message:[1],keyboardClose:[4,"keyboard-close"],position:[1],positionAnchor:[1,"position-anchor"],buttons:[16],translucent:[4],animated:[4],icon:[1],htmlAttributes:[16],swipeGesture:[1,"swipe-gesture"],isOpen:[4,"is-open"],trigger:[1],revealContentToScreenReader:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),ia=B=>({"toast-button":!0,"toast-button-icon-only":void 0!==B.icon&&void 0===B.text,[`toast-button-${B.role}`]:void 0!==B.role,"ion-focusable":!0,"ion-activatable":!0}),ba=B=>Qr(B.role)?"button cancel":"button",Iu=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const _=Array.from(this.el.querySelectorAll("ion-buttons")),k=_.find(ce=>"start"===ce.slot);k&&k.classList.add("buttons-first-slot");const D=_.reverse(),q=D.find(ce=>"end"===ce.slot)||D.find(ce=>"primary"===ce.slot)||D.find(ce=>"secondary"===ce.slot);q&&q.classList.add("buttons-last-slot")}childrenStyle(_){_.stopPropagation();const k=_.target.tagName,D=_.detail,q={},ce=this.childrenStyles.get(k)||{};let De=!1;Object.keys(D).forEach(dt=>{const jt=`toolbar-${dt}`,bn=D[dt];bn!==ce[jt]&&(De=!0),bn&&(q[jt]=!0)}),De&&(this.childrenStyles.set(k,q),(0,Y.$x)(this))}render(){const _=(0,ht.b)(this),k={};return this.childrenStyles.forEach(D=>{Object.assign(k,D)}),(0,Y.h)(Y.xr,{key:"4bb3a55001408a3bdf033af76b9196cb96c07c09",class:Object.assign(Object.assign({},k),Hr(this.color,{[_]:!0,"in-toolbar":vs("ion-toolbar",this.el)}))},(0,Y.h)("div",{key:"0891db157d6e028c6d03696f13fb510ea91b0296",class:"toolbar-background"}),(0,Y.h)("div",{key:"95fbc870d808f74af4bb18cd8f8ec8c7828a9e0b",class:"toolbar-container"},(0,Y.h)("slot",{key:"84d4a9644660fe00ca085055ca8d12f3647531ad",name:"start"}),(0,Y.h)("slot",{key:"fd361dc9c9979f59aed2fedcf94629506fae62b0",name:"secondary"}),(0,Y.h)("div",{key:"54d2b28616a4627c55766f66dc453707752758a6",class:"toolbar-content"},(0,Y.h)("slot",{key:"8f65e0830cce7135640b90eb694e282cb7e5efd2"})),(0,Y.h)("slot",{key:"c78be11a207c8674f222543646398636956087e6",name:"primary"}),(0,Y.h)("slot",{key:"ab25e1601ccaa8cb0d81921b849bcb7402aa7826",name:"end"})))}get el(){return this}static get style(){return{ios:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",md:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, #c1c4cd))));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}"}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]),O0=function Lu(){typeof customElements>"u"||["ion-toolbar"].forEach(_=>{"ion-toolbar"===_&&(customElements.get(_)||customElements.define(_,Iu))})};var Ka=_e(4341);const y1=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.inputId="ion-cb-"+Mo++,this.inheritedAttributes={},this.setChecked=_=>{const k=this.checked=_;this.ionChange.emit({checked:k,value:this.value})},this.toggleChecked=_=>{_.preventDefault(),this.setFocus(),this.setChecked(!this.checked),this.indeterminate=!1},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.onClick=_=>{this.disabled||this.toggleChecked(_)},this.color=void 0,this.name=this.inputId,this.checked=!1,this.indeterminate=!1,this.disabled=!1,this.value="on",this.labelPlacement="start",this.justify="space-between",this.alignment="center"}componentWillLoad(){this.inheritedAttributes=Object.assign({},(0,At.i)(this.el))}setFocus(){this.focusEl&&this.focusEl.focus()}render(){const{color:_,checked:k,disabled:D,el:q,getSVGPath:ce,indeterminate:De,inheritedAttributes:dt,inputId:jt,justify:bn,labelPlacement:fi,name:Ii,value:oo,alignment:ji}=this,Io=(0,ht.b)(this),Do=ce(Io,De);return(0,At.e)(!0,q,Ii,k?oo:"",D),(0,Y.h)(Y.xr,{key:"0ac95890562c7f035704c40959c69f8c8ca4bc9f","aria-checked":De?"mixed":`${k}`,class:Hr(_,{[Io]:!0,"in-item":vs("ion-item",q),"checkbox-checked":k,"checkbox-disabled":D,"checkbox-indeterminate":De,interactive:!0,[`checkbox-justify-${bn}`]:!0,[`checkbox-alignment-${ji}`]:!0,[`checkbox-label-placement-${fi}`]:!0}),onClick:this.onClick},(0,Y.h)("label",{key:"3f9f7c8383dded8f7997086b25399d052df76b5c",class:"checkbox-wrapper"},(0,Y.h)("input",Object.assign({key:"6fb11d06c424c289357d5d7c1a4d1b967be231d0",type:"checkbox",checked:!!k||void 0,disabled:D,id:jt,onChange:this.toggleChecked,onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur(),ref:wr=>this.focusEl=wr},dt)),(0,Y.h)("div",{key:"f577a272e5e3f9f1852fc95e40466c80b76309c7",class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":""===q.textContent},part:"label"},(0,Y.h)("slot",{key:"7c9b0b4513e797a1acdf55a5f286563e5f397e9c"})),(0,Y.h)("div",{key:"e47c50a078b8d761ddc5efcb9a9635281b5818f6",class:"native-wrapper"},(0,Y.h)("svg",{key:"4dca47179ae15e9094e01c799ef4ed25fbb0d840",class:"checkbox-icon",viewBox:"0 0 24 24",part:"container"},Do))))}getSVGPath(_,k){let D=(0,Y.h)("path",k?{d:"M6 12L18 12",part:"mark"}:{d:"M5.9,12.5l3.8,3.8l8.8-8.8",part:"mark"});return"md"===_&&(D=(0,Y.h)("path",k?{d:"M2 12H22",part:"mark"}:{d:"M1.73,12.91 8.1,19.28 22.79,4.59",part:"mark"})),D}get el(){return this}static get style(){return{ios:":host{--checkbox-background-checked:var(--ion-color-primary, #0054e9);--border-color-checked:var(--ion-color-primary, #0054e9);--checkmark-color:var(--ion-color-primary-contrast, #fff);--transition:none;display:inline-block;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}:host(.ion-color){--checkbox-background-checked:var(--ion-color-base);--border-color-checked:var(--ion-color-base);--checkmark-color:var(--ion-color-contrast)}.checkbox-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.checkbox-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.checkbox-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.checkbox-icon{border-radius:var(--border-radius);position:relative;width:var(--size);height:var(--size);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--checkbox-background);-webkit-box-sizing:border-box;box-sizing:border-box}.checkbox-icon path{fill:none;stroke:var(--checkmark-color);stroke-width:var(--checkmark-width);opacity:0}:host(.checkbox-justify-space-between) .checkbox-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.checkbox-justify-start) .checkbox-wrapper{-ms-flex-pack:start;justify-content:start}:host(.checkbox-justify-end) .checkbox-wrapper{-ms-flex-pack:end;justify-content:end}:host(.checkbox-alignment-start) .checkbox-wrapper{-ms-flex-align:start;align-items:start}:host(.checkbox-alignment-center) .checkbox-wrapper{-ms-flex-align:center;align-items:center}:host(.checkbox-label-placement-start) .checkbox-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.checkbox-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-end) .checkbox-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.checkbox-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.checkbox-label-placement-stacked) .checkbox-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.checkbox-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host(.checkbox-checked) .checkbox-icon,:host(.checkbox-indeterminate) .checkbox-icon{border-color:var(--border-color-checked);background:var(--checkbox-background-checked)}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{opacity:1}:host(.checkbox-disabled){pointer-events:none}:host{--border-radius:50%;--border-width:0.125rem;--border-style:solid;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.23);--checkbox-background:var(--ion-item-background, var(--ion-background-color, #fff));--size:min(1.375rem, 55.836px);--checkmark-width:1.5px}:host(.checkbox-disabled){opacity:0.3}",md:":host{--checkbox-background-checked:var(--ion-color-primary, #0054e9);--border-color-checked:var(--ion-color-primary, #0054e9);--checkmark-color:var(--ion-color-primary-contrast, #fff);--transition:none;display:inline-block;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}:host(.ion-color){--checkbox-background-checked:var(--ion-color-base);--border-color-checked:var(--ion-color-base);--checkmark-color:var(--ion-color-contrast)}.checkbox-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.checkbox-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.checkbox-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.checkbox-icon{border-radius:var(--border-radius);position:relative;width:var(--size);height:var(--size);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--checkbox-background);-webkit-box-sizing:border-box;box-sizing:border-box}.checkbox-icon path{fill:none;stroke:var(--checkmark-color);stroke-width:var(--checkmark-width);opacity:0}:host(.checkbox-justify-space-between) .checkbox-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.checkbox-justify-start) .checkbox-wrapper{-ms-flex-pack:start;justify-content:start}:host(.checkbox-justify-end) .checkbox-wrapper{-ms-flex-pack:end;justify-content:end}:host(.checkbox-alignment-start) .checkbox-wrapper{-ms-flex-align:start;align-items:start}:host(.checkbox-alignment-center) .checkbox-wrapper{-ms-flex-align:center;align-items:center}:host(.checkbox-label-placement-start) .checkbox-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.checkbox-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-end) .checkbox-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.checkbox-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.checkbox-label-placement-stacked) .checkbox-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.checkbox-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host(.checkbox-checked) .checkbox-icon,:host(.checkbox-indeterminate) .checkbox-icon{border-color:var(--border-color-checked);background:var(--checkbox-background-checked)}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{opacity:1}:host(.checkbox-disabled){pointer-events:none}:host{--border-radius:calc(var(--size) * .125);--border-width:2px;--border-style:solid;--border-color:rgb(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--checkmark-width:3;--checkbox-background:var(--ion-item-background, var(--ion-background-color, #fff));--transition:background 180ms cubic-bezier(0.4, 0, 0.2, 1);--size:18px}.checkbox-icon path{stroke-dasharray:30;stroke-dashoffset:30}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{stroke-dashoffset:0;-webkit-transition:stroke-dashoffset 90ms linear 90ms;transition:stroke-dashoffset 90ms linear 90ms}:host(.checkbox-disabled) .label-text-wrapper{opacity:0.38}:host(.checkbox-disabled) .native-wrapper{opacity:0.63}"}}},[33,"ion-checkbox",{color:[513],name:[1],checked:[1028],indeterminate:[1028],disabled:[4],value:[8],labelPlacement:[1,"label-placement"],justify:[1],alignment:[1]}]);let Mo=0;function ua(){typeof customElements>"u"||["ion-checkbox"].forEach(_=>{"ion-checkbox"===_&&(customElements.get(_)||customElements.define(_,y1))})}const t1=ua;_e(5498);const Bf=B=>{const _=B.getTimezoneOffset();return B.setMinutes(B.getMinutes()-_),B};let pf;Bf(new Date("2022T01:00")),Bf(new Date("2022T13:00"));const ff=(B,_)=>{const k=(()=>{if(typeof window>"u")return new Map;if(!pf){const B=window;B.Ionicons=B.Ionicons||{},pf=B.Ionicons.map=B.Ionicons.map||new Map}return pf})().get(B);if(k)return k;try{return(0,Y.OX)(`svg/${B}.svg`)}catch{console.warn(`[Ionicons Warning]: Could not load icon with name "${B}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,_)}},pm=(B,_,k,D,q)=>(k="ios"===(k&&C1(k))?"ios":"md",D&&"ios"===k?B=C1(D):q&&"md"===k?B=C1(q):(!B&&_&&!wh(_)&&(B=_),dd(B)&&(B=C1(B))),dd(B)&&""!==B.trim()&&""===B.replace(/[a-z]|-|\d/gi,"")?B:null),U1=B=>dd(B)&&(B=B.trim(),wh(B))?B:null,wh=B=>B.length>0&&/(\/|\.)/.test(B),dd=B=>"string"==typeof B,C1=B=>B.toLowerCase(),u1=B=>B&&""!==B.dir?"rtl"===B.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase()),x2=B=>{if(1===B.nodeType){if("script"===B.nodeName.toLowerCase())return!1;for(let _=0;_<B.attributes.length;_++){const k=B.attributes[_].name;if(dd(k)&&0===k.toLowerCase().indexOf("on"))return!1}for(let _=0;_<B.childNodes.length;_++)if(!x2(B.childNodes[_]))return!1}return!0},k1=new Map,I2=new Map;let E2;const Wf=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=xa(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((B,_=[])=>{const k={};return _.forEach(D=>{B.hasAttribute(D)&&(null!==B.getAttribute(D)&&(k[D]=B.getAttribute(D)),B.removeAttribute(D))}),k})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(_,k,D){if(Y.L2.isBrowser&&this.lazy&&typeof window<"u"&&window.IntersectionObserver){const q=this.io=new window.IntersectionObserver(ce=>{ce[0].isIntersecting&&(q.disconnect(),this.io=void 0,D())},{rootMargin:k});q.observe(_)}else D()}loadIcon(){if(Y.L2.isBrowser&&this.isVisible){const _=(B=>{let _=U1(B.src);return _||(_=pm(B.name,B.icon,B.mode,B.ios,B.md),_?ff(_,B):B.icon&&(_=U1(B.icon),_||(_=U1(B.icon[B.mode]),_))?_:null)})(this);_&&(k1.has(_)?this.svgContent=k1.get(_):((B,_)=>{let k=I2.get(B);if(!k){if(!(typeof fetch<"u"&&typeof document<"u"))return k1.set(B,""),Promise.resolve();if((B=>B.startsWith("data:image/svg+xml"))(B)&&(B=>-1!==B.indexOf(";utf8,"))(B)){E2||(E2=new DOMParser);const q=E2.parseFromString(B,"text/html").querySelector("svg");return q&&k1.set(B,q.outerHTML),Promise.resolve()}k=fetch(B).then(D=>{if(D.ok)return D.text().then(q=>{q&&!1!==_&&(q=(B=>{const _=document.createElement("div");_.innerHTML=B;for(let D=_.childNodes.length-1;D>=0;D--)"svg"!==_.childNodes[D].nodeName.toLowerCase()&&_.removeChild(_.childNodes[D]);const k=_.firstElementChild;if(k&&"svg"===k.nodeName.toLowerCase()){const D=k.getAttribute("class")||"";if(k.setAttribute("class",(D+" s-ion-icon").trim()),x2(k))return _.innerHTML}return""})(q)),k1.set(B,q||"")});k1.set(B,"")}),I2.set(B,k)}return k})(_,this.sanitize).then(()=>this.svgContent=k1.get(_)),this.didLoadIcon=!0)}this.iconName=pm(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:_,iconName:k,inheritedAttributes:D,el:q}=this,ce=this.mode||"md",De=!!k&&(k.includes("arrow")||k.includes("chevron"))&&!1!==_,dt=_||De;return(0,Y.h)(Y.xr,Object.assign({role:"img",class:Object.assign(Object.assign({[ce]:!0},qm(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":dt,"icon-rtl":dt&&u1(q)})},D),(0,Y.h)("div",Y.L2.isBrowser&&this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),xa=()=>Y.L2.isBrowser&&typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",qm=B=>B?{"ion-color":!0,[`ion-color-${B}`]:!0}:null,Xm=function fm(){typeof customElements>"u"||["ion-icon"].forEach(_=>{"ion-icon"===_&&(customElements.get(_)||customElements.define(_,Wf))})},Nu=(B,_,k)=>{let D;const q=()=>!(void 0===_()||void 0!==B.label||null===k()),De=()=>{const jt=_();if(void 0===jt)return;if(!q())return void jt.style.removeProperty("width");const bn=k().scrollWidth;if(0===bn&&null===jt.offsetParent&&void 0!==Rt.w&&"IntersectionObserver"in Rt.w){if(void 0!==D)return;const fi=D=new IntersectionObserver(Ii=>{1===Ii[0].intersectionRatio&&(De(),fi.disconnect(),D=void 0)},{threshold:.01,root:B});fi.observe(jt)}else jt.style.setProperty("width",.75*bn+"px")};return{calculateNotchWidth:()=>{q()&&(0,At.r)(()=>{De()})},destroy:()=>{D&&(D.disconnect(),D=void 0)}}},$l=(B,_,k)=>{let D,q;if(void 0!==Rt.w&&"MutationObserver"in Rt.w){const jt=Array.isArray(_)?_:[_];D=new MutationObserver(bn=>{for(const fi of bn)for(const Ii of fi.addedNodes)if(Ii.nodeType===Node.ELEMENT_NODE&&jt.includes(Ii.slot))return k(),void(0,At.r)(()=>ce(Ii))}),D.observe(B,{childList:!0,subtree:!0})}const ce=jt=>{var bn;q&&(q.disconnect(),q=void 0),q=new MutationObserver(fi=>{k();for(const Ii of fi)for(const oo of Ii.removedNodes)oo.nodeType===Node.ELEMENT_NODE&&oo.slot===_&&dt()}),q.observe(null!==(bn=jt.parentElement)&&void 0!==bn?bn:jt,{subtree:!0,childList:!0})},dt=()=>{q&&(q.disconnect(),q=void 0)};return{destroy:()=>{D&&(D.disconnect(),D=void 0),dt()}}},l0=(B,_,k)=>{const D=null==B?0:B.toString().length,q=Op(D,_);if(void 0===k)return q;try{return k(D,_)}catch(ce){return(0,Me.a)("Exception in provided `counterFormatter`.",ce),q}},Op=(B,_)=>`${B} / ${_}`,C2=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.ionInput=(0,Y.lh)(this,"ionInput",7),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.inputId="ion-input-"+qf++,this.inheritedAttributes={},this.isComposing=!1,this.didInputClearOnEdit=!1,this.onInput=_=>{const k=_.target;k&&(this.value=k.value||""),this.emitInputChange(_)},this.onChange=_=>{this.emitValueChange(_)},this.onBlur=_=>{this.hasFocus=!1,this.focusedValue!==this.value&&this.emitValueChange(_),this.didInputClearOnEdit=!1,this.ionBlur.emit(_)},this.onFocus=_=>{this.hasFocus=!0,this.focusedValue=this.value,this.ionFocus.emit(_)},this.onKeydown=_=>{this.checkClearOnEdit(_)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=_=>{this.clearInput&&!this.readonly&&!this.disabled&&_&&(_.preventDefault(),_.stopPropagation(),this.setFocus()),this.value="",this.emitInputChange(_)},this.hasFocus=!1,this.color=void 0,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.clearInputIcon=void 0,this.clearOnEdit=void 0,this.counter=!1,this.counterFormatter=void 0,this.debounce=void 0,this.disabled=!1,this.enterkeyhint=void 0,this.errorText=void 0,this.fill=void 0,this.inputmode=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.max=void 0,this.maxlength=void 0,this.min=void 0,this.minlength=void 0,this.multiple=void 0,this.name=this.inputId,this.pattern=void 0,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.shape=void 0,this.spellcheck=!1,this.step=void 0,this.type="text",this.value=""}debounceChanged(){const{ionInput:_,debounce:k,originalIonInput:D}=this;this.ionInput=void 0===k?null!=D?D:_:(0,At.l)(_,k)}onTypeChange(){const _=this.el.querySelector("ion-input-password-toggle");_&&(_.type=this.type)}valueChanged(){const _=this.nativeInput,k=this.getValue();_&&_.value!==k&&!this.isComposing&&(_.value=k)}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},(0,At.i)(this.el)),(0,At.d)(this.el,["tabindex","title","data-form-type"]))}connectedCallback(){const{el:_}=this;this.slotMutationController=$l(_,["label","start","end"],()=>(0,Y.$x)(this)),this.notchController=Nu(_,()=>this.notchSpacerEl,()=>this.labelSlot),this.debounceChanged(),Y.L2.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){this.originalIonInput=this.ionInput,this.onTypeChange(),this.debounceChanged()}componentDidRender(){var _;null===(_=this.notchController)||void 0===_||_.calculateNotchWidth()}disconnectedCallback(){Y.L2.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}setFocus(){var _=this;return(0,qe.A)(function*(){_.nativeInput&&_.nativeInput.focus()})()}getInputElement(){var _=this;return(0,qe.A)(function*(){return _.nativeInput||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.nativeInput)})()}emitValueChange(_){const{value:k}=this,D=null==k?k:k.toString();this.focusedValue=D,this.ionChange.emit({value:D,event:_})}emitInputChange(_){const{value:k}=this,D=null==k?k:k.toString();this.ionInput.emit({value:D,event:_})}shouldClearOnEdit(){const{type:_,clearOnEdit:k}=this;return void 0===k?"password"===_:k}getValue(){return"number"==typeof this.value?this.value.toString():(this.value||"").toString()}checkClearOnEdit(_){if(!this.shouldClearOnEdit())return;const D=["Enter","Tab","Shift","Meta","Alt","Control"].includes(_.key);!this.didInputClearOnEdit&&this.hasValue()&&!D&&(this.value="",this.emitInputChange(_)),D||(this.didInputClearOnEdit=!0)}hasValue(){return this.getValue().length>0}renderHintText(){const{helperText:_,errorText:k}=this;return[(0,Y.h)("div",{class:"helper-text"},_),(0,Y.h)("div",{class:"error-text"},k)]}renderCounter(){const{counter:_,maxlength:k,counterFormatter:D,value:q}=this;if(!0===_&&void 0!==k)return(0,Y.h)("div",{class:"counter"},l0(q,k,D))}renderBottomContent(){const{counter:_,helperText:k,errorText:D,maxlength:q}=this;if(k||D||!0===_&&void 0!==q)return(0,Y.h)("div",{class:"input-bottom"},this.renderHintText(),this.renderCounter())}renderLabel(){const{label:_}=this;return(0,Y.h)("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},void 0===_?(0,Y.h)("slot",{name:"label"}):(0,Y.h)("div",{class:"label-text"},_))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return void 0!==this.label||null!==this.labelSlot}renderLabelContainer(){return"md"===(0,ht.b)(this)&&"outline"===this.fill?[(0,Y.h)("div",{class:"input-outline-container"},(0,Y.h)("div",{class:"input-outline-start"}),(0,Y.h)("div",{class:{"input-outline-notch":!0,"input-outline-notch-hidden":!this.hasLabel}},(0,Y.h)("div",{class:"notch-spacer","aria-hidden":"true",ref:D=>this.notchSpacerEl=D},this.label)),(0,Y.h)("div",{class:"input-outline-end"})),this.renderLabel()]:this.renderLabel()}render(){const{disabled:_,fill:k,readonly:D,shape:q,inputId:ce,labelPlacement:De,el:dt,hasFocus:jt,clearInputIcon:bn}=this,fi=(0,ht.b)(this),Ii=this.getValue(),oo=vs("ion-item",this.el),ji="md"===fi&&"outline"!==k&&!oo,Do=null!=bn?bn:"ios"===fi?du:vl,wr=this.hasValue(),ls=null!==dt.querySelector('[slot="start"], [slot="end"]');return(0,Y.h)(Y.xr,{key:"907ce98a82b5cfae5a08504cd79e00a2330b7444",class:Hr(this.color,{[fi]:!0,"has-value":wr,"has-focus":jt,"label-floating":"stacked"===De||"floating"===De&&(wr||jt||ls),[`input-fill-${k}`]:void 0!==k,[`input-shape-${q}`]:void 0!==q,[`input-label-placement-${De}`]:!0,"in-item":oo,"in-item-color":vs("ion-item.ion-color",this.el),"input-disabled":_})},(0,Y.h)("label",{key:"59d5bb45d2a5b828bba0ed8687a632a551e2f4d8",class:"input-wrapper",htmlFor:ce},this.renderLabelContainer(),(0,Y.h)("div",{key:"f93f129d08246d0e9a601c100d718534d6403853",class:"native-wrapper"},(0,Y.h)("slot",{key:"54eeb1a6bace662b7eb0d7e27180ea3d7e3a3729",name:"start"}),(0,Y.h)("input",Object.assign({key:"b3e0be55bc1a4a539ae3b0fdcf7fc078723cca16",class:"native-input",ref:Ur=>this.nativeInput=Ur,id:ce,disabled:_,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:D,required:this.required,spellcheck:this.spellcheck,step:this.step,type:this.type,value:Ii,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown,onCompositionstart:this.onCompositionStart,onCompositionend:this.onCompositionEnd},this.inheritedAttributes)),this.clearInput&&!D&&!_&&(0,Y.h)("button",{key:"5f6373504a6d0d074bfbf875c794d45ea2748175","aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:Ur=>{Ur.preventDefault()},onFocusin:Ur=>{Ur.stopPropagation()},onClick:this.clearTextInput},(0,Y.h)("ion-icon",{key:"230d77973aa83458ceb32bf52e3abe9bc322cfe6","aria-hidden":"true",icon:Do})),(0,Y.h)("slot",{key:"9d69ac6e8a3c4b2b303dba2478f82695d5755ed2",name:"end"})),ji&&(0,Y.h)("div",{key:"ac61f16237ce731e0745ab72d0fc3f066252464a",class:"input-highlight"})),this.renderBottomContent())}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],type:["onTypeChange"],value:["valueChanged"]}}static get style(){return{ios:".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item[slot=start].sc-ion-input-ios-h,ion-item [slot=start].sc-ion-input-ios-h,ion-item[slot=end].sc-ion-input-ios-h,ion-item [slot=end].sc-ion-input-ios-h{width:auto}.ion-color.sc-ion-input-ios-h{--highlight-color-focused:var(--ion-color-base)}.input-label-placement-floating.sc-ion-input-ios-h,.input-label-placement-stacked.sc-ion-input-ios-h{min-height:56px}.native-input.sc-ion-input-ios{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.cloned-input.sc-ion-input-ios{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-input-ios{inset-inline-start:0}.cloned-input.sc-ion-input-ios:disabled{opacity:1}.input-clear-icon.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{color:inherit}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.input-wrapper.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;width:100%}.ion-touched.ion-invalid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-input-ios-h,.ion-touched.ion-invalid.sc-ion-input-ios-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:block}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:none}.input-bottom.sc-ion-input-ios .counter.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-ios,.sc-ion-input-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-ios,.input-outline-notch-hidden.sc-ion-input-ios{display:none}.input-wrapper.sc-ion-input-ios input.sc-ion-input-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text.sc-ion-input-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-ios-h:dir(rtl) .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h:dir(rtl) .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-ios-h input.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:1}.label-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-ios-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-input-ios-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-input-ios-h[disabled].sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[disabled] .sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[readonly].sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[readonly] .sc-ion-input-ios-s>ion-input-password-toggle{display:none}.sc-ion-input-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--highlight-height:0px;font-size:inherit}.input-clear-icon.sc-ion-input-ios ion-icon.sc-ion-input-ios{width:18px;height:18px}.input-disabled.sc-ion-input-ios-h{opacity:0.3}.sc-ion-input-ios-s>ion-button[slot=start].button-has-icon-only,.sc-ion-input-ios-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}",md:".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item[slot=start].sc-ion-input-md-h,ion-item [slot=start].sc-ion-input-md-h,ion-item[slot=end].sc-ion-input-md-h,ion-item [slot=end].sc-ion-input-md-h{width:auto}.ion-color.sc-ion-input-md-h{--highlight-color-focused:var(--ion-color-base)}.input-label-placement-floating.sc-ion-input-md-h,.input-label-placement-stacked.sc-ion-input-md-h{min-height:56px}.native-input.sc-ion-input-md{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.cloned-input.sc-ion-input-md{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-input-md{inset-inline-start:0}.cloned-input.sc-ion-input-md:disabled{opacity:1}.input-clear-icon.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{color:inherit}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.input-wrapper.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;width:100%}.ion-touched.ion-invalid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:block}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:none}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-md-h input.sc-ion-input-md{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-md,.sc-ion-input-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-md,.input-outline-notch-hidden.sc-ion-input-md{display:none}.input-wrapper.sc-ion-input-md input.sc-ion-input-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text.sc-ion-input-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:1}.label-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-md-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-input-md-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-input-md-h[disabled].sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[disabled] .sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[readonly].sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[readonly] .sc-ion-input-md-s>ion-input-password-toggle{display:none}.input-fill-solid.sc-ion-input-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.input-fill-solid.ion-valid.sc-ion-input-md-h,.input-fill-solid.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-fill-solid.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}@media (any-hover: hover){.input-fill-solid.sc-ion-input-md-h:hover{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.input-fill-solid.has-focus.sc-ion-input-md-h{--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}.label-floating.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{max-width:calc(100% / 0.75)}.input-fill-outline.sc-ion-input-md-h{--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.input-fill-outline.input-shape-round.sc-ion-input-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h,.input-fill-outline.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.input-fill-outline.sc-ion-input-md-h:hover{--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.input-fill-outline.has-focus.sc-ion-input-md-h{--border-width:var(--highlight-height);--border-color:var(--highlight-color)}.input-fill-outline.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}.input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}}.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{position:relative}.label-floating.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}.input-fill-outline.sc-ion-input-md-h .input-outline-container.sc-ion-input-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{pointer-events:none}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.input-fill-outline.sc-ion-input-md-h .notch-spacer.sc-ion-input-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px;-ms-flex-positive:1;flex-grow:1}.label-floating.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{border-top:none}.sc-ion-input-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--highlight-height:2px;font-size:inherit}.input-clear-icon.sc-ion-input-md ion-icon.sc-ion-input-md{width:22px;height:22px}.input-disabled.sc-ion-input-md-h{opacity:0.38}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{letter-spacing:0.0333333333em}.input-label-placement-floating.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.has-focus.input-label-placement-floating.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-stacked.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.input-highlight.sc-ion-input-md{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.input-highlight.sc-ion-input-md{inset-inline-start:0}.has-focus.sc-ion-input-md-h .input-highlight.sc-ion-input-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{bottom:0}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{inset-inline-start:0}.input-shape-round.sc-ion-input-md-h{--border-radius:16px}.sc-ion-input-md-s>ion-button[slot=start].button-has-icon-only,.sc-ion-input-md-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}"}}},[38,"ion-input",{color:[513],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearInputIcon:[1,"clear-input-icon"],clearOnEdit:[4,"clear-on-edit"],counter:[4],counterFormatter:[16],debounce:[2],disabled:[516],enterkeyhint:[1],errorText:[1,"error-text"],fill:[1],inputmode:[1],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[516],required:[4],shape:[1],spellcheck:[4],step:[1],type:[1],value:[1032],hasFocus:[32],setFocus:[64],getInputElement:[64]},void 0,{debounce:["debounceChanged"],type:["onTypeChange"],value:["valueChanged"]}]);let qf=0;const ic=function k2(){typeof customElements>"u"||["ion-input","ion-icon"].forEach(_=>{switch(_){case"ion-input":customElements.get(_)||customElements.define(_,C2);break;case"ion-icon":customElements.get(_)||me()}})},Sg=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionValueChange=(0,Y.lh)(this,"ionValueChange",7),this.inputId="ion-rg-"+xh++,this.labelId=`${this.inputId}-lbl`,this.setRadioTabindex=_=>{const k=this.getRadios(),D=k.find(De=>!De.disabled),q=k.find(De=>De.value===_&&!De.disabled);if(!D&&!q)return;const ce=q||D;for(const De of k)De.setButtonTabindex(De===ce?0:-1)},this.onClick=_=>{_.preventDefault();const k=_.target&&_.target.closest("ion-radio");if(k&&!k.disabled){const q=k.value;q!==this.value?(this.value=q,this.emitValueChange(_)):this.allowEmptySelection&&(this.value=void 0,this.emitValueChange(_))}},this.allowEmptySelection=!1,this.compareWith=void 0,this.name=this.inputId,this.value=void 0}valueChanged(_){this.setRadioTabindex(_),this.ionValueChange.emit({value:_})}componentDidLoad(){this.valueChanged(this.value)}connectedCallback(){var _=this;return(0,qe.A)(function*(){const k=_.el.querySelector("ion-list-header")||_.el.querySelector("ion-item-divider");if(k){const D=_.label=k.querySelector("ion-label");D&&(_.labelId=D.id=_.name+"-lbl")}})()}getRadios(){return Array.from(this.el.querySelectorAll("ion-radio"))}emitValueChange(_){const{value:k}=this;this.ionChange.emit({value:k,event:_})}onKeydown(_){const k=!!this.el.closest("ion-select-popover");if(_.target&&!this.el.contains(_.target))return;const D=this.getRadios().filter(q=>!q.disabled);if(_.target&&D.includes(_.target)){const q=D.findIndex(dt=>dt===_.target),ce=D[q];let De;if(["ArrowDown","ArrowRight"].includes(_.key)&&(De=q===D.length-1?D[0]:D[q+1]),["ArrowUp","ArrowLeft"].includes(_.key)&&(De=0===q?D[D.length-1]:D[q-1]),De&&D.includes(De)&&(De.setFocus(_),k||(this.value=De.value,this.emitValueChange(_))),[" "].includes(_.key)){const dt=this.value;this.value=this.allowEmptySelection&&void 0!==this.value?void 0:ce.value,(dt!==this.value||this.allowEmptySelection)&&this.emitValueChange(_),_.preventDefault()}}}render(){const{label:_,labelId:k,el:D,name:q,value:ce}=this,De=(0,ht.b)(this);return(0,At.e)(!0,D,q,ce,!1),(0,Y.h)(Y.xr,{key:"7a8ad7eb6a05c6f96a348dcf30fd0c610a95688c",role:"radiogroup","aria-labelledby":_?k:null,onClick:this.onClick,class:De})}get el(){return this}static get watchers(){return{value:["valueChanged"]}}},[0,"ion-radio-group",{allowEmptySelection:[4,"allow-empty-selection"],compareWith:[1,"compare-with"],name:[1],value:[1032]},[[4,"keydown","onKeydown"]],{value:["valueChanged"]}]);let xh=0;function oc(){typeof customElements>"u"||["ion-radio-group"].forEach(_=>{"ion-radio-group"===_&&(customElements.get(_)||customElements.define(_,Sg))})}const Vp=(0,Y.w$)(class extends Y.wt{constructor(){var _;super(),_=this,this.__registerHost(),this.ionInput=(0,Y.lh)(this,"ionInput",7),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionCancel=(0,Y.lh)(this,"ionCancel",7),this.ionClear=(0,Y.lh)(this,"ionClear",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.isCancelVisible=!1,this.shouldAlignLeft=!0,this.inputId="ion-searchbar-"+$p++,this.inheritedAttributes={},this.onClearInput=function(){var k=(0,qe.A)(function*(D){return _.ionClear.emit(),new Promise(q=>{setTimeout(()=>{const ce=_.getValue();""!==ce&&(_.value="",_.emitInputChange(),D&&!_.focused&&(_.setFocus(),_.focusedValue=ce)),q()},64)})});return function(D){return k.apply(this,arguments)}}(),this.onCancelSearchbar=function(){var k=(0,qe.A)(function*(D){D&&(D.preventDefault(),D.stopPropagation()),_.ionCancel.emit();const q=_.getValue(),ce=_.focused;yield _.onClearInput(),q&&!ce&&_.emitValueChange(D),_.nativeInput&&_.nativeInput.blur()});return function(D){return k.apply(this,arguments)}}(),this.onInput=k=>{const D=k.target;D&&(this.value=D.value),this.emitInputChange(k)},this.onChange=k=>{this.emitValueChange(k)},this.onBlur=k=>{this.focused=!1,this.ionBlur.emit(),this.positionElements(),this.focusedValue!==this.value&&this.emitValueChange(k),this.focusedValue=void 0},this.onFocus=()=>{this.focused=!0,this.focusedValue=this.value,this.ionFocus.emit(),this.positionElements()},this.focused=!1,this.noAnimate=!0,this.color=void 0,this.animated=!1,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.cancelButtonIcon=ht.c.get("backButtonIcon","data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>"),this.cancelButtonText="Cancel",this.clearIcon=void 0,this.debounce=void 0,this.disabled=!1,this.inputmode=void 0,this.enterkeyhint=void 0,this.maxlength=void 0,this.minlength=void 0,this.name=this.inputId,this.placeholder="Search",this.searchIcon=void 0,this.showCancelButton="never",this.showClearButton="always",this.spellcheck=!1,this.type="search",this.value=""}onLangChanged(_){this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{lang:_}),(0,Y.$x)(this)}onDirChanged(_){this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{dir:_}),(0,Y.$x)(this)}debounceChanged(){const{ionInput:_,debounce:k,originalIonInput:D}=this;this.ionInput=void 0===k?null!=D?D:_:(0,At.l)(_,k)}valueChanged(){const _=this.nativeInput,k=this.getValue();_&&_.value!==k&&(_.value=k)}showCancelButtonChanged(){requestAnimationFrame(()=>{this.positionElements(),(0,Y.$x)(this)})}connectedCallback(){this.emitStyle()}componentWillLoad(){this.inheritedAttributes=Object.assign({},(0,At.d)(this.el,["lang","dir"]))}componentDidLoad(){this.originalIonInput=this.ionInput,this.positionElements(),this.debounceChanged(),setTimeout(()=>{this.noAnimate=!1},300)}emitStyle(){this.ionStyle.emit({searchbar:!0})}setFocus(){var _=this;return(0,qe.A)(function*(){_.nativeInput&&_.nativeInput.focus()})()}getInputElement(){var _=this;return(0,qe.A)(function*(){return _.nativeInput||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.nativeInput)})()}emitValueChange(_){const{value:k}=this,D=null==k?k:k.toString();this.focusedValue=D,this.ionChange.emit({value:D,event:_})}emitInputChange(_){const{value:k}=this;this.ionInput.emit({value:k,event:_})}positionElements(){const _=this.getValue(),k=this.shouldAlignLeft,D=(0,ht.b)(this),q=!this.animated||""!==_.trim()||!!this.focused;this.shouldAlignLeft=q,"ios"===D&&(k!==q&&this.positionPlaceholder(),this.animated&&this.positionCancelButton())}positionPlaceholder(){const _=this.nativeInput;if(!_)return;const k=(0,ui.i)(this.el),D=(this.el.shadowRoot||this.el).querySelector(".searchbar-search-icon");if(this.shouldAlignLeft)_.removeAttribute("style"),D.removeAttribute("style");else{const q=document,ce=q.createElement("span");ce.innerText=this.placeholder||"",q.body.appendChild(ce),(0,At.r)(()=>{const De=ce.offsetWidth;ce.remove();const dt="calc(50% - "+De/2+"px)",jt="calc(50% - "+(De/2+D.clientWidth+8)+"px)";k?(_.style.paddingRight=dt,D.style.marginRight=jt):(_.style.paddingLeft=dt,D.style.marginLeft=jt)})}}positionCancelButton(){const _=(0,ui.i)(this.el),k=(this.el.shadowRoot||this.el).querySelector(".searchbar-cancel-button"),D=this.shouldShowCancelButton();if(null!==k&&D!==this.isCancelVisible){const q=k.style;if(this.isCancelVisible=D,D)_?q.marginLeft="0":q.marginRight="0";else{const ce=k.offsetWidth;ce>0&&(_?q.marginLeft=-ce+"px":q.marginRight=-ce+"px")}}}getValue(){return this.value||""}hasValue(){return""!==this.getValue()}shouldShowCancelButton(){return!("never"===this.showCancelButton||"focus"===this.showCancelButton&&!this.focused)}shouldShowClearButton(){return!("never"===this.showClearButton||"focus"===this.showClearButton&&!this.focused)}render(){const{cancelButtonText:_,autocapitalize:k}=this,D=this.animated&&ht.c.getBoolean("animated",!0),q=(0,ht.b)(this),ce=this.clearIcon||("ios"===q?du:vl),De=this.searchIcon||("ios"===q?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>"),dt=this.shouldShowCancelButton(),jt="never"!==this.showCancelButton&&(0,Y.h)("button",{key:"20b2d0f2e3425eede725dbe3323c7c29cdb66f4e","aria-label":_,"aria-hidden":dt?void 0:"true",type:"button",tabIndex:"ios"!==q||dt?void 0:-1,onMouseDown:this.onCancelSearchbar,onTouchStart:this.onCancelSearchbar,class:"searchbar-cancel-button"},(0,Y.h)("div",{key:"3a516c3fdd35256eb79639fd340afcdd92cfd7aa","aria-hidden":"true"},"md"===q?(0,Y.h)("ion-icon",{"aria-hidden":"true",mode:q,icon:this.cancelButtonIcon,lazy:!1}):_));return(0,Y.h)(Y.xr,{key:"34878db21f63a9bdffca0446d8ad5619ff04cac3",role:"search","aria-disabled":this.disabled?"true":null,class:Hr(this.color,{[q]:!0,"searchbar-animated":D,"searchbar-disabled":this.disabled,"searchbar-no-animate":D&&this.noAnimate,"searchbar-has-value":this.hasValue(),"searchbar-left-aligned":this.shouldAlignLeft,"searchbar-has-focus":this.focused,"searchbar-should-show-clear":this.shouldShowClearButton(),"searchbar-should-show-cancel":this.shouldShowCancelButton()})},(0,Y.h)("div",{key:"faa7b011206a8359b1963368c65988e506b260cb",class:"searchbar-input-container"},(0,Y.h)("input",Object.assign({key:"732d3e5a2b258da6f136a14472ac872816a9853b","aria-label":"search text",disabled:this.disabled,ref:bn=>this.nativeInput=bn,class:"searchbar-input",inputMode:this.inputmode,enterKeyHint:this.enterkeyhint,name:this.name,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,minLength:this.minlength,maxLength:this.maxlength,placeholder:this.placeholder,type:this.type,value:this.getValue(),autoCapitalize:"default"===k?void 0:k,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,spellcheck:this.spellcheck},this.inheritedAttributes)),"md"===q&&jt,(0,Y.h)("ion-icon",{key:"767dca971849f221dde220deae728b41bf764b98","aria-hidden":"true",mode:q,icon:De,lazy:!1,class:"searchbar-search-icon"}),(0,Y.h)("button",{key:"9941b5de1ed9ebcf3e81de8e0731c09dea5a89d9","aria-label":"reset",type:"button","no-blur":!0,class:"searchbar-clear-button",onPointerDown:bn=>{bn.preventDefault()},onClick:()=>this.onClearInput(!0)},(0,Y.h)("ion-icon",{key:"cb2b543d286373a84e2c6c2a959f92b045bbd7dd","aria-hidden":"true",mode:q,icon:ce,lazy:!1,class:"searchbar-clear-icon"}))),"ios"===q&&jt)}get el(){return this}static get watchers(){return{lang:["onLangChanged"],dir:["onDirChanged"],debounce:["debounceChanged"],value:["valueChanged"],showCancelButton:["showCancelButtonChanged"]}}static get style(){return{ios:".sc-ion-searchbar-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-searchbar-ios-h{color:var(--ion-color-contrast)}.ion-color.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios{background:var(--ion-color-base)}.ion-color.sc-ion-searchbar-ios-h .searchbar-clear-button.sc-ion-searchbar-ios,.ion-color.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios,.ion-color.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios{color:inherit}.searchbar-search-icon.sc-ion-searchbar-ios{color:var(--icon-color);pointer-events:none}.searchbar-input-container.sc-ion-searchbar-ios{display:block;position:relative;-ms-flex-negative:1;flex-shrink:1;width:100%}.searchbar-input.sc-ion-searchbar-ios{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;border-radius:var(--border-radius);display:block;width:100%;min-height:inherit;border:0;outline:none;background:var(--background);font-family:inherit;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-input.sc-ion-searchbar-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-ios::-webkit-search-cancel-button,.searchbar-input.sc-ion-searchbar-ios::-ms-clear{display:none}.searchbar-cancel-button.sc-ion-searchbar-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:none;height:100%;border:0;outline:none;color:var(--cancel-button-color);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-cancel-button.sc-ion-searchbar-ios>div.sc-ion-searchbar-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.searchbar-clear-button.sc-ion-searchbar-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:none;min-height:0;outline:none;color:var(--clear-button-color);-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-clear-button.sc-ion-searchbar-ios:focus{opacity:0.5}.searchbar-has-value.searchbar-should-show-clear.sc-ion-searchbar-ios-h .searchbar-clear-button.sc-ion-searchbar-ios{display:block}.searchbar-disabled.sc-ion-searchbar-ios-h{cursor:default;opacity:0.4;pointer-events:none}.sc-ion-searchbar-ios-h{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.07);--border-radius:10px;--box-shadow:none;--cancel-button-color:var(--ion-color-primary, #0054e9);--clear-button-color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));--color:var(--ion-text-color, #000);--icon-color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:12px;padding-bottom:12px;min-height:60px;contain:content}.searchbar-input-container.sc-ion-searchbar-ios{min-height:36px}.searchbar-search-icon.sc-ion-searchbar-ios{-webkit-margin-start:calc(50% - 60px);margin-inline-start:calc(50% - 60px);top:0;position:absolute;width:1.375rem;height:100%;contain:strict}.searchbar-search-icon.sc-ion-searchbar-ios{inset-inline-start:5px}.searchbar-input.sc-ion-searchbar-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:6px;padding-bottom:6px;height:100%;font-size:1.0625rem;font-weight:400;contain:strict}.searchbar-has-value.searchbar-should-show-clear.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios{-webkit-padding-start:1.75rem;padding-inline-start:1.75rem;-webkit-padding-end:1.75rem;padding-inline-end:1.75rem}.searchbar-clear-button.sc-ion-searchbar-ios{top:0;background-position:center;position:absolute;width:1.875rem;height:100%;border:0;background-color:transparent}.searchbar-clear-button.sc-ion-searchbar-ios{inset-inline-end:0}.searchbar-clear-icon.sc-ion-searchbar-ios{width:1.125rem;height:100%}.searchbar-cancel-button.sc-ion-searchbar-ios{-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:0;padding-inline-end:0;padding-top:0;padding-bottom:0;-ms-flex-negative:0;flex-shrink:0;background-color:transparent;font-size:17px}.searchbar-left-aligned.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios{-webkit-margin-start:0;margin-inline-start:0}.searchbar-left-aligned.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios{-webkit-padding-start:1.875rem;padding-inline-start:1.875rem}.searchbar-has-focus.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios,.searchbar-should-show-cancel.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios,.searchbar-animated.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{display:block}.searchbar-animated.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios,.searchbar-animated.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios{-webkit-transition:all 300ms ease;transition:all 300ms ease}.searchbar-animated.searchbar-has-focus.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios,.searchbar-animated.searchbar-should-show-cancel.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{opacity:1;pointer-events:auto}.searchbar-animated.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{-webkit-margin-end:-100%;margin-inline-end:-100%;-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);-webkit-transition:all 300ms ease;transition:all 300ms ease;opacity:0;pointer-events:none}.searchbar-no-animate.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios,.searchbar-no-animate.sc-ion-searchbar-ios-h .searchbar-input.sc-ion-searchbar-ios,.searchbar-no-animate.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{-webkit-transition-duration:0ms;transition-duration:0ms}.ion-color.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios{color:var(--ion-color-base)}@media (any-hover: hover){.ion-color.sc-ion-searchbar-ios-h .searchbar-cancel-button.sc-ion-searchbar-ios:hover{color:var(--ion-color-tint)}}ion-toolbar.sc-ion-searchbar-ios-h,ion-toolbar .sc-ion-searchbar-ios-h{padding-top:1px;padding-bottom:15px;min-height:52px}ion-toolbar.ion-color.sc-ion-searchbar-ios-h:not(.ion-color),ion-toolbar.ion-color .sc-ion-searchbar-ios-h:not(.ion-color){color:inherit}ion-toolbar.ion-color.sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-cancel-button.sc-ion-searchbar-ios,ion-toolbar.ion-color .sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-cancel-button.sc-ion-searchbar-ios{color:currentColor}ion-toolbar.ion-color.sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios,ion-toolbar.ion-color .sc-ion-searchbar-ios-h .searchbar-search-icon.sc-ion-searchbar-ios{color:currentColor;opacity:0.5}ion-toolbar.ion-color.sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-input.sc-ion-searchbar-ios,ion-toolbar.ion-color .sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-input.sc-ion-searchbar-ios{background:rgba(var(--ion-color-contrast-rgb), 0.07);color:currentColor}ion-toolbar.ion-color.sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-clear-button.sc-ion-searchbar-ios,ion-toolbar.ion-color .sc-ion-searchbar-ios-h:not(.ion-color) .searchbar-clear-button.sc-ion-searchbar-ios{color:currentColor;opacity:0.5}",md:".sc-ion-searchbar-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-searchbar-md-h{color:var(--ion-color-contrast)}.ion-color.sc-ion-searchbar-md-h .searchbar-input.sc-ion-searchbar-md{background:var(--ion-color-base)}.ion-color.sc-ion-searchbar-md-h .searchbar-clear-button.sc-ion-searchbar-md,.ion-color.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md,.ion-color.sc-ion-searchbar-md-h .searchbar-search-icon.sc-ion-searchbar-md{color:inherit}.searchbar-search-icon.sc-ion-searchbar-md{color:var(--icon-color);pointer-events:none}.searchbar-input-container.sc-ion-searchbar-md{display:block;position:relative;-ms-flex-negative:1;flex-shrink:1;width:100%}.searchbar-input.sc-ion-searchbar-md{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;border-radius:var(--border-radius);display:block;width:100%;min-height:inherit;border:0;outline:none;background:var(--background);font-family:inherit;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-input.sc-ion-searchbar-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.searchbar-input.sc-ion-searchbar-md::-webkit-search-cancel-button,.searchbar-input.sc-ion-searchbar-md::-ms-clear{display:none}.searchbar-cancel-button.sc-ion-searchbar-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:none;height:100%;border:0;outline:none;color:var(--cancel-button-color);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-cancel-button.sc-ion-searchbar-md>div.sc-ion-searchbar-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.searchbar-clear-button.sc-ion-searchbar-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:none;min-height:0;outline:none;color:var(--clear-button-color);-webkit-appearance:none;-moz-appearance:none;appearance:none}.searchbar-clear-button.sc-ion-searchbar-md:focus{opacity:0.5}.searchbar-has-value.searchbar-should-show-clear.sc-ion-searchbar-md-h .searchbar-clear-button.sc-ion-searchbar-md{display:block}.searchbar-disabled.sc-ion-searchbar-md-h{cursor:default;opacity:0.4;pointer-events:none}.sc-ion-searchbar-md-h{--background:var(--ion-background-color, #fff);--border-radius:2px;--box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);--cancel-button-color:var(--ion-color-step-900, var(--ion-text-color-step-100, #1a1a1a));--clear-button-color:initial;--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--icon-color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;background:inherit}.searchbar-search-icon.sc-ion-searchbar-md{top:11px;width:1.3125rem;height:1.3125rem}.searchbar-search-icon.sc-ion-searchbar-md{inset-inline-start:16px}.searchbar-cancel-button.sc-ion-searchbar-md{top:0;background-color:transparent;font-size:1.5em}.searchbar-cancel-button.sc-ion-searchbar-md{inset-inline-start:9px}.searchbar-search-icon.sc-ion-searchbar-md,.searchbar-cancel-button.sc-ion-searchbar-md{position:absolute}.searchbar-search-icon.ion-activated.sc-ion-searchbar-md,.searchbar-cancel-button.ion-activated.sc-ion-searchbar-md{background-color:transparent}.searchbar-input.sc-ion-searchbar-md{-webkit-padding-start:3.4375rem;padding-inline-start:3.4375rem;-webkit-padding-end:3.4375rem;padding-inline-end:3.4375rem;padding-top:0.375rem;padding-bottom:0.375rem;background-position:left 8px center;height:auto;font-size:1rem;font-weight:400;line-height:30px}[dir=rtl].sc-ion-searchbar-md-h .searchbar-input.sc-ion-searchbar-md,[dir=rtl] .sc-ion-searchbar-md-h .searchbar-input.sc-ion-searchbar-md{background-position:right 8px center}[dir=rtl].sc-ion-searchbar-md .searchbar-input.sc-ion-searchbar-md{background-position:right 8px center}@supports selector(:dir(rtl)){.searchbar-input.sc-ion-searchbar-md:dir(rtl){background-position:right 8px center}}.searchbar-clear-button.sc-ion-searchbar-md{top:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;position:absolute;height:100%;border:0;background-color:transparent}.searchbar-clear-button.sc-ion-searchbar-md{inset-inline-end:13px}.searchbar-clear-button.ion-activated.sc-ion-searchbar-md{background-color:transparent}.searchbar-clear-icon.sc-ion-searchbar-md{width:1.375rem;height:100%}.searchbar-has-focus.sc-ion-searchbar-md-h .searchbar-search-icon.sc-ion-searchbar-md{display:block}.searchbar-has-focus.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md,.searchbar-should-show-cancel.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md{display:block}.searchbar-has-focus.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md+.searchbar-search-icon.sc-ion-searchbar-md,.searchbar-should-show-cancel.sc-ion-searchbar-md-h .searchbar-cancel-button.sc-ion-searchbar-md+.searchbar-search-icon.sc-ion-searchbar-md{display:none}ion-toolbar.sc-ion-searchbar-md-h,ion-toolbar .sc-ion-searchbar-md-h{-webkit-padding-start:7px;padding-inline-start:7px;-webkit-padding-end:7px;padding-inline-end:7px;padding-top:3px;padding-bottom:3px}"}}},[34,"ion-searchbar",{color:[513],animated:[4],autocapitalize:[1],autocomplete:[1],autocorrect:[1],cancelButtonIcon:[1,"cancel-button-icon"],cancelButtonText:[1,"cancel-button-text"],clearIcon:[1,"clear-icon"],debounce:[2],disabled:[4],inputmode:[1],enterkeyhint:[1],maxlength:[2],minlength:[2],name:[1],placeholder:[1],searchIcon:[1,"search-icon"],showCancelButton:[1,"show-cancel-button"],showClearButton:[1,"show-clear-button"],spellcheck:[4],type:[1],value:[1025],focused:[32],noAnimate:[32],setFocus:[64],getInputElement:[64]},void 0,{lang:["onLangChanged"],dir:["onDirChanged"],debounce:["debounceChanged"],value:["valueChanged"],showCancelButton:["showCancelButtonChanged"]}]);let $p=0;const _m=function Xf(){typeof customElements>"u"||["ion-searchbar","ion-icon"].forEach(_=>{switch(_){case"ion-searchbar":customElements.get(_)||customElements.define(_,Vp);break;case"ion-icon":customElements.get(_)||me()}})},Yf=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionSelect=(0,Y.lh)(this,"ionSelect",7),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.onClick=_=>{const k=_.target,D=this.checked;"ION-SEGMENT"!==k.tagName&&(this.value=k.value,k!==D&&this.emitValueChange(),(this.scrollable||!this.swipeGesture)&&(D?this.checkButton(D,k):this.setCheckedClasses()))},this.onSlottedItemsChange=()=>{this.valueChanged(this.value)},this.getSegmentButton=_=>{var k,D;const q=this.getButtons().filter(De=>!De.disabled),ce=q.findIndex(De=>De===document.activeElement);switch(_){case"first":return q[0];case"last":return q[q.length-1];case"next":return null!==(k=q[ce+1])&&void 0!==k?k:q[0];case"previous":return null!==(D=q[ce-1])&&void 0!==D?D:q[q.length-1];default:return null}},this.activated=!1,this.color=void 0,this.disabled=!1,this.scrollable=!1,this.swipeGesture=!0,this.value=void 0,this.selectOnFocus=!1}colorChanged(_,k){(void 0===k&&void 0!==_||void 0!==k&&void 0===_)&&this.emitStyle()}swipeGestureChanged(){this.gestureChanged()}valueChanged(_){this.ionSelect.emit({value:_}),this.scrollActiveButtonIntoView()}disabledChanged(){this.gestureChanged();const _=this.getButtons();for(const k of _)k.disabled=this.disabled}gestureChanged(){this.gesture&&this.gesture.enable(!this.scrollable&&!this.disabled&&this.swipeGesture)}connectedCallback(){this.emitStyle()}componentWillLoad(){this.emitStyle()}componentDidLoad(){var _=this;return(0,qe.A)(function*(){_.setCheckedClasses(),(0,At.r)(()=>{_.scrollActiveButtonIntoView(!1)}),_.gesture=(yield Promise.resolve().then(_e.bind(_e,2104))).createGesture({el:_.el,gestureName:"segment",gesturePriority:100,threshold:0,passive:!1,onStart:k=>_.onStart(k),onMove:k=>_.onMove(k),onEnd:k=>_.onEnd(k)}),_.gestureChanged(),_.disabled&&_.disabledChanged()})()}onStart(_){this.valueBeforeGesture=this.value,this.activate(_)}onMove(_){this.setNextIndex(_)}onEnd(_){this.setActivated(!1),this.setNextIndex(_,!0),_.event.stopImmediatePropagation();const k=this.value;void 0!==k&&this.valueBeforeGesture!==k&&this.emitValueChange(),this.valueBeforeGesture=void 0}emitValueChange(){const{value:_}=this;this.ionChange.emit({value:_})}getButtons(){return Array.from(this.el.querySelectorAll("ion-segment-button"))}get checked(){return this.getButtons().find(_=>_.value===this.value)}setActivated(_){this.getButtons().forEach(D=>{_?D.classList.add("segment-button-activated"):D.classList.remove("segment-button-activated")}),this.activated=_}activate(_){const k=_.event.target,q=this.getButtons().find(ce=>ce.value===this.value);"ION-SEGMENT-BUTTON"===k.tagName&&(q||(this.value=k.value,this.setCheckedClasses()),this.value===k.value&&this.setActivated(!0))}getIndicator(_){return(_.shadowRoot||_).querySelector(".segment-button-indicator")}checkButton(_,k){const D=this.getIndicator(_),q=this.getIndicator(k);if(null===D||null===q)return;const ce=D.getBoundingClientRect(),De=q.getBoundingClientRect(),bn=`translate3d(${ce.left-De.left}px, 0, 0) scaleX(${ce.width/De.width})`;(0,Y.bN)(()=>{q.classList.remove("segment-button-indicator-animated"),q.style.setProperty("transform",bn),q.getBoundingClientRect(),q.classList.add("segment-button-indicator-animated"),q.style.setProperty("transform","")}),this.value=k.value,this.setCheckedClasses()}setCheckedClasses(){const _=this.getButtons(),D=_.findIndex(q=>q.value===this.value)+1;for(const q of _)q.classList.remove("segment-button-after-checked");D<_.length&&_[D].classList.add("segment-button-after-checked")}scrollActiveButtonIntoView(_=!0){const{scrollable:k,value:D,el:q}=this;if(k){const De=this.getButtons().find(dt=>dt.value===D);if(void 0!==De){const dt=q.getBoundingClientRect(),jt=De.getBoundingClientRect();q.scrollBy({top:0,left:jt.x-dt.x-dt.width/2+jt.width/2,behavior:_?"smooth":"instant"})}}}setNextIndex(_,k=!1){const D=(0,ui.i)(this.el),q=this.activated,ce=this.getButtons(),De=ce.findIndex(Ur=>Ur.value===this.value),dt=ce[De];let jt,bn;if(-1===De)return;const fi=dt.getBoundingClientRect(),Ii=fi.left,oo=fi.width,ji=_.currentX,Io=fi.top+fi.height/2,wr=this.el.getRootNode().elementFromPoint(ji,Io);if(q&&!k){if(D?ji>Ii+oo:ji<Ii){const Ur=De-1;Ur>=0&&(bn=Ur)}else if((D?ji<Ii:ji>Ii+oo)&&q&&!k){const Ur=De+1;Ur<ce.length&&(bn=Ur)}void 0!==bn&&!ce[bn].disabled&&(jt=ce[bn])}if(!q&&k&&(jt=wr),null!=jt){if("ION-SEGMENT"===jt.tagName)return!1;dt!==jt&&this.checkButton(dt,jt)}return!0}emitStyle(){this.ionStyle.emit({segment:!0})}onKeyDown(_){const k=(0,ui.i)(this.el);let q,D=this.selectOnFocus;switch(_.key){case"ArrowRight":_.preventDefault(),q=this.getSegmentButton(k?"previous":"next");break;case"ArrowLeft":_.preventDefault(),q=this.getSegmentButton(k?"next":"previous");break;case"Home":_.preventDefault(),q=this.getSegmentButton("first");break;case"End":_.preventDefault(),q=this.getSegmentButton("last");break;case" ":case"Enter":_.preventDefault(),q=document.activeElement,D=!0}if(q){if(D){const ce=this.checked;this.checkButton(ce||q,q),q!==ce&&this.emitValueChange()}q.setFocus()}}render(){const _=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"ad0946134c8d465b760ad792655f1cb9922db520",role:"tablist",onClick:this.onClick,class:Hr(this.color,{[_]:!0,"in-toolbar":vs("ion-toolbar",this.el),"in-toolbar-color":vs("ion-toolbar[color]",this.el),"segment-activated":this.activated,"segment-disabled":this.disabled,"segment-scrollable":this.scrollable})},(0,Y.h)("slot",{key:"dcdb425bcda0d60acb7c317e5e671ed462715b4a",onSlotchange:this.onSlottedItemsChange}))}get el(){return this}static get watchers(){return{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}}static get style(){return{ios:":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.065);border-radius:8px;overflow:hidden;z-index:0}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.065)}:host(.in-toolbar){-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;width:auto}:host(.in-toolbar:not(.ion-color)){background:var(--ion-toolbar-segment-background, var(--background))}:host(.in-toolbar-color:not(.ion-color)){background:rgba(var(--ion-color-contrast-rgb), 0.11)}",md:":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:transparent;grid-auto-columns:minmax(auto, 360px)}:host(.in-toolbar){min-height:var(--min-height)}:host(.segment-scrollable) ::slotted(ion-segment-button){min-width:auto}"}}},[33,"ion-segment",{color:[513],disabled:[4],scrollable:[4],swipeGesture:[4,"swipe-gesture"],value:[1032],selectOnFocus:[4,"select-on-focus"],activated:[32]},[[0,"keydown","onKeyDown"]],{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}]),D2=function Zf(){typeof customElements>"u"||["ion-segment"].forEach(_=>{"ion-segment"===_&&(customElements.get(_)||customElements.define(_,Yf))})},bf=(B,_,k)=>"function"==typeof k?k(B,_):"string"==typeof k?B[k]===_[k]:Array.isArray(_)?_.includes(B):B===_,mp=(B,_,k)=>void 0!==B&&(Array.isArray(B)?B.some(D=>bf(D,_,k)):bf(B,_,k)),Jf=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.inputId="ion-rb-"+Lh++,this.radioGroup=null,this.updateState=()=>{if(this.radioGroup){const{compareWith:_,value:k}=this.radioGroup;this.checked=mp(k,this.value,_)}},this.onClick=()=>{const{radioGroup:_,checked:k,disabled:D}=this;D||(this.checked=!k||null==_||!_.allowEmptySelection)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.checked=!1,this.buttonTabindex=-1,this.color=void 0,this.name=this.inputId,this.disabled=!1,this.value=void 0,this.labelPlacement="start",this.justify="space-between",this.alignment="center"}valueChanged(){this.updateState()}componentDidLoad(){this.updateState()}setFocus(_){var k=this;return(0,qe.A)(function*(){_.stopPropagation(),_.preventDefault(),k.el.focus()})()}setButtonTabindex(_){var k=this;return(0,qe.A)(function*(){k.buttonTabindex=_})()}connectedCallback(){void 0===this.value&&(this.value=this.inputId);const _=this.radioGroup=this.el.closest("ion-radio-group");_&&(this.updateState(),(0,At.a)(_,"ionValueChange",this.updateState))}disconnectedCallback(){const _=this.radioGroup;_&&((0,At.b)(_,"ionValueChange",this.updateState),this.radioGroup=null)}get hasLabel(){return""!==this.el.textContent}renderRadioControl(){return(0,Y.h)("div",{class:"radio-icon",part:"container"},(0,Y.h)("div",{class:"radio-inner",part:"mark"}),(0,Y.h)("div",{class:"radio-ripple"}))}render(){const{checked:_,disabled:k,color:D,el:q,justify:ce,labelPlacement:De,hasLabel:dt,buttonTabindex:jt,alignment:bn}=this,fi=(0,ht.b)(this),Ii=vs("ion-item",q);return(0,Y.h)(Y.xr,{key:"43c95effb6acb119733270e8a5e02fe18b47ee4b",onFocus:this.onFocus,onBlur:this.onBlur,onClick:this.onClick,class:Hr(D,{[fi]:!0,"in-item":Ii,"radio-checked":_,"radio-disabled":k,[`radio-justify-${ce}`]:!0,[`radio-alignment-${bn}`]:!0,[`radio-label-placement-${De}`]:!0,"ion-activatable":!Ii,"ion-focusable":!Ii}),role:"radio","aria-checked":_?"true":"false","aria-disabled":k?"true":null,tabindex:jt},(0,Y.h)("label",{key:"168ea77c08fde9832077d617662b93dc9986b544",class:"radio-wrapper"},(0,Y.h)("div",{key:"ce1e6eee63fbab1e5a66b18f767f4eecc2a227f1",class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!dt},part:"label"},(0,Y.h)("slot",{key:"7d849e43d4356b5c3978c2bba9a6fba5d21ca69d"})),(0,Y.h)("div",{key:"e741f7822364958b050a232bdfccdc413095c244",class:"native-wrapper"},this.renderRadioControl())))}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:':host{--inner-border-radius:50%;display:inline-block;position:relative;max-width:100%;min-height:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.radio-disabled){pointer-events:none}.radio-icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;contain:layout size style}.radio-icon,.radio-inner{-webkit-box-sizing:border-box;box-sizing:border-box}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host(:focus){outline:none}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.radio-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.radio-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.radio-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host(.radio-justify-space-between) .radio-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.radio-justify-start) .radio-wrapper{-ms-flex-pack:start;justify-content:start}:host(.radio-justify-end) .radio-wrapper{-ms-flex-pack:end;justify-content:end}:host(.radio-alignment-start) .radio-wrapper{-ms-flex-align:start;align-items:start}:host(.radio-alignment-center) .radio-wrapper{-ms-flex-align:center;align-items:center}:host(.radio-label-placement-start) .radio-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.radio-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-end) .radio-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.radio-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.radio-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px}:host(.radio-label-placement-stacked) .radio-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.radio-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host{--color-checked:var(--ion-color-primary, #0054e9)}:host(.ion-color.radio-checked) .radio-inner{border-color:var(--ion-color-base)}.item-radio.item-ios ion-label{-webkit-margin-start:0;margin-inline-start:0}.radio-inner{width:33%;height:50%}:host(.radio-checked) .radio-inner{-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:0.125rem;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--color-checked)}:host(.radio-disabled){opacity:0.3}:host(.ion-focused) .radio-icon::after{border-radius:var(--inner-border-radius);top:-8px;display:block;position:absolute;width:36px;height:36px;background:var(--ion-color-primary-tint, #1a65eb);content:"";opacity:0.2}:host(.ion-focused) .radio-icon::after{inset-inline-start:-9px}.native-wrapper .radio-icon{width:0.9375rem;height:1.5rem}',md:':host{--inner-border-radius:50%;display:inline-block;position:relative;max-width:100%;min-height:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.radio-disabled){pointer-events:none}.radio-icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;contain:layout size style}.radio-icon,.radio-inner{-webkit-box-sizing:border-box;box-sizing:border-box}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host(:focus){outline:none}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.radio-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.radio-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.radio-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host(.radio-justify-space-between) .radio-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.radio-justify-start) .radio-wrapper{-ms-flex-pack:start;justify-content:start}:host(.radio-justify-end) .radio-wrapper{-ms-flex-pack:end;justify-content:end}:host(.radio-alignment-start) .radio-wrapper{-ms-flex-align:start;align-items:start}:host(.radio-alignment-center) .radio-wrapper{-ms-flex-align:center;align-items:center}:host(.radio-label-placement-start) .radio-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.radio-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-end) .radio-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.radio-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.radio-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px}:host(.radio-label-placement-stacked) .radio-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.radio-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host{--color:rgb(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--color-checked:var(--ion-color-primary, #0054e9);--border-width:0.125rem;--border-style:solid;--border-radius:50%}:host(.ion-color) .radio-inner{background:var(--ion-color-base)}:host(.ion-color.radio-checked) .radio-icon{border-color:var(--ion-color-base)}.radio-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--color)}.radio-inner{border-radius:var(--inner-border-radius);width:calc(50% + var(--border-width));height:calc(50% + var(--border-width));-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background:var(--color-checked)}:host(.radio-checked) .radio-icon{border-color:var(--color-checked)}:host(.radio-checked) .radio-inner{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}:host(.radio-disabled) .label-text-wrapper{opacity:0.38}:host(.radio-disabled) .native-wrapper{opacity:0.63}:host(.ion-focused) .radio-icon::after{border-radius:var(--inner-border-radius);display:block;position:absolute;width:36px;height:36px;background:var(--ion-color-primary-tint, #1a65eb);content:"";opacity:0.2}.native-wrapper .radio-icon{width:1.25rem;height:1.25rem}'}}},[33,"ion-radio",{color:[513],name:[1],disabled:[4],value:[8],labelPlacement:[1,"label-placement"],justify:[1],alignment:[1],checked:[32],buttonTabindex:[32],setFocus:[64],setButtonTabindex:[64]},void 0,{value:["valueChanged"]}]);let Lh=0;function jp(){typeof customElements>"u"||["ion-radio"].forEach(_=>{"ion-radio"===_&&(customElements.get(_)||customElements.define(_,Jf))})}const e2=(B,_)=>{if(1!==B.nodeType)return;const k=B;return(k.tagName===_.toUpperCase()?[k]:Array.from(k.querySelectorAll(_))).find(q=>q.value===k.value)},t2=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),D.addElement(B.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),_.addElement(B).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([k,D])},Up=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),D.addElement(B.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),_.addElement(B).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([k,D])},vp=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),D.addElement(B.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),_.addElement(B).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([k,D])},P2=B=>{const _=(0,mt.c)(),k=(0,mt.c)(),D=(0,mt.c)();return k.addElement(B.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),D.addElement(B.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),_.addElement(B).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([k,D])},bm=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.didPresent=(0,Y.lh)(this,"ionActionSheetDidPresent",7),this.willPresent=(0,Y.lh)(this,"ionActionSheetWillPresent",7),this.willDismiss=(0,Y.lh)(this,"ionActionSheetWillDismiss",7),this.didDismiss=(0,Y.lh)(this,"ionActionSheetDidDismiss",7),this.didPresentShorthand=(0,Y.lh)(this,"didPresent",7),this.willPresentShorthand=(0,Y.lh)(this,"willPresent",7),this.willDismissShorthand=(0,Y.lh)(this,"willDismiss",7),this.didDismissShorthand=(0,Y.lh)(this,"didDismiss",7),this.delegateController=Gs(this),this.lockController=xn(),this.triggerController=ni(),this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,ir)},this.dispatchCancelHandler=_=>{if(Qr(_.detail.role)){const D=this.getButtons().find(q=>"cancel"===q.role);this.callButtonHandler(D)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.buttons=[],this.cssClass=void 0,this.backdropDismiss=!0,this.header=void 0,this.subHeader=void 0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(_,k){!0===_&&!1===k?this.present():!1===_&&!0===k&&this.dismiss()}triggerChanged(){const{trigger:_,el:k,triggerController:D}=this;_&&D.addClickListener(k,_)}present(){var _=this;return(0,qe.A)(function*(){const k=yield _.lockController.lock();yield _.delegateController.attachViewToDom(),yield Jo(_,"actionSheetEnter",t2,vp),k()})()}dismiss(_,k){var D=this;return(0,qe.A)(function*(){const q=yield D.lockController.lock(),ce=yield ti(D,_,k,"actionSheetLeave",Up,P2);return ce&&D.delegateController.removeViewFromDom(),q(),ce})()}onDidDismiss(){return Or(this.el,"ionActionSheetDidDismiss")}onWillDismiss(){return Or(this.el,"ionActionSheetWillDismiss")}buttonClick(_){var k=this;return(0,qe.A)(function*(){const D=_.role;return Qr(D)?k.dismiss(_.data,D):(yield k.callButtonHandler(_))?k.dismiss(_.data,_.role):Promise.resolve()})()}callButtonHandler(_){return(0,qe.A)(function*(){return!(_&&!1===(yield Nr(_.handler)))})()}getButtons(){return this.buttons.map(_=>"string"==typeof _?{text:_}:_)}connectedCallback(){rs(this.el),this.triggerChanged()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.triggerController.removeClickListener()}componentWillLoad(){$i(this.el)}componentDidLoad(){const{groupEl:_,wrapperEl:k}=this;!this.gesture&&"ios"===(0,ht.b)(this)&&k&&_&&(0,Y.gv)(()=>{_.scrollHeight>_.clientHeight||(this.gesture=fa(k,q=>q.classList.contains("action-sheet-button")),this.gesture.enable(!0))}),!0===this.isOpen&&(0,At.r)(()=>this.present()),this.triggerChanged()}render(){const{header:_,htmlAttributes:k,overlayIndex:D}=this,q=(0,ht.b)(this),ce=this.getButtons(),De=ce.find(bn=>"cancel"===bn.role),dt=ce.filter(bn=>"cancel"!==bn.role),jt=`action-sheet-${D}-header`;return(0,Y.h)(Y.xr,Object.assign({key:"b640e9730af4bd9ec569884cf203c63102e0ea59",role:"dialog","aria-modal":"true","aria-labelledby":void 0!==_?jt:null,tabindex:"-1"},k,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign(Object.assign({[q]:!0},ei(this.cssClass)),{"overlay-hidden":!0,"action-sheet-translucent":this.translucent}),onIonActionSheetWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),(0,Y.h)("ion-backdrop",{key:"bcfa5b7ffb5c265ef54caa114e697ada11f20c12",tappable:this.backdropDismiss}),(0,Y.h)("div",{key:"207ae95b5365ce1d76170a05bdf8c83c3ba5de42",tabindex:"0"}),(0,Y.h)("div",{key:"bf2b4e8d57c822a4ea2bbe6c34b1b2f2067e4c02",class:"action-sheet-wrapper ion-overlay-wrapper",ref:bn=>this.wrapperEl=bn},(0,Y.h)("div",{key:"9c4841eb03ca1378c5abc1e3aafbbcfaaa43c345",class:"action-sheet-container"},(0,Y.h)("div",{key:"fa438b8663f5d30852e5967da0471489efa783b2",class:"action-sheet-group",ref:bn=>this.groupEl=bn},void 0!==_&&(0,Y.h)("div",{key:"2c600f1cd8314d65137fb1bfa180312b4791121a",id:jt,class:{"action-sheet-title":!0,"action-sheet-has-sub-title":void 0!==this.subHeader}},_,this.subHeader&&(0,Y.h)("div",{key:"a98d6a3f7948733de22a07432e56255f11243b7b",class:"action-sheet-sub-title"},this.subHeader)),dt.map(bn=>(0,Y.h)("button",Object.assign({},bn.htmlAttributes,{type:"button",id:bn.id,class:ah(bn),onClick:()=>this.buttonClick(bn),disabled:bn.disabled}),(0,Y.h)("span",{class:"action-sheet-button-inner"},bn.icon&&(0,Y.h)("ion-icon",{icon:bn.icon,"aria-hidden":"true",lazy:!1,class:"action-sheet-icon"}),bn.text),"md"===q&&(0,Y.h)("ion-ripple-effect",null)))),De&&(0,Y.h)("div",{key:"5c5abd0e0b3d486ba2bfe437e28a23b2c7c4c955",class:"action-sheet-group action-sheet-group-cancel"},(0,Y.h)("button",Object.assign({key:"520a23bbbe6c7436f5bc58bad162d7894b870e54"},De.htmlAttributes,{type:"button",class:ah(De),onClick:()=>this.buttonClick(De)}),(0,Y.h)("span",{key:"28c90f66786ee82316adc6cfd68d322d2038357d",class:"action-sheet-button-inner"},De.icon&&(0,Y.h)("ion-icon",{key:"fd49fcea260c7addc9b07718eeb02d4fa6e4d900",icon:De.icon,"aria-hidden":"true",lazy:!1,class:"action-sheet-icon"}),De.text),"md"===q&&(0,Y.h)("ion-ripple-effect",{key:"c83f636e171fe77635a4fce2b97161447e10546a"}))))),(0,Y.h)("div",{key:"d304920fc7cb006b87542183a3224a7e460abd3d",tabindex:"0"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:'.sc-ion-action-sheet-ios-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:auto;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-ios-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-ios{left:0;right:0;bottom:0;-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios:disabled{color:var(--button-color-disabled);opacity:0.4}.action-sheet-button-inner.sc-ion-action-sheet-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:end;justify-content:flex-end;height:100%;max-height:calc(100vh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)));max-height:calc(100dvh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)))}.action-sheet-group.sc-ion-action-sheet-ios{-ms-flex-negative:2;flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}@media (any-pointer: coarse){.action-sheet-group.sc-ion-action-sheet-ios::-webkit-scrollbar{display:none}}.action-sheet-group-cancel.sc-ion-action-sheet-ios{-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-ios{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-ios:not(:disabled):hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-ios:not(:disabled):hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, var(--ion-background-color-step-100, #f9f9f9)));--backdrop-opacity:var(--ion-backdrop-opacity, 0.4);--button-background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent;--button-background-activated:var(--ion-text-color, #000);--button-background-activated-opacity:.08;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-background-selected:var(--ion-color-step-150, var(--ion-background-color-step-150, var(--ion-background-color, #fff)));--button-background-selected-opacity:1;--button-color:var(--ion-color-primary, #0054e9);--button-color-disabled:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--color:var(--ion-color-step-400, var(--ion-text-color-step-600, #999999));text-align:center}.action-sheet-wrapper.sc-ion-action-sheet-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--ion-safe-area-top, 0);padding-bottom:var(--ion-safe-area-bottom, 0);-webkit-box-sizing:content-box;box-sizing:content-box}.action-sheet-container.sc-ion-action-sheet-ios{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:0;padding-bottom:0}.action-sheet-group.sc-ion-action-sheet-ios{border-radius:13px;margin-bottom:8px}.action-sheet-group.sc-ion-action-sheet-ios:first-child{margin-top:10px}.action-sheet-group.sc-ion-action-sheet-ios:last-child{margin-bottom:10px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-group.sc-ion-action-sheet-ios{background-color:transparent;-webkit-backdrop-filter:saturate(280%) blur(20px);backdrop-filter:saturate(280%) blur(20px)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-title.sc-ion-action-sheet-ios,.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.sc-ion-action-sheet-ios{background-color:transparent;background-image:-webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8)), to(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8))), -webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4)), color-stop(50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4)), color-stop(50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8)));background-image:linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 100%), linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4) 50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 50%);background-repeat:no-repeat;background-position:top, bottom;background-size:100% calc(100% - 1px), 100% 1px;-webkit-backdrop-filter:saturate(120%);backdrop-filter:saturate(120%)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.ion-activated.sc-ion-action-sheet-ios{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.7);background-image:none}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-cancel.sc-ion-action-sheet-ios{background:var(--button-background-selected)}}.action-sheet-title.sc-ion-action-sheet-ios{background:-webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)), color-stop(50%, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)), color-stop(50%, transparent)) bottom/100% 1px no-repeat transparent;background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent}.action-sheet-title.sc-ion-action-sheet-ios{-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:14px;padding-bottom:13px;color:var(--color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-size:max(13px, 0.8125rem);font-weight:400;text-align:center}.action-sheet-title.action-sheet-has-sub-title.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-sub-title.sc-ion-action-sheet-ios{padding-left:0;padding-right:0;padding-top:6px;padding-bottom:0;font-size:max(13px, 0.8125rem);font-weight:400}.action-sheet-button.sc-ion-action-sheet-ios{-webkit-padding-start:14px;padding-inline-start:14px;-webkit-padding-end:14px;padding-inline-end:14px;padding-top:14px;padding-bottom:14px;min-height:56px;font-size:max(20px, 1.25rem);contain:content}.action-sheet-button.sc-ion-action-sheet-ios .action-sheet-icon.sc-ion-action-sheet-ios{-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:max(28px, 1.75rem);pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios:last-child{background-image:none}.action-sheet-selected.sc-ion-action-sheet-ios{font-weight:bold}.action-sheet-cancel.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-cancel.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-destructive.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-activated.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-focused.sc-ion-action-sheet-ios{color:var(--ion-color-danger, #c5000f)}@media (any-hover: hover){.action-sheet-destructive.sc-ion-action-sheet-ios:hover{color:var(--ion-color-danger, #c5000f)}}',md:'.sc-ion-action-sheet-md-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:auto;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-md-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-md{left:0;right:0;bottom:0;-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-md{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md:disabled{color:var(--button-color-disabled);opacity:0.4}.action-sheet-button-inner.sc-ion-action-sheet-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-md{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:end;justify-content:flex-end;height:100%;max-height:calc(100vh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)));max-height:calc(100dvh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)))}.action-sheet-group.sc-ion-action-sheet-md{-ms-flex-negative:2;flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}@media (any-pointer: coarse){.action-sheet-group.sc-ion-action-sheet-md::-webkit-scrollbar{display:none}}.action-sheet-group-cancel.sc-ion-action-sheet-md{-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-md{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-md::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-md:not(:disabled):hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-md:not(:disabled):hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);--button-background:transparent;--button-background-selected:currentColor;--button-background-selected-opacity:0;--button-background-activated:transparent;--button-background-activated-opacity:0;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--button-color-disabled:var(--button-color);--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54)}.action-sheet-wrapper.sc-ion-action-sheet-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--ion-safe-area-top, 0);margin-bottom:0}.action-sheet-title.sc-ion-action-sheet-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:20px;padding-bottom:17px;min-height:60px;color:var(--color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54));font-size:1rem;text-align:start}.action-sheet-sub-title.sc-ion-action-sheet-md{padding-left:0;padding-right:0;padding-top:16px;padding-bottom:0;font-size:0.875rem}.action-sheet-group.sc-ion-action-sheet-md:first-child{padding-top:0}.action-sheet-group.sc-ion-action-sheet-md:last-child{padding-bottom:var(--ion-safe-area-bottom)}.action-sheet-button.sc-ion-action-sheet-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:12px;position:relative;min-height:52px;font-size:1rem;text-align:start;contain:content;overflow:hidden}.action-sheet-icon.sc-ion-action-sheet-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:32px;margin-inline-end:32px;margin-top:0;margin-bottom:0;color:var(--color);font-size:1.5rem}.action-sheet-button-inner.sc-ion-action-sheet-md{-ms-flex-pack:start;justify-content:flex-start}.action-sheet-selected.sc-ion-action-sheet-md{font-weight:bold}'}}},[34,"ion-action-sheet",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],buttons:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],header:[1],subHeader:[1,"sub-header"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),ah=B=>Object.assign({"action-sheet-button":!0,"ion-activatable":!B.disabled,"ion-focusable":!B.disabled,[`action-sheet-${B.role}`]:void 0!==B.role},ei(B.cssClass)),Gp=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.lines=void 0}render(){const{lines:_}=this,k=(0,ht.b)(this);return(0,Y.h)(Y.xr,{key:"7e2e050f13722f2b870a2415d99a9e631e9ca267",class:Hr(this.color,{[k]:!0,[`list-header-lines-${_}`]:void 0!==_})},(0,Y.h)("div",{key:"6117bebc45800d874e9b75355476fbced5cc8398",class:"list-header-inner"},(0,Y.h)("slot",{key:"9165fb274cd2c45a5a65c271d8b1f30e8a00c890"})))}static get style(){return{ios:":host{--border-style:solid;--border-width:0;--inner-border-width:0;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:40px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);color:var(--color);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.list-header-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex:1 1 auto;flex:1 1 auto}:host(.list-header-lines-inset),:host(.list-header-lines-none){--border-width:0}:host(.list-header-lines-full),:host(.list-header-lines-none){--inner-border-width:0}:host{--background:transparent;--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));padding-right:var(--ion-safe-area-right);padding-left:calc(var(--ion-safe-area-left, 0px) + 16px);position:relative;-ms-flex-align:end;align-items:flex-end;font-size:min(1.375rem, 56.1px);font-weight:700;letter-spacing:0}:host-context([dir=rtl]){padding-right:calc(var(--ion-safe-area-right, 0px) + 16px);padding-left:var(--ion-safe-area-left)}@supports selector(:dir(rtl)){:host(:dir(rtl)){padding-right:calc(var(--ion-safe-area-right, 0px) + 16px);padding-left:var(--ion-safe-area-left)}}::slotted(ion-button),::slotted(ion-label){margin-top:29px;margin-bottom:6px}::slotted(ion-button){--padding-top:0;--padding-bottom:0;-webkit-margin-start:3px;margin-inline-start:3px;-webkit-margin-end:3px;margin-inline-end:3px;min-height:1.4em}:host(.list-header-lines-full){--border-width:0 0 0.55px 0}:host(.list-header-lines-inset){--inner-border-width:0 0 0.55px 0}",md:":host{--border-style:solid;--border-width:0;--inner-border-width:0;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:40px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);color:var(--color);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.list-header-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex:1 1 auto;flex:1 1 auto}:host(.list-header-lines-inset),:host(.list-header-lines-none){--border-width:0}:host(.list-header-lines-full),:host(.list-header-lines-none){--inner-border-width:0}:host{--background:transparent;--color:var(--ion-text-color, #000);--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));padding-right:var(--ion-safe-area-right);padding-left:calc(var(--ion-safe-area-left, 0px) + 16px);min-height:45px;font-size:0.875rem}:host-context([dir=rtl]){padding-right:calc(var(--ion-safe-area-right, 0px) + 16px);padding-left:var(--ion-safe-area-left)}@supports selector(:dir(rtl)){:host(:dir(rtl)){padding-right:calc(var(--ion-safe-area-right, 0px) + 16px);padding-left:var(--ion-safe-area-left)}}:host(.list-header-lines-full){--border-width:0 0 1px 0}:host(.list-header-lines-inset){--inner-border-width:0 0 1px 0}"}}},[33,"ion-list-header",{color:[513],lines:[1]}]);function If(){typeof customElements>"u"||["ion-list-header"].forEach(_=>{"ion-list-header"===_&&(customElements.get(_)||customElements.define(_,Gp))})}const r4=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.header=void 0,this.subHeader=void 0,this.message=void 0,this.multiple=void 0,this.options=[]}findOptionFromEvent(_){const{options:k}=this;return k.find(D=>D.value===_.target.value)}callOptionHandler(_){const k=this.findOptionFromEvent(_),D=this.getValues(_);null!=k&&k.handler&&Nr(k.handler,D)}dismissParentPopover(){const _=this.el.closest("ion-popover");_&&_.dismiss()}setChecked(_){const{multiple:k}=this,D=this.findOptionFromEvent(_);k&&D&&(D.checked=_.detail.checked)}getValues(_){const{multiple:k,options:D}=this;if(k)return D.filter(ce=>ce.checked).map(ce=>ce.value);const q=this.findOptionFromEvent(_);return q?q.value:void 0}renderOptions(_){const{multiple:k}=this;return!0===k?this.renderCheckboxOptions(_):this.renderRadioOptions(_)}renderCheckboxOptions(_){return _.map(k=>(0,Y.h)("ion-item",{class:Object.assign({"item-checkbox-checked":k.checked},ei(k.cssClass))},(0,Y.h)("ion-checkbox",{value:k.value,disabled:k.disabled,checked:k.checked,justify:"start",labelPlacement:"end",onIonChange:D=>{this.setChecked(D),this.callOptionHandler(D),(0,Y.$x)(this)}},k.text)))}renderRadioOptions(_){const k=_.filter(D=>D.checked).map(D=>D.value)[0];return(0,Y.h)("ion-radio-group",{value:k,onIonChange:D=>this.callOptionHandler(D)},_.map(D=>(0,Y.h)("ion-item",{class:Object.assign({"item-radio-checked":D.value===k},ei(D.cssClass))},(0,Y.h)("ion-radio",{value:D.value,disabled:D.disabled,onClick:()=>this.dismissParentPopover(),onKeyUp:q=>{" "===q.key&&this.dismissParentPopover()}},D.text))))}render(){const{header:_,message:k,options:D,subHeader:q}=this,ce=void 0!==q||void 0!==k;return(0,Y.h)(Y.xr,{key:"302553a2eec4d1442751b8af28b7c9bd3487fd5d",class:(0,ht.b)(this)},(0,Y.h)("ion-list",{key:"39ae8579e6fe3bae2c7504147268ad5c82fd27e6"},void 0!==_&&(0,Y.h)("ion-list-header",{key:"e0e6686380d188f46c593e1bb25287dcf08c75c2"},_),ce&&(0,Y.h)("ion-item",{key:"8a2d8652db269593c0ba7d767277e12c2b06144d"},(0,Y.h)("ion-label",{key:"a30cc0ecf95d5bdd6421ee1683922c1b853e98ea",class:"ion-text-wrap"},void 0!==q&&(0,Y.h)("h3",{key:"c298459ca450123808a08d65660825b2c26d00e5"},q),void 0!==k&&(0,Y.h)("p",{key:"ed895fbaec020e809021138401341b6fd7675035"},k))),this.renderOptions(D)))}get el(){return this}static get style(){return{ios:".sc-ion-select-popover-ios-h ion-list.sc-ion-select-popover-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list-header.sc-ion-select-popover-ios,ion-label.sc-ion-select-popover-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-select-popover-ios-h{overflow-y:auto}",md:".sc-ion-select-popover-md-h ion-list.sc-ion-select-popover-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list-header.sc-ion-select-popover-md,ion-label.sc-ion-select-popover-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-select-popover-md-h{overflow-y:auto}ion-list.sc-ion-select-popover-md ion-radio.sc-ion-select-popover-md::part(container){display:none}ion-list.sc-ion-select-popover-md ion-radio.sc-ion-select-popover-md::part(label){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-item.sc-ion-select-popover-md{--inner-border-width:0}.item-radio-checked.sc-ion-select-popover-md{--background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.08);--background-focused:var(--ion-color-primary, #0054e9);--background-focused-opacity:0.2;--background-hover:var(--ion-color-primary, #0054e9);--background-hover-opacity:0.12}.item-checkbox-checked.sc-ion-select-popover-md{--background-activated:var(--ion-item-color, var(--ion-text-color, #000));--background-focused:var(--ion-item-color, var(--ion-text-color, #000));--background-hover:var(--ion-item-color, var(--ion-text-color, #000));--color:var(--ion-color-primary, #0054e9)}"}}},[34,"ion-select-popover",{header:[1],subHeader:[1,"sub-header"],message:[1],multiple:[4],options:[16]}]),Wp=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionCancel=(0,Y.lh)(this,"ionCancel",7),this.ionDismiss=(0,Y.lh)(this,"ionDismiss",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.ionStyle=(0,Y.lh)(this,"ionStyle",7),this.inputId="ion-sel-"+F++,this.inheritedAttributes={},this.onClick=_=>{const k=_.target,D=k.closest('[slot="start"], [slot="end"]');k===this.el||null===D?(this.setFocus(),this.open(_)):_.preventDefault()},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.isExpanded=!1,this.cancelText="Cancel",this.color=void 0,this.compareWith=void 0,this.disabled=!1,this.fill=void 0,this.interface="alert",this.interfaceOptions={},this.justify="space-between",this.label=void 0,this.labelPlacement="start",this.multiple=!1,this.name=this.inputId,this.okText="OK",this.placeholder=void 0,this.selectedText=void 0,this.toggleIcon=void 0,this.expandedIcon=void 0,this.shape=void 0,this.value=void 0}styleChanged(){this.emitStyle()}setValue(_){this.value=_,this.ionChange.emit({value:_})}connectedCallback(){var _=this;return(0,qe.A)(function*(){const{el:k}=_;_.notchController=Nu(k,()=>_.notchSpacerEl,()=>_.labelSlot),_.updateOverlayOptions(),_.emitStyle(),_.mutationO=((B,_,k)=>{if(typeof MutationObserver>"u")return;const D=new MutationObserver(q=>{k(((B,_)=>{let k;return B.forEach(D=>{for(let q=0;q<D.addedNodes.length;q++)k=e2(D.addedNodes[q],_)||k}),k})(q,"ion-select-option"))});return D.observe(B,{childList:!0,subtree:!0}),D})(_.el,0,(0,qe.A)(function*(){_.updateOverlayOptions(),(0,Y.$x)(_)}))})()}componentWillLoad(){this.inheritedAttributes=(0,At.d)(this.el,["aria-label"])}componentDidLoad(){this.emitStyle()}disconnectedCallback(){this.mutationO&&(this.mutationO.disconnect(),this.mutationO=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}open(_){var k=this;return(0,qe.A)(function*(){if(k.disabled||k.isExpanded)return;k.isExpanded=!0;const D=k.overlay=yield k.createOverlay(_);if(D.onDidDismiss().then(()=>{k.overlay=void 0,k.isExpanded=!1,k.ionDismiss.emit(),k.setFocus()}),yield D.present(),"popover"===k.interface){const q=k.childOpts.map(ce=>ce.value).indexOf(k.value);if(q>-1){const ce=D.querySelector(`.select-interface-option:nth-child(${q+1})`);if(ce){(0,At.f)(ce);const De=ce.querySelector("ion-radio, ion-checkbox");De&&De.focus()}}else{const ce=D.querySelector("ion-radio:not(.radio-disabled), ion-checkbox:not(.checkbox-disabled)");ce&&((0,At.f)(ce.closest("ion-item")),ce.focus())}}return D})()}createOverlay(_){let k=this.interface;return"action-sheet"===k&&this.multiple&&(console.warn(`Select interface cannot be "${k}" with a multi-value select. Using the "alert" interface instead.`),k="alert"),"popover"===k&&!_&&(console.warn(`Select interface cannot be a "${k}" without passing an event. Using the "alert" interface instead.`),k="alert"),"action-sheet"===k?this.openActionSheet():"popover"===k?this.openPopover(_):this.openAlert()}updateOverlayOptions(){const _=this.overlay;if(!_)return;const k=this.childOpts,D=this.value;switch(this.interface){case"action-sheet":_.buttons=this.createActionSheetButtons(k,D);break;case"popover":const q=_.querySelector("ion-select-popover");q&&(q.options=this.createPopoverOptions(k,D));break;case"alert":_.inputs=this.createAlertInputs(k,this.multiple?"checkbox":"radio",D)}}createActionSheetButtons(_,k){const D=_.map(q=>{const ce=y(q),De=Array.from(q.classList).filter(jt=>"hydrated"!==jt).join(" "),dt=`${K} ${De}`;return{role:mp(k,ce,this.compareWith)?"selected":"",text:q.textContent,cssClass:dt,handler:()=>{this.setValue(ce)}}});return D.push({text:this.cancelText,role:"cancel",handler:()=>{this.ionCancel.emit()}}),D}createAlertInputs(_,k,D){return _.map(ce=>{const De=y(ce),dt=Array.from(ce.classList).filter(bn=>"hydrated"!==bn).join(" ");return{type:k,cssClass:`${K} ${dt}`,label:ce.textContent||"",value:De,checked:mp(D,De,this.compareWith),disabled:ce.disabled}})}createPopoverOptions(_,k){return _.map(q=>{const ce=y(q),De=Array.from(q.classList).filter(jt=>"hydrated"!==jt).join(" ");return{text:q.textContent||"",cssClass:`${K} ${De}`,value:ce,checked:mp(k,ce,this.compareWith),disabled:q.disabled,handler:jt=>{this.setValue(jt),this.multiple||this.close()}}})}openPopover(_){var k=this;return(0,qe.A)(function*(){const{fill:D,labelPlacement:q}=k,ce=k.interfaceOptions,De=(0,ht.b)(k),dt="md"!==De,jt=k.multiple,bn=k.value;let fi=_,Ii="auto";"floating"===q||"stacked"===q||"md"===De&&void 0!==D?Ii="cover":fi=Object.assign(Object.assign({},_),{detail:{ionShadowTarget:k.nativeWrapperEl}});const ji=Object.assign(Object.assign({mode:De,event:fi,alignment:"center",size:Ii,showBackdrop:dt},ce),{component:"ion-select-popover",cssClass:["select-popover",ce.cssClass],componentProps:{header:ce.header,subHeader:ce.subHeader,message:ce.message,multiple:jt,value:bn,options:k.createPopoverOptions(k.childOpts,bn)}});return zr.create(ji)})()}openActionSheet(){var _=this;return(0,qe.A)(function*(){const k=(0,ht.b)(_),D=_.interfaceOptions,q=Object.assign(Object.assign({mode:k},D),{buttons:_.createActionSheetButtons(_.childOpts,_.value),cssClass:["select-action-sheet",D.cssClass]});return _o.create(q)})()}openAlert(){var _=this;return(0,qe.A)(function*(){const k=_.interfaceOptions,D=_.multiple?"checkbox":"radio",q=(0,ht.b)(_),ce=Object.assign(Object.assign({mode:q},k),{header:k.header?k.header:_.labelText,inputs:_.createAlertInputs(_.childOpts,D,_.value),buttons:[{text:_.cancelText,role:"cancel",handler:()=>{_.ionCancel.emit()}},{text:_.okText,handler:De=>{_.setValue(De)}}],cssClass:["select-alert",k.cssClass,_.multiple?"multiple-select-alert":"single-select-alert"]});return cn.create(ce)})()}close(){return this.overlay?this.overlay.dismiss():Promise.resolve(!1)}hasValue(){return""!==this.getText()}get childOpts(){return Array.from(this.el.querySelectorAll("ion-select-option"))}get labelText(){const{label:_}=this;if(void 0!==_)return _;const{labelSlot:k}=this;return null!==k?k.textContent:void 0}getText(){const _=this.selectedText;return null!=_&&""!==_?_:A(this.childOpts,this.value,this.compareWith)}setFocus(){this.focusEl&&this.focusEl.focus()}emitStyle(){const{disabled:_}=this;this.ionStyle.emit({"interactive-disabled":_})}renderLabel(){const{label:_}=this;return(0,Y.h)("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel},part:"label"},void 0===_?(0,Y.h)("slot",{name:"label"}):(0,Y.h)("div",{class:"label-text"},_))}componentDidRender(){var _;null===(_=this.notchController)||void 0===_||_.calculateNotchWidth()}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return void 0!==this.label||null!==this.labelSlot}renderLabelContainer(){return"md"===(0,ht.b)(this)&&"outline"===this.fill?[(0,Y.h)("div",{class:"select-outline-container"},(0,Y.h)("div",{class:"select-outline-start"}),(0,Y.h)("div",{class:{"select-outline-notch":!0,"select-outline-notch-hidden":!this.hasLabel}},(0,Y.h)("div",{class:"notch-spacer","aria-hidden":"true",ref:D=>this.notchSpacerEl=D},this.label)),(0,Y.h)("div",{class:"select-outline-end"})),this.renderLabel()]:this.renderLabel()}renderSelectText(){const{placeholder:_}=this;let D=!1,q=this.getText();return""===q&&void 0!==_&&(q=_,D=!0),(0,Y.h)("div",{"aria-hidden":"true",class:{"select-text":!0,"select-placeholder":D},part:D?"placeholder":"text"},q)}renderSelectIcon(){const _=(0,ht.b)(this),{isExpanded:k,toggleIcon:D,expandedIcon:q}=this;let ce;return ce=k&&void 0!==q?q:null!=D?D:"ios"===_?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M136 208l120-104 120 104M136 304l120 104 120-104' stroke-width='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 144l192 224 192-224H64z'/></svg>",(0,Y.h)("ion-icon",{class:"select-icon",part:"icon","aria-hidden":"true",icon:ce})}get ariaLabel(){var _;const{placeholder:k,inheritedAttributes:D}=this,q=this.getText(),ce=null!==(_=D["aria-label"])&&void 0!==_?_:this.labelText;let De=q;return""===De&&void 0!==k&&(De=k),void 0!==ce&&(De=""===De?ce:`${ce}, ${De}`),De}renderListbox(){const{disabled:_,inputId:k,isExpanded:D}=this;return(0,Y.h)("button",{disabled:_,id:k,"aria-label":this.ariaLabel,"aria-haspopup":"dialog","aria-expanded":`${D}`,onFocus:this.onFocus,onBlur:this.onBlur,ref:q=>this.focusEl=q})}render(){const{disabled:_,el:k,isExpanded:D,expandedIcon:q,labelPlacement:ce,justify:De,placeholder:dt,fill:jt,shape:bn,name:fi,value:Ii}=this,oo=(0,ht.b)(this),ji="floating"===ce||"stacked"===ce,Io=!ji,Do=(0,ui.i)(k)?"rtl":"ltr",wr=vs("ion-item",this.el),ls="md"===oo&&"outline"!==jt&&!wr,ys=this.hasValue(),Ur=null!==k.querySelector('[slot="start"], [slot="end"]');(0,At.e)(!0,k,fi,h(Ii),_);const xs="stacked"===ce||"floating"===ce&&(ys||D||Ur);return(0,Y.h)(Y.xr,{key:"e14586e887c0b73457b9f1e8f0585dfc7d590051",onClick:this.onClick,class:Hr(this.color,{[oo]:!0,"in-item":wr,"in-item-color":vs("ion-item.ion-color",k),"select-disabled":_,"select-expanded":D,"has-expanded-icon":void 0!==q,"has-value":ys,"label-floating":xs,"has-placeholder":void 0!==dt,"ion-focusable":!0,[`select-${Do}`]:!0,[`select-fill-${jt}`]:void 0!==jt,[`select-justify-${De}`]:Io,[`select-shape-${bn}`]:void 0!==bn,[`select-label-placement-${ce}`]:!0})},(0,Y.h)("label",{key:"b44929542c809f2dca25afc588701762a083edd1",class:"select-wrapper",id:"select-label"},this.renderLabelContainer(),(0,Y.h)("div",{key:"195e3fad9cea0363ff00bf257ec2975fe5aa6887",class:"select-wrapper-inner"},(0,Y.h)("slot",{key:"9da7161a69b92d6fd124a478348d3fa420092f26",name:"start"}),(0,Y.h)("div",{key:"49c589c164d167de0ba5741a0c80fba58ea0bec6",class:"native-wrapper",ref:Is=>this.nativeWrapperEl=Is,part:"container"},this.renderSelectText(),this.renderListbox()),(0,Y.h)("slot",{key:"de1536d910fceb8e2dbdda13abcf88ee969888b8",name:"end"}),!ji&&this.renderSelectIcon()),ji&&this.renderSelectIcon(),ls&&(0,Y.h)("div",{key:"e821b7b32cd1996eaa6d471df9b531ad0d491098",class:"select-highlight"})))}get el(){return this}static get watchers(){return{disabled:["styleChanged"],isExpanded:["styleChanged"],placeholder:["styleChanged"],value:["styleChanged"]}}static get style(){return{ios:":host{--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--placeholder-color:currentColor;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--background:transparent;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;font-family:var(--ion-font-family, inherit);white-space:nowrap;cursor:pointer;z-index:2}:host(.select-label-placement-floating),:host(.select-label-placement-stacked){min-height:56px}:host(.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0}:host(.select-disabled){pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0;position:relative;-ms-flex-negative:0;flex-shrink:0}:host(.in-item-color) .select-icon{color:inherit}:host(.select-label-placement-stacked) .select-icon,:host(.select-label-placement-floating) .select-icon{position:absolute;height:100%}:host(.select-ltr.select-label-placement-stacked) .select-icon,:host(.select-ltr.select-label-placement-floating) .select-icon{right:var(--padding-end, 0)}:host(.select-rtl.select-label-placement-stacked) .select-icon,:host(.select-rtl.select-label-placement-floating) .select-icon{left:var(--padding-start, 0)}.select-text{-ms-flex:1;flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:inherit;overflow:hidden}.select-wrapper{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal;cursor:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.select-wrapper .select-placeholder{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.select-wrapper-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;overflow:hidden}:host(.select-label-placement-stacked) .select-wrapper-inner,:host(.select-label-placement-floating) .select-wrapper-inner{-ms-flex-positive:1;flex-grow:1}:host(.ion-touched.ion-invalid){--highlight-color:var(--highlight-color-invalid)}:host(.ion-valid){--highlight-color:var(--highlight-color-valid)}.label-text-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text,::slotted([slot=label]){text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden,.select-outline-notch-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);overflow:hidden}:host(.select-justify-space-between) .select-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.select-justify-start) .select-wrapper{-ms-flex-pack:start;justify-content:start}:host(.select-justify-end) .select-wrapper{-ms-flex-pack:end;justify-content:end}:host(.select-label-placement-start) .select-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.select-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.select-label-placement-end) .select-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.select-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.select-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.select-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.select-label-placement-stacked) .select-wrapper,:host(.select-label-placement-floating) .select-wrapper{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}:host(.select-label-placement-stacked) .label-text-wrapper,:host(.select-label-placement-floating) .label-text-wrapper{max-width:100%}:host(.select-ltr.select-label-placement-stacked) .label-text-wrapper,:host(.select-ltr.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host(.select-rtl.select-label-placement-stacked) .label-text-wrapper,:host(.select-rtl.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}:host(.select-label-placement-stacked) .native-wrapper,:host(.select-label-placement-floating) .native-wrapper{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0;-ms-flex-positive:1;flex-grow:1;width:100%}:host(.select-label-placement-floating) .label-text-wrapper{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}:host(.select-label-placement-floating:not(.label-floating)) .native-wrapper .select-placeholder{opacity:0}:host(.select-expanded.select-label-placement-floating) .native-wrapper .select-placeholder,:host(.ion-focused.select-label-placement-floating) .native-wrapper .select-placeholder,:host(.has-value.select-label-placement-floating) .native-wrapper .select-placeholder{opacity:1}:host(.label-floating) .label-text-wrapper{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted([slot=start]:last-of-type){-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}::slotted([slot=end]:first-of-type){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host{--highlight-height:0px}.select-icon{width:1.125rem;height:1.125rem;color:var(--ion-color-step-650, var(--ion-text-color-step-350, #595959))}:host(.select-label-placement-stacked) .select-wrapper-inner,:host(.select-label-placement-floating) .select-wrapper-inner{width:calc(100% - 1.125rem - 4px)}:host(.select-disabled){opacity:0.3}::slotted(ion-button[slot=start].button-has-icon-only),::slotted(ion-button[slot=end].button-has-icon-only){--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}",md:":host{--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--placeholder-color:currentColor;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--background:transparent;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;font-family:var(--ion-font-family, inherit);white-space:nowrap;cursor:pointer;z-index:2}:host(.select-label-placement-floating),:host(.select-label-placement-stacked){min-height:56px}:host(.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0}:host(.select-disabled){pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0;position:relative;-ms-flex-negative:0;flex-shrink:0}:host(.in-item-color) .select-icon{color:inherit}:host(.select-label-placement-stacked) .select-icon,:host(.select-label-placement-floating) .select-icon{position:absolute;height:100%}:host(.select-ltr.select-label-placement-stacked) .select-icon,:host(.select-ltr.select-label-placement-floating) .select-icon{right:var(--padding-end, 0)}:host(.select-rtl.select-label-placement-stacked) .select-icon,:host(.select-rtl.select-label-placement-floating) .select-icon{left:var(--padding-start, 0)}.select-text{-ms-flex:1;flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:inherit;overflow:hidden}.select-wrapper{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal;cursor:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.select-wrapper .select-placeholder{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.select-wrapper-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;overflow:hidden}:host(.select-label-placement-stacked) .select-wrapper-inner,:host(.select-label-placement-floating) .select-wrapper-inner{-ms-flex-positive:1;flex-grow:1}:host(.ion-touched.ion-invalid){--highlight-color:var(--highlight-color-invalid)}:host(.ion-valid){--highlight-color:var(--highlight-color-valid)}.label-text-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text,::slotted([slot=label]){text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden,.select-outline-notch-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);overflow:hidden}:host(.select-justify-space-between) .select-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.select-justify-start) .select-wrapper{-ms-flex-pack:start;justify-content:start}:host(.select-justify-end) .select-wrapper{-ms-flex-pack:end;justify-content:end}:host(.select-label-placement-start) .select-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.select-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.select-label-placement-end) .select-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.select-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.select-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.select-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.select-label-placement-stacked) .select-wrapper,:host(.select-label-placement-floating) .select-wrapper{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}:host(.select-label-placement-stacked) .label-text-wrapper,:host(.select-label-placement-floating) .label-text-wrapper{max-width:100%}:host(.select-ltr.select-label-placement-stacked) .label-text-wrapper,:host(.select-ltr.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host(.select-rtl.select-label-placement-stacked) .label-text-wrapper,:host(.select-rtl.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}:host(.select-label-placement-stacked) .native-wrapper,:host(.select-label-placement-floating) .native-wrapper{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0;-ms-flex-positive:1;flex-grow:1;width:100%}:host(.select-label-placement-floating) .label-text-wrapper{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}:host(.select-label-placement-floating:not(.label-floating)) .native-wrapper .select-placeholder{opacity:0}:host(.select-expanded.select-label-placement-floating) .native-wrapper .select-placeholder,:host(.ion-focused.select-label-placement-floating) .native-wrapper .select-placeholder,:host(.has-value.select-label-placement-floating) .native-wrapper .select-placeholder{opacity:1}:host(.label-floating) .label-text-wrapper{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted([slot=start]:last-of-type){-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}::slotted([slot=end]:first-of-type){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.select-fill-solid){--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}:host(.select-fill-solid) .select-wrapper{border-bottom:var(--border-width) var(--border-style) var(--border-color)}:host(.has-focus.select-fill-solid.ion-valid),:host(.select-fill-solid.ion-touched.ion-invalid){--border-color:var(--highlight-color)}:host(.select-fill-solid) .select-bottom{border-top:none}@media (any-hover: hover){:host(.select-fill-solid:hover){--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}:host(.select-fill-solid.select-expanded),:host(.select-fill-solid.ion-focused){--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}:host(.select-fill-solid) .select-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}:host(.label-floating.select-fill-solid) .label-text-wrapper{max-width:calc(100% / 0.75)}:host(.select-fill-outline){--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}:host(.select-fill-outline.select-shape-round){--border-radius:28px;--padding-start:32px;--padding-end:32px}:host(.has-focus.select-fill-outline.ion-valid),:host(.select-fill-outline.ion-touched.ion-invalid){--border-color:var(--highlight-color)}@media (any-hover: hover){:host(.select-fill-outline:hover){--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}:host(.select-fill-outline.select-expanded),:host(.select-fill-outline.ion-focused){--border-width:var(--highlight-height);--border-color:var(--highlight-color)}:host(.select-fill-outline) .select-bottom{border-top:none}:host(.select-fill-outline) .select-wrapper{border-bottom:none}:host(.select-ltr.select-fill-outline.select-label-placement-stacked) .label-text-wrapper,:host(.select-ltr.select-fill-outline.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host(.select-rtl.select-fill-outline.select-label-placement-stacked) .label-text-wrapper,:host(.select-rtl.select-fill-outline.select-label-placement-floating) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}:host(.select-fill-outline.select-label-placement-stacked) .label-text-wrapper,:host(.select-fill-outline.select-label-placement-floating) .label-text-wrapper{position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}:host(.select-fill-outline) .label-text-wrapper{position:relative;z-index:1}:host(.label-floating.select-fill-outline) .label-text-wrapper{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}:host(.select-fill-outline.select-label-placement-stacked) select,:host(.select-fill-outline.select-label-placement-floating) select{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}:host(.select-fill-outline) .select-outline-container{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}:host(.select-fill-outline) .select-outline-start,:host(.select-fill-outline) .select-outline-end{pointer-events:none}:host(.select-fill-outline) .select-outline-start,:host(.select-fill-outline) .select-outline-notch,:host(.select-fill-outline) .select-outline-end{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color);-webkit-box-sizing:border-box;box-sizing:border-box}:host(.select-fill-outline) .select-outline-notch{max-width:calc(100% - var(--padding-start) - var(--padding-end))}:host(.select-fill-outline) .notch-spacer{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none}:host(.select-fill-outline) .select-outline-start{-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color)}:host(.select-fill-outline) .select-outline-start{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius)}:host(.select-fill-outline) .select-outline-start{width:calc(var(--padding-start) - 4px)}:host(.select-fill-outline) .select-outline-end{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color)}:host(.select-fill-outline) .select-outline-end{border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px}:host(.select-fill-outline) .select-outline-end{-ms-flex-positive:1;flex-grow:1}:host(.label-floating.select-fill-outline) .select-outline-notch{border-top:none}:host{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--highlight-height:2px}.select-icon{width:0.8125rem;-webkit-transition:-webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);color:var(--ion-color-step-500, var(--ion-text-color-step-500, gray))}:host(.select-label-placement-floating.select-expanded) .label-text-wrapper,:host(.select-label-placement-floating.ion-focused) .label-text-wrapper,:host(.select-label-placement-stacked.select-expanded) .label-text-wrapper,:host(.select-label-placement-stacked.ion-focused) .label-text-wrapper{color:var(--highlight-color)}:host(.has-focus.select-label-placement-floating.ion-valid) .label-text-wrapper,:host(.select-label-placement-floating.ion-touched.ion-invalid) .label-text-wrapper,:host(.has-focus.select-label-placement-stacked.ion-valid) .label-text-wrapper,:host(.select-label-placement-stacked.ion-touched.ion-invalid) .label-text-wrapper{color:var(--highlight-color)}.select-highlight{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.select-highlight{inset-inline-start:0}:host(.select-expanded) .select-highlight,:host(.ion-focused) .select-highlight{-webkit-transform:scale(1);transform:scale(1)}:host(.in-item) .select-highlight{bottom:0}:host(.in-item) .select-highlight{inset-inline-start:0}:host(.select-expanded:not(.has-expanded-icon)) .select-icon{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host(.select-expanded) .select-wrapper .select-icon,:host(.has-focus.ion-valid) .select-wrapper .select-icon,:host(.ion-touched.ion-invalid) .select-wrapper .select-icon,:host(.ion-focused) .select-wrapper .select-icon{color:var(--highlight-color)}:host(.select-shape-round){--border-radius:16px}:host(.select-label-placement-stacked) .select-wrapper-inner,:host(.select-label-placement-floating) .select-wrapper-inner{width:calc(100% - 0.8125rem - 4px)}:host(.select-disabled){opacity:0.38}::slotted(ion-button[slot=start].button-has-icon-only),::slotted(ion-button[slot=end].button-has-icon-only){--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}"}}},[33,"ion-select",{cancelText:[1,"cancel-text"],color:[513],compareWith:[1,"compare-with"],disabled:[4],fill:[1],interface:[1],interfaceOptions:[8,"interface-options"],justify:[1],label:[1],labelPlacement:[1,"label-placement"],multiple:[4],name:[1],okText:[1,"ok-text"],placeholder:[1],selectedText:[1,"selected-text"],toggleIcon:[1,"toggle-icon"],expandedIcon:[1,"expanded-icon"],shape:[1],value:[1032],isExpanded:[32],open:[64]},void 0,{disabled:["styleChanged"],isExpanded:["styleChanged"],placeholder:["styleChanged"],value:["styleChanged"]}]),y=B=>{const _=B.value;return void 0===_?B.textContent||"":_},h=B=>{if(null!=B)return Array.isArray(B)?B.join(","):B.toString()},A=(B,_,k)=>void 0===_?"":Array.isArray(_)?_.map(D=>I(B,D,k)).filter(D=>null!==D).join(", "):I(B,_,k)||"",I=(B,_,k)=>{const D=B.find(q=>bf(_,y(q),k));return D?D.textContent:null};let F=0;const K="select-interface-option",ze=function Te(){typeof customElements>"u"||["ion-select","ion-action-sheet","ion-alert","ion-backdrop","ion-checkbox","ion-icon","ion-item","ion-label","ion-list","ion-list-header","ion-popover","ion-radio","ion-radio-group","ion-ripple-effect","ion-select-popover"].forEach(_=>{switch(_){case"ion-select":customElements.get(_)||customElements.define(_,Wp);break;case"ion-action-sheet":customElements.get(_)||function wf(){typeof customElements>"u"||["ion-action-sheet","ion-backdrop","ion-icon","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-action-sheet":customElements.get(_)||customElements.define(_,bm);break;case"ion-backdrop":customElements.get(_)||ue();break;case"ion-icon":customElements.get(_)||me();break;case"ion-ripple-effect":customElements.get(_)||Va()}})}();break;case"ion-alert":customElements.get(_)||Ti();break;case"ion-backdrop":customElements.get(_)||ue();break;case"ion-checkbox":customElements.get(_)||ua();break;case"ion-icon":customElements.get(_)||me();break;case"ion-item":customElements.get(_)||nh();break;case"ion-label":customElements.get(_)||P0();break;case"ion-list":customElements.get(_)||pl();break;case"ion-list-header":customElements.get(_)||If();break;case"ion-popover":customElements.get(_)||Gr();break;case"ion-radio":customElements.get(_)||jp();break;case"ion-radio-group":customElements.get(_)||oc();break;case"ion-ripple-effect":customElements.get(_)||Va();break;case"ion-select-popover":customElements.get(_)||function tu(){typeof customElements>"u"||["ion-select-popover","ion-checkbox","ion-icon","ion-item","ion-label","ion-list","ion-list-header","ion-radio","ion-radio-group","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-select-popover":customElements.get(_)||customElements.define(_,r4);break;case"ion-checkbox":customElements.get(_)||ua();break;case"ion-icon":customElements.get(_)||me();break;case"ion-item":customElements.get(_)||nh();break;case"ion-label":customElements.get(_)||P0();break;case"ion-list":customElements.get(_)||pl();break;case"ion-list-header":customElements.get(_)||If();break;case"ion-radio":customElements.get(_)||jp();break;case"ion-radio-group":customElements.get(_)||oc();break;case"ion-ripple-effect":customElements.get(_)||Va()}})}()}})},rn=(0,Y.w$)(class extends Y.wt{constructor(){super(),this.__registerHost(),this.ionChange=(0,Y.lh)(this,"ionChange",7),this.ionInput=(0,Y.lh)(this,"ionInput",7),this.ionBlur=(0,Y.lh)(this,"ionBlur",7),this.ionFocus=(0,Y.lh)(this,"ionFocus",7),this.inputId="ion-textarea-"+fn++,this.didTextareaClearOnEdit=!1,this.inheritedAttributes={},this.onInput=_=>{const k=_.target;k&&(this.value=k.value||""),this.emitInputChange(_)},this.onChange=_=>{this.emitValueChange(_)},this.onFocus=_=>{this.hasFocus=!0,this.focusedValue=this.value,this.ionFocus.emit(_)},this.onBlur=_=>{this.hasFocus=!1,this.focusedValue!==this.value&&this.emitValueChange(_),this.didTextareaClearOnEdit=!1,this.ionBlur.emit(_)},this.onKeyDown=_=>{this.checkClearOnEdit(_)},this.hasFocus=!1,this.color=void 0,this.autocapitalize="none",this.autofocus=!1,this.clearOnEdit=!1,this.debounce=void 0,this.disabled=!1,this.fill=void 0,this.inputmode=void 0,this.enterkeyhint=void 0,this.maxlength=void 0,this.minlength=void 0,this.name=this.inputId,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.cols=void 0,this.rows=void 0,this.wrap=void 0,this.autoGrow=!1,this.value="",this.counter=!1,this.counterFormatter=void 0,this.errorText=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.shape=void 0}debounceChanged(){const{ionInput:_,debounce:k,originalIonInput:D}=this;this.ionInput=void 0===k?null!=D?D:_:(0,At.l)(_,k)}valueChanged(){const _=this.nativeInput,k=this.getValue();_&&_.value!==k&&(_.value=k),this.runAutoGrow()}connectedCallback(){const{el:_}=this;this.slotMutationController=$l(_,["label","start","end"],()=>(0,Y.$x)(this)),this.notchController=Nu(_,()=>this.notchSpacerEl,()=>this.labelSlot),this.debounceChanged(),Y.L2.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:_}))}disconnectedCallback(){Y.L2.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},(0,At.i)(this.el)),(0,At.d)(this.el,["data-form-type","title","tabindex"]))}componentDidLoad(){this.originalIonInput=this.ionInput,this.runAutoGrow()}componentDidRender(){var _;null===(_=this.notchController)||void 0===_||_.calculateNotchWidth()}setFocus(){var _=this;return(0,qe.A)(function*(){_.nativeInput&&_.nativeInput.focus()})()}getInputElement(){var _=this;return(0,qe.A)(function*(){return _.nativeInput||(yield new Promise(k=>(0,At.c)(_.el,k))),Promise.resolve(_.nativeInput)})()}emitValueChange(_){const{value:k}=this,D=null==k?k:k.toString();this.focusedValue=D,this.ionChange.emit({value:D,event:_})}emitInputChange(_){const{value:k}=this;this.ionInput.emit({value:k,event:_})}runAutoGrow(){this.nativeInput&&this.autoGrow&&(0,Y.bN)(()=>{var _;this.textareaWrapper&&(this.textareaWrapper.dataset.replicatedValue=null!==(_=this.value)&&void 0!==_?_:"")})}checkClearOnEdit(_){if(!this.clearOnEdit)return;const D=["Tab","Shift","Meta","Alt","Control"].includes(_.key);!this.didTextareaClearOnEdit&&this.hasValue()&&!D&&(this.value="",this.emitInputChange(_)),D||(this.didTextareaClearOnEdit=!0)}hasValue(){return""!==this.getValue()}getValue(){return this.value||""}renderLabel(){const{label:_}=this;return(0,Y.h)("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},void 0===_?(0,Y.h)("slot",{name:"label"}):(0,Y.h)("div",{class:"label-text"},_))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return void 0!==this.label||null!==this.labelSlot}renderLabelContainer(){return"md"===(0,ht.b)(this)&&"outline"===this.fill?[(0,Y.h)("div",{class:"textarea-outline-container"},(0,Y.h)("div",{class:"textarea-outline-start"}),(0,Y.h)("div",{class:{"textarea-outline-notch":!0,"textarea-outline-notch-hidden":!this.hasLabel}},(0,Y.h)("div",{class:"notch-spacer","aria-hidden":"true",ref:D=>this.notchSpacerEl=D},this.label)),(0,Y.h)("div",{class:"textarea-outline-end"})),this.renderLabel()]:this.renderLabel()}renderHintText(){const{helperText:_,errorText:k}=this;return[(0,Y.h)("div",{class:"helper-text"},_),(0,Y.h)("div",{class:"error-text"},k)]}renderCounter(){const{counter:_,maxlength:k,counterFormatter:D,value:q}=this;if(!0===_&&void 0!==k)return(0,Y.h)("div",{class:"counter"},l0(q,k,D))}renderBottomContent(){const{counter:_,helperText:k,errorText:D,maxlength:q}=this;if(k||D||!0===_&&void 0!==q)return(0,Y.h)("div",{class:"textarea-bottom"},this.renderHintText(),this.renderCounter())}render(){const{inputId:_,disabled:k,fill:D,shape:q,labelPlacement:ce,el:De,hasFocus:dt}=this,jt=(0,ht.b)(this),bn=this.getValue(),fi=vs("ion-item",this.el),Ii="md"===jt&&"outline"!==D&&!fi,oo=this.hasValue(),ji=null!==De.querySelector('[slot="start"], [slot="end"]');return(0,Y.h)(Y.xr,{key:"37595a18d77dea1a337ac1c672e5f08a4128111d",class:Hr(this.color,{[jt]:!0,"has-value":oo,"has-focus":dt,"label-floating":"stacked"===ce||"floating"===ce&&(oo||dt||ji),[`textarea-fill-${D}`]:void 0!==D,[`textarea-shape-${q}`]:void 0!==q,[`textarea-label-placement-${ce}`]:!0,"textarea-disabled":k})},(0,Y.h)("label",{key:"67342758743e5a40448a32ff695876d39778621f",class:"textarea-wrapper",htmlFor:_},this.renderLabelContainer(),(0,Y.h)("div",{key:"a994be8264bf5652811cf816d79a04178954e83f",class:"textarea-wrapper-inner"},(0,Y.h)("div",{key:"e09c93ebcd5b3d227d51e682ca23dfc7fd7027ad",class:"start-slot-wrapper"},(0,Y.h)("slot",{key:"d39758f21f19ae70aea21e9a9a7b7c20991fe593",name:"start"})),(0,Y.h)("div",{key:"6a4e10e53de4bb235ee30def4c9ae5bdee888816",class:"native-wrapper",ref:Do=>this.textareaWrapper=Do},(0,Y.h)("textarea",Object.assign({key:"9e254e551f124d972e9bc6b09ef0f2bb55890be5",class:"native-textarea",ref:Do=>this.nativeInput=Do,id:_,disabled:k,autoCapitalize:this.autocapitalize,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,minLength:this.minlength,maxLength:this.maxlength,name:this.name,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,cols:this.cols,rows:this.rows,wrap:this.wrap,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeyDown},this.inheritedAttributes),bn)),(0,Y.h)("div",{key:"a66aa2d2bc4778a0bec56a8b9ec9052a832eb3b2",class:"end-slot-wrapper"},(0,Y.h)("slot",{key:"8e6a90b4475de32e23afc593da4108610dcca663",name:"end"}))),Ii&&(0,Y.h)("div",{key:"6da03205a8daff45581b20f0af3938634a9d5f8c",class:"textarea-highlight"})),this.renderBottomContent())}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],value:["valueChanged"]}}static get style(){return{ios:'.sc-ion-textarea-ios-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0;--padding-end:0;--padding-bottom:8px;--padding-start:0;--border-radius:0;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}.textarea-label-placement-floating.sc-ion-textarea-ios-h,.textarea-label-placement-stacked.sc-ion-textarea-ios-h{--padding-top:0px;min-height:56px}[cols].sc-ion-textarea-ios-h:not([auto-grow]){width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.ion-color.sc-ion-textarea-ios-h{--highlight-color-focused:var(--ion-color-base);background:initial}ion-item.sc-ion-textarea-ios-h,ion-item .sc-ion-textarea-ios-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item[slot=start].sc-ion-textarea-ios-h,ion-item [slot=start].sc-ion-textarea-ios-h,ion-item[slot=end].sc-ion-textarea-ios-h,ion-item [slot=end].sc-ion-textarea-ios-h{width:auto}.native-textarea.sc-ion-textarea-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;white-space:pre-wrap;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-textarea.sc-ion-textarea-ios::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios{color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.cloned-input.sc-ion-textarea-ios{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-textarea-ios{inset-inline-start:0}.cloned-input.sc-ion-textarea-ios:disabled{opacity:1}[auto-grow].sc-ion-textarea-ios-h .cloned-input.sc-ion-textarea-ios{height:100%}[auto-grow].sc-ion-textarea-ios-h .native-textarea.sc-ion-textarea-ios{overflow:hidden}.textarea-wrapper.sc-ion-textarea-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:0px;padding-bottom:0px;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:start;align-items:flex-start;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-textarea-ios{position:relative;width:100%;height:100%}.has-focus.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{caret-color:var(--highlight-color)}.native-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.native-wrapper.sc-ion-textarea-ios{display:grid;min-width:inherit;max-width:inherit;min-height:inherit;max-height:inherit;grid-auto-rows:100%}.native-wrapper.sc-ion-textarea-ios::after{white-space:pre-wrap;content:attr(data-replicated-value) " ";visibility:hidden}.native-wrapper.sc-ion-textarea-ios::after{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.textarea-wrapper-inner.sc-ion-textarea-ios{display:-ms-flexbox;display:flex;width:100%;min-height:inherit}.ion-touched.ion-invalid.sc-ion-textarea-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-textarea-ios-h{--highlight-color:var(--highlight-color-valid)}.textarea-bottom.sc-ion-textarea-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-textarea-ios-h,.ion-touched.ion-invalid.sc-ion-textarea-ios-h{--border-color:var(--highlight-color)}.textarea-bottom.sc-ion-textarea-ios .error-text.sc-ion-textarea-ios{display:none;color:var(--highlight-color-invalid)}.textarea-bottom.sc-ion-textarea-ios .helper-text.sc-ion-textarea-ios{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-textarea-ios-h .textarea-bottom.sc-ion-textarea-ios .error-text.sc-ion-textarea-ios{display:block}.ion-touched.ion-invalid.sc-ion-textarea-ios-h .textarea-bottom.sc-ion-textarea-ios .helper-text.sc-ion-textarea-ios{display:none}.textarea-bottom.sc-ion-textarea-ios .counter.sc-ion-textarea-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.label-text-wrapper.sc-ion-textarea-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-textarea-ios,.sc-ion-textarea-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-textarea-ios,.textarea-outline-notch-hidden.sc-ion-textarea-ios{display:none}.textarea-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.textarea-label-placement-start.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:row;flex-direction:row}.textarea-label-placement-start.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-end.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.textarea-label-placement-end.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-ios-h .label-text.sc-ion-textarea-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.textarea-label-placement-stacked.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:left top;transform-origin:left top;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;max-width:100%;z-index:2}[dir=rtl].sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-label-placement-stacked.sc-ion-textarea-ios-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-label-placement-stacked.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-ios-h .native-wrapper.sc-ion-textarea-ios::after,.textarea-label-placement-floating[auto-grow].sc-ion-textarea-ios-h .native-wrapper.sc-ion-textarea-ios::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:8px;margin-bottom:0px}.sc-ion-textarea-ios-h.textarea-label-placement-stacked.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-stacked .sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-stacked.sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-stacked .sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-floating.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-floating .sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-floating.sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-floating .sc-ion-textarea-ios-s>[slot=end]{margin-top:8px}.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{opacity:0}.has-focus.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.has-value.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{opacity:1}.label-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.start-slot-wrapper.sc-ion-textarea-ios,.end-slot-wrapper.sc-ion-textarea-ios{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:start}.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-s>[slot=end]{margin-top:0}.sc-ion-textarea-ios-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-textarea-ios-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-textarea-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--padding-top:10px;--padding-end:0px;--padding-bottom:8px;--padding-start:0px;--highlight-height:0px;font-size:inherit}.textarea-disabled.sc-ion-textarea-ios-h{opacity:0.3}.sc-ion-textarea-ios-s>ion-button[slot=start].button-has-icon-only,.sc-ion-textarea-ios-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}',md:'.sc-ion-textarea-md-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0;--padding-end:0;--padding-bottom:8px;--padding-start:0;--border-radius:0;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}.textarea-label-placement-floating.sc-ion-textarea-md-h,.textarea-label-placement-stacked.sc-ion-textarea-md-h{--padding-top:0px;min-height:56px}[cols].sc-ion-textarea-md-h:not([auto-grow]){width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.ion-color.sc-ion-textarea-md-h{--highlight-color-focused:var(--ion-color-base);background:initial}ion-item.sc-ion-textarea-md-h,ion-item .sc-ion-textarea-md-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item[slot=start].sc-ion-textarea-md-h,ion-item [slot=start].sc-ion-textarea-md-h,ion-item[slot=end].sc-ion-textarea-md-h,ion-item [slot=end].sc-ion-textarea-md-h{width:auto}.native-textarea.sc-ion-textarea-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;white-space:pre-wrap;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-textarea.sc-ion-textarea-md::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md{color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.cloned-input.sc-ion-textarea-md{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-textarea-md{inset-inline-start:0}.cloned-input.sc-ion-textarea-md:disabled{opacity:1}[auto-grow].sc-ion-textarea-md-h .cloned-input.sc-ion-textarea-md{height:100%}[auto-grow].sc-ion-textarea-md-h .native-textarea.sc-ion-textarea-md{overflow:hidden}.textarea-wrapper.sc-ion-textarea-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:0px;padding-bottom:0px;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:start;align-items:flex-start;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-textarea-md{position:relative;width:100%;height:100%}.has-focus.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{caret-color:var(--highlight-color)}.native-wrapper.sc-ion-textarea-md textarea.sc-ion-textarea-md{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.native-wrapper.sc-ion-textarea-md{display:grid;min-width:inherit;max-width:inherit;min-height:inherit;max-height:inherit;grid-auto-rows:100%}.native-wrapper.sc-ion-textarea-md::after{white-space:pre-wrap;content:attr(data-replicated-value) " ";visibility:hidden}.native-wrapper.sc-ion-textarea-md::after{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.textarea-wrapper-inner.sc-ion-textarea-md{display:-ms-flexbox;display:flex;width:100%;min-height:inherit}.ion-touched.ion-invalid.sc-ion-textarea-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-textarea-md-h{--highlight-color:var(--highlight-color-valid)}.textarea-bottom.sc-ion-textarea-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-textarea-md-h,.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}.textarea-bottom.sc-ion-textarea-md .error-text.sc-ion-textarea-md{display:none;color:var(--highlight-color-invalid)}.textarea-bottom.sc-ion-textarea-md .helper-text.sc-ion-textarea-md{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md .error-text.sc-ion-textarea-md{display:block}.ion-touched.ion-invalid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md .helper-text.sc-ion-textarea-md{display:none}.textarea-bottom.sc-ion-textarea-md .counter.sc-ion-textarea-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.label-text-wrapper.sc-ion-textarea-md{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-textarea-md,.sc-ion-textarea-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-textarea-md,.textarea-outline-notch-hidden.sc-ion-textarea-md{display:none}.textarea-wrapper.sc-ion-textarea-md textarea.sc-ion-textarea-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.textarea-label-placement-start.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:row;flex-direction:row}.textarea-label-placement-start.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-end.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.textarea-label-placement-end.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-md-h .label-text.sc-ion-textarea-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.textarea-label-placement-stacked.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:left top;transform-origin:left top;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;max-width:100%;z-index:2}[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-label-placement-stacked.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-label-placement-stacked.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after,.textarea-label-placement-floating[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:8px;margin-bottom:0px}.sc-ion-textarea-md-h.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=end]{margin-top:8px}.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{opacity:0}.has-focus.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.has-value.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{opacity:1}.label-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.start-slot-wrapper.sc-ion-textarea-md,.end-slot-wrapper.sc-ion-textarea-md{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:start}.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-s>[slot=end]{margin-top:0}.sc-ion-textarea-md-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-textarea-md-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.textarea-fill-solid.sc-ion-textarea-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.textarea-fill-solid.ion-valid.sc-ion-textarea-md-h,.textarea-fill-solid.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md{border-top:none}@media (any-hover: hover){.textarea-fill-solid.sc-ion-textarea-md-h:hover{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.textarea-fill-solid.has-focus.sc-ion-textarea-md-h{--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}.label-floating.textarea-fill-solid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{max-width:calc(100% / 0.75)}.textarea-fill-outline.sc-ion-textarea-md-h{--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.textarea-fill-outline.textarea-shape-round.sc-ion-textarea-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.textarea-fill-outline.ion-valid.sc-ion-textarea-md-h,.textarea-fill-outline.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.textarea-fill-outline.sc-ion-textarea-md-h:hover{--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.textarea-fill-outline.has-focus.sc-ion-textarea-md-h{--border-width:var(--highlight-height);--border-color:var(--highlight-color)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md{border-top:none}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-bottom:none}.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-fill-outline.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{position:relative}.label-floating.textarea-fill-outline.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc(\n    (100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75\n  )}.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after,.textarea-fill-outline.textarea-label-placement-floating[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:12px;margin-bottom:0px}.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=end]{margin-top:12px}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-container.sc-ion-textarea-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{pointer-events:none}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.textarea-fill-outline.sc-ion-textarea-md-h .notch-spacer.sc-ion-textarea-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px;-ms-flex-positive:1;flex-grow:1}.label-floating.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md{border-top:none}.sc-ion-textarea-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--padding-top:18px;--padding-end:0px;--padding-bottom:8px;--padding-start:0px;--highlight-height:2px;font-size:inherit}.textarea-bottom.sc-ion-textarea-md .counter.sc-ion-textarea-md{letter-spacing:0.0333333333em}.textarea-label-placement-floating.has-focus.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-stacked.has-focus.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{color:var(--highlight-color)}.has-focus.textarea-label-placement-floating.ion-valid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.ion-touched.ion-invalid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.has-focus.textarea-label-placement-stacked.ion-valid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-stacked.ion-touched.ion-invalid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{color:var(--highlight-color)}.textarea-disabled.sc-ion-textarea-md-h{opacity:0.38}.textarea-highlight.sc-ion-textarea-md{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.textarea-highlight.sc-ion-textarea-md{inset-inline-start:0}.has-focus.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{bottom:0}.in-item.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{inset-inline-start:0}.textarea-shape-round.sc-ion-textarea-md-h{--border-radius:16px}.sc-ion-textarea-md-s>ion-button[slot=start].button-has-icon-only,.sc-ion-textarea-md-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}'}}},[38,"ion-textarea",{color:[513],autocapitalize:[1],autofocus:[4],clearOnEdit:[4,"clear-on-edit"],debounce:[2],disabled:[4],fill:[1],inputmode:[1],enterkeyhint:[1],maxlength:[2],minlength:[2],name:[1],placeholder:[1],readonly:[4],required:[4],spellcheck:[4],cols:[514],rows:[2],wrap:[1],autoGrow:[516,"auto-grow"],value:[1025],counter:[4],counterFormatter:[16],errorText:[1,"error-text"],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],shape:[1],hasFocus:[32],setFocus:[64],getInputElement:[64]},void 0,{debounce:["debounceChanged"],value:["valueChanged"]}]);let fn=0;const Nt=function mn(){typeof customElements>"u"||["ion-textarea"].forEach(_=>{"ion-textarea"===_&&(customElements.get(_)||customElements.define(_,rn))})},vo=["outletContent"],Si=["*"];function ko(B,_){if(1&B&&(ne.j41(0,"div",1),ne.eu8(1,2),ne.k0s()),2&B){const k=ne.XpG();ne.R7$(),ne.Y8G("ngTemplateOutlet",k.template)}}const Rs=["outlet"],$o=[[["","slot","top"]],"*"],No=["[slot=top]","*"];let Xr=(()=>{var B;let _=((0,V.A)(B=class extends l.Rg{constructor(D,q,ce,De,dt,jt,bn,fi){super(D,q,ce,De,dt,jt,bn,fi),(0,V.A)(this,"parentOutlet",void 0),(0,V.A)(this,"outletContent",void 0),this.parentOutlet=fi}},"\u0275fac",function(D){return new(D||B)(ne.kS0("name"),ne.kS0("tabs"),ne.rXU(Pn.aZ),ne.rXU(ne.aKT),ne.rXU(ki.Ix),ne.rXU(ne.SKi),ne.rXU(ki.nX),ne.rXU(B,12))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-router-outlet"]],viewQuery:function(D,q){if(1&D&&ne.GBs(vo,7,ne.c1b),2&D){let ce;ne.mGM(ce=ne.lsd())&&(q.outletContent=ce.first)}},standalone:!0,features:[ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:3,vars:0,consts:[["outletContent",""]],template:function(D,q){1&D&&(ne.NAR(),ne.qex(0,null,0),ne.SdG(2),ne.bVm())},encapsulation:2})),B);return _=(0,se.Cg)([(0,l.hO)({defineCustomElementFn:vn})],_),_})(),xr=(()=>{var B;let _=((0,V.A)(B=class extends l.Sb{},"\u0275fac",(()=>{let k;return function(q){return(k||(k=ne.xGo(B)))(q||B)}})()),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-modal"]],standalone:!0,features:[ne.Vt3,ne.aNF],decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(D,q){1&D&&ne.DNE(0,ko,2,1,"div",0),2&D&&ne.Y8G("ngIf",q.isCmpOpen||q.keepContentsMounted)},dependencies:[Pn.MD,Pn.bT,Pn.T3],encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([(0,l.hO)({defineCustomElementFn:Hi})],_),_})();const Ls=(B,_)=>{const k=B.prototype;_.forEach(D=>{Object.defineProperty(k,D,{get(){return this.el[D]},set(q){this.z.runOutsideAngular(()=>this.el[D]=q)},configurable:!0})})},Kl=(B,_)=>{const k=B.prototype;_.forEach(D=>{k[D]=function(){const q=arguments;return this.z.runOutsideAngular(()=>this.el[D].apply(this.el,q))}})},Yl=(B,_,k)=>{k.forEach(D=>B[D]=(0,Dt.R)(_,D))};function Hs(B){return function(k){const{defineCustomElementFn:D,inputs:q,methods:ce}=B;return void 0!==D&&D(),q&&Ls(k,q),ce&&Kl(k,ce),k}}let Ag=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-app"]],standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:nr})],_),_})(),F2=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:ke,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],_),_})(),xm=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Tc,inputs:["collapse"]})],_),_})(),u0=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:qc,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],_),_})(),W1=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card-content"]],inputs:{mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Xd,inputs:["mode"]})],_),_})(),yp=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Ch,inputs:["color","mode","translucent"]})],_),_})(),Dg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Hl,inputs:["color","mode"]})],_),_})(),V2=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Cr,inputs:["color","mode"]})],_),_})(),_v=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Tn,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],_),_})(),r3=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-content"]],inputs:{color:"color",fixedSlotPlacement:"fixedSlotPlacement",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Ql,inputs:["color","fixedSlotPlacement","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],_),_})(),$2=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Sl,inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],_),_})(),S=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Ei,inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],_),_})(),w=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Nl,inputs:["fixed"]})],_),_})(),P=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:qh,inputs:["collapse","mode","translucent"]})],_),_})(),U=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:g1,inputs:["alt","src"]})],_),_})(),rt=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:J1,inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],_),_})(),Ir=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:el,inputs:["color","mode","position"]})],_),_})(),ar=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Ua,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],_),_})(),ho=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-progress-bar"]],inputs:{buffer:"buffer",color:"color",mode:"mode",reversed:"reversed",type:"type",value:"value"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:ih,inputs:["buffer","color","mode","reversed","type","value"]})],_),_})(),Pg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-row"]],standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:ns})],_),_})(),c4=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-segment-button"]],inputs:{disabled:"disabled",layout:"layout",mode:"mode",type:"type",value:"value"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:fu,inputs:["disabled","layout","mode","type","value"]})],_),_})(),z4=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:b,inputs:["disabled","value"]})],_),_})(),Xp=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Je,inputs:["color","mode","selectedTab","translucent"]})],_),_})(),bv=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:yn,inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],_),_})(),tg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:gn,inputs:["color","mode"]})],_),_})(),ng=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-thumbnail"]],standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:j})],_),_})(),wv=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Yi,inputs:["color","size"]})],_),_})(),zg=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:O0,inputs:["color","mode"]})],_),_})(),u4=(()=>{var B;class _ extends l.p4{constructor(...D){super(...D),(0,V.A)(this,"outlet",void 0),(0,V.A)(this,"tabBar",void 0),(0,V.A)(this,"tabBars",void 0)}}return B=_,(0,V.A)(_,"\u0275fac",(()=>{let k;return function(q){return(k||(k=ne.xGo(B)))(q||B)}})()),(0,V.A)(_,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-tabs"]],contentQueries:function(D,q,ce){if(1&D&&(ne.wni(ce,Xp,5),ne.wni(ce,Xp,4)),2&D){let De;ne.mGM(De=ne.lsd())&&(q.tabBar=De.first),ne.mGM(De=ne.lsd())&&(q.tabBars=De)}},viewQuery:function(D,q){if(1&D&&ne.GBs(Rs,5,Xr),2&D){let ce;ne.mGM(ce=ne.lsd())&&(q.outlet=ce.first)}},standalone:!0,features:[ne.Vt3,ne.aNF],ngContentSelectors:No,decls:6,vars:0,consts:[["tabsInner",""],["outlet",""],[1,"tabs-inner"],["tabs","true",3,"stackWillChange","stackDidChange"]],template:function(D,q){if(1&D){const ce=ne.RV6();ne.NAR($o),ne.SdG(0),ne.j41(1,"div",2,0)(3,"ion-router-outlet",3,1),ne.bIt("stackWillChange",function(dt){return ne.eBV(ce),ne.Njj(q.onStackWillChange(dt))})("stackDidChange",function(dt){return ne.eBV(ce),ne.Njj(q.onStackDidChange(dt))}),ne.k0s()(),ne.SdG(5,1)}},dependencies:[Xr],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]})),_})(),d4=(()=>{var B;class _ extends l.Kb{constructor(){super(pr),(0,V.A)(this,"angularDelegate",(0,ne.WQX)(l.Yq)),(0,V.A)(this,"injector",(0,ne.WQX)(ne.zZn)),(0,V.A)(this,"environmentInjector",(0,ne.WQX)(ne.uvJ)),Hi()}create(D){return super.create({...D,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return B=_,(0,V.A)(_,"\u0275fac",function(D){return new(D||B)}),(0,V.A)(_,"\u0275prov",ne.jDH({token:B,factory:B.\u0275fac})),_})();class j2 extends l.Kb{constructor(){super(zr),(0,V.A)(this,"angularDelegate",(0,ne.WQX)(l.Yq)),(0,V.A)(this,"injector",(0,ne.WQX)(ne.zZn)),(0,V.A)(this,"environmentInjector",(0,ne.WQX)(ne.uvJ)),et()}create(_){return super.create({..._,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const o2=(B={})=>(0,ne.EmA)([{provide:l.sR,useValue:B},{provide:ne.hnV,useFactory:Cm,multi:!0,deps:[l.sR,Pn.qQ]},(0,l.YV)(),l.Yq,d4,j2]),Cm=(B,_)=>()=>{_.documentElement.classList.add("ion-ce"),(0,ht.i)(B)};let Og=(()=>{var B;class _ extends l.Kb{constructor(){super(cn),lo()}}return B=_,(0,V.A)(_,"\u0275fac",function(D){return new(D||B)}),(0,V.A)(_,"\u0275prov",ne.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})),_})(),d0=(()=>{var B;class _ extends l.Kb{constructor(){super(Mi),function Ki(){typeof customElements>"u"||["ion-toast","ion-icon","ion-ripple-effect"].forEach(_=>{switch(_){case"ion-toast":customElements.get(_)||customElements.define(_,ll);break;case"ion-icon":customElements.get(_)||me();break;case"ion-ripple-effect":customElements.get(_)||Va()}})}()}}return B=_,(0,V.A)(_,"\u0275fac",function(D){return new(D||B)}),(0,V.A)(_,"\u0275prov",ne.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})),_})();const r2=["checked","color","disabled","indeterminate","justify","labelPlacement","mode","name","value"],Da={provide:Ka.kq,useExisting:(0,ne.Rfq)(()=>ch),multi:!0};let ch=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionChange","ionFocus","ionBlur"])}writeValue(D){this.elementRef.nativeElement.checked=this.lastValue=D,(0,l.z3)(this.elementRef)}handleIonChange(D){this.handleValueChange(D,D.checked)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-checkbox"]],hostBindings:function(D,q){1&D&&ne.bIt("ionChange",function(De){return q.handleIonChange(De.target)})},inputs:{checked:"checked",color:"color",disabled:"disabled",indeterminate:"indeterminate",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},standalone:!0,features:[ne.Jv_([Da]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:t1,inputs:r2})],_),_})(),s2=(()=>{var B;let _=((0,V.A)(B=class{constructor(D,q,ce){(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},standalone:!0,features:[ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Xm,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],_),_})();const Sm=["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],Tm={provide:Ka.kq,useExisting:(0,ne.Rfq)(()=>Mm),multi:!0};let Mm=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}handleIonInput(D){this.handleValueChange(D,D.value)}registerOnChange(D){super.registerOnChange(q=>{D("number"===this.type?""===q?null:parseFloat(q):q)})}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-input"]],hostBindings:function(D,q){1&D&&ne.bIt("ionInput",function(De){return q.handleIonInput(De.target)})},inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},standalone:!0,features:[ne.Jv_([Tm]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:ic,inputs:Sm,methods:["setFocus","getInputElement"]})],_),_})();const kf=["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","name","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],G2={provide:Ka.kq,useExisting:(0,ne.Rfq)(()=>Kp),multi:!0};let Kp=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}handleIonInput(D){this.handleValueChange(D,D.value)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-searchbar"]],hostBindings:function(D,q){1&D&&ne.bIt("ionInput",function(De){return q.handleIonInput(De.target)})},inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",name:"name",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},standalone:!0,features:[ne.Jv_([G2]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:_m,inputs:kf,methods:["setFocus","getInputElement"]})],_),_})();const Yp=["color","disabled","mode","scrollable","selectOnFocus","swipeGesture","value"],a2={provide:Ka.kq,useExisting:(0,ne.Rfq)(()=>Pm),multi:!0};let Pm=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionChange"])}handleIonChange(D){this.handleValueChange(D,D.value)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-segment"]],hostBindings:function(D,q){1&D&&ne.bIt("ionChange",function(De){return q.handleIonChange(De.target)})},inputs:{color:"color",disabled:"disabled",mode:"mode",scrollable:"scrollable",selectOnFocus:"selectOnFocus",swipeGesture:"swipeGesture",value:"value"},standalone:!0,features:[ne.Jv_([a2]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:D2,inputs:Yp})],_),_})();const rg=["cancelText","color","compareWith","disabled","expandedIcon","fill","interface","interfaceOptions","justify","label","labelPlacement","mode","multiple","name","okText","placeholder","selectedText","shape","toggleIcon","value"],l2={provide:Ka.kq,useExisting:(0,ne.Rfq)(()=>Sf),multi:!0};let Sf=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}handleIonChange(D){this.handleValueChange(D,D.value)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-select"]],hostBindings:function(D,q){1&D&&ne.bIt("ionChange",function(De){return q.handleIonChange(De.target)})},inputs:{cancelText:"cancelText",color:"color",compareWith:"compareWith",disabled:"disabled",expandedIcon:"expandedIcon",fill:"fill",interface:"interface",interfaceOptions:"interfaceOptions",justify:"justify",label:"label",labelPlacement:"labelPlacement",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",shape:"shape",toggleIcon:"toggleIcon",value:"value"},standalone:!0,features:[ne.Jv_([l2]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:ze,inputs:rg,methods:["open"]})],_),_})();const Hd=["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","maxlength","minlength","mode","name","placeholder","readonly","required","rows","shape","spellcheck","value","wrap"],sg={provide:Ka.kq,useExisting:(0,ne.Rfq)(()=>Mu),multi:!0};let Mu=(()=>{var B;let _=((0,V.A)(B=class extends l.fL{constructor(D,q,ce,De){super(De,q),(0,V.A)(this,"z",void 0),(0,V.A)(this,"el",void 0),this.z=ce,D.detach(),this.el=q.nativeElement,Yl(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}handleIonInput(D){this.handleValueChange(D,D.value)}},"\u0275fac",function(D){return new(D||B)(ne.rXU(ne.gRc),ne.rXU(ne.aKT),ne.rXU(ne.SKi),ne.rXU(ne.zZn))}),(0,V.A)(B,"\u0275cmp",ne.VBU({type:B,selectors:[["ion-textarea"]],hostBindings:function(D,q){1&D&&ne.bIt("ionInput",function(De){return q.handleIonInput(De.target)})},inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",shape:"shape",spellcheck:"spellcheck",value:"value",wrap:"wrap"},standalone:!0,features:[ne.Jv_([sg]),ne.Vt3,ne.aNF],ngContentSelectors:Si,decls:1,vars:0,template:function(D,q){1&D&&(ne.NAR(),ne.SdG(0))},encapsulation:2,changeDetection:0})),B);return _=(0,se.Cg)([Hs({defineCustomElementFn:Nt,inputs:Hd,methods:["setFocus","getInputElement"]})],_),_})()},1771:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{L2:()=>ft,wt:()=>tt,xr:()=>vs,lh:()=>ue,$x:()=>au,OX:()=>mo,Wi:()=>Bn,h:()=>Lr,w$:()=>ts,gv:()=>si,iY:()=>Jt,zb:()=>Yn,bN:()=>Fi});var V=_e(467),se={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},l="app",qe=Object.defineProperty,ft={isDev:!!se.isDev,isBrowser:!0,isServer:!1,isTesting:!!se.isTesting},Xt=se.hotModuleReplacement?window.__STENCIL_HOSTREFS__||(window.__STENCIL_HOSTREFS__=new WeakMap):new WeakMap,Ut=Re=>Xt.get(Re),At=(Re,We)=>We in Re,vt=(Re,We)=>(0,console.error)(Re,We),un=se.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],xn=(...Re)=>console.error(...un,...Re),on=(...Re)=>console.warn(...un,...Re),An=new Map,Ot=new Map,vn=[],pn="s-id",Fn="http://www.w3.org/1999/xlink",Ke=["formAssociatedCallback","formResetCallback","formDisabledCallback","formStateRestoreCallback"],Ae=typeof window<"u"?window:{},Ge=Ae.document||{head:{}},tt=Ae.HTMLElement||class{},zt={$flags$:0,$resourcesUrl$:"",jmp:Re=>Re(),raf:Re=>requestAnimationFrame(Re),ael:(Re,We,Tt,an)=>Re.addEventListener(We,Tt,an),rel:(Re,We,Tt,an)=>Re.removeEventListener(We,Tt,an),ce:(Re,We)=>new CustomEvent(Re,We)},Yn=Re=>{Object.assign(zt,Re)},cn=se.shadowDom,_o=(()=>{let Re=!1;try{Ge.addEventListener("e",null,Object.defineProperty({},"passive",{get(){Re=!0}}))}catch{}return Re})(),pr=!!se.constructableCSS&&(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),jo=0,zr=!1,Mi=[],rs=[],$i=[],br=(Re,We)=>Tt=>{Re.push(Tt),zr||(zr=!0,We&&4&zt.$flags$?ao(yi):zt.raf(yi))},Jr=Re=>{for(let We=0;We<Re.length;We++)try{Re[We](performance.now())}catch(Tt){vt(Tt)}Re.length=0},Li=(Re,We)=>{let Tt=0,an=0;for(;Tt<Re.length&&(an=performance.now())<We;)try{Re[Tt++](an)}catch($n){vt($n)}Tt===Re.length?Re.length=0:0!==Tt&&Re.splice(0,Tt)},yi=()=>{if(se.asyncQueue&&jo++,Jr(Mi),se.asyncQueue){const Re=2==(6&zt.$flags$)?performance.now()+14*Math.ceil(.1*jo):1/0;Li(rs,Re),Li($i,Re),rs.length>0&&($i.push(...rs),rs.length=0),(zr=Mi.length+rs.length+$i.length>0)?zt.raf(yi):jo=0}else Jr(rs),(zr=Mi.length>0)&&zt.raf(yi)},ao=Re=>Promise.resolve(void 0).then(Re),si=br(Mi,!1),Fi=br(rs,!0),mo=Re=>{const We=new URL(Re,zt.$resourcesUrl$);return We.origin!==Ae.location.origin?We.href:We.pathname},es={},cs=Re=>"object"==(Re=typeof Re)||"function"===Re;((Re,We)=>{for(var Tt in We)qe(Re,Tt,{get:We[Tt],enumerable:!0})})({},{err:()=>Qr,map:()=>Ho,ok:()=>Kr,unwrap:()=>Nr,unwrapErr:()=>ir});var Kr=Re=>({isOk:!0,isErr:!1,value:Re}),Qr=Re=>({isOk:!1,isErr:!0,value:Re});function Ho(Re,We){if(Re.isOk){const Tt=We(Re.value);return Tt instanceof Promise?Tt.then(an=>Kr(an)):Kr(Tt)}if(Re.isErr)return Qr(Re.value);throw"should never get here"}var Nr=Re=>{if(Re.isOk)return Re.value;throw Re.value},ir=Re=>{if(Re.isErr)return Re.value;throw Re.value},_r=0,Dr=(Re,We="")=>{if(se.profile&&performance.mark){const Tt=`st:${Re}:${We}:${_r++}`;return performance.mark(Tt),()=>performance.measure(`[Stencil] ${Re}() <${We}>`,Tt)}return()=>{}},Lr=(Re,We,...Tt)=>{let an=null,$n=null,Un=null,Ai=!1,Ti=!1;const mi=[],lo=hr=>{for(let gr=0;gr<hr.length;gr++)an=hr[gr],Array.isArray(an)?lo(an):null!=an&&"boolean"!=typeof an&&((Ai="function"!=typeof Re&&!cs(an))?an=String(an):se.isDev&&"function"!=typeof Re&&void 0===an.$flags$&&xn("vNode passed as children has unexpected type.\nMake sure it's using the correct h() function.\nEmpty objects can also be the cause, look for JSX comments that became objects."),Ai&&Ti?mi[mi.length-1].$text$+=an:mi.push(Ai?Xs(null,an):an),Ti=Ai)};if(lo(Tt),We&&(se.isDev&&"input"===Re&&Xn(We),se.vdomKey&&We.key&&($n=We.key),se.slotRelocation&&We.name&&(Un=We.name),se.vdomClass)){const hr=We.className||We.class;hr&&(We.class="object"!=typeof hr?hr:Object.keys(hr).filter(gr=>hr[gr]).join(" "))}if(se.isDev&&mi.some(Hr)&&xn("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),se.vdomFunctional&&"function"==typeof Re)return Re(null===We?{}:We,mi,Wi);const Xo=Xs(Re,null);return Xo.$attrs$=We,mi.length>0&&(Xo.$children$=mi),se.vdomKey&&(Xo.$key$=$n),se.slotRelocation&&(Xo.$name$=Un),Xo},Xs=(Re,We)=>{const Tt={$flags$:0,$tag$:Re,$text$:We,$elm$:null,$children$:null};return se.vdomAttribute&&(Tt.$attrs$=null),se.vdomKey&&(Tt.$key$=null),se.slotRelocation&&(Tt.$name$=null),Tt},vs={},Hr=Re=>Re&&Re.$tag$===vs,Wi={forEach:(Re,We)=>Re.map(ei).forEach(We),map:(Re,We)=>Re.map(ei).map(We).map(Pi)},ei=Re=>({vattrs:Re.$attrs$,vchildren:Re.$children$,vkey:Re.$key$,vname:Re.$name$,vtag:Re.$tag$,vtext:Re.$text$}),Pi=Re=>{if("function"==typeof Re.vtag){const Tt={...Re.vattrs};return Re.vkey&&(Tt.key=Re.vkey),Re.vname&&(Tt.name=Re.vname),Lr(Re.vtag,Tt,...Re.vchildren||[])}const We=Xs(Re.vtag,Re.vtext);return We.$attrs$=Re.vattrs,We.$children$=Re.vchildren,We.$key$=Re.vkey,We.$name$=Re.vname,We},Xn=Re=>{const We=Object.keys(Re),Tt=We.indexOf("value");if(-1===Tt)return;const an=We.indexOf("type"),$n=We.indexOf("min"),Un=We.indexOf("max"),Ai=We.indexOf("step");(Tt<an||Tt<$n||Tt<Un||Tt<Ai)&&on('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},mt=(Re,We,Tt,an,$n,Un,Ai)=>{let Ti,mi,lo,Xo;if(1===Un.nodeType){for(Ti=Un.getAttribute("c-id"),Ti&&(mi=Ti.split("."),(mi[0]===Ai||"0"===mi[0])&&(lo={$flags$:0,$hostId$:mi[0],$nodeId$:mi[1],$depth$:mi[2],$index$:mi[3],$tag$:Un.tagName.toLowerCase(),$elm$:Un,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},We.push(lo),Un.removeAttribute("c-id"),Re.$children$||(Re.$children$=[]),Re.$children$[lo.$index$]=lo,Re=lo,an&&"0"===lo.$depth$&&(an[lo.$index$]=lo.$elm$))),Xo=Un.childNodes.length-1;Xo>=0;Xo--)mt(Re,We,Tt,an,$n,Un.childNodes[Xo],Ai);if(Un.shadowRoot)for(Xo=Un.shadowRoot.childNodes.length-1;Xo>=0;Xo--)mt(Re,We,Tt,an,$n,Un.shadowRoot.childNodes[Xo],Ai)}else if(8===Un.nodeType)mi=Un.nodeValue.split("."),(mi[1]===Ai||"0"===mi[1])&&(Ti=mi[0],lo={$flags$:0,$hostId$:mi[1],$nodeId$:mi[2],$depth$:mi[3],$index$:mi[4],$elm$:Un,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Ti?(lo.$elm$=Un.nextSibling,lo.$elm$&&3===lo.$elm$.nodeType&&(lo.$text$=lo.$elm$.textContent,We.push(lo),Un.remove(),Re.$children$||(Re.$children$=[]),Re.$children$[lo.$index$]=lo,an&&"0"===lo.$depth$&&(an[lo.$index$]=lo.$elm$))):lo.$hostId$===Ai&&("s"===Ti?(lo.$tag$="slot",Un["s-sn"]=mi[5]?lo.$name$=mi[5]:"",Un["s-sr"]=!0,se.shadowDom&&an&&(lo.$elm$=Ge.createElement(lo.$tag$),lo.$name$&&lo.$elm$.setAttribute("name",lo.$name$),Un.parentNode.insertBefore(lo.$elm$,Un),Un.remove(),"0"===lo.$depth$&&(an[lo.$index$]=lo.$elm$)),Tt.push(lo),Re.$children$||(Re.$children$=[]),Re.$children$[lo.$index$]=lo):"r"===Ti&&(se.shadowDom&&an?Un.remove():se.slotRelocation&&($n["s-cr"]=Un,Un["s-cn"]=!0))));else if(Re&&"style"===Re.$tag$){const hr=Xs(null,Un.textContent);hr.$elm$=Un,hr.$index$="0",Re.$children$=[hr]}},Ye=(Re,We)=>{if(1===Re.nodeType){let Tt=0;for(;Tt<Re.childNodes.length;Tt++)Ye(Re.childNodes[Tt],We);if(Re.shadowRoot)for(Tt=0;Tt<Re.shadowRoot.childNodes.length;Tt++)Ye(Re.shadowRoot.childNodes[Tt],We)}else if(8===Re.nodeType){const Tt=Re.nodeValue.split(".");"o"===Tt[0]&&(We.set(Tt[1]+"."+Tt[2],Re),Re.nodeValue="",Re["s-en"]=Tt[3])}},Jt=Re=>vn.push(Re),Bn=Re=>Ut(Re).$modeName$,ue=(Re,We,Tt)=>{const an=(Re=>se.lazyLoad?Ut(Re).$hostElement$:Re)(Re);return{emit:$n=>(se.isDev&&!an.isConnected&&on(`The "${We}" event was emitted, but the dispatcher node is no longer connected to the dom.`),ae(an,We,{bubbles:!!(4&Tt),composed:!!(2&Tt),cancelable:!!(1&Tt),detail:$n}))}},ae=(Re,We,Tt)=>{const an=zt.ce(We,Tt);return Re.dispatchEvent(an),an},we=new WeakMap,it=(Re,We,Tt)=>{var an;const $n=En(We,Tt),Un=Ot.get($n);if(!se.attachStyles)return $n;if(Re=11===Re.nodeType?Re:Ge,Un)if("string"==typeof Un){let Ti,Ai=we.get(Re=Re.head||Re);if(Ai||we.set(Re,Ai=new Set),!Ai.has($n)){if(se.hydrateClientSide&&Re.host&&(Ti=Re.querySelector(`[sty-id="${$n}"]`)))Ti.innerHTML=Un;else{Ti=Ge.createElement("style"),Ti.innerHTML=Un;const mi=null!=(an=zt.$nonce$)?an:function Cs(Re){var We,Tt,an;return null!=(an=null==(Tt=null==(We=Re.head)?void 0:We.querySelector('meta[name="csp-nonce"]'))?void 0:Tt.getAttribute("content"))?an:void 0}(Ge);null!=mi&&Ti.setAttribute("nonce",mi),(se.hydrateServerSide||se.hotModuleReplacement)&&Ti.setAttribute("sty-id",$n),Re.insertBefore(Ti,Re.querySelector("link"))}4&We.$flags$&&(Ti.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),Ai&&Ai.add($n)}}else se.constructableCSS&&!Re.adoptedStyleSheets.includes(Un)&&(Re.adoptedStyleSheets=[...Re.adoptedStyleSheets,Un]);return $n},En=(Re,We)=>"sc-"+(se.mode&&We&&32&Re.$flags$?Re.$tagName$+"-"+We:Re.$tagName$),Gn=(Re,We,Tt,an,$n,Un)=>{if(Tt!==an){let Ai=At(Re,We),Ti=We.toLowerCase();if(se.vdomClass&&"class"===We){const mi=Re.classList,lo=Vi(Tt),Xo=Vi(an);mi.remove(...lo.filter(hr=>hr&&!Xo.includes(hr))),mi.add(...Xo.filter(hr=>hr&&!lo.includes(hr)))}else if(se.vdomStyle&&"style"===We){if(se.updatable)for(const mi in Tt)(!an||null==an[mi])&&(!se.hydrateServerSide&&mi.includes("-")?Re.style.removeProperty(mi):Re.style[mi]="");for(const mi in an)(!Tt||an[mi]!==Tt[mi])&&(!se.hydrateServerSide&&mi.includes("-")?Re.style.setProperty(mi,an[mi]):Re.style[mi]=an[mi])}else if(!se.vdomKey||"key"!==We)if(se.vdomRef&&"ref"===We)an&&an(Re);else if(!se.vdomListener||(se.lazyLoad?Ai:Re.__lookupSetter__(We))||"o"!==We[0]||"n"!==We[1]){if(se.vdomPropOrAttr){const mi=cs(an);if((Ai||mi&&null!==an)&&!$n)try{if(Re.tagName.includes("-"))Re[We]=an;else{const Xo=null==an?"":an;"list"===We?Ai=!1:(null==Tt||Re[We]!=Xo)&&(Re[We]=Xo)}}catch{}let lo=!1;se.vdomXlink&&Ti!==(Ti=Ti.replace(/^xlink\:?/,""))&&(We=Ti,lo=!0),null==an||!1===an?(!1!==an||""===Re.getAttribute(We))&&(se.vdomXlink&&lo?Re.removeAttributeNS(Fn,We):Re.removeAttribute(We)):(!Ai||4&Un||$n)&&!mi&&(an=!0===an?"":an,se.vdomXlink&&lo?Re.setAttributeNS(Fn,We,an):Re.setAttribute(We,an))}}else if(We="-"===We[2]?We.slice(3):At(Ae,Ti)?Ti.slice(2):Ti[2]+We.slice(3),Tt||an){const mi=We.endsWith(Bo);We=We.replace(rr,""),Tt&&zt.rel(Re,We,Tt,mi),an&&zt.ael(Re,We,an,mi)}}},Bi=/\s/,Vi=Re=>Re?Re.split(Bi):[],Bo="Capture",rr=new RegExp(Bo+"$"),oi=(Re,We,Tt)=>{const an=11===We.$elm$.nodeType&&We.$elm$.host?We.$elm$.host:We.$elm$,$n=Re&&Re.$attrs$||es,Un=We.$attrs$||es;if(se.updatable)for(const Ai of Vn(Object.keys($n)))Ai in Un||Gn(an,Ai,$n[Ai],void 0,Tt,We.$flags$);for(const Ai of Vn(Object.keys(Un)))Gn(an,Ai,$n[Ai],Un[Ai],Tt,We.$flags$)};function Vn(Re){return Re.includes("ref")?[...Re.filter(We=>"ref"!==We),"ref"]:Re}var hi,po,Zi,Yt=!1,ri=!1,Ri=!1,Uo=!1,mr=(Re,We,Tt,an)=>{var $n;const Un=We.$children$[Tt];let Ti,mi,lo,Ai=0;if(se.slotRelocation&&!Yt&&(Ri=!0,"slot"===Un.$tag$&&(hi&&an.classList.add(hi+"-s"),Un.$flags$|=Un.$children$?2:1)),se.isDev&&Un.$elm$&&xn(`The JSX ${null!==Un.$text$?`"${Un.$text$}" text`:`"${Un.$tag$}" element`} node should not be shared within the same renderer. The renderer caches element lookups in order to improve performance. However, a side effect from this is that the exact same JSX node should not be reused. For more information please see https://stenciljs.com/docs/templating-jsx#avoid-shared-jsx-nodes`),se.vdomText&&null!==Un.$text$)Ti=Un.$elm$=Ge.createTextNode(Un.$text$);else if(se.slotRelocation&&1&Un.$flags$)Ti=Un.$elm$=se.isDebug||se.hydrateServerSide?_u(Un):Ge.createTextNode("");else{if(se.svg&&!Uo&&(Uo="svg"===Un.$tag$),Ti=Un.$elm$=se.svg?Ge.createElementNS(Uo?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!Yt&&se.slotRelocation&&2&Un.$flags$?"slot-fb":Un.$tag$):Ge.createElement(!Yt&&se.slotRelocation&&2&Un.$flags$?"slot-fb":Un.$tag$),se.svg&&Uo&&"foreignObject"===Un.$tag$&&(Uo=!1),se.vdomAttribute&&oi(null,Un,Uo),(se.shadowDom||se.scoped)&&(Re=>null!=Re)(hi)&&Ti["s-si"]!==hi&&Ti.classList.add(Ti["s-si"]=hi),se.scoped&&Fa(Ti,an),Un.$children$)for(Ai=0;Ai<Un.$children$.length;++Ai)mi=mr(Re,Un,Ai,Ti),mi&&Ti.appendChild(mi);se.svg&&("svg"===Un.$tag$?Uo=!1:"foreignObject"===Ti.tagName&&(Uo=!0))}return Ti["s-hn"]=Zi,se.slotRelocation&&3&Un.$flags$&&(Ti["s-sr"]=!0,Ti["s-cr"]=po,Ti["s-sn"]=Un.$name$||"",Ti["s-rf"]=null==($n=Un.$attrs$)?void 0:$n.ref,lo=Re&&Re.$children$&&Re.$children$[Tt],lo&&lo.$tag$===Un.$tag$&&Re.$elm$&&(se.experimentalSlotFixes?ss(Re.$elm$):Vr(Re.$elm$,!1))),Ti},ss=Re=>{zt.$flags$|=1;const We=Re.closest(Zi.toLowerCase());if(null!=We){const Tt=Array.from(We.childNodes).find($n=>$n["s-cr"]),an=Array.from(Re.childNodes);for(const $n of Tt?an.reverse():an)null!=$n["s-sh"]&&(va(We,$n,null!=Tt?Tt:null),$n["s-sh"]=void 0,Ri=!0)}zt.$flags$&=-2},Vr=(Re,We)=>{zt.$flags$|=1;const Tt=Array.from(Re.childNodes);if(Re["s-sr"]&&se.experimentalSlotFixes){let an=Re;for(;an=an.nextSibling;)an&&an["s-sn"]===Re["s-sn"]&&an["s-sh"]===Zi&&Tt.push(an)}for(let an=Tt.length-1;an>=0;an--){const $n=Tt[an];$n["s-hn"]!==Zi&&$n["s-ol"]&&(va(Hi($n),$n,Ar($n)),$n["s-ol"].remove(),$n["s-ol"]=void 0,$n["s-sh"]=void 0,Ri=!0),We&&Vr($n,We)}zt.$flags$&=-2},Na=(Re,We,Tt,an,$n,Un)=>{let Ti,Ai=se.slotRelocation&&Re["s-cr"]&&Re["s-cr"].parentNode||Re;for(se.shadowDom&&Ai.shadowRoot&&Ai.tagName===Zi&&(Ai=Ai.shadowRoot);$n<=Un;++$n)an[$n]&&(Ti=mr(null,Tt,$n,Re),Ti&&(an[$n].$elm$=Ti,va(Ai,Ti,se.slotRelocation?Ar(We):We)))},Rl=(Re,We,Tt)=>{for(let an=We;an<=Tt;++an){const $n=Re[an];if($n){const Un=$n.$elm$;sa($n),Un&&(se.slotRelocation&&(ri=!0,Un["s-ol"]?Un["s-ol"].remove():Vr(Un,!0)),Un.remove())}}},Ra=(Re,We,Tt=!1)=>Re.$tag$===We.$tag$&&(se.slotRelocation&&"slot"===Re.$tag$?Re.$name$===We.$name$:!(se.vdomKey&&!Tt)||Re.$key$===We.$key$),Ar=Re=>Re&&Re["s-ol"]||Re,Hi=Re=>(Re["s-ol"]?Re["s-ol"]:Re).parentNode,Zo=(Re,We,Tt=!1)=>{const an=We.$elm$=Re.$elm$,$n=Re.$children$,Un=We.$children$,Ai=We.$tag$,Ti=We.$text$;let mi;se.vdomText&&null!==Ti?se.vdomText&&se.slotRelocation&&(mi=an["s-cr"])?mi.parentNode.textContent=Ti:se.vdomText&&Re.$text$!==Ti&&(an.data=Ti):(se.svg&&(Uo="svg"===Ai||"foreignObject"!==Ai&&Uo),(se.vdomAttribute||se.reflect)&&(se.slot&&"slot"===Ai&&!Yt?se.experimentalSlotFixes&&Re.$name$!==We.$name$&&(We.$elm$["s-sn"]=We.$name$||"",ss(We.$elm$.parentElement)):oi(Re,We,Uo)),se.updatable&&null!==$n&&null!==Un?((Re,We,Tt,an,$n=!1)=>{let bl,gs,Un=0,Ai=0,Ti=0,mi=0,lo=We.length-1,Xo=We[0],hr=We[lo],gr=an.length-1,jr=an[0],la=an[gr];for(;Un<=lo&&Ai<=gr;)if(null==Xo)Xo=We[++Un];else if(null==hr)hr=We[--lo];else if(null==jr)jr=an[++Ai];else if(null==la)la=an[--gr];else if(Ra(Xo,jr,$n))Zo(Xo,jr,$n),Xo=We[++Un],jr=an[++Ai];else if(Ra(hr,la,$n))Zo(hr,la,$n),hr=We[--lo],la=an[--gr];else if(Ra(Xo,la,$n))se.slotRelocation&&("slot"===Xo.$tag$||"slot"===la.$tag$)&&Vr(Xo.$elm$.parentNode,!1),Zo(Xo,la,$n),va(Re,Xo.$elm$,hr.$elm$.nextSibling),Xo=We[++Un],la=an[--gr];else if(Ra(hr,jr,$n))se.slotRelocation&&("slot"===Xo.$tag$||"slot"===la.$tag$)&&Vr(hr.$elm$.parentNode,!1),Zo(hr,jr,$n),va(Re,hr.$elm$,Xo.$elm$),hr=We[--lo],jr=an[++Ai];else{if(Ti=-1,se.vdomKey)for(mi=Un;mi<=lo;++mi)if(We[mi]&&null!==We[mi].$key$&&We[mi].$key$===jr.$key$){Ti=mi;break}se.vdomKey&&Ti>=0?(gs=We[Ti],gs.$tag$!==jr.$tag$?bl=mr(We&&We[Ai],Tt,Ti,Re):(Zo(gs,jr,$n),We[Ti]=void 0,bl=gs.$elm$),jr=an[++Ai]):(bl=mr(We&&We[Ai],Tt,Ai,Re),jr=an[++Ai]),bl&&(se.slotRelocation?va(Hi(Xo.$elm$),bl,Ar(Xo.$elm$)):va(Xo.$elm$.parentNode,bl,Xo.$elm$))}Un>lo?Na(Re,null==an[gr+1]?null:an[gr+1].$elm$,Tt,an,Ai,gr):se.updatable&&Ai>gr&&Rl(We,Un,lo)})(an,$n,We,Un,Tt):null!==Un?(se.updatable&&se.vdomText&&null!==Re.$text$&&(an.textContent=""),Na(an,null,We,Un,0,Un.length-1)):se.updatable&&null!==$n&&Rl($n,0,$n.length-1),se.svg&&Uo&&"svg"===Ai&&(Uo=!1))},Tr=Re=>{const We=Re.childNodes;for(const Tt of We)if(1===Tt.nodeType){if(Tt["s-sr"]){const an=Tt["s-sn"];Tt.hidden=!1;for(const $n of We)if($n!==Tt)if($n["s-hn"]!==Tt["s-hn"]||""!==an){if(1===$n.nodeType&&(an===$n.getAttribute("slot")||an===$n["s-sn"])||3===$n.nodeType&&an===$n["s-sn"]){Tt.hidden=!0;break}}else if(1===$n.nodeType||3===$n.nodeType&&""!==$n.textContent.trim()){Tt.hidden=!0;break}}Tr(Tt)}},ds=[],Vs=Re=>{let We,Tt,an;for(const $n of Re.childNodes){if($n["s-sr"]&&(We=$n["s-cr"])&&We.parentNode){Tt=We.parentNode.childNodes;const Un=$n["s-sn"];for(an=Tt.length-1;an>=0;an--)if(We=Tt[an],!(We["s-cn"]||We["s-nr"]||We["s-hn"]===$n["s-hn"]||se.experimentalSlotFixes&&We["s-sh"]&&We["s-sh"]===$n["s-hn"]))if(Ys(We,Un)){let Ai=ds.find(Ti=>Ti.$nodeToRelocate$===We);ri=!0,We["s-sn"]=We["s-sn"]||Un,Ai?(Ai.$nodeToRelocate$["s-sh"]=$n["s-hn"],Ai.$slotRefNode$=$n):(We["s-sh"]=$n["s-hn"],ds.push({$slotRefNode$:$n,$nodeToRelocate$:We})),We["s-sr"]&&ds.map(Ti=>{Ys(Ti.$nodeToRelocate$,We["s-sn"])&&(Ai=ds.find(mi=>mi.$nodeToRelocate$===We),Ai&&!Ti.$slotRefNode$&&(Ti.$slotRefNode$=Ai.$slotRefNode$))})}else ds.some(Ai=>Ai.$nodeToRelocate$===We)||ds.push({$nodeToRelocate$:We})}1===$n.nodeType&&Vs($n)}},Ys=(Re,We)=>1===Re.nodeType?null===Re.getAttribute("slot")&&""===We||Re.getAttribute("slot")===We:Re["s-sn"]===We||""===We,sa=Re=>{se.vdomRef&&(Re.$attrs$&&Re.$attrs$.ref&&Re.$attrs$.ref(null),Re.$children$&&Re.$children$.map(sa))},va=(Re,We,Tt)=>{const an=null==Re?void 0:Re.insertBefore(We,Tt);return se.scoped&&Fa(We,Re),an},ol=Re=>{const We=[];return Re&&We.push(...Re["s-scs"]||[],Re["s-si"],Re["s-sc"],...ol(Re.parentElement)),We},Fa=(Re,We,Tt=!1)=>{var an;if(Re&&We&&1===Re.nodeType){const $n=new Set(ol(We).filter(Boolean));if($n.size&&(null==(an=Re.classList)||an.add(...Re["s-scs"]=[...$n]),Re["s-ol"]||Tt))for(const Un of Array.from(Re.childNodes))Fa(Un,Re,!0)}},ru=(Re,We,Tt=!1)=>{var an,$n,Un,Ai,Ti;const mi=Re.$hostElement$,lo=Re.$cmpMeta$,Xo=Re.$vnode$||Xs(null,null),hr=Hr(We)?We:Lr(null,null,We);if(Zi=mi.tagName,se.isDev&&Array.isArray(We)&&We.some(Hr))throw new Error(`The <Host> must be the single root component.\nLooks like the render() function of "${Zi.toLowerCase()}" is returning an array that contains the <Host>.\n\nThe render() function should look like this instead:\n\nrender() {\n  // Do not return an array\n  return (\n    <Host>{content}</Host>\n  );\n}\n  `);if(se.reflect&&lo.$attrsToReflect$&&(hr.$attrs$=hr.$attrs$||{},lo.$attrsToReflect$.map(([gr,jr])=>hr.$attrs$[jr]=mi[gr])),Tt&&hr.$attrs$)for(const gr of Object.keys(hr.$attrs$))mi.hasAttribute(gr)&&!["key","ref","style","class"].includes(gr)&&(hr.$attrs$[gr]=mi[gr]);if(hr.$tag$=null,hr.$flags$|=4,Re.$vnode$=hr,hr.$elm$=Xo.$elm$=se.shadowDom&&mi.shadowRoot||mi,(se.scoped||se.shadowDom)&&(hi=mi["s-sc"]),Yt=cn&&!!(1&lo.$flags$),se.slotRelocation&&(po=mi["s-cr"],ri=!1),Zo(Xo,hr,Tt),se.slotRelocation){if(zt.$flags$|=1,Ri){Vs(hr.$elm$);for(const gr of ds){const jr=gr.$nodeToRelocate$;if(!jr["s-ol"]){const la=se.isDebug||se.hydrateServerSide?Ia(jr):Ge.createTextNode("");la["s-nr"]=jr,va(jr.parentNode,jr["s-ol"]=la,jr)}}for(const gr of ds){const jr=gr.$nodeToRelocate$,la=gr.$slotRefNode$;if(la){const bl=la.parentNode;let gs=la.nextSibling;if(!se.experimentalSlotFixes||gs&&1===gs.nodeType){let nr=null==(an=jr["s-ol"])?void 0:an.previousSibling;for(;nr;){let wl=null!=($n=nr["s-nr"])?$n:null;if(wl&&wl["s-sn"]===jr["s-sn"]&&bl===wl.parentNode){for(wl=wl.nextSibling;wl===jr||null!=wl&&wl["s-sr"];)wl=null==wl?void 0:wl.nextSibling;if(!wl||!wl["s-nr"]){gs=wl;break}}nr=nr.previousSibling}}(!gs&&bl!==jr.parentNode||jr.nextSibling!==gs)&&jr!==gs&&(!se.experimentalSlotFixes&&!jr["s-hn"]&&jr["s-ol"]&&(jr["s-hn"]=jr["s-ol"].parentNode.nodeName),va(bl,jr,gs),1===jr.nodeType&&(jr.hidden=null!=(Un=jr["s-ih"])&&Un)),jr&&"function"==typeof la["s-rf"]&&la["s-rf"](jr)}else 1===jr.nodeType&&(Tt&&(jr["s-ih"]=null!=(Ai=jr.hidden)&&Ai),jr.hidden=!0)}}ri&&Tr(hr.$elm$),zt.$flags$&=-2,ds.length=0}if(se.experimentalScopedSlotChanges&&2&lo.$flags$)for(const gr of hr.$elm$.childNodes)gr["s-hn"]!==Zi&&!gr["s-sh"]&&(Tt&&null==gr["s-ih"]&&(gr["s-ih"]=null!=(Ti=gr.hidden)&&Ti),gr.hidden=!0);po=void 0},_u=Re=>Ge.createComment(`<slot${Re.$name$?' name="'+Re.$name$+'"':""}> (host=${Zi.toLowerCase()})`),Ia=Re=>Ge.createComment("org-location for "+(Re.localName?`<${Re.localName}> (host=${Re["s-hn"]})`:`[${Re.textContent}]`)),su=(Re,We)=>{se.asyncLoading&&We&&!Re.$onRenderResolve$&&We["s-p"]&&We["s-p"].push(new Promise(Tt=>Re.$onRenderResolve$=Tt))},dl=(Re,We)=>{if(se.taskQueue&&se.updatable&&(Re.$flags$|=16),se.asyncLoading&&4&Re.$flags$)return void(Re.$flags$|=512);su(Re,Re.$ancestorComponent$);const Tt=()=>Pa(Re,We);return se.taskQueue?Fi(Tt):Tt()},Pa=(Re,We)=>{const Tt=Re.$hostElement$,an=Dr("scheduleUpdate",Re.$cmpMeta$.$tagName$),$n=se.lazyLoad?Re.$lazyInstance$:Tt;if(!$n)throw new Error(`Can't render component <${Tt.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let Un;return We?(se.lazyLoad&&se.hostListener&&(Re.$flags$|=256,Re.$queuedListeners$&&(Re.$queuedListeners$.map(([Ai,Ti])=>Ea($n,Ai,Ti)),Re.$queuedListeners$=void 0)),gc(Tt,"componentWillLoad"),se.cmpWillLoad&&(Un=Ea($n,"componentWillLoad"))):(gc(Tt,"componentWillUpdate"),se.cmpWillUpdate&&(Un=Ea($n,"componentWillUpdate"))),gc(Tt,"componentWillRender"),se.cmpWillRender&&(Un=Uc(Un,()=>Ea($n,"componentWillRender"))),an(),Uc(Un,()=>Gu(Re,$n,We))},Uc=(Re,We)=>Hu(Re)?Re.then(We).catch(Tt=>{console.error(Tt),We()}):We(),Hu=Re=>Re instanceof Promise||Re&&Re.then&&"function"==typeof Re.then,Gu=function(){var Re=(0,V.A)(function*(We,Tt,an){var $n;const Un=We.$hostElement$,Ai=Dr("update",We.$cmpMeta$.$tagName$),Ti=Un["s-rc"];se.style&&an&&(Re=>{const We=Re.$cmpMeta$,Tt=Re.$hostElement$,an=We.$flags$,$n=Dr("attachStyles",We.$tagName$),Un=it(se.shadowDom&&cn&&Tt.shadowRoot?Tt.shadowRoot:Tt.getRootNode(),We,Re.$modeName$);(se.shadowDom||se.scoped)&&se.cssAnnotations&&10&an&&(Tt["s-sc"]=Un,Tt.classList.add(Un+"-h"),se.scoped&&2&an&&Tt.classList.add(Un+"-s")),$n()})(We);const mi=Dr("render",We.$cmpMeta$.$tagName$);if(se.isDev&&(We.$flags$|=1024),se.hydrateServerSide?yield ks(We,Tt,Un,an):ks(We,Tt,Un,an),se.isDev&&(We.$renderCount$=void 0===We.$renderCount$?1:We.$renderCount$+1,We.$flags$&=-1025),se.hydrateServerSide)try{yu(Un),an&&(1&We.$cmpMeta$.$flags$?Un["s-en"]="":2&We.$cmpMeta$.$flags$&&(Un["s-en"]="c"))}catch(lo){vt(lo,Un)}if(se.asyncLoading&&Ti&&(Ti.map(lo=>lo()),Un["s-rc"]=void 0),mi(),Ai(),se.asyncLoading){const lo=null!=($n=Un["s-p"])?$n:[],Xo=()=>fc(We);0===lo.length?Xo():(Promise.all(lo).then(Xo),We.$flags$|=4,lo.length=0)}else fc(We)});return function(Tt,an,$n){return Re.apply(this,arguments)}}(),ks=(Re,We,Tt,an)=>{const $n=!!se.allRenderFn,Un=!!se.lazyLoad,Ai=!!se.taskQueue,Ti=!!se.updatable;try{if(We=($n||We.render)&&We.render(),Ti&&Ai&&(Re.$flags$&=-17),(Ti||Un)&&(Re.$flags$|=2),se.hasRenderFn||se.reflect)if(se.vdomRender||se.reflect){if(se.hydrateServerSide)return Promise.resolve(We).then(mi=>ru(Re,mi,an));ru(Re,We,an)}else 1&Re.$cmpMeta$.$flags$?Tt.shadowRoot.textContent=We:Tt.textContent=We}catch(mi){vt(mi,Re.$hostElement$)}return null},fc=Re=>{const We=Re.$cmpMeta$.$tagName$,Tt=Re.$hostElement$,an=Dr("postUpdate",We),$n=se.lazyLoad?Re.$lazyInstance$:Tt,Un=Re.$ancestorComponent$;se.cmpDidRender&&(se.isDev&&(Re.$flags$|=1024),Ea($n,"componentDidRender"),se.isDev&&(Re.$flags$&=-1025)),gc(Tt,"componentDidRender"),64&Re.$flags$?(se.cmpDidUpdate&&(se.isDev&&(Re.$flags$|=1024),Ea($n,"componentDidUpdate"),se.isDev&&(Re.$flags$&=-1025)),gc(Tt,"componentDidUpdate"),an()):(Re.$flags$|=64,se.asyncLoading&&se.cssAnnotations&&Ul(Tt),se.cmpDidLoad&&(se.isDev&&(Re.$flags$|=2048),Ea($n,"componentDidLoad"),se.isDev&&(Re.$flags$&=-2049)),gc(Tt,"componentDidLoad"),an(),se.asyncLoading&&(Re.$onReadyResolve$(Tt),Un||mc(We))),se.method&&se.lazyLoad&&Re.$onInstanceResolve$(Tt),se.asyncLoading&&(Re.$onRenderResolve$&&(Re.$onRenderResolve$(),Re.$onRenderResolve$=void 0),512&Re.$flags$&&ao(()=>dl(Re,!1)),Re.$flags$&=-517)},au=Re=>{if(se.updatable&&(ft.isBrowser||ft.isTesting)){const We=Ut(Re),Tt=We.$hostElement$.isConnected;return Tt&&2==(18&We.$flags$)&&dl(We,!1),Tt}return!1},mc=Re=>{se.cssAnnotations&&Ul(Ge.documentElement),se.asyncQueue&&(zt.$flags$|=2),ao(()=>ae(Ae,"appload",{detail:{namespace:l}})),se.profile&&performance.measure&&performance.measure(`[Stencil] ${l} initial load (by ${Re})`,"st:app:start")},Ea=(Re,We,Tt)=>{if(Re&&Re[We])try{return Re[We](Tt)}catch(an){vt(an)}},gc=(Re,We)=>{se.lifecycleDOMEvents&&ae(Re,"stencil_"+We,{bubbles:!0,composed:!0,detail:{namespace:l}})},Ul=Re=>{var We,Tt;return se.hydratedClass?Re.classList.add(null!=(We=se.hydratedSelectorName)?We:"hydrated"):se.hydratedAttribute?Re.setAttribute(null!=(Tt=se.hydratedSelectorName)?Tt:"hydrated",""):void 0},yu=Re=>{const We=Re.children;if(null!=We)for(let Tt=0,an=We.length;Tt<an;Tt++){const $n=We[Tt];"function"==typeof $n.connectedCallback&&$n.connectedCallback(),yu($n)}},Eo=(Re,We,Tt)=>{var an,$n;const Un=Re.prototype;if(se.formAssociated&&64&We.$flags$&&1&Tt&&Ke.forEach(Ai=>Object.defineProperty(Un,Ai,{value(...Ti){const mi=Ut(this),Xo=se.lazyLoad?mi.$lazyInstance$:se.lazyLoad?mi.$hostElement$:this;if(Xo){const hr=Xo[Ai];"function"==typeof hr&&hr.call(Xo,...Ti)}else mi.$onReadyPromise$.then(hr=>{const gr=hr[Ai];"function"==typeof gr&&gr.call(hr,...Ti)})}})),se.member&&We.$members$||se.watchCallback&&(We.$watchers$||Re.watchers)){se.watchCallback&&Re.watchers&&!We.$watchers$&&(We.$watchers$=Re.watchers);const Ai=Object.entries(null!=(an=We.$members$)?an:{});if(Ai.map(([Ti,[mi]])=>{(se.prop||se.state)&&(31&mi||(!se.lazyLoad||2&Tt)&&32&mi)?Object.defineProperty(Un,Ti,{get(){return((Re,We)=>Ut(this).$instanceValues$.get(We))(0,Ti)},set(lo){if(se.isDev){const Xo=Ut(this);!(1&Tt)&&0===(Xo&&8&Xo.$flags$)&&31&mi&&!(1024&mi)&&on(`@Prop() "${Ti}" on <${We.$tagName$}> is immutable but was modified from within the component.\nMore information: https://stenciljs.com/docs/properties#prop-mutability`)}((Re,We,Tt,an)=>{const $n=Ut(Re);if(se.lazyLoad&&!$n)throw new Error(`Couldn't find host element for "${an.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const Un=se.lazyLoad?$n.$hostElement$:Re,Ai=$n.$instanceValues$.get(We),Ti=$n.$flags$,mi=se.lazyLoad?$n.$lazyInstance$:Un;Tt=((Re,We)=>null==Re||cs(Re)?Re:se.propBoolean&&4&We?"false"!==Re&&(""===Re||!!Re):se.propNumber&&2&We?parseFloat(Re):se.propString&&1&We?String(Re):Re)(Tt,an.$members$[We][0]);const lo=Number.isNaN(Ai)&&Number.isNaN(Tt);if((!se.lazyLoad||!(8&Ti)||void 0===Ai)&&Tt!==Ai&&!lo&&($n.$instanceValues$.set(We,Tt),se.isDev&&(1024&$n.$flags$?on(`The state/prop "${We}" changed during rendering. This can potentially lead to infinite-loops and other bugs.`,"\nElement",Un,"\nNew value",Tt,"\nOld value",Ai):2048&$n.$flags$&&on(`The state/prop "${We}" changed during "componentDidLoad()", this triggers extra re-renders, try to setup on "componentWillLoad()"`,"\nElement",Un,"\nNew value",Tt,"\nOld value",Ai)),!se.lazyLoad||mi)){if(se.watchCallback&&an.$watchers$&&128&Ti){const hr=an.$watchers$[We];hr&&hr.map(gr=>{try{mi[gr](Tt,Ai,We)}catch(jr){vt(jr,Un)}})}if(se.updatable&&2==(18&Ti)){if(se.cmpShouldUpdate&&mi.componentShouldUpdate&&!1===mi.componentShouldUpdate(Tt,Ai,We))return;dl($n,!1)}}})(this,Ti,lo,We)},configurable:!0,enumerable:!0}):se.lazyLoad&&se.method&&1&Tt&&64&mi&&Object.defineProperty(Un,Ti,{value(...lo){var Xo;const hr=Ut(this);return null==(Xo=null==hr?void 0:hr.$onInstancePromise$)?void 0:Xo.then(()=>{var gr;return null==(gr=hr.$lazyInstance$)?void 0:gr[Ti](...lo)})}})}),se.observeAttribute&&(!se.lazyLoad||1&Tt)){const Ti=new Map;Un.attributeChangedCallback=function(mi,lo,Xo){zt.jmp(()=>{var hr;const gr=Ti.get(mi);if(this.hasOwnProperty(gr))Xo=this[gr],delete this[gr];else{if(Un.hasOwnProperty(gr)&&"number"==typeof this[gr]&&this[gr]==Xo)return;if(null==gr){const jr=Ut(this),la=null==jr?void 0:jr.$flags$;if(la&&!(8&la)&&128&la&&Xo!==lo){const gs=se.lazyLoad?jr.$lazyInstance$:se.lazyLoad?jr.$hostElement$:this,nr=null==(hr=We.$watchers$)?void 0:hr[mi];null==nr||nr.forEach(wl=>{null!=gs[wl]&&gs[wl].call(gs,Xo,lo,mi)})}return}}this[gr]=(null!==Xo||"boolean"!=typeof this[gr])&&Xo})},Re.observedAttributes=Array.from(new Set([...Object.keys(null!=($n=We.$watchers$)?$n:{}),...Ai.filter(([mi,lo])=>15&lo[0]).map(([mi,lo])=>{var Xo;const hr=lo[1]||mi;return Ti.set(hr,mi),se.reflect&&512&lo[0]&&(null==(Xo=We.$attrsToReflect$)||Xo.push([mi,hr])),hr})]))}}return Re},Oc=function(){var Re=(0,V.A)(function*(We,Tt,an,$n){let Un;if(!(32&Tt.$flags$)){if(Tt.$flags$|=32,(se.lazyLoad||se.hydrateClientSide)&&an.$lazyBundleId$){const lo=((Re,We,Tt)=>{const an=Re.$tagName$.replace(/-/g,"_"),$n=Re.$lazyBundleId$;if(se.isDev&&"string"!=typeof $n)return void xn(`Trying to lazily load component <${Re.$tagName$}> with style mode "${We.$modeName$}", but it does not exist.`);if(!$n)return;const Un=!se.hotModuleReplacement&&An.get($n);return Un?Un[an]:_e(4140)(`./${$n}.entry.js${se.hotModuleReplacement&&Tt?"?s-hmr="+Tt:""}`).then(Ai=>(se.hotModuleReplacement||An.set($n,Ai),Ai[an]),vt)})(an,Tt,$n);if(lo&&"then"in lo){const hr=((Re,We)=>se.profile&&performance.mark?(0===performance.getEntriesByName(Re,"mark").length&&performance.mark(Re),()=>{0===performance.getEntriesByName(We,"measure").length&&performance.measure(We,Re)}):()=>{})(`st:load:${an.$tagName$}:${Tt.$modeName$}`,`[Stencil] Load module for <${an.$tagName$}>`);Un=yield lo,hr()}else Un=lo;if(!Un)throw new Error(`Constructor for "${an.$tagName$}#${Tt.$modeName$}" was not found`);se.member&&!Un.isProxied&&(se.watchCallback&&(an.$watchers$=Un.watchers),Eo(Un,an,2),Un.isProxied=!0);const Xo=Dr("createInstance",an.$tagName$);se.member&&(Tt.$flags$|=8);try{new Un(Tt)}catch(hr){vt(hr)}se.member&&(Tt.$flags$&=-9),se.watchCallback&&(Tt.$flags$|=128),Xo(),Lc(Tt.$lazyInstance$)}else Un=We.constructor,customElements.whenDefined(We.localName).then(()=>Tt.$flags$|=128);if(se.style&&Un&&Un.style){let lo;"string"==typeof Un.style?lo=Un.style:se.mode&&"string"!=typeof Un.style&&(Tt.$modeName$=(Re=>vn.map(We=>We(Re)).find(We=>!!We))(We),Tt.$modeName$&&(lo=Un.style[Tt.$modeName$]),se.hydrateServerSide&&Tt.$modeName$&&We.setAttribute("s-mode",Tt.$modeName$));const Xo=En(an,Tt.$modeName$);if(!Ot.has(Xo)){const hr=Dr("registerStyles",an.$tagName$);!se.hydrateServerSide&&se.shadowDom&&se.shadowDomShim&&8&an.$flags$&&(lo=yield _e.e(3687).then(_e.bind(_e,3687)).then(gr=>gr.scopeCss(lo,Xo,!1))),((Re,We,Tt)=>{let an=Ot.get(Re);pr&&Tt?(an=an||new CSSStyleSheet,"string"==typeof an?an=We:an.replaceSync(We)):an=We,Ot.set(Re,an)})(Xo,lo,!!(1&an.$flags$)),hr()}}}const Ai=Tt.$ancestorComponent$,Ti=()=>dl(Tt,!0);se.asyncLoading&&Ai&&Ai["s-rc"]?Ai["s-rc"].push(Ti):Ti()});return function(Tt,an,$n,Un){return Re.apply(this,arguments)}}(),Lc=Re=>{se.lazyLoad&&se.connectedCallback&&Ea(Re,"connectedCallback")},rl=Re=>{const We=Re["s-cr"]=Ge.createComment(se.isDebug?`content-ref (host=${Re.localName})`:"");We["s-cn"]=!0,va(Re,We,Re.firstChild)},et=Re=>{se.lazyLoad&&se.disconnectedCallback&&Ea(Re,"disconnectedCallback"),se.cmpDidUnload&&Ea(Re,"componentDidUnload")},Dt=function(){var Re=(0,V.A)(function*(We){if(!(1&zt.$flags$)){const Tt=Ut(We);se.hostListener&&Tt.$rmListeners$&&(Tt.$rmListeners$.map(an=>an()),Tt.$rmListeners$=void 0),se.lazyLoad?null!=Tt&&Tt.$lazyInstance$?et(Tt.$lazyInstance$):null!=Tt&&Tt.$onReadyPromise$&&Tt.$onReadyPromise$.then(()=>et(Tt.$lazyInstance$)):et(We)}});return function(Tt){return Re.apply(this,arguments)}}(),Zn=Re=>{const We=Re.cloneNode;Re.cloneNode=function(Tt){const an=this,$n=!!se.shadowDom&&an.shadowRoot&&cn,Un=We.call(an,!!$n&&Tt);if(se.slot&&!$n&&Tt){let Ti,mi,Ai=0;const lo=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"];for(;Ai<an.childNodes.length;Ai++)Ti=an.childNodes[Ai]["s-nr"],mi=lo.every(Xo=>!an.childNodes[Ai][Xo]),Ti&&(se.appendChildSlotFix&&Un.__appendChild?Un.__appendChild(Ti.cloneNode(!0)):Un.appendChild(Ti.cloneNode(!0))),mi&&Un.appendChild(an.childNodes[Ai].cloneNode(!0))}return Un}},zn=Re=>{Re.__appendChild=Re.appendChild,Re.appendChild=function(We){const Tt=We["s-sn"]=Ts(We),an=ca(this.childNodes,Tt,this.tagName);if(an){const $n=zs(an,Tt),Un=$n[$n.length-1],Ai=va(Un.parentNode,We,Un.nextSibling);return Tr(this),Ai}return this.__appendChild(We)}},vi=Re=>{Re.__removeChild=Re.removeChild,Re.removeChild=function(We){if(We&&typeof We["s-sn"]<"u"){const Tt=ca(this.childNodes,We["s-sn"],this.tagName);if(Tt){const $n=zs(Tt,We["s-sn"]).find(Un=>Un===We);if($n)return $n.remove(),void Tr(this)}}return this.__removeChild(We)}},go=Re=>{const We=Re.prepend;Re.prepend=function(...Tt){Tt.forEach(an=>{"string"==typeof an&&(an=this.ownerDocument.createTextNode(an));const $n=an["s-sn"]=Ts(an),Un=ca(this.childNodes,$n,this.tagName);if(Un){const Ai=document.createTextNode("");Ai["s-nr"]=an,Un["s-cr"].parentNode.__appendChild(Ai),an["s-ol"]=Ai;const mi=zs(Un,$n)[0];return va(mi.parentNode,an,mi.nextSibling)}return 1===an.nodeType&&an.getAttribute("slot")&&(an.hidden=!0),We.call(this,an)})}},yo=Re=>{Re.append=function(...We){We.forEach(Tt=>{"string"==typeof Tt&&(Tt=this.ownerDocument.createTextNode(Tt)),this.appendChild(Tt)})}},co=Re=>{const We=Re.insertAdjacentHTML;Re.insertAdjacentHTML=function(Tt,an){if("afterbegin"!==Tt&&"beforeend"!==Tt)return We.call(this,Tt,an);const $n=this.ownerDocument.createElement("_");let Un;if($n.innerHTML=an,"afterbegin"===Tt)for(;Un=$n.firstChild;)this.prepend(Un);else if("beforeend"===Tt)for(;Un=$n.firstChild;)this.append(Un)}},gi=Re=>{Re.insertAdjacentText=function(We,Tt){this.insertAdjacentHTML(We,Tt)}},qo=Re=>{const We=Re.insertAdjacentElement;Re.insertAdjacentElement=function(Tt,an){return"afterbegin"!==Tt&&"beforeend"!==Tt?We.call(this,Tt,an):"afterbegin"===Tt?(this.prepend(an),an):("beforeend"===Tt&&this.append(an),an)}},cr=Re=>{const We=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(Re,"__textContent",We),Object.defineProperty(Re,"textContent",se.experimentalScopedSlotChanges?{get(){return" "+Wr(this.childNodes).map($n=>{var Un,Ai;const Ti=[];let mi=$n.nextSibling;for(;mi&&mi["s-sn"]===$n["s-sn"];)(3===mi.nodeType||1===mi.nodeType)&&Ti.push(null!=(Ai=null==(Un=mi.textContent)?void 0:Un.trim())?Ai:""),mi=mi.nextSibling;return Ti.filter(lo=>""!==lo).join(" ")}).filter($n=>""!==$n).join(" ")+" "},set(Tt){Wr(this.childNodes).forEach($n=>{let Un=$n.nextSibling;for(;Un&&Un["s-sn"]===$n["s-sn"];){const Ai=Un;Un=Un.nextSibling,Ai.remove()}if(""===$n["s-sn"]){const Ai=this.ownerDocument.createTextNode(Tt);Ai["s-sn"]="",va($n.parentElement,Ai,$n.nextSibling)}else $n.remove()})}}:{get(){var Tt;const an=ca(this.childNodes,"",this.tagName);return 3===(null==(Tt=null==an?void 0:an.nextSibling)?void 0:Tt.nodeType)?an.nextSibling.textContent:an?an.textContent:this.__textContent},set(Tt){var an;const $n=ca(this.childNodes,"",this.tagName);if(3===(null==(an=null==$n?void 0:$n.nextSibling)?void 0:an.nodeType))$n.nextSibling.textContent=Tt;else if($n)$n.textContent=Tt;else{this.__textContent=Tt;const Un=this["s-cr"];Un&&va(this,Un,this.firstChild)}}})},Er=(Re,We)=>{class Tt extends Array{item($n){return this[$n]}}if(8&We.$flags$){const an=Re.__lookupGetter__("childNodes");Object.defineProperty(Re,"children",{get(){return this.childNodes.map($n=>1===$n.nodeType)}}),Object.defineProperty(Re,"childElementCount",{get:()=>Re.children.length}),Object.defineProperty(Re,"childNodes",{get(){const $n=an.call(this);if(!(1&zt.$flags$)&&2&Ut(this).$flags$){const Un=new Tt;for(let Ai=0;Ai<$n.length;Ai++){const Ti=$n[Ai]["s-nr"];Ti&&Un.push(Ti)}return Un}return Tt.from($n)}})}},Wr=Re=>{const We=[];for(const Tt of Array.from(Re))Tt["s-sr"]&&We.push(Tt),We.push(...Wr(Tt.childNodes));return We},Ts=Re=>Re["s-sn"]||1===Re.nodeType&&Re.getAttribute("slot")||"",ca=(Re,We,Tt)=>{let $n,an=0;for(;an<Re.length;an++)if($n=Re[an],$n["s-sr"]&&$n["s-sn"]===We&&$n["s-hn"]===Tt||($n=ca($n.childNodes,We,Tt),$n))return $n;return null},zs=(Re,We)=>{const Tt=[Re];for(;(Re=Re.nextSibling)&&Re["s-sn"]===We;)Tt.push(Re);return Tt},ts=(Re,We)=>{const Tt={$flags$:We[0],$tagName$:We[1]};se.member&&(Tt.$members$=We[2]),se.hostListener&&(Tt.$listeners$=We[3]),se.watchCallback&&(Tt.$watchers$=Re.$watchers$),se.reflect&&(Tt.$attrsToReflect$=[]),se.shadowDom&&!cn&&1&Tt.$flags$&&(Tt.$flags$|=8),se.experimentalSlotFixes?se.scoped&&2&Tt.$flags$&&((Re,We)=>{Zn(Re),zn(Re),yo(Re),go(Re),qo(Re),co(Re),gi(Re),cr(Re),Er(Re,We),vi(Re)})(Re.prototype,Tt):(se.slotChildNodesFix&&Er(Re.prototype,Tt),se.cloneNodeFix&&Zn(Re.prototype),se.appendChildSlotFix&&zn(Re.prototype),se.scopedSlotTextContentFix&&2&Tt.$flags$&&cr(Re.prototype));const an=Re.prototype.connectedCallback,$n=Re.prototype.disconnectedCallback;return Object.assign(Re.prototype,{__registerHost(){((Re,We)=>{const Tt={$flags$:0,$hostElement$:Re,$cmpMeta$:We,$instanceValues$:new Map};se.isDev&&(Tt.$renderCount$=0),se.method&&se.lazyLoad&&(Tt.$onInstancePromise$=new Promise(an=>Tt.$onInstanceResolve$=an)),se.asyncLoading&&(Tt.$onReadyPromise$=new Promise(an=>Tt.$onReadyResolve$=an),Re["s-p"]=[],Re["s-rc"]=[]),Xt.set(Re,Tt)})(this,Tt)},connectedCallback(){const Un=Ut(this);Bc(this,Un,Tt.$listeners$,!1),(Re=>{if(!(1&zt.$flags$)){const We=Ut(Re),Tt=We.$cmpMeta$,an=Dr("connectedCallback",Tt.$tagName$);if(se.hostListenerTargetParent&&Bc(Re,We,Tt.$listeners$,!0),1&We.$flags$)Bc(Re,We,Tt.$listeners$,!1),null!=We&&We.$lazyInstance$?Lc(We.$lazyInstance$):null!=We&&We.$onReadyPromise$&&We.$onReadyPromise$.then(()=>Lc(We.$lazyInstance$));else{let $n;if(We.$flags$|=1,se.hydrateClientSide&&($n=Re.getAttribute(pn),$n)){if(se.shadowDom&&cn&&1&Tt.$flags$){const Un=se.mode?it(Re.shadowRoot,Tt,Re.getAttribute("s-mode")):it(Re.shadowRoot,Tt);Re.classList.remove(Un+"-h",Un+"-s")}((Re,We,Tt,an)=>{const $n=Dr("hydrateClient",We),Un=Re.shadowRoot,Ai=[],mi=se.shadowDom&&Un?[]:null,lo=an.$vnode$=Xs(We,null);zt.$orgLocNodes$||Ye(Ge.body,zt.$orgLocNodes$=new Map),Re[pn]=Tt,Re.removeAttribute(pn),mt(lo,Ai,[],mi,Re,Re,Tt),Ai.map(Xo=>{const hr=Xo.$hostId$+"."+Xo.$nodeId$,gr=zt.$orgLocNodes$.get(hr),jr=Xo.$elm$;gr&&cn&&""===gr["s-en"]&&gr.parentNode.insertBefore(jr,gr.nextSibling),Un||(jr["s-hn"]=We,gr&&(jr["s-ol"]=gr,jr["s-ol"]["s-nr"]=jr)),zt.$orgLocNodes$.delete(hr)}),se.shadowDom&&Un&&mi.map(Xo=>{Xo&&Un.appendChild(Xo)}),$n()})(Re,Tt.$tagName$,$n,We)}if(se.slotRelocation&&!$n&&(se.hydrateServerSide||(se.slot||se.shadowDom)&&12&Tt.$flags$)&&rl(Re),se.asyncLoading){let Un=Re;for(;Un=Un.parentNode||Un.host;)if(se.hydrateClientSide&&1===Un.nodeType&&Un.hasAttribute("s-id")&&Un["s-p"]||Un["s-p"]){su(We,We.$ancestorComponent$=Un);break}}se.prop&&!se.hydrateServerSide&&Tt.$members$&&Object.entries(Tt.$members$).map(([Un,[Ai]])=>{if(31&Ai&&Re.hasOwnProperty(Un)){const Ti=Re[Un];delete Re[Un],Re[Un]=Ti}}),se.initializeNextTick?ao(()=>Oc(Re,We,Tt)):Oc(Re,We,Tt)}an()}})(this),se.connectedCallback&&an&&an.call(this)},disconnectedCallback(){Dt(this),se.disconnectedCallback&&$n&&$n.call(this)},__attachShadow(){if(cn)if(this.shadowRoot){if("open"!==this.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${Tt.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else this.attachShadow(se.shadowDelegatesFocus?{mode:"open",delegatesFocus:!!(16&Tt.$flags$)}:{mode:"open"});else this.shadowRoot=this}}),Re.is=Tt.$tagName$,Eo(Re,Tt,3)},Bc=(Re,We,Tt,an)=>{se.hostListener&&Tt&&(se.hostListenerTargetParent&&(Tt=Tt.filter(an?([$n])=>32&$n:([$n])=>!(32&$n))),Tt.map(([$n,Un,Ai])=>{const Ti=se.hostListenerTarget?Sc(Re,$n):Re,mi=ha(We,Ai),lo=Wu($n);zt.ael(Ti,Un,mi,lo),(We.$rmListeners$=We.$rmListeners$||[]).push(()=>zt.rel(Ti,Un,mi,lo))}))},ha=(Re,We)=>Tt=>{var an;try{se.lazyLoad?256&Re.$flags$?null==(an=Re.$lazyInstance$)||an[We](Tt):(Re.$queuedListeners$=Re.$queuedListeners$||[]).push([We,Tt]):Re.$hostElement$[We](Tt)}catch($n){vt($n)}},Sc=(Re,We)=>se.hostListenerTargetDocument&&4&We?Ge:se.hostListenerTargetWindow&&8&We?Ae:se.hostListenerTargetBody&&16&We?Ge.body:se.hostListenerTargetParent&&32&We&&Re.parentElement?Re.parentElement:Re,Wu=Re=>_o?{passive:!!(1&Re),capture:!!(2&Re)}:!!(2&Re)},2214:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{Dk:()=>V.Dk,KO:()=>V.KO,Sx:()=>V.Sx,Wp:()=>V.Wp});var V=_e(7852);(0,V.KO)("firebase","10.12.4","app")},2802:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{F0:()=>du,eJ:()=>uu,Wm:()=>Mc,xI:()=>io,J1:()=>qc,zK:()=>Xo,x9:()=>H0,CI:()=>pa});var V=_e(467),se=_e(7852),ne=_e(1076),l=_e(8041),qe=_e(1635),Y=_e(1362);const un=function Ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xn=new ne.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new l.Vy("@firebase/auth");function An(te,...L){ht.logLevel<=l.$b.ERROR&&ht.error(`Auth (${se.MF}): ${te}`,...L)}function qn(te,...L){throw ki(te,...L)}function xt(te,...L){return ki(te,...L)}function Ot(te,L,j){const ie=Object.assign(Object.assign({},un()),{[L]:j});return new ne.FA("auth","Firebase",ie).create(L,{appName:te.name})}function vn(te){return Ot(te,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ki(te,...L){if("string"!=typeof te){const j=L[0],ie=[...L.slice(1)];return ie[0]&&(ie[0].appName=te.name),te._errorFactory.create(j,...ie)}return xn.create(te,...L)}function Ct(te,L,...j){if(!te)throw ki(L,...j)}function Me(te){const L="INTERNAL ASSERTION FAILED: "+te;throw An(L),new Error(L)}function pn(te,L){te||Me(L)}function Rt(){var te;return typeof self<"u"&&(null===(te=self.location)||void 0===te?void 0:te.href)||""}function On(){return"http:"===Cn()||"https:"===Cn()}function Cn(){var te;return typeof self<"u"&&(null===(te=self.location)||void 0===te?void 0:te.protocol)||null}class Ke{constructor(L,j){this.shortDelay=L,this.longDelay=j,pn(j>L,"Short delay should be less than long delay!"),this.isMobile=(0,ne.jZ)()||(0,ne.lV)()}get(){return function so(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(On()||(0,ne.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(te,L){pn(te.emulator,"Emulator should always be set here");const{url:j}=te.emulator;return L?`${j}${L.startsWith("/")?L.slice(1):L}`:j}class Ge{static initialize(L,j,ie){this.fetchImpl=L,j&&(this.headersImpl=j),ie&&(this.responseImpl=ie)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zt=new Ke(3e4,6e4);function Yn(te,L){return te.tenantId&&!L.tenantId?Object.assign(Object.assign({},L),{tenantId:te.tenantId}):L}function cn(te,L,j,ie){return _o.apply(this,arguments)}function _o(){return(_o=(0,V.A)(function*(te,L,j,ie,Ne={}){return to(te,Ne,(0,V.A)(function*(){let at={},ln={};ie&&("GET"===L?ln=ie:at={body:JSON.stringify(ie)});const hn=(0,ne.Am)(Object.assign({key:te.config.apiKey},ln)).slice(1),Qn=yield te._getAdditionalHeaders();return Qn["Content-Type"]="application/json",te.languageCode&&(Qn["X-Firebase-Locale"]=te.languageCode),Ge.fetch()(Mi(te,te.config.apiHost,j,hn),Object.assign({method:L,headers:Qn,referrerPolicy:"no-referrer"},at))}))})).apply(this,arguments)}function to(te,L,j){return pr.apply(this,arguments)}function pr(){return(pr=(0,V.A)(function*(te,L,j){te._canInitEmulator=!1;const ie=Object.assign(Object.assign({},tt),L);try{const Ne=new $i(te),at=yield Promise.race([j(),Ne.promise]);Ne.clearNetworkTimeout();const ln=yield at.json();if("needConfirmation"in ln)throw br(te,"account-exists-with-different-credential",ln);if(at.ok&&!("errorMessage"in ln))return ln;{const hn=at.ok?ln.errorMessage:ln.error.message,[Qn,Wn]=hn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Qn)throw br(te,"credential-already-in-use",ln);if("EMAIL_EXISTS"===Qn)throw br(te,"email-already-in-use",ln);if("USER_DISABLED"===Qn)throw br(te,"user-disabled",ln);const Yi=ie[Qn]||Qn.toLowerCase().replace(/[_\s]+/g,"-");if(Wn)throw Ot(te,Yi,Wn);qn(te,Yi)}}catch(Ne){if(Ne instanceof ne.g)throw Ne;qn(te,"network-request-failed",{message:String(Ne)})}})).apply(this,arguments)}function jo(te,L,j,ie){return zr.apply(this,arguments)}function zr(){return(zr=(0,V.A)(function*(te,L,j,ie,Ne={}){const at=yield cn(te,L,j,ie,Ne);return"mfaPendingCredential"in at&&qn(te,"multi-factor-auth-required",{_serverResponse:at}),at})).apply(this,arguments)}function Mi(te,L,j,ie){const Ne=`${L}${j}?${ie}`;return te.config.emulator?Ae(te.config,Ne):`${te.config.apiScheme}://${Ne}`}function rs(te){switch(te){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $i{constructor(L){this.auth=L,this.timer=null,this.promise=new Promise((j,ie)=>{this.timer=setTimeout(()=>ie(xt(this.auth,"network-request-failed")),zt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function br(te,L,j){const ie={appName:te.name};j.email&&(ie.email=j.email),j.phoneNumber&&(ie.phoneNumber=j.phoneNumber);const Ne=xt(te,L,ie);return Ne.customData._tokenResponse=j,Ne}function Li(te){return void 0!==te&&void 0!==te.enterprise}class yi{constructor(L){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===L.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=L.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=L.recaptchaEnforcementState}getProviderEnforcementState(L){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const j of this.recaptchaEnforcementState)if(j.provider&&j.provider===L)return rs(j.enforcementState);return null}isProviderEnabled(L){return"ENFORCE"===this.getProviderEnforcementState(L)||"AUDIT"===this.getProviderEnforcementState(L)}}function Fi(te,L){return mo.apply(this,arguments)}function mo(){return(mo=(0,V.A)(function*(te,L){return cn(te,"GET","/v2/recaptchaConfig",Yn(te,L))})).apply(this,arguments)}function es(){return(es=(0,V.A)(function*(te,L){return cn(te,"POST","/v1/accounts:delete",L)})).apply(this,arguments)}function ti(te,L){return cs.apply(this,arguments)}function cs(){return(cs=(0,V.A)(function*(te,L){return cn(te,"POST","/v1/accounts:lookup",L)})).apply(this,arguments)}function Cs(te){if(te)try{const L=new Date(Number(te));if(!isNaN(L.getTime()))return L.toUTCString()}catch{}}function Qr(){return(Qr=(0,V.A)(function*(te,L=!1){const j=(0,ne.Ku)(te),ie=yield j.getIdToken(L),Ne=Nr(ie);Ct(Ne&&Ne.exp&&Ne.auth_time&&Ne.iat,j.auth,"internal-error");const at="object"==typeof Ne.firebase?Ne.firebase:void 0,ln=null==at?void 0:at.sign_in_provider;return{claims:Ne,token:ie,authTime:Cs(Ho(Ne.auth_time)),issuedAtTime:Cs(Ho(Ne.iat)),expirationTime:Cs(Ho(Ne.exp)),signInProvider:ln||null,signInSecondFactor:(null==at?void 0:at.sign_in_second_factor)||null}})).apply(this,arguments)}function Ho(te){return 1e3*Number(te)}function Nr(te){const[L,j,ie]=te.split(".");if(void 0===L||void 0===j||void 0===ie)return An("JWT malformed, contained fewer than 3 sections"),null;try{const Ne=(0,ne.u)(j);return Ne?JSON.parse(Ne):(An("Failed to decode base64 JWT payload"),null)}catch(Ne){return An("Caught error parsing JWT payload as JSON",null==Ne?void 0:Ne.toString()),null}}function ir(te){const L=Nr(te);return Ct(L,"internal-error"),Ct(typeof L.exp<"u","internal-error"),Ct(typeof L.iat<"u","internal-error"),Number(L.exp)-Number(L.iat)}function _r(te,L){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,V.A)(function*(te,L,j=!1){if(j)return L;try{return yield L}catch(ie){throw ie instanceof ne.g&&function Gs({code:te}){return"auth/user-disabled"===te||"auth/user-token-expired"===te}(ie)&&te.auth.currentUser===te&&(yield te.auth.signOut()),ie}})).apply(this,arguments)}class ni{constructor(L){this.user=L,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(L){var j;if(L){const ie=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),ie}{this.errorBackoff=3e4;const Ne=(null!==(j=this.user.stsTokenManager.expirationTime)&&void 0!==j?j:0)-Date.now()-3e5;return Math.max(0,Ne)}}schedule(L=!1){var j=this;if(!this.isRunning)return;const ie=this.getInterval(L);this.timerId=setTimeout((0,V.A)(function*(){yield j.iteration()}),ie)}iteration(){var L=this;return(0,V.A)(function*(){try{yield L.user.getIdToken(!0)}catch(j){return void("auth/network-request-failed"===(null==j?void 0:j.code)&&L.schedule(!0))}L.schedule()})()}}class as{constructor(L,j){this.createdAt=L,this.lastLoginAt=j,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cs(this.lastLoginAt),this.creationTime=Cs(this.createdAt)}_copy(L){this.createdAt=L.createdAt,this.lastLoginAt=L.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Lr(te){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,V.A)(function*(te){var L;const j=te.auth,ie=yield te.getIdToken(),Ne=yield _r(te,ti(j,{idToken:ie}));Ct(null==Ne?void 0:Ne.users.length,j,"internal-error");const at=Ne.users[0];te._notifyReloadListener(at);const ln=null!==(L=at.providerUserInfo)&&void 0!==L&&L.length?ei(at.providerUserInfo):[],hn=function Wi(te,L){return[...te.filter(ie=>!L.some(Ne=>Ne.providerId===ie.providerId)),...L]}(te.providerData,ln),Yi=!!te.isAnonymous&&!(te.email&&at.passwordHash||null!=hn&&hn.length),yr={uid:at.localId,displayName:at.displayName||null,photoURL:at.photoUrl||null,email:at.email||null,emailVerified:at.emailVerified||!1,phoneNumber:at.phoneNumber||null,tenantId:at.tenantId||null,providerData:hn,metadata:new as(at.createdAt,at.lastLoginAt),isAnonymous:Yi};Object.assign(te,yr)})).apply(this,arguments)}function Hr(){return(Hr=(0,V.A)(function*(te){const L=(0,ne.Ku)(te);yield Lr(L),yield L.auth._persistUserIfCurrent(L),L.auth._notifyListenersIfCurrent(L)})).apply(this,arguments)}function ei(te){return te.map(L=>{var{providerId:j}=L,ie=(0,qe.Tt)(L,["providerId"]);return{providerId:j,uid:ie.rawId||"",displayName:ie.displayName||null,email:ie.email||null,phoneNumber:ie.phoneNumber||null,photoURL:ie.photoUrl||null}})}function Xn(){return(Xn=(0,V.A)(function*(te,L){const j=yield to(te,{},(0,V.A)(function*(){const ie=(0,ne.Am)({grant_type:"refresh_token",refresh_token:L}).slice(1),{tokenApiHost:Ne,apiKey:at}=te.config,ln=Mi(te,Ne,"/v1/token",`key=${at}`),hn=yield te._getAdditionalHeaders();return hn["Content-Type"]="application/x-www-form-urlencoded",Ge.fetch()(ln,{method:"POST",headers:hn,body:ie})}));return{accessToken:j.access_token,expiresIn:j.expires_in,refreshToken:j.refresh_token}})).apply(this,arguments)}function mt(){return(mt=(0,V.A)(function*(te,L){return cn(te,"POST","/v2/accounts:revokeToken",Yn(te,L))})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(L){Ct(L.idToken,"internal-error"),Ct(typeof L.idToken<"u","internal-error"),Ct(typeof L.refreshToken<"u","internal-error");const j="expiresIn"in L&&typeof L.expiresIn<"u"?Number(L.expiresIn):ir(L.idToken);this.updateTokensAndExpiration(L.idToken,L.refreshToken,j)}updateFromIdToken(L){Ct(0!==L.length,"internal-error");const j=ir(L);this.updateTokensAndExpiration(L,null,j)}getToken(L,j=!1){var ie=this;return(0,V.A)(function*(){return j||!ie.accessToken||ie.isExpired?(Ct(ie.refreshToken,L,"user-token-expired"),ie.refreshToken?(yield ie.refresh(L,ie.refreshToken),ie.accessToken):null):ie.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(L,j){var ie=this;return(0,V.A)(function*(){const{accessToken:Ne,refreshToken:at,expiresIn:ln}=yield function Pi(te,L){return Xn.apply(this,arguments)}(L,j);ie.updateTokensAndExpiration(Ne,at,Number(ln))})()}updateTokensAndExpiration(L,j,ie){this.refreshToken=j||null,this.accessToken=L||null,this.expirationTime=Date.now()+1e3*ie}static fromJSON(L,j){const{refreshToken:ie,accessToken:Ne,expirationTime:at}=j,ln=new Ye;return ie&&(Ct("string"==typeof ie,"internal-error",{appName:L}),ln.refreshToken=ie),Ne&&(Ct("string"==typeof Ne,"internal-error",{appName:L}),ln.accessToken=Ne),at&&(Ct("number"==typeof at,"internal-error",{appName:L}),ln.expirationTime=at),ln}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(L){this.accessToken=L.accessToken,this.refreshToken=L.refreshToken,this.expirationTime=L.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return Me("not implemented")}}function Mt(te,L){Ct("string"==typeof te||typeof te>"u","internal-error",{appName:L})}class Jt{constructor(L){var{uid:j,auth:ie,stsTokenManager:Ne}=L,at=(0,qe.Tt)(L,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ni(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=j,this.auth=ie,this.stsTokenManager=Ne,this.accessToken=Ne.accessToken,this.displayName=at.displayName||null,this.email=at.email||null,this.emailVerified=at.emailVerified||!1,this.phoneNumber=at.phoneNumber||null,this.photoURL=at.photoURL||null,this.isAnonymous=at.isAnonymous||!1,this.tenantId=at.tenantId||null,this.providerData=at.providerData?[...at.providerData]:[],this.metadata=new as(at.createdAt||void 0,at.lastLoginAt||void 0)}getIdToken(L){var j=this;return(0,V.A)(function*(){const ie=yield _r(j,j.stsTokenManager.getToken(j.auth,L));return Ct(ie,j.auth,"internal-error"),j.accessToken!==ie&&(j.accessToken=ie,yield j.auth._persistUserIfCurrent(j),j.auth._notifyListenersIfCurrent(j)),ie})()}getIdTokenResult(L){return function Kr(te){return Qr.apply(this,arguments)}(this,L)}reload(){return function vs(te){return Hr.apply(this,arguments)}(this)}_assign(L){this!==L&&(Ct(this.uid===L.uid,this.auth,"internal-error"),this.displayName=L.displayName,this.photoURL=L.photoURL,this.email=L.email,this.emailVerified=L.emailVerified,this.phoneNumber=L.phoneNumber,this.isAnonymous=L.isAnonymous,this.tenantId=L.tenantId,this.providerData=L.providerData.map(j=>Object.assign({},j)),this.metadata._copy(L.metadata),this.stsTokenManager._assign(L.stsTokenManager))}_clone(L){const j=new Jt(Object.assign(Object.assign({},this),{auth:L,stsTokenManager:this.stsTokenManager._clone()}));return j.metadata._copy(this.metadata),j}_onReload(L){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=L,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(L){this.reloadListener?this.reloadListener(L):this.reloadUserInfo=L}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(L,j=!1){var ie=this;return(0,V.A)(function*(){let Ne=!1;L.idToken&&L.idToken!==ie.stsTokenManager.accessToken&&(ie.stsTokenManager.updateFromServerResponse(L),Ne=!0),j&&(yield Lr(ie)),yield ie.auth._persistUserIfCurrent(ie),Ne&&ie.auth._notifyListenersIfCurrent(ie)})()}delete(){var L=this;return(0,V.A)(function*(){if((0,se.xZ)(L.auth.app))return Promise.reject(vn(L.auth));const j=yield L.getIdToken();return yield _r(L,function eo(te,L){return es.apply(this,arguments)}(L.auth,{idToken:j})),L.stsTokenManager.clearRefreshToken(),L.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(L=>Object.assign({},L)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(L,j){var ie,Ne,at,ln,hn,Qn,Wn,Yi;const yr=null!==(ie=j.displayName)&&void 0!==ie?ie:void 0,Sr=null!==(Ne=j.email)&&void 0!==Ne?Ne:void 0,$r=null!==(at=j.phoneNumber)&&void 0!==at?at:void 0,is=null!==(ln=j.photoURL)&&void 0!==ln?ln:void 0,tl=null!==(hn=j.tenantId)&&void 0!==hn?hn:void 0,Ds=null!==(Qn=j._redirectEventId)&&void 0!==Qn?Qn:void 0,os=null!==(Wn=j.createdAt)&&void 0!==Wn?Wn:void 0,ea=null!==(Yi=j.lastLoginAt)&&void 0!==Yi?Yi:void 0,{uid:na,emailVerified:js,isAnonymous:fs,providerData:ya,stsTokenManager:ll}=j;Ct(na&&ll,L,"internal-error");const ia=Ye.fromJSON(this.name,ll);Ct("string"==typeof na,L,"internal-error"),Mt(yr,L.name),Mt(Sr,L.name),Ct("boolean"==typeof js,L,"internal-error"),Ct("boolean"==typeof fs,L,"internal-error"),Mt($r,L.name),Mt(is,L.name),Mt(tl,L.name),Mt(Ds,L.name),Mt(os,L.name),Mt(ea,L.name);const ba=new Jt({uid:na,auth:L,email:Sr,emailVerified:js,displayName:yr,isAnonymous:fs,photoURL:is,phoneNumber:$r,tenantId:tl,stsTokenManager:ia,createdAt:os,lastLoginAt:ea});return ya&&Array.isArray(ya)&&(ba.providerData=ya.map(Ki=>Object.assign({},Ki))),Ds&&(ba._redirectEventId=Ds),ba}static _fromIdTokenResponse(L,j,ie=!1){return(0,V.A)(function*(){const Ne=new Ye;Ne.updateFromServerResponse(j);const at=new Jt({uid:j.localId,auth:L,stsTokenManager:Ne,isAnonymous:ie});return yield Lr(at),at})()}static _fromGetAccountInfoResponse(L,j,ie){return(0,V.A)(function*(){const Ne=j.users[0];Ct(void 0!==Ne.localId,"internal-error");const at=void 0!==Ne.providerUserInfo?ei(Ne.providerUserInfo):[],ln=!(Ne.email&&Ne.passwordHash||null!=at&&at.length),hn=new Ye;hn.updateFromIdToken(ie);const Qn=new Jt({uid:Ne.localId,auth:L,stsTokenManager:hn,isAnonymous:ln}),Wn={uid:Ne.localId,displayName:Ne.displayName||null,photoURL:Ne.photoUrl||null,email:Ne.email||null,emailVerified:Ne.emailVerified||!1,phoneNumber:Ne.phoneNumber||null,tenantId:Ne.tenantId||null,providerData:at,metadata:new as(Ne.createdAt,Ne.lastLoginAt),isAnonymous:!(Ne.email&&Ne.passwordHash||null!=at&&at.length)};return Object.assign(Qn,Wn),Qn})()}}const Bn=new Map;function Lt(te){pn(te instanceof Function,"Expected a class definition");let L=Bn.get(te);return L?(pn(L instanceof te,"Instance stored in cache mismatched with class"),L):(L=new te,Bn.set(te,L),L)}const ue=(()=>{class te{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,V.A)(function*(){return!0})()}_set(j,ie){var Ne=this;return(0,V.A)(function*(){Ne.storage[j]=ie})()}_get(j){var ie=this;return(0,V.A)(function*(){const Ne=ie.storage[j];return void 0===Ne?null:Ne})()}_remove(j){var ie=this;return(0,V.A)(function*(){delete ie.storage[j]})()}_addListener(j,ie){}_removeListener(j,ie){}}return te.type="NONE",te})();function ae(te,L,j){return`firebase:${te}:${L}:${j}`}class we{constructor(L,j,ie){this.persistence=L,this.auth=j,this.userKey=ie;const{config:Ne,name:at}=this.auth;this.fullUserKey=ae(this.userKey,Ne.apiKey,at),this.fullPersistenceKey=ae("persistence",Ne.apiKey,at),this.boundEventHandler=j._onStorageEvent.bind(j),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(L){return this.persistence._set(this.fullUserKey,L.toJSON())}getCurrentUser(){var L=this;return(0,V.A)(function*(){const j=yield L.persistence._get(L.fullUserKey);return j?Jt._fromJSON(L.auth,j):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(L){var j=this;return(0,V.A)(function*(){if(j.persistence===L)return;const ie=yield j.getCurrentUser();return yield j.removeCurrentUser(),j.persistence=L,ie?j.setCurrentUser(ie):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(L,j,ie="authUser"){return(0,V.A)(function*(){if(!j.length)return new we(Lt(ue),L,ie);const Ne=(yield Promise.all(j.map(function(){var Wn=(0,V.A)(function*(Yi){if(yield Yi._isAvailable())return Yi});return function(Yi){return Wn.apply(this,arguments)}}()))).filter(Wn=>Wn);let at=Ne[0]||Lt(ue);const ln=ae(ie,L.config.apiKey,L.name);let hn=null;for(const Wn of j)try{const Yi=yield Wn._get(ln);if(Yi){const yr=Jt._fromJSON(L,Yi);Wn!==at&&(hn=yr),at=Wn;break}}catch{}const Qn=Ne.filter(Wn=>Wn._shouldAllowMigration);return at._shouldAllowMigration&&Qn.length?(at=Qn[0],hn&&(yield at._set(ln,hn.toJSON())),yield Promise.all(j.map(function(){var Wn=(0,V.A)(function*(Yi){if(Yi!==at)try{yield Yi._remove(ln)}catch{}});return function(Yi){return Wn.apply(this,arguments)}}())),new we(at,L,ie)):new we(at,L,ie)})()}}function Ue(te){const L=te.toLowerCase();if(L.includes("opera/")||L.includes("opr/")||L.includes("opios/"))return"Opera";if(dn(L))return"IEMobile";if(L.includes("msie")||L.includes("trident/"))return"IE";if(L.includes("edge/"))return"Edge";if(it(L))return"Firefox";if(L.includes("silk/"))return"Silk";if(Bi(L))return"Blackberry";if(Vi(L))return"Webos";if(qt(L))return"Safari";if((L.includes("chrome/")||En(L))&&!L.includes("edge/"))return"Chrome";if(Gn(L))return"Android";{const ie=te.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==ie?void 0:ie.length))return ie[1]}return"Other"}function it(te=(0,ne.ZQ)()){return/firefox\//i.test(te)}function qt(te=(0,ne.ZQ)()){const L=te.toLowerCase();return L.includes("safari/")&&!L.includes("chrome/")&&!L.includes("crios/")&&!L.includes("android")}function En(te=(0,ne.ZQ)()){return/crios\//i.test(te)}function dn(te=(0,ne.ZQ)()){return/iemobile/i.test(te)}function Gn(te=(0,ne.ZQ)()){return/android/i.test(te)}function Bi(te=(0,ne.ZQ)()){return/blackberry/i.test(te)}function Vi(te=(0,ne.ZQ)()){return/webos/i.test(te)}function Bo(te=(0,ne.ZQ)()){return/iphone|ipad|ipod/i.test(te)||/macintosh/i.test(te)&&/mobile/i.test(te)}function hi(te=(0,ne.ZQ)()){return Bo(te)||Gn(te)||Vi(te)||Bi(te)||/windows phone/i.test(te)||dn(te)}function Zi(te,L=[]){let j;switch(te){case"Browser":j=Ue((0,ne.ZQ)());break;case"Worker":j=`${Ue((0,ne.ZQ)())}-${te}`;break;default:j=te}const ie=L.length?L.join(","):"FirebaseCore-web";return`${j}/JsCore/${se.MF}/${ie}`}class Yt{constructor(L){this.auth=L,this.queue=[]}pushCallback(L,j){const ie=at=>new Promise((ln,hn)=>{try{ln(L(at))}catch(Qn){hn(Qn)}});ie.onAbort=j,this.queue.push(ie);const Ne=this.queue.length-1;return()=>{this.queue[Ne]=()=>Promise.resolve()}}runMiddleware(L){var j=this;return(0,V.A)(function*(){if(j.auth.currentUser===L)return;const ie=[];try{for(const Ne of j.queue)yield Ne(L),Ne.onAbort&&ie.push(Ne.onAbort)}catch(Ne){ie.reverse();for(const at of ie)try{at()}catch{}throw j.auth._errorFactory.create("login-blocked",{originalMessage:null==Ne?void 0:Ne.message})}})()}}function Ri(){return(Ri=(0,V.A)(function*(te,L={}){return cn(te,"GET","/v2/passwordPolicy",Yn(te,L))})).apply(this,arguments)}class mr{constructor(L){var j,ie,Ne,at;const ln=L.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(j=ln.minPasswordLength)&&void 0!==j?j:6,ln.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ln.maxPasswordLength),void 0!==ln.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ln.containsLowercaseCharacter),void 0!==ln.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ln.containsUppercaseCharacter),void 0!==ln.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ln.containsNumericCharacter),void 0!==ln.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ln.containsNonAlphanumericCharacter),this.enforcementState=L.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(Ne=null===(ie=L.allowedNonAlphanumericCharacters)||void 0===ie?void 0:ie.join(""))&&void 0!==Ne?Ne:"",this.forceUpgradeOnSignin=null!==(at=L.forceUpgradeOnSignin)&&void 0!==at&&at,this.schemaVersion=L.schemaVersion}validatePassword(L){var j,ie,Ne,at,ln,hn;const Qn={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(L,Qn),this.validatePasswordCharacterOptions(L,Qn),Qn.isValid&&(Qn.isValid=null===(j=Qn.meetsMinPasswordLength)||void 0===j||j),Qn.isValid&&(Qn.isValid=null===(ie=Qn.meetsMaxPasswordLength)||void 0===ie||ie),Qn.isValid&&(Qn.isValid=null===(Ne=Qn.containsLowercaseLetter)||void 0===Ne||Ne),Qn.isValid&&(Qn.isValid=null===(at=Qn.containsUppercaseLetter)||void 0===at||at),Qn.isValid&&(Qn.isValid=null===(ln=Qn.containsNumericCharacter)||void 0===ln||ln),Qn.isValid&&(Qn.isValid=null===(hn=Qn.containsNonAlphanumericCharacter)||void 0===hn||hn),Qn}validatePasswordLengthOptions(L,j){const ie=this.customStrengthOptions.minPasswordLength,Ne=this.customStrengthOptions.maxPasswordLength;ie&&(j.meetsMinPasswordLength=L.length>=ie),Ne&&(j.meetsMaxPasswordLength=L.length<=Ne)}validatePasswordCharacterOptions(L,j){let ie;this.updatePasswordCharacterOptionsStatuses(j,!1,!1,!1,!1);for(let Ne=0;Ne<L.length;Ne++)ie=L.charAt(Ne),this.updatePasswordCharacterOptionsStatuses(j,ie>="a"&&ie<="z",ie>="A"&&ie<="Z",ie>="0"&&ie<="9",this.allowedNonAlphanumericCharacters.includes(ie))}updatePasswordCharacterOptionsStatuses(L,j,ie,Ne,at){this.customStrengthOptions.containsLowercaseLetter&&(L.containsLowercaseLetter||(L.containsLowercaseLetter=j)),this.customStrengthOptions.containsUppercaseLetter&&(L.containsUppercaseLetter||(L.containsUppercaseLetter=ie)),this.customStrengthOptions.containsNumericCharacter&&(L.containsNumericCharacter||(L.containsNumericCharacter=Ne)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(L.containsNonAlphanumericCharacter||(L.containsNonAlphanumericCharacter=at))}}class ss{constructor(L,j,ie,Ne){this.app=L,this.heartbeatServiceProvider=j,this.appCheckServiceProvider=ie,this.config=Ne,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Na(this),this.idTokenSubscription=new Na(this),this.beforeStateQueue=new Yt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=L.name,this.clientVersion=Ne.sdkClientVersion}_initializeWithPersistence(L,j){var ie=this;return j&&(this._popupRedirectResolver=Lt(j)),this._initializationPromise=this.queue((0,V.A)(function*(){var Ne,at;if(!ie._deleted&&(ie.persistenceManager=yield we.create(ie,L),!ie._deleted)){if(null!==(Ne=ie._popupRedirectResolver)&&void 0!==Ne&&Ne._shouldInitProactively)try{yield ie._popupRedirectResolver._initialize(ie)}catch{}yield ie.initializeCurrentUser(j),ie.lastNotifiedUid=(null===(at=ie.currentUser)||void 0===at?void 0:at.uid)||null,!ie._deleted&&(ie._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var L=this;return(0,V.A)(function*(){if(L._deleted)return;const j=yield L.assertedPersistence.getCurrentUser();if(L.currentUser||j){if(L.currentUser&&j&&L.currentUser.uid===j.uid)return L._currentUser._assign(j),void(yield L.currentUser.getIdToken());yield L._updateCurrentUser(j,!0)}})()}initializeCurrentUserFromIdToken(L){var j=this;return(0,V.A)(function*(){try{const ie=yield ti(j,{idToken:L}),Ne=yield Jt._fromGetAccountInfoResponse(j,ie,L);yield j.directlySetCurrentUser(Ne)}catch(ie){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",ie),yield j.directlySetCurrentUser(null)}})()}initializeCurrentUser(L){var j=this;return(0,V.A)(function*(){var ie;if((0,se.xZ)(j.app)){const hn=j.app.settings.authIdToken;return hn?new Promise(Qn=>{setTimeout(()=>j.initializeCurrentUserFromIdToken(hn).then(Qn,Qn))}):j.directlySetCurrentUser(null)}const Ne=yield j.assertedPersistence.getCurrentUser();let at=Ne,ln=!1;if(L&&j.config.authDomain){yield j.getOrInitRedirectPersistenceManager();const hn=null===(ie=j.redirectUser)||void 0===ie?void 0:ie._redirectEventId,Qn=null==at?void 0:at._redirectEventId,Wn=yield j.tryRedirectSignIn(L);(!hn||hn===Qn)&&null!=Wn&&Wn.user&&(at=Wn.user,ln=!0)}if(!at)return j.directlySetCurrentUser(null);if(!at._redirectEventId){if(ln)try{yield j.beforeStateQueue.runMiddleware(at)}catch(hn){at=Ne,j._popupRedirectResolver._overrideRedirectResult(j,()=>Promise.reject(hn))}return at?j.reloadAndSetCurrentUserOrClear(at):j.directlySetCurrentUser(null)}return Ct(j._popupRedirectResolver,j,"argument-error"),yield j.getOrInitRedirectPersistenceManager(),j.redirectUser&&j.redirectUser._redirectEventId===at._redirectEventId?j.directlySetCurrentUser(at):j.reloadAndSetCurrentUserOrClear(at)})()}tryRedirectSignIn(L){var j=this;return(0,V.A)(function*(){let ie=null;try{ie=yield j._popupRedirectResolver._completeRedirectFn(j,L,!0)}catch{yield j._setRedirectUser(null)}return ie})()}reloadAndSetCurrentUserOrClear(L){var j=this;return(0,V.A)(function*(){try{yield Lr(L)}catch(ie){if("auth/network-request-failed"!==(null==ie?void 0:ie.code))return j.directlySetCurrentUser(null)}return j.directlySetCurrentUser(L)})()}useDeviceLanguage(){this.languageCode=function Fn(){if(typeof navigator>"u")return null;const te=navigator;return te.languages&&te.languages[0]||te.language||null}()}_delete(){var L=this;return(0,V.A)(function*(){L._deleted=!0})()}updateCurrentUser(L){var j=this;return(0,V.A)(function*(){if((0,se.xZ)(j.app))return Promise.reject(vn(j));const ie=L?(0,ne.Ku)(L):null;return ie&&Ct(ie.auth.config.apiKey===j.config.apiKey,j,"invalid-user-token"),j._updateCurrentUser(ie&&ie._clone(j))})()}_updateCurrentUser(L,j=!1){var ie=this;return(0,V.A)(function*(){if(!ie._deleted)return L&&Ct(ie.tenantId===L.tenantId,ie,"tenant-id-mismatch"),j||(yield ie.beforeStateQueue.runMiddleware(L)),ie.queue((0,V.A)(function*(){yield ie.directlySetCurrentUser(L),ie.notifyAuthListeners()}))})()}signOut(){var L=this;return(0,V.A)(function*(){return(0,se.xZ)(L.app)?Promise.reject(vn(L)):(yield L.beforeStateQueue.runMiddleware(null),(L.redirectPersistenceManager||L._popupRedirectResolver)&&(yield L._setRedirectUser(null)),L._updateCurrentUser(null,!0))})()}setPersistence(L){var j=this;return(0,se.xZ)(this.app)?Promise.reject(vn(this)):this.queue((0,V.A)(function*(){yield j.assertedPersistence.setPersistence(Lt(L))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(L){var j=this;return(0,V.A)(function*(){j._getPasswordPolicyInternal()||(yield j._updatePasswordPolicy());const ie=j._getPasswordPolicyInternal();return ie.schemaVersion!==j.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(j._errorFactory.create("unsupported-password-policy-schema-version",{})):ie.validatePassword(L)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var L=this;return(0,V.A)(function*(){const j=yield function ri(te){return Ri.apply(this,arguments)}(L),ie=new mr(j);null===L.tenantId?L._projectPasswordPolicy=ie:L._tenantPasswordPolicies[L.tenantId]=ie})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(L){this._errorFactory=new ne.FA("auth","Firebase",L())}onAuthStateChanged(L,j,ie){return this.registerStateListener(this.authStateSubscription,L,j,ie)}beforeAuthStateChanged(L,j){return this.beforeStateQueue.pushCallback(L,j)}onIdTokenChanged(L,j,ie){return this.registerStateListener(this.idTokenSubscription,L,j,ie)}authStateReady(){return new Promise((L,j)=>{if(this.currentUser)L();else{const ie=this.onAuthStateChanged(()=>{ie(),L()},j)}})}revokeAccessToken(L){var j=this;return(0,V.A)(function*(){if(j.currentUser){const ie=yield j.currentUser.getIdToken(),Ne={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:L,idToken:ie};null!=j.tenantId&&(Ne.tenantId=j.tenantId),yield function kt(te,L){return mt.apply(this,arguments)}(j,Ne)}})()}toJSON(){var L;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(L=this._currentUser)||void 0===L?void 0:L.toJSON()}}_setRedirectUser(L,j){var ie=this;return(0,V.A)(function*(){const Ne=yield ie.getOrInitRedirectPersistenceManager(j);return null===L?Ne.removeCurrentUser():Ne.setCurrentUser(L)})()}getOrInitRedirectPersistenceManager(L){var j=this;return(0,V.A)(function*(){if(!j.redirectPersistenceManager){const ie=L&&Lt(L)||j._popupRedirectResolver;Ct(ie,j,"argument-error"),j.redirectPersistenceManager=yield we.create(j,[Lt(ie._redirectPersistence)],"redirectUser"),j.redirectUser=yield j.redirectPersistenceManager.getCurrentUser()}return j.redirectPersistenceManager})()}_redirectUserForId(L){var j=this;return(0,V.A)(function*(){var ie,Ne;return j._isInitialized&&(yield j.queue((0,V.A)(function*(){}))),(null===(ie=j._currentUser)||void 0===ie?void 0:ie._redirectEventId)===L?j._currentUser:(null===(Ne=j.redirectUser)||void 0===Ne?void 0:Ne._redirectEventId)===L?j.redirectUser:null})()}_persistUserIfCurrent(L){var j=this;return(0,V.A)(function*(){if(L===j.currentUser)return j.queue((0,V.A)(function*(){return j.directlySetCurrentUser(L)}))})()}_notifyListenersIfCurrent(L){L===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var L,j;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const ie=null!==(j=null===(L=this.currentUser)||void 0===L?void 0:L.uid)&&void 0!==j?j:null;this.lastNotifiedUid!==ie&&(this.lastNotifiedUid=ie,this.authStateSubscription.next(this.currentUser))}registerStateListener(L,j,ie,Ne){if(this._deleted)return()=>{};const at="function"==typeof j?j:j.next.bind(j);let ln=!1;const hn=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(hn,this,"internal-error"),hn.then(()=>{ln||at(this.currentUser)}),"function"==typeof j){const Qn=L.addObserver(j,ie,Ne);return()=>{ln=!0,Qn()}}{const Qn=L.addObserver(j);return()=>{ln=!0,Qn()}}}directlySetCurrentUser(L){var j=this;return(0,V.A)(function*(){j.currentUser&&j.currentUser!==L&&j._currentUser._stopProactiveRefresh(),L&&j.isProactiveRefreshEnabled&&L._startProactiveRefresh(),j.currentUser=L,L?yield j.assertedPersistence.setCurrentUser(L):yield j.assertedPersistence.removeCurrentUser()})()}queue(L){return this.operations=this.operations.then(L,L),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(L){!L||this.frameworks.includes(L)||(this.frameworks.push(L),this.frameworks.sort(),this.clientVersion=Zi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var L=this;return(0,V.A)(function*(){var j;const ie={"X-Client-Version":L.clientVersion};L.app.options.appId&&(ie["X-Firebase-gmpid"]=L.app.options.appId);const Ne=yield null===(j=L.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===j?void 0:j.getHeartbeatsHeader();Ne&&(ie["X-Firebase-Client"]=Ne);const at=yield L._getAppCheckToken();return at&&(ie["X-Firebase-AppCheck"]=at),ie})()}_getAppCheckToken(){var L=this;return(0,V.A)(function*(){var j;const ie=yield null===(j=L.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===j?void 0:j.getToken();return null!=ie&&ie.error&&function Jn(te,...L){ht.logLevel<=l.$b.WARN&&ht.warn(`Auth (${se.MF}): ${te}`,...L)}(`Error while retrieving App Check token: ${ie.error}`),null==ie?void 0:ie.token})()}}function Vr(te){return(0,ne.Ku)(te)}class Na{constructor(L){this.auth=L,this.observer=null,this.addObserver=(0,ne.tD)(j=>this.observer=j)}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rl={loadJS:()=>(0,V.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ra(te){return Rl.loadJS(te)}function Tr(te){return`__${te}${Math.floor(1e6*Math.random())}`}class Ys{constructor(L){this.type="recaptcha-enterprise",this.auth=Vr(L)}verify(L="verify",j=!1){var ie=this;return(0,V.A)(function*(){function at(){return at=(0,V.A)(function*(hn){if(!j){if(null==hn.tenantId&&null!=hn._agentRecaptchaConfig)return hn._agentRecaptchaConfig.siteKey;if(null!=hn.tenantId&&void 0!==hn._tenantRecaptchaConfigs[hn.tenantId])return hn._tenantRecaptchaConfigs[hn.tenantId].siteKey}return new Promise(function(){var Qn=(0,V.A)(function*(Wn,Yi){Fi(hn,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(yr=>{if(void 0!==yr.recaptchaKey){const Sr=new yi(yr);return null==hn.tenantId?hn._agentRecaptchaConfig=Sr:hn._tenantRecaptchaConfigs[hn.tenantId]=Sr,Wn(Sr.siteKey)}Yi(new Error("recaptcha Enterprise site key undefined"))}).catch(yr=>{Yi(yr)})});return function(Wn,Yi){return Qn.apply(this,arguments)}}())}),at.apply(this,arguments)}function ln(hn,Qn,Wn){const Yi=window.grecaptcha;Li(Yi)?Yi.enterprise.ready(()=>{Yi.enterprise.execute(hn,{action:L}).then(yr=>{Qn(yr)}).catch(()=>{Qn("NO_RECAPTCHA")})}):Wn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((hn,Qn)=>{(function Ne(hn){return at.apply(this,arguments)})(ie.auth).then(Wn=>{if(!j&&Li(window.grecaptcha))ln(Wn,hn,Qn);else{if(typeof window>"u")return void Qn(new Error("RecaptchaVerifier is only supported in browser"));let Yi=function Hi(){return Rl.recaptchaEnterpriseScript}();0!==Yi.length&&(Yi+=Wn),Ra(Yi).then(()=>{ln(Wn,hn,Qn)}).catch(yr=>{Qn(yr)})}}).catch(Wn=>{Qn(Wn)})})})()}}function sa(te,L,j){return va.apply(this,arguments)}function va(){return(va=(0,V.A)(function*(te,L,j,ie=!1){const Ne=new Ys(te);let at;try{at=yield Ne.verify(j)}catch{at=yield Ne.verify(j,!0)}const ln=Object.assign({},L);return Object.assign(ln,ie?{captchaResp:at}:{captchaResponse:at}),Object.assign(ln,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ln,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ln})).apply(this,arguments)}function ol(te,L,j,ie){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,V.A)(function*(te,L,j,ie){var Ne;if(null!==(Ne=te._getRecaptchaConfig())&&void 0!==Ne&&Ne.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const at=yield sa(te,L,j,"getOobCode"===j);return ie(te,at)}return ie(te,L).catch(function(){var at=(0,V.A)(function*(ln){if("auth/missing-recaptcha-token"===ln.code){console.log(`${j} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const hn=yield sa(te,L,j,"getOobCode"===j);return ie(te,hn)}return Promise.reject(ln)});return function(ln){return at.apply(this,arguments)}}())}),Fa.apply(this,arguments)}function Pa(te){const L=te.indexOf(":");return L<0?"":te.substr(0,L+1)}function Hu(te){if(!te)return null;const L=Number(te);return isNaN(L)?null:L}class zl{constructor(L,j){this.providerId=L,this.signInMethod=j}toJSON(){return Me("not implemented")}_getIdTokenResponse(L){return Me("not implemented")}_linkToIdToken(L,j){return Me("not implemented")}_getReauthenticationResolver(L){return Me("not implemented")}}function mc(te,L){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,V.A)(function*(te,L){return cn(te,"POST","/v1/accounts:signUp",L)})).apply(this,arguments)}function yu(te,L){return kc.apply(this,arguments)}function kc(){return(kc=(0,V.A)(function*(te,L){return jo(te,"POST","/v1/accounts:signInWithPassword",Yn(te,L))})).apply(this,arguments)}function Eo(){return(Eo=(0,V.A)(function*(te,L){return cn(te,"POST","/v1/accounts:sendOobCode",Yn(te,L))})).apply(this,arguments)}function Gr(te,L){return rl.apply(this,arguments)}function rl(){return(rl=(0,V.A)(function*(te,L){return function lu(te,L){return Eo.apply(this,arguments)}(te,L)})).apply(this,arguments)}function vi(){return(vi=(0,V.A)(function*(te,L){return jo(te,"POST","/v1/accounts:signInWithEmailLink",Yn(te,L))})).apply(this,arguments)}function yo(){return(yo=(0,V.A)(function*(te,L){return jo(te,"POST","/v1/accounts:signInWithEmailLink",Yn(te,L))})).apply(this,arguments)}class co extends zl{constructor(L,j,ie,Ne=null){super("password",ie),this._email=L,this._password=j,this._tenantId=Ne}static _fromEmailAndPassword(L,j){return new co(L,j,"password")}static _fromEmailAndCode(L,j,ie=null){return new co(L,j,"emailLink",ie)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(L){const j="string"==typeof L?JSON.parse(L):L;if(null!=j&&j.email&&null!=j&&j.password){if("password"===j.signInMethod)return this._fromEmailAndPassword(j.email,j.password);if("emailLink"===j.signInMethod)return this._fromEmailAndCode(j.email,j.password,j.tenantId)}return null}_getIdTokenResponse(L){var j=this;return(0,V.A)(function*(){switch(j.signInMethod){case"password":return ol(L,{returnSecureToken:!0,email:j._email,password:j._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",yu);case"emailLink":return function zn(te,L){return vi.apply(this,arguments)}(L,{email:j._email,oobCode:j._password});default:qn(L,"internal-error")}})()}_linkToIdToken(L,j){var ie=this;return(0,V.A)(function*(){switch(ie.signInMethod){case"password":return ol(L,{idToken:j,returnSecureToken:!0,email:ie._email,password:ie._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mc);case"emailLink":return function go(te,L){return yo.apply(this,arguments)}(L,{idToken:j,email:ie._email,oobCode:ie._password});default:qn(L,"internal-error")}})()}_getReauthenticationResolver(L){return this._getIdTokenResponse(L)}}function gi(te,L){return qo.apply(this,arguments)}function qo(){return(qo=(0,V.A)(function*(te,L){return jo(te,"POST","/v1/accounts:signInWithIdp",Yn(te,L))})).apply(this,arguments)}class Sc{constructor(L){var j,ie,Ne,at,ln,hn;const Qn=(0,ne.I9)((0,ne.hp)(L)),Wn=null!==(j=Qn.apiKey)&&void 0!==j?j:null,Yi=null!==(ie=Qn.oobCode)&&void 0!==ie?ie:null,yr=function Bc(te){switch(te){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Ne=Qn.mode)&&void 0!==Ne?Ne:null);Ct(Wn&&Yi&&yr,"argument-error"),this.apiKey=Wn,this.operation=yr,this.code=Yi,this.continueUrl=null!==(at=Qn.continueUrl)&&void 0!==at?at:null,this.languageCode=null!==(ln=Qn.languageCode)&&void 0!==ln?ln:null,this.tenantId=null!==(hn=Qn.tenantId)&&void 0!==hn?hn:null}static parseLink(L){const j=function ha(te){const L=(0,ne.I9)((0,ne.hp)(te)).link,j=L?(0,ne.I9)((0,ne.hp)(L)).deep_link_id:null,ie=(0,ne.I9)((0,ne.hp)(te)).deep_link_id;return(ie?(0,ne.I9)((0,ne.hp)(ie)).link:null)||ie||j||L||te}(L);try{return new Sc(j)}catch{return null}}}let za=(()=>{class te{constructor(){this.providerId=te.PROVIDER_ID}static credential(j,ie){return co._fromEmailAndPassword(j,ie)}static credentialWithLink(j,ie){const Ne=Sc.parseLink(ie);return Ct(Ne,"argument-error"),co._fromEmailAndCode(j,Ne.code,Ne.tenantId)}}return te.PROVIDER_ID="password",te.EMAIL_PASSWORD_SIGN_IN_METHOD="password",te.EMAIL_LINK_SIGN_IN_METHOD="emailLink",te})();class Va{constructor(L){this.providerId=L,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(L){this.defaultLanguageCode=L}setCustomParameters(L){return this.customParameters=L,this}getCustomParameters(){return this.customParameters}}class gl extends Va{constructor(){super(...arguments),this.scopes=[]}addScope(L){return this.scopes.includes(L)||this.scopes.push(L),this}getScopes(){return[...this.scopes]}}function Ai(te,L){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,V.A)(function*(te,L){return jo(te,"POST","/v1/accounts:signUp",Yn(te,L))})).apply(this,arguments)}class mi{constructor(L){this.user=L.user,this.providerId=L.providerId,this._tokenResponse=L._tokenResponse,this.operationType=L.operationType}static _fromIdTokenResponse(L,j,ie,Ne=!1){return(0,V.A)(function*(){const at=yield Jt._fromIdTokenResponse(L,ie,Ne),ln=lo(ie);return new mi({user:at,providerId:ln,_tokenResponse:ie,operationType:j})})()}static _forOperation(L,j,ie){return(0,V.A)(function*(){yield L._updateTokensIfNecessary(ie,!0);const Ne=lo(ie);return new mi({user:L,providerId:Ne,_tokenResponse:ie,operationType:j})})()}}function lo(te){return te.providerId?te.providerId:"phoneNumber"in te?"phone":null}function Xo(te){return hr.apply(this,arguments)}function hr(){return(hr=(0,V.A)(function*(te){var L;if((0,se.xZ)(te.app))return Promise.reject(vn(te));const j=Vr(te);if(yield j._initializationPromise,null!==(L=j.currentUser)&&void 0!==L&&L.isAnonymous)return new mi({user:j.currentUser,providerId:null,operationType:"signIn"});const ie=yield Ai(j,{returnSecureToken:!0}),Ne=yield mi._fromIdTokenResponse(j,"signIn",ie,!0);return yield j._updateCurrentUser(Ne.user),Ne})).apply(this,arguments)}class gr extends ne.g{constructor(L,j,ie,Ne){var at;super(j.code,j.message),this.operationType=ie,this.user=Ne,Object.setPrototypeOf(this,gr.prototype),this.customData={appName:L.name,tenantId:null!==(at=L.tenantId)&&void 0!==at?at:void 0,_serverResponse:j.customData._serverResponse,operationType:ie}}static _fromErrorAndOperation(L,j,ie,Ne){return new gr(L,j,ie,Ne)}}function jr(te,L,j,ie){return("reauthenticate"===L?j._getReauthenticationResolver(te):j._getIdTokenResponse(te)).catch(at=>{throw"auth/multi-factor-auth-required"===at.code?gr._fromErrorAndOperation(te,at,L,ie):at})}function wl(){return(wl=(0,V.A)(function*(te,L,j=!1){const ie=yield _r(te,L._linkToIdToken(te.auth,yield te.getIdToken()),j);return mi._forOperation(te,"link",ie)})).apply(this,arguments)}function sl(){return(sl=(0,V.A)(function*(te,L,j=!1){const{auth:ie}=te;if((0,se.xZ)(ie.app))return Promise.reject(vn(ie));const Ne="reauthenticate";try{const at=yield _r(te,jr(ie,Ne,L,te),j);Ct(at.idToken,ie,"internal-error");const ln=Nr(at.idToken);Ct(ln,ie,"internal-error");const{sub:hn}=ln;return Ct(te.uid===hn,ie,"user-mismatch"),mi._forOperation(te,Ne,at)}catch(at){throw"auth/user-not-found"===(null==at?void 0:at.code)&&qn(ie,"user-mismatch"),at}})).apply(this,arguments)}function Ca(te,L){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,V.A)(function*(te,L,j=!1){if((0,se.xZ)(te.app))return Promise.reject(vn(te));const Ne=yield jr(te,"signIn",L),at=yield mi._fromIdTokenResponse(te,"signIn",Ne);return j||(yield te._updateCurrentUser(at.user)),at})).apply(this,arguments)}function _t(){return(_t=(0,V.A)(function*(te,L){return Ca(Vr(te),L)})).apply(this,arguments)}function _s(te){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,V.A)(function*(te){const L=Vr(te);L._getPasswordPolicyInternal()&&(yield L._updatePasswordPolicy())})).apply(this,arguments)}function qc(te,L,j){return dh.apply(this,arguments)}function dh(){return(dh=(0,V.A)(function*(te,L,j){const ie=Vr(te),Ne={requestType:"PASSWORD_RESET",email:L,clientType:"CLIENT_TYPE_WEB"};j&&function Fh(te,L,j){var ie;Ct((null===(ie=j.url)||void 0===ie?void 0:ie.length)>0,te,"invalid-continue-uri"),Ct(typeof j.dynamicLinkDomain>"u"||j.dynamicLinkDomain.length>0,te,"invalid-dynamic-link-domain"),L.continueUrl=j.url,L.dynamicLinkDomain=j.dynamicLinkDomain,L.canHandleCodeInApp=j.handleCodeInApp,j.iOS&&(Ct(j.iOS.bundleId.length>0,te,"missing-ios-bundle-id"),L.iOSBundleId=j.iOS.bundleId),j.android&&(Ct(j.android.packageName.length>0,te,"missing-android-pkg-name"),L.androidInstallApp=j.android.installApp,L.androidMinimumVersionCode=j.android.minimumVersion,L.androidPackageName=j.android.packageName)}(ie,Ne,j),yield ol(ie,Ne,"getOobCode",Gr)})).apply(this,arguments)}function uu(te,L,j){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,V.A)(function*(te,L,j){if((0,se.xZ)(te.app))return Promise.reject(vn(te));const ie=Vr(te),ln=yield ol(ie,{returnSecureToken:!0,email:L,password:j,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ai).catch(Qn=>{throw"auth/password-does-not-meet-requirements"===Qn.code&&_s(te),Qn}),hn=yield mi._fromIdTokenResponse(ie,"signIn",ln);return yield ie._updateCurrentUser(hn.user),hn})).apply(this,arguments)}function H0(te,L,j){return(0,se.xZ)(te.app)?Promise.reject(vn(te)):function ke(te,L){return _t.apply(this,arguments)}((0,ne.Ku)(te),za.credential(L,j)).catch(function(){var ie=(0,V.A)(function*(Ne){throw"auth/password-does-not-meet-requirements"===Ne.code&&_s(te),Ne});return function(Ne){return ie.apply(this,arguments)}}())}function Za(){return(Za=(0,V.A)(function*(te,L){return cn(te,"POST","/v1/accounts:createAuthUri",Yn(te,L))})).apply(this,arguments)}function Mc(te,L){return Os.apply(this,arguments)}function Os(){return Os=(0,V.A)(function*(te,L){const ie={identifier:L,continueUri:On()?Rt():"http://localhost"},{signinMethods:Ne}=yield function G0(te,L){return Za.apply(this,arguments)}((0,ne.Ku)(te),ie);return Ne||[]}),Os.apply(this,arguments)}function pa(te){return(0,ne.Ku)(te).signOut()}const gd="__sak";class Ma{constructor(L,j){this.storageRetriever=L,this.type=j}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(L,j){return this.storage.setItem(L,JSON.stringify(j)),Promise.resolve()}_get(L){const j=this.storage.getItem(L);return Promise.resolve(j?JSON.parse(j):null)}_remove(L){return this.storage.removeItem(L),Promise.resolve()}get storage(){return this.storageRetriever()}}const du=(()=>{class te extends Ma{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(j,ie)=>this.onStorageEvent(j,ie),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vd(){const te=(0,ne.ZQ)();return qt(te)||Bo(te)}()&&function po(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hi(),this._shouldAllowMigration=!0}forAllChangedKeys(j){for(const ie of Object.keys(this.listeners)){const Ne=this.storage.getItem(ie),at=this.localCache[ie];Ne!==at&&j(ie,at,Ne)}}onStorageEvent(j,ie=!1){if(!j.key)return void this.forAllChangedKeys((hn,Qn,Wn)=>{this.notifyListeners(hn,Wn)});const Ne=j.key;if(ie?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const hn=this.storage.getItem(Ne);if(j.newValue!==hn)null!==j.newValue?this.storage.setItem(Ne,j.newValue):this.storage.removeItem(Ne);else if(this.localCache[Ne]===j.newValue&&!ie)return}const at=()=>{const hn=this.storage.getItem(Ne);!ie&&this.localCache[Ne]===hn||this.notifyListeners(Ne,hn)},ln=this.storage.getItem(Ne);!function Vn(){return(0,ne.lT)()&&10===document.documentMode}()||ln===j.newValue||j.newValue===j.oldValue?at():setTimeout(at,10)}notifyListeners(j,ie){this.localCache[j]=ie;const Ne=this.listeners[j];if(Ne)for(const at of Array.from(Ne))at(ie&&JSON.parse(ie))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((j,ie,Ne)=>{this.onStorageEvent(new StorageEvent("storage",{key:j,oldValue:ie,newValue:Ne}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(j,ie){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[j]||(this.listeners[j]=new Set,this.localCache[j]=this.storage.getItem(j)),this.listeners[j].add(ie)}_removeListener(j,ie){this.listeners[j]&&(this.listeners[j].delete(ie),0===this.listeners[j].size&&delete this.listeners[j]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(j,ie){var Ne=()=>super._set,at=this;return(0,V.A)(function*(){yield Ne().call(at,j,ie),at.localCache[j]=JSON.stringify(ie)})()}_get(j){var ie=()=>super._get,Ne=this;return(0,V.A)(function*(){const at=yield ie().call(Ne,j);return Ne.localCache[j]=JSON.stringify(at),at})()}_remove(j){var ie=()=>super._remove,Ne=this;return(0,V.A)(function*(){yield ie().call(Ne,j),delete Ne.localCache[j]})()}}return te.type="LOCAL",te})(),Ac=(()=>{class te extends Ma{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(j,ie){}_removeListener(j,ie){}}return te.type="SESSION",te})();let Sh=(()=>{class te{constructor(j){this.eventTarget=j,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(j){const ie=this.receivers.find(at=>at.isListeningto(j));if(ie)return ie;const Ne=new te(j);return this.receivers.push(Ne),Ne}isListeningto(j){return this.eventTarget===j}handleEvent(j){var ie=this;return(0,V.A)(function*(){const Ne=j,{eventId:at,eventType:ln,data:hn}=Ne.data,Qn=ie.handlersMap[ln];if(null==Qn||!Qn.size)return;Ne.ports[0].postMessage({status:"ack",eventId:at,eventType:ln});const Wn=Array.from(Qn).map(function(){var yr=(0,V.A)(function*(Sr){return Sr(Ne.origin,hn)});return function(Sr){return yr.apply(this,arguments)}}()),Yi=yield function kh(te){return Promise.all(te.map(function(){var L=(0,V.A)(function*(j){try{return{fulfilled:!0,value:yield j}}catch(ie){return{fulfilled:!1,reason:ie}}});return function(j){return L.apply(this,arguments)}}()))}(Wn);Ne.ports[0].postMessage({status:"done",eventId:at,eventType:ln,response:Yi})})()}_subscribe(j,ie){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[j]||(this.handlersMap[j]=new Set),this.handlersMap[j].add(ie)}_unsubscribe(j,ie){this.handlersMap[j]&&ie&&this.handlersMap[j].delete(ie),(!ie||0===this.handlersMap[j].size)&&delete this.handlersMap[j],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return te.receivers=[],te})();function Yu(te="",L=10){let j="";for(let ie=0;ie<L;ie++)j+=Math.floor(10*Math.random());return te+j}class Z1{constructor(L){this.target=L,this.handlers=new Set}removeMessageHandler(L){L.messageChannel&&(L.messageChannel.port1.removeEventListener("message",L.onMessage),L.messageChannel.port1.close()),this.handlers.delete(L)}_send(L,j,ie=50){var Ne=this;return(0,V.A)(function*(){const at=typeof MessageChannel<"u"?new MessageChannel:null;if(!at)throw new Error("connection_unavailable");let ln,hn;return new Promise((Qn,Wn)=>{const Yi=Yu("",20);at.port1.start();const yr=setTimeout(()=>{Wn(new Error("unsupported_event"))},ie);hn={messageChannel:at,onMessage(Sr){const $r=Sr;if($r.data.eventId===Yi)switch($r.data.status){case"ack":clearTimeout(yr),ln=setTimeout(()=>{Wn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ln),Qn($r.data.response);break;default:clearTimeout(yr),clearTimeout(ln),Wn(new Error("invalid_response"))}}},Ne.handlers.add(hn),at.port1.addEventListener("message",hn.onMessage),Ne.target.postMessage({eventType:L,eventId:Yi,data:j},[at.port2])}).finally(()=>{hn&&Ne.removeMessageHandler(hn)})})()}}function tc(){return window}function Rd(){return typeof tc().WorkerGlobalScope<"u"&&"function"==typeof tc().importScripts}function Ws(){return(Ws=(0,V.A)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zd="firebaseLocalStorageDb",Th="firebaseLocalStorage",Yc="fbase_key";class Zd{constructor(L){this.request=L}toPromise(){return new Promise((L,j)=>{this.request.addEventListener("success",()=>{L(this.request.result)}),this.request.addEventListener("error",()=>{j(this.request.error)})})}}function W0(te,L){return te.transaction([Th],L?"readwrite":"readonly").objectStore(Th)}function uc(){const te=indexedDB.open(zd,1);return new Promise((L,j)=>{te.addEventListener("error",()=>{j(te.error)}),te.addEventListener("upgradeneeded",()=>{const ie=te.result;try{ie.createObjectStore(Th,{keyPath:Yc})}catch(Ne){j(Ne)}}),te.addEventListener("success",(0,V.A)(function*(){const ie=te.result;ie.objectStoreNames.contains(Th)?L(ie):(ie.close(),yield function C0(){const te=indexedDB.deleteDatabase(zd);return new Zd(te).toPromise()}(),L(yield uc()))}))})}function Mh(te,L,j){return q0.apply(this,arguments)}function q0(){return(q0=(0,V.A)(function*(te,L,j){const ie=W0(te,!0).put({[Yc]:L,value:j});return new Zd(ie).toPromise()})).apply(this,arguments)}function cd(){return(cd=(0,V.A)(function*(te,L){const j=W0(te,!1).get(L),ie=yield new Zd(j).toPromise();return void 0===ie?null:ie.value})).apply(this,arguments)}function _d(te,L){const j=W0(te,!0).delete(L);return new Zd(j).toPromise()}const yd=(()=>{class te{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var j=this;return(0,V.A)(function*(){return j.db||(j.db=yield uc()),j.db})()}_withRetries(j){var ie=this;return(0,V.A)(function*(){let Ne=0;for(;;)try{const at=yield ie._openDb();return yield j(at)}catch(at){if(Ne++>3)throw at;ie.db&&(ie.db.close(),ie.db=void 0)}})()}initializeServiceWorkerMessaging(){var j=this;return(0,V.A)(function*(){return Rd()?j.initializeReceiver():j.initializeSender()})()}initializeReceiver(){var j=this;return(0,V.A)(function*(){j.receiver=Sh._getInstance(function Yd(){return Rd()?self:null}()),j.receiver._subscribe("keyChanged",function(){var ie=(0,V.A)(function*(Ne,at){return{keyProcessed:(yield j._poll()).includes(at.key)}});return function(Ne,at){return ie.apply(this,arguments)}}()),j.receiver._subscribe("ping",function(){var ie=(0,V.A)(function*(Ne,at){return["keyChanged"]});return function(Ne,at){return ie.apply(this,arguments)}}())})()}initializeSender(){var j=this;return(0,V.A)(function*(){var ie,Ne;if(j.activeServiceWorker=yield function Hh(){return Ws.apply(this,arguments)}(),!j.activeServiceWorker)return;j.sender=new Z1(j.activeServiceWorker);const at=yield j.sender._send("ping",{},800);at&&null!==(ie=at[0])&&void 0!==ie&&ie.fulfilled&&null!==(Ne=at[0])&&void 0!==Ne&&Ne.value.includes("keyChanged")&&(j.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(j){var ie=this;return(0,V.A)(function*(){if(ie.sender&&ie.activeServiceWorker&&function E0(){var te;return(null===(te=null==navigator?void 0:navigator.serviceWorker)||void 0===te?void 0:te.controller)||null}()===ie.activeServiceWorker)try{yield ie.sender._send("keyChanged",{key:j},ie.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,V.A)(function*(){try{if(!indexedDB)return!1;const j=yield uc();return yield Mh(j,gd,"1"),yield _d(j,gd),!0}catch{}return!1})()}_withPendingWrite(j){var ie=this;return(0,V.A)(function*(){ie.pendingWrites++;try{yield j()}finally{ie.pendingWrites--}})()}_set(j,ie){var Ne=this;return(0,V.A)(function*(){return Ne._withPendingWrite((0,V.A)(function*(){return yield Ne._withRetries(at=>Mh(at,j,ie)),Ne.localCache[j]=ie,Ne.notifyServiceWorker(j)}))})()}_get(j){var ie=this;return(0,V.A)(function*(){const Ne=yield ie._withRetries(at=>function k0(te,L){return cd.apply(this,arguments)}(at,j));return ie.localCache[j]=Ne,Ne})()}_remove(j){var ie=this;return(0,V.A)(function*(){return ie._withPendingWrite((0,V.A)(function*(){return yield ie._withRetries(Ne=>_d(Ne,j)),delete ie.localCache[j],ie.notifyServiceWorker(j)}))})()}_poll(){var j=this;return(0,V.A)(function*(){const ie=yield j._withRetries(ln=>{const hn=W0(ln,!1).getAll();return new Zd(hn).toPromise()});if(!ie)return[];if(0!==j.pendingWrites)return[];const Ne=[],at=new Set;if(0!==ie.length)for(const{fbase_key:ln,value:hn}of ie)at.add(ln),JSON.stringify(j.localCache[ln])!==JSON.stringify(hn)&&(j.notifyListeners(ln,hn),Ne.push(ln));for(const ln of Object.keys(j.localCache))j.localCache[ln]&&!at.has(ln)&&(j.notifyListeners(ln,null),Ne.push(ln));return Ne})()}notifyListeners(j,ie){this.localCache[j]=ie;const Ne=this.listeners[j];if(Ne)for(const at of Array.from(Ne))at(ie)}startPolling(){var j=this;this.stopPolling(),this.pollTimer=setInterval((0,V.A)(function*(){return j._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(j,ie){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[j]||(this.listeners[j]=new Set,this._get(j)),this.listeners[j].add(ie)}_removeListener(j,ie){this.listeners[j]&&(this.listeners[j].delete(ie),0===this.listeners[j].size&&delete this.listeners[j]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return te.type="LOCAL",te})();Tr("rcb"),new Ke(3e4,6e4);class M0 extends zl{constructor(L){super("custom","custom"),this.params=L}_getIdTokenResponse(L){return gi(L,this._buildIdpRequest())}_linkToIdToken(L,j){return gi(L,this._buildIdpRequest(j))}_getReauthenticationResolver(L){return gi(L,this._buildIdpRequest())}_buildIdpRequest(L){const j={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return L&&(j.idToken=L),j}}function ud(te){return Ca(te.auth,new M0(te),te.bypassAuthState)}function Gh(te){const{auth:L,user:j}=te;return Ct(j,L,"internal-error"),function Ol(te,L){return sl.apply(this,arguments)}(j,new M0(te),te.bypassAuthState)}function hh(te){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,V.A)(function*(te){const{auth:L,user:j}=te;return Ct(j,L,"internal-error"),function nr(te,L){return wl.apply(this,arguments)}(j,new M0(te),te.bypassAuthState)})).apply(this,arguments)}class Qu{constructor(L,j,ie,Ne,at=!1){this.auth=L,this.resolver=ie,this.user=Ne,this.bypassAuthState=at,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(j)?j:[j]}execute(){var L=this;return new Promise(function(){var j=(0,V.A)(function*(ie,Ne){L.pendingPromise={resolve:ie,reject:Ne};try{L.eventManager=yield L.resolver._initialize(L.auth),yield L.onExecution(),L.eventManager.registerConsumer(L)}catch(at){L.reject(at)}});return function(ie,Ne){return j.apply(this,arguments)}}())}onAuthEvent(L){var j=this;return(0,V.A)(function*(){const{urlResponse:ie,sessionId:Ne,postBody:at,tenantId:ln,error:hn,type:Qn}=L;if(hn)return void j.reject(hn);const Wn={auth:j.auth,requestUri:ie,sessionId:Ne,tenantId:ln||void 0,postBody:at||void 0,user:j.user,bypassAuthState:j.bypassAuthState};try{j.resolve(yield j.getIdpTask(Qn)(Wn))}catch(Yi){j.reject(Yi)}})()}onError(L){this.reject(L)}getIdpTask(L){switch(L){case"signInViaPopup":case"signInViaRedirect":return ud;case"linkViaPopup":case"linkViaRedirect":return hh;case"reauthViaPopup":case"reauthViaRedirect":return Gh;default:qn(this.auth,"internal-error")}}resolve(L){pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(L),this.unregisterAndCleanUp()}reject(L){pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(L),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Ke(2e3,1e4);const g1="pendingRedirect",wd=new Map;class Ph extends Qu{constructor(L,j,ie=!1){super(L,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],j,void 0,ie),this.eventId=null}execute(){var L=()=>super.execute,j=this;return(0,V.A)(function*(){let ie=wd.get(j.auth._key());if(!ie){try{const at=(yield function Z0(te,L){return Ja.apply(this,arguments)}(j.resolver,j.auth))?yield L().call(j):null;ie=()=>Promise.resolve(at)}catch(Ne){ie=()=>Promise.reject(Ne)}wd.set(j.auth._key(),ie)}return j.bypassAuthState||wd.set(j.auth._key(),()=>Promise.resolve(null)),ie()})()}onAuthEvent(L){var j=()=>super.onAuthEvent,ie=this;return(0,V.A)(function*(){if("signInViaRedirect"===L.type)return j().call(ie,L);if("unknown"!==L.type){if(L.eventId){const Ne=yield ie.auth._redirectUserForId(L.eventId);if(Ne)return ie.user=Ne,j().call(ie,L);ie.resolve(null)}}else ie.resolve(null)})()}onExecution(){return(0,V.A)(function*(){})()}cleanUp(){}}function Ja(){return(Ja=(0,V.A)(function*(te,L){const j=function Cp(te){return ae(g1,te.config.apiKey,te.name)}(L),ie=function Q0(te){return Lt(te._redirectPersistence)}(te);if(!(yield ie._isAvailable()))return!1;const Ne="true"===(yield ie._get(j));return yield ie._remove(j),Ne})).apply(this,arguments)}function J1(te,L){wd.set(te._key(),L)}function pl(te,L){return gh.apply(this,arguments)}function gh(){return(gh=(0,V.A)(function*(te,L,j=!1){if((0,se.xZ)(te.app))return Promise.reject(vn(te));const ie=Vr(te),Ne=function eh(te,L){return L?Lt(L):(Ct(te._popupRedirectResolver,te,"argument-error"),te._popupRedirectResolver)}(ie,L),ln=yield new Ph(ie,Ne,j).execute();return ln&&!j&&(delete ln.user._redirectEventId,yield ie._persistUserIfCurrent(ln.user),yield ie._setRedirectUser(null,L)),ln})).apply(this,arguments)}class $s{constructor(L){this.auth=L,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(L){this.consumers.add(L),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,L)&&(this.sendToConsumer(this.queuedRedirectEvent,L),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(L){this.consumers.delete(L)}onEvent(L){if(this.hasEventBeenHandled(L))return!1;let j=!1;return this.consumers.forEach(ie=>{this.isEventForConsumer(L,ie)&&(j=!0,this.sendToConsumer(L,ie),this.saveEventToCache(L))}),this.hasHandledPotentialRedirect||!function pu(te){switch(te.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yh(te);default:return!1}}(L)||(this.hasHandledPotentialRedirect=!0,j||(this.queuedRedirectEvent=L,j=!0)),j}sendToConsumer(L,j){var ie;if(L.error&&!Yh(L)){const Ne=(null===(ie=L.error.code)||void 0===ie?void 0:ie.split("auth/")[1])||"internal-error";j.onError(xt(this.auth,Ne))}else j.onAuthEvent(L)}isEventForConsumer(L,j){const ie=null===j.eventId||!!L.eventId&&L.eventId===j.eventId;return j.filter.includes(L.type)&&ie}hasEventBeenHandled(L){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kh(L))}saveEventToCache(L){this.cachedEventUids.add(Kh(L)),this.lastProcessedEventTime=Date.now()}}function Kh(te){return[te.type,te.eventId,te.sessionId,te.tenantId].filter(L=>L).join("-")}function Yh({type:te,error:L}){return"unknown"===te&&"auth/no-auth-event"===(null==L?void 0:L.code)}function Ld(){return(Ld=(0,V.A)(function*(te,L={}){return cn(te,"GET","/v1/projects",L)})).apply(this,arguments)}const Vl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ih=/^https?/;function v1(){return v1=(0,V.A)(function*(te){if(te.config.emulator)return;const{authorizedDomains:L}=yield function dc(te){return Ld.apply(this,arguments)}(te);for(const j of L)try{if(Zh(j))return}catch{}qn(te,"unauthorized-domain")}),v1.apply(this,arguments)}function Zh(te){const L=Rt(),{protocol:j,hostname:ie}=new URL(L);if(te.startsWith("chrome-extension://")){const ln=new URL(te);return""===ln.hostname&&""===ie?"chrome-extension:"===j&&te.replace("chrome-extension://","")===L.replace("chrome-extension://",""):"chrome-extension:"===j&&ln.hostname===ie}if(!ih.test(j))return!1;if(Vl.test(te))return ie===te;const Ne=te.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Ne+"|"+Ne+")$","i").test(ie)}const Bd=new Ke(3e4,6e4);function Vc(){const te=tc().___jsl;if(null!=te&&te.H)for(const L of Object.keys(te.H))if(te.H[L].r=te.H[L].r||[],te.H[L].L=te.H[L].L||[],te.H[L].r=[...te.H[L].L],te.CP)for(let j=0;j<te.CP.length;j++)te.CP[j]=null}let Nd=null;const Jc=new Ke(5e3,15e3),R0="__/auth/iframe",Qh="emulator/auth/iframe",Wl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ql(te){const L=te.config;Ct(L.authDomain,te,"auth-domain-config-required");const j=L.emulator?Ae(L,Qh):`https://${te.config.authDomain}/${R0}`,ie={apiKey:L.apiKey,appName:te.name,v:se.MF},Ne=vh.get(te.config.apiHost);Ne&&(ie.eid=Ne);const at=te._getFrameworks();return at.length&&(ie.fw=at.join(",")),`${j}?${(0,ne.Am)(ie).slice(1)}`}function Rh(){return Rh=(0,V.A)(function*(te){const L=yield function Fd(te){return Nd=Nd||function ns(te){return new Promise((L,j)=>{var ie,Ne,at;function ln(){Vc(),gapi.load("gapi.iframes",{callback:()=>{L(gapi.iframes.getContext())},ontimeout:()=>{Vc(),j(xt(te,"network-request-failed"))},timeout:Bd.get()})}if(null!==(Ne=null===(ie=tc().gapi)||void 0===ie?void 0:ie.iframes)&&void 0!==Ne&&Ne.Iframe)L(gapi.iframes.getContext());else{if(null===(at=tc().gapi)||void 0===at||!at.load){const hn=Tr("iframefcb");return tc()[hn]=()=>{gapi.load?ln():j(xt(te,"network-request-failed"))},Ra(`${function Zo(){return Rl.gapiScript}()}?onload=${hn}`).catch(Qn=>j(Qn))}ln()}}).catch(L=>{throw Nd=null,L})}(te),Nd}(te),j=tc().gapi;return Ct(j,te,"internal-error"),L.open({where:document.body,url:ql(te),messageHandlersFilter:j.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wl,dontclear:!0},ie=>new Promise(function(){var Ne=(0,V.A)(function*(at,ln){yield ie.restyle({setHideOnLeave:!1});const hn=xt(te,"network-request-failed"),Qn=tc().setTimeout(()=>{ln(hn)},Jc.get());function Wn(){tc().clearTimeout(Qn),at(ie)}ie.ping(Wn).then(Wn,()=>{ln(hn)})});return function(at,ln){return Ne.apply(this,arguments)}}()))}),Rh.apply(this,arguments)}const zh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class b{constructor(L){this.window=L,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const N="__/auth/handler",H="emulator/auth/handler",J=encodeURIComponent("fac");function re(te,L,j,ie,Ne,at){return he.apply(this,arguments)}function he(){return(he=(0,V.A)(function*(te,L,j,ie,Ne,at){Ct(te.config.authDomain,te,"auth-domain-config-required"),Ct(te.config.apiKey,te,"invalid-api-key");const ln={apiKey:te.config.apiKey,appName:te.name,authType:j,redirectUrl:ie,v:se.MF,eventId:Ne};if(L instanceof Va){L.setDefaultLanguage(te.languageCode),ln.providerId=L.providerId||"",(0,ne.Im)(L.getCustomParameters())||(ln.customParameters=JSON.stringify(L.getCustomParameters()));for(const[Yi,yr]of Object.entries(at||{}))ln[Yi]=yr}if(L instanceof gl){const Yi=L.getScopes().filter(yr=>""!==yr);Yi.length>0&&(ln.scopes=Yi.join(","))}te.tenantId&&(ln.tid=te.tenantId);const hn=ln;for(const Yi of Object.keys(hn))void 0===hn[Yi]&&delete hn[Yi];const Qn=yield te._getAppCheckToken(),Wn=Qn?`#${J}=${encodeURIComponent(Qn)}`:"";return`${function ye({config:te}){return te.emulator?Ae(te,H):`https://${te.authDomain}/${N}`}(te)}?${(0,ne.Am)(hn).slice(1)}${Wn}`})).apply(this,arguments)}const Pe="webStorageSupport",Qe=class Fe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ac,this._completeRedirectFn=pl,this._overrideRedirectResult=J1}_openPopup(L,j,ie,Ne){var at=this;return(0,V.A)(function*(){var ln;pn(null===(ln=at.eventManagers[L._key()])||void 0===ln?void 0:ln.manager,"_initialize() not called before _openPopup()");const hn=yield re(L,j,ie,Rt(),Ne);return function M(te,L,j,ie=500,Ne=600){const at=Math.max((window.screen.availHeight-Ne)/2,0).toString(),ln=Math.max((window.screen.availWidth-ie)/2,0).toString();let hn="";const Qn=Object.assign(Object.assign({},zh),{width:ie.toString(),height:Ne.toString(),top:at,left:ln}),Wn=(0,ne.ZQ)().toLowerCase();j&&(hn=En(Wn)?"_blank":j),it(Wn)&&(L=L||"http://localhost",Qn.scrollbars="yes");const Yi=Object.entries(Qn).reduce((Sr,[$r,is])=>`${Sr}${$r}=${is},`,"");if(function oi(te=(0,ne.ZQ)()){var L;return Bo(te)&&!(null===(L=window.navigator)||void 0===L||!L.standalone)}(Wn)&&"_self"!==hn)return function R(te,L){const j=document.createElement("a");j.href=te,j.target=L;const ie=document.createEvent("MouseEvent");ie.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),j.dispatchEvent(ie)}(L||"",hn),new b(null);const yr=window.open(L||"",hn,Yi);Ct(yr,te,"popup-blocked");try{yr.focus()}catch{}return new b(yr)}(L,hn,Yu())})()}_openRedirect(L,j,ie,Ne){var at=this;return(0,V.A)(function*(){return yield at._originValidation(L),function zu(te){tc().location.href=te}(yield re(L,j,ie,Rt(),Ne)),new Promise(()=>{})})()}_initialize(L){const j=L._key();if(this.eventManagers[j]){const{manager:Ne,promise:at}=this.eventManagers[j];return Ne?Promise.resolve(Ne):(pn(at,"If manager is not set, promise should be"),at)}const ie=this.initAndGetManager(L);return this.eventManagers[j]={promise:ie},ie.catch(()=>{delete this.eventManagers[j]}),ie}initAndGetManager(L){var j=this;return(0,V.A)(function*(){const ie=yield function fu(te){return Rh.apply(this,arguments)}(L),Ne=new $s(L);return ie.register("authEvent",at=>(Ct(null==at?void 0:at.authEvent,L,"invalid-auth-event"),{status:Ne.onEvent(at.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),j.eventManagers[L._key()]={manager:Ne},j.iframes[L._key()]=ie,Ne})()}_isIframeWebStorageSupported(L,j){this.iframes[L._key()].send(Pe,{type:Pe},Ne=>{var at;const ln=null===(at=null==Ne?void 0:Ne[0])||void 0===at?void 0:at[Pe];void 0!==ln&&j(!!ln),qn(L,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(L){const j=L._key();return this.originValidationPromises[j]||(this.originValidationPromises[j]=function J0(te){return v1.apply(this,arguments)}(L)),this.originValidationPromises[j]}get _shouldInitProactively(){return hi()||qt()||Bo()}};var tn="@firebase/auth";class lt{constructor(L){this.auth=L,this.internalListeners=new Map}getUid(){var L;return this.assertAuthConfigured(),(null===(L=this.auth.currentUser)||void 0===L?void 0:L.uid)||null}getToken(L){var j=this;return(0,V.A)(function*(){return j.assertAuthConfigured(),yield j.auth._initializationPromise,j.auth.currentUser?{accessToken:yield j.auth.currentUser.getIdToken(L)}:null})()}addAuthTokenListener(L){if(this.assertAuthConfigured(),this.internalListeners.has(L))return;const j=this.auth.onIdTokenChanged(ie=>{L((null==ie?void 0:ie.stsTokenManager.accessToken)||null)});this.internalListeners.set(L,j),this.updateProactiveRefresh()}removeAuthTokenListener(L){this.assertAuthConfigured();const j=this.internalListeners.get(L);j&&(this.internalListeners.delete(L),j(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Dn=(0,ne.XA)("authIdTokenMaxAge")||300;let gn=null;const bi=te=>function(){var L=(0,V.A)(function*(j){const ie=j&&(yield j.getIdTokenResult()),Ne=ie&&((new Date).getTime()-Date.parse(ie.issuedAtTime))/1e3;if(Ne&&Ne>Dn)return;const at=null==ie?void 0:ie.token;gn!==at&&(gn=at,yield fetch(te,{method:at?"POST":"DELETE",headers:at?{Authorization:`Bearer ${at}`}:{}}))});return function(j){return L.apply(this,arguments)}}();function io(te=(0,se.Sx)()){const L=(0,se.j6)(te,"auth");if(L.isInitialized())return L.getImmediate();const j=function Ia(te,L){const j=(0,se.j6)(te,"auth");if(j.isInitialized()){const Ne=j.getImmediate(),at=j.getOptions();if((0,ne.bD)(at,null!=L?L:{}))return Ne;qn(Ne,"already-initialized")}return j.initialize({options:L})}(te,{popupRedirectResolver:Qe,persistence:[yd,du,Ac]}),ie=(0,ne.XA)("authTokenSyncURL");if(ie&&"boolean"==typeof isSecureContext&&isSecureContext){const at=new URL(ie,location.origin);if(location.origin===at.origin){const ln=bi(at.toString());(function Qs(te,L,j){(0,ne.Ku)(te).beforeAuthStateChanged(L,j)})(j,ln,()=>ln(j.currentUser)),function hs(te,L,j,ie){(0,ne.Ku)(te).onIdTokenChanged(L,j,ie)}(j,hn=>ln(hn))}}const Ne=(0,ne.Tj)("auth");return Ne&&function dl(te,L,j){const ie=Vr(te);Ct(ie._canInitEmulator,ie,"emulator-config-failed"),Ct(/^https?:\/\//.test(L),ie,"invalid-emulator-scheme");const Ne=!(null==j||!j.disableWarnings),at=Pa(L),{host:ln,port:hn}=function Uc(te){const L=Pa(te),j=/(\/\/)?([^?#/]+)/.exec(te.substr(L.length));if(!j)return{host:"",port:null};const ie=j[2].split("@").pop()||"",Ne=/^(\[[^\]]+\])(:|$)/.exec(ie);if(Ne){const at=Ne[1];return{host:at,port:Hu(ie.substr(at.length+1))}}{const[at,ln]=ie.split(":");return{host:at,port:Hu(ln)}}}(L);ie.config.emulator={url:`${at}//${ln}${null===hn?"":`:${hn}`}/`},ie.settings.appVerificationDisabledForTesting=!0,ie.emulatorConfig=Object.freeze({host:ln,port:hn,protocol:at.replace(":",""),options:Object.freeze({disableWarnings:Ne})}),Ne||function Gu(){function te(){const L=document.createElement("p"),j=L.style;L.innerText="Running in emulator mode. Do not use with production credentials.",j.position="fixed",j.width="100%",j.backgroundColor="#ffffff",j.border=".1em solid #000000",j.color="#b50000",j.bottom="0px",j.left="0px",j.margin="0px",j.zIndex="10000",j.textAlign="center",L.classList.add("firebase-emulator-warning"),document.body.appendChild(L)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",te):te())}()}(j,`http://${Ne}`),j}(function Du(te){Rl=te})({loadJS:te=>new Promise((L,j)=>{const ie=document.createElement("script");ie.setAttribute("src",te),ie.onload=L,ie.onerror=Ne=>{const at=xt("internal-error");at.customData=Ne,j(at)},ie.type="text/javascript",ie.charset="UTF-8",function ro(){var te,L;return null!==(L=null===(te=document.getElementsByTagName("head"))||void 0===te?void 0:te[0])&&void 0!==L?L:document}().appendChild(ie)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Sn(te){(0,se.om)(new Y.uA("auth",(L,{options:j})=>{const ie=L.getProvider("app").getImmediate(),Ne=L.getProvider("heartbeat"),at=L.getProvider("app-check-internal"),{apiKey:ln,authDomain:hn}=ie.options;Ct(ln&&!ln.includes(":"),"invalid-api-key",{appName:ie.name});const Qn={apiKey:ln,authDomain:hn,clientPlatform:te,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zi(te)},Wn=new ss(ie,Ne,at,Qn);return function su(te,L){const j=(null==L?void 0:L.persistence)||[],ie=(Array.isArray(j)?j:[j]).map(Lt);null!=L&&L.errorMap&&te._updateErrorMap(L.errorMap),te._initializeWithPersistence(ie,null==L?void 0:L.popupRedirectResolver)}(Wn,j),Wn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((L,j,ie)=>{L.getProvider("auth-internal").initialize()})),(0,se.om)(new Y.uA("auth-internal",L=>{const j=Vr(L.getProvider("auth").getImmediate());return new lt(j)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.KO)(tn,"1.7.5",function $t(te){switch(te){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(te)),(0,se.KO)(tn,"1.7.5","esm2017")}("Browser")},3273:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{rJ:()=>Op,kd:()=>ur,H9:()=>mf,x7:()=>fn,aU:()=>xh,aQ:()=>Qi,P:()=>o4,BN:()=>uo,_M:()=>bm});var Xt,Ut,V=_e(467),se=_e(7852),ne=_e(1362),l=_e(8041),qe=_e(1076),Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ft={};(function(){var S;function w(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function P(Oi,ii,wi){wi||(wi=0);var Ni=Array(16);if("string"==typeof ii)for(var Gi=0;16>Gi;++Gi)Ni[Gi]=ii.charCodeAt(wi++)|ii.charCodeAt(wi++)<<8|ii.charCodeAt(wi++)<<16|ii.charCodeAt(wi++)<<24;else for(Gi=0;16>Gi;++Gi)Ni[Gi]=ii[wi++]|ii[wi++]<<8|ii[wi++]<<16|ii[wi++]<<24;var ho=Oi.g[3],_i=(ii=Oi.g[0])+(ho^(wi=Oi.g[1])&((Gi=Oi.g[2])^ho))+Ni[0]+3614090360&4294967295;_i=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=(wi=(Gi=(ho=(ii=wi+(_i<<7&4294967295|_i>>>25))+((_i=ho+(Gi^ii&(wi^Gi))+Ni[1]+3905402710&4294967295)<<12&4294967295|_i>>>20))+((_i=Gi+(wi^ho&(ii^wi))+Ni[2]+606105819&4294967295)<<17&4294967295|_i>>>15))+((_i=wi+(ii^Gi&(ho^ii))+Ni[3]+3250441966&4294967295)<<22&4294967295|_i>>>10))+((_i=ii+(ho^wi&(Gi^ho))+Ni[4]+4118548399&4294967295)<<7&4294967295|_i>>>25))+((_i=ho+(Gi^ii&(wi^Gi))+Ni[5]+1200080426&4294967295)<<12&4294967295|_i>>>20))+((_i=Gi+(wi^ho&(ii^wi))+Ni[6]+2821735955&4294967295)<<17&4294967295|_i>>>15))+((_i=wi+(ii^Gi&(ho^ii))+Ni[7]+4249261313&4294967295)<<22&4294967295|_i>>>10))+((_i=ii+(ho^wi&(Gi^ho))+Ni[8]+1770035416&4294967295)<<7&4294967295|_i>>>25))+((_i=ho+(Gi^ii&(wi^Gi))+Ni[9]+2336552879&4294967295)<<12&4294967295|_i>>>20))+((_i=Gi+(wi^ho&(ii^wi))+Ni[10]+4294925233&4294967295)<<17&4294967295|_i>>>15))+((_i=wi+(ii^Gi&(ho^ii))+Ni[11]+2304563134&4294967295)<<22&4294967295|_i>>>10))+((_i=ii+(ho^wi&(Gi^ho))+Ni[12]+1804603682&4294967295)<<7&4294967295|_i>>>25))+((_i=ho+(Gi^ii&(wi^Gi))+Ni[13]+4254626195&4294967295)<<12&4294967295|_i>>>20))+((_i=Gi+(wi^ho&(ii^wi))+Ni[14]+2792965006&4294967295)<<17&4294967295|_i>>>15))+((_i=wi+(ii^Gi&(ho^ii))+Ni[15]+1236535329&4294967295)<<22&4294967295|_i>>>10))+((_i=ii+(Gi^ho&(wi^Gi))+Ni[1]+4129170786&4294967295)<<5&4294967295|_i>>>27))+((_i=ho+(wi^Gi&(ii^wi))+Ni[6]+3225465664&4294967295)<<9&4294967295|_i>>>23))+((_i=Gi+(ii^wi&(ho^ii))+Ni[11]+643717713&4294967295)<<14&4294967295|_i>>>18))+((_i=wi+(ho^ii&(Gi^ho))+Ni[0]+3921069994&4294967295)<<20&4294967295|_i>>>12))+((_i=ii+(Gi^ho&(wi^Gi))+Ni[5]+3593408605&4294967295)<<5&4294967295|_i>>>27))+((_i=ho+(wi^Gi&(ii^wi))+Ni[10]+38016083&4294967295)<<9&4294967295|_i>>>23))+((_i=Gi+(ii^wi&(ho^ii))+Ni[15]+3634488961&4294967295)<<14&4294967295|_i>>>18))+((_i=wi+(ho^ii&(Gi^ho))+Ni[4]+3889429448&4294967295)<<20&4294967295|_i>>>12))+((_i=ii+(Gi^ho&(wi^Gi))+Ni[9]+568446438&4294967295)<<5&4294967295|_i>>>27))+((_i=ho+(wi^Gi&(ii^wi))+Ni[14]+3275163606&4294967295)<<9&4294967295|_i>>>23))+((_i=Gi+(ii^wi&(ho^ii))+Ni[3]+4107603335&4294967295)<<14&4294967295|_i>>>18))+((_i=wi+(ho^ii&(Gi^ho))+Ni[8]+1163531501&4294967295)<<20&4294967295|_i>>>12))+((_i=ii+(Gi^ho&(wi^Gi))+Ni[13]+2850285829&4294967295)<<5&4294967295|_i>>>27))+((_i=ho+(wi^Gi&(ii^wi))+Ni[2]+4243563512&4294967295)<<9&4294967295|_i>>>23))+((_i=Gi+(ii^wi&(ho^ii))+Ni[7]+1735328473&4294967295)<<14&4294967295|_i>>>18))+((_i=wi+(ho^ii&(Gi^ho))+Ni[12]+2368359562&4294967295)<<20&4294967295|_i>>>12))+((_i=ii+(wi^Gi^ho)+Ni[5]+4294588738&4294967295)<<4&4294967295|_i>>>28))+((_i=ho+(ii^wi^Gi)+Ni[8]+2272392833&4294967295)<<11&4294967295|_i>>>21))+((_i=Gi+(ho^ii^wi)+Ni[11]+1839030562&4294967295)<<16&4294967295|_i>>>16))+((_i=wi+(Gi^ho^ii)+Ni[14]+4259657740&4294967295)<<23&4294967295|_i>>>9))+((_i=ii+(wi^Gi^ho)+Ni[1]+2763975236&4294967295)<<4&4294967295|_i>>>28))+((_i=ho+(ii^wi^Gi)+Ni[4]+1272893353&4294967295)<<11&4294967295|_i>>>21))+((_i=Gi+(ho^ii^wi)+Ni[7]+4139469664&4294967295)<<16&4294967295|_i>>>16))+((_i=wi+(Gi^ho^ii)+Ni[10]+3200236656&4294967295)<<23&4294967295|_i>>>9))+((_i=ii+(wi^Gi^ho)+Ni[13]+681279174&4294967295)<<4&4294967295|_i>>>28))+((_i=ho+(ii^wi^Gi)+Ni[0]+3936430074&4294967295)<<11&4294967295|_i>>>21))+((_i=Gi+(ho^ii^wi)+Ni[3]+3572445317&4294967295)<<16&4294967295|_i>>>16))+((_i=wi+(Gi^ho^ii)+Ni[6]+76029189&4294967295)<<23&4294967295|_i>>>9))+((_i=ii+(wi^Gi^ho)+Ni[9]+3654602809&4294967295)<<4&4294967295|_i>>>28))+((_i=ho+(ii^wi^Gi)+Ni[12]+3873151461&4294967295)<<11&4294967295|_i>>>21))+((_i=Gi+(ho^ii^wi)+Ni[15]+530742520&4294967295)<<16&4294967295|_i>>>16))+((_i=wi+(Gi^ho^ii)+Ni[2]+3299628645&4294967295)<<23&4294967295|_i>>>9))+((_i=ii+(Gi^(wi|~ho))+Ni[0]+4096336452&4294967295)<<6&4294967295|_i>>>26))+((_i=ho+(wi^(ii|~Gi))+Ni[7]+1126891415&4294967295)<<10&4294967295|_i>>>22))+((_i=Gi+(ii^(ho|~wi))+Ni[14]+2878612391&4294967295)<<15&4294967295|_i>>>17))+((_i=wi+(ho^(Gi|~ii))+Ni[5]+4237533241&4294967295)<<21&4294967295|_i>>>11))+((_i=ii+(Gi^(wi|~ho))+Ni[12]+1700485571&4294967295)<<6&4294967295|_i>>>26))+((_i=ho+(wi^(ii|~Gi))+Ni[3]+2399980690&4294967295)<<10&4294967295|_i>>>22))+((_i=Gi+(ii^(ho|~wi))+Ni[10]+4293915773&4294967295)<<15&4294967295|_i>>>17))+((_i=wi+(ho^(Gi|~ii))+Ni[1]+2240044497&4294967295)<<21&4294967295|_i>>>11))+((_i=ii+(Gi^(wi|~ho))+Ni[8]+1873313359&4294967295)<<6&4294967295|_i>>>26))+((_i=ho+(wi^(ii|~Gi))+Ni[15]+4264355552&4294967295)<<10&4294967295|_i>>>22))+((_i=Gi+(ii^(ho|~wi))+Ni[6]+2734768916&4294967295)<<15&4294967295|_i>>>17))+((_i=wi+(ho^(Gi|~ii))+Ni[13]+1309151649&4294967295)<<21&4294967295|_i>>>11))+((ho=(ii=wi+((_i=ii+(Gi^(wi|~ho))+Ni[4]+4149444226&4294967295)<<6&4294967295|_i>>>26))+((_i=ho+(wi^(ii|~Gi))+Ni[11]+3174756917&4294967295)<<10&4294967295|_i>>>22))^((Gi=ho+((_i=Gi+(ii^(ho|~wi))+Ni[2]+718787259&4294967295)<<15&4294967295|_i>>>17))|~ii))+Ni[9]+3951481745&4294967295,Oi.g[0]=Oi.g[0]+ii&4294967295,Oi.g[1]=Oi.g[1]+(Gi+(_i<<21&4294967295|_i>>>11))&4294967295,Oi.g[2]=Oi.g[2]+Gi&4294967295,Oi.g[3]=Oi.g[3]+ho&4294967295}function Q(Oi,ii){this.h=ii;for(var wi=[],Ni=!0,Gi=Oi.length-1;0<=Gi;Gi--){var ho=0|Oi[Gi];Ni&&ho==ii||(wi[Gi]=ho,Ni=!1)}this.g=wi}(function a(Oi,ii){function wi(){}wi.prototype=ii.prototype,Oi.D=ii.prototype,Oi.prototype=new wi,Oi.prototype.constructor=Oi,Oi.C=function(Ni,Gi,ho){for(var _i=Array(arguments.length-2),M1=2;M1<arguments.length;M1++)_i[M1-2]=arguments[M1];return ii.prototype[Gi].apply(Ni,_i)}})(w,function p(){this.blockSize=-1}),w.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},w.prototype.u=function(Oi,ii){void 0===ii&&(ii=Oi.length);for(var wi=ii-this.blockSize,Ni=this.B,Gi=this.h,ho=0;ho<ii;){if(0==Gi)for(;ho<=wi;)P(this,Oi,ho),ho+=this.blockSize;if("string"==typeof Oi){for(;ho<ii;)if(Ni[Gi++]=Oi.charCodeAt(ho++),Gi==this.blockSize){P(this,Ni),Gi=0;break}}else for(;ho<ii;)if(Ni[Gi++]=Oi[ho++],Gi==this.blockSize){P(this,Ni),Gi=0;break}}this.h=Gi,this.o+=ii},w.prototype.v=function(){var Oi=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Oi[0]=128;for(var ii=1;ii<Oi.length-8;++ii)Oi[ii]=0;var wi=8*this.o;for(ii=Oi.length-8;ii<Oi.length;++ii)Oi[ii]=255&wi,wi/=256;for(this.u(Oi),Oi=Array(16),ii=wi=0;4>ii;++ii)for(var Ni=0;32>Ni;Ni+=8)Oi[wi++]=this.g[ii]>>>Ni&255;return Oi};var ve={};function Oe(Oi){return-128<=Oi&&128>Oi?function U(Oi,ii){var wi=ve;return Object.prototype.hasOwnProperty.call(wi,Oi)?wi[Oi]:wi[Oi]=ii(Oi)}(Oi,function(ii){return new Q([0|ii],0>ii?-1:0)}):new Q([0|Oi],0>Oi?-1:0)}function rt(Oi){if(isNaN(Oi)||!isFinite(Oi))return In;if(0>Oi)return ar(rt(-Oi));for(var ii=[],wi=1,Ni=0;Oi>=wi;Ni++)ii[Ni]=Oi/wi|0,wi*=4294967296;return new Q(ii,0)}var In=Oe(0),pi=Oe(1),no=Oe(16777216);function Wo(Oi){if(0!=Oi.h)return!1;for(var ii=0;ii<Oi.g.length;ii++)if(0!=Oi.g[ii])return!1;return!0}function Ir(Oi){return-1==Oi.h}function ar(Oi){for(var ii=Oi.g.length,wi=[],Ni=0;Ni<ii;Ni++)wi[Ni]=~Oi.g[Ni];return new Q(wi,~Oi.h).add(pi)}function Ps(Oi,ii){return Oi.add(ar(ii))}function Bs(Oi,ii){for(;(65535&Oi[ii])!=Oi[ii];)Oi[ii+1]+=Oi[ii]>>>16,Oi[ii]&=65535,ii++}function Fs(Oi,ii){this.g=Oi,this.h=ii}function Aa(Oi,ii){if(Wo(ii))throw Error("division by zero");if(Wo(Oi))return new Fs(In,In);if(Ir(Oi))return ii=Aa(ar(Oi),ii),new Fs(ar(ii.g),ar(ii.h));if(Ir(ii))return ii=Aa(Oi,ar(ii)),new Fs(ar(ii.g),ii.h);if(30<Oi.g.length){if(Ir(Oi)||Ir(ii))throw Error("slowDivide_ only works with positive integers.");for(var wi=pi,Ni=ii;0>=Ni.l(Oi);)wi=Al(wi),Ni=Al(Ni);var Gi=qa(wi,1),ho=qa(Ni,1);for(Ni=qa(Ni,2),wi=qa(wi,2);!Wo(Ni);){var _i=ho.add(Ni);0>=_i.l(Oi)&&(Gi=Gi.add(wi),ho=_i),Ni=qa(Ni,1),wi=qa(wi,1)}return ii=Ps(Oi,Gi.j(ii)),new Fs(Gi,ii)}for(Gi=In;0<=Oi.l(ii);){for(wi=Math.max(1,Math.floor(Oi.m()/ii.m())),Ni=48>=(Ni=Math.ceil(Math.log(wi)/Math.LN2))?1:Math.pow(2,Ni-48),_i=(ho=rt(wi)).j(ii);Ir(_i)||0<_i.l(Oi);)_i=(ho=rt(wi-=Ni)).j(ii);Wo(ho)&&(ho=pi),Gi=Gi.add(ho),Oi=Ps(Oi,_i)}return new Fs(Gi,Oi)}function Al(Oi){for(var ii=Oi.g.length+1,wi=[],Ni=0;Ni<ii;Ni++)wi[Ni]=Oi.i(Ni)<<1|Oi.i(Ni-1)>>>31;return new Q(wi,Oi.h)}function qa(Oi,ii){var wi=ii>>5;ii%=32;for(var Ni=Oi.g.length-wi,Gi=[],ho=0;ho<Ni;ho++)Gi[ho]=0<ii?Oi.i(ho+wi)>>>ii|Oi.i(ho+wi+1)<<32-ii:Oi.i(ho+wi);return new Q(Gi,Oi.h)}(S=Q.prototype).m=function(){if(Ir(this))return-ar(this).m();for(var Oi=0,ii=1,wi=0;wi<this.g.length;wi++){var Ni=this.i(wi);Oi+=(0<=Ni?Ni:4294967296+Ni)*ii,ii*=4294967296}return Oi},S.toString=function(Oi){if(2>(Oi=Oi||10)||36<Oi)throw Error("radix out of range: "+Oi);if(Wo(this))return"0";if(Ir(this))return"-"+ar(this).toString(Oi);for(var ii=rt(Math.pow(Oi,6)),wi=this,Ni="";;){var Gi=Aa(wi,ii).g,ho=((0<(wi=Ps(wi,Gi.j(ii))).g.length?wi.g[0]:wi.h)>>>0).toString(Oi);if(Wo(wi=Gi))return ho+Ni;for(;6>ho.length;)ho="0"+ho;Ni=ho+Ni}},S.i=function(Oi){return 0>Oi?0:Oi<this.g.length?this.g[Oi]:this.h},S.l=function(Oi){return Ir(Oi=Ps(this,Oi))?-1:Wo(Oi)?0:1},S.abs=function(){return Ir(this)?ar(this):this},S.add=function(Oi){for(var ii=Math.max(this.g.length,Oi.g.length),wi=[],Ni=0,Gi=0;Gi<=ii;Gi++){var ho=Ni+(65535&this.i(Gi))+(65535&Oi.i(Gi)),_i=(ho>>>16)+(this.i(Gi)>>>16)+(Oi.i(Gi)>>>16);Ni=_i>>>16,wi[Gi]=(_i&=65535)<<16|(ho&=65535)}return new Q(wi,-2147483648&wi[wi.length-1]?-1:0)},S.j=function(Oi){if(Wo(this)||Wo(Oi))return In;if(Ir(this))return Ir(Oi)?ar(this).j(ar(Oi)):ar(ar(this).j(Oi));if(Ir(Oi))return ar(this.j(ar(Oi)));if(0>this.l(no)&&0>Oi.l(no))return rt(this.m()*Oi.m());for(var ii=this.g.length+Oi.g.length,wi=[],Ni=0;Ni<2*ii;Ni++)wi[Ni]=0;for(Ni=0;Ni<this.g.length;Ni++)for(var Gi=0;Gi<Oi.g.length;Gi++){var ho=this.i(Ni)>>>16,_i=65535&this.i(Ni),M1=Oi.i(Gi)>>>16,Jm=65535&Oi.i(Gi);wi[2*Ni+2*Gi]+=_i*Jm,Bs(wi,2*Ni+2*Gi),wi[2*Ni+2*Gi+1]+=ho*Jm,Bs(wi,2*Ni+2*Gi+1),wi[2*Ni+2*Gi+1]+=_i*M1,Bs(wi,2*Ni+2*Gi+1),wi[2*Ni+2*Gi+2]+=ho*M1,Bs(wi,2*Ni+2*Gi+2)}for(Ni=0;Ni<ii;Ni++)wi[Ni]=wi[2*Ni+1]<<16|wi[2*Ni];for(Ni=ii;Ni<2*ii;Ni++)wi[Ni]=0;return new Q(wi,0)},S.A=function(Oi){return Aa(this,Oi).h},S.and=function(Oi){for(var ii=Math.max(this.g.length,Oi.g.length),wi=[],Ni=0;Ni<ii;Ni++)wi[Ni]=this.i(Ni)&Oi.i(Ni);return new Q(wi,this.h&Oi.h)},S.or=function(Oi){for(var ii=Math.max(this.g.length,Oi.g.length),wi=[],Ni=0;Ni<ii;Ni++)wi[Ni]=this.i(Ni)|Oi.i(Ni);return new Q(wi,this.h|Oi.h)},S.xor=function(Oi){for(var ii=Math.max(this.g.length,Oi.g.length),wi=[],Ni=0;Ni<ii;Ni++)wi[Ni]=this.i(Ni)^Oi.i(Ni);return new Q(wi,this.h^Oi.h)},w.prototype.digest=w.prototype.v,w.prototype.reset=w.prototype.s,w.prototype.update=w.prototype.u,Ut=ft.Md5=w,Q.prototype.add=Q.prototype.add,Q.prototype.multiply=Q.prototype.j,Q.prototype.modulo=Q.prototype.A,Q.prototype.compare=Q.prototype.l,Q.prototype.toNumber=Q.prototype.m,Q.prototype.toString=Q.prototype.toString,Q.prototype.getBits=Q.prototype.i,Q.fromNumber=rt,Q.fromString=function Wt(Oi,ii){if(0==Oi.length)throw Error("number format error: empty string");if(2>(ii=ii||10)||36<ii)throw Error("radix out of range: "+ii);if("-"==Oi.charAt(0))return ar(Wt(Oi.substring(1),ii));if(0<=Oi.indexOf("-"))throw Error('number format error: interior "-" character');for(var wi=rt(Math.pow(ii,8)),Ni=In,Gi=0;Gi<Oi.length;Gi+=8){var ho=Math.min(8,Oi.length-Gi),_i=parseInt(Oi.substring(Gi,Gi+ho),ii);8>ho?(ho=rt(Math.pow(ii,ho)),Ni=Ni.j(ho).add(rt(_i))):Ni=(Ni=Ni.j(wi)).add(rt(_i))}return Ni},Xt=ft.Integer=Q}).apply(typeof Y<"u"?Y:typeof self<"u"?self:typeof window<"u"?window:{});var At,Ht,vt,un,xn,on,ht,Jn,An,It=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},C={};(function(){var S,a="function"==typeof Object.defineProperties?Object.defineProperty:function(X,Le,ct){return X==Array.prototype||X==Object.prototype||(X[Le]=ct.value),X},w=function p(X){X=["object"==typeof globalThis&&globalThis,X,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof It&&It];for(var Le=0;Le<X.length;++Le){var ct=X[Le];if(ct&&ct.Math==Math)return ct}throw Error("Cannot find global object")}(this);!function P(X,Le){if(Le)e:{var ct=w;X=X.split(".");for(var sn=0;sn<X.length-1;sn++){var Ui=X[sn];if(!(Ui in ct))break e;ct=ct[Ui]}(Le=Le(sn=ct[X=X[X.length-1]]))!=sn&&null!=Le&&a(ct,X,{configurable:!0,writable:!0,value:Le})}}("Array.prototype.values",function(X){return X||function(){return function U(X,Le){X instanceof String&&(X+="");var ct=0,sn=!1,Ui={next:function(){if(!sn&&ct<X.length){var Ao=ct++;return{value:Le(Ao,X[Ao]),done:!1}}return sn=!0,{done:!0,value:void 0}}};return Ui[Symbol.iterator]=function(){return Ui},Ui}(this,function(Le,ct){return ct})}});var Q=Q||{},ve=this||self;function Oe(X){var Le=typeof X;return"array"==(Le="object"!=Le?Le:X?Array.isArray(X)?"array":Le:"null")||"object"==Le&&"number"==typeof X.length}function rt(X){var Le=typeof X;return"object"==Le&&null!=X||"function"==Le}function Wt(X,Le,ct){return X.call.apply(X.bind,arguments)}function In(X,Le,ct){if(!X)throw Error();if(2<arguments.length){var sn=Array.prototype.slice.call(arguments,2);return function(){var Ui=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ui,sn),X.apply(Le,Ui)}}return function(){return X.apply(Le,arguments)}}function pi(X,Le,ct){return(pi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wt:In).apply(null,arguments)}function no(X,Le){var ct=Array.prototype.slice.call(arguments,1);return function(){var sn=ct.slice();return sn.push.apply(sn,arguments),X.apply(this,sn)}}function Wo(X,Le){function ct(){}ct.prototype=Le.prototype,X.aa=Le.prototype,X.prototype=new ct,X.prototype.constructor=X,X.Qb=function(sn,Ui,Ao){for(var Mr=Array(arguments.length-2),kl=2;kl<arguments.length;kl++)Mr[kl-2]=arguments[kl];return Le.prototype[Ui].apply(sn,Mr)}}function Ir(X){const Le=X.length;if(0<Le){const ct=Array(Le);for(let sn=0;sn<Le;sn++)ct[sn]=X[sn];return ct}return[]}function ar(X,Le){for(let ct=1;ct<arguments.length;ct++){const sn=arguments[ct];if(Oe(sn)){const Ui=X.length||0,Ao=sn.length||0;X.length=Ui+Ao;for(let Mr=0;Mr<Ao;Mr++)X[Ui+Mr]=sn[Mr]}else X.push(sn)}}function Bs(X){return/^[\s\xa0]*$/.test(X)}function Fs(){var X=ve.navigator;return X&&(X=X.userAgent)?X:""}function Aa(X){return Aa[" "](X),X}Aa[" "]=function(){};var Al=!(-1==Fs().indexOf("Gecko")||-1!=Fs().toLowerCase().indexOf("webkit")&&-1==Fs().indexOf("Edge")||-1!=Fs().indexOf("Trident")||-1!=Fs().indexOf("MSIE")||-1!=Fs().indexOf("Edge"));function qa(X,Le,ct){for(const sn in X)Le.call(ct,X[sn],sn,X)}function ii(X){const Le={};for(const ct in X)Le[ct]=X[ct];return Le}const wi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ni(X,Le){let ct,sn;for(let Ui=1;Ui<arguments.length;Ui++){for(ct in sn=arguments[Ui],sn)X[ct]=sn[ct];for(let Ao=0;Ao<wi.length;Ao++)ct=wi[Ao],Object.prototype.hasOwnProperty.call(sn,ct)&&(X[ct]=sn[ct])}}function Gi(X){var Le=1;X=X.split(":");const ct=[];for(;0<Le&&X.length;)ct.push(X.shift()),Le--;return X.length&&ct.push(X.join(":")),ct}function ho(X){ve.setTimeout(()=>{throw X},0)}function _i(){var X=Pg;let Le=null;return X.g&&(Le=X.g,X.g=X.g.next,X.g||(X.h=null),Le.next=null),Le}var Jm=new class Ps{constructor(Le,ct){this.i=Le,this.j=ct,this.h=0,this.g=null}get(){let Le;return 0<this.h?(this.h--,Le=this.g,this.g=Le.next,Le.next=null):Le=this.i(),Le}}(()=>new yv,X=>X.reset());class yv{constructor(){this.next=this.g=this.h=null}set(Le,ct){this.h=Le,this.g=ct,this.next=null}reset(){this.next=this.g=this.h=null}}let eg,Em=!1,Pg=new class M1{constructor(){this.h=this.g=null}add(Le,ct){const sn=Jm.get();sn.set(Le,ct),this.h?this.h.next=sn:this.g=sn,this.h=sn}},c4=()=>{const X=ve.Promise.resolve(void 0);eg=()=>{X.then(z4)}};var z4=()=>{for(var X;X=_i();){try{X.h.call(X.g)}catch(ct){ho(ct)}var Le=Jm;Le.j(X),100>Le.h&&(Le.h++,X.next=Le.g,Le.g=X)}Em=!1};function i2(){this.s=this.s,this.C=this.C}function lh(X,Le){this.type=X,this.g=this.target=Le,this.defaultPrevented=!1}i2.prototype.s=!1,i2.prototype.ma=function(){this.s||(this.s=!0,this.N())},i2.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},lh.prototype.h=function(){this.defaultPrevented=!0};var O4=function(){if(!ve.addEventListener||!Object.defineProperty)return!1;var X=!1,Le=Object.defineProperty({},"passive",{get:function(){X=!0}});try{const ct=()=>{};ve.addEventListener("test",ct,Le),ve.removeEventListener("test",ct,Le)}catch{}return X}();function Xp(X,Le){if(lh.call(this,X?X.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,X){var ct=this.type=X.type,sn=X.changedTouches&&X.changedTouches.length?X.changedTouches[0]:null;if(this.target=X.target||X.srcElement,this.g=Le,Le=X.relatedTarget){if(Al){e:{try{Aa(Le.nodeName);var Ui=!0;break e}catch{}Ui=!1}Ui||(Le=null)}}else"mouseover"==ct?Le=X.fromElement:"mouseout"==ct&&(Le=X.toElement);this.relatedTarget=Le,sn?(this.clientX=void 0!==sn.clientX?sn.clientX:sn.pageX,this.clientY=void 0!==sn.clientY?sn.clientY:sn.pageY,this.screenX=sn.screenX||0,this.screenY=sn.screenY||0):(this.clientX=void 0!==X.clientX?X.clientX:X.pageX,this.clientY=void 0!==X.clientY?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0),this.button=X.button,this.key=X.key||"",this.ctrlKey=X.ctrlKey,this.altKey=X.altKey,this.shiftKey=X.shiftKey,this.metaKey=X.metaKey,this.pointerId=X.pointerId||0,this.pointerType="string"==typeof X.pointerType?X.pointerType:bv[X.pointerType]||"",this.state=X.state,this.i=X,X.defaultPrevented&&Xp.aa.h.call(this)}}Wo(Xp,lh);var bv={2:"touch",3:"pen",4:"mouse"};Xp.prototype.h=function(){Xp.aa.h.call(this);var X=this.i;X.preventDefault?X.preventDefault():X.returnValue=!1};var tg="closure_listenable_"+(1e6*Math.random()|0),ng=0;function wv(X,Le,ct,sn,Ui){this.listener=X,this.proxy=null,this.src=Le,this.type=ct,this.capture=!!sn,this.ha=Ui,this.key=++ng,this.da=this.fa=!1}function Rg(X){X.da=!0,X.listener=null,X.proxy=null,X.src=null,X.ha=null}function zg(X){this.src=X,this.g={},this.h=0}function u4(X,Le){var ct=Le.type;if(ct in X.g){var Ao,sn=X.g[ct],Ui=Array.prototype.indexOf.call(sn,Le,void 0);(Ao=0<=Ui)&&Array.prototype.splice.call(sn,Ui,1),Ao&&(Rg(Le),0==X.g[ct].length&&(delete X.g[ct],X.h--))}}function d4(X,Le,ct,sn){for(var Ui=0;Ui<X.length;++Ui){var Ao=X[Ui];if(!Ao.da&&Ao.listener==Le&&Ao.capture==!!ct&&Ao.ha==sn)return Ui}return-1}zg.prototype.add=function(X,Le,ct,sn,Ui){var Ao=X.toString();(X=this.g[Ao])||(X=this.g[Ao]=[],this.h++);var Mr=d4(X,Le,sn,Ui);return-1<Mr?(Le=X[Mr],ct||(Le.fa=!1)):((Le=new wv(Le,this.src,Ao,!!sn,Ui)).fa=ct,X.push(Le)),Le};var j2="closure_lm_"+(1e6*Math.random()|0),o2={};function Cm(X,Le,ct,sn,Ui){if(sn&&sn.once)return Lg(X,Le,ct,sn,Ui);if(Array.isArray(Le)){for(var Ao=0;Ao<Le.length;Ao++)Cm(X,Le[Ao],ct,sn,Ui);return null}return ct=r2(ct),X&&X[tg]?X.K(Le,ct,rt(sn)?!!sn.capture:!!sn,Ui):km(X,Le,ct,!1,sn,Ui)}function km(X,Le,ct,sn,Ui,Ao){if(!Le)throw Error("Invalid event type");var Mr=rt(Ui)?!!Ui.capture:!!Ui,kl=d0(X);if(kl||(X[j2]=kl=new zg(X)),(ct=kl.add(Le,ct,sn,Mr,Ao)).proxy)return ct;if(sn=function Og(){const Le=U2;return function X(ct){return Le.call(X.src,X.listener,ct)}}(),ct.proxy=sn,sn.src=X,sn.listener=ct,X.addEventListener)O4||(Ui=Mr),void 0===Ui&&(Ui=!1),X.addEventListener(Le.toString(),sn,Ui);else if(X.attachEvent)X.attachEvent(Ng(Le.toString()),sn);else{if(!X.addListener||!X.removeListener)throw Error("addEventListener and attachEvent are unavailable.");X.addListener(sn)}return ct}function Lg(X,Le,ct,sn,Ui){if(Array.isArray(Le)){for(var Ao=0;Ao<Le.length;Ao++)Lg(X,Le[Ao],ct,sn,Ui);return null}return ct=r2(ct),X&&X[tg]?X.L(Le,ct,rt(sn)?!!sn.capture:!!sn,Ui):km(X,Le,ct,!0,sn,Ui)}function h4(X,Le,ct,sn,Ui){if(Array.isArray(Le))for(var Ao=0;Ao<Le.length;Ao++)h4(X,Le[Ao],ct,sn,Ui);else sn=rt(sn)?!!sn.capture:!!sn,ct=r2(ct),X&&X[tg]?(X=X.i,(Le=String(Le).toString())in X.g&&-1<(ct=d4(Ao=X.g[Le],ct,sn,Ui))&&(Rg(Ao[ct]),Array.prototype.splice.call(Ao,ct,1),0==Ao.length&&(delete X.g[Le],X.h--))):X&&(X=d0(X))&&(Le=X.g[Le.toString()],X=-1,Le&&(X=d4(Le,ct,sn,Ui)),(ct=-1<X?Le[X]:null)&&Bg(ct))}function Bg(X){if("number"!=typeof X&&X&&!X.da){var Le=X.src;if(Le&&Le[tg])u4(Le.i,X);else{var ct=X.type,sn=X.proxy;Le.removeEventListener?Le.removeEventListener(ct,sn,X.capture):Le.detachEvent?Le.detachEvent(Ng(ct),sn):Le.addListener&&Le.removeListener&&Le.removeListener(sn),(ct=d0(Le))?(u4(ct,X),0==ct.h&&(ct.src=null,Le[j2]=null)):Rg(X)}}}function Ng(X){return X in o2?o2[X]:o2[X]="on"+X}function U2(X,Le){if(X.da)X=!0;else{Le=new Xp(Le,this);var ct=X.listener,sn=X.ha||X.src;X.fa&&Bg(X),X=ct.call(sn,Le)}return X}function d0(X){return(X=X[j2])instanceof zg?X:null}var Bh="__closure_events_fn_"+(1e9*Math.random()>>>0);function r2(X){return"function"==typeof X?X:(X[Bh]||(X[Bh]=function(Le){return X.handleEvent(Le)}),X[Bh])}function Da(){i2.call(this),this.i=new zg(this),this.M=this,this.F=null}function ch(X,Le){var ct,sn=X.F;if(sn)for(ct=[];sn;sn=sn.F)ct.push(sn);if(X=X.M,sn=Le.type||Le,"string"==typeof Le)Le=new lh(Le,X);else if(Le instanceof lh)Le.target=Le.target||X;else{var Ui=Le;Ni(Le=new lh(sn,X),Ui)}if(Ui=!0,ct)for(var Ao=ct.length-1;0<=Ao;Ao--){var Mr=Le.g=ct[Ao];Ui=ig(Mr,sn,!0,Le)&&Ui}if(Ui=ig(Mr=Le.g=X,sn,!0,Le)&&Ui,Ui=ig(Mr,sn,!1,Le)&&Ui,ct)for(Ao=0;Ao<ct.length;Ao++)Ui=ig(Mr=Le.g=ct[Ao],sn,!1,Le)&&Ui}function ig(X,Le,ct,sn){if(!(Le=X.i.g[String(Le)]))return!0;Le=Le.concat();for(var Ui=!0,Ao=0;Ao<Le.length;++Ao){var Mr=Le[Ao];if(Mr&&!Mr.da&&Mr.capture==ct){var kl=Mr.listener,od=Mr.ha||Mr.src;Mr.fa&&u4(X.i,Mr),Ui=!1!==kl.call(od,sn)&&Ui}}return Ui&&!sn.defaultPrevented}function p4(X,Le,ct){if("function"==typeof X)ct&&(X=pi(X,ct));else{if(!X||"function"!=typeof X.handleEvent)throw Error("Invalid listener argument");X=pi(X.handleEvent,X)}return 2147483647<Number(Le)?-1:ve.setTimeout(X,Le||0)}function q1(X){X.g=p4(()=>{X.g=null,X.i&&(X.i=!1,q1(X))},X.l);const Le=X.h;X.h=null,X.m.apply(null,Le)}Wo(Da,i2),Da.prototype[tg]=!0,Da.prototype.removeEventListener=function(X,Le,ct,sn){h4(this,X,Le,ct,sn)},Da.prototype.N=function(){if(Da.aa.N.call(this),this.i){var Le,X=this.i;for(Le in X.g){for(var ct=X.g[Le],sn=0;sn<ct.length;sn++)Rg(ct[sn]);delete X.g[Le],X.h--}}this.F=null},Da.prototype.K=function(X,Le,ct,sn){return this.i.add(String(X),Le,!1,ct,sn)},Da.prototype.L=function(X,Le,ct,sn){return this.i.add(String(X),Le,!0,ct,sn)};class s2 extends i2{constructor(Le,ct){super(),this.m=Le,this.l=ct,this.h=null,this.i=!1,this.g=null}j(Le){this.h=arguments,this.g?this.i=!0:q1(this)}N(){super.N(),this.g&&(ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sm(X){i2.call(this),this.h=X,this.g={}}Wo(Sm,i2);var Tm=[];function Mm(X){qa(X.g,function(Le,ct){this.g.hasOwnProperty(ct)&&Bg(Le)},X),X.g={}}Sm.prototype.N=function(){Sm.aa.N.call(this),Mm(this)},Sm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Am=ve.JSON.stringify,L4=ve.JSON.parse,H2=class{stringify(X){return ve.JSON.stringify(X,void 0)}parse(X){return ve.JSON.parse(X,void 0)}};function Dm(){}function og(){}Dm.prototype.h=null;var kf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function G2(){lh.call(this,"d")}function Kp(){lh.call(this,"c")}Wo(G2,lh),Wo(Kp,lh);var Yp={},a2=null;function Pm(){return a2=a2||new Da}function rg(X){lh.call(this,Yp.La,X)}function l2(X){const Le=Pm();ch(Le,new rg(Le))}function Sf(X,Le){lh.call(this,Yp.STAT_EVENT,X),this.stat=Le}function Hd(X){const Le=Pm();ch(Le,new Sf(Le,X))}function sg(X,Le){lh.call(this,Yp.Ma,X),this.size=Le}function Mu(X,Le){if("function"!=typeof X)throw Error("Fn must not be null and must be a function");return ve.setTimeout(function(){X()},Le)}function h0(){this.g=!0}function B(X,Le,ct,sn){X.info(function(){return"XMLHTTP TEXT ("+Le+"): "+function k(X,Le){if(!X.g)return Le;if(!Le)return null;try{var ct=JSON.parse(Le);if(ct)for(X=0;X<ct.length;X++)if(Array.isArray(ct[X])){var sn=ct[X];if(!(2>sn.length)){var Ui=sn[1];if(Array.isArray(Ui)&&!(1>Ui.length)){var Ao=Ui[0];if("noop"!=Ao&&"stop"!=Ao&&"close"!=Ao)for(var Mr=1;Mr<Ui.length;Mr++)Ui[Mr]=""}}}return Am(ct)}catch{return Le}}(X,ct)+(sn?" "+sn:"")})}Yp.La="serverreachability",Wo(rg,lh),Yp.STAT_EVENT="statevent",Wo(Sf,lh),Yp.Ma="timingevent",Wo(sg,lh),h0.prototype.xa=function(){this.g=!1},h0.prototype.info=function(){};var ce,D={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},q={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function dt(X,Le,ct,sn){this.j=X,this.i=Le,this.l=ct,this.R=sn||1,this.U=new Sm(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jt}function jt(){this.i=null,this.g="",this.h=!1}Wo(De,Dm),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},ce=new De;var bn={},fi={};function Ii(X,Le,ct){X.L=1,X.v=bp($u(Le)),X.m=ct,X.P=!0,oo(X,null)}function oo(X,Le){X.F=Date.now(),Do(X),X.A=$u(X.v);var ct=X.A,sn=X.R;Array.isArray(sn)||(sn=[String(sn)]),F4(ct.i,"t",sn),X.C=0,ct=X.j.J,X.h=new jt,X.g=Y1(X.j,ct?Le:null,!X.m),0<X.O&&(X.M=new s2(pi(X.Y,X,X.g),X.O)),Le=X.U,ct=X.g,sn=X.ca;var Ui="readystatechange";Array.isArray(Ui)||(Ui&&(Tm[0]=Ui.toString()),Ui=Tm);for(var Ao=0;Ao<Ui.length;Ao++){var Mr=Cm(ct,Ui[Ao],sn||Le.handleEvent,!1,Le.h||Le);if(!Mr)break;Le.g[Mr.key]=Mr}Le=X.H?ii(X.H):{},X.m?(X.u||(X.u="POST"),Le["Content-Type"]="application/x-www-form-urlencoded",X.g.ea(X.A,X.u,X.m,Le)):(X.u="GET",X.g.ea(X.A,X.u,null,Le)),l2(),function Rm(X,Le,ct,sn,Ui,Ao){X.info(function(){if(X.g)if(Ao)for(var Mr="",kl=Ao.split("&"),od=0;od<kl.length;od++){var il=kl[od].split("=");if(1<il.length){var rd=il[0];il=il[1];var Wd=rd.split("_");Mr=2<=Wd.length&&"type"==Wd[1]?Mr+(rd+"=")+il+"&":Mr+(rd+"=redacted&")}}else Mr=null;else Mr=Ao;return"XMLHTTP REQ ("+sn+") [attempt "+Ui+"]: "+Le+"\n"+ct+"\n"+Mr})}(X.i,X.u,X.A,X.l,X.R,X.m)}function ji(X){return!!X.g&&"GET"==X.u&&2!=X.L&&X.j.Ca}function Io(X,Le){var ct=X.C,sn=Le.indexOf("\n",ct);return-1==sn?fi:(ct=Number(Le.substring(ct,sn)),isNaN(ct)?bn:(sn+=1)+ct>Le.length?fi:(Le=Le.slice(sn,sn+ct),X.C=sn+ct,Le))}function Do(X){X.S=Date.now()+X.I,wr(X,X.I)}function wr(X,Le){if(null!=X.B)throw Error("WatchDog timer not null");X.B=Mu(pi(X.ba,X),Le)}function ls(X){X.B&&(ve.clearTimeout(X.B),X.B=null)}function ys(X){0==X.j.G||X.J||Gg(X.j,X)}function Ur(X){ls(X);var Le=X.M;Le&&"function"==typeof Le.ma&&Le.ma(),X.M=null,Mm(X.U),X.g&&(Le=X.g,X.g=null,Le.abort(),Le.ma())}function xs(X,Le){try{var ct=X.j;if(0!=ct.G&&(ct.g==X||Dl(ct.h,X)))if(!X.K&&Dl(ct.h,X)&&3==ct.G){try{var sn=ct.Da.g.parse(Le)}catch{sn=null}if(Array.isArray(sn)&&3==sn.length){var Ui=sn;if(0==Ui[0]){e:if(!ct.u){if(ct.g){if(!(ct.g.F+3e3<X.F))break e;ef(ct),j4(ct)}g4(ct),Hd(18)}}else ct.za=Ui[1],0<ct.za-ct.T&&37500>Ui[2]&&ct.F&&0==ct.v&&!ct.C&&(ct.C=Mu(pi(ct.Za,ct),6e3));if(1>=Ec(ct.h)&&ct.ca){try{ct.ca()}catch{}ct.ca=void 0}}else Uu(ct,11)}else if((X.K||ct.g==X)&&ef(ct),!Bs(Le))for(Ui=ct.Da.g.parse(Le),Le=0;Le<Ui.length;Le++){let il=Ui[Le];if(ct.T=il[0],il=il[1],2==ct.G)if("c"==il[0]){ct.K=il[1],ct.ia=il[2];const rd=il[3];null!=rd&&(ct.la=rd,ct.j.info("VER="+ct.la));const Wd=il[4];null!=Wd&&(ct.Aa=Wd,ct.j.info("SVER="+ct.Aa));const Q2=il[5];null!=Q2&&"number"==typeof Q2&&0<Q2&&(ct.L=sn=1.5*Q2,ct.j.info("backChannelRequestTimeoutMs_="+sn)),sn=ct;const Nh=X.g;if(Nh){const J2=Nh.g?Nh.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J2){var Ao=sn.h;Ao.g||-1==J2.indexOf("spdy")&&-1==J2.indexOf("quic")&&-1==J2.indexOf("h2")||(Ao.j=Ao.l,Ao.g=new Set,Ao.h&&(Zl(Ao,Ao.h),Ao.h=null))}if(sn.D){const em=Nh.g?Nh.g.getResponseHeader("X-HTTP-Session-Id"):null;em&&(sn.ya=em,Cl(sn.I,sn.D,em))}}ct.G=3,ct.l&&ct.l.ua(),ct.ba&&(ct.R=Date.now()-X.F,ct.j.info("Handshake RTT: "+ct.R+"ms"));var Mr=X;if((sn=ct).qa=Z2(sn,sn.J?sn.ia:null,sn.W),Mr.K){Es(sn.h,Mr);var kl=Mr,od=sn.L;od&&(kl.I=od),kl.B&&(ls(kl),Do(kl)),sn.g=Mr}else Av(sn);0<ct.i.length&&Bm(ct)}else"stop"!=il[0]&&"close"!=il[0]||Uu(ct,7);else 3==ct.G&&("stop"==il[0]||"close"==il[0]?"stop"==il[0]?Uu(ct,7):Y2(ct):"noop"!=il[0]&&ct.l&&ct.l.ta(il),ct.v=0)}l2()}catch{}}dt.prototype.ca=function(X){X=X.target;const Le=this.M;Le&&3==K1(X)?Le.j():this.Y(X)},dt.prototype.Y=function(X){try{if(X==this.g)e:{const Wd=K1(this.g);var Le=this.g.Ba();if(this.g.Z(),!(3>Wd)&&(3!=Wd||this.g&&(this.h.h||this.g.oa()||Ug(this.g)))){this.J||4!=Wd||7==Le||l2(),ls(this);var ct=this.g.Z();this.X=ct;t:if(ji(this)){var sn=Ug(this.g);X="";var Ui=sn.length,Ao=4==K1(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),ys(this);var Mr="";break t}this.h.i=new ve.TextDecoder}for(Le=0;Le<Ui;Le++)this.h.h=!0,X+=this.h.i.decode(sn[Le],{stream:!(Ao&&Le==Ui-1)});sn.length=0,this.h.g+=X,this.C=0,Mr=this.h.g}else Mr=this.g.oa();if(this.o=200==ct,function zm(X,Le,ct,sn,Ui,Ao,Mr){X.info(function(){return"XMLHTTP RESP ("+sn+") [ attempt "+Ui+"]: "+Le+"\n"+ct+"\n"+Ao+" "+Mr})}(this.i,this.u,this.A,this.l,this.R,Wd,ct),this.o){if(this.T&&!this.K){t:{if(this.g){var kl,od=this.g;if((kl=od.g?od.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bs(kl)){var il=kl;break t}}il=null}if(!(ct=il)){this.o=!1,this.s=3,Hd(12),Ur(this),ys(this);break e}B(this.i,this.l,ct,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,ct)}if(this.P){let Nh;for(ct=!0;!this.J&&this.C<Mr.length;){if(Nh=Io(this,Mr),Nh==fi){4==Wd&&(this.s=4,Hd(14),ct=!1),B(this.i,this.l,null,"[Incomplete Response]");break}if(Nh==bn){this.s=4,Hd(15),B(this.i,this.l,Mr,"[Invalid Chunk]"),ct=!1;break}B(this.i,this.l,Nh,null),xs(this,Nh)}if(ji(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Wd||0!=Mr.length||this.h.h||(this.s=1,Hd(16),ct=!1),this.o=this.o&&ct,ct){if(0<Mr.length&&!this.W){this.W=!0;var rd=this.j;rd.g==this&&rd.ba&&!rd.M&&(rd.j.info("Great, no buffering proxy detected. Bytes received: "+Mr.length),Hg(rd),rd.M=!0,Hd(11))}}else B(this.i,this.l,Mr,"[Invalid Chunked Response]"),Ur(this),ys(this)}else B(this.i,this.l,Mr,null),xs(this,Mr);4==Wd&&Ur(this),this.o&&!this.J&&(4==Wd?Gg(this.j,this):(this.o=!1,Do(this)))}else(function Tv(X){const Le={};X=(X.g&&2<=K1(X)&&X.g.getAllResponseHeaders()||"").split("\r\n");for(let sn=0;sn<X.length;sn++){if(Bs(X[sn]))continue;var ct=Gi(X[sn]);const Ui=ct[0];if("string"!=typeof(ct=ct[1]))continue;ct=ct.trim();const Ao=Le[Ui]||[];Le[Ui]=Ao,Ao.push(ct)}!function Oi(X,Le){for(const ct in X)Le.call(void 0,X[ct],ct,X)}(Le,function(sn){return sn.join(", ")})})(this.g),400==ct&&0<Mr.indexOf("Unknown SID")?(this.s=3,Hd(12)):(this.s=0,Hd(13)),Ur(this),ys(this)}}}catch{}},dt.prototype.cancel=function(){this.J=!0,Ur(this)},dt.prototype.ba=function(){this.B=null;const X=Date.now();0<=X-this.S?(function _(X,Le){X.info(function(){return"TIMEOUT: "+Le})}(this.i,this.A),2!=this.L&&(l2(),Hd(17)),Ur(this),this.s=2,ys(this)):wr(this,this.S-X)};var Is=class{constructor(X,Le){this.g=X,this.map=Le}};function Us(X){this.l=X||10,X=ve.PerformanceNavigationTiming?0<(X=ve.performance.getEntriesByType("navigation")).length&&("hq"==X[0].nextHopProtocol||"h2"==X[0].nextHopProtocol):!!(ve.chrome&&ve.chrome.loadTimes&&ve.chrome.loadTimes()&&ve.chrome.loadTimes().wasFetchedViaSpdy),this.j=X?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fl(X){return!!X.h||!!X.g&&X.g.size>=X.j}function Ec(X){return X.h?1:X.g?X.g.size:0}function Dl(X,Le){return X.h?X.h==Le:!!X.g&&X.g.has(Le)}function Zl(X,Le){X.g?X.g.add(Le):X.h=Le}function Es(X,Le){X.h&&X.h==Le?X.h=null:X.g&&X.g.has(Le)&&X.g.delete(Le)}function Fu(X){if(null!=X.h)return X.i.concat(X.h.D);if(null!=X.g&&0!==X.g.size){let Le=X.i;for(const ct of X.g.values())Le=Le.concat(ct.D);return Le}return Ir(X.i)}function Vu(X,Le){if(X.forEach&&"function"==typeof X.forEach)X.forEach(Le,void 0);else if(Oe(X)||"string"==typeof X)Array.prototype.forEach.call(X,Le,void 0);else for(var ct=function Gd(X){if(X.na&&"function"==typeof X.na)return X.na();if(!X.V||"function"!=typeof X.V){if(typeof Map<"u"&&X instanceof Map)return Array.from(X.keys());if(!(typeof Set<"u"&&X instanceof Set)){if(Oe(X)||"string"==typeof X){var Le=[];X=X.length;for(var ct=0;ct<X;ct++)Le.push(ct);return Le}Le=[],ct=0;for(const sn in X)Le[ct++]=sn;return Le}}}(X),sn=function nd(X){if(X.V&&"function"==typeof X.V)return X.V();if(typeof Map<"u"&&X instanceof Map||typeof Set<"u"&&X instanceof Set)return Array.from(X.values());if("string"==typeof X)return X.split("");if(Oe(X)){for(var Le=[],ct=X.length,sn=0;sn<ct;sn++)Le.push(X[sn]);return Le}for(sn in Le=[],ct=0,X)Le[ct++]=X[sn];return Le}(X),Ui=sn.length,Ao=0;Ao<Ui;Ao++)Le.call(void 0,sn[Ao],ct&&ct[Ao],X)}Us.prototype.cancel=function(){if(this.i=Fu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const X of this.g.values())X.cancel();this.g.clear()}};var id=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rc(X){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,X instanceof Rc){this.h=X.h,Cc(this,X.j),this.o=X.o,this.g=X.g,ju(this,X.s),this.l=X.l;var Le=X.i,ct=new q2;ct.i=Le.i,Le.g&&(ct.g=new Map(Le.g),ct.h=Le.h),c2(this,ct),this.m=X.m}else X&&(Le=String(X).match(id))?(this.h=!1,Cc(this,Le[1]||"",!0),this.o=Tf(Le[2]||""),this.g=Tf(Le[3]||"",!0),ju(this,Le[4]),this.l=Tf(Le[5]||"",!0),c2(this,Le[6]||"",!0),this.m=Tf(Le[7]||"")):(this.h=!1,this.i=new q2(null,this.h))}function $u(X){return new Rc(X)}function Cc(X,Le,ct){X.j=ct?Tf(Le,!0):Le,X.j&&(X.j=X.j.replace(/:$/,""))}function ju(X,Le){if(Le){if(Le=Number(Le),isNaN(Le)||0>Le)throw Error("Bad port number "+Le);X.s=Le}else X.s=null}function c2(X,Le,ct){Le instanceof q2?(X.i=Le,function V4(X,Le){Le&&!X.j&&(Zp(X),X.i=null,X.g.forEach(function(ct,sn){var Ui=sn.toLowerCase();sn!=Ui&&(B4(this,sn),F4(this,Ui,ct))},X)),X.j=Le}(X.i,X.h)):(ct||(Le=p0(Le,$g)),X.i=new q2(Le,X.h))}function Cl(X,Le,ct){X.i.set(Le,ct)}function bp(X){return Cl(X,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),X}function Tf(X,Le){return X?Le?decodeURI(X.replace(/%25/g,"%2525")):decodeURIComponent(X):""}function p0(X,Le,ct){return"string"==typeof X?(X=encodeURI(X).replace(Le,Vg),ct&&(X=X.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),X):null}function Vg(X){return"%"+((X=X.charCodeAt(0))>>4&15).toString(16)+(15&X).toString(16)}Rc.prototype.toString=function(){var X=[],Le=this.j;Le&&X.push(p0(Le,Om,!0),":");var ct=this.g;return(ct||"file"==Le)&&(X.push("//"),(Le=this.o)&&X.push(p0(Le,Om,!0),"@"),X.push(encodeURIComponent(String(ct)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(ct=this.s)&&X.push(":",String(ct))),(ct=this.l)&&(this.g&&"/"!=ct.charAt(0)&&X.push("/"),X.push(p0(ct,"/"==ct.charAt(0)?xv:W2,!0))),(ct=this.i.toString())&&X.push("?",ct),(ct=this.m)&&X.push("#",p0(ct,Iv)),X.join("")};var Om=/[#\/\?@]/g,W2=/[#\?:]/g,xv=/[#\?]/g,$g=/[#\?@]/g,Iv=/#/g;function q2(X,Le){this.h=this.g=null,this.i=X||null,this.j=!!Le}function Zp(X){X.g||(X.g=new Map,X.h=0,X.i&&function uh(X,Le){if(X){X=X.split("&");for(var ct=0;ct<X.length;ct++){var sn=X[ct].indexOf("="),Ui=null;if(0<=sn){var Ao=X[ct].substring(0,sn);Ui=X[ct].substring(sn+1)}else Ao=X[ct];Le(Ao,Ui?decodeURIComponent(Ui.replace(/\+/g," ")):"")}}}(X.i,function(Le,ct){X.add(decodeURIComponent(Le.replace(/\+/g," ")),ct)}))}function B4(X,Le){Zp(X),Le=Qp(X,Le),X.g.has(Le)&&(X.i=null,X.h-=X.g.get(Le).length,X.g.delete(Le))}function N4(X,Le){return Zp(X),Le=Qp(X,Le),X.g.has(Le)}function F4(X,Le,ct){B4(X,Le),0<ct.length&&(X.i=null,X.g.set(Qp(X,Le),Ir(ct)),X.h+=ct.length)}function Qp(X,Le){return Le=String(Le),X.j&&(Le=Le.toLowerCase()),Le}function Mf(X,Le,ct,sn,Ui){try{Ui&&(Ui.onload=null,Ui.onerror=null,Ui.onabort=null,Ui.ontimeout=null),sn(ct)}catch{}}function d6(){this.g=new H2}function Lm(X,Le,ct){const sn=ct||"";try{Vu(X,function(Ui,Ao){let Mr=Ui;rt(Ui)&&(Mr=Am(Ui)),Le.push(sn+Ao+"="+encodeURIComponent(Mr))})}catch(Ui){throw Le.push(sn+"type="+encodeURIComponent("_badmap")),Ui}}function X1(X){this.l=X.Ub||null,this.j=X.eb||!1}function jg(X,Le){Da.call(this),this.D=X,this.o=Le,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function $4(X){X.j.read().then(X.Pa.bind(X)).catch(X.ga.bind(X))}function X2(X){X.readyState=4,X.l=null,X.j=null,X.v=null,u2(X)}function u2(X){X.onreadystatechange&&X.onreadystatechange.call(X)}function Cv(X){let Le="";return qa(X,function(ct,sn){Le+=sn,Le+=":",Le+=ct,Le+="\r\n"}),Le}function f4(X,Le,ct){e:{for(sn in ct){var sn=!1;break e}sn=!0}sn||(ct=Cv(ct),"string"==typeof X?null!=ct&&encodeURIComponent(String(ct)):Cl(X,Le,ct))}function zc(X){Da.call(this),this.headers=new Map,this.o=X||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(S=q2.prototype).add=function(X,Le){Zp(this),this.i=null,X=Qp(this,X);var ct=this.g.get(X);return ct||this.g.set(X,ct=[]),ct.push(Le),this.h+=1,this},S.forEach=function(X,Le){Zp(this),this.g.forEach(function(ct,sn){ct.forEach(function(Ui){X.call(Le,Ui,sn,this)},this)},this)},S.na=function(){Zp(this);const X=Array.from(this.g.values()),Le=Array.from(this.g.keys()),ct=[];for(let sn=0;sn<Le.length;sn++){const Ui=X[sn];for(let Ao=0;Ao<Ui.length;Ao++)ct.push(Le[sn])}return ct},S.V=function(X){Zp(this);let Le=[];if("string"==typeof X)N4(this,X)&&(Le=Le.concat(this.g.get(Qp(this,X))));else{X=Array.from(this.g.values());for(let ct=0;ct<X.length;ct++)Le=Le.concat(X[ct])}return Le},S.set=function(X,Le){return Zp(this),this.i=null,N4(this,X=Qp(this,X))&&(this.h-=this.g.get(X).length),this.g.set(X,[Le]),this.h+=1,this},S.get=function(X,Le){return X&&0<(X=this.V(X)).length?String(X[0]):Le},S.toString=function(){if(this.i)return this.i;if(!this.g)return"";const X=[],Le=Array.from(this.g.keys());for(var ct=0;ct<Le.length;ct++){var sn=Le[ct];const Ao=encodeURIComponent(String(sn)),Mr=this.V(sn);for(sn=0;sn<Mr.length;sn++){var Ui=Ao;""!==Mr[sn]&&(Ui+="="+encodeURIComponent(String(Mr[sn]))),X.push(Ui)}}return this.i=X.join("&")},Wo(X1,Dm),X1.prototype.g=function(){return new jg(this.l,this.j)},X1.prototype.i=function(X){return function(){return X}}({}),Wo(jg,Da),(S=jg.prototype).open=function(X,Le){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=X,this.A=Le,this.readyState=1,u2(this)},S.send=function(X){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Le={headers:this.u,method:this.B,credentials:this.m,cache:void 0};X&&(Le.body=X),(this.D||ve).fetch(new Request(this.A,Le)).then(this.Sa.bind(this),this.ga.bind(this))},S.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,X2(this)),this.readyState=0},S.Sa=function(X){if(this.g&&(this.l=X,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=X.headers,this.readyState=2,u2(this)),this.g&&(this.readyState=3,u2(this),this.g)))if("arraybuffer"===this.responseType)X.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof ve.ReadableStream<"u"&&"body"in X){if(this.j=X.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$4(this)}else X.text().then(this.Ra.bind(this),this.ga.bind(this))},S.Pa=function(X){if(this.g){if(this.o&&X.value)this.response.push(X.value);else if(!this.o){var Le=X.value?X.value:new Uint8Array(0);(Le=this.v.decode(Le,{stream:!X.done}))&&(this.response=this.responseText+=Le)}X.done?X2(this):u2(this),3==this.readyState&&$4(this)}},S.Ra=function(X){this.g&&(this.response=this.responseText=X,X2(this))},S.Qa=function(X){this.g&&(this.response=X,X2(this))},S.ga=function(){this.g&&X2(this)},S.setRequestHeader=function(X,Le){this.u.append(X,Le)},S.getResponseHeader=function(X){return this.h&&this.h.get(X.toLowerCase())||""},S.getAllResponseHeaders=function(){if(!this.h)return"";const X=[],Le=this.h.entries();for(var ct=Le.next();!ct.done;)X.push((ct=ct.value)[0]+": "+ct[1]),ct=Le.next();return X.join("\r\n")},Object.defineProperty(jg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(X){this.m=X?"include":"same-origin"}}),Wo(zc,Da);var kv=/^https?$/i,s3=["POST","PUT"];function d2(X,Le){X.h=!1,X.g&&(X.j=!0,X.g.abort(),X.j=!1),X.l=Le,X.m=5,Sv(X),f0(X)}function Sv(X){X.A||(X.A=!0,ch(X,"complete"),ch(X,"error"))}function ag(X){if(X.h&&typeof Q<"u"&&(!X.v[1]||4!=K1(X)||2!=X.Z()))if(X.u&&4==K1(X))p4(X.Ea,0,X);else if(ch(X,"readystatechange"),4==K1(X)){X.h=!1;try{const Mr=X.Z();e:switch(Mr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Le=!0;break e;default:Le=!1}var ct;if(!(ct=Le)){var sn;if(sn=0===Mr){var Ui=String(X.D).match(id)[1]||null;!Ui&&ve.self&&ve.self.location&&(Ui=ve.self.location.protocol.slice(0,-1)),sn=!kv.test(Ui?Ui.toLowerCase():"")}ct=sn}if(ct)ch(X,"complete"),ch(X,"success");else{X.m=6;try{var Ao=2<K1(X)?X.g.statusText:""}catch{Ao=""}X.l=Ao+" ["+X.Z()+"]",Sv(X)}}finally{f0(X)}}}function f0(X,Le){if(X.g){K2(X);const ct=X.g,sn=X.v[0]?()=>{}:null;X.g=null,X.v=null,Le||ch(X,"ready");try{ct.onreadystatechange=sn}catch{}}}function K2(X){X.I&&(ve.clearTimeout(X.I),X.I=null)}function K1(X){return X.g?X.g.readyState:0}function Ug(X){try{if(!X.g)return null;if("response"in X.g)return X.g.response;switch(X.H){case"":case"text":return X.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in X.g)return X.g.mozResponseArrayBuffer}return null}catch{return null}}function lg(X,Le,ct){return ct&&ct.internalChannelParams&&ct.internalChannelParams[X]||Le}function Af(X){this.Aa=0,this.i=[],this.j=new h0,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lg("failFast",!1,X),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lg("baseRetryDelayMs",5e3,X),this.cb=lg("retryDelaySeedMs",1e4,X),this.Wa=lg("forwardChannelMaxRetries",2,X),this.wa=lg("forwardChannelRequestTimeoutMs",2e4,X),this.pa=X&&X.xmlHttpFactory||void 0,this.Xa=X&&X.Tb||void 0,this.Ca=X&&X.useFetchStreams||!1,this.L=void 0,this.J=X&&X.supportsCrossDomainXhr||!1,this.K="",this.h=new Us(X&&X.concurrentRequestLimit),this.Da=new d6,this.P=X&&X.fastHandshake||!1,this.O=X&&X.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=X&&X.Rb||!1,X&&X.xa&&this.j.xa(),X&&X.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&X&&X.detectBufferingProxy||!1,this.ja=void 0,X&&X.longPollingTimeout&&0<X.longPollingTimeout&&(this.ja=X.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Y2(X){if(m4(X),3==X.G){var Le=X.U++,ct=$u(X.I);if(Cl(ct,"SID",X.K),Cl(ct,"RID",Le),Cl(ct,"TYPE","terminate"),Nm(X,ct),(Le=new dt(X,X.j,Le)).L=2,Le.v=bp($u(ct)),ct=!1,ve.navigator&&ve.navigator.sendBeacon)try{ct=ve.navigator.sendBeacon(Le.v.toString(),"")}catch{}!ct&&ve.Image&&((new Image).src=Le.v,ct=!0),ct||(Le.g=Y1(Le.j,null),Le.g.ea(Le.v)),Le.F=Date.now(),Do(Le)}ug(X)}function j4(X){X.g&&(Hg(X),X.g.cancel(),X.g=null)}function m4(X){j4(X),X.u&&(ve.clearTimeout(X.u),X.u=null),ef(X),X.h.cancel(),X.s&&("number"==typeof X.s&&ve.clearTimeout(X.s),X.s=null)}function Bm(X){if(!fl(X.h)&&!X.s){X.s=!0;var Le=X.Ga;eg||c4(),Em||(eg(),Em=!0),Pg.add(Le,X),X.B=0}}function cg(X,Le){var ct;ct=Le?Le.l:X.U++;const sn=$u(X.I);Cl(sn,"SID",X.K),Cl(sn,"RID",ct),Cl(sn,"AID",X.T),Nm(X,sn),X.m&&X.o&&f4(sn,X.m,X.o),ct=new dt(X,X.j,ct,X.B+1),null===X.m&&(ct.H=X.o),Le&&(X.i=Le.D.concat(X.i)),Le=Jp(X,ct,1e3),ct.I=Math.round(.5*X.wa)+Math.round(.5*X.wa*Math.random()),Zl(X.h,ct),Ii(ct,sn,Le)}function Nm(X,Le){X.H&&qa(X.H,function(ct,sn){Cl(Le,sn,ct)}),X.l&&Vu({},function(ct,sn){Cl(Le,sn,ct)})}function Jp(X,Le,ct){ct=Math.min(X.i.length,ct);var sn=X.l?pi(X.l.Na,X.l,X):null;e:{var Ui=X.i;let Ao=-1;for(;;){const Mr=["count="+ct];-1==Ao?0<ct?(Ao=Ui[0].g,Mr.push("ofs="+Ao)):Ao=0:Mr.push("ofs="+Ao);let kl=!0;for(let od=0;od<ct;od++){let il=Ui[od].g;const rd=Ui[od].map;if(il-=Ao,0>il)Ao=Math.max(0,Ui[od].g-100),kl=!1;else try{Lm(rd,Mr,"req"+il+"_")}catch{sn&&sn(rd)}}if(kl){sn=Mr.join("&");break e}}}return X=X.i.splice(0,ct),Le.D=X,sn}function Av(X){if(!X.g&&!X.u){X.Y=1;var Le=X.Fa;eg||c4(),Em||(eg(),Em=!0),Pg.add(Le,X),X.v=0}}function g4(X){return!(X.g||X.u||3<=X.v||(X.Y++,X.u=Mu(pi(X.Fa,X),wp(X,X.v)),X.v++,0))}function Hg(X){null!=X.A&&(ve.clearTimeout(X.A),X.A=null)}function Fm(X){X.g=new dt(X,X.j,"rpc",X.Y),null===X.m&&(X.g.H=X.o),X.g.O=0;var Le=$u(X.qa);Cl(Le,"RID","rpc"),Cl(Le,"SID",X.K),Cl(Le,"AID",X.T),Cl(Le,"CI",X.F?"0":"1"),!X.F&&X.ja&&Cl(Le,"TO",X.ja),Cl(Le,"TYPE","xmlhttp"),Nm(X,Le),X.m&&X.o&&f4(Le,X.m,X.o),X.L&&(X.g.I=X.L);var ct=X.g;X=X.ia,ct.L=1,ct.v=bp($u(Le)),ct.m=null,ct.P=!0,oo(ct,X)}function ef(X){null!=X.C&&(ve.clearTimeout(X.C),X.C=null)}function Gg(X,Le){var ct=null;if(X.g==Le){ef(X),Hg(X),X.g=null;var sn=2}else{if(!Dl(X.h,Le))return;ct=Le.D,Es(X.h,Le),sn=1}if(0!=X.G)if(Le.o)if(1==sn){ct=Le.m?Le.m.length:0,Le=Date.now()-Le.F;var Ui=X.B;ch(sn=Pm(),new sg(sn,ct)),Bm(X)}else Av(X);else if(3==(Ui=Le.s)||0==Ui&&0<Le.X||!(1==sn&&function Mv(X,Le){return!(Ec(X.h)>=X.h.j-(X.s?1:0)||(X.s?(X.i=Le.D.concat(X.i),0):1==X.G||2==X.G||X.B>=(X.Va?0:X.Wa)||(X.s=Mu(pi(X.Ga,X,Le),wp(X,X.B)),X.B++,0)))}(X,Le)||2==sn&&g4(X)))switch(ct&&0<ct.length&&(Le=X.h,Le.i=Le.i.concat(ct)),Ui){case 1:Uu(X,5);break;case 4:Uu(X,10);break;case 3:Uu(X,6);break;default:Uu(X,2)}}function wp(X,Le){let ct=X.Ta+Math.floor(Math.random()*X.cb);return X.isActive()||(ct*=2),ct*Le}function Uu(X,Le){if(X.j.info("Error code "+Le),2==Le){var ct=pi(X.fb,X),sn=X.Xa;const Ui=!sn;sn=new Rc(sn||"//www.google.com/images/cleardot.gif"),ve.location&&"http"==ve.location.protocol||Cc(sn,"https"),bp(sn),Ui?function A1(X,Le){const ct=new h0;if(ve.Image){const sn=new Image;sn.onload=no(Mf,ct,"TestLoadImage: loaded",!0,Le,sn),sn.onerror=no(Mf,ct,"TestLoadImage: error",!1,Le,sn),sn.onabort=no(Mf,ct,"TestLoadImage: abort",!1,Le,sn),sn.ontimeout=no(Mf,ct,"TestLoadImage: timeout",!1,Le,sn),ve.setTimeout(function(){sn.ontimeout&&sn.ontimeout()},1e4),sn.src=X}else Le(!1)}(sn.toString(),ct):function Ev(X,Le){new h0;const sn=new AbortController,Ui=setTimeout(()=>{sn.abort(),Mf(0,0,!1,Le)},1e4);fetch(X,{signal:sn.signal}).then(Ao=>{clearTimeout(Ui),Mf(0,0,!!Ao.ok,Le)}).catch(()=>{clearTimeout(Ui),Mf(0,0,!1,Le)})}(sn.toString(),ct)}else Hd(2);X.G=0,X.l&&X.l.sa(Le),ug(X),m4(X)}function ug(X){if(X.G=0,X.ka=[],X.l){const Le=Fu(X.h);(0!=Le.length||0!=X.i.length)&&(ar(X.ka,Le),ar(X.ka,X.i),X.h.i.length=0,Ir(X.i),X.i.length=0),X.l.ra()}}function Z2(X,Le,ct){var sn=ct instanceof Rc?$u(ct):new Rc(ct);if(""!=sn.g)Le&&(sn.g=Le+"."+sn.g),ju(sn,sn.s);else{var Ui=ve.location;sn=Ui.protocol,Le=Le?Le+"."+Ui.hostname:Ui.hostname,Ui=+Ui.port;var Ao=new Rc(null);sn&&Cc(Ao,sn),Le&&(Ao.g=Le),Ui&&ju(Ao,Ui),ct&&(Ao.l=ct),sn=Ao}return Le=X.ya,(ct=X.D)&&Le&&Cl(sn,ct,Le),Cl(sn,"VER",X.la),Nm(X,sn),sn}function Y1(X,Le,ct){if(Le&&!X.J)throw Error("Can't create secondary domain capable XhrIo object.");return(Le=new zc(X.Ca&&!X.pa?new X1({eb:ct}):X.pa)).Ha(X.J),Le}function U4(){}function v4(){}function U0(X,Le){Da.call(this),this.g=new Af(Le),this.l=X,this.h=Le&&Le.messageUrlParams||null,X=Le&&Le.messageHeaders||null,Le&&Le.clientProtocolHeaderRequired&&(X?X["X-Client-Protocol"]="webchannel":X={"X-Client-Protocol":"webchannel"}),this.g.o=X,X=Le&&Le.initMessageHeaders||null,Le&&Le.messageContentType&&(X?X["X-WebChannel-Content-Type"]=Le.messageContentType:X={"X-WebChannel-Content-Type":Le.messageContentType}),Le&&Le.va&&(X?X["X-WebChannel-Client-Profile"]=Le.va:X={"X-WebChannel-Client-Profile":Le.va}),this.g.S=X,(X=Le&&Le.Sb)&&!Bs(X)&&(this.g.m=X),this.v=Le&&Le.supportsCrossDomainXhr||!1,this.u=Le&&Le.sendRawJson||!1,(Le=Le&&Le.httpSessionIdParam)&&!Bs(Le)&&(this.g.D=Le,null!==(X=this.h)&&Le in X&&Le in(X=this.h)&&delete X[Le]),this.j=new h2(this)}function Wg(X){G2.call(this),X.__headers__&&(this.headers=X.__headers__,this.statusCode=X.__status__,delete X.__headers__,delete X.__status__);var Le=X.__sm__;if(Le){e:{for(const ct in Le){X=ct;break e}X=void 0}(this.i=X)&&(X=this.i,Le=null!==Le&&X in Le?Le[X]:void 0),this.data=Le}else this.data=X}function qg(){Kp.call(this),this.status=1}function h2(X){this.g=X}(S=zc.prototype).Ha=function(X){this.J=X},S.ea=function(X,Le,ct,sn){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+X);Le=Le?Le.toUpperCase():"GET",this.D=X,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ce.g(),this.v=function Fg(X){return X.h||(X.h=X.i())}(this.o?this.o:ce),this.g.onreadystatechange=pi(this.Ea,this);try{this.B=!0,this.g.open(Le,String(X),!0),this.B=!1}catch(Ao){return void d2(this,Ao)}if(X=ct||"",ct=new Map(this.headers),sn)if(Object.getPrototypeOf(sn)===Object.prototype)for(var Ui in sn)ct.set(Ui,sn[Ui]);else{if("function"!=typeof sn.keys||"function"!=typeof sn.get)throw Error("Unknown input type for opt_headers: "+String(sn));for(const Ao of sn.keys())ct.set(Ao,sn.get(Ao))}sn=Array.from(ct.keys()).find(Ao=>"content-type"==Ao.toLowerCase()),Ui=ve.FormData&&X instanceof ve.FormData,!(0<=Array.prototype.indexOf.call(s3,Le,void 0))||sn||Ui||ct.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ao,Mr]of ct)this.g.setRequestHeader(Ao,Mr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{K2(this),this.u=!0,this.g.send(X),this.u=!1}catch(Ao){d2(this,Ao)}},S.abort=function(X){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=X||7,ch(this,"complete"),ch(this,"abort"),f0(this))},S.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),f0(this,!0)),zc.aa.N.call(this)},S.Ea=function(){this.s||(this.B||this.u||this.j?ag(this):this.bb())},S.bb=function(){ag(this)},S.isActive=function(){return!!this.g},S.Z=function(){try{return 2<K1(this)?this.g.status:-1}catch{return-1}},S.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},S.Oa=function(X){if(this.g){var Le=this.g.responseText;return X&&0==Le.indexOf(X)&&(Le=Le.substring(X.length)),L4(Le)}},S.Ba=function(){return this.m},S.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(S=Af.prototype).la=8,S.G=1,S.connect=function(X,Le,ct,sn){Hd(0),this.W=X,this.H=Le||{},ct&&void 0!==sn&&(this.H.OSID=ct,this.H.OAID=sn),this.F=this.X,this.I=Z2(this,null,this.W),Bm(this)},S.Ga=function(X){if(this.s)if(this.s=null,1==this.G){if(!X){this.U=Math.floor(1e5*Math.random()),X=this.U++;const Ui=new dt(this,this.j,X);let Ao=this.o;if(this.S&&(Ao?(Ao=ii(Ao),Ni(Ao,this.S)):Ao=this.S),null!==this.m||this.O||(Ui.H=Ao,Ao=null),this.P)e:{for(var Le=0,ct=0;ct<this.i.length;ct++){var sn=this.i[ct];if(void 0===(sn="__data__"in sn.map&&"string"==typeof(sn=sn.map.__data__)?sn.length:void 0))break;if(4096<(Le+=sn)){Le=ct;break e}if(4096===Le||ct===this.i.length-1){Le=ct+1;break e}}Le=1e3}else Le=1e3;Le=Jp(this,Ui,Le),Cl(ct=$u(this.I),"RID",X),Cl(ct,"CVER",22),this.D&&Cl(ct,"X-HTTP-Session-Id",this.D),Nm(this,ct),Ao&&(this.O?Le="headers="+encodeURIComponent(String(Cv(Ao)))+"&"+Le:this.m&&f4(ct,this.m,Ao)),Zl(this.h,Ui),this.Ua&&Cl(ct,"TYPE","init"),this.P?(Cl(ct,"$req",Le),Cl(ct,"SID","null"),Ui.T=!0,Ii(Ui,ct,null)):Ii(Ui,ct,Le),this.G=2}}else 3==this.G&&(X?cg(this,X):0==this.i.length||fl(this.h)||cg(this))},S.Fa=function(){if(this.u=null,Fm(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var X=2*this.R;this.j.info("BP detection timer enabled: "+X),this.A=Mu(pi(this.ab,this),X)}},S.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Hd(10),j4(this),Fm(this))},S.Za=function(){null!=this.C&&(this.C=null,j4(this),g4(this),Hd(19))},S.fb=function(X){X?(this.j.info("Successfully pinged google.com"),Hd(2)):(this.j.info("Failed to ping google.com"),Hd(1))},S.isActive=function(){return!!this.l&&this.l.isActive(this)},(S=U4.prototype).ua=function(){},S.ta=function(){},S.sa=function(){},S.ra=function(){},S.isActive=function(){return!0},S.Na=function(){},v4.prototype.g=function(X,Le){return new U0(X,Le)},Wo(U0,Da),U0.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},U0.prototype.close=function(){Y2(this.g)},U0.prototype.o=function(X){var Le=this.g;if("string"==typeof X){var ct={};ct.__data__=X,X=ct}else this.u&&((ct={}).__data__=Am(X),X=ct);Le.i.push(new Is(Le.Ya++,X)),3==Le.G&&Bm(Le)},U0.prototype.N=function(){this.g.l=null,delete this.j,Y2(this.g),delete this.g,U0.aa.N.call(this)},Wo(Wg,G2),Wo(qg,Kp),Wo(h2,U4),h2.prototype.ua=function(){ch(this.g,"a")},h2.prototype.ta=function(X){ch(this.g,new Wg(X))},h2.prototype.sa=function(X){ch(this.g,new qg)},h2.prototype.ra=function(){ch(this.g,"b")},v4.prototype.createWebChannel=v4.prototype.g,U0.prototype.send=U0.prototype.o,U0.prototype.open=U0.prototype.m,U0.prototype.close=U0.prototype.close,An=C.createWebChannelTransport=function(){return new v4},Jn=C.getStatEventTarget=function(){return Pm()},ht=C.Event=Yp,on=C.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},D.NO_ERROR=0,D.TIMEOUT=8,D.HTTP_ERROR=6,xn=C.ErrorCode=D,q.COMPLETE="complete",un=C.EventType=q,og.EventType=kf,kf.OPEN="a",kf.CLOSE="b",kf.ERROR="c",kf.MESSAGE="d",Da.prototype.listen=Da.prototype.K,vt=C.WebChannel=og,Ht=C.FetchXmlHttpFactory=X1,zc.prototype.listenOnce=zc.prototype.L,zc.prototype.getLastError=zc.prototype.Ka,zc.prototype.getLastErrorCode=zc.prototype.Ba,zc.prototype.getStatus=zc.prototype.Z,zc.prototype.getResponseJson=zc.prototype.Oa,zc.prototype.getResponseText=zc.prototype.oa,zc.prototype.send=zc.prototype.ea,zc.prototype.setWithCredentials=zc.prototype.Ha,At=C.XhrIo=zc}).apply(typeof It<"u"?It:typeof self<"u"?self:typeof window<"u"?window:{});const qn="@firebase/firestore";class xt{constructor(a){this.uid=a}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(a){return a.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let Ot="10.12.3";const vn=new l.Vy("@firebase/firestore");function Pn(){return vn.logLevel}function Ct(S,...a){if(vn.logLevel<=l.$b.DEBUG){const p=a.map(Rt);vn.debug(`Firestore (${Ot}): ${S}`,...p)}}function Me(S,...a){if(vn.logLevel<=l.$b.ERROR){const p=a.map(Rt);vn.error(`Firestore (${Ot}): ${S}`,...p)}}function pn(S,...a){if(vn.logLevel<=l.$b.WARN){const p=a.map(Rt);vn.warn(`Firestore (${Ot}): ${S}`,...p)}}function Rt(S){if("string"==typeof S)return S;try{return JSON.stringify(S)}catch{return S}}function On(S="Unexpected state"){const a=`FIRESTORE (${Ot}) INTERNAL ASSERTION FAILED: `+S;throw Me(a),new Error(a)}function Cn(S,a){S||On()}function Fn(S,a){return S}const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends qe.g{constructor(a,p){super(a,p),this.code=a,this.message=p,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ge{constructor(){this.promise=new Promise((a,p)=>{this.resolve=a,this.reject=p})}}class tt{constructor(a,p){this.user=p,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${a}`)}}class zt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(a,p){a.enqueueRetryable(()=>p(xt.UNAUTHENTICATED))}shutdown(){}}class Yn{constructor(a){this.token=a,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(a,p){this.changeListener=p,a.enqueueRetryable(()=>p(this.token.user))}shutdown(){this.changeListener=null}}class cn{constructor(a){this.t=a,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(a,p){var w=this;let P=this.i;const U=rt=>this.i!==P?(P=this.i,p(rt)):Promise.resolve();let Q=new Ge;this.o=()=>{this.i++,this.currentUser=this.u(),Q.resolve(),Q=new Ge,a.enqueueRetryable(()=>U(this.currentUser))};const ve=()=>{const rt=Q;a.enqueueRetryable((0,V.A)(function*(){yield rt.promise,yield U(w.currentUser)}))},Oe=rt=>{Ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=rt,this.auth.addAuthTokenListener(this.o),ve()};this.t.onInit(rt=>Oe(rt)),setTimeout(()=>{if(!this.auth){const rt=this.t.getImmediate({optional:!0});rt?Oe(rt):(Ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),Q.resolve(),Q=new Ge)}},0),ve()}getToken(){const a=this.i,p=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(p).then(w=>this.i!==a?(Ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):w?(Cn("string"==typeof w.accessToken),new tt(w.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const a=this.auth&&this.auth.getUid();return Cn(null===a||"string"==typeof a),new xt(a)}}class _o{constructor(a,p,w){this.l=a,this.h=p,this.P=w,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const a=this.T();return a&&this.I.set("Authorization",a),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class to{constructor(a,p,w){this.l=a,this.h=p,this.P=w}getToken(){return Promise.resolve(new _o(this.l,this.h,this.P))}start(a,p){a.enqueueRetryable(()=>p(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pr{constructor(a){this.value=a,this.type="AppCheck",this.headers=new Map,a&&a.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jo{constructor(a){this.A=a,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(a,p){const w=U=>{null!=U.error&&Ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${U.error.message}`);const Q=U.token!==this.R;return this.R=U.token,Ct("FirebaseAppCheckTokenProvider",`Received ${Q?"new":"existing"} token.`),Q?p(U.token):Promise.resolve()};this.o=U=>{a.enqueueRetryable(()=>w(U))};const P=U=>{Ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=U,this.appCheck.addTokenListener(this.o)};this.A.onInit(U=>P(U)),setTimeout(()=>{if(!this.appCheck){const U=this.A.getImmediate({optional:!0});U?P(U):Ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const a=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(a).then(p=>p?(Cn("string"==typeof p.token),this.R=p.token,new pr(p.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Mi(S){const a=typeof self<"u"&&(self.crypto||self.msCrypto),p=new Uint8Array(S);if(a&&"function"==typeof a.getRandomValues)a.getRandomValues(p);else for(let w=0;w<S;w++)p[w]=Math.floor(256*Math.random());return p}class rs{static newId(){const p=62*Math.floor(256/62);let w="";for(;w.length<20;){const P=Mi(40);for(let U=0;U<P.length;++U)w.length<20&&P[U]<p&&(w+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(P[U]%62))}return w}}function $i(S,a){return S<a?-1:S>a?1:0}function br(S,a,p){return S.length===a.length&&S.every((w,P)=>p(w,a[P]))}class Li{constructor(a,p){if(this.seconds=a,this.nanoseconds=p,p<0)throw new Ae(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+p);if(p>=1e9)throw new Ae(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+p);if(a<-62135596800)throw new Ae(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+a);if(a>=253402300800)throw new Ae(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+a)}static now(){return Li.fromMillis(Date.now())}static fromDate(a){return Li.fromMillis(a.getTime())}static fromMillis(a){const p=Math.floor(a/1e3),w=Math.floor(1e6*(a-1e3*p));return new Li(p,w)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(a){return this.seconds===a.seconds?$i(this.nanoseconds,a.nanoseconds):$i(this.seconds,a.seconds)}isEqual(a){return a.seconds===this.seconds&&a.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yi{constructor(a){this.timestamp=a}static fromTimestamp(a){return new yi(a)}static min(){return new yi(new Li(0,0))}static max(){return new yi(new Li(253402300799,999999999))}compareTo(a){return this.timestamp._compareTo(a.timestamp)}isEqual(a){return this.timestamp.isEqual(a.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ao{constructor(a,p,w){void 0===p?p=0:p>a.length&&On(),void 0===w?w=a.length-p:w>a.length-p&&On(),this.segments=a,this.offset=p,this.len=w}get length(){return this.len}isEqual(a){return 0===ao.comparator(this,a)}child(a){const p=this.segments.slice(this.offset,this.limit());return a instanceof ao?a.forEach(w=>{p.push(w)}):p.push(a),this.construct(p)}limit(){return this.offset+this.length}popFirst(a){return this.construct(this.segments,this.offset+(a=void 0===a?1:a),this.length-a)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(a){return this.segments[this.offset+a]}isEmpty(){return 0===this.length}isPrefixOf(a){if(a.length<this.length)return!1;for(let p=0;p<this.length;p++)if(this.get(p)!==a.get(p))return!1;return!0}isImmediateParentOf(a){if(this.length+1!==a.length)return!1;for(let p=0;p<this.length;p++)if(this.get(p)!==a.get(p))return!1;return!0}forEach(a){for(let p=this.offset,w=this.limit();p<w;p++)a(this.segments[p])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(a,p){const w=Math.min(a.length,p.length);for(let P=0;P<w;P++){const U=a.get(P),Q=p.get(P);if(U<Q)return-1;if(U>Q)return 1}return a.length<p.length?-1:a.length>p.length?1:0}}class si extends ao{construct(a,p,w){return new si(a,p,w)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...a){const p=[];for(const w of a){if(w.indexOf("//")>=0)throw new Ae(Ke.INVALID_ARGUMENT,`Invalid segment (${w}). Paths must not contain // in them.`);p.push(...w.split("/").filter(P=>P.length>0))}return new si(p)}static emptyPath(){return new si([])}}const Fi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mo extends ao{construct(a,p,w){return new mo(a,p,w)}static isValidIdentifier(a){return Fi.test(a)}canonicalString(){return this.toArray().map(a=>(a=a.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mo.isValidIdentifier(a)||(a="`"+a+"`"),a)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mo(["__name__"])}static fromServerFormat(a){const p=[];let w="",P=0;const U=()=>{if(0===w.length)throw new Ae(Ke.INVALID_ARGUMENT,`Invalid field path (${a}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);p.push(w),w=""};let Q=!1;for(;P<a.length;){const ve=a[P];if("\\"===ve){if(P+1===a.length)throw new Ae(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+a);const Oe=a[P+1];if("\\"!==Oe&&"."!==Oe&&"`"!==Oe)throw new Ae(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+a);w+=Oe,P+=2}else"`"===ve?(Q=!Q,P++):"."!==ve||Q?(w+=ve,P++):(U(),P++)}if(U(),Q)throw new Ae(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+a);return new mo(p)}static emptyPath(){return new mo([])}}class eo{constructor(a){this.path=a}static fromPath(a){return new eo(si.fromString(a))}static fromName(a){return new eo(si.fromString(a).popFirst(5))}static empty(){return new eo(si.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(a){return this.path.length>=2&&this.path.get(this.path.length-2)===a}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(a){return null!==a&&0===si.comparator(this.path,a.path)}toString(){return this.path.toString()}static comparator(a,p){return si.comparator(a.path,p.path)}static isDocumentKey(a){return a.length%2==0}static fromSegments(a){return new eo(new si(a.slice()))}}class Ho{constructor(a,p,w){this.readTime=a,this.documentKey=p,this.largestBatchId=w}static min(){return new Ho(yi.min(),eo.empty(),-1)}static max(){return new Ho(yi.max(),eo.empty(),-1)}}function Nr(S,a){let p=S.readTime.compareTo(a.readTime);return 0!==p?p:(p=eo.comparator(S.documentKey,a.documentKey),0!==p?p:$i(S.largestBatchId,a.largestBatchId))}const ir="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _r{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(a){this.onCommittedListeners.push(a)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(a=>a())}}function Dr(S){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,V.A)(function*(S){if(S.code!==Ke.FAILED_PRECONDITION||S.message!==ir)throw S;Ct("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ni{constructor(a){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,a(p=>{this.isDone=!0,this.result=p,this.nextCallback&&this.nextCallback(p)},p=>{this.isDone=!0,this.error=p,this.catchCallback&&this.catchCallback(p)})}catch(a){return this.next(void 0,a)}next(a,p){return this.callbackAttached&&On(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(p,this.error):this.wrapSuccess(a,this.result):new ni((w,P)=>{this.nextCallback=U=>{this.wrapSuccess(a,U).next(w,P)},this.catchCallback=U=>{this.wrapFailure(p,U).next(w,P)}})}toPromise(){return new Promise((a,p)=>{this.next(a,p)})}wrapUserFunction(a){try{const p=a();return p instanceof ni?p:ni.resolve(p)}catch(p){return ni.reject(p)}}wrapSuccess(a,p){return a?this.wrapUserFunction(()=>a(p)):ni.resolve(p)}wrapFailure(a,p){return a?this.wrapUserFunction(()=>a(p)):ni.reject(p)}static resolve(a){return new ni((p,w)=>{p(a)})}static reject(a){return new ni((p,w)=>{w(a)})}static waitFor(a){return new ni((p,w)=>{let P=0,U=0,Q=!1;a.forEach(ve=>{++P,ve.next(()=>{++U,Q&&U===P&&p()},Oe=>w(Oe))}),Q=!0,U===P&&p()})}static or(a){let p=ni.resolve(!1);for(const w of a)p=p.next(P=>P?ni.resolve(P):w());return p}static forEach(a,p){const w=[];return a.forEach((P,U)=>{w.push(p.call(this,P,U))}),this.waitFor(w)}static mapArray(a,p){return new ni((w,P)=>{const U=a.length,Q=new Array(U);let ve=0;for(let Oe=0;Oe<U;Oe++){const rt=Oe;p(a[rt]).next(Wt=>{Q[rt]=Wt,++ve,ve===U&&w(Q)},Wt=>P(Wt))}})}static doWhile(a,p){return new ni((w,P)=>{const U=()=>{!0===a()?p().next(()=>{U()},P):w()};U()})}}function Wi(S){return"IndexedDbTransactionError"===S.name}let Mt=(()=>{class S{constructor(p,w){this.previousValue=p,w&&(w.sequenceNumberHandler=P=>this.ie(P),this.se=P=>w.writeSequenceNumber(P))}ie(p){return this.previousValue=Math.max(p,this.previousValue),this.previousValue}next(){const p=++this.previousValue;return this.se&&this.se(p),p}}return S.oe=-1,S})();function Jt(S){return null==S}function Bn(S){return 0===S&&1/S==-1/0}function Ar(S){let a=0;for(const p in S)Object.prototype.hasOwnProperty.call(S,p)&&a++;return a}function Hi(S,a){for(const p in S)Object.prototype.hasOwnProperty.call(S,p)&&a(p,S[p])}function Tr(S){for(const a in S)if(Object.prototype.hasOwnProperty.call(S,a))return!1;return!0}class ds{constructor(a,p){this.comparator=a,this.root=p||Ys.EMPTY}insert(a,p){return new ds(this.comparator,this.root.insert(a,p,this.comparator).copy(null,null,Ys.BLACK,null,null))}remove(a){return new ds(this.comparator,this.root.remove(a,this.comparator).copy(null,null,Ys.BLACK,null,null))}get(a){let p=this.root;for(;!p.isEmpty();){const w=this.comparator(a,p.key);if(0===w)return p.value;w<0?p=p.left:w>0&&(p=p.right)}return null}indexOf(a){let p=0,w=this.root;for(;!w.isEmpty();){const P=this.comparator(a,w.key);if(0===P)return p+w.left.size;P<0?w=w.left:(p+=w.left.size+1,w=w.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(a){return this.root.inorderTraversal(a)}forEach(a){this.inorderTraversal((p,w)=>(a(p,w),!1))}toString(){const a=[];return this.inorderTraversal((p,w)=>(a.push(`${p}:${w}`),!1)),`{${a.join(", ")}}`}reverseTraversal(a){return this.root.reverseTraversal(a)}getIterator(){return new Vs(this.root,null,this.comparator,!1)}getIteratorFrom(a){return new Vs(this.root,a,this.comparator,!1)}getReverseIterator(){return new Vs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(a){return new Vs(this.root,a,this.comparator,!0)}}class Vs{constructor(a,p,w,P){this.isReverse=P,this.nodeStack=[];let U=1;for(;!a.isEmpty();)if(U=p?w(a.key,p):1,p&&P&&(U*=-1),U<0)a=this.isReverse?a.left:a.right;else{if(0===U){this.nodeStack.push(a);break}this.nodeStack.push(a),a=this.isReverse?a.right:a.left}}getNext(){let a=this.nodeStack.pop();const p={key:a.key,value:a.value};if(this.isReverse)for(a=a.left;!a.isEmpty();)this.nodeStack.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack.push(a),a=a.left;return p}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const a=this.nodeStack[this.nodeStack.length-1];return{key:a.key,value:a.value}}}class Ys{constructor(a,p,w,P,U){this.key=a,this.value=p,this.color=null!=w?w:Ys.RED,this.left=null!=P?P:Ys.EMPTY,this.right=null!=U?U:Ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(a,p,w,P,U){return new Ys(null!=a?a:this.key,null!=p?p:this.value,null!=w?w:this.color,null!=P?P:this.left,null!=U?U:this.right)}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(a,p,w){let P=this;const U=w(a,P.key);return P=U<0?P.copy(null,null,null,P.left.insert(a,p,w),null):0===U?P.copy(null,p,null,null,null):P.copy(null,null,null,null,P.right.insert(a,p,w)),P.fixUp()}removeMin(){if(this.left.isEmpty())return Ys.EMPTY;let a=this;return a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.removeMin(),null),a.fixUp()}remove(a,p){let w,P=this;if(p(a,P.key)<0)P.left.isEmpty()||P.left.isRed()||P.left.left.isRed()||(P=P.moveRedLeft()),P=P.copy(null,null,null,P.left.remove(a,p),null);else{if(P.left.isRed()&&(P=P.rotateRight()),P.right.isEmpty()||P.right.isRed()||P.right.left.isRed()||(P=P.moveRedRight()),0===p(a,P.key)){if(P.right.isEmpty())return Ys.EMPTY;w=P.right.min(),P=P.copy(w.key,w.value,null,null,P.right.removeMin())}P=P.copy(null,null,null,null,P.right.remove(a,p))}return P.fixUp()}isRed(){return this.color}fixUp(){let a=this;return a.right.isRed()&&!a.left.isRed()&&(a=a.rotateLeft()),a.left.isRed()&&a.left.left.isRed()&&(a=a.rotateRight()),a.left.isRed()&&a.right.isRed()&&(a=a.colorFlip()),a}moveRedLeft(){let a=this.colorFlip();return a.right.left.isRed()&&(a=a.copy(null,null,null,null,a.right.rotateRight()),a=a.rotateLeft(),a=a.colorFlip()),a}moveRedRight(){let a=this.colorFlip();return a.left.left.isRed()&&(a=a.rotateRight(),a=a.colorFlip()),a}rotateLeft(){const a=this.copy(null,null,Ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight(){const a=this.copy(null,null,Ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip(){const a=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,p)}checkMaxDepth(){const a=this.check();return Math.pow(2,a)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw On();const a=this.left.check();if(a!==this.right.check())throw On();return a+(this.isRed()?0:1)}}Ys.EMPTY=null,Ys.RED=!0,Ys.BLACK=!1,Ys.EMPTY=new class{constructor(){this.size=0}get key(){throw On()}get value(){throw On()}get color(){throw On()}get left(){throw On()}get right(){throw On()}copy(a,p,w,P,U){return this}insert(a,p,w){return new Ys(a,p)}remove(a,p){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sa{constructor(a){this.comparator=a,this.data=new ds(this.comparator)}has(a){return null!==this.data.get(a)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(a){return this.data.indexOf(a)}forEach(a){this.data.inorderTraversal((p,w)=>(a(p),!1))}forEachInRange(a,p){const w=this.data.getIteratorFrom(a[0]);for(;w.hasNext();){const P=w.getNext();if(this.comparator(P.key,a[1])>=0)return;p(P.key)}}forEachWhile(a,p){let w;for(w=void 0!==p?this.data.getIteratorFrom(p):this.data.getIterator();w.hasNext();)if(!a(w.getNext().key))return}firstAfterOrEqual(a){const p=this.data.getIteratorFrom(a);return p.hasNext()?p.getNext().key:null}getIterator(){return new va(this.data.getIterator())}getIteratorFrom(a){return new va(this.data.getIteratorFrom(a))}add(a){return this.copy(this.data.remove(a).insert(a,!0))}delete(a){return this.has(a)?this.copy(this.data.remove(a)):this}isEmpty(){return this.data.isEmpty()}unionWith(a){let p=this;return p.size<a.size&&(p=a,a=this),a.forEach(w=>{p=p.add(w)}),p}isEqual(a){if(!(a instanceof sa)||this.size!==a.size)return!1;const p=this.data.getIterator(),w=a.data.getIterator();for(;p.hasNext();){const P=p.getNext().key,U=w.getNext().key;if(0!==this.comparator(P,U))return!1}return!0}toArray(){const a=[];return this.forEach(p=>{a.push(p)}),a}toString(){const a=[];return this.forEach(p=>a.push(p)),"SortedSet("+a.toString()+")"}copy(a){const p=new sa(this.comparator);return p.data=a,p}}class va{constructor(a){this.iter=a}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fa{constructor(a){this.fields=a,a.sort(mo.comparator)}static empty(){return new Fa([])}unionWith(a){let p=new sa(mo.comparator);for(const w of this.fields)p=p.add(w);for(const w of a)p=p.add(w);return new Fa(p.toArray())}covers(a){for(const p of this.fields)if(p.isPrefixOf(a))return!0;return!1}isEqual(a){return br(this.fields,a.fields,(p,w)=>p.isEqual(w))}}class ru extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ia{constructor(a){this.binaryString=a}static fromBase64String(a){const p=function(P){try{return atob(P)}catch(U){throw typeof DOMException<"u"&&U instanceof DOMException?new ru("Invalid base64 string: "+U):U}}(a);return new Ia(p)}static fromUint8Array(a){const p=function(P){let U="";for(let Q=0;Q<P.length;++Q)U+=String.fromCharCode(P[Q]);return U}(a);return new Ia(p)}[Symbol.iterator](){let a=0;return{next:()=>a<this.binaryString.length?{value:this.binaryString.charCodeAt(a++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(p){const w=new Uint8Array(p.length);for(let P=0;P<p.length;P++)w[P]=p.charCodeAt(P);return w}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(a){return $i(this.binaryString,a.binaryString)}isEqual(a){return this.binaryString===a.binaryString}}Ia.EMPTY_BYTE_STRING=new Ia("");const su=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dl(S){if(Cn(!!S),"string"==typeof S){let a=0;const p=su.exec(S);if(Cn(!!p),p[1]){let P=p[1];P=(P+"000000000").substr(0,9),a=Number(P)}const w=new Date(S);return{seconds:Math.floor(w.getTime()/1e3),nanos:a}}return{seconds:Pa(S.seconds),nanos:Pa(S.nanos)}}function Pa(S){return"number"==typeof S?S:"string"==typeof S?Number(S):0}function Uc(S){return"string"==typeof S?Ia.fromBase64String(S):Ia.fromUint8Array(S)}function Hu(S){var a,p;return"server_timestamp"===(null===(p=((null===(a=null==S?void 0:S.mapValue)||void 0===a?void 0:a.fields)||{}).__type__)||void 0===p?void 0:p.stringValue)}function Gu(S){const a=S.mapValue.fields.__previous_value__;return Hu(a)?Gu(a):a}function zl(S){const a=dl(S.mapValue.fields.__local_write_time__.timestampValue);return new Li(a.seconds,a.nanos)}class ks{constructor(a,p,w,P,U,Q,ve,Oe,rt){this.databaseId=a,this.appId=p,this.persistenceKey=w,this.host=P,this.ssl=U,this.forceLongPolling=Q,this.autoDetectLongPolling=ve,this.longPollingOptions=Oe,this.useFetchStreams=rt}}class ld{constructor(a,p){this.projectId=a,this.database=p||"(default)"}static empty(){return new ld("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(a){return a instanceof ld&&a.projectId===this.projectId&&a.database===this.database}}const fc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function mc(S){return"nullValue"in S?0:"booleanValue"in S?1:"integerValue"in S||"doubleValue"in S?2:"timestampValue"in S?3:"stringValue"in S?5:"bytesValue"in S?6:"referenceValue"in S?7:"geoPointValue"in S?8:"arrayValue"in S?9:"mapValue"in S?Hu(S)?4:Zn(S)?9007199254740991:10:On()}function Ea(S,a){if(S===a)return!0;const p=mc(S);if(p!==mc(a))return!1;switch(p){case 0:case 9007199254740991:return!0;case 1:return S.booleanValue===a.booleanValue;case 4:return zl(S).isEqual(zl(a));case 3:return function(P,U){if("string"==typeof P.timestampValue&&"string"==typeof U.timestampValue&&P.timestampValue.length===U.timestampValue.length)return P.timestampValue===U.timestampValue;const Q=dl(P.timestampValue),ve=dl(U.timestampValue);return Q.seconds===ve.seconds&&Q.nanos===ve.nanos}(S,a);case 5:return S.stringValue===a.stringValue;case 6:return U=a,Uc(S.bytesValue).isEqual(Uc(U.bytesValue));case 7:return S.referenceValue===a.referenceValue;case 8:return function(P,U){return Pa(P.geoPointValue.latitude)===Pa(U.geoPointValue.latitude)&&Pa(P.geoPointValue.longitude)===Pa(U.geoPointValue.longitude)}(S,a);case 2:return function(P,U){if("integerValue"in P&&"integerValue"in U)return Pa(P.integerValue)===Pa(U.integerValue);if("doubleValue"in P&&"doubleValue"in U){const Q=Pa(P.doubleValue),ve=Pa(U.doubleValue);return Q===ve?Bn(Q)===Bn(ve):isNaN(Q)&&isNaN(ve)}return!1}(S,a);case 9:return br(S.arrayValue.values||[],a.arrayValue.values||[],Ea);case 10:return function(P,U){const Q=P.mapValue.fields||{},ve=U.mapValue.fields||{};if(Ar(Q)!==Ar(ve))return!1;for(const Oe in Q)if(Q.hasOwnProperty(Oe)&&(void 0===ve[Oe]||!Ea(Q[Oe],ve[Oe])))return!1;return!0}(S,a);default:return On()}var U}function gc(S,a){return void 0!==(S.values||[]).find(p=>Ea(p,a))}function Ul(S,a){if(S===a)return 0;const p=mc(S),w=mc(a);if(p!==w)return $i(p,w);switch(p){case 0:case 9007199254740991:return 0;case 1:return $i(S.booleanValue,a.booleanValue);case 2:return function(U,Q){const ve=Pa(U.integerValue||U.doubleValue),Oe=Pa(Q.integerValue||Q.doubleValue);return ve<Oe?-1:ve>Oe?1:ve===Oe?0:isNaN(ve)?isNaN(Oe)?0:-1:1}(S,a);case 3:return yu(S.timestampValue,a.timestampValue);case 4:return yu(zl(S),zl(a));case 5:return $i(S.stringValue,a.stringValue);case 6:return function(U,Q){const ve=Uc(U),Oe=Uc(Q);return ve.compareTo(Oe)}(S.bytesValue,a.bytesValue);case 7:return function(U,Q){const ve=U.split("/"),Oe=Q.split("/");for(let rt=0;rt<ve.length&&rt<Oe.length;rt++){const Wt=$i(ve[rt],Oe[rt]);if(0!==Wt)return Wt}return $i(ve.length,Oe.length)}(S.referenceValue,a.referenceValue);case 8:return function(U,Q){const ve=$i(Pa(U.latitude),Pa(Q.latitude));return 0!==ve?ve:$i(Pa(U.longitude),Pa(Q.longitude))}(S.geoPointValue,a.geoPointValue);case 9:return function(U,Q){const ve=U.values||[],Oe=Q.values||[];for(let rt=0;rt<ve.length&&rt<Oe.length;++rt){const Wt=Ul(ve[rt],Oe[rt]);if(Wt)return Wt}return $i(ve.length,Oe.length)}(S.arrayValue,a.arrayValue);case 10:return function(U,Q){if(U===fc.mapValue&&Q===fc.mapValue)return 0;if(U===fc.mapValue)return 1;if(Q===fc.mapValue)return-1;const ve=U.fields||{},Oe=Object.keys(ve),rt=Q.fields||{},Wt=Object.keys(rt);Oe.sort(),Wt.sort();for(let In=0;In<Oe.length&&In<Wt.length;++In){const pi=$i(Oe[In],Wt[In]);if(0!==pi)return pi;const no=Ul(ve[Oe[In]],rt[Wt[In]]);if(0!==no)return no}return $i(Oe.length,Wt.length)}(S.mapValue,a.mapValue);default:throw On()}}function yu(S,a){if("string"==typeof S&&"string"==typeof a&&S.length===a.length)return $i(S,a);const p=dl(S),w=dl(a),P=$i(p.seconds,w.seconds);return 0!==P?P:$i(p.nanos,w.nanos)}function kc(S){return lu(S)}function lu(S){return"nullValue"in S?"null":"booleanValue"in S?""+S.booleanValue:"integerValue"in S?""+S.integerValue:"doubleValue"in S?""+S.doubleValue:"timestampValue"in S?function(p){const w=dl(p);return`time(${w.seconds},${w.nanos})`}(S.timestampValue):"stringValue"in S?S.stringValue:"bytesValue"in S?Uc(S.bytesValue).toBase64():"referenceValue"in S?eo.fromName(S.referenceValue).toString():"geoPointValue"in S?function(p){return`geo(${p.latitude},${p.longitude})`}(S.geoPointValue):"arrayValue"in S?function(p){let w="[",P=!0;for(const U of p.values||[])P?P=!1:w+=",",w+=lu(U);return w+"]"}(S.arrayValue):"mapValue"in S?function(p){const w=Object.keys(p.fields||{}).sort();let P="{",U=!0;for(const Q of w)U?U=!1:P+=",",P+=`${Q}:${lu(p.fields[Q])}`;return P+"}"}(S.mapValue):On()}function Oc(S,a){return{referenceValue:`projects/${S.projectId}/databases/${S.database}/documents/${a.path.canonicalString()}`}}function Lc(S){return!!S&&"integerValue"in S}function Gr(S){return!!S&&"arrayValue"in S}function rl(S){return!!S&&"nullValue"in S}function et(S){return!!S&&"doubleValue"in S&&isNaN(Number(S.doubleValue))}function Dt(S){return!!S&&"mapValue"in S}function Nn(S){if(S.geoPointValue)return{geoPointValue:Object.assign({},S.geoPointValue)};if(S.timestampValue&&"object"==typeof S.timestampValue)return{timestampValue:Object.assign({},S.timestampValue)};if(S.mapValue){const a={mapValue:{fields:{}}};return Hi(S.mapValue.fields,(p,w)=>a.mapValue.fields[p]=Nn(w)),a}if(S.arrayValue){const a={arrayValue:{values:[]}};for(let p=0;p<(S.arrayValue.values||[]).length;++p)a.arrayValue.values[p]=Nn(S.arrayValue.values[p]);return a}return Object.assign({},S)}function Zn(S){return"__max__"===(((S.mapValue||{}).fields||{}).__type__||{}).stringValue}class co{constructor(a){this.value=a}static empty(){return new co({mapValue:{}})}field(a){if(a.isEmpty())return this.value;{let p=this.value;for(let w=0;w<a.length-1;++w)if(p=(p.mapValue.fields||{})[a.get(w)],!Dt(p))return null;return p=(p.mapValue.fields||{})[a.lastSegment()],p||null}}set(a,p){this.getFieldsMap(a.popLast())[a.lastSegment()]=Nn(p)}setAll(a){let p=mo.emptyPath(),w={},P=[];a.forEach((Q,ve)=>{if(!p.isImmediateParentOf(ve)){const Oe=this.getFieldsMap(p);this.applyChanges(Oe,w,P),w={},P=[],p=ve.popLast()}Q?w[ve.lastSegment()]=Nn(Q):P.push(ve.lastSegment())});const U=this.getFieldsMap(p);this.applyChanges(U,w,P)}delete(a){const p=this.field(a.popLast());Dt(p)&&p.mapValue.fields&&delete p.mapValue.fields[a.lastSegment()]}isEqual(a){return Ea(this.value,a.value)}getFieldsMap(a){let p=this.value;p.mapValue.fields||(p.mapValue={fields:{}});for(let w=0;w<a.length;++w){let P=p.mapValue.fields[a.get(w)];Dt(P)&&P.mapValue.fields||(P={mapValue:{fields:{}}},p.mapValue.fields[a.get(w)]=P),p=P}return p.mapValue.fields}applyChanges(a,p,w){Hi(p,(P,U)=>a[P]=U);for(const P of w)delete a[P]}clone(){return new co(Nn(this.value))}}function gi(S){const a=[];return Hi(S.fields,(p,w)=>{const P=new mo([p]);if(Dt(w)){const U=gi(w.mapValue).fields;if(0===U.length)a.push(P);else for(const Q of U)a.push(P.child(Q))}else a.push(P)}),new Fa(a)}class qo{constructor(a,p,w,P,U,Q,ve){this.key=a,this.documentType=p,this.version=w,this.readTime=P,this.createTime=U,this.data=Q,this.documentState=ve}static newInvalidDocument(a){return new qo(a,0,yi.min(),yi.min(),yi.min(),co.empty(),0)}static newFoundDocument(a,p,w,P){return new qo(a,1,p,yi.min(),w,P,0)}static newNoDocument(a,p){return new qo(a,2,p,yi.min(),yi.min(),co.empty(),0)}static newUnknownDocument(a,p){return new qo(a,3,p,yi.min(),yi.min(),co.empty(),2)}convertToFoundDocument(a,p){return!this.createTime.isEqual(yi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=a),this.version=a,this.documentType=1,this.data=p,this.documentState=0,this}convertToNoDocument(a){return this.version=a,this.documentType=2,this.data=co.empty(),this.documentState=0,this}convertToUnknownDocument(a){return this.version=a,this.documentType=3,this.data=co.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yi.min(),this}setReadTime(a){return this.readTime=a,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(a){return a instanceof qo&&this.key.isEqual(a.key)&&this.version.isEqual(a.version)&&this.documentType===a.documentType&&this.documentState===a.documentState&&this.data.isEqual(a.data)}mutableCopy(){return new qo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cr{constructor(a,p){this.position=a,this.inclusive=p}}function Er(S,a,p){let w=0;for(let P=0;P<S.position.length;P++){const U=a[P],Q=S.position[P];if(w=U.field.isKeyField()?eo.comparator(eo.fromName(Q.referenceValue),p.key):Ul(Q,p.data.field(U.field)),"desc"===U.dir&&(w*=-1),0!==w)break}return w}function Wr(S,a){if(null===S)return null===a;if(null===a||S.inclusive!==a.inclusive||S.position.length!==a.position.length)return!1;for(let p=0;p<S.position.length;p++)if(!Ea(S.position[p],a.position[p]))return!1;return!0}class Ts{constructor(a,p="asc"){this.field=a,this.dir=p}}function ca(S,a){return S.dir===a.dir&&S.field.isEqual(a.field)}class zs{}class Fr extends zs{constructor(a,p,w){super(),this.field=a,this.op=p,this.value=w}static create(a,p,w){return a.isKeyField()?"in"===p||"not-in"===p?this.createKeyFieldInFilter(a,p,w):new za(a,p,w):"array-contains"===p?new kd(a,w):"in"===p?new cu(a,w):"not-in"===p?new Re(a,w):"array-contains-any"===p?new We(a,w):new Fr(a,p,w)}static createKeyFieldInFilter(a,p,w){return"in"===p?new Va(a,w):new gl(a,w)}matches(a){const p=a.data.field(this.field);return"!="===this.op?null!==p&&this.matchesComparison(Ul(p,this.value)):null!==p&&mc(this.value)===mc(p)&&this.matchesComparison(Ul(p,this.value))}matchesComparison(a){switch(this.op){case"<":return a<0;case"<=":return a<=0;case"==":return 0===a;case"!=":return 0!==a;case">":return a>0;case">=":return a>=0;default:return On()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ts extends zs{constructor(a,p){super(),this.filters=a,this.op=p,this.ae=null}static create(a,p){return new ts(a,p)}matches(a){return aa(this)?void 0===this.filters.find(p=>!p.matches(a)):void 0!==this.filters.find(p=>p.matches(a))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((a,p)=>a.concat(p.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aa(S){return"and"===S.op}function fa(S){return function Ms(S){for(const a of S.filters)if(a instanceof ts)return!1;return!0}(S)&&aa(S)}function Bc(S){if(S instanceof Fr)return S.field.canonicalString()+S.op.toString()+kc(S.value);if(fa(S))return S.filters.map(a=>Bc(a)).join(",");{const a=S.filters.map(p=>Bc(p)).join(",");return`${S.op}(${a})`}}function ha(S,a){return S instanceof Fr?(w=S,(P=a)instanceof Fr&&w.op===P.op&&w.field.isEqual(P.field)&&Ea(w.value,P.value)):S instanceof ts?function(w,P){return P instanceof ts&&w.op===P.op&&w.filters.length===P.filters.length&&w.filters.reduce((U,Q,ve)=>U&&ha(Q,P.filters[ve]),!0)}(S,a):void On();var w,P}function Wu(S){return S instanceof Fr?`${(p=S).field.canonicalString()} ${p.op} ${kc(p.value)}`:S instanceof ts?function(p){return p.op.toString()+" {"+p.getFilters().map(Wu).join(" ,")+"}"}(S):"Filter";var p}class za extends Fr{constructor(a,p,w){super(a,p,w),this.key=eo.fromName(w.referenceValue)}matches(a){const p=eo.comparator(a.key,this.key);return this.matchesComparison(p)}}class Va extends Fr{constructor(a,p){super(a,"in",p),this.keys=hl(0,p)}matches(a){return this.keys.some(p=>p.isEqual(a.key))}}class gl extends Fr{constructor(a,p){super(a,"not-in",p),this.keys=hl(0,p)}matches(a){return!this.keys.some(p=>p.isEqual(a.key))}}function hl(S,a){var p;return((null===(p=a.arrayValue)||void 0===p?void 0:p.values)||[]).map(w=>eo.fromName(w.referenceValue))}class kd extends Fr{constructor(a,p){super(a,"array-contains",p)}matches(a){const p=a.data.field(this.field);return Gr(p)&&gc(p.arrayValue,this.value)}}class cu extends Fr{constructor(a,p){super(a,"in",p)}matches(a){const p=a.data.field(this.field);return null!==p&&gc(this.value.arrayValue,p)}}class Re extends Fr{constructor(a,p){super(a,"not-in",p)}matches(a){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const p=a.data.field(this.field);return null!==p&&!gc(this.value.arrayValue,p)}}class We extends Fr{constructor(a,p){super(a,"array-contains-any",p)}matches(a){const p=a.data.field(this.field);return!(!Gr(p)||!p.arrayValue.values)&&p.arrayValue.values.some(w=>gc(this.value.arrayValue,w))}}class Tt{constructor(a,p=null,w=[],P=[],U=null,Q=null,ve=null){this.path=a,this.collectionGroup=p,this.orderBy=w,this.filters=P,this.limit=U,this.startAt=Q,this.endAt=ve,this.ue=null}}function an(S,a=null,p=[],w=[],P=null,U=null,Q=null){return new Tt(S,a,p,w,P,U,Q)}function $n(S){const a=Fn(S);if(null===a.ue){let p=a.path.canonicalString();null!==a.collectionGroup&&(p+="|cg:"+a.collectionGroup),p+="|f:",p+=a.filters.map(w=>Bc(w)).join(","),p+="|ob:",p+=a.orderBy.map(w=>{return(U=w).field.canonicalString()+U.dir;var U}).join(","),Jt(a.limit)||(p+="|l:",p+=a.limit),a.startAt&&(p+="|lb:",p+=a.startAt.inclusive?"b:":"a:",p+=a.startAt.position.map(w=>kc(w)).join(",")),a.endAt&&(p+="|ub:",p+=a.endAt.inclusive?"a:":"b:",p+=a.endAt.position.map(w=>kc(w)).join(",")),a.ue=p}return a.ue}function Un(S,a){if(S.limit!==a.limit||S.orderBy.length!==a.orderBy.length)return!1;for(let p=0;p<S.orderBy.length;p++)if(!ca(S.orderBy[p],a.orderBy[p]))return!1;if(S.filters.length!==a.filters.length)return!1;for(let p=0;p<S.filters.length;p++)if(!ha(S.filters[p],a.filters[p]))return!1;return S.collectionGroup===a.collectionGroup&&!!S.path.isEqual(a.path)&&!!Wr(S.startAt,a.startAt)&&Wr(S.endAt,a.endAt)}function Ai(S){return eo.isDocumentKey(S.path)&&null===S.collectionGroup&&0===S.filters.length}class Xo{constructor(a,p=null,w=[],P=[],U=null,Q="F",ve=null,Oe=null){this.path=a,this.collectionGroup=p,this.explicitOrderBy=w,this.filters=P,this.limit=U,this.limitType=Q,this.startAt=ve,this.endAt=Oe,this.ce=null,this.le=null,this.he=null}}function gr(S){return new Xo(S)}function jr(S){return 0===S.filters.length&&null===S.limit&&null==S.startAt&&null==S.endAt&&(0===S.explicitOrderBy.length||1===S.explicitOrderBy.length&&S.explicitOrderBy[0].field.isKeyField())}function la(S){return null!==S.collectionGroup}function bl(S){const a=Fn(S);if(null===a.ce){a.ce=[];const p=new Set;for(const U of a.explicitOrderBy)a.ce.push(U),p.add(U.field.canonicalString());const w=a.explicitOrderBy.length>0?a.explicitOrderBy[a.explicitOrderBy.length-1].dir:"asc";(function(Q){let ve=new sa(mo.comparator);return Q.filters.forEach(Oe=>{Oe.getFlattenedFilters().forEach(rt=>{rt.isInequality()&&(ve=ve.add(rt.field))})}),ve})(a).forEach(U=>{p.has(U.canonicalString())||U.isKeyField()||a.ce.push(new Ts(U,w))}),p.has(mo.keyField().canonicalString())||a.ce.push(new Ts(mo.keyField(),w))}return a.ce}function gs(S){const a=Fn(S);return a.le||(a.le=function wl(S,a){if("F"===S.limitType)return an(S.path,S.collectionGroup,a,S.filters,S.limit,S.startAt,S.endAt);{a=a.map(P=>new Ts(P.field,"desc"===P.dir?"asc":"desc"));const p=S.endAt?new cr(S.endAt.position,S.endAt.inclusive):null,w=S.startAt?new cr(S.startAt.position,S.startAt.inclusive):null;return an(S.path,S.collectionGroup,a,S.filters,S.limit,p,w)}}(a,bl(S))),a.le}function $a(S,a){const p=S.filters.concat([a]);return new Xo(S.path,S.collectionGroup,S.explicitOrderBy.slice(),p,S.limit,S.limitType,S.startAt,S.endAt)}function bu(S,a,p){return new Xo(S.path,S.collectionGroup,S.explicitOrderBy.slice(),S.filters.slice(),a,p,S.startAt,S.endAt)}function Ol(S,a){return Un(gs(S),gs(a))&&S.limitType===a.limitType}function sl(S){return`${$n(gs(S))}|lt:${S.limitType}`}function Ca(S){return`Query(target=${function(p){let w=p.path.canonicalString();return null!==p.collectionGroup&&(w+=" collectionGroup="+p.collectionGroup),p.filters.length>0&&(w+=`, filters: [${p.filters.map(P=>Wu(P)).join(", ")}]`),Jt(p.limit)||(w+=", limit: "+p.limit),p.orderBy.length>0&&(w+=`, orderBy: [${p.orderBy.map(P=>{return`${(Q=P).field.canonicalString()} (${Q.dir})`;var Q}).join(", ")}]`),p.startAt&&(w+=", startAt: ",w+=p.startAt.inclusive?"b:":"a:",w+=p.startAt.position.map(P=>kc(P)).join(",")),p.endAt&&(w+=", endAt: ",w+=p.endAt.inclusive?"a:":"b:",w+=p.endAt.position.map(P=>kc(P)).join(",")),`Target(${w})`}(gs(S))}; limitType=${S.limitType})`}function Xe(S,a){return a.isFoundDocument()&&function(w,P){const U=P.key.path;return null!==w.collectionGroup?P.key.hasCollectionId(w.collectionGroup)&&w.path.isPrefixOf(U):eo.isDocumentKey(w.path)?w.path.isEqual(U):w.path.isImmediateParentOf(U)}(S,a)&&function(w,P){for(const U of bl(w))if(!U.field.isKeyField()&&null===P.data.field(U.field))return!1;return!0}(S,a)&&function(w,P){for(const U of w.filters)if(!U.matches(P))return!1;return!0}(S,a)&&(P=a,!((w=S).startAt&&!function(Q,ve,Oe){const rt=Er(Q,ve,Oe);return Q.inclusive?rt<=0:rt<0}(w.startAt,bl(w),P)||w.endAt&&!function(Q,ve,Oe){const rt=Er(Q,ve,Oe);return Q.inclusive?rt>=0:rt>0}(w.endAt,bl(w),P)));var w,P}function _t(S){return(a,p)=>{let w=!1;for(const P of bl(S)){const U=He(P,a,p);if(0!==U)return U;w=w||P.field.isKeyField()}return 0}}function He(S,a,p){const w=S.field.isKeyField()?eo.comparator(a.key,p.key):function(U,Q,ve){const Oe=Q.data.field(U),rt=ve.data.field(U);return null!==Oe&&null!==rt?Ul(Oe,rt):On()}(S.field,a,p);switch(S.dir){case"asc":return w;case"desc":return-1*w;default:return On()}}class Zt{constructor(a,p){this.mapKeyFn=a,this.equalsFn=p,this.inner={},this.innerSize=0}get(a){const p=this.mapKeyFn(a),w=this.inner[p];if(void 0!==w)for(const[P,U]of w)if(this.equalsFn(P,a))return U}has(a){return void 0!==this.get(a)}set(a,p){const w=this.mapKeyFn(a),P=this.inner[w];if(void 0===P)return this.inner[w]=[[a,p]],void this.innerSize++;for(let U=0;U<P.length;U++)if(this.equalsFn(P[U][0],a))return void(P[U]=[a,p]);P.push([a,p]),this.innerSize++}delete(a){const p=this.mapKeyFn(a),w=this.inner[p];if(void 0===w)return!1;for(let P=0;P<w.length;P++)if(this.equalsFn(w[P][0],a))return 1===w.length?delete this.inner[p]:w.splice(P,1),this.innerSize--,!0;return!1}forEach(a){Hi(this.inner,(p,w)=>{for(const[P,U]of w)a(P,U)})}isEmpty(){return Tr(this.inner)}size(){return this.innerSize}}const Vo=new ds(eo.comparator);function dr(){return Vo}const Xa=new ds(eo.comparator);function xl(...S){let a=Xa;for(const p of S)a=a.insert(p.key,p);return a}function Tc(S){let a=Xa;return S.forEach((p,w)=>a=a.insert(p,w.overlayedDocument)),a}function al(){return Gc()}function ws(){return Gc()}function Gc(){return new Zt(S=>S.toString(),(S,a)=>S.isEqual(a))}const Wc=new ds(eo.comparator),Fh=new sa(eo.comparator);function _s(...S){let a=Fh;for(const p of S)a=a.add(p);return a}const Sd=new sa($i);function dh(S,a){if(S.useProto3Json){if(isNaN(a))return{doubleValue:"NaN"};if(a===1/0)return{doubleValue:"Infinity"};if(a===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bn(a)?"-0":a}}function pd(S){return{integerValue:""+S}}function Td(S,a){return function Lt(S){return"number"==typeof S&&Number.isInteger(S)&&!Bn(S)&&S<=Number.MAX_SAFE_INTEGER&&S>=Number.MIN_SAFE_INTEGER}(a)?pd(a):dh(S,a)}class Vh{constructor(){this._=void 0}}function Nc(S,a,p){return S instanceof Xd?function(P,U){const Q={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:P.seconds,nanos:P.nanoseconds}}}};return U&&Hu(U)&&(U=Gu(U)),U&&(Q.fields.__previous_value__=U),{mapValue:Q}}(p,a):S instanceof Md?uu(S,a):S instanceof Xc?H0(S,a):function(P,U){const Q=$h(P,U),ve=_a(Q)+_a(P.Pe);return Lc(Q)&&Lc(P.Pe)?pd(ve):dh(P.serializer,ve)}(S,a)}function w0(S,a,p){return S instanceof Md?uu(S,a):S instanceof Xc?H0(S,a):p}function $h(S,a){return S instanceof As?Lc(w=a)||(U=w)&&"doubleValue"in U?a:{integerValue:0}:null;var w,U}class Xd extends Vh{}class Md extends Vh{constructor(a){super(),this.elements=a}}function uu(S,a){const p=Ad(a);for(const w of S.elements)p.some(P=>Ea(P,w))||p.push(w);return{arrayValue:{values:p}}}class Xc extends Vh{constructor(a){super(),this.elements=a}}function H0(S,a){let p=Ad(a);for(const w of S.elements)p=p.filter(P=>!Ea(P,w));return{arrayValue:{values:p}}}class As extends Vh{constructor(a,p){super(),this.serializer=a,this.Pe=p}}function _a(S){return Pa(S.integerValue||S.doubleValue)}function Ad(S){return Gr(S)&&S.arrayValue.values?S.arrayValue.values.slice():[]}class G0{constructor(a,p){this.version=a,this.transformResults=p}}class Za{constructor(a,p){this.updateTime=a,this.exists=p}static none(){return new Za}static exists(a){return new Za(void 0,a)}static updateTime(a){return new Za(a)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(a){return this.exists===a.exists&&(this.updateTime?!!a.updateTime&&this.updateTime.isEqual(a.updateTime):!a.updateTime)}}function Mc(S,a){return void 0!==S.updateTime?a.isFoundDocument()&&a.version.isEqual(S.updateTime):void 0===S.exists||S.exists===a.isFoundDocument()}class Os{}function x0(S,a){if(!S.hasLocalMutations||a&&0===a.fields.length)return null;if(null===a)return S.isNoDocument()?new Cr(S.key,Za.none()):new Kd(S.key,S.data,Za.none());{const p=S.data,w=co.empty();let P=new sa(mo.comparator);for(let U of a.fields)if(!P.has(U)){let Q=p.field(U);null===Q&&U.length>1&&(U=U.popLast(),Q=p.field(U)),null===Q?w.delete(U):w.set(U,Q),P=P.add(U)}return new Kc(S.key,w,new Fa(P.toArray()),Za.none())}}function I0(S,a,p){S instanceof Kd?function(P,U,Q){const ve=P.value.clone(),Oe=Zs(P.fieldTransforms,U,Q.transformResults);ve.setAll(Oe),U.convertToFoundDocument(Q.version,ve).setHasCommittedMutations()}(S,a,p):S instanceof Kc?function(P,U,Q){if(!Mc(P.precondition,U))return void U.convertToUnknownDocument(Q.version);const ve=Zs(P.fieldTransforms,U,Q.transformResults),Oe=U.data;Oe.setAll(fd(P)),Oe.setAll(ve),U.convertToFoundDocument(Q.version,Oe).setHasCommittedMutations()}(S,a,p):a.convertToNoDocument(p.version).setHasCommittedMutations()}function Hl(S,a,p,w){return S instanceof Kd?function(U,Q,ve,Oe){if(!Mc(U.precondition,Q))return ve;const rt=U.value.clone(),Wt=Pu(U.fieldTransforms,Oe,Q);return rt.setAll(Wt),Q.convertToFoundDocument(Q.version,rt).setHasLocalMutations(),null}(S,a,p,w):S instanceof Kc?function(U,Q,ve,Oe){if(!Mc(U.precondition,Q))return ve;const rt=Pu(U.fieldTransforms,Oe,Q),Wt=Q.data;return Wt.setAll(fd(U)),Wt.setAll(rt),Q.convertToFoundDocument(Q.version,Wt).setHasLocalMutations(),null===ve?null:ve.unionWith(U.fieldMask.fields).unionWith(U.fieldTransforms.map(In=>In.field))}(S,a,p,w):(ve=p,Mc(S.precondition,Q=a)?(Q.convertToNoDocument(Q.version).setHasLocalMutations(),null):ve);var Q,ve}function qu(S,a){let p=null;for(const w of S.fieldTransforms){const P=a.data.field(w.field),U=$h(w.transform,P||null);null!=U&&(null===p&&(p=co.empty()),p.set(w.field,U))}return p||null}function Uh(S,a){return S.type===a.type&&!!S.key.isEqual(a.key)&&!!S.precondition.isEqual(a.precondition)&&(P=a.fieldTransforms,!!(void 0===(w=S.fieldTransforms)&&void 0===P||w&&P&&br(w,P,(U,Q)=>function jh(S,a){return S.field.isEqual(a.field)&&(P=a.transform,(w=S.transform)instanceof Md&&P instanceof Md||w instanceof Xc&&P instanceof Xc?br(w.elements,P.elements,Ea):w instanceof As&&P instanceof As?Ea(w.Pe,P.Pe):w instanceof Xd&&P instanceof Xd);var w,P}(U,Q))))&&(0===S.type?S.value.isEqual(a.value):1!==S.type||S.data.isEqual(a.data)&&S.fieldMask.isEqual(a.fieldMask));var w,P}class Kd extends Os{constructor(a,p,w,P=[]){super(),this.key=a,this.value=p,this.precondition=w,this.fieldTransforms=P,this.type=0}getFieldMask(){return null}}class Kc extends Os{constructor(a,p,w,P,U=[]){super(),this.key=a,this.data=p,this.fieldMask=w,this.precondition=P,this.fieldTransforms=U,this.type=1}getFieldMask(){return this.fieldMask}}function fd(S){const a=new Map;return S.fieldMask.fields.forEach(p=>{if(!p.isEmpty()){const w=S.data.field(p);a.set(p,w)}}),a}function Zs(S,a,p){const w=new Map;Cn(S.length===p.length);for(let P=0;P<p.length;P++){const U=S[P],Q=U.transform,ve=a.data.field(U.field);w.set(U.field,w0(Q,ve,p[P]))}return w}function Pu(S,a,p){const w=new Map;for(const P of S){const U=P.transform,Q=p.data.field(P.field);w.set(P.field,Nc(U,Q,a))}return w}class Cr extends Os{constructor(a,p){super(),this.key=a,this.precondition=p,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dd extends Os{constructor(a,p){super(),this.key=a,this.precondition=p,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xu{constructor(a,p,w,P){this.batchId=a,this.localWriteTime=p,this.baseMutations=w,this.mutations=P}applyToRemoteDocument(a,p){const w=p.mutationResults;for(let P=0;P<this.mutations.length;P++){const U=this.mutations[P];U.key.isEqual(a.key)&&I0(U,a,w[P])}}applyToLocalView(a,p){for(const w of this.baseMutations)w.key.isEqual(a.key)&&(p=Hl(w,a,p,this.localWriteTime));for(const w of this.mutations)w.key.isEqual(a.key)&&(p=Hl(w,a,p,this.localWriteTime));return p}applyToLocalDocumentSet(a,p){const w=ws();return this.mutations.forEach(P=>{const U=a.get(P.key),Q=U.overlayedDocument;let ve=this.applyToLocalView(Q,U.mutatedFields);ve=p.has(P.key)?null:ve;const Oe=x0(Q,ve);null!==Oe&&w.set(P.key,Oe),Q.isValidDocument()||Q.convertToNoDocument(yi.min())}),w}keys(){return this.mutations.reduce((a,p)=>a.add(p.key),_s())}isEqual(a){return this.batchId===a.batchId&&br(this.mutations,a.mutations,(p,w)=>Uh(p,w))&&br(this.baseMutations,a.baseMutations,(p,w)=>Uh(p,w))}}class lc{constructor(a,p,w,P){this.batch=a,this.commitVersion=p,this.mutationResults=w,this.docVersions=P}static from(a,p,w){Cn(a.mutations.length===w.length);let P=function(){return Wc}();const U=a.mutations;for(let Q=0;Q<U.length;Q++)P=P.insert(U[Q].key,w[Q].version);return new lc(a,p,w,P)}}class wu{constructor(a,p){this.largestBatchId=a,this.mutation=p}getKey(){return this.mutation.key}isEqual(a){return null!==a&&this.mutation===a.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fe{constructor(a,p){this.count=a,this.unchangedNames=p}}var Ee,Bt;function Gt(S){if(void 0===S)return Me("GRPC error has no .code"),Ke.UNKNOWN;switch(S){case Ee.OK:return Ke.OK;case Ee.CANCELLED:return Ke.CANCELLED;case Ee.UNKNOWN:return Ke.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return Ke.INTERNAL;case Ee.UNAVAILABLE:return Ke.UNAVAILABLE;case Ee.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case Ee.NOT_FOUND:return Ke.NOT_FOUND;case Ee.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case Ee.ABORTED:return Ke.ABORTED;case Ee.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case Ee.DATA_LOSS:return Ke.DATA_LOSS;default:return On()}}(Bt=Ee||(Ee={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";const Ko=new Xt([4294967295,4294967295],0);function hs(S){const a=function ui(){return new TextEncoder}().encode(S),p=new Ut;return p.update(a),new Uint8Array(p.digest())}function Qs(S){const a=new DataView(S.buffer),p=a.getUint32(0,!0),w=a.getUint32(4,!0),P=a.getUint32(8,!0),U=a.getUint32(12,!0);return[new Xt([p,w],0),new Xt([P,U],0)]}class Js{constructor(a,p,w){if(this.bitmap=a,this.padding=p,this.hashCount=w,p<0||p>=8)throw new Pr(`Invalid padding: ${p}`);if(w<0)throw new Pr(`Invalid hash count: ${w}`);if(a.length>0&&0===this.hashCount)throw new Pr(`Invalid hash count: ${w}`);if(0===a.length&&0!==p)throw new Pr(`Invalid padding when bitmap length is 0: ${p}`);this.Ie=8*a.length-p,this.Te=Xt.fromNumber(this.Ie)}Ee(a,p,w){let P=a.add(p.multiply(Xt.fromNumber(w)));return 1===P.compare(Ko)&&(P=new Xt([P.getBits(0),P.getBits(1)],0)),P.modulo(this.Te).toNumber()}de(a){return!!(this.bitmap[Math.floor(a/8)]&1<<a%8)}mightContain(a){if(0===this.Ie)return!1;const p=hs(a),[w,P]=Qs(p);for(let U=0;U<this.hashCount;U++){const Q=this.Ee(w,P,U);if(!this.de(Q))return!1}return!0}static create(a,p,w){const P=a%8==0?0:8-a%8,U=new Uint8Array(Math.ceil(a/8)),Q=new Js(U,P,p);return w.forEach(ve=>Q.insert(ve)),Q}insert(a){if(0===this.Ie)return;const p=hs(a),[w,P]=Qs(p);for(let U=0;U<this.hashCount;U++){const Q=this.Ee(w,P,U);this.Ae(Q)}}Ae(a){const p=Math.floor(a/8);this.bitmap[p]|=1<<a%8}}class Pr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ta{constructor(a,p,w,P,U){this.snapshotVersion=a,this.targetChanges=p,this.targetMismatches=w,this.documentUpdates=P,this.resolvedLimboDocuments=U}static createSynthesizedRemoteEventForCurrentChange(a,p,w){const P=new Map;return P.set(a,pa.createSynthesizedTargetChangeForCurrentChange(a,p,w)),new Ta(yi.min(),P,new ds($i),dr(),_s())}}class pa{constructor(a,p,w,P,U){this.resumeToken=a,this.current=p,this.addedDocuments=w,this.modifiedDocuments=P,this.removedDocuments=U}static createSynthesizedTargetChangeForCurrentChange(a,p,w){return new pa(w,p,_s(),_s(),_s())}}class Ll{constructor(a,p,w,P){this.Re=a,this.removedTargetIds=p,this.key=w,this.Ve=P}}class Ql{constructor(a,p){this.targetId=a,this.me=p}}class Jl{constructor(a,p,w=Ia.EMPTY_BYTE_STRING,P=null){this.state=a,this.targetIds=p,this.resumeToken=w,this.cause=P}}class Ga{constructor(){this.fe=0,this.ge=Gl(),this.pe=Ia.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(a){a.approximateByteSize()>0&&(this.we=!0,this.pe=a)}Ce(){let a=_s(),p=_s(),w=_s();return this.ge.forEach((P,U)=>{switch(U){case 0:a=a.add(P);break;case 2:p=p.add(P);break;case 1:w=w.add(P);break;default:On()}}),new pa(this.pe,this.ye,a,p,w)}ve(){this.we=!1,this.ge=Gl()}Fe(a,p){this.we=!0,this.ge=this.ge.insert(a,p)}Me(a){this.we=!0,this.ge=this.ge.remove(a)}xe(){this.fe+=1}Oe(){this.fe-=1,Cn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ja{constructor(a){this.Le=a,this.Be=new Map,this.ke=dr(),this.qe=cc(),this.Qe=new ds($i)}Ke(a){for(const p of a.Re)a.Ve&&a.Ve.isFoundDocument()?this.$e(p,a.Ve):this.Ue(p,a.key,a.Ve);for(const p of a.removedTargetIds)this.Ue(p,a.key,a.Ve)}We(a){this.forEachTarget(a,p=>{const w=this.Ge(p);switch(a.state){case 0:this.ze(p)&&w.De(a.resumeToken);break;case 1:w.Oe(),w.Se||w.ve(),w.De(a.resumeToken);break;case 2:w.Oe(),w.Se||this.removeTarget(p);break;case 3:this.ze(p)&&(w.Ne(),w.De(a.resumeToken));break;case 4:this.ze(p)&&(this.je(p),w.De(a.resumeToken));break;default:On()}})}forEachTarget(a,p){a.targetIds.length>0?a.targetIds.forEach(p):this.Be.forEach((w,P)=>{this.ze(P)&&p(P)})}He(a){const p=a.targetId,w=a.me.count,P=this.Je(p);if(P){const U=P.target;if(Ai(U))if(0===w){const Q=new eo(U.path);this.Ue(p,Q,qo.newNoDocument(Q,yi.min()))}else Cn(1===w);else{const Q=this.Ye(p);if(Q!==w){const ve=this.Ze(a),Oe=ve?this.Xe(ve,a,Q):1;0!==Oe&&(this.je(p),this.Qe=this.Qe.insert(p,2===Oe?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(a){const p=a.me.unchangedNames;if(!p||!p.bits)return null;const{bits:{bitmap:w="",padding:P=0},hashCount:U=0}=p;let Q,ve;try{Q=Uc(w).toUint8Array()}catch(Oe){if(Oe instanceof ru)return pn("Decoding the base64 bloom filter in existence filter failed ("+Oe.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw Oe}try{ve=new Js(Q,P,U)}catch(Oe){return pn(Oe instanceof Pr?"BloomFilter error: ":"Applying bloom filter failed: ",Oe),null}return 0===ve.Ie?null:ve}Xe(a,p,w){return p.me.count===w-this.nt(a,p.targetId)?0:2}nt(a,p){const w=this.Le.getRemoteKeysForTarget(p);let P=0;return w.forEach(U=>{const Q=this.Le.tt(),ve=`projects/${Q.projectId}/databases/${Q.database}/documents/${U.path.canonicalString()}`;a.mightContain(ve)||(this.Ue(p,U,null),P++)}),P}rt(a){const p=new Map;this.Be.forEach((U,Q)=>{const ve=this.Je(Q);if(ve){if(U.current&&Ai(ve.target)){const Oe=new eo(ve.target.path);null!==this.ke.get(Oe)||this.it(Q,Oe)||this.Ue(Q,Oe,qo.newNoDocument(Oe,a))}U.be&&(p.set(Q,U.Ce()),U.ve())}});let w=_s();this.qe.forEach((U,Q)=>{let ve=!0;Q.forEachWhile(Oe=>{const rt=this.Je(Oe);return!rt||"TargetPurposeLimboResolution"===rt.purpose||(ve=!1,!1)}),ve&&(w=w.add(U))}),this.ke.forEach((U,Q)=>Q.setReadTime(a));const P=new Ta(a,p,this.Qe,this.ke,w);return this.ke=dr(),this.qe=cc(),this.Qe=new ds($i),P}$e(a,p){if(!this.ze(a))return;const w=this.it(a,p.key)?2:0;this.Ge(a).Fe(p.key,w),this.ke=this.ke.insert(p.key,p),this.qe=this.qe.insert(p.key,this.st(p.key).add(a))}Ue(a,p,w){if(!this.ze(a))return;const P=this.Ge(a);this.it(a,p)?P.Fe(p,1):P.Me(p),this.qe=this.qe.insert(p,this.st(p).delete(a)),w&&(this.ke=this.ke.insert(p,w))}removeTarget(a){this.Be.delete(a)}Ye(a){const p=this.Ge(a).Ce();return this.Le.getRemoteKeysForTarget(a).size+p.addedDocuments.size-p.removedDocuments.size}xe(a){this.Ge(a).xe()}Ge(a){let p=this.Be.get(a);return p||(p=new Ga,this.Be.set(a,p)),p}st(a){let p=this.qe.get(a);return p||(p=new sa($i),this.qe=this.qe.insert(a,p)),p}ze(a){const p=null!==this.Je(a);return p||Ct("WatchChangeAggregator","Detected inactive target",a),p}Je(a){const p=this.Be.get(a);return p&&p.Se?null:this.Le.ot(a)}je(a){this.Be.set(a,new Ga),this.Le.getRemoteKeysForTarget(a).forEach(p=>{this.Ue(a,p,null)})}it(a,p){return this.Le.getRemoteKeysForTarget(a).has(p)}}function cc(){return new ds(eo.comparator)}function Gl(){return new ds(eo.comparator)}const Sl={asc:"ASCENDING",desc:"DESCENDING"},Qa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pd={and:"AND",or:"OR"};class md{constructor(a,p){this.databaseId=a,this.useProto3Json=p}}function Bl(S,a){return S.useProto3Json||Jt(a)?a:{value:a}}function ec(S,a){return S.useProto3Json?`${new Date(1e3*a.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+a.nanoseconds).slice(-9)}Z`:{seconds:""+a.seconds,nanos:a.nanoseconds}}function Ku(S,a){return S.useProto3Json?a.toBase64():a.toUint8Array()}function gd(S,a){return ec(S,a.toTimestamp())}function Ma(S){return Cn(!!S),yi.fromTimestamp(function(p){const w=dl(p);return new Li(w.seconds,w.nanos)}(S))}function vd(S,a){return Fc(S,a).canonicalString()}function Fc(S,a){const p=(P=S,new si(["projects",P.projectId,"databases",P.database])).child("documents");var P;return void 0===a?p:p.child(a)}function Ks(S){const a=si.fromString(S);return Cn(cd(a)),a}function Ru(S,a){return vd(S.databaseId,a.path)}function du(S,a){const p=Ks(a);if(p.get(1)!==S.databaseId.projectId)throw new Ae(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+p.get(1)+" vs "+S.databaseId.projectId);if(p.get(3)!==S.databaseId.database)throw new Ae(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+p.get(3)+" vs "+S.databaseId.database);return new eo(Sh(p))}function vl(S,a){return vd(S.databaseId,a)}function kh(S){return new si(["projects",S.databaseId.projectId,"databases",S.databaseId.database]).canonicalString()}function Sh(S){return Cn(S.length>4&&"documents"===S.get(4)),S.popFirst(5)}function Yu(S,a,p){return{name:Ru(S,a),fields:p.value.mapValue.fields}}function E0(S,a){return{documents:[vl(S,a.path)]}}function Yd(S,a){const p={structuredQuery:{}},w=a.path;let P;null!==a.collectionGroup?(P=w,p.structuredQuery.from=[{collectionId:a.collectionGroup,allDescendants:!0}]):(P=w.popLast(),p.structuredQuery.from=[{collectionId:w.lastSegment()}]),p.parent=vl(S,P);const U=function(rt){if(0!==rt.length)return q0(ts.create(rt,"and"))}(a.filters);U&&(p.structuredQuery.where=U);const Q=function(rt){if(0!==rt.length)return rt.map(Wt=>{return{field:uc((pi=Wt).field),direction:Zd(pi.dir)};var pi})}(a.orderBy);Q&&(p.structuredQuery.orderBy=Q);const ve=Bl(S,a.limit);return null!==ve&&(p.structuredQuery.limit=ve),a.startAt&&(p.structuredQuery.startAt={before:(rt=a.startAt).inclusive,values:rt.position}),a.endAt&&(p.structuredQuery.endAt=function(rt){return{before:!rt.inclusive,values:rt.position}}(a.endAt)),{_t:p,parent:P};var rt}function Q1(S){let a=function Ac(S){const a=Ks(S);return 4===a.length?si.emptyPath():Sh(a)}(S.parent);const p=S.structuredQuery,w=p.from?p.from.length:0;let P=null;if(w>0){Cn(1===w);const Wt=p.from[0];Wt.allDescendants?P=Wt.collectionId:a=a.child(Wt.collectionId)}let U=[];p.where&&(U=function(In){const pi=Yc(In);return pi instanceof ts&&fa(pi)?pi.getFilters():[pi]}(p.where));let Q=[];p.orderBy&&(Q=p.orderBy.map(pi=>{return new Ts(Mh((Wo=pi).field),function(ar){switch(ar){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Wo.direction));var Wo}));let ve=null;p.limit&&(ve=function(In){let pi;return pi="object"==typeof In?In.value:In,Jt(pi)?null:pi}(p.limit));let Oe=null;var In;p.startAt&&(Oe=new cr((In=p.startAt).values||[],!!In.before));let rt=null;return p.endAt&&(rt=function(In){return new cr(In.values||[],!In.before)}(p.endAt)),function hr(S,a,p,w,P,U,Q,ve){return new Xo(S,a,p,w,P,U,Q,ve)}(a,P,Q,U,ve,"F",Oe,rt)}function Yc(S){return void 0!==S.unaryFilter?function(p){switch(p.unaryFilter.op){case"IS_NAN":const w=Mh(p.unaryFilter.field);return Fr.create(w,"==",{doubleValue:NaN});case"IS_NULL":const P=Mh(p.unaryFilter.field);return Fr.create(P,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const U=Mh(p.unaryFilter.field);return Fr.create(U,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const Q=Mh(p.unaryFilter.field);return Fr.create(Q,"!=",{nullValue:"NULL_VALUE"});default:return On()}}(S):void 0!==S.fieldFilter?Fr.create(Mh((p=S).fieldFilter.field),function(P){switch(P){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return On()}}(p.fieldFilter.op),p.fieldFilter.value):void 0!==S.compositeFilter?function(p){return ts.create(p.compositeFilter.filters.map(w=>Yc(w)),function(P){switch(P){case"AND":return"and";case"OR":return"or";default:return On()}}(p.compositeFilter.op))}(S):On();var p}function Zd(S){return Sl[S]}function W0(S){return Qa[S]}function C0(S){return Pd[S]}function uc(S){return{fieldPath:S.canonicalString()}}function Mh(S){return mo.fromServerFormat(S.fieldPath)}function q0(S){return S instanceof Fr?function(p){if("=="===p.op){if(et(p.value))return{unaryFilter:{field:uc(p.field),op:"IS_NAN"}};if(rl(p.value))return{unaryFilter:{field:uc(p.field),op:"IS_NULL"}}}else if("!="===p.op){if(et(p.value))return{unaryFilter:{field:uc(p.field),op:"IS_NOT_NAN"}};if(rl(p.value))return{unaryFilter:{field:uc(p.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uc(p.field),op:W0(p.op),value:p.value}}}(S):S instanceof ts?function(p){const w=p.getFilters().map(P=>q0(P));return 1===w.length?w[0]:{compositeFilter:{op:C0(p.op),filters:w}}}(S):On()}function k0(S){const a=[];return S.fields.forEach(p=>a.push(p.canonicalString())),{fieldPaths:a}}function cd(S){return S.length>=4&&"projects"===S.get(0)&&"databases"===S.get(2)}class _d{constructor(a,p,w,P,U=yi.min(),Q=yi.min(),ve=Ia.EMPTY_BYTE_STRING,Oe=null){this.target=a,this.targetId=p,this.purpose=w,this.sequenceNumber=P,this.snapshotVersion=U,this.lastLimboFreeSnapshotVersion=Q,this.resumeToken=ve,this.expectedCount=Oe}withSequenceNumber(a){return new _d(this.target,this.targetId,this.purpose,a,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(a,p){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,p,this.lastLimboFreeSnapshotVersion,a,null)}withExpectedCount(a){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,a)}withLastLimboFreeSnapshotVersion(a){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,a,this.resumeToken,this.expectedCount)}}class m1{constructor(a){this.ct=a}}function oe(S){const a=Q1({parent:S.parent,structuredQuery:S.structuredQuery});return"LAST"===S.limitType?bu(a,a.limit,"L"):a}class Ei{constructor(){}Pt(a,p){this.It(a,p),p.Tt()}It(a,p){if("nullValue"in a)this.Et(p,5);else if("booleanValue"in a)this.Et(p,10),p.dt(a.booleanValue?1:0);else if("integerValue"in a)this.Et(p,15),p.dt(Pa(a.integerValue));else if("doubleValue"in a){const w=Pa(a.doubleValue);isNaN(w)?this.Et(p,13):(this.Et(p,15),Bn(w)?p.dt(0):p.dt(w))}else if("timestampValue"in a){let w=a.timestampValue;this.Et(p,20),"string"==typeof w&&(w=dl(w)),p.At(`${w.seconds||""}`),p.dt(w.nanos||0)}else if("stringValue"in a)this.Rt(a.stringValue,p),this.Vt(p);else if("bytesValue"in a)this.Et(p,30),p.ft(Uc(a.bytesValue)),this.Vt(p);else if("referenceValue"in a)this.gt(a.referenceValue,p);else if("geoPointValue"in a){const w=a.geoPointValue;this.Et(p,45),p.dt(w.latitude||0),p.dt(w.longitude||0)}else"mapValue"in a?Zn(a)?this.Et(p,Number.MAX_SAFE_INTEGER):(this.yt(a.mapValue,p),this.Vt(p)):"arrayValue"in a?(this.wt(a.arrayValue,p),this.Vt(p)):On()}Rt(a,p){this.Et(p,25),this.St(a,p)}St(a,p){p.At(a)}yt(a,p){const w=a.fields||{};this.Et(p,55);for(const P of Object.keys(w))this.Rt(P,p),this.It(w[P],p)}wt(a,p){const w=a.values||[];this.Et(p,50);for(const P of w)this.It(P,p)}gt(a,p){this.Et(p,37),eo.fromName(a).path.forEach(w=>{this.Et(p,60),this.St(w,p)})}Et(a,p){a.dt(p)}Vt(a){a.dt(2)}}Ei.bt=new Ei;class hh{constructor(){this._n=new Wh}addToCollectionParentIndex(a,p){return this._n.add(p),ni.resolve()}getCollectionParents(a,p){return ni.resolve(this._n.getEntries(p))}addFieldIndex(a,p){return ni.resolve()}deleteFieldIndex(a,p){return ni.resolve()}deleteAllFieldIndexes(a){return ni.resolve()}createTargetIndexes(a,p){return ni.resolve()}getDocumentsMatchingTarget(a,p){return ni.resolve(null)}getIndexType(a,p){return ni.resolve(0)}getFieldIndexes(a,p){return ni.resolve([])}getNextCollectionGroupToUpdate(a){return ni.resolve(null)}getMinOffset(a,p){return ni.resolve(Ho.min())}getMinOffsetFromCollectionGroup(a,p){return ni.resolve(Ho.min())}updateCollectionGroup(a,p,w){return ni.resolve()}updateIndexEntries(a,p){return ni.resolve()}}class Wh{constructor(){this.index={}}add(a){const p=a.lastSegment(),w=a.popLast(),P=this.index[p]||new sa(si.comparator),U=!P.has(w);return this.index[p]=P.add(w),U}has(a){const p=a.lastSegment(),w=a.popLast(),P=this.index[p];return P&&P.has(w)}getEntries(a){return(this.index[a]||new sa(si.comparator)).toArray()}}new Uint8Array(0);class Qc{constructor(a,p,w){this.cacheSizeCollectionThreshold=a,this.percentileToCollect=p,this.maximumSequenceNumbersToCollect=w}static withCacheSize(a){return new Qc(a,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Qc.DEFAULT_COLLECTION_PERCENTILE=10,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qc.DEFAULT=new Qc(41943040,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qc.DISABLED=new Qc(-1,0,0);class fh{constructor(a){this.On=a}next(){return this.On+=2,this.On}static Nn(){return new fh(0)}static Ln(){return new fh(-1)}}class _l{constructor(){this.changes=new Zt(a=>a.toString(),(a,p)=>a.isEqual(p)),this.changesApplied=!1}addEntry(a){this.assertNotApplied(),this.changes.set(a.key,a)}removeEntry(a,p){this.assertNotApplied(),this.changes.set(a,qo.newInvalidDocument(a).setReadTime(p))}getEntry(a,p){this.assertNotApplied();const w=this.changes.get(p);return void 0!==w?ni.resolve(w):this.getFromCache(a,p)}getEntries(a,p){return this.getAllFromCache(a,p)}apply(a){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(a)}assertNotApplied(){}}class Kh{constructor(a,p){this.overlayedDocument=a,this.mutatedFields=p}}class Yh{constructor(a,p,w,P){this.remoteDocumentCache=a,this.mutationQueue=p,this.documentOverlayCache=w,this.indexManager=P}getDocument(a,p){let w=null;return this.documentOverlayCache.getOverlay(a,p).next(P=>(w=P,this.remoteDocumentCache.getEntry(a,p))).next(P=>(null!==w&&Hl(w.mutation,P,Fa.empty(),Li.now()),P))}getDocuments(a,p){return this.remoteDocumentCache.getEntries(a,p).next(w=>this.getLocalViewOfDocuments(a,w,_s()).next(()=>w))}getLocalViewOfDocuments(a,p,w=_s()){const P=al();return this.populateOverlays(a,P,p).next(()=>this.computeViews(a,p,P,w).next(U=>{let Q=xl();return U.forEach((ve,Oe)=>{Q=Q.insert(ve,Oe.overlayedDocument)}),Q}))}getOverlayedDocuments(a,p){const w=al();return this.populateOverlays(a,w,p).next(()=>this.computeViews(a,p,w,_s()))}populateOverlays(a,p,w){const P=[];return w.forEach(U=>{p.has(U)||P.push(U)}),this.documentOverlayCache.getOverlays(a,P).next(U=>{U.forEach((Q,ve)=>{p.set(Q,ve)})})}computeViews(a,p,w,P){let U=dr();const Q=Gc(),ve=Gc();return p.forEach((Oe,rt)=>{const Wt=w.get(rt.key);P.has(rt.key)&&(void 0===Wt||Wt.mutation instanceof Kc)?U=U.insert(rt.key,rt):void 0!==Wt?(Q.set(rt.key,Wt.mutation.getFieldMask()),Hl(Wt.mutation,rt,Wt.mutation.getFieldMask(),Li.now())):Q.set(rt.key,Fa.empty())}),this.recalculateAndSaveOverlays(a,U).next(Oe=>(Oe.forEach((rt,Wt)=>Q.set(rt,Wt)),p.forEach((rt,Wt)=>{var In;return ve.set(rt,new Kh(Wt,null!==(In=Q.get(rt))&&void 0!==In?In:null))}),ve))}recalculateAndSaveOverlays(a,p){const w=Gc();let P=new ds((Q,ve)=>Q-ve),U=_s();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(a,p).next(Q=>{for(const ve of Q)ve.keys().forEach(Oe=>{const rt=p.get(Oe);if(null===rt)return;let Wt=w.get(Oe)||Fa.empty();Wt=ve.applyToLocalView(rt,Wt),w.set(Oe,Wt);const In=(P.get(ve.batchId)||_s()).add(Oe);P=P.insert(ve.batchId,In)})}).next(()=>{const Q=[],ve=P.getReverseIterator();for(;ve.hasNext();){const Oe=ve.getNext(),rt=Oe.key,Wt=Oe.value,In=ws();Wt.forEach(pi=>{if(!U.has(pi)){const no=x0(p.get(pi),w.get(pi));null!==no&&In.set(pi,no),U=U.add(pi)}}),Q.push(this.documentOverlayCache.saveOverlays(a,rt,In))}return ni.waitFor(Q)}).next(()=>w)}recalculateAndSaveOverlaysForDocumentKeys(a,p){return this.remoteDocumentCache.getEntries(a,p).next(w=>this.recalculateAndSaveOverlays(a,w))}getDocumentsMatchingQuery(a,p,w,P){return eo.isDocumentKey((Q=p).path)&&null===Q.collectionGroup&&0===Q.filters.length?this.getDocumentsMatchingDocumentQuery(a,p.path):la(p)?this.getDocumentsMatchingCollectionGroupQuery(a,p,w,P):this.getDocumentsMatchingCollectionQuery(a,p,w,P);var Q}getNextDocuments(a,p,w,P){return this.remoteDocumentCache.getAllFromCollectionGroup(a,p,w,P).next(U=>{const Q=P-U.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(a,p,w.largestBatchId,P-U.size):ni.resolve(al());let ve=-1,Oe=U;return Q.next(rt=>ni.forEach(rt,(Wt,In)=>(ve<In.largestBatchId&&(ve=In.largestBatchId),U.get(Wt)?ni.resolve():this.remoteDocumentCache.getEntry(a,Wt).next(pi=>{Oe=Oe.insert(Wt,pi)}))).next(()=>this.populateOverlays(a,rt,U)).next(()=>this.computeViews(a,Oe,rt,_s())).next(Wt=>({batchId:ve,changes:Tc(Wt)})))})}getDocumentsMatchingDocumentQuery(a,p){return this.getDocument(a,new eo(p)).next(w=>{let P=xl();return w.isFoundDocument()&&(P=P.insert(w.key,w)),P})}getDocumentsMatchingCollectionGroupQuery(a,p,w,P){const U=p.collectionGroup;let Q=xl();return this.indexManager.getCollectionParents(a,U).next(ve=>ni.forEach(ve,Oe=>{const rt=(In=p,pi=Oe.child(U),new Xo(pi,null,In.explicitOrderBy.slice(),In.filters.slice(),In.limit,In.limitType,In.startAt,In.endAt));var In,pi;return this.getDocumentsMatchingCollectionQuery(a,rt,w,P).next(Wt=>{Wt.forEach((In,pi)=>{Q=Q.insert(In,pi)})})}).next(()=>Q))}getDocumentsMatchingCollectionQuery(a,p,w,P){let U;return this.documentOverlayCache.getOverlaysForCollection(a,p.path,w.largestBatchId).next(Q=>(U=Q,this.remoteDocumentCache.getDocumentsMatchingQuery(a,p,w,U,P))).next(Q=>{U.forEach((Oe,rt)=>{const Wt=rt.getKey();null===Q.get(Wt)&&(Q=Q.insert(Wt,qo.newInvalidDocument(Wt)))});let ve=xl();return Q.forEach((Oe,rt)=>{const Wt=U.get(Oe);void 0!==Wt&&Hl(Wt.mutation,rt,Fa.empty(),Li.now()),Xe(p,rt)&&(ve=ve.insert(Oe,rt))}),ve})}}class pu{constructor(a){this.serializer=a,this.cr=new Map,this.lr=new Map}getBundleMetadata(a,p){return ni.resolve(this.cr.get(p))}saveBundleMetadata(a,p){return this.cr.set(p.id,{id:(P=p).id,version:P.version,createTime:Ma(P.createTime)}),ni.resolve();var P}getNamedQuery(a,p){return ni.resolve(this.lr.get(p))}saveNamedQuery(a,p){return this.lr.set(p.name,{name:(P=p).name,query:oe(P.bundledQuery),readTime:Ma(P.readTime)}),ni.resolve();var P}}class dc{constructor(){this.overlays=new ds(eo.comparator),this.hr=new Map}getOverlay(a,p){return ni.resolve(this.overlays.get(p))}getOverlays(a,p){const w=al();return ni.forEach(p,P=>this.getOverlay(a,P).next(U=>{null!==U&&w.set(P,U)})).next(()=>w)}saveOverlays(a,p,w){return w.forEach((P,U)=>{this.ht(a,p,U)}),ni.resolve()}removeOverlaysForBatchId(a,p,w){const P=this.hr.get(w);return void 0!==P&&(P.forEach(U=>this.overlays=this.overlays.remove(U)),this.hr.delete(w)),ni.resolve()}getOverlaysForCollection(a,p,w){const P=al(),U=p.length+1,Q=new eo(p.child("")),ve=this.overlays.getIteratorFrom(Q);for(;ve.hasNext();){const Oe=ve.getNext().value,rt=Oe.getKey();if(!p.isPrefixOf(rt.path))break;rt.path.length===U&&Oe.largestBatchId>w&&P.set(Oe.getKey(),Oe)}return ni.resolve(P)}getOverlaysForCollectionGroup(a,p,w,P){let U=new ds((rt,Wt)=>rt-Wt);const Q=this.overlays.getIterator();for(;Q.hasNext();){const rt=Q.getNext().value;if(rt.getKey().getCollectionGroup()===p&&rt.largestBatchId>w){let Wt=U.get(rt.largestBatchId);null===Wt&&(Wt=al(),U=U.insert(rt.largestBatchId,Wt)),Wt.set(rt.getKey(),rt)}}const ve=al(),Oe=U.getIterator();for(;Oe.hasNext()&&(Oe.getNext().value.forEach((rt,Wt)=>ve.set(rt,Wt)),!(ve.size()>=P)););return ni.resolve(ve)}ht(a,p,w){const P=this.overlays.get(w.key);if(null!==P){const Q=this.hr.get(P.largestBatchId).delete(w.key);this.hr.set(P.largestBatchId,Q)}this.overlays=this.overlays.insert(w.key,new wu(p,w));let U=this.hr.get(p);void 0===U&&(U=_s(),this.hr.set(p,U)),this.hr.set(p,U.add(w.key))}}class Ld{constructor(){this.Pr=new sa(Vl.Ir),this.Tr=new sa(Vl.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(a,p){const w=new Vl(a,p);this.Pr=this.Pr.add(w),this.Tr=this.Tr.add(w)}dr(a,p){a.forEach(w=>this.addReference(w,p))}removeReference(a,p){this.Ar(new Vl(a,p))}Rr(a,p){a.forEach(w=>this.removeReference(w,p))}Vr(a){const p=new eo(new si([])),w=new Vl(p,a),P=new Vl(p,a+1),U=[];return this.Tr.forEachInRange([w,P],Q=>{this.Ar(Q),U.push(Q.key)}),U}mr(){this.Pr.forEach(a=>this.Ar(a))}Ar(a){this.Pr=this.Pr.delete(a),this.Tr=this.Tr.delete(a)}gr(a){const p=new eo(new si([])),w=new Vl(p,a),P=new Vl(p,a+1);let U=_s();return this.Tr.forEachInRange([w,P],Q=>{U=U.add(Q.key)}),U}containsKey(a){const p=new Vl(a,0),w=this.Pr.firstAfterOrEqual(p);return null!==w&&a.isEqual(w.key)}}class Vl{constructor(a,p){this.key=a,this.pr=p}static Ir(a,p){return eo.comparator(a.key,p.key)||$i(a.pr,p.pr)}static Er(a,p){return $i(a.pr,p.pr)||eo.comparator(a.key,p.key)}}class ih{constructor(a,p){this.indexManager=a,this.referenceDelegate=p,this.mutationQueue=[],this.yr=1,this.wr=new sa(Vl.Ir)}checkEmpty(a){return ni.resolve(0===this.mutationQueue.length)}addMutationBatch(a,p,w,P){const U=this.yr;this.yr++;const Q=new Xu(U,p,w,P);this.mutationQueue.push(Q);for(const ve of P)this.wr=this.wr.add(new Vl(ve.key,U)),this.indexManager.addToCollectionParentIndex(a,ve.key.path.popLast());return ni.resolve(Q)}lookupMutationBatch(a,p){return ni.resolve(this.Sr(p))}getNextMutationBatchAfterBatchId(a,p){const P=this.br(p+1),U=P<0?0:P;return ni.resolve(this.mutationQueue.length>U?this.mutationQueue[U]:null)}getHighestUnacknowledgedBatchId(){return ni.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(a){return ni.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(a,p){const w=new Vl(p,0),P=new Vl(p,Number.POSITIVE_INFINITY),U=[];return this.wr.forEachInRange([w,P],Q=>{const ve=this.Sr(Q.pr);U.push(ve)}),ni.resolve(U)}getAllMutationBatchesAffectingDocumentKeys(a,p){let w=new sa($i);return p.forEach(P=>{const U=new Vl(P,0),Q=new Vl(P,Number.POSITIVE_INFINITY);this.wr.forEachInRange([U,Q],ve=>{w=w.add(ve.pr)})}),ni.resolve(this.Dr(w))}getAllMutationBatchesAffectingQuery(a,p){const w=p.path,P=w.length+1;let U=w;eo.isDocumentKey(U)||(U=U.child(""));const Q=new Vl(new eo(U),0);let ve=new sa($i);return this.wr.forEachWhile(Oe=>{const rt=Oe.key.path;return!!w.isPrefixOf(rt)&&(rt.length===P&&(ve=ve.add(Oe.pr)),!0)},Q),ni.resolve(this.Dr(ve))}Dr(a){const p=[];return a.forEach(w=>{const P=this.Sr(w);null!==P&&p.push(P)}),p}removeMutationBatch(a,p){Cn(0===this.Cr(p.batchId,"removed")),this.mutationQueue.shift();let w=this.wr;return ni.forEach(p.mutations,P=>{const U=new Vl(P.key,p.batchId);return w=w.delete(U),this.referenceDelegate.markPotentiallyOrphaned(a,P.key)}).next(()=>{this.wr=w})}Mn(a){}containsKey(a,p){const w=new Vl(p,0),P=this.wr.firstAfterOrEqual(w);return ni.resolve(p.isEqual(P&&P.key))}performConsistencyCheck(a){return ni.resolve()}Cr(a,p){return this.br(a)}br(a){return 0===this.mutationQueue.length?0:a-this.mutationQueue[0].batchId}Sr(a){const p=this.br(a);return p<0||p>=this.mutationQueue.length?null:this.mutationQueue[p]}}class J0{constructor(a){this.vr=a,this.docs=new ds(eo.comparator),this.size=0}setIndexManager(a){this.indexManager=a}addEntry(a,p){const w=p.key,P=this.docs.get(w),U=P?P.size:0,Q=this.vr(p);return this.docs=this.docs.insert(w,{document:p.mutableCopy(),size:Q}),this.size+=Q-U,this.indexManager.addToCollectionParentIndex(a,w.path.popLast())}removeEntry(a){const p=this.docs.get(a);p&&(this.docs=this.docs.remove(a),this.size-=p.size)}getEntry(a,p){const w=this.docs.get(p);return ni.resolve(w?w.document.mutableCopy():qo.newInvalidDocument(p))}getEntries(a,p){let w=dr();return p.forEach(P=>{const U=this.docs.get(P);w=w.insert(P,U?U.document.mutableCopy():qo.newInvalidDocument(P))}),ni.resolve(w)}getDocumentsMatchingQuery(a,p,w,P){let U=dr();const Q=p.path,ve=new eo(Q.child("")),Oe=this.docs.getIteratorFrom(ve);for(;Oe.hasNext();){const{key:rt,value:{document:Wt}}=Oe.getNext();if(!Q.isPrefixOf(rt.path))break;rt.path.length>Q.length+1||Nr(new Ho((S=Wt).readTime,S.key,-1),w)<=0||(P.has(Wt.key)||Xe(p,Wt))&&(U=U.insert(Wt.key,Wt.mutableCopy()))}var S;return ni.resolve(U)}getAllFromCollectionGroup(a,p,w,P){On()}Fr(a,p){return ni.forEach(this.docs,w=>p(w))}newChangeBuffer(a){return new v1(this)}getSize(a){return ni.resolve(this.size)}}class v1 extends _l{constructor(a){super(),this.ar=a}applyChanges(a){const p=[];return this.changes.forEach((w,P)=>{P.isValidDocument()?p.push(this.ar.addEntry(a,P)):this.ar.removeEntry(w)}),ni.waitFor(p)}getFromCache(a,p){return this.ar.getEntry(a,p)}getAllFromCache(a,p){return this.ar.getEntries(a,p)}}class Zh{constructor(a){this.persistence=a,this.Mr=new Zt(p=>$n(p),Un),this.lastRemoteSnapshotVersion=yi.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ld,this.targetCount=0,this.Lr=fh.Nn()}forEachTarget(a,p){return this.Mr.forEach((w,P)=>p(P)),ni.resolve()}getLastRemoteSnapshotVersion(a){return ni.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(a){return ni.resolve(this.Or)}allocateTargetId(a){return this.highestTargetId=this.Lr.next(),ni.resolve(this.highestTargetId)}setTargetsMetadata(a,p,w){return w&&(this.lastRemoteSnapshotVersion=w),p>this.Or&&(this.Or=p),ni.resolve()}qn(a){this.Mr.set(a.target,a);const p=a.targetId;p>this.highestTargetId&&(this.Lr=new fh(p),this.highestTargetId=p),a.sequenceNumber>this.Or&&(this.Or=a.sequenceNumber)}addTargetData(a,p){return this.qn(p),this.targetCount+=1,ni.resolve()}updateTargetData(a,p){return this.qn(p),ni.resolve()}removeTargetData(a,p){return this.Mr.delete(p.target),this.Nr.Vr(p.targetId),this.targetCount-=1,ni.resolve()}removeTargets(a,p,w){let P=0;const U=[];return this.Mr.forEach((Q,ve)=>{ve.sequenceNumber<=p&&null===w.get(ve.targetId)&&(this.Mr.delete(Q),U.push(this.removeMatchingKeysForTargetId(a,ve.targetId)),P++)}),ni.waitFor(U).next(()=>P)}getTargetCount(a){return ni.resolve(this.targetCount)}getTargetData(a,p){const w=this.Mr.get(p)||null;return ni.resolve(w)}addMatchingKeys(a,p,w){return this.Nr.dr(p,w),ni.resolve()}removeMatchingKeys(a,p,w){this.Nr.Rr(p,w);const P=this.persistence.referenceDelegate,U=[];return P&&p.forEach(Q=>{U.push(P.markPotentiallyOrphaned(a,Q))}),ni.waitFor(U)}removeMatchingKeysForTargetId(a,p){return this.Nr.Vr(p),ni.resolve()}getMatchingKeysForTargetId(a,p){const w=this.Nr.gr(p);return ni.resolve(w)}containsKey(a,p){return ni.resolve(this.Nr.containsKey(p))}}class Bd{constructor(a,p){this.Br={},this.overlays={},this.kr=new Mt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=a(this),this.Qr=new Zh(this),this.indexManager=new hh,this.remoteDocumentCache=new J0(w=>this.referenceDelegate.Kr(w)),this.serializer=new m1(p),this.$r=new pu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(a){return this.indexManager}getDocumentOverlayCache(a){let p=this.overlays[a.toKey()];return p||(p=new dc,this.overlays[a.toKey()]=p),p}getMutationQueue(a,p){let w=this.Br[a.toKey()];return w||(w=new ih(p,this.referenceDelegate),this.Br[a.toKey()]=w),w}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(a,p,w){Ct("MemoryPersistence","Starting transaction:",a);const P=new Vc(this.kr.next());return this.referenceDelegate.Ur(),w(P).next(U=>this.referenceDelegate.Wr(P).next(()=>U)).toPromise().then(U=>(P.raiseOnCommittedEvent(),U))}Gr(a,p){return ni.or(Object.values(this.Br).map(w=>()=>w.containsKey(a,p)))}}class Vc extends _r{constructor(a){super(),this.currentSequenceNumber=a}}class ns{constructor(a){this.persistence=a,this.zr=new Ld,this.jr=null}static Hr(a){return new ns(a)}get Jr(){if(this.jr)return this.jr;throw On()}addReference(a,p,w){return this.zr.addReference(w,p),this.Jr.delete(w.toString()),ni.resolve()}removeReference(a,p,w){return this.zr.removeReference(w,p),this.Jr.add(w.toString()),ni.resolve()}markPotentiallyOrphaned(a,p){return this.Jr.add(p.toString()),ni.resolve()}removeTarget(a,p){this.zr.Vr(p.targetId).forEach(P=>this.Jr.add(P.toString()));const w=this.persistence.getTargetCache();return w.getMatchingKeysForTargetId(a,p.targetId).next(P=>{P.forEach(U=>this.Jr.add(U.toString()))}).next(()=>w.removeTargetData(a,p))}Ur(){this.jr=new Set}Wr(a){const p=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ni.forEach(this.Jr,w=>{const P=eo.fromPath(w);return this.Yr(a,P).next(U=>{U||p.removeEntry(P,yi.min())})}).next(()=>(this.jr=null,p.apply(a)))}updateLimboDocument(a,p){return this.Yr(a,p).next(w=>{w?this.Jr.delete(p.toString()):this.Jr.add(p.toString())})}Kr(a){return 0}Yr(a,p){return ni.or([()=>ni.resolve(this.zr.containsKey(p)),()=>this.persistence.getTargetCache().containsKey(a,p),()=>this.persistence.Gr(a,p)])}}class fu{constructor(a,p,w,P){this.targetId=a,this.fromCache=p,this.qi=w,this.Qi=P}static Ki(a,p){let w=_s(),P=_s();for(const U of p.docChanges)switch(U.type){case 0:w=w.add(U.doc.key);break;case 1:P=P.add(U.doc.key)}return new fu(a,p.fromCache,w,P)}}class Rh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(a){this._documentReadCount+=a}}class zh{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,qe.nr)()?8:function Xs(S){const a=S.match(/Android ([\d.]+)/i),p=a?a[1].split(".").slice(0,2).join("."):"-1";return Number(p)}((0,qe.ZQ)())>0?6:4}initialize(a,p){this.zi=a,this.indexManager=p,this.$i=!0}getDocumentsMatchingQuery(a,p,w,P){const U={result:null};return this.ji(a,p).next(Q=>{U.result=Q}).next(()=>{if(!U.result)return this.Hi(a,p,P,w).next(Q=>{U.result=Q})}).next(()=>{if(U.result)return;const Q=new Rh;return this.Ji(a,p,Q).next(ve=>{if(U.result=ve,this.Ui)return this.Yi(a,p,Q,ve.size)})}).next(()=>U.result)}Yi(a,p,w,P){return w.documentReadCount<this.Wi?(Pn()<=l.$b.DEBUG&&Ct("QueryEngine","SDK will not create cache indexes for query:",Ca(p),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ni.resolve()):(Pn()<=l.$b.DEBUG&&Ct("QueryEngine","Query:",Ca(p),"scans",w.documentReadCount,"local documents and returns",P,"documents as results."),w.documentReadCount>this.Gi*P?(Pn()<=l.$b.DEBUG&&Ct("QueryEngine","The SDK decides to create cache indexes for query:",Ca(p),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(a,gs(p))):ni.resolve())}ji(a,p){if(jr(p))return ni.resolve(null);let w=gs(p);return this.indexManager.getIndexType(a,w).next(P=>0===P?null:(null!==p.limit&&1===P&&(p=bu(p,null,"F"),w=gs(p)),this.indexManager.getDocumentsMatchingTarget(a,w).next(U=>{const Q=_s(...U);return this.zi.getDocuments(a,Q).next(ve=>this.indexManager.getMinOffset(a,w).next(Oe=>{const rt=this.Zi(p,ve);return this.Xi(p,rt,Q,Oe.readTime)?this.ji(a,bu(p,null,"F")):this.es(a,rt,p,Oe)}))})))}Hi(a,p,w,P){return jr(p)||P.isEqual(yi.min())?ni.resolve(null):this.zi.getDocuments(a,w).next(U=>{const Q=this.Zi(p,U);return this.Xi(p,Q,w,P)?ni.resolve(null):(Pn()<=l.$b.DEBUG&&Ct("QueryEngine","Re-using previous result from %s to execute query: %s",P.toString(),Ca(p)),this.es(a,Q,p,function Kr(S,a){const p=S.toTimestamp().seconds,w=S.toTimestamp().nanoseconds+1,P=yi.fromTimestamp(1e9===w?new Li(p+1,0):new Li(p,w));return new Ho(P,eo.empty(),a)}(P,-1)).next(ve=>ve))})}Zi(a,p){let w=new sa(_t(a));return p.forEach((P,U)=>{Xe(a,U)&&(w=w.add(U))}),w}Xi(a,p,w,P){if(null===a.limit)return!1;if(w.size!==p.size)return!0;const U="F"===a.limitType?p.last():p.first();return!!U&&(U.hasPendingWrites||U.version.compareTo(P)>0)}Ji(a,p,w){return Pn()<=l.$b.DEBUG&&Ct("QueryEngine","Using full collection scan to execute query:",Ca(p)),this.zi.getDocumentsMatchingQuery(a,p,Ho.min(),w)}es(a,p,w,P){return this.zi.getDocumentsMatchingQuery(a,w,P).next(U=>(p.forEach(Q=>{U=U.insert(Q.key,Q)}),U))}}class z0{constructor(a,p,w,P){this.persistence=a,this.ts=p,this.serializer=P,this.ns=new ds($i),this.rs=new Zt(U=>$n(U),Un),this.ss=new Map,this.os=a.getRemoteDocumentCache(),this.Qr=a.getTargetCache(),this.$r=a.getBundleCache(),this._s(w)}_s(a){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(a),this.indexManager=this.persistence.getIndexManager(a),this.mutationQueue=this.persistence.getMutationQueue(a,this.indexManager),this.localDocuments=new Yh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(a){return this.persistence.runTransaction("Collect garbage","readwrite-primary",p=>a.collect(p,this.ns))}}function r(S,a){return d.apply(this,arguments)}function d(){return(d=(0,V.A)(function*(S,a){const p=Fn(S);return yield p.persistence.runTransaction("Handle user change","readonly",w=>{let P;return p.mutationQueue.getAllMutationBatches(w).next(U=>(P=U,p._s(a),p.mutationQueue.getAllMutationBatches(w))).next(U=>{const Q=[],ve=[];let Oe=_s();for(const rt of P){Q.push(rt.batchId);for(const Wt of rt.mutations)Oe=Oe.add(Wt.key)}for(const rt of U){ve.push(rt.batchId);for(const Wt of rt.mutations)Oe=Oe.add(Wt.key)}return p.localDocuments.getDocuments(w,Oe).next(rt=>({us:rt,removedBatchIds:Q,addedBatchIds:ve}))})})})).apply(this,arguments)}function M(S){const a=Fn(S);return a.persistence.runTransaction("Get last remote snapshot version","readonly",p=>a.Qr.getLastRemoteSnapshotVersion(p))}function H(S,a){const p=Fn(S);return p.persistence.runTransaction("Get next mutation batch","readonly",w=>(void 0===a&&(a=-1),p.mutationQueue.getNextMutationBatchAfterBatchId(w,a)))}function re(S,a,p){return he.apply(this,arguments)}function he(){return(he=(0,V.A)(function*(S,a,p){const w=Fn(S),P=w.ns.get(a),U=p?"readwrite":"readwrite-primary";try{p||(yield w.persistence.runTransaction("Release target",U,Q=>w.persistence.referenceDelegate.removeTarget(Q,P)))}catch(Q){if(!Wi(Q))throw Q;Ct("LocalStore",`Failed to update sequence numbers for target ${a}: ${Q}`)}w.ns=w.ns.remove(a),w.rs.delete(P.target)})).apply(this,arguments)}function ye(S,a,p){const w=Fn(S);let P=yi.min(),U=_s();return w.persistence.runTransaction("Execute query","readwrite",Q=>function(Oe,rt,Wt){const In=Fn(Oe),pi=In.rs.get(Wt);return void 0!==pi?ni.resolve(In.ns.get(pi)):In.Qr.getTargetData(rt,Wt)}(w,Q,gs(a)).next(ve=>{if(ve)return P=ve.lastLimboFreeSnapshotVersion,w.Qr.getMatchingKeysForTargetId(Q,ve.targetId).next(Oe=>{U=Oe})}).next(()=>w.ts.getDocumentsMatchingQuery(Q,a,p?P:yi.min(),p?U:_s())).next(ve=>(function Qe(S,a,p){let w=S.ss.get(a)||yi.min();p.forEach((P,U)=>{U.readTime.compareTo(w)>0&&(w=U.readTime)}),S.ss.set(a,w)}(w,function ke(S){return S.collectionGroup||(S.path.length%2==1?S.path.lastSegment():S.path.get(S.path.length-2))}(a),ve),{documents:ve,hs:U})))}class Sn{constructor(){this.activeTargetIds=function qc(){return Sd}()}As(a){this.activeTargetIds=this.activeTargetIds.add(a)}Rs(a){this.activeTargetIds=this.activeTargetIds.delete(a)}ds(){const a={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(a)}}class Dn{constructor(){this.no=new Sn,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(a){}updateMutationState(a,p,w){}addLocalQueryTarget(a){return this.no.As(a),this.ro[a]||"not-current"}updateQueryState(a,p,w){this.ro[a]=p}removeLocalQueryTarget(a){this.no.Rs(a)}isLocalQueryTarget(a){return this.no.activeTargetIds.has(a)}clearQueryState(a){delete this.ro[a]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(a){return this.no.activeTargetIds.has(a)}start(){return this.no=new Sn,Promise.resolve()}handleUserChange(a,p,w){}setOnlineState(a){}shutdown(){}writeSequenceNumber(a){}notifyBundleLoaded(a){}}class gn{io(a){}shutdown(){}}class bi{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(a){this.uo.push(a)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const a of this.uo)a(0)}ao(){Ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const a of this.uo)a(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let io=null;function ro(){return null===io?io=268435456+Math.round(2147483648*Math.random()):io++,"0x"+io.toString(16)}const te={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L{constructor(a){this.lo=a.lo,this.ho=a.ho}Po(a){this.Io=a}To(a){this.Eo=a}Ao(a){this.Ro=a}onMessage(a){this.Vo=a}close(){this.ho()}send(a){this.lo(a)}mo(){this.Io()}fo(){this.Eo()}po(a){this.Ro(a)}yo(a){this.Vo(a)}}const j="WebChannelConnection";class ie extends class{constructor(p){this.databaseInfo=p,this.databaseId=p.databaseId;const w=p.ssl?"https":"http",P=encodeURIComponent(this.databaseId.projectId),U=encodeURIComponent(this.databaseId.database);this.wo=w+"://"+p.host,this.So=`projects/${P}/databases/${U}`,this.bo="(default)"===this.databaseId.database?`project_id=${P}`:`project_id=${P}&database_id=${U}`}get Do(){return!1}Co(p,w,P,U,Q){const ve=ro(),Oe=this.vo(p,w.toUriEncodedString());Ct("RestConnection",`Sending RPC '${p}' ${ve}:`,Oe,P);const rt={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(rt,U,Q),this.Mo(p,Oe,rt,P).then(Wt=>(Ct("RestConnection",`Received RPC '${p}' ${ve}: `,Wt),Wt),Wt=>{throw pn("RestConnection",`RPC '${p}' ${ve} failed with error: `,Wt,"url: ",Oe,"request:",P),Wt})}xo(p,w,P,U,Q,ve){return this.Co(p,w,P,U,Q)}Fo(p,w,P){p["X-Goog-Api-Client"]="gl-js/ fire/"+Ot,p["Content-Type"]="text/plain",this.databaseInfo.appId&&(p["X-Firebase-GMPID"]=this.databaseInfo.appId),w&&w.headers.forEach((U,Q)=>p[Q]=U),P&&P.headers.forEach((U,Q)=>p[Q]=U)}vo(p,w){return`${this.wo}/v1/${w}:${te[p]}`}terminate(){}}{constructor(a){super(a),this.forceLongPolling=a.forceLongPolling,this.autoDetectLongPolling=a.autoDetectLongPolling,this.useFetchStreams=a.useFetchStreams,this.longPollingOptions=a.longPollingOptions}Mo(a,p,w,P){const U=ro();return new Promise((Q,ve)=>{const Oe=new At;Oe.setWithCredentials(!0),Oe.listenOnce(un.COMPLETE,()=>{try{switch(Oe.getLastErrorCode()){case xn.NO_ERROR:const Wt=Oe.getResponseJson();Ct(j,`XHR for RPC '${a}' ${U} received:`,JSON.stringify(Wt)),Q(Wt);break;case xn.TIMEOUT:Ct(j,`RPC '${a}' ${U} timed out`),ve(new Ae(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case xn.HTTP_ERROR:const In=Oe.getStatus();if(Ct(j,`RPC '${a}' ${U} failed with status:`,In,"response text:",Oe.getResponseText()),In>0){let pi=Oe.getResponseJson();Array.isArray(pi)&&(pi=pi[0]);const no=null==pi?void 0:pi.error;if(no&&no.status&&no.message){const Wo=function(ar){const Ps=ar.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(Ps)>=0?Ps:Ke.UNKNOWN}(no.status);ve(new Ae(Wo,no.message))}else ve(new Ae(Ke.UNKNOWN,"Server responded with status "+Oe.getStatus()))}else ve(new Ae(Ke.UNAVAILABLE,"Connection failed."));break;default:On()}}finally{Ct(j,`RPC '${a}' ${U} completed.`)}});const rt=JSON.stringify(P);Ct(j,`RPC '${a}' ${U} sending request:`,P),Oe.send(p,"POST",rt,w,15)})}Oo(a,p,w){const P=ro(),U=[this.wo,"/","google.firestore.v1.Firestore","/",a,"/channel"],Q=An(),ve=Jn(),Oe={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},rt=this.longPollingOptions.timeoutSeconds;void 0!==rt&&(Oe.longPollingTimeout=Math.round(1e3*rt)),this.useFetchStreams&&(Oe.xmlHttpFactory=new Ht({})),this.Fo(Oe.initMessageHeaders,p,w),Oe.encodeInitMessageHeaders=!0;const Wt=U.join("");Ct(j,`Creating RPC '${a}' stream ${P}: ${Wt}`,Oe);const In=Q.createWebChannel(Wt,Oe);let pi=!1,no=!1;const Wo=new L({lo:ar=>{no?Ct(j,`Not sending because RPC '${a}' stream ${P} is closed:`,ar):(pi||(Ct(j,`Opening RPC '${a}' stream ${P} transport.`),In.open(),pi=!0),Ct(j,`RPC '${a}' stream ${P} sending:`,ar),In.send(ar))},ho:()=>In.close()}),Ir=(ar,Ps,Bs)=>{ar.listen(Ps,Fs=>{try{Bs(Fs)}catch(Aa){setTimeout(()=>{throw Aa},0)}})};return Ir(In,vt.EventType.OPEN,()=>{no||(Ct(j,`RPC '${a}' stream ${P} transport opened.`),Wo.mo())}),Ir(In,vt.EventType.CLOSE,()=>{no||(no=!0,Ct(j,`RPC '${a}' stream ${P} transport closed`),Wo.po())}),Ir(In,vt.EventType.ERROR,ar=>{no||(no=!0,pn(j,`RPC '${a}' stream ${P} transport errored:`,ar),Wo.po(new Ae(Ke.UNAVAILABLE,"The operation could not be completed")))}),Ir(In,vt.EventType.MESSAGE,ar=>{var Ps;if(!no){const Bs=ar.data[0];Cn(!!Bs);const Aa=Bs.error||(null===(Ps=Bs[0])||void 0===Ps?void 0:Ps.error);if(Aa){Ct(j,`RPC '${a}' stream ${P} received error:`,Aa);const Al=Aa.status;let qa=function(wi){const Ni=Ee[wi];if(void 0!==Ni)return Gt(Ni)}(Al),Oi=Aa.message;void 0===qa&&(qa=Ke.INTERNAL,Oi="Unknown error status: "+Al+" with message "+Aa.message),no=!0,Wo.po(new Ae(qa,Oi)),In.close()}else Ct(j,`RPC '${a}' stream ${P} received:`,Bs),Wo.yo(Bs)}}),Ir(ve,ht.STAT_EVENT,ar=>{ar.stat===on.PROXY?Ct(j,`RPC '${a}' stream ${P} detected buffering proxy`):ar.stat===on.NOPROXY&&Ct(j,`RPC '${a}' stream ${P} detected no buffering proxy`)}),setTimeout(()=>{Wo.fo()},0),Wo}}function at(){return typeof document<"u"?document:null}function ln(S){return new md(S,!0)}class hn{constructor(a,p,w=1e3,P=1.5,U=6e4){this.oi=a,this.timerId=p,this.No=w,this.Lo=P,this.Bo=U,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(a){this.cancel();const p=Math.floor(this.ko+this.Uo()),w=Math.max(0,Date.now()-this.Qo),P=Math.max(0,p-w);P>0&&Ct("ExponentialBackoff",`Backing off for ${P} ms (base delay: ${this.ko} ms, delay with jitter: ${p} ms, last attempt: ${w} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,P,()=>(this.Qo=Date.now(),a())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Qn{constructor(a,p,w,P,U,Q,ve,Oe){this.oi=a,this.Go=w,this.zo=P,this.connection=U,this.authCredentialsProvider=Q,this.appCheckCredentialsProvider=ve,this.listener=Oe,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new hn(a,p)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var a=this;return(0,V.A)(function*(){a.Zo()&&(yield a.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(a){this.s_(),this.stream.send(a)}r_(){var a=this;return(0,V.A)(function*(){if(a.Xo())return a.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(a,p){var w=this;return(0,V.A)(function*(){w.s_(),w.o_(),w.Yo.cancel(),w.jo++,4!==a?w.Yo.reset():p&&p.code===Ke.RESOURCE_EXHAUSTED?(Me(p.toString()),Me("Using maximum backoff delay to prevent overloading the backend."),w.Yo.Ko()):p&&p.code===Ke.UNAUTHENTICATED&&3!==w.state&&(w.authCredentialsProvider.invalidateToken(),w.appCheckCredentialsProvider.invalidateToken()),null!==w.stream&&(w.__(),w.stream.close(),w.stream=null),w.state=a,yield w.listener.Ao(p)})()}__(){}auth(){this.state=1;const a=this.a_(this.jo),p=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([w,P])=>{this.jo===p&&this.u_(w,P)},w=>{a(()=>{const P=new Ae(Ke.UNKNOWN,"Fetching auth token failed: "+w.message);return this.c_(P)})})}u_(a,p){const w=this.a_(this.jo);this.stream=this.l_(a,p),this.stream.Po(()=>{w(()=>this.listener.Po())}),this.stream.To(()=>{w(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(P=>{w(()=>this.c_(P))}),this.stream.onMessage(P=>{w(()=>this.onMessage(P))})}e_(){var a=this;this.state=5,this.Yo.$o((0,V.A)(function*(){a.state=0,a.start()}))}c_(a){return Ct("PersistentStream",`close with error: ${a}`),this.stream=null,this.close(4,a)}a_(a){return p=>{this.oi.enqueueAndForget(()=>this.jo===a?p():(Ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wn extends Qn{constructor(a,p,w,P,U,Q){super(a,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",p,w,P,Q),this.serializer=U}l_(a,p){return this.connection.Oo("Listen",a,p)}onMessage(a){this.Yo.reset();const p=function zu(S,a){let p;if("targetChange"in a){const w="NO_CHANGE"===(rt=a.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===rt?1:"REMOVE"===rt?2:"CURRENT"===rt?3:"RESET"===rt?4:On(),P=a.targetChange.targetIds||[],U=function(rt,Wt){return rt.useProto3Json?(Cn(void 0===Wt||"string"==typeof Wt),Ia.fromBase64String(Wt||"")):(Cn(void 0===Wt||Wt instanceof Buffer||Wt instanceof Uint8Array),Ia.fromUint8Array(Wt||new Uint8Array))}(S,a.targetChange.resumeToken),Q=a.targetChange.cause,ve=Q&&function(rt){const Wt=void 0===rt.code?Ke.UNKNOWN:Gt(rt.code);return new Ae(Wt,rt.message||"")}(Q);p=new Jl(w,P,U,ve||null)}else if("documentChange"in a){const w=a.documentChange,P=du(S,w.document.name),U=Ma(w.document.updateTime),Q=w.document.createTime?Ma(w.document.createTime):yi.min(),ve=new co({mapValue:{fields:w.document.fields}}),Oe=qo.newFoundDocument(P,U,Q,ve);p=new Ll(w.targetIds||[],w.removedTargetIds||[],Oe.key,Oe)}else if("documentDelete"in a){const w=a.documentDelete,P=du(S,w.document),U=w.readTime?Ma(w.readTime):yi.min(),Q=qo.newNoDocument(P,U);p=new Ll([],w.removedTargetIds||[],Q.key,Q)}else if("documentRemove"in a){const w=a.documentRemove,P=du(S,w.document);p=new Ll([],w.removedTargetIds||[],P,null)}else{if(!("filter"in a))return On();{const w=a.filter,{count:P=0,unchangedNames:U}=w,Q=new fe(P,U);p=new Ql(w.targetId,Q)}}var rt;return p}(this.serializer,a),w=function(U){if(!("targetChange"in U))return yi.min();const Q=U.targetChange;return Q.targetIds&&Q.targetIds.length?yi.min():Q.readTime?Ma(Q.readTime):yi.min()}(a);return this.listener.h_(p,w)}P_(a){const p={};p.database=kh(this.serializer),p.addTarget=function(U,Q){let ve;const Oe=Q.target;if(ve=Ai(Oe)?{documents:E0(U,Oe)}:{query:Yd(U,Oe)._t},ve.targetId=Q.targetId,Q.resumeToken.approximateByteSize()>0){ve.resumeToken=Ku(U,Q.resumeToken);const rt=Bl(U,Q.expectedCount);null!==rt&&(ve.expectedCount=rt)}else if(Q.snapshotVersion.compareTo(yi.min())>0){ve.readTime=ec(U,Q.snapshotVersion.toTimestamp());const rt=Bl(U,Q.expectedCount);null!==rt&&(ve.expectedCount=rt)}return ve}(this.serializer,a);const w=function Th(S,a){const p=function(P){switch(P){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return On()}}(a.purpose);return null==p?null:{"goog-listen-tags":p}}(0,a);w&&(p.labels=w),this.i_(p)}I_(a){const p={};p.database=kh(this.serializer),p.removeTarget=a,this.i_(p)}}class Yi extends Qn{constructor(a,p,w,P,U,Q){super(a,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",p,w,P,Q),this.serializer=U,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(a,p){return this.connection.Oo("Write",a,p)}onMessage(a){if(Cn(!!a.streamToken),this.lastStreamToken=a.streamToken,this.T_){this.Yo.reset();const p=function Ws(S,a){return S&&S.length>0?(Cn(void 0!==a),S.map(p=>function(P,U){let Q=Ma(P.updateTime?P.updateTime:U);return Q.isEqual(yi.min())&&(Q=Ma(U)),new G0(Q,P.transformResults||[])}(p,a))):[]}(a.writeResults,a.commitTime),w=Ma(a.commitTime);return this.listener.A_(w,p)}return Cn(!a.writeResults||0===a.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const a={};a.database=kh(this.serializer),this.i_(a)}d_(a){const p={streamToken:this.lastStreamToken,writes:a.map(w=>function Rd(S,a){let p;if(a instanceof Kd)p={update:Yu(S,a.key,a.value)};else if(a instanceof Cr)p={delete:Ru(S,a.key)};else if(a instanceof Kc)p={update:Yu(S,a.key,a.data),updateMask:k0(a.fieldMask)};else{if(!(a instanceof Dd))return On();p={verify:Ru(S,a.key)}}return a.fieldTransforms.length>0&&(p.updateTransforms=a.fieldTransforms.map(w=>function(U,Q){const ve=Q.transform;if(ve instanceof Xd)return{fieldPath:Q.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(ve instanceof Md)return{fieldPath:Q.field.canonicalString(),appendMissingElements:{values:ve.elements}};if(ve instanceof Xc)return{fieldPath:Q.field.canonicalString(),removeAllFromArray:{values:ve.elements}};if(ve instanceof As)return{fieldPath:Q.field.canonicalString(),increment:ve.Pe};throw On()}(0,w))),a.precondition.isNone||(p.currentDocument=void 0!==(U=a.precondition).updateTime?{updateTime:gd(S,U.updateTime)}:void 0!==U.exists?{exists:U.exists}:On()),p;var U}(this.serializer,w))};this.i_(p)}}class yr extends class{}{constructor(a,p,w,P){super(),this.authCredentials=a,this.appCheckCredentials=p,this.connection=w,this.serializer=P,this.m_=!1}f_(){if(this.m_)throw new Ae(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}Co(a,p,w,P){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([U,Q])=>this.connection.Co(a,Fc(p,w),P,U,Q)).catch(U=>{throw"FirebaseError"===U.name?(U.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),U):new Ae(Ke.UNKNOWN,U.toString())})}xo(a,p,w,P,U){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([Q,ve])=>this.connection.xo(a,Fc(p,w),P,Q,ve,U)).catch(Q=>{throw"FirebaseError"===Q.name?(Q.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),Q):new Ae(Ke.UNKNOWN,Q.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Sr{constructor(a,p){this.asyncQueue=a,this.onlineStateHandler=p,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(a){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${a.toString()}`),this.S_("Offline")))}set(a){this.C_(),this.g_=0,"Online"===a&&(this.y_=!1),this.S_(a)}S_(a){a!==this.state&&(this.state=a,this.onlineStateHandler(a))}b_(a){const p=`Could not reach Cloud Firestore backend. ${a}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Me(p),this.y_=!1):Ct("OnlineStateTracker",p)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class $r{constructor(a,p,w,P,U){var Q=this;this.localStore=a,this.datastore=p,this.asyncQueue=w,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=U,this.O_.io(ve=>{w.enqueueAndForget((0,V.A)(function*(){var Oe;ia(Q)&&(Ct("RemoteStore","Restarting streams for network reachability change."),yield(Oe=(0,V.A)(function*(Wt){const In=Fn(Wt);In.M_.add(4),yield Ds(In),In.N_.set("Unknown"),In.M_.delete(4),yield is(In)}),function rt(Wt){return Oe.apply(this,arguments)})(Q))}))}),this.N_=new Sr(w,P)}}function is(S){return tl.apply(this,arguments)}function tl(){return(tl=(0,V.A)(function*(S){if(ia(S))for(const a of S.x_)yield a(!0)})).apply(this,arguments)}function Ds(S){return os.apply(this,arguments)}function os(){return(os=(0,V.A)(function*(S){for(const a of S.x_)yield a(!1)})).apply(this,arguments)}function ea(S,a){const p=Fn(S);p.F_.has(a.targetId)||(p.F_.set(a.targetId,a),ll(p)?ya(p):_h(p).Xo()&&js(p,a))}function na(S,a){const p=Fn(S),w=_h(p);p.F_.delete(a),w.Xo()&&fs(p,a),0===p.F_.size&&(w.Xo()?w.n_():ia(p)&&p.N_.set("Unknown"))}function js(S,a){if(S.L_.xe(a.targetId),a.resumeToken.approximateByteSize()>0||a.snapshotVersion.compareTo(yi.min())>0){const p=S.remoteSyncer.getRemoteKeysForTarget(a.targetId).size;a=a.withExpectedCount(p)}_h(S).P_(a)}function fs(S,a){S.L_.xe(a),_h(S).I_(a)}function ya(S){S.L_=new ja({getRemoteKeysForTarget:a=>S.remoteSyncer.getRemoteKeysForTarget(a),ot:a=>S.F_.get(a)||null,tt:()=>S.datastore.serializer.databaseId}),_h(S).start(),S.N_.w_()}function ll(S){return ia(S)&&!_h(S).Zo()&&S.F_.size>0}function ia(S){return 0===Fn(S).M_.size}function ba(S){S.L_=void 0}function Ki(S){return er.apply(this,arguments)}function er(){return(er=(0,V.A)(function*(S){S.N_.set("Online")})).apply(this,arguments)}function us(S){return ma.apply(this,arguments)}function ma(){return(ma=(0,V.A)(function*(S){S.F_.forEach((a,p)=>{js(S,a)})})).apply(this,arguments)}function ai(S,a){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,V.A)(function*(S,a){ba(S),ll(S)?(S.N_.D_(a),ya(S)):S.N_.set("Unknown")})).apply(this,arguments)}function Id(S,a,p){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,V.A)(function*(S,a,p){if(S.N_.set("Online"),a instanceof Jl&&2===a.state&&a.cause)try{yield(w=(0,V.A)(function*(U,Q){const ve=Q.cause;for(const Oe of Q.targetIds)U.F_.has(Oe)&&(yield U.remoteSyncer.rejectListen(Oe,ve),U.F_.delete(Oe),U.L_.removeTarget(Oe))}),function P(U,Q){return w.apply(this,arguments)})(S,a)}catch(w){Ct("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),w),yield Lu(S,w)}else if(a instanceof Ll?S.L_.Ke(a):a instanceof Ql?S.L_.He(a):S.L_.We(a),!p.isEqual(yi.min()))try{const w=yield M(S.localStore);p.compareTo(w)>=0&&(yield function(U,Q){const ve=U.L_.rt(Q);return ve.targetChanges.forEach((Oe,rt)=>{if(Oe.resumeToken.approximateByteSize()>0){const Wt=U.F_.get(rt);Wt&&U.F_.set(rt,Wt.withResumeToken(Oe.resumeToken,Q))}}),ve.targetMismatches.forEach((Oe,rt)=>{const Wt=U.F_.get(Oe);if(!Wt)return;U.F_.set(Oe,Wt.withResumeToken(Ia.EMPTY_BYTE_STRING,Wt.snapshotVersion)),fs(U,Oe);const In=new _d(Wt.target,Oe,rt,Wt.sequenceNumber);js(U,In)}),U.remoteSyncer.applyRemoteEvent(ve)}(S,p))}catch(w){Ct("RemoteStore","Failed to raise snapshot:",w),yield Lu(S,w)}var w}),Iu.apply(this,arguments)}function Lu(S,a,p){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,V.A)(function*(S,a,p){if(!Wi(a))throw a;S.M_.add(1),yield Ds(S),S.N_.set("Offline"),p||(p=()=>M(S.localStore)),S.asyncQueue.enqueueRetryable((0,V.A)(function*(){Ct("RemoteStore","Retrying IndexedDB access"),yield p(),S.M_.delete(1),yield is(S)}))})).apply(this,arguments)}function O0(S,a){return a().catch(p=>Lu(S,p,a))}function Ka(S){return e1.apply(this,arguments)}function e1(){return(e1=(0,V.A)(function*(S){const a=Fn(S),p=Eu(a);let w=a.v_.length>0?a.v_[a.v_.length-1].batchId:-1;for(;_1(a);)try{const P=yield H(a.localStore,w);if(null===P){0===a.v_.length&&p.n_();break}w=P.batchId,O1(a,P)}catch(P){yield Lu(a,P)}Jh(a)&&y1(a)})).apply(this,arguments)}function _1(S){return ia(S)&&S.v_.length<10}function O1(S,a){S.v_.push(a);const p=Eu(S);p.Xo()&&p.E_&&p.d_(a.mutations)}function Jh(S){return ia(S)&&!Eu(S).Zo()&&S.v_.length>0}function y1(S){Eu(S).start()}function Mo(S){return ua.apply(this,arguments)}function ua(){return(ua=(0,V.A)(function*(S){Eu(S).V_()})).apply(this,arguments)}function tp(S){return t1.apply(this,arguments)}function t1(){return(t1=(0,V.A)(function*(S){const a=Eu(S);for(const p of S.v_)a.d_(p.mutations)})).apply(this,arguments)}function yl(S,a,p){return ed.apply(this,arguments)}function ed(){return(ed=(0,V.A)(function*(S,a,p){const w=S.v_.shift(),P=lc.from(w,a,p);yield O0(S,()=>S.remoteSyncer.applySuccessfulWrite(P)),yield Ka(S)})).apply(this,arguments)}function Bu(S,a){return nl.apply(this,arguments)}function nl(){return nl=(0,V.A)(function*(S,a){var p;a&&Eu(S).E_&&(yield(p=(0,V.A)(function*(P,U){if(function Ce(S){switch(S){default:return On();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}(ve=U.code)&&ve!==Ke.ABORTED){const Q=P.v_.shift();Eu(P).t_(),yield O0(P,()=>P.remoteSyncer.rejectFailedWrite(Q.batchId,U)),yield Ka(P)}var ve}),function w(P,U){return p.apply(this,arguments)})(S,a)),Jh(S)&&y1(S)}),nl.apply(this,arguments)}function kp(S,a){return np.apply(this,arguments)}function np(){return(np=(0,V.A)(function*(S,a){const p=Fn(S);p.asyncQueue.verifyOperationInProgress(),Ct("RemoteStore","RemoteStore received new credentials");const w=ia(p);p.M_.add(3),yield Ds(p),w&&p.N_.set("Unknown"),yield p.remoteSyncer.handleCredentialChange(a),p.M_.delete(3),yield is(p)})).apply(this,arguments)}function cl(S,a){return wa.apply(this,arguments)}function wa(){return(wa=(0,V.A)(function*(S,a){const p=Fn(S);a?(p.M_.delete(2),yield is(p)):a||(p.M_.add(2),yield Ds(p),p.N_.set("Unknown"))})).apply(this,arguments)}function _h(S){return S.B_||(S.B_=function(p,w,P){const U=Fn(p);return U.f_(),new Wn(w,U.connection,U.authCredentials,U.appCheckCredentials,U.serializer,P)}(S.datastore,S.asyncQueue,{Po:Ki.bind(null,S),To:us.bind(null,S),Ao:ai.bind(null,S),h_:Id.bind(null,S)}),S.x_.push(function(){var a=(0,V.A)(function*(p){p?(S.B_.t_(),ll(S)?ya(S):S.N_.set("Unknown")):(yield S.B_.stop(),ba(S))});return function(p){return a.apply(this,arguments)}}())),S.B_}function Eu(S){return S.k_||(S.k_=function(p,w,P){const U=Fn(p);return U.f_(),new Yi(w,U.connection,U.authCredentials,U.appCheckCredentials,U.serializer,P)}(S.datastore,S.asyncQueue,{Po:()=>Promise.resolve(),To:Mo.bind(null,S),Ao:Bu.bind(null,S),R_:tp.bind(null,S),A_:yl.bind(null,S)}),S.x_.push(function(){var a=(0,V.A)(function*(p){p?(S.k_.t_(),yield Ka(S)):(yield S.k_.stop(),S.v_.length>0&&(Ct("RemoteStore",`Stopping write stream with ${S.v_.length} pending writes`),S.v_=[]))});return function(p){return a.apply(this,arguments)}}())),S.k_}class sf{constructor(a,p,w,P,U){this.asyncQueue=a,this.timerId=p,this.targetTimeMs=w,this.op=P,this.removalCallback=U,this.deferred=new Ge,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(Q=>{})}get promise(){return this.deferred.promise}static createAndSchedule(a,p,w,P,U){const Q=Date.now()+w,ve=new sf(a,p,Q,P,U);return ve.start(w),ve}start(a){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),a)}skipDelay(){return this.handleDelayElapsed()}cancel(a){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(Ke.CANCELLED,"Operation cancelled"+(a?": "+a:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(a=>this.deferred.resolve(a))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function e0(S,a){if(Me("AsyncQueue",`${a}: ${S}`),Wi(S))return new Ae(Ke.UNAVAILABLE,`${a}: ${S}`);throw S}class Cu{constructor(a){this.comparator=a?(p,w)=>a(p,w)||eo.comparator(p.key,w.key):(p,w)=>eo.comparator(p.key,w.key),this.keyedMap=xl(),this.sortedSet=new ds(this.comparator)}static emptySet(a){return new Cu(a.comparator)}has(a){return null!=this.keyedMap.get(a)}get(a){return this.keyedMap.get(a)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(a){const p=this.keyedMap.get(a);return p?this.sortedSet.indexOf(p):-1}get size(){return this.sortedSet.size}forEach(a){this.sortedSet.inorderTraversal((p,w)=>(a(p),!1))}add(a){const p=this.delete(a.key);return p.copy(p.keyedMap.insert(a.key,a),p.sortedSet.insert(a,null))}delete(a){const p=this.get(a);return p?this.copy(this.keyedMap.remove(a),this.sortedSet.remove(p)):this}isEqual(a){if(!(a instanceof Cu)||this.size!==a.size)return!1;const p=this.sortedSet.getIterator(),w=a.sortedSet.getIterator();for(;p.hasNext();){const P=p.getNext().key,U=w.getNext().key;if(!P.isEqual(U))return!1}return!0}toString(){const a=[];return this.forEach(p=>{a.push(p.toString())}),0===a.length?"DocumentSet ()":"DocumentSet (\n  "+a.join("  \n")+"\n)"}copy(a,p){const w=new Cu;return w.comparator=this.comparator,w.keyedMap=a,w.sortedSet=p,w}}class ku{constructor(){this.q_=new ds(eo.comparator)}track(a){const p=a.doc.key,w=this.q_.get(p);w?0!==a.type&&3===w.type?this.q_=this.q_.insert(p,a):3===a.type&&1!==w.type?this.q_=this.q_.insert(p,{type:w.type,doc:a.doc}):2===a.type&&2===w.type?this.q_=this.q_.insert(p,{type:2,doc:a.doc}):2===a.type&&0===w.type?this.q_=this.q_.insert(p,{type:0,doc:a.doc}):1===a.type&&0===w.type?this.q_=this.q_.remove(p):1===a.type&&2===w.type?this.q_=this.q_.insert(p,{type:1,doc:w.doc}):0===a.type&&1===w.type?this.q_=this.q_.insert(p,{type:2,doc:a.doc}):On():this.q_=this.q_.insert(p,a)}Q_(){const a=[];return this.q_.inorderTraversal((p,w)=>{a.push(w)}),a}}class oh{constructor(a,p,w,P,U,Q,ve,Oe,rt){this.query=a,this.docs=p,this.oldDocs=w,this.docChanges=P,this.mutatedKeys=U,this.fromCache=Q,this.syncStateChanged=ve,this.excludesMetadataChanges=Oe,this.hasCachedResults=rt}static fromInitialDocuments(a,p,w,P,U){const Q=[];return p.forEach(ve=>{Q.push({type:0,doc:ve})}),new oh(a,p,Cu.emptySet(p),Q,w,P,!0,!1,U)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(a){if(!(this.fromCache===a.fromCache&&this.hasCachedResults===a.hasCachedResults&&this.syncStateChanged===a.syncStateChanged&&this.mutatedKeys.isEqual(a.mutatedKeys)&&Ol(this.query,a.query)&&this.docs.isEqual(a.docs)&&this.oldDocs.isEqual(a.oldDocs)))return!1;const p=this.docChanges,w=a.docChanges;if(p.length!==w.length)return!1;for(let P=0;P<p.length;P++)if(p[P].type!==w[P].type||!p[P].doc.isEqual(w[P].doc))return!1;return!0}}class mu{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(a=>a.G_())}}class Il{constructor(){this.queries=new Zt(a=>sl(a),Ol),this.onlineState="Unknown",this.z_=new Set}}function Sp(S,a){return hc.apply(this,arguments)}function hc(){return(hc=(0,V.A)(function*(S,a){const p=Fn(S);let w=3;const P=a.query;let U=p.queries.get(P);U?!U.W_()&&a.G_()&&(w=2):(U=new mu,w=a.G_()?0:1);try{switch(w){case 0:U.K_=yield p.onListen(P,!0);break;case 1:U.K_=yield p.onListen(P,!1);break;case 2:yield p.onFirstRemoteStoreListen(P)}}catch(Q){const ve=e0(Q,`Initialization of query '${Ca(a.query)}' failed`);return void a.onError(ve)}p.queries.set(P,U),U.U_.push(a),a.j_(p.onlineState),U.K_&&a.H_(U.K_)&&t0(p)})).apply(this,arguments)}function L0(S,a){return b1.apply(this,arguments)}function b1(){return(b1=(0,V.A)(function*(S,a){const p=Fn(S),w=a.query;let P=3;const U=p.queries.get(w);if(U){const Q=U.U_.indexOf(a);Q>=0&&(U.U_.splice(Q,1),0===U.U_.length?P=a.G_()?0:1:!U.W_()&&a.G_()&&(P=2))}switch(P){case 0:return p.queries.delete(w),p.onUnlisten(w,!0);case 1:return p.queries.delete(w),p.onUnlisten(w,!1);case 2:return p.onLastRemoteStoreUnlisten(w);default:return}})).apply(this,arguments)}function n1(S,a){const p=Fn(S);let w=!1;for(const P of a){const Q=p.queries.get(P.query);if(Q){for(const ve of Q.U_)ve.H_(P)&&(w=!0);Q.K_=P}}w&&t0(p)}function yc(S,a,p){const w=Fn(S),P=w.queries.get(a);if(P)for(const U of P.U_)U.onError(p);w.queries.delete(a)}function t0(S){S.z_.forEach(a=>{a.next()})}var w1,L1;(L1=w1||(w1={})).J_="default",L1.Cache="cache";class af{constructor(a,p,w){this.query=a,this.Y_=p,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=w||{}}H_(a){if(!this.options.includeMetadataChanges){const w=[];for(const P of a.docChanges)3!==P.type&&w.push(P);a=new oh(a.query,a.docs,a.oldDocs,w,a.mutatedKeys,a.fromCache,a.syncStateChanged,!0,a.hasCachedResults)}let p=!1;return this.Z_?this.ea(a)&&(this.Y_.next(a),p=!0):this.ta(a,this.onlineState)&&(this.na(a),p=!0),this.X_=a,p}onError(a){this.Y_.error(a)}j_(a){this.onlineState=a;let p=!1;return this.X_&&!this.Z_&&this.ta(this.X_,a)&&(this.na(this.X_),p=!0),p}ta(a,p){return!a.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==p))&&(!a.docs.isEmpty()||a.hasCachedResults||"Offline"===p)}ea(a){return a.docChanges.length>0||!!(a.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==a.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(a){a=oh.fromInitialDocuments(a.query,a.docs,a.mutatedKeys,a.fromCache,a.hasCachedResults),this.Z_=!0,this.Y_.next(a)}G_(){return this.options.source!==w1.Cache}}class wc{constructor(a){this.key=a}}class o0{constructor(a){this.key=a}}class eu{constructor(a,p){this.query=a,this.la=p,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=_s(),this.mutatedKeys=_s(),this.Ia=_t(a),this.Ta=new Cu(this.Ia)}get Ea(){return this.la}da(a,p){const w=p?p.Aa:new ku,P=p?p.Ta:this.Ta;let U=p?p.mutatedKeys:this.mutatedKeys,Q=P,ve=!1;const Oe="F"===this.query.limitType&&P.size===this.query.limit?P.last():null,rt="L"===this.query.limitType&&P.size===this.query.limit?P.first():null;if(a.inorderTraversal((Wt,In)=>{const pi=P.get(Wt),no=Xe(this.query,In)?In:null,Wo=!!pi&&this.mutatedKeys.has(pi.key),Ir=!!no&&(no.hasLocalMutations||this.mutatedKeys.has(no.key)&&no.hasCommittedMutations);let ar=!1;pi&&no?pi.data.isEqual(no.data)?Wo!==Ir&&(w.track({type:3,doc:no}),ar=!0):this.Ra(pi,no)||(w.track({type:2,doc:no}),ar=!0,(Oe&&this.Ia(no,Oe)>0||rt&&this.Ia(no,rt)<0)&&(ve=!0)):!pi&&no?(w.track({type:0,doc:no}),ar=!0):pi&&!no&&(w.track({type:1,doc:pi}),ar=!0,(Oe||rt)&&(ve=!0)),ar&&(no?(Q=Q.add(no),U=Ir?U.add(Wt):U.delete(Wt)):(Q=Q.delete(Wt),U=U.delete(Wt)))}),null!==this.query.limit)for(;Q.size>this.query.limit;){const Wt="F"===this.query.limitType?Q.last():Q.first();Q=Q.delete(Wt.key),U=U.delete(Wt.key),w.track({type:1,doc:Wt})}return{Ta:Q,Aa:w,Xi:ve,mutatedKeys:U}}Ra(a,p){return a.hasLocalMutations&&p.hasCommittedMutations&&!p.hasLocalMutations}applyChanges(a,p,w,P){const U=this.Ta;this.Ta=a.Ta,this.mutatedKeys=a.mutatedKeys;const Q=a.Aa.Q_();Q.sort((Wt,In)=>function(no,Wo){const Ir=ar=>{switch(ar){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return On()}};return Ir(no)-Ir(Wo)}(Wt.type,In.type)||this.Ia(Wt.doc,In.doc)),this.Va(w),P=null!=P&&P;const ve=p&&!P?this.ma():[],Oe=0===this.Pa.size&&this.current&&!P?1:0,rt=Oe!==this.ha;return this.ha=Oe,0!==Q.length||rt?{snapshot:new oh(this.query,a.Ta,U,Q,a.mutatedKeys,0===Oe,rt,!1,!!w&&w.resumeToken.approximateByteSize()>0),fa:ve}:{fa:ve}}j_(a){return this.current&&"Offline"===a?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ku,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(a){return!this.la.has(a)&&!!this.Ta.has(a)&&!this.Ta.get(a).hasLocalMutations}Va(a){a&&(a.addedDocuments.forEach(p=>this.la=this.la.add(p)),a.modifiedDocuments.forEach(p=>{}),a.removedDocuments.forEach(p=>this.la=this.la.delete(p)),this.current=a.current)}ma(){if(!this.current)return[];const a=this.Pa;this.Pa=_s(),this.Ta.forEach(w=>{this.ga(w.key)&&(this.Pa=this.Pa.add(w.key))});const p=[];return a.forEach(w=>{this.Pa.has(w)||p.push(new o0(w))}),this.Pa.forEach(w=>{a.has(w)||p.push(new wc(w))}),p}pa(a){this.la=a.hs,this.Pa=_s();const p=this.da(a.documents);return this.applyChanges(p,!0)}ya(){return oh.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class gu{constructor(a,p,w){this.query=a,this.targetId=p,this.view=w}}class o1{constructor(a){this.key=a,this.wa=!1}}class pc{constructor(a,p,w,P,U,Q){this.localStore=a,this.remoteStore=p,this.eventManager=w,this.sharedClientState=P,this.currentUser=U,this.maxConcurrentLimboResolutions=Q,this.Sa={},this.ba=new Zt(ve=>sl(ve),Ol),this.Da=new Map,this.Ca=new Set,this.va=new ds(eo.comparator),this.Fa=new Map,this.Ma=new Ld,this.xa={},this.Oa=new Map,this.Na=fh.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function r1(S,a){return B1.apply(this,arguments)}function B1(){return(B1=(0,V.A)(function*(S,a,p=!0){const w=$1(S);let P;const U=w.ba.get(a);return U?(w.sharedClientState.addLocalQueryTarget(U.targetId),P=U.view.ya()):P=yield s1(w,a,p,!0),P})).apply(this,arguments)}function N1(S,a){return ip.apply(this,arguments)}function ip(){return(ip=(0,V.A)(function*(S,a){const p=$1(S);yield s1(p,a,!0,!1)})).apply(this,arguments)}function s1(S,a,p,w){return La.apply(this,arguments)}function La(){return(La=(0,V.A)(function*(S,a,p,w){const P=yield function J(S,a){const p=Fn(S);return p.persistence.runTransaction("Allocate target","readwrite",w=>{let P;return p.Qr.getTargetData(w,a).next(U=>U?(P=U,ni.resolve(P)):p.Qr.allocateTargetId(w).next(Q=>(P=new _d(a,Q,"TargetPurposeListen",w.currentSequenceNumber),p.Qr.addTargetData(w,P).next(()=>P))))}).then(w=>{const P=p.ns.get(w.targetId);return(null===P||w.snapshotVersion.compareTo(P.snapshotVersion)>0)&&(p.ns=p.ns.insert(w.targetId,w),p.rs.set(a,w.targetId)),w})}(S.localStore,gs(a)),U=P.targetId,Q=p?S.sharedClientState.addLocalQueryTarget(U):"not-current";let ve;return w&&(ve=yield function B0(S,a,p,w,P){return yh.apply(this,arguments)}(S,a,U,"current"===Q,P.resumeToken)),S.isPrimaryClient&&p&&ea(S.remoteStore,P),ve})).apply(this,arguments)}function yh(){return yh=(0,V.A)(function*(S,a,p,w,P){S.Ba=(In,pi,no)=>{return(Wo=(0,V.A)(function*(ar,Ps,Bs,Fs){let Aa=Ps.view.da(Bs);Aa.Xi&&(Aa=yield ye(ar.localStore,Ps.query,!1).then(({documents:ii})=>Ps.view.da(ii,Aa)));const Al=Fs&&Fs.targetChanges.get(Ps.targetId),qa=Fs&&null!=Fs.targetMismatches.get(Ps.targetId),Oi=Ps.view.applyChanges(Aa,ar.isPrimaryClient,Al,qa);return Pp(ar,Ps.targetId,Oi.fa),Oi.snapshot}),function Ir(ar,Ps,Bs,Fs){return Wo.apply(this,arguments)})(S,In,pi,no);var Wo};const U=yield ye(S.localStore,a,!0),Q=new eu(a,U.hs),ve=Q.da(U.documents),Oe=pa.createSynthesizedTargetChangeForCurrentChange(p,w&&"Offline"!==S.onlineState,P),rt=Q.applyChanges(ve,S.isPrimaryClient,Oe);Pp(S,p,rt.fa);const Wt=new gu(a,p,Q);return S.ba.set(a,Wt),S.Da.has(p)?S.Da.get(p).push(a):S.Da.set(p,[a]),rt.snapshot}),yh.apply(this,arguments)}function rm(S,a,p){return op.apply(this,arguments)}function op(){return(op=(0,V.A)(function*(S,a,p){const w=Fn(S),P=w.ba.get(a),U=w.Da.get(P.targetId);if(U.length>1)return w.Da.set(P.targetId,U.filter(Q=>!Ol(Q,a))),void w.ba.delete(a);w.isPrimaryClient?(w.sharedClientState.removeLocalQueryTarget(P.targetId),w.sharedClientState.isActiveQueryTarget(P.targetId)||(yield re(w.localStore,P.targetId,!1).then(()=>{w.sharedClientState.clearQueryState(P.targetId),p&&na(w.remoteStore,P.targetId),rh(w,P.targetId)}).catch(Dr))):(rh(w,P.targetId),yield re(w.localStore,P.targetId,!0))})).apply(this,arguments)}function Tp(S,a){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,V.A)(function*(S,a){const p=Fn(S),w=p.ba.get(a),P=p.Da.get(w.targetId);p.isPrimaryClient&&1===P.length&&(p.sharedClientState.removeLocalQueryTarget(w.targetId),na(p.remoteStore,w.targetId))})).apply(this,arguments)}function Ap(){return(Ap=(0,V.A)(function*(S,a,p){const w=function jf(S){const a=Fn(S);return a.remoteStore.remoteSyncer.applySuccessfulWrite=Bf.bind(null,a),a.remoteStore.remoteSyncer.rejectFailedWrite=Um.bind(null,a),a}(S);try{const P=yield function(Q,ve){const Oe=Fn(Q),rt=Li.now(),Wt=ve.reduce((no,Wo)=>no.add(Wo.key),_s());let In,pi;return Oe.persistence.runTransaction("Locally write mutations","readwrite",no=>{let Wo=dr(),Ir=_s();return Oe.os.getEntries(no,Wt).next(ar=>{Wo=ar,Wo.forEach((Ps,Bs)=>{Bs.isValidDocument()||(Ir=Ir.add(Ps))})}).next(()=>Oe.localDocuments.getOverlayedDocuments(no,Wo)).next(ar=>{In=ar;const Ps=[];for(const Bs of ve){const Fs=qu(Bs,In.get(Bs.key).overlayedDocument);null!=Fs&&Ps.push(new Kc(Bs.key,Fs,gi(Fs.value.mapValue),Za.exists(!0)))}return Oe.mutationQueue.addMutationBatch(no,rt,Ps,ve)}).next(ar=>{pi=ar;const Ps=ar.applyToLocalDocumentSet(In,Ir);return Oe.documentOverlayCache.saveOverlays(no,ar.batchId,Ps)})}).then(()=>({batchId:pi.batchId,changes:Tc(In)}))}(w.localStore,a);w.sharedClientState.addPendingMutation(P.batchId),function(Q,ve,Oe){let rt=Q.xa[Q.currentUser.toKey()];rt||(rt=new ds($i)),rt=rt.insert(ve,Oe),Q.xa[Q.currentUser.toKey()]=rt}(w,P.batchId,p),yield bh(w,P.changes),yield Ka(w.remoteStore)}catch(P){const U=e0(P,"Failed to persist write");p.reject(U)}})).apply(this,arguments)}function lf(S,a){return _2.apply(this,arguments)}function _2(){return(_2=(0,V.A)(function*(S,a){const p=Fn(S);try{const w=yield function R(S,a){const p=Fn(S),w=a.snapshotVersion;let P=p.ns;return p.persistence.runTransaction("Apply remote event","readwrite-primary",U=>{const Q=p.os.newChangeBuffer({trackRemovals:!0});P=p.ns;const ve=[];a.targetChanges.forEach((Wt,In)=>{const pi=P.get(In);if(!pi)return;ve.push(p.Qr.removeMatchingKeys(U,Wt.removedDocuments,In).next(()=>p.Qr.addMatchingKeys(U,Wt.addedDocuments,In)));let no=pi.withSequenceNumber(U.currentSequenceNumber);var Ir,ar,Ps;null!==a.targetMismatches.get(In)?no=no.withResumeToken(Ia.EMPTY_BYTE_STRING,yi.min()).withLastLimboFreeSnapshotVersion(yi.min()):Wt.resumeToken.approximateByteSize()>0&&(no=no.withResumeToken(Wt.resumeToken,w)),P=P.insert(In,no),ar=no,Ps=Wt,(0===(Ir=pi).resumeToken.approximateByteSize()||ar.snapshotVersion.toMicroseconds()-Ir.snapshotVersion.toMicroseconds()>=3e8||Ps.addedDocuments.size+Ps.modifiedDocuments.size+Ps.removedDocuments.size>0)&&ve.push(p.Qr.updateTargetData(U,no))});let Oe=dr(),rt=_s();if(a.documentUpdates.forEach(Wt=>{a.resolvedLimboDocuments.has(Wt)&&ve.push(p.persistence.referenceDelegate.updateLimboDocument(U,Wt))}),ve.push(function N(S,a,p){let w=_s(),P=_s();return p.forEach(U=>w=w.add(U)),a.getEntries(S,w).next(U=>{let Q=dr();return p.forEach((ve,Oe)=>{const rt=U.get(ve);Oe.isFoundDocument()!==rt.isFoundDocument()&&(P=P.add(ve)),Oe.isNoDocument()&&Oe.version.isEqual(yi.min())?(a.removeEntry(ve,Oe.readTime),Q=Q.insert(ve,Oe)):!rt.isValidDocument()||Oe.version.compareTo(rt.version)>0||0===Oe.version.compareTo(rt.version)&&rt.hasPendingWrites?(a.addEntry(Oe),Q=Q.insert(ve,Oe)):Ct("LocalStore","Ignoring outdated watch update for ",ve,". Current version:",rt.version," Watch version:",Oe.version)}),{cs:Q,ls:P}})}(U,Q,a.documentUpdates).next(Wt=>{Oe=Wt.cs,rt=Wt.ls})),!w.isEqual(yi.min())){const Wt=p.Qr.getLastRemoteSnapshotVersion(U).next(In=>p.Qr.setTargetsMetadata(U,U.currentSequenceNumber,w));ve.push(Wt)}return ni.waitFor(ve).next(()=>Q.apply(U)).next(()=>p.localDocuments.getLocalViewOfDocuments(U,Oe,rt)).next(()=>Oe)}).then(U=>(p.ns=P,U))}(p.localStore,a);a.targetChanges.forEach((P,U)=>{const Q=p.Fa.get(U);Q&&(Cn(P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size<=1),P.addedDocuments.size>0?Q.wa=!0:P.modifiedDocuments.size>0?Cn(Q.wa):P.removedDocuments.size>0&&(Cn(Q.wa),Q.wa=!1))}),yield bh(p,w,a)}catch(w){yield Dr(w)}})).apply(this,arguments)}function ul(S,a,p){const w=Fn(S);if(w.isPrimaryClient&&0===p||!w.isPrimaryClient&&1===p){const P=[];w.ba.forEach((U,Q)=>{const ve=Q.view.j_(a);ve.snapshot&&P.push(ve.snapshot)}),function(Q,ve){const Oe=Fn(Q);Oe.onlineState=ve;let rt=!1;Oe.queries.forEach((Wt,In)=>{for(const pi of In.U_)pi.j_(ve)&&(rt=!0)}),rt&&t0(Oe)}(w.eventManager,a),P.length&&w.Sa.h_(P),w.onlineState=a,w.isPrimaryClient&&w.sharedClientState.setOnlineState(a)}}function Dp(S,a,p){return sm.apply(this,arguments)}function sm(){return(sm=(0,V.A)(function*(S,a,p){const w=Fn(S);w.sharedClientState.updateQueryState(a,"rejected",p);const P=w.Fa.get(a),U=P&&P.key;if(U){let Q=new ds(eo.comparator);Q=Q.insert(U,qo.newNoDocument(U,yi.min()));const ve=_s().add(U),Oe=new Ta(yi.min(),new Map,new ds($i),Q,ve);yield lf(w,Oe),w.va=w.va.remove(U),w.Fa.delete(a),am(w)}else yield re(w.localStore,a,!1).then(()=>rh(w,a,p)).catch(Dr)})).apply(this,arguments)}function Bf(S,a){return rp.apply(this,arguments)}function rp(){return(rp=(0,V.A)(function*(S,a){const p=Fn(S),w=a.batch.batchId;try{const P=yield function b(S,a){const p=Fn(S);return p.persistence.runTransaction("Acknowledge batch","readwrite-primary",w=>{const P=a.batch.keys(),U=p.os.newChangeBuffer({trackRemovals:!0});return function(ve,Oe,rt,Wt){const In=rt.batch,pi=In.keys();let no=ni.resolve();return pi.forEach(Wo=>{no=no.next(()=>Wt.getEntry(Oe,Wo)).next(Ir=>{const ar=rt.docVersions.get(Wo);Cn(null!==ar),Ir.version.compareTo(ar)<0&&(In.applyToRemoteDocument(Ir,rt),Ir.isValidDocument()&&(Ir.setReadTime(rt.commitVersion),Wt.addEntry(Ir)))})}),no.next(()=>ve.mutationQueue.removeMutationBatch(Oe,In))}(p,w,a,U).next(()=>U.apply(w)).next(()=>p.mutationQueue.performConsistencyCheck(w)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(w,P,a.batch.batchId)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,function(ve){let Oe=_s();for(let rt=0;rt<ve.mutationResults.length;++rt)ve.mutationResults[rt].transformResults.length>0&&(Oe=Oe.add(ve.batch.mutations[rt].key));return Oe}(a))).next(()=>p.localDocuments.getDocuments(w,P))})}(p.localStore,a);Pc(p,w,null),sp(p,w),p.sharedClientState.updateMutationState(w,"acknowledged"),yield bh(p,P)}catch(P){yield Dr(P)}})).apply(this,arguments)}function Um(S,a,p){return cf.apply(this,arguments)}function cf(){return(cf=(0,V.A)(function*(S,a,p){const w=Fn(S);try{const P=yield function(Q,ve){const Oe=Fn(Q);return Oe.persistence.runTransaction("Reject batch","readwrite-primary",rt=>{let Wt;return Oe.mutationQueue.lookupMutationBatch(rt,ve).next(In=>(Cn(null!==In),Wt=In.keys(),Oe.mutationQueue.removeMutationBatch(rt,In))).next(()=>Oe.mutationQueue.performConsistencyCheck(rt)).next(()=>Oe.documentOverlayCache.removeOverlaysForBatchId(rt,Wt,ve)).next(()=>Oe.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(rt,Wt)).next(()=>Oe.localDocuments.getDocuments(rt,Wt))})}(w.localStore,a);Pc(w,a,p),sp(w,a),w.sharedClientState.updateMutationState(a,"rejected",p),yield bh(w,P)}catch(P){yield Dr(P)}})).apply(this,arguments)}function sp(S,a){(S.Oa.get(a)||[]).forEach(p=>{p.resolve()}),S.Oa.delete(a)}function Pc(S,a,p){const w=Fn(S);let P=w.xa[w.currentUser.toKey()];if(P){const U=P.get(a);U&&(p?U.reject(p):U.resolve(),P=P.remove(a)),w.xa[w.currentUser.toKey()]=P}}function rh(S,a,p=null){S.sharedClientState.removeLocalQueryTarget(a);for(const w of S.Da.get(a))S.ba.delete(w),p&&S.Sa.ka(w,p);S.Da.delete(a),S.isPrimaryClient&&S.Ma.Vr(a).forEach(w=>{S.Ma.containsKey(w)||a1(S,w)})}function a1(S,a){S.Ca.delete(a.path.canonicalString());const p=S.va.get(a);null!==p&&(na(S.remoteStore,p),S.va=S.va.remove(a),S.Fa.delete(p),am(S))}function Pp(S,a,p){for(const w of p)w instanceof wc?(S.Ma.addReference(w.key,a),ap(S,w)):w instanceof o0?(Ct("SyncEngine","Document no longer in limbo: "+w.key),S.Ma.removeReference(w.key,a),S.Ma.containsKey(w.key)||a1(S,w.key)):On()}function ap(S,a){const p=a.key,w=p.path.canonicalString();S.va.get(p)||S.Ca.has(w)||(Ct("SyncEngine","New document in limbo: "+p),S.Ca.add(w),am(S))}function am(S){for(;S.Ca.size>0&&S.va.size<S.maxConcurrentLimboResolutions;){const a=S.Ca.values().next().value;S.Ca.delete(a);const p=new eo(si.fromString(a)),w=S.Na.next();S.Fa.set(w,new o1(p)),S.va=S.va.insert(p,w),ea(S.remoteStore,new _d(gs(gr(p.path)),w,"TargetPurposeLimboResolution",Mt.oe))}}function bh(S,a,p){return uf.apply(this,arguments)}function uf(){return uf=(0,V.A)(function*(S,a,p){const w=Fn(S),P=[],U=[],Q=[];var ve;w.ba.isEmpty()||(w.ba.forEach((ve,Oe)=>{Q.push(w.Ba(Oe,a,p).then(rt=>{var Wt;if((rt||p)&&w.isPrimaryClient){const In=rt?!rt.fromCache:null===(Wt=null==p?void 0:p.targetChanges.get(Oe.targetId))||void 0===Wt?void 0:Wt.current;w.sharedClientState.updateQueryState(Oe.targetId,In?"current":"not-current")}if(rt){P.push(rt);const In=fu.Ki(Oe.targetId,rt);U.push(In)}}))}),yield Promise.all(Q),w.Sa.h_(P),yield(ve=(0,V.A)(function*(rt,Wt){const In=Fn(rt);try{yield In.persistence.runTransaction("notifyLocalViewChanges","readwrite",pi=>ni.forEach(Wt,no=>ni.forEach(no.qi,Wo=>In.persistence.referenceDelegate.addReference(pi,no.targetId,Wo)).next(()=>ni.forEach(no.Qi,Wo=>In.persistence.referenceDelegate.removeReference(pi,no.targetId,Wo)))))}catch(pi){if(!Wi(pi))throw pi;Ct("LocalStore","Failed to update sequence numbers: "+pi)}for(const pi of Wt){const no=pi.targetId;if(!pi.fromCache){const Wo=In.ns.get(no),ar=Wo.withLastLimboFreeSnapshotVersion(Wo.snapshotVersion);In.ns=In.ns.insert(no,ar)}}}),function Oe(rt,Wt){return ve.apply(this,arguments)})(w.localStore,U))}),uf.apply(this,arguments)}function Eg(S,a){return df.apply(this,arguments)}function df(){return(df=(0,V.A)(function*(S,a){const p=Fn(S);if(!p.currentUser.isEqual(a)){Ct("SyncEngine","User change. New user:",a.toKey());const w=yield r(p.localStore,a);p.currentUser=a,(U=p).Oa.forEach(ve=>{ve.forEach(Oe=>{Oe.reject(new Ae(Ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),U.Oa.clear(),p.sharedClientState.handleUserChange(a,w.removedBatchIds,w.addedBatchIds),yield bh(p,w.us)}var U})).apply(this,arguments)}function Nf(S,a){const p=Fn(S),w=p.Fa.get(a);if(w&&w.wa)return _s().add(w.key);{let P=_s();const U=p.Da.get(a);if(!U)return P;for(const Q of U){const ve=p.ba.get(Q);P=P.unionWith(ve.view.Ea)}return P}}function $1(S){const a=Fn(S);return a.remoteStore.remoteSyncer.applyRemoteEvent=lf.bind(null,a),a.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nf.bind(null,a),a.remoteStore.remoteSyncer.rejectListen=Dp.bind(null,a),a.Sa.h_=n1.bind(null,a.eventManager),a.Sa.ka=yc.bind(null,a.eventManager),a}class Su{constructor(){this.synchronizeTabs=!1}initialize(a){var p=this;return(0,V.A)(function*(){p.serializer=ln(a.databaseInfo.databaseId),p.sharedClientState=p.createSharedClientState(a),p.persistence=p.createPersistence(a),yield p.persistence.start(),p.localStore=p.createLocalStore(a),p.gcScheduler=p.createGarbageCollectionScheduler(a,p.localStore),p.indexBackfillerScheduler=p.createIndexBackfillerScheduler(a,p.localStore)})()}createGarbageCollectionScheduler(a,p){return null}createIndexBackfillerScheduler(a,p){return null}createLocalStore(a){return function v(S,a,p,w){return new z0(S,a,p,w)}(this.persistence,new zh,a.initialUser,this.serializer)}createPersistence(a){return new Bd(ns.Hr,this.serializer)}createSharedClientState(a){return new Dn}terminate(){var a=this;return(0,V.A)(function*(){var p,w;null===(p=a.gcScheduler)||void 0===p||p.stop(),null===(w=a.indexBackfillerScheduler)||void 0===w||w.stop(),a.sharedClientState.shutdown(),yield a.persistence.shutdown()})()}}class j1{initialize(a,p){var w=this;return(0,V.A)(function*(){w.localStore||(w.localStore=a.localStore,w.sharedClientState=a.sharedClientState,w.datastore=w.createDatastore(p),w.remoteStore=w.createRemoteStore(p),w.eventManager=w.createEventManager(p),w.syncEngine=w.createSyncEngine(p,!a.synchronizeTabs),w.sharedClientState.onlineStateHandler=P=>ul(w.syncEngine,P,1),w.remoteStore.remoteSyncer.handleCredentialChange=Eg.bind(null,w.syncEngine),yield cl(w.remoteStore,w.syncEngine.isPrimaryClient))})()}createEventManager(a){return new Il}createDatastore(a){const p=ln(a.databaseInfo.databaseId),w=new ie(a.databaseInfo);return new yr(a.authCredentials,a.appCheckCredentials,w,p)}createRemoteStore(a){return w=this.localStore,P=this.datastore,U=a.asyncQueue,Q=p=>ul(this.syncEngine,p,0),ve=bi.D()?new bi:new gn,new $r(w,P,U,Q,ve);var w,P,U,Q,ve}createSyncEngine(a,p){return function(P,U,Q,ve,Oe,rt,Wt){const In=new pc(P,U,Q,ve,Oe,rt);return Wt&&(In.La=!0),In}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,a.initialUser,a.maxConcurrentLimboResolutions,p)}terminate(){var a=this;return(0,V.A)(function*(){var p,w;yield(w=(0,V.A)(function*(U){const Q=Fn(U);Ct("RemoteStore","RemoteStore shutting down."),Q.M_.add(5),yield Ds(Q),Q.O_.shutdown(),Q.N_.set("Unknown")}),function P(U){return w.apply(this,arguments)})(a.remoteStore),null===(p=a.datastore)||void 0===p||p.terminate()})()}}class N0{constructor(a){this.observer=a,this.muted=!1}next(a){this.observer.next&&this.Ka(this.observer.next,a)}error(a){this.observer.error?this.Ka(this.observer.error,a):Me("Uncaught Error in snapshot listener:",a.toString())}$a(){this.muted=!0}Ka(a,p){this.muted||setTimeout(()=>{this.muted||a(p)},0)}}class hf{constructor(a,p,w,P){var U=this;this.authCredentials=a,this.appCheckCredentials=p,this.asyncQueue=w,this.databaseInfo=P,this.user=xt.UNAUTHENTICATED,this.clientId=rs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(w,function(){var Q=(0,V.A)(function*(ve){Ct("FirestoreClient","Received user=",ve.uid),yield U.authCredentialListener(ve),U.user=ve});return function(ve){return Q.apply(this,arguments)}}()),this.appCheckCredentials.start(w,Q=>(Ct("FirestoreClient","Received new app check token=",Q),this.appCheckCredentialListener(Q,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(a){this.authCredentialListener=a}setAppCheckTokenChangeListener(a){this.appCheckCredentialListener=a}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var a=this;this.asyncQueue.enterRestrictedMode();const p=new Ge;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,V.A)(function*(){try{a._onlineComponents&&(yield a._onlineComponents.terminate()),a._offlineComponents&&(yield a._offlineComponents.terminate()),a.authCredentials.shutdown(),a.appCheckCredentials.shutdown(),p.resolve()}catch(w){const P=e0(w,"Failed to shutdown persistence");p.reject(P)}})),p.promise}}function Ic(S,a){return E1.apply(this,arguments)}function E1(){return E1=(0,V.A)(function*(S,a){S.asyncQueue.verifyOperationInProgress(),Ct("FirestoreClient","Initializing OfflineComponentProvider");const p=S.configuration;yield a.initialize(p);let w=p.initialUser;S.setCredentialChangeListener(function(){var P=(0,V.A)(function*(U){w.isEqual(U)||(yield r(a.localStore,U),w=U)});return function(U){return P.apply(this,arguments)}}()),a.persistence.setDatabaseDeletedListener(()=>S.terminate()),S._offlineComponents=a}),E1.apply(this,arguments)}function um(S,a){return dm.apply(this,arguments)}function dm(){return(dm=(0,V.A)(function*(S,a){S.asyncQueue.verifyOperationInProgress();const p=yield function Uf(S){return s0.apply(this,arguments)}(S);Ct("FirestoreClient","Initializing OnlineComponentProvider"),yield a.initialize(p,S.configuration),S.setCredentialChangeListener(w=>kp(a.remoteStore,w)),S.setAppCheckTokenChangeListener((w,P)=>kp(a.remoteStore,P)),S._onlineComponents=a})).apply(this,arguments)}function s0(){return(s0=(0,V.A)(function*(S){if(!S._offlineComponents)if(S._uninitializedComponentsProvider){Ct("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ic(S,S._uninitializedComponentsProvider._offline)}catch(a){const p=a;if(!function hm(S){return"FirebaseError"===S.name?S.code===Ke.FAILED_PRECONDITION||S.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&S instanceof DOMException)||22===S.code||20===S.code||11===S.code}(p))throw p;pn("Error using user provided cache. Falling back to memory cache: "+p),yield Ic(S,new Su)}}else Ct("FirestoreClient","Using default OfflineComponentProvider"),yield Ic(S,new Su);return S._offlineComponents})).apply(this,arguments)}function a0(S){return El.apply(this,arguments)}function El(){return(El=(0,V.A)(function*(S){return S._onlineComponents||(S._uninitializedComponentsProvider?(Ct("FirestoreClient","Using user provided OnlineComponentProvider"),yield um(S,S._uninitializedComponentsProvider._online)):(Ct("FirestoreClient","Using default OnlineComponentProvider"),yield um(S,new j1))),S._onlineComponents})).apply(this,arguments)}function Xl(S){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,V.A)(function*(S){const a=yield a0(S),p=a.eventManager;return p.onListen=r1.bind(null,a.syncEngine),p.onUnlisten=rm.bind(null,a.syncEngine),p.onFirstRemoteStoreListen=N1.bind(null,a.syncEngine),p.onLastRemoteStoreUnlisten=Tp.bind(null,a.syncEngine),p})).apply(this,arguments)}function Gf(S){const a={};return void 0!==S.timeoutSeconds&&(a.timeoutSeconds=S.timeoutSeconds),a}const k1=new Map;function I2(S,a,p){if(!p)throw new Ae(Ke.INVALID_ARGUMENT,`Function ${S}() cannot be called with an empty ${a}.`)}function zp(S){if(!eo.isDocumentKey(S))throw new Ae(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${S} has ${S.length}.`)}function dp(S){if(eo.isDocumentKey(S))throw new Ae(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${S} has ${S.length}.`)}function Wf(S){if(void 0===S)return"undefined";if(null===S)return"null";if("string"==typeof S)return S.length>20&&(S=`${S.substring(0,20)}...`),JSON.stringify(S);if("number"==typeof S||"boolean"==typeof S)return""+S;if("object"==typeof S){if(S instanceof Array)return"an array";{const a=(w=S).constructor?w.constructor.name:null;return a?`a custom ${a} object`:"an object"}}var w;return"function"==typeof S?"a function":On()}function xa(S,a){if("_delegate"in S&&(S=S._delegate),!(S instanceof a)){if(a.name===S.constructor.name)throw new Ae(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const p=Wf(S);throw new Ae(Ke.INVALID_ARGUMENT,`Expected type '${a.name}', but it was: ${p}`)}}return S}class fm{constructor(a){var p,w;if(void 0===a.host){if(void 0!==a.ssl)throw new Ae(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=a.host,this.ssl=null===(p=a.ssl)||void 0===p||p;if(this.credentials=a.credentials,this.ignoreUndefinedProperties=!!a.ignoreUndefinedProperties,this.localCache=a.localCache,void 0===a.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==a.cacheSizeBytes&&a.cacheSizeBytes<1048576)throw new Ae(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=a.cacheSizeBytes}(function E2(S,a,p,w){if(!0===a&&!0===w)throw new Ae(Ke.INVALID_ARGUMENT,`${S} and ${p} cannot be used together.`)})("experimentalForceLongPolling",a.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",a.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!a.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==a.experimentalAutoDetectLongPolling&&!a.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Gf(null!==(w=a.experimentalLongPollingOptions)&&void 0!==w?w:{}),function(U){if(void 0!==U.timeoutSeconds){if(isNaN(U.timeoutSeconds))throw new Ae(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${U.timeoutSeconds} (must not be NaN)`);if(U.timeoutSeconds<5)throw new Ae(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${U.timeoutSeconds} (minimum allowed value is 5)`);if(U.timeoutSeconds>30)throw new Ae(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${U.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!a.useFetchStreams}isEqual(a){return this.host===a.host&&this.ssl===a.ssl&&this.credentials===a.credentials&&this.cacheSizeBytes===a.cacheSizeBytes&&this.experimentalForceLongPolling===a.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===a.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===a.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===a.ignoreUndefinedProperties&&this.useFetchStreams===a.useFetchStreams}}class td{constructor(a,p,w,P){this._authCredentials=a,this._appCheckCredentials=p,this._databaseId=w,this._app=P,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(a){if(this._settingsFrozen)throw new Ae(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fm(a),void 0!==a.credentials&&(this._authCredentials=function(w){if(!w)return new zt;switch(w.type){case"firstParty":return new to(w.sessionIndex||"0",w.iamToken||null,w.authTokenFactory||null);case"provider":return w.client;default:throw new Ae(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(a.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(p){const w=k1.get(p);w&&(Ct("ComponentProvider","Removing Datastore"),k1.delete(p),w.terminate())}(this),Promise.resolve()}}class Nu{constructor(a,p,w){this.converter=p,this._query=w,this.type="query",this.firestore=a}withConverter(a){return new Nu(this.firestore,a,this._query)}}class $l{constructor(a,p,w){this.converter=p,this._key=w,this.type="document",this.firestore=a}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new l0(this.firestore,this.converter,this._key.path.popLast())}withConverter(a){return new $l(this.firestore,a,this._key)}}class l0 extends Nu{constructor(a,p,w){super(a,p,gr(w)),this._path=w,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const a=this._path.popLast();return a.isEmpty()?null:new $l(this.firestore,null,new eo(a))}withConverter(a){return new l0(this.firestore,a,this._path)}}function Op(S,a,...p){if(S=(0,qe.Ku)(S),I2("collection","path",a),S instanceof td){const w=si.fromString(a,...p);return dp(w),new l0(S,null,w)}{if(!(S instanceof $l||S instanceof l0))throw new Ae(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const w=S._path.child(si.fromString(a,...p));return dp(w),new l0(S.firestore,null,w)}}function mf(S,a,...p){if(S=(0,qe.Ku)(S),1===arguments.length&&(a=rs.newId()),I2("doc","path",a),S instanceof td){const w=si.fromString(a,...p);return zp(w),new $l(S,null,new eo(w))}{if(!(S instanceof $l||S instanceof l0))throw new Ae(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const w=S._path.child(si.fromString(a,...p));return zp(w),new $l(S.firestore,S instanceof l0?S.converter:null,new eo(w))}}class C2{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new hn(this,"async_queue_retry"),this.hu=()=>{const p=at();p&&Ct("AsyncQueue","Visibility state changed to "+p.visibilityState),this.Yo.Wo()};const a=at();a&&"function"==typeof a.addEventListener&&a.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(a){this.enqueue(a)}enqueueAndForgetEvenWhileRestricted(a){this.Pu(),this.Iu(a)}enterRestrictedMode(a){if(!this.ou){this.ou=!0,this.cu=a||!1;const p=at();p&&"function"==typeof p.removeEventListener&&p.removeEventListener("visibilitychange",this.hu)}}enqueue(a){if(this.Pu(),this.ou)return new Promise(()=>{});const p=new Ge;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(a().then(p.resolve,p.reject),p.promise)).then(()=>p.promise)}enqueueRetryable(a){this.enqueueAndForget(()=>(this.su.push(a),this.Tu()))}Tu(){var a=this;return(0,V.A)(function*(){if(0!==a.su.length){try{yield a.su[0](),a.su.shift(),a.Yo.reset()}catch(p){if(!Wi(p))throw p;Ct("AsyncQueue","Operation failed with retryable error: "+p)}a.su.length>0&&a.Yo.$o(()=>a.Tu())}})()}Iu(a){const p=this.iu.then(()=>(this.uu=!0,a().catch(w=>{throw this.au=w,this.uu=!1,Me("INTERNAL UNHANDLED ERROR: ",function(Q){let ve=Q.message||"";return Q.stack&&(ve=Q.stack.includes(Q.message)?Q.stack:Q.message+"\n"+Q.stack),ve}(w)),w}).then(w=>(this.uu=!1,w))));return this.iu=p,p}enqueueAfterDelay(a,p,w){this.Pu(),this.lu.indexOf(a)>-1&&(p=0);const P=sf.createAndSchedule(this,a,p,w,U=>this.Eu(U));return this._u.push(P),P}Pu(){this.au&&On()}verifyOperationInProgress(){}du(){var a=this;return(0,V.A)(function*(){let p;do{p=a.iu,yield p}while(p!==a.iu)})()}Au(a){for(const p of this._u)if(p.timerId===a)return!0;return!1}Ru(a){return this.du().then(()=>{this._u.sort((p,w)=>p.targetTimeMs-w.targetTimeMs);for(const p of this._u)if(p.skipDelay(),"all"!==a&&p.timerId===a)break;return this.du()})}Vu(a){this.lu.push(a)}Eu(a){const p=this._u.indexOf(a);this._u.splice(p,1)}}function qf(S){return function(p,w){if("object"!=typeof p||null===p)return!1;const P=p;for(const U of["next","error","complete"])if(U in P&&"function"==typeof P[U])return!0;return!1}(S)}class ic extends td{constructor(a,p,w,P){super(a,p,w,P),this.type="firestore",this._queue=new C2,this._persistenceKey=(null==P?void 0:P.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ml(this),this._firestoreClient.terminate()}}function xh(S,a){const p="object"==typeof S?S:(0,se.Sx)(),w="string"==typeof S?S:a||"(default)",P=(0,se.j6)(p,"firestore").getImmediate({identifier:w});if(!P._initialized){const U=(0,qe.yU)("firestore");U&&function Xm(S,a,p,w={}){var P;const U=(S=xa(S,td))._getSettings(),Q=`${a}:${p}`;if("firestore.googleapis.com"!==U.host&&U.host!==Q&&pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),S._setSettings(Object.assign(Object.assign({},U),{host:Q,ssl:!1})),w.mockUserToken){let ve,Oe;if("string"==typeof w.mockUserToken)ve=w.mockUserToken,Oe=xt.MOCK_USER;else{ve=(0,qe.Fy)(w.mockUserToken,null===(P=S._app)||void 0===P?void 0:P.options.projectId);const rt=w.mockUserToken.sub||w.mockUserToken.user_id;if(!rt)throw new Ae(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Oe=new xt(rt)}S._authCredentials=new Yn(new tt(ve,Oe))}}(P,...U)}return P}function oc(S){return S._firestoreClient||Ml(S),S._firestoreClient.verifyNotTerminated(),S._firestoreClient}function Ml(S){var a,p,w;const P=S._freezeSettings(),U=(Oe=(null===(a=S._app)||void 0===a?void 0:a.options.appId)||"",new ks(S._databaseId,Oe,S._persistenceKey,(Wt=P).host,Wt.ssl,Wt.experimentalForceLongPolling,Wt.experimentalAutoDetectLongPolling,Gf(Wt.experimentalLongPollingOptions),Wt.useFetchStreams));var Oe,Wt;S._firestoreClient=new hf(S._authCredentials,S._appCheckCredentials,S._queue,U),null!==(p=P.localCache)&&void 0!==p&&p._offlineComponentProvider&&null!==(w=P.localCache)&&void 0!==w&&w._onlineComponentProvider&&(S._firestoreClient._uninitializedComponentsProvider={_offlineKind:P.localCache.kind,_offline:P.localCache._offlineComponentProvider,_online:P.localCache._onlineComponentProvider})}class Np{constructor(a){this._byteString=a}static fromBase64String(a){try{return new Np(Ia.fromBase64String(a))}catch(p){throw new Ae(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+p)}}static fromUint8Array(a){return new Np(Ia.fromUint8Array(a))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(a){return this._byteString.isEqual(a._byteString)}}class S1{constructor(...a){for(let p=0;p<a.length;++p)if(0===a[p].length)throw new Ae(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mo(a)}isEqual(a){return this._internalPath.isEqual(a._internalPath)}}class h1{constructor(a){this._methodName=a}}class Fp{constructor(a,p){if(!isFinite(a)||a<-90||a>90)throw new Ae(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+a);if(!isFinite(p)||p<-180||p>180)throw new Ae(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+p);this._lat=a,this._long=p}get latitude(){return this._lat}get longitude(){return this._long}isEqual(a){return this._lat===a._lat&&this._long===a._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(a){return $i(this._lat,a._lat)||$i(this._long,a._long)}}const M2=/^__.*__$/;class Vp{constructor(a,p,w){this.data=a,this.fieldMask=p,this.fieldTransforms=w}toMutation(a,p){return null!==this.fieldMask?new Kc(a,this.data,this.fieldMask,p,this.fieldTransforms):new Kd(a,this.data,p,this.fieldTransforms)}}function Xf(S){switch(S){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw On()}}class Kf{constructor(a,p,w,P,U,Q){this.settings=a,this.databaseId=p,this.serializer=w,this.ignoreUndefinedProperties=P,void 0===U&&this.mu(),this.fieldTransforms=U||[],this.fieldMask=Q||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(a){return new Kf(Object.assign(Object.assign({},this.settings),a),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(a){var p;const w=null===(p=this.path)||void 0===p?void 0:p.child(a),P=this.gu({path:w,yu:!1});return P.wu(a),P}Su(a){var p;const w=null===(p=this.path)||void 0===p?void 0:p.child(a),P=this.gu({path:w,yu:!1});return P.mu(),P}bu(a){return this.gu({path:void 0,yu:!0})}Du(a){return hd(a,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(a){return void 0!==this.fieldMask.find(p=>a.isPrefixOf(p))||void 0!==this.fieldTransforms.find(p=>a.isPrefixOf(p.field))}mu(){if(this.path)for(let a=0;a<this.path.length;a++)this.wu(this.path.get(a))}wu(a){if(0===a.length)throw this.Du("Document fields must not be empty");if(Xf(this.fu)&&M2.test(a))throw this.Du('Document fields cannot begin and end with "__"')}}class _m{constructor(a,p,w){this.databaseId=a,this.ignoreUndefinedProperties=p,this.serializer=w||ln(a)}Fu(a,p,w,P=!1){return new Kf({fu:a,methodName:p,vu:w,path:mo.emptyPath(),yu:!1,Cu:P},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(S){const a=S._freezeSettings(),p=ln(S._databaseId);return new _m(S._databaseId,!!a.ignoreUndefinedProperties,p)}function vf(S,a,p,w,P,U={}){const Q=S.Fu(U.merge||U.mergeFields?2:0,a,p,P);Jf("Data must be an object, but it was:",Q,w);const ve=ym(w,Q);let Oe,rt;if(U.merge)Oe=new Fa(Q.fieldMask),rt=Q.fieldTransforms;else if(U.mergeFields){const Wt=[];for(const In of U.mergeFields){const pi=Lh(a,In,p);if(!Q.contains(pi))throw new Ae(Ke.INVALID_ARGUMENT,`Field '${pi}' is specified in your field mask but missing from your input data.`);e2(Wt,pi)||Wt.push(pi)}Oe=new Fa(Wt),rt=Q.fieldTransforms.filter(In=>Oe.covers(In.field))}else Oe=null,rt=Q.fieldTransforms;return new Vp(new co(ve),Oe,rt)}function gp(S,a){if(Qf(S=(0,qe.Ku)(S)))return Jf("Unsupported field value:",a,S),ym(S,a);if(S instanceof h1)return function(w,P){if(!Xf(P.fu))throw P.Du(`${w._methodName}() can only be used with update() and set()`);if(!P.path)throw P.Du(`${w._methodName}() is not currently supported inside arrays`);const U=w._toFieldTransform(P);U&&P.fieldTransforms.push(U)}(S,a),null;if(void 0===S&&a.ignoreUndefinedProperties)return null;if(a.path&&a.fieldMask.push(a.path),S instanceof Array){if(a.settings.yu&&4!==a.fu)throw a.Du("Nested arrays are not supported");return function(w,P){const U=[];let Q=0;for(const ve of w){let Oe=gp(ve,P.bu(Q));null==Oe&&(Oe={nullValue:"NULL_VALUE"}),U.push(Oe),Q++}return{arrayValue:{values:U}}}(S,a)}return function(w,P){if(null===(w=(0,qe.Ku)(w)))return{nullValue:"NULL_VALUE"};if("number"==typeof w)return Td(P.serializer,w);if("boolean"==typeof w)return{booleanValue:w};if("string"==typeof w)return{stringValue:w};if(w instanceof Date){const U=Li.fromDate(w);return{timestampValue:ec(P.serializer,U)}}if(w instanceof Li){const U=new Li(w.seconds,1e3*Math.floor(w.nanoseconds/1e3));return{timestampValue:ec(P.serializer,U)}}if(w instanceof Fp)return{geoPointValue:{latitude:w.latitude,longitude:w.longitude}};if(w instanceof Np)return{bytesValue:Ku(P.serializer,w._byteString)};if(w instanceof $l){const U=P.databaseId,Q=w.firestore._databaseId;if(!Q.isEqual(U))throw P.Du(`Document reference is for database ${Q.projectId}/${Q.database} but should be for database ${U.projectId}/${U.database}`);return{referenceValue:vd(w.firestore._databaseId||P.databaseId,w._key.path)}}throw P.Du(`Unsupported field value: ${Wf(w)}`)}(S,a)}function ym(S,a){const p={};return Tr(S)?a.path&&a.path.length>0&&a.fieldMask.push(a.path):Hi(S,(w,P)=>{const U=gp(P,a.pu(w));null!=U&&(p[w]=U)}),{mapValue:{fields:p}}}function Qf(S){return!("object"!=typeof S||null===S||S instanceof Array||S instanceof Date||S instanceof Li||S instanceof Fp||S instanceof Np||S instanceof $l||S instanceof h1)}function Jf(S,a,p){if(!Qf(p)||"object"!=typeof(P=p)||null===P||Object.getPrototypeOf(P)!==Object.prototype&&null!==Object.getPrototypeOf(P)){const w=Wf(p);throw a.Du("an object"===w?S+" a custom object":S+" "+w)}var P}function Lh(S,a,p){if((a=(0,qe.Ku)(a))instanceof S1)return a._internalPath;if("string"==typeof a)return p1(S,a);throw hd("Field path arguments must be of type string or ",S,!1,void 0,p)}const jp=new RegExp("[~\\*/\\[\\]]");function p1(S,a,p){if(a.search(jp)>=0)throw hd(`Invalid field path (${a}). Paths must not contain '~', '*', '/', '[', or ']'`,S,!1,void 0,p);try{return new S1(...a.split("."))._internalPath}catch{throw hd(`Invalid field path (${a}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,S,!1,void 0,p)}}function hd(S,a,p,w,P){const U=w&&!w.isEmpty(),Q=void 0!==P;let ve=`Function ${a}() called with invalid data`;p&&(ve+=" (via `toFirestore()`)"),ve+=". ";let Oe="";return(U||Q)&&(Oe+=" (found",U&&(Oe+=` in field ${w}`),Q&&(Oe+=` in document ${P}`),Oe+=")"),new Ae(Ke.INVALID_ARGUMENT,ve+S+Oe)}function e2(S,a){return S.some(p=>p.isEqual(a))}class t2{constructor(a,p,w,P,U){this._firestore=a,this._userDataWriter=p,this._key=w,this._document=P,this._converter=U}get id(){return this._key.path.lastSegment()}get ref(){return new $l(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const a=new Up(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(a)}return this._userDataWriter.convertValue(this._document.data.value)}}get(a){if(this._document){const p=this._document.data.field(vp("DocumentSnapshot.get",a));if(null!==p)return this._userDataWriter.convertValue(p)}}}class Up extends t2{data(){return super.data()}}function vp(S,a){return"string"==typeof a?p1(S,a):a instanceof S1?a._internalPath:a._delegate._internalPath}class Ym{}class R2 extends Ym{}function o4(S,a,...p){let w=[];a instanceof Ym&&w.push(a),w=w.concat(p),function(U){const Q=U.filter(Oe=>Oe instanceof ah).length,ve=U.filter(Oe=>Oe instanceof $0).length;if(Q>1||Q>0&&ve>0)throw new Ae(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(w);for(const P of w)S=P._apply(S);return S}class $0 extends R2{constructor(a,p,w){super(),this._field=a,this._op=p,this._value=w,this.type="where"}static _create(a,p,w){return new $0(a,p,w)}_apply(a){const p=this._parse(a);return Ef(a._query,p),new Nu(a.firestore,a.converter,$a(a._query,p))}_parse(a){const p=Ih(a.firestore);return function(U,Q,ve,Oe,rt,Wt,In){let pi;if(rt.isKeyField()){if("array-contains"===Wt||"array-contains-any"===Wt)throw new Ae(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Wt}' queries on documentId().`);if("in"===Wt||"not-in"===Wt){L2(In,Wt);const no=[];for(const Wo of In)no.push(wm(Oe,U,Wo));pi={arrayValue:{values:no}}}else pi=wm(Oe,U,In)}else"in"!==Wt&&"not-in"!==Wt&&"array-contains-any"!==Wt||L2(In,Wt),pi=function Km(S,a,p,w=!1){return gp(p,S.Fu(w?4:3,a))}(ve,"where",In,"in"===Wt||"not-in"===Wt);return Fr.create(rt,Wt,pi)}(a._query,0,p,a.firestore._databaseId,this._field,this._op,this._value)}}function bm(S,a,p){const w=a,P=vp("where",S);return $0._create(P,w,p)}class ah extends Ym{constructor(a,p){super(),this.type=a,this._queryConstraints=p}static _create(a,p){return new ah(a,p)}_parse(a){const p=this._queryConstraints.map(w=>w._parse(a)).filter(w=>w.getFilters().length>0);return 1===p.length?p[0]:ts.create(p,this._getOperator())}_apply(a){const p=this._parse(a);return 0===p.getFilters().length?a:(function(P,U){let Q=P;const ve=U.getFlattenedFilters();for(const Oe of ve)Ef(Q,Oe),Q=$a(Q,Oe)}(a._query,p),new Nu(a.firestore,a.converter,$a(a._query,p)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function wm(S,a,p){if("string"==typeof(p=(0,qe.Ku)(p))){if(""===p)throw new Ae(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!la(a)&&-1!==p.indexOf("/"))throw new Ae(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${p}' contains a '/' character.`);const w=a.path.child(si.fromString(p));if(!eo.isDocumentKey(w))throw new Ae(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${w}' is not because it has an odd number of segments (${w.length}).`);return Oc(S,new eo(w))}if(p instanceof $l)return Oc(S,p._key);throw new Ae(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(p)}.`)}function L2(S,a){if(!Array.isArray(S)||0===S.length)throw new Ae(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${a.toString()}' filters.`)}function Ef(S,a){const p=function(P,U){for(const Q of P)for(const ve of Q.getFlattenedFilters())if(U.indexOf(ve.op)>=0)return ve.op;return null}(S.filters,function(P){switch(P){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(a.op));if(null!==p)throw new Ae(Ke.INVALID_ARGUMENT,p===a.op?`Invalid query. You cannot use more than one '${a.op.toString()}' filter.`:`Invalid query. You cannot use '${a.op.toString()}' filters with '${p.toString()}' filters.`)}class y{convertValue(a,p="none"){switch(mc(a)){case 0:return null;case 1:return a.booleanValue;case 2:return Pa(a.integerValue||a.doubleValue);case 3:return this.convertTimestamp(a.timestampValue);case 4:return this.convertServerTimestamp(a,p);case 5:return a.stringValue;case 6:return this.convertBytes(Uc(a.bytesValue));case 7:return this.convertReference(a.referenceValue);case 8:return this.convertGeoPoint(a.geoPointValue);case 9:return this.convertArray(a.arrayValue,p);case 10:return this.convertObject(a.mapValue,p);default:throw On()}}convertObject(a,p){return this.convertObjectMap(a.fields,p)}convertObjectMap(a,p="none"){const w={};return Hi(a,(P,U)=>{w[P]=this.convertValue(U,p)}),w}convertGeoPoint(a){return new Fp(Pa(a.latitude),Pa(a.longitude))}convertArray(a,p){return(a.values||[]).map(w=>this.convertValue(w,p))}convertServerTimestamp(a,p){switch(p){case"previous":const w=Gu(a);return null==w?null:this.convertValue(w,p);case"estimate":return this.convertTimestamp(zl(a));default:return null}}convertTimestamp(a){const p=dl(a);return new Li(p.seconds,p.nanos)}convertDocumentKey(a,p){const w=si.fromString(a);Cn(cd(w));const P=new ld(w.get(1),w.get(3)),U=new eo(w.popFirst(5));return P.isEqual(p)||Me(`Document ${U} contains a document reference within a different database (${P.projectId}/${P.database}) which is not supported. It will be treated as a reference in the current database (${p.projectId}/${p.database}) instead.`),U}}class ze{constructor(a,p){this.hasPendingWrites=a,this.fromCache=p}isEqual(a){return this.hasPendingWrites===a.hasPendingWrites&&this.fromCache===a.fromCache}}class ut extends t2{constructor(a,p,w,P,U,Q){super(a,p,w,P,Q),this._firestore=a,this._firestoreImpl=a,this.metadata=U}exists(){return super.exists()}data(a={}){if(this._document){if(this._converter){const p=new nt(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(p,a)}return this._userDataWriter.convertValue(this._document.data.value,a.serverTimestamps)}}get(a,p={}){if(this._document){const w=this._document.data.field(vp("DocumentSnapshot.get",a));if(null!==w)return this._userDataWriter.convertValue(w,p.serverTimestamps)}}}class nt extends ut{data(a={}){return super.data(a)}}class pt{constructor(a,p,w,P){this._firestore=a,this._userDataWriter=p,this._snapshot=P,this.metadata=new ze(P.hasPendingWrites,P.fromCache),this.query=w}get docs(){const a=[];return this.forEach(p=>a.push(p)),a}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(a,p){this._snapshot.docs.forEach(w=>{a.call(p,new nt(this._firestore,this._userDataWriter,w.key,w,new ze(this._snapshot.mutatedKeys.has(w.key),this._snapshot.fromCache),this.query.converter))})}docChanges(a={}){const p=!!a.includeMetadataChanges;if(p&&this._snapshot.excludesMetadataChanges)throw new Ae(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===p||(this._cachedChanges=function(P,U){if(P._snapshot.oldDocs.isEmpty()){let Q=0;return P._snapshot.docChanges.map(ve=>({type:"added",doc:new nt(P._firestore,P._userDataWriter,ve.doc.key,ve.doc,new ze(P._snapshot.mutatedKeys.has(ve.doc.key),P._snapshot.fromCache),P.query.converter),oldIndex:-1,newIndex:Q++}))}{let Q=P._snapshot.oldDocs;return P._snapshot.docChanges.filter(ve=>U||3!==ve.type).map(ve=>{const Oe=new nt(P._firestore,P._userDataWriter,ve.doc.key,ve.doc,new ze(P._snapshot.mutatedKeys.has(ve.doc.key),P._snapshot.fromCache),P.query.converter);let rt=-1,Wt=-1;return 0!==ve.type&&(rt=Q.indexOf(ve.doc.key),Q=Q.delete(ve.doc.key)),1!==ve.type&&(Q=Q.add(ve.doc),Wt=Q.indexOf(ve.doc.key)),{type:bt(ve.type),doc:Oe,oldIndex:rt,newIndex:Wt}})}}(this,p),this._cachedChangesIncludeMetadataChanges=p),this._cachedChanges}}function bt(S){switch(S){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return On()}}function fn(S){S=xa(S,$l);const a=xa(S.firestore,ic);return function pm(S,a,p={}){const w=new Ge;return S.asyncQueue.enqueueAndForget((0,V.A)(function*(){return function(U,Q,ve,Oe,rt){const Wt=new N0({next:pi=>{Q.enqueueAndForget(()=>L0(U,In));const no=pi.docs.has(ve);!no&&pi.fromCache?rt.reject(new Ae(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):no&&pi.fromCache&&Oe&&"server"===Oe.source?rt.reject(new Ae(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):rt.resolve(pi)},error:pi=>rt.reject(pi)}),In=new af(gr(ve.path),Wt,{includeMetadataChanges:!0,ra:!0});return Sp(U,In)}(yield Xl(S),S.asyncQueue,a,p,w)})),w.promise}(oc(a),S._key).then(p=>vo(a,S,p))}class mn extends y{constructor(a){super(),this.firestore=a}convertBytes(a){return new Np(a)}convertReference(a){const p=this.convertDocumentKey(a,this.firestore._databaseId);return new $l(this.firestore,null,p)}}function uo(S,a,p){S=xa(S,$l);const w=xa(S.firestore,ic),P=function h(S,a,p){let w;return w=S?p&&(p.merge||p.mergeFields)?S.toFirestore(a,p):S.toFirestore(a):a,w}(S.converter,a,p);return Yo(w,[vf(Ih(w),"setDoc",S._key,P,null!==S.converter,p).toMutation(S._key,Za.none())])}function ur(S){return Yo(xa(S.firestore,ic),[new Cr(S._key,Za.none())])}function Qi(S,...a){var p,w,P;S=(0,qe.Ku)(S);let U={includeMetadataChanges:!1,source:"default"},Q=0;"object"!=typeof a[Q]||qf(a[Q])||(U=a[Q],Q++);const ve={includeMetadataChanges:U.includeMetadataChanges,source:U.source};if(qf(a[Q])){const In=a[Q];a[Q]=null===(p=In.next)||void 0===p?void 0:p.bind(In),a[Q+1]=null===(w=In.error)||void 0===w?void 0:w.bind(In),a[Q+2]=null===(P=In.complete)||void 0===P?void 0:P.bind(In)}let Oe,rt,Wt;if(S instanceof $l)rt=xa(S.firestore,ic),Wt=gr(S._key.path),Oe={next:In=>{a[Q]&&a[Q](vo(rt,S,In))},error:a[Q+1],complete:a[Q+2]};else{const In=xa(S,Nu);rt=xa(In.firestore,ic),Wt=In._query;const pi=new mn(rt);Oe={next:no=>{a[Q]&&a[Q](new pt(rt,pi,In,no))},error:a[Q+1],complete:a[Q+2]},function P2(S){if("L"===S.limitType&&0===S.explicitOrderBy.length)throw new Ae(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(S._query)}return function(pi,no,Wo,Ir){const ar=new N0(Ir),Ps=new af(no,ar,Wo);return pi.asyncQueue.enqueueAndForget((0,V.A)(function*(){return Sp(yield Xl(pi),Ps)})),()=>{ar.$a(),pi.asyncQueue.enqueueAndForget((0,V.A)(function*(){return L0(yield Xl(pi),Ps)}))}}(oc(rt),Wt,ve,Oe)}function Yo(S,a){return function(w,P){const U=new Ge;return w.asyncQueue.enqueueAndForget((0,V.A)(function*(){return function Lf(S,a,p){return Ap.apply(this,arguments)}(yield function nc(S){return a0(S).then(a=>a.syncEngine)}(w),P,U)})),U.promise}(oc(S),a)}function vo(S,a,p){const w=p.docs.get(a._key),P=new mn(S);return new ut(S,P,a._key,w,new ze(p.hasPendingWrites,p.fromCache),a.converter)}!function(a,p=!0){Ot=se.MF,(0,se.om)(new ne.uA("firestore",(w,{instanceIdentifier:P,options:U})=>{const Q=w.getProvider("app").getImmediate(),ve=new ic(new cn(w.getProvider("auth-internal")),new jo(w.getProvider("app-check-internal")),function(rt,Wt){if(!Object.prototype.hasOwnProperty.apply(rt.options,["projectId"]))throw new Ae(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ld(rt.options.projectId,Wt)}(Q,P),Q);return U=Object.assign({useFetchStreams:p},U),ve._setSettings(U),ve},"PUBLIC").setMultipleInstances(!0)),(0,se.KO)(qn,"4.6.4",a),(0,se.KO)(qn,"4.6.4","esm2017")}()},5873:(Go,Kn,_e)=>{"use strict";_e.d(Kn,{$P:()=>S3,AUS:()=>Ks,EKF:()=>Xt,Jns:()=>Bm,O0q:()=>k2,Ow_:()=>x5,P0k:()=>Ci,P1A:()=>Rf,PFj:()=>t2,UIk:()=>Td,UN$:()=>o4,WQq:()=>l,XjR:()=>hd,Yvo:()=>Km,dG8:()=>lh,eso:()=>ah,fZ:()=>m1,jBE:()=>Gv,jew:()=>P2,rqk:()=>De,tN8:()=>D6,u8Q:()=>Yu,wAZ:()=>B4,y_k:()=>u2,z_V:()=>_p});const l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Xt="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Td="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",Ks="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm108.25 138.29l-134.4 160a16 16 0 01-12 5.71h-.27a16 16 0 01-11.89-5.3l-57.6-64a16 16 0 1123.78-21.4l45.29 50.32 122.59-145.91a16 16 0 0124.5 20.58z'/></svg>",Yu="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M464 128L240 384l-96-96M144 384l-96-96M368 128L232 284' class='ionicon-fill-none ionicon-stroke-width'/></svg>",m1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",Ci="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",k2="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><rect x='96' y='32' width='320' height='448' rx='48' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M208 80h96' class='ionicon-fill-none ionicon-stroke-width'/><path d='M333.48 284.51A39.65 39.65 0 00304 272c-11.6 0-22.09 4.41-29.54 12.43s-11.2 19.12-10.34 31C265.83 338.91 283.72 358 304 358s38.14-19.09 39.87-42.55c.88-11.78-2.82-22.77-10.39-30.94zM371.69 448H236.31a12.05 12.05 0 01-9.31-4.17 13 13 0 01-2.76-10.92c3.25-17.56 13.38-32.31 29.3-42.66C267.68 381.06 285.6 376 304 376s36.32 5.06 50.46 14.25c15.92 10.35 26.05 25.1 29.3 42.66a13 13 0 01-2.76 10.92 12.05 12.05 0 01-9.31 4.17z'/></svg>",Km="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 480H48a32 32 0 01-32-32V112a32 32 0 0132-32h16a32 32 0 0132 32v336a32 32 0 01-32 32zM240 176a32 32 0 00-32-32h-64a32 32 0 00-32 32v28a4 4 0 004 4h120a4 4 0 004-4zM112 448a32 32 0 0032 32h64a32 32 0 0032-32v-30a2 2 0 00-2-2H114a2 2 0 00-2 2z'/><rect x='112' y='240' width='128' height='144' rx='2' ry='2'/><path d='M320 480h-32a32 32 0 01-32-32V64a32 32 0 0132-32h32a32 32 0 0132 32v384a32 32 0 01-32 32zM495.89 445.45l-32.23-340c-1.48-15.65-16.94-27-34.53-25.31l-31.85 3c-17.59 1.67-30.65 15.71-29.17 31.36l32.23 340c1.48 15.65 16.94 27 34.53 25.31l31.85-3c17.59-1.67 30.65-15.71 29.17-31.36z'/></svg>",hd="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M224 184h128M224 256h128M224 327h128' class='ionicon-fill-none ionicon-stroke-width'/><path d='M448 258c0-106-86-192-192-192S64 152 64 258s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='168' cy='184' r='8' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='168' cy='257' r='8' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='168' cy='328' r='8' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",t2="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M160 144h288M160 256h288M160 368h288' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='144' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='256' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='368' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",P2="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M256 96V56M256 456v-40' class='ionicon-fill-none'/><path d='M256 112a144 144 0 10144 144 144 144 0 00-144-144z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M416 256h40M56 256h40' class='ionicon-fill-none'/></svg>",o4="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48c-79.5 0-144 61.39-144 137 0 87 96 224.87 131.25 272.49a15.77 15.77 0 0025.5 0C304 409.89 400 272.07 400 185c0-75.61-64.5-137-144-137z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='192' r='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",ah="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 208v-95a80 80 0 00-160 0v95' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='208' width='320' height='272' rx='48' ry='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",_p="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M304 336v40a40 40 0 01-40 40H104a40 40 0 01-40-40V136a40 40 0 0140-40h152c22.09 0 48 17.91 48 40v40M368 336l80-80-80-80M176 256h256' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",lh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M313.27 124.64L198.73 51.36a32 32 0 00-29.28.35L56.51 127.49A16 16 0 0048 141.63v295.8a16 16 0 0023.49 14.14l97.82-63.79a32 32 0 0129.5-.24l111.86 73a32 32 0 0029.27-.11l115.43-75.94a16 16 0 008.63-14.2V74.57a16 16 0 00-23.49-14.14l-98 63.86a32 32 0 01-29.24.35zM328 128v336M184 48v336' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",De="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M427.68 351.43C402 320 383.87 304 383.87 217.35 383.87 138 343.35 109.73 310 96c-4.43-1.82-8.6-6-9.95-10.55C294.2 65.54 277.8 48 256 48s-38.21 17.55-44 37.47c-1.35 4.6-5.52 8.71-9.95 10.53-33.39 13.75-73.87 41.92-73.87 121.35C128.13 304 110 320 84.32 351.43 73.68 364.45 83 384 101.61 384h308.88c18.51 0 27.77-19.61 17.19-32.57zM320 384v16a64 64 0 01-128 0v-16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",B4="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",u2="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 96a80 80 0 10-96 78.39v283.17a32.09 32.09 0 002.49 12.38l10.07 24a3.92 3.92 0 006.88 0l10.07-24a32.09 32.09 0 002.49-12.38V174.39A80.13 80.13 0 00336 96zm-56 0a24 24 0 1124-24 24 24 0 01-24 24z'/></svg>",Bm="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm74.77 217.3l-114.45 69.14a10.78 10.78 0 01-16.32-9.31V186.87a10.78 10.78 0 0116.32-9.31l114.45 69.14a10.89 10.89 0 010 18.6z'/></svg>",x5="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='36'/><path d='M190.24 341.77a22 22 0 01-16.46-7.38 118 118 0 010-156.76 22 22 0 1132.87 29.24 74 74 0 000 98.29 22 22 0 01-16.43 36.61zM321.76 341.77a22 22 0 01-16.43-36.61 74 74 0 000-98.29 22 22 0 1132.87-29.24 118 118 0 010 156.76 22 22 0 01-16.44 7.38z'/><path d='M139.29 392.72a21.92 21.92 0 01-16.08-7 190 190 0 010-259.49 22 22 0 1132.13 30.06 146 146 0 000 199.38 22 22 0 01-16.06 37zM372.71 392.72a22 22 0 01-16.06-37 146 146 0 000-199.38 22 22 0 1132.13-30.06 190 190 0 010 259.49 21.92 21.92 0 01-16.07 6.95z'/><path d='M429 438a22 22 0 01-16.39-36.67 218.34 218.34 0 000-290.66 22 22 0 0132.78-29.34 262.34 262.34 0 010 349.34A22 22 0 01429 438zM83 438a21.94 21.94 0 01-16.41-7.33 262.34 262.34 0 010-349.34 22 22 0 0132.78 29.34 218.34 218.34 0 000 290.66A22 22 0 0183 438z'/></svg>",S3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z'/></svg>",Gv="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",D6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z'/></svg>",Rf="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M80 112h352' class='ionicon-stroke-width'/><path d='M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>"},467:(Go,Kn,_e)=>{"use strict";function V(ne,l,qe,Y,ft,Xt,Ut){try{var It=ne[Xt](Ut),C=It.value}catch(At){return void qe(At)}It.done?l(C):Promise.resolve(C).then(Y,ft)}function se(ne){return function(){var l=this,qe=arguments;return new Promise(function(Y,ft){var Xt=ne.apply(l,qe);function Ut(C){V(Xt,Y,ft,Ut,It,"next",C)}function It(C){V(Xt,Y,ft,Ut,It,"throw",C)}Ut(void 0)})}}_e.d(Kn,{A:()=>se})},9842:(Go,Kn,_e)=>{"use strict";function V(qe){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Y){return typeof Y}:function(Y){return Y&&"function"==typeof Symbol&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(qe)}function l(qe,Y,ft){return(Y=function ne(qe){var Y=function se(qe,Y){if("object"!=V(qe)||!qe)return qe;var ft=qe[Symbol.toPrimitive];if(void 0!==ft){var Xt=ft.call(qe,Y||"default");if("object"!=V(Xt))return Xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Y?String:Number)(qe)}(qe,"string");return"symbol"==V(Y)?Y:Y+""}(Y))in qe?Object.defineProperty(qe,Y,{value:ft,enumerable:!0,configurable:!0,writable:!0}):qe[Y]=ft,qe}_e.d(Kn,{A:()=>l})},1635:(Go,Kn,_e)=>{"use strict";function l(Ae,Ge){var tt={};for(var zt in Ae)Object.prototype.hasOwnProperty.call(Ae,zt)&&Ge.indexOf(zt)<0&&(tt[zt]=Ae[zt]);if(null!=Ae&&"function"==typeof Object.getOwnPropertySymbols){var Yn=0;for(zt=Object.getOwnPropertySymbols(Ae);Yn<zt.length;Yn++)Ge.indexOf(zt[Yn])<0&&Object.prototype.propertyIsEnumerable.call(Ae,zt[Yn])&&(tt[zt[Yn]]=Ae[zt[Yn]])}return tt}function qe(Ae,Ge,tt,zt){var _o,Yn=arguments.length,cn=Yn<3?Ge:null===zt?zt=Object.getOwnPropertyDescriptor(Ge,tt):zt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)cn=Reflect.decorate(Ae,Ge,tt,zt);else for(var to=Ae.length-1;to>=0;to--)(_o=Ae[to])&&(cn=(Yn<3?_o(cn):Yn>3?_o(Ge,tt,cn):_o(Ge,tt))||cn);return Yn>3&&cn&&Object.defineProperty(Ge,tt,cn),cn}function At(Ae,Ge,tt,zt){return new(tt||(tt=Promise))(function(cn,_o){function to(zr){try{jo(zt.next(zr))}catch(Mi){_o(Mi)}}function pr(zr){try{jo(zt.throw(zr))}catch(Mi){_o(Mi)}}function jo(zr){zr.done?cn(zr.value):function Yn(cn){return cn instanceof tt?cn:new tt(function(_o){_o(cn)})}(zr.value).then(to,pr)}jo((zt=zt.apply(Ae,Ge||[])).next())})}function qn(Ae){return this instanceof qn?(this.v=Ae,this):new qn(Ae)}function xt(Ae,Ge,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Yn,zt=tt.apply(Ae,Ge||[]),cn=[];return Yn={},to("next"),to("throw"),to("return",function _o($i){return function(br){return Promise.resolve(br).then($i,Mi)}}),Yn[Symbol.asyncIterator]=function(){return this},Yn;function to($i,br){zt[$i]&&(Yn[$i]=function(Jr){return new Promise(function(Li,yi){cn.push([$i,Jr,Li,yi])>1||pr($i,Jr)})},br&&(Yn[$i]=br(Yn[$i])))}function pr($i,br){try{!function jo($i){$i.value instanceof qn?Promise.resolve($i.value.v).then(zr,Mi):rs(cn[0][2],$i)}(zt[$i](br))}catch(Jr){rs(cn[0][3],Jr)}}function zr($i){pr("next",$i)}function Mi($i){pr("throw",$i)}function rs($i,br){$i(br),cn.shift(),cn.length&&pr(cn[0][0],cn[0][1])}}function vn(Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,Ge=Ae[Symbol.asyncIterator];return Ge?Ge.call(Ae):(Ae=function xn(Ae){var Ge="function"==typeof Symbol&&Symbol.iterator,tt=Ge&&Ae[Ge],zt=0;if(tt)return tt.call(Ae);if(Ae&&"number"==typeof Ae.length)return{next:function(){return Ae&&zt>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[zt++],done:!Ae}}};throw new TypeError(Ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ae),tt={},zt("next"),zt("throw"),zt("return"),tt[Symbol.asyncIterator]=function(){return this},tt);function zt(cn){tt[cn]=Ae[cn]&&function(_o){return new Promise(function(to,pr){!function Yn(cn,_o,to,pr){Promise.resolve(pr).then(function(jo){cn({value:jo,done:to})},_o)}(to,pr,(_o=Ae[cn](_o)).done,_o.value)})}}}_e.d(Kn,{AQ:()=>xt,Cg:()=>qe,N3:()=>qn,Tt:()=>l,sH:()=>At,xN:()=>vn}),"function"==typeof SuppressedError&&SuppressedError}},Go=>{Go(Go.s=1016)}]);